var qJ=Object.defineProperty;var HJ=(t,e,r)=>e in t?qJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var jO=(t,e,r)=>HJ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as GJ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K5={exports:{}},Hp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AO;function WJ(){if(AO)return Hp;AO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Hp.Fragment=e,Hp.jsx=r,Hp.jsxs=r,Hp}var EO;function KJ(){return EO||(EO=1,K5.exports=WJ()),K5.exports}var s=KJ(),X5={exports:{}},fr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kO;function XJ(){if(kO)return fr;kO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),x=Symbol.iterator;function y(X){return X===null||typeof X!="object"?null:(X=x&&X[x]||X["@@iterator"],typeof X=="function"?X:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,N={};function A(X,ae,ne){this.props=X,this.context=ae,this.refs=N,this.updater=ne||S}A.prototype.isReactComponent={},A.prototype.setState=function(X,ae){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ae,"setState")},A.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function R(){}R.prototype=A.prototype;function O(X,ae,ne){this.props=X,this.context=ae,this.refs=N,this.updater=ne||S}var L=O.prototype=new R;L.constructor=O,w(L,A.prototype),L.isPureReactComponent=!0;var I=Array.isArray;function k(){}var E={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function C(X,ae,ne){var ve=ne.ref;return{$$typeof:t,type:X,key:ae,ref:ve!==void 0?ve:null,props:ne}}function q(X,ae){return C(X.type,ae,X.props)}function D(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function $(X){var ae={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ne){return ae[ne]})}var B=/\/+/g;function V(X,ae){return typeof X=="object"&&X!==null&&X.key!=null?$(""+X.key):ae.toString(36)}function W(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(k,k):(X.status="pending",X.then(function(ae){X.status==="pending"&&(X.status="fulfilled",X.value=ae)},function(ae){X.status==="pending"&&(X.status="rejected",X.reason=ae)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function G(X,ae,ne,ve,pe){var Be=typeof X;(Be==="undefined"||Be==="boolean")&&(X=null);var Ue=!1;if(X===null)Ue=!0;else switch(Be){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(X.$$typeof){case t:case e:Ue=!0;break;case p:return Ue=X._init,G(Ue(X._payload),ae,ne,ve,pe)}}if(Ue)return pe=pe(X),Ue=ve===""?"."+V(X,0):ve,I(pe)?(ne="",Ue!=null&&(ne=Ue.replace(B,"$&/")+"/"),G(pe,ae,ne,"",function(He){return He})):pe!=null&&(D(pe)&&(pe=q(pe,ne+(pe.key==null||X&&X.key===pe.key?"":(""+pe.key).replace(B,"$&/")+"/")+Ue)),ae.push(pe)),1;Ue=0;var Fe=ve===""?".":ve+":";if(I(X))for(var Ne=0;Ne<X.length;Ne++)ve=X[Ne],Be=Fe+V(ve,Ne),Ue+=G(ve,ae,ne,Be,pe);else if(Ne=y(X),typeof Ne=="function")for(X=Ne.call(X),Ne=0;!(ve=X.next()).done;)ve=ve.value,Be=Fe+V(ve,Ne++),Ue+=G(ve,ae,ne,Be,pe);else if(Be==="object"){if(typeof X.then=="function")return G(W(X),ae,ne,ve,pe);throw ae=String(X),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function Y(X,ae,ne){if(X==null)return X;var ve=[],pe=0;return G(X,ve,"","",function(Be){return ae.call(ne,Be,pe++)}),ve}function re(X){if(X._status===-1){var ae=X._result;ae=ae(),ae.then(function(ne){(X._status===0||X._status===-1)&&(X._status=1,X._result=ne)},function(ne){(X._status===0||X._status===-1)&&(X._status=2,X._result=ne)}),X._status===-1&&(X._status=0,X._result=ae)}if(X._status===1)return X._result.default;throw X._result}var ce=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},de={map:Y,forEach:function(X,ae,ne){Y(X,function(){ae.apply(this,arguments)},ne)},count:function(X){var ae=0;return Y(X,function(){ae++}),ae},toArray:function(X){return Y(X,function(ae){return ae})||[]},only:function(X){if(!D(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return fr.Activity=m,fr.Children=de,fr.Component=A,fr.Fragment=r,fr.Profiler=a,fr.PureComponent=O,fr.StrictMode=n,fr.Suspense=d,fr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,fr.__COMPILER_RUNTIME={__proto__:null,c:function(X){return E.H.useMemoCache(X)}},fr.cache=function(X){return function(){return X.apply(null,arguments)}},fr.cacheSignal=function(){return null},fr.cloneElement=function(X,ae,ne){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var ve=w({},X.props),pe=X.key;if(ae!=null)for(Be in ae.key!==void 0&&(pe=""+ae.key),ae)!j.call(ae,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ae.ref===void 0||(ve[Be]=ae[Be]);var Be=arguments.length-2;if(Be===1)ve.children=ne;else if(1<Be){for(var Ue=Array(Be),Fe=0;Fe<Be;Fe++)Ue[Fe]=arguments[Fe+2];ve.children=Ue}return C(X.type,pe,ve)},fr.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:i,_context:X},X},fr.createElement=function(X,ae,ne){var ve,pe={},Be=null;if(ae!=null)for(ve in ae.key!==void 0&&(Be=""+ae.key),ae)j.call(ae,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(pe[ve]=ae[ve]);var Ue=arguments.length-2;if(Ue===1)pe.children=ne;else if(1<Ue){for(var Fe=Array(Ue),Ne=0;Ne<Ue;Ne++)Fe[Ne]=arguments[Ne+2];pe.children=Fe}if(X&&X.defaultProps)for(ve in Ue=X.defaultProps,Ue)pe[ve]===void 0&&(pe[ve]=Ue[ve]);return C(X,Be,pe)},fr.createRef=function(){return{current:null}},fr.forwardRef=function(X){return{$$typeof:c,render:X}},fr.isValidElement=D,fr.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:re}},fr.memo=function(X,ae){return{$$typeof:h,type:X,compare:ae===void 0?null:ae}},fr.startTransition=function(X){var ae=E.T,ne={};E.T=ne;try{var ve=X(),pe=E.S;pe!==null&&pe(ne,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(k,ce)}catch(Be){ce(Be)}finally{ae!==null&&ne.types!==null&&(ae.types=ne.types),E.T=ae}},fr.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},fr.use=function(X){return E.H.use(X)},fr.useActionState=function(X,ae,ne){return E.H.useActionState(X,ae,ne)},fr.useCallback=function(X,ae){return E.H.useCallback(X,ae)},fr.useContext=function(X){return E.H.useContext(X)},fr.useDebugValue=function(){},fr.useDeferredValue=function(X,ae){return E.H.useDeferredValue(X,ae)},fr.useEffect=function(X,ae){return E.H.useEffect(X,ae)},fr.useEffectEvent=function(X){return E.H.useEffectEvent(X)},fr.useId=function(){return E.H.useId()},fr.useImperativeHandle=function(X,ae,ne){return E.H.useImperativeHandle(X,ae,ne)},fr.useInsertionEffect=function(X,ae){return E.H.useInsertionEffect(X,ae)},fr.useLayoutEffect=function(X,ae){return E.H.useLayoutEffect(X,ae)},fr.useMemo=function(X,ae){return E.H.useMemo(X,ae)},fr.useOptimistic=function(X,ae){return E.H.useOptimistic(X,ae)},fr.useReducer=function(X,ae,ne){return E.H.useReducer(X,ae,ne)},fr.useRef=function(X){return E.H.useRef(X)},fr.useState=function(X){return E.H.useState(X)},fr.useSyncExternalStore=function(X,ae,ne){return E.H.useSyncExternalStore(X,ae,ne)},fr.useTransition=function(){return E.H.useTransition()},fr.version="19.2.4",fr}var CO;function FA(){return CO||(CO=1,X5.exports=XJ()),X5.exports}var T=FA();const ie=sn(T);var Q5={exports:{}},Gp={},Y5={exports:{}},J5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OO;function QJ(){return OO||(OO=1,(function(t){function e(G,Y){var re=G.length;G.push(Y);e:for(;0<re;){var ce=re-1>>>1,de=G[ce];if(0<a(de,Y))G[ce]=Y,G[re]=de,re=ce;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Y=G[0],re=G.pop();if(re!==Y){G[0]=re;e:for(var ce=0,de=G.length,X=de>>>1;ce<X;){var ae=2*(ce+1)-1,ne=G[ae],ve=ae+1,pe=G[ve];if(0>a(ne,re))ve<de&&0>a(pe,ne)?(G[ce]=pe,G[ve]=re,ce=ve):(G[ce]=ne,G[ae]=re,ce=ae);else if(ve<de&&0>a(pe,re))G[ce]=pe,G[ve]=re,ce=ve;else break e}}return Y}function a(G,Y){var re=G.sortIndex-Y.sortIndex;return re!==0?re:G.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,m=null,x=3,y=!1,S=!1,w=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(G){for(var Y=r(h);Y!==null;){if(Y.callback===null)n(h);else if(Y.startTime<=G)n(h),Y.sortIndex=Y.expirationTime,e(d,Y);else break;Y=r(h)}}function I(G){if(w=!1,L(G),!S)if(r(d)!==null)S=!0,k||(k=!0,$());else{var Y=r(h);Y!==null&&W(I,Y.startTime-G)}}var k=!1,E=-1,j=5,C=-1;function q(){return N?!0:!(t.unstable_now()-C<j)}function D(){if(N=!1,k){var G=t.unstable_now();C=G;var Y=!0;try{e:{S=!1,w&&(w=!1,R(E),E=-1),y=!0;var re=x;try{t:{for(L(G),m=r(d);m!==null&&!(m.expirationTime>G&&q());){var ce=m.callback;if(typeof ce=="function"){m.callback=null,x=m.priorityLevel;var de=ce(m.expirationTime<=G);if(G=t.unstable_now(),typeof de=="function"){m.callback=de,L(G),Y=!0;break t}m===r(d)&&n(d),L(G)}else n(d);m=r(d)}if(m!==null)Y=!0;else{var X=r(h);X!==null&&W(I,X.startTime-G),Y=!1}}break e}finally{m=null,x=re,y=!1}Y=void 0}}finally{Y?$():k=!1}}}var $;if(typeof O=="function")$=function(){O(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=D,$=function(){V.postMessage(null)}}else $=function(){A(D,0)};function W(G,Y){E=A(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(G){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var re=x;x=Y;try{return G()}finally{x=re}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=x;x=G;try{return Y()}finally{x=re}},t.unstable_scheduleCallback=function(G,Y,re){var ce=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ce+re:ce):re=ce,G){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=re+de,G={id:p++,callback:Y,priorityLevel:G,startTime:re,expirationTime:de,sortIndex:-1},re>ce?(G.sortIndex=re,e(h,G),r(d)===null&&G===r(h)&&(w?(R(E),E=-1):w=!0,W(I,re-ce))):(G.sortIndex=de,e(d,G),S||y||(S=!0,k||(k=!0,$()))),G},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(G){var Y=x;return function(){var re=x;x=Y;try{return G.apply(this,arguments)}finally{x=re}}}})(J5)),J5}var IO;function YJ(){return IO||(IO=1,Y5.exports=QJ()),Y5.exports}var Z5={exports:{}},Ni={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RO;function JJ(){if(RO)return Ni;RO=1;var t=FA();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ni.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ni.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},Ni.flushSync=function(d){var h=o.T,p=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=p,n.d.f()}},Ni.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Ni.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ni.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:x,fetchPriority:y}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ni.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Ni.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ni.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Ni.requestFormReset=function(d){n.d.r(d)},Ni.unstable_batchedUpdates=function(d,h){return d(h)},Ni.useFormState=function(d,h,p){return o.H.useFormState(d,h,p)},Ni.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ni.version="19.2.4",Ni}var MO;function TV(){if(MO)return Z5.exports;MO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Z5.exports=JJ(),Z5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function ZJ(){if(DO)return Gp;DO=1;var t=YJ(),e=FA(),r=TV();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var _=b.alternate;if(_===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===f)return d(b),l;if(_===g)return d(b),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=_;else{for(var U=!1,Q=b.child;Q;){if(Q===f){U=!0,f=b,g=_;break}if(Q===g){U=!0,g=b,f=_;break}Q=Q.sibling}if(!U){for(Q=_.child;Q;){if(Q===f){U=!0,f=_,g=b;break}if(Q===g){U=!0,g=_,f=b;break}Q=Q.sibling}if(!U)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function $(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var B=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===B?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case A:return"Profiler";case N:return"StrictMode";case I:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case S:return"Portal";case O:return l.displayName||"Context";case R:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case E:return u=l.displayName||null,u!==null?u:V(l.type)||"Memo";case j:u=l._payload,l=l._init;try{return V(l(u))}catch{}}return null}var W=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},ce=[],de=-1;function X(l){return{current:l}}function ae(l){0>de||(l.current=ce[de],ce[de]=null,de--)}function ne(l,u){de++,ce[de]=l.current,l.current=u}var ve=X(null),pe=X(null),Be=X(null),Ue=X(null);function Fe(l,u){switch(ne(Be,u),ne(pe,l),ne(ve,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?X9(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=X9(u),l=Q9(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ae(ve),ne(ve,l)}function Ne(){ae(ve),ae(pe),ae(Be)}function He(l){l.memoizedState!==null&&ne(Ue,l);var u=ve.current,f=Q9(u,l.type);u!==f&&(ne(pe,l),ne(ve,f))}function Z(l){pe.current===l&&(ae(ve),ae(pe)),Ue.current===l&&(ae(Ue),Up._currentValue=re)}var te,be;function Se(l){if(te===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);te=u&&u[1]||"",be=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+be}var Ze=!1;function rt(l,u){if(!l||Ze)return"";Ze=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var et=function(){throw Error()};if(Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch($e){var De=$e}Reflect.construct(l,[],et)}else{try{et.call()}catch($e){De=$e}l.call(et.prototype)}}else{try{throw Error()}catch($e){De=$e}(et=l())&&typeof et.catch=="function"&&et.catch(function(){})}}catch($e){if($e&&De&&typeof $e.stack=="string")return[$e.stack,De.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),U=_[0],Q=_[1];if(U&&Q){var ue=U.split(`
`),Oe=Q.split(`
`);for(b=g=0;g<ue.length&&!ue[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Oe.length&&!Oe[b].includes("DetermineComponentFrameRoot");)b++;if(g===ue.length||b===Oe.length)for(g=ue.length-1,b=Oe.length-1;1<=g&&0<=b&&ue[g]!==Oe[b];)b--;for(;1<=g&&0<=b;g--,b--)if(ue[g]!==Oe[b]){if(g!==1||b!==1)do if(g--,b--,0>b||ue[g]!==Oe[b]){var Xe=`
`+ue[g].replace(" at new "," at ");return l.displayName&&Xe.includes("<anonymous>")&&(Xe=Xe.replace("<anonymous>",l.displayName)),Xe}while(1<=g&&0<=b);break}}}finally{Ze=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Se(f):""}function It(l,u){switch(l.tag){case 26:case 27:case 5:return Se(l.type);case 16:return Se("Lazy");case 13:return l.child!==u&&u!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return rt(l.type,!1);case 11:return rt(l.type.render,!1);case 1:return rt(l.type,!0);case 31:return Se("Activity");default:return""}}function At(l){try{var u="",f=null;do u+=It(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ft=Object.prototype.hasOwnProperty,qt=t.unstable_scheduleCallback,Dt=t.unstable_cancelCallback,tr=t.unstable_shouldYield,he=t.unstable_requestPaint,Ge=t.unstable_now,Pt=t.unstable_getCurrentPriorityLevel,Ke=t.unstable_ImmediatePriority,it=t.unstable_UserBlockingPriority,$t=t.unstable_NormalPriority,Nt=t.unstable_LowPriority,kr=t.unstable_IdlePriority,ye=t.log,ot=t.unstable_setDisableYieldValue,mt=null,Ct=null;function vt(l){if(typeof ye=="function"&&ot(l),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(mt,l)}catch{}}var tt=Math.clz32?Math.clz32:Vr,gr=Math.log,Gt=Math.LN2;function Vr(l){return l>>>=0,l===0?32:31-(gr(l)/Gt|0)|0}var cn=256,yr=262144,Qt=4194304;function Lt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function bt(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,_=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var Q=g&134217727;return Q!==0?(g=Q&~_,g!==0?b=Lt(g):(U&=Q,U!==0?b=Lt(U):f||(f=Q&~l,f!==0&&(b=Lt(f))))):(Q=g&~_,Q!==0?b=Lt(Q):U!==0?b=Lt(U):f||(f=g&~l,f!==0&&(b=Lt(f)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:b}function Fr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function tn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(){var l=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),l}function Cr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function xn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function dr(l,u,f,g,b,_){var U=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Q=l.entanglements,ue=l.expirationTimes,Oe=l.hiddenUpdates;for(f=U&~f;0<f;){var Xe=31-tt(f),et=1<<Xe;Q[Xe]=0,ue[Xe]=-1;var De=Oe[Xe];if(De!==null)for(Oe[Xe]=null,Xe=0;Xe<De.length;Xe++){var $e=De[Xe];$e!==null&&($e.lane&=-536870913)}f&=~et}g!==0&&Qn(l,g,0),_!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=_&~(U&~u))}function Qn(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-tt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function un(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-tt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function dn(l,u){var f=u&-u;return f=(f&42)!==0?1:Re(f),(f&(l.suspendedLanes|u))!==0?0:f}function Re(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Ye(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function qe(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:vO(l.type))}function hr(l,u){var f=Y.p;try{return Y.p=l,u()}finally{Y.p=f}}var Hr=Math.random().toString(36).slice(2),_r="__reactFiber$"+Hr,rn="__reactProps$"+Hr,yn="__reactContainer$"+Hr,pa="__reactEvents$"+Hr,ma="__reactListeners$"+Hr,ga="__reactHandles$"+Hr,hs="__reactResources$"+Hr,bi="__reactMarker$"+Hr;function _t(l){delete l[_r],delete l[rn],delete l[pa],delete l[ma],delete l[ga]}function fe(l){var u=l[_r];if(u)return u;for(var f=l.parentNode;f;){if(u=f[yn]||f[_r]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=nO(l);l!==null;){if(f=l[_r])return f;l=nO(l)}return u}l=f,f=l.parentNode}return null}function nt(l){if(l=l[_r]||l[yn]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function dt(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function rr(l){var u=l[hs];return u||(u=l[hs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function br(l){l[bi]=!0}var vn=new Set,nn={};function _n(l,u){zr(l,u),zr(l+"Capture",u)}function zr(l,u){for(nn[l]=u,l=0;l<u.length;l++)vn.add(u[l])}var Bs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fs={},ho={};function vl(l){return Ft.call(ho,l)?!0:Ft.call(fs,l)?!1:Bs.test(l)?ho[l]=!0:(fs[l]=!0,!1)}function ps(l,u,f){if(vl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function ms(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function Ba(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function ja(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function H(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function we(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,_=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(U){f=""+U,_.call(this,U)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(U){f=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function je(l){if(!l._valueTracker){var u=H(l)?"checked":"value";l._valueTracker=we(l,u,""+l[u])}}function Ee(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=H(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function pt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Rt=/[\n"\\]/g;function jt(l){return l.replace(Rt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function nr(l,u,f,g,b,_,U,Q){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+ja(u)):l.value!==""+ja(u)&&(l.value=""+ja(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?hn(l,U,ja(u)):f!=null?hn(l,U,ja(f)):g!=null&&l.removeAttribute("value"),b==null&&_!=null&&(l.defaultChecked=!!_),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.name=""+ja(Q):l.removeAttribute("name")}function Or(l,u,f,g,b,_,U,Q){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){je(l);return}f=f!=null?""+ja(f):"",u=u!=null?""+ja(u):f,Q||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=Q?l.checked:!!g,l.defaultChecked=!!g,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U),je(l)}function hn(l,u,f){u==="number"&&pt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function se(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+ja(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function xe(l,u,f){if(u!=null&&(u=""+ja(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+ja(f):""}function Le(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(W(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=ja(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),je(l)}function Pe(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var ht=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function or(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||ht.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Zt(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&or(l,b,g)}else for(var _ in u)u.hasOwnProperty(_)&&or(l,_,u[_])}function Mn(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $a=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dn(l){return $s.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Tn(){}var Fi=null;function Tr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var gs=null,wi=null;function Xx(l){var u=nt(l);if(u&&(l=u.stateNode)){var f=l[rn]||null;e:switch(l=u.stateNode,u.type){case"input":if(nr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+jt(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[rn]||null;if(!b)throw Error(n(90));nr(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ee(g)}break e;case"textarea":xe(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&se(l,!!f.multiple,u,!1)}}}var np=!1;function Qx(l,u,f){if(np)return l(u,f);np=!0;try{var g=l(u);return g}finally{if(np=!1,(gs!==null||wi!==null)&&(G1(),gs&&(u=gs,l=wi,wi=gs=null,Xx(u),l)))for(u=0;u<l.length;u++)Xx(l[u])}}function qi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[rn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ap=!1;if(fo)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){ap=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{ap=!1}var xs=null,C0=null,$o=null;function jc(){if($o)return $o;var l,u=C0,f=u.length,g,b="value"in xs?xs.value:xs.textContent,_=b.length;for(l=0;l<f&&u[l]===b[l];l++);var U=f-l;for(g=1;g<=U&&u[f-g]===b[_-g];g++);return $o=b.slice(l,1<g?1-g:void 0)}function Yu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Ac(){return!0}function Hn(){return!1}function Si(l){function u(f,g,b,_,U){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=_,this.target=U,this.currentTarget=null;for(var Q in l)l.hasOwnProperty(Q)&&(f=l[Q],this[Q]=f?f(_):_[Q]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ac:Hn,this.isPropagationStopped=Hn,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),u}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=Si(bl),Ec=m({},bl,{view:0,detail:0}),Yx=Si(Ec),kc,O0,ki,Zu=m({},Ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ki&&(ki&&l.type==="mousemove"?(kc=l.screenX-ki.screenX,O0=l.screenY-ki.screenY):O0=kc=0,ki=l),kc)},movementY:function(l){return"movementY"in l?l.movementY:O0}}),Jx=Si(Zu),ed=m({},Zu,{dataTransfer:0}),Zx=Si(ed),ip=m({},Ec,{relatedTarget:0}),Cc=Si(ip),e1=m({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),I0=Si(e1),e4=m({},bl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),t1=Si(e4),td=m({},bl,{data:0}),sp=Si(td),r1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},op={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=lp[l])?!!u[l]:!1}function Oc(){return n1}var a1=m({},Ec,{key:function(l){if(l.key){var u=r1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Yu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?op[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(l){return l.type==="keypress"?Yu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Yu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),i1=Si(a1),wl=m({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=Si(wl),s1=m({},Ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),o1=Si(s1),l1=m({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R0=Si(l1),Ci=m({},Zu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),c1=Si(Ci),u1=m({},bl,{newState:0,oldState:0}),Ic=Si(u1),v=[9,13,27,32],P=fo&&"CompositionEvent"in window,F=null;fo&&"documentMode"in document&&(F=document.documentMode);var ee=fo&&"TextEvent"in window&&!F,Te=fo&&(!P||F&&8<F&&11>=F),Ve=" ",gt=!1;function fn(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aa(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ar=!1;function Ja(l,u){switch(l){case"compositionend":return Aa(u);case"keypress":return u.which!==32?null:(gt=!0,Ve);case"textInput":return l=u.data,l===Ve&&gt?null:l;default:return null}}function Za(l,u){if(Ar)return l==="compositionend"||!P&&fn(l,u)?(l=jc(),$o=C0=xs=null,Ar=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Te&&u.locale!=="ko"?null:u.data;default:return null}}var Rc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Rc[l.type]:u==="textarea"}function rd(l,u,f,g){gs?wi?wi.push(g):wi=[g]:gs=g,u=Z1(u,"onChange"),0<u.length&&(f=new Ju("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var Sl=null,up=null;function xY(l){F9(l,0)}function d1(l){var u=dt(l);if(Ee(u))return l}function lk(l,u){if(l==="change")return u}var ck=!1;if(fo){var t4;if(fo){var r4="oninput"in document;if(!r4){var uk=document.createElement("div");uk.setAttribute("oninput","return;"),r4=typeof uk.oninput=="function"}t4=r4}else t4=!1;ck=t4&&(!document.documentMode||9<document.documentMode)}function dk(){Sl&&(Sl.detachEvent("onpropertychange",hk),up=Sl=null)}function hk(l){if(l.propertyName==="value"&&d1(up)){var u=[];rd(u,up,l,Tr(l)),Qx(xY,u)}}function yY(l,u,f){l==="focusin"?(dk(),Sl=u,up=f,Sl.attachEvent("onpropertychange",hk)):l==="focusout"&&dk()}function vY(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return d1(up)}function bY(l,u){if(l==="click")return d1(u)}function wY(l,u){if(l==="input"||l==="change")return d1(u)}function SY(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ys=typeof Object.is=="function"?Object.is:SY;function dp(l,u){if(ys(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!Ft.call(u,b)||!ys(l[b],u[b]))return!1}return!0}function fk(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function pk(l,u){var f=fk(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=fk(f)}}function mk(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?mk(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function gk(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=pt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=pt(l.document)}return u}function n4(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var NY=fo&&"documentMode"in document&&11>=document.documentMode,M0=null,a4=null,hp=null,i4=!1;function xk(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;i4||M0==null||M0!==pt(g)||(g=M0,"selectionStart"in g&&n4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),hp&&dp(hp,g)||(hp=g,g=Z1(a4,"onSelect"),0<g.length&&(u=new Ju("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=M0)))}function nd(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var D0={animationend:nd("Animation","AnimationEnd"),animationiteration:nd("Animation","AnimationIteration"),animationstart:nd("Animation","AnimationStart"),transitionrun:nd("Transition","TransitionRun"),transitionstart:nd("Transition","TransitionStart"),transitioncancel:nd("Transition","TransitionCancel"),transitionend:nd("Transition","TransitionEnd")},s4={},yk={};fo&&(yk=document.createElement("div").style,"AnimationEvent"in window||(delete D0.animationend.animation,delete D0.animationiteration.animation,delete D0.animationstart.animation),"TransitionEvent"in window||delete D0.transitionend.transition);function ad(l){if(s4[l])return s4[l];if(!D0[l])return l;var u=D0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in yk)return s4[l]=u[f];return l}var vk=ad("animationend"),bk=ad("animationiteration"),wk=ad("animationstart"),_Y=ad("transitionrun"),TY=ad("transitionstart"),jY=ad("transitioncancel"),Sk=ad("transitionend"),Nk=new Map,o4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o4.push("scrollEnd");function po(l,u){Nk.set(l,u),_n(u,[l])}var h1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},zs=[],P0=0,l4=0;function f1(){for(var l=P0,u=l4=P0=0;u<l;){var f=zs[u];zs[u++]=null;var g=zs[u];zs[u++]=null;var b=zs[u];zs[u++]=null;var _=zs[u];if(zs[u++]=null,g!==null&&b!==null){var U=g.pending;U===null?b.next=b:(b.next=U.next,U.next=b),g.pending=b}_!==0&&_k(f,b,_)}}function p1(l,u,f,g){zs[P0++]=l,zs[P0++]=u,zs[P0++]=f,zs[P0++]=g,l4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function c4(l,u,f,g){return p1(l,u,f,g),m1(l)}function id(l,u){return p1(l,null,null,u),m1(l)}function _k(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,_=l.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(b=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,b&&u!==null&&(b=31-tt(f),l=_.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),_):null}function m1(l){if(50<Mp)throw Mp=0,y5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var L0={};function AY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(l,u,f,g){return new AY(l,u,f,g)}function u4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Nl(l,u){var f=l.alternate;return f===null?(f=vs(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Tk(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function g1(l,u,f,g,b,_){var U=0;if(g=l,typeof l=="function")u4(l)&&(U=1);else if(typeof l=="string")U=IJ(l,f,ve.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case C:return l=vs(31,f,u,b),l.elementType=C,l.lanes=_,l;case w:return sd(f.children,b,_,u);case N:U=8,b|=24;break;case A:return l=vs(12,f,u,b|2),l.elementType=A,l.lanes=_,l;case I:return l=vs(13,f,u,b),l.elementType=I,l.lanes=_,l;case k:return l=vs(19,f,u,b),l.elementType=k,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case O:U=10;break e;case R:U=9;break e;case L:U=11;break e;case E:U=14;break e;case j:U=16,g=null;break e}U=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=vs(U,f,u,b),u.elementType=l,u.type=g,u.lanes=_,u}function sd(l,u,f,g){return l=vs(7,l,g,u),l.lanes=f,l}function d4(l,u,f){return l=vs(6,l,null,u),l.lanes=f,l}function jk(l){var u=vs(18,null,null,0);return u.stateNode=l,u}function h4(l,u,f){return u=vs(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Ak=new WeakMap;function Us(l,u){if(typeof l=="object"&&l!==null){var f=Ak.get(l);return f!==void 0?f:(u={value:l,source:u,stack:At(u)},Ak.set(l,u),u)}return{value:l,source:u,stack:At(u)}}var B0=[],$0=0,x1=null,fp=0,Vs=[],Fs=0,Mc=null,zo=1,Uo="";function _l(l,u){B0[$0++]=fp,B0[$0++]=x1,x1=l,fp=u}function Ek(l,u,f){Vs[Fs++]=zo,Vs[Fs++]=Uo,Vs[Fs++]=Mc,Mc=l;var g=zo;l=Uo;var b=32-tt(g)-1;g&=~(1<<b),f+=1;var _=32-tt(u)+b;if(30<_){var U=b-b%5;_=(g&(1<<U)-1).toString(32),g>>=U,b-=U,zo=1<<32-tt(u)+b|f<<b|g,Uo=_+l}else zo=1<<_|f<<b|g,Uo=l}function f4(l){l.return!==null&&(_l(l,1),Ek(l,1,0))}function p4(l){for(;l===x1;)x1=B0[--$0],B0[$0]=null,fp=B0[--$0],B0[$0]=null;for(;l===Mc;)Mc=Vs[--Fs],Vs[Fs]=null,Uo=Vs[--Fs],Vs[Fs]=null,zo=Vs[--Fs],Vs[Fs]=null}function kk(l,u){Vs[Fs++]=zo,Vs[Fs++]=Uo,Vs[Fs++]=Mc,zo=u.id,Uo=u.overflow,Mc=l}var oi=null,Gn=null,Ur=!1,Dc=null,qs=!1,m4=Error(n(519));function Pc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pp(Us(u,l)),m4}function Ck(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[_r]=l,u[rn]=g,f){case"dialog":Rr("cancel",u),Rr("close",u);break;case"iframe":case"object":case"embed":Rr("load",u);break;case"video":case"audio":for(f=0;f<Pp.length;f++)Rr(Pp[f],u);break;case"source":Rr("error",u);break;case"img":case"image":case"link":Rr("error",u),Rr("load",u);break;case"details":Rr("toggle",u);break;case"input":Rr("invalid",u),Or(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Rr("invalid",u);break;case"textarea":Rr("invalid",u),Le(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||W9(u.textContent,f)?(g.popover!=null&&(Rr("beforetoggle",u),Rr("toggle",u)),g.onScroll!=null&&Rr("scroll",u),g.onScrollEnd!=null&&Rr("scrollend",u),g.onClick!=null&&(u.onclick=Tn),u=!0):u=!1,u||Pc(l,!0)}function Ok(l){for(oi=l.return;oi;)switch(oi.tag){case 5:case 31:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:oi=oi.return}}function z0(l){if(l!==oi)return!1;if(!Ur)return Ok(l),Ur=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||R5(l.type,l.memoizedProps)),f=!f),f&&Gn&&Pc(l),Ok(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Gn=rO(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Gn=rO(l)}else u===27?(u=Gn,Qc(l.type)?(l=B5,B5=null,Gn=l):Gn=u):Gn=oi?Gs(l.stateNode.nextSibling):null;return!0}function od(){Gn=oi=null,Ur=!1}function g4(){var l=Dc;return l!==null&&(Xi===null?Xi=l:Xi.push.apply(Xi,l),Dc=null),l}function pp(l){Dc===null?Dc=[l]:Dc.push(l)}var x4=X(null),ld=null,Tl=null;function Lc(l,u,f){ne(x4,u._currentValue),u._currentValue=f}function jl(l){l._currentValue=x4.current,ae(x4)}function y4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function v4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var _=b.dependencies;if(_!==null){var U=b.child;_=_.firstContext;e:for(;_!==null;){var Q=_;_=b;for(var ue=0;ue<u.length;ue++)if(Q.context===u[ue]){_.lanes|=f,Q=_.alternate,Q!==null&&(Q.lanes|=f),y4(_.return,f,l),g||(U=null);break e}_=Q.next}}else if(b.tag===18){if(U=b.return,U===null)throw Error(n(341));U.lanes|=f,_=U.alternate,_!==null&&(_.lanes|=f),y4(U,f,l),U=null}else U=b.child;if(U!==null)U.return=b;else for(U=b;U!==null;){if(U===l){U=null;break}if(b=U.sibling,b!==null){b.return=U.return,U=b;break}U=U.return}b=U}}function U0(l,u,f,g){l=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var U=b.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var Q=b.type;ys(b.pendingProps.value,U.value)||(l!==null?l.push(Q):l=[Q])}}else if(b===Ue.current){if(U=b.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Up):l=[Up])}b=b.return}l!==null&&v4(u,l,f,g),u.flags|=262144}function y1(l){for(l=l.firstContext;l!==null;){if(!ys(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function cd(l){ld=l,Tl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function li(l){return Ik(ld,l)}function v1(l,u){return ld===null&&cd(l),Ik(l,u)}function Ik(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},Tl===null){if(l===null)throw Error(n(308));Tl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Tl=Tl.next=u;return f}var EY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},kY=t.unstable_scheduleCallback,CY=t.unstable_NormalPriority,Ea={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b4(){return{controller:new EY,data:new Map,refCount:0}}function mp(l){l.refCount--,l.refCount===0&&kY(CY,function(){l.controller.abort()})}var gp=null,w4=0,V0=0,F0=null;function OY(l,u){if(gp===null){var f=gp=[];w4=0,V0=_5(),F0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return w4++,u.then(Rk,Rk),u}function Rk(){if(--w4===0&&gp!==null){F0!==null&&(F0.status="fulfilled");var l=gp;gp=null,V0=0,F0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function IY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var Mk=G.S;G.S=function(l,u){x9=Ge(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&OY(l,u),Mk!==null&&Mk(l,u)};var ud=X(null);function S4(){var l=ud.current;return l!==null?l:Pn.pooledCache}function b1(l,u){u===null?ne(ud,ud.current):ne(ud,u.pool)}function Dk(){var l=S4();return l===null?null:{parent:Ea._currentValue,pool:l}}var q0=Error(n(460)),N4=Error(n(474)),w1=Error(n(542)),S1={then:function(){}};function Pk(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Lk(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(Tn,Tn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$k(l),l;default:if(typeof u.status=="string")u.then(Tn,Tn);else{if(l=Pn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,$k(l),l}throw hd=u,q0}}function dd(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(hd=f,q0):f}}var hd=null;function Bk(){if(hd===null)throw Error(n(459));var l=hd;return hd=null,l}function $k(l){if(l===q0||l===w1)throw Error(n(483))}var H0=null,xp=0;function N1(l){var u=xp;return xp+=1,H0===null&&(H0=[]),Lk(H0,l,u)}function yp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function _1(l,u){throw u.$$typeof===x?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function zk(l){function u(_e,me){if(l){var ke=_e.deletions;ke===null?(_e.deletions=[me],_e.flags|=16):ke.push(me)}}function f(_e,me){if(!l)return null;for(;me!==null;)u(_e,me),me=me.sibling;return null}function g(_e){for(var me=new Map;_e!==null;)_e.key!==null?me.set(_e.key,_e):me.set(_e.index,_e),_e=_e.sibling;return me}function b(_e,me){return _e=Nl(_e,me),_e.index=0,_e.sibling=null,_e}function _(_e,me,ke){return _e.index=ke,l?(ke=_e.alternate,ke!==null?(ke=ke.index,ke<me?(_e.flags|=67108866,me):ke):(_e.flags|=67108866,me)):(_e.flags|=1048576,me)}function U(_e){return l&&_e.alternate===null&&(_e.flags|=67108866),_e}function Q(_e,me,ke,Je){return me===null||me.tag!==6?(me=d4(ke,_e.mode,Je),me.return=_e,me):(me=b(me,ke),me.return=_e,me)}function ue(_e,me,ke,Je){var Ht=ke.type;return Ht===w?Xe(_e,me,ke.props.children,Je,ke.key):me!==null&&(me.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===j&&dd(Ht)===me.type)?(me=b(me,ke.props),yp(me,ke),me.return=_e,me):(me=g1(ke.type,ke.key,ke.props,null,_e.mode,Je),yp(me,ke),me.return=_e,me)}function Oe(_e,me,ke,Je){return me===null||me.tag!==4||me.stateNode.containerInfo!==ke.containerInfo||me.stateNode.implementation!==ke.implementation?(me=h4(ke,_e.mode,Je),me.return=_e,me):(me=b(me,ke.children||[]),me.return=_e,me)}function Xe(_e,me,ke,Je,Ht){return me===null||me.tag!==7?(me=sd(ke,_e.mode,Je,Ht),me.return=_e,me):(me=b(me,ke),me.return=_e,me)}function et(_e,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=d4(""+me,_e.mode,ke),me.return=_e,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case y:return ke=g1(me.type,me.key,me.props,null,_e.mode,ke),yp(ke,me),ke.return=_e,ke;case S:return me=h4(me,_e.mode,ke),me.return=_e,me;case j:return me=dd(me),et(_e,me,ke)}if(W(me)||$(me))return me=sd(me,_e.mode,ke,null),me.return=_e,me;if(typeof me.then=="function")return et(_e,N1(me),ke);if(me.$$typeof===O)return et(_e,v1(_e,me),ke);_1(_e,me)}return null}function De(_e,me,ke,Je){var Ht=me!==null?me.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Ht!==null?null:Q(_e,me,""+ke,Je);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:return ke.key===Ht?ue(_e,me,ke,Je):null;case S:return ke.key===Ht?Oe(_e,me,ke,Je):null;case j:return ke=dd(ke),De(_e,me,ke,Je)}if(W(ke)||$(ke))return Ht!==null?null:Xe(_e,me,ke,Je,null);if(typeof ke.then=="function")return De(_e,me,N1(ke),Je);if(ke.$$typeof===O)return De(_e,me,v1(_e,ke),Je);_1(_e,ke)}return null}function $e(_e,me,ke,Je,Ht){if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return _e=_e.get(ke)||null,Q(me,_e,""+Je,Ht);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case y:return _e=_e.get(Je.key===null?ke:Je.key)||null,ue(me,_e,Je,Ht);case S:return _e=_e.get(Je.key===null?ke:Je.key)||null,Oe(me,_e,Je,Ht);case j:return Je=dd(Je),$e(_e,me,ke,Je,Ht)}if(W(Je)||$(Je))return _e=_e.get(ke)||null,Xe(me,_e,Je,Ht,null);if(typeof Je.then=="function")return $e(_e,me,ke,N1(Je),Ht);if(Je.$$typeof===O)return $e(_e,me,ke,v1(me,Je),Ht);_1(me,Je)}return null}function Ot(_e,me,ke,Je){for(var Ht=null,Xr=null,zt=me,wr=me=0,Lr=null;zt!==null&&wr<ke.length;wr++){zt.index>wr?(Lr=zt,zt=null):Lr=zt.sibling;var Qr=De(_e,zt,ke[wr],Je);if(Qr===null){zt===null&&(zt=Lr);break}l&&zt&&Qr.alternate===null&&u(_e,zt),me=_(Qr,me,wr),Xr===null?Ht=Qr:Xr.sibling=Qr,Xr=Qr,zt=Lr}if(wr===ke.length)return f(_e,zt),Ur&&_l(_e,wr),Ht;if(zt===null){for(;wr<ke.length;wr++)zt=et(_e,ke[wr],Je),zt!==null&&(me=_(zt,me,wr),Xr===null?Ht=zt:Xr.sibling=zt,Xr=zt);return Ur&&_l(_e,wr),Ht}for(zt=g(zt);wr<ke.length;wr++)Lr=$e(zt,_e,wr,ke[wr],Je),Lr!==null&&(l&&Lr.alternate!==null&&zt.delete(Lr.key===null?wr:Lr.key),me=_(Lr,me,wr),Xr===null?Ht=Lr:Xr.sibling=Lr,Xr=Lr);return l&&zt.forEach(function(tu){return u(_e,tu)}),Ur&&_l(_e,wr),Ht}function Yt(_e,me,ke,Je){if(ke==null)throw Error(n(151));for(var Ht=null,Xr=null,zt=me,wr=me=0,Lr=null,Qr=ke.next();zt!==null&&!Qr.done;wr++,Qr=ke.next()){zt.index>wr?(Lr=zt,zt=null):Lr=zt.sibling;var tu=De(_e,zt,Qr.value,Je);if(tu===null){zt===null&&(zt=Lr);break}l&&zt&&tu.alternate===null&&u(_e,zt),me=_(tu,me,wr),Xr===null?Ht=tu:Xr.sibling=tu,Xr=tu,zt=Lr}if(Qr.done)return f(_e,zt),Ur&&_l(_e,wr),Ht;if(zt===null){for(;!Qr.done;wr++,Qr=ke.next())Qr=et(_e,Qr.value,Je),Qr!==null&&(me=_(Qr,me,wr),Xr===null?Ht=Qr:Xr.sibling=Qr,Xr=Qr);return Ur&&_l(_e,wr),Ht}for(zt=g(zt);!Qr.done;wr++,Qr=ke.next())Qr=$e(zt,_e,wr,Qr.value,Je),Qr!==null&&(l&&Qr.alternate!==null&&zt.delete(Qr.key===null?wr:Qr.key),me=_(Qr,me,wr),Xr===null?Ht=Qr:Xr.sibling=Qr,Xr=Qr);return l&&zt.forEach(function(FJ){return u(_e,FJ)}),Ur&&_l(_e,wr),Ht}function En(_e,me,ke,Je){if(typeof ke=="object"&&ke!==null&&ke.type===w&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case y:e:{for(var Ht=ke.key;me!==null;){if(me.key===Ht){if(Ht=ke.type,Ht===w){if(me.tag===7){f(_e,me.sibling),Je=b(me,ke.props.children),Je.return=_e,_e=Je;break e}}else if(me.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===j&&dd(Ht)===me.type){f(_e,me.sibling),Je=b(me,ke.props),yp(Je,ke),Je.return=_e,_e=Je;break e}f(_e,me);break}else u(_e,me);me=me.sibling}ke.type===w?(Je=sd(ke.props.children,_e.mode,Je,ke.key),Je.return=_e,_e=Je):(Je=g1(ke.type,ke.key,ke.props,null,_e.mode,Je),yp(Je,ke),Je.return=_e,_e=Je)}return U(_e);case S:e:{for(Ht=ke.key;me!==null;){if(me.key===Ht)if(me.tag===4&&me.stateNode.containerInfo===ke.containerInfo&&me.stateNode.implementation===ke.implementation){f(_e,me.sibling),Je=b(me,ke.children||[]),Je.return=_e,_e=Je;break e}else{f(_e,me);break}else u(_e,me);me=me.sibling}Je=h4(ke,_e.mode,Je),Je.return=_e,_e=Je}return U(_e);case j:return ke=dd(ke),En(_e,me,ke,Je)}if(W(ke))return Ot(_e,me,ke,Je);if($(ke)){if(Ht=$(ke),typeof Ht!="function")throw Error(n(150));return ke=Ht.call(ke),Yt(_e,me,ke,Je)}if(typeof ke.then=="function")return En(_e,me,N1(ke),Je);if(ke.$$typeof===O)return En(_e,me,v1(_e,ke),Je);_1(_e,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,me!==null&&me.tag===6?(f(_e,me.sibling),Je=b(me,ke),Je.return=_e,_e=Je):(f(_e,me),Je=d4(ke,_e.mode,Je),Je.return=_e,_e=Je),U(_e)):f(_e,me)}return function(_e,me,ke,Je){try{xp=0;var Ht=En(_e,me,ke,Je);return H0=null,Ht}catch(zt){if(zt===q0||zt===w1)throw zt;var Xr=vs(29,zt,null,_e.mode);return Xr.lanes=Je,Xr.return=_e,Xr}finally{}}}var fd=zk(!0),Uk=zk(!1),Bc=!1;function _4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function $c(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function zc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(an&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=m1(l),_k(l,null,f),u}return p1(l,g,u,f),m1(l)}function vp(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,un(l,f)}}function j4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var U={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?b=_=U:_=_.next=U,f=f.next}while(f!==null);_===null?b=_=u:_=_.next=u}else b=_=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var A4=!1;function bp(){if(A4){var l=F0;if(l!==null)throw l}}function wp(l,u,f,g){A4=!1;var b=l.updateQueue;Bc=!1;var _=b.firstBaseUpdate,U=b.lastBaseUpdate,Q=b.shared.pending;if(Q!==null){b.shared.pending=null;var ue=Q,Oe=ue.next;ue.next=null,U===null?_=Oe:U.next=Oe,U=ue;var Xe=l.alternate;Xe!==null&&(Xe=Xe.updateQueue,Q=Xe.lastBaseUpdate,Q!==U&&(Q===null?Xe.firstBaseUpdate=Oe:Q.next=Oe,Xe.lastBaseUpdate=ue))}if(_!==null){var et=b.baseState;U=0,Xe=Oe=ue=null,Q=_;do{var De=Q.lane&-536870913,$e=De!==Q.lane;if($e?(Pr&De)===De:(g&De)===De){De!==0&&De===V0&&(A4=!0),Xe!==null&&(Xe=Xe.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var Ot=l,Yt=Q;De=u;var En=f;switch(Yt.tag){case 1:if(Ot=Yt.payload,typeof Ot=="function"){et=Ot.call(En,et,De);break e}et=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Yt.payload,De=typeof Ot=="function"?Ot.call(En,et,De):Ot,De==null)break e;et=m({},et,De);break e;case 2:Bc=!0}}De=Q.callback,De!==null&&(l.flags|=64,$e&&(l.flags|=8192),$e=b.callbacks,$e===null?b.callbacks=[De]:$e.push(De))}else $e={lane:De,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Xe===null?(Oe=Xe=$e,ue=et):Xe=Xe.next=$e,U|=De;if(Q=Q.next,Q===null){if(Q=b.shared.pending,Q===null)break;$e=Q,Q=$e.next,$e.next=null,b.lastBaseUpdate=$e,b.shared.pending=null}}while(!0);Xe===null&&(ue=et),b.baseState=ue,b.firstBaseUpdate=Oe,b.lastBaseUpdate=Xe,_===null&&(b.shared.lanes=0),Hc|=U,l.lanes=U,l.memoizedState=et}}function Vk(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function Fk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Vk(f[l],u)}var G0=X(null),T1=X(0);function qk(l,u){l=Dl,ne(T1,l),ne(G0,u),Dl=l|u.baseLanes}function E4(){ne(T1,Dl),ne(G0,G0.current)}function k4(){Dl=T1.current,ae(G0),ae(T1)}var bs=X(null),Hs=null;function Uc(l){var u=l.alternate;ne(xa,xa.current&1),ne(bs,l),Hs===null&&(u===null||G0.current!==null||u.memoizedState!==null)&&(Hs=l)}function C4(l){ne(xa,xa.current),ne(bs,l),Hs===null&&(Hs=l)}function Hk(l){l.tag===22?(ne(xa,xa.current),ne(bs,l),Hs===null&&(Hs=l)):Vc()}function Vc(){ne(xa,xa.current),ne(bs,bs.current)}function ws(l){ae(bs),Hs===l&&(Hs=null),ae(xa)}var xa=X(0);function j1(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||P5(f)||L5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Al=0,vr=null,jn=null,ka=null,A1=!1,W0=!1,pd=!1,E1=0,Sp=0,K0=null,RY=0;function oa(){throw Error(n(321))}function O4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!ys(l[f],u[f]))return!1;return!0}function I4(l,u,f,g,b,_){return Al=_,vr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?EC:W4,pd=!1,_=f(g,b),pd=!1,W0&&(_=Wk(u,f,g,b)),Gk(l),_}function Gk(l){G.H=Tp;var u=jn!==null&&jn.next!==null;if(Al=0,ka=jn=vr=null,A1=!1,Sp=0,K0=null,u)throw Error(n(300));l===null||Ca||(l=l.dependencies,l!==null&&y1(l)&&(Ca=!0))}function Wk(l,u,f,g){vr=l;var b=0;do{if(W0&&(K0=null),Sp=0,W0=!1,25<=b)throw Error(n(301));if(b+=1,ka=jn=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}G.H=kC,_=u(f,g)}while(W0);return _}function MY(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?Np(u):u,l=l.useState()[0],(jn!==null?jn.memoizedState:null)!==l&&(vr.flags|=1024),u}function R4(){var l=E1!==0;return E1=0,l}function M4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function D4(l){if(A1){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}A1=!1}Al=0,ka=jn=vr=null,W0=!1,Sp=E1=0,K0=null}function Oi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?vr.memoizedState=ka=l:ka=ka.next=l,ka}function ya(){if(jn===null){var l=vr.alternate;l=l!==null?l.memoizedState:null}else l=jn.next;var u=ka===null?vr.memoizedState:ka.next;if(u!==null)ka=u,jn=l;else{if(l===null)throw vr.alternate===null?Error(n(467)):Error(n(310));jn=l,l={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},ka===null?vr.memoizedState=ka=l:ka=ka.next=l}return ka}function k1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Np(l){var u=Sp;return Sp+=1,K0===null&&(K0=[]),l=Lk(K0,l,u),u=vr,(ka===null?u.memoizedState:ka.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?EC:W4),l}function C1(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Np(l);if(l.$$typeof===O)return li(l)}throw Error(n(438,String(l)))}function P4(l){var u=null,f=vr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=vr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=k1(),vr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=q;return u.index++,f}function El(l,u){return typeof u=="function"?u(l):u}function O1(l){var u=ya();return L4(u,jn,l)}function L4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,_=g.pending;if(_!==null){if(b!==null){var U=b.next;b.next=_.next,_.next=U}u.baseQueue=b=_,g.pending=null}if(_=l.baseState,b===null)l.memoizedState=_;else{u=b.next;var Q=U=null,ue=null,Oe=u,Xe=!1;do{var et=Oe.lane&-536870913;if(et!==Oe.lane?(Pr&et)===et:(Al&et)===et){var De=Oe.revertLane;if(De===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),et===V0&&(Xe=!0);else if((Al&De)===De){Oe=Oe.next,De===V0&&(Xe=!0);continue}else et={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ue===null?(Q=ue=et,U=_):ue=ue.next=et,vr.lanes|=De,Hc|=De;et=Oe.action,pd&&f(_,et),_=Oe.hasEagerState?Oe.eagerState:f(_,et)}else De={lane:et,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ue===null?(Q=ue=De,U=_):ue=ue.next=De,vr.lanes|=et,Hc|=et;Oe=Oe.next}while(Oe!==null&&Oe!==u);if(ue===null?U=_:ue.next=Q,!ys(_,l.memoizedState)&&(Ca=!0,Xe&&(f=F0,f!==null)))throw f;l.memoizedState=_,l.baseState=U,l.baseQueue=ue,g.lastRenderedState=_}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function B4(l){var u=ya(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,_=u.memoizedState;if(b!==null){f.pending=null;var U=b=b.next;do _=l(_,U.action),U=U.next;while(U!==b);ys(_,u.memoizedState)||(Ca=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function Kk(l,u,f){var g=vr,b=ya(),_=Ur;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var U=!ys((jn||b).memoizedState,f);if(U&&(b.memoizedState=f,Ca=!0),b=b.queue,U4(Yk.bind(null,g,b,l),[l]),b.getSnapshot!==u||U||ka!==null&&ka.memoizedState.tag&1){if(g.flags|=2048,X0(9,{destroy:void 0},Qk.bind(null,g,b,f,u),null),Pn===null)throw Error(n(349));_||(Al&127)!==0||Xk(g,u,f)}return f}function Xk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=vr.updateQueue,u===null?(u=k1(),vr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function Qk(l,u,f,g){u.value=f,u.getSnapshot=g,Jk(u)&&Zk(l)}function Yk(l,u,f){return f(function(){Jk(u)&&Zk(l)})}function Jk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!ys(l,f)}catch{return!0}}function Zk(l){var u=id(l,2);u!==null&&Qi(u,l,2)}function $4(l){var u=Oi();if(typeof l=="function"){var f=l;if(l=f(),pd){vt(!0);try{f()}finally{vt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:l},u}function eC(l,u,f,g){return l.baseState=f,L4(l,jn,typeof g=="function"?g:El)}function DY(l,u,f,g,b){if(M1(l))throw Error(n(485));if(l=u.action,l!==null){var _={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){_.listeners.push(U)}};G.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,tC(u,_)):(_.next=f.next,u.pending=f.next=_)}}function tC(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var _=G.T,U={};G.T=U;try{var Q=f(b,g),ue=G.S;ue!==null&&ue(U,Q),rC(l,u,Q)}catch(Oe){z4(l,u,Oe)}finally{_!==null&&U.types!==null&&(_.types=U.types),G.T=_}}else try{_=f(b,g),rC(l,u,_)}catch(Oe){z4(l,u,Oe)}}function rC(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){nC(l,u,g)},function(g){return z4(l,u,g)}):nC(l,u,f)}function nC(l,u,f){u.status="fulfilled",u.value=f,aC(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,tC(l,f)))}function z4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,aC(u),u=u.next;while(u!==g)}l.action=null}function aC(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function iC(l,u){return u}function sC(l,u){if(Ur){var f=Pn.formState;if(f!==null){e:{var g=vr;if(Ur){if(Gn){t:{for(var b=Gn,_=qs;b.nodeType!==8;){if(!_){b=null;break t}if(b=Gs(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Gn=Gs(b.nextSibling),g=b.data==="F!";break e}}Pc(g)}g=!1}g&&(u=f[0])}}return f=Oi(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iC,lastRenderedState:u},f.queue=g,f=TC.bind(null,vr,g),g.dispatch=f,g=$4(!1),_=G4.bind(null,vr,!1,g.queue),g=Oi(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=DY.bind(null,vr,b,_,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function oC(l){var u=ya();return lC(u,jn,l)}function lC(l,u,f){if(u=L4(l,u,iC)[0],l=O1(El)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Np(u)}catch(U){throw U===q0?w1:U}else g=u;u=ya();var b=u.queue,_=b.dispatch;return f!==u.memoizedState&&(vr.flags|=2048,X0(9,{destroy:void 0},PY.bind(null,b,f),null)),[g,_,l]}function PY(l,u){l.action=u}function cC(l){var u=ya(),f=jn;if(f!==null)return lC(u,f,l);ya(),u=u.memoizedState,f=ya();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function X0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=vr.updateQueue,u===null&&(u=k1(),vr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function uC(){return ya().memoizedState}function I1(l,u,f,g){var b=Oi();vr.flags|=l,b.memoizedState=X0(1|u,{destroy:void 0},f,g===void 0?null:g)}function R1(l,u,f,g){var b=ya();g=g===void 0?null:g;var _=b.memoizedState.inst;jn!==null&&g!==null&&O4(g,jn.memoizedState.deps)?b.memoizedState=X0(u,_,f,g):(vr.flags|=l,b.memoizedState=X0(1|u,_,f,g))}function dC(l,u){I1(8390656,8,l,u)}function U4(l,u){R1(2048,8,l,u)}function LY(l){vr.flags|=4;var u=vr.updateQueue;if(u===null)u=k1(),vr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function hC(l){var u=ya().memoizedState;return LY({ref:u,nextImpl:l}),function(){if((an&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function fC(l,u){return R1(4,2,l,u)}function pC(l,u){return R1(4,4,l,u)}function mC(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function gC(l,u,f){f=f!=null?f.concat([l]):null,R1(4,4,mC.bind(null,u,l),f)}function V4(){}function xC(l,u){var f=ya();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&O4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function yC(l,u){var f=ya();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&O4(u,g[1]))return g[0];if(g=l(),pd){vt(!0);try{l()}finally{vt(!1)}}return f.memoizedState=[g,u],g}function F4(l,u,f){return f===void 0||(Al&1073741824)!==0&&(Pr&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=v9(),vr.lanes|=l,Hc|=l,f)}function vC(l,u,f,g){return ys(f,u)?f:G0.current!==null?(l=F4(l,f,g),ys(l,u)||(Ca=!0),l):(Al&42)===0||(Al&1073741824)!==0&&(Pr&261930)===0?(Ca=!0,l.memoizedState=f):(l=v9(),vr.lanes|=l,Hc|=l,u)}function bC(l,u,f,g,b){var _=Y.p;Y.p=_!==0&&8>_?_:8;var U=G.T,Q={};G.T=Q,G4(l,!1,u,f);try{var ue=b(),Oe=G.S;if(Oe!==null&&Oe(Q,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Xe=IY(ue,g);_p(l,u,Xe,_s(l))}else _p(l,u,g,_s(l))}catch(et){_p(l,u,{then:function(){},status:"rejected",reason:et},_s())}finally{Y.p=_,U!==null&&Q.types!==null&&(U.types=Q.types),G.T=U}}function BY(){}function q4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=wC(l).queue;bC(l,b,u,re,f===null?BY:function(){return SC(l),f(g)})}function wC(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:re},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function SC(l){var u=wC(l);u.next===null&&(u=l.alternate.memoizedState),_p(l,u.next.queue,{},_s())}function H4(){return li(Up)}function NC(){return ya().memoizedState}function _C(){return ya().memoizedState}function $Y(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=_s();l=$c(f);var g=zc(u,l,f);g!==null&&(Qi(g,u,f),vp(g,u,f)),u={cache:b4()},l.payload=u;return}u=u.return}}function zY(l,u,f){var g=_s();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},M1(l)?jC(u,f):(f=c4(l,u,f,g),f!==null&&(Qi(f,l,g),AC(f,u,g)))}function TC(l,u,f){var g=_s();_p(l,u,f,g)}function _p(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(M1(l))jC(u,b);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var U=u.lastRenderedState,Q=_(U,f);if(b.hasEagerState=!0,b.eagerState=Q,ys(Q,U))return p1(l,u,b,0),Pn===null&&f1(),!1}catch{}finally{}if(f=c4(l,u,b,g),f!==null)return Qi(f,l,g),AC(f,u,g),!0}return!1}function G4(l,u,f,g){if(g={lane:2,revertLane:_5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},M1(l)){if(u)throw Error(n(479))}else u=c4(l,f,g,2),u!==null&&Qi(u,l,2)}function M1(l){var u=l.alternate;return l===vr||u!==null&&u===vr}function jC(l,u){W0=A1=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function AC(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,un(l,f)}}var Tp={readContext:li,use:C1,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useInsertionEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useSyncExternalStore:oa,useId:oa,useHostTransitionStatus:oa,useFormState:oa,useActionState:oa,useOptimistic:oa,useMemoCache:oa,useCacheRefresh:oa};Tp.useEffectEvent=oa;var EC={readContext:li,use:C1,useCallback:function(l,u){return Oi().memoizedState=[l,u===void 0?null:u],l},useContext:li,useEffect:dC,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,I1(4194308,4,mC.bind(null,u,l),f)},useLayoutEffect:function(l,u){return I1(4194308,4,l,u)},useInsertionEffect:function(l,u){I1(4,2,l,u)},useMemo:function(l,u){var f=Oi();u=u===void 0?null:u;var g=l();if(pd){vt(!0);try{l()}finally{vt(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Oi();if(f!==void 0){var b=f(u);if(pd){vt(!0);try{f(u)}finally{vt(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=zY.bind(null,vr,l),[g.memoizedState,l]},useRef:function(l){var u=Oi();return l={current:l},u.memoizedState=l},useState:function(l){l=$4(l);var u=l.queue,f=TC.bind(null,vr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:V4,useDeferredValue:function(l,u){var f=Oi();return F4(f,l,u)},useTransition:function(){var l=$4(!1);return l=bC.bind(null,vr,l.queue,!0,!1),Oi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=vr,b=Oi();if(Ur){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),Pn===null)throw Error(n(349));(Pr&127)!==0||Xk(g,u,f)}b.memoizedState=f;var _={value:f,getSnapshot:u};return b.queue=_,dC(Yk.bind(null,g,_,l),[l]),g.flags|=2048,X0(9,{destroy:void 0},Qk.bind(null,g,_,f,u),null),f},useId:function(){var l=Oi(),u=Pn.identifierPrefix;if(Ur){var f=Uo,g=zo;f=(g&~(1<<32-tt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=E1++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=RY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:H4,useFormState:sC,useActionState:sC,useOptimistic:function(l){var u=Oi();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=G4.bind(null,vr,!0,f),f.dispatch=u,[l,u]},useMemoCache:P4,useCacheRefresh:function(){return Oi().memoizedState=$Y.bind(null,vr)},useEffectEvent:function(l){var u=Oi(),f={impl:l};return u.memoizedState=f,function(){if((an&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},W4={readContext:li,use:C1,useCallback:xC,useContext:li,useEffect:U4,useImperativeHandle:gC,useInsertionEffect:fC,useLayoutEffect:pC,useMemo:yC,useReducer:O1,useRef:uC,useState:function(){return O1(El)},useDebugValue:V4,useDeferredValue:function(l,u){var f=ya();return vC(f,jn.memoizedState,l,u)},useTransition:function(){var l=O1(El)[0],u=ya().memoizedState;return[typeof l=="boolean"?l:Np(l),u]},useSyncExternalStore:Kk,useId:NC,useHostTransitionStatus:H4,useFormState:oC,useActionState:oC,useOptimistic:function(l,u){var f=ya();return eC(f,jn,l,u)},useMemoCache:P4,useCacheRefresh:_C};W4.useEffectEvent=hC;var kC={readContext:li,use:C1,useCallback:xC,useContext:li,useEffect:U4,useImperativeHandle:gC,useInsertionEffect:fC,useLayoutEffect:pC,useMemo:yC,useReducer:B4,useRef:uC,useState:function(){return B4(El)},useDebugValue:V4,useDeferredValue:function(l,u){var f=ya();return jn===null?F4(f,l,u):vC(f,jn.memoizedState,l,u)},useTransition:function(){var l=B4(El)[0],u=ya().memoizedState;return[typeof l=="boolean"?l:Np(l),u]},useSyncExternalStore:Kk,useId:NC,useHostTransitionStatus:H4,useFormState:cC,useActionState:cC,useOptimistic:function(l,u){var f=ya();return jn!==null?eC(f,jn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:P4,useCacheRefresh:_C};kC.useEffectEvent=hC;function K4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var X4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=_s(),b=$c(g);b.payload=u,f!=null&&(b.callback=f),u=zc(l,b,g),u!==null&&(Qi(u,l,g),vp(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=_s(),b=$c(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=zc(l,b,g),u!==null&&(Qi(u,l,g),vp(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=_s(),g=$c(f);g.tag=2,u!=null&&(g.callback=u),u=zc(l,g,f),u!==null&&(Qi(u,l,f),vp(u,l,f))}};function CC(l,u,f,g,b,_,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,_,U):u.prototype&&u.prototype.isPureReactComponent?!dp(f,g)||!dp(b,_):!0}function OC(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&X4.enqueueReplaceState(u,u.state,null)}function md(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function IC(l){h1(l)}function RC(l){console.error(l)}function MC(l){h1(l)}function D1(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function DC(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Q4(l,u,f){return f=$c(f),f.tag=3,f.payload={element:null},f.callback=function(){D1(l,u)},f}function PC(l){return l=$c(l),l.tag=3,l}function LC(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var _=g.value;l.payload=function(){return b(_)},l.callback=function(){DC(u,f,g)}}var U=f.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){DC(u,f,g),typeof b!="function"&&(Gc===null?Gc=new Set([this]):Gc.add(this));var Q=g.stack;this.componentDidCatch(g.value,{componentStack:Q!==null?Q:""})})}function UY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&U0(u,f,b,!0),f=bs.current,f!==null){switch(f.tag){case 31:case 13:return Hs===null?W1():f.alternate===null&&la===0&&(la=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===S1?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),w5(l,g,b)),!1;case 22:return f.flags|=65536,g===S1?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),w5(l,g,b)),!1}throw Error(n(435,f.tag))}return w5(l,g,b),W1(),!1}if(Ur)return u=bs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==m4&&(l=Error(n(422),{cause:g}),pp(Us(l,f)))):(g!==m4&&(u=Error(n(423),{cause:g}),pp(Us(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Us(g,f),b=Q4(l.stateNode,g,b),j4(l,b),la!==4&&(la=2)),!1;var _=Error(n(520),{cause:g});if(_=Us(_,f),Rp===null?Rp=[_]:Rp.push(_),la!==4&&(la=2),u===null)return!0;g=Us(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=Q4(f.stateNode,g,l),j4(f,l),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gc===null||!Gc.has(_))))return f.flags|=65536,b&=-b,f.lanes|=b,b=PC(b),LC(b,l,f,g),j4(f,b),!1}f=f.return}while(f!==null);return!1}var Y4=Error(n(461)),Ca=!1;function ci(l,u,f,g){u.child=l===null?Uk(u,null,f,g):fd(u,l.child,f,g)}function BC(l,u,f,g,b){f=f.render;var _=u.ref;if("ref"in g){var U={};for(var Q in g)Q!=="ref"&&(U[Q]=g[Q])}else U=g;return cd(u),g=I4(l,u,f,U,_,b),Q=R4(),l!==null&&!Ca?(M4(l,u,b),kl(l,u,b)):(Ur&&Q&&f4(u),u.flags|=1,ci(l,u,g,b),u.child)}function $C(l,u,f,g,b){if(l===null){var _=f.type;return typeof _=="function"&&!u4(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,zC(l,u,_,g,b)):(l=g1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(_=l.child,!i5(l,b)){var U=_.memoizedProps;if(f=f.compare,f=f!==null?f:dp,f(U,g)&&l.ref===u.ref)return kl(l,u,b)}return u.flags|=1,l=Nl(_,g),l.ref=u.ref,l.return=u,u.child=l}function zC(l,u,f,g,b){if(l!==null){var _=l.memoizedProps;if(dp(_,g)&&l.ref===u.ref)if(Ca=!1,u.pendingProps=g=_,i5(l,b))(l.flags&131072)!==0&&(Ca=!0);else return u.lanes=l.lanes,kl(l,u,b)}return J4(l,u,f,g,b)}function UC(l,u,f,g){var b=g.children,_=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~_}else g=0,u.child=null;return VC(l,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&b1(u,_!==null?_.cachePool:null),_!==null?qk(u,_):E4(),Hk(u);else return g=u.lanes=536870912,VC(l,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(b1(u,_.cachePool),qk(u,_),Vc(),u.memoizedState=null):(l!==null&&b1(u,null),E4(),Vc());return ci(l,u,b,f),u.child}function jp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function VC(l,u,f,g,b){var _=S4();return _=_===null?null:{parent:Ea._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},l!==null&&b1(u,null),E4(),Hk(u),l!==null&&U0(l,u,g,!0),u.childLanes=b,null}function P1(l,u){return u=B1({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function FC(l,u,f){return fd(u,l.child,null,f),l=P1(u,u.pendingProps),l.flags|=2,ws(u),u.memoizedState=null,l}function VY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Ur){if(g.mode==="hidden")return l=P1(u,g),u.lanes=536870912,jp(null,l);if(C4(u),(l=Gn)?(l=tO(l,qs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Mc!==null?{id:zo,overflow:Uo}:null,retryLane:536870912,hydrationErrors:null},f=jk(l),f.return=u,u.child=f,oi=u,Gn=null)):l=null,l===null)throw Pc(u);return u.lanes=536870912,null}return P1(u,g)}var _=l.memoizedState;if(_!==null){var U=_.dehydrated;if(C4(u),b)if(u.flags&256)u.flags&=-257,u=FC(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Ca||U0(l,u,f,!1),b=(f&l.childLanes)!==0,Ca||b){if(g=Pn,g!==null&&(U=dn(g,f),U!==0&&U!==_.retryLane))throw _.retryLane=U,id(l,U),Qi(g,l,U),Y4;W1(),u=FC(l,u,f)}else l=_.treeContext,Gn=Gs(U.nextSibling),oi=u,Ur=!0,Dc=null,qs=!1,l!==null&&kk(u,l),u=P1(u,g),u.flags|=4096;return u}return l=Nl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function L1(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function J4(l,u,f,g,b){return cd(u),f=I4(l,u,f,g,void 0,b),g=R4(),l!==null&&!Ca?(M4(l,u,b),kl(l,u,b)):(Ur&&g&&f4(u),u.flags|=1,ci(l,u,f,b),u.child)}function qC(l,u,f,g,b,_){return cd(u),u.updateQueue=null,f=Wk(u,g,f,b),Gk(l),g=R4(),l!==null&&!Ca?(M4(l,u,_),kl(l,u,_)):(Ur&&g&&f4(u),u.flags|=1,ci(l,u,f,_),u.child)}function HC(l,u,f,g,b){if(cd(u),u.stateNode===null){var _=L0,U=f.contextType;typeof U=="object"&&U!==null&&(_=li(U)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=X4,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},_4(u),U=f.contextType,_.context=typeof U=="object"&&U!==null?li(U):L0,_.state=u.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(K4(u,f,U,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(U=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),U!==_.state&&X4.enqueueReplaceState(_,_.state,null),wp(u,g,_,b),bp(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){_=u.stateNode;var Q=u.memoizedProps,ue=md(f,Q);_.props=ue;var Oe=_.context,Xe=f.contextType;U=L0,typeof Xe=="object"&&Xe!==null&&(U=li(Xe));var et=f.getDerivedStateFromProps;Xe=typeof et=="function"||typeof _.getSnapshotBeforeUpdate=="function",Q=u.pendingProps!==Q,Xe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Q||Oe!==U)&&OC(u,_,g,U),Bc=!1;var De=u.memoizedState;_.state=De,wp(u,g,_,b),bp(),Oe=u.memoizedState,Q||De!==Oe||Bc?(typeof et=="function"&&(K4(u,f,et,g),Oe=u.memoizedState),(ue=Bc||CC(u,f,ue,g,De,Oe,U))?(Xe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Oe),_.props=g,_.state=Oe,_.context=U,g=ue):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,T4(l,u),U=u.memoizedProps,Xe=md(f,U),_.props=Xe,et=u.pendingProps,De=_.context,Oe=f.contextType,ue=L0,typeof Oe=="object"&&Oe!==null&&(ue=li(Oe)),Q=f.getDerivedStateFromProps,(Oe=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U!==et||De!==ue)&&OC(u,_,g,ue),Bc=!1,De=u.memoizedState,_.state=De,wp(u,g,_,b),bp();var $e=u.memoizedState;U!==et||De!==$e||Bc||l!==null&&l.dependencies!==null&&y1(l.dependencies)?(typeof Q=="function"&&(K4(u,f,Q,g),$e=u.memoizedState),(Xe=Bc||CC(u,f,Xe,g,De,$e,ue)||l!==null&&l.dependencies!==null&&y1(l.dependencies))?(Oe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,$e,ue),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,$e,ue)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=$e),_.props=g,_.state=$e,_.context=ue,g=Xe):(typeof _.componentDidUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),g=!1)}return _=g,L1(l,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,l!==null&&g?(u.child=fd(u,l.child,null,b),u.child=fd(u,null,f,b)):ci(l,u,f,b),u.memoizedState=_.state,l=u.child):l=kl(l,u,b),l}function GC(l,u,f,g){return od(),u.flags|=256,ci(l,u,f,g),u.child}var Z4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function e5(l){return{baseLanes:l,cachePool:Dk()}}function t5(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=Ns),l}function WC(l,u,f){var g=u.pendingProps,b=!1,_=(u.flags&128)!==0,U;if((U=_)||(U=l!==null&&l.memoizedState===null?!1:(xa.current&2)!==0),U&&(b=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(Ur){if(b?Uc(u):Vc(),(l=Gn)?(l=tO(l,qs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Mc!==null?{id:zo,overflow:Uo}:null,retryLane:536870912,hydrationErrors:null},f=jk(l),f.return=u,u.child=f,oi=u,Gn=null)):l=null,l===null)throw Pc(u);return L5(l)?u.lanes=32:u.lanes=536870912,null}var Q=g.children;return g=g.fallback,b?(Vc(),b=u.mode,Q=B1({mode:"hidden",children:Q},b),g=sd(g,b,f,null),Q.return=u,g.return=u,Q.sibling=g,u.child=Q,g=u.child,g.memoizedState=e5(f),g.childLanes=t5(l,U,f),u.memoizedState=Z4,jp(null,g)):(Uc(u),r5(u,Q))}var ue=l.memoizedState;if(ue!==null&&(Q=ue.dehydrated,Q!==null)){if(_)u.flags&256?(Uc(u),u.flags&=-257,u=n5(l,u,f)):u.memoizedState!==null?(Vc(),u.child=l.child,u.flags|=128,u=null):(Vc(),Q=g.fallback,b=u.mode,g=B1({mode:"visible",children:g.children},b),Q=sd(Q,b,f,null),Q.flags|=2,g.return=u,Q.return=u,g.sibling=Q,u.child=g,fd(u,l.child,null,f),g=u.child,g.memoizedState=e5(f),g.childLanes=t5(l,U,f),u.memoizedState=Z4,u=jp(null,g));else if(Uc(u),L5(Q)){if(U=Q.nextSibling&&Q.nextSibling.dataset,U)var Oe=U.dgst;U=Oe,g=Error(n(419)),g.stack="",g.digest=U,pp({value:g,source:null,stack:null}),u=n5(l,u,f)}else if(Ca||U0(l,u,f,!1),U=(f&l.childLanes)!==0,Ca||U){if(U=Pn,U!==null&&(g=dn(U,f),g!==0&&g!==ue.retryLane))throw ue.retryLane=g,id(l,g),Qi(U,l,g),Y4;P5(Q)||W1(),u=n5(l,u,f)}else P5(Q)?(u.flags|=192,u.child=l.child,u=null):(l=ue.treeContext,Gn=Gs(Q.nextSibling),oi=u,Ur=!0,Dc=null,qs=!1,l!==null&&kk(u,l),u=r5(u,g.children),u.flags|=4096);return u}return b?(Vc(),Q=g.fallback,b=u.mode,ue=l.child,Oe=ue.sibling,g=Nl(ue,{mode:"hidden",children:g.children}),g.subtreeFlags=ue.subtreeFlags&65011712,Oe!==null?Q=Nl(Oe,Q):(Q=sd(Q,b,f,null),Q.flags|=2),Q.return=u,g.return=u,g.sibling=Q,u.child=g,jp(null,g),g=u.child,Q=l.child.memoizedState,Q===null?Q=e5(f):(b=Q.cachePool,b!==null?(ue=Ea._currentValue,b=b.parent!==ue?{parent:ue,pool:ue}:b):b=Dk(),Q={baseLanes:Q.baseLanes|f,cachePool:b}),g.memoizedState=Q,g.childLanes=t5(l,U,f),u.memoizedState=Z4,jp(l.child,g)):(Uc(u),f=l.child,l=f.sibling,f=Nl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=f,u.memoizedState=null,f)}function r5(l,u){return u=B1({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function B1(l,u){return l=vs(22,l,null,u),l.lanes=0,l}function n5(l,u,f){return fd(u,l.child,null,f),l=r5(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function KC(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),y4(l.return,u,f)}function a5(l,u,f,g,b,_){var U=l.memoizedState;U===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:_}:(U.isBackwards=u,U.rendering=null,U.renderingStartTime=0,U.last=g,U.tail=f,U.tailMode=b,U.treeForkCount=_)}function XC(l,u,f){var g=u.pendingProps,b=g.revealOrder,_=g.tail;g=g.children;var U=xa.current,Q=(U&2)!==0;if(Q?(U=U&1|2,u.flags|=128):U&=1,ne(xa,U),ci(l,u,g,f),g=Ur?fp:0,!Q&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&KC(l,f,u);else if(l.tag===19)KC(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&j1(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),a5(u,!1,b,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&j1(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}a5(u,!0,f,null,_,g);break;case"together":a5(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function kl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Hc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(U0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=Nl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=Nl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function i5(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&y1(l)))}function FY(l,u,f){switch(u.tag){case 3:Fe(u,u.stateNode.containerInfo),Lc(u,Ea,l.memoizedState.cache),od();break;case 27:case 5:He(u);break;case 4:Fe(u,u.stateNode.containerInfo);break;case 10:Lc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,C4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Uc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?WC(l,u,f):(Uc(u),l=kl(l,u,f),l!==null?l.sibling:null);Uc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(U0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return XC(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ne(xa,xa.current),g)break;return null;case 22:return u.lanes=0,UC(l,u,f,u.pendingProps);case 24:Lc(u,Ea,l.memoizedState.cache)}return kl(l,u,f)}function QC(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Ca=!0;else{if(!i5(l,f)&&(u.flags&128)===0)return Ca=!1,FY(l,u,f);Ca=(l.flags&131072)!==0}else Ca=!1,Ur&&(u.flags&1048576)!==0&&Ek(u,fp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=dd(u.elementType),u.type=l,typeof l=="function")u4(l)?(g=md(l,g),u.tag=1,u=HC(null,u,l,g,f)):(u.tag=0,u=J4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=BC(null,u,l,g,f);break e}else if(b===E){u.tag=14,u=$C(null,u,l,g,f);break e}}throw u=V(l)||l,Error(n(306,u,""))}}return u;case 0:return J4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=md(g,u.pendingProps),HC(l,u,g,b,f);case 3:e:{if(Fe(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;b=_.element,T4(l,u),wp(u,g,null,f);var U=u.memoizedState;if(g=U.cache,Lc(u,Ea,g),g!==_.cache&&v4(u,[Ea],f,!0),bp(),g=U.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=GC(l,u,g,f);break e}else if(g!==b){b=Us(Error(n(424)),u),pp(b),u=GC(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Gn=Gs(l.firstChild),oi=u,Ur=!0,Dc=null,qs=!0,f=Uk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(od(),g===b){u=kl(l,u,f);break e}ci(l,u,g,f)}u=u.child}return u;case 26:return L1(l,u),l===null?(f=oO(u.type,null,u.pendingProps,null))?u.memoizedState=f:Ur||(f=u.type,l=u.pendingProps,g=ey(Be.current).createElement(f),g[_r]=u,g[rn]=l,ui(g,f,l),br(g),u.stateNode=g):u.memoizedState=oO(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return He(u),l===null&&Ur&&(g=u.stateNode=aO(u.type,u.pendingProps,Be.current),oi=u,qs=!0,b=Gn,Qc(u.type)?(B5=b,Gn=Gs(g.firstChild)):Gn=b),ci(l,u,u.pendingProps.children,f),L1(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Ur&&((b=g=Gn)&&(g=vJ(g,u.type,u.pendingProps,qs),g!==null?(u.stateNode=g,oi=u,Gn=Gs(g.firstChild),qs=!1,b=!0):b=!1),b||Pc(u)),He(u),b=u.type,_=u.pendingProps,U=l!==null?l.memoizedProps:null,g=_.children,R5(b,_)?g=null:U!==null&&R5(b,U)&&(u.flags|=32),u.memoizedState!==null&&(b=I4(l,u,MY,null,null,f),Up._currentValue=b),L1(l,u),ci(l,u,g,f),u.child;case 6:return l===null&&Ur&&((l=f=Gn)&&(f=bJ(f,u.pendingProps,qs),f!==null?(u.stateNode=f,oi=u,Gn=null,l=!0):l=!1),l||Pc(u)),null;case 13:return WC(l,u,f);case 4:return Fe(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=fd(u,null,g,f):ci(l,u,g,f),u.child;case 11:return BC(l,u,u.type,u.pendingProps,f);case 7:return ci(l,u,u.pendingProps,f),u.child;case 8:return ci(l,u,u.pendingProps.children,f),u.child;case 12:return ci(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Lc(u,u.type,g.value),ci(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,cd(u),b=li(b),g=g(b),u.flags|=1,ci(l,u,g,f),u.child;case 14:return $C(l,u,u.type,u.pendingProps,f);case 15:return zC(l,u,u.type,u.pendingProps,f);case 19:return XC(l,u,f);case 31:return VY(l,u,f);case 22:return UC(l,u,f,u.pendingProps);case 24:return cd(u),g=li(Ea),l===null?(b=S4(),b===null&&(b=Pn,_=b4(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=f),b=_),u.memoizedState={parent:g,cache:b},_4(u),Lc(u,Ea,b)):((l.lanes&f)!==0&&(T4(l,u),wp(u,null,null,f),bp()),b=l.memoizedState,_=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Lc(u,Ea,g)):(g=_.cache,Lc(u,Ea,g),g!==b.cache&&v4(u,[Ea],f,!0))),ci(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Cl(l){l.flags|=4}function s5(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(N9())l.flags|=8192;else throw hd=S1,N4}else l.flags&=-16777217}function YC(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!hO(u))if(N9())l.flags|=8192;else throw hd=S1,N4}function $1(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Dr():536870912,l.lanes|=u,Z0|=u)}function Ap(l,u){if(!Ur)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Wn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function qY(l,u,f){var g=u.pendingProps;switch(p4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(u),null;case 1:return Wn(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),jl(Ea),Ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(z0(u)?Cl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,g4())),Wn(u),null;case 26:var b=u.type,_=u.memoizedState;return l===null?(Cl(u),_!==null?(Wn(u),YC(u,_)):(Wn(u),s5(u,b,null,g,f))):_?_!==l.memoizedState?(Cl(u),Wn(u),YC(u,_)):(Wn(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&Cl(u),Wn(u),s5(u,b,l,g,f)),null;case 27:if(Z(u),f=Be.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Cl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Wn(u),null}l=ve.current,z0(u)?Ck(u):(l=aO(b,g,f),u.stateNode=l,Cl(u))}return Wn(u),null;case 5:if(Z(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Cl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Wn(u),null}if(_=ve.current,z0(u))Ck(u);else{var U=ey(Be.current);switch(_){case 1:_=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=U.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?U.createElement("select",{is:g.is}):U.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?U.createElement(b,{is:g.is}):U.createElement(b)}}_[_r]=u,_[rn]=g;e:for(U=u.child;U!==null;){if(U.tag===5||U.tag===6)_.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===u)break e;for(;U.sibling===null;){if(U.return===null||U.return===u)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}u.stateNode=_;e:switch(ui(_,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Cl(u)}}return Wn(u),s5(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Cl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Be.current,z0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=oi,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[_r]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||W9(l.nodeValue,f)),l||Pc(u,!0)}else l=ey(l).createTextNode(g),l[_r]=u,u.stateNode=l}return Wn(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=z0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[_r]=u}else od(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Wn(u),l=!1}else f=g4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(ws(u),u):(ws(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Wn(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=z0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[_r]=u}else od(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Wn(u),b=!1}else b=g4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(ws(u),u):(ws(u),null)}return ws(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),$1(u,u.updateQueue),Wn(u),null);case 4:return Ne(),l===null&&E5(u.stateNode.containerInfo),Wn(u),null;case 10:return jl(u.type),Wn(u),null;case 19:if(ae(xa),g=u.memoizedState,g===null)return Wn(u),null;if(b=(u.flags&128)!==0,_=g.rendering,_===null)if(b)Ap(g,!1);else{if(la!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(_=j1(l),_!==null){for(u.flags|=128,Ap(g,!1),l=_.updateQueue,u.updateQueue=l,$1(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)Tk(f,l),f=f.sibling;return ne(xa,xa.current&1|2),Ur&&_l(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Ge()>q1&&(u.flags|=128,b=!0,Ap(g,!1),u.lanes=4194304)}else{if(!b)if(l=j1(_),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,$1(u,l),Ap(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Ur)return Wn(u),null}else 2*Ge()-g.renderingStartTime>q1&&f!==536870912&&(u.flags|=128,b=!0,Ap(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(l=g.last,l!==null?l.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Ge(),l.sibling=null,f=xa.current,ne(xa,b?f&1|2:f&1),Ur&&_l(u,g.treeForkCount),l):(Wn(u),null);case 22:case 23:return ws(u),k4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Wn(u),u.subtreeFlags&6&&(u.flags|=8192)):Wn(u),f=u.updateQueue,f!==null&&$1(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ae(ud),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),jl(Ea),Wn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function HY(l,u){switch(p4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return jl(Ea),Ne(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Z(u),null;case 31:if(u.memoizedState!==null){if(ws(u),u.alternate===null)throw Error(n(340));od()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ws(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));od()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ae(xa),null;case 4:return Ne(),null;case 10:return jl(u.type),null;case 22:case 23:return ws(u),k4(),l!==null&&ae(ud),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return jl(Ea),null;case 25:return null;default:return null}}function JC(l,u){switch(p4(u),u.tag){case 3:jl(Ea),Ne();break;case 26:case 27:case 5:Z(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&ws(u);break;case 13:ws(u);break;case 19:ae(xa);break;case 10:jl(u.type);break;case 22:case 23:ws(u),k4(),l!==null&&ae(ud);break;case 24:jl(Ea)}}function Ep(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var _=f.create,U=f.inst;g=_(),U.destroy=g}f=f.next}while(f!==b)}}catch(Q){wn(u,u.return,Q)}}function Fc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var _=b.next;g=_;do{if((g.tag&l)===l){var U=g.inst,Q=U.destroy;if(Q!==void 0){U.destroy=void 0,b=u;var ue=f,Oe=Q;try{Oe()}catch(Xe){wn(b,ue,Xe)}}}g=g.next}while(g!==_)}}catch(Xe){wn(u,u.return,Xe)}}function ZC(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{Fk(u,f)}catch(g){wn(l,l.return,g)}}}function e9(l,u,f){f.props=md(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){wn(l,u,g)}}function kp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){wn(l,u,b)}}function Vo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){wn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){wn(l,u,b)}else f.current=null}function t9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){wn(l,l.return,b)}}function o5(l,u,f){try{var g=l.stateNode;fJ(g,l.type,f,u),g[rn]=u}catch(b){wn(l,l.return,b)}}function r9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Qc(l.type)||l.tag===4}function l5(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||r9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Qc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function c5(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Tn));else if(g!==4&&(g===27&&Qc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(c5(l,u,f),l=l.sibling;l!==null;)c5(l,u,f),l=l.sibling}function z1(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Qc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(z1(l,u,f),l=l.sibling;l!==null;)z1(l,u,f),l=l.sibling}function n9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);ui(u,g,f),u[_r]=l,u[rn]=f}catch(_){wn(l,l.return,_)}}var Ol=!1,Oa=!1,u5=!1,a9=typeof WeakSet=="function"?WeakSet:Set,ei=null;function GY(l,u){if(l=l.containerInfo,O5=oy,l=gk(l),n4(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var U=0,Q=-1,ue=-1,Oe=0,Xe=0,et=l,De=null;t:for(;;){for(var $e;et!==f||b!==0&&et.nodeType!==3||(Q=U+b),et!==_||g!==0&&et.nodeType!==3||(ue=U+g),et.nodeType===3&&(U+=et.nodeValue.length),($e=et.firstChild)!==null;)De=et,et=$e;for(;;){if(et===l)break t;if(De===f&&++Oe===b&&(Q=U),De===_&&++Xe===g&&(ue=U),($e=et.nextSibling)!==null)break;et=De,De=et.parentNode}et=$e}f=Q===-1||ue===-1?null:{start:Q,end:ue}}else f=null}f=f||{start:0,end:0}}else f=null;for(I5={focusedElem:l,selectionRange:f},oy=!1,ei=u;ei!==null;)if(u=ei,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,ei=l;else for(;ei!==null;){switch(u=ei,_=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,f=u,b=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var Ot=md(f.type,b);l=g.getSnapshotBeforeUpdate(Ot,_),g.__reactInternalSnapshotBeforeUpdate=l}catch(Yt){wn(f,f.return,Yt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)D5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":D5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,ei=l;break}ei=u.return}}function i9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Rl(l,f),g&4&&Ep(5,f);break;case 1:if(Rl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(U){wn(f,f.return,U)}else{var b=md(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){wn(f,f.return,U)}}g&64&&ZC(f),g&512&&kp(f,f.return);break;case 3:if(Rl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Fk(l,u)}catch(U){wn(f,f.return,U)}}break;case 27:u===null&&g&4&&n9(f);case 26:case 5:Rl(l,f),u===null&&g&4&&t9(f),g&512&&kp(f,f.return);break;case 12:Rl(l,f);break;case 31:Rl(l,f),g&4&&l9(l,f);break;case 13:Rl(l,f),g&4&&c9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=tJ.bind(null,f),wJ(l,f))));break;case 22:if(g=f.memoizedState!==null||Ol,!g){u=u!==null&&u.memoizedState!==null||Oa,b=Ol;var _=Oa;Ol=g,(Oa=u)&&!_?Ml(l,f,(f.subtreeFlags&8772)!==0):Rl(l,f),Ol=b,Oa=_}break;case 30:break;default:Rl(l,f)}}function s9(l){var u=l.alternate;u!==null&&(l.alternate=null,s9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&_t(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Yn=null,Gi=!1;function Il(l,u,f){for(f=f.child;f!==null;)o9(l,u,f),f=f.sibling}function o9(l,u,f){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(mt,f)}catch{}switch(f.tag){case 26:Oa||Vo(f,u),Il(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Oa||Vo(f,u);var g=Yn,b=Gi;Qc(f.type)&&(Yn=f.stateNode,Gi=!1),Il(l,u,f),Bp(f.stateNode),Yn=g,Gi=b;break;case 5:Oa||Vo(f,u);case 6:if(g=Yn,b=Gi,Yn=null,Il(l,u,f),Yn=g,Gi=b,Yn!==null)if(Gi)try{(Yn.nodeType===9?Yn.body:Yn.nodeName==="HTML"?Yn.ownerDocument.body:Yn).removeChild(f.stateNode)}catch(_){wn(f,u,_)}else try{Yn.removeChild(f.stateNode)}catch(_){wn(f,u,_)}break;case 18:Yn!==null&&(Gi?(l=Yn,Z9(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),oh(l)):Z9(Yn,f.stateNode));break;case 4:g=Yn,b=Gi,Yn=f.stateNode.containerInfo,Gi=!0,Il(l,u,f),Yn=g,Gi=b;break;case 0:case 11:case 14:case 15:Fc(2,f,u),Oa||Fc(4,f,u),Il(l,u,f);break;case 1:Oa||(Vo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&e9(f,u,g)),Il(l,u,f);break;case 21:Il(l,u,f);break;case 22:Oa=(g=Oa)||f.memoizedState!==null,Il(l,u,f),Oa=g;break;default:Il(l,u,f)}}function l9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{oh(l)}catch(f){wn(u,u.return,f)}}}function c9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{oh(l)}catch(f){wn(u,u.return,f)}}function WY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new a9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new a9),u;default:throw Error(n(435,l.tag))}}function U1(l,u){var f=WY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=rJ.bind(null,l,g);g.then(b,b)}})}function Wi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],_=l,U=u,Q=U;e:for(;Q!==null;){switch(Q.tag){case 27:if(Qc(Q.type)){Yn=Q.stateNode,Gi=!1;break e}break;case 5:Yn=Q.stateNode,Gi=!1;break e;case 3:case 4:Yn=Q.stateNode.containerInfo,Gi=!0;break e}Q=Q.return}if(Yn===null)throw Error(n(160));o9(_,U,b),Yn=null,Gi=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)u9(u,l),u=u.sibling}var mo=null;function u9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Wi(u,l),Ki(l),g&4&&(Fc(3,l,l.return),Ep(3,l),Fc(5,l,l.return));break;case 1:Wi(u,l),Ki(l),g&512&&(Oa||f===null||Vo(f,f.return)),g&64&&Ol&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=mo;if(Wi(u,l),Ki(l),g&512&&(Oa||f===null||Vo(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":_=b.getElementsByTagName("title")[0],(!_||_[bi]||_[_r]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(g),b.head.insertBefore(_,b.querySelector("head > title"))),ui(_,g,f),_[_r]=l,br(_),g=_;break e;case"link":var U=uO("link","href",b).get(g+(f.href||""));if(U){for(var Q=0;Q<U.length;Q++)if(_=U[Q],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){U.splice(Q,1);break t}}_=b.createElement(g),ui(_,g,f),b.head.appendChild(_);break;case"meta":if(U=uO("meta","content",b).get(g+(f.content||""))){for(Q=0;Q<U.length;Q++)if(_=U[Q],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){U.splice(Q,1);break t}}_=b.createElement(g),ui(_,g,f),b.head.appendChild(_);break;default:throw Error(n(468,g))}_[_r]=l,br(_),g=_}l.stateNode=g}else dO(b,l.type,l.stateNode);else l.stateNode=cO(b,g,l.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?dO(b,l.type,l.stateNode):cO(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&o5(l,l.memoizedProps,f.memoizedProps)}break;case 27:Wi(u,l),Ki(l),g&512&&(Oa||f===null||Vo(f,f.return)),f!==null&&g&4&&o5(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Wi(u,l),Ki(l),g&512&&(Oa||f===null||Vo(f,f.return)),l.flags&32){b=l.stateNode;try{Pe(b,"")}catch(Ot){wn(l,l.return,Ot)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,o5(l,b,f!==null?f.memoizedProps:b)),g&1024&&(u5=!0);break;case 6:if(Wi(u,l),Ki(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ot){wn(l,l.return,Ot)}}break;case 3:if(ny=null,b=mo,mo=ty(u.containerInfo),Wi(u,l),mo=b,Ki(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{oh(u.containerInfo)}catch(Ot){wn(l,l.return,Ot)}u5&&(u5=!1,d9(l));break;case 4:g=mo,mo=ty(l.stateNode.containerInfo),Wi(u,l),Ki(l),mo=g;break;case 12:Wi(u,l),Ki(l);break;case 31:Wi(u,l),Ki(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,U1(l,g)));break;case 13:Wi(u,l),Ki(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(F1=Ge()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,U1(l,g)));break;case 22:b=l.memoizedState!==null;var ue=f!==null&&f.memoizedState!==null,Oe=Ol,Xe=Oa;if(Ol=Oe||b,Oa=Xe||ue,Wi(u,l),Oa=Xe,Ol=Oe,Ki(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||ue||Ol||Oa||gd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){ue=f=u;try{if(_=ue.stateNode,b)U=_.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{Q=ue.stateNode;var et=ue.memoizedProps.style,De=et!=null&&et.hasOwnProperty("display")?et.display:null;Q.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Ot){wn(ue,ue.return,Ot)}}}else if(u.tag===6){if(f===null){ue=u;try{ue.stateNode.nodeValue=b?"":ue.memoizedProps}catch(Ot){wn(ue,ue.return,Ot)}}}else if(u.tag===18){if(f===null){ue=u;try{var $e=ue.stateNode;b?eO($e,!0):eO(ue.stateNode,!1)}catch(Ot){wn(ue,ue.return,Ot)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,U1(l,f))));break;case 19:Wi(u,l),Ki(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,U1(l,g)));break;case 30:break;case 21:break;default:Wi(u,l),Ki(l)}}function Ki(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(r9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,_=l5(l);z1(l,_,b);break;case 5:var U=f.stateNode;f.flags&32&&(Pe(U,""),f.flags&=-33);var Q=l5(l);z1(l,Q,U);break;case 3:case 4:var ue=f.stateNode.containerInfo,Oe=l5(l);c5(l,Oe,ue);break;default:throw Error(n(161))}}catch(Xe){wn(l,l.return,Xe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function d9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;d9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Rl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)i9(l,u.alternate,u),u=u.sibling}function gd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Fc(4,u,u.return),gd(u);break;case 1:Vo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&e9(u,u.return,f),gd(u);break;case 27:Bp(u.stateNode);case 26:case 5:Vo(u,u.return),gd(u);break;case 22:u.memoizedState===null&&gd(u);break;case 30:gd(u);break;default:gd(u)}l=l.sibling}}function Ml(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,_=u,U=_.flags;switch(_.tag){case 0:case 11:case 15:Ml(b,_,f),Ep(4,_);break;case 1:if(Ml(b,_,f),g=_,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Oe){wn(g,g.return,Oe)}if(g=_,b=g.updateQueue,b!==null){var Q=g.stateNode;try{var ue=b.shared.hiddenCallbacks;if(ue!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ue.length;b++)Vk(ue[b],Q)}catch(Oe){wn(g,g.return,Oe)}}f&&U&64&&ZC(_),kp(_,_.return);break;case 27:n9(_);case 26:case 5:Ml(b,_,f),f&&g===null&&U&4&&t9(_),kp(_,_.return);break;case 12:Ml(b,_,f);break;case 31:Ml(b,_,f),f&&U&4&&l9(b,_);break;case 13:Ml(b,_,f),f&&U&4&&c9(b,_);break;case 22:_.memoizedState===null&&Ml(b,_,f),kp(_,_.return);break;case 30:break;default:Ml(b,_,f)}u=u.sibling}}function d5(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&mp(f))}function h5(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&mp(l))}function go(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)h9(l,u,f,g),u=u.sibling}function h9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:go(l,u,f,g),b&2048&&Ep(9,u);break;case 1:go(l,u,f,g);break;case 3:go(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&mp(l)));break;case 12:if(b&2048){go(l,u,f,g),l=u.stateNode;try{var _=u.memoizedProps,U=_.id,Q=_.onPostCommit;typeof Q=="function"&&Q(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ue){wn(u,u.return,ue)}}else go(l,u,f,g);break;case 31:go(l,u,f,g);break;case 13:go(l,u,f,g);break;case 23:break;case 22:_=u.stateNode,U=u.alternate,u.memoizedState!==null?_._visibility&2?go(l,u,f,g):Cp(l,u):_._visibility&2?go(l,u,f,g):(_._visibility|=2,Q0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&d5(U,u);break;case 24:go(l,u,f,g),b&2048&&h5(u.alternate,u);break;default:go(l,u,f,g)}}function Q0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=l,U=u,Q=f,ue=g,Oe=U.flags;switch(U.tag){case 0:case 11:case 15:Q0(_,U,Q,ue,b),Ep(8,U);break;case 23:break;case 22:var Xe=U.stateNode;U.memoizedState!==null?Xe._visibility&2?Q0(_,U,Q,ue,b):Cp(_,U):(Xe._visibility|=2,Q0(_,U,Q,ue,b)),b&&Oe&2048&&d5(U.alternate,U);break;case 24:Q0(_,U,Q,ue,b),b&&Oe&2048&&h5(U.alternate,U);break;default:Q0(_,U,Q,ue,b)}u=u.sibling}}function Cp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:Cp(f,g),b&2048&&d5(g.alternate,g);break;case 24:Cp(f,g),b&2048&&h5(g.alternate,g);break;default:Cp(f,g)}u=u.sibling}}var Op=8192;function Y0(l,u,f){if(l.subtreeFlags&Op)for(l=l.child;l!==null;)f9(l,u,f),l=l.sibling}function f9(l,u,f){switch(l.tag){case 26:Y0(l,u,f),l.flags&Op&&l.memoizedState!==null&&RJ(f,mo,l.memoizedState,l.memoizedProps);break;case 5:Y0(l,u,f);break;case 3:case 4:var g=mo;mo=ty(l.stateNode.containerInfo),Y0(l,u,f),mo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Op,Op=16777216,Y0(l,u,f),Op=g):Y0(l,u,f));break;default:Y0(l,u,f)}}function p9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Ip(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ei=g,g9(g,l)}p9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)m9(l),l=l.sibling}function m9(l){switch(l.tag){case 0:case 11:case 15:Ip(l),l.flags&2048&&Fc(9,l,l.return);break;case 3:Ip(l);break;case 12:Ip(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,V1(l)):Ip(l);break;default:Ip(l)}}function V1(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ei=g,g9(g,l)}p9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Fc(8,u,u.return),V1(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,V1(u));break;default:V1(u)}l=l.sibling}}function g9(l,u){for(;ei!==null;){var f=ei;switch(f.tag){case 0:case 11:case 15:Fc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:mp(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,ei=g;else e:for(f=l;ei!==null;){g=ei;var b=g.sibling,_=g.return;if(s9(g),g===f){ei=null;break e}if(b!==null){b.return=_,ei=b;break e}ei=_}}}var KY={getCacheForType:function(l){var u=li(Ea),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return li(Ea).controller.signal}},XY=typeof WeakMap=="function"?WeakMap:Map,an=0,Pn=null,Ir=null,Pr=0,bn=0,Ss=null,qc=!1,J0=!1,f5=!1,Dl=0,la=0,Hc=0,xd=0,p5=0,Ns=0,Z0=0,Rp=null,Xi=null,m5=!1,F1=0,x9=0,q1=1/0,H1=null,Gc=null,za=0,Wc=null,eh=null,Pl=0,g5=0,x5=null,y9=null,Mp=0,y5=null;function _s(){return(an&2)!==0&&Pr!==0?Pr&-Pr:G.T!==null?_5():qe()}function v9(){if(Ns===0)if((Pr&536870912)===0||Ur){var l=yr;yr<<=1,(yr&3932160)===0&&(yr=262144),Ns=l}else Ns=536870912;return l=bs.current,l!==null&&(l.flags|=32),Ns}function Qi(l,u,f){(l===Pn&&(bn===2||bn===9)||l.cancelPendingCommit!==null)&&(th(l,0),Kc(l,Pr,Ns,!1)),xn(l,f),((an&2)===0||l!==Pn)&&(l===Pn&&((an&2)===0&&(xd|=f),la===4&&Kc(l,Pr,Ns,!1)),Fo(l))}function b9(l,u,f){if((an&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Fr(l,u),b=g?JY(l,u):b5(l,u,!0),_=g;do{if(b===0){J0&&!g&&Kc(l,u,0,!1);break}else{if(f=l.current.alternate,_&&!QY(f)){b=b5(l,u,!1),_=!1;continue}if(b===2){if(_=u,l.errorRecoveryDisabledLanes&_)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var Q=l;b=Rp;var ue=Q.current.memoizedState.isDehydrated;if(ue&&(th(Q,U).flags|=256),U=b5(Q,U,!1),U!==2){if(f5&&!ue){Q.errorRecoveryDisabledLanes|=_,xd|=_,b=4;break e}_=Xi,Xi=b,_!==null&&(Xi===null?Xi=_:Xi.push.apply(Xi,_))}b=U}if(_=!1,b!==2)continue}}if(b===1){th(l,0),Kc(l,u,0,!0);break}e:{switch(g=l,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Kc(g,u,Ns,!qc);break e;case 2:Xi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=F1+300-Ge(),10<b)){if(Kc(g,u,Ns,!qc),bt(g,0,!0)!==0)break e;Pl=u,g.timeoutHandle=Y9(w9.bind(null,g,f,Xi,H1,m5,u,Ns,xd,Z0,qc,_,"Throttled",-0,0),b);break e}w9(g,f,Xi,H1,m5,u,Ns,xd,Z0,qc,_,null,-0,0)}}break}while(!0);Fo(l)}function w9(l,u,f,g,b,_,U,Q,ue,Oe,Xe,et,De,$e){if(l.timeoutHandle=-1,et=u.subtreeFlags,et&8192||(et&16785408)===16785408){et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tn},f9(u,_,et);var Ot=(_&62914560)===_?F1-Ge():(_&4194048)===_?x9-Ge():0;if(Ot=MJ(et,Ot),Ot!==null){Pl=_,l.cancelPendingCommit=Ot(k9.bind(null,l,u,_,f,g,b,U,Q,ue,Xe,et,null,De,$e)),Kc(l,_,U,!Oe);return}}k9(l,u,_,f,g,b,U,Q,ue)}function QY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],_=b.getSnapshot;b=b.value;try{if(!ys(_(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Kc(l,u,f,g){u&=~p5,u&=~xd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var _=31-tt(b),U=1<<_;g[_]=-1,b&=~U}f!==0&&Qn(l,f,u)}function G1(){return(an&6)===0?(Dp(0),!1):!0}function v5(){if(Ir!==null){if(bn===0)var l=Ir.return;else l=Ir,Tl=ld=null,D4(l),H0=null,xp=0,l=Ir;for(;l!==null;)JC(l.alternate,l),l=l.return;Ir=null}}function th(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,gJ(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Pl=0,v5(),Pn=l,Ir=f=Nl(l.current,null),Pr=u,bn=0,Ss=null,qc=!1,J0=Fr(l,u),f5=!1,Z0=Ns=p5=xd=Hc=la=0,Xi=Rp=null,m5=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-tt(g),_=1<<b;u|=l[b],g&=~_}return Dl=u,f1(),f}function S9(l,u){vr=null,G.H=Tp,u===q0||u===w1?(u=Bk(),bn=3):u===N4?(u=Bk(),bn=4):bn=u===Y4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ss=u,Ir===null&&(la=1,D1(l,Us(u,l.current)))}function N9(){var l=bs.current;return l===null?!0:(Pr&4194048)===Pr?Hs===null:(Pr&62914560)===Pr||(Pr&536870912)!==0?l===Hs:!1}function _9(){var l=G.H;return G.H=Tp,l===null?Tp:l}function T9(){var l=G.A;return G.A=KY,l}function W1(){la=4,qc||(Pr&4194048)!==Pr&&bs.current!==null||(J0=!0),(Hc&134217727)===0&&(xd&134217727)===0||Pn===null||Kc(Pn,Pr,Ns,!1)}function b5(l,u,f){var g=an;an|=2;var b=_9(),_=T9();(Pn!==l||Pr!==u)&&(H1=null,th(l,u)),u=!1;var U=la;e:do try{if(bn!==0&&Ir!==null){var Q=Ir,ue=Ss;switch(bn){case 8:v5(),U=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(u=!0);var Oe=bn;if(bn=0,Ss=null,rh(l,Q,ue,Oe),f&&J0){U=0;break e}break;default:Oe=bn,bn=0,Ss=null,rh(l,Q,ue,Oe)}}YY(),U=la;break}catch(Xe){S9(l,Xe)}while(!0);return u&&l.shellSuspendCounter++,Tl=ld=null,an=g,G.H=b,G.A=_,Ir===null&&(Pn=null,Pr=0,f1()),U}function YY(){for(;Ir!==null;)j9(Ir)}function JY(l,u){var f=an;an|=2;var g=_9(),b=T9();Pn!==l||Pr!==u?(H1=null,q1=Ge()+500,th(l,u)):J0=Fr(l,u);e:do try{if(bn!==0&&Ir!==null){u=Ir;var _=Ss;t:switch(bn){case 1:bn=0,Ss=null,rh(l,u,_,1);break;case 2:case 9:if(Pk(_)){bn=0,Ss=null,A9(u);break}u=function(){bn!==2&&bn!==9||Pn!==l||(bn=7),Fo(l)},_.then(u,u);break e;case 3:bn=7;break e;case 4:bn=5;break e;case 7:Pk(_)?(bn=0,Ss=null,A9(u)):(bn=0,Ss=null,rh(l,u,_,7));break;case 5:var U=null;switch(Ir.tag){case 26:U=Ir.memoizedState;case 5:case 27:var Q=Ir;if(U?hO(U):Q.stateNode.complete){bn=0,Ss=null;var ue=Q.sibling;if(ue!==null)Ir=ue;else{var Oe=Q.return;Oe!==null?(Ir=Oe,K1(Oe)):Ir=null}break t}}bn=0,Ss=null,rh(l,u,_,5);break;case 6:bn=0,Ss=null,rh(l,u,_,6);break;case 8:v5(),la=6;break e;default:throw Error(n(462))}}ZY();break}catch(Xe){S9(l,Xe)}while(!0);return Tl=ld=null,G.H=g,G.A=b,an=f,Ir!==null?0:(Pn=null,Pr=0,f1(),la)}function ZY(){for(;Ir!==null&&!tr();)j9(Ir)}function j9(l){var u=QC(l.alternate,l,Dl);l.memoizedProps=l.pendingProps,u===null?K1(l):Ir=u}function A9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=qC(f,u,u.pendingProps,u.type,void 0,Pr);break;case 11:u=qC(f,u,u.pendingProps,u.type.render,u.ref,Pr);break;case 5:D4(u);default:JC(f,u),u=Ir=Tk(u,Dl),u=QC(f,u,Dl)}l.memoizedProps=l.pendingProps,u===null?K1(l):Ir=u}function rh(l,u,f,g){Tl=ld=null,D4(u),H0=null,xp=0;var b=u.return;try{if(UY(l,b,u,f,Pr)){la=1,D1(l,Us(f,l.current)),Ir=null;return}}catch(_){if(b!==null)throw Ir=b,_;la=1,D1(l,Us(f,l.current)),Ir=null;return}u.flags&32768?(Ur||g===1?l=!0:J0||(Pr&536870912)!==0?l=!1:(qc=l=!0,(g===2||g===9||g===3||g===6)&&(g=bs.current,g!==null&&g.tag===13&&(g.flags|=16384))),E9(u,l)):K1(u)}function K1(l){var u=l;do{if((u.flags&32768)!==0){E9(u,qc);return}l=u.return;var f=qY(u.alternate,u,Dl);if(f!==null){Ir=f;return}if(u=u.sibling,u!==null){Ir=u;return}Ir=u=l}while(u!==null);la===0&&(la=5)}function E9(l,u){do{var f=HY(l.alternate,l);if(f!==null){f.flags&=32767,Ir=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Ir=l;return}Ir=l=f}while(l!==null);la=6,Ir=null}function k9(l,u,f,g,b,_,U,Q,ue){l.cancelPendingCommit=null;do X1();while(za!==0);if((an&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=l4,dr(l,f,_,U,Q,ue),l===Pn&&(Ir=Pn=null,Pr=0),eh=u,Wc=l,Pl=f,g5=_,x5=b,y9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,nJ($t,function(){return M9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=G.T,G.T=null,b=Y.p,Y.p=2,U=an,an|=4;try{GY(l,u,f)}finally{an=U,Y.p=b,G.T=g}}za=1,C9(),O9(),I9()}}function C9(){if(za===1){za=0;var l=Wc,u=eh,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=G.T,G.T=null;var g=Y.p;Y.p=2;var b=an;an|=4;try{u9(u,l);var _=I5,U=gk(l.containerInfo),Q=_.focusedElem,ue=_.selectionRange;if(U!==Q&&Q&&Q.ownerDocument&&mk(Q.ownerDocument.documentElement,Q)){if(ue!==null&&n4(Q)){var Oe=ue.start,Xe=ue.end;if(Xe===void 0&&(Xe=Oe),"selectionStart"in Q)Q.selectionStart=Oe,Q.selectionEnd=Math.min(Xe,Q.value.length);else{var et=Q.ownerDocument||document,De=et&&et.defaultView||window;if(De.getSelection){var $e=De.getSelection(),Ot=Q.textContent.length,Yt=Math.min(ue.start,Ot),En=ue.end===void 0?Yt:Math.min(ue.end,Ot);!$e.extend&&Yt>En&&(U=En,En=Yt,Yt=U);var _e=pk(Q,Yt),me=pk(Q,En);if(_e&&me&&($e.rangeCount!==1||$e.anchorNode!==_e.node||$e.anchorOffset!==_e.offset||$e.focusNode!==me.node||$e.focusOffset!==me.offset)){var ke=et.createRange();ke.setStart(_e.node,_e.offset),$e.removeAllRanges(),Yt>En?($e.addRange(ke),$e.extend(me.node,me.offset)):(ke.setEnd(me.node,me.offset),$e.addRange(ke))}}}}for(et=[],$e=Q;$e=$e.parentNode;)$e.nodeType===1&&et.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<et.length;Q++){var Je=et[Q];Je.element.scrollLeft=Je.left,Je.element.scrollTop=Je.top}}oy=!!O5,I5=O5=null}finally{an=b,Y.p=g,G.T=f}}l.current=u,za=2}}function O9(){if(za===2){za=0;var l=Wc,u=eh,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=G.T,G.T=null;var g=Y.p;Y.p=2;var b=an;an|=4;try{i9(l,u.alternate,u)}finally{an=b,Y.p=g,G.T=f}}za=3}}function I9(){if(za===4||za===3){za=0,he();var l=Wc,u=eh,f=Pl,g=y9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?za=5:(za=0,eh=Wc=null,R9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Gc=null),Ye(f),u=u.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(mt,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=G.T,b=Y.p,Y.p=2,G.T=null;try{for(var _=l.onRecoverableError,U=0;U<g.length;U++){var Q=g[U];_(Q.value,{componentStack:Q.stack})}}finally{G.T=u,Y.p=b}}(Pl&3)!==0&&X1(),Fo(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===y5?Mp++:(Mp=0,y5=l):Mp=0,Dp(0)}}function R9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,mp(u)))}function X1(){return C9(),O9(),I9(),M9()}function M9(){if(za!==5)return!1;var l=Wc,u=g5;g5=0;var f=Ye(Pl),g=G.T,b=Y.p;try{Y.p=32>f?32:f,G.T=null,f=x5,x5=null;var _=Wc,U=Pl;if(za=0,eh=Wc=null,Pl=0,(an&6)!==0)throw Error(n(331));var Q=an;if(an|=4,m9(_.current),h9(_,_.current,U,f),an=Q,Dp(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(mt,_)}catch{}return!0}finally{Y.p=b,G.T=g,R9(l,u)}}function D9(l,u,f){u=Us(f,u),u=Q4(l.stateNode,u,2),l=zc(l,u,2),l!==null&&(xn(l,2),Fo(l))}function wn(l,u,f){if(l.tag===3)D9(l,l,f);else for(;u!==null;){if(u.tag===3){D9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Gc===null||!Gc.has(g))){l=Us(f,l),f=PC(2),g=zc(u,f,2),g!==null&&(LC(f,g,u,l),xn(g,2),Fo(g));break}}u=u.return}}function w5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new XY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(f5=!0,b.add(f),l=eJ.bind(null,l,u,f),u.then(l,l))}function eJ(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Pn===l&&(Pr&f)===f&&(la===4||la===3&&(Pr&62914560)===Pr&&300>Ge()-F1?(an&2)===0&&th(l,0):p5|=f,Z0===Pr&&(Z0=0)),Fo(l)}function P9(l,u){u===0&&(u=Dr()),l=id(l,u),l!==null&&(xn(l,u),Fo(l))}function tJ(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),P9(l,f)}function rJ(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),P9(l,f)}function nJ(l,u){return qt(l,u)}var Q1=null,nh=null,S5=!1,Y1=!1,N5=!1,Xc=0;function Fo(l){l!==nh&&l.next===null&&(nh===null?Q1=nh=l:nh=nh.next=l),Y1=!0,S5||(S5=!0,iJ())}function Dp(l,u){if(!N5&&Y1){N5=!0;do for(var f=!1,g=Q1;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var _=0;else{var U=g.suspendedLanes,Q=g.pingedLanes;_=(1<<31-tt(42|l)+1)-1,_&=b&~(U&~Q),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,z9(g,_))}else _=Pr,_=bt(g,g===Pn?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Fr(g,_)||(f=!0,z9(g,_));g=g.next}while(f);N5=!1}}function aJ(){L9()}function L9(){Y1=S5=!1;var l=0;Xc!==0&&mJ()&&(l=Xc);for(var u=Ge(),f=null,g=Q1;g!==null;){var b=g.next,_=B9(g,u);_===0?(g.next=null,f===null?Q1=b:f.next=b,b===null&&(nh=f)):(f=g,(l!==0||(_&3)!==0)&&(Y1=!0)),g=b}za!==0&&za!==5||Dp(l),Xc!==0&&(Xc=0)}function B9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var U=31-tt(_),Q=1<<U,ue=b[U];ue===-1?((Q&f)===0||(Q&g)!==0)&&(b[U]=tn(Q,u)):ue<=u&&(l.expiredLanes|=Q),_&=~Q}if(u=Pn,f=Pr,f=bt(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(bn===2||bn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Dt(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Fr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&Dt(g),Ye(f)){case 2:case 8:f=it;break;case 32:f=$t;break;case 268435456:f=kr;break;default:f=$t}return g=$9.bind(null,l),f=qt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&Dt(g),l.callbackPriority=2,l.callbackNode=null,2}function $9(l,u){if(za!==0&&za!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(X1()&&l.callbackNode!==f)return null;var g=Pr;return g=bt(l,l===Pn?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(b9(l,g,u),B9(l,Ge()),l.callbackNode!=null&&l.callbackNode===f?$9.bind(null,l):null)}function z9(l,u){if(X1())return null;b9(l,u,!0)}function iJ(){xJ(function(){(an&6)!==0?qt(Ke,aJ):L9()})}function _5(){if(Xc===0){var l=V0;l===0&&(l=cn,cn<<=1,(cn&261888)===0&&(cn=256)),Xc=l}return Xc}function U9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Dn(""+l)}function V9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function sJ(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var _=U9((b[rn]||null).action),U=g.submitter;U&&(u=(u=U[rn]||null)?U9(u.formAction):U.getAttribute("formAction"),u!==null&&(_=u,U=null));var Q=new Ju("action","action",null,g,b);l.push({event:Q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Xc!==0){var ue=U?V9(b,U):new FormData(b);q4(f,{pending:!0,data:ue,method:b.method,action:_},null,ue)}}else typeof _=="function"&&(Q.preventDefault(),ue=U?V9(b,U):new FormData(b),q4(f,{pending:!0,data:ue,method:b.method,action:_},_,ue))},currentTarget:b}]})}}for(var T5=0;T5<o4.length;T5++){var j5=o4[T5],oJ=j5.toLowerCase(),lJ=j5[0].toUpperCase()+j5.slice(1);po(oJ,"on"+lJ)}po(vk,"onAnimationEnd"),po(bk,"onAnimationIteration"),po(wk,"onAnimationStart"),po("dblclick","onDoubleClick"),po("focusin","onFocus"),po("focusout","onBlur"),po(_Y,"onTransitionRun"),po(TY,"onTransitionStart"),po(jY,"onTransitionCancel"),po(Sk,"onTransitionEnd"),zr("onMouseEnter",["mouseout","mouseover"]),zr("onMouseLeave",["mouseout","mouseover"]),zr("onPointerEnter",["pointerout","pointerover"]),zr("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cJ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pp));function F9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var U=g.length-1;0<=U;U--){var Q=g[U],ue=Q.instance,Oe=Q.currentTarget;if(Q=Q.listener,ue!==_&&b.isPropagationStopped())break e;_=Q,b.currentTarget=Oe;try{_(b)}catch(Xe){h1(Xe)}b.currentTarget=null,_=ue}else for(U=0;U<g.length;U++){if(Q=g[U],ue=Q.instance,Oe=Q.currentTarget,Q=Q.listener,ue!==_&&b.isPropagationStopped())break e;_=Q,b.currentTarget=Oe;try{_(b)}catch(Xe){h1(Xe)}b.currentTarget=null,_=ue}}}}function Rr(l,u){var f=u[pa];f===void 0&&(f=u[pa]=new Set);var g=l+"__bubble";f.has(g)||(q9(u,l,2,!1),f.add(g))}function A5(l,u,f){var g=0;u&&(g|=4),q9(f,l,g,u)}var J1="_reactListening"+Math.random().toString(36).slice(2);function E5(l){if(!l[J1]){l[J1]=!0,vn.forEach(function(f){f!=="selectionchange"&&(cJ.has(f)||A5(f,!1,l),A5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[J1]||(u[J1]=!0,A5("selectionchange",!1,u))}}function q9(l,u,f,g){switch(vO(u)){case 2:var b=LJ;break;case 8:b=BJ;break;default:b=F5}f=b.bind(null,u,f,l),b=void 0,!ap||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function k5(l,u,f,g,b){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var U=g.tag;if(U===3||U===4){var Q=g.stateNode.containerInfo;if(Q===b)break;if(U===4)for(U=g.return;U!==null;){var ue=U.tag;if((ue===3||ue===4)&&U.stateNode.containerInfo===b)return;U=U.return}for(;Q!==null;){if(U=fe(Q),U===null)return;if(ue=U.tag,ue===5||ue===6||ue===26||ue===27){g=_=U;continue e}Q=Q.parentNode}}g=g.return}Qx(function(){var Oe=_,Xe=Tr(f),et=[];e:{var De=Nk.get(l);if(De!==void 0){var $e=Ju,Ot=l;switch(l){case"keypress":if(Yu(f)===0)break e;case"keydown":case"keyup":$e=i1;break;case"focusin":Ot="focus",$e=Cc;break;case"focusout":Ot="blur",$e=Cc;break;case"beforeblur":case"afterblur":$e=Cc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=Jx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Zx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=o1;break;case vk:case bk:case wk:$e=I0;break;case Sk:$e=R0;break;case"scroll":case"scrollend":$e=Yx;break;case"wheel":$e=c1;break;case"copy":case"cut":case"paste":$e=t1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=cp;break;case"toggle":case"beforetoggle":$e=Ic}var Yt=(u&4)!==0,En=!Yt&&(l==="scroll"||l==="scrollend"),_e=Yt?De!==null?De+"Capture":null:De;Yt=[];for(var me=Oe,ke;me!==null;){var Je=me;if(ke=Je.stateNode,Je=Je.tag,Je!==5&&Je!==26&&Je!==27||ke===null||_e===null||(Je=qi(me,_e),Je!=null&&Yt.push(Lp(me,Je,ke))),En)break;me=me.return}0<Yt.length&&(De=new $e(De,Ot,null,f,Xe),et.push({event:De,listeners:Yt}))}}if((u&7)===0){e:{if(De=l==="mouseover"||l==="pointerover",$e=l==="mouseout"||l==="pointerout",De&&f!==Fi&&(Ot=f.relatedTarget||f.fromElement)&&(fe(Ot)||Ot[yn]))break e;if(($e||De)&&(De=Xe.window===Xe?Xe:(De=Xe.ownerDocument)?De.defaultView||De.parentWindow:window,$e?(Ot=f.relatedTarget||f.toElement,$e=Oe,Ot=Ot?fe(Ot):null,Ot!==null&&(En=i(Ot),Yt=Ot.tag,Ot!==En||Yt!==5&&Yt!==27&&Yt!==6)&&(Ot=null)):($e=null,Ot=Oe),$e!==Ot)){if(Yt=Jx,Je="onMouseLeave",_e="onMouseEnter",me="mouse",(l==="pointerout"||l==="pointerover")&&(Yt=cp,Je="onPointerLeave",_e="onPointerEnter",me="pointer"),En=$e==null?De:dt($e),ke=Ot==null?De:dt(Ot),De=new Yt(Je,me+"leave",$e,f,Xe),De.target=En,De.relatedTarget=ke,Je=null,fe(Xe)===Oe&&(Yt=new Yt(_e,me+"enter",Ot,f,Xe),Yt.target=ke,Yt.relatedTarget=En,Je=Yt),En=Je,$e&&Ot)t:{for(Yt=uJ,_e=$e,me=Ot,ke=0,Je=_e;Je;Je=Yt(Je))ke++;Je=0;for(var Ht=me;Ht;Ht=Yt(Ht))Je++;for(;0<ke-Je;)_e=Yt(_e),ke--;for(;0<Je-ke;)me=Yt(me),Je--;for(;ke--;){if(_e===me||me!==null&&_e===me.alternate){Yt=_e;break t}_e=Yt(_e),me=Yt(me)}Yt=null}else Yt=null;$e!==null&&H9(et,De,$e,Yt,!1),Ot!==null&&En!==null&&H9(et,En,Ot,Yt,!0)}}e:{if(De=Oe?dt(Oe):window,$e=De.nodeName&&De.nodeName.toLowerCase(),$e==="select"||$e==="input"&&De.type==="file")var Xr=lk;else if(Hi(De))if(ck)Xr=wY;else{Xr=vY;var zt=yY}else $e=De.nodeName,!$e||$e.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Oe&&Mn(Oe.elementType)&&(Xr=lk):Xr=bY;if(Xr&&(Xr=Xr(l,Oe))){rd(et,Xr,f,Xe);break e}zt&&zt(l,De,Oe),l==="focusout"&&Oe&&De.type==="number"&&Oe.memoizedProps.value!=null&&hn(De,"number",De.value)}switch(zt=Oe?dt(Oe):window,l){case"focusin":(Hi(zt)||zt.contentEditable==="true")&&(M0=zt,a4=Oe,hp=null);break;case"focusout":hp=a4=M0=null;break;case"mousedown":i4=!0;break;case"contextmenu":case"mouseup":case"dragend":i4=!1,xk(et,f,Xe);break;case"selectionchange":if(NY)break;case"keydown":case"keyup":xk(et,f,Xe)}var wr;if(P)e:{switch(l){case"compositionstart":var Lr="onCompositionStart";break e;case"compositionend":Lr="onCompositionEnd";break e;case"compositionupdate":Lr="onCompositionUpdate";break e}Lr=void 0}else Ar?fn(l,f)&&(Lr="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Lr="onCompositionStart");Lr&&(Te&&f.locale!=="ko"&&(Ar||Lr!=="onCompositionStart"?Lr==="onCompositionEnd"&&Ar&&(wr=jc()):(xs=Xe,C0="value"in xs?xs.value:xs.textContent,Ar=!0)),zt=Z1(Oe,Lr),0<zt.length&&(Lr=new sp(Lr,l,null,f,Xe),et.push({event:Lr,listeners:zt}),wr?Lr.data=wr:(wr=Aa(f),wr!==null&&(Lr.data=wr)))),(wr=ee?Ja(l,f):Za(l,f))&&(Lr=Z1(Oe,"onBeforeInput"),0<Lr.length&&(zt=new sp("onBeforeInput","beforeinput",null,f,Xe),et.push({event:zt,listeners:Lr}),zt.data=wr)),sJ(et,l,Oe,f,Xe)}F9(et,u)})}function Lp(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Z1(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=qi(l,f),b!=null&&g.unshift(Lp(l,b,_)),b=qi(l,u),b!=null&&g.push(Lp(l,b,_))),l.tag===3)return g;l=l.return}return[]}function uJ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function H9(l,u,f,g,b){for(var _=u._reactName,U=[];f!==null&&f!==g;){var Q=f,ue=Q.alternate,Oe=Q.stateNode;if(Q=Q.tag,ue!==null&&ue===g)break;Q!==5&&Q!==26&&Q!==27||Oe===null||(ue=Oe,b?(Oe=qi(f,_),Oe!=null&&U.unshift(Lp(f,Oe,ue))):b||(Oe=qi(f,_),Oe!=null&&U.push(Lp(f,Oe,ue)))),f=f.return}U.length!==0&&l.push({event:u,listeners:U})}var dJ=/\r\n?/g,hJ=/\u0000|\uFFFD/g;function G9(l){return(typeof l=="string"?l:""+l).replace(dJ,`
`).replace(hJ,"")}function W9(l,u){return u=G9(u),G9(l)===u}function An(l,u,f,g,b,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Pe(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Pe(l,""+g);break;case"className":ms(l,"class",g);break;case"tabIndex":ms(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ms(l,f,g);break;case"style":Zt(l,g,_);break;case"data":if(u!=="object"){ms(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Dn(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&An(l,u,"name",b.name,b,null),An(l,u,"formEncType",b.formEncType,b,null),An(l,u,"formMethod",b.formMethod,b,null),An(l,u,"formTarget",b.formTarget,b,null)):(An(l,u,"encType",b.encType,b,null),An(l,u,"method",b.method,b,null),An(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Dn(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=Tn);break;case"onScroll":g!=null&&Rr("scroll",l);break;case"onScrollEnd":g!=null&&Rr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=Dn(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":Rr("beforetoggle",l),Rr("toggle",l),ps(l,"popover",g);break;case"xlinkActuate":Ba(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ba(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ba(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ba(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ba(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ba(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ba(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ba(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ba(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":ps(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=$a.get(f)||f,ps(l,f,g))}}function C5(l,u,f,g,b,_){switch(f){case"style":Zt(l,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Pe(l,g):(typeof g=="number"||typeof g=="bigint")&&Pe(l,""+g);break;case"onScroll":g!=null&&Rr("scroll",l);break;case"onScrollEnd":g!=null&&Rr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=Tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),_=l[rn]||null,_=_!=null?_[f]:null,typeof _=="function"&&l.removeEventListener(u,_,b),typeof g=="function")){typeof _!="function"&&_!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):ps(l,f,g)}}}function ui(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rr("error",l),Rr("load",l);var g=!1,b=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var U=f[_];if(U!=null)switch(_){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:An(l,u,_,U,f,null)}}b&&An(l,u,"srcSet",f.srcSet,f,null),g&&An(l,u,"src",f.src,f,null);return;case"input":Rr("invalid",l);var Q=_=U=b=null,ue=null,Oe=null;for(g in f)if(f.hasOwnProperty(g)){var Xe=f[g];if(Xe!=null)switch(g){case"name":b=Xe;break;case"type":U=Xe;break;case"checked":ue=Xe;break;case"defaultChecked":Oe=Xe;break;case"value":_=Xe;break;case"defaultValue":Q=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(n(137,u));break;default:An(l,u,g,Xe,f,null)}}Or(l,_,Q,ue,Oe,U,b,!1);return;case"select":Rr("invalid",l),g=U=_=null;for(b in f)if(f.hasOwnProperty(b)&&(Q=f[b],Q!=null))switch(b){case"value":_=Q;break;case"defaultValue":U=Q;break;case"multiple":g=Q;default:An(l,u,b,Q,f,null)}u=_,f=U,l.multiple=!!g,u!=null?se(l,!!g,u,!1):f!=null&&se(l,!!g,f,!0);return;case"textarea":Rr("invalid",l),_=b=g=null;for(U in f)if(f.hasOwnProperty(U)&&(Q=f[U],Q!=null))switch(U){case"value":g=Q;break;case"defaultValue":b=Q;break;case"children":_=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(91));break;default:An(l,u,U,Q,f,null)}Le(l,g,b,_);return;case"option":for(ue in f)if(f.hasOwnProperty(ue)&&(g=f[ue],g!=null))switch(ue){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:An(l,u,ue,g,f,null)}return;case"dialog":Rr("beforetoggle",l),Rr("toggle",l),Rr("cancel",l),Rr("close",l);break;case"iframe":case"object":Rr("load",l);break;case"video":case"audio":for(g=0;g<Pp.length;g++)Rr(Pp[g],l);break;case"image":Rr("error",l),Rr("load",l);break;case"details":Rr("toggle",l);break;case"embed":case"source":case"link":Rr("error",l),Rr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in f)if(f.hasOwnProperty(Oe)&&(g=f[Oe],g!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:An(l,u,Oe,g,f,null)}return;default:if(Mn(u)){for(Xe in f)f.hasOwnProperty(Xe)&&(g=f[Xe],g!==void 0&&C5(l,u,Xe,g,f,void 0));return}}for(Q in f)f.hasOwnProperty(Q)&&(g=f[Q],g!=null&&An(l,u,Q,g,f,null))}function fJ(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,U=null,Q=null,ue=null,Oe=null,Xe=null;for($e in f){var et=f[$e];if(f.hasOwnProperty($e)&&et!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":ue=et;default:g.hasOwnProperty($e)||An(l,u,$e,null,g,et)}}for(var De in g){var $e=g[De];if(et=f[De],g.hasOwnProperty(De)&&($e!=null||et!=null))switch(De){case"type":_=$e;break;case"name":b=$e;break;case"checked":Oe=$e;break;case"defaultChecked":Xe=$e;break;case"value":U=$e;break;case"defaultValue":Q=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(n(137,u));break;default:$e!==et&&An(l,u,De,$e,g,et)}}nr(l,U,Q,ue,Oe,Xe,_,b);return;case"select":$e=U=Q=De=null;for(_ in f)if(ue=f[_],f.hasOwnProperty(_)&&ue!=null)switch(_){case"value":break;case"multiple":$e=ue;default:g.hasOwnProperty(_)||An(l,u,_,null,g,ue)}for(b in g)if(_=g[b],ue=f[b],g.hasOwnProperty(b)&&(_!=null||ue!=null))switch(b){case"value":De=_;break;case"defaultValue":Q=_;break;case"multiple":U=_;default:_!==ue&&An(l,u,b,_,g,ue)}u=Q,f=U,g=$e,De!=null?se(l,!!f,De,!1):!!g!=!!f&&(u!=null?se(l,!!f,u,!0):se(l,!!f,f?[]:"",!1));return;case"textarea":$e=De=null;for(Q in f)if(b=f[Q],f.hasOwnProperty(Q)&&b!=null&&!g.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:An(l,u,Q,null,g,b)}for(U in g)if(b=g[U],_=f[U],g.hasOwnProperty(U)&&(b!=null||_!=null))switch(U){case"value":De=b;break;case"defaultValue":$e=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&An(l,u,U,b,g,_)}xe(l,De,$e);return;case"option":for(var Ot in f)if(De=f[Ot],f.hasOwnProperty(Ot)&&De!=null&&!g.hasOwnProperty(Ot))switch(Ot){case"selected":l.selected=!1;break;default:An(l,u,Ot,null,g,De)}for(ue in g)if(De=g[ue],$e=f[ue],g.hasOwnProperty(ue)&&De!==$e&&(De!=null||$e!=null))switch(ue){case"selected":l.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:An(l,u,ue,De,g,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Yt in f)De=f[Yt],f.hasOwnProperty(Yt)&&De!=null&&!g.hasOwnProperty(Yt)&&An(l,u,Yt,null,g,De);for(Oe in g)if(De=g[Oe],$e=f[Oe],g.hasOwnProperty(Oe)&&De!==$e&&(De!=null||$e!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,u));break;default:An(l,u,Oe,De,g,$e)}return;default:if(Mn(u)){for(var En in f)De=f[En],f.hasOwnProperty(En)&&De!==void 0&&!g.hasOwnProperty(En)&&C5(l,u,En,void 0,g,De);for(Xe in g)De=g[Xe],$e=f[Xe],!g.hasOwnProperty(Xe)||De===$e||De===void 0&&$e===void 0||C5(l,u,Xe,De,g,$e);return}}for(var _e in f)De=f[_e],f.hasOwnProperty(_e)&&De!=null&&!g.hasOwnProperty(_e)&&An(l,u,_e,null,g,De);for(et in g)De=g[et],$e=f[et],!g.hasOwnProperty(et)||De===$e||De==null&&$e==null||An(l,u,et,De,g,$e)}function K9(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pJ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],_=b.transferSize,U=b.initiatorType,Q=b.duration;if(_&&Q&&K9(U)){for(U=0,Q=b.responseEnd,g+=1;g<f.length;g++){var ue=f[g],Oe=ue.startTime;if(Oe>Q)break;var Xe=ue.transferSize,et=ue.initiatorType;Xe&&K9(et)&&(ue=ue.responseEnd,U+=Xe*(ue<Q?1:(Q-Oe)/(ue-Oe)))}if(--g,u+=8*(_+U)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var O5=null,I5=null;function ey(l){return l.nodeType===9?l:l.ownerDocument}function X9(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q9(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function R5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var M5=null;function mJ(){var l=window.event;return l&&l.type==="popstate"?l===M5?!1:(M5=l,!0):(M5=null,!1)}var Y9=typeof setTimeout=="function"?setTimeout:void 0,gJ=typeof clearTimeout=="function"?clearTimeout:void 0,J9=typeof Promise=="function"?Promise:void 0,xJ=typeof queueMicrotask=="function"?queueMicrotask:typeof J9<"u"?function(l){return J9.resolve(null).then(l).catch(yJ)}:Y9;function yJ(l){setTimeout(function(){throw l})}function Qc(l){return l==="head"}function Z9(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),oh(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Bp(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Bp(f);for(var _=f.firstChild;_;){var U=_.nextSibling,Q=_.nodeName;_[bi]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=U}}else f==="body"&&Bp(l.ownerDocument.body);f=b}while(f);oh(u)}function eO(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function D5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":D5(f),_t(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function vJ(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[bi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=Gs(l.nextSibling),l===null)break}return null}function bJ(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Gs(l.nextSibling),l===null))return null;return l}function tO(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Gs(l.nextSibling),l===null))return null;return l}function P5(l){return l.data==="$?"||l.data==="$~"}function L5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function wJ(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Gs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var B5=null;function rO(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Gs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function nO(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function aO(l,u,f){switch(u=ey(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Bp(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);_t(l)}var Ws=new Map,iO=new Set;function ty(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ll=Y.d;Y.d={f:SJ,r:NJ,D:_J,C:TJ,L:jJ,m:AJ,X:kJ,S:EJ,M:CJ};function SJ(){var l=Ll.f(),u=G1();return l||u}function NJ(l){var u=nt(l);u!==null&&u.tag===5&&u.type==="form"?SC(u):Ll.r(l)}var ah=typeof document>"u"?null:document;function sO(l,u,f){var g=ah;if(g&&typeof u=="string"&&u){var b=jt(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),iO.has(b)||(iO.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),ui(u,"link",l),br(u),g.head.appendChild(u)))}}function _J(l){Ll.D(l),sO("dns-prefetch",l,null)}function TJ(l,u){Ll.C(l,u),sO("preconnect",l,u)}function jJ(l,u,f){Ll.L(l,u,f);var g=ah;if(g&&l&&u){var b='link[rel="preload"][as="'+jt(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+jt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+jt(f.imageSizes)+'"]')):b+='[href="'+jt(l)+'"]';var _=b;switch(u){case"style":_=ih(l);break;case"script":_=sh(l)}Ws.has(_)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Ws.set(_,l),g.querySelector(b)!==null||u==="style"&&g.querySelector($p(_))||u==="script"&&g.querySelector(zp(_))||(u=g.createElement("link"),ui(u,"link",l),br(u),g.head.appendChild(u)))}}function AJ(l,u){Ll.m(l,u);var f=ah;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+jt(g)+'"][href="'+jt(l)+'"]',_=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=sh(l)}if(!Ws.has(_)&&(l=m({rel:"modulepreload",href:l},u),Ws.set(_,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(zp(_)))return}g=f.createElement("link"),ui(g,"link",l),br(g),f.head.appendChild(g)}}}function EJ(l,u,f){Ll.S(l,u,f);var g=ah;if(g&&l){var b=rr(g).hoistableStyles,_=ih(l);u=u||"default";var U=b.get(_);if(!U){var Q={loading:0,preload:null};if(U=g.querySelector($p(_)))Q.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Ws.get(_))&&$5(l,f);var ue=U=g.createElement("link");br(ue),ui(ue,"link",l),ue._p=new Promise(function(Oe,Xe){ue.onload=Oe,ue.onerror=Xe}),ue.addEventListener("load",function(){Q.loading|=1}),ue.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,ry(U,u,g)}U={type:"stylesheet",instance:U,count:1,state:Q},b.set(_,U)}}}function kJ(l,u){Ll.X(l,u);var f=ah;if(f&&l){var g=rr(f).hoistableScripts,b=sh(l),_=g.get(b);_||(_=f.querySelector(zp(b)),_||(l=m({src:l,async:!0},u),(u=Ws.get(b))&&z5(l,u),_=f.createElement("script"),br(_),ui(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function CJ(l,u){Ll.M(l,u);var f=ah;if(f&&l){var g=rr(f).hoistableScripts,b=sh(l),_=g.get(b);_||(_=f.querySelector(zp(b)),_||(l=m({src:l,async:!0,type:"module"},u),(u=Ws.get(b))&&z5(l,u),_=f.createElement("script"),br(_),ui(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function oO(l,u,f,g){var b=(b=Be.current)?ty(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=ih(f.href),f=rr(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=ih(f.href);var _=rr(b).hoistableStyles,U=_.get(l);if(U||(b=b.ownerDocument||b,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,U),(_=b.querySelector($p(l)))&&!_._p&&(U.instance=_,U.state.loading=5),Ws.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Ws.set(l,f),_||OJ(b,l,f,U.state))),u&&g===null)throw Error(n(528,""));return U}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=sh(f),f=rr(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function ih(l){return'href="'+jt(l)+'"'}function $p(l){return'link[rel="stylesheet"]['+l+"]"}function lO(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function OJ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),ui(u,"link",f),br(u),l.head.appendChild(u))}function sh(l){return'[src="'+jt(l)+'"]'}function zp(l){return"script[async]"+l}function cO(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+jt(f.href)+'"]');if(g)return u.instance=g,br(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),br(g),ui(g,"style",b),ry(g,f.precedence,l),u.instance=g;case"stylesheet":b=ih(f.href);var _=l.querySelector($p(b));if(_)return u.state.loading|=4,u.instance=_,br(_),_;g=lO(f),(b=Ws.get(b))&&$5(g,b),_=(l.ownerDocument||l).createElement("link"),br(_);var U=_;return U._p=new Promise(function(Q,ue){U.onload=Q,U.onerror=ue}),ui(_,"link",g),u.state.loading|=4,ry(_,f.precedence,l),u.instance=_;case"script":return _=sh(f.src),(b=l.querySelector(zp(_)))?(u.instance=b,br(b),b):(g=f,(b=Ws.get(_))&&(g=m({},f),z5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),br(b),ui(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ry(g,f.precedence,l));return u.instance}function ry(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,_=b,U=0;U<g.length;U++){var Q=g[U];if(Q.dataset.precedence===u)_=Q;else if(_!==b)break}_?_.parentNode.insertBefore(l,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function $5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function z5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var ny=null;function uO(l,u,f){if(ny===null){var g=new Map,b=ny=new Map;b.set(f,g)}else b=ny,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var _=f[b];if(!(_[bi]||_[_r]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var U=_.getAttribute(u)||"";U=l+U;var Q=g.get(U);Q?Q.push(_):g.set(U,[_])}}return g}function dO(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function IJ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function hO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function RJ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=ih(g.href),_=u.querySelector($p(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=ay.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=_,br(_);return}_=u.ownerDocument||u,g=lO(g),(b=Ws.get(b))&&$5(g,b),_=_.createElement("link"),br(_);var U=_;U._p=new Promise(function(Q,ue){U.onload=Q,U.onerror=ue}),ui(_,"link",g),f.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=ay.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var U5=0;function MJ(l,u){return l.stylesheets&&l.count===0&&sy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&sy(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+u);0<l.imgBytes&&U5===0&&(U5=62500*pJ());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&sy(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>U5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function ay(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var iy=null;function sy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,iy=new Map,u.forEach(DJ,l),iy=null,ay.call(l))}function DJ(l,u){if(!(u.state.loading&4)){var f=iy.get(l);if(f)var g=f.get(null);else{f=new Map,iy.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var U=b[_];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(f.set(U.dataset.precedence,U),g=U)}g&&f.set(null,g)}b=u.instance,U=b.getAttribute("data-precedence"),_=f.get(U)||g,_===g&&f.set(null,b),f.set(U,b),this.count++,g=ay.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),_?_.parentNode.insertBefore(b,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Up={$$typeof:O,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function PJ(l,u,f,g,b,_,U,Q,ue){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.hiddenUpdates=Cr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function fO(l,u,f,g,b,_,U,Q,ue,Oe,Xe,et){return l=new PJ(l,u,f,U,ue,Oe,Xe,et,Q),u=1,_===!0&&(u|=24),_=vs(3,null,null,u),l.current=_,_.stateNode=l,u=b4(),u.refCount++,l.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},_4(_),l}function pO(l){return l?(l=L0,l):L0}function mO(l,u,f,g,b,_){b=pO(b),g.context===null?g.context=b:g.pendingContext=b,g=$c(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=zc(l,g,u),f!==null&&(Qi(f,l,u),vp(f,l,u))}function gO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function V5(l,u){gO(l,u),(l=l.alternate)&&gO(l,u)}function xO(l){if(l.tag===13||l.tag===31){var u=id(l,67108864);u!==null&&Qi(u,l,67108864),V5(l,67108864)}}function yO(l){if(l.tag===13||l.tag===31){var u=_s();u=Re(u);var f=id(l,u);f!==null&&Qi(f,l,u),V5(l,u)}}var oy=!0;function LJ(l,u,f,g){var b=G.T;G.T=null;var _=Y.p;try{Y.p=2,F5(l,u,f,g)}finally{Y.p=_,G.T=b}}function BJ(l,u,f,g){var b=G.T;G.T=null;var _=Y.p;try{Y.p=8,F5(l,u,f,g)}finally{Y.p=_,G.T=b}}function F5(l,u,f,g){if(oy){var b=q5(g);if(b===null)k5(l,u,g,ly,f),bO(l,g);else if(zJ(b,l,u,f,g))g.stopPropagation();else if(bO(l,g),u&4&&-1<$J.indexOf(l)){for(;b!==null;){var _=nt(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var U=Lt(_.pendingLanes);if(U!==0){var Q=_;for(Q.pendingLanes|=2,Q.entangledLanes|=2;U;){var ue=1<<31-tt(U);Q.entanglements[1]|=ue,U&=~ue}Fo(_),(an&6)===0&&(q1=Ge()+500,Dp(0))}}break;case 31:case 13:Q=id(_,2),Q!==null&&Qi(Q,_,2),G1(),V5(_,2)}if(_=q5(g),_===null&&k5(l,u,g,ly,f),_===b)break;b=_}b!==null&&g.stopPropagation()}else k5(l,u,g,null,f)}}function q5(l){return l=Tr(l),H5(l)}var ly=null;function H5(l){if(ly=null,l=fe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return ly=l,null}function vO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case Ke:return 2;case it:return 8;case $t:case Nt:return 32;case kr:return 268435456;default:return 32}default:return 32}}var G5=!1,Yc=null,Jc=null,Zc=null,Vp=new Map,Fp=new Map,eu=[],$J="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bO(l,u){switch(l){case"focusin":case"focusout":Yc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":Zc=null;break;case"pointerover":case"pointerout":Vp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fp.delete(u.pointerId)}}function qp(l,u,f,g,b,_){return l===null||l.nativeEvent!==_?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[b]},u!==null&&(u=nt(u),u!==null&&xO(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function zJ(l,u,f,g,b){switch(u){case"focusin":return Yc=qp(Yc,l,u,f,g,b),!0;case"dragenter":return Jc=qp(Jc,l,u,f,g,b),!0;case"mouseover":return Zc=qp(Zc,l,u,f,g,b),!0;case"pointerover":var _=b.pointerId;return Vp.set(_,qp(Vp.get(_)||null,l,u,f,g,b)),!0;case"gotpointercapture":return _=b.pointerId,Fp.set(_,qp(Fp.get(_)||null,l,u,f,g,b)),!0}return!1}function wO(l){var u=fe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,hr(l.priority,function(){yO(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,hr(l.priority,function(){yO(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function cy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=q5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Fi=g,f.target.dispatchEvent(g),Fi=null}else return u=nt(f),u!==null&&xO(u),l.blockedOn=f,!1;u.shift()}return!0}function SO(l,u,f){cy(l)&&f.delete(u)}function UJ(){G5=!1,Yc!==null&&cy(Yc)&&(Yc=null),Jc!==null&&cy(Jc)&&(Jc=null),Zc!==null&&cy(Zc)&&(Zc=null),Vp.forEach(SO),Fp.forEach(SO)}function uy(l,u){l.blockedOn===u&&(l.blockedOn=null,G5||(G5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,UJ)))}var dy=null;function NO(l){dy!==l&&(dy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dy===l&&(dy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(H5(g||f)===null)continue;break}var _=nt(f);_!==null&&(l.splice(u,3),u-=3,q4(_,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function oh(l){function u(ue){return uy(ue,l)}Yc!==null&&uy(Yc,l),Jc!==null&&uy(Jc,l),Zc!==null&&uy(Zc,l),Vp.forEach(u),Fp.forEach(u);for(var f=0;f<eu.length;f++){var g=eu[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<eu.length&&(f=eu[0],f.blockedOn===null);)wO(f),f.blockedOn===null&&eu.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],_=f[g+1],U=b[rn]||null;if(typeof _=="function")U||NO(f);else if(U){var Q=null;if(_&&_.hasAttribute("formAction")){if(b=_,U=_[rn]||null)Q=U.formAction;else if(H5(b)!==null)continue}else Q=U.action;typeof Q=="function"?f[g+1]=Q:(f.splice(g,3),g-=3),NO(f)}}}function _O(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(U){return b=U})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function W5(l){this._internalRoot=l}hy.prototype.render=W5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=_s();mO(f,g,l,u,null,null)},hy.prototype.unmount=W5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;mO(l.current,2,null,l,null,null),G1(),u[yn]=null}};function hy(l){this._internalRoot=l}hy.prototype.unstable_scheduleHydration=function(l){if(l){var u=qe();l={blockedOn:null,target:l,priority:u};for(var f=0;f<eu.length&&u!==0&&u<eu[f].priority;f++);eu.splice(f,0,l),f===0&&wO(l)}};var TO=e.version;if(TO!=="19.2.4")throw Error(n(527,TO,"19.2.4"));Y.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var VJ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fy.isDisabled&&fy.supportsFiber)try{mt=fy.inject(VJ),Ct=fy}catch{}}return Gp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=IC,_=RC,U=MC;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError)),u=fO(l,1,!1,null,null,f,g,null,b,_,U,_O),l[yn]=u.current,E5(l),new W5(u)},Gp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",_=IC,U=RC,Q=MC,ue=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(Q=f.onRecoverableError),f.formState!==void 0&&(ue=f.formState)),u=fO(l,1,!0,u,f??null,g,b,ue,_,U,Q,_O),u.context=pO(null),f=u.current,g=_s(),g=Re(g),b=$c(g),b.callback=null,zc(f,b,g),f=g,u.current.lanes=f,xn(u,f),Fo(u),l[yn]=u.current,E5(l),new hy(u)},Gp.version="19.2.4",Gp}var PO;function eZ(){if(PO)return Q5.exports;PO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q5.exports=ZJ(),Q5.exports}var tZ=eZ();const rZ=sn(tZ);var Fa=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Fa||{});const Mr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Ts=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Ts||{});const uT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},LO=[1.5,1.4,1.3,1.2,1.1],Hm=5,Gm=1;function nZ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function nv(t,e){const r=new Set;return t.forEach(n=>{const a=nZ(n,e);a&&r.add(a)}),Array.from(r).sort()}const aZ=[{id:"participation",name:"Participation",icon:"",xpAmount:25,fluxAmount:5,color:"blue"},{id:"helping",name:"Helping Others",icon:"",xpAmount:30,fluxAmount:10,color:"green"},{id:"leadership",name:"Leadership",icon:"",xpAmount:35,fluxAmount:10,color:"amber"},{id:"focus",name:"Great Focus",icon:"",xpAmount:20,fluxAmount:5,color:"purple"},{id:"creativity",name:"Creativity",icon:"",xpAmount:30,fluxAmount:8,color:"pink"},{id:"perseverance",name:"Perseverance",icon:"",xpAmount:25,fluxAmount:5,color:"orange"}];var BO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},iZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},AV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let x=(c&15)<<2|h>>6,y=h&63;d||(y=64,o||(x=64)),n.push(r[p],r[m],r[x],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new sZ;const x=i<<2|c>>4;if(n.push(x),h!==64){const y=c<<4&240|h>>2;if(n.push(y),m!==64){const S=h<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oZ=function(t){const e=jV(t);return AV.encodeByteArray(e,!0)},Tv=function(t){return oZ(t).replace(/\./g,"")},EV=function(t){try{return AV.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ=()=>lZ().__FIREBASE_DEFAULTS__,uZ=()=>{if(typeof process>"u"||typeof BO>"u")return;const t=BO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EV(t[1]);return e&&JSON.parse(e)},b2=()=>{try{return cZ()||uZ()||dZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kV=t=>{var e,r;return(r=(e=b2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},CV=t=>{const e=kV(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},OV=()=>{var t;return(t=b2())===null||t===void 0?void 0:t.config},IV=t=>{var e;return(e=b2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tv(JSON.stringify(r)),Tv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wa())}function mZ(){var t;const e=(t=b2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vZ(){const t=Wa();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RV(){return!mZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MV(){try{return typeof indexedDB=="object"}catch{return!1}}function bZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ="FirebaseError";class Ro extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=wZ,Object.setPrototypeOf(this,Ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sx.prototype.create)}}class sx{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?SZ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Ro(a,c,n)}}function SZ(t,e){return t.replace(NZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const NZ=/\{\$([^}]+)}/g;function _Z(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if($O(i)&&$O(o)){if(!Uh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function $O(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function TZ(t,e){const r=new jZ(t,e);return r.subscribe.bind(r)}class jZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");AZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=e3),a.error===void 0&&(a.error=e3),a.complete===void 0&&(a.complete=e3);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function e3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){return t&&t._delegate?t._delegate:t}class oc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new hZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CZ(e))try{this.getOrInitializeService({instanceIdentifier:jd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=jd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jd){return this.instances.has(e)}getOptions(e=jd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:kZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=jd){return this.component?this.component.multipleInstances?e:jd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kZ(t){return t===jd?void 0:t}function CZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new EZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Br||(Br={}));const IZ={debug:Br.DEBUG,verbose:Br.VERBOSE,info:Br.INFO,warn:Br.WARN,error:Br.ERROR,silent:Br.SILENT},RZ=Br.INFO,MZ={[Br.DEBUG]:"log",[Br.VERBOSE]:"log",[Br.INFO]:"info",[Br.WARN]:"warn",[Br.ERROR]:"error"},DZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=MZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qA{constructor(e){this.name=e,this._logLevel=RZ,this._logHandler=DZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Br))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Br.DEBUG,...e),this._logHandler(this,Br.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Br.VERBOSE,...e),this._logHandler(this,Br.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Br.INFO,...e),this._logHandler(this,Br.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Br.WARN,...e),this._logHandler(this,Br.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Br.ERROR,...e),this._logHandler(this,Br.ERROR,...e)}}const PZ=(t,e)=>e.some(r=>t instanceof r);let zO,UO;function LZ(){return zO||(zO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BZ(){return UO||(UO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DV=new WeakMap,dT=new WeakMap,PV=new WeakMap,t3=new WeakMap,HA=new WeakMap;function $Z(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(Tu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&DV.set(r,t)}).catch(()=>{}),HA.set(e,t),e}function zZ(t){if(dT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dT.set(t,e)}let hT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return dT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UZ(t){hT=t(hT)}function VZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(r3(this),e,...r);return PV.set(n,e.sort?e.sort():[e]),Tu(n)}:BZ().includes(t)?function(...e){return t.apply(r3(this),e),Tu(DV.get(this))}:function(...e){return Tu(t.apply(r3(this),e))}}function FZ(t){return typeof t=="function"?VZ(t):(t instanceof IDBTransaction&&zZ(t),PZ(t,LZ())?new Proxy(t,hT):t)}function Tu(t){if(t instanceof IDBRequest)return $Z(t);if(t3.has(t))return t3.get(t);const e=FZ(t);return e!==t&&(t3.set(t,e),HA.set(e,t)),e}const r3=t=>HA.get(t);function qZ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=Tu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(Tu(o.result),d.oldVersion,d.newVersion,Tu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const HZ=["get","getKey","getAll","getAllKeys","count"],GZ=["put","add","delete","clear"],n3=new Map;function VO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(n3.get(e))return n3.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=GZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||HZ.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return n3.set(e,i),i}UZ(t=>({...t,get:(e,r,n)=>VO(e,r)||t.get(e,r,n),has:(e,r)=>!!VO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(KZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function KZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fT="@firebase/app",FO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=new qA("@firebase/app"),XZ="@firebase/app-compat",QZ="@firebase/analytics-compat",YZ="@firebase/analytics",JZ="@firebase/app-check-compat",ZZ="@firebase/app-check",eee="@firebase/auth",tee="@firebase/auth-compat",ree="@firebase/database",nee="@firebase/data-connect",aee="@firebase/database-compat",iee="@firebase/functions",see="@firebase/functions-compat",oee="@firebase/installations",lee="@firebase/installations-compat",cee="@firebase/messaging",uee="@firebase/messaging-compat",dee="@firebase/performance",hee="@firebase/performance-compat",fee="@firebase/remote-config",pee="@firebase/remote-config-compat",mee="@firebase/storage",gee="@firebase/storage-compat",xee="@firebase/firestore",yee="@firebase/vertexai-preview",vee="@firebase/firestore-compat",bee="firebase",wee="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="[DEFAULT]",See={[fT]:"fire-core",[XZ]:"fire-core-compat",[YZ]:"fire-analytics",[QZ]:"fire-analytics-compat",[ZZ]:"fire-app-check",[JZ]:"fire-app-check-compat",[eee]:"fire-auth",[tee]:"fire-auth-compat",[ree]:"fire-rtdb",[nee]:"fire-data-connect",[aee]:"fire-rtdb-compat",[iee]:"fire-fn",[see]:"fire-fn-compat",[oee]:"fire-iid",[lee]:"fire-iid-compat",[cee]:"fire-fcm",[uee]:"fire-fcm-compat",[dee]:"fire-perf",[hee]:"fire-perf-compat",[fee]:"fire-rc",[pee]:"fire-rc-compat",[mee]:"fire-gcs",[gee]:"fire-gcs-compat",[xee]:"fire-fst",[vee]:"fire-fst-compat",[yee]:"fire-vertex","fire-js":"fire-js",[bee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map,Nee=new Map,mT=new Map;function qO(t,e){try{t.container.addComponent(e)}catch(r){lc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ru(t){const e=t.name;if(mT.has(e))return lc.debug(`There were multiple attempts to register component ${e}.`),!1;mT.set(e,t);for(const r of jv.values())qO(r,t);for(const r of Nee.values())qO(r,t);return!0}function lx(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Gl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ju=new sx("app","Firebase",_ee);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ju.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=wee;function LV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:pT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw ju.create("bad-app-name",{appName:String(a)});if(r||(r=OV()),!r)throw ju.create("no-options");const i=jv.get(a);if(i){if(Uh(r,i.options)&&Uh(n,i.config))return i;throw ju.create("duplicate-app",{appName:a})}const o=new OZ(a);for(const d of mT.values())o.addComponent(d);const c=new Tee(r,n,o);return jv.set(a,c),c}function GA(t=pT){const e=jv.get(t);if(!e&&t===pT&&OV())return LV();if(!e)throw ju.create("no-app",{appName:t});return e}function ro(t,e,r){var n;let a=(n=See[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lc.warn(c.join(" "));return}Ru(new oc(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jee="firebase-heartbeat-database",Aee=1,Wm="firebase-heartbeat-store";let a3=null;function BV(){return a3||(a3=qZ(jee,Aee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wm)}catch(r){console.warn(r)}}}}).catch(t=>{throw ju.create("idb-open",{originalErrorMessage:t.message})})),a3}async function Eee(t){try{const r=(await BV()).transaction(Wm),n=await r.objectStore(Wm).get($V(t));return await r.done,n}catch(e){if(e instanceof Ro)lc.warn(e.message);else{const r=ju.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lc.warn(r.message)}}}async function HO(t,e){try{const n=(await BV()).transaction(Wm,"readwrite");await n.objectStore(Wm).put(e,$V(t)),await n.done}catch(r){if(r instanceof Ro)lc.warn(r.message);else{const n=ju.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});lc.warn(n.message)}}}function $V(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kee=1024,Cee=720*60*60*1e3;class Oee{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Ree(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=GO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=Cee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){lc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=GO(),{heartbeatsToSend:n,unsentEntries:a}=Iee(this._heartbeatsCache.heartbeats),i=Tv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return lc.warn(r),""}}}function GO(){return new Date().toISOString().substring(0,10)}function Iee(t,e=kee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),WO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),WO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Ree{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MV()?bZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Eee(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return HO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return HO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function WO(t){return Tv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mee(t){Ru(new oc("platform-logger",e=>new WZ(e),"PRIVATE")),Ru(new oc("heartbeat",e=>new Oee(e),"PRIVATE")),ro(fT,FO,t),ro(fT,FO,"esm2017"),ro("fire-js","")}Mee("");var Dee="firebase",Pee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ro(Dee,Pee,"app");function WA(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function zV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lee=zV,UV=new sx("auth","Firebase",zV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new qA("@firebase/auth");function Bee(t,...e){Av.logLevel<=Br.WARN&&Av.warn(`Auth (${v0}): ${t}`,...e)}function av(t,...e){Av.logLevel<=Br.ERROR&&Av.error(`Auth (${v0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,...e){throw XA(t,...e)}function Eo(t,...e){return XA(t,...e)}function KA(t,e,r){const n=Object.assign(Object.assign({},Lee()),{[e]:r});return new sx("auth","Firebase",n).create(e,{appName:t.name})}function Fd(t){return KA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $ee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&sl(t,"argument-error"),KA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function XA(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return UV.create(t,...e)}function ur(t,e,...r){if(!t)throw XA(e,...r)}function Wl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw av(e),new Error(e)}function cc(t,e){t||Wl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zee(){return KO()==="http:"||KO()==="https:"}function KO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zee()||xZ()||"connection"in navigator)?navigator.onLine:!0}function Vee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,r){this.shortDelay=e,this.longDelay=r,cc(r>e,"Short delay should be less than long delay!"),this.isMobile=pZ()||yZ()}get(){return Uee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){cc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee=new cx(3e4,6e4);function YA(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rf(t,e,r,n,a={}){return FV(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=ox(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return gZ()||(h.referrerPolicy="no-referrer"),VV.fetch()(qV(t,t.config.apiHost,r,c),h)})}async function FV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Fee),e);try{const a=new Gee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw my(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw my(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw my(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw my(t,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw KA(t,p,h);sl(t,p)}}catch(a){if(a instanceof Ro)throw a;sl(t,"network-request-failed",{message:String(a)})}}async function Hee(t,e,r,n,a={}){const i=await Rf(t,e,r,n,a);return"mfaPendingCredential"in i&&sl(t,"multi-factor-auth-required",{_serverResponse:i}),i}function qV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?QA(t.config,a):`${t.config.apiScheme}://${a}`}class Gee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Eo(this.auth,"network-request-failed")),qee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function my(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Eo(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wee(t,e){return Rf(t,"POST","/v1/accounts:delete",e)}async function HV(t,e){return Rf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kee(t,e=!1){const r=Rn(t),n=await r.getIdToken(e),a=JA(n);ur(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:Sm(i3(a.auth_time)),issuedAtTime:Sm(i3(a.iat)),expirationTime:Sm(i3(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function i3(t){return Number(t)*1e3}function JA(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return av("JWT malformed, contained fewer than 3 sections"),null;try{const a=EV(r);return a?JSON.parse(a):(av("Failed to decode base64 JWT payload"),null)}catch(a){return av("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function XO(t){const e=JA(t);return ur(e,"internal-error"),ur(typeof e.exp<"u","internal-error"),ur(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Km(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ro&&Xee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Xee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sm(this.lastLoginAt),this.creationTime=Sm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ev(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Km(t,HV(r,{idToken:n}));ur(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?GV(i.providerUserInfo):[],c=Jee(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new xT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Yee(t){const e=Rn(t);await Ev(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function GV(t){return t.map(e=>{var{providerId:r}=e,n=WA(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zee(t,e){const r=await FV(t,{},async()=>{const n=ox({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=qV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",VV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ete(t,e){return Rf(t,"POST","/v2/accounts:revokeToken",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ur(e.idToken,"internal-error"),ur(typeof e.idToken<"u","internal-error"),ur(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ur(e.length!==0,"internal-error");const r=XO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ur(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Zee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new Eh;return n&&(ur(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(ur(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(ur(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eh,this.toJSON())}_performRefresh(){return Wl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e){ur(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=WA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Km(this,this.stsTokenManager.getToken(this.auth,e));return ur(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return Kee(this,e)}reload(){return Yee(this)}_assign(e){this!==e&&(ur(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Kl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ur(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Ev(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gl(this.auth.app))return Promise.reject(Fd(this.auth));const e=await this.getIdToken();return await Km(this,Wee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(a=r.email)!==null&&a!==void 0?a:void 0,y=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=r.photoURL)!==null&&o!==void 0?o:void 0,w=(c=r.tenantId)!==null&&c!==void 0?c:void 0,N=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,A=(h=r.createdAt)!==null&&h!==void 0?h:void 0,R=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:O,emailVerified:L,isAnonymous:I,providerData:k,stsTokenManager:E}=r;ur(O&&E,e,"internal-error");const j=Eh.fromJSON(this.name,E);ur(typeof O=="string",e,"internal-error"),ru(m,e.name),ru(x,e.name),ur(typeof L=="boolean",e,"internal-error"),ur(typeof I=="boolean",e,"internal-error"),ru(y,e.name),ru(S,e.name),ru(w,e.name),ru(N,e.name),ru(A,e.name),ru(R,e.name);const C=new Kl({uid:O,auth:e,email:x,emailVerified:L,displayName:m,isAnonymous:I,photoURL:S,phoneNumber:y,tenantId:w,stsTokenManager:j,createdAt:A,lastLoginAt:R});return k&&Array.isArray(k)&&(C.providerData=k.map(q=>Object.assign({},q))),N&&(C._redirectEventId=N),C}static async _fromIdTokenResponse(e,r,n=!1){const a=new Eh;a.updateFromServerResponse(r);const i=new Kl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Ev(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];ur(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?GV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new Eh;c.updateFromIdToken(n);const d=new Kl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new xT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new Map;function Xl(t){cc(t instanceof Function,"Expected a class definition");let e=QO.get(t);return e?(cc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}WV.type="NONE";const YO=WV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t,e,r){return`firebase:${t}:${e}:${r}`}class kh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=iv(this.userKey,a.apiKey,i),this.fullPersistenceKey=iv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new kh(Xl(YO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Xl(YO);const o=iv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(o);if(p){const m=Kl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new kh(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new kh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZV(e))return"Blackberry";if(eF(e))return"Webos";if(XV(e))return"Safari";if((e.includes("chrome/")||QV(e))&&!e.includes("edge/"))return"Chrome";if(JV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function KV(t=Wa()){return/firefox\//i.test(t)}function XV(t=Wa()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QV(t=Wa()){return/crios\//i.test(t)}function YV(t=Wa()){return/iemobile/i.test(t)}function JV(t=Wa()){return/android/i.test(t)}function ZV(t=Wa()){return/blackberry/i.test(t)}function eF(t=Wa()){return/webos/i.test(t)}function ZA(t=Wa()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tte(t=Wa()){var e;return ZA(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rte(){return vZ()&&document.documentMode===10}function tF(t=Wa()){return ZA(t)||JV(t)||eF(t)||ZV(t)||/windows phone/i.test(t)||YV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e=[]){let r;switch(t){case"Browser":r=JO(Wa());break;case"Worker":r=`${JO(Wa())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${v0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nte{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ate(t,e={}){return Rf(t,"GET","/v2/passwordPolicy",YA(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ite=6;class ste{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:ite,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ote{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZO(this),this.idTokenSubscription=new ZO(this),this.beforeStateQueue=new nte(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Xl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await kh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await HV(this,{idToken:e}),n=await Kl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Gl(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ur(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Ev(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gl(this.app))return Promise.reject(Fd(this));const r=e?Rn(e):null;return r&&ur(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ur(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gl(this.app)?Promise.reject(Fd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gl(this.app)?Promise.reject(Fd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ate(this),r=new ste(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sx("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await ete(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Xl(e)||this._popupRedirectResolver;ur(r,this,"argument-error"),this.redirectPersistenceManager=await kh.create(this,[Xl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ur(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ur(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&Bee(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function w2(t){return Rn(t)}class ZO{constructor(e){this.auth=e,this.observer=null,this.addObserver=TZ(r=>this.observer=r)}get next(){return ur(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lte(t){e8=t}function cte(t){return e8.loadJS(t)}function ute(){return e8.gapiScript}function dte(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hte(t,e){const r=lx(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Uh(i,e??{}))return a;sl(a,"already-initialized")}return r.initialize({options:e})}function fte(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Xl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function pte(t,e,r){const n=w2(t);ur(n._canInitEmulator,n,"emulator-config-failed"),ur(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=nF(e),{host:o,port:c}=mte(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),gte()}function nF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mte(t){const e=nF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:eI(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:eI(o)}}}function eI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gte(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,r){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t,e){return Hee(t,"POST","/v1/accounts:signInWithIdp",YA(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xte="http://localhost";class Xd extends aF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Xd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):sl("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=WA(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new Xd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ch(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ch(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ch(e,r)}buildRequest(){const e={requestUri:xte,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ox(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends t8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends ux{constructor(){super("facebook.com")}static credential(e){return Xd._fromParams({providerId:cu.PROVIDER_ID,signInMethod:cu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cu.credentialFromTaggedObject(e)}static credentialFromError(e){return cu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cu.credential(e.oauthAccessToken)}catch{return null}}}cu.FACEBOOK_SIGN_IN_METHOD="facebook.com";cu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends ux{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Xd._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ql.credential(r,n)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends ux{constructor(){super("github.com")}static credential(e){return Xd._fromParams({providerId:uu.PROVIDER_ID,signInMethod:uu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uu.credentialFromTaggedObject(e)}static credentialFromError(e){return uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uu.credential(e.oauthAccessToken)}catch{return null}}}uu.GITHUB_SIGN_IN_METHOD="github.com";uu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends ux{constructor(){super("twitter.com")}static credential(e,r){return Xd._fromParams({providerId:du.PROVIDER_ID,signInMethod:du.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return du.credentialFromTaggedObject(e)}static credentialFromError(e){return du.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return du.credential(r,n)}catch{return null}}}du.TWITTER_SIGN_IN_METHOD="twitter.com";du.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Kl._fromIdTokenResponse(e,n,a),o=tI(n);return new Vh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=tI(n);return new Vh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function tI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Ro{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,kv.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new kv(e,r,n,a)}}function iF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?kv._fromErrorAndOperation(t,i,e,n):i})}async function yte(t,e,r=!1){const n=await Km(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Vh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vte(t,e,r=!1){const{auth:n}=t;if(Gl(n.app))return Promise.reject(Fd(n));const a="reauthenticate";try{const i=await Km(t,iF(n,a,e,t),r);ur(i.idToken,n,"internal-error");const o=JA(i.idToken);ur(o,n,"internal-error");const{sub:c}=o;return ur(t.uid===c,n,"user-mismatch"),Vh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sl(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bte(t,e,r=!1){if(Gl(t.app))return Promise.reject(Fd(t));const n="signIn",a=await iF(t,n,e),i=await Vh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function wte(t,e,r,n){return Rn(t).onIdTokenChanged(e,r,n)}function Ste(t,e,r){return Rn(t).beforeAuthStateChanged(e,r)}function Nte(t,e,r,n){return Rn(t).onAuthStateChanged(e,r,n)}function _te(t){return Rn(t).signOut()}const Cv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Cv,"1"),this.storage.removeItem(Cv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tte=1e3,jte=10;class oF extends sF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);rte()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,jte):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Tte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}oF.type="LOCAL";const Ate=oF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF extends sF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}lF.type="SESSION";const cF=lF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ete(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new S2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await Ete(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}S2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=r8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const x=m;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(){return window}function Cte(t){tl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(){return typeof tl().WorkerGlobalScope<"u"&&typeof tl().importScripts=="function"}async function Ote(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ite(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Rte(){return uF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="firebaseLocalStorageDb",Mte=1,Ov="firebaseLocalStorage",hF="fbase_key";class dx{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function N2(t,e){return t.transaction([Ov],e?"readwrite":"readonly").objectStore(Ov)}function Dte(){const t=indexedDB.deleteDatabase(dF);return new dx(t).toPromise()}function yT(){const t=indexedDB.open(dF,Mte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Ov,{keyPath:hF})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Ov)?e(n):(n.close(),await Dte(),e(await yT()))})})}async function rI(t,e,r){const n=N2(t,!0).put({[hF]:e,value:r});return new dx(n).toPromise()}async function Pte(t,e){const r=N2(t,!1).get(e),n=await new dx(r).toPromise();return n===void 0?null:n.value}function nI(t,e){const r=N2(t,!0).delete(e);return new dx(r).toPromise()}const Lte=800,Bte=3;class fF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Bte)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=S2._getInstance(Rte()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Ote(),!this.activeServiceWorker)return;this.sender=new kte(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ite()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yT();return await rI(e,Cv,"1"),await nI(e,Cv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>rI(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Pte(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>nI(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=N2(a,!1).getAll();return new dx(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fF.type="LOCAL";const $te=fF;new cx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t,e){return e?Xl(e):(ur(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8 extends aF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ch(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ch(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ch(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function zte(t){return bte(t.auth,new n8(t),t.bypassAuthState)}function Ute(t){const{auth:e,user:r}=t;return ur(r,e,"internal-error"),vte(r,new n8(t),t.bypassAuthState)}async function Vte(t){const{auth:e,user:r}=t;return ur(r,e,"internal-error"),yte(r,new n8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zte;case"linkViaPopup":case"linkViaRedirect":return Vte;case"reauthViaPopup":case"reauthViaRedirect":return Ute;default:sl(this.auth,"internal-error")}}resolve(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fte=new cx(2e3,1e4);async function qte(t,e,r){if(Gl(t.app))return Promise.reject(Eo(t,"operation-not-supported-in-this-environment"));const n=w2(t);$ee(t,e,t8);const a=pF(n,r);return new Dd(n,"signInViaPopup",e,a).executeNotNull()}class Dd extends mF{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Dd.currentPopupAction&&Dd.currentPopupAction.cancel(),Dd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ur(e,this.auth,"internal-error"),e}async onExecution(){cc(this.filter.length===1,"Popup operations only handle one event");const e=r8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Eo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Eo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Eo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fte.get())};e()}}Dd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hte="pendingRedirect",sv=new Map;class Gte extends mF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=sv.get(this.auth._key());if(!e){try{const n=await Wte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}sv.set(this.auth._key(),e)}return this.bypassAuthState||sv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Wte(t,e){const r=Qte(e),n=Xte(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Kte(t,e){sv.set(t._key(),e)}function Xte(t){return Xl(t._redirectPersistence)}function Qte(t){return iv(Hte,t.config.apiKey,t.name)}async function Yte(t,e,r=!1){if(Gl(t.app))return Promise.reject(Fd(t));const n=w2(t),a=pF(n,e),o=await new Gte(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jte=600*1e3;class Zte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ere(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!gF(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Eo(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jte&&this.cachedEventUids.clear(),this.cachedEventUids.has(aI(e))}saveEventToCache(e){this.cachedEventUids.add(aI(e)),this.lastProcessedEventTime=Date.now()}}function aI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ere(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tre(t,e={}){return Rf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rre=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nre=/^https?/;async function are(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tre(t);for(const r of e)try{if(ire(r))return}catch{}sl(t,"unauthorized-domain")}function ire(t){const e=gT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!nre.test(r))return!1;if(rre.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sre=new cx(3e4,6e4);function iI(){const t=tl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function ore(t){return new Promise((e,r)=>{var n,a,i;function o(){iI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iI(),r(Eo(t,"network-request-failed"))},timeout:sre.get()})}if(!((a=(n=tl().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=tl().gapi)===null||i===void 0)&&i.load)o();else{const c=dte("iframefcb");return tl()[c]=()=>{gapi.load?o():r(Eo(t,"network-request-failed"))},cte(`${ute()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw ov=null,e})}let ov=null;function lre(t){return ov=ov||ore(t),ov}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre=new cx(5e3,15e3),ure="__/auth/iframe",dre="emulator/auth/iframe",hre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pre(t){const e=t.config;ur(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?QA(e,dre):`https://${t.config.authDomain}/${ure}`,n={apiKey:e.apiKey,appName:t.name,v:v0},a=fre.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${ox(n).slice(1)}`}async function mre(t){const e=await lre(t),r=tl().gapi;return ur(r,t,"internal-error"),e.open({where:document.body,url:pre(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hre,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Eo(t,"network-request-failed"),c=tl().setTimeout(()=>{i(o)},cre.get());function d(){tl().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xre=500,yre=600,vre="_blank",bre="http://localhost";class sI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wre(t,e,r,n=xre,a=yre){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},gre),{width:n.toString(),height:a.toString(),top:i,left:o}),h=Wa().toLowerCase();r&&(c=QV(h)?vre:r),KV(h)&&(e=e||bre,d.scrollbars="yes");const p=Object.entries(d).reduce((x,[y,S])=>`${x}${y}=${S},`,"");if(tte(h)&&c!=="_self")return Sre(e||"",c),new sI(null);const m=window.open(e||"",c,p);ur(m,t,"popup-blocked");try{m.focus()}catch{}return new sI(m)}function Sre(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nre="__/auth/handler",_re="emulator/auth/handler",Tre=encodeURIComponent("fac");async function oI(t,e,r,n,a,i){ur(t.config.authDomain,t,"auth-domain-config-required"),ur(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:v0,eventId:a};if(e instanceof t8){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_Z(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ux){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Tre}=${encodeURIComponent(d)}`:"";return`${jre(t)}?${ox(c).slice(1)}${h}`}function jre({config:t}){return t.emulator?QA(t,_re):`https://${t.authDomain}/${Nre}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="webStorageSupport";class Are{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cF,this._completeRedirectFn=Yte,this._overrideRedirectResult=Kte}async _openPopup(e,r,n,a){var i;cc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await oI(e,r,n,gT(),a);return wre(e,o,r8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await oI(e,r,n,gT(),a);return Cte(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(cc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await mre(e),n=new Zte(e);return r.register("authEvent",a=>(ur(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(s3,{type:s3},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[s3];o!==void 0&&r(!!o),sl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=are(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return tF()||XV()||ZA()}}const Ere=Are;var lI="@firebase/auth",cI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ur(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cre(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ore(t){Ru(new oc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;ur(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rF(t)},h=new ote(n,a,i,d);return fte(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ru(new oc("auth-internal",e=>{const r=w2(e.getProvider("auth").getImmediate());return(n=>new kre(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ro(lI,cI,Cre(t)),ro(lI,cI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ire=300,Rre=IV("authIdTokenMaxAge")||Ire;let uI=null;const Mre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Rre)return;const a=r==null?void 0:r.token;uI!==a&&(uI=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function vT(t=GA()){const e=lx(t,"auth");if(e.isInitialized())return e.getImmediate();const r=hte(t,{popupRedirectResolver:Ere,persistence:[$te,Ate,cF]}),n=IV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=Mre(i.toString());Ste(r,o,()=>o(r.currentUser)),wte(r,c=>o(c))}}const a=kV("auth");return a&&pte(r,`http://${a}`),r}function Dre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lte({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=Eo("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",Dre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ore("Browser");var dI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qd,xF;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,j){function C(){}C.prototype=j.prototype,E.D=j.prototype,E.prototype=new C,E.prototype.constructor=E,E.C=function(q,D,$){for(var B=Array(arguments.length-2),V=2;V<arguments.length;V++)B[V-2]=arguments[V];return j.prototype[D].apply(q,B)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,j,C){C||(C=0);var q=Array(16);if(typeof j=="string")for(var D=0;16>D;++D)q[D]=j.charCodeAt(C++)|j.charCodeAt(C++)<<8|j.charCodeAt(C++)<<16|j.charCodeAt(C++)<<24;else for(D=0;16>D;++D)q[D]=j[C++]|j[C++]<<8|j[C++]<<16|j[C++]<<24;j=E.g[0],C=E.g[1],D=E.g[2];var $=E.g[3],B=j+($^C&(D^$))+q[0]+3614090360&4294967295;j=C+(B<<7&4294967295|B>>>25),B=$+(D^j&(C^D))+q[1]+3905402710&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(C^$&(j^C))+q[2]+606105819&4294967295,D=$+(B<<17&4294967295|B>>>15),B=C+(j^D&($^j))+q[3]+3250441966&4294967295,C=D+(B<<22&4294967295|B>>>10),B=j+($^C&(D^$))+q[4]+4118548399&4294967295,j=C+(B<<7&4294967295|B>>>25),B=$+(D^j&(C^D))+q[5]+1200080426&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(C^$&(j^C))+q[6]+2821735955&4294967295,D=$+(B<<17&4294967295|B>>>15),B=C+(j^D&($^j))+q[7]+4249261313&4294967295,C=D+(B<<22&4294967295|B>>>10),B=j+($^C&(D^$))+q[8]+1770035416&4294967295,j=C+(B<<7&4294967295|B>>>25),B=$+(D^j&(C^D))+q[9]+2336552879&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(C^$&(j^C))+q[10]+4294925233&4294967295,D=$+(B<<17&4294967295|B>>>15),B=C+(j^D&($^j))+q[11]+2304563134&4294967295,C=D+(B<<22&4294967295|B>>>10),B=j+($^C&(D^$))+q[12]+1804603682&4294967295,j=C+(B<<7&4294967295|B>>>25),B=$+(D^j&(C^D))+q[13]+4254626195&4294967295,$=j+(B<<12&4294967295|B>>>20),B=D+(C^$&(j^C))+q[14]+2792965006&4294967295,D=$+(B<<17&4294967295|B>>>15),B=C+(j^D&($^j))+q[15]+1236535329&4294967295,C=D+(B<<22&4294967295|B>>>10),B=j+(D^$&(C^D))+q[1]+4129170786&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^D&(j^C))+q[6]+3225465664&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^C&($^j))+q[11]+643717713&4294967295,D=$+(B<<14&4294967295|B>>>18),B=C+($^j&(D^$))+q[0]+3921069994&4294967295,C=D+(B<<20&4294967295|B>>>12),B=j+(D^$&(C^D))+q[5]+3593408605&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^D&(j^C))+q[10]+38016083&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^C&($^j))+q[15]+3634488961&4294967295,D=$+(B<<14&4294967295|B>>>18),B=C+($^j&(D^$))+q[4]+3889429448&4294967295,C=D+(B<<20&4294967295|B>>>12),B=j+(D^$&(C^D))+q[9]+568446438&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^D&(j^C))+q[14]+3275163606&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^C&($^j))+q[3]+4107603335&4294967295,D=$+(B<<14&4294967295|B>>>18),B=C+($^j&(D^$))+q[8]+1163531501&4294967295,C=D+(B<<20&4294967295|B>>>12),B=j+(D^$&(C^D))+q[13]+2850285829&4294967295,j=C+(B<<5&4294967295|B>>>27),B=$+(C^D&(j^C))+q[2]+4243563512&4294967295,$=j+(B<<9&4294967295|B>>>23),B=D+(j^C&($^j))+q[7]+1735328473&4294967295,D=$+(B<<14&4294967295|B>>>18),B=C+($^j&(D^$))+q[12]+2368359562&4294967295,C=D+(B<<20&4294967295|B>>>12),B=j+(C^D^$)+q[5]+4294588738&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^D)+q[8]+2272392833&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^C)+q[11]+1839030562&4294967295,D=$+(B<<16&4294967295|B>>>16),B=C+(D^$^j)+q[14]+4259657740&4294967295,C=D+(B<<23&4294967295|B>>>9),B=j+(C^D^$)+q[1]+2763975236&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^D)+q[4]+1272893353&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^C)+q[7]+4139469664&4294967295,D=$+(B<<16&4294967295|B>>>16),B=C+(D^$^j)+q[10]+3200236656&4294967295,C=D+(B<<23&4294967295|B>>>9),B=j+(C^D^$)+q[13]+681279174&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^D)+q[0]+3936430074&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^C)+q[3]+3572445317&4294967295,D=$+(B<<16&4294967295|B>>>16),B=C+(D^$^j)+q[6]+76029189&4294967295,C=D+(B<<23&4294967295|B>>>9),B=j+(C^D^$)+q[9]+3654602809&4294967295,j=C+(B<<4&4294967295|B>>>28),B=$+(j^C^D)+q[12]+3873151461&4294967295,$=j+(B<<11&4294967295|B>>>21),B=D+($^j^C)+q[15]+530742520&4294967295,D=$+(B<<16&4294967295|B>>>16),B=C+(D^$^j)+q[2]+3299628645&4294967295,C=D+(B<<23&4294967295|B>>>9),B=j+(D^(C|~$))+q[0]+4096336452&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~D))+q[7]+1126891415&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~C))+q[14]+2878612391&4294967295,D=$+(B<<15&4294967295|B>>>17),B=C+($^(D|~j))+q[5]+4237533241&4294967295,C=D+(B<<21&4294967295|B>>>11),B=j+(D^(C|~$))+q[12]+1700485571&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~D))+q[3]+2399980690&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~C))+q[10]+4293915773&4294967295,D=$+(B<<15&4294967295|B>>>17),B=C+($^(D|~j))+q[1]+2240044497&4294967295,C=D+(B<<21&4294967295|B>>>11),B=j+(D^(C|~$))+q[8]+1873313359&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~D))+q[15]+4264355552&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~C))+q[6]+2734768916&4294967295,D=$+(B<<15&4294967295|B>>>17),B=C+($^(D|~j))+q[13]+1309151649&4294967295,C=D+(B<<21&4294967295|B>>>11),B=j+(D^(C|~$))+q[4]+4149444226&4294967295,j=C+(B<<6&4294967295|B>>>26),B=$+(C^(j|~D))+q[11]+3174756917&4294967295,$=j+(B<<10&4294967295|B>>>22),B=D+(j^($|~C))+q[2]+718787259&4294967295,D=$+(B<<15&4294967295|B>>>17),B=C+($^(D|~j))+q[9]+3951481745&4294967295,E.g[0]=E.g[0]+j&4294967295,E.g[1]=E.g[1]+(D+(B<<21&4294967295|B>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+$&4294967295}n.prototype.u=function(E,j){j===void 0&&(j=E.length);for(var C=j-this.blockSize,q=this.B,D=this.h,$=0;$<j;){if(D==0)for(;$<=C;)a(this,E,$),$+=this.blockSize;if(typeof E=="string"){for(;$<j;)if(q[D++]=E.charCodeAt($++),D==this.blockSize){a(this,q),D=0;break}}else for(;$<j;)if(q[D++]=E[$++],D==this.blockSize){a(this,q),D=0;break}}this.h=D,this.o+=j},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var j=1;j<E.length-8;++j)E[j]=0;var C=8*this.o;for(j=E.length-8;j<E.length;++j)E[j]=C&255,C/=256;for(this.u(E),E=Array(16),j=C=0;4>j;++j)for(var q=0;32>q;q+=8)E[C++]=this.g[j]>>>q&255;return E};function i(E,j){var C=c;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=j(E)}function o(E,j){this.h=j;for(var C=[],q=!0,D=E.length-1;0<=D;D--){var $=E[D]|0;q&&$==j||(C[D]=$,q=!1)}this.g=C}var c={};function d(E){return-128<=E&&128>E?i(E,function(j){return new o([j|0],0>j?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return N(h(-E));for(var j=[],C=1,q=0;E>=C;q++)j[q]=E/C|0,C*=4294967296;return new o(j,0)}function p(E,j){if(E.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(E.charAt(0)=="-")return N(p(E.substring(1),j));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(j,8)),q=m,D=0;D<E.length;D+=8){var $=Math.min(8,E.length-D),B=parseInt(E.substring(D,D+$),j);8>$?($=h(Math.pow(j,$)),q=q.j($).add(h(B))):(q=q.j(C),q=q.add(h(B)))}return q}var m=d(0),x=d(1),y=d(16777216);t=o.prototype,t.m=function(){if(w(this))return-N(this).m();for(var E=0,j=1,C=0;C<this.g.length;C++){var q=this.i(C);E+=(0<=q?q:4294967296+q)*j,j*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S(this))return"0";if(w(this))return"-"+N(this).toString(E);for(var j=h(Math.pow(E,6)),C=this,q="";;){var D=L(C,j).g;C=A(C,D.j(j));var $=((0<C.g.length?C.g[0]:C.h)>>>0).toString(E);if(C=D,S(C))return $+q;for(;6>$.length;)$="0"+$;q=$+q}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function S(E){if(E.h!=0)return!1;for(var j=0;j<E.g.length;j++)if(E.g[j]!=0)return!1;return!0}function w(E){return E.h==-1}t.l=function(E){return E=A(this,E),w(E)?-1:S(E)?0:1};function N(E){for(var j=E.g.length,C=[],q=0;q<j;q++)C[q]=~E.g[q];return new o(C,~E.h).add(x)}t.abs=function(){return w(this)?N(this):this},t.add=function(E){for(var j=Math.max(this.g.length,E.g.length),C=[],q=0,D=0;D<=j;D++){var $=q+(this.i(D)&65535)+(E.i(D)&65535),B=($>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);q=B>>>16,$&=65535,B&=65535,C[D]=B<<16|$}return new o(C,C[C.length-1]&-2147483648?-1:0)};function A(E,j){return E.add(N(j))}t.j=function(E){if(S(this)||S(E))return m;if(w(this))return w(E)?N(this).j(N(E)):N(N(this).j(E));if(w(E))return N(this.j(N(E)));if(0>this.l(y)&&0>E.l(y))return h(this.m()*E.m());for(var j=this.g.length+E.g.length,C=[],q=0;q<2*j;q++)C[q]=0;for(q=0;q<this.g.length;q++)for(var D=0;D<E.g.length;D++){var $=this.i(q)>>>16,B=this.i(q)&65535,V=E.i(D)>>>16,W=E.i(D)&65535;C[2*q+2*D]+=B*W,R(C,2*q+2*D),C[2*q+2*D+1]+=$*W,R(C,2*q+2*D+1),C[2*q+2*D+1]+=B*V,R(C,2*q+2*D+1),C[2*q+2*D+2]+=$*V,R(C,2*q+2*D+2)}for(q=0;q<j;q++)C[q]=C[2*q+1]<<16|C[2*q];for(q=j;q<2*j;q++)C[q]=0;return new o(C,0)};function R(E,j){for(;(E[j]&65535)!=E[j];)E[j+1]+=E[j]>>>16,E[j]&=65535,j++}function O(E,j){this.g=E,this.h=j}function L(E,j){if(S(j))throw Error("division by zero");if(S(E))return new O(m,m);if(w(E))return j=L(N(E),j),new O(N(j.g),N(j.h));if(w(j))return j=L(E,N(j)),new O(N(j.g),j.h);if(30<E.g.length){if(w(E)||w(j))throw Error("slowDivide_ only works with positive integers.");for(var C=x,q=j;0>=q.l(E);)C=I(C),q=I(q);var D=k(C,1),$=k(q,1);for(q=k(q,2),C=k(C,2);!S(q);){var B=$.add(q);0>=B.l(E)&&(D=D.add(C),$=B),q=k(q,1),C=k(C,1)}return j=A(E,D.j(j)),new O(D,j)}for(D=m;0<=E.l(j);){for(C=Math.max(1,Math.floor(E.m()/j.m())),q=Math.ceil(Math.log(C)/Math.LN2),q=48>=q?1:Math.pow(2,q-48),$=h(C),B=$.j(j);w(B)||0<B.l(E);)C-=q,$=h(C),B=$.j(j);S($)&&($=x),D=D.add($),E=A(E,B)}return new O(D,E)}t.A=function(E){return L(this,E).h},t.and=function(E){for(var j=Math.max(this.g.length,E.g.length),C=[],q=0;q<j;q++)C[q]=this.i(q)&E.i(q);return new o(C,this.h&E.h)},t.or=function(E){for(var j=Math.max(this.g.length,E.g.length),C=[],q=0;q<j;q++)C[q]=this.i(q)|E.i(q);return new o(C,this.h|E.h)},t.xor=function(E){for(var j=Math.max(this.g.length,E.g.length),C=[],q=0;q<j;q++)C[q]=this.i(q)^E.i(q);return new o(C,this.h^E.h)};function I(E){for(var j=E.g.length+1,C=[],q=0;q<j;q++)C[q]=E.i(q)<<1|E.i(q-1)>>>31;return new o(C,E.h)}function k(E,j){var C=j>>5;j%=32;for(var q=E.g.length-C,D=[],$=0;$<q;$++)D[$]=0<j?E.i($+C)>>>j|E.i($+C+1)<<32-j:E.i($+C);return new o(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,xF=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,qd=o}).apply(typeof dI<"u"?dI:typeof self<"u"?self:typeof window<"u"?window:{});var gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yF,pm,vF,lv,bT,bF,wF,SF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,P,F){return v==Array.prototype||v==Object.prototype||(v[P]=F.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof gy=="object"&&gy];for(var P=0;P<v.length;++P){var F=v[P];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(v,P){if(P)e:{var F=n;v=v.split(".");for(var ee=0;ee<v.length-1;ee++){var Te=v[ee];if(!(Te in F))break e;F=F[Te]}v=v[v.length-1],ee=F[v],P=P(ee),P!=ee&&P!=null&&e(F,v,{configurable:!0,writable:!0,value:P})}}function i(v,P){v instanceof String&&(v+="");var F=0,ee=!1,Te={next:function(){if(!ee&&F<v.length){var Ve=F++;return{value:P(Ve,v[Ve]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}a("Array.prototype.values",function(v){return v||function(){return i(this,function(P,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(v){var P=typeof v;return P=P!="object"?P:v?Array.isArray(v)?"array":P:"null",P=="array"||P=="object"&&typeof v.length=="number"}function h(v){var P=typeof v;return P=="object"&&v!=null||P=="function"}function p(v,P,F){return v.call.apply(v.bind,arguments)}function m(v,P,F){if(!v)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,ee),v.apply(P,Te)}}return function(){return v.apply(P,arguments)}}function x(v,P,F){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,x.apply(null,arguments)}function y(v,P){var F=Array.prototype.slice.call(arguments,1);return function(){var ee=F.slice();return ee.push.apply(ee,arguments),v.apply(this,ee)}}function S(v,P){function F(){}F.prototype=P.prototype,v.aa=P.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(ee,Te,Ve){for(var gt=Array(arguments.length-2),fn=2;fn<arguments.length;fn++)gt[fn-2]=arguments[fn];return P.prototype[Te].apply(ee,gt)}}function w(v){const P=v.length;if(0<P){const F=Array(P);for(let ee=0;ee<P;ee++)F[ee]=v[ee];return F}return[]}function N(v,P){for(let F=1;F<arguments.length;F++){const ee=arguments[F];if(d(ee)){const Te=v.length||0,Ve=ee.length||0;v.length=Te+Ve;for(let gt=0;gt<Ve;gt++)v[Te+gt]=ee[gt]}else v.push(ee)}}class A{constructor(P,F){this.i=P,this.j=F,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function R(v){return/^[\s\xa0]*$/.test(v)}function O(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var I=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function k(v,P,F){for(const ee in v)P.call(F,v[ee],ee,v)}function E(v,P){for(const F in v)P.call(void 0,v[F],F,v)}function j(v){const P={};for(const F in v)P[F]=v[F];return P}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(v,P){let F,ee;for(let Te=1;Te<arguments.length;Te++){ee=arguments[Te];for(F in ee)v[F]=ee[F];for(let Ve=0;Ve<C.length;Ve++)F=C[Ve],Object.prototype.hasOwnProperty.call(ee,F)&&(v[F]=ee[F])}}function D(v){var P=1;v=v.split(":");const F=[];for(;0<P&&v.length;)F.push(v.shift()),P--;return v.length&&F.push(v.join(":")),F}function $(v){c.setTimeout(()=>{throw v},0)}function B(){var v=ce;let P=null;return v.g&&(P=v.g,v.g=v.g.next,v.g||(v.h=null),P.next=null),P}class V{constructor(){this.h=this.g=null}add(P,F){const ee=W.get();ee.set(P,F),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var W=new A(()=>new G,v=>v.reset());class G{constructor(){this.next=this.g=this.h=null}set(P,F){this.h=P,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,re=!1,ce=new V,de=()=>{const v=c.Promise.resolve(void 0);Y=()=>{v.then(X)}};var X=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(F){$(F)}var P=W;P.j(v),100>P.h&&(P.h++,v.next=P.g,P.g=v)}re=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(v,P){this.type=v,this.g=this.target=P,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,P=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};c.addEventListener("test",F,P),c.removeEventListener("test",F,P)}catch{}return v})();function pe(v,P){if(ne.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,ee=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=P,P=v.relatedTarget){if(I){e:{try{L(P.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(P=null)}}else F=="mouseover"?P=v.fromElement:F=="mouseout"&&(P=v.toElement);this.relatedTarget=P,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Be[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&pe.aa.h.call(this)}}S(pe,ne);var Be={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ne(v,P,F,ee,Te){this.listener=v,this.proxy=null,this.src=P,this.type=F,this.capture=!!ee,this.ha=Te,this.key=++Fe,this.da=this.fa=!1}function He(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Z(v){this.src=v,this.g={},this.h=0}Z.prototype.add=function(v,P,F,ee,Te){var Ve=v.toString();v=this.g[Ve],v||(v=this.g[Ve]=[],this.h++);var gt=be(v,P,ee,Te);return-1<gt?(P=v[gt],F||(P.fa=!1)):(P=new Ne(P,this.src,Ve,!!ee,Te),P.fa=F,v.push(P)),P};function te(v,P){var F=P.type;if(F in v.g){var ee=v.g[F],Te=Array.prototype.indexOf.call(ee,P,void 0),Ve;(Ve=0<=Te)&&Array.prototype.splice.call(ee,Te,1),Ve&&(He(P),v.g[F].length==0&&(delete v.g[F],v.h--))}}function be(v,P,F,ee){for(var Te=0;Te<v.length;++Te){var Ve=v[Te];if(!Ve.da&&Ve.listener==P&&Ve.capture==!!F&&Ve.ha==ee)return Te}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),Ze={};function rt(v,P,F,ee,Te){if(Array.isArray(P)){for(var Ve=0;Ve<P.length;Ve++)rt(v,P[Ve],F,ee,Te);return null}return F=Pt(F),v&&v[Ue]?v.K(P,F,h(ee)?!!ee.capture:!1,Te):It(v,P,F,!1,ee,Te)}function It(v,P,F,ee,Te,Ve){if(!P)throw Error("Invalid event type");var gt=h(Te)?!!Te.capture:!!Te,fn=he(v);if(fn||(v[Se]=fn=new Z(v)),F=fn.add(P,F,ee,gt,Ve),F.proxy)return F;if(ee=At(),F.proxy=ee,ee.src=v,ee.listener=F,v.addEventListener)ve||(Te=gt),Te===void 0&&(Te=!1),v.addEventListener(P.toString(),ee,Te);else if(v.attachEvent)v.attachEvent(Dt(P.toString()),ee);else if(v.addListener&&v.removeListener)v.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return F}function At(){function v(F){return P.call(v.src,v.listener,F)}const P=tr;return v}function Ft(v,P,F,ee,Te){if(Array.isArray(P))for(var Ve=0;Ve<P.length;Ve++)Ft(v,P[Ve],F,ee,Te);else ee=h(ee)?!!ee.capture:!!ee,F=Pt(F),v&&v[Ue]?(v=v.i,P=String(P).toString(),P in v.g&&(Ve=v.g[P],F=be(Ve,F,ee,Te),-1<F&&(He(Ve[F]),Array.prototype.splice.call(Ve,F,1),Ve.length==0&&(delete v.g[P],v.h--)))):v&&(v=he(v))&&(P=v.g[P.toString()],v=-1,P&&(v=be(P,F,ee,Te)),(F=-1<v?P[v]:null)&&qt(F))}function qt(v){if(typeof v!="number"&&v&&!v.da){var P=v.src;if(P&&P[Ue])te(P.i,v);else{var F=v.type,ee=v.proxy;P.removeEventListener?P.removeEventListener(F,ee,v.capture):P.detachEvent?P.detachEvent(Dt(F),ee):P.addListener&&P.removeListener&&P.removeListener(ee),(F=he(P))?(te(F,v),F.h==0&&(F.src=null,P[Se]=null)):He(v)}}}function Dt(v){return v in Ze?Ze[v]:Ze[v]="on"+v}function tr(v,P){if(v.da)v=!0;else{P=new pe(P,this);var F=v.listener,ee=v.ha||v.src;v.fa&&qt(v),v=F.call(ee,P)}return v}function he(v){return v=v[Se],v instanceof Z?v:null}var Ge="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pt(v){return typeof v=="function"?v:(v[Ge]||(v[Ge]=function(P){return v.handleEvent(P)}),v[Ge])}function Ke(){ae.call(this),this.i=new Z(this),this.M=this,this.F=null}S(Ke,ae),Ke.prototype[Ue]=!0,Ke.prototype.removeEventListener=function(v,P,F,ee){Ft(this,v,P,F,ee)};function it(v,P){var F,ee=v.F;if(ee)for(F=[];ee;ee=ee.F)F.push(ee);if(v=v.M,ee=P.type||P,typeof P=="string")P=new ne(P,v);else if(P instanceof ne)P.target=P.target||v;else{var Te=P;P=new ne(ee,v),q(P,Te)}if(Te=!0,F)for(var Ve=F.length-1;0<=Ve;Ve--){var gt=P.g=F[Ve];Te=$t(gt,ee,!0,P)&&Te}if(gt=P.g=v,Te=$t(gt,ee,!0,P)&&Te,Te=$t(gt,ee,!1,P)&&Te,F)for(Ve=0;Ve<F.length;Ve++)gt=P.g=F[Ve],Te=$t(gt,ee,!1,P)&&Te}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var v=this.i,P;for(P in v.g){for(var F=v.g[P],ee=0;ee<F.length;ee++)He(F[ee]);delete v.g[P],v.h--}}this.F=null},Ke.prototype.K=function(v,P,F,ee){return this.i.add(String(v),P,!1,F,ee)},Ke.prototype.L=function(v,P,F,ee){return this.i.add(String(v),P,!0,F,ee)};function $t(v,P,F,ee){if(P=v.i.g[String(P)],!P)return!0;P=P.concat();for(var Te=!0,Ve=0;Ve<P.length;++Ve){var gt=P[Ve];if(gt&&!gt.da&&gt.capture==F){var fn=gt.listener,Aa=gt.ha||gt.src;gt.fa&&te(v.i,gt),Te=fn.call(Aa,ee)!==!1&&Te}}return Te&&!ee.defaultPrevented}function Nt(v,P,F){if(typeof v=="function")F&&(v=x(v,F));else if(v&&typeof v.handleEvent=="function")v=x(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:c.setTimeout(v,P||0)}function kr(v){v.g=Nt(()=>{v.g=null,v.i&&(v.i=!1,kr(v))},v.l);const P=v.h;v.h=null,v.m.apply(null,P)}class ye extends ae{constructor(P,F){super(),this.m=P,this.l=F,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:kr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(v){ae.call(this),this.h=v,this.g={}}S(ot,ae);var mt=[];function Ct(v){k(v.g,function(P,F){this.g.hasOwnProperty(F)&&qt(P)},v),v.g={}}ot.prototype.N=function(){ot.aa.N.call(this),Ct(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vt=c.JSON.stringify,tt=c.JSON.parse,gr=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Gt(){}Gt.prototype.h=null;function Vr(v){return v.h||(v.h=v.i())}function cn(){}var yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qt(){ne.call(this,"d")}S(Qt,ne);function Lt(){ne.call(this,"c")}S(Lt,ne);var bt={},Fr=null;function tn(){return Fr=Fr||new Ke}bt.La="serverreachability";function Dr(v){ne.call(this,bt.La,v)}S(Dr,ne);function Cr(v){const P=tn();it(P,new Dr(P))}bt.STAT_EVENT="statevent";function xn(v,P){ne.call(this,bt.STAT_EVENT,v),this.stat=P}S(xn,ne);function dr(v){const P=tn();it(P,new xn(P,v))}bt.Ma="timingevent";function Qn(v,P){ne.call(this,bt.Ma,v),this.size=P}S(Qn,ne);function un(v,P){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},P)}function dn(){this.g=!0}dn.prototype.xa=function(){this.g=!1};function Re(v,P,F,ee,Te,Ve){v.info(function(){if(v.g)if(Ve)for(var gt="",fn=Ve.split("&"),Aa=0;Aa<fn.length;Aa++){var Ar=fn[Aa].split("=");if(1<Ar.length){var Ja=Ar[0];Ar=Ar[1];var Za=Ja.split("_");gt=2<=Za.length&&Za[1]=="type"?gt+(Ja+"="+Ar+"&"):gt+(Ja+"=redacted&")}}else gt=null;else gt=Ve;return"XMLHTTP REQ ("+ee+") [attempt "+Te+"]: "+P+`
`+F+`
`+gt})}function Ye(v,P,F,ee,Te,Ve,gt){v.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+Te+"]: "+P+`
`+F+`
`+Ve+" "+gt})}function qe(v,P,F,ee){v.info(function(){return"XMLHTTP TEXT ("+P+"): "+Hr(v,F)+(ee?" "+ee:"")})}function hr(v,P){v.info(function(){return"TIMEOUT: "+P})}dn.prototype.info=function(){};function Hr(v,P){if(!v.g)return P;if(!P)return null;try{var F=JSON.parse(P);if(F){for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var ee=F[v];if(!(2>ee.length)){var Te=ee[1];if(Array.isArray(Te)&&!(1>Te.length)){var Ve=Te[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var gt=1;gt<Te.length;gt++)Te[gt]=""}}}}return vt(F)}catch{return P}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yn;function pa(){}S(pa,Gt),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},yn=new pa;function ma(v,P,F,ee){this.j=v,this.i=P,this.l=F,this.R=ee||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ga}function ga(){this.i=null,this.g="",this.h=!1}var hs={},bi={};function _t(v,P,F){v.L=1,v.v=xe(jt(P)),v.m=F,v.P=!0,fe(v,null)}function fe(v,P){v.F=Date.now(),rr(v),v.A=jt(v.v);var F=v.A,ee=v.R;Array.isArray(ee)||(ee=[String(ee)]),gs(F.i,"t",ee),v.C=0,F=v.j.J,v.h=new ga,v.g=o1(v.j,F?P:null,!v.m),0<v.O&&(v.M=new ye(x(v.Y,v,v.g),v.O)),P=v.U,F=v.g,ee=v.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(mt[0]=Te.toString()),Te=mt);for(var Ve=0;Ve<Te.length;Ve++){var gt=rt(F,Te[Ve],ee||P.handleEvent,!1,P.h||P);if(!gt)break;P.g[gt.key]=gt}P=v.H?j(v.H):{},v.m?(v.u||(v.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,P)):(v.u="GET",v.g.ea(v.A,v.u,null,P)),Cr(),Re(v.i,v.u,v.A,v.l,v.R,v.m)}ma.prototype.ca=function(v){v=v.target;const P=this.M;P&&ki(v)==3?P.j():this.Y(v)},ma.prototype.Y=function(v){try{if(v==this.g)e:{const Za=ki(this.g);var P=this.g.Ba();const Rc=this.g.Z();if(!(3>Za)&&(Za!=3||this.g&&(this.h.h||this.g.oa()||Zu(this.g)))){this.J||Za!=4||P==7||(P==8||0>=Rc?Cr(3):Cr(2)),vn(this);var F=this.g.Z();this.X=F;t:if(nt(this)){var ee=Zu(this.g);v="";var Te=ee.length,Ve=ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),nn(this);var gt="";break t}this.h.i=new c.TextDecoder}for(P=0;P<Te;P++)this.h.h=!0,v+=this.h.i.decode(ee[P],{stream:!(Ve&&P==Te-1)});ee.length=0,this.h.g+=v,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=F==200,Ye(this.i,this.u,this.A,this.l,this.R,Za,F),this.o){if(this.T&&!this.K){t:{if(this.g){var fn,Aa=this.g;if((fn=Aa.g?Aa.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(fn)){var Ar=fn;break t}}Ar=null}if(F=Ar)qe(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zr(this,F);else{this.o=!1,this.s=3,dr(12),_n(this),nn(this);break e}}if(this.P){F=!0;let Hi;for(;!this.J&&this.C<gt.length;)if(Hi=dt(this,gt),Hi==bi){Za==4&&(this.s=4,dr(14),F=!1),qe(this.i,this.l,null,"[Incomplete Response]");break}else if(Hi==hs){this.s=4,dr(15),qe(this.i,this.l,gt,"[Invalid Chunk]"),F=!1;break}else qe(this.i,this.l,Hi,null),zr(this,Hi);if(nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Za!=4||gt.length!=0||this.h.h||(this.s=1,dr(16),F=!1),this.o=this.o&&F,!F)qe(this.i,this.l,gt,"[Invalid Chunked Response]"),_n(this),nn(this);else if(0<gt.length&&!this.W){this.W=!0;var Ja=this.j;Ja.g==this&&Ja.ba&&!Ja.M&&(Ja.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),lp(Ja),Ja.M=!0,dr(11))}}else qe(this.i,this.l,gt,null),zr(this,gt);Za==4&&_n(this),this.o&&!this.J&&(Za==4?a1(this.j,this):(this.o=!1,rr(this)))}else Jx(this.g),F==400&&0<gt.indexOf("Unknown SID")?(this.s=3,dr(12)):(this.s=0,dr(13)),_n(this),nn(this)}}}catch{}finally{}};function nt(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function dt(v,P){var F=v.C,ee=P.indexOf(`
`,F);return ee==-1?bi:(F=Number(P.substring(F,ee)),isNaN(F)?hs:(ee+=1,ee+F>P.length?bi:(P=P.slice(ee,ee+F),v.C=ee+F,P)))}ma.prototype.cancel=function(){this.J=!0,_n(this)};function rr(v){v.S=Date.now()+v.I,br(v,v.I)}function br(v,P){if(v.B!=null)throw Error("WatchDog timer not null");v.B=un(x(v.ba,v),P)}function vn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}ma.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(hr(this.i,this.A),this.L!=2&&(Cr(),dr(17)),_n(this),this.s=2,nn(this)):br(this,this.S-v)};function nn(v){v.j.G==0||v.J||a1(v.j,v)}function _n(v){vn(v);var P=v.M;P&&typeof P.ma=="function"&&P.ma(),v.M=null,Ct(v.U),v.g&&(P=v.g,v.g=null,P.abort(),P.ma())}function zr(v,P){try{var F=v.j;if(F.G!=0&&(F.g==v||ps(F.h,v))){if(!v.K&&ps(F.h,v)&&F.G==3){try{var ee=F.Da.g.parse(P)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var Te=ee;if(Te[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<v.F)Oc(F),Cc(F);else break e;op(F),dr(18)}}else F.za=Te[1],0<F.za-F.T&&37500>Te[2]&&F.F&&F.v==0&&!F.C&&(F.C=un(x(F.Za,F),6e3));if(1>=vl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else wl(F,11)}else if((v.K||F.g==v)&&Oc(F),!R(P))for(Te=F.Da.g.parse(P),P=0;P<Te.length;P++){let Ar=Te[P];if(F.T=Ar[0],Ar=Ar[1],F.G==2)if(Ar[0]=="c"){F.K=Ar[1],F.ia=Ar[2];const Ja=Ar[3];Ja!=null&&(F.la=Ja,F.j.info("VER="+F.la));const Za=Ar[4];Za!=null&&(F.Aa=Za,F.j.info("SVER="+F.Aa));const Rc=Ar[5];Rc!=null&&typeof Rc=="number"&&0<Rc&&(ee=1.5*Rc,F.L=ee,F.j.info("backChannelRequestTimeoutMs_="+ee)),ee=F;const Hi=v.g;if(Hi){const rd=Hi.g?Hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rd){var Ve=ee.h;Ve.g||rd.indexOf("spdy")==-1&&rd.indexOf("quic")==-1&&rd.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(ms(Ve,Ve.h),Ve.h=null))}if(ee.D){const Sl=Hi.g?Hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(ee.ya=Sl,se(ee.I,ee.D,Sl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms")),ee=F;var gt=v;if(ee.qa=s1(ee,ee.J?ee.ia:null,ee.W),gt.K){Ba(ee.h,gt);var fn=gt,Aa=ee.L;Aa&&(fn.I=Aa),fn.B&&(vn(fn),rr(fn)),ee.g=gt}else r1(ee);0<F.i.length&&I0(F)}else Ar[0]!="stop"&&Ar[0]!="close"||wl(F,7);else F.G==3&&(Ar[0]=="stop"||Ar[0]=="close"?Ar[0]=="stop"?wl(F,7):ip(F):Ar[0]!="noop"&&F.l&&F.l.ta(Ar),F.v=0)}}Cr(4)}catch{}}var Bs=class{constructor(v,P){this.g=v,this.map=P}};function fs(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ho(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function vl(v){return v.h?1:v.g?v.g.size:0}function ps(v,P){return v.h?v.h==P:v.g?v.g.has(P):!1}function ms(v,P){v.g?v.g.add(P):v.h=P}function Ba(v,P){v.h&&v.h==P?v.h=null:v.g&&v.g.has(P)&&v.g.delete(P)}fs.prototype.cancel=function(){if(this.i=ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function ja(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let P=v.i;for(const F of v.g.values())P=P.concat(F.D);return P}return w(v.i)}function H(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var P=[],F=v.length,ee=0;ee<F;ee++)P.push(v[ee]);return P}P=[],F=0;for(ee in v)P[F++]=v[ee];return P}function we(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var P=[];v=v.length;for(var F=0;F<v;F++)P.push(F);return P}P=[],F=0;for(const ee in v)P[F++]=ee;return P}}}function je(v,P){if(v.forEach&&typeof v.forEach=="function")v.forEach(P,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,P,void 0);else for(var F=we(v),ee=H(v),Te=ee.length,Ve=0;Ve<Te;Ve++)P.call(void 0,ee[Ve],F&&F[Ve],v)}var Ee=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(v,P){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var ee=v[F].indexOf("="),Te=null;if(0<=ee){var Ve=v[F].substring(0,ee);Te=v[F].substring(ee+1)}else Ve=v[F];P(Ve,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Rt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Rt){this.h=v.h,nr(this,v.j),this.o=v.o,this.g=v.g,Or(this,v.s),this.l=v.l;var P=v.i,F=new Dn;F.i=P.i,P.g&&(F.g=new Map(P.g),F.h=P.h),hn(this,F),this.m=v.m}else v&&(P=String(v).match(Ee))?(this.h=!1,nr(this,P[1]||"",!0),this.o=Le(P[2]||""),this.g=Le(P[3]||"",!0),Or(this,P[4]),this.l=Le(P[5]||"",!0),hn(this,P[6]||"",!0),this.m=Le(P[7]||"")):(this.h=!1,this.i=new Dn(null,this.h))}Rt.prototype.toString=function(){var v=[],P=this.j;P&&v.push(Pe(P,or,!0),":");var F=this.g;return(F||P=="file")&&(v.push("//"),(P=this.o)&&v.push(Pe(P,or,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&v.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&v.push("/"),v.push(Pe(F,F.charAt(0)=="/"?Mn:Zt,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",Pe(F,$s)),v.join("")};function jt(v){return new Rt(v)}function nr(v,P,F){v.j=F?Le(P,!0):P,v.j&&(v.j=v.j.replace(/:$/,""))}function Or(v,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);v.s=P}else v.s=null}function hn(v,P,F){P instanceof Dn?(v.i=P,Xx(v.i,v.h)):(F||(P=Pe(P,$a)),v.i=new Dn(P,v.h))}function se(v,P,F){v.i.set(P,F)}function xe(v){return se(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Le(v,P){return v?P?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Pe(v,P,F){return typeof v=="string"?(v=encodeURI(v).replace(P,ht),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function ht(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var or=/[#\/\?@]/g,Zt=/[#\?:]/g,Mn=/[#\?]/g,$a=/[#\?@]/g,$s=/#/g;function Dn(v,P){this.h=this.g=null,this.i=v||null,this.j=!!P}function Tn(v){v.g||(v.g=new Map,v.h=0,v.i&&pt(v.i,function(P,F){v.add(decodeURIComponent(P.replace(/\+/g," ")),F)}))}t=Dn.prototype,t.add=function(v,P){Tn(this),this.i=null,v=wi(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(P),this.h+=1,this};function Fi(v,P){Tn(v),P=wi(v,P),v.g.has(P)&&(v.i=null,v.h-=v.g.get(P).length,v.g.delete(P))}function Tr(v,P){return Tn(v),P=wi(v,P),v.g.has(P)}t.forEach=function(v,P){Tn(this),this.g.forEach(function(F,ee){F.forEach(function(Te){v.call(P,Te,ee,this)},this)},this)},t.na=function(){Tn(this);const v=Array.from(this.g.values()),P=Array.from(this.g.keys()),F=[];for(let ee=0;ee<P.length;ee++){const Te=v[ee];for(let Ve=0;Ve<Te.length;Ve++)F.push(P[ee])}return F},t.V=function(v){Tn(this);let P=[];if(typeof v=="string")Tr(this,v)&&(P=P.concat(this.g.get(wi(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)P=P.concat(v[F])}return P},t.set=function(v,P){return Tn(this),this.i=null,v=wi(this,v),Tr(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[P]),this.h+=1,this},t.get=function(v,P){return v?(v=this.V(v),0<v.length?String(v[0]):P):P};function gs(v,P,F){Fi(v,P),0<F.length&&(v.i=null,v.g.set(wi(v,P),w(F)),v.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],P=Array.from(this.g.keys());for(var F=0;F<P.length;F++){var ee=P[F];const Ve=encodeURIComponent(String(ee)),gt=this.V(ee);for(ee=0;ee<gt.length;ee++){var Te=Ve;gt[ee]!==""&&(Te+="="+encodeURIComponent(String(gt[ee]))),v.push(Te)}}return this.i=v.join("&")};function wi(v,P){return P=String(P),v.j&&(P=P.toLowerCase()),P}function Xx(v,P){P&&!v.j&&(Tn(v),v.i=null,v.g.forEach(function(F,ee){var Te=ee.toLowerCase();ee!=Te&&(Fi(this,ee),gs(this,Te,F))},v)),v.j=P}function np(v,P){const F=new dn;if(c.Image){const ee=new Image;ee.onload=y(qi,F,"TestLoadImage: loaded",!0,P,ee),ee.onerror=y(qi,F,"TestLoadImage: error",!1,P,ee),ee.onabort=y(qi,F,"TestLoadImage: abort",!1,P,ee),ee.ontimeout=y(qi,F,"TestLoadImage: timeout",!1,P,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=v}else P(!1)}function Qx(v,P){const F=new dn,ee=new AbortController,Te=setTimeout(()=>{ee.abort(),qi(F,"TestPingServer: timeout",!1,P)},1e4);fetch(v,{signal:ee.signal}).then(Ve=>{clearTimeout(Te),Ve.ok?qi(F,"TestPingServer: ok",!0,P):qi(F,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(Te),qi(F,"TestPingServer: error",!1,P)})}function qi(v,P,F,ee,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),ee(F)}catch{}}function fo(){this.g=new gr}function ap(v,P,F){const ee=F||"";try{je(v,function(Te,Ve){let gt=Te;h(Te)&&(gt=vt(Te)),P.push(ee+Ve+"="+encodeURIComponent(gt))})}catch(Te){throw P.push(ee+"type="+encodeURIComponent("_badmap")),Te}}function Bo(v){this.l=v.Ub||null,this.j=v.eb||!1}S(Bo,Gt),Bo.prototype.g=function(){return new xs(this.l,this.j)},Bo.prototype.i=(function(v){return function(){return v}})({});function xs(v,P){Ke.call(this),this.D=v,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(xs,Ke),t=xs.prototype,t.open=function(v,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=P,this.readyState=1,jc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(P.body=v),(this.D||c).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;C0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function C0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var P=v.value?v.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!v.done}))&&(this.response=this.responseText+=P)}v.done?$o(this):jc(this),this.readyState==3&&C0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,$o(this))},t.Qa=function(v){this.g&&(this.response=v,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(v){v.readyState=4,v.l=null,v.j=null,v.v=null,jc(v)}t.setRequestHeader=function(v,P){this.u.append(v,P)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],P=this.h.entries();for(var F=P.next();!F.done;)F=F.value,v.push(F[0]+": "+F[1]),F=P.next();return v.join(`\r
`)};function jc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Yu(v){let P="";return k(v,function(F,ee){P+=ee,P+=":",P+=F,P+=`\r
`}),P}function Ac(v,P,F){e:{for(ee in F){var ee=!1;break e}ee=!0}ee||(F=Yu(F),typeof v=="string"?F!=null&&encodeURIComponent(String(F)):se(v,P,F))}function Hn(v){Ke.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Hn,Ke);var Si=/^https?$/i,bl=["POST","PUT"];t=Hn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,P,F,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);P=P?P.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yn.g(),this.v=this.o?Vr(this.o):Vr(yn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(P,String(v),!0),this.B=!1}catch(Ve){Ju(this,Ve);return}if(v=F||"",F=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var Te in ee)F.set(Te,ee[Te]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Ve of ee.keys())F.set(Ve,ee.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(F.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),Te=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(bl,P,void 0))||ee||Te||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,gt]of F)this.g.setRequestHeader(Ve,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{O0(this),this.u=!0,this.g.send(v),this.u=!1}catch(Ve){Ju(this,Ve)}};function Ju(v,P){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=P,v.m=5,Ec(v),kc(v)}function Ec(v){v.A||(v.A=!0,it(v,"complete"),it(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,it(this,"complete"),it(this,"abort"),kc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),kc(this,!0)),Hn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yx(this):this.bb())},t.bb=function(){Yx(this)};function Yx(v){if(v.h&&typeof o<"u"&&(!v.v[1]||ki(v)!=4||v.Z()!=2)){if(v.u&&ki(v)==4)Nt(v.Ea,0,v);else if(it(v,"readystatechange"),ki(v)==4){v.h=!1;try{const gt=v.Z();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var F;if(!(F=P)){var ee;if(ee=gt===0){var Te=String(v.D).match(Ee)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),ee=!Si.test(Te?Te.toLowerCase():"")}F=ee}if(F)it(v,"complete"),it(v,"success");else{v.m=6;try{var Ve=2<ki(v)?v.g.statusText:""}catch{Ve=""}v.l=Ve+" ["+v.Z()+"]",Ec(v)}}finally{kc(v)}}}}function kc(v,P){if(v.g){O0(v);const F=v.g,ee=v.v[0]?()=>{}:null;v.g=null,v.v=null,P||it(v,"ready");try{F.onreadystatechange=ee}catch{}}}function O0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function ki(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var P=this.g.responseText;return v&&P.indexOf(v)==0&&(P=P.substring(v.length)),tt(P)}};function Zu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Jx(v){const P={};v=(v.g&&2<=ki(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<v.length;ee++){if(R(v[ee]))continue;var F=D(v[ee]);const Te=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const Ve=P[Te]||[];P[Te]=Ve,Ve.push(F)}E(P,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ed(v,P,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||P}function Zx(v){this.Aa=0,this.i=[],this.j=new dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ed("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ed("baseRetryDelayMs",5e3,v),this.cb=ed("retryDelaySeedMs",1e4,v),this.Wa=ed("forwardChannelMaxRetries",2,v),this.wa=ed("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new fs(v&&v.concurrentRequestLimit),this.Da=new fo,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zx.prototype,t.la=8,t.G=1,t.connect=function(v,P,F,ee){dr(0),this.W=v,this.H=P||{},F&&ee!==void 0&&(this.H.OSID=F,this.H.OAID=ee),this.F=this.X,this.I=s1(this,null,this.W),I0(this)};function ip(v){if(e1(v),v.G==3){var P=v.U++,F=jt(v.I);if(se(F,"SID",v.K),se(F,"RID",P),se(F,"TYPE","terminate"),td(v,F),P=new ma(v,v.j,P),P.L=2,P.v=xe(jt(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(P.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=P.v,F=!0),F||(P.g=o1(P.j,null),P.g.ea(P.v)),P.F=Date.now(),rr(P)}cp(v)}function Cc(v){v.g&&(lp(v),v.g.cancel(),v.g=null)}function e1(v){Cc(v),v.u&&(c.clearTimeout(v.u),v.u=null),Oc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function I0(v){if(!ho(v.h)&&!v.s){v.s=!0;var P=v.Ga;Y||de(),re||(Y(),re=!0),ce.add(P,v),v.B=0}}function e4(v,P){return vl(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=P.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=un(x(v.Ga,v,P),i1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Te=new ma(this,this.j,v);let Ve=this.o;if(this.S&&(Ve?(Ve=j(Ve),q(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(Te.H=Ve,Ve=null),this.P)e:{for(var P=0,F=0;F<this.i.length;F++){t:{var ee=this.i[F];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(P+=ee,4096<P){P=F;break e}if(P===4096||F===this.i.length-1){P=F+1;break e}}P=1e3}else P=1e3;P=sp(this,Te,P),F=jt(this.I),se(F,"RID",v),se(F,"CVER",22),this.D&&se(F,"X-HTTP-Session-Id",this.D),td(this,F),Ve&&(this.O?P="headers="+encodeURIComponent(String(Yu(Ve)))+"&"+P:this.m&&Ac(F,this.m,Ve)),ms(this.h,Te),this.Ua&&se(F,"TYPE","init"),this.P?(se(F,"$req",P),se(F,"SID","null"),Te.T=!0,_t(Te,F,null)):_t(Te,F,P),this.G=2}}else this.G==3&&(v?t1(this,v):this.i.length==0||ho(this.h)||t1(this))};function t1(v,P){var F;P?F=P.l:F=v.U++;const ee=jt(v.I);se(ee,"SID",v.K),se(ee,"RID",F),se(ee,"AID",v.T),td(v,ee),v.m&&v.o&&Ac(ee,v.m,v.o),F=new ma(v,v.j,F,v.B+1),v.m===null&&(F.H=v.o),P&&(v.i=P.D.concat(v.i)),P=sp(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),ms(v.h,F),_t(F,ee,P)}function td(v,P){v.H&&k(v.H,function(F,ee){se(P,ee,F)}),v.l&&je({},function(F,ee){se(P,ee,F)})}function sp(v,P,F){F=Math.min(v.i.length,F);var ee=v.l?x(v.l.Na,v.l,v):null;e:{var Te=v.i;let Ve=-1;for(;;){const gt=["count="+F];Ve==-1?0<F?(Ve=Te[0].g,gt.push("ofs="+Ve)):Ve=0:gt.push("ofs="+Ve);let fn=!0;for(let Aa=0;Aa<F;Aa++){let Ar=Te[Aa].g;const Ja=Te[Aa].map;if(Ar-=Ve,0>Ar)Ve=Math.max(0,Te[Aa].g-100),fn=!1;else try{ap(Ja,gt,"req"+Ar+"_")}catch{ee&&ee(Ja)}}if(fn){ee=gt.join("&");break e}}}return v=v.i.splice(0,F),P.D=v,ee}function r1(v){if(!v.g&&!v.u){v.Y=1;var P=v.Fa;Y||de(),re||(Y(),re=!0),ce.add(P,v),v.v=0}}function op(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=un(x(v.Fa,v),i1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,n1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=un(x(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dr(10),Cc(this),n1(this))};function lp(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function n1(v){v.g=new ma(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var P=jt(v.qa);se(P,"RID","rpc"),se(P,"SID",v.K),se(P,"AID",v.T),se(P,"CI",v.F?"0":"1"),!v.F&&v.ja&&se(P,"TO",v.ja),se(P,"TYPE","xmlhttp"),td(v,P),v.m&&v.o&&Ac(P,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=xe(jt(P)),F.m=null,F.P=!0,fe(F,v)}t.Za=function(){this.C!=null&&(this.C=null,Cc(this),op(this),dr(19))};function Oc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function a1(v,P){var F=null;if(v.g==P){Oc(v),lp(v),v.g=null;var ee=2}else if(ps(v.h,P))F=P.D,Ba(v.h,P),ee=1;else return;if(v.G!=0){if(P.o)if(ee==1){F=P.m?P.m.length:0,P=Date.now()-P.F;var Te=v.B;ee=tn(),it(ee,new Qn(ee,F)),I0(v)}else r1(v);else if(Te=P.s,Te==3||Te==0&&0<P.X||!(ee==1&&e4(v,P)||ee==2&&op(v)))switch(F&&0<F.length&&(P=v.h,P.i=P.i.concat(F)),Te){case 1:wl(v,5);break;case 4:wl(v,10);break;case 3:wl(v,6);break;default:wl(v,2)}}}function i1(v,P){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*P}function wl(v,P){if(v.j.info("Error code "+P),P==2){var F=x(v.fb,v),ee=v.Xa;const Te=!ee;ee=new Rt(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||nr(ee,"https"),xe(ee),Te?np(ee.toString(),F):Qx(ee.toString(),F)}else dr(2);v.G=0,v.l&&v.l.sa(P),cp(v),e1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),dr(2)):(this.j.info("Failed to ping google.com"),dr(1))};function cp(v){if(v.G=0,v.ka=[],v.l){const P=ja(v.h);(P.length!=0||v.i.length!=0)&&(N(v.ka,P),N(v.ka,v.i),v.h.i.length=0,w(v.i),v.i.length=0),v.l.ra()}}function s1(v,P,F){var ee=F instanceof Rt?jt(F):new Rt(F);if(ee.g!="")P&&(ee.g=P+"."+ee.g),Or(ee,ee.s);else{var Te=c.location;ee=Te.protocol,P=P?P+"."+Te.hostname:Te.hostname,Te=+Te.port;var Ve=new Rt(null);ee&&nr(Ve,ee),P&&(Ve.g=P),Te&&Or(Ve,Te),F&&(Ve.l=F),ee=Ve}return F=v.D,P=v.ya,F&&P&&se(ee,F,P),se(ee,"VER",v.la),td(v,ee),ee}function o1(v,P,F){if(P&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=v.Ca&&!v.pa?new Hn(new Bo({eb:F})):new Hn(v.pa),P.Ha(v.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function l1(){}t=l1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function R0(){}R0.prototype.g=function(v,P){return new Ci(v,P)};function Ci(v,P){Ke.call(this),this.g=new Zx(P),this.l=v,this.h=P&&P.messageUrlParams||null,v=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(v?v["X-WebChannel-Content-Type"]=P.messageContentType:v={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(v?v["X-WebChannel-Client-Profile"]=P.va:v={"X-WebChannel-Client-Profile":P.va}),this.g.S=v,(v=P&&P.Sb)&&!R(v)&&(this.g.m=v),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!R(P)&&(this.g.D=P,v=this.h,v!==null&&P in v&&(v=this.h,P in v&&delete v[P])),this.j=new Ic(this)}S(Ci,Ke),Ci.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ci.prototype.close=function(){ip(this.g)},Ci.prototype.o=function(v){var P=this.g;if(typeof v=="string"){var F={};F.__data__=v,v=F}else this.u&&(F={},F.__data__=vt(v),v=F);P.i.push(new Bs(P.Ya++,v)),P.G==3&&I0(P)},Ci.prototype.N=function(){this.g.l=null,delete this.j,ip(this.g),delete this.g,Ci.aa.N.call(this)};function c1(v){Qt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var P=v.__sm__;if(P){e:{for(const F in P){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,P=P!==null&&v in P?P[v]:void 0),this.data=P}else this.data=v}S(c1,Qt);function u1(){Lt.call(this),this.status=1}S(u1,Lt);function Ic(v){this.g=v}S(Ic,l1),Ic.prototype.ua=function(){it(this.g,"a")},Ic.prototype.ta=function(v){it(this.g,new c1(v))},Ic.prototype.sa=function(v){it(this.g,new u1)},Ic.prototype.ra=function(){it(this.g,"b")},R0.prototype.createWebChannel=R0.prototype.g,Ci.prototype.send=Ci.prototype.o,Ci.prototype.open=Ci.prototype.m,Ci.prototype.close=Ci.prototype.close,SF=function(){return new R0},wF=function(){return tn()},bF=bt,bT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,lv=_r,rn.COMPLETE="complete",vF=rn,cn.EventType=yr,yr.OPEN="a",yr.CLOSE="b",yr.ERROR="c",yr.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,pm=cn,Hn.prototype.listenOnce=Hn.prototype.L,Hn.prototype.getLastError=Hn.prototype.Ka,Hn.prototype.getLastErrorCode=Hn.prototype.Ba,Hn.prototype.getStatus=Hn.prototype.Z,Hn.prototype.getResponseJson=Hn.prototype.Oa,Hn.prototype.getResponseText=Hn.prototype.oa,Hn.prototype.send=Hn.prototype.ea,Hn.prototype.setWithCredentials=Hn.prototype.Ha,yF=Hn}).apply(typeof gy<"u"?gy:typeof self<"u"?self:typeof window<"u"?window:{});const hI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new qA("@firebase/firestore");function yh(){return Qd.logLevel}function st(t,...e){if(Qd.logLevel<=Br.DEBUG){const r=e.map(a8);Qd.debug(`Firestore (${Mf}): ${t}`,...r)}}function wa(t,...e){if(Qd.logLevel<=Br.ERROR){const r=e.map(a8);Qd.error(`Firestore (${Mf}): ${t}`,...r)}}function Xm(t,...e){if(Qd.logLevel<=Br.WARN){const r=e.map(a8);Qd.warn(`Firestore (${Mf}): ${t}`,...r)}}function a8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t="Unexpected state"){const e=`FIRESTORE (${Mf}) INTERNAL ASSERTION FAILED: `+t;throw wa(e),new Error(e)}function Bt(t,e){t||Et()}function Mt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Ro{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pre{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(ji.UNAUTHENTICATED)))}shutdown(){}}class Bre{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Bt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new ko;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ko,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ko)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Bt(typeof n.accessToken=="string"),new Pre(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string"),new ji(e)}}class $re{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new $re(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(ji.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ure{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Bt(this.o===void 0);const n=i=>{i.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,st("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Bt(typeof r.token=="string"),this.R=r.token,new Ure(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Fre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function mr(t,e){return t<e?-1:t>e?1:0}function Fh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function _F(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ft(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ft(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ft(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return sa.fromMillis(Date.now())}static fromDate(e){return sa.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new sa(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?mr(this.nanoseconds,e.nanoseconds):mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new sa(0,0))}static max(){return new Vt(new sa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,r,n){r===void 0?r=0:r>e.length&&Et(),n===void 0?n=e.length-r:n>e.length-r&&Et(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Qm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Qm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Yr extends Qm{construct(e,r,n){return new Yr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ft(We.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Yr(r)}static emptyPath(){return new Yr([])}}const qre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ia extends Qm{construct(e,r,n){return new ia(e,r,n)}static isValidIdentifier(e){return qre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ia.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ia(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new ft(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new ft(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ft(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new ft(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ia(r)}static emptyPath(){return new ia([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.path=e}static fromPath(e){return new wt(Yr.fromString(e))}static fromName(e){return new wt(Yr.fromString(e).popFirst(5))}static empty(){return new wt(Yr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Yr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new Yr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function wT(t){return t.fields.find((e=>e.kind===2))}function Ad(t){return t.fields.filter((e=>e.kind!==2))}Iv.UNKNOWN_ID=-1;class cv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ym{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ym(0,Ds.min())}}function TF(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Vt.fromTimestamp(n===1e9?new sa(r+1,0):new sa(r,n));return new Ds(a,wt.empty(),e)}function jF(t){return new Ds(t.readTime,t.key,-1)}class Ds{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ds(Vt.min(),wt.empty(),-1)}static max(){return new Ds(Vt.max(),wt.empty(),-1)}}function i8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=wt.comparator(t.documentKey,e.documentKey),r!==0?r:mr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t){if(t.code!==We.FAILED_PRECONDITION||t.message!==AF)throw t;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ie(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ie?r:Ie.resolve(r)}catch(r){return Ie.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ie.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ie.reject(r)}static resolve(e){return new Ie(((r,n)=>{r(e)}))}static reject(e){return new Ie(((r,n)=>{n(e)}))}static waitFor(e){return new Ie(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=Ie.resolve(!1);for(const n of e)r=r.next((a=>a?Ie.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Ie(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{o[h]=p,++c,c===i&&n(o)}),(p=>a(p)))}}))}static doWhile(e,r){return new Ie(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ko,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Nm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=s8(n.target.error);this.V.reject(new Nm(e,a))}}static open(e,r,n,a){try{return new _2(r,e.transaction(a,n))}catch(i){throw new Nm(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(st("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Gre(r)}}class Au{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Au.S(Wa())===12.2&&wa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return st("SimpleDb","Removing database:",e),Cd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!MV())return!1;if(Au.v())return!0;const e=Wa(),r=Au.S(e),n=0<r&&r<10,a=kF(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(st("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new Nm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new ft(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new ft(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Nm(e,o))},a.onupgradeneeded=i=>{st("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{st("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=_2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Ie.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(st("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kF(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Hre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Cd(this.B.delete())}}class Nm extends ft{constructor(e,r){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Vu(t){return t.name==="IndexedDbTransactionError"}class Gre{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(st("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(st("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cd(n)}add(e){return st("SimpleDb","ADD",this.store.name,e,e),Cd(this.store.add(e))}get(e){return Cd(this.store.get(e)).next((r=>(r===void 0&&(r=null),st("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return st("SimpleDb","DELETE",this.store.name,e),Cd(this.store.delete(e))}count(){return st("SimpleDb","COUNT",this.store.name),Cd(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Ie(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ie(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){st("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ie(((n,a)=>{r.onerror=i=>{const o=s8(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new Ie(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new Hre(c),h=r(c.primaryKey,c.value,d);if(h instanceof Ie){const p=h.catch((m=>(d.done(),Ie.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Ie.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Cd(t){return new Ie(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=s8(n.target.error);r(a)}}))}let fI=!1;function s8(t){const e=Au.S(Wa());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fI||(fI=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Wre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){st("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{st("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Vu(r)?st("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Uu(r)}await this.X(6e4)}))}}class Kre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Ie.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return st("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(st("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=jF(i);i8(o,n)>0&&(n=o)})),new Ds(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ns.oe=-1;function hx(t){return t==null}function Jm(t){return t===0&&1/t==-1/0}function CF(t){return typeof t=="number"&&Number.isInteger(t)&&!Jm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=pI(e)),e=Xre(t.get(r),e);return pI(e)}function Xre(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function pI(t){return t+""}function Xo(t){const e=t.length;if(Bt(e>=2),e===2)return Bt(t.charAt(0)===""&&t.charAt(1)===""),Yr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&Et(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:Et()}i=o+2}return new Yr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){return[t,Bi(e)]}function OF(t,e,r){return[t,Bi(e),r]}const Qre={},Yre=["prefixPath","collectionGroup","readTime","documentId"],Jre=["prefixPath","collectionGroup","documentId"],Zre=["collectionGroup","readTime","prefixPath","documentId"],ene=["canonicalId","targetId"],tne=["targetId","path"],rne=["path","targetId"],nne=["collectionId","parent"],ane=["indexId","uid"],ine=["uid","sequenceNumber"],sne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],one=["indexId","uid","orderedDocumentKey"],lne=["userId","collectionPath","documentId"],cne=["userId","collectionPath","largestBatchId"],une=["userId","collectionGroup","largestBatchId"],IF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],dne=[...IF,"documentOverlays"],RF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],MF=RF,o8=[...MF,"indexConfiguration","indexState","indexEntries"],hne=o8,fne=[...o8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends EF{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Xa(t,e){const r=Mt(t);return Au.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function b0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function DF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,r){this.comparator=e,this.root=r||pi.EMPTY}insert(e,r){return new qn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xy(this.root,e,this.comparator,!1)}getReverseIterator(){return new xy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xy(this.root,e,this.comparator,!0)}}class xy{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??pi.RED,this.left=a??pi.EMPTY,this.right=i??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new pi(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return pi.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1;pi.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(e,r,n,a,i){return this}insert(e,r,n){return new pi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new xI(this.data.getIterator())}getIteratorFrom(e){return new xI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new In(this.comparator);return r.data=e,r}}class xI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lh(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.fields=e,e.sort(ia.comparator)}static empty(){return new as([])}unionWith(e){let r=new In(ia.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new as(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Fh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new PF("Invalid base64 string: "+i):i}})(e);return new Ta(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new Ta(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ta.EMPTY_BYTE_STRING=new Ta("");const pne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(t){if(Bt(!!t),typeof t=="string"){let e=0;const r=pne.exec(t);if(Bt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Jn(t.seconds),nanos:Jn(t.nanos)}}function Jn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mu(t){return typeof t=="string"?Ta.fromBase64String(t):Ta.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function c8(t){const e=t.mapValue.fields.__previous_value__;return l8(e)?c8(e):e}function Zm(t){const e=uc(t.mapValue.fields.__local_write_time__.timestampValue);return new sa(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Yd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Yd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Yd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dv={nullValue:"NULL_VALUE"};function Jd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l8(t)?4:LF(t)?9007199254740991:T2(t)?10:11:Et()}function ol(t,e){if(t===e)return!0;const r=Jd(t);if(r!==Jd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zm(t).isEqual(Zm(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=uc(a.timestampValue),c=uc(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Mu(a.bytesValue).isEqual(Mu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Jn(a.geoPointValue.latitude)===Jn(i.geoPointValue.latitude)&&Jn(a.geoPointValue.longitude)===Jn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Jn(a.integerValue)===Jn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Jn(a.doubleValue),c=Jn(i.doubleValue);return o===c?Jm(o)===Jm(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Fh(t.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(gI(o)!==gI(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!ol(o[d],c[d])))return!1;return!0})(t,e);default:return Et()}}function eg(t,e){return(t.values||[]).find((r=>ol(r,e)))!==void 0}function Du(t,e){if(t===e)return 0;const r=Jd(t),n=Jd(e);if(r!==n)return mr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return mr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Jn(i.integerValue||i.doubleValue),d=Jn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return yI(t.timestampValue,e.timestampValue);case 4:return yI(Zm(t),Zm(e));case 5:return mr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Mu(i),d=Mu(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=mr(c[h],d[h]);if(p!==0)return p}return mr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=mr(Jn(i.latitude),Jn(o.latitude));return c!==0?c:mr(Jn(i.longitude),Jn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return vI(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,p;const m=i.fields||{},x=o.fields||{},y=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=(d=x.value)===null||d===void 0?void 0:d.arrayValue,w=mr(((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0,((p=S==null?void 0:S.values)===null||p===void 0?void 0:p.length)||0);return w!==0?w:vI(y,S)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===gu.mapValue&&o===gu.mapValue)return 0;if(i===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const x=mr(d[m],p[m]);if(x!==0)return x;const y=Du(c[d[m]],h[p[m]]);if(y!==0)return y}return mr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Et()}}function yI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return mr(t,e);const r=uc(t),n=uc(e),a=mr(r.seconds,n.seconds);return a!==0?a:mr(r.nanos,n.nanos)}function vI(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Du(r[a],n[a]);if(i)return i}return mr(r.length,n.length)}function qh(t){return NT(t)}function NT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=uc(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Mu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return wt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=NT(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${NT(r.fields[o])}`;return a+"}"})(t.mapValue):Et()}function tg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _T(t){return!!t&&"integerValue"in t}function rg(t){return!!t&&"arrayValue"in t}function bI(t){return!!t&&"nullValue"in t}function wI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hv(t){return!!t&&"mapValue"in t}function T2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function _m(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return b0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=_m(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=_m(t.arrayValue.values[r]);return e}return Object.assign({},t)}function LF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const BF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function gne(t){return"nullValue"in t?dv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?tg(Yd.empty(),wt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?T2(t)?BF:{mapValue:{}}:Et()}function xne(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?tg(Yd.empty(),wt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?BF:"mapValue"in t?T2(t)?{mapValue:{}}:gu:Et()}function SI(t,e){const r=Du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function NI(t,e){const r=Du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!hv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=_m(r)}setAll(e){let r=ia.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=_m(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());hv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];hv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){b0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new gi(_m(this.value))}}function $F(t){const e=[];return b0(t.fields,((r,n)=>{const a=new ia([r]);if(hv(n)){const i=$F(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new as(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Zn(e,0,Vt.min(),Vt.min(),Vt.min(),gi.empty(),0)}static newFoundDocument(e,r,n,a){return new Zn(e,1,r,Vt.min(),n,a,0)}static newNoDocument(e,r){return new Zn(e,2,r,Vt.min(),Vt.min(),gi.empty(),0)}static newUnknownDocument(e,r){return new Zn(e,3,r,Vt.min(),Vt.min(),gi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,r){this.position=e,this.inclusive=r}}function _I(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=wt.comparator(wt.fromName(o.referenceValue),r.key):n=Du(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function TI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ol(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,r="asc"){this.field=e,this.dir=r}}function yne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zF=class{};class $r extends zF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new vne(e,r,n):r==="array-contains"?new Sne(e,n):r==="in"?new GF(e,n):r==="not-in"?new Nne(e,n):r==="array-contains-any"?new _ne(e,n):new $r(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new bne(e,n):new wne(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Du(r,this.value)):r!==null&&Jd(this.value)===Jd(r)&&this.matchesComparison(Du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends zF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Nn(e,r)}matches(e){return Gh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gh(t){return t.op==="and"}function TT(t){return t.op==="or"}function u8(t){return UF(t)&&Gh(t)}function UF(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function jT(t){if(t instanceof $r)return t.field.canonicalString()+t.op.toString()+qh(t.value);if(u8(t))return t.filters.map((e=>jT(e))).join(",");{const e=t.filters.map((r=>jT(r))).join(",");return`${t.op}(${e})`}}function VF(t,e){return t instanceof $r?(function(n,a){return a instanceof $r&&n.op===a.op&&n.field.isEqual(a.field)&&ol(n.value,a.value)})(t,e):t instanceof Nn?(function(n,a){return a instanceof Nn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&VF(o,a.filters[c])),!0):!1})(t,e):void Et()}function FF(t,e){const r=t.filters.concat(e);return Nn.create(r,t.op)}function qF(t){return t instanceof $r?(function(r){return`${r.field.canonicalString()} ${r.op} ${qh(r.value)}`})(t):t instanceof Nn?(function(r){return r.op.toString()+" {"+r.getFilters().map(qF).join(" ,")+"}"})(t):"Filter"}class vne extends $r{constructor(e,r,n){super(e,r,n),this.key=wt.fromName(n.referenceValue)}matches(e){const r=wt.comparator(e.key,this.key);return this.matchesComparison(r)}}class bne extends $r{constructor(e,r){super(e,"in",r),this.keys=HF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class wne extends $r{constructor(e,r){super(e,"not-in",r),this.keys=HF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function HF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>wt.fromName(n.referenceValue)))}class Sne extends $r{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return rg(r)&&eg(r.arrayValue,this.value)}}class GF extends $r{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&eg(this.value.arrayValue,r)}}class Nne extends $r{constructor(e,r){super(e,"not-in",r)}matches(e){if(eg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!eg(this.value.arrayValue,r)}}class _ne extends $r{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!rg(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>eg(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function AT(t,e=null,r=[],n=[],a=null,i=null,o=null){return new Tne(t,e,r,n,a,i,o)}function Zd(t){const e=Mt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>jT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),hx(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>qh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>qh(n))).join(",")),e.ue=r}return e.ue}function fx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!yne(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!VF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TI(t.startAt,e.startAt)&&TI(t.endAt,e.endAt)}function Rv(t){return wt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Mv(t,e){return t.filters.filter((r=>r instanceof $r&&r.field.isEqual(e)))}function jI(t,e,r){let n=dv,a=!0;for(const i of Mv(t,e)){let o=dv,c=!0;switch(i.op){case"<":case"<=":o=gne(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=dv}SI({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];SI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function AI(t,e,r){let n=gu,a=!0;for(const i of Mv(t,e)){let o=gu,c=!0;switch(i.op){case">=":case">":o=xne(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=gu}NI({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];NI({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WF(t,e,r,n,a,i,o,c){return new Df(t,e,r,n,a,i,o,c)}function px(t){return new Df(t)}function EI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KF(t){return t.collectionGroup!==null}function Tm(t){const e=Mt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new In(ia.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ng(i,n))})),r.has(ia.keyField().canonicalString())||e.ce.push(new ng(ia.keyField(),n))}return e.ce}function Is(t){const e=Mt(t);return e.le||(e.le=jne(e,Tm(t))),e.le}function jne(t,e){if(t.limitType==="F")return AT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new ng(a.field,i)}));const r=t.endAt?new Hh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Hh(t.startAt.position,t.startAt.inclusive):null;return AT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function ET(t,e){const r=t.filters.concat([e]);return new Df(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Dv(t,e,r){return new Df(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function j2(t,e){return fx(Is(t),Is(e))&&t.limitType===e.limitType}function XF(t){return`${Zd(Is(t))}|lt:${t.limitType}`}function vh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>qF(a))).join(", ")}]`),hx(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>qh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>qh(a))).join(",")),`Target(${n})`})(Is(t))}; limitType=${t.limitType})`}function mx(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):wt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of Tm(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=_I(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,Tm(n),a)||n.endAt&&!(function(o,c,d){const h=_I(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,Tm(n),a))})(t,e)}function QF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YF(t){return(e,r)=>{let n=!1;for(const a of Tm(t)){const i=Ane(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Ane(t,e,r){const n=t.field.isKeyField()?wt.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Du(d,h):Et()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){b0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return DF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ene=new qn(wt.comparator);function Cs(){return Ene}const JF=new qn(wt.comparator);function mm(...t){let e=JF;for(const r of t)e=e.insert(r.key,r);return e}function ZF(t){let e=JF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Qo(){return jm()}function eq(){return jm()}function jm(){return new Fu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const kne=new qn(wt.comparator),Cne=new In(wt.comparator);function Er(...t){let e=Cne;for(const r of t)e=e.add(r);return e}const One=new In(mr);function d8(){return One}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jm(e)?"-0":e}}function tq(t){return{integerValue:""+t}}function rq(t,e){return CF(e)?tq(e):h8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this._=void 0}}function Ine(t,e,r){return t instanceof ag?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&l8(i)&&(i=c8(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof e0?aq(t,e):t instanceof Wh?iq(t,e):(function(a,i){const o=nq(a,i),c=kI(o)+kI(a.Pe);return _T(o)&&_T(a.Pe)?tq(c):h8(a.serializer,c)})(t,e)}function Rne(t,e,r){return t instanceof e0?aq(t,e):t instanceof Wh?iq(t,e):r}function nq(t,e){return t instanceof Kh?(function(n){return _T(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class ag extends A2{}class e0 extends A2{constructor(e){super(),this.elements=e}}function aq(t,e){const r=sq(e);for(const n of t.elements)r.some((a=>ol(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Wh extends A2{constructor(e){super(),this.elements=e}}function iq(t,e){let r=sq(e);for(const n of t.elements)r=r.filter((a=>!ol(a,n)));return{arrayValue:{values:r}}}class Kh extends A2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function kI(t){return Jn(t.integerValue||t.doubleValue)}function sq(t){return rg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,r){this.field=e,this.transform=r}}function Mne(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof e0&&a instanceof e0||n instanceof Wh&&a instanceof Wh?Fh(n.elements,a.elements,ol):n instanceof Kh&&a instanceof Kh?ol(n.Pe,a.Pe):n instanceof ag&&a instanceof ag})(t.transform,e.transform)}class Dne{constructor(e,r){this.version=e,this.transformResults=r}}class Sa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Sa}static exists(e){return new Sa(void 0,e)}static updateTime(e){return new Sa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class E2{}function oq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gx(t.key,Sa.none()):new Pf(t.key,t.data,Sa.none());{const r=t.data,n=gi.empty();let a=new In(ia.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new bc(t.key,n,new as(a.toArray()),Sa.none())}}function Pne(t,e,r){t instanceof Pf?(function(a,i,o){const c=a.value.clone(),d=OI(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof bc?(function(a,i,o){if(!fv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=OI(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(lq(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Am(t,e,r,n){return t instanceof Pf?(function(i,o,c,d){if(!fv(i.precondition,o))return c;const h=i.value.clone(),p=II(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof bc?(function(i,o,c,d){if(!fv(i.precondition,o))return c;const h=II(i.fieldTransforms,d,o),p=o.data;return p.setAll(lq(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,o,c){return fv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function Lne(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=nq(n.transform,a||null);i!=null&&(r===null&&(r=gi.empty()),r.set(n.field,i))}return r||null}function CI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Fh(n,a,((i,o)=>Mne(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pf extends E2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class bc extends E2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lq(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function OI(t,e,r){const n=new Map;Bt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,Rne(o,c,r[a]))}return n}function II(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,Ine(i,o,e))}return n}class gx extends E2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p8 extends E2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Pne(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Am(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Am(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=eq();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=oq(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Vt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Er())}isEqual(e){return this.batchId===e.batchId&&Fh(this.mutations,e.mutations,((r,n)=>CI(r,n)))&&Fh(this.baseMutations,e.baseMutations,((r,n)=>CI(r,n)))}}class g8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Bt(e.mutations.length===n.length);let a=(function(){return kne})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new g8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ia,qr;function cq(t){switch(t){default:return Et();case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0}}function uq(t){if(t===void 0)return wa("GRPC error has no .code"),We.UNKNOWN;switch(t){case Ia.OK:return We.OK;case Ia.CANCELLED:return We.CANCELLED;case Ia.UNKNOWN:return We.UNKNOWN;case Ia.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case Ia.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case Ia.INTERNAL:return We.INTERNAL;case Ia.UNAVAILABLE:return We.UNAVAILABLE;case Ia.UNAUTHENTICATED:return We.UNAUTHENTICATED;case Ia.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case Ia.NOT_FOUND:return We.NOT_FOUND;case Ia.ALREADY_EXISTS:return We.ALREADY_EXISTS;case Ia.PERMISSION_DENIED:return We.PERMISSION_DENIED;case Ia.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case Ia.ABORTED:return We.ABORTED;case Ia.OUT_OF_RANGE:return We.OUT_OF_RANGE;case Ia.UNIMPLEMENTED:return We.UNIMPLEMENTED;case Ia.DATA_LOSS:return We.DATA_LOSS;default:return Et()}}(qr=Ia||(Ia={}))[qr.OK=0]="OK",qr[qr.CANCELLED=1]="CANCELLED",qr[qr.UNKNOWN=2]="UNKNOWN",qr[qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qr[qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qr[qr.NOT_FOUND=5]="NOT_FOUND",qr[qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",qr[qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",qr[qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",qr[qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qr[qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qr[qr.ABORTED=10]="ABORTED",qr[qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",qr[qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",qr[qr.INTERNAL=13]="INTERNAL",qr[qr.UNAVAILABLE=14]="UNAVAILABLE",qr[qr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zne=new qd([4294967295,4294967295],0);function RI(t){const e=$ne().encode(t),r=new xF;return r.update(e),new Uint8Array(r.digest())}function MI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new qd([r,n],0),new qd([a,i],0)]}class y8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new gm(`Invalid padding: ${r}`);if(n<0)throw new gm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new gm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new gm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=qd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(qd.fromNumber(n)));return a.compare(zne)===1&&(a=new qd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=RI(e),[n,a]=MI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new y8(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=RI(e),[n,a]=MI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class gm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,yx.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new xx(Vt.min(),a,new qn(mr),Cs(),Er())}}class yx{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new yx(n,r,Er(),Er(),Er())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class dq{constructor(e,r){this.targetId=e,this.me=r}}class hq{constructor(e,r,n=Ta.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class DI{constructor(){this.fe=0,this.ge=LI(),this.pe=Ta.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Er(),r=Er(),n=Er();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Et()}})),new yx(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=LI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Une{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cs(),this.qe=PI(),this.Qe=new qn(mr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Et()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(Rv(i))if(n===0){const o=new wt(i.path);this.Ue(r,o,Zn.newNoDocument(o,Vt.min()))}else Bt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=Mu(n).toUint8Array()}catch(d){if(d instanceof PF)return Xm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new y8(o,a,i)}catch(d){return Xm(d instanceof gm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Rv(c.target)){const d=new wt(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,Zn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=Er();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new xx(e,r,this.Qe,this.ke,n);return this.ke=Cs(),this.qe=PI(),this.Qe=new qn(mr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new DI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new In(mr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||st("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new DI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function PI(){return new qn(wt.comparator)}function LI(){return new qn(wt.comparator)}const Vne={asc:"ASCENDING",desc:"DESCENDING"},Fne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qne={and:"AND",or:"OR"};class Hne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function kT(t,e){return t.useProto3Json||hx(e)?e:{value:e}}function Xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Gne(t,e){return Xh(t,e.toTimestamp())}function ai(t){return Bt(!!t),Vt.fromTimestamp((function(r){const n=uc(r);return new sa(n.seconds,n.nanos)})(t))}function v8(t,e){return CT(t,e).canonicalString()}function CT(t,e){const r=(function(a){return new Yr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function pq(t){const e=Yr.fromString(t);return Bt(Nq(e)),e}function ig(t,e){return v8(t.databaseId,e.path)}function ec(t,e){const r=pq(e);if(r.get(1)!==t.databaseId.projectId)throw new ft(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ft(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new wt(xq(r))}function mq(t,e){return v8(t.databaseId,e)}function gq(t){const e=pq(t);return e.length===4?Yr.emptyPath():xq(e)}function OT(t){return new Yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xq(t){return Bt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function BI(t,e,r){return{name:ig(t,e),fields:r.value.mapValue.fields}}function Wne(t,e,r){const n=ec(t,e.name),a=ai(e.updateTime),i=e.createTime?ai(e.createTime):Vt.min(),o=new gi({mapValue:{fields:e.fields}}),c=Zn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Kne(t,e){return"found"in e?(function(n,a){Bt(!!a.found),a.found.name,a.found.updateTime;const i=ec(n,a.found.name),o=ai(a.found.updateTime),c=a.found.createTime?ai(a.found.createTime):Vt.min(),d=new gi({mapValue:{fields:a.found.fields}});return Zn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Bt(!!a.missing),Bt(!!a.readTime);const i=ec(n,a.missing),o=ai(a.readTime);return Zn.newNoDocument(i,o)})(t,e):Et()}function Xne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Et()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Bt(p===void 0||typeof p=="string"),Ta.fromBase64String(p||"")):(Bt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ta.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?We.UNKNOWN:uq(h.code);return new ft(p,h.message||"")})(o);r=new hq(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ec(t,n.document.name),i=ai(n.document.updateTime),o=n.document.createTime?ai(n.document.createTime):Vt.min(),c=new gi({mapValue:{fields:n.document.fields}}),d=Zn.newFoundDocument(a,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new pv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ec(t,n.document),i=n.readTime?ai(n.readTime):Vt.min(),o=Zn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new pv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ec(t,n.document),i=n.removedTargetIds||[];r=new pv([],i,a,null)}else{if(!("filter"in e))return Et();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new Bne(a,i),c=n.targetId;r=new dq(c,o)}}return r}function sg(t,e){let r;if(e instanceof Pf)r={update:BI(t,e.key,e.value)};else if(e instanceof gx)r={delete:ig(t,e.key)};else if(e instanceof bc)r={update:BI(t,e.key,e.data),updateMask:tae(e.fieldMask)};else{if(!(e instanceof p8))return Et();r={verify:ig(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof ag)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof e0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Wh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Kh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Et()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:Gne(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Et()})(t,e.precondition)),r}function IT(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?Sa.updateTime(ai(i.updateTime)):i.exists!==void 0?Sa.exists(i.exists):Sa.none()})(e.currentDocument):Sa.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Bt(c.setToServerValue==="REQUEST_TIME"),d=new ag;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new e0(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Wh(p)}else"increment"in c?d=new Kh(o,c.increment):Et();const h=ia.fromServerFormat(c.fieldPath);return new f8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=ec(t,e.update.name),i=new gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new as(h.map((p=>ia.fromServerFormat(p))))})(e.updateMask);return new bc(a,i,o,r,n)}return new Pf(a,i,r,n)}if(e.delete){const a=ec(t,e.delete);return new gx(a,r)}if(e.verify){const a=ec(t,e.verify);return new p8(a,r)}return Et()}function Qne(t,e){return t&&t.length>0?(Bt(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?ai(a.updateTime):ai(i);return o.isEqual(Vt.min())&&(o=ai(i)),new Dne(o,a.transformResults||[])})(r,e)))):[]}function yq(t,e){return{documents:[mq(t,e.path)]}}function vq(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=mq(t,a);const i=(function(h){if(h.length!==0)return Sq(Nn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:bh(x.field),direction:Jne(x.dir)}})(p)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=kT(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function bq(t){let e=gq(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Bt(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const x=wq(m);return x instanceof Nn&&u8(x)?x.getFilters():[x]})(r.where));let o=[];r.orderBy&&(o=(function(m){return m.map((x=>(function(S){return new ng(wh(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(x)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let x;return x=typeof m=="object"?m.value:m,hx(x)?null:x})(r.limit));let d=null;r.startAt&&(d=(function(m){const x=!!m.before,y=m.values||[];return new Hh(y,x)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const x=!m.before,y=m.values||[];return new Hh(y,x)})(r.endAt)),WF(e,a,o,i,c,"F",d,h)}function Yne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wq(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=wh(r.unaryFilter.field);return $r.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=wh(r.unaryFilter.field);return $r.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wh(r.unaryFilter.field);return $r.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wh(r.unaryFilter.field);return $r.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Et()}})(t):t.fieldFilter!==void 0?(function(r){return $r.create(wh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Nn.create(r.compositeFilter.filters.map((n=>wq(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et()}})(r.compositeFilter.op))})(t):Et()}function Jne(t){return Vne[t]}function Zne(t){return Fne[t]}function eae(t){return qne[t]}function bh(t){return{fieldPath:t.canonicalString()}}function wh(t){return ia.fromServerFormat(t.fieldPath)}function Sq(t){return t instanceof $r?(function(r){if(r.op==="=="){if(wI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NAN"}};if(bI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(wI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NOT_NAN"}};if(bI(r.value))return{unaryFilter:{field:bh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bh(r.field),op:Zne(r.op),value:r.value}}})(t):t instanceof Nn?(function(r){const n=r.getFilters().map((a=>Sq(a)));return n.length===1?n[0]:{compositeFilter:{op:eae(r.op),filters:n}}})(t):Et()}function tae(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function Nq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,r,n,a,i=Vt.min(),o=Vt.min(),c=Ta.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e){this.ct=e}}function rae(t,e){let r;if(e.document)r=Wne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=wt.fromSegments(e.noDocument.path),a=r0(e.noDocument.readTime);r=Zn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et();{const n=wt.fromSegments(e.unknownDocument.path),a=r0(e.unknownDocument.version);r=Zn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new sa(a[0],a[1]);return Vt.fromTimestamp(i)})(e.readTime)),r}function $I(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Pv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:ig(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Xh(i,o.version.toTimestamp()),createTime:Xh(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:t0(e.version)};else{if(!e.isUnknownDocument())return Et();n.unknownDocument={path:r.path.toArray(),version:t0(e.version)}}return n}function Pv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function t0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function r0(t){const e=new sa(t.seconds,t.nanoseconds);return Vt.fromTimestamp(e)}function Od(t,e){const r=(e.baseMutations||[]).map((i=>IT(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>IT(t.ct,i))),a=sa.fromMillis(e.localWriteTimeMs);return new m8(e.batchId,a,r,n)}function xm(t){const e=r0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?r0(t.lastLimboFreeSnapshotVersion):Vt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Bt(i.documents.length===1),Is(px(gq(i.documents[0])))})(t.query):(function(i){return Is(bq(i))})(t.query),new Ql(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ta.fromBase64String(t.resumeToken))}function Tq(t,e){const r=t0(e.snapshotVersion),n=t0(e.lastLimboFreeSnapshotVersion);let a;a=Rv(e.target)?yq(t.ct,e.target):vq(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function jq(t){const e=bq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dv(e,e.limit,"L"):e}function o3(t,e){return new x8(e.largestBatchId,IT(t.ct,e.overlayMutation))}function zI(t,e){const r=e.path.lastSegment();return[t,Bi(e.path.popLast()),r]}function UI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:t0(n.readTime),documentKey:Bi(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{getBundleMetadata(e,r){return VI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:r0(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return VI(e).put((function(a){return{bundleId:a.id,createTime:t0(ai(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return FI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:jq(i.bundledQuery),readTime:r0(i.readTime)}})(n)}))}saveNamedQuery(e,r){return FI(e).put((function(a){return{name:a.name,readTime:t0(ai(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function VI(t){return Xa(t,"bundles")}function FI(t){return Xa(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new k2(e,n)}getOverlay(e,r){return Wp(e).get(zI(this.userId,r)).next((n=>n?o3(this.serializer,n):null))}getOverlays(e,r){const n=Qo();return Ie.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new x8(r,o);a.push(this.ht(e,c))})),Ie.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add(Bi(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Wp(e).j("collectionPathOverlayIndex",c))})),Ie.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Qo(),i=Bi(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Wp(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=o3(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Qo();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Wp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=o3(this.serializer,h);i.size()<a||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Wp(e).put((function(a,i,o){const[c,d,h]=zI(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:sg(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Wp(t){return Xa(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{Pt(e){return Xa(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?Ta.fromUint8Array(n):Ta.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Jn(e.integerValue));else if("doubleValue"in e){const n=Jn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Jm(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=uc(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Mu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?LF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):T2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Et()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Jn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),wt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Id.vt=new Id;function iae(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function qI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=iae(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class sae{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=qI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=qI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class oae{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class lae{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Kp{constructor(){this.jt=new sae,this.Ht=new oae(this.jt),this.Jt=new lae(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Rd(this.indexId,this.documentKey,this.arrayValue,n)}}function nu(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=HI(t.arrayValue,e.arrayValue),r!==0?r:(r=HI(t.directionalValue,e.directionalValue),r!==0?r:wt.comparator(t.documentKey,e.documentKey)))}function HI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.Xt=new In(((r,n)=>ia.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Bt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=wT(e);if(r!==void 0&&!this.sn(r))return!1;const n=Ad(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new In(ia.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new cv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new cv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new cv(n.field,n.dir==="asc"?0:1)));return new Iv(Iv.UNKNOWN_ID,this.collectionId,r,Ym.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aq(t){var e,r;if(Bt(t instanceof $r||t instanceof Nn),t instanceof $r){if(t instanceof GF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>$r.create(t.field,"==",i))))||[];return Nn.create(a,"or")}return t}const n=t.filters.map((a=>Aq(a)));return Nn.create(n,t.op)}function cae(t){if(t.getFilters().length===0)return[];const e=DT(Aq(t));return Bt(Eq(e)),RT(e)||MT(e)?[e]:e.getFilters()}function RT(t){return t instanceof $r}function MT(t){return t instanceof Nn&&u8(t)}function Eq(t){return RT(t)||MT(t)||(function(r){if(r instanceof Nn&&TT(r)){for(const n of r.getFilters())if(!RT(n)&&!MT(n))return!1;return!0}return!1})(t)}function DT(t){if(Bt(t instanceof $r||t instanceof Nn),t instanceof $r)return t;if(t.filters.length===1)return DT(t.filters[0]);const e=t.filters.map((n=>DT(n)));let r=Nn.create(e,t.op);return r=Lv(r),Eq(r)?r:(Bt(r instanceof Nn),Bt(Gh(r)),Bt(r.filters.length>1),r.filters.reduce(((n,a)=>b8(n,a))))}function b8(t,e){let r;return Bt(t instanceof $r||t instanceof Nn),Bt(e instanceof $r||e instanceof Nn),r=t instanceof $r?e instanceof $r?(function(a,i){return Nn.create([a,i],"and")})(t,e):WI(t,e):e instanceof $r?WI(e,t):(function(a,i){if(Bt(a.filters.length>0&&i.filters.length>0),Gh(a)&&Gh(i))return FF(a,i.getFilters());const o=TT(a)?a:i,c=TT(a)?i:a,d=o.filters.map((h=>b8(h,c)));return Nn.create(d,"or")})(t,e),Lv(r)}function WI(t,e){if(Gh(e))return FF(e,t.getFilters());{const r=e.filters.map((n=>b8(t,n)));return Nn.create(r,"or")}}function Lv(t){if(Bt(t instanceof $r||t instanceof Nn),t instanceof $r)return t;const e=t.getFilters();if(e.length===1)return Lv(e[0]);if(UF(t))return t;const r=e.map((a=>Lv(a))),n=[];return r.forEach((a=>{a instanceof $r?n.push(a):a instanceof Nn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:Nn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{constructor(){this.un=new w8}addToCollectionParentIndex(e,r){return this.un.add(r),Ie.resolve()}getCollectionParents(e,r){return Ie.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ie.resolve()}deleteFieldIndex(e,r){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,r){return Ie.resolve()}getDocumentsMatchingTarget(e,r){return Ie.resolve(null)}getIndexType(e,r){return Ie.resolve(0)}getFieldIndexes(e,r){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,r){return Ie.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,r){return Ie.resolve(Ds.min())}updateCollectionGroup(e,r,n){return Ie.resolve()}updateIndexEntries(e,r){return Ie.resolve()}}class w8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new In(Yr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new In(Yr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=new Uint8Array(0);class dae{constructor(e,r){this.databaseId=r,this.cn=new w8,this.ln=new Fu((n=>Zd(n)),((n,a)=>fx(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Bi(a)};return KI(e).put(i)}return Ie.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[_F(r),""],!1,!0);return KI(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Xo(o.parent))}return n}))}addFieldIndex(e,r){const n=Xp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=uh(e);return i.next((c=>{o.put(UI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Xp(e),a=uh(e),i=ch(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Xp(e),n=ch(e),a=uh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Ie.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new GI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=ch(e);let a=!0;const i=new Map;return Ie.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=Er();const c=[];return Ie.forEach(i,((d,h)=>{st("IndexedDbIndexManager",`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Zd(r)}`);const p=(function(O,L){const I=wT(L);if(I===void 0)return null;for(const k of Mv(O,I.fieldPath))switch(k.op){case"array-contains-any":return k.value.arrayValue.values||[];case"array-contains":return[k.value]}return null})(h,d),m=(function(O,L){const I=new Map;for(const k of Ad(L))for(const E of Mv(O,k.fieldPath))switch(E.op){case"==":case"in":I.set(k.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return I.set(k.fieldPath.canonicalString(),E.value),Array.from(I.values())}return null})(h,d),x=(function(O,L){const I=[];let k=!0;for(const E of Ad(L)){const j=E.kind===0?jI(O,E.fieldPath,O.startAt):AI(O,E.fieldPath,O.startAt);I.push(j.value),k&&(k=j.inclusive)}return new Hh(I,k)})(h,d),y=(function(O,L){const I=[];let k=!0;for(const E of Ad(L)){const j=E.kind===0?AI(O,E.fieldPath,O.endAt):jI(O,E.fieldPath,O.endAt);I.push(j.value),k&&(k=j.inclusive)}return new Hh(I,k)})(h,d),S=this.In(d,h,x),w=this.In(d,h,y),N=this.Tn(d,h,m),A=this.En(d.indexId,p,S,x.inclusive,w,y.inclusive,N);return Ie.forEach(A,(R=>n.G(R,r.limit).next((O=>{O.forEach((L=>{const I=wt.fromSegments(L.documentKey);o.has(I)||(o=o.add(I),c.push(I))}))}))))})).next((()=>c))}return Ie.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=cae(Nn.create(e.filters,"and")).map((n=>AT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const x=r?this.dn(r[m/h]):yy,y=this.An(e,x,n[m%h],a),S=this.Rn(e,x,i[m%h],o),w=c.map((N=>this.An(e,x,N,!0)));p.push(...this.createRange(y,S,w))}return p}An(e,r,n,a){const i=new Rd(e,wt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Rd(e,wt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new GI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Ie.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new In(ia.comparator),p=!1;for(const m of d.filters)for(const x of m.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Kp;for(const a of Ad(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);Id.vt.It(i,o)}return n.zt()}dn(e){const r=new Kp;return Id.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Kp;return Id.vt.It(tg(this.databaseId,r),n.Yt((function(i){const o=Ad(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Kp);let i=0;for(const o of Ad(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&rg(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);Id.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new Kp;d.seed(c.zt()),Id.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof $r&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Xp(e),a=uh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return Ie.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(p,m){const x=m?new Ym(m.sequenceNumber,new Ds(r0(m.readTime),new wt(Xo(m.documentKey)),m.largestBatchId)):Ym.empty(),y=p.fields.map((([S,w])=>new cv(ia.fromServerFormat(S),w)));return new Iv(p.indexId,p.collectionGroup,y,x)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:mr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Xp(e),i=uh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Ie.forEach(c,(d=>i.put(UI(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return Ie.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?Ie.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Ie.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Ie.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return ch(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return ch(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=ch(e);let i=new In(nu);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Rd(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new In(nu);const a=this.Vn(r,e);if(a==null)return n;const i=wT(r);if(i!=null){const o=e.data.field(i.fieldPath);if(rg(o))for(const c of o.arrayValue.values||[])n=n.add(new Rd(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Rd(r.indexId,e.key,yy,a));return n}bn(e,r,n,a,i){st("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,p,m,x){const y=d.getIterator(),S=h.getIterator();let w=lh(y),N=lh(S);for(;w||N;){let A=!1,R=!1;if(w&&N){const O=p(w,N);O<0?R=!0:O>0&&(A=!0)}else w!=null?R=!0:A=!0;A?(m(N),N=lh(S)):R?(x(w),w=lh(y)):(w=lh(y),N=lh(S))}})(a,i,nu,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),Ie.waitFor(o)}yn(e){let r=1;return uh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>nu(o,c))).filter(((o,c,d)=>!c||nu(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=nu(o,e),d=nu(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,yy,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,yy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return nu(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(XI)}getMinOffset(e,r){return Ie.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||Et())))).next(XI)}}function KI(t){return Xa(t,"collectionParents")}function ch(t){return Xa(t,"indexEntries")}function Xp(t){return Xa(t,"indexConfiguration")}function uh(t){return Xa(t,"indexState")}function XI(t){Bt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;i8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Ds(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Zi(e,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((p,m,x)=>(c++,x.delete())));i.push(d.next((()=>{Bt(c===1)})));const h=[];for(const p of r.mutations){const m=OF(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Ie.waitFor(i).next((()=>h))}function Bv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Et();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zi.DEFAULT_COLLECTION_PERCENTILE=10,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zi.DEFAULT=new Zi(41943040,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zi.DISABLED=new Zi(-1,0,0);class C2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Bt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new C2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return au(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=Sh(e),o=au(e);return o.add({}).next((c=>{Bt(typeof c=="number");const d=new m8(c,r,n,a),h=(function(y,S,w){const N=w.baseMutations.map((R=>sg(y.ct,R))),A=w.mutations.map((R=>sg(y.ct,R)));return{userId:S,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:N,mutations:A}})(this.serializer,this.userId,d),p=[];let m=new In(((x,y)=>mr(x.canonicalString(),y.canonicalString())));for(const x of a){const y=OF(this.userId,x.key.path,c);m=m.add(x.key.path.popLast()),p.push(o.put(h)),p.push(i.put(y,Qre))}return m.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Ie.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return au(e).get(r).next((n=>n?(Bt(n.userId===this.userId),Od(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Ie.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return au(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Bt(c.batchId>=n),i=Od(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return au(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return au(e).U("userMutationsIndex",r).next((n=>n.map((a=>Od(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=uv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return Sh(e).J({range:a},((o,c,d)=>{const[h,p,m]=o,x=Xo(p);if(h===this.userId&&r.path.isEqual(x))return au(e).get(m).next((y=>{if(!y)throw Et();Bt(y.userId===this.userId),i.push(Od(this.serializer,y))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new In(mr);const a=[];return r.forEach((i=>{const o=uv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=Sh(e).J({range:c},((h,p,m)=>{const[x,y,S]=h,w=Xo(y);x===this.userId&&i.path.isEqual(w)?n=n.add(S):m.done()}));a.push(d)})),Ie.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=uv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new In(mr);return Sh(e).J({range:o},((d,h,p)=>{const[m,x,y]=d,S=Xo(x);m===this.userId&&n.isPrefixOf(S)?S.length===a&&(c=c.add(y)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(au(e).get(i).next((o=>{if(o===null)throw Et();Bt(o.userId===this.userId),n.push(Od(this.serializer,o))})))})),Ie.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return kq(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Ie.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Ie.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return Sh(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Xo(i[1]);a.push(d)}else c.done()})).next((()=>{Bt(a.length===0)}))}))}containsKey(e,r){return Cq(e,this.userId,r)}Nn(e){return Oq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Cq(t,e,r){const n=uv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return Sh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,x]=c;p===e&&m===a&&(o=!0),h.done()})).next((()=>o))}function au(t){return Xa(t,"mutations")}function Sh(t){return Xa(t,"documentMutations")}function Oq(t){return Xa(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n0(0)}static kn(){return new n0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new n0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Vt.fromTimestamp(new sa(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>dh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Bt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return dh(e).J(((o,c)=>{const d=xm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Ie.waitFor(i))).next((()=>a))}forEachTarget(e,r){return dh(e).J(((n,a)=>{const i=xm(a);r(i)}))}qn(e){return YI(e).get("targetGlobalKey").next((r=>(Bt(r!==null),r)))}Qn(e,r){return YI(e).put("targetGlobalKey",r)}Kn(e,r){return dh(e).put(Tq(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Zd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return dh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=xm(c);fx(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=hu(e);return r.forEach((o=>{const c=Bi(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),Ie.waitFor(a)}removeMatchingKeys(e,r,n){const a=hu(e);return Ie.forEach(r,(i=>{const o=Bi(i.path);return Ie.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=hu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=hu(e);let i=Er();return a.J({range:n,H:!0},((o,c,d)=>{const h=Xo(o[1]),p=new wt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Bi(r.path),a=IDBKeyRange.bound([n],[_F(n)],!1,!0);let i=0;return hu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return dh(e).get(r).next((n=>n?xm(n):null))}}function dh(t){return Xa(t,"targets")}function YI(t){return Xa(t,"targetGlobal")}function hu(t){return Xa(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI([t,e],[r,n]){const a=mr(t,r);return a===0?mr(e,n):a}class fae{constructor(e){this.Un=e,this.buffer=new In(JI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();JI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class pae{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){st("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Vu(r)?st("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Uu(r)}await this.Hn(3e5)}))}}class mae{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Ie.resolve(ns.oe);const n=new fae(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(QI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,o=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),yh()<=Br.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function gae(t,e){return new mae(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xae{constructor(e,r){this.db=e,this.garbageCollector=gae(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return vy(e,n)}removeReference(e,r,n){return vy(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return vy(e,r)}nr(e,r){return(function(a,i){let o=!1;return Oq(a).Y((c=>Cq(a,c,i).next((d=>(d&&(o=!0),Ie.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Vt.min()),hu(e).delete((function(m){return[0,Bi(m.path)]})(o)))))}));a.push(d)}})).next((()=>Ie.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return vy(e,r)}tr(e,r){const n=hu(e);let a,i=ns.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==ns.oe&&r(new wt(Xo(a)),i),i=h,a=d):i=ns.oe})).next((()=>{i!==ns.oe&&r(new wt(Xo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vy(t,e){return hu(t).put((function(n,a){return{targetId:0,path:Bi(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(){this.changes=new Fu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ie.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yae{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return yd(e).put(n)}removeEntry(e,r,n){return yd(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Pv(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Zn.newInvalidDocument(r);return yd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Zn.newInvalidDocument(r)};return yd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(r))},((a,i)=>{n={document:this.ir(r,i),size:Bv(i)}})).next((()=>n))}getEntries(e,r){let n=Cs();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=Cs(),a=new qn(wt.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,Bv(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Ie.resolve();let a=new In(tR);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Qp(a.first()),Qp(a.last())),o=a.getIterator();let c=o.getNext();return yd(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=wt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&tR(c,m)<0;)n(c,null),c=o.getNext();c&&c.isEqual(m)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.$(Qp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),Pv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Cs();for(const m of h){const x=this.ir(wt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);x.isFoundDocument()&&(mx(r,x)||a.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=Cs();const o=eR(r,n),c=eR(r,Ds.max());return yd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,p)=>{const m=this.ir(wt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new vae(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return ZI(e).get("remoteDocumentGlobalKey").next((r=>(Bt(!!r),r)))}rr(e,r){return ZI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=rae(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Vt.min())))return n}return Zn.newInvalidDocument(e)}}function Rq(t){return new yae(t)}class vae extends Iq{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Fu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new In(((i,o)=>mr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=$I(this.cr.serializer,o);a=a.add(i.path.popLast());const h=Bv(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=$I(this.cr.serializer,o.convertToNoDocument(Vt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Ie.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function ZI(t){return Xa(t,"remoteDocumentGlobal")}function yd(t){return Xa(t,"remoteDocumentsV14")}function Qp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eR(t,e){const r=e.documentKey.path.toArray();return[t,Pv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function tR(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=mr(r[i],n[i]),a)return a;return a=mr(r.length,n.length),a||(a=mr(r[r.length-2],n[n.length-2]),a||mr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&Am(n.mutation,a,as.empty(),sa.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Er()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Er()){const a=Qo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=mm();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Qo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Er())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=Cs();const o=jm(),c=(function(){return jm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof bc)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Am(p.mutation,h,p.mutation.getFieldMask(),sa.now())):o.set(h.key,as.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>o.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new bae(p,(m=o.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=jm();let a=new qn(((o,c)=>o-c)),i=Er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||as.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||Er()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=eq();p.forEach((x=>{if(!i.has(x)){const y=oq(r.get(x),n.get(x));y!==null&&m.set(x,y),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ie.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):KF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Ie.resolve(Qo());let c=-1,d=i;return o.next((h=>Ie.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Ie.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{d=d.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,Er()))).next((p=>({batchId:c,changes:ZF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new wt(r)).next((n=>{let a=mm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=mm();return this.indexManager.getCollectionParents(e,i).next((c=>Ie.forEach(c,(d=>{const h=(function(m,x){return new Df(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,x)=>{o=o.insert(m,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Zn.newInvalidDocument(p)))}));let c=mm();return o.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&Am(p.mutation,h,as.empty(),sa.now()),mx(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ie.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:ai(a.createTime)}})(r)),Ie.resolve()}getNamedQuery(e,r){return Ie.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:jq(a.bundledQuery),readTime:ai(a.readTime)}})(r)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(){this.overlays=new qn(wt.comparator),this.Ir=new Map}getOverlay(e,r){return Ie.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Qo();return Ie.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Ie.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Ie.resolve()}getOverlaysForCollection(e,r,n){const a=Qo(),i=r.length+1,o=new wt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Ie.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new qn(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Qo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Qo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Ie.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new x8(r,n));let i=this.Ir.get(r);i===void 0&&(i=Er(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nae{constructor(){this.sessionToken=Ta.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.Tr=new In(ti.Er),this.dr=new In(ti.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ti(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ti(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new wt(new Yr([])),n=new ti(r,e),a=new ti(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new wt(new Yr([])),n=new ti(r,e),a=new ti(r,e+1);let i=Er();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new ti(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ti{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return wt.comparator(e.key,r.key)||mr(e.wr,r.wr)}static Ar(e,r){return mr(e.wr,r.wr)||wt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ae{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new In(ti.Er)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new m8(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new ti(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,r){return Ie.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Ie.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ti(r,0),a=new ti(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),Ie.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new In(mr);return r.forEach((a=>{const i=new ti(a,0),o=new ti(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),Ie.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;wt.isDocumentKey(i)||(i=i.child(""));const o=new ti(new wt(i),0);let c=new In(mr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),Ie.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Bt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ie.forEach(r.mutations,(a=>{const i=new ti(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ti(r,0),a=this.br.firstAfterOrEqual(n);return Ie.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tae{constructor(e){this.Mr=e,this.docs=(function(){return new qn(wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ie.resolve(n?n.document.mutableCopy():Zn.newInvalidDocument(r))}getEntries(e,r){let n=Cs();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Zn.newInvalidDocument(a))})),Ie.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=Cs();const o=r.path,c=new wt(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||i8(jF(p),n)<=0||(a.has(p.key)||mx(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Ie.resolve(i)}getAllFromCollectionGroup(e,r,n,a){Et()}Or(e,r){return Ie.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new jae(this)}getSize(e){return Ie.resolve(this.size)}}class jae extends Iq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Ie.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aae{constructor(e){this.persistence=e,this.Nr=new Fu((r=>Zd(r)),fx),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new S8,this.targetCount=0,this.kr=n0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ie.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new n0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ie.resolve()}updateTargetData(e,r){return this.Kn(r),Ie.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Ie.waitFor(i).next((()=>a))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ie.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ie.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),Ie.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ie.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ie.resolve(n)}containsKey(e,r){return Ie.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ns(0),this.Kr=!1,this.Kr=!0,this.$r=new Nae,this.referenceDelegate=e(this),this.Ur=new Aae(this),this.indexManager=new uae,this.remoteDocumentCache=(function(a){return new Tae(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new _q(r),this.Gr=new wae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Sae,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new _ae(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){st("MemoryPersistence","Starting transaction:",e);const a=new Eae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Ie.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class Eae extends EF{constructor(e){super(),this.currentSequenceNumber=e}}class O2{constructor(e){this.persistence=e,this.Jr=new S8,this.Yr=null}static Zr(e){return new O2(e)}get Xr(){if(this.Yr)return this.Yr;throw Et()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ie.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ie.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ie.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.Xr,(n=>{const a=wt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Vt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ie.or([()=>Ie.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new _2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mI,{unique:!0}),d.createObjectStore("documentMutations")})(e),rR(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=Ie.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),rR(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mI,{unique:!0});const m=h.store("mutations"),x=p.map((y=>m.put(y)));return Ie.waitFor(x)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:lne});h.createIndex("collectionPathOverlayIndex",cne,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",une,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Yre});h.createIndex("documentKeyIndex",Jre),h.createIndex("collectionGroupIndex",Zre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:ane}).createIndex("sequenceNumberIndex",ine,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:sne}).createIndex("documentKeyIndex",one,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=Bv(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Ie.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>Ie.forEach(c,(d=>{Bt(d.userId===i.userId);const h=Od(this.serializer,d);return kq(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Yr(o),h=(function(m){return[0,Bi(m)]})(d);i.push(r.get(h).next((p=>p?Ie.resolve():(m=>r.put({targetId:0,path:Bi(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Ie.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:nne});const n=r.store("collectionParents"),a=new w8,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:Bi(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Yr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const p=Xo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=xm(a),o=Tq(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new wt(Yr.fromString(m.document.name).popFirst(5)):m.noDocument?wt.fromSegments(m.noDocument.path):m.unknownDocument?wt.fromSegments(m.unknownDocument.path):Et()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>Ie.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=Rq(this.serializer),i=new Dq(O2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:Er();Od(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Ie.forEach(c,((d,h)=>{const p=new ji(h),m=k2.lt(this.serializer,p),x=i.getIndexManager(p),y=C2.lt(p,this.serializer,x,i.referenceDelegate);return new Mq(a,y,m,x).recalculateAndSaveOverlaysForDocumentKeys(new ST(r,ns.oe),d).next()}))}))}}function rR(t){t.createObjectStore("targetDocuments",{keyPath:tne}).createIndex("documentTargetsIndex",rne,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ene,{unique:!0}),t.createObjectStore("targetGlobal")}const l3="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class N8{constructor(e,r,n,a,i,o,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=x=>Promise.resolve(),!N8.D())throw new ft(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xae(this,a),this.Ai=r+"main",this.serializer=new _q(d),this.Ri=new Au(this.Ai,this.hi,new kae(this.serializer)),this.$r=new aae,this.Ur=new hae(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rq(this.serializer),this.Gr=new nae,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&wa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(We.FAILED_PRECONDITION,l3);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new ns(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>by(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Vu(e))return st("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return st("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Yp(e).get("owner").next((r=>Ie.resolve(this.vi(r))))}Ci(e){return by(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Xa(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return Ie.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ie.resolve(!0):Yp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ft(We.FAILED_PRECONDITION,l3);return!1}}return!(!this.networkEnabled||!this.inForeground)||by(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&st("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new ST(e,ns.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>by(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return C2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dae(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return k2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){st("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?fne:d===16?hne:d===15?o8:d===14?MF:d===13?RF:d===12?dne:d===11?IF:void Et()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new ST(c,this.Qr?this.Qr.next():ns.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw wa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ft(We.FAILED_PRECONDITION,AF);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return Yp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ft(We.FAILED_PRECONDITION,l3)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yp(e).put("owner",r)}static D(){return Au.D()}bi(e){const r=Yp(e);return r.get("owner").next((n=>this.vi(n)?(st("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ie.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(wa(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;RV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return st("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return wa("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){wa("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yp(t){return Xa(t,"owner")}function by(t){return Xa(t,"clientMetadata")}function Pq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=Er(),a=Er();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new _8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return RV()?8:kF(Wa())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new Cae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(yh()<=Br.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",vh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ie.resolve()):(yh()<=Br.DEBUG&&st("QueryEngine","Query:",vh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(yh()<=Br.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",vh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Is(r))):Ie.resolve())}Yi(e,r){if(EI(r))return Ie.resolve(null);let n=Is(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=Dv(r,null,"F"),n=Is(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=Er(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,Dv(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return EI(r)||a.isEqual(Vt.min())?Ie.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?Ie.resolve(null):(yh()<=Br.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),vh(r)),this.rs(e,o,r,TF(a,-1)).next((c=>c)))}))}ts(e,r){let n=new In(YF(e));return r.forEach(((a,i)=>{mx(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return yh()<=Br.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",vh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Ds.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new qn(mr),this._s=new Fu((i=>Zd(i)),fx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function Bq(t,e,r,n){return new Oae(t,e,r,n)}async function $q(t,e){const r=Mt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=Er();for(const h of a){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Iae(t,e){const r=Mt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,x=m.keys();let y=Ie.resolve();return x.forEach((S=>{y=y.next((()=>p.getEntry(d,S))).next((w=>{const N=h.docVersions.get(S);Bt(N!==null),w.version.compareTo(N)<0&&(m.applyToRemoteDocument(w,h),w.isValidDocument()&&(w.setReadTime(h.commitVersion),p.addEntry(w)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Er();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function zq(t){const e=Mt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Rae(t,e){const r=Mt(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const x=a.get(m);if(!x)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Ta.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):p.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(p.resumeToken,n)),a=a.insert(m,y),(function(w,N,A){return w.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0})(x,y,p)&&c.push(r.Ur.updateTargetData(i,y))}));let d=Cs(),h=Er();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(Mae(i,o,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Vt.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Ie.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Mae(t,e,r){let n=Er(),a=Er();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=Cs();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Vt.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):st("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function Dae(t,e){const r=Mt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function $v(t,e){const r=Mt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Ie.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Ql(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Qh(t,e,r){const n=Mt(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Vu(o))throw o;st("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function PT(t,e,r){const n=Mt(t);let a=Vt.min(),i=Er();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,p){const m=Mt(d),x=m._s.get(p);return x!==void 0?Ie.resolve(m.os.get(x)):m.Ur.getTargetData(h,p)})(n,o,Is(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Vt.min(),r?i:Er()))).next((c=>(Fq(n,QF(e),c),{documents:c,Ts:i})))))}function Uq(t,e){const r=Mt(t),n=Mt(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function Vq(t,e){const r=Mt(t),n=r.us.get(e)||Vt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,TF(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(Fq(r,e,a),a)))}function Fq(t,e,r){let n=t.us.get(e)||Vt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function nR(t,e){return`firestore_clients_${t}_${e}`}function aR(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function c3(t,e){return`firestore_targets_${t}_${e}`}class zv{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new ft(a.error.code,a.error.message))),o?new zv(e,r,a.state,i):(wa("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new ft(n.error.code,n.error.message))),i?new Em(e,n.state,a):(wa("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=d8();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=CF(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new Uv(e,i):(wa("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class T8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new T8(r.clientId,r.onlineState):(wa("SharedClientState",`Failed to parse online state: ${e}`),null)}}class LT{constructor(){this.activeTargetIds=d8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u3{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new qn(mr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=nR(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new LT),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(nR(this.persistenceKey,n));if(a){const i=Uv.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(c3(this.persistenceKey,e));if(a){const i=Em.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(c3(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return st("SharedClientState","READ",e,r),r}setItem(e,r){st("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){st("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(st("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void wa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=ns.oe;if(i!=null)try{const c=JSON.parse(i);Bt(typeof c=="number"),o=c}catch(c){wa("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==ns.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new zv(this.currentUser,e,r,n),i=aR(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=aR(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=c3(this.persistenceKey,e),i=new Em(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Uv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return zv.Rs(new ji(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return Em.Rs(a,r)}Ls(e){return T8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);st("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=d8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class qq{constructor(){this.so=new LT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new LT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wy=null;function d3(){return wy===null?wy=(function(){return 268435456+Math.round(2147483648*Math.random())})():wy++,"0x"+wy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="WebChannelConnection";class $ae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=d3(),d=this.xo(r,n.toUriEncodedString());st("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((p=>(st("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Xm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=Lae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=d3();return new Promise(((o,c)=>{const d=new yF;d.setWithCredentials(!0),d.listenOnce(vF.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case lv.NO_ERROR:const p=d.getResponseJson();st(_i,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case lv.TIMEOUT:st(_i,`RPC '${e}' ${i} timed out`),c(new ft(We.DEADLINE_EXCEEDED,"Request time out"));break;case lv.HTTP_ERROR:const m=d.getStatus();if(st(_i,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x==null?void 0:x.error;if(y&&y.status&&y.message){const S=(function(N){const A=N.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(A)>=0?A:We.UNKNOWN})(y.status);c(new ft(S,y.message))}else c(new ft(We.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ft(We.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{st(_i,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);st(_i,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=d3(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=SF(),c=wF(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");st(_i,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=o.createWebChannel(p,d);let x=!1,y=!1;const S=new Bae({Io:N=>{y?st(_i,`Not sending because RPC '${e}' stream ${a} is closed:`,N):(x||(st(_i,`Opening RPC '${e}' stream ${a} transport.`),m.open(),x=!0),st(_i,`RPC '${e}' stream ${a} sending:`,N),m.send(N))},To:()=>m.close()}),w=(N,A,R)=>{N.listen(A,(O=>{try{R(O)}catch(L){setTimeout((()=>{throw L}),0)}}))};return w(m,pm.EventType.OPEN,(()=>{y||(st(_i,`RPC '${e}' stream ${a} transport opened.`),S.yo())})),w(m,pm.EventType.CLOSE,(()=>{y||(y=!0,st(_i,`RPC '${e}' stream ${a} transport closed`),S.So())})),w(m,pm.EventType.ERROR,(N=>{y||(y=!0,Xm(_i,`RPC '${e}' stream ${a} transport errored:`,N),S.So(new ft(We.UNAVAILABLE,"The operation could not be completed")))})),w(m,pm.EventType.MESSAGE,(N=>{var A;if(!y){const R=N.data[0];Bt(!!R);const O=R,L=O.error||((A=O[0])===null||A===void 0?void 0:A.error);if(L){st(_i,`RPC '${e}' stream ${a} received error:`,L);const I=L.status;let k=(function(C){const q=Ia[C];if(q!==void 0)return uq(q)})(I),E=L.message;k===void 0&&(k=We.INTERNAL,E="Unknown error status: "+I+" with message "+L.message),y=!0,S.So(new ft(k,E)),m.close()}else st(_i,`RPC '${e}' stream ${a} received:`,R),S.bo(R)}})),w(c,bF.STAT_EVENT,(N=>{N.stat===bT.PROXY?st(_i,`RPC '${e}' stream ${a} detected buffering proxy`):N.stat===bT.NOPROXY&&st(_i,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{S.wo()}),0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hq(){return typeof window<"u"?window:null}function mv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){return new Hne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&st("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new j8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===We.RESOURCE_EXHAUSTED?(wa(r.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new ft(We.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return st("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zae extends Gq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Xne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Vt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Vt.min():o.readTime?ai(o.readTime):Vt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=OT(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=Rv(d)?{documents:yq(i,d)}:{query:vq(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=fq(i,o.resumeToken);const h=kT(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Vt.min())>0){c.readTime=Xh(i,o.snapshotVersion.toTimestamp());const h=kT(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Yne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=OT(this.serializer),r.removeTarget=e,this.a_(r)}}class Uae extends Gq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,Bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Qne(e.writeResults,e.commitTime),n=ai(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=OT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>sg(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new ft(We.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,CT(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ft(We.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,CT(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ft(We.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Fae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wa(r),this.D_=!1):st("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{w0(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Mt(d);h.L_.add(4),await vx(h),h.q_.set("Unknown"),h.L_.delete(4),await R2(h)})(this))}))})),this.q_=new Fae(n,a)}}async function R2(t){if(w0(t))for(const e of t.B_)await e(!0)}async function vx(t){for(const e of t.B_)await e(!1)}function M2(t,e){const r=Mt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),k8(r)?E8(r):Bf(r).r_()&&A8(r,e))}function Yh(t,e){const r=Mt(t),n=Bf(r);r.N_.delete(e),n.r_()&&Wq(r,e),r.N_.size===0&&(n.r_()?n.o_():w0(r)&&r.q_.set("Unknown"))}function A8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Vt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Bf(t).A_(e)}function Wq(t,e){t.Q_.xe(e),Bf(t).R_(e)}function E8(t){t.Q_=new Une({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bf(t).start(),t.q_.v_()}function k8(t){return w0(t)&&!Bf(t).n_()&&t.N_.size>0}function w0(t){return Mt(t).L_.size===0}function Kq(t){t.Q_=void 0}async function Hae(t){t.q_.set("Online")}async function Gae(t){t.N_.forEach(((e,r)=>{A8(t,e)}))}async function Wae(t,e){Kq(t),k8(t)?(t.q_.M_(e),E8(t)):t.q_.set("Unknown")}async function Kae(t,e,r){if(t.q_.set("Online"),e instanceof hq&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){st("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Vv(t,n)}else if(e instanceof pv?t.Q_.Ke(e):e instanceof dq?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Vt.min()))try{const n=await zq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(Ta.EMPTY_BYTE_STRING,p.snapshotVersion)),Wq(i,d);const m=new Ql(p.target,d,h,p.sequenceNumber);A8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){st("RemoteStore","Failed to raise snapshot:",n),await Vv(t,n)}}async function Vv(t,e,r){if(!Vu(e))throw e;t.L_.add(1),await vx(t),t.q_.set("Offline"),r||(r=()=>zq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{st("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await R2(t)}))}function Xq(t,e){return e().catch((r=>Vv(t,r,e)))}async function Lf(t){const e=Mt(t),r=Pu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xae(e);)try{const a=await Dae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Qae(e,a)}catch(a){await Vv(e,a)}Qq(e)&&Yq(e)}function Xae(t){return w0(t)&&t.O_.length<10}function Qae(t,e){t.O_.push(e);const r=Pu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Qq(t){return w0(t)&&!Pu(t).n_()&&t.O_.length>0}function Yq(t){Pu(t).start()}async function Yae(t){Pu(t).p_()}async function Jae(t){const e=Pu(t);for(const r of t.O_)e.m_(r.mutations)}async function Zae(t,e,r){const n=t.O_.shift(),a=g8.from(n,e,r);await Xq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await Lf(t)}async function eie(t,e){e&&Pu(t).V_&&await(async function(n,a){if((function(o){return cq(o)&&o!==We.ABORTED})(a.code)){const i=n.O_.shift();Pu(n).s_(),await Xq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await Lf(n)}})(t,e),Qq(t)&&Yq(t)}async function sR(t,e){const r=Mt(t);r.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const n=w0(r);r.L_.add(3),await vx(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await R2(r)}async function BT(t,e){const r=Mt(t);e?(r.L_.delete(2),await R2(r)):e||(r.L_.add(2),await vx(r),r.q_.set("Unknown"))}function Bf(t){return t.K_||(t.K_=(function(r,n,a){const i=Mt(r);return i.w_(),new zae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:Hae.bind(null,t),Ro:Gae.bind(null,t),mo:Wae.bind(null,t),d_:Kae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),k8(t)?E8(t):t.q_.set("Unknown")):(await t.K_.stop(),Kq(t))}))),t.K_}function Pu(t){return t.U_||(t.U_=(function(r,n,a){const i=Mt(r);return i.w_(),new Uae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Yae.bind(null,t),mo:eie.bind(null,t),f_:Jae.bind(null,t),g_:Zae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await Lf(t)):(await t.U_.stop(),t.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new C8(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function O8(t,e){if(wa("AsyncQueue",`${e}: ${t}`),Vu(t))return new ft(We.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||wt.comparator(r.key,n.key):(r,n)=>wt.comparator(r.key,n.key),this.keyedMap=mm(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new Oh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Oh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Oh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.W_=new qn(wt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Et():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Jh{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new Jh(e,r,Oh.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&j2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tie{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class rie{constructor(){this.queries=lR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Mt(r),i=a.queries;a.queries=lR(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new ft(We.ABORTED,"Firestore shutting down"))}}function lR(){return new Fu((t=>XF(t)),j2)}async function I8(t,e){const r=Mt(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new tie,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=O8(o,`Initialization of query '${vh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&M8(r)}async function R8(t,e){const r=Mt(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function nie(t,e){const r=Mt(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&M8(r)}function aie(t,e,r){const n=Mt(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function M8(t){t.Y_.forEach((e=>{e.next()}))}var $T,cR;(cR=$T||($T={})).ea="default",cR.Cache="cache";class D8{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Jh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Jh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$T.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e){this.key=e}}class Zq{constructor(e){this.key=e}}class iie{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Er(),this.mutatedKeys=Er(),this.Aa=YF(e),this.Ra=new Oh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new oR,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const x=a.get(p),y=mx(this.query,m)?m:null,S=!!x&&this.mutatedKeys.has(x.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;x&&y?x.data.isEqual(y.data)?S!==w&&(n.track({type:3,doc:y}),N=!0):this.ga(x,y)||(n.track({type:2,doc:y}),N=!0,(d&&this.Aa(y,d)>0||h&&this.Aa(y,h)<0)&&(c=!0)):!x&&y?(n.track({type:0,doc:y}),N=!0):x&&!y&&(n.track({type:1,doc:x}),N=!0,(d||h)&&(c=!0)),N&&(y?(o=o.add(y),i=w?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,m)=>(function(y,S){const w=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return w(y)-w(S)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new Jh(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Er(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new Zq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new Jq(n))})),r}ba(e){this.Ta=e.Ts,this.da=Er();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Jh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sie{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class oie{constructor(e){this.key=e,this.va=!1}}class lie{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fu((c=>XF(c)),j2),this.Ma=new Map,this.xa=new Set,this.Oa=new qn(wt.comparator),this.Na=new Map,this.La=new S8,this.Ba={},this.ka=new Map,this.qa=n0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function cie(t,e,r=!0){const n=D2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await eH(n,e,r,!0),a}async function uie(t,e){const r=D2(t);await eH(r,e,!0,!1)}async function eH(t,e,r,n){const a=await $v(t.localStore,Is(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await P8(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&M2(t.remoteStore,a),c}async function P8(t,e,r,n,a){t.Ka=(m,x,y)=>(async function(w,N,A,R){let O=N.view.ma(A);O.ns&&(O=await PT(w.localStore,N.query,!1).then((({documents:E})=>N.view.ma(E,O))));const L=R&&R.targetChanges.get(N.targetId),I=R&&R.targetMismatches.get(N.targetId)!=null,k=N.view.applyChanges(O,w.isPrimaryClient,L,I);return zT(w,N.targetId,k.wa),k.snapshot})(t,m,x,y);const i=await PT(t.localStore,e,!0),o=new iie(e,i.Ts),c=o.ma(i.documents),d=yx.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);zT(t,r,h.wa);const p=new sie(e,r,o);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function die(t,e,r){const n=Mt(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!j2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Qh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Yh(n.remoteStore,a.targetId),Zh(n,a.targetId)})).catch(Uu)):(Zh(n,a.targetId),await Qh(n.localStore,a.targetId,!0))}async function hie(t,e){const r=Mt(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Yh(r.remoteStore,n.targetId))}async function fie(t,e,r){const n=z8(t);try{const a=await(function(o,c){const d=Mt(o),h=sa.now(),p=c.reduce(((y,S)=>y.add(S.key)),Er());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let S=Cs(),w=Er();return d.cs.getEntries(y,p).next((N=>{S=N,S.forEach(((A,R)=>{R.isValidDocument()||(w=w.add(A))}))})).next((()=>d.localDocuments.getOverlayedDocuments(y,S))).next((N=>{m=N;const A=[];for(const R of c){const O=Lne(R,m.get(R.key).overlayedDocument);O!=null&&A.push(new bc(R.key,O,$F(O.value.mapValue),Sa.exists(!0)))}return d.mutationQueue.addMutationBatch(y,h,A,c)})).next((N=>{x=N;const A=N.applyToLocalDocumentSet(m,w);return d.documentOverlayCache.saveOverlays(y,N.batchId,A)}))})).then((()=>({batchId:x.batchId,changes:ZF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new qn(mr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await qu(n,a.changes),await Lf(n.remoteStore)}catch(a){const i=O8(a,"Failed to persist write");r.reject(i)}}async function tH(t,e){const r=Mt(t);try{const n=await Rae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Bt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Bt(o.va):a.removedDocuments.size>0&&(Bt(o.va),o.va=!1))})),await qu(r,n,e)}catch(n){await Uu(n)}}function uR(t,e,r){const n=Mt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=Mt(o);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const x of m.j_)x.Z_(c)&&(h=!0)})),h&&M8(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function pie(t,e,r){const n=Mt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new qn(wt.comparator);o=o.insert(i,Zn.newNoDocument(i,Vt.min()));const c=Er().add(i),d=new xx(Vt.min(),new Map,new qn(mr),o,c);await tH(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),$8(n)}else await Qh(n.localStore,e,!1).then((()=>Zh(n,e,r))).catch(Uu)}async function mie(t,e){const r=Mt(t),n=e.batch.batchId;try{const a=await Iae(r.localStore,e);B8(r,n,null),L8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await qu(r,a)}catch(a){await Uu(a)}}async function gie(t,e,r){const n=Mt(t);try{const a=await(function(o,c){const d=Mt(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Bt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);B8(n,e,r),L8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await qu(n,a)}catch(a){await Uu(a)}}function L8(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function B8(t,e,r){const n=Mt(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Zh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||rH(t,n)}))}function rH(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Yh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),$8(t))}function zT(t,e,r){for(const n of r)n instanceof Jq?(t.La.addReference(n.key,e),xie(t,n)):n instanceof Zq?(st("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||rH(t,n.key)):Et()}function xie(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(st("SyncEngine","New document in limbo: "+r),t.xa.add(n),$8(t))}function $8(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new wt(Yr.fromString(e)),n=t.qa.next();t.Na.set(n,new oie(r)),t.Oa=t.Oa.insert(r,n),M2(t.remoteStore,new Ql(Is(px(r.path)),n,"TargetPurposeLimboResolution",ns.oe))}}async function qu(t,e,r){const n=Mt(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=_8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const p=Mt(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ie.forEach(h,(x=>Ie.forEach(x.$i,(y=>p.persistence.referenceDelegate.addReference(m,x.targetId,y))).next((()=>Ie.forEach(x.Ui,(y=>p.persistence.referenceDelegate.removeReference(m,x.targetId,y)))))))))}catch(m){if(!Vu(m))throw m;st("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const x=m.targetId;if(!m.fromCache){const y=p.os.get(x),S=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(S);p.os=p.os.insert(x,w)}}})(n.localStore,i))}async function yie(t,e){const r=Mt(t);if(!r.currentUser.isEqual(e)){st("SyncEngine","User change. New user:",e.toKey());const n=await $q(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new ft(We.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qu(r,n.hs)}}function vie(t,e){const r=Mt(t),n=r.Na.get(e);if(n&&n.va)return Er().add(n.key);{let a=Er();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function bie(t,e){const r=Mt(t),n=await PT(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&zT(r,e.targetId,a.wa),a}async function wie(t,e){const r=Mt(t);return Vq(r.localStore,e).then((n=>qu(r,n)))}async function Sie(t,e,r,n){const a=Mt(t),i=await(function(c,d){const h=Mt(c),p=Mt(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((x=>x?h.localDocuments.getDocuments(m,x):Ie.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await Lf(a.remoteStore):r==="acknowledged"||r==="rejected"?(B8(a,e,n||null),L8(a,e),(function(c,d){Mt(Mt(c).mutationQueue).On(d)})(a.localStore,e)):Et(),await qu(a,i)):st("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Nie(t,e){const r=Mt(t);if(D2(r),z8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await dR(r,n.toArray());r.Qa=!0,await BT(r.remoteStore,!0);for(const i of a)M2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(Zh(r,o),Qh(r.localStore,o,!0)))),Yh(r.remoteStore,o)})),await a,await dR(r,n),(function(o){const c=Mt(o);c.Na.forEach(((d,h)=>{Yh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new qn(wt.comparator)})(r),r.Qa=!1,await BT(r.remoteStore,!1)}}async function dR(t,e,r){const n=Mt(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await $v(n.localStore,Is(d[0]));for(const h of d){const p=n.Fa.get(h),m=await bie(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await Uq(n.localStore,o);c=await $v(n.localStore,h),await P8(n,nH(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function nH(t){return WF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function _ie(t){return(function(r){return Mt(Mt(r).persistence).Qi()})(Mt(t).localStore)}async function Tie(t,e,r,n){const a=Mt(t);if(a.Qa)return void st("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await Vq(a.localStore,QF(i[0])),c=xx.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Ta.EMPTY_BYTE_STRING);await qu(a,o,c);break}case"rejected":await Qh(a.localStore,e,!0),Zh(a,e,n);break;default:Et()}}async function jie(t,e,r){const n=D2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){st("SyncEngine","Adding an already active target "+a);continue}const i=await Uq(n.localStore,a),o=await $v(n.localStore,i);await P8(n,nH(i),o.targetId,!1,o.resumeToken),M2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await Qh(n.localStore,a,!1).then((()=>{Yh(n.remoteStore,a),Zh(n,a)})).catch(Uu)}}function D2(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pie.bind(null,e),e.Ca.d_=nie.bind(null,e.eventManager),e.Ca.$a=aie.bind(null,e.eventManager),e}function z8(t){const e=Mt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gie.bind(null,e),e}class og{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=I2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Bq(this.persistence,new Lq,e.initialUser,this.serializer)}Ga(e){return new Dq(O2.Zr,this.serializer)}Wa(e){return new qq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}og.provider={build:()=>new og};class aH extends og{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await z8(this.Ja.syncEngine),await Lf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return Bq(this.persistence,new Lq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new pae(n,e.asyncQueue,r)}Ha(e,r){const n=new Kre(r,this.persistence);return new Wre(e.asyncQueue,n)}Ga(e){const r=Pq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Zi.withCacheSize(this.cacheSizeBytes):Zi.DEFAULT;return new N8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Hq(),mv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new qq}}class Aie extends aH{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof u3&&(this.sharedClientState.syncEngine={no:Sie.bind(null,r),ro:Tie.bind(null,r),io:jie.bind(null,r),Qi:_ie.bind(null,r),eo:wie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Nie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=Hq();if(!u3.D(r))throw new ft(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Pq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new u3(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class lg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>uR(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=yie.bind(null,this.syncEngine),await BT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rie})()}createDatastore(e){const r=I2(e.databaseInfo.databaseId),n=(function(i){return new $ae(i)})(e.databaseInfo);return(function(i,o,c,d){return new Vae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new qae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>uR(this.syncEngine,r,0)),(function(){return iR.D()?new iR:new Pae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,p){const m=new lie(a,i,o,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Mt(a);st("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await vx(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}lg.provider={build:()=>new lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ft(We.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=Mt(a),c={documents:i.map((m=>ig(o.serializer,m)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Yr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const x=Kne(o.serializer,m);h.set(x.key.toString(),x)}));const p=[];return i.forEach((m=>{const x=h.get(m.toString());Bt(!!x),p.push(x)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new gx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=wt.fromPath(n);this.mutations.push(new p8(a,this.precondition(a)))})),await(async function(n,a){const i=Mt(n),o={writes:a.map((c=>sg(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Yr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Et();r=Vt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ft(We.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Vt.min())?Sa.exists(!1):Sa.updateTime(r):Sa.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Vt.min()))throw new ft(We.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sa.updateTime(r)}return Sa.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new j8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Eie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!hx(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!cq(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=ji.UNAUTHENTICATED,this.clientId=NF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{st("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(st("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=O8(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function h3(t,e){t.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await $q(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function hR(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Oie(t);st("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>sR(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>sR(e.remoteStore,a))),t._onlineComponents=e}async function Oie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await h3(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===We.FAILED_PRECONDITION||a.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Xm("Error using user provided cache. Falling back to memory cache: "+r),await h3(t,new og)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await h3(t,new og);return t._offlineComponents}async function V8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await hR(t,t._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await hR(t,new lg))),t._onlineComponents}function Iie(t){return V8(t).then((e=>e.syncEngine))}function Rie(t){return V8(t).then((e=>e.datastore))}async function Fv(t){const e=await V8(t),r=e.eventManager;return r.onListen=cie.bind(null,e.syncEngine),r.onUnlisten=die.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=uie.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=hie.bind(null,e.syncEngine),r}function Mie(t,e,r={}){const n=new ko;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new U8({next:x=>{p.Za(),o.enqueueAndForget((()=>R8(i,m)));const y=x.docs.has(c);!y&&x.fromCache?h.reject(new ft(We.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&x.fromCache&&d&&d.source==="server"?h.reject(new ft(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new D8(px(c.path),p,{includeMetadataChanges:!0,_a:!0});return I8(i,m)})(await Fv(t),t.asyncQueue,e,r,n))),n.promise}function Die(t,e,r={}){const n=new ko;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new U8({next:x=>{p.Za(),o.enqueueAndForget((()=>R8(i,m))),x.fromCache&&d.source==="server"?h.reject(new ft(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),m=new D8(c,p,{includeMetadataChanges:!0,_a:!0});return I8(i,m)})(await Fv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sH(t,e,r){if(!r)throw new ft(We.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pie(t,e,r,n){if(e===!0&&n===!0)throw new ft(We.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function pR(t){if(!wt.isDocumentKey(t))throw new ft(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mR(t){if(wt.isDocumentKey(t))throw new ft(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function P2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et()}function os(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ft(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=P2(t);throw new ft(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Lie(t,e){if(e<=0)throw new ft(We.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ft(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ft(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iH((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ft(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ft(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ft(We.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F8{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gR({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ft(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gR(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Lre;switch(n.type){case"firstParty":return new zre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ft(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=fR.get(r);n&&(st("ComponentProvider","Removing Datastore"),fR.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class xi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xi(this.firestore,e,this._key)}}class Eu extends wc{constructor(e,r,n){super(e,r,px(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xi(this.firestore,null,new wt(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function Ut(t,e,...r){if(t=Rn(t),sH("collection","path",e),t instanceof F8){const n=Yr.fromString(e,...r);return mR(n),new Eu(t,null,n)}{if(!(t instanceof xi||t instanceof Eu))throw new ft(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Yr.fromString(e,...r));return mR(n),new Eu(t.firestore,null,n)}}function ct(t,e,...r){if(t=Rn(t),arguments.length===1&&(e=NF.newId()),sH("doc","path",e),t instanceof F8){const n=Yr.fromString(e,...r);return pR(n),new xi(t,null,new wt(n))}{if(!(t instanceof xi||t instanceof Eu))throw new ft(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Yr.fromString(e,...r));return pR(n),new xi(t.firestore,t instanceof Eu?t.converter:null,new wt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new j8(this,"async_queue_retry"),this.Vu=()=>{const n=mv();n&&st("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=mv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=mv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new ko;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vu(e))throw e;st("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw wa("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=C8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&Et()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function yR(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class ll extends F8{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new xR,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xR(e),this._firestoreClient=void 0,await e}}}function Bie(t,e,r){r||(r="(default)");const n=lx(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Uh(i,e))return a;throw new ft(We.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ft(We.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ft(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function bx(t){if(t._terminated)throw new ft(We.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$ie(t),t._firestoreClient}function $ie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new mne(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,iH(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Cie(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new a0(Ta.fromBase64String(e))}catch(r){throw new ft(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new a0(Ta.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ft(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ia(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ft(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ft(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return mr(this._lat,e._lat)||mr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zie=/^__.*__$/;class Uie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new bc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Pf(e,this.data,r,this.fieldTransforms)}}class oH{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new bc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function lH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class L2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new L2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lH(this.Cu)&&zie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Vie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||I2(e)}Qu(e,r,n,a=!1){return new L2({Cu:e,methodName:r,qu:n,path:ia.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nx(t){const e=t._freezeSettings(),r=I2(t._databaseId);return new Vie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function G8(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);X8("Data must be an object, but it was:",o,n);const c=dH(n,o);let d,h;if(i.merge)d=new as(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const x=UT(e,m,r);if(!o.contains(x))throw new ft(We.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);fH(p,x)||p.push(x)}d=new as(p),h=o.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=o.fieldTransforms;return new Uie(new gi(c),d,h)}class B2 extends Sx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B2}}function Fie(t,e,r){return new L2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class W8 extends Sx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Fie(this,e,!0),n=this.Ku.map((i=>$f(i,r))),a=new e0(n);return new f8(e.path,a)}isEqual(e){return e instanceof W8&&Uh(this.Ku,e.Ku)}}class K8 extends Sx{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Kh(e.serializer,rq(e.serializer,this.$u));return new f8(e.path,r)}isEqual(e){return e instanceof K8&&this.$u===e.$u}}function cH(t,e,r,n){const a=t.Qu(1,e,r);X8("Data must be an object, but it was:",a,n);const i=[],o=gi.empty();b0(n,((d,h)=>{const p=Q8(e,d,r);h=Rn(h);const m=a.Nu(p);if(h instanceof B2)i.push(p);else{const x=$f(h,m);x!=null&&(i.push(p),o.set(p,x))}}));const c=new as(i);return new oH(o,c,a.fieldTransforms)}function uH(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[UT(e,n,r)],d=[a];if(i.length%2!=0)throw new ft(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(UT(e,i[x])),d.push(i[x+1]);const h=[],p=gi.empty();for(let x=c.length-1;x>=0;--x)if(!fH(h,c[x])){const y=c[x];let S=d[x];S=Rn(S);const w=o.Nu(y);if(S instanceof B2)h.push(y);else{const N=$f(S,w);N!=null&&(h.push(y),p.set(y,N))}}const m=new as(h);return new oH(p,m,o.fieldTransforms)}function qie(t,e,r,n=!1){return $f(r,t.Qu(n?4:3,e))}function $f(t,e){if(hH(t=Rn(t)))return X8("Unsupported field value:",e,t),dH(t,e);if(t instanceof Sx)return(function(n,a){if(!lH(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=$f(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=Rn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rq(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=sa.fromDate(n);return{timestampValue:Xh(a.serializer,i)}}if(n instanceof sa){const i=new sa(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xh(a.serializer,i)}}if(n instanceof q8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof a0)return{bytesValue:fq(a.serializer,n._byteString)};if(n instanceof xi){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:v8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof H8)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return h8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${P2(n)}`)})(t,e)}function dH(t,e){const r={};return DF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):b0(t,((n,a)=>{const i=$f(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function hH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof sa||t instanceof q8||t instanceof a0||t instanceof xi||t instanceof Sx||t instanceof H8)}function X8(t,e,r){if(!hH(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=P2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function UT(t,e,r){if((e=Rn(e))instanceof wx)return e._internalPath;if(typeof e=="string")return Q8(t,e);throw qv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Hie=new RegExp("[~\\*/\\[\\]]");function Q8(t,e,r){if(e.search(Hie)>=0)throw qv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new wx(...e.split("."))._internalPath}catch{throw qv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function qv(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new ft(We.INVALID_ARGUMENT,c+t+d)}function fH(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field($2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Gie extends Hv{data(){return super.data()}}function $2(t,e){return typeof e=="string"?Q8(t,e):e instanceof wx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ft(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y8{}class J8 extends Y8{}function Gr(t,e,...r){let n=[];e instanceof Y8&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof Z8)).length,c=i.filter((d=>d instanceof z2)).length;if(o>1||o>0&&c>0)throw new ft(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class z2 extends J8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new z2(e,r,n)}_apply(e){const r=this._parse(e);return mH(e._query,r),new wc(e.firestore,e.converter,ET(e._query,r))}_parse(e){const r=Nx(e.firestore);return(function(i,o,c,d,h,p,m){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ft(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){bR(m,p);const y=[];for(const S of m)y.push(vR(d,i,S));x={arrayValue:{values:y}}}else x=vR(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||bR(m,p),x=qie(c,o,m,p==="in"||p==="not-in");return $r.create(h,p,x)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Sn(t,e,r){const n=e,a=$2("where",t);return z2._create(a,n,r)}class Z8 extends Y8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Z8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Nn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)mH(o,d),o=ET(o,d)})(e._query,r),new wc(e.firestore,e.converter,ET(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class eE extends J8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new eE(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new ft(We.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ft(We.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ng(i,o)})(e._query,this._field,this._direction);return new wc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new Df(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function qo(t,e="asc"){const r=e,n=$2("orderBy",t);return eE._create(n,r)}class tE extends J8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new tE(e,r,n)}_apply(e){return new wc(e.firestore,e.converter,Dv(e._query,this._limit,this._limitType))}}function xo(t){return Lie("limit",t),tE._create("limit",t,"F")}function vR(t,e,r){if(typeof(r=Rn(r))=="string"){if(r==="")throw new ft(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KF(e)&&r.indexOf("/")!==-1)throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Yr.fromString(r));if(!wt.isDocumentKey(n))throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return tg(t,new wt(n))}if(r instanceof xi)return tg(t,r._key);throw new ft(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${P2(r)}.`)}function bR(t,e){if(!Array.isArray(t)||t.length===0)throw new ft(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mH(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new ft(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ft(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class gH{convertValue(e,r="none"){switch(Jd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Et()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return b0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>Jn(o.doubleValue)));return new H8(i)}convertGeoPoint(e){return new q8(Jn(e.latitude),Jn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=c8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Zm(e));default:return null}}convertTimestamp(e){const r=uc(e);return new sa(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Yr.fromString(e);Bt(Nq(n));const a=new Yd(n.get(1),n.get(3)),i=new wt(n.popFirst(5));return a.isEqual(r)||wa(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Wie extends gH{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nE extends Hv{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new gv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field($2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class gv extends nE{data(e={}){return super.data(e)}}class xH{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Nh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new gv(this._firestore,this._userDataWriter,n.key,n,new Nh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ft(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new gv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new Nh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new gv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new Nh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:Kie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Kie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){t=os(t,xi);const e=os(t.firestore,ll);return Mie(bx(e),t._key).then((r=>yH(e,t,r)))}class U2 extends gH{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new xi(this.firestore,null,r)}}function vd(t){t=os(t,wc);const e=os(t.firestore,ll),r=bx(e),n=new U2(e);return pH(t._query),Die(r,t._query).then((a=>new xH(e,n,t,a)))}function va(t,e,r){t=os(t,xi);const n=os(t.firestore,ll),a=rE(t.converter,e,r);return V2(n,[G8(Nx(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Sa.none())])}function lr(t,e,r,...n){t=os(t,xi);const a=os(t.firestore,ll),i=Nx(a);let o;return o=typeof(e=Rn(e))=="string"||e instanceof wx?uH(i,"updateDoc",t._key,e,r,n):cH(i,"updateDoc",t._key,e),V2(a,[o.toMutation(t._key,Sa.exists(!0))])}function di(t){return V2(os(t.firestore,ll),[new gx(t._key,Sa.none())])}function Bl(t,e){const r=os(t.firestore,ll),n=ct(t),a=rE(t.converter,e);return V2(r,[G8(Nx(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,Sa.exists(!1))]).then((()=>n))}function Wr(t,...e){var r,n,a;t=Rn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||yR(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(yR(e[o])){const m=e[o];e[o]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof xi)h=os(t.firestore,ll),p=px(t._key.path),d={next:m=>{e[o]&&e[o](yH(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=os(t,wc);h=os(m.firestore,ll),p=m._query;const x=new U2(h);d={next:y=>{e[o]&&e[o](new xH(h,x,m,y))},error:e[o+1],complete:e[o+2]},pH(t._query)}return(function(x,y,S,w){const N=new U8(w),A=new D8(y,N,S);return x.asyncQueue.enqueueAndForget((async()=>I8(await Fv(x),A))),()=>{N.Za(),x.asyncQueue.enqueueAndForget((async()=>R8(await Fv(x),A)))}})(bx(h),p,c,d)}function V2(t,e){return(function(n,a){const i=new ko;return n.asyncQueue.enqueueAndForget((async()=>fie(await Iie(n),a,i))),i.promise})(bx(t),e)}function yH(t,e,r){const n=r.docs.get(e._key),a=new U2(t);return new nE(t,a,e._key,n,new Nh(r.hasPendingWrites,r.fromCache),e.converter)}class Xie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Zie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Qie(t){return new Xie(t)}class Yie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lg.provider,this._offlineComponentProvider={build:r=>new aH(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Jie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=lg.provider,this._offlineComponentProvider={build:r=>new Aie(r,e==null?void 0:e.cacheSizeBytes)}}}function Zie(t){return new Yie(void 0)}function ese(){return new Jie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tse={maxAttempts:5};function Jp(t,e){if((t=Rn(t)).firestore!==e)throw new ft(We.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Nx(r)}get(r){const n=Jp(r,this._firestore),a=new Wie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Et();const o=i[0];if(o.isFoundDocument())return new Hv(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Hv(this._firestore,a,n._key,null,n.converter);throw Et()}))}set(r,n,a){const i=Jp(r,this._firestore),o=rE(i.converter,n,a),c=G8(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=Jp(r,this._firestore);let c;return c=typeof(n=Rn(n))=="string"||n instanceof wx?uH(this._dataReader,"Transaction.update",o._key,n,a,i):cH(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=Jp(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Jp(e,this._firestore),n=new U2(this._firestore);return super.get(e).then((a=>new nE(this._firestore,n,r._key,a._document,new Nh(!1,!1),r.converter)))}}function f3(t,e,r){t=os(t,ll);const n=Object.assign(Object.assign({},tse),r);return(function(i){if(i.maxAttempts<1)throw new ft(We.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new ko;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Rie(i);new kie(i.asyncQueue,h,c,o,d).au()})),d.promise})(bx(t),(a=>e(new rse(t,a))),n)}function wR(...t){return new W8("arrayUnion",t)}function Zp(t){return new K8("increment",t)}(function(e,r=!0){(function(a){Mf=a})(v0),Ru(new oc("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new ll(new Bre(n.getProvider("auth-internal")),new Vre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ft(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yd(h.options.projectId,p)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ro(hI,"4.7.3",e),ro(hI,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH="firebasestorage.googleapis.com",bH="storageBucket",nse=120*1e3,ase=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Ro{constructor(e,r,n=0){super(p3(e),`Firebase Storage: ${r} (${p3(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return p3(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ha;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ha||(ha={}));function p3(t){return"storage/"+t}function aE(){const t="An unknown error occurred, please check the error payload for server response.";return new fa(ha.UNKNOWN,t)}function ise(t){return new fa(ha.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sse(t){return new fa(ha.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ose(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fa(ha.UNAUTHENTICATED,t)}function lse(){return new fa(ha.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cse(t){return new fa(ha.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function use(){return new fa(ha.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dse(){return new fa(ha.CANCELED,"User canceled the upload/download.")}function hse(t){return new fa(ha.INVALID_URL,"Invalid URL '"+t+"'.")}function fse(t){return new fa(ha.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pse(){return new fa(ha.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bH+"' property when initializing the app?")}function mse(){return new fa(ha.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gse(){return new fa(ha.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xse(t){return new fa(ha.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function VT(t){return new fa(ha.INVALID_ARGUMENT,t)}function wH(){return new fa(ha.APP_DELETED,"The Firebase app was deleted.")}function yse(t){return new fa(ha.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function km(t,e){return new fa(ha.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function em(t){throw new fa(ha.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Os.makeFromUrl(e,r)}catch{return new Os(e,"")}if(n.path==="")return n;throw fse(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",y=new RegExp(`^https?://${m}/${p}/b/${a}/o${x}`,"i"),S={bucket:1,path:3},w=r===vH?"(?:storage.googleapis.com|storage.cloud.google.com)":r,N="([^?#]*)",A=new RegExp(`^https?://${w}/${a}/${N}`,"i"),O=[{regex:c,indices:d,postModify:i},{regex:y,indices:S,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<O.length;L++){const I=O[L],k=I.regex.exec(e);if(k){const E=k[I.indices.bucket];let j=k[I.indices.path];j||(j=""),n=new Os(E,j),I.postModify(n);break}}if(n==null)throw hse(e);return n}}class vse{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bse(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...N){h||(h=!0,e.apply(null,N))}function m(N){a=setTimeout(()=>{a=null,t(y,d())},N)}function x(){i&&clearTimeout(i)}function y(N,...A){if(h){x();return}if(N){x(),p.call(null,N,...A);return}if(d()||o){x(),p.call(null,N,...A);return}n<64&&(n*=2);let O;c===1?(c=2,O=0):O=(n+Math.random())*1e3,m(O)}let S=!1;function w(N){S||(S=!0,x(),!h&&(a!==null?(N||(c=2),clearTimeout(a),m(0)):N||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,w(!0)},r),w}function wse(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sse(t){return t!==void 0}function Nse(t){return typeof t=="object"&&!Array.isArray(t)}function iE(t){return typeof t=="string"||t instanceof String}function SR(t){return sE()&&t instanceof Blob}function sE(){return typeof Blob<"u"}function NR(t,e,r,n){if(n<e)throw VT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw VT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function SH(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Hd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Hd||(Hd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _se(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(e,r,n,a,i,o,c,d,h,p,m,x=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,S)=>{this.resolve_=y,this.reject_=S,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new Sy(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Hd.NO_ERROR,d=i.getStatus();if(!c||_se(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Hd.ABORT;n(!1,new Sy(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Sy(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Sse(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=aE();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?wH():dse();o(d)}else{const d=use();o(d)}};this.canceled_?r(!1,new Sy(!1,null,!0)):this.backoffId_=bse(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wse(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sy{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function jse(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ase(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ese(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kse(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Cse(t,e,r,n,a,i,o=!0){const c=SH(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return Ese(h,e),jse(h,r),Ase(h,i),kse(h,n),new Tse(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ose(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Ise(...t){const e=Ose();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(sE())return new Blob(t);throw new fa(ha.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Rse(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mse(t){if(typeof atob>"u")throw xse("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class m3{constructor(e,r){this.data=e,this.contentType=r||null}}function Dse(t,e){switch(t){case Yo.RAW:return new m3(NH(e));case Yo.BASE64:case Yo.BASE64URL:return new m3(_H(t,e));case Yo.DATA_URL:return new m3(Lse(e),Bse(e))}throw aE()}function NH(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Pse(t){let e;try{e=decodeURIComponent(t)}catch{throw km(Yo.DATA_URL,"Malformed data URL.")}return NH(e)}function _H(t,e){switch(t){case Yo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw km(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Yo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw km(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Mse(e)}catch(a){throw a.message.includes("polyfill")?a:km(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class TH{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw km(Yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=$se(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Lse(t){const e=new TH(t);return e.base64?_H(Yo.BASE64,e.rest):Pse(e.rest)}function Bse(t){return new TH(t).contentType}function $se(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,r){let n=0,a="";SR(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(SR(this.data_)){const n=this.data_,a=Rse(n,e,r);return a===null?null:new fu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new fu(n,!0)}}static getBlob(...e){if(sE()){const r=e.map(n=>n instanceof fu?n.data_:n);return new fu(Ise.apply(null,r))}else{const r=e.map(o=>iE(o)?Dse(Yo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new fu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t){let e;try{e=JSON.parse(t)}catch{return null}return Nse(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Use(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function AH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vse(t,e){return e}class Ii{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||Vse}}let Ny=null;function Fse(t){return!iE(t)||t.length<2?t:AH(t)}function EH(){if(Ny)return Ny;const t=[];t.push(new Ii("bucket")),t.push(new Ii("generation")),t.push(new Ii("metageneration")),t.push(new Ii("name","fullPath",!0));function e(i,o){return Fse(o)}const r=new Ii("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Ii("size");return a.xform=n,t.push(a),t.push(new Ii("timeCreated")),t.push(new Ii("updated")),t.push(new Ii("md5Hash",null,!0)),t.push(new Ii("cacheControl",null,!0)),t.push(new Ii("contentDisposition",null,!0)),t.push(new Ii("contentEncoding",null,!0)),t.push(new Ii("contentLanguage",null,!0)),t.push(new Ii("contentType",null,!0)),t.push(new Ii("metadata","customMetadata",!0)),Ny=t,Ny}function qse(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new Os(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function Hse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return qse(n,t),n}function kH(t,e,r){const n=jH(e);return n===null?null:Hse(t,n,r)}function Gse(t,e,r,n){const a=jH(e);if(a===null||!iE(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,x="/b/"+o(p)+"/o/"+o(m),y=F2(x,r,n),S=SH({alt:"media",token:h});return y+S})[0]}function Wse(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class oE{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(t){if(!t)throw aE()}function Kse(t,e){function r(n,a){const i=kH(t,a,e);return CH(i!==null),i}return r}function Xse(t,e){function r(n,a){const i=kH(t,a,e);return CH(i!==null),Gse(i,a,t.host,t._protocol)}return r}function OH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=lse():a=ose():r.getStatus()===402?a=sse(t.bucket):r.getStatus()===403?a=cse(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function IH(t){const e=OH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=ise(t.path)),i.serverResponse=a.serverResponse,i}return r}function Qse(t,e,r){const n=e.fullServerUrl(),a=F2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new oE(a,i,Xse(t,r),o);return c.errorHandler=IH(e),c}function Yse(t,e){const r=e.fullServerUrl(),n=F2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new oE(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=IH(e),c}function Jse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Zse(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Jse(null,e)),n}function eoe(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let O="";for(let L=0;L<2;L++)O=O+Math.random().toString().slice(2);return O}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Zse(e,n,a),p=Wse(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+d+"--",y=fu.getBlob(m,n,x);if(y===null)throw mse();const S={name:h.fullPath},w=F2(i,t.host,t._protocol),N="POST",A=t.maxUploadRetryTime,R=new oE(w,N,Kse(t,r),A);return R.urlParams=S,R.headers=o,R.body=y.uploadData(),R.errorHandler=OH(e),R}class toe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw em("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw em("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw em("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw em("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw em("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class roe extends toe{initXhr(){this.xhr_.responseType="text"}}function lE(){return new roe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,r){this._service=e,r instanceof Os?this._location=r:this._location=Os.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new i0(e,r)}get root(){const e=new Os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AH(this._location.path)}get storage(){return this._service}get parent(){const e=zse(this._location.path);if(e===null)return null;const r=new Os(this._location.bucket,e);return new i0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw yse(e)}}function noe(t,e,r){t._throwIfRoot("uploadBytes");const n=eoe(t.storage,t._location,EH(),new fu(e,!0),r);return t.storage.makeRequestWithTokens(n,lE).then(a=>({metadata:a,ref:t}))}function aoe(t){t._throwIfRoot("getDownloadURL");const e=Qse(t.storage,t._location,EH());return t.storage.makeRequestWithTokens(e,lE).then(r=>{if(r===null)throw gse();return r})}function ioe(t){t._throwIfRoot("deleteObject");const e=Yse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,lE)}function soe(t,e){const r=Use(t._location.path,e),n=new Os(t._location.bucket,r);return new i0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ooe(t){return/^[A-Za-z]+:\/\//.test(t)}function loe(t,e){return new i0(t,e)}function RH(t,e){if(t instanceof cE){const r=t;if(r._bucket==null)throw pse();const n=new i0(r,r._bucket);return e!=null?RH(n,e):n}else return e!==void 0?soe(t,e):t}function coe(t,e){if(e&&ooe(e)){if(t instanceof cE)return loe(t,e);throw VT("To use ref(service, url), the first argument must be a Storage instance.")}else return RH(t,e)}function _R(t,e){const r=e==null?void 0:e[bH];return r==null?null:Os.makeFromBucketSpec(r,t)}function uoe(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:fZ(a,t.app.options.projectId))}class cE{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=vH,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nse,this._maxUploadRetryTime=ase,this._requests=new Set,a!=null?this._bucket=Os.makeFromBucketSpec(a,this._host):this._bucket=_R(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Os.makeFromBucketSpec(this._url,e):this._bucket=_R(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new i0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new vse(wH());{const o=Cse(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const TR="@firebase/storage",jR="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH="storage";function FT(t,e,r){return t=Rn(t),noe(t,e,r)}function Gv(t){return t=Rn(t),aoe(t)}function doe(t){return t=Rn(t),ioe(t)}function Cm(t,e){return t=Rn(t),coe(t,e)}function hoe(t=GA(),e){t=Rn(t);const n=lx(t,MH).getImmediate({identifier:e}),a=CV("storage");return a&&foe(n,...a),n}function foe(t,e,r,n={}){uoe(t,e,r,n)}function poe(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new cE(r,n,a,e,v0)}function moe(){Ru(new oc(MH,poe,"PUBLIC").setMultipleInstances(!0)),ro(TR,jR,""),ro(TR,jR,"esm2017")}moe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const goe="type.googleapis.com/google.protobuf.Int64Value",xoe="type.googleapis.com/google.protobuf.UInt64Value";function DH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function qT(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>qT(e));if(typeof t=="function"||typeof t=="object")return DH(t,e=>qT(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Wv(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case goe:case xoe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Wv(e)):typeof t=="function"||typeof t=="object"?DH(t,e=>Wv(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ih extends Ro{constructor(e,r,n){super(`${uE}/${e}`,r||""),this.details=n}}function yoe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function voe(t,e){let r=yoe(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!AR[o])return new Ih("internal","internal");r=AR[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=Wv(a))}}catch{}return r==="ok"?null:new Ih(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class boe{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="us-central1";function woe(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Ih("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Soe{constructor(e,r,n,a,i=HT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new boe(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=HT}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Noe(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function _oe(t,e,r){return(n=>joe(t,e,n,{}))}async function Toe(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function joe(t,e,r,n){const a=t._url(e);return Aoe(t,a,r,n)}async function Aoe(t,e,r,n){r=qT(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=woe(c),h=await Promise.race([Toe(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Ih("cancelled","Firebase Functions instance was deleted.");const p=voe(h.status,h.json);if(p)throw p;if(!h.json)throw new Ih("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Ih("internal","Response is missing data field.");return{data:Wv(m)}}const ER="@firebase/functions",kR="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eoe="auth-internal",koe="app-check-internal",Coe="messaging-internal";function Ooe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(Eoe),c=n.getProvider(Coe),d=n.getProvider(koe);return new Soe(i,o,c,d,a,t)};Ru(new oc(uE,r,"PUBLIC").setMultipleInstances(!0)),ro(ER,kR,e),ro(ER,kR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ioe(t=GA(),e=HT){const n=lx(Rn(t),uE).getImmediate({identifier:e}),a=CV("functions");return a&&Roe(n,...a),n}function Roe(t,e,r){Noe(Rn(t),e,r)}function on(t,e,r){return _oe(Rn(t),e)}Ooe(fetch.bind(self));const PH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Moe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Moe)if(!PH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const q2=LV(PH),GT=vT(q2),Doe=new ql,Me=Bie(q2,{localCache:Qie({tabManager:ese()})}),Om=hoe(q2),ln=Ioe(q2),Poe=on(ln,"awardXP"),Loe=on(ln,"acceptQuest"),Boe=on(ln,"deployMission"),$oe=on(ln,"resolveQuest"),zoe=on(ln,"equipItem"),Uoe=on(ln,"unequipItem"),Voe=on(ln,"disenchantItem"),Foe=on(ln,"craftItem"),qoe=on(ln,"adminUpdateInventory"),Hoe=on(ln,"adminUpdateEquipped"),Goe=on(ln,"submitEngagement"),Woe=on(ln,"sendClassMessage");on(ln,"uploadQuestionBank");const WT=on(ln,"awardQuestionXP"),Koe=on(ln,"penalizeWrongAnswer"),Xoe=on(ln,"updateStreak"),Qoe=on(ln,"claimDailyLogin"),Yoe=on(ln,"spinFortuneWheel"),Joe=on(ln,"unlockSkill"),Zoe=on(ln,"addSocket"),ele=on(ln,"socketGem"),tle=on(ln,"unsocketGem"),rle=on(ln,"dealBossDamage"),nle=on(ln,"answerBossQuiz"),ale=on(ln,"createParty"),ile=on(ln,"joinParty"),sle=on(ln,"completeTutoring"),ole=on(ln,"claimKnowledgeLoot"),lle=on(ln,"purchaseCosmetic"),cle=on(ln,"claimDailyChallenge"),ule=on(ln,"dismissAlert"),Kv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});function dle(t,e,r,n){const{totalTime:a,submissionCount:i,totalPastes:o,totalKeystrokes:c,totalXP:d,activityDays:h}=t,p=(e-r)/n,m=c+o>0?o/(c+o):0;return i===0&&a<60?"INACTIVE":m>.4&&i>=2&&o>8?"COPYING":a>1800&&i>=2&&d<50?"STRUGGLING":p<-.5&&h<=2&&i>=1&&i<=3?"DISENGAGING":a>1800&&h<=2&&i>=3?"SPRINTING":p<-.5&&p>=-1.5?"COASTING":p>.75&&i>=4&&m<.15&&h>=3?"THRIVING":"ON_TRACK"}const Go={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};function hle(t){switch(t){case"THRIVING":return{categories:["Simulation","Supplemental","Article"],action:"Challenge with advanced or supplemental material. Consider peer-tutoring role.",studentTip:"You're crushing it! Try the simulations and supplemental resources to push further."};case"ON_TRACK":return{categories:["Practice Set","Textbook","Video Lesson"],action:"Continue current approach. Provide enrichment if interest is shown.",studentTip:"Solid work  keep the momentum going with practice sets and readings."};case"COASTING":return{categories:["Practice Set","Simulation","Video Lesson"],action:"Increase engagement with interactive resources. Check in on motivation.",studentTip:"Try a simulation or practice set to boost your skills  small steps add up!"};case"SPRINTING":return{categories:["Textbook","Video Lesson","Practice Set"],action:"Encourage consistent daily engagement instead of cramming. Set micro-goals.",studentTip:"Spreading your study across the week helps retention  try a bit each day."};case"STRUGGLING":return{categories:["Video Lesson","Lab Guide","Practice Set"],action:"Offer direct support. Recommend foundational resources and check understanding.",studentTip:"Your effort shows! Try video lessons for a fresh perspective on tricky topics."};case"DISENGAGING":return{categories:["Video Lesson","Simulation","Article"],action:"Reach out personally. Low-friction resources to re-establish habit.",studentTip:"We miss seeing you active  a quick video or sim is a great way to jump back in."};case"INACTIVE":return{categories:["Video Lesson","Article"],action:"Immediate outreach required. Check for external factors. Lowest-barrier resources.",studentTip:"Start small  even watching one video lesson counts. We're here to help!"};case"COPYING":return{categories:["Practice Set","Textbook","Lab Guide"],action:"Discuss academic integrity. Redirect to original-work resources.",studentTip:"Working through problems yourself builds the strongest understanding  give it a try!"}}}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ple={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>T.createElement("svg",{ref:d,...ple,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:LH("lucide",a),...c},[...o.map(([h,p])=>T.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(mle,{ref:i,iconNode:e,className:LH(`lucide-${fle(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=ze("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=ze("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ze("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=ze("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=ze("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=ze("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ze("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=ze("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=ze("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=ze("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=ze("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=ze("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=ze("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=ze("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=ze("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=ze("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=ze("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=ze("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=ze("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=ze("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ze("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=ze("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=ze("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=ze("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=ze("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=ze("Heading",[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=ze("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=ze("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=ze("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=ze("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=ze("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=ze("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=ze("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=ze("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=ze("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=ze("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=ze("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ze("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ze("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lle=ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ze("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ble=ze("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=ze("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $le=ze("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zle=ze("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ule=ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=ze("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fle=ze("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=ze("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=ze("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ze("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=ze("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=ze("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qle=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ze("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=ze("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hle=ze("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gle=ze("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=ze("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ze("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wle=ze("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=ze("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=ze("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kle=ze("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=ze("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=ze("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xle=ze("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ze("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qle=ze("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yle=ze("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jle=ze("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zle=ze("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ece=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=ze("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tce=ze("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rce=ze("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nce=ze("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ace=ze("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ice="kellporter2@paps.net",ZH="Mr. Porter",BR=[{name:"Dashboard",icon:s.jsx(Ile,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(Y2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resource Editor",icon:s.jsx(vi,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx($i,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx($i,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Enrollment Codes",icon:s.jsx(dg,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(cs,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(ls,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx(ta,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(G2,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(Xv,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(rl,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(Oo,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(Q2,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(Xv,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(cs,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(cl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(kle,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(_le,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Intel Dossier",icon:s.jsx(S0,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(cl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(Oo,{className:"w-5 h-5"}),role:"STUDENT"}],$R=new Set,Ks=(t,e,r)=>$R.has(t)?()=>{}:Wr(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&$R.add(t)}),Ae={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Ks("xp_events",Ut(Me,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await va(ct(Me,"xp_events",t.id),t)},deleteXPEvent:async t=>{await di(ct(Me,"xp_events",t))},subscribeToQuests:t=>Ks("quests",Ut(Me,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await va(ct(Me,"quests",t.id),t)},deleteQuest:async t=>{await di(ct(Me,"quests",t))},acceptQuest:async(t,e)=>{await Loe({questId:e})},deployMission:async(t,e)=>{await Boe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await $oe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Ae.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await zoe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Uoe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Voe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Foe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await qoe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await Hoe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ct(Me,"users",t);r?await lr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await lr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await Woe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ct(Me,"class_messages",t);await f3(Me,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ct(Me,"class_messages",t);await f3(Me,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ct(Me,"class_messages",t);await lr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await di(ct(Me,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=Gr(Ut(Me,"class_messages"),Sn("isFlagged","==",!0),xo(50));return Wr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ct(Me,"class_messages",t);await lr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Ae.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await lr(ct(Me,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await Bl(Ut(Me,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await lr(ct(Me,"student_groups",t),r)},deleteStudentGroup:async t=>{await di(ct(Me,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=Gr(Ut(Me,"student_groups"),Sn("classType","==",t));return Wr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>Wr(Ut(Me,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=Gr(Ut(Me,"student_groups"),Sn("memberIds","array-contains",t));return Wr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=Gr(Ut(Me,"class_messages"),Sn("channelId","==",t),xo(100));return Wr(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=Gr(Ut(Me,"class_messages"),qo("timestamp","desc"),xo(20));return Ks("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=Gr(Ut(Me,"conversations"),qo("lastMessageAt","desc"));return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=Gr(Ut(Me,`conversations/${t}/messages`),qo("timestamp","asc"));return Wr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Fa.ADMIN?ZH:e.name,content:r,timestamp:new Date().toISOString()};await Bl(Ut(Me,`conversations/${t}/messages`),n),await lr(ct(Me,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await lr(ct(Me,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=Gr(Ut(Me,"chat_flags"),Sn("isResolved","==",!1));return Wr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await lr(ct(Me,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=Gr(Ut(Me,"chat_flags"),Sn("messageId","==",t),Sn("isResolved","==",!1)),n=(await vd(e)).docs.map(a=>lr(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=Gr(Ut(Me,"evidence"),Sn("studentId","==",t),Sn("weekId","==",e));return Wr(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await va(ct(Me,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=Cm(Om,n.imageUrl);return doe(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>di(ct(Me,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await va(ct(Me,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ct(Me,"users",t);await lr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await lr(ct(Me,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await lr(ct(Me,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Ut(Me,"users");return Wr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Ut(Me,"assignments");return Wr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0,lessonBlocks:i.lessonBlocks||[]}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=Gr(Ut(Me,"submissions"),qo("submittedAt","desc"),xo(200));return Wr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Kv(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=Gr(Ut(Me,"submissions"),Sn("userId","==",t),xo(50));return Wr(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Kv(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Ut(Me,"allowed_emails");return Wr(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Ut(Me,"class_configs");return Wr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null,lessonBlocks:t.lessonBlocks&&t.lessonBlocks.length>0?t.lessonBlocks:[]};t.id?await va(ct(Me,"assignments",t.id),e,{merge:!0}):await Bl(Ut(Me,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await lr(ct(Me,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await di(ct(Me,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ct(Me,"allowed_emails",t),n=await qa(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await va(r,{classType:e,classTypes:i});const o=Gr(Ut(Me,"users"),Sn("email","==",t)),c=await vd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await lr(ct(Me,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await lr(ct(Me,"allowed_emails",t),{section:e});const r=Gr(Ut(Me,"users"),Sn("email","==",t)),n=await vd(r);await Promise.all(n.docs.map(async a=>{await lr(ct(Me,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await lr(ct(Me,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await lr(ct(Me,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await di(ct(Me,"allowed_emails",t));const e=Gr(Ut(Me,"users"),Sn("email","==",t)),r=await vd(e);await Promise.all(r.docs.map(async n=>{await lr(ct(Me,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ct(Me,"users",t),n=await qa(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await lr(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await qa(ct(Me,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await va(ct(Me,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await qa(ct(Me,"users",t));if(e.exists()){const r=e.data().email;await di(ct(Me,"allowed_emails",r))}await di(ct(Me,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await va(ct(Me,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ct(Me,"submissions",i);(await qa(o)).exists()?await lr(o,{"metrics.engagementTime":Zp(a),"metrics.lastActive":Date.now()}):await va(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ct(Me,"users",t),n=await qa(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await di(ct(Me,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await va(ct(Me,"allowed_emails",i),{classType:e[0],classTypes:e})),await lr(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ct(Me,"users",t),n=await qa(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await lr(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await va(ct(Me,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await lr(ct(Me,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Poe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await Goe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=Gr(Ut(Me,"users"),Sn("role","==","STUDENT"));return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await va(ct(Me,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await di(ct(Me,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Cm(Om,`resources/${e}_${t.name}`);return await FT(r,t),await Gv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Cm(Om,`resources/html/${e}_${t.name}`);return await FT(r,t),await Gv(r)},subscribeToAnnouncements:t=>{const e=Gr(Ut(Me,"announcements"),qo("createdAt","desc"),xo(20));return Ks("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await Bl(Ut(Me,"announcements"),t)},deleteAnnouncement:async t=>{await di(ct(Me,"announcements",t))},dismissAnnouncement:async(t,e)=>{await lr(ct(Me,"users",t),{"gamification.dismissedAnnouncements":wR(e)})},subscribeToNotifications:(t,e)=>{const r=Gr(Ut(Me,"notifications"),Sn("userId","==",t),qo("timestamp","desc"),xo(50));return Wr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await lr(ct(Me,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=Gr(Ut(Me,"notifications"),Sn("userId","==",t),Sn("isRead","==",!1)),n=(await vd(e)).docs.map(a=>lr(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Bl(Ut(Me,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>Bl(Ut(Me,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await lr(ct(Me,"users",t),n)},toggleCodenameLock:async(t,e)=>{await lr(ct(Me,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Xoe({})).data,claimDailyLogin:async()=>(await Qoe({})).data,spinFortuneWheel:async t=>(await Yoe({classType:t})).data,unlockSkill:async(t,e)=>(await Joe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Zoe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await ele({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await tle({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=Gr(Ut(Me,"boss_encounters"),Sn("isActive","==",!0));return Ks("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Ut(Me,"boss_encounters");return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ct(Me,"boss_encounters",t.id);await va(e,t)},toggleBossActive:async(t,e)=>{const r=ct(Me,"boss_encounters",t);await lr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ct(Me,"boss_encounters",t);await di(e)},subscribeToBossShards:(t,e)=>{const r=Ut(Me,`boss_encounters/${t}/shards`);return Wr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Ut(Me,`boss_encounters/${t}/damage_log`);return Wr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await rle({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=Gr(Ut(Me,"boss_quizzes"),Sn("isActive","==",!0));return Ks("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Ut(Me,`boss_quizzes/${t}/shards`);return Wr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossQuizDamageLog:(t,e)=>{const r=Ut(Me,`boss_quizzes/${t}/damage_log`);return Wr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await nle({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Ut(Me,"boss_quizzes");return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ct(Me,"boss_quizzes",t.id);await va(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ct(Me,"boss_quizzes",t);await lr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ct(Me,"boss_quizzes",t);await di(e)},subscribeToBossQuestionBanks:t=>Wr(Ut(Me,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ct(Me,"boss_question_banks",t.id);await va(e,t)},deleteBossQuestionBank:async t=>{await di(ct(Me,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=Gr(Ut(Me,"boss_quiz_progress"),Sn("quizId","==",t));return(await vd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ct(Me,"boss_quiz_progress",`${t}_${e}`);return Wr(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await ale({questId:t,userName:e})).data,joinParty:async(t,e)=>(await ile({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Wr(ct(Me,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Bl(Ut(Me,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await lr(ct(Me,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await lr(ct(Me,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await lr(ct(Me,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ct(Me,"tutoring_sessions",t),a=await qa(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await lr(n,d)},subscribeToAllTutoringSessions:t=>{const e=Gr(Ut(Me,"tutoring_sessions"),qo("createdAt","desc"),xo(100));return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await di(ct(Me,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=Gr(Ut(Me,"tutoring_sessions"),Sn("classType","==",t),xo(50));return Ks("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await sle({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=Gr(Ut(Me,"knowledge_gates"),Sn("isActive","==",!0));return Ks("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await ole({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=Gr(Ut(Me,"seasonal_cosmetics"),Sn("isAvailable","==",!0));return Ks("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await lle({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await lr(ct(Me,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=Gr(Ut(Me,"daily_challenges"),Sn("date","==",e));return Ks("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await cle({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ct(Me,"users",t);await f3(Me,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await qa(ct(Me,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=Gr(Ut(Me,"student_alerts"),Sn("isDismissed","==",!1));return Ks("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await ule({alertId:t})},subscribeToStudentBuckets:t=>Ks("student_buckets",Ut(Me,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=Gr(Ut(Me,"practice_progress"),Sn("userId","==",t));return Wr(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await Bl(Ut(Me,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=Gr(Ut(Me,"bug_reports"),qo("timestamp","desc"),xo(100));return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await lr(ct(Me,"bug_reports",t),{resolved:!0})},updateBugReport:async(t,e)=>{const{id:r,...n}=e;await lr(ct(Me,"bug_reports",t),n)},deleteBugReport:async t=>{await di(ct(Me,"bug_reports",t))},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ct(Ut(Me,"enrollment_codes"));return await va(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=Gr(Ut(Me,"enrollment_codes"),qo("createdAt","desc"));return Wr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await lr(ct(Me,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=Gr(Ut(Me,"enrollment_codes"),Sn("code","==",t.toUpperCase()),Sn("isActive","==",!0)),n=await vd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ct(Me,"users",e),c=await qa(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await lr(o,{enrolledClasses:wR(i.classType),isWhitelisted:!0}),i.section&&await lr(o,{[`classSections.${i.classType}`]:i.section}),await lr(a.ref,{usedCount:Zp(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await Bl(Ut(Me,"behavior_awards"),t);const e=ct(Me,"users",t.studentId);await lr(e,{"gamification.xp":Zp(t.xpAmount),[`gamification.classXp.${t.classType}`]:Zp(t.xpAmount),"gamification.currency":Zp(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=Gr(Ut(Me,"behavior_awards"),Sn("classType","==",t),qo("timestamp","desc"),xo(50));return Wr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ct(Me,"users",t),r=await qa(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),p=[3,7,14,21,30,50,100],m=a.milestones||[],x=p.find(N=>c>=N&&!m.includes(N)),y=x?[...m,x]:m;let S=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(S=Math.min(S+1,a.maxFreezeTokens));const w=[...a.streakHistory||[],i].slice(-30);return await lr(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:S,maxFreezeTokens:3,streakHistory:w,milestones:y}}),{currentStreak:c,freezeUsed:d,newMilestone:x}}},eG=T.createContext(null),Qa=()=>{const t=T.useContext(eG);if(!t)throw new Error("useToast must be used within ToastProvider");return t},sce={success:s.jsx(gn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Mo,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(X2,{className:"w-5 h-5 text-blue-400 shrink-0"})},oce={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},lce=({children:t})=>{const[e,r]=T.useState([]),n=T.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=T.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(eG.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${oce[o.type]}`,children:[sce[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx($n,{className:"w-4 h-4"})})]},o.id))})]})},cce=()=>{const[t,e]=T.useState(navigator.onLine),[r,n]=T.useState(!1);return T.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(nce,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(rce,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var xu=TV();const is=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(T.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?xu.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx($n,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),uce="/favicon.svg";function Ff(){return typeof window<"u"&&"Notification"in window}function yv(){return Ff()?Notification.permission:"unsupported"}async function tG(){return Ff()?await Notification.requestPermission():"unsupported"}function dce(t,e,r){if(!(!Ff()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:uce,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function hce(t,e){const r=T.useRef(new Set),n=T.useRef(!0),a=T.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))dce(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);T.useEffect(()=>{if(!t||!e||!Ff())return;n.current=!0,r.current=new Set;const i=Ae.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const fce=({userId:t})=>{const[e,r]=ie.useState(""),[n,a]=ie.useState(!1),[i,o]=ie.useState(null),[c,d]=ie.useState(null),h=Qa(),p=x=>{const y=x.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);r(y.length>4?y.slice(0,4)+"-"+y.slice(4):y),o(null),d(null)},m=async()=>{if(e.replace("-","").length<4){o("Enter a valid code.");return}a(!0),o(null);try{const x=await Ae.redeemEnrollmentCode(e,t);x.success?(d(`Enrolled in ${x.classType}!`),h.success(`Joined ${x.classType}!`),r("")):o(x.error||"Failed to redeem code.")}catch{o("Something went wrong. Please try again.")}finally{a(!1)}};return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Enrollment"}),s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs font-bold text-white mb-2",children:[s.jsx(dg,{className:"w-3.5 h-3.5 text-emerald-400"}),"Join Another Class"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:x=>p(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!n&&m()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm font-mono font-bold text-emerald-400 tracking-widest placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:n}),s.jsx("button",{onClick:m,disabled:n||e.replace("-","").length<4,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl text-xs font-bold transition flex items-center gap-1.5",children:n?s.jsx(no,{className:"w-3.5 h-3.5 animate-spin"}):"Join"})]}),i&&s.jsx("p",{className:"mt-2 text-xs text-red-400",children:i}),c&&s.jsxs("p",{className:"mt-2 text-xs text-emerald-400 flex items-center gap-1.5",children:[s.jsx(dc,{className:"w-3.5 h-3.5"})," ",c]})]})]})},pce=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var S;const[a,i]=ie.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=ie.useState(((S=r.gamification)==null?void 0:S.codename)||""),[d,h]=ie.useState(!1),p=Qa(),m=w=>{i(N=>({...N,[w]:!N[w]}))},x=async()=>{var w;h(!0);try{await n(a),o!==(((w=r.gamification)==null?void 0:w.codename)||"")&&await Ae.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(N){console.error(N),p.error("Failed to save settings.")}finally{h(!1)}},y=({icon:w,title:N,description:A,value:R,onToggle:O})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${R?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(w,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:N}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:A})]})]}),s.jsx("button",{onClick:O,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${R?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${R?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(is,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:$le,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),s.jsx(y,{icon:Sle,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:ls,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:w=>c(w.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(y,{icon:Vle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),s.jsx(y,{icon:JH,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(w=>({...w,soundEffects:w.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:Ff()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(BH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:yv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(w=>({...w,pushNotifications:!1}));else{const w=await tG();w==="granted"?(i(N=>({...N,pushNotifications:!0})),p.success("Push notifications enabled!")):w==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:yv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${yv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),r.role==="STUDENT"&&s.jsx(fce,{userId:r.id}),s.jsxs("button",{onClick:x,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(no,{className:"w-5 h-5 animate-spin"}):s.jsx(hg,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let w3=null,rG=!0;function mce(t){rG=t}function gce(){if(!w3){const t=window.AudioContext||window.webkitAudioContext;w3=new t}return w3}function sr(t,e,r="sine",n=.15){if(rG)try{const a=gce(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Kn={xpGain:()=>{sr(600,.1,"sine",.1),setTimeout(()=>sr(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>sr(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{sr(1200,.15,"sine",.08),setTimeout(()=>sr(1500,.12,"sine",.06),100),setTimeout(()=>sr(1800,.2,"triangle",.05),180)},questAccept:()=>{sr(440,.15,"square",.06),setTimeout(()=>sr(660,.2,"square",.06),120)},questDeploy:()=>{sr(880,.12,"sawtooth",.05),setTimeout(()=>sr(660,.12,"sawtooth",.05),100),setTimeout(()=>sr(550,.2,"sawtooth",.04),200)},equip:()=>{sr(200,.05,"square",.1),setTimeout(()=>sr(400,.08,"sine",.08),50)},salvage:()=>{sr(300,.15,"sawtooth",.06),setTimeout(()=>sr(200,.2,"sawtooth",.04),100),setTimeout(()=>sr(100,.3,"sawtooth",.03),200)},craft:()=>{sr(150,.08,"square",.1),setTimeout(()=>sr(800,.2,"triangle",.08),60)},error:()=>{sr(200,.15,"square",.08),setTimeout(()=>sr(150,.2,"square",.06),120)},messageSend:()=>{sr(500,.06,"sine",.05)},notification:()=>{sr(800,.1,"sine",.06),setTimeout(()=>sr(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>sr(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{sr(523,.12,"sine",.08),setTimeout(()=>sr(659,.12,"sine",.07),100),setTimeout(()=>sr(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>sr(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{sr(523,.15,"triangle",.1),setTimeout(()=>sr(784,.15,"triangle",.1),120),setTimeout(()=>sr(1047,.3,"sine",.12),240)},skillUnlock:()=>{sr(300,.1,"sawtooth",.06),setTimeout(()=>sr(600,.1,"sawtooth",.06),80),setTimeout(()=>sr(900,.15,"sine",.08),160)},bossHit:()=>{sr(100,.1,"square",.12),setTimeout(()=>sr(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>sr(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{sr(1200,.08,"sine",.08),setTimeout(()=>sr(1600,.1,"sine",.06),60),setTimeout(()=>sr(2e3,.15,"triangle",.04),120)},partyJoin:()=>{sr(440,.1,"sine",.06),setTimeout(()=>sr(554,.1,"sine",.06),80),setTimeout(()=>sr(659,.15,"sine",.05),160)},chestOpen:()=>{sr(200,.15,"square",.06),setTimeout(()=>sr(300,.1,"square",.05),100),setTimeout(()=>sr(500,.1,"triangle",.06),200),setTimeout(()=>sr(800,.2,"sine",.08),350)}},xce={QUEST_APPROVED:s.jsx(ku,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(ku,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx(QT,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(ku,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(XH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx(yle,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(Jv,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx(ta,{className:"w-4 h-4 text-cyan-400"})},zR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(!1),[p,m]=T.useState({}),x=T.useRef(null),y=T.useRef(null),S=T.useRef(0),w=T.useCallback(()=>{if(!x.current)return;const I=x.current.getBoundingClientRect(),k=320;if(n){const E=Math.max(8,I.left),j=E+k>window.innerWidth-8?void 0:E,C=j==null?8:void 0;m({bottom:window.innerHeight-I.top+8,left:j,right:C})}else m({top:I.bottom+8,right:Math.max(8,window.innerWidth-I.right)})},[n]);T.useEffect(()=>{o&&Ff()&&yv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),T.useEffect(()=>{const I=Ae.subscribeToNotifications(t,k=>{const E=k.filter(j=>!j.isRead).length;E>S.current&&S.current>=0&&Kn.notification(),S.current=E,i(k)});return()=>I()},[t]),T.useEffect(()=>{const I=k=>{var j,C;const E=k.target;(j=x.current)!=null&&j.contains(E)||(C=y.current)!=null&&C.contains(E)||c(!1)};return o&&document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[o]),T.useEffect(()=>{if(o)return w(),window.addEventListener("resize",w),window.addEventListener("scroll",w,!0),()=>{window.removeEventListener("resize",w),window.removeEventListener("scroll",w,!0)}},[o,w]);const N=a.filter(I=>!I.isRead).length,A=async()=>{await Ae.markAllNotificationsRead(t)},R=async I=>{I.isRead||await Ae.markNotificationRead(I.id)},O=I=>{const k=Date.now()-new Date(I).getTime();return k<6e4?"just now":k<36e5?`${Math.floor(k/6e4)}m ago`:k<864e5?`${Math.floor(k/36e5)}h ago`:`${Math.floor(k/864e5)}d ago`},L=()=>{o||w(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:x,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(g3,{className:"w-5 h-5"}),N>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:N>9?"9+":N})]}),o&&xu.createPortal(s.jsxs("div",{ref:y,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),N>0&&s.jsxs("button",{onClick:A,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(ble,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(BH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await tG()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(g3,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(I=>s.jsxs("div",{onClick:()=>R(I),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${I.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:xce[I.type]||s.jsx(g3,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:I.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:I.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:O(I.timestamp)})]}),!I.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},I.id))})]}),document.body)]})},yce=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var N,A;const[i,o]=T.useState(""),[c,d]=T.useState(!1),[h,p]=T.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};T.useEffect(()=>{if(!m.liveBackground){o("");return}(async()=>{try{const O=Cm(Om,"public/background.mp4"),L=await Gv(O);o(L)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[m.liveBackground]);const x=async R=>{await Ae.updateUserSettings(t.id,R)},[y,S]=T.useState(null);T.useEffect(()=>{const R=BR.find(O=>{var L;return(L=O.children)==null?void 0:L.some(I=>r===`${O.name}:${I.name}`)});R&&S(R.name)},[r]);const w=()=>{const R=BR.filter(L=>!(L.role==="ADMIN"&&t.role!==Fa.ADMIN||L.role==="STUDENT"&&t.role!==Fa.STUDENT)),O=L=>{var I;return(I=L.children)==null?void 0:I.some(k=>r===`${L.name}:${k.name}`)};return s.jsx(s.Fragment,{children:R.map(L=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{L.children?y===L.name?S(null):(S(L.name),O(L)||(n(`${L.name}:${L.children[0].name}`),p(!1))):(n(L.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===L.name||O(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===L.name||O(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&s.jsx(Ei,{className:`w-3.5 h-3.5 transition-transform ${y===L.name?"rotate-180":""} ${O(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&y===L.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(I=>{const k=`${L.name}:${I.name}`;return s.jsxs("button",{onClick:()=>{n(k),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===k?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===k?"text-white":"text-gray-600",children:I.icon}),I.name]},I.name)})})]},L.name))})};return s.jsxs("div",{className:`flex flex-col lg:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"lg:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(Oo,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zR,{userId:t.id,settings:m,onUpdateSettings:x}),s.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(Ple,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((N=t.gamification)==null?void 0:N.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx($n,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(w,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(o0,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(RR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden lg:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(Oo,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Fa.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(w,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((A=t.gamification)==null?void 0:A.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(zR,{userId:t.id,settings:m,onUpdateSettings:x,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(o0,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(RR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-6 lg:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(pce,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:x})]})},vce=[.75,1,1.25,1.5,2],UR=({textContent:t,compact:e})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(1),[o,c]=T.useState(0),[d,h]=T.useState(!1),p=T.useRef(null),m=T.useRef([]);T.useEffect(()=>{if(!t){m.current=[];return}const L=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(I=>I.trim()).filter(I=>I.length>2);m.current=L,c(0)},[t]);const x=T.useCallback(()=>{window.speechSynthesis.cancel(),n(!1)},[]),y=T.useCallback(L=>{const I=m.current;if(L<0||L>=I.length){n(!1);return}window.speechSynthesis.cancel();const k=new SpeechSynthesisUtterance(I[L]);k.rate=a,k.onend=()=>{const E=L+1;E<I.length?(c(E),y(E)):n(!1)},k.onerror=()=>{n(!1)},p.current=k,c(L),window.speechSynthesis.speak(k)},[a]),S=T.useCallback(()=>{r?x():(n(!0),y(o))},[r,o,y,x]),w=T.useCallback(()=>{const L=Math.max(0,o-1);c(L),r&&y(L)},[o,r,y]),N=T.useCallback(()=>{const L=Math.min(m.current.length-1,o+1);c(L),r&&y(L)},[o,r,y]),A=T.useCallback(L=>{if(i(L),h(!1),r){window.speechSynthesis.cancel();const I=new SpeechSynthesisUtterance(m.current[o]);I.rate=L,I.onend=()=>{const k=o+1;k<m.current.length?(c(k),y(k)):n(!1)},p.current=I,window.speechSynthesis.speak(I)}},[r,o,y]);if(T.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||m.current.length===0)return null;if(e)return s.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${r?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r?"Stop Reading":"Read Aloud",children:[r?s.jsx(tce,{className:"w-3 h-3"}):s.jsx(JH,{className:"w-3 h-3"}),r?"Stop Reading":"Read Aloud"]});const R=m.current.length,O=R>0?(o+1)/R*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:S,className:`p-1.5 rounded-lg transition ${r?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:r?s.jsx(Fle,{className:"w-4 h-4"}):s.jsx(Uf,{className:"w-4 h-4"})}),s.jsx("button",{onClick:w,disabled:o===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Hle,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:N,disabled:o>=R-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Gle,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${O}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[o+1,"/",R]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(Ele,{className:"w-3 h-3"}),a,"x"]}),d&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:vce.map(L=>s.jsxs("button",{onClick:()=>A(L),className:`block w-full text-left px-3 py-1.5 text-xs transition ${a===L?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[L,"x"]},L))})]})]})},VR="portal-annotations-",FR="portal-annotation-warning-dismissed",bce=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],wce=[2,4,6,8],Sce=({containerRef:t,onAnnotationsChange:e,assignmentId:r})=>{const n=T.useRef(null),[a,i]=T.useState(!1),[o,c]=T.useState("pen"),[d,h]=T.useState("#ef4444"),[p,m]=T.useState(4),[x,y]=T.useState(!1),[S,w]=T.useState(!1),[N,A]=T.useState(!1),[R,O]=T.useState(!1),[L,I]=T.useState(!1),k=T.useRef([]),E=T.useRef(!1),j=T.useRef([]);T.useEffect(()=>{if(!r)return;const pe=localStorage.getItem(`${VR}${r}`);I(!!pe)},[r]);const C=T.useCallback(()=>r?`${VR}${r}`:null,[r]),q=T.useCallback(()=>{const pe=C();if(pe){if(k.current.length===0){localStorage.removeItem(pe),I(!1);return}localStorage.setItem(pe,JSON.stringify(k.current)),I(!0)}},[C]),D=T.useCallback(()=>{const pe=C();if(!pe)return;const Be=localStorage.getItem(pe);if(Be)try{k.current=JSON.parse(Be),e==null||e(k.current.length>0)}catch{k.current=[]}},[C,e]),$=T.useCallback(()=>{const pe=C();pe&&localStorage.removeItem(pe),I(!1)},[C]),B=T.useCallback(()=>{const pe=n.current,Be=t.current;if(!pe||!Be)return;const Ue=Be.getBoundingClientRect();pe.width=Ue.width,pe.height=Ue.height,pe.style.width=`${Ue.width}px`,pe.style.height=`${Ue.height}px`,V()},[t]);T.useEffect(()=>{if(!a)return;B();const pe=new ResizeObserver(B);return t.current&&pe.observe(t.current),()=>pe.disconnect()},[a,B,t]);const V=T.useCallback(()=>{const pe=n.current;if(!pe)return;const Be=pe.getContext("2d");if(Be){Be.clearRect(0,0,pe.width,pe.height);for(const Ue of k.current)if(!(Ue.points.length<2)){Be.beginPath(),Be.strokeStyle=Ue.tool==="eraser"?"rgba(0,0,0,0)":Ue.color,Be.lineWidth=Ue.width,Be.lineCap="round",Be.lineJoin="round",Ue.tool==="eraser"?Be.globalCompositeOperation="destination-out":Be.globalCompositeOperation="source-over",Be.moveTo(Ue.points[0].x,Ue.points[0].y);for(let Fe=1;Fe<Ue.points.length;Fe++)Be.lineTo(Ue.points[Fe].x,Ue.points[Fe].y);Be.stroke()}Be.globalCompositeOperation="source-over"}},[]),W=T.useCallback(pe=>{const Be=n.current;if(!Be)return null;const Ue=Be.getBoundingClientRect();if("touches"in pe){const Fe=pe.touches[0];return{x:Fe.clientX-Ue.left,y:Fe.clientY-Ue.top}}return{x:pe.clientX-Ue.left,y:pe.clientY-Ue.top}},[]),G=T.useCallback(pe=>{if(!a)return;pe.preventDefault();const Be=W(pe);Be&&(E.current=!0,j.current=[Be])},[a,W]),Y=T.useCallback(pe=>{if(!E.current||!a)return;pe.preventDefault();const Be=W(pe);if(!Be)return;j.current.push(Be);const Ue=n.current;if(!Ue)return;const Fe=Ue.getContext("2d");if(!Fe)return;const Ne=j.current;if(Ne.length<2)return;Fe.beginPath(),o==="eraser"?(Fe.globalCompositeOperation="destination-out",Fe.strokeStyle="rgba(0,0,0,1)"):(Fe.globalCompositeOperation="source-over",Fe.strokeStyle=d),Fe.lineWidth=o==="eraser"?p*4:p,Fe.lineCap="round",Fe.lineJoin="round";const He=Ne[Ne.length-2],Z=Ne[Ne.length-1];Fe.moveTo(He.x,He.y),Fe.lineTo(Z.x,Z.y),Fe.stroke(),Fe.globalCompositeOperation="source-over"},[a,W,o,d,p]),re=T.useCallback(()=>{E.current&&(E.current=!1,j.current.length>1&&(k.current.push({points:[...j.current],color:d,width:o==="eraser"?p*4:p,tool:o}),e==null||e(k.current.length>0)),j.current=[])},[d,p,o,e]),ce=T.useCallback(()=>{k.current.pop(),V(),e==null||e(k.current.length>0)},[V,e]),de=T.useCallback(()=>{k.current=[],V(),e==null||e(!1)},[V,e]),X=T.useCallback(()=>{if(!(localStorage.getItem(FR)==="true")){A(!0);return}D(),i(!0)},[D]),ae=T.useCallback(()=>{R&&localStorage.setItem(FR,"true"),A(!1),O(!1),D(),i(!0)},[R,D]),ne=T.useCallback(()=>{q(),i(!1),y(!1),w(!1)},[q]),ve=T.useCallback(()=>{k.current=[],V(),$(),e==null||e(!1),i(!1),y(!1),w(!1)},[V,$,e]);return s.jsxs(s.Fragment,{children:[a?s.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest text-green-300 bg-green-500/15 border-green-500/25",children:[s.jsx(v3,{className:"w-3 h-3 animate-pulse"}),"Drawing"]}):s.jsxs("button",{onClick:X,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${L?"text-amber-300 bg-amber-500/15 border-amber-500/25 hover:bg-amber-500/25":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:L?"Resume saved annotations":"Start annotating",children:[s.jsx(v3,{className:"w-3 h-3"}),L?"Resume Notes":"Annotate"]}),N&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl max-w-md w-full mx-4 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:s.jsx(X2,{className:"w-5 h-5 text-purple-400"})}),s.jsx("h3",{className:"text-white font-semibold text-lg",children:"Annotation Mode"})]}),s.jsxs("div",{className:"text-gray-400 text-sm space-y-3 mb-6",children:[s.jsx("p",{children:"You're about to enter annotation mode. While active, you can draw directly on the content using the pen and eraser tools."}),s.jsx("p",{children:"When you're done, you have two options:"}),s.jsxs("ul",{className:"list-none space-y-2 pl-1",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(hg,{className:"w-4 h-4 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-green-300",children:"Save & Exit"}),"  Your annotations are preserved. You can return to them later."]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx($n,{className:"w-4 h-4 text-red-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-red-300",children:"Discard & Exit"}),"  All annotations are permanently deleted."]})]})]})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-500 mb-5 cursor-pointer select-none",children:[s.jsx("input",{type:"checkbox",checked:R,onChange:pe=>O(pe.target.checked),className:"w-4 h-4 rounded border-white/20 bg-white/5 accent-purple-500"}),"Don't show this again"]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{A(!1),O(!1)},className:"px-4 py-2 text-sm text-gray-400 hover:text-white transition cursor-pointer",children:"Cancel"}),s.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-medium transition cursor-pointer",children:"Start Annotating"})]})]})}),a&&s.jsx("canvas",{ref:n,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:G,onMouseMove:Y,onMouseUp:re,onMouseLeave:re,onTouchStart:G,onTouchMove:Y,onTouchEnd:re}),a&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>c("pen"),className:`p-2 rounded-lg transition cursor-pointer ${o==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(v3,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>c("eraser"),className:`p-2 rounded-lg transition cursor-pointer ${o==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(jle,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{y(!x),w(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition cursor-pointer",title:"Color",children:[s.jsx(Ule,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:d}})]}),x&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:bce.map(pe=>s.jsx("button",{onClick:()=>{h(pe),y(!1)},className:`w-6 h-6 rounded-full border-2 transition cursor-pointer ${d===pe?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:pe}},pe))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{w(!S),y(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition cursor-pointer",title:"Line width",children:s.jsx(mE,{className:"w-4 h-4"})}),S&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:wce.map(pe=>s.jsx("button",{onClick:()=>{m(pe),w(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition cursor-pointer ${p===pe?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:pe*2,height:pe*2}})},pe))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:ce,disabled:k.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition cursor-pointer",title:"Undo last stroke",children:s.jsx(Yle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:de,disabled:k.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition cursor-pointer",title:"Clear all strokes",children:s.jsx(Cn,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("button",{onClick:ne,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-green-300 bg-green-500/15 hover:bg-green-500/25 border border-green-500/20 transition cursor-pointer",title:"Save annotations and exit drawing mode",children:[s.jsx(hg,{className:"w-3.5 h-3.5"}),"Save & Exit"]}),s.jsxs("button",{onClick:ve,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-red-300 bg-red-500/15 hover:bg-red-500/25 border border-red-500/20 transition cursor-pointer",title:"Discard all annotations and exit",children:[s.jsx($n,{className:"w-3.5 h-3.5"}),"Discard & Exit"]})]})]})},qR=new Set(["TEXT","MC","SHORT_ANSWER","CHECKLIST","VOCABULARY","SECTION_HEADER","VIDEO","OBJECTIVES","VOCAB_LIST","ACTIVITY","SORTING","DATA_TABLE","BAR_CHART","RANKING","LINKED"]),HR=new Set(["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"]),Nce={TEXT:s.jsx(zf,{className:"w-3 h-3"}),MC:s.jsx(W2,{className:"w-3 h-3"}),SHORT_ANSWER:s.jsx(rf,{className:"w-3 h-3"}),CHECKLIST:s.jsx(pE,{className:"w-3 h-3"}),VOCABULARY:s.jsx(vi,{className:"w-3 h-3"}),SECTION_HEADER:s.jsx(qH,{className:"w-3 h-3"}),VIDEO:s.jsx(Uf,{className:"w-3 h-3"}),OBJECTIVES:s.jsx(cs,{className:"w-3 h-3"}),VOCAB_LIST:s.jsx(vi,{className:"w-3 h-3"}),ACTIVITY:s.jsx(ta,{className:"w-3 h-3"}),SORTING:s.jsx(H2,{className:"w-3 h-3"}),DATA_TABLE:s.jsx(QH,{className:"w-3 h-3"}),BAR_CHART:s.jsx(S0,{className:"w-3 h-3"}),RANKING:s.jsx(ug,{className:"w-3 h-3"}),LINKED:s.jsx(Yv,{className:"w-3 h-3"})},GR={TEXT:"Reading",MC:"Question",SHORT_ANSWER:"Response",CHECKLIST:"Checklist",VOCABULARY:"Vocabulary",SECTION_HEADER:"Section",VIDEO:"Video",OBJECTIVES:"Objectives",VOCAB_LIST:"Vocab List",ACTIVITY:"Activity",SORTING:"Sorting",DATA_TABLE:"Data Table",BAR_CHART:"Bar Chart",RANKING:"Ranking",LINKED:"Follow-up"},_ce=({blocks:t,currentBlockIndex:e,completedBlocks:r,onNavigateToBlock:n,engagementTime:a=0,xpEarned:i=0})=>{const[o,c]=T.useState(!1),d=t.filter(O=>["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"].includes(O.type)),h=d.filter(O=>r.has(O.id)).length,p=d.length,m=p>0?Math.round(h/p*100):e>=t.length-1?100:Math.round((e+1)/t.length*100),x=o?36:64,y=o?4:6,S=(x-y)/2,w=2*Math.PI*S,N=w-m/100*w,A=Math.floor(a/60),R=a%60;return o?s.jsxs("div",{className:"w-12 flex-shrink-0 flex flex-col items-center gap-2 py-3",children:[s.jsx("button",{onClick:()=>c(!1),className:"p-1 text-gray-600 hover:text-purple-400 transition cursor-pointer",title:"Expand sidebar",children:s.jsx(zH,{className:"w-3.5 h-3.5"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:x,height:x,className:"transform -rotate-90",children:[s.jsx("circle",{cx:x/2,cy:x/2,r:S,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:y}),s.jsx("circle",{cx:x/2,cy:x/2,r:S,fill:"none",stroke:m===100?"#34d399":"#a855f7",strokeWidth:y,strokeLinecap:"round",strokeDasharray:w,strokeDashoffset:N,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("span",{className:`text-[9px] font-black ${m===100?"text-emerald-400":"text-white"}`,children:m})})]}),s.jsxs("span",{className:"text-[8px] text-gray-600 font-mono",children:[A,":",String(R).padStart(2,"0")]}),s.jsx("div",{className:"flex flex-col gap-0.5 items-center mt-1",children:t.map((O,L)=>{if(!qR.has(O.type))return null;const I=L===e,k=r.has(O.id),E=HR.has(O.type);return s.jsx("button",{onClick:()=>n(L),className:`rounded-full transition cursor-pointer ${E?"w-2.5 h-2.5":"w-2 h-2"} ${I?"bg-purple-400 ring-1 ring-purple-400/50":k?"bg-emerald-400/80":E?"bg-amber-500/30 hover:bg-amber-500/50":"bg-white/10 hover:bg-white/20"}`,title:`${GR[O.type]||O.type}${E?" (XP)":""}`},O.id)})})]}):s.jsxs("div",{className:"w-44 flex-shrink-0 flex flex-col gap-3 overflow-y-auto custom-scrollbar py-2 pr-1",children:[s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsx("span",{className:"text-[8px] text-gray-600 uppercase font-bold tracking-widest",children:"Progress"}),s.jsx("button",{onClick:()=>c(!0),className:"p-1 text-gray-600 hover:text-purple-400 transition cursor-pointer",title:"Collapse sidebar",children:s.jsx(nl,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex flex-col items-center gap-1.5 bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:x,height:x,className:"transform -rotate-90",children:[s.jsx("circle",{cx:x/2,cy:x/2,r:S,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:y}),s.jsx("circle",{cx:x/2,cy:x/2,r:S,fill:"none",stroke:m===100?"#34d399":"#a855f7",strokeWidth:y,strokeLinecap:"round",strokeDasharray:w,strokeDashoffset:N,className:"transition-all duration-700 ease-out"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:`text-sm font-black ${m===100?"text-emerald-400":"text-white"}`,children:[m,"%"]})})]}),s.jsxs("div",{className:"text-[9px] text-gray-500 font-bold",children:[h,"/",p," complete"]}),s.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-gray-600 font-mono",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ps,{className:"w-2.5 h-2.5"})," ",A,":",String(R).padStart(2,"0")]}),i>0&&s.jsxs("span",{className:"text-amber-400",children:["+",i]})]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-2 border border-white/5 flex flex-col gap-0.5",children:[s.jsx("div",{className:"text-[8px] text-gray-600 uppercase font-bold tracking-widest px-1.5 mb-0.5",children:"Contents"}),t.map((O,L)=>{if(!qR.has(O.type))return null;const I=L===e,k=r.has(O.id),E=HR.has(O.type);return O.type==="SECTION_HEADER"?s.jsx("button",{onClick:()=>n(L),className:`flex items-center gap-1.5 px-1.5 py-1 mt-1 first:mt-0 text-left text-[9px] font-bold uppercase tracking-wider cursor-pointer transition ${I?"text-purple-300":"text-gray-500 hover:text-gray-300"}`,children:s.jsxs("span",{className:"truncate",children:[O.icon||""," ",O.title||"Section"]})},O.id):s.jsxs("button",{onClick:()=>n(L),className:`flex items-center gap-1.5 px-1.5 py-1 rounded-md text-left transition-all text-[10px] cursor-pointer ${I?"bg-purple-500/20 text-purple-300":k?"text-emerald-400/70 hover:bg-emerald-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx("span",{className:"shrink-0 w-3.5 h-3.5 flex items-center justify-center",children:k?s.jsx(gn,{className:"w-3 h-3 text-emerald-400"}):s.jsx("span",{className:I?"text-purple-400":"text-gray-600",children:Nce[O.type]||s.jsx(zf,{className:"w-3 h-3"})})}),s.jsx("span",{className:"truncate flex-1 font-medium",children:GR[O.type]||O.type}),E&&!k&&s.jsx(Vf,{className:"w-2.5 h-2.5 text-amber-400/60 shrink-0"})]},O.id)})]})]})},Tce=["MC","SHORT_ANSWER","CHECKLIST","SORTING","RANKING","LINKED"],jce=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),Ace=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},Ece=({block:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(W2,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx(gn,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(Co,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},kce=({block:t,onComplete:e})=>{const[r,n]=T.useState(""),[a,i]=T.useState(!1),[o,c]=T.useState(!1),d=()=>{if(!r.trim())return;const p=(t.acceptedAnswers||[]).map(m=>m.toLowerCase().trim()).includes(r.toLowerCase().trim());c(p),i(!0),e(p)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(rf,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(gn,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Co,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},Cce=({block:t})=>{const[e,r]=T.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(vi,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},Oce=({block:t,onComplete:e})=>{const[r,n]=T.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(pE,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx(gn,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx(gn,{className:"w-3 h-3"})," All items completed!"]})]})},Ice=({block:t})=>s.jsxs("div",{className:"text-center py-2",children:[t.icon&&s.jsx("div",{className:"text-3xl mb-2",children:t.icon}),s.jsx("h2",{className:"text-xl font-black text-white tracking-tight",children:t.title}),t.subtitle&&s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.subtitle})]}),Rce=({block:t})=>{const e=(t.url||"").replace(/\/file\/d\/([^/]+)\/.*/,"/uc?export=view&id=$1");return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",children:s.jsx("img",{src:e!==t.url?e:t.url,alt:t.alt||t.caption||"",className:"w-full max-h-[500px] object-contain",loading:"lazy"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]})},Mce=({block:t})=>{const r=(n=>{const a=n.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return a?`https://www.youtube.com/embed/${a[1]}`:""})(t.url||"");return r?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 aspect-video bg-black",children:s.jsx("iframe",{src:r,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",title:t.caption||"Video"})}),t.caption&&s.jsxs("p",{className:"text-xs text-gray-500 text-center italic flex items-center justify-center gap-1",children:[s.jsx(Uf,{className:"w-3 h-3"})," ",t.caption]})]}):s.jsx("div",{className:"text-sm text-gray-500 italic",children:"Invalid video URL"})},Dce=({block:t})=>s.jsxs("div",{className:"border border-emerald-500/20 bg-emerald-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-emerald-400 font-bold text-sm",children:[s.jsx(cs,{className:"w-4 h-4"}),t.title||"Learning Objectives"]}),s.jsx("ul",{className:"space-y-1",children:(t.items||[]).map((e,r)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[s.jsx("span",{className:"text-emerald-400 mt-0.5 shrink-0",children:""}),e]},r))})]}),Pce=()=>s.jsx("div",{className:"lesson-divider"}),Lce=({block:t})=>s.jsx("a",{href:t.url,target:t.openInNewTab!==!1?"_blank":"_self",rel:"noopener noreferrer",className:"block p-4 rounded-xl border border-purple-500/20 bg-purple-500/5 hover:bg-purple-500/10 transition group",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-purple-300 group-hover:text-purple-200 transition",children:t.title||t.url}),t.content&&s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:t.content})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-purple-400 bg-purple-500/10 px-3 py-1.5 rounded-lg shrink-0 ml-3",children:[t.buttonLabel||"Open"," ",s.jsx(hE,{className:"w-3 h-3"})]})]})}),Bce=({block:t})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10 bg-black/20",style:{height:t.height||500},children:s.jsx("iframe",{src:t.url,className:"w-full h-full border-0",title:t.caption||"Embedded content",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}),t.caption&&s.jsx("p",{className:"text-xs text-gray-500 text-center italic",children:t.caption})]}),$ce=({block:t})=>{const[e,r]=T.useState(new Set);return s.jsx("div",{className:"space-y-2",children:(t.terms||[]).map((n,a)=>s.jsx("button",{onClick:()=>r(i=>{const o=new Set(i);return o.has(a)?o.delete(a):o.add(a),o}),className:"w-full text-left p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(vi,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:n.term}),e.has(a)?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:n.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal"})]})]})},a))})},zce=({block:t})=>s.jsxs("div",{className:"border border-amber-500/20 bg-amber-500/5 rounded-xl p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-amber-400 font-bold text-sm",children:[t.icon&&s.jsx("span",{className:"text-lg",children:t.icon}),t.title||"Activity"]}),s.jsx("div",{className:"text-sm text-gray-300 whitespace-pre-line",children:t.instructions})]}),Uce=({block:t,onComplete:e})=>{const r=t.sortItems||[],[n,a]=T.useState({}),[i,o]=T.useState(!1),c=r.map((S,w)=>w).filter(S=>!(S in n)),d=Object.entries(n).filter(([,S])=>S==="left").map(([S])=>parseInt(S)),h=Object.entries(n).filter(([,S])=>S==="right").map(([S])=>parseInt(S)),p=(S,w)=>{i||a(N=>({...N,[S]:w}))},m=S=>{i||a(w=>{const N={...w};return delete N[S],N})},x=()=>{if(c.length>0)return;o(!0);const S=r.every((w,N)=>n[N]===w.correct);e(S)},y=r.filter((S,w)=>n[w]===S.correct).length;return s.jsxs("div",{className:"space-y-3",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),t.instructions&&s.jsx("p",{className:"text-xs text-gray-400",children:t.instructions}),c.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Sort these items"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(S=>s.jsxs("div",{className:"flex items-center gap-1 bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-sm text-gray-300",children:[s.jsx("span",{children:r[S].text}),s.jsx("button",{onClick:()=>p(S,"left"),className:"ml-1 text-[10px] bg-blue-500/20 text-blue-300 px-1.5 py-0.5 rounded hover:bg-blue-500/30 transition",children:t.leftLabel||"L"}),s.jsx("button",{onClick:()=>p(S,"right"),className:"text-[10px] bg-orange-500/20 text-orange-300 px-1.5 py-0.5 rounded hover:bg-orange-500/30 transition",children:t.rightLabel||"R"})]},S))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"rounded-xl border border-blue-500/20 bg-blue-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:t.leftLabel||"Category A"}),s.jsx("div",{className:"space-y-1",children:d.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="left"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>m(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="left"&&s.jsx(gn,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="left"&&s.jsx(Co,{className:"w-3 h-3 text-red-400"})]},S))})]}),s.jsxs("div",{className:"rounded-xl border border-orange-500/20 bg-orange-500/5 p-3 min-h-[80px]",children:[s.jsx("div",{className:"text-xs font-bold text-orange-400 uppercase tracking-widest mb-2",children:t.rightLabel||"Category B"}),s.jsx("div",{className:"space-y-1",children:h.map(S=>s.jsxs("div",{className:`flex items-center justify-between px-2 py-1 rounded text-sm ${i?r[S].correct==="right"?"text-green-400 bg-green-500/10":"text-red-400 bg-red-500/10":"text-gray-300 bg-black/20"}`,children:[s.jsx("span",{children:r[S].text}),!i&&s.jsx("button",{onClick:()=>m(S),className:"text-gray-500 hover:text-red-400 text-xs",children:""}),i&&r[S].correct==="right"&&s.jsx(gn,{className:"w-3 h-3 text-green-400"}),i&&r[S].correct!=="right"&&s.jsx(Co,{className:"w-3 h-3 text-red-400"})]},S))})]})]}),!i&&c.length===0&&r.length>0&&s.jsx("button",{onClick:x,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Sorting"}),i&&s.jsx("div",{className:`text-xs font-bold ${y===r.length?"text-green-400":"text-amber-400"}`,children:y===r.length?"All correct!":`${y}/${r.length} correct`})]})},Vce=({block:t})=>{const e=t.columns||[],r=t.trials||3,[n,a]=T.useState(()=>Array.from({length:r},()=>Object.fromEntries(e.map(o=>[o.key,""])))),i=(o,c,d)=>{a(h=>{const p=[...h];return p[o]={...p[o],[c]:d},p})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium",children:t.title}),s.jsx("div",{className:"overflow-x-auto rounded-xl border border-white/10",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/30",children:[s.jsx("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left w-12",children:"#"}),e.map(o=>s.jsxs("th",{className:"px-3 py-2 text-[10px] text-gray-500 uppercase font-bold text-left",children:[o.label,o.unit?` (${o.unit})`:""]},o.key))]})}),s.jsx("tbody",{children:n.map((o,c)=>s.jsxs("tr",{className:"border-t border-white/5",children:[s.jsx("td",{className:"px-3 py-1 text-xs text-gray-600 font-mono",children:c+1}),e.map(d=>s.jsx("td",{className:"px-1 py-1",children:d.editable!==!1?s.jsx("input",{type:"text",value:o[d.key]||"",onChange:h=>i(c,d.key,h.target.value),className:"w-full bg-black/20 border border-white/5 rounded px-2 py-1 text-sm text-white placeholder-gray-700 focus:outline-none focus:border-purple-500/50 transition"}):s.jsx("span",{className:"px-2 py-1 text-gray-400",children:o[d.key]})},d.key))]},c))})]})})]})},Fce=({block:t})=>{const e=t.barCount||3,r=t.height||300,[n,a]=T.useState(()=>Array(e).fill(0)),i=Math.max(...n.map(Math.abs),1),o=["#a855f7","#3b82f6","#ef4444","#22c55e","#f59e0b","#06b6d4","#ec4899","#8b5cf6","#14b8a6","#f97316"],c=(d,h)=>{const p=h.currentTarget.getBoundingClientRect(),m=h.clientY-p.top,x=Math.round((p.height/2-m)/(p.height/2)*10);a(y=>{const S=[...y];return S[d]=x,S})};return s.jsxs("div",{className:"space-y-2",children:[t.title&&s.jsx("p",{className:"text-sm text-white font-medium text-center",children:t.title}),s.jsx("div",{className:"flex items-end justify-center gap-4 px-4",style:{height:r},children:n.map((d,h)=>{const p=Math.abs(d)/Math.max(i,10)*(r/2-20);return s.jsxs("div",{className:"flex flex-col items-center gap-1 flex-1 h-full justify-center cursor-pointer",onClick:m=>c(h,m),children:[s.jsxs("div",{className:"relative w-full max-w-[60px] h-full flex items-center",children:[s.jsx("div",{className:"absolute inset-0 border-b border-white/10",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 rounded-t-lg transition-all duration-200",style:{height:p,bottom:d>=0?"50%":void 0,top:d<0?"50%":void 0,backgroundColor:o[h%o.length],opacity:.8}})]}),s.jsx("div",{className:"text-[10px] text-gray-400 font-mono",children:d}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Bar ",h+1]})]},h)})}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 px-4",children:[s.jsx("span",{children:t.initialLabel}),s.jsx("span",{children:t.deltaLabel}),s.jsx("span",{children:t.finalLabel})]})]})},qce=({block:t,onComplete:e})=>{const r=t.items||[],n=T.useMemo(()=>{const y=r.map((w,N)=>({item:w,origIdx:N}));let S=t.id.split("").reduce((w,N)=>w+N.charCodeAt(0),0);for(let w=y.length-1;w>0;w--){S=(S*16807+0)%2147483647;const N=S%(w+1);[y[w],y[N]]=[y[N],y[w]]}return y},[t.id,r]),[a,i]=T.useState(n),[o,c]=T.useState(!1),[d,h]=T.useState(null),p=(y,S)=>{o||i(w=>{const N=[...w],[A]=N.splice(y,1);return N.splice(S,0,A),N})},m=()=>{c(!0);const y=a.every((S,w)=>S.origIdx===w);e(y)},x=a.filter((y,S)=>y.origIdx===S).length;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(ug,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-1",children:a.map((y,S)=>s.jsxs("div",{draggable:!o,onDragStart:()=>h(S),onDragOver:w=>w.preventDefault(),onDrop:()=>{d!==null&&p(d,S),h(null)},className:`flex items-center gap-2 p-3 rounded-xl border text-sm transition cursor-grab active:cursor-grabbing ${o?y.origIdx===S?"border-green-500/30 bg-green-500/5 text-green-400":"border-red-500/30 bg-red-500/5 text-red-400":d===S?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx(ug,{className:"w-4 h-4 text-gray-600 shrink-0"}),s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[S+1,"."]}),s.jsx("span",{className:"flex-1",children:y.item}),o&&y.origIdx===S&&s.jsx(gn,{className:"w-4 h-4 text-green-400"}),o&&y.origIdx!==S&&s.jsx(Co,{className:"w-4 h-4 text-red-400"}),!o&&s.jsxs("div",{className:"flex gap-0.5",children:[s.jsx("button",{onClick:()=>S>0&&p(S,S-1),disabled:S===0,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(nl,{className:"w-3 h-3 -rotate-90"})}),s.jsx("button",{onClick:()=>S<a.length-1&&p(S,S+1),disabled:S===a.length-1,className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20",children:s.jsx(nl,{className:"w-3 h-3 rotate-90"})})]})]},y.origIdx))}),!o&&s.jsx("button",{onClick:m,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-xl text-xs font-bold transition",children:"Check Order"}),o&&s.jsx("div",{className:`text-xs font-bold ${x===r.length?"text-green-400":"text-amber-400"}`,children:x===r.length?"Perfect order!":`${x}/${r.length} in correct position`})]})},Hce=({block:t,allBlocks:e,onComplete:r})=>{var m;const n=e.find(x=>x.id===t.linkedBlockId),[a,i]=T.useState(""),[o,c]=T.useState(!1),[d,h]=T.useState(!1),p=()=>{if(!a.trim())return;const x=(t.acceptedAnswers||[]).map(S=>S.toLowerCase().trim()),y=x.length===0||x.includes(a.toLowerCase().trim());h(y),c(!0),r(y)};return s.jsxs("div",{className:"space-y-3",children:[n&&s.jsxs("div",{className:"border border-white/10 bg-white/5 rounded-xl p-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest mb-1 flex items-center gap-1",children:[s.jsx(Yv,{className:"w-3 h-3"})," Referenced question"]}),s.jsx("p",{className:"text-xs text-gray-400",children:n.content})]}),s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(Yv,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),disabled:o,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:x=>x.key==="Enter"&&p()}),!o&&s.jsx("button",{onClick:p,disabled:!a.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),o&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${d?"text-green-400":"text-amber-400"}`,children:d?s.jsxs(s.Fragment,{children:[s.jsx(gn,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Co,{className:"w-3 h-3"})," ",(t.acceptedAnswers||[]).length>0?`Accepted: ${(m=t.acceptedAnswers)==null?void 0:m.join(", ")}`:"Response recorded"]})})]})},JT=({blocks:t,onBlockComplete:e,onAllComplete:r,showSidebar:n=!1,engagementTime:a,xpEarned:i})=>{const[o,c]=T.useState(new Set),[d,h]=T.useState(0),p=T.useRef(null),m=T.useRef(new Map),x=T.useCallback((A,R)=>{e==null||e(A,R),c(O=>{const L=new Set(O);return L.add(A),t.filter(k=>Tce.includes(k.type)).every(k=>L.has(k.id))&&(r==null||r()),L})},[t,e,r]);T.useEffect(()=>{const A=m.current;if(A.size===0)return;const R=new IntersectionObserver(O=>{O.forEach(I=>{const k=I.target;I.isIntersecting?(k.classList.add("block-visible"),k.classList.remove("block-hidden")):k.classList.contains("block-visible")&&(k.classList.remove("block-visible"),k.classList.add("block-hidden"))});let L=t.length-1;for(let I=0;I<t.length;I++){const k=A.get(t[I].id);if(k&&k.classList.contains("block-visible")){L=I;break}}h(L)},{root:p.current,rootMargin:"0px 0px -10% 0px",threshold:.15});return A.forEach(O=>R.observe(O)),()=>R.disconnect()},[t]);const y=T.useCallback(A=>{const R=t[A];if(!R)return;const O=m.current.get(R.id);O&&O.scrollIntoView({behavior:"smooth",block:"center"})},[t]);if(t.length===0)return null;const S=A=>{const R=O=>x(A.id,O);switch(A.type){case"TEXT":return s.jsx(jce,{block:A});case"INFO_BOX":return s.jsx(Ace,{block:A});case"MC":return s.jsx(Ece,{block:A,onComplete:R});case"SHORT_ANSWER":return s.jsx(kce,{block:A,onComplete:R});case"VOCABULARY":return s.jsx(Cce,{block:A});case"CHECKLIST":return s.jsx(Oce,{block:A,onComplete:R});case"SECTION_HEADER":return s.jsx(Ice,{block:A});case"IMAGE":return s.jsx(Rce,{block:A});case"VIDEO":return s.jsx(Mce,{block:A});case"OBJECTIVES":return s.jsx(Dce,{block:A});case"DIVIDER":return s.jsx(Pce,{});case"EXTERNAL_LINK":return s.jsx(Lce,{block:A});case"EMBED":return s.jsx(Bce,{block:A});case"VOCAB_LIST":return s.jsx($ce,{block:A});case"ACTIVITY":return s.jsx(zce,{block:A});case"SORTING":return s.jsx(Uce,{block:A,onComplete:R});case"DATA_TABLE":return s.jsx(Vce,{block:A});case"BAR_CHART":return s.jsx(Fce,{block:A});case"RANKING":return s.jsx(qce,{block:A,onComplete:R});case"LINKED":return s.jsx(Hce,{block:A,allBlocks:t,onComplete:R});default:return s.jsxs("div",{className:"text-sm text-gray-500 italic",children:["Unknown block type: ",A.type]})}},w=t.length>1?Math.round((d+1)/t.length*100):100,N=s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 shrink-0",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${w}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[d+1,"/",t.length]})]}),s.jsx("div",{ref:p,className:"flex-1 overflow-y-auto custom-scrollbar",style:{scrollBehavior:"smooth"},children:s.jsx("div",{className:"flex flex-col gap-6 pb-24 px-1",children:t.map((A,R)=>s.jsx("div",{ref:O=>{O&&m.current.set(A.id,O)},className:`block-reveal ${A.type==="DIVIDER"?"":"bg-white/[0.03] border border-white/[0.06] rounded-2xl p-5"}`,"data-stagger":R%4,style:{scrollMarginTop:20},children:S(A)},A.id))})})]});return n&&t.length>=3?s.jsxs("div",{className:"flex gap-4 h-full",children:[N,s.jsx(_ce,{blocks:t,currentBlockIndex:d,completedBlocks:o,onNavigateToBlock:y,engagementTime:a,xpEarned:i})]}):N};class es{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new es(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Rs{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Rs(r,es.range(this,e))}}class ut{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ut.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ut.prototype.__proto__=Error.prototype;var Gce=function(e,r){return e===void 0?r:e},Wce=/([A-Z])/g,Kce=function(e){return e.replace(Wce,"-$1").toLowerCase()},Xce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Qce=/[&><"']/g;function Yce(t){return String(t).replace(Qce,e=>Xce[e])}var nG=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Jce=function(e){var r=nG(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Zce=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},eue=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Zr={deflt:Gce,escape:Yce,hyphenate:Kce,getBaseElem:nG,isCharacterBox:Jce,protocolFromUrl:eue},vv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function tue(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class xE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in vv)if(vv.hasOwnProperty(r)){var n=vv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:tue(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ut("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Zr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class iu{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Ko[rue[this.id]]}sub(){return Ko[nue[this.id]]}fracNum(){return Ko[aue[this.id]]}fracDen(){return Ko[iue[this.id]]}cramp(){return Ko[sue[this.id]]}text(){return Ko[oue[this.id]]}isTight(){return this.size>=2}}var yE=0,rb=1,Mh=2,tc=3,pg=4,eo=5,af=6,Pi=7,Ko=[new iu(yE,0,!1),new iu(rb,0,!0),new iu(Mh,1,!1),new iu(tc,1,!0),new iu(pg,2,!1),new iu(eo,2,!0),new iu(af,3,!1),new iu(Pi,3,!0)],rue=[pg,eo,pg,eo,af,Pi,af,Pi],nue=[eo,eo,eo,eo,Pi,Pi,Pi,Pi],aue=[Mh,tc,pg,eo,af,Pi,af,Pi],iue=[tc,tc,eo,eo,Pi,Pi,Pi,Pi],sue=[rb,rb,tc,tc,eo,eo,Pi,Pi],oue=[yE,rb,Mh,tc,Mh,tc,Mh,tc],Xt={DISPLAY:Ko[yE],TEXT:Ko[Mh],SCRIPT:Ko[pg],SCRIPTSCRIPT:Ko[af]},ZT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function lue(t){for(var e=0;e<ZT.length;e++)for(var r=ZT[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var bv=[];ZT.forEach(t=>t.blocks.forEach(e=>bv.push(...e)));function aG(t){for(var e=0;e<bv.length;e+=2)if(t>=bv[e]&&t<=bv[e+1])return!0;return!1}var hh=80,cue=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},uue=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},due=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},hue=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},fue=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},pue=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},mue=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},gue=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=cue(r,hh);break;case"sqrtSize1":a=uue(r,hh);break;case"sqrtSize2":a=due(r,hh);break;case"sqrtSize3":a=hue(r,hh);break;case"sqrtSize4":a=fue(r,hh);break;case"sqrtTall":a=mue(r,hh,n)}return a},xue=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},WR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},yue=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ax{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Jo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},jy={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},KR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function vue(t,e){Jo[t]=e}function vE(t,e,r){if(!Jo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Jo[e][n];if(!a&&t[0]in KR&&(n=KR[t[0]].charCodeAt(0),a=Jo[e][n]),!a&&r==="text"&&aG(n)&&(a=Jo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var S3={};function bue(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!S3[e]){var r=S3[e]={cssEmPerMu:jy.quad[e]/18};for(var n in jy)jy.hasOwnProperty(n)&&(r[n]=jy[n][e])}return S3[e]}var wue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],XR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],QR=function(e,r){return r.size<2?e:wue[e-1][r.size-1]};class Fl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Fl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=XR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Fl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:QR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:XR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=QR(Fl.BASESIZE,e);return this.size===r&&this.textSize===Fl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Fl.BASESIZE?["sizing","reset-size"+this.size,"size"+Fl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=bue(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Fl.BASESIZE=6;var ej={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Sue={ex:!0,em:!0,mu:!0},iG=function(e){return typeof e!="string"&&(e=e.unit),e in ej||e in Sue||e==="ex"},aa=function(e,r){var n;if(e.unit in ej)n=ej[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ut("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},xt=function(e){return+e.toFixed(4)+"em"},Lu=function(e){return e.filter(r=>r).join(" ")},sG=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},oG=function(e){var r=document.createElement(e);r.className=Lu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},Nue=/[\s"'>/=\x00-\x1f]/,lG=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Zr.escape(Lu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Zr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Zr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(Nue.test(i))throw new ut("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Zr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class Ex{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,sG.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return oG.call(this,"span")}toMarkup(){return lG.call(this,"span")}}class bE{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,sG.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return oG.call(this,"a")}toMarkup(){return lG.call(this,"a")}}class _ue{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Zr.escape(this.src)+'"'+(' alt="'+Zr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Zr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Zr.escape(r)+'"'),e+="'/>",e}}var Tue={:"",:"",:"",:""};class io{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=lue(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=Tue[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=xt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Lu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Zr.escape(Lu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Zr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Zr.escape(n)+'"');var i=Zr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class hc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Zr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Bu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",WR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Zr.escape(this.alternate)+'"/>':'<path d="'+Zr.escape(WR[this.pathName])+'"/>'}}class tj{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Zr.escape(this.attributes[r])+'"');return e+="/>",e}}function YR(t){if(t instanceof io)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function jue(t){if(t instanceof Ex)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Aue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Eue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Fn={math:{},text:{}};function M(t,e,r,n,a,i){Fn[t][a]={font:e,group:r,replace:n},i&&n&&(Fn[t][n]=Fn[t][a])}var z="math",at="text",K="main",oe="ams",ra="accent-token",Tt="bin",Ui="close",qf="inner",Kt="mathord",La="op-token",Ls="open",J2="punct",le="rel",Sc="spacing",ge="textord";M(z,K,le,"","\\equiv",!0);M(z,K,le,"","\\prec",!0);M(z,K,le,"","\\succ",!0);M(z,K,le,"","\\sim",!0);M(z,K,le,"","\\perp");M(z,K,le,"","\\preceq",!0);M(z,K,le,"","\\succeq",!0);M(z,K,le,"","\\simeq",!0);M(z,K,le,"","\\mid",!0);M(z,K,le,"","\\ll",!0);M(z,K,le,"","\\gg",!0);M(z,K,le,"","\\asymp",!0);M(z,K,le,"","\\parallel");M(z,K,le,"","\\bowtie",!0);M(z,K,le,"","\\smile",!0);M(z,K,le,"","\\sqsubseteq",!0);M(z,K,le,"","\\sqsupseteq",!0);M(z,K,le,"","\\doteq",!0);M(z,K,le,"","\\frown",!0);M(z,K,le,"","\\ni",!0);M(z,K,le,"","\\propto",!0);M(z,K,le,"","\\vdash",!0);M(z,K,le,"","\\dashv",!0);M(z,K,le,"","\\owns");M(z,K,J2,".","\\ldotp");M(z,K,J2,"","\\cdotp");M(z,K,ge,"#","\\#");M(at,K,ge,"#","\\#");M(z,K,ge,"&","\\&");M(at,K,ge,"&","\\&");M(z,K,ge,"","\\aleph",!0);M(z,K,ge,"","\\forall",!0);M(z,K,ge,"","\\hbar",!0);M(z,K,ge,"","\\exists",!0);M(z,K,ge,"","\\nabla",!0);M(z,K,ge,"","\\flat",!0);M(z,K,ge,"","\\ell",!0);M(z,K,ge,"","\\natural",!0);M(z,K,ge,"","\\clubsuit",!0);M(z,K,ge,"","\\wp",!0);M(z,K,ge,"","\\sharp",!0);M(z,K,ge,"","\\diamondsuit",!0);M(z,K,ge,"","\\Re",!0);M(z,K,ge,"","\\heartsuit",!0);M(z,K,ge,"","\\Im",!0);M(z,K,ge,"","\\spadesuit",!0);M(z,K,ge,"","\\S",!0);M(at,K,ge,"","\\S");M(z,K,ge,"","\\P",!0);M(at,K,ge,"","\\P");M(z,K,ge,"","\\dag");M(at,K,ge,"","\\dag");M(at,K,ge,"","\\textdagger");M(z,K,ge,"","\\ddag");M(at,K,ge,"","\\ddag");M(at,K,ge,"","\\textdaggerdbl");M(z,K,Ui,"","\\rmoustache",!0);M(z,K,Ls,"","\\lmoustache",!0);M(z,K,Ui,"","\\rgroup",!0);M(z,K,Ls,"","\\lgroup",!0);M(z,K,Tt,"","\\mp",!0);M(z,K,Tt,"","\\ominus",!0);M(z,K,Tt,"","\\uplus",!0);M(z,K,Tt,"","\\sqcap",!0);M(z,K,Tt,"","\\ast");M(z,K,Tt,"","\\sqcup",!0);M(z,K,Tt,"","\\bigcirc",!0);M(z,K,Tt,"","\\bullet",!0);M(z,K,Tt,"","\\ddagger");M(z,K,Tt,"","\\wr",!0);M(z,K,Tt,"","\\amalg");M(z,K,Tt,"&","\\And");M(z,K,le,"","\\longleftarrow",!0);M(z,K,le,"","\\Leftarrow",!0);M(z,K,le,"","\\Longleftarrow",!0);M(z,K,le,"","\\longrightarrow",!0);M(z,K,le,"","\\Rightarrow",!0);M(z,K,le,"","\\Longrightarrow",!0);M(z,K,le,"","\\leftrightarrow",!0);M(z,K,le,"","\\longleftrightarrow",!0);M(z,K,le,"","\\Leftrightarrow",!0);M(z,K,le,"","\\Longleftrightarrow",!0);M(z,K,le,"","\\mapsto",!0);M(z,K,le,"","\\longmapsto",!0);M(z,K,le,"","\\nearrow",!0);M(z,K,le,"","\\hookleftarrow",!0);M(z,K,le,"","\\hookrightarrow",!0);M(z,K,le,"","\\searrow",!0);M(z,K,le,"","\\leftharpoonup",!0);M(z,K,le,"","\\rightharpoonup",!0);M(z,K,le,"","\\swarrow",!0);M(z,K,le,"","\\leftharpoondown",!0);M(z,K,le,"","\\rightharpoondown",!0);M(z,K,le,"","\\nwarrow",!0);M(z,K,le,"","\\rightleftharpoons",!0);M(z,oe,le,"","\\nless",!0);M(z,oe,le,"","\\@nleqslant");M(z,oe,le,"","\\@nleqq");M(z,oe,le,"","\\lneq",!0);M(z,oe,le,"","\\lneqq",!0);M(z,oe,le,"","\\@lvertneqq");M(z,oe,le,"","\\lnsim",!0);M(z,oe,le,"","\\lnapprox",!0);M(z,oe,le,"","\\nprec",!0);M(z,oe,le,"","\\npreceq",!0);M(z,oe,le,"","\\precnsim",!0);M(z,oe,le,"","\\precnapprox",!0);M(z,oe,le,"","\\nsim",!0);M(z,oe,le,"","\\@nshortmid");M(z,oe,le,"","\\nmid",!0);M(z,oe,le,"","\\nvdash",!0);M(z,oe,le,"","\\nvDash",!0);M(z,oe,le,"","\\ntriangleleft");M(z,oe,le,"","\\ntrianglelefteq",!0);M(z,oe,le,"","\\subsetneq",!0);M(z,oe,le,"","\\@varsubsetneq");M(z,oe,le,"","\\subsetneqq",!0);M(z,oe,le,"","\\@varsubsetneqq");M(z,oe,le,"","\\ngtr",!0);M(z,oe,le,"","\\@ngeqslant");M(z,oe,le,"","\\@ngeqq");M(z,oe,le,"","\\gneq",!0);M(z,oe,le,"","\\gneqq",!0);M(z,oe,le,"","\\@gvertneqq");M(z,oe,le,"","\\gnsim",!0);M(z,oe,le,"","\\gnapprox",!0);M(z,oe,le,"","\\nsucc",!0);M(z,oe,le,"","\\nsucceq",!0);M(z,oe,le,"","\\succnsim",!0);M(z,oe,le,"","\\succnapprox",!0);M(z,oe,le,"","\\ncong",!0);M(z,oe,le,"","\\@nshortparallel");M(z,oe,le,"","\\nparallel",!0);M(z,oe,le,"","\\nVDash",!0);M(z,oe,le,"","\\ntriangleright");M(z,oe,le,"","\\ntrianglerighteq",!0);M(z,oe,le,"","\\@nsupseteqq");M(z,oe,le,"","\\supsetneq",!0);M(z,oe,le,"","\\@varsupsetneq");M(z,oe,le,"","\\supsetneqq",!0);M(z,oe,le,"","\\@varsupsetneqq");M(z,oe,le,"","\\nVdash",!0);M(z,oe,le,"","\\precneqq",!0);M(z,oe,le,"","\\succneqq",!0);M(z,oe,le,"","\\@nsubseteqq");M(z,oe,Tt,"","\\unlhd");M(z,oe,Tt,"","\\unrhd");M(z,oe,le,"","\\nleftarrow",!0);M(z,oe,le,"","\\nrightarrow",!0);M(z,oe,le,"","\\nLeftarrow",!0);M(z,oe,le,"","\\nRightarrow",!0);M(z,oe,le,"","\\nleftrightarrow",!0);M(z,oe,le,"","\\nLeftrightarrow",!0);M(z,oe,le,"","\\vartriangle");M(z,oe,ge,"","\\hslash");M(z,oe,ge,"","\\triangledown");M(z,oe,ge,"","\\lozenge");M(z,oe,ge,"","\\circledS");M(z,oe,ge,"","\\circledR");M(at,oe,ge,"","\\circledR");M(z,oe,ge,"","\\measuredangle",!0);M(z,oe,ge,"","\\nexists");M(z,oe,ge,"","\\mho");M(z,oe,ge,"","\\Finv",!0);M(z,oe,ge,"","\\Game",!0);M(z,oe,ge,"","\\backprime");M(z,oe,ge,"","\\blacktriangle");M(z,oe,ge,"","\\blacktriangledown");M(z,oe,ge,"","\\blacksquare");M(z,oe,ge,"","\\blacklozenge");M(z,oe,ge,"","\\bigstar");M(z,oe,ge,"","\\sphericalangle",!0);M(z,oe,ge,"","\\complement",!0);M(z,oe,ge,"","\\eth",!0);M(at,K,ge,"","");M(z,oe,ge,"","\\diagup");M(z,oe,ge,"","\\diagdown");M(z,oe,ge,"","\\square");M(z,oe,ge,"","\\Box");M(z,oe,ge,"","\\Diamond");M(z,oe,ge,"","\\yen",!0);M(at,oe,ge,"","\\yen",!0);M(z,oe,ge,"","\\checkmark",!0);M(at,oe,ge,"","\\checkmark");M(z,oe,ge,"","\\beth",!0);M(z,oe,ge,"","\\daleth",!0);M(z,oe,ge,"","\\gimel",!0);M(z,oe,ge,"","\\digamma",!0);M(z,oe,ge,"","\\varkappa");M(z,oe,Ls,"","\\@ulcorner",!0);M(z,oe,Ui,"","\\@urcorner",!0);M(z,oe,Ls,"","\\@llcorner",!0);M(z,oe,Ui,"","\\@lrcorner",!0);M(z,oe,le,"","\\leqq",!0);M(z,oe,le,"","\\leqslant",!0);M(z,oe,le,"","\\eqslantless",!0);M(z,oe,le,"","\\lesssim",!0);M(z,oe,le,"","\\lessapprox",!0);M(z,oe,le,"","\\approxeq",!0);M(z,oe,Tt,"","\\lessdot");M(z,oe,le,"","\\lll",!0);M(z,oe,le,"","\\lessgtr",!0);M(z,oe,le,"","\\lesseqgtr",!0);M(z,oe,le,"","\\lesseqqgtr",!0);M(z,oe,le,"","\\doteqdot");M(z,oe,le,"","\\risingdotseq",!0);M(z,oe,le,"","\\fallingdotseq",!0);M(z,oe,le,"","\\backsim",!0);M(z,oe,le,"","\\backsimeq",!0);M(z,oe,le,"","\\subseteqq",!0);M(z,oe,le,"","\\Subset",!0);M(z,oe,le,"","\\sqsubset",!0);M(z,oe,le,"","\\preccurlyeq",!0);M(z,oe,le,"","\\curlyeqprec",!0);M(z,oe,le,"","\\precsim",!0);M(z,oe,le,"","\\precapprox",!0);M(z,oe,le,"","\\vartriangleleft");M(z,oe,le,"","\\trianglelefteq");M(z,oe,le,"","\\vDash",!0);M(z,oe,le,"","\\Vvdash",!0);M(z,oe,le,"","\\smallsmile");M(z,oe,le,"","\\smallfrown");M(z,oe,le,"","\\bumpeq",!0);M(z,oe,le,"","\\Bumpeq",!0);M(z,oe,le,"","\\geqq",!0);M(z,oe,le,"","\\geqslant",!0);M(z,oe,le,"","\\eqslantgtr",!0);M(z,oe,le,"","\\gtrsim",!0);M(z,oe,le,"","\\gtrapprox",!0);M(z,oe,Tt,"","\\gtrdot");M(z,oe,le,"","\\ggg",!0);M(z,oe,le,"","\\gtrless",!0);M(z,oe,le,"","\\gtreqless",!0);M(z,oe,le,"","\\gtreqqless",!0);M(z,oe,le,"","\\eqcirc",!0);M(z,oe,le,"","\\circeq",!0);M(z,oe,le,"","\\triangleq",!0);M(z,oe,le,"","\\thicksim");M(z,oe,le,"","\\thickapprox");M(z,oe,le,"","\\supseteqq",!0);M(z,oe,le,"","\\Supset",!0);M(z,oe,le,"","\\sqsupset",!0);M(z,oe,le,"","\\succcurlyeq",!0);M(z,oe,le,"","\\curlyeqsucc",!0);M(z,oe,le,"","\\succsim",!0);M(z,oe,le,"","\\succapprox",!0);M(z,oe,le,"","\\vartriangleright");M(z,oe,le,"","\\trianglerighteq");M(z,oe,le,"","\\Vdash",!0);M(z,oe,le,"","\\shortmid");M(z,oe,le,"","\\shortparallel");M(z,oe,le,"","\\between",!0);M(z,oe,le,"","\\pitchfork",!0);M(z,oe,le,"","\\varpropto");M(z,oe,le,"","\\blacktriangleleft");M(z,oe,le,"","\\therefore",!0);M(z,oe,le,"","\\backepsilon");M(z,oe,le,"","\\blacktriangleright");M(z,oe,le,"","\\because",!0);M(z,oe,le,"","\\llless");M(z,oe,le,"","\\gggtr");M(z,oe,Tt,"","\\lhd");M(z,oe,Tt,"","\\rhd");M(z,oe,le,"","\\eqsim",!0);M(z,K,le,"","\\Join");M(z,oe,le,"","\\Doteq",!0);M(z,oe,Tt,"","\\dotplus",!0);M(z,oe,Tt,"","\\smallsetminus");M(z,oe,Tt,"","\\Cap",!0);M(z,oe,Tt,"","\\Cup",!0);M(z,oe,Tt,"","\\doublebarwedge",!0);M(z,oe,Tt,"","\\boxminus",!0);M(z,oe,Tt,"","\\boxplus",!0);M(z,oe,Tt,"","\\divideontimes",!0);M(z,oe,Tt,"","\\ltimes",!0);M(z,oe,Tt,"","\\rtimes",!0);M(z,oe,Tt,"","\\leftthreetimes",!0);M(z,oe,Tt,"","\\rightthreetimes",!0);M(z,oe,Tt,"","\\curlywedge",!0);M(z,oe,Tt,"","\\curlyvee",!0);M(z,oe,Tt,"","\\circleddash",!0);M(z,oe,Tt,"","\\circledast",!0);M(z,oe,Tt,"","\\centerdot");M(z,oe,Tt,"","\\intercal",!0);M(z,oe,Tt,"","\\doublecap");M(z,oe,Tt,"","\\doublecup");M(z,oe,Tt,"","\\boxtimes",!0);M(z,oe,le,"","\\dashrightarrow",!0);M(z,oe,le,"","\\dashleftarrow",!0);M(z,oe,le,"","\\leftleftarrows",!0);M(z,oe,le,"","\\leftrightarrows",!0);M(z,oe,le,"","\\Lleftarrow",!0);M(z,oe,le,"","\\twoheadleftarrow",!0);M(z,oe,le,"","\\leftarrowtail",!0);M(z,oe,le,"","\\looparrowleft",!0);M(z,oe,le,"","\\leftrightharpoons",!0);M(z,oe,le,"","\\curvearrowleft",!0);M(z,oe,le,"","\\circlearrowleft",!0);M(z,oe,le,"","\\Lsh",!0);M(z,oe,le,"","\\upuparrows",!0);M(z,oe,le,"","\\upharpoonleft",!0);M(z,oe,le,"","\\downharpoonleft",!0);M(z,K,le,"","\\origof",!0);M(z,K,le,"","\\imageof",!0);M(z,oe,le,"","\\multimap",!0);M(z,oe,le,"","\\leftrightsquigarrow",!0);M(z,oe,le,"","\\rightrightarrows",!0);M(z,oe,le,"","\\rightleftarrows",!0);M(z,oe,le,"","\\twoheadrightarrow",!0);M(z,oe,le,"","\\rightarrowtail",!0);M(z,oe,le,"","\\looparrowright",!0);M(z,oe,le,"","\\curvearrowright",!0);M(z,oe,le,"","\\circlearrowright",!0);M(z,oe,le,"","\\Rsh",!0);M(z,oe,le,"","\\downdownarrows",!0);M(z,oe,le,"","\\upharpoonright",!0);M(z,oe,le,"","\\downharpoonright",!0);M(z,oe,le,"","\\rightsquigarrow",!0);M(z,oe,le,"","\\leadsto");M(z,oe,le,"","\\Rrightarrow",!0);M(z,oe,le,"","\\restriction");M(z,K,ge,"","`");M(z,K,ge,"$","\\$");M(at,K,ge,"$","\\$");M(at,K,ge,"$","\\textdollar");M(z,K,ge,"%","\\%");M(at,K,ge,"%","\\%");M(z,K,ge,"_","\\_");M(at,K,ge,"_","\\_");M(at,K,ge,"_","\\textunderscore");M(z,K,ge,"","\\angle",!0);M(z,K,ge,"","\\infty",!0);M(z,K,ge,"","\\prime");M(z,K,ge,"","\\triangle");M(z,K,ge,"","\\Gamma",!0);M(z,K,ge,"","\\Delta",!0);M(z,K,ge,"","\\Theta",!0);M(z,K,ge,"","\\Lambda",!0);M(z,K,ge,"","\\Xi",!0);M(z,K,ge,"","\\Pi",!0);M(z,K,ge,"","\\Sigma",!0);M(z,K,ge,"","\\Upsilon",!0);M(z,K,ge,"","\\Phi",!0);M(z,K,ge,"","\\Psi",!0);M(z,K,ge,"","\\Omega",!0);M(z,K,ge,"A","");M(z,K,ge,"B","");M(z,K,ge,"E","");M(z,K,ge,"Z","");M(z,K,ge,"H","");M(z,K,ge,"I","");M(z,K,ge,"K","");M(z,K,ge,"M","");M(z,K,ge,"N","");M(z,K,ge,"O","");M(z,K,ge,"P","");M(z,K,ge,"T","");M(z,K,ge,"X","");M(z,K,ge,"","\\neg",!0);M(z,K,ge,"","\\lnot");M(z,K,ge,"","\\top");M(z,K,ge,"","\\bot");M(z,K,ge,"","\\emptyset");M(z,oe,ge,"","\\varnothing");M(z,K,Kt,"","\\alpha",!0);M(z,K,Kt,"","\\beta",!0);M(z,K,Kt,"","\\gamma",!0);M(z,K,Kt,"","\\delta",!0);M(z,K,Kt,"","\\epsilon",!0);M(z,K,Kt,"","\\zeta",!0);M(z,K,Kt,"","\\eta",!0);M(z,K,Kt,"","\\theta",!0);M(z,K,Kt,"","\\iota",!0);M(z,K,Kt,"","\\kappa",!0);M(z,K,Kt,"","\\lambda",!0);M(z,K,Kt,"","\\mu",!0);M(z,K,Kt,"","\\nu",!0);M(z,K,Kt,"","\\xi",!0);M(z,K,Kt,"","\\omicron",!0);M(z,K,Kt,"","\\pi",!0);M(z,K,Kt,"","\\rho",!0);M(z,K,Kt,"","\\sigma",!0);M(z,K,Kt,"","\\tau",!0);M(z,K,Kt,"","\\upsilon",!0);M(z,K,Kt,"","\\phi",!0);M(z,K,Kt,"","\\chi",!0);M(z,K,Kt,"","\\psi",!0);M(z,K,Kt,"","\\omega",!0);M(z,K,Kt,"","\\varepsilon",!0);M(z,K,Kt,"","\\vartheta",!0);M(z,K,Kt,"","\\varpi",!0);M(z,K,Kt,"","\\varrho",!0);M(z,K,Kt,"","\\varsigma",!0);M(z,K,Kt,"","\\varphi",!0);M(z,K,Tt,"","*",!0);M(z,K,Tt,"+","+");M(z,K,Tt,"","-",!0);M(z,K,Tt,"","\\cdot",!0);M(z,K,Tt,"","\\circ",!0);M(z,K,Tt,"","\\div",!0);M(z,K,Tt,"","\\pm",!0);M(z,K,Tt,"","\\times",!0);M(z,K,Tt,"","\\cap",!0);M(z,K,Tt,"","\\cup",!0);M(z,K,Tt,"","\\setminus",!0);M(z,K,Tt,"","\\land");M(z,K,Tt,"","\\lor");M(z,K,Tt,"","\\wedge",!0);M(z,K,Tt,"","\\vee",!0);M(z,K,ge,"","\\surd");M(z,K,Ls,"","\\langle",!0);M(z,K,Ls,"","\\lvert");M(z,K,Ls,"","\\lVert");M(z,K,Ui,"?","?");M(z,K,Ui,"!","!");M(z,K,Ui,"","\\rangle",!0);M(z,K,Ui,"","\\rvert");M(z,K,Ui,"","\\rVert");M(z,K,le,"=","=");M(z,K,le,":",":");M(z,K,le,"","\\approx",!0);M(z,K,le,"","\\cong",!0);M(z,K,le,"","\\ge");M(z,K,le,"","\\geq",!0);M(z,K,le,"","\\gets");M(z,K,le,">","\\gt",!0);M(z,K,le,"","\\in",!0);M(z,K,le,"","\\@not");M(z,K,le,"","\\subset",!0);M(z,K,le,"","\\supset",!0);M(z,K,le,"","\\subseteq",!0);M(z,K,le,"","\\supseteq",!0);M(z,oe,le,"","\\nsubseteq",!0);M(z,oe,le,"","\\nsupseteq",!0);M(z,K,le,"","\\models");M(z,K,le,"","\\leftarrow",!0);M(z,K,le,"","\\le");M(z,K,le,"","\\leq",!0);M(z,K,le,"<","\\lt",!0);M(z,K,le,"","\\rightarrow",!0);M(z,K,le,"","\\to");M(z,oe,le,"","\\ngeq",!0);M(z,oe,le,"","\\nleq",!0);M(z,K,Sc,"","\\ ");M(z,K,Sc,"","\\space");M(z,K,Sc,"","\\nobreakspace");M(at,K,Sc,"","\\ ");M(at,K,Sc,""," ");M(at,K,Sc,"","\\space");M(at,K,Sc,"","\\nobreakspace");M(z,K,Sc,null,"\\nobreak");M(z,K,Sc,null,"\\allowbreak");M(z,K,J2,",",",");M(z,K,J2,";",";");M(z,oe,Tt,"","\\barwedge",!0);M(z,oe,Tt,"","\\veebar",!0);M(z,K,Tt,"","\\odot",!0);M(z,K,Tt,"","\\oplus",!0);M(z,K,Tt,"","\\otimes",!0);M(z,K,ge,"","\\partial",!0);M(z,K,Tt,"","\\oslash",!0);M(z,oe,Tt,"","\\circledcirc",!0);M(z,oe,Tt,"","\\boxdot",!0);M(z,K,Tt,"","\\bigtriangleup");M(z,K,Tt,"","\\bigtriangledown");M(z,K,Tt,"","\\dagger");M(z,K,Tt,"","\\diamond");M(z,K,Tt,"","\\star");M(z,K,Tt,"","\\triangleleft");M(z,K,Tt,"","\\triangleright");M(z,K,Ls,"{","\\{");M(at,K,ge,"{","\\{");M(at,K,ge,"{","\\textbraceleft");M(z,K,Ui,"}","\\}");M(at,K,ge,"}","\\}");M(at,K,ge,"}","\\textbraceright");M(z,K,Ls,"{","\\lbrace");M(z,K,Ui,"}","\\rbrace");M(z,K,Ls,"[","\\lbrack",!0);M(at,K,ge,"[","\\lbrack",!0);M(z,K,Ui,"]","\\rbrack",!0);M(at,K,ge,"]","\\rbrack",!0);M(z,K,Ls,"(","\\lparen",!0);M(z,K,Ui,")","\\rparen",!0);M(at,K,ge,"<","\\textless",!0);M(at,K,ge,">","\\textgreater",!0);M(z,K,Ls,"","\\lfloor",!0);M(z,K,Ui,"","\\rfloor",!0);M(z,K,Ls,"","\\lceil",!0);M(z,K,Ui,"","\\rceil",!0);M(z,K,ge,"\\","\\backslash");M(z,K,ge,"","|");M(z,K,ge,"","\\vert");M(at,K,ge,"|","\\textbar",!0);M(z,K,ge,"","\\|");M(z,K,ge,"","\\Vert");M(at,K,ge,"","\\textbardbl");M(at,K,ge,"~","\\textasciitilde");M(at,K,ge,"\\","\\textbackslash");M(at,K,ge,"^","\\textasciicircum");M(z,K,le,"","\\uparrow",!0);M(z,K,le,"","\\Uparrow",!0);M(z,K,le,"","\\downarrow",!0);M(z,K,le,"","\\Downarrow",!0);M(z,K,le,"","\\updownarrow",!0);M(z,K,le,"","\\Updownarrow",!0);M(z,K,La,"","\\coprod");M(z,K,La,"","\\bigvee");M(z,K,La,"","\\bigwedge");M(z,K,La,"","\\biguplus");M(z,K,La,"","\\bigcap");M(z,K,La,"","\\bigcup");M(z,K,La,"","\\int");M(z,K,La,"","\\intop");M(z,K,La,"","\\iint");M(z,K,La,"","\\iiint");M(z,K,La,"","\\prod");M(z,K,La,"","\\sum");M(z,K,La,"","\\bigotimes");M(z,K,La,"","\\bigoplus");M(z,K,La,"","\\bigodot");M(z,K,La,"","\\oint");M(z,K,La,"","\\oiint");M(z,K,La,"","\\oiiint");M(z,K,La,"","\\bigsqcup");M(z,K,La,"","\\smallint");M(at,K,qf,"","\\textellipsis");M(z,K,qf,"","\\mathellipsis");M(at,K,qf,"","\\ldots",!0);M(z,K,qf,"","\\ldots",!0);M(z,K,qf,"","\\@cdots",!0);M(z,K,qf,"","\\ddots",!0);M(z,K,ge,"","\\varvdots");M(at,K,ge,"","\\varvdots");M(z,K,ra,"","\\acute");M(z,K,ra,"","\\grave");M(z,K,ra,"","\\ddot");M(z,K,ra,"~","\\tilde");M(z,K,ra,"","\\bar");M(z,K,ra,"","\\breve");M(z,K,ra,"","\\check");M(z,K,ra,"^","\\hat");M(z,K,ra,"","\\vec");M(z,K,ra,"","\\dot");M(z,K,ra,"","\\mathring");M(z,K,Kt,"","\\@imath");M(z,K,Kt,"","\\@jmath");M(z,K,ge,"","");M(z,K,ge,"","");M(at,K,ge,"","\\i",!0);M(at,K,ge,"","\\j",!0);M(at,K,ge,"","\\ss",!0);M(at,K,ge,"","\\ae",!0);M(at,K,ge,"","\\oe",!0);M(at,K,ge,"","\\o",!0);M(at,K,ge,"","\\AE",!0);M(at,K,ge,"","\\OE",!0);M(at,K,ge,"","\\O",!0);M(at,K,ra,"","\\'");M(at,K,ra,"","\\`");M(at,K,ra,"","\\^");M(at,K,ra,"","\\~");M(at,K,ra,"","\\=");M(at,K,ra,"","\\u");M(at,K,ra,"","\\.");M(at,K,ra,"","\\c");M(at,K,ra,"","\\r");M(at,K,ra,"","\\v");M(at,K,ra,"",'\\"');M(at,K,ra,"","\\H");M(at,K,ra,"","\\textcircled");var cG={"--":!0,"---":!0,"``":!0,"''":!0};M(at,K,ge,"","--",!0);M(at,K,ge,"","\\textendash");M(at,K,ge,"","---",!0);M(at,K,ge,"","\\textemdash");M(at,K,ge,"","`",!0);M(at,K,ge,"","\\textquoteleft");M(at,K,ge,"","'",!0);M(at,K,ge,"","\\textquoteright");M(at,K,ge,"","``",!0);M(at,K,ge,"","\\textquotedblleft");M(at,K,ge,"","''",!0);M(at,K,ge,"","\\textquotedblright");M(z,K,ge,"","\\degree",!0);M(at,K,ge,"","\\degree");M(at,K,ge,"","\\textdegree",!0);M(z,K,ge,"","\\pounds");M(z,K,ge,"","\\mathsterling",!0);M(at,K,ge,"","\\pounds");M(at,K,ge,"","\\textsterling",!0);M(z,oe,ge,"","\\maltese");M(at,oe,ge,"","\\maltese");var JR='0123456789/@."';for(var N3=0;N3<JR.length;N3++){var ZR=JR.charAt(N3);M(z,K,ge,ZR,ZR)}var eM='0123456789!@*()-=+";:?/.,';for(var _3=0;_3<eM.length;_3++){var tM=eM.charAt(_3);M(at,K,ge,tM,tM)}var nb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var T3=0;T3<nb.length;T3++){var Ay=nb.charAt(T3);M(z,K,Kt,Ay,Ay),M(at,K,ge,Ay,Ay)}M(z,oe,ge,"C","");M(at,oe,ge,"C","");M(z,oe,ge,"H","");M(at,oe,ge,"H","");M(z,oe,ge,"N","");M(at,oe,ge,"N","");M(z,oe,ge,"P","");M(at,oe,ge,"P","");M(z,oe,ge,"Q","");M(at,oe,ge,"Q","");M(z,oe,ge,"R","");M(at,oe,ge,"R","");M(z,oe,ge,"Z","");M(at,oe,ge,"Z","");M(z,K,Kt,"h","");M(at,K,Kt,"h","");var ar="";for(var Ri=0;Ri<nb.length;Ri++){var ca=nb.charAt(Ri);ar=String.fromCharCode(55349,56320+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56372+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56424+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56580+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56684+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56736+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56788+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56840+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56944+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),Ri<26&&(ar=String.fromCharCode(55349,56632+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar),ar=String.fromCharCode(55349,56476+Ri),M(z,K,Kt,ca,ar),M(at,K,ge,ca,ar))}ar="";M(z,K,Kt,"k",ar);M(at,K,ge,"k",ar);for(var bd=0;bd<10;bd++){var su=bd.toString();ar=String.fromCharCode(55349,57294+bd),M(z,K,Kt,su,ar),M(at,K,ge,su,ar),ar=String.fromCharCode(55349,57314+bd),M(z,K,Kt,su,ar),M(at,K,ge,su,ar),ar=String.fromCharCode(55349,57324+bd),M(z,K,Kt,su,ar),M(at,K,ge,su,ar),ar=String.fromCharCode(55349,57334+bd),M(z,K,Kt,su,ar),M(at,K,ge,su,ar)}var rj="";for(var j3=0;j3<rj.length;j3++){var Ey=rj.charAt(j3);M(z,K,Kt,Ey,Ey),M(at,K,ge,Ey,Ey)}var ky=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],rM=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],kue=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[ky[c][2],ky[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[rM[d][2],rM[d][o]]}else{if(i===120485||i===120486)return[ky[0][2],ky[0][o]];if(120486<i&&i<120782)return["",""];throw new ut("Unsupported character: "+e)}},Z2=function(e,r,n){return Fn[n][e]&&Fn[n][e].replace&&(e=Fn[n][e].replace),{value:e,metrics:vE(e,r,n)}},wo=function(e,r,n,a,i){var o=Z2(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new io(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new io(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},Cue=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&Z2(e,"Main-Bold",r).metrics?wo(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Fn[r][e].font==="main"?wo(e,"Main-Regular",r,n,a):wo(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},Oue=function(e,r,n,a,i){return i!=="textord"&&Z2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Iue=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=kue(i,a)),h.length>0)return wo(i,h,a,r,o.concat(p));if(d){var m,x;if(d==="boldsymbol"){var y=Oue(i,a,r,o,n);m=y.fontName,x=[y.fontClass]}else c?(m=hG[d].fontName,x=[d]):(m=Cy(d,r.fontWeight,r.fontShape),x=[d,r.fontWeight,r.fontShape]);if(Z2(i,m,a).metrics)return wo(i,m,a,r,o.concat(x));if(cG.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var S=[],w=0;w<i.length;w++)S.push(wo(i[w],m,a,r,o.concat(x)));return dG(S)}}if(n==="mathord")return wo(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var N=Fn[a][i]&&Fn[a][i].font;if(N==="ams"){var A=Cy("amsrm",r.fontWeight,r.fontShape);return wo(i,A,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(N==="main"||!N){var R=Cy("textrm",r.fontWeight,r.fontShape);return wo(i,R,a,r,o.concat(r.fontWeight,r.fontShape))}else{var O=Cy(N,r.fontWeight,r.fontShape);return wo(i,O,a,r,o.concat(O,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Rue=(t,e)=>{if(Lu(t.classes)!==Lu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Mue=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof io&&n instanceof io&&Rue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},wE=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Ji=function(e,r,n,a){var i=new Ex(e,r,n,a);return wE(i),i},uG=(t,e,r,n)=>new Ex(t,e,r,n),Due=function(e,r,n){var a=Ji([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=xt(a.height),a.maxFontSize=1,a},Pue=function(e,r,n,a){var i=new bE(e,r,n,a);return wE(i),i},dG=function(e){var r=new Ax(e);return wE(r),r},Lue=function(e,r){return e instanceof Ax?Ji([],[e],r):e},Bue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var x=e.children[m];p-=x.type==="kern"?x.size:x.elem.height+x.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var y=e.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-y.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},$ue=function(e,r){for(var{children:n,depth:a}=Bue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Ji(["pstrut"],[]);h.style.height=xt(i);for(var p=[],m=a,x=a,y=a,S=0;S<n.length;S++){var w=n[S];if(w.type==="kern")y+=w.size;else{var N=w.elem,A=w.wrapperClasses||[],R=w.wrapperStyle||{},O=Ji(A,[h,N],void 0,R);O.style.top=xt(-i-y-N.depth),w.marginLeft&&(O.style.marginLeft=w.marginLeft),w.marginRight&&(O.style.marginRight=w.marginRight),p.push(O),y+=N.height+N.depth}m=Math.min(m,y),x=Math.max(x,y)}var L=Ji(["vlist"],p);L.style.height=xt(x);var I;if(m<0){var k=Ji([],[]),E=Ji(["vlist"],[k]);E.style.height=xt(-m);var j=Ji(["vlist-s"],[new io("")]);I=[Ji(["vlist-r"],[L,j]),Ji(["vlist-r"],[E])]}else I=[Ji(["vlist-r"],[L])];var C=Ji(["vlist-t"],I);return I.length===2&&C.classes.push("vlist-t2"),C.height=x,C.depth=-m,C},zue=(t,e)=>{var r=Ji(["mspace"],[],e),n=aa(t,e);return r.style.marginRight=xt(n),r},Cy=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},hG={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},fG={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Uue=function(e,r){var[n,a,i]=fG[e],o=new Bu(n),c=new hc([o],{width:xt(a),height:xt(i),style:"width:"+xt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=uG(["overlay"],[c],r);return d.height=i,d.style.height=xt(i),d.style.width=xt(a),d},Ce={fontMap:hG,makeSymbol:wo,mathsym:Cue,makeSpan:Ji,makeSvgSpan:uG,makeLineSpan:Due,makeAnchor:Pue,makeFragment:dG,wrapFragment:Lue,makeVList:$ue,makeOrd:Iue,makeGlue:zue,staticSvg:Uue,svgData:fG,tryCombineChars:Mue},na={number:3,unit:"mu"},wd={number:4,unit:"mu"},$l={number:5,unit:"mu"},Vue={mord:{mop:na,mbin:wd,mrel:$l,minner:na},mop:{mord:na,mop:na,mrel:$l,minner:na},mbin:{mord:wd,mop:wd,mopen:wd,minner:wd},mrel:{mord:$l,mop:$l,mopen:$l,minner:$l},mopen:{},mclose:{mop:na,mbin:wd,mrel:$l,minner:na},mpunct:{mord:na,mop:na,mrel:$l,mopen:na,mclose:na,mpunct:na,minner:na},minner:{mord:na,mop:na,mbin:wd,mrel:$l,mopen:na,mpunct:na,minner:na}},Fue={mord:{mop:na},mop:{mord:na,mop:na},mbin:{},mrel:{},mopen:{},mclose:{mop:na},mpunct:{},minner:{mop:na}},pG={},ab={},ib={};function St(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)pG[r[d]]=c;e&&(i&&(ab[e]=i),o&&(ib[e]=o))}function N0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;St({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var sb=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Na=function(e){return e.type==="ordgroup"?e.body:[e]},fc=Ce.makeSpan,que=["leftmost","mbin","mopen","mrel","mop","mpunct"],Hue=["rightmost","mrel","mclose","mpunct"],Gue={display:Xt.DISPLAY,text:Xt.TEXT,script:Xt.SCRIPT,scriptscript:Xt.SCRIPTSCRIPT},Wue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ka=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=Kr(e[o],r);if(c instanceof Ax){var d=c.children;i.push(...d)}else i.push(c)}if(Ce.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Gue[p.style]))}var m=fc([a[0]||"leftmost"],[],r),x=fc([a[1]||"rightmost"],[],r),y=n==="root";return nM(i,(S,w)=>{var N=w.classes[0],A=S.classes[0];N==="mbin"&&Hue.includes(A)?w.classes[0]="mord":A==="mbin"&&que.includes(N)&&(S.classes[0]="mord")},{node:m},x,y),nM(i,(S,w)=>{var N=nj(w),A=nj(S),R=N&&A?S.hasClass("mtight")?Fue[N][A]:Vue[N][A]:null;if(R)return Ce.makeGlue(R,h)},{node:m},x,y),i},nM=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=mG(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=fc(["leftmost"])),n.insertAfter=(m=>x=>{e.splice(m+1,0,x),o++})(o)}a&&e.pop()},mG=function(e){return e instanceof Ax||e instanceof bE||e instanceof Ex&&e.hasClass("enclosing")?e:null},Kue=function t(e,r){var n=mG(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},nj=function(e,r){return e?(r&&(e=Kue(e,r)),Wue[e.classes[0]]||null):null},mg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return fc(r.concat(n))},Kr=function(e,r,n){if(!e)return fc();if(ab[e.type]){var a=ab[e.type](e,r);if(n&&r.size!==n.size){a=fc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ut("Got group of unknown type: '"+e.type+"'")};function Oy(t,e){var r=fc(["base"],t,e),n=fc(["strut"]);return n.style.height=xt(r.height+r.depth),r.depth&&(n.style.verticalAlign=xt(-r.depth)),r.children.unshift(n),r}function aj(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Ka(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(Oy(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(Oy(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(Oy(o,e));var h;r?(h=Oy(Ka(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=fc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=xt(p.height+p.depth),p.depth&&(m.style.verticalAlign=xt(-p.depth))}return p}function gG(t){return new Ax(t)}class Es{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Lu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Zo&&this.children[n+1]instanceof Zo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Zo;)a+=this.children[++n].toText();e.appendChild(new Zo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Zr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Zr.escape(Lu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Zo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Zr.escape(this.toText())}toText(){return this.text}}class Xue{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",xt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+xt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var lt={MathNode:Es,TextNode:Zo,SpaceNode:Xue,newDocumentFragment:gG},so=function(e,r,n){return Fn[r][e]&&Fn[r][e].replace&&e.charCodeAt(0)!==55349&&!(cG.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Fn[r][e].replace),new lt.TextNode(e)},SE=function(e){return e.length===1?e[0]:new lt.MathNode("mrow",e)},NE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Fn[a][i]&&Fn[a][i].replace&&(i=Fn[a][i].replace);var o=Ce.fontMap[n].fontName;return vE(i,o,a)?Ce.fontMap[n].variant:null};function A3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Zo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Zo&&r.text===","}else return!1}var us=function(e,r,n){if(e.length===1){var a=Un(e[0],r);return n&&a instanceof Es&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=Un(e[c],r);if(d instanceof Es&&o instanceof Es){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(A3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&A3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||A3(o))){var h=d.children[0];h instanceof Es&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var p=o.children[0];if(p instanceof Zo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof Zo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),o=d}return i},$u=function(e,r,n){return SE(us(e,r,n))},Un=function(e,r){if(!e)return new lt.MathNode("mrow");if(ib[e.type]){var n=ib[e.type](e,r);return n}else throw new ut("Got group of unknown type: '"+e.type+"'")};function aM(t,e,r,n,a){var i=us(t,r),o;i.length===1&&i[0]instanceof Es&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new lt.MathNode("mrow",i);var c=new lt.MathNode("annotation",[new lt.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new lt.MathNode("semantics",[o,c]),h=new lt.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return Ce.makeSpan([p],[h])}var xG=function(e){return new Fl({style:e.displayMode?Xt.DISPLAY:Xt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},yG=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Ce.makeSpan(n,[e])}return e},Que=function(e,r,n){var a=xG(n),i;if(n.output==="mathml")return aM(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=aj(e,a);i=Ce.makeSpan(["katex"],[o])}else{var c=aM(e,r,a,n.displayMode,!1),d=aj(e,a);i=Ce.makeSpan(["katex"],[c,d])}return yG(i,n)},Yue=function(e,r,n){var a=xG(n),i=aj(e,a),o=Ce.makeSpan(["katex"],[i]);return yG(o,n)},Jue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Zue=function(e){var r=new lt.MathNode("mo",[new lt.TextNode(Jue[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},ede={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},tde=function(e){return e.type==="ordgroup"?e.body.length:1},rde=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=tde(h.base),m,x,y;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,y=.42,x=d+"4"):(m=312,c=2340,y=.34,x="tilde4");else{var S=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][S],m=[0,239,300,360,420][S],y=[0,.24,.3,.3,.36,.42][S],x=d+S):(c=[0,600,1033,2339,2340][S],m=[0,260,286,306,312][S],y=[0,.26,.286,.3,.306,.34][S],x="tilde"+S)}var w=new Bu(x),N=new hc([w],{width:"100%",height:xt(y),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Ce.makeSvgSpan([],[N],r),minWidth:0,height:y}}else{var A=[],R=ede[d],[O,L,I]=R,k=I/1e3,E=O.length,j,C;if(E===1){var q=R[3];j=["hide-tail"],C=[q]}else if(E===2)j=["halfarrow-left","halfarrow-right"],C=["xMinYMin","xMaxYMin"];else if(E===3)j=["brace-left","brace-center","brace-right"],C=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var D=0;D<E;D++){var $=new Bu(O[D]),B=new hc([$],{width:"400em",height:xt(k),viewBox:"0 0 "+c+" "+I,preserveAspectRatio:C[D]+" slice"}),V=Ce.makeSvgSpan([j[D]],[B],r);if(E===1)return{span:V,minWidth:L,height:k};V.style.height=xt(k),A.push(V)}return{span:Ce.makeSpan(["stretchy"],A,r),minWidth:L,height:k}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=xt(o),i>0&&(a.style.minWidth=xt(i)),a},nde=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=Ce.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new tj({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new tj({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new hc(h,{width:"100%",height:xt(c)});o=Ce.makeSvgSpan([],[p],i)}return o.height=c,o.style.height=xt(c),o},pc={encloseSpan:nde,mathMLnode:Zue,svgSpan:rde};function Nr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function _E(t){var e=ew(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function ew(t){return t&&(t.type==="atom"||Eue.hasOwnProperty(t.type))?t:null}var TE=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=Nr(t.base,"accent"),r=n.base,t.base=r,a=jue(Kr(t,e)),t.base=n):(n=Nr(t,"accent"),r=n.base);var i=Kr(r,e.havingCrampedStyle()),o=n.isShifty&&Zr.isCharacterBox(r),c=0;if(o){var d=Zr.getBaseElem(r),h=Kr(d,e.havingCrampedStyle());c=YR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),x;if(n.isStretchy)x=pc.svgSpan(n,e),x=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:x,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+xt(2*c)+")",marginLeft:xt(2*c)}:void 0}]},e);else{var y,S;n.label==="\\vec"?(y=Ce.staticSvg("vec",e),S=Ce.svgData.vec[1]):(y=Ce.makeOrd({mode:n.mode,text:n.label},e,"textord"),y=YR(y),y.italic=0,S=y.width,p&&(m+=y.depth)),x=Ce.makeSpan(["accent-body"],[y]);var w=n.label==="\\textcircled";w&&(x.classes.push("accent-full"),m=i.height);var N=c;w||(N-=S/2),x.style.left=xt(N),n.label==="\\textcircled"&&(x.style.top=".2em"),x=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:x}]},e)}var A=Ce.makeSpan(["mord","accent"],[x],e);return a?(a.children[0]=A,a.height=Math.max(A.height,a.height),a.classes[0]="mord",a):A},vG=(t,e)=>{var r=t.isStretchy?pc.mathMLnode(t.label):new lt.MathNode("mo",[so(t.label,t.mode)]),n=new lt.MathNode("mover",[Un(t.base,e),r]);return n.setAttribute("accent","true"),n},ade=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));St({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=sb(e[0]),n=!ade.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:TE,mathmlBuilder:vG});St({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:TE,mathmlBuilder:vG});St({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Kr(t.base,e),n=pc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=Ce.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=pc.mathMLnode(t.label),n=new lt.MathNode("munder",[Un(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Iy=t=>{var e=new lt.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};St({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=Ce.wrapFragment(Kr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=Ce.wrapFragment(Kr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=pc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(o){var m=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;p=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:m}]},e)}else p=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Ce.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=pc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=Iy(Un(t.body,e));if(t.below){var i=Iy(Un(t.below,e));n=new lt.MathNode("munderover",[r,i,a])}else n=new lt.MathNode("mover",[r,a])}else if(t.below){var o=Iy(Un(t.below,e));n=new lt.MathNode("munder",[r,o])}else n=Iy(),n=new lt.MathNode("mover",[r,n]);return n}});var ide=Ce.makeSpan;function bG(t,e){var r=Ka(t.body,e,!0);return ide([t.mclass],r,e)}function wG(t,e){var r,n=us(t.body,e);return t.mclass==="minner"?r=new lt.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new lt.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new lt.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}St({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Na(a),isCharacterBox:Zr.isCharacterBox(a)}},htmlBuilder:bG,mathmlBuilder:wG});var tw=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};St({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:tw(e[0]),body:Na(e[1]),isCharacterBox:Zr.isCharacterBox(e[1])}}});St({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=tw(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Na(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Zr.isCharacterBox(d)}},htmlBuilder:bG,mathmlBuilder:wG});St({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:tw(e[0]),body:Na(e[0])}},htmlBuilder(t,e){var r=Ka(t.body,e,!0),n=Ce.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=us(t.body,e),n=new lt.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var sde={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},iM=()=>({type:"styling",body:[],mode:"math",style:"display"}),sM=t=>t.type==="textord"&&t.text==="@",ode=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function lde(t,e,r){var n=sde[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function cde(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ut("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=iM(),d=0;d<o.length;d++)if(!sM(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=_E(o[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var x=!0,y=d+1;y<o.length;y++){if(ode(o[y],h)){x=!1,d=y;break}if(sM(o[y]))throw new ut("Missing a "+h+" character to complete a CD arrow.",o[y]);p[m].body.push(o[y])}if(x)throw new ut("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ut('Expected one of "<>AV=|." after @',o[d]);var S=lde(h,p,t),w={type:"styling",body:[S],mode:"math",style:"display"};n.push(w),c=iM()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var N=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:N,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}St({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Ce.wrapFragment(Kr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=xt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new lt.MathNode("mrow",[Un(t.label,e)]);return r=new lt.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new lt.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});St({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Ce.wrapFragment(Kr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new lt.MathNode("mrow",[Un(t.fragment,e)])}});St({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Nr(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=Nr(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ut("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ut("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var SG=(t,e)=>{var r=Ka(t.body,e.withColor(t.color),!1);return Ce.makeFragment(r)},NG=(t,e)=>{var r=us(t.body,e.withColor(t.color)),n=new lt.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};St({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Nr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:Na(a)}},htmlBuilder:SG,mathmlBuilder:NG});St({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=Nr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:SG,mathmlBuilder:NG});St({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&Nr(a,"size").value}},htmlBuilder(t,e){var r=Ce.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=xt(aa(t.size,e)))),r},mathmlBuilder(t,e){var r=new lt.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",xt(aa(t.size,e)))),r}});var ij={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},_G=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ut("Expected a control sequence",t);return e},ude=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},TG=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};St({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(ij[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=ij[n.text]),Nr(e.parseFunction(),"internal");throw new ut("Invalid token after macro prefix",n)}});St({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ut("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ut('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ut('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ut("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===ij[r]),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=_G(e.gullet.popToken());e.gullet.consumeSpaces();var a=ude(e);return TG(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=_G(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return TG(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var ym=function(e,r,n){var a=Fn.math[e]&&Fn.math[e].replace,i=vE(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},jE=function(e,r,n,a){var i=n.havingBaseStyle(r),o=Ce.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},jG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=xt(i),e.height-=i,e.depth+=i},dde=function(e,r,n,a,i,o){var c=Ce.makeSymbol(e,"Main-Regular",i,a),d=jE(c,r,a,o);return n&&jG(d,a,r),d},hde=function(e,r,n,a){return Ce.makeSymbol(e,"Size"+r+"-Regular",n,a)},AG=function(e,r,n,a,i,o){var c=hde(e,r,i,a),d=jE(Ce.makeSpan(["delimsizing","size"+r],[c],a),Xt.TEXT,a,o);return n&&jG(d,a,Xt.TEXT),d},E3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=Ce.makeSpan(["delimsizinginner",a],[Ce.makeSpan([],[Ce.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},k3=function(e,r,n){var a=Jo["Size4-Regular"][e.charCodeAt(0)]?Jo["Size4-Regular"][e.charCodeAt(0)][4]:Jo["Size1-Regular"][e.charCodeAt(0)][4],i=new Bu("inner",xue(e,Math.round(1e3*r))),o=new hc([i],{width:xt(a),height:xt(r),style:"width:"+xt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Ce.makeSvgSpan([],[o],n);return c.height=r,c.style.height=xt(r),c.style.width=xt(a),{type:"elem",elem:c}},sj=.008,Ry={type:"kern",size:-1*sj},fde=["|","\\lvert","\\rvert","\\vert"],pde=["\\|","\\lVert","\\rVert","\\Vert"],EG=function(e,r,n,a,i,o){var c,d,h,p,m="",x=0;c=h=p=e,d=null;var y="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):fde.includes(e)?(h="",m="vert",x=333):pde.includes(e)?(h="",m="doublevert",x=556):e==="["||e==="\\lbrack"?(c="",h="",p="",y="Size4-Regular",m="lbrack",x=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",y="Size4-Regular",m="rbrack",x=667):e==="\\lfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="lfloor",x=667):e==="\\lceil"||e===""?(c="",h=p="",y="Size4-Regular",m="lceil",x=667):e==="\\rfloor"||e===""?(h=c="",p="",y="Size4-Regular",m="rfloor",x=667):e==="\\rceil"||e===""?(c="",h=p="",y="Size4-Regular",m="rceil",x=667):e==="("||e==="\\lparen"?(c="",h="",p="",y="Size4-Regular",m="lparen",x=875):e===")"||e==="\\rparen"?(c="",h="",p="",y="Size4-Regular",m="rparen",x=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",y="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",y="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",y="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",y="Size4-Regular");var S=ym(c,y,i),w=S.height+S.depth,N=ym(h,y,i),A=N.height+N.depth,R=ym(p,y,i),O=R.height+R.depth,L=0,I=1;if(d!==null){var k=ym(d,y,i);L=k.height+k.depth,I=2}var E=w+O+L,j=Math.max(0,Math.ceil((r-E)/(I*A))),C=E+j*I*A,q=a.fontMetrics().axisHeight;n&&(q*=a.sizeMultiplier);var D=C/2-q,$=[];if(m.length>0){var B=C-w-O,V=Math.round(C*1e3),W=yue(m,Math.round(B*1e3)),G=new Bu(m,W),Y=(x/1e3).toFixed(3)+"em",re=(V/1e3).toFixed(3)+"em",ce=new hc([G],{width:Y,height:re,viewBox:"0 0 "+x+" "+V}),de=Ce.makeSvgSpan([],[ce],a);de.height=V/1e3,de.style.width=Y,de.style.height=re,$.push({type:"elem",elem:de})}else{if($.push(E3(p,y,i)),$.push(Ry),d===null){var X=C-w-O+2*sj;$.push(k3(h,X,a))}else{var ae=(C-w-O-L)/2+2*sj;$.push(k3(h,ae,a)),$.push(Ry),$.push(E3(d,y,i)),$.push(Ry),$.push(k3(h,ae,a))}$.push(Ry),$.push(E3(c,y,i))}var ne=a.havingBaseStyle(Xt.TEXT),ve=Ce.makeVList({positionType:"bottom",positionData:D,children:$},ne);return jE(Ce.makeSpan(["delimsizing","mult"],[ve],ne),Xt.TEXT,a,o)},C3=80,O3=.08,I3=function(e,r,n,a,i){var o=gue(e,a,n),c=new Bu(e,o),d=new hc([c],{width:"400em",height:xt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ce.makeSvgSpan(["hide-tail"],[d],i)},mde=function(e,r){var n=r.havingBaseSizing(),a=IG("\\surd",e*n.sizeMultiplier,OG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*o+C3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+O3)/i,h=(1+o)/i,c=I3("sqrtMain",d,p,o,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+C3)*Im[a.size],h=(Im[a.size]+o)/i,d=(Im[a.size]+o+O3)/i,c=I3("sqrtSize"+a.size,d,p,o,r),c.style.minWidth="1.02em",m=1/i):(d=e+o+O3,h=e+o,p=Math.floor(1e3*e+o)+C3,c=I3("sqrtTall",d,p,o,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=xt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},kG=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],gde=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],CG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Im=[0,1.2,1.8,2.4,3],xde=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),kG.includes(e)||CG.includes(e))return AG(e,r,!1,n,a,i);if(gde.includes(e))return EG(e,Im[r],!1,n,a,i);throw new ut("Illegal delimiter: '"+e+"'")},yde=[{type:"small",style:Xt.SCRIPTSCRIPT},{type:"small",style:Xt.SCRIPT},{type:"small",style:Xt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],vde=[{type:"small",style:Xt.SCRIPTSCRIPT},{type:"small",style:Xt.SCRIPT},{type:"small",style:Xt.TEXT},{type:"stack"}],OG=[{type:"small",style:Xt.SCRIPTSCRIPT},{type:"small",style:Xt.SCRIPT},{type:"small",style:Xt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],bde=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},IG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=ym(e,bde(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},RG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;CG.includes(e)?c=yde:kG.includes(e)?c=OG:c=vde;var d=IG(e,r,c,a);return d.type==="small"?dde(e,d.style,n,a,i,o):d.type==="large"?AG(e,d.size,n,a,i,o):EG(e,r,n,a,i,o)},wde=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return RG(e,m,!0,a,i,o)},rc={sqrtImage:mde,sizedDelim:xde,sizeToMaxHeight:Im,customSizedDelim:RG,leftRightDelim:wde},oM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Sde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function rw(t,e){var r=ew(t);if(r&&Sde.includes(r.text))return r;throw r?new ut("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ut("Invalid delimiter type '"+t.type+"'",t)}St({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=rw(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:oM[t.funcName].size,mclass:oM[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Ce.makeSpan([t.mclass]):rc.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(so(t.delim,t.mode));var r=new lt.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=xt(rc.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function lM(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}St({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ut("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:rw(e[0],t).text,color:r}}});St({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=rw(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=Nr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{lM(t);for(var r=Ka(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=mg(e,["mopen"]):c=rc.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=rc.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=mg(e,["mclose"]);else{var x=t.rightColor?e.withColor(t.rightColor):e;m=rc.leftRightDelim(t.right,n,a,x,t.mode,["mclose"])}return r.push(m),Ce.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{lM(t);var r=us(t.body,e);if(t.left!=="."){var n=new lt.MathNode("mo",[so(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new lt.MathNode("mo",[so(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return SE(r)}});St({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=rw(e[0],t);if(!t.parser.leftrightDepth)throw new ut("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=mg(e,[]);else{r=rc.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?so("|","text"):so(t.delim,t.mode),n=new lt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var AE=(t,e)=>{var r=Ce.wrapFragment(Kr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Zr.isCharacterBox(t.body);if(n==="sout")i=Ce.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=aa({number:.6,unit:"pt"},e),h=aa({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=xt(m/2+d);var x=Math.floor(1e3*m*a),y=pue(x),S=new hc([new Bu("phase",y)],{width:"400em",height:xt(x/1e3),viewBox:"0 0 400000 "+x,preserveAspectRatio:"xMinYMin slice"});i=Ce.makeSvgSpan(["hide-tail"],[S],e),i.style.height=xt(m),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var w=0,N=0,A=0;/box/.test(n)?(A=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),w=e.fontMetrics().fboxsep+(n==="colorbox"?0:A),N=w):n==="angl"?(A=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),w=4*A,N=Math.max(0,.25-r.depth)):(w=c?.2:0,N=w),i=pc.encloseSpan(r,n,w,N,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=xt(A)):n==="angl"&&A!==.049&&(i.style.borderTopWidth=xt(A),i.style.borderRightWidth=xt(A)),o=r.depth+N,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var R;if(t.backgroundColor)R=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var O=/cancel|phase/.test(n)?["svg-align"]:[];R=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:O}]},e)}return/cancel/.test(n)&&(R.height=r.height,R.depth=r.depth),/cancel/.test(n)&&!c?Ce.makeSpan(["mord","cancel-lap"],[R],e):Ce.makeSpan(["mord"],[R],e)},EE=(t,e)=>{var r=0,n=new lt.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Un(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};St({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=Nr(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:AE,mathmlBuilder:EE});St({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=Nr(e[0],"color-token").color,o=Nr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:AE,mathmlBuilder:EE});St({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});St({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:AE,mathmlBuilder:EE});St({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var MG={};function fl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)MG[r[d]]=c;i&&(ab[e]=i),o&&(ib[e]=o)}var DG={};function J(t,e){DG[t]=e}function cM(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var nw=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ut("{"+t.envName+"} can be used only in display mode.")};function kE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Hu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:x}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var y=t.gullet.expandMacroAsText("\\arraystretch");if(y==null)o=1;else if(o=parseFloat(y),!o||o<0)throw new ut("Invalid \\arraystretch: "+y)}t.gullet.beginGroup();var S=[],w=[S],N=[],A=[],R=d!=null?[]:void 0;function O(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){R&&(t.gullet.macros.get("\\df@tag")?(R.push(t.subparse([new Rs("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):R.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(O(),A.push(cM(t));;){var I=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),I={type:"ordgroup",mode:t.mode,body:I},r&&(I={type:"styling",mode:t.mode,style:r,body:[I]}),S.push(I);var k=t.fetch().text;if(k==="&"){if(m&&S.length===m){if(h||c)throw new ut("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(k==="\\end"){L(),S.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(w.length>1||!p)&&w.pop(),A.length<w.length+1&&A.push([]);break}else if(k==="\\\\"){t.consume();var E=void 0;t.gullet.future().text!==" "&&(E=t.parseSizeGroup(!0)),N.push(E?E.value:null),L(),A.push(cM(t)),S=[],w.push(S),O()}else throw new ut("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:w,cols:i,rowGaps:N,hskipBeforeAndAfter:n,hLinesBeforeRow:A,colSeparationType:c,tags:R,leqno:x}}function CE(t){return t.slice(0,1)==="d"?"display":"text"}var pl=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,x=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var y=r.havingStyle(Xt.SCRIPT).sizeMultiplier;x=.2778*(y/r.sizeMultiplier)}var S=e.colSeparationType==="CD"?aa({number:3,unit:"ex"},r):12*m,w=3*m,N=e.arraystretch*S,A=.7*N,R=.3*N,O=0;function L(At){for(var Ft=0;Ft<At.length;++Ft)Ft>0&&(O+=.25),h.push({pos:O,isDashed:At[Ft]})}for(L(o[0]),n=0;n<e.body.length;++n){var I=e.body[n],k=A,E=R;c<I.length&&(c=I.length);var j=new Array(I.length);for(a=0;a<I.length;++a){var C=Kr(I[a],r);E<C.depth&&(E=C.depth),k<C.height&&(k=C.height),j[a]=C}var q=e.rowGaps[n],D=0;q&&(D=aa(q,r),D>0&&(D+=R,E<D&&(E=D),D=0)),e.addJot&&(E+=w),j.height=k,j.depth=E,O+=k,j.pos=O,O+=E+D,d[n]=j,L(o[n+1])}var $=O/2+r.fontMetrics().axisHeight,B=e.cols||[],V=[],W,G,Y=[];if(e.tags&&e.tags.some(At=>At))for(n=0;n<i;++n){var re=d[n],ce=re.pos-$,de=e.tags[n],X=void 0;de===!0?X=Ce.makeSpan(["eqn-num"],[],r):de===!1?X=Ce.makeSpan([],[],r):X=Ce.makeSpan([],Ka(de,r,!0),r),X.depth=re.depth,X.height=re.height,Y.push({type:"elem",elem:X,shift:ce})}for(a=0,G=0;a<c||G<B.length;++a,++G){for(var ae=B[G]||{},ne=!0;ae.type==="separator";){if(ne||(W=Ce.makeSpan(["arraycolsep"],[]),W.style.width=xt(r.fontMetrics().doubleRuleSep),V.push(W)),ae.separator==="|"||ae.separator===":"){var ve=ae.separator==="|"?"solid":"dashed",pe=Ce.makeSpan(["vertical-separator"],[],r);pe.style.height=xt(O),pe.style.borderRightWidth=xt(p),pe.style.borderRightStyle=ve,pe.style.margin="0 "+xt(-p/2);var Be=O-$;Be&&(pe.style.verticalAlign=xt(-Be)),V.push(pe)}else throw new ut("Invalid separator type: "+ae.separator);G++,ae=B[G]||{},ne=!1}if(!(a>=c)){var Ue=void 0;(a>0||e.hskipBeforeAndAfter)&&(Ue=Zr.deflt(ae.pregap,x),Ue!==0&&(W=Ce.makeSpan(["arraycolsep"],[]),W.style.width=xt(Ue),V.push(W)));var Fe=[];for(n=0;n<i;++n){var Ne=d[n],He=Ne[a];if(He){var Z=Ne.pos-$;He.depth=Ne.depth,He.height=Ne.height,Fe.push({type:"elem",elem:He,shift:Z})}}Fe=Ce.makeVList({positionType:"individualShift",children:Fe},r),Fe=Ce.makeSpan(["col-align-"+(ae.align||"c")],[Fe]),V.push(Fe),(a<c-1||e.hskipBeforeAndAfter)&&(Ue=Zr.deflt(ae.postgap,x),Ue!==0&&(W=Ce.makeSpan(["arraycolsep"],[]),W.style.width=xt(Ue),V.push(W)))}}if(d=Ce.makeSpan(["mtable"],V),h.length>0){for(var te=Ce.makeLineSpan("hline",r,p),be=Ce.makeLineSpan("hdashline",r,p),Se=[{type:"elem",elem:d,shift:0}];h.length>0;){var Ze=h.pop(),rt=Ze.pos-$;Ze.isDashed?Se.push({type:"elem",elem:be,shift:rt}):Se.push({type:"elem",elem:te,shift:rt})}d=Ce.makeVList({positionType:"individualShift",children:Se},r)}if(Y.length===0)return Ce.makeSpan(["mord"],[d],r);var It=Ce.makeVList({positionType:"individualShift",children:Y},r);return It=Ce.makeSpan(["tag"],[It],r),Ce.makeFragment([d,It])},Nde={c:"center ",l:"left ",r:"right "},ml=function(e,r){for(var n=[],a=new lt.MathNode("mtd",[],["mtr-glue"]),i=new lt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new lt.MathNode("mtd",[Un(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new lt.MathNode("mtr",d))}var p=new lt.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",xt(m));var x="",y="";if(e.cols&&e.cols.length>0){var S=e.cols,w="",N=!1,A=0,R=S.length;S[0].type==="separator"&&(x+="top ",A=1),S[S.length-1].type==="separator"&&(x+="bottom ",R-=1);for(var O=A;O<R;O++)S[O].type==="align"?(y+=Nde[S[O].align],N&&(w+="none "),N=!0):S[O].type==="separator"&&N&&(w+=S[O].separator==="|"?"solid ":"dashed ",N=!1);p.setAttribute("columnalign",y.trim()),/[sd]/.test(w)&&p.setAttribute("columnlines",w.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],I="",k=1;k<L.length;k++)I+=k%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var E="",j=e.hLinesBeforeRow;x+=j[0].length>0?"left ":"",x+=j[j.length-1].length>0?"right ":"";for(var C=1;C<j.length-1;C++)E+=j[C].length===0?"none ":j[C][0]?"dashed ":"solid ";return/[sd]/.test(E)&&p.setAttribute("rowlines",E.trim()),x!==""&&(p=new lt.MathNode("menclose",[p]),p.setAttribute("notation",x.trim())),e.arraystretch&&e.arraystretch<1&&(p=new lt.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},PG=function(e,r){e.envName.indexOf("ed")===-1&&nw(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Hu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:kE(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var x=Nr(r[0].body[m],"textord");p+=x.text}c=Number(p),d=c*2}var y=!d;o.body.forEach(function(A){for(var R=1;R<A.length;R+=2){var O=Nr(A[R],"styling"),L=Nr(O.body[0],"ordgroup");L.body.unshift(h)}if(y)d<A.length&&(d=A.length);else{var I=A.length/2;if(c<I)throw new ut("Too many math in a row: "+("expected "+c+", but got "+I),A[0])}});for(var S=0;S<d;++S){var w="r",N=0;S%2===1?w="l":S>0&&y&&(N=1),n[S]={type:"align",align:w,pregap:N,postgap:0}}return o.colSeparationType=y?"align":"alignat",o};fl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=ew(e[0]),n=r?[e[0]]:Nr(e[0],"ordgroup").body,a=n.map(function(o){var c=_E(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ut("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Hu(t.parser,i,CE(t.envName))},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ut("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Hu(t.parser,n,CE(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Hu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=ew(e[0]),n=r?[e[0]]:Nr(e[0],"ordgroup").body,a=n.map(function(o){var c=_E(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ut("Unknown column alignment: "+d,o)});if(a.length>1)throw new ut("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Hu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ut("{subarray} can contain only one column");return i},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Hu(t.parser,e,CE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:PG,htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&nw(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:kE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Hu(t.parser,e,"display")},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:PG,htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){nw(t);var e={autoTag:kE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Hu(t.parser,e,"display")},htmlBuilder:pl,mathmlBuilder:ml});fl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return nw(t),cde(t.parser)},htmlBuilder:pl,mathmlBuilder:ml});J("\\nonumber","\\gdef\\@eqnsw{0}");J("\\notag","\\nonumber");St({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ut(t.funcName+" valid only within array environment")}});var uM=MG;St({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ut("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=Nr(a.body[o],"textord").text;if(n==="\\begin"){if(!uM.hasOwnProperty(i))throw new ut("No such environment: "+i,a);var c=uM[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var x=r.nextToken,y=Nr(r.parseFunction(),"environment");if(y.name!==i)throw new ut("Mismatch: \\begin{"+i+"} matched by \\end{"+y.name+"}",x);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var LG=(t,e)=>{var r=t.font,n=e.withFont(r);return Kr(t.body,n)},BG=(t,e)=>{var r=t.font,n=e.withFont(r);return Un(t.body,n)},dM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};St({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=sb(e[0]),i=n;return i in dM&&(i=dM[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:LG,mathmlBuilder:BG});St({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Zr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:tw(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});St({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:LG,mathmlBuilder:BG});var $G=(t,e)=>{var r=e;return t==="display"?r=r.id>=Xt.SCRIPT.id?r.text():Xt.DISPLAY:t==="text"&&r.size===Xt.DISPLAY.size?r=Xt.TEXT:t==="script"?r=Xt.SCRIPT:t==="scriptscript"&&(r=Xt.SCRIPTSCRIPT),r},OE=(t,e)=>{var r=$G(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=Kr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=Kr(t.denom,i,e),p,m,x;t.hasBarLine?(t.barSize?(m=aa(t.barSize,e),p=Ce.makeLineSpan("frac-line",e,m)):p=Ce.makeLineSpan("frac-line",e),m=p.height,x=p.height):(p=null,m=0,x=e.fontMetrics().defaultRuleThickness);var y,S,w;r.size===Xt.DISPLAY.size||t.size==="display"?(y=e.fontMetrics().num1,m>0?S=3*x:S=7*x,w=e.fontMetrics().denom1):(m>0?(y=e.fontMetrics().num2,S=x):(y=e.fontMetrics().num3,S=3*x),w=e.fontMetrics().denom2);var N;if(p){var R=e.fontMetrics().axisHeight;y-o.depth-(R+.5*m)<S&&(y+=S-(y-o.depth-(R+.5*m))),R-.5*m-(h.height-w)<S&&(w+=S-(R-.5*m-(h.height-w)));var O=-(R-.5*m);N=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:w},{type:"elem",elem:p,shift:O},{type:"elem",elem:o,shift:-y}]},e)}else{var A=y-o.depth-(h.height-w);A<S&&(y+=.5*(S-A),w+=.5*(S-A)),N=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:w},{type:"elem",elem:o,shift:-y}]},e)}i=e.havingStyle(r),N.height*=i.sizeMultiplier/e.sizeMultiplier,N.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Xt.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Xt.SCRIPTSCRIPT.size?L=e.havingStyle(Xt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var I,k;return t.leftDelim==null?I=mg(e,["mopen"]):I=rc.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?k=Ce.makeSpan([]):t.rightDelim==null?k=mg(e,["mclose"]):k=rc.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),Ce.makeSpan(["mord"].concat(i.sizingClasses(e)),[I,Ce.makeSpan(["mfrac"],[N]),k],e)},IE=(t,e)=>{var r=new lt.MathNode("mfrac",[Un(t.numer,e),Un(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=aa(t.barSize,e);r.setAttribute("linethickness",xt(n))}var a=$G(t.size,e.style);if(a.size!==e.style.size){r=new lt.MathNode("mstyle",[r]);var i=a.size===Xt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new lt.MathNode("mo",[new lt.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new lt.MathNode("mo",[new lt.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return SE(o)}return r};St({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:OE,mathmlBuilder:IE});St({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});St({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var hM=["display","text","script","scriptscript"],fM=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};St({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=sb(e[0]),o=i.type==="atom"&&i.family==="open"?fM(i.text):null,c=sb(e[1]),d=c.type==="atom"&&c.family==="close"?fM(c.text):null,h=Nr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var x="auto",y=e[3];if(y.type==="ordgroup"){if(y.body.length>0){var S=Nr(y.body[0],"textord");x=hM[Number(S.text)]}}else y=Nr(y,"textord"),x=hM[Number(y.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:o,rightDelim:d,size:x}},htmlBuilder:OE,mathmlBuilder:IE});St({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Nr(e[0],"size").value,token:a}}});St({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=Zce(Nr(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:OE,mathmlBuilder:IE});var zG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Kr(t.sup,e.havingStyle(r.sup()),e):Kr(t.sub,e.havingStyle(r.sub()),e),a=Nr(t.base,"horizBrace")):a=Nr(t,"horizBrace");var i=Kr(a.base,e.havingBaseStyle(Xt.DISPLAY)),o=pc.svgSpan(a,e),c;if(a.isOver?(c=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Ce.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Ce.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Ce.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Ce.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},_de=(t,e)=>{var r=pc.mathMLnode(t.label);return new lt.MathNode(t.isOver?"mover":"munder",[Un(t.base,e),r])};St({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:zG,mathmlBuilder:_de});St({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=Nr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:Na(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Ka(t.body,e,!1);return Ce.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=$u(t.body,e);return r instanceof Es||(r=new Es("mrow",[r])),r.setAttribute("href",t.href),r}});St({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=Nr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:Na(c)}}});St({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:Na(e[0])}},htmlBuilder(t,e){var r=Ka(t.body,e,!1);return Ce.makeFragment(r)},mathmlBuilder(t,e){return new lt.MathNode("mrow",us(t.body,e))}});St({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=Nr(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],x=m.indexOf("=");if(x<0)throw new ut("\\htmlData key/value '"+m+"' missing equals sign");var y=m.slice(0,x),S=m.slice(x+1);d["data-"+y.trim()]=S}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:Na(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Ka(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=Ce.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>$u(t.body,e)});St({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:Na(e[0]),mathml:Na(e[1])}},htmlBuilder:(t,e)=>{var r=Ka(t.html,e,!1);return Ce.makeFragment(r)},mathmlBuilder:(t,e)=>$u(t.mathml,e)});var R3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ut("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!iG(n))throw new ut("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};St({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=Nr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var x=m[1].trim();switch(m[0].trim()){case"alt":c=x;break;case"width":a=R3(x);break;case"height":i=R3(x);break;case"totalheight":o=R3(x);break;default:throw new ut("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var y=Nr(e[0],"url").url;return c===""&&(c=y,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:y}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=aa(t.height,e),n=0;t.totalheight.number>0&&(n=aa(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=aa(t.width,e));var i={height:xt(r+n)};a>0&&(i.width=xt(a)),n>0&&(i.verticalAlign=xt(-n));var o=new _ue(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new lt.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=aa(t.height,e),a=0;if(t.totalheight.number>0&&(a=aa(t.totalheight,e)-n,r.setAttribute("valign",xt(-a))),r.setAttribute("height",xt(n+a)),t.width.number>0){var i=aa(t.width,e);r.setAttribute("width",xt(i))}return r.setAttribute("src",t.src),r}});St({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=Nr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return Ce.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=aa(t.dimension,e);return new lt.SpaceNode(r)}});St({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Ce.makeSpan([],[Kr(t.body,e)]),r=Ce.makeSpan(["inner"],[r],e)):r=Ce.makeSpan(["inner"],[Kr(t.body,e)]);var n=Ce.makeSpan(["fix"],[]),a=Ce.makeSpan([t.alignment],[r,n],e),i=Ce.makeSpan(["strut"]);return i.style.height=xt(a.height+a.depth),a.depth&&(i.style.verticalAlign=xt(-a.depth)),a.children.unshift(i),a=Ce.makeSpan(["thinbox"],[a],e),Ce.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new lt.MathNode("mpadded",[Un(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});St({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});St({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ut("Mismatched "+t.funcName)}});var pM=(t,e)=>{switch(e.style.size){case Xt.DISPLAY.size:return t.display;case Xt.TEXT.size:return t.text;case Xt.SCRIPT.size:return t.script;case Xt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};St({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:Na(e[0]),text:Na(e[1]),script:Na(e[2]),scriptscript:Na(e[3])}},htmlBuilder:(t,e)=>{var r=pM(t,e),n=Ka(r,e,!1);return Ce.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=pM(t,e);return $u(r,e)}});var UG=(t,e,r,n,a,i,o)=>{t=Ce.makeSpan([],[t]);var c=r&&Zr.isCharacterBox(r),d,h;if(e){var p=Kr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Kr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var x;if(h&&d){var y=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;x=Ce.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:xt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:xt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var S=t.height-o;x=Ce.makeVList({positionType:"top",positionData:S,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:xt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var w=t.depth+o;x=Ce.makeVList({positionType:"bottom",positionData:w,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:xt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var N=[x];if(d&&i!==0&&!c){var A=Ce.makeSpan(["mspace"],[],n);A.style.marginRight=xt(i),N.unshift(A)}return Ce.makeSpan(["mop","op-limits"],N,n)},VG=["\\smallint"],Hf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Nr(t.base,"op"),a=!0):i=Nr(t,"op");var o=e.style,c=!1;o.size===Xt.DISPLAY.size&&i.symbol&&!VG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=Ce.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,x=Ce.staticSvg(p+"Size"+(c?"2":"1"),e);d=Ce.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:x,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var y=Ka(i.body,e,!0);y.length===1&&y[0]instanceof io?(d=y[0],d.classes[0]="mop"):d=Ce.makeSpan(["mop"],y,e)}else{for(var S=[],w=1;w<i.name.length;w++)S.push(Ce.mathsym(i.name[w],i.mode,e));d=Ce.makeSpan(["mop"],S,e)}var N=0,A=0;return(d instanceof io||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(N=(d.height-d.depth)/2-e.fontMetrics().axisHeight,A=d.italic),a?UG(d,r,n,e,o,A,N):(N&&(d.style.position="relative",d.style.top=xt(N)),d)},kx=(t,e)=>{var r;if(t.symbol)r=new Es("mo",[so(t.name,t.mode)]),VG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new Es("mo",us(t.body,e));else{r=new Es("mi",[new Zo(t.name.slice(1))]);var n=new Es("mo",[so("","text")]);t.parentIsSupSub?r=new Es("mrow",[r,n]):r=gG([r,n])}return r},Tde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};St({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=Tde[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Hf,mathmlBuilder:kx});St({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Na(n)}},htmlBuilder:Hf,mathmlBuilder:kx});var jde={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};St({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Hf,mathmlBuilder:kx});St({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Hf,mathmlBuilder:kx});St({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=jde[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Hf,mathmlBuilder:kx});var FG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Nr(t.base,"operatorname"),a=!0):i=Nr(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(m=>{var x=m.text;return typeof x=="string"?{type:"textord",mode:m.mode,text:x}:m}),d=Ka(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof io&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Ce.makeSpan(["mop"],d,e)}else o=Ce.makeSpan(["mop"],[],e);return a?UG(o,r,n,e,e.style,0,0):o},Ade=(t,e)=>{for(var r=us(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof lt.SpaceNode))if(i instanceof lt.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof lt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new lt.TextNode(c)]}var d=new lt.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new lt.MathNode("mo",[so("","text")]);return t.parentIsSupSub?new lt.MathNode("mrow",[d,h]):lt.newDocumentFragment([d,h])};St({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:Na(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:FG,mathmlBuilder:Ade});J("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");N0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Ce.makeFragment(Ka(t.body,e,!1)):Ce.makeSpan(["mord"],Ka(t.body,e,!0),e)},mathmlBuilder(t,e){return $u(t.body,e,!0)}});St({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Kr(t.body,e.havingCrampedStyle()),n=Ce.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return Ce.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new lt.MathNode("mo",[new lt.TextNode("")]);r.setAttribute("stretchy","true");var n=new lt.MathNode("mover",[Un(t.body,e),r]);return n.setAttribute("accent","true"),n}});St({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:Na(n)}},htmlBuilder:(t,e)=>{var r=Ka(t.body,e.withPhantom(),!1);return Ce.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=us(t.body,e);return new lt.MathNode("mphantom",r)}});St({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan([],[Kr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Ce.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=us(Na(t.body),e),n=new lt.MathNode("mphantom",r),a=new lt.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});St({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan(["inner"],[Kr(t.body,e.withPhantom())]),n=Ce.makeSpan(["fix"],[]);return Ce.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=us(Na(t.body),e),n=new lt.MathNode("mphantom",r),a=new lt.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});St({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Nr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Kr(t.body,e),n=aa(t.dy,e);return Ce.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new lt.MathNode("mpadded",[Un(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});St({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});St({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=Nr(e[0],"size"),o=Nr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&Nr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=Ce.makeSpan(["mord","rule"],[],e),n=aa(t.width,e),a=aa(t.height,e),i=t.shift?aa(t.shift,e):0;return r.style.borderRightWidth=xt(n),r.style.borderTopWidth=xt(a),r.style.bottom=xt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=aa(t.width,e),n=aa(t.height,e),a=t.shift?aa(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new lt.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",xt(r)),o.setAttribute("height",xt(n));var c=new lt.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",xt(a)):(c.setAttribute("height",xt(a)),c.setAttribute("depth",xt(-a))),c.setAttribute("voffset",xt(a)),c}});function qG(t,e,r){for(var n=Ka(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Ce.makeFragment(n)}var mM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Ede=(t,e)=>{var r=e.havingSize(t.size);return qG(t.body,r,e)};St({type:"sizing",names:mM,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:mM.indexOf(n)+1,body:i}},htmlBuilder:Ede,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=us(t.body,r),a=new lt.MathNode("mstyle",n);return a.setAttribute("mathsize",xt(r.sizeMultiplier)),a}});St({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&Nr(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=Ce.makeSpan([],[Kr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new lt.MathNode("mpadded",[Un(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});St({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Kr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Ce.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Xt.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:p}=rc.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+o&&(o=(o+m-r.height-r.depth)/2);var x=d.height-r.height-o-h;r.style.paddingLeft=xt(p);var y=Ce.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+x)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var S=e.havingStyle(Xt.SCRIPTSCRIPT),w=Kr(t.index,S,e),N=.6*(y.height-y.depth),A=Ce.makeVList({positionType:"shift",positionData:-N,children:[{type:"elem",elem:w}]},e),R=Ce.makeSpan(["root"],[A]);return Ce.makeSpan(["mord","sqrt"],[R,y],e)}else return Ce.makeSpan(["mord","sqrt"],[y],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new lt.MathNode("mroot",[Un(r,e),Un(n,e)]):new lt.MathNode("msqrt",[Un(r,e)])}});var gM={display:Xt.DISPLAY,text:Xt.TEXT,script:Xt.SCRIPT,scriptscript:Xt.SCRIPTSCRIPT};St({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=gM[t.style],n=e.havingStyle(r).withFont("");return qG(t.body,n,e)},mathmlBuilder(t,e){var r=gM[t.style],n=e.havingStyle(r),a=us(t.body,n),i=new lt.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var kde=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Xt.DISPLAY.size||n.alwaysHandleSupSub);return a?Hf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Xt.DISPLAY.size||n.limits);return i?FG:null}else{if(n.type==="accent")return Zr.isCharacterBox(n.base)?TE:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?zG:null}else return null}else return null};N0({type:"supsub",htmlBuilder(t,e){var r=kde(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=Kr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,x=n&&Zr.isCharacterBox(n);if(a){var y=e.havingStyle(e.style.sup());c=Kr(a,y,e),x||(p=o.height-y.fontMetrics().supDrop*y.sizeMultiplier/e.sizeMultiplier)}if(i){var S=e.havingStyle(e.style.sub());d=Kr(i,S,e),x||(m=o.depth+S.fontMetrics().subDrop*S.sizeMultiplier/e.sizeMultiplier)}var w;e.style===Xt.DISPLAY?w=h.sup1:e.style.cramped?w=h.sup3:w=h.sup2;var N=e.sizeMultiplier,A=xt(.5/h.ptPerEm/N),R=null;if(d){var O=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof io||O)&&(R=xt(-o.italic))}var L;if(c&&d){p=Math.max(p,w,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var I=h.defaultRuleThickness,k=4*I;if(p-c.depth-(d.height-m)<k){m=k-(p-c.depth)+d.height;var E=.8*h.xHeight-(p-c.depth);E>0&&(p+=E,m-=E)}var j=[{type:"elem",elem:d,shift:m,marginRight:A,marginLeft:R},{type:"elem",elem:c,shift:-p,marginRight:A}];L=Ce.makeVList({positionType:"individualShift",children:j},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var C=[{type:"elem",elem:d,marginLeft:R,marginRight:A}];L=Ce.makeVList({positionType:"shift",positionData:m,children:C},e)}else if(c)p=Math.max(p,w,c.depth+.25*h.xHeight),L=Ce.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:A}]},e);else throw new Error("supsub must have either sup or sub.");var q=nj(o,"right")||"mord";return Ce.makeSpan([q],[o,Ce.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Un(t.base,e)];t.sub&&i.push(Un(t.sub,e)),t.sup&&i.push(Un(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Xt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Xt.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Xt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Xt.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Xt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Xt.DISPLAY)?o="mover":o="msup"}return new lt.MathNode(o,i)}});N0({type:"atom",htmlBuilder(t,e){return Ce.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new lt.MathNode("mo",[so(t.text,t.mode)]);if(t.family==="bin"){var n=NE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var HG={mi:"italic",mn:"normal",mtext:"normal"};N0({type:"mathord",htmlBuilder(t,e){return Ce.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new lt.MathNode("mi",[so(t.text,t.mode,e)]),n=NE(t,e)||"italic";return n!==HG[r.type]&&r.setAttribute("mathvariant",n),r}});N0({type:"textord",htmlBuilder(t,e){return Ce.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=so(t.text,t.mode,e),n=NE(t,e)||"normal",a;return t.mode==="text"?a=new lt.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new lt.MathNode("mn",[r]):t.text==="\\prime"?a=new lt.MathNode("mo",[r]):a=new lt.MathNode("mi",[r]),n!==HG[a.type]&&a.setAttribute("mathvariant",n),a}});var M3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},D3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};N0({type:"spacing",htmlBuilder(t,e){if(D3.hasOwnProperty(t.text)){var r=D3[t.text].className||"";if(t.mode==="text"){var n=Ce.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Ce.makeSpan(["mspace",r],[Ce.mathsym(t.text,t.mode,e)],e)}else{if(M3.hasOwnProperty(t.text))return Ce.makeSpan(["mspace",M3[t.text]],[],e);throw new ut('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(D3.hasOwnProperty(t.text))r=new lt.MathNode("mtext",[new lt.TextNode("")]);else{if(M3.hasOwnProperty(t.text))return new lt.MathNode("mspace");throw new ut('Unknown type of space "'+t.text+'"')}return r}});var xM=()=>{var t=new lt.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};N0({type:"tag",mathmlBuilder(t,e){var r=new lt.MathNode("mtable",[new lt.MathNode("mtr",[xM(),new lt.MathNode("mtd",[$u(t.body,e)]),xM(),new lt.MathNode("mtd",[$u(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var yM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},vM={"\\textbf":"textbf","\\textmd":"textmd"},Cde={"\\textit":"textit","\\textup":"textup"},bM=(t,e)=>{var r=t.font;if(r){if(yM[r])return e.withTextFontFamily(yM[r]);if(vM[r])return e.withTextFontWeight(vM[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Cde[r])};St({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:Na(a),font:n}},htmlBuilder(t,e){var r=bM(t,e),n=Ka(t.body,r,!0);return Ce.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=bM(t,e);return $u(t.body,r)}});St({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Kr(t.body,e),n=Ce.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ce.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return Ce.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new lt.MathNode("mo",[new lt.TextNode("")]);r.setAttribute("stretchy","true");var n=new lt.MathNode("munder",[Un(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});St({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Kr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return Ce.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new lt.MathNode("mpadded",[Un(t.body,e)],["vcenter"])}});St({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ut("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=wM(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(Ce.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Ce.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Ce.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new lt.TextNode(wM(t)),n=new lt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var wM=t=>t.body.replace(/ /g,t.star?"":""),yu=pG,GG=`[ \r
	]`,Ode="\\\\[a-zA-Z@]+",Ide="\\\\[^\uD800-\uDFFF]",Rde="("+Ode+")"+GG+"*",Mde=`\\\\(
|[ \r	]+
?)[ \r	]*`,oj="[-]",Dde=new RegExp(oj+"+$"),Pde="("+GG+"+)|"+(Mde+"|")+"([!-\\[\\]---]"+(oj+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(oj+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Rde)+("|"+Ide+")");class SM{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Pde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Rs("EOF",new es(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ut("Unexpected character: '"+e[r]+"'",new Rs(e[r],new es(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Rs(a,new es(this,r,this.tokenRegex.lastIndex))}}class Lde{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ut("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var Bde=DG;J("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});J("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});J("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});J("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});J("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});J("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");J("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var NM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};J("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ut("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=NM[e.text],n==null||n>=r)throw new ut("Invalid base-"+r+" digit "+e.text);for(var a;(a=NM[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var RE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ut("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ut("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ut("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ut("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};J("\\newcommand",t=>RE(t,!1,!0,!1));J("\\renewcommand",t=>RE(t,!0,!1,!1));J("\\providecommand",t=>RE(t,!0,!0,!0));J("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});J("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});J("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),yu[r],Fn.math[r],Fn.text[r]),""});J("\\bgroup","{");J("\\egroup","}");J("~","\\nobreakspace");J("\\lq","`");J("\\rq","'");J("\\aa","\\r a");J("\\AA","\\r A");J("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");J("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");J("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");J("","\\mathscr{B}");J("","\\mathscr{E}");J("","\\mathscr{F}");J("","\\mathscr{H}");J("","\\mathscr{I}");J("","\\mathscr{L}");J("","\\mathscr{M}");J("","\\mathscr{R}");J("","\\mathfrak{C}");J("","\\mathfrak{H}");J("","\\mathfrak{Z}");J("\\Bbbk","\\Bbb{k}");J("","\\cdotp");J("\\llap","\\mathllap{\\textrm{#1}}");J("\\rlap","\\mathrlap{\\textrm{#1}}");J("\\clap","\\mathclap{\\textrm{#1}}");J("\\mathstrut","\\vphantom{(}");J("\\underbar","\\underline{\\text{#1}}");J("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');J("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");J("\\ne","\\neq");J("","\\neq");J("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");J("","\\notin");J("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");J("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");J("","\\perp");J("","\\mathclose{!\\mkern-0.8mu!}");J("","\\notni");J("","\\ulcorner");J("","\\urcorner");J("","\\llcorner");J("","\\lrcorner");J("","\\copyright");J("","\\textregistered");J("","\\textregistered");J("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');J("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');J("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');J("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');J("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");J("","\\vdots");J("\\varGamma","\\mathit{\\Gamma}");J("\\varDelta","\\mathit{\\Delta}");J("\\varTheta","\\mathit{\\Theta}");J("\\varLambda","\\mathit{\\Lambda}");J("\\varXi","\\mathit{\\Xi}");J("\\varPi","\\mathit{\\Pi}");J("\\varSigma","\\mathit{\\Sigma}");J("\\varUpsilon","\\mathit{\\Upsilon}");J("\\varPhi","\\mathit{\\Phi}");J("\\varPsi","\\mathit{\\Psi}");J("\\varOmega","\\mathit{\\Omega}");J("\\substack","\\begin{subarray}{c}#1\\end{subarray}");J("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");J("\\boxed","\\fbox{$\\displaystyle{#1}$}");J("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");J("\\implies","\\DOTSB\\;\\Longrightarrow\\;");J("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");J("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");J("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var _M={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};J("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in _M?e=_M[r]:(r.slice(0,4)==="\\not"||r in Fn.math&&["bin","rel"].includes(Fn.math[r].group))&&(e="\\dotsb"),e});var ME={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};J("\\dotso",function(t){var e=t.future().text;return e in ME?"\\ldots\\,":"\\ldots"});J("\\dotsc",function(t){var e=t.future().text;return e in ME&&e!==","?"\\ldots\\,":"\\ldots"});J("\\cdots",function(t){var e=t.future().text;return e in ME?"\\@cdots\\,":"\\@cdots"});J("\\dotsb","\\cdots");J("\\dotsm","\\cdots");J("\\dotsi","\\!\\cdots");J("\\dotsx","\\ldots\\,");J("\\DOTSI","\\relax");J("\\DOTSB","\\relax");J("\\DOTSX","\\relax");J("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");J("\\,","\\tmspace+{3mu}{.1667em}");J("\\thinspace","\\,");J("\\>","\\mskip{4mu}");J("\\:","\\tmspace+{4mu}{.2222em}");J("\\medspace","\\:");J("\\;","\\tmspace+{5mu}{.2777em}");J("\\thickspace","\\;");J("\\!","\\tmspace-{3mu}{.1667em}");J("\\negthinspace","\\!");J("\\negmedspace","\\tmspace-{4mu}{.2222em}");J("\\negthickspace","\\tmspace-{5mu}{.277em}");J("\\enspace","\\kern.5em ");J("\\enskip","\\hskip.5em\\relax");J("\\quad","\\hskip1em\\relax");J("\\qquad","\\hskip2em\\relax");J("\\tag","\\@ifstar\\tag@literal\\tag@paren");J("\\tag@paren","\\tag@literal{({#1})}");J("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ut("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});J("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");J("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");J("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");J("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");J("\\newline","\\\\\\relax");J("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var WG=xt(Jo["Main-Regular"][84][1]-.7*Jo["Main-Regular"][65][1]);J("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+WG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");J("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+WG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");J("\\hspace","\\@ifstar\\@hspacer\\@hspace");J("\\@hspace","\\hskip #1\\relax");J("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");J("\\ordinarycolon",":");J("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");J("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');J("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');J("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');J("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');J("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');J("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');J("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');J("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');J("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');J("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');J("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');J("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');J("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');J("","\\dblcolon");J("","\\eqcolon");J("","\\coloneqq");J("","\\eqqcolon");J("","\\Coloneqq");J("\\ratio","\\vcentcolon");J("\\coloncolon","\\dblcolon");J("\\colonequals","\\coloneqq");J("\\coloncolonequals","\\Coloneqq");J("\\equalscolon","\\eqqcolon");J("\\equalscoloncolon","\\Eqqcolon");J("\\colonminus","\\coloneq");J("\\coloncolonminus","\\Coloneq");J("\\minuscolon","\\eqcolon");J("\\minuscoloncolon","\\Eqcolon");J("\\coloncolonapprox","\\Colonapprox");J("\\coloncolonsim","\\Colonsim");J("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");J("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");J("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");J("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");J("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");J("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");J("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");J("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");J("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");J("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");J("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");J("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");J("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");J("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");J("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");J("\\ngeqq","\\html@mathml{\\@ngeqq}{}");J("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");J("\\nleqq","\\html@mathml{\\@nleqq}{}");J("\\nleqslant","\\html@mathml{\\@nleqslant}{}");J("\\nshortmid","\\html@mathml{\\@nshortmid}{}");J("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");J("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");J("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");J("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");J("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");J("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");J("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");J("\\imath","\\html@mathml{\\@imath}{}");J("\\jmath","\\html@mathml{\\@jmath}{}");J("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");J("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");J("","\\llbracket");J("","\\rrbracket");J("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");J("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");J("","\\lBrace");J("","\\rBrace");J("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");J("","\\minuso");J("\\darr","\\downarrow");J("\\dArr","\\Downarrow");J("\\Darr","\\Downarrow");J("\\lang","\\langle");J("\\rang","\\rangle");J("\\uarr","\\uparrow");J("\\uArr","\\Uparrow");J("\\Uarr","\\Uparrow");J("\\N","\\mathbb{N}");J("\\R","\\mathbb{R}");J("\\Z","\\mathbb{Z}");J("\\alef","\\aleph");J("\\alefsym","\\aleph");J("\\Alpha","\\mathrm{A}");J("\\Beta","\\mathrm{B}");J("\\bull","\\bullet");J("\\Chi","\\mathrm{X}");J("\\clubs","\\clubsuit");J("\\cnums","\\mathbb{C}");J("\\Complex","\\mathbb{C}");J("\\Dagger","\\ddagger");J("\\diamonds","\\diamondsuit");J("\\empty","\\emptyset");J("\\Epsilon","\\mathrm{E}");J("\\Eta","\\mathrm{H}");J("\\exist","\\exists");J("\\harr","\\leftrightarrow");J("\\hArr","\\Leftrightarrow");J("\\Harr","\\Leftrightarrow");J("\\hearts","\\heartsuit");J("\\image","\\Im");J("\\infin","\\infty");J("\\Iota","\\mathrm{I}");J("\\isin","\\in");J("\\Kappa","\\mathrm{K}");J("\\larr","\\leftarrow");J("\\lArr","\\Leftarrow");J("\\Larr","\\Leftarrow");J("\\lrarr","\\leftrightarrow");J("\\lrArr","\\Leftrightarrow");J("\\Lrarr","\\Leftrightarrow");J("\\Mu","\\mathrm{M}");J("\\natnums","\\mathbb{N}");J("\\Nu","\\mathrm{N}");J("\\Omicron","\\mathrm{O}");J("\\plusmn","\\pm");J("\\rarr","\\rightarrow");J("\\rArr","\\Rightarrow");J("\\Rarr","\\Rightarrow");J("\\real","\\Re");J("\\reals","\\mathbb{R}");J("\\Reals","\\mathbb{R}");J("\\Rho","\\mathrm{P}");J("\\sdot","\\cdot");J("\\sect","\\S");J("\\spades","\\spadesuit");J("\\sub","\\subset");J("\\sube","\\subseteq");J("\\supe","\\supseteq");J("\\Tau","\\mathrm{T}");J("\\thetasym","\\vartheta");J("\\weierp","\\wp");J("\\Zeta","\\mathrm{Z}");J("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");J("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");J("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");J("\\bra","\\mathinner{\\langle{#1}|}");J("\\ket","\\mathinner{|{#1}\\rangle}");J("\\braket","\\mathinner{\\langle{#1}\\rangle}");J("\\Bra","\\left\\langle#1\\right|");J("\\Ket","\\left|#1\\right\\rangle");var KG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>x=>{t&&(x.macros.set("|",o),a.length&&x.macros.set("\\|",c));var y=m;if(!m&&a.length){var S=x.future();S.text==="|"&&(x.popToken(),y=!0)}return{tokens:y?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};J("\\bra@ket",KG(!1));J("\\bra@set",KG(!0));J("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");J("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");J("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");J("\\angln","{\\angl n}");J("\\blue","\\textcolor{##6495ed}{#1}");J("\\orange","\\textcolor{##ffa500}{#1}");J("\\pink","\\textcolor{##ff00af}{#1}");J("\\red","\\textcolor{##df0030}{#1}");J("\\green","\\textcolor{##28ae7b}{#1}");J("\\gray","\\textcolor{gray}{#1}");J("\\purple","\\textcolor{##9d38bd}{#1}");J("\\blueA","\\textcolor{##ccfaff}{#1}");J("\\blueB","\\textcolor{##80f6ff}{#1}");J("\\blueC","\\textcolor{##63d9ea}{#1}");J("\\blueD","\\textcolor{##11accd}{#1}");J("\\blueE","\\textcolor{##0c7f99}{#1}");J("\\tealA","\\textcolor{##94fff5}{#1}");J("\\tealB","\\textcolor{##26edd5}{#1}");J("\\tealC","\\textcolor{##01d1c1}{#1}");J("\\tealD","\\textcolor{##01a995}{#1}");J("\\tealE","\\textcolor{##208170}{#1}");J("\\greenA","\\textcolor{##b6ffb0}{#1}");J("\\greenB","\\textcolor{##8af281}{#1}");J("\\greenC","\\textcolor{##74cf70}{#1}");J("\\greenD","\\textcolor{##1fab54}{#1}");J("\\greenE","\\textcolor{##0d923f}{#1}");J("\\goldA","\\textcolor{##ffd0a9}{#1}");J("\\goldB","\\textcolor{##ffbb71}{#1}");J("\\goldC","\\textcolor{##ff9c39}{#1}");J("\\goldD","\\textcolor{##e07d10}{#1}");J("\\goldE","\\textcolor{##a75a05}{#1}");J("\\redA","\\textcolor{##fca9a9}{#1}");J("\\redB","\\textcolor{##ff8482}{#1}");J("\\redC","\\textcolor{##f9685d}{#1}");J("\\redD","\\textcolor{##e84d39}{#1}");J("\\redE","\\textcolor{##bc2612}{#1}");J("\\maroonA","\\textcolor{##ffbde0}{#1}");J("\\maroonB","\\textcolor{##ff92c6}{#1}");J("\\maroonC","\\textcolor{##ed5fa6}{#1}");J("\\maroonD","\\textcolor{##ca337c}{#1}");J("\\maroonE","\\textcolor{##9e034e}{#1}");J("\\purpleA","\\textcolor{##ddd7ff}{#1}");J("\\purpleB","\\textcolor{##c6b9fc}{#1}");J("\\purpleC","\\textcolor{##aa87ff}{#1}");J("\\purpleD","\\textcolor{##7854ab}{#1}");J("\\purpleE","\\textcolor{##543b78}{#1}");J("\\mintA","\\textcolor{##f5f9e8}{#1}");J("\\mintB","\\textcolor{##edf2df}{#1}");J("\\mintC","\\textcolor{##e0e5cc}{#1}");J("\\grayA","\\textcolor{##f6f7f7}{#1}");J("\\grayB","\\textcolor{##f0f1f2}{#1}");J("\\grayC","\\textcolor{##e3e5e6}{#1}");J("\\grayD","\\textcolor{##d6d8da}{#1}");J("\\grayE","\\textcolor{##babec2}{#1}");J("\\grayF","\\textcolor{##888d93}{#1}");J("\\grayG","\\textcolor{##626569}{#1}");J("\\grayH","\\textcolor{##3b3e40}{#1}");J("\\grayI","\\textcolor{##21242c}{#1}");J("\\kaBlue","\\textcolor{##314453}{#1}");J("\\kaGreen","\\textcolor{##71B307}{#1}");var XG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class $de{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Lde(Bde,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new SM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new Rs("EOF",n.loc)),this.pushTokens(a),new Rs("",es.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ut("Extra }",i)}else if(i.text==="EOF")throw new ut("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ut("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ut("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ut("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ut("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ut("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ut("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Rs(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new SM(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||yu.hasOwnProperty(e)||Fn.math.hasOwnProperty(e)||Fn.text.hasOwnProperty(e)||XG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:yu.hasOwnProperty(e)&&!yu[e].primitive}}var TM=/^[]/,My=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),P3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},jM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class aw{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new $de(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ut("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Rs("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(aw.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&yu[a.text]&&yu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ut("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ut("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ut("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ut("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ut("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ut("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(My[i.text]){var h=TM.test(i.text),p=[];for(p.push(new Rs(My[i.text])),this.consume();;){var m=this.fetch().text;if(!My[m]||TM.test(m)!==h)break;p.unshift(new Rs(My[m])),this.consume()}var x=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:x}:n={type:"ordgroup",mode:"math",body:x}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=yu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ut("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ut("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ut("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=yu[e];if(c&&c.handler)return c.handler(o,r,n);throw new ut("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ut("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ut("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ut("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ut("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ut("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ut("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ut("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!iG(i))throw new ut("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:es.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!XG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ut("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:es.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:es.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:es.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ut(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}jM.hasOwnProperty(r[0])&&!Fn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=jM[r[0]]+r.slice(1));var i=Dde.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(Fn[this.mode][r]){this.settings.strict&&this.mode==="math"&&rj.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Fn[this.mode][r].group,d=es.range(e),h;if(Aue.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(aG(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:es.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var x=i[0][m];if(!P3[x])throw new ut("Unknown accent ' "+x+"'",e);var y=P3[x][this.mode]||P3[x].text;if(!y)throw new ut("Accent "+x+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:es.range(e),label:y,isStretchy:!1,isShifty:!0,base:o}}return o}}aw.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var DE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new aw(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ut("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new Rs("\\df@tag")])}]}return a},QG=function(e,r,n){r.textContent="";var a=PE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),QG=function(){throw new ut("KaTeX doesn't work in quirks mode.")});var zde=function(e,r){var n=PE(e,r).toMarkup();return n},Ude=function(e,r){var n=new xE(r);return DE(e,n)},YG=function(e,r,n){if(n.throwOnError||!(e instanceof ut))throw e;var a=Ce.makeSpan(["katex-error"],[new io(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},PE=function(e,r){var n=new xE(r);try{var a=DE(e,n);return Que(a,e,n)}catch(i){return YG(i,e,n)}},Vde=function(e,r){var n=new xE(r);try{var a=DE(e,n);return Yue(a,e,n)}catch(i){return YG(i,e,n)}},Fde="0.16.28",qde={Span:Ex,Anchor:bE,SymbolNode:io,SvgNode:hc,PathNode:Bu,LineNode:tj},ob={version:Fde,render:QG,renderToString:zde,ParseError:ut,SETTINGS_SCHEMA:vv,__parse:Ude,__renderToDomTree:PE,__renderToHTMLTree:Vde,__setFontMetrics:vue,__defineSymbol:M,__defineFunction:St,__defineMacro:J,__domTree:qde};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function lj(t,e){return lj=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},lj(t,e)}function Hde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wv(t,e,r){return Hde()?wv=Reflect.construct:wv=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&lj(h,o.prototype),h},wv.apply(null,arguments)}function bo(t){return Gde(t)||Wde(t)||Kde(t)||Xde()}function Gde(t){if(Array.isArray(t))return cj(t)}function Wde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Kde(t,e){if(t){if(typeof t=="string")return cj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cj(t,e)}}function cj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qde=Object.hasOwnProperty,AM=Object.setPrototypeOf,Yde=Object.isFrozen,Jde=Object.getPrototypeOf,Zde=Object.getOwnPropertyDescriptor,zi=Object.freeze,oo=Object.seal,e0e=Object.create,JG=typeof Reflect<"u"&&Reflect,lb=JG.apply,uj=JG.construct;lb||(lb=function(e,r,n){return e.apply(r,n)});zi||(zi=function(e){return e});oo||(oo=function(e){return e});uj||(uj=function(e,r){return wv(e,bo(r))});var t0e=lo(Array.prototype.forEach),EM=lo(Array.prototype.pop),tm=lo(Array.prototype.push),Sv=lo(String.prototype.toLowerCase),L3=lo(String.prototype.toString),kM=lo(String.prototype.match),yo=lo(String.prototype.replace),r0e=lo(String.prototype.indexOf),n0e=lo(String.prototype.trim),hi=lo(RegExp.prototype.test),B3=a0e(TypeError);function lo(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return lb(t,e,n)}}function a0e(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return uj(t,r)}}function jr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:Sv,AM&&AM(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(Yde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function Sd(t){var e=e0e(null),r;for(r in t)lb(Qde,t,[r])===!0&&(e[r]=t[r]);return e}function Dy(t,e){for(;t!==null;){var r=Zde(t,e);if(r){if(r.get)return lo(r.get);if(typeof r.value=="function")return lo(r.value)}t=Jde(t)}function n(a){return console.warn("fallback value for",a),null}return n}var CM=zi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$3=zi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),z3=zi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),i0e=zi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U3=zi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),s0e=zi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),OM=zi(["#text"]),IM=zi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),V3=zi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),RM=zi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Py=zi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),o0e=oo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),l0e=oo(/<%[\w\W]*|[\w\W]*%>/gm),c0e=oo(/\${[\w\W]*}/gm),u0e=oo(/^data-[\-\w.\u00B7-\uFFFF]+$/),d0e=oo(/^aria-[\-\w]+$/),h0e=oo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),f0e=oo(/^(?:\w+script|data):/i),p0e=oo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),m0e=oo(/^html$/i),g0e=oo(/^[a-z][.\w]*(-[.\w]+)+$/i),x0e=function(){return typeof window>"u"?null:window},y0e=function(e,r){if(pu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function ZG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x0e(),e=function(fe){return ZG(fe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,x=t.DOMParser,y=t.trustedTypes,S=c.prototype,w=Dy(S,"cloneNode"),N=Dy(S,"nextSibling"),A=Dy(S,"childNodes"),R=Dy(S,"parentNode");if(typeof i=="function"){var O=n.createElement("template");O.content&&O.content.ownerDocument&&(n=O.content.ownerDocument)}var L=y0e(y,r),I=L?L.createHTML(""):"",k=n,E=k.implementation,j=k.createNodeIterator,C=k.createDocumentFragment,q=k.getElementsByTagName,D=r.importNode,$={};try{$=Sd(n).documentMode?n.documentMode:{}}catch{}var B={};e.isSupported=typeof R=="function"&&E&&E.createHTMLDocument!==void 0&&$!==9;var V=o0e,W=l0e,G=c0e,Y=u0e,re=d0e,ce=f0e,de=p0e,X=g0e,ae=h0e,ne=null,ve=jr({},[].concat(bo(CM),bo($3),bo(z3),bo(U3),bo(OM))),pe=null,Be=jr({},[].concat(bo(IM),bo(V3),bo(RM),bo(Py))),Ue=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Fe=null,Ne=null,He=!0,Z=!0,te=!1,be=!0,Se=!1,Ze=!0,rt=!1,It=!1,At=!1,Ft=!1,qt=!1,Dt=!1,tr=!0,he=!1,Ge="user-content-",Pt=!0,Ke=!1,it={},$t=null,Nt=jr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),kr=null,ye=jr({},["audio","video","img","source","image","track"]),ot=null,mt=jr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ct="http://www.w3.org/1998/Math/MathML",vt="http://www.w3.org/2000/svg",tt="http://www.w3.org/1999/xhtml",gr=tt,Gt=!1,Vr=null,cn=jr({},[Ct,vt,tt],L3),yr,Qt=["application/xhtml+xml","text/html"],Lt="text/html",bt,Fr=null,tn=n.createElement("form"),Dr=function(fe){return fe instanceof RegExp||fe instanceof Function},Cr=function(fe){Fr&&Fr===fe||((!fe||pu(fe)!=="object")&&(fe={}),fe=Sd(fe),yr=Qt.indexOf(fe.PARSER_MEDIA_TYPE)===-1?yr=Lt:yr=fe.PARSER_MEDIA_TYPE,bt=yr==="application/xhtml+xml"?L3:Sv,ne="ALLOWED_TAGS"in fe?jr({},fe.ALLOWED_TAGS,bt):ve,pe="ALLOWED_ATTR"in fe?jr({},fe.ALLOWED_ATTR,bt):Be,Vr="ALLOWED_NAMESPACES"in fe?jr({},fe.ALLOWED_NAMESPACES,L3):cn,ot="ADD_URI_SAFE_ATTR"in fe?jr(Sd(mt),fe.ADD_URI_SAFE_ATTR,bt):mt,kr="ADD_DATA_URI_TAGS"in fe?jr(Sd(ye),fe.ADD_DATA_URI_TAGS,bt):ye,$t="FORBID_CONTENTS"in fe?jr({},fe.FORBID_CONTENTS,bt):Nt,Fe="FORBID_TAGS"in fe?jr({},fe.FORBID_TAGS,bt):{},Ne="FORBID_ATTR"in fe?jr({},fe.FORBID_ATTR,bt):{},it="USE_PROFILES"in fe?fe.USE_PROFILES:!1,He=fe.ALLOW_ARIA_ATTR!==!1,Z=fe.ALLOW_DATA_ATTR!==!1,te=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,be=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Se=fe.SAFE_FOR_TEMPLATES||!1,Ze=fe.SAFE_FOR_XML!==!1,rt=fe.WHOLE_DOCUMENT||!1,Ft=fe.RETURN_DOM||!1,qt=fe.RETURN_DOM_FRAGMENT||!1,Dt=fe.RETURN_TRUSTED_TYPE||!1,At=fe.FORCE_BODY||!1,tr=fe.SANITIZE_DOM!==!1,he=fe.SANITIZE_NAMED_PROPS||!1,Pt=fe.KEEP_CONTENT!==!1,Ke=fe.IN_PLACE||!1,ae=fe.ALLOWED_URI_REGEXP||ae,gr=fe.NAMESPACE||tt,Ue=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&Dr(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ue.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Dr(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ue.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ue.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Se&&(Z=!1),qt&&(Ft=!0),it&&(ne=jr({},bo(OM)),pe=[],it.html===!0&&(jr(ne,CM),jr(pe,IM)),it.svg===!0&&(jr(ne,$3),jr(pe,V3),jr(pe,Py)),it.svgFilters===!0&&(jr(ne,z3),jr(pe,V3),jr(pe,Py)),it.mathMl===!0&&(jr(ne,U3),jr(pe,RM),jr(pe,Py))),fe.ADD_TAGS&&(ne===ve&&(ne=Sd(ne)),jr(ne,fe.ADD_TAGS,bt)),fe.ADD_ATTR&&(pe===Be&&(pe=Sd(pe)),jr(pe,fe.ADD_ATTR,bt)),fe.ADD_URI_SAFE_ATTR&&jr(ot,fe.ADD_URI_SAFE_ATTR,bt),fe.FORBID_CONTENTS&&($t===Nt&&($t=Sd($t)),jr($t,fe.FORBID_CONTENTS,bt)),Pt&&(ne["#text"]=!0),rt&&jr(ne,["html","head","body"]),ne.table&&(jr(ne,["tbody"]),delete Fe.tbody),zi&&zi(fe),Fr=fe)},xn=jr({},["mi","mo","mn","ms","mtext"]),dr=jr({},["annotation-xml"]),Qn=jr({},["title","style","font","a","script"]),un=jr({},$3);jr(un,z3),jr(un,i0e);var dn=jr({},U3);jr(dn,s0e);var Re=function(fe){var nt=R(fe);(!nt||!nt.tagName)&&(nt={namespaceURI:gr,tagName:"template"});var dt=Sv(fe.tagName),rr=Sv(nt.tagName);return Vr[fe.namespaceURI]?fe.namespaceURI===vt?nt.namespaceURI===tt?dt==="svg":nt.namespaceURI===Ct?dt==="svg"&&(rr==="annotation-xml"||xn[rr]):!!un[dt]:fe.namespaceURI===Ct?nt.namespaceURI===tt?dt==="math":nt.namespaceURI===vt?dt==="math"&&dr[rr]:!!dn[dt]:fe.namespaceURI===tt?nt.namespaceURI===vt&&!dr[rr]||nt.namespaceURI===Ct&&!xn[rr]?!1:!dn[dt]&&(Qn[dt]||!un[dt]):!!(yr==="application/xhtml+xml"&&Vr[fe.namespaceURI]):!1},Ye=function(fe){tm(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=I}catch{fe.remove()}}},qe=function(fe,nt){try{tm(e.removed,{attribute:nt.getAttributeNode(fe),from:nt})}catch{tm(e.removed,{attribute:null,from:nt})}if(nt.removeAttribute(fe),fe==="is"&&!pe[fe])if(Ft||qt)try{Ye(nt)}catch{}else try{nt.setAttribute(fe,"")}catch{}},hr=function(fe){var nt,dt;if(At)fe="<remove></remove>"+fe;else{var rr=kM(fe,/^[\r\n\t ]+/);dt=rr&&rr[0]}yr==="application/xhtml+xml"&&gr===tt&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var br=L?L.createHTML(fe):fe;if(gr===tt)try{nt=new x().parseFromString(br,yr)}catch{}if(!nt||!nt.documentElement){nt=E.createDocument(gr,"template",null);try{nt.documentElement.innerHTML=Gt?I:br}catch{}}var vn=nt.body||nt.documentElement;return fe&&dt&&vn.insertBefore(n.createTextNode(dt),vn.childNodes[0]||null),gr===tt?q.call(nt,rt?"html":"body")[0]:rt?nt.documentElement:vn},Hr=function(fe){return j.call(fe.ownerDocument||fe,fe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},_r=function(fe){return fe instanceof m&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof p)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},rn=function(fe){return pu(o)==="object"?fe instanceof o:fe&&pu(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},yn=function(fe,nt,dt){B[fe]&&t0e(B[fe],function(rr){rr.call(e,nt,dt,Fr)})},pa=function(fe){var nt;if(yn("beforeSanitizeElements",fe,null),_r(fe)||hi(/[\u0080-\uFFFF]/,fe.nodeName))return Ye(fe),!0;var dt=bt(fe.nodeName);if(yn("uponSanitizeElement",fe,{tagName:dt,allowedTags:ne}),fe.hasChildNodes()&&!rn(fe.firstElementChild)&&(!rn(fe.content)||!rn(fe.content.firstElementChild))&&hi(/<[/\w]/g,fe.innerHTML)&&hi(/<[/\w]/g,fe.textContent)||dt==="select"&&hi(/<template/i,fe.innerHTML)||fe.nodeType===7||Ze&&fe.nodeType===8&&hi(/<[/\w]/g,fe.data))return Ye(fe),!0;if(!ne[dt]||Fe[dt]){if(!Fe[dt]&&ga(dt)&&(Ue.tagNameCheck instanceof RegExp&&hi(Ue.tagNameCheck,dt)||Ue.tagNameCheck instanceof Function&&Ue.tagNameCheck(dt)))return!1;if(Pt&&!$t[dt]){var rr=R(fe)||fe.parentNode,br=A(fe)||fe.childNodes;if(br&&rr)for(var vn=br.length,nn=vn-1;nn>=0;--nn){var _n=w(br[nn],!0);_n.__removalCount=(fe.__removalCount||0)+1,rr.insertBefore(_n,N(fe))}}return Ye(fe),!0}return fe instanceof c&&!Re(fe)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&hi(/<\/no(script|embed|frames)/i,fe.innerHTML)?(Ye(fe),!0):(Se&&fe.nodeType===3&&(nt=fe.textContent,nt=yo(nt,V," "),nt=yo(nt,W," "),nt=yo(nt,G," "),fe.textContent!==nt&&(tm(e.removed,{element:fe.cloneNode()}),fe.textContent=nt)),yn("afterSanitizeElements",fe,null),!1)},ma=function(fe,nt,dt){if(tr&&(nt==="id"||nt==="name")&&(dt in n||dt in tn))return!1;if(!(Z&&!Ne[nt]&&hi(Y,nt))){if(!(He&&hi(re,nt))){if(!pe[nt]||Ne[nt]){if(!(ga(fe)&&(Ue.tagNameCheck instanceof RegExp&&hi(Ue.tagNameCheck,fe)||Ue.tagNameCheck instanceof Function&&Ue.tagNameCheck(fe))&&(Ue.attributeNameCheck instanceof RegExp&&hi(Ue.attributeNameCheck,nt)||Ue.attributeNameCheck instanceof Function&&Ue.attributeNameCheck(nt))||nt==="is"&&Ue.allowCustomizedBuiltInElements&&(Ue.tagNameCheck instanceof RegExp&&hi(Ue.tagNameCheck,dt)||Ue.tagNameCheck instanceof Function&&Ue.tagNameCheck(dt))))return!1}else if(!ot[nt]){if(!hi(ae,yo(dt,de,""))){if(!((nt==="src"||nt==="xlink:href"||nt==="href")&&fe!=="script"&&r0e(dt,"data:")===0&&kr[fe])){if(!(te&&!hi(ce,yo(dt,de,"")))){if(dt)return!1}}}}}}return!0},ga=function(fe){return fe!=="annotation-xml"&&kM(fe,X)},hs=function(fe){var nt,dt,rr,br;yn("beforeSanitizeAttributes",fe,null);var vn=fe.attributes;if(!(!vn||_r(fe))){var nn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pe};for(br=vn.length;br--;){nt=vn[br];var _n=nt,zr=_n.name,Bs=_n.namespaceURI;if(dt=zr==="value"?nt.value:n0e(nt.value),rr=bt(zr),nn.attrName=rr,nn.attrValue=dt,nn.keepAttr=!0,nn.forceKeepAttr=void 0,yn("uponSanitizeAttribute",fe,nn),dt=nn.attrValue,!nn.forceKeepAttr&&(qe(zr,fe),!!nn.keepAttr)){if(!be&&hi(/\/>/i,dt)){qe(zr,fe);continue}Se&&(dt=yo(dt,V," "),dt=yo(dt,W," "),dt=yo(dt,G," "));var fs=bt(fe.nodeName);if(ma(fs,rr,dt)){if(he&&(rr==="id"||rr==="name")&&(qe(zr,fe),dt=Ge+dt),Ze&&hi(/((--!?|])>)|<\/(style|title)/i,dt)){qe(zr,fe);continue}if(L&&pu(y)==="object"&&typeof y.getAttributeType=="function"&&!Bs)switch(y.getAttributeType(fs,rr)){case"TrustedHTML":{dt=L.createHTML(dt);break}case"TrustedScriptURL":{dt=L.createScriptURL(dt);break}}try{Bs?fe.setAttributeNS(Bs,zr,dt):fe.setAttribute(zr,dt),_r(fe)?Ye(fe):EM(e.removed)}catch{}}}}yn("afterSanitizeAttributes",fe,null)}},bi=function _t(fe){var nt,dt=Hr(fe);for(yn("beforeSanitizeShadowDOM",fe,null);nt=dt.nextNode();)yn("uponSanitizeShadowNode",nt,null),pa(nt),hs(nt),nt.content instanceof a&&_t(nt.content);yn("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(_t){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt,dt,rr,br,vn;if(Gt=!_t,Gt&&(_t="<!-->"),typeof _t!="string"&&!rn(_t))if(typeof _t.toString=="function"){if(_t=_t.toString(),typeof _t!="string")throw B3("dirty is not a string, aborting")}else throw B3("toString is not a function");if(!e.isSupported){if(pu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof _t=="string")return t.toStaticHTML(_t);if(rn(_t))return t.toStaticHTML(_t.outerHTML)}return _t}if(It||Cr(fe),e.removed=[],typeof _t=="string"&&(Ke=!1),Ke){if(_t.nodeName){var nn=bt(_t.nodeName);if(!ne[nn]||Fe[nn])throw B3("root node is forbidden and cannot be sanitized in-place")}}else if(_t instanceof o)nt=hr("<!---->"),dt=nt.ownerDocument.importNode(_t,!0),dt.nodeType===1&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?nt=dt:nt.appendChild(dt);else{if(!Ft&&!Se&&!rt&&_t.indexOf("<")===-1)return L&&Dt?L.createHTML(_t):_t;if(nt=hr(_t),!nt)return Ft?null:Dt?I:""}nt&&At&&Ye(nt.firstChild);for(var _n=Hr(Ke?_t:nt);rr=_n.nextNode();)rr.nodeType===3&&rr===br||(pa(rr),hs(rr),rr.content instanceof a&&bi(rr.content),br=rr);if(br=null,Ke)return _t;if(Ft){if(qt)for(vn=C.call(nt.ownerDocument);nt.firstChild;)vn.appendChild(nt.firstChild);else vn=nt;return(pe.shadowroot||pe.shadowrootmod)&&(vn=D.call(r,vn,!0)),vn}var zr=rt?nt.outerHTML:nt.innerHTML;return rt&&ne["!doctype"]&&nt.ownerDocument&&nt.ownerDocument.doctype&&nt.ownerDocument.doctype.name&&hi(m0e,nt.ownerDocument.doctype.name)&&(zr="<!DOCTYPE "+nt.ownerDocument.doctype.name+`>
`+zr),Se&&(zr=yo(zr,V," "),zr=yo(zr,W," "),zr=yo(zr,G," ")),L&&Dt?L.createHTML(zr):zr},e.setConfig=function(_t){Cr(_t),It=!0},e.clearConfig=function(){Fr=null,It=!1},e.isValidAttribute=function(_t,fe,nt){Fr||Cr({});var dt=bt(_t),rr=bt(fe);return ma(dt,rr,nt)},e.addHook=function(_t,fe){typeof fe=="function"&&(B[_t]=B[_t]||[],tm(B[_t],fe))},e.removeHook=function(_t){if(B[_t])return EM(B[_t])},e.removeHooks=function(_t){B[_t]&&(B[_t]=[])},e.removeAllHooks=function(){B={}},e}var eW=ZG();const v0e=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=T.useRef(Kv()),d=T.useRef(Date.now()),h=T.useRef(t),[p,m]=T.useState(!0),[x,y]=T.useState(0),[S,w]=T.useState(!1),[N,A]=T.useState(null),[R,O]=T.useState(0),[L,I]=T.useState(0),[k,E]=T.useState(!1),[j,C]=T.useState(0),[q,D]=T.useState(!1),$=T.useRef(null),B=T.useRef(null),V=T.useRef(null),W=T.useRef(new Set),G=T.useRef(null),[Y,re]=T.useState(!1),[ce,de]=T.useState(""),[X,ae]=T.useState(0),ne=T.useRef(new Set);T.useEffect(()=>{h.current=t},[t]);const ve=T.useCallback(()=>{d.current=Date.now(),p||m(!0)},[p]),pe=T.useCallback(async(Fe,Ne)=>{if(!Ne||!n||!a||ne.current.has(Fe))return;ne.current.add(Fe),ae(Z=>Z+1),ve();const He=15;try{const te=(await WT({assignmentId:a,questionId:`block_${Fe}`,xpAmount:He,classType:i||"Uncategorized"})).data;if(te.awarded){const be=te.serverXP||He;I(Se=>Se+be),A({text:`+${be} XP`,type:"success"}),Kn.xpGain(),setTimeout(()=>A(null),2e3)}}catch(Z){console.error("Lesson block XP award failed",Z)}},[n,a,i,ve]);T.useEffect(()=>{const Fe=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,y(c.current.engagementTime),p||m(!0)):p&&m(!1)},1e3);return()=>clearInterval(Fe)},[p]),T.useEffect(()=>{const Fe=["mousemove","keydown","scroll","click"];return Fe.forEach(Ne=>window.addEventListener(Ne,ve)),()=>Fe.forEach(Ne=>window.removeEventListener(Ne,ve))},[ve]),T.useEffect(()=>()=>{h.current(c.current)},[]),T.useEffect(()=>{if(!n||!a)return;const Fe=async Ne=>{var Se,Ze,rt,It,At,Ft,qt,Dt,tr,he,Ge,Pt;const He=$.current;if(!He)return;const Z=He.src?new URL(He.src).origin:"";if(Ne.origin!==window.location.origin&&Ne.origin!==Z)return;const te=Ne.origin,be=Ne.data;if(!(!be||typeof be!="object"||!((Se=be.type)!=null&&Se.startsWith("portal-"))))switch(ve(),be.type){case"portal-ready":{w(!0);try{const Ke=await qa(ct(Me,"practice_progress",`${n}_${a}`)),it=Ke.exists()?Ke.data():null,$t=(it==null?void 0:it.answeredQuestions)||[];$t.forEach(ye=>W.current.add(ye)),O($t.length),it&&(G.current=it,it.completed&&(E(!0),C(it.totalCompletions||1)));const Nt=it?{state:it.state||null,currentQuestion:it.currentQuestion??0}:null,kr=it!=null&&it.completed?{completed:!0,completedAt:it.completedAt,bestScore:it.bestScore,totalCompletions:it.totalCompletions||0,lastCompletion:((Ze=it.completionHistory)==null?void 0:Ze.length)>0?it.completionHistory[it.completionHistory.length-1]:null}:null;(rt=He.contentWindow)==null||rt.postMessage({type:"portal-init",payload:{userId:n,savedState:Nt,completionInfo:kr}},te)}catch(Ke){console.error("Bridge: Failed to load saved state",Ke),(It=He.contentWindow)==null||It.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},te)}break}case"portal-save":{const{state:Ke,currentQuestion:it}=be.payload||{};if(!Ke)break;try{const $t=G.current,Nt={userId:n,assignmentId:a,state:Ke,currentQuestion:it??0,answeredQuestions:Array.from(W.current),lastUpdated:new Date().toISOString()};$t!=null&&$t.completed&&(Nt.completed=$t.completed,Nt.completedAt=$t.completedAt,Nt.bestScore=$t.bestScore,Nt.totalCompletions=$t.totalCompletions,Nt.completionHistory=$t.completionHistory),await va(ct(Me,"practice_progress",`${n}_${a}`),Nt,{merge:!0}),G.current={...G.current,...Nt},(At=He.contentWindow)==null||At.postMessage({type:"portal-save-ok"},te)}catch($t){console.error("Bridge: Save failed",$t),(Ft=He.contentWindow)==null||Ft.postMessage({type:"portal-save-error"},te)}break}case"portal-complete":{const{score:Ke,totalQuestions:it,correctAnswers:$t}=be.payload||{};try{const Nt=G.current,kr=new Date().toISOString(),ye={completedAt:kr,score:Ke??0,totalQuestions:it??0,correctAnswers:$t??0,answeredQuestions:Array.from(W.current)},ot=[...(Nt==null?void 0:Nt.completionHistory)||[],ye],mt=Math.max((Nt==null?void 0:Nt.bestScore)||0,Ke||0),Ct=((Nt==null?void 0:Nt.totalCompletions)||0)+1,vt={userId:n,assignmentId:a,completed:!0,completedAt:(Nt==null?void 0:Nt.completedAt)||kr,bestScore:mt,totalCompletions:Ct,completionHistory:ot,answeredQuestions:Array.from(W.current),lastUpdated:kr};Nt!=null&&Nt.state&&(vt.state=Nt.state,vt.currentQuestion=Nt.currentQuestion),await va(ct(Me,"practice_progress",`${n}_${a}`),vt,{merge:!0}),G.current={...G.current,...vt},E(!0),C(Ct),Kn.xpGain(),A({text:"Module Complete!",type:"success"}),setTimeout(()=>A(null),3e3),(qt=He.contentWindow)==null||qt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:Ct,bestScore:mt}},te)}catch(Nt){console.error("Bridge: Completion save failed",Nt),(Dt=He.contentWindow)==null||Dt.postMessage({type:"portal-complete-error"},te)}break}case"portal-replay":{try{const Ke=G.current,it={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(W.current),lastUpdated:new Date().toISOString(),completed:(Ke==null?void 0:Ke.completed)||!1,completedAt:(Ke==null?void 0:Ke.completedAt)||null,bestScore:(Ke==null?void 0:Ke.bestScore)||null,totalCompletions:(Ke==null?void 0:Ke.totalCompletions)||0,completionHistory:(Ke==null?void 0:Ke.completionHistory)||[]};await va(ct(Me,"practice_progress",`${n}_${a}`),it,{merge:!0}),G.current=it,D(!1),(tr=He.contentWindow)==null||tr.postMessage({type:"portal-reset-ok"},te)}catch(Ke){console.error("Bridge: Replay reset failed",Ke)}break}case"portal-answer":{const{questionId:Ke,correct:it,attempts:$t}=be.payload||{};if(!Ke)break;if(it&&!W.current.has(Ke)){W.current.add(Ke),O(kr=>kr+1);const Nt=$t===1?15:10;try{const ye=(await WT({assignmentId:a,questionId:Ke,xpAmount:Nt,classType:i||"Uncategorized"})).data;if(ye.awarded){const ot=ye.serverXP||Nt;I(mt=>mt+ot),A({text:`+${ot} XP`,type:"success"}),Kn.xpGain(),setTimeout(()=>A(null),2e3)}(he=He.contentWindow)==null||he.postMessage({type:"portal-xp-result",payload:{questionId:Ke,awarded:ye.awarded,xp:ye.serverXP||Nt}},te)}catch(kr){console.error("Bridge: XP award failed",kr),(Ge=He.contentWindow)==null||Ge.postMessage({type:"portal-xp-result",payload:{questionId:Ke,awarded:!1,xp:0}},te)}}else it&&((Pt=He.contentWindow)==null||Pt.postMessage({type:"portal-xp-result",payload:{questionId:Ke,awarded:!1,xp:0}},te));break}}};return window.addEventListener("message",Fe),()=>window.removeEventListener("message",Fe)},[n,a,i,ve]);const Be=T.useCallback(()=>{const Fe=$.current;if(!Fe||!n||!a)return;const He=(Fe.src?new URL(Fe.src).origin:"")||window.location.origin;(async()=>{var Z;try{const te=G.current,be={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(W.current),lastUpdated:new Date().toISOString(),completed:(te==null?void 0:te.completed)||!1,completedAt:(te==null?void 0:te.completedAt)||null,bestScore:(te==null?void 0:te.bestScore)||null,totalCompletions:(te==null?void 0:te.totalCompletions)||0,completionHistory:(te==null?void 0:te.completionHistory)||[]};await va(ct(Me,"practice_progress",`${n}_${a}`),be,{merge:!0}),G.current=be,D(!1),(Z=Fe.contentWindow)==null||Z.postMessage({type:"portal-reset-ok"},He)}catch(te){console.error("Replay reset failed",te)}})()},[n,a]),Ue=T.useCallback(()=>{const Fe=V.current;Fe&&(document.fullscreenElement?document.exitFullscreen():Fe.requestFullscreen().catch(()=>{re(Ne=>!Ne)}))},[]);return T.useEffect(()=>{const Fe=()=>re(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",Fe),()=>document.removeEventListener("fullscreenchange",Fe)},[]),T.useEffect(()=>{if(B.current&&r){const Fe=r.replace(/\$(.*?)\$/g,(Ne,He)=>{try{return ob.renderToString(He,{throwOnError:!1})}catch{return He}});B.current.innerHTML=eW.sanitize(Fe,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),de(B.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(dE,{className:"w-4 h-4"}):s.jsx(Ps,{className:"w-4 h-4 animate-pulse"}),p?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]}),S&&R>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx(gn,{className:"w-3 h-3"})," ",R," answered"]}),!S&&X>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-indigo-300 bg-indigo-500/10 px-3 py-1 rounded-full border border-indigo-500/20",children:[s.jsx(gn,{className:"w-3 h-3"})," ",X," blocks completed"]}),S&&L>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx(ta,{className:"w-3 h-3"})," ",L," XP"]}),k&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(cl,{className:"w-3 h-3"}),"Completed",j>1?` (${j}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||ce)&&s.jsx(UR,{textContent:ce,compact:!0}),k&&S&&(q?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:Be,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>D(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx(qle,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:Ue,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:Y?"Exit full screen (Esc)":"Full screen",children:[Y?s.jsx(GH,{className:"w-3 h-3"}):s.jsx(XT,{className:"w-3 h-3"}),Y?"Exit Full Screen":"Full Screen"]}),S&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx(ta,{className:"w-3 h-3"})," XP Linked"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Mo,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),N&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${N.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[N.type==="success"?s.jsx(gn,{className:"w-4 h-4"}):s.jsx(Co,{className:"w-4 h-4"}),N.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{ref:V,className:`flex flex-col bg-white relative ${o&&o.length>0?"flex-[3]":"flex-1"}`,children:[s.jsx("iframe",{ref:$,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:ve}),s.jsx(Sce,{containerRef:V,assignmentId:a})]}),o&&o.length>0&&s.jsx("div",{className:"flex-[2] bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:s.jsx(JT,{blocks:o,onBlockComplete:pe,showSidebar:!0,engagementTime:x,xpEarned:L})})]}):o&&o.length>0?s.jsx("div",{className:"flex-1 bg-[#0f0720]/95 overflow-y-auto p-6 text-gray-300 custom-scrollbar",children:s.jsx(JT,{blocks:o,onBlockComplete:pe,showSidebar:!0,engagementTime:x,xpEarned:L})}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(s0,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(XT,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),ce&&s.jsx(UR,{textContent:ce})]}),s.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]})]})]})},b0e=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(null),a=async()=>{e(!0),n(null);try{await qte(GT,Doe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Mo,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(Ale,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},tW=T.createContext(null),Do=()=>{const t=T.useContext(tW);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},w0e=({children:t})=>{const[e,r]=T.useState({isOpen:!1,options:{message:""}}),n=T.useRef(null),a=T.useRef(null),i=T.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),o=T.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=T.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);T.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),T.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&o()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(tW.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Mo,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},gg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},MM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(X2,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Mo,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(zle,{className:"w-4 h-4"})}},S0e=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=Do(),a=Qa(),[i,o]=T.useState(!1),[c,d]=T.useState(""),[h,p]=T.useState(""),[m,x]=T.useState("INFO"),[y,S]=T.useState("GLOBAL"),[w,N]=T.useState([]),A=async()=>{if(!(!c.trim()||!h.trim()))try{await Ae.createAnnouncement({title:c.trim(),content:h.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...w.length>0?{targetSections:w}:{}}),await Ae.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),N([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},R=async O=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Ae.deleteAnnouncement(O)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Jv,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Bn,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(Jv,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(O=>{var I;const L=MM[O.priority]||MM.INFO;return s.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:O.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:O.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[O.classType==="GLOBAL"?"All Classes":O.classType,(I=O.targetSections)!=null&&I.length?`  ${O.targetSections.join(", ")}`:"","  ",new Date(O.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>R(O.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},O.id)})}),s.jsx(is,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:O=>d(O.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:O=>p(O.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:m,onChange:O=>x(O.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:y,onChange:O=>S(O.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Mr).filter(O=>O!=="Uncategorized").map(O=>s.jsx("option",{value:O,children:O},O))]})]})]}),s.jsx(gg,{availableSections:r,selectedSections:w,onChange:N}),s.jsx("button",{onClick:A,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},LE=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],BE=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],N0e=t=>BE.filter(e=>!e.isSecret||t.includes(e.id)),Ly={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},rW=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],DM=(t,e)=>{const r=rW.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},_0e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],$E=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of _0e){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},T0e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],PM=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],nW=t=>[...PM].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||PM[0],aW=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,LM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],j0e=["I","II","III","IV","V"],A0e=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},l0=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,LM.length-1),a=LM[n]||"Unknownium",i=j0e[r],o=n+1,c=A0e(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Yi={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},E0e={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},BM=(t,e,r)=>{const n=Yi.UNSOCKET_BASE,a=E0e[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},$M=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},zE=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},UE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},c0=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},k0e=t=>{if(!t)return{};const e=Object.values(t).filter(Boolean),r=$E(e),n={};return r.forEach(({activeBonus:a})=>{a.effects.forEach(i=>{n[i.stat]=(n[i.stat]||0)+i.value})}),n},C0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{(n.gems||[]).forEach(a=>{e[a.stat]=(e[a.stat]||0)+a.value})}),e},O0e=t=>{if(!t)return{};const e={};return Object.values(t).filter(Boolean).forEach(n=>{if(!n.runewordActive)return;const a=LE.find(i=>i.id===n.runewordActive);if(a)for(const[i,o]of Object.entries(a.bonusStats))e[i]=(e[i]||0)+o}),e},zM=t=>t.runewordActive&&LE.find(e=>e.id===t.runewordActive)||null,ba=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function zu(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const I0e=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var I,k,E,j,C,q,D,$,B,V;const[i,o]=T.useState(!1),c=((I=t.gamification)==null?void 0:I.level)||1,d=((k=t.gamification)==null?void 0:k.xp)||0,h=((E=t.gamification)==null?void 0:E.currency)||0,p=l0(c),m=UE(t),x=t.enrolledClasses||(t.classType?[t.classType]:[]),y=((C=(j=t.gamification)==null?void 0:j.completedQuests)==null?void 0:C.length)||0,S=((D=(q=t.gamification)==null?void 0:q.activeQuests)==null?void 0:D.filter(W=>W.status==="ACCEPTED"||W.status==="DEPLOYED").length)||0,w=T.useMemo(()=>x.map(W=>{var ae,ne;const G=((ne=(ae=t.gamification)==null?void 0:ae.classXp)==null?void 0:ne[W])||0,Y=zu(t,W),re=c0(Y.equipped),ce=Y.inventory.length,de=e.filter(ve=>{const pe=r.find(Be=>Be.id===ve.assignmentId);return(pe==null?void 0:pe.classType)===W}),X=Math.round(de.reduce((ve,pe)=>{var Be;return ve+(((Be=pe.metrics)==null?void 0:Be.engagementTime)||0)},0)/60);return{cls:W,classXp:G,gearScore:re,inventoryCount:ce,resourcesViewed:de.length,totalTime:X}}),[t,e,r,x]),N=T.useMemo(()=>{const W=new Map;return e.forEach(G=>{var X,ae,ne,ve,pe,Be,Ue;const Y=r.find(Fe=>Fe.id===G.assignmentId),re=G.assignmentId,ce=W.get(re),de=((X=G.metrics)==null?void 0:X.engagementTime)||0;ce?(ce.visits++,ce.totalTime+=de,ce.totalKeystrokes+=((ae=G.metrics)==null?void 0:ae.keystrokes)||0,ce.totalClicks+=((ne=G.metrics)==null?void 0:ne.clickCount)||0,ce.totalPastes+=((ve=G.metrics)==null?void 0:ve.pasteCount)||0,ce.statuses.push(G.status),G.submittedAt&&(!ce.lastVisit||G.submittedAt>ce.lastVisit)&&(ce.lastVisit=G.submittedAt)):W.set(re,{title:(Y==null?void 0:Y.title)||G.assignmentTitle,classType:(Y==null?void 0:Y.classType)||"Unknown",category:(Y==null?void 0:Y.category)||"Supplemental",visits:1,totalTime:de,totalKeystrokes:((pe=G.metrics)==null?void 0:pe.keystrokes)||0,totalClicks:((Be=G.metrics)==null?void 0:Be.clickCount)||0,totalPastes:((Ue=G.metrics)==null?void 0:Ue.pasteCount)||0,lastVisit:G.submittedAt||null,statuses:[G.status]})}),Array.from(W.values()).sort((G,Y)=>Y.totalTime-G.totalTime)},[e,r]),A=T.useMemo(()=>e.filter(W=>W.submittedAt).sort((W,G)=>new Date(G.submittedAt).getTime()-new Date(W.submittedAt).getTime()).slice(0,10).map(W=>{var G,Y;return{...W,assignmentTitle:((G=r.find(re=>re.id===W.assignmentId))==null?void 0:G.title)||W.assignmentTitle,classType:((Y=r.find(re=>re.id===W.assignmentId))==null?void 0:Y.classType)||"Unknown"}}),[e,r]),R=Math.round(e.reduce((W,G)=>{var Y;return W+(((Y=G.metrics)==null?void 0:Y.engagementTime)||0)},0)/60),O=T.useMemo(()=>{const W=new Set;e.forEach(X=>{if(X.submittedAt){const ae=new Date(X.submittedAt),ne=ae.getFullYear(),ve=new Date(ne,0,1),pe=Math.ceil(((ae.getTime()-ve.getTime())/864e5+ve.getDay()+1)/7);W.add(`${ne}-W${pe}`)}});const G=new Date,Y=G.getFullYear(),re=new Date(Y,0,1),ce=Math.ceil(((G.getTime()-re.getTime())/864e5+re.getDay()+1)/7);let de=0;for(let X=ce;X>0&&W.has(`${Y}-W${X}`);X--)de++;return de},[e]),L=T.useMemo(()=>{const W=[],G=new Date;for(let ne=6;ne>=0;ne--){const ve=new Date(G);ve.setDate(ve.getDate()-ne);const pe=ve.toISOString().split("T")[0],Be=e.filter(Fe=>{var Ne;return(Ne=Fe.submittedAt)==null?void 0:Ne.startsWith(pe)}),Ue=Be.reduce((Fe,Ne)=>{var He;return Fe+(((He=Ne.metrics)==null?void 0:He.engagementTime)||0)},0);W.push({label:ve.toLocaleDateString([],{weekday:"short"}),time:Math.round(Ue/60),subs:Be.length})}const Y=W.slice(4).reduce((ne,ve)=>ne+ve.time,0),re=W.slice(0,4).reduce((ne,ve)=>ne+ve.time,0),ce=Y/3,de=re/4,X=ce>de*1.2?"up":ce<de*.6?"down":"flat",ae=Math.max(1,...W.map(ne=>ne.time));return{days:W,trend:X,maxTime:ae}},[e]);return xu.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),(($=t.gamification)==null?void 0:$.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx($n,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(ta,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Ps,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[R,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(vi,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(ku,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:y}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(QT,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Cu,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[O,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([W,G])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:W}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,G)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:G})]},W))})]}),n.length>0&&(()=>{const W=n[0],G=Go[W.bucket];return G?s.jsxs("div",{className:`border rounded-2xl p-4 ${G.borderColor} ${G.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${G.color} border ${G.borderColor}`,children:G.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:G.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",W.engagementScore]}),s.jsxs("span",{children:["Subs: ",W.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",W.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(W.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(W.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx(fE,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:W.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:W.recommendation.categories.map(Y=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Y},Y))})]}),(()=>{const Y=r.filter(re=>re.classType===W.classType&&re.status==="ACTIVE"&&W.recommendation.categories.includes(re.category||"Supplemental")).slice(0,3);return Y.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:Y.map(re=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:re.category}),s.jsx("span",{className:"text-white truncate",children:re.title})]},re.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&s.jsx(jx,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&s.jsx(Xle,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&s.jsx(mE,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((W,G)=>{const Y=L.maxTime>0?Math.max(2,W.time/L.maxTime*100):2,re=G===L.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${W.time>0?re?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Y}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:W.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[W.time,"m  ",W.subs," sub",W.subs!==1?"s":""]})]},G)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:w.map(W=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:W.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[W.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(ls,{className:"w-3 h-3 inline mr-0.5"}),W.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx(QT,{className:"w-3 h-3 inline mr-0.5"}),W.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(vi,{className:"w-3 h-3 inline mr-0.5"}),W.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(Ps,{className:"w-3 h-3 inline mr-0.5"}),W.totalTime,"m"]})]})]},W.cls))})]}),N.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(S0,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",N.length,")"]})]}),i?s.jsx(ef,{className:"w-4 h-4 text-gray-500"}):s.jsx(Ei,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:N.map((W,G)=>{const Y=Math.round(W.totalTime/60),re=W.totalKeystrokes>20&&W.totalClicks>5?"high":W.totalClicks>2?"medium":"low",ce=re==="high"?"text-green-400":re==="medium"?"text-yellow-400":"text-red-400",de=re==="high"?"bg-green-500":re==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:W.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[W.classType,"  ",W.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${de}`,title:`${re} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[Y,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:W.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:W.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${ce}`,children:re})]})]}),W.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(W.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},G)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),A.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:A.map(W=>{var Y;const G=Math.round((((Y=W.metrics)==null?void 0:Y.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${G>=5?"bg-green-500":G>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:W.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[W.classType,"  ",G,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:W.submittedAt?new Date(W.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},W.id)})})]}),S>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(V=(B=t.gamification)==null?void 0:B.activeQuests)==null?void 0:V.filter(W=>W.status==="ACCEPTED"||W.status==="DEPLOYED").map(W=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ku,{className:`w-3.5 h-3.5 ${W.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:W.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${W.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:W.status})]},W.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",x.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},R0e=({students:t,isOpen:e,onClose:r})=>{const n=Qa(),[a,i]=T.useState(""),[o,c]=T.useState(null),[d,h]=T.useState(!1),p=aZ,m=T.useMemo(()=>a?t.filter(y=>y.name.toLowerCase().includes(a.toLowerCase())).slice(0,20):t.slice(0,20),[t,a]),x=async y=>{if(o){h(!0);try{await Ae.awardBehavior({studentId:o.id,studentName:o.name,categoryId:y.id,categoryName:y.name,xpAmount:y.xpAmount,fluxAmount:y.fluxAmount,classType:o.classType||"AP Physics",awardedBy:"admin",timestamp:new Date().toISOString()}),n.success(`${y.icon} +${y.xpAmount} XP awarded to ${o.name} for ${y.name}!`),c(null),i("")}catch{n.error("Failed to award.")}finally{h(!1)}}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:r,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in-95 duration-300",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(G2,{className:"w-5 h-5 text-amber-400"})," Quick Award"]}),s.jsx("button",{onClick:r,className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx($n,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-5",children:o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.avatarUrl?s.jsx("img",{src:o.avatarUrl,alt:"",className:"w-10 h-10 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-sm font-bold text-purple-400",children:o.name.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:o.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:o.classType})]}),s.jsx("button",{onClick:()=>c(null),className:"text-xs text-gray-500 hover:text-white transition",children:"Change"})]}),s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-3",children:"Select Behavior"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(y=>s.jsxs("button",{onClick:()=>x(y),disabled:d,className:`p-4 rounded-xl border text-left transition-all hover:scale-[1.02] active:scale-95 disabled:opacity-40 bg-${y.color}-500/5 border-${y.color}-500/20 hover:border-${y.color}-500/40 hover:bg-${y.color}-500/10`,children:[s.jsx("div",{className:"text-2xl mb-1",children:y.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:y.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] text-purple-400 font-bold flex items-center gap-0.5",children:[s.jsx(ta,{className:"w-2.5 h-2.5"}),y.xpAmount," XP"]}),s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxAmount," Flux"]})]})]},y.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Tx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search for a student...",value:a,onChange:y=>i(y.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-3 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 transition",autoFocus:!0})]}),s.jsx("div",{className:"max-h-60 overflow-y-auto custom-scrollbar space-y-1",children:m.map(y=>s.jsxs("button",{onClick:()=>c(y),className:"w-full flex items-center gap-3 px-4 py-2.5 rounded-xl text-left hover:bg-white/5 transition group",children:[y.avatarUrl?s.jsx("img",{src:y.avatarUrl,alt:"",className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs font-bold text-purple-400",children:y.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-white group-hover:text-amber-300 transition",children:y.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:y.classType})]})]},y.id))})]})})]})]}):null},M0e=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Do(),[a,i]=T.useState(null),[o,c]=T.useState([]),[d,h]=T.useState([]),[p,m]=T.useState([]),[x,y]=T.useState([]),[S,w]=T.useState(Date.now()),[N,A]=T.useState(null),[R,O]=T.useState("xp"),[L,I]=T.useState("desc"),[k,E]=T.useState(""),[j,C]=T.useState(""),[q,D]=T.useState(!1),$=Z=>{R===Z?I(te=>te==="asc"?"desc":"asc"):(O(Z),I("asc"))},B=({label:Z,col:te,className:be})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${be??""}`,onClick:()=>$(te),children:s.jsxs("div",{className:`flex items-center gap-1 ${be!=null&&be.includes("text-center")?"justify-center":be!=null&&be.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:Z}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(ef,{className:`w-2.5 h-2.5 -mb-0.5 ${R===te&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Ei,{className:`w-2.5 h-2.5 -mt-0.5 ${R===te&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});T.useEffect(()=>{const Z=Ae.subscribeToChatFlags(c),te=Ae.subscribeToAnnouncements(h),be=Ae.subscribeToStudentAlerts(m),Se=Ae.subscribeToStudentBuckets(y),Ze=setInterval(()=>w(Date.now()),6e4);return()=>{Z(),te(),be(),Se(),clearInterval(Ze)}},[]);const V=t.filter(Z=>Z.role==="STUDENT"),W=T.useMemo(()=>{const Z=new Set;return V.forEach(te=>{te.section&&Z.add(te.section)}),Array.from(Z).sort()},[V]),G=T.useMemo(()=>{const Z=new Map;for(const te of p){const be=Z.get(te.studentId),Se={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!be||(Se[te.riskLevel]||0)>(Se[be.riskLevel]||0))&&Z.set(te.studentId,te)}return Z},[p]),Y=T.useMemo(()=>{const Z=new Map;for(const te of x)Z.has(te.studentId)||Z.set(te.studentId,te);return Z},[x]),re=T.useMemo(()=>{const Z={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},te=new Set;for(const be of x)te.has(be.studentId)||(te.add(be.studentId),Z[be.bucket]!==void 0&&Z[be.bucket]++);return Z},[x]),ce=V.length,de=Math.round(V.reduce((Z,te)=>{var be;return Z+(((be=te.stats)==null?void 0:be.totalTime)||0)},0)/(ce||1)),X=V.reduce((Z,te)=>{var be;return Z+(((be=te.stats)==null?void 0:be.problemsCompleted)||0)},0),ae=V.reduce((Z,te)=>{var be;return Z+(((be=te.gamification)==null?void 0:be.xp)||0)},0),ne=V.filter(Z=>Z.mutedUntil&&new Date(Z.mutedUntil).getTime()>S),ve=async Z=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Ae.muteUser(Z,0)},pe=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Ae.INDEFINITE_MUTE}],Be=async(Z,te)=>{await Ae.muteUser(Z,te),A(null)},Ue=async(Z,te)=>{const be=new Date(te).getTime(),Se=new Date(Math.max(be,Date.now())+3600*1e3),Ze=Math.ceil((Se.getTime()-Date.now())/6e4);await Ae.muteUser(Z,Ze)},Fe=({label:Z,value:te,icon:be,color:Se})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${Se}`,children:be}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:te}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:Z})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${Se}`})]}),Ne=Z=>{const be=new Date(Z).getTime()-S;if(be<=0)return"Expired";const Se=Math.ceil(be/6e4);return Se>60?`${Math.ceil(Se/60)} hrs`:`${Se} mins`},He=Z=>{if(!Z)return"Never";const te=new Date(Z),be=Date.now()-te.getTime(),Se=Math.floor(be/6e4);if(Se<1)return"Just now";if(Se<60)return`${Se}m ago`;const Ze=Math.floor(Se/60);return Ze<24?`${Ze}h ago`:te.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Fe,{label:"Total Students",value:ce,icon:s.jsx($i,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(Fe,{label:"Total XP Awarded",value:ae.toLocaleString(),icon:s.jsx(ta,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(Fe,{label:"Resources Viewed",value:X,icon:s.jsx(zf,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(Fe,{label:"Avg Active Time",value:`${de}m`,icon:s.jsx(Ps,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Mo,{className:"w-5 h-5"}):s.jsx(Y2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(dc,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(Z=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[Z.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",Z.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',Z.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(Z.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await Ae.resolveFlag(Z.id),Z.messageId&&await Ae.unflagMessage(Z.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(_o,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Ae.resolveFlag(Z.id),Z.messageId&&await Ae.deleteMessage(Z.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(Cn,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>A(N===Z.id?null:Z.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(Zv,{className:"w-3 h-3"})}),N===Z.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",Z.senderName]}),pe.map(te=>s.jsx("button",{onClick:()=>Be(Z.senderId,te.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:te.label},te.minutes))]})]})]})]},Z.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Zv,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),ne.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx($i,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:ne.map(Z=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:Z.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:Z.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:Ne(Z.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Ue(Z.id,Z.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(eb,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>ve(Z.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(dc,{className:"w-3.5 h-3.5"})})]})})]},Z.id))})]})})]})]}),p.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(cg,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(Z=>{const te={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},be={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},Se=Z.bucket?Go[Z.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${te[Z.riskLevel]||te.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${be[Z.riskLevel]||be.LOW}`,children:Z.riskLevel}),Se&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${Se.bgColor} ${Se.color} ${Se.borderColor} border`,children:Se.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:Z.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Z.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:Z.message}),Se&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:Se.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",Z.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",Z.classMean]}),s.jsx("span",{children:new Date(Z.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(Z.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await Ae.dismissAlert(Z.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},Z.id)})})]}),x.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(cg,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[x.length," profile",x.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Go).map(Z=>{const te=Go[Z],be=re[Z];return s.jsxs("div",{className:`border rounded-xl p-3 ${te.borderColor} ${te.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${te.color}`,children:te.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:be})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:te.description})]},Z)})}),(()=>{const Z=Object.values(re).reduce((te,be)=>te+be,0);return Z===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Go).map(te=>{const be=re[te]/Z*100;if(be===0)return null;const Se={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${Se[te]||"bg-gray-500"} transition-all`,style:{width:`${be}%`},title:`${Go[te].label}: ${re[te]} (${Math.round(be)}%)`},te)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(S0e,{announcements:d,studentIds:V.map(Z=>Z.id),availableSections:W})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Student Engagement Ranking"}),s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(G2,{className:"w-3.5 h-3.5"})," Quick Award"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Tx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:k,onChange:Z=>E(Z.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:j,onChange:Z=>C(Z.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Go).map(Z=>s.jsx("option",{value:Z,children:Go[Z].label},Z))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(B,{label:"Student",col:"name"}),s.jsx(B,{label:"Class",col:"class"}),s.jsx(B,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(B,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(B,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(B,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const te=[...V.filter(Se=>{var It;const Ze=!k||Se.name.toLowerCase().includes(k.toLowerCase())||Se.email.toLowerCase().includes(k.toLowerCase()),rt=!j||((It=Y.get(Se.id))==null?void 0:It.bucket)===j;return Ze&&rt})].sort((Se,Ze)=>{var rt,It,At,Ft,qt,Dt,tr,he;switch(R){case"name":return L==="asc"?Se.name.localeCompare(Ze.name):Ze.name.localeCompare(Se.name);case"class":return L==="asc"?(Se.classType||"").localeCompare(Ze.classType||""):(Ze.classType||"").localeCompare(Se.classType||"");case"lastSeen":{const Ge=Se.lastLoginAt?new Date(Se.lastLoginAt).getTime():0,Pt=Ze.lastLoginAt?new Date(Ze.lastLoginAt).getTime():0;return L==="asc"?Ge-Pt:Pt-Ge}case"time":{const Ge=((rt=Se.stats)==null?void 0:rt.totalTime)||0,Pt=((It=Ze.stats)==null?void 0:It.totalTime)||0;return L==="asc"?Ge-Pt:Pt-Ge}case"resources":{const Ge=((At=Se.stats)==null?void 0:At.problemsCompleted)||0,Pt=((Ft=Ze.stats)==null?void 0:Ft.problemsCompleted)||0;return L==="asc"?Ge-Pt:Pt-Ge}case"xp":default:{const Ge=((Dt=(qt=Se.gamification)==null?void 0:qt.classXp)==null?void 0:Dt[Se.classType||""])||0,Pt=((he=(tr=Ze.gamification)==null?void 0:tr.classXp)==null?void 0:he[Ze.classType||""])||0;return L==="asc"?Ge-Pt:Pt-Ge}}}),be=Math.max(1,...V.map(Se=>{var Ze,rt;return((rt=(Ze=Se.gamification)==null?void 0:Ze.classXp)==null?void 0:rt[Se.classType||""])||0}));return te.map(Se=>{var Pt,Ke,it,$t;const Ze=((Ke=(Pt=Se.gamification)==null?void 0:Pt.classXp)==null?void 0:Ke[Se.classType||""])||0,rt=Math.round(Ze/be*100),It=Se.lastLoginAt,At=It?Date.now()-new Date(It).getTime():1/0,Ft=At<36e5?"text-green-400":At<864e5?"text-yellow-400":At<1/0?"text-red-400":"text-gray-600",qt=At<36e5?"bg-green-500":At<864e5?"bg-yellow-500":At<1/0?"bg-red-500":"bg-gray-600",Dt=G.get(Se.id),tr={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},he=Y.get(Se.id),Ge=he?Go[he.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(Dt==null?void 0:Dt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(Se.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[Se.avatarUrl?s.jsx("img",{src:Se.avatarUrl,alt:Se.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:Se.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${qt}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:Se.name}),Dt&&tr[Dt.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${tr[Dt.riskLevel]}`,title:`${Dt.riskLevel} risk: ${Dt.reason}`}),Ge&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${Ge.bgColor} ${Ge.color} border ${Ge.borderColor}`,title:Ge.description,children:Ge.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:Se.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${Ft}`,children:He(Se.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((it=Se.stats)==null?void 0:it.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:(($t=Se.stats)==null?void 0:$t.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${rt}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Ze})]})})]},Se.id)})})()})]})})]}),a&&(()=>{const Z=V.find(te=>te.id===a);return Z?s.jsx(I0e,{student:Z,submissions:r.filter(te=>te.userId===a),assignments:e,bucketProfiles:x.filter(te=>te.studentId===a),onClose:()=>i(null)}):null})(),s.jsx(R0e,{students:V,isOpen:q,onClose:()=>D(!1)})]})},D0e=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=Qa(),{confirm:i}=Do(),[o,c]=T.useState(new Set),[d,h]=T.useState(Mr.AP_PHYSICS),[p,m]=T.useState(!1),[x,y]=T.useState(!1),[S,w]=T.useState({}),N=(ye,ot)=>{w(mt=>{const Ct=mt[ye]||{col:"name",dir:"asc"};return{...mt,[ye]:{col:ot,dir:Ct.col===ot&&Ct.dir==="asc"?"desc":"asc"}}})},A=({label:ye,col:ot,type:mt,className:Ct})=>{const vt=S[mt]||{col:"name",dir:"asc"},tt=vt.col===ot;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Ct??""}`,onClick:()=>N(mt,ot),children:s.jsxs("div",{className:`flex items-center gap-1 ${Ct!=null&&Ct.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:ye}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(ef,{className:`w-2.5 h-2.5 -mb-0.5 ${tt&&vt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Ei,{className:`w-2.5 h-2.5 -mt-0.5 ${tt&&vt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[R,O]=T.useState(""),[L,I]=T.useState(Mr.AP_PHYSICS),[k,E]=T.useState(""),[j,C]=T.useState(""),[q,D]=T.useState(!1),[$,B]=T.useState(!1),[V,W]=T.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[G,Y]=T.useState(10),[re,ce]=T.useState("single"),[de,X]=T.useState([]),[ae,ne]=T.useState(!1),ve=T.useRef(null),[pe,Be]=T.useState(null),[Ue,Fe]=T.useState(""),[Ne,He]=T.useState(""),Z=t.filter(ye=>ye.role==="STUDENT"),te=T.useMemo(()=>{const ye=new Set;return Z.forEach(ot=>{ot.classSections&&Object.values(ot.classSections).forEach(mt=>{mt&&ye.add(mt)}),ot.section&&ye.add(ot.section)}),Array.from(ye).sort()},[Z]),be=async(ye,ot,mt)=>{try{mt?await Ae.updateUserClassSection(ye,mt,ot):await Ae.updateUserSection(ye,ot),Be(null),Fe(""),He(""),a.success(`Section updated to ${ot||"none"}${mt?` for ${mt}`:""}`)}catch{a.error("Failed to update section")}},Se=async ye=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(ot=>Ae.updateUserSection(ot,ye))),c(new Set),a.success(`Set ${o.size} students to ${ye}`)}catch{a.error("Failed to bulk update sections")}},Ze=T.useMemo(()=>e.filter(ye=>!t.some(ot=>ot.email.toLowerCase()===ye.email.toLowerCase())),[e,t]),rt=T.useMemo(()=>[...Array.from(new Set([...Object.values(Mr).filter(ot=>ot!==Mr.UNCATEGORIZED),...r.map(ot=>ot.className)])).sort(),Mr.UNCATEGORIZED],[r]),It=ye=>{const ot=Z.filter(vt=>{var tt,gr;return((tt=vt.enrolledClasses)==null?void 0:tt.includes(ye))||ye===Mr.UNCATEGORIZED&&(((gr=vt.enrolledClasses)==null?void 0:gr.length)===0||!vt.enrolledClasses)}),mt=ot.every(vt=>o.has(vt.id)),Ct=new Set(o);ot.forEach(vt=>{mt?Ct.delete(vt.id):Ct.add(vt.id)}),c(Ct)},At=ye=>{const ot=new Set(o);ot.has(ye)?ot.delete(ye):ot.add(ye),c(ot)},Ft=async()=>{if(o.size>0){const ye=Array.from(o).map(async ot=>{const mt=t.find(Ct=>Ct.id===ot);if(mt){const Ct=mt.enrolledClasses||[],vt=Array.from(new Set([...Ct.filter(tt=>tt!==Mr.UNCATEGORIZED),d]));await Ae.updateUserEnrolledClasses(ot,vt)}});await Promise.all(ye),c(new Set)}},qt=async ye=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${ye}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const ot=Array.from(o).map(async mt=>{const Ct=t.find(vt=>vt.id===mt);if(Ct){const tt=(Ct.enrolledClasses||[]).filter(gr=>gr!==ye);await Ae.updateUserEnrolledClasses(mt,tt)}});await Promise.all(ot),c(new Set)}},Dt=async(ye,ot)=>{if(await i({message:`Remove ${ye.name} from ${ot}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Ct=(ye.enrolledClasses||[]).filter(vt=>vt!==ot);await Ae.updateUserEnrolledClasses(ye.id,Ct)}},tr=async(ye,ot)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${ot}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Ae.removeUser(ye)},he=async ye=>{ye!==Mr.UNCATEGORIZED&&await i({message:`Delete group config ${ye}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Ae.deleteClassConfig(ye)},Ge=async ye=>{await i({message:`Cancel invite for ${ye}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Ae.removeFromWhitelist(ye)},Pt=(ye,ot)=>{ye!==Mr.UNCATEGORIZED&&(C(ye),D(!0),ot?(W(ot.features),Y(ot.xpPerMinute||10)):(W({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),Y(10)),y(!0))},Ke=ye=>{ye.preventDefault(),n(R,L),k.trim()&&Ae.updateWhitelistSection(R,k.trim()),O(""),E(""),m(!1)},it=ye=>{var Ct;const ot=(Ct=ye.target.files)==null?void 0:Ct[0];if(!ot)return;const mt=new FileReader;mt.onload=vt=>{var Qt,Lt;const tt=(Qt=vt.target)==null?void 0:Qt.result;if(!tt)return;const gr=tt.split(/\r?\n/).filter(bt=>bt.trim()),Gt=(Lt=gr[0])!=null&&Lt.toLowerCase().includes("email")?1:0,Vr=new Set(e.map(bt=>bt.email.toLowerCase())),cn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,yr=gr.slice(Gt).map(bt=>{const Fr=bt.includes("	")?bt.split("	"):bt.split(","),tn=(Fr[0]||"").trim().toLowerCase(),Dr=(Fr[1]||"").trim()||Mr.AP_PHYSICS,Cr=(Fr[2]||"").trim();let xn="pending";return cn.test(tn)?Vr.has(tn)&&(xn="duplicate"):xn="invalid",{email:tn,classType:Dr,section:Cr,status:xn}}).filter(bt=>bt.email.length>0);X(yr)},mt.readAsText(ot),ye.target.value=""},$t=async()=>{const ye=de.filter(mt=>mt.status==="pending");if(ye.length===0)return;ne(!0);let ot=0;for(const mt of ye)try{await Ae.addToWhitelist(mt.email,mt.classType),mt.section&&await Ae.updateWhitelistSection(mt.email,mt.section),mt.status="success",ot++}catch{mt.status="invalid"}X([...de]),ne(!1),a.success(`${ot} operative${ot!==1?"s":""} imported successfully.`),de.every(mt=>mt.status==="success"||mt.status==="duplicate")&&setTimeout(()=>{m(!1),X([]),ce("single")},1500)},Nt=async ye=>{if(ye.preventDefault(),!!j){B(!0);try{await Ae.saveClassConfig({id:j,className:j,features:V,xpPerMinute:G}),C(""),y(!1),D(!1)}catch(ot){console.error("Failed to save config:",ot),a.error("Failed to save class configuration.")}finally{B(!1)}}},kr=ye=>{const ot=ye===Mr.UNCATEGORIZED,mt=S[ye]||{col:"name",dir:"asc"},Ct=[...Z.filter(tt=>{var gr;return((gr=tt.enrolledClasses)==null?void 0:gr.includes(ye))||ot&&(!tt.enrolledClasses||tt.enrolledClasses.length===0)})].sort((tt,gr)=>{var Gt,Vr,cn,yr;switch(mt.col){case"section":{const Qt=tt.section||"",Lt=gr.section||"";return mt.dir==="asc"?Qt.localeCompare(Lt):Lt.localeCompare(Qt)}case"status":{const Qt=tt.isWhitelisted?1:0,Lt=gr.isWhitelisted?1:0;return mt.dir==="asc"?Qt-Lt:Lt-Qt}case"lastSeen":{const Qt=tt.lastLoginAt?new Date(tt.lastLoginAt).getTime():0,Lt=gr.lastLoginAt?new Date(gr.lastLoginAt).getTime():0;return mt.dir==="asc"?Qt-Lt:Lt-Qt}case"xp":{const Qt=((Vr=(Gt=tt.gamification)==null?void 0:Gt.classXp)==null?void 0:Vr[ye])||0,Lt=((yr=(cn=gr.gamification)==null?void 0:cn.classXp)==null?void 0:yr[ye])||0;return mt.dir==="asc"?Qt-Lt:Lt-Qt}case"name":default:return mt.dir==="asc"?tt.name.localeCompare(gr.name):gr.name.localeCompare(tt.name)}}),vt=r.find(tt=>tt.className===ye);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${ot?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${ot?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${ot?"text-orange-300":"text-white"}`,children:[ot&&s.jsx(W2,{className:"w-5 h-5 inline mr-2 mb-1"}),ye]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${ot?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Ct.length," Registered"]}),!ot&&s.jsx("button",{onClick:()=>Pt(ye,vt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(o0,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(tt=>Ct.find(gr=>gr.id===tt))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:tt=>{tt.target.value&&Se(tt.target.value),tt.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),te.map(tt=>s.jsx("option",{value:tt,children:tt},tt))]})}),s.jsxs("button",{onClick:()=>qt(ye),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx(Zle,{className:"w-3 h-3"})," Remove Selected"]})]}),!ot&&s.jsxs("button",{onClick:()=>he(ye),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(Cn,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Ct.length>0&&s.jsx("button",{onClick:()=>It(ye),className:"hover:text-purple-400 transition",children:s.jsx(LR,{className:"w-4 h-4"})})}),s.jsx(A,{label:"Operative",col:"name",type:ye}),s.jsx(A,{label:"Section",col:"section",type:ye,className:"text-center"}),s.jsx(A,{label:"System Status",col:"status",type:ye,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Ct.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:ot?"No restricted operatives found.":"No students registered in this roster yet."})}):Ct.map(tt=>{var gr;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(tt.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>At(tt.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(tt.id)?s.jsx(Wle,{className:"w-4 h-4 text-purple-500"}):s.jsx(LR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:tt.avatarUrl,alt:tt.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:tt.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:tt.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:pe===tt.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((gr=tt.enrolledClasses)!=null&&gr.length?tt.enrolledClasses:[tt.classType].filter(Boolean)).map(Gt=>{var cn;if(!Gt)return null;const Vr=((cn=tt.classSections)==null?void 0:cn[Gt])||(tt.section&&tt.classType===Gt?tt.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:Gt,children:Gt}),s.jsxs("select",{value:Vr,onChange:yr=>{const Qt=yr.target.value;Qt==="__custom__"?(Fe("__custom__"),He("")):be(tt.id,Qt,Gt)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),te.map(yr=>s.jsx("option",{value:yr,children:yr},yr)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},Gt)}),Ue==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:Ne,onChange:Gt=>He(Gt.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:Gt=>{var Vr;if(Gt.key==="Enter"&&Ne.trim()){const cn=(Vr=tt.enrolledClasses)!=null&&Vr.length?tt.enrolledClasses:[tt.classType].filter(Boolean);cn[0]&&be(tt.id,Ne.trim(),cn[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var Gt;if(Ne.trim()){const Vr=(Gt=tt.enrolledClasses)!=null&&Gt.length?tt.enrolledClasses:[tt.classType].filter(Boolean);Vr[0]&&be(tt.id,Ne.trim(),Vr[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(Bn,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Be(null),Fe(""),He("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Be(tt.id),Fe(""),He("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${tt.classSections&&Object.keys(tt.classSections).length>0||tt.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:tt.classSections&&Object.keys(tt.classSections).length>0?Object.values(tt.classSections).filter(Boolean).join(", ")||"Assign":tt.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${tt.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[tt.isWhitelisted?s.jsx(DR,{className:"w-3 h-3"}):s.jsx(Y2,{className:"w-3 h-3"}),tt.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>ot?tr(tt.id,tt.name):Dt(tt,ye),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:ot?"Permanently Delete":"Remove from this Class",children:s.jsx($n,{className:"w-4 h-4"})})})})]},tt.id)})})]})})]},ye)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{C(""),W({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),D(!1),y(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(o0,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(tb,{className:"w-4 h-4"}),"Invite Student"]})]})]}),Ze.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Dle,{className:"w-4 h-4"})," Pending Class Invitations (",Ze.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Ze.map(ye=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ye.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(DR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ye.classTypes||[ye.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>Ge(ye.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},ye.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:ye=>h(ye.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:rt.filter(ye=>ye!==Mr.UNCATEGORIZED).map(ye=>s.jsxs("option",{value:ye,children:["Apply ",ye," Access"]},ye))}),s.jsx(Ei,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:Ft,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(Bn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:rt.map(ye=>kr(ye))}),s.jsxs(is,{isOpen:p,onClose:()=>{m(!1),X([]),ce("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{ce("single"),X([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${re==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(tb,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>ce("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${re==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(nf,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),re==="single"?s.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:R,onChange:ye=>O(ye.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:ye=>I(ye.target.value),children:rt.filter(ye=>ye!==Mr.UNCATEGORIZED).map(ye=>s.jsx("option",{value:ye,children:ye},ye))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:k,onChange:ye=>E(ye.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:ve,accept:".csv,.tsv,.txt",onChange:it,className:"hidden"}),de.length===0?s.jsxs(s.Fragment,{children:[s.jsx(nf,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var ye;return(ye=ve.current)==null?void 0:ye.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(zf,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[de.length," records parsed"]}),s.jsx("button",{onClick:()=>{X([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),de.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:de.map((ye,ot)=>s.jsxs("tr",{className:ye.status==="invalid"?"bg-red-500/5":ye.status==="duplicate"?"bg-yellow-500/5":ye.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ye.email}),s.jsx("td",{className:"p-2 text-gray-400",children:ye.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:ye.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ye.status==="pending"?"bg-blue-500/20 text-blue-400":ye.status==="success"?"bg-green-500/20 text-green-400":ye.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ye.status})})]},ot))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[de.filter(ye=>ye.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[de.filter(ye=>ye.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[de.filter(ye=>ye.status==="invalid").length," invalid"]}),de.some(ye=>ye.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[de.filter(ye=>ye.status==="success").length," imported"]})]})}),de.filter(ye=>ye.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Mo,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:$t,disabled:ae||de.filter(ye=>ye.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ae?s.jsxs(s.Fragment,{children:[s.jsx(no,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",de.filter(ye=>ye.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(is,{isOpen:x,onClose:()=>y(!1),title:q?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:Nt,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:j,onChange:ye=>C(ye.target.value),placeholder:"e.g. AP Physics Period 4"}),q&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:V.physicsLab,onChange:ye=>W({...V,physicsLab:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:V.evidenceLocker,onChange:ye=>W({...V,evidenceLocker:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:V.leaderboard,onChange:ye=>W({...V,leaderboard:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:V.physicsTools,onChange:ye=>W({...V,physicsTools:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:V.communications,onChange:ye=>W({...V,communications:ye.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:G,onChange:ye=>Y(Math.max(1,Math.min(100,parseInt(ye.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:$,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${$?"opacity-70 cursor-not-allowed":""}`,children:$?s.jsxs(s.Fragment,{children:[s.jsx(no,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):q?"Update Terminal Configuration":"Initialize Class Node"})]})})]})};function dj(t,e){if(!e||e.length===0)return[...t].sort();const r=new Map(e.map((n,a)=>[n,a]));return[...t].sort((n,a)=>{const i=r.get(n)??Number.MAX_SAFE_INTEGER,o=r.get(a)??Number.MAX_SAFE_INTEGER;return i===o?n.localeCompare(a):i-o})}const UM={bug:{label:"Bug",color:"bg-red-500/20 text-red-400 border-red-500/30"},feature:{label:"Feature",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},other:{label:"Other",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"}},P0e=({submissions:t})=>{const e=Qa(),{confirm:r}=Do(),[n,a]=T.useState("ACTIVITY"),[i,o]=T.useState([]),[c,d]=T.useState(!1),[h,p]=T.useState(null),[m,x]=T.useState(""),[y,S]=T.useState(new Set),[w,N]=T.useState("fix"),[A,R]=T.useState("");T.useEffect(()=>Ae.subscribeToBugReports(o),[]);const O=T.useMemo(()=>[...Array.isArray(t)?t:[]].sort((W,G)=>{const Y=new Date(W.submittedAt||0).getTime();return new Date(G.submittedAt||0).getTime()-Y}),[t]),L=T.useMemo(()=>{const V=O.reduce((re,ce)=>re+Math.round(ce.score),0),W=O.reduce((re,ce)=>{var de;return re+(((de=ce.metrics)==null?void 0:de.engagementTime)||0)},0),G=new Set(O.map(re=>re.userId)).size,Y=O.length>0?Math.round(V/O.length):0;return{totalXP:V,totalTime:W,uniqueStudents:G,avgXP:Y,totalSubmissions:O.length}},[O]),I=T.useMemo(()=>i.filter(V=>c||!V.resolved),[i,c]),k=T.useMemo(()=>i.filter(V=>!V.resolved).length,[i]),E=T.useCallback(V=>{S(W=>{const G=new Set(W);return G.has(V)?G.delete(V):G.add(V),G})},[]),j=T.useCallback(V=>{p(V.id),x(V.description)},[]),C=T.useCallback(async V=>{await Ae.updateBugReport(V,{description:m}),p(null),x(""),e.success("Report updated.")},[m,e]),q=T.useCallback(async V=>{await Ae.resolveBugReport(V),S(W=>{const G=new Set(W);return G.delete(V),G}),e.success("Report resolved.")},[e]),D=T.useCallback(async V=>{await r({message:"Delete this report permanently?",confirmLabel:"Delete"})&&(await Ae.deleteBugReport(V),S(W=>{const G=new Set(W);return G.delete(V),G}))},[r]),$=T.useCallback(()=>{const V=i.filter(G=>y.has(G.id)),W=A.trim();return w==="fix"?`You are working on "Porter Portal", an educational platform built with React 19, TypeScript, Tailwind CSS, and Firebase Firestore.

The following bug reports and feature requests have been filed by users:

${V.length>0?V.map((Y,re)=>`${re+1}. [${Y.category.toUpperCase()}] ${Y.description}${Y.userName?` (reported by ${Y.userName})`:""}`).join(`
`):"(No specific reports selected  analyze the codebase for common issues)"}
${W?`
Additional context from the admin:
${W}
`:""}
Please analyze these issues, identify the root causes in the codebase, and implement fixes. For each fix:
1. Explain what the issue is and where in the code it occurs
2. Make the minimal, targeted change needed
3. Ensure the fix doesn't introduce regressions
4. Build and verify the changes compile cleanly`:w==="create_blocks"?`You are an expert educational content designer for "Porter Portal", an LMS built with React/TypeScript.

I need you to create lesson content as JSON blocks for the Resource Editor's "Paste JSON" import.
${W?`
TOPIC / INSTRUCTIONS:
${W}
`:""}
Available block types and required fields:

Content blocks:
- {"type":"SECTION_HEADER", "icon":"", "title":"Section Name", "subtitle":"Optional subtitle"}
- {"type":"TEXT", "content":"Plain text content"}
- {"type":"IMAGE", "url":"https://...", "caption":"Caption", "alt":"Description"}
- {"type":"VIDEO", "url":"https://youtube.com/watch?v=...", "caption":"Caption"}
- {"type":"OBJECTIVES", "title":"Learning Objectives", "items":["Obj 1","Obj 2"]}
- {"type":"DIVIDER"}
- {"type":"EXTERNAL_LINK", "title":"Link Title", "url":"https://...", "content":"Description", "buttonLabel":"Open", "openInNewTab":true}
- {"type":"INFO_BOX", "variant":"tip|warning|note", "content":"Box content"}

Interactive blocks:
- {"type":"VOCABULARY", "term":"Word", "definition":"Definition"}
- {"type":"VOCAB_LIST", "terms":[{"term":"Word1","definition":"Def1"}]}
- {"type":"ACTIVITY", "icon":"", "title":"Activity Name", "instructions":"Do this..."}
- {"type":"CHECKLIST", "content":"Checklist title", "items":["Step 1","Step 2"]}
- {"type":"SORTING", "title":"Sort Title", "instructions":"Sort these", "leftLabel":"Category A", "rightLabel":"Category B", "sortItems":[{"text":"Item","correct":"left|right"}]}
- {"type":"DATA_TABLE", "title":"Table Title", "columns":[{"key":"col1","label":"Name","editable":true}], "trials":3}
- {"type":"BAR_CHART", "title":"Chart Title", "barCount":3, "initialLabel":"Initial", "finalLabel":"Final", "deltaLabel":"Change", "height":300}

Question blocks:
- {"type":"MC", "content":"Question?", "options":["A","B","C","D"], "correctAnswer":0}
- {"type":"SHORT_ANSWER", "content":"Question?", "acceptedAnswers":["answer1","answer2"]}
- {"type":"RANKING", "content":"Put in order:", "items":["First","Second","Third"]}

Rules: Start with SECTION_HEADER, use OBJECTIVES near top, add TEXT between interactive elements, include INFO_BOX for callouts, add DIVIDER between sections, include 2-3 question blocks.
Output ONLY the JSON array  no markdown fences, no commentary.`:w==="create_html"?`You are an expert educational content designer for "Porter Portal", an LMS built with React/TypeScript.

Create a standalone HTML interactive activity that integrates with the Proctor Bridge Protocol via postMessage.
${W?`
ACTIVITY DESCRIPTION:
${W}
`:""}
REQUIREMENTS:
- Self-contained single HTML file (inline CSS + JS)
- Dark theme matching the portal (#0f0720 background, white/gray text)
- Mobile-responsive design
- Engaging, interactive educational content

PROCTOR BRIDGE INTEGRATION  Include this snippet at the top of your <script>:
const PortalBridge = (() => {
  const send = (type, data) => window.parent.postMessage({ source: 'portal-activity', type, ...data }, '*');
  return {
    init: () => send('PROCTOR_READY'),
    save: (state, currentQuestion) => send('SAVE_STATE', { state, currentQuestion }),
    answer: (questionId, correct, attempts) => send('ANSWER', { questionId, correct, attempts }),
    complete: (score, total, correct) => send('COMPLETE', { score, total, correct })
  };
})();
window.addEventListener('load', () => PortalBridge.init());

- Call PortalBridge.answer(questionId, correct, attempts) when a student answers (awards XP)
- Call PortalBridge.complete(score, total, correct) when the activity is finished
- Call PortalBridge.save(stateObj, currentQuestionIndex) periodically to save progress

Output ONLY the complete HTML file  no explanation or commentary.`:w==="create_qbank"?`You are an expert educational assessment designer. Generate a question bank of 150 questions for a resource.
${W?`
RESOURCE / TOPIC:
${W}
`:""}
Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible`:w==="create_study"?`You are an expert educational content creator. Create comprehensive study material for students working through a practice set or lesson.
${W?`
TOPIC / PRACTICE SET:
${W}
`:""}
Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: [Topic]",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$
- Use double dollar signs for display equations: $$E_i + W_{ext} = E_f$$
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`:w==="create_boss"?`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.
${W?`
BOSS / CLASS / TOPIC:
${W}
`:""}
Generate 200 multiple choice questions across 3 difficulty tiers to maximize variance in boss encounters.

TIER DISTRIBUTION:
- EASY (70 questions): Recall and basic comprehension
- MEDIUM (70 questions): Application and analysis
- HARD (60 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Generate exactly 200 questions  if you hit your output limit, end the JSON array cleanly with ] so it can be parsed
- Output ONLY the JSON array  no markdown fences, no commentary`:w==="create_rubric"?`You are an expert educational assessment designer. Create a detailed grading rubric for an assignment or project.
${W?`
ASSIGNMENT / PROJECT:
${W}
`:""}
Create a comprehensive rubric that clearly defines performance levels for each criterion.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Rubric: [Assignment Name]",
  "totalPoints": 100,
  "criteria": [
    {
      "name": "Criterion Name",
      "weight": 25,
      "levels": [
        {"label": "Exemplary", "points": 25, "description": "Exceeds expectations. ..."},
        {"label": "Proficient", "points": 20, "description": "Meets expectations. ..."},
        {"label": "Developing", "points": 15, "description": "Approaching expectations. ..."},
        {"label": "Beginning", "points": 10, "description": "Below expectations. ..."}
      ]
    }
  ]
}

GUIDELINES:
- Include 4-6 criteria that cover all major aspects of the assignment
- Each criterion should have 4 performance levels (Exemplary, Proficient, Developing, Beginning)
- Descriptions should be specific and observable  avoid vague language
- Weights should sum to the total points
- Output ONLY the JSON object  no markdown fences, no commentary`:`You are working on "Porter Portal", an educational platform built with React 19, TypeScript, Tailwind CSS, and Firebase Firestore.

Please analyze the codebase and suggest improvements, new features, or optimizations. Focus on:

1. UX improvements that would benefit students and administrators
2. Performance optimizations for large class sizes
3. Missing features that similar educational platforms typically have
4. Code quality improvements and potential bug areas
5. Accessibility improvements
${W?`
The admin has these specific areas of interest:
${W}
`:""}
For each suggestion, briefly describe the feature/improvement, the expected benefit, and the approximate complexity (small/medium/large). Prioritize suggestions by impact.`},[w,y,i,A]),B=T.useCallback(()=>{const V=$();navigator.clipboard.writeText(V),e.success("Prompt copied to clipboard!")},[$,e]);return s.jsxs("div",{className:"space-y-6 pb-12",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Operational oversight, bug triage, and AI tools."})]}),s.jsx("div",{className:"flex items-center gap-1 bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-1.5",children:[{key:"ACTIVITY",icon:s.jsx(cg,{className:"w-4 h-4"}),label:"Student Activity",badge:O.length>0?String(O.length):void 0},{key:"BUGS",icon:s.jsx(Qv,{className:"w-4 h-4"}),label:"Bug Reports",badge:k>0?String(k):void 0},{key:"AI",icon:s.jsx(fg,{className:"w-4 h-4"}),label:"AI Lab"}].map(V=>s.jsxs("button",{onClick:()=>a(V.key),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl text-sm font-bold transition cursor-pointer ${n===V.key?"bg-purple-600/50 text-white shadow-lg shadow-purple-500/10":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[V.icon," ",V.label,V.badge&&s.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full ${n===V.key?"bg-white/20 text-white":"bg-white/10 text-gray-400"}`,children:V.badge})]},V.key))}),n==="ACTIVITY"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Submissions",value:L.totalSubmissions,icon:s.jsx(S0,{className:"w-5 h-5"}),color:"purple"},{label:"Unique Students",value:L.uniqueStudents,icon:s.jsx($i,{className:"w-5 h-5"}),color:"blue"},{label:"Total XP Earned",value:L.totalXP.toLocaleString(),icon:s.jsx(jx,{className:"w-5 h-5"}),color:"emerald"},{label:"Avg XP / Submission",value:L.avgXP,icon:s.jsx(cg,{className:"w-5 h-5"}),color:"amber"}].map(V=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:`text-${V.color}-400`,children:V.icon}),s.jsx("span",{className:"text-[10px] font-bold text-gray-600 uppercase tracking-widest",children:V.label})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:V.value})]},V.label))}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[s.jsx(Ps,{className:"w-4 h-4 text-purple-400"})," Recent Engagement"]}),O.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[s.jsx(Ps,{className:"w-12 h-12 text-gray-700 mb-4"}),s.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1 max-w-sm",children:"Activity will appear here as students complete resources."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-1",children:O.map(V=>s.jsxs("div",{className:"bg-black/30 border border-white/5 p-4 rounded-2xl hover:border-purple-500/20 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-bold text-gray-200 text-sm block truncate",children:V.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:V.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2.5 py-1 rounded-full shrink-0 ml-2",children:[Math.round(V.score)," XP"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(V.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(V.submittedAt||"").toLocaleDateString()})]})]},V.id))})]})]}),n==="BUGS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("span",{className:"text-sm text-gray-400",children:[s.jsx("span",{className:"font-bold text-white",children:k})," open",i.length-k>0&&s.jsxs("span",{className:"ml-2 text-gray-600",children:["/ ",i.length-k," resolved"]})]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[y.size>0&&s.jsxs("button",{onClick:()=>{a("AI"),N("fix")},className:"flex items-center gap-1.5 text-xs font-bold text-purple-300 bg-purple-500/10 border border-purple-500/20 px-3 py-2 rounded-xl hover:bg-purple-500/20 transition cursor-pointer",children:[s.jsx(fg,{className:"w-3.5 h-3.5"})," Send ",y.size," to AI Lab"]}),s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-500 cursor-pointer select-none bg-white/5 px-3 py-2 rounded-xl border border-white/10",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:V=>d(V.target.checked),className:"w-3.5 h-3.5 rounded accent-purple-500"}),"Show Resolved"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6",children:I.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[s.jsx(Qv,{className:"w-12 h-12 text-gray-700 mb-4"}),s.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"No reports yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1 max-w-sm",children:"Bug reports and feature requests submitted by users will appear here."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-[600px] overflow-y-auto custom-scrollbar pr-1",children:I.map(V=>{const W=UM[V.category],G=y.has(V.id),Y=h===V.id;return s.jsxs("div",{className:`bg-black/30 border rounded-2xl p-4 transition ${V.resolved?"border-green-500/10 opacity-50":G?"border-purple-500/30 bg-purple-500/5":"border-white/5 hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[!V.resolved&&s.jsx("button",{onClick:()=>E(V.id),className:`mt-0.5 w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition cursor-pointer ${G?"bg-purple-600 border-purple-500":"border-white/20 hover:border-purple-500/50"}`,children:G&&s.jsx(_o,{className:"w-3 h-3 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase px-2 py-0.5 rounded border ${W.color}`,children:W.label}),s.jsx("span",{className:"text-xs text-gray-500 truncate",children:V.userName}),V.resolved&&s.jsx(dc,{className:"w-3.5 h-3.5 text-green-500 shrink-0"})]}),Y?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:m,onChange:re=>x(re.target.value),rows:3,className:"w-full bg-black/40 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>C(V.id),className:"flex items-center gap-1 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1.5 rounded-lg hover:bg-green-500/20 transition cursor-pointer",children:[s.jsx(_o,{className:"w-3 h-3"})," Save"]}),s.jsx("button",{onClick:()=>p(null),className:"text-xs text-gray-400 hover:text-white px-3 py-1.5 rounded-lg transition cursor-pointer",children:"Cancel"})]})]}):s.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:V.description})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] text-gray-600 font-mono",children:new Date(V.timestamp).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),!V.resolved&&!Y&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>j(V),className:"p-1.5 text-gray-500 hover:text-amber-400 hover:bg-amber-500/10 rounded-lg transition cursor-pointer",title:"Edit description",children:s.jsx(xv,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>q(V.id),className:"p-1.5 text-gray-500 hover:text-green-400 hover:bg-green-500/10 rounded-lg transition cursor-pointer",title:"Mark resolved",children:s.jsx(dc,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>D(V.id),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition cursor-pointer",title:"Delete",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]})]})]},V.id)})})})]}),n==="AI"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest px-1",children:"Operations"}),s.jsxs("button",{onClick:()=>N("fix"),className:`w-full flex items-center gap-3 p-3 rounded-xl border text-left transition cursor-pointer ${w==="fix"?"bg-amber-500/10 border-amber-500/30":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[s.jsx(ace,{className:`w-4 h-4 ${w==="fix"?"text-amber-400":"text-gray-500"}`}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xs font-bold ${w==="fix"?"text-white":"text-gray-300"}`,children:"Fix Bugs"}),s.jsx("div",{className:"text-[9px] text-gray-500",children:"From selected bug reports"})]})]}),s.jsxs("button",{onClick:()=>N("discover"),className:`w-full flex items-center gap-3 p-3 rounded-xl border text-left transition cursor-pointer ${w==="discover"?"bg-yellow-500/10 border-yellow-500/30":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[s.jsx(fE,{className:`w-4 h-4 ${w==="discover"?"text-yellow-400":"text-gray-500"}`}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xs font-bold ${w==="discover"?"text-white":"text-gray-300"}`,children:"Discover"}),s.jsx("div",{className:"text-[9px] text-gray-500",children:"Improvement suggestions"})]})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-600 uppercase tracking-widest px-1",children:"Content Creation"}),[{key:"create_blocks",icon:s.jsx(KT,{className:"w-4 h-4"}),label:"Lesson Blocks",desc:"JSON blocks for Resource Editor"},{key:"create_html",icon:s.jsx(UH,{className:"w-4 h-4"}),label:"HTML Interactive",desc:"Standalone HTML activity"},{key:"create_qbank",icon:s.jsx(_x,{className:"w-4 h-4"}),label:"Question Bank",desc:"150 tiered questions (9 formats)"},{key:"create_study",icon:s.jsx(Oo,{className:"w-4 h-4"}),label:"Study Material",desc:"Reading guide with LaTeX math"},{key:"create_boss",icon:s.jsx(Gd,{className:"w-4 h-4"}),label:"Quiz Boss",desc:"200 tiered boss questions"},{key:"create_rubric",icon:s.jsx(vi,{className:"w-4 h-4"}),label:"Grading Rubric",desc:"Structured rubric with criteria"}].map(V=>{const W=w===V.key;return s.jsxs("button",{onClick:()=>N(V.key),className:`w-full flex items-center gap-3 p-3 rounded-xl border text-left transition cursor-pointer ${W?"bg-blue-500/10 border-blue-500/30":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[s.jsx("span",{className:W?"text-blue-400":"text-gray-500",children:V.icon}),s.jsxs("div",{children:[s.jsx("div",{className:`text-xs font-bold ${W?"text-white":"text-gray-300"}`,children:V.label}),s.jsx("div",{className:"text-[9px] text-gray-500",children:V.desc})]})]},V.key)})]}),w==="fix"&&y.size>0&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-4",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-300 uppercase tracking-widest",children:[y.size," report",y.size!==1?"s":""," selected"]}),s.jsx("div",{className:"mt-2 space-y-1.5",children:i.filter(V=>y.has(V.id)).map(V=>s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 bg-black/20 rounded-lg px-3 py-2",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase px-1.5 py-0.5 rounded ${UM[V.category].color}`,children:V.category}),s.jsxs("span",{className:"truncate flex-1",children:[V.description.slice(0,80),V.description.length>80?"...":""]}),s.jsx("button",{onClick:()=>E(V.id),className:"shrink-0 p-0.5 text-gray-600 hover:text-red-400 transition cursor-pointer",children:s.jsx($n,{className:"w-3.5 h-3.5"})})]},V.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1.5 block",children:w==="fix"?"Additional Context":w==="create_blocks"?"Topic & Instructions":w==="create_html"?"Activity Description":w==="create_qbank"?"Resource / Topic":w==="create_study"?"Topic / Practice Set":w==="create_boss"?"Boss / Class / Topic":w==="create_rubric"?"Assignment / Project":"Areas of Interest"}),s.jsx("textarea",{value:A,onChange:V=>R(V.target.value),rows:4,placeholder:w==="fix"?"Extra context about the bugs or how to reproduce them...":w==="create_blocks"?"Describe the lesson topic, grade level, specific blocks you want...":w==="create_html"?"Describe the interactive activity (simulation, game, lab)...":w==="create_qbank"?"Paste the resource content or describe the topic for questions...":w==="create_study"?"Describe the topic or paste the practice set content...":w==="create_boss"?"Boss name, class, and topic for quiz boss encounter...":w==="create_rubric"?"Describe the assignment or project to create a rubric for...":"Areas to focus on, or leave blank for general analysis...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition resize-none"})]}),s.jsxs("button",{onClick:B,className:"w-full flex items-center justify-center gap-2 px-4 py-3.5 bg-purple-600 hover:bg-purple-500 text-white rounded-2xl font-bold text-sm transition cursor-pointer shadow-lg shadow-purple-500/20",children:[s.jsx(wle,{className:"w-4 h-4"})," Copy Prompt to Clipboard"]})]}),s.jsx("div",{className:"lg:col-span-8",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-full",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 block",children:"Generated Prompt Preview"}),s.jsx("div",{className:"bg-black/30 border border-white/5 rounded-2xl p-5 h-[calc(100%-2rem)] max-h-[600px] overflow-y-auto custom-scrollbar",children:s.jsx("pre",{className:"text-xs text-gray-400 whitespace-pre-wrap font-mono leading-relaxed",children:$()})})]})})]})]})},iW=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),L0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),B0e=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),$0e={BRUTE:iW,PHANTOM:L0e,SERPENT:B0e},sW=({bossType:t,hue:e,size:r})=>{const n=$0e[t]||iW;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},z0e=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],U0e=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,o]=T.useState(null),c=T.useMemo(()=>{var y;if(!t)return[];const x=Object.keys(((y=t.gamification)==null?void 0:y.classProfiles)||{});return x.length>0?x:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=T.useMemo(()=>{var y,S;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((y=t.gamification)==null?void 0:y.inventory)||[],equipped:((S=t.gamification)==null?void 0:S.equipped)||{}};const x=zu(t,d);return{inventory:x.inventory,equipped:x.equipped}},[t,d]);return t?s.jsx(is,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(Bn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx($n,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(x=>s.jsx("button",{onClick:()=>o(x),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===x?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:x==="_legacy"?"Global":x},x))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:z0e.map(x=>{var S;const y=(S=h.equipped)==null?void 0:S[x];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?ba(y.rarity).border+" "+ba(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),s.jsx("button",{onClick:()=>n(t,x,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx($n,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:x})},x)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((x,y)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${ba(x.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${ba(x.rarity).text} text-center truncate w-full`,children:x.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:x.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,x,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(Cn,{className:"w-4 h-4"})})})]},y)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},V0e=[10,50,100,-10,-50,-100],F0e=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=T.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(is,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:V0e.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},q0e=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(cs,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(Nle,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(_o,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx($n,{className:"w-5 h-5"})})]})]})]})]},a)})]}),F3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},H0e=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(is,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(Mr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(gg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},G0e={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},W0e=({users:t,initialTab:e})=>{const r=Qa(),{confirm:n}=Do(),a=e&&G0e[e]||"OPERATIVES",[i,o]=T.useState(""),[c,d]=T.useState("All Classes"),[h,p]=T.useState("All Sections"),[m,x]=T.useState("xp"),[y,S]=T.useState("desc"),w=H=>{m===H?S(we=>we==="asc"?"desc":"asc"):(x(H),S("asc"))},N=({label:H,col:we,className:je})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${je??""}`,onClick:()=>w(we),children:s.jsxs("div",{className:`flex items-center gap-1 ${je!=null&&je.includes("text-center")?"justify-center":je!=null&&je.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:H}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(ef,{className:`w-2.5 h-2.5 -mb-0.5 ${m===we&&y==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Ei,{className:`w-2.5 h-2.5 -mt-0.5 ${m===we&&y==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[A,R]=T.useState([]),[O,L]=T.useState([]),[I,k]=T.useState(null),[E,j]=T.useState(null),[C,q]=T.useState(!1),[D,$]=T.useState(!1),[B,V]=T.useState(F3),[W,G]=T.useState(!1),[Y,re]=T.useState([]),[ce,de]=T.useState(null),[X,ae]=T.useState(""),[ne,ve]=T.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Mr.AP_PHYSICS,targetSections:[]}),[pe,Be]=T.useState([]),[Ue,Fe]=T.useState(!1),[Ne,He]=T.useState(null),[Z,te]=T.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[be,Se]=T.useState(!1),Ze=T.useRef(null),[rt,It]=T.useState(null),[At,Ft]=T.useState([]),[qt,Dt]=T.useState("bosses"),[tr,he]=T.useState(!1),[Ge,Pt]=T.useState(null),[Ke,it]=T.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),$t=T.useRef(null),[Nt,kr]=T.useState(null),[ye,ot]=T.useState([]),[mt,Ct]=T.useState(null),[vt,tt]=T.useState([]),[gr,Gt]=T.useState(!1),[Vr,cn]=T.useState("pending"),[yr,Qt]=T.useState([]);T.useEffect(()=>{const H=Ae.subscribeToXPEvents(R),we=Ae.subscribeToQuests(L),je=Ae.subscribeToAllBossQuizzes(Be),Ee=Ae.subscribeToAllTutoringSessions(Qt),pt=Ae.subscribeToBossQuestionBanks(Ft);return()=>{H(),we(),je(),Ee(),pt()}},[]),T.useEffect(()=>{const H=[];t.forEach(we=>{var je,Ee;(Ee=(je=we.gamification)==null?void 0:je.activeQuests)==null||Ee.forEach(pt=>{const Rt=O.find(jt=>jt.id===pt.questId);Rt&&(pt.status==="DEPLOYED"||pt.status==="ACCEPTED")&&H.push({user:we,quest:Rt,status:pt.status,roll:pt.deploymentRoll,acceptedAt:pt.acceptedAt})})}),re(H)},[t,O,a]);const Lt=T.useMemo(()=>t.filter(H=>H.role==="STUDENT"),[t]),bt=T.useMemo(()=>{const H=new Set;return Lt.forEach(we=>{we.classSections?Object.values(we.classSections).forEach(je=>{je&&H.add(je)}):we.section&&H.add(we.section)}),Array.from(H).sort()},[Lt]),Fr=T.useMemo(()=>{if(ne.type!=="CLASS_SPECIFIC"||!ne.targetClass)return bt;const H=nv(Lt,ne.targetClass);return H.length>0?H:bt},[ne.type,ne.targetClass,Lt,bt]),tn=T.useMemo(()=>{if(!B.targetClass)return bt;const H=nv(Lt,B.targetClass);return H.length>0?H:bt},[B.targetClass,Lt,bt]),Dr=T.useMemo(()=>{if(Z.classType==="GLOBAL"||!Z.classType)return bt;const H=nv(Lt,Z.classType);return H.length>0?H:bt},[Z.classType,Lt,bt]),Cr=H=>{var je,Ee;const we=(je=H.gamification)==null?void 0:je.classProfiles;return we&&Object.keys(we).length>0?Object.values(we).reduce((pt,Rt)=>pt+c0(Rt.equipped),0):c0((Ee=H.gamification)==null?void 0:Ee.equipped)},xn=T.useMemo(()=>Lt.filter(H=>{var Rt;const we=H.name.toLowerCase().includes(i.toLowerCase())||H.email.toLowerCase().includes(i.toLowerCase()),je=c==="All Classes"||H.classType===c||((Rt=H.enrolledClasses)==null?void 0:Rt.includes(c)),Ee=H.classSections?Object.values(H.classSections):[],pt=h==="All Sections"||H.section===h||Ee.includes(h);return we&&je&&pt}).sort((H,we)=>{var je,Ee,pt,Rt,jt,nr,Or,hn,se,xe;switch(m){case"name":return y==="asc"?H.name.localeCompare(we.name):we.name.localeCompare(H.name);case"class":return y==="asc"?(H.classType||"").localeCompare(we.classType||""):(we.classType||"").localeCompare(H.classType||"");case"level":{const Le=((je=H.gamification)==null?void 0:je.level)||1,Pe=((Ee=we.gamification)==null?void 0:Ee.level)||1;return y==="asc"?Le-Pe:Pe-Le}case"flux":{const Le=((pt=H.gamification)==null?void 0:pt.currency)||0,Pe=((Rt=we.gamification)==null?void 0:Rt.currency)||0;return y==="asc"?Le-Pe:Pe-Le}case"gear":{const Le=Cr(H),Pe=Cr(we);return y==="asc"?Le-Pe:Pe-Le}case"xp":default:{const Le=c!=="All Classes"?((nr=(jt=H.gamification)==null?void 0:jt.classXp)==null?void 0:nr[c])||0:((Or=H.gamification)==null?void 0:Or.xp)||0,Pe=c!=="All Classes"?((se=(hn=we.gamification)==null?void 0:hn.classXp)==null?void 0:se[c])||0:((xe=we.gamification)==null?void 0:xe.xp)||0;return y==="asc"?Le-Pe:Pe-Le}}}),[Lt,i,c,h,m,y]),dr=async(H,we)=>{try{await Ae.adjustUserXP(H.id,we,H.classType||Mr.UNCATEGORIZED),r.success(`${we>0?"+":""}${we} XP applied to ${H.name}.`)}catch{r.error("Failed to adjust XP.")}k(null)},Qn=async H=>{H.preventDefault();const we={id:Math.random().toString(36).substring(2,9),title:ne.title,multiplier:ne.multiplier,isActive:!0,type:ne.type};ne.type==="CLASS_SPECIFIC"&&(we.targetClass=ne.targetClass),ne.targetSections.length>0&&(we.targetSections=ne.targetSections),await Ae.saveXPEvent(we),q(!1),ve({title:"",multiplier:2,type:"GLOBAL",targetClass:Mr.AP_PHYSICS,targetSections:[]})},un=async H=>{H.preventDefault(),G(!0);try{const we={};B.techReq>0&&(we.tech=B.techReq),B.focusReq>0&&(we.focus=B.focusReq),B.analysisReq>0&&(we.analysis=B.analysisReq),B.charismaReq>0&&(we.charisma=B.charismaReq);const je=new Date;je.setHours(je.getHours()+(B.durationHours||0));const Ee={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!0,type:B.type,statRequirements:we,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:B.durationHours>0?je.toISOString():null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Ae.saveQuest(Ee),r.success(`Mission "${Ee.title}" deployed.`),V(F3),$(!1)}catch(we){console.error("Failed to issue mission:",we),r.error("Failed to issue mission.")}finally{G(!1)}},dn=async H=>{await Ae.saveXPEvent({...H,isActive:!H.isActive})},Re=async H=>{const we={...H,isActive:!H.isActive};we.isActive&&(we.expiresAt=null),await Ae.saveQuest(we)},Ye=async(H,we,je)=>{var Rt,jt;if(!await n({message:`Confiscate ${we.name} from ${H.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const pt=(je?zu(H,je):{inventory:((Rt=H.gamification)==null?void 0:Rt.inventory)||[]}).inventory.filter(nr=>nr.id!==we.id);await Ae.adminUpdateInventory(H.id,pt,((jt=H.gamification)==null?void 0:jt.currency)||0,je),j(nr=>{var Or,hn;return nr?je&&((hn=(Or=nr.gamification)==null?void 0:Or.classProfiles)!=null&&hn[je])?{...nr,gamification:{...nr.gamification,classProfiles:{...nr.gamification.classProfiles,[je]:{...nr.gamification.classProfiles[je],inventory:pt}}}}:{...nr,gamification:{...nr.gamification,inventory:pt}}:null})},qe=async(H,we,je)=>{var Rt;if(!await n({message:`Force unequip ${we} from ${H.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const pt={...(je?zu(H,je):{equipped:{...(Rt=H.gamification)==null?void 0:Rt.equipped}}).equipped};delete pt[we],await Ae.adminUpdateEquipped(H.id,pt,je),j(jt=>{var nr,Or;return jt?je&&((Or=(nr=jt.gamification)==null?void 0:nr.classProfiles)!=null&&Or[je])?{...jt,gamification:{...jt.gamification,classProfiles:{...jt.gamification.classProfiles,[je]:{...jt.gamification.classProfiles[je],equipped:pt}}}}:{...jt,gamification:{...jt.gamification,equipped:pt}}:null})},hr=async(H,we)=>{var Ee,pt;const je=Math.max(0,(((Ee=H.gamification)==null?void 0:Ee.currency)||0)+we);await Ae.adminUpdateInventory(H.id,((pt=H.gamification)==null?void 0:pt.inventory)||[],je),j(Rt=>Rt?{...Rt,gamification:{...Rt.gamification,currency:je}}:null)},Hr=async(H,we,je,Ee)=>{try{await Ae.resolveQuest(H,we,je,Ee),r.success(je?`Mission "${we.title}" approved.`:`Mission "${we.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},_r=async H=>{const we=H.quest.rollDieSides||20,je=Math.floor(Math.random()*we)+1;r.info(`Rolled a ${je} on a D${we}. ${je===we?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Hr(H.user.id,H.quest,je===we,H.user.classType)},rn=async H=>{try{await Ae.updateCodename(H,X.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}de(null)},yn=async(H,we)=>{try{await Ae.toggleCodenameLock(H,we),r.success(we?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},pa=H=>{var we,je,Ee,pt,Rt;if(H)He(H),te({bossName:H.bossName,description:H.description,maxHp:H.maxHp,classType:H.classType||"GLOBAL",damagePerCorrect:H.damagePerCorrect||50,rewardXp:((we=H.rewards)==null?void 0:we.xp)||500,rewardFlux:((je=H.rewards)==null?void 0:je.flux)||100,rewardItemRarity:((Ee=H.rewards)==null?void 0:Ee.itemRarity)||"",deadline:H.deadline?H.deadline.slice(0,16):"",questions:H.questions.map(jt=>({...jt,damageBonus:jt.damageBonus||0})),targetSections:H.targetSections||[],bossType:((pt=H.bossAppearance)==null?void 0:pt.bossType)||"BRUTE",bossHue:((Rt=H.bossAppearance)==null?void 0:Rt.hue)??0}),ot(H.modifiers||[]);else{He(null);const jt=new Date;jt.setDate(jt.getDate()+7),te({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:jt.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),ot([])}Fe(!0)},ma=()=>{te(H=>({...H,questions:[...H.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},ga=(H,we,je)=>{te(Ee=>{const pt=[...Ee.questions];return pt[H]={...pt[H],[we]:je},{...Ee,questions:pt}})},hs=(H,we,je)=>{te(Ee=>{const pt=[...Ee.questions],Rt=[...pt[H].options];return Rt[we]=je,pt[H]={...pt[H],options:Rt},{...Ee,questions:pt}})},bi=H=>{te(we=>({...we,questions:we.questions.filter((je,Ee)=>Ee!==H)}))},_t=async H=>{if(H.preventDefault(),Z.questions.length===0){r.error("Add at least one question.");return}try{const we=[...new Set(Z.questions.map(Ee=>Ee.bankId).filter(Boolean))],je={id:(Ne==null?void 0:Ne.id)||Math.random().toString(36).substring(2,12),bossName:Z.bossName,description:Z.description,maxHp:Z.maxHp,currentHp:(Ne==null?void 0:Ne.currentHp)??Z.maxHp,classType:Z.classType,isActive:(Ne==null?void 0:Ne.isActive)??!0,deadline:new Date(Z.deadline).toISOString(),damagePerCorrect:Z.damagePerCorrect,questions:Z.questions.map(Ee=>({id:Ee.id,stem:Ee.stem,options:Ee.options.filter(pt=>pt.trim()),correctAnswer:Ee.correctAnswer,difficulty:Ee.difficulty,...Ee.damageBonus>0?{damageBonus:Ee.damageBonus}:{},...Ee.bankId?{bankId:Ee.bankId}:{}})),rewards:{xp:Z.rewardXp,flux:Z.rewardFlux,...Z.rewardItemRarity?{itemRarity:Z.rewardItemRarity}:{}},...Z.targetSections.length>0?{targetSections:Z.targetSections}:{},bossAppearance:{bossType:Z.bossType,hue:Z.bossHue},...ye.length>0?{modifiers:ye}:{},...we.length>0?{questionBankIds:we}:{}};await Ae.saveBossQuiz(je),r.success(Ne?"Quiz boss updated.":"Quiz boss deployed!"),Fe(!1)}catch{r.error("Failed to save quiz boss.")}},fe=async H=>{await Ae.toggleBossQuizActive(H.id,!H.isActive)},nt=async H=>{await n({message:`Delete quiz boss "${H.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Ae.deleteBossQuiz(H.id),r.success("Quiz boss deleted."))},dt=H=>{H?(Pt(H),it({name:H.name,classType:H.classType,description:H.description||"",questions:H.questions.map(we=>({...we,damageBonus:we.damageBonus||0}))})):(Pt(null),it({name:"",classType:"GLOBAL",description:"",questions:[]})),kr(null),he(!0)},rr=async H=>{if(H.preventDefault(),Ke.questions.length===0){r.error("Add at least one question.");return}try{const we=new Date().toISOString(),je={id:(Ge==null?void 0:Ge.id)||Math.random().toString(36).substring(2,12),name:Ke.name,classType:Ke.classType,description:Ke.description,questions:Ke.questions.map(Ee=>({id:Ee.id,stem:Ee.stem,options:Ee.options.filter(pt=>pt.trim()),correctAnswer:Ee.correctAnswer,difficulty:Ee.difficulty,...Ee.damageBonus>0?{damageBonus:Ee.damageBonus}:{}})),createdAt:(Ge==null?void 0:Ge.createdAt)||we,updatedAt:we};await Ae.saveBossQuestionBank(je),r.success(Ge?"Question bank updated.":"Question bank created!"),he(!1)}catch{r.error("Failed to save question bank.")}},br=async H=>{await n({message:`Delete question bank "${H.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Ae.deleteBossQuestionBank(H.id),r.success("Question bank deleted."))},vn=async(H,we)=>{var pt;const je=(pt=H.target.files)==null?void 0:pt[0];if(!je)return;const Ee=we==="bank"?kr:It;Ee(null);try{let jt=(await je.text()).replace(/```json\s*|```\s*/g,"").trim();jt=jt.replace(/[\x00-\x1F\x7F]/g,xe=>xe===`
`||xe==="\r"||xe==="	"?" ":"");let nr;try{nr=JSON.parse(jt)}catch{const xe=jt.match(/\[[\s\S]*\]/);if(xe)try{nr=JSON.parse(xe[0])}catch{let Le=null;for(let Pe=xe[0].length-1;Pe>0;Pe--)if(xe[0][Pe]==="}")try{Le=JSON.parse(xe[0].slice(0,Pe+1)+"]");break}catch{}if(Le)nr=Le;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(nr)||nr.length===0)throw new Error("Must be a non-empty JSON array.");const Or=nr.filter(xe=>xe.stem&&xe.options&&xe.correctAnswer!==void 0);if(Or.length===0)throw new Error("No valid questions found.");const hn=Or.map(xe=>({id:xe.id||Math.random().toString(36).substring(2,10),stem:xe.stem,options:xe.options.slice(0,4),correctAnswer:typeof xe.correctAnswer=="number"?xe.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(xe.difficulty)?xe.difficulty:"MEDIUM",damageBonus:typeof xe.damageBonus=="number"?xe.damageBonus:0})),se=nr.length-Or.length;we==="bank"?it(xe=>({...xe,questions:[...xe.questions,...hn]})):te(xe=>({...xe,questions:[...xe.questions,...hn]})),r.success(`Imported ${hn.length} questions${se>0?` (${se} skipped)`:""}`)}catch(Rt){Ee(Rt instanceof Error?Rt.message:"Import failed."),r.error("Failed to import questions.")}we==="bank"&&$t.current&&($t.current.value=""),we==="boss"&&Ze.current&&(Ze.current.value="")},nn=H=>{const we=H.questions.map(je=>({...je,damageBonus:je.damageBonus||0,bankId:H.id,id:Math.random().toString(36).substring(2,10)}));te(je=>({...je,questions:[...je.questions,...we]})),r.success(`Imported ${we.length} questions from "${H.name}"`)},_n=H=>{ot(we=>{if(we.find(pt=>pt.type===H))return we.filter(pt=>pt.type!==H);const Ee=uT[H];return[...we,{type:H,...Ee.hasValue?{value:Ee.defaultValue}:{}}]})},zr=(H,we)=>{ot(je=>je.map(Ee=>Ee.type===H?{...Ee,value:we}:Ee))},Bs=async H=>{Ct(H),Gt(!0);try{const we=await Ae.getBossQuizAllProgress(H.id);tt(we)}catch{r.error("Failed to load endgame data.")}Gt(!1)},fs=(H,we)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${H||"Quiz Boss"}"
CLASS: ${we||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,ho=()=>{const H=fs(Z.bossName,Z.classType);navigator.clipboard.writeText(H),Se(!0),setTimeout(()=>Se(!1),2500),r.success("Prompt copied to clipboard!")},vl=H=>vn(H,"boss"),ps=async(H,we)=>{try{const je=await Ae.completeTutoring(H,we);r.success(`Verified! Tutor earned ${je.xpAwarded} XP and ${je.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},ms=async H=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Ae.cancelTutoringSession(H),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},Ba=yr.filter(H=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(H.status)),ja={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:ja[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>q(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(YT,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>$(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(G2,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>pa(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(rl,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Tx,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:H=>o(H.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[xn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(FH,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:H=>d(H.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(Mr).map(H=>s.jsx("option",{value:H,children:H},H))]}),s.jsx(Ei,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),bt.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),bt.map(H=>s.jsx("option",{value:H,children:H},H))]}),s.jsx(Ei,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(N,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(N,{label:"Class",col:"class"}),s.jsx(N,{label:"Level",col:"level",className:"text-center"}),s.jsx(N,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(N,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(N,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:xn.map(H=>{var pt,Rt,jt,nr,Or,hn,se,xe,Le;const we=((pt=H.gamification)==null?void 0:pt.level)||1,je=((Rt=H.gamification)==null?void 0:Rt.currency)||0,Ee=H.enrolledClasses||(H.classType?[H.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:H.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:H.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:H.name}),ce===H.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:X,onChange:Pe=>ae(Pe.target.value),maxLength:24,onKeyDown:Pe=>{Pe.key==="Enter"&&rn(H.id),Pe.key==="Escape"&&de(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>rn(H.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(_o,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>de(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx($n,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var Pe;de(H.id),ae(((Pe=H.gamification)==null?void 0:Pe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((jt=H.gamification)==null?void 0:jt.codename)||"UNASSIGNED",s.jsx(xv,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var Pe;return yn(H.id,!((Pe=H.gamification)!=null&&Pe.codenameLocked))},className:`transition ${(nr=H.gamification)!=null&&nr.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Or=H.gamification)!=null&&Or.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(hn=H.gamification)!=null&&hn.codenameLocked?s.jsx(tf,{className:"w-2.5 h-2.5"}):s.jsx(Mle,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Ee.map(Pe=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Pe},Pe))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:we})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((xe=(se=H.gamification)==null?void 0:se.classXp)==null?void 0:xe[c])||0:((Le=H.gamification)==null?void 0:Le.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:je})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Cr(H)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>j(H),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Xv,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>k(H),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," XP"]})]})})]},H.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.map(H=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${H.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[H.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${H.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(ta,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>Ae.deleteXPEvent(H.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Cn,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:H.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[H.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:H.type==="GLOBAL"?"Global Uplink":H.targetClass}),s.jsx("button",{onClick:()=>dn(H),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${H.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:H.isActive?"Active":"Offline"})]})]},H.id)),s.jsxs("button",{onClick:()=>q(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(Bn,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:O.map(H=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${H.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${H.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(cl,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:H.title}),s.jsx("p",{className:"text-sm text-gray-500",children:H.description}),H.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(H.statRequirements).map(([we,je])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[je," ",we]},we))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:H.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",H.xpReward," XP"]}),H.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:H.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>Re(H),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${H.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${H.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:H.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>Ae.deleteQuest(H.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Cn,{className:"w-4 h-4"})})]})]},H.id))}),a==="MISSION_CONTROL"&&s.jsx(q0e,{deployments:Y,onResolveQuest:Hr,onRollForSalvation:_r}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>Dt("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${qt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Gd,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",pe.length,")"]}),s.jsxs("button",{onClick:()=>Dt("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${qt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(x3,{className:"w-3 h-3 inline mr-1"})," Question Banks (",At.length,")"]})]}),qt==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),pe.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(rl,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),pe.map(H=>{var pt,Rt;const we=H.maxHp>0?Math.max(0,(H.currentHp||H.maxHp)/H.maxHp*100):0,je=new Date(H.deadline)<new Date,Ee=(H.currentHp??H.maxHp)<=0||!H.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${H.isActive&&!je?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${H.isActive&&!je?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(rl,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:H.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[H.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(H.currentHp??H.maxHp).toLocaleString(),"/",H.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[H.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:H.classType}),(pt=H.modifiers)!=null&&pt.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[H.modifiers.length," Modifiers"]}):null,(Rt=H.targetSections)!=null&&Rt.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:H.targetSections.join(", ")}):null,je&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ee&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${we>50?"bg-amber-500":we>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${we}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ee&&s.jsxs("button",{onClick:()=>Bs(H),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(S0,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>pa(H),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(xv,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>fe(H),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${H.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${H.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>nt(H),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Cn,{className:"w-4 h-4"})})]})]},H.id)})]}),qt==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>dt(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(Bn,{className:"w-3 h-3"})," New Bank"]})]}),At.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(x3,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),At.map(H=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(x3,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:H.name}),H.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[H.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:H.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(H.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>dt(H),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(xv,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>br(H),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(Cn,{className:"w-4 h-4"})})]})]},H.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>cn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Vr==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",Ba.length,")"]}),s.jsxs("button",{onClick:()=>cn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Vr==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",yr.length,")"]})]}),(Vr==="pending"?Ba:yr).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Oo,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:Vr==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(Vr==="pending"?Ba:yr).map(H=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${H.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":H.status==="MATCHED"||H.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":H.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Lle,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:H.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${H.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":H.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":H.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":H.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:H.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:H.requesterName})]}),H.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:H.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:H.classType})]}),s.jsx("span",{children:new Date(H.createdAt).toLocaleDateString()}),H.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(H.completedAt).toLocaleDateString()]})]}),(H.requesterFeedback||H.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[H.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(H.requesterFeedback.rating),"".repeat(5-H.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",H.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:H.requesterFeedback.response})]}),H.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(H.tutorFeedback.rating),"".repeat(5-H.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",H.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:H.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[H.tutorId&&H.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>ps(H.id,H.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(gn,{className:"w-3 h-3"})," Verify & Award"]}),H.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>ms(H.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx($n,{className:"w-3 h-3"})," Cancel"]}),H.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx(gn,{className:"w-3 h-3"})," +",H.xpReward," XP, +",H.fluxReward||25," Flux"]})]})]})},H.id))]})]})}),s.jsx(U0e,{user:E,onClose:()=>j(null),onDeleteItem:Ye,onUnequipItem:qe,onGrantFlux:hr}),s.jsx(H0e,{isOpen:D,onClose:()=>$(!1),form:B,setForm:V,onSubmit:un,onSaveDraft:async()=>{const H={};B.techReq>0&&(H.tech=B.techReq),B.focusReq>0&&(H.focus=B.focusReq),B.analysisReq>0&&(H.analysis=B.analysisReq),B.charismaReq>0&&(H.charisma=B.charismaReq);const we={id:Math.random().toString(36).substring(2,9),title:B.title,description:B.description,xpReward:B.xpReward,fluxReward:B.fluxReward,isActive:!1,type:B.type,statRequirements:H,startsAt:B.startsAt?new Date(B.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:B.lootRarity||null,rollDieSides:B.dieSides||20,consequenceText:B.consequence||null,isGroupQuest:B.isGroup,targetClass:B.targetClass||void 0,targetSections:B.targetSections.length>0?B.targetSections:void 0};await Ae.saveQuest(we),r.success("Mission saved as draft (standby)."),V(F3),$(!1)},isSubmitting:W,availableSections:tn}),s.jsx(is,{isOpen:C,onClose:()=>q(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:Qn,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:ne.title,onChange:H=>ve({...ne,title:H.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:ne.multiplier,onChange:H=>ve({...ne,multiplier:parseFloat(H.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:ne.type,onChange:H=>ve({...ne,type:H.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),ne.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:ne.targetClass,onChange:H=>ve({...ne,targetClass:H.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Mr).map(H=>s.jsx("option",{value:H,children:H},H))})]}),s.jsx(gg,{availableSections:Fr,selectedSections:ne.targetSections,onChange:H=>ve({...ne,targetSections:H})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const H={id:Math.random().toString(36).substring(2,9),title:ne.title,multiplier:ne.multiplier,isActive:!1,type:ne.type,...ne.type==="CLASS_SPECIFIC"?{targetClass:ne.targetClass}:{},...ne.targetSections.length>0?{targetSections:ne.targetSections}:{}};await Ae.saveXPEvent(H),q(!1),ve({title:"",multiplier:2,type:"GLOBAL",targetClass:Mr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(F0e,{user:I,onClose:()=>k(null),onAdjust:dr}),s.jsx(is,{isOpen:Ue,onClose:()=>Fe(!1),title:Ne?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:_t,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:Z.bossName,onChange:H=>te({...Z,bossName:H.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:Z.description,onChange:H=>te({...Z,description:H.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx(sW,{bossType:Z.bossType,hue:Z.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(H=>s.jsx("button",{type:"button",onClick:()=>te({...Z,bossType:H}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${Z.bossType===H?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:H.charAt(0)+H.slice(1).toLowerCase()},H))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",Z.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:Z.bossHue,onChange:H=>te({...Z,bossHue:parseInt(H.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:Z.maxHp,onChange:H=>te({...Z,maxHp:parseInt(H.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:Z.damagePerCorrect,onChange:H=>te({...Z,damagePerCorrect:parseInt(H.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:Z.classType,onChange:H=>te({...Z,classType:H.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Mr).map(H=>s.jsx("option",{value:H,children:H},H))]})]})]}),s.jsx(gg,{availableSections:Dr,selectedSections:Z.targetSections,onChange:H=>te({...Z,targetSections:H})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:Z.deadline,onChange:H=>te({...Z,deadline:H.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:Z.rewardXp,onChange:H=>te({...Z,rewardXp:parseInt(H.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:Z.rewardFlux,onChange:H=>te({...Z,rewardFlux:parseInt(H.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:Z.rewardItemRarity,onChange:H=>te({...Z,rewardItemRarity:H.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",ye.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(uT).map(([H,we])=>{const je=ye.find(Ee=>Ee.type===H);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${je?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>_n(H),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:we.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:we.description})]}),je&&we.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:je.value??we.defaultValue,onChange:Ee=>zr(H,parseInt(Ee.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:we.unit})]})]},H)})})]}),At.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:At.filter(H=>H.classType===Z.classType||H.classType==="GLOBAL"||Z.classType==="GLOBAL").map(H=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:H.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[H.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>nn(H),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Import All"]})]},H.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",Z.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:ho,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${be?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:be?s.jsxs(s.Fragment,{children:[s.jsx(_o,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(K2,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(nf,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Ze,type:"file",accept:".json,.txt",onChange:vl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:ma,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Manual"]})]})]}),rt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx($n,{className:"w-4 h-4 flex-shrink-0"}),rt,s.jsx("button",{type:"button",onClick:()=>It(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx($n,{className:"w-3 h-3"})})]}),Z.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(KT,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),Z.questions.map((H,we)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",we+1]}),s.jsx("textarea",{value:H.stem,onChange:je=>ga(we,"stem",je.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>bi(we),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(Cn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:H.options.map((je,Ee)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>ga(we,"correctAnswer",Ee),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${H.correctAnswer===Ee?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(_o,{className:"w-3 h-3"})}),s.jsx("input",{value:je,onChange:pt=>hs(we,Ee,pt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ee)}`,required:!0})]},Ee))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:H.difficulty,onChange:je=>ga(we,"difficulty",je.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:H.damageBonus,onChange:je=>ga(we,"damageBonus",parseInt(je.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},H.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!Ne&&s.jsx("button",{type:"button",onClick:async()=>{if(Z.questions.length===0){r.error("Add at least one question.");return}const H=[...new Set(Z.questions.map(je=>je.bankId).filter(Boolean))],we={id:Math.random().toString(36).substring(2,12),bossName:Z.bossName,description:Z.description,maxHp:Z.maxHp,currentHp:Z.maxHp,classType:Z.classType,isActive:!1,deadline:Z.deadline?new Date(Z.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:Z.damagePerCorrect,questions:Z.questions.map(je=>({id:je.id,stem:je.stem,options:je.options.filter(Ee=>Ee.trim()),correctAnswer:je.correctAnswer,difficulty:je.difficulty,...je.damageBonus>0?{damageBonus:je.damageBonus}:{},...je.bankId?{bankId:je.bankId}:{}})),rewards:{xp:Z.rewardXp,flux:Z.rewardFlux,...Z.rewardItemRarity?{itemRarity:Z.rewardItemRarity}:{}},...Z.targetSections.length>0?{targetSections:Z.targetSections}:{},bossAppearance:{bossType:Z.bossType,hue:Z.bossHue},...ye.length>0?{modifiers:ye}:{},...H.length>0?{questionBankIds:H}:{}};await Ae.saveBossQuiz(we),r.success("Quiz boss saved as draft (inactive)."),Fe(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${Ne?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:Ne?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(is,{isOpen:tr,onClose:()=>he(!1),title:Ge?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:rr,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:Ke.name,onChange:H=>it({...Ke,name:H.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:Ke.classType,onChange:H=>it({...Ke,classType:H.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Mr).map(H=>s.jsx("option",{value:H,children:H},H))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:Ke.description,onChange:H=>it({...Ke,description:H.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",Ke.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(nf,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:$t,type:"file",accept:".json,.txt",onChange:H=>vn(H,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>it(H=>({...H,questions:[...H.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Manual"]})]})]}),Nt&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx($n,{className:"w-4 h-4 flex-shrink-0"})," ",Nt,s.jsx("button",{type:"button",onClick:()=>kr(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx($n,{className:"w-3 h-3"})})]}),Ke.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(KT,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),Ke.questions.map((H,we)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:H.stem,onChange:je=>{const Ee=[...Ke.questions];Ee[we]={...Ee[we],stem:je.target.value},it({...Ke,questions:Ee})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${we+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>it(je=>({...je,questions:je.questions.filter((Ee,pt)=>pt!==we)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:H.options.map((je,Ee)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const pt=[...Ke.questions];pt[we]={...pt[we],correctAnswer:Ee},it({...Ke,questions:pt})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${H.correctAnswer===Ee?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(_o,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:je,onChange:pt=>{const Rt=[...Ke.questions],jt=[...Rt[we].options];jt[Ee]=pt.target.value,Rt[we]={...Rt[we],options:jt},it({...Ke,questions:Rt})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ee)}`,required:!0})]},Ee))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:H.difficulty,onChange:je=>{const Ee=[...Ke.questions];Ee[we]={...Ee[we],difficulty:je.target.value},it({...Ke,questions:Ee})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:H.damageBonus,onChange:je=>{const Ee=[...Ke.questions];Ee[we]={...Ee[we],damageBonus:parseInt(je.target.value)||0},it({...Ke,questions:Ee})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},H.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Ge?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(is,{isOpen:!!mt,onClose:()=>{Ct(null),tt([])},title:mt?`Endgame: ${mt.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:gr?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):mt&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:vt.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:vt.reduce((H,we)=>{var je;return H+(((je=we.combatStats)==null?void 0:je.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:vt.reduce((H,we)=>{var je;return H+(((je=we.combatStats)==null?void 0:je.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:vt.reduce((H,we)=>{var je;return H+(((je=we.combatStats)==null?void 0:je.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(VH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...vt].sort((H,we)=>{var je,Ee;return(((je=we.combatStats)==null?void 0:je.totalDamageDealt)||0)-(((Ee=H.combatStats)==null?void 0:Ee.totalDamageDealt)||0)}).slice(0,5).map((H,we)=>{var Or;const je=t.find(hn=>hn.id===H.userId),Ee=H.combatStats,pt=we,Rt=pt<LO.length?LO[pt]:1,jt=((Ee==null?void 0:Ee.questionsAttempted)||0)>=Hm&&((Ee==null?void 0:Ee.questionsCorrect)||0)>=Gm,nr=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${we===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${nr[we]||"text-gray-500"}`,children:["#",we+1]}),(je==null?void 0:je.avatarUrl)&&s.jsx("img",{src:je.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(je==null?void 0:je.name)||H.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((Or=Ee==null?void 0:Ee.totalDamageDealt)==null?void 0:Or.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(Ee==null?void 0:Ee.questionsCorrect)||0,"/",(Ee==null?void 0:Ee.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(Ee==null?void 0:Ee.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(Ee==null?void 0:Ee.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:jt?s.jsxs("span",{className:`text-xs font-bold ${we<5?nr[we]:"text-gray-400"}`,children:[Rt,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},H.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(s0,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...vt].sort((H,we)=>{var je,Ee;return(((je=we.combatStats)==null?void 0:je.totalDamageDealt)||0)-(((Ee=H.combatStats)==null?void 0:Ee.totalDamageDealt)||0)}).map((H,we)=>{const je=t.find(Or=>Or.id===H.userId),Ee=H.combatStats,pt=(Ee==null?void 0:Ee.questionsAttempted)||0,Rt=(Ee==null?void 0:Ee.questionsCorrect)||0,jt=pt>0?Math.round(Rt/pt*100):0,nr=pt>=Hm&&Rt>=Gm;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:we+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(je==null?void 0:je.name)||H.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ee==null?void 0:Ee.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:Rt}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:pt}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[jt,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(Ee==null?void 0:Ee.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ee==null?void 0:Ee.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ee==null?void 0:Ee.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:nr?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},H.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(H=>{const we=vt.reduce((jt,nr)=>{var Or,hn;return jt+(((hn=(Or=nr.combatStats)==null?void 0:Or.correctByDifficulty)==null?void 0:hn[H])||0)},0),je=vt.reduce((jt,nr)=>{var Or,hn;return jt+(((hn=(Or=nr.combatStats)==null?void 0:Or.incorrectByDifficulty)==null?void 0:hn[H])||0)},0),Ee=we+je,pt=Ee>0?Math.round(we/Ee*100):0,Rt=H==="EASY"?"green":H==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${Rt}-500/5 border border-${Rt}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${Rt}-400 uppercase mb-1`,children:H}),s.jsxs("div",{className:"text-lg font-black text-white",children:[pt,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[we,"/",Ee," correct"]})]},H)})})]})]})})]})},K0e=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=Do(),a=Qa(),[i,o]=T.useState({}),[c,d]=T.useState(Mr.AP_PHYSICS),[h,p]=T.useState(!1),[m,x]=T.useState(""),[y,S]=T.useState(null),[w,N]=T.useState(""),[A,R]=T.useState(""),O=T.useMemo(()=>Object.values(Mr).filter(D=>D!=="Uncategorized"),[]);T.useEffect(()=>{const D=Ae.subscribeToStudentGroups(c,$=>{o(B=>({...B,[c]:$}))});return()=>D()},[c]);const L=i[c]||[],I=T.useMemo(()=>t.filter(D=>{var $;return D.role==="STUDENT"&&(($=D.enrolledClasses)==null?void 0:$.includes(c))}).filter(D=>!w||D.section===w),[t,c,w]),k=async()=>{if(m.trim())try{await Ae.createStudentGroup(m.trim(),c,[]),x(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},E=async D=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Ae.deleteStudentGroup(D)},j=async(D,$)=>{if(D.members.some(V=>V.userId===$.id))return;const B=[...D.members,{userId:$.id,userName:$.name}];await Ae.updateStudentGroup(D.id,{members:B})},C=async(D,$)=>{const B=D.members.filter(V=>V.userId!==$);await Ae.updateStudentGroup(D.id,{members:B})},q=T.useMemo(()=>{var $;const D={};for(const B of O)D[B]=(($=i[B])==null?void 0:$.length)||0;return D},[O,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(Bn,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:O.map(D=>s.jsxs("button",{onClick:()=>d(D),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===D?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[D,q[D]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===D?"bg-white/20":"bg-white/10"}`,children:q[D]})]},D))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:m,onChange:D=>x(D.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:D=>D.key==="Enter"&&k(),autoFocus:!0}),s.jsx("button",{onClick:k,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{p(!1),x("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx($n,{className:"w-5 h-5"})})]})]}),L.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx($i,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(D=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:D.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[D.members.length," member",D.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>S(y===D.id?null:D.id),className:`p-2 rounded-lg transition ${y===D.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(tb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E(D.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(Cn,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.members.map($=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:$.userName.charAt(0)}),$.userName,s.jsx("button",{onClick:()=>C(D,$.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(Jle,{className:"w-3 h-3"})})]},$.userId)),D.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(tb,{className:"w-3 h-3 inline"})," button to assign students."]})]}),y===D.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Tx,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:A,onChange:$=>R($.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:w,onChange:$=>N($.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map($=>s.jsx("option",{value:$,children:$},$))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:I.filter($=>!D.members.some(B=>B.userId===$.id)).filter($=>!A||$.name.toLowerCase().includes(A.toLowerCase())).map($=>s.jsxs("button",{onClick:()=>j(D,$),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",$.name]},$.id))})]})]})]},D.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx($i,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},X0e={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(KH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx($H,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(jx,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},Q0e=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(jx,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx($H,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(KH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(rf,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=X0e[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(XT,{className:"w-4 h-4"}):s.jsx(GH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx($n,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},Y0e=["","","","","","","",""],J0e=["","","","","","","","","","","","","","","","","","","","","","","","","",""],Z0e=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var Dt,tr;const{confirm:d}=Do(),[h,p]=T.useState([]),[m,x]=T.useState(""),[y,S]=T.useState("Main"),[w,N]=T.useState(!1),[A,R]=T.useState(!1),[O,L]=T.useState(null),[I,k]=T.useState(null),[E,j]=T.useState([]),[C,q]=T.useState([]),[D,$]=T.useState(null),[B,V]=T.useState([]),[W,G]=T.useState(null),Y=T.useRef(null),re=T.useRef(null),ce=T.useRef(null),de=T.useMemo(()=>Object.values(Mr).filter(he=>{var it;if(he===Mr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Ge=a.find($t=>$t.className===he),Pt=(it=t.enrolledClasses)==null?void 0:it.includes(he),Ke=Ge?Ge.features.communications:!0;return Pt&&Ke}),[a,t.role,t.enrolledClasses]),[X,ae]=T.useState(de[0]||"");T.useEffect(()=>{(!X||!de.includes(X))&&de.length>0&&ae(de[0])},[de]);const ne=T.useMemo(()=>y==="Resources"&&I?`res_${I}`:y==="Resources"&&!I?"":y==="Groups"&&D?`group_${D}`:y==="Groups"&&!D||!X?"":`class_${X.replace(/\s+/g,"_").toLowerCase()}`,[X,y,I,D]),ve=T.useRef(null),pe=T.useMemo(()=>n.filter(he=>!(he.classType!==X||he.status==="DRAFT"||he.status==="ARCHIVED"||he.scheduledAt&&new Date(he.scheduledAt)>new Date)),[n,X]),Be=T.useMemo(()=>h.filter(he=>{var Ge;return he.isGlobalPinned||((Ge=he.pinnedBy)==null?void 0:Ge.includes(t.id))}),[h,t.id]),Ue=T.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),Fe=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(he=>he.startsWith("class_")),[i]),Ne=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(he=>he.startsWith("res_")),[i]),He=T.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(he=>he.startsWith("group_")),[i]),Z=T.useRef(!1);T.useEffect(()=>{if(!e){Z.current=!1;return}if(Z.current||!i||i.size===0)return;Z.current=!0;const he=Array.from(i)[0];if(he.startsWith("class_")){S("Main");const Ge=de.find(Pt=>`class_${Pt.replace(/\s+/g,"_").toLowerCase()}`===he);Ge&&ae(Ge)}else he.startsWith("res_")?(S("Resources"),k(he.replace("res_",""))):he.startsWith("group_")&&(S("Groups"),$(he.replace("group_","")))},[e,i,de]),T.useEffect(()=>{!e||!ne||o==null||o(ne)},[e,ne,o]),T.useEffect(()=>{if(!e)return;const he=t.role==="ADMIN"?Ae.subscribeToStudentGroups(X,j):Ae.subscribeToMyGroups(t.id,j);return()=>he()},[e,t.id,t.role,X]),T.useEffect(()=>{if(!e)return;let he="";if(y==="Resources"&&I?he=`res_${I}`:y==="Groups"&&D?he=`group_${D}`:(y==="Main"||y==="Bookmarks")&&(he=`class_${X.replace(/\s+/g,"_").toLowerCase()}`),!he)return;N(!0);const Ge=Ae.subscribeToChannelMessages(he,Pt=>{p(Pt),N(!1)});return()=>{Ge()}},[e,X,y,I,D]),T.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const he=Ae.subscribeToFlaggedMessages(Pt=>{V(Pt)}),Ge=Ae.subscribeToAllGroups(q);return()=>{he(),Ge()}},[e,t.role]),T.useEffect(()=>{ve.current&&(ve.current.scrollTop=ve.current.scrollHeight)},[h,w,y,I]),T.useEffect(()=>{const he=Ge=>{Y.current&&!Y.current.contains(Ge.target)&&R(!1),re.current&&!re.current.contains(Ge.target)&&L(null)};return document.addEventListener("mousedown",he),()=>document.removeEventListener("mousedown",he)},[]),T.useEffect(()=>{if(!e)return;const he=Ge=>{Ge.key==="Escape"&&r()};return window.addEventListener("keydown",he),()=>window.removeEventListener("keydown",he)},[e,r]);const te=T.useCallback(async he=>{if(he.preventDefault(),!(!m.trim()||!ne)&&!Ue)try{await Ae.sendMessage(t,m,ne,X),x(""),R(!1)}catch(Ge){console.error("Failed to send message:",Ge)}},[m,ne,Ue,t,X]),be=T.useCallback(async(he,Ge)=>{try{await Ae.toggleReaction(he,Ge,t.id),L(null)}catch(Pt){console.error(Pt)}},[t.id]),Se=T.useCallback(async he=>{try{await Ae.togglePersonalPin(he,t.id)}catch(Ge){console.error(Ge)}},[t.id]),Ze=T.useCallback(async(he,Ge)=>{try{await Ae.toggleGlobalPin(he,!Ge)}catch(Pt){console.error(Pt)}},[]),rt=async he=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Ae.deleteMessage(he)}catch(Ge){console.error(Ge)}},It=async he=>{try{await Ae.unflagMessage(he),await Ae.resolveFlagByMessageId(he)}catch(Ge){console.error(Ge)}},At=async he=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Ae.resolveFlagByMessageId(he),await Ae.deleteMessage(he)}catch(Ge){console.error(Ge)}},Ft=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Ae.INDEFINITE_MUTE}],qt=async he=>{if(W){try{await Ae.muteUser(W.senderId,he)}catch(Ge){console.error(Ge)}G(null)}};return T.useEffect(()=>{const he=Ge=>{ce.current&&!ce.current.contains(Ge.target)&&G(null)};return W&&document.addEventListener("mousedown",he),()=>document.removeEventListener("mousedown",he)},[W]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[y==="Resources"&&I||y==="Groups"&&D?s.jsx("button",{onClick:()=>{k(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(zH,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(rf,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:y==="Moderation"?"Moderation Queue":y==="Groups"?D?(Dt=E.find(he=>he.id===D))==null?void 0:Dt.name:"My Groups":y==="Resources"?I?(tr=pe.find(he=>he.id===I))==null?void 0:tr.title:"Class Resources":X}),y!=="Resources"&&y!=="Moderation"&&y!=="Groups"&&de.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:X}),s.jsx(Ei,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:X,onChange:he=>ae(he.target.value),children:de.map(he=>s.jsx("option",{value:he,children:he},he))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx($n,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>S("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${y==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(rf,{className:"w-5 h-5"}),Fe&&y!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>S("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${y==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(vi,{className:"w-5 h-5"}),Ne&&y!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(E.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{S("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${y==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx($i,{className:"w-5 h-5"}),He&&y!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):E.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:E.length})]}),s.jsx("button",{onClick:()=>S("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${y==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(CR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>S("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${y==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(ls,{className:"w-5 h-5"}),B.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[y==="Resources"&&!I&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:pe.map(he=>s.jsxs("div",{onClick:()=>k(he.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${he.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(Ole,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${he.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:he.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:he.unit})]})]}),s.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),c==null||c(he.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(hE,{className:"w-4 h-4"})})]},he.id))})}),y==="Groups"&&!D&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:E.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx($i,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):E.map(he=>s.jsx("div",{onClick:()=>$(he.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${he.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx($i,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${he.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:he.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[he.members.length," member",he.members.length!==1?"s":"","  ",he.classType]})]})]})},he.id))})}),y==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Mo,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(ls,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:B.map(he=>{var Ge,Pt,Ke;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:he.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(he.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:he.content}),he.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:he.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(Ge=he.channelId)!=null&&Ge.startsWith("group_")?`Group: ${((Pt=C.find(it=>it.id===he.channelId.replace("group_","")))==null?void 0:Pt.name)||he.channelId.replace("group_","")}`:((Ke=he.channelId)==null?void 0:Ke.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>It(he.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(_o,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>At(he.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(Cn,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>G((W==null?void 0:W.id)===`flag-${he.id}`?null:{id:`flag-${he.id}`,senderId:he.senderId,senderName:he.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(Zv,{className:"w-3.5 h-3.5"})}),(W==null?void 0:W.id)===`flag-${he.id}`&&s.jsxs("div",{ref:ce,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",he.senderName]}),Ft.map(it=>s.jsx("button",{onClick:()=>qt(it.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:it.label},it.minutes))]})]})]})]},he.id)})})]}),(y==="Main"||y==="Bookmarks"||y==="Resources"&&I||y==="Groups"&&D)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:ve,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(y==="Bookmarks"?Be:h).map((he,Ge,Pt)=>{var $t;const Ke=he.senderId===t.id,it=Ge>0&&Pt[Ge-1].senderId===he.senderId&&new Date(he.timestamp).getTime()-new Date(Pt[Ge-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${Ke?"items-end":"items-start"} ${it?"mt-1":"mt-4"}`,children:[!it&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${Ke?"text-indigo-400":"text-gray-300"}`,children:he.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(he.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),he.isGlobalPinned&&s.jsx(MR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${Ke?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>L(he.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(PR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>Se(he.id),className:`p-1 hover:bg-white/10 rounded-full transition ${($t=he.pinnedBy)!=null&&$t.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(CR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Ze(he.id,!!he.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${he.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(MR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>rt(he.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})}),he.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>G((W==null?void 0:W.id)===he.id?null:{id:he.id,senderId:he.senderId,senderName:he.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(Zv,{className:"w-3.5 h-3.5"})}),(W==null?void 0:W.id)===he.id&&s.jsxs("div",{ref:ce,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",he.senderName]}),Ft.map(Nt=>s.jsx("button",{onClick:()=>qt(Nt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:Nt.label},Nt.minutes))]})]})]})]}),O===he.id&&s.jsx("div",{ref:re,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${Ke?"right-0":"left-0"}`,children:Y0e.map(Nt=>s.jsx("button",{onClick:()=>be(he.id,Nt),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:Nt},Nt))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${Ke?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${he.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${he.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:he.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:he.reactions&&Object.entries(he.reactions).map(([Nt,kr])=>{const ye=kr;return ye.length>0&&s.jsxs("button",{onClick:()=>be(he.id,Nt),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${ye.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[Nt," ",ye.length]},Nt)})})]})]},he.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:te,className:"relative flex items-center gap-2",children:[A&&s.jsx("div",{ref:Y,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:J0e.map(he=>s.jsx("button",{type:"button",onClick:()=>x(Ge=>Ge+he),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:he},he))}),s.jsx("button",{type:"button",onClick:()=>R(!A),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(PR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:m,onChange:he=>x(he.target.value),placeholder:Ue?"Transmission Disabled":"Type message...",disabled:!ne||Ue,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!ne||Ue||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(gE,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function oW(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=oW(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Sr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=oW(t))&&(n&&(n+=" "),n+=e);return n}var q3,VM;function ds(){if(VM)return q3;VM=1;var t=Array.isArray;return q3=t,q3}var H3,FM;function lW(){if(FM)return H3;FM=1;var t=typeof py=="object"&&py&&py.Object===Object&&py;return H3=t,H3}var G3,qM;function gl(){if(qM)return G3;qM=1;var t=lW(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return G3=r,G3}var W3,HM;function Cx(){if(HM)return W3;HM=1;var t=gl(),e=t.Symbol;return W3=e,W3}var K3,GM;function ehe(){if(GM)return K3;GM=1;var t=Cx(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var p=n.call(o);return h&&(c?o[a]=d:delete o[a]),p}return K3=i,K3}var X3,WM;function the(){if(WM)return X3;WM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return X3=r,X3}var Q3,KM;function Nc(){if(KM)return Q3;KM=1;var t=Cx(),e=ehe(),r=the(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return Q3=o,Q3}var Y3,XM;function _c(){if(XM)return Y3;XM=1;function t(e){return e!=null&&typeof e=="object"}return Y3=t,Y3}var J3,QM;function Gf(){if(QM)return J3;QM=1;var t=Nc(),e=_c(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return J3=n,J3}var Z3,YM;function VE(){if(YM)return Z3;YM=1;var t=ds(),e=Gf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Z3=a,Z3}var eS,JM;function Gu(){if(JM)return eS;JM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return eS=t,eS}var tS,ZM;function FE(){if(ZM)return tS;ZM=1;var t=Nc(),e=Gu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return tS=o,tS}var rS,eD;function rhe(){if(eD)return rS;eD=1;var t=gl(),e=t["__core-js_shared__"];return rS=e,rS}var nS,tD;function nhe(){if(tD)return nS;tD=1;var t=rhe(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return nS=r,nS}var aS,rD;function cW(){if(rD)return aS;rD=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return aS=r,aS}var iS,nD;function ahe(){if(nD)return iS;nD=1;var t=FE(),e=nhe(),r=Gu(),n=cW(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(x){if(!r(x)||e(x))return!1;var y=t(x)?p:i;return y.test(n(x))}return iS=m,iS}var sS,aD;function ihe(){if(aD)return sS;aD=1;function t(e,r){return e==null?void 0:e[r]}return sS=t,sS}var oS,iD;function _0(){if(iD)return oS;iD=1;var t=ahe(),e=ihe();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return oS=r,oS}var lS,sD;function iw(){if(sD)return lS;sD=1;var t=_0(),e=t(Object,"create");return lS=e,lS}var cS,oD;function she(){if(oD)return cS;oD=1;var t=iw();function e(){this.__data__=t?t(null):{},this.size=0}return cS=e,cS}var uS,lD;function ohe(){if(lD)return uS;lD=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return uS=t,uS}var dS,cD;function lhe(){if(cD)return dS;cD=1;var t=iw(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return dS=a,dS}var hS,uD;function che(){if(uD)return hS;uD=1;var t=iw(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return hS=n,hS}var fS,dD;function uhe(){if(dD)return fS;dD=1;var t=iw(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return fS=r,fS}var pS,hD;function dhe(){if(hD)return pS;hD=1;var t=she(),e=ohe(),r=lhe(),n=che(),a=uhe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,pS=i,pS}var mS,fD;function hhe(){if(fD)return mS;fD=1;function t(){this.__data__=[],this.size=0}return mS=t,mS}var gS,pD;function qE(){if(pD)return gS;pD=1;function t(e,r){return e===r||e!==e&&r!==r}return gS=t,gS}var xS,mD;function sw(){if(mD)return xS;mD=1;var t=qE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return xS=e,xS}var yS,gD;function fhe(){if(gD)return yS;gD=1;var t=sw(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return yS=n,yS}var vS,xD;function phe(){if(xD)return vS;xD=1;var t=sw();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return vS=e,vS}var bS,yD;function mhe(){if(yD)return bS;yD=1;var t=sw();function e(r){return t(this.__data__,r)>-1}return bS=e,bS}var wS,vD;function ghe(){if(vD)return wS;vD=1;var t=sw();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return wS=e,wS}var SS,bD;function ow(){if(bD)return SS;bD=1;var t=hhe(),e=fhe(),r=phe(),n=mhe(),a=ghe();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,SS=i,SS}var NS,wD;function HE(){if(wD)return NS;wD=1;var t=_0(),e=gl(),r=t(e,"Map");return NS=r,NS}var _S,SD;function xhe(){if(SD)return _S;SD=1;var t=dhe(),e=ow(),r=HE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return _S=n,_S}var TS,ND;function yhe(){if(ND)return TS;ND=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return TS=t,TS}var jS,_D;function lw(){if(_D)return jS;_D=1;var t=yhe();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return jS=e,jS}var AS,TD;function vhe(){if(TD)return AS;TD=1;var t=lw();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return AS=e,AS}var ES,jD;function bhe(){if(jD)return ES;jD=1;var t=lw();function e(r){return t(this,r).get(r)}return ES=e,ES}var kS,AD;function whe(){if(AD)return kS;AD=1;var t=lw();function e(r){return t(this,r).has(r)}return kS=e,kS}var CS,ED;function She(){if(ED)return CS;ED=1;var t=lw();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return CS=e,CS}var OS,kD;function GE(){if(kD)return OS;kD=1;var t=xhe(),e=vhe(),r=bhe(),n=whe(),a=She();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,OS=i,OS}var IS,CD;function uW(){if(CD)return IS;CD=1;var t=GE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,IS=r,IS}var RS,OD;function Nhe(){if(OD)return RS;OD=1;var t=uW(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return RS=r,RS}var MS,ID;function _he(){if(ID)return MS;ID=1;var t=Nhe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return MS=n,MS}var DS,RD;function WE(){if(RD)return DS;RD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return DS=t,DS}var PS,MD;function The(){if(MD)return PS;MD=1;var t=Cx(),e=WE(),r=ds(),n=Gf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return PS=o,PS}var LS,DD;function dW(){if(DD)return LS;DD=1;var t=The();function e(r){return r==null?"":t(r)}return LS=e,LS}var BS,PD;function hW(){if(PD)return BS;PD=1;var t=ds(),e=VE(),r=_he(),n=dW();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return BS=a,BS}var $S,LD;function cw(){if(LD)return $S;LD=1;var t=Gf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return $S=e,$S}var zS,BD;function KE(){if(BD)return zS;BD=1;var t=hW(),e=cw();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return zS=r,zS}var US,$D;function fW(){if($D)return US;$D=1;var t=KE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return US=e,US}var jhe=fW();const ao=sn(jhe);var VS,zD;function Ahe(){if(zD)return VS;zD=1;function t(e){return e==null}return VS=t,VS}var Ehe=Ahe();const xr=sn(Ehe);var FS,UD;function khe(){if(UD)return FS;UD=1;var t=Nc(),e=ds(),r=_c(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return FS=a,FS}var Che=khe();const u0=sn(Che);var Ohe=FE();const cr=sn(Ohe);var Ihe=Gu();const Wf=sn(Ihe);var qS={exports:{}},pn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VD;function Rhe(){if(VD)return pn;VD=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),S;S=Symbol.for("react.module.reference");function w(N){if(typeof N=="object"&&N!==null){var A=N.$$typeof;switch(A){case t:switch(N=N.type,N){case r:case a:case n:case h:case p:return N;default:switch(N=N&&N.$$typeof,N){case c:case o:case d:case x:case m:case i:return N;default:return A}}case e:return A}}}return pn.ContextConsumer=o,pn.ContextProvider=i,pn.Element=t,pn.ForwardRef=d,pn.Fragment=r,pn.Lazy=x,pn.Memo=m,pn.Portal=e,pn.Profiler=a,pn.StrictMode=n,pn.Suspense=h,pn.SuspenseList=p,pn.isAsyncMode=function(){return!1},pn.isConcurrentMode=function(){return!1},pn.isContextConsumer=function(N){return w(N)===o},pn.isContextProvider=function(N){return w(N)===i},pn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},pn.isForwardRef=function(N){return w(N)===d},pn.isFragment=function(N){return w(N)===r},pn.isLazy=function(N){return w(N)===x},pn.isMemo=function(N){return w(N)===m},pn.isPortal=function(N){return w(N)===e},pn.isProfiler=function(N){return w(N)===a},pn.isStrictMode=function(N){return w(N)===n},pn.isSuspense=function(N){return w(N)===h},pn.isSuspenseList=function(N){return w(N)===p},pn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===a||N===n||N===h||N===p||N===y||typeof N=="object"&&N!==null&&(N.$$typeof===x||N.$$typeof===m||N.$$typeof===i||N.$$typeof===o||N.$$typeof===d||N.$$typeof===S||N.getModuleId!==void 0)},pn.typeOf=w,pn}var FD;function Mhe(){return FD||(FD=1,qS.exports=Rhe()),qS.exports}var Dhe=Mhe(),HS,qD;function pW(){if(qD)return HS;qD=1;var t=Nc(),e=_c(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return HS=n,HS}var GS,HD;function Phe(){if(HD)return GS;HD=1;var t=pW();function e(r){return t(r)&&r!=+r}return GS=e,GS}var Lhe=Phe();const Ox=sn(Lhe);var Bhe=pW();const $he=sn(Bhe);var To=function(e){return e===0?0:e>0?1:-1},Pd=function(e){return u0(e)&&e.indexOf("%")===e.length-1},yt=function(e){return $he(e)&&!Ox(e)},zhe=function(e){return xr(e)},Ga=function(e){return yt(e)||u0(e)},Uhe=0,Ix=function(e){var r=++Uhe;return"".concat(e||"").concat(r)},jo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!yt(e)&&!u0(e))return n;var i;if(Pd(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return Ox(i)&&(i=n),a&&i>r&&(i=r),i},mu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Vhe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ts=function(e,r){return yt(e)&&yt(r)?function(n){return e+n*(r-e)}:function(){return r}};function cb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):ao(n,e))===r})}var Fhe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var x=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:x,b:(a-x*n)/r}},qhe=function(e,r){return yt(e)&&yt(r)?e-r:u0(e)&&u0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Dh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function hj(t){"@babel/helpers - typeof";return hj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hj(t)}var Hhe=["viewBox","children"],Ghe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GD=["points","pathLength"],WS={svg:Hhe,polygon:GD,polyline:GD},XE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ub=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),!Wf(n))return null;var a={};return Object.keys(n).forEach(function(i){XE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},Whe=function(e,r,n){return function(a){return e(r,n,a),null}},d0=function(e,r,n){if(!Wf(e)||hj(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];XE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Whe(o,r,n))}),a},Khe=["children"],Xhe=["children"];function WD(t,e){if(t==null)return{};var r=Qhe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var KD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},nc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},XD=null,KS=null,QE=function t(e){if(e===XD&&Array.isArray(KS))return KS;var r=[];return T.Children.forEach(e,function(n){xr(n)||(Dhe.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),KS=r,XD=e,r};function Ms(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return nc(a)}):n=[nc(e)],QE(t).forEach(function(a){var i=ao(a,"type.displayName")||ao(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function As(t,e){var r=Ms(t,e);return r&&r[0]}var QD=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!yt(n)||n<=0||!yt(a)||a<=0)},Yhe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Jhe=function(e){return e&&e.type&&u0(e.type)&&Yhe.indexOf(e.type)>=0},Zhe=function(e,r,n,a){var i,o=(i=WS==null?void 0:WS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!cr(e)&&(a&&o.includes(r)||Ghe.includes(r))||n&&XE.includes(r)},Wt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(T.isValidElement(e)&&(a=e.props),!Wf(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;Zhe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},fj=function t(e,r){if(e===r)return!0;var n=T.Children.count(e);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return YD(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!YD(i,o))return!1}return!0},YD=function(e,r){if(xr(e)&&xr(r))return!0;if(!xr(e)&&!xr(r)){var n=e.props||{},a=n.children,i=WD(n,Khe),o=r.props||{},c=o.children,d=WD(o,Xhe);return a&&c?Dh(i,d)&&fj(a,c):!a&&!c?Dh(i,d):!1}return!1},JD=function(e,r){var n=[],a={};return QE(e).forEach(function(i,o){if(Jhe(i))n.push(i);else if(i){var c=nc(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,o);n.push(m),a[c]=!0}}}),n},efe=function(e){var r=e&&e.type;return r&&KD[r]?KD[r]:null},tfe=function(e,r){return QE(r).indexOf(e)},rfe=["children","width","height","viewBox","className","style","title","desc"];function pj(){return pj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pj.apply(this,arguments)}function nfe(t,e){if(t==null)return{};var r=afe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function afe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function mj(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=nfe(t,rfe),p=a||{width:r,height:n,x:0,y:0},m=Sr("recharts-surface",i);return ie.createElement("svg",pj({},Wt(h,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),ie.createElement("title",null,c),ie.createElement("desc",null,d),e)}var ife=["children","className"];function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gj.apply(this,arguments)}function sfe(t,e){if(t==null)return{};var r=ofe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ofe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Jr=ie.forwardRef(function(t,e){var r=t.children,n=t.className,a=sfe(t,ife),i=Sr("recharts-layer",n);return ie.createElement("g",gj({className:i},Wt(a,!0),{ref:e}),r)}),ac=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},XS,ZD;function lfe(){if(ZD)return XS;ZD=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return XS=t,XS}var QS,eP;function cfe(){if(eP)return QS;eP=1;var t=lfe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return QS=e,QS}var YS,tP;function mW(){if(tP)return YS;tP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return YS=d,YS}var JS,rP;function ufe(){if(rP)return JS;rP=1;function t(e){return e.split("")}return JS=t,JS}var ZS,nP;function dfe(){if(nP)return ZS;nP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",S=h+"?",w="["+i+"]?",N="(?:"+y+"(?:"+[p,m,x].join("|")+")"+w+S+")*",A=w+S+N,R="(?:"+[p+c+"?",c,m,x,o].join("|")+")",O=RegExp(d+"(?="+d+")|"+R+A,"g");function L(I){return I.match(O)||[]}return ZS=L,ZS}var e6,aP;function hfe(){if(aP)return e6;aP=1;var t=ufe(),e=mW(),r=dfe();function n(a){return e(a)?r(a):t(a)}return e6=n,e6}var t6,iP;function ffe(){if(iP)return t6;iP=1;var t=cfe(),e=mW(),r=hfe(),n=dW();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return t6=a,t6}var r6,sP;function pfe(){if(sP)return r6;sP=1;var t=ffe(),e=t("toUpperCase");return r6=e,r6}var mfe=pfe();const uw=sn(mfe);function Vn(t){return function(){return t}}const gW=Math.cos,db=Math.sin,Po=Math.sqrt,hb=Math.PI,dw=2*hb,xj=Math.PI,yj=2*xj,Ed=1e-6,gfe=yj-Ed;function xW(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function xfe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xW;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class yfe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xW:xfe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,p=o-e,m=c-r,x=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(x>Ed)if(!(Math.abs(m*d-h*p)>Ed)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,S=a-c,w=d*d+h*h,N=y*y+S*S,A=Math.sqrt(w),R=Math.sqrt(x),O=i*Math.tan((xj-Math.acos((w+x-N)/(2*A*R)))/2),L=O/R,I=O/A;Math.abs(L-1)>Ed&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*y>p*S)},${this._x1=e+I*d},${this._y1=r+I*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^o,x=o?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Ed||Math.abs(this._y1-p)>Ed)&&this._append`L${h},${p}`,n&&(x<0&&(x=x%yj+yj),x>gfe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:x>Ed&&this._append`A${n},${n},0,${+(x>=xj)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function YE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new yfe(e)}function JE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yW(t){this._context=t}yW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function hw(t){return new yW(t)}function vW(t){return t[0]}function bW(t){return t[1]}function wW(t,e){var r=Vn(!0),n=null,a=hw,i=null,o=YE(c);t=typeof t=="function"?t:t===void 0?vW:Vn(t),e=typeof e=="function"?e:e===void 0?bW:Vn(e);function c(d){var h,p=(d=JE(d)).length,m,x=!1,y;for(n==null&&(i=a(y=o())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+t(m,h,d),+e(m,h,d));if(y)return i=null,y+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Vn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Vn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Vn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function By(t,e,r){var n=null,a=Vn(!0),i=null,o=hw,c=null,d=YE(h);t=typeof t=="function"?t:t===void 0?vW:Vn(+t),e=typeof e=="function"?e:Vn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?bW:Vn(+r);function h(m){var x,y,S,w=(m=JE(m)).length,N,A=!1,R,O=new Array(w),L=new Array(w);for(i==null&&(c=o(R=d())),x=0;x<=w;++x){if(!(x<w&&a(N=m[x],x,m))===A)if(A=!A)y=x,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),S=x-1;S>=y;--S)c.point(O[S],L[S]);c.lineEnd(),c.areaEnd()}A&&(O[x]=+t(N,x,m),L[x]=+e(N,x,m),c.point(n?+n(N,x,m):O[x],r?+r(N,x,m):L[x]))}if(R)return c=null,R+""||null}function p(){return wW().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Vn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Vn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Vn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Vn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Vn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Vn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Vn(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(c=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=c=null:c=o(i=m),h):i},h}class SW{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function vfe(t){return new SW(t,!0)}function bfe(t){return new SW(t,!1)}const ZE={draw(t,e){const r=Po(e/hb);t.moveTo(r,0),t.arc(0,0,r,0,dw)}},wfe={draw(t,e){const r=Po(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},NW=Po(1/3),Sfe=NW*2,Nfe={draw(t,e){const r=Po(e/Sfe),n=r*NW;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},_fe={draw(t,e){const r=Po(e),n=-r/2;t.rect(n,n,r,r)}},Tfe=.8908130915292852,_W=db(hb/10)/db(7*hb/10),jfe=db(dw/10)*_W,Afe=-gW(dw/10)*_W,Efe={draw(t,e){const r=Po(e*Tfe),n=jfe*r,a=Afe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=dw*i/5,c=gW(o),d=db(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},n6=Po(3),kfe={draw(t,e){const r=-Po(e/(n6*3));t.moveTo(0,r*2),t.lineTo(-n6*r,-r),t.lineTo(n6*r,-r),t.closePath()}},Xs=-.5,Qs=Po(3)/2,vj=1/Po(12),Cfe=(vj/2+1)*3,Ofe={draw(t,e){const r=Po(e/Cfe),n=r/2,a=r*vj,i=n,o=r*vj+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(Xs*n-Qs*a,Qs*n+Xs*a),t.lineTo(Xs*i-Qs*o,Qs*i+Xs*o),t.lineTo(Xs*c-Qs*d,Qs*c+Xs*d),t.lineTo(Xs*n+Qs*a,Xs*a-Qs*n),t.lineTo(Xs*i+Qs*o,Xs*o-Qs*i),t.lineTo(Xs*c+Qs*d,Xs*d-Qs*c),t.closePath()}};function Ife(t,e){let r=null,n=YE(a);t=typeof t=="function"?t:Vn(t||ZE),e=typeof e=="function"?e:Vn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Vn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Vn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function fb(){}function pb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function TW(t){this._context=t}TW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rfe(t){return new TW(t)}function jW(t){this._context=t}jW.prototype={areaStart:fb,areaEnd:fb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Mfe(t){return new jW(t)}function AW(t){this._context=t}AW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dfe(t){return new AW(t)}function EW(t){this._context=t}EW.prototype={areaStart:fb,areaEnd:fb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Pfe(t){return new EW(t)}function oP(t){return t<0?-1:1}function lP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(oP(i)+oP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function cP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function a6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function mb(t){this._context=t}mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a6(this,this._t0,cP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,a6(this,cP(this,r=lP(this,t,e)),r);break;default:a6(this,this._t0,r=lP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function kW(t){this._context=new CW(t)}(kW.prototype=Object.create(mb.prototype)).point=function(t,e){mb.prototype.point.call(this,e,t)};function CW(t){this._context=t}CW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function Lfe(t){return new mb(t)}function Bfe(t){return new kW(t)}function OW(t){this._context=t}OW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=uP(t),a=uP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function uP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function $fe(t){return new OW(t)}function fw(t,e){this._context=t,this._t=e}fw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function zfe(t){return new fw(t,.5)}function Ufe(t){return new fw(t,0)}function Vfe(t){return new fw(t,1)}function sf(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function bj(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ffe(t,e){return t[e]}function qfe(t){const e=[];return e.key=t,e}function Hfe(){var t=Vn([]),e=bj,r=sf,n=Ffe;function a(i){var o=Array.from(t.apply(this,arguments),qfe),c,d=o.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(m,o[c].key,h,i)]).data=m;for(c=0,p=JE(e(o));c<d;++c)o[p[c]].index=c;return r(o,p),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Vn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Vn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?bj:typeof i=="function"?i:Vn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??sf,a):r},a}function Gfe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}sf(t,e)}}function Wfe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}sf(t,e)}}function Kfe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var p=t[e[c]],m=p[n][1]||0,x=p[n-1][1]||0,y=(m-x)/2,S=0;S<c;++S){var w=t[e[S]],N=w[n][1]||0,A=w[n-1][1]||0;y+=N-A}d+=m,h+=y*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,sf(t,e)}}function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}var Xfe=["type","size","sizeType"];function wj(){return wj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wj.apply(this,arguments)}function dP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(r),!0).forEach(function(n){Qfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qfe(t,e,r){return e=Yfe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yfe(t){var e=Jfe(t,"string");return xg(e)=="symbol"?e:e+""}function Jfe(t,e){if(xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zfe(t,e){if(t==null)return{};var r=epe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function epe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var IW={symbolCircle:ZE,symbolCross:wfe,symbolDiamond:Nfe,symbolSquare:_fe,symbolStar:Efe,symbolTriangle:kfe,symbolWye:Ofe},tpe=Math.PI/180,rpe=function(e){var r="symbol".concat(uw(e));return IW[r]||ZE},npe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*tpe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ape=function(e,r){IW["symbol".concat(uw(e))]=r},pw=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=Zfe(e,Xfe),h=hP(hP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var N=rpe(n),A=Ife().type(N).size(npe(i,c,n));return A()},m=h.className,x=h.cx,y=h.cy,S=Wt(h,!0);return x===+x&&y===+y&&i===+i?ie.createElement("path",wj({},S,{className:Sr("recharts-symbols",m),transform:"translate(".concat(x,", ").concat(y,")"),d:p()})):null};pw.registerSymbol=ape;function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function Sj(){return Sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sj.apply(this,arguments)}function fP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ipe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(r),!0).forEach(function(n){yg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function spe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ope(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MW(n.key),n)}}function lpe(t,e,r){return e&&ope(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cpe(t,e,r){return e=gb(e),upe(t,RW()?Reflect.construct(e,r||[],gb(t).constructor):e.apply(t,r))}function upe(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dpe(t)}function dpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gb(t)}function hpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nj(t,e)}function Nj(t,e){return Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Nj(t,e)}function yg(t,e,r){return e=MW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MW(t){var e=fpe(t,"string");return of(e)=="symbol"?e:e+""}function fpe(t,e){if(of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ys=32,e7=(function(t){function e(){return spe(this,e),cpe(this,e,arguments)}return hpe(e,t),lpe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ys/2,o=Ys/6,c=Ys/3,d=n.inactive?a:n.color;if(n.type==="plainline")return ie.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ys,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ie.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Ys,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ie.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Ys/8,"h").concat(Ys,"v").concat(Ys*3/4,"h").concat(-Ys,"z"),className:"recharts-legend-icon"});if(ie.isValidElement(n.legendIcon)){var h=ipe({},n);return delete h.legendIcon,ie.cloneElement(n.legendIcon,h)}return ie.createElement(pw,{fill:d,cx:i,cy:i,size:Ys,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Ys,height:Ys},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},x={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(y,S){var w=y.formatter||d,N=Sr(yg(yg({"recharts-legend-item":!0},"legend-item-".concat(S),!0),"inactive",y.inactive));if(y.type==="none")return null;var A=cr(y.value)?null:y.value;ac(!cr(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var R=y.inactive?h:y.color;return ie.createElement("li",Sj({className:N,style:m,key:"legend-item-".concat(S)},d0(n.props,y,S)),ie.createElement(mj,{width:o,height:o,viewBox:p,style:x},n.renderIcon(y)),ie.createElement("span",{className:"recharts-legend-item-text",style:{color:R}},w?w(A,y,S):A))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ie.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(T.PureComponent);yg(e7,"displayName","Legend");yg(e7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var i6,pP;function ppe(){if(pP)return i6;pP=1;var t=ow();function e(){this.__data__=new t,this.size=0}return i6=e,i6}var s6,mP;function mpe(){if(mP)return s6;mP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return s6=t,s6}var o6,gP;function gpe(){if(gP)return o6;gP=1;function t(e){return this.__data__.get(e)}return o6=t,o6}var l6,xP;function xpe(){if(xP)return l6;xP=1;function t(e){return this.__data__.has(e)}return l6=t,l6}var c6,yP;function ype(){if(yP)return c6;yP=1;var t=ow(),e=HE(),r=GE(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return c6=a,c6}var u6,vP;function DW(){if(vP)return u6;vP=1;var t=ow(),e=ppe(),r=mpe(),n=gpe(),a=xpe(),i=ype();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,u6=o,u6}var d6,bP;function vpe(){if(bP)return d6;bP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return d6=e,d6}var h6,wP;function bpe(){if(wP)return h6;wP=1;function t(e){return this.__data__.has(e)}return h6=t,h6}var f6,SP;function PW(){if(SP)return f6;SP=1;var t=GE(),e=vpe(),r=bpe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,f6=n,f6}var p6,NP;function LW(){if(NP)return p6;NP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return p6=t,p6}var m6,_P;function BW(){if(_P)return m6;_P=1;function t(e,r){return e.has(r)}return m6=t,m6}var g6,TP;function $W(){if(TP)return g6;TP=1;var t=PW(),e=LW(),r=BW(),n=1,a=2;function i(o,c,d,h,p,m){var x=d&n,y=o.length,S=c.length;if(y!=S&&!(x&&S>y))return!1;var w=m.get(o),N=m.get(c);if(w&&N)return w==c&&N==o;var A=-1,R=!0,O=d&a?new t:void 0;for(m.set(o,c),m.set(c,o);++A<y;){var L=o[A],I=c[A];if(h)var k=x?h(I,L,A,c,o,m):h(L,I,A,o,c,m);if(k!==void 0){if(k)continue;R=!1;break}if(O){if(!e(c,function(E,j){if(!r(O,j)&&(L===E||p(L,E,d,h,m)))return O.push(j)})){R=!1;break}}else if(!(L===I||p(L,I,d,h,m))){R=!1;break}}return m.delete(o),m.delete(c),R}return g6=i,g6}var x6,jP;function wpe(){if(jP)return x6;jP=1;var t=gl(),e=t.Uint8Array;return x6=e,x6}var y6,AP;function Spe(){if(AP)return y6;AP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return y6=t,y6}var v6,EP;function t7(){if(EP)return v6;EP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return v6=t,v6}var b6,kP;function Npe(){if(kP)return b6;kP=1;var t=Cx(),e=wpe(),r=qE(),n=$W(),a=Spe(),i=t7(),o=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",x="[object Number]",y="[object RegExp]",S="[object Set]",w="[object String]",N="[object Symbol]",A="[object ArrayBuffer]",R="[object DataView]",O=t?t.prototype:void 0,L=O?O.valueOf:void 0;function I(k,E,j,C,q,D,$){switch(j){case R:if(k.byteLength!=E.byteLength||k.byteOffset!=E.byteOffset)return!1;k=k.buffer,E=E.buffer;case A:return!(k.byteLength!=E.byteLength||!D(new e(k),new e(E)));case d:case h:case x:return r(+k,+E);case p:return k.name==E.name&&k.message==E.message;case y:case w:return k==E+"";case m:var B=a;case S:var V=C&o;if(B||(B=i),k.size!=E.size&&!V)return!1;var W=$.get(k);if(W)return W==E;C|=c,$.set(k,E);var G=n(B(k),B(E),C,q,D,$);return $.delete(k),G;case N:if(L)return L.call(k)==L.call(E)}return!1}return b6=I,b6}var w6,CP;function zW(){if(CP)return w6;CP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return w6=t,w6}var S6,OP;function _pe(){if(OP)return S6;OP=1;var t=zW(),e=ds();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return S6=r,S6}var N6,IP;function Tpe(){if(IP)return N6;IP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return N6=t,N6}var _6,RP;function jpe(){if(RP)return _6;RP=1;function t(){return[]}return _6=t,_6}var T6,MP;function Ape(){if(MP)return T6;MP=1;var t=Tpe(),e=jpe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return T6=i,T6}var j6,DP;function Epe(){if(DP)return j6;DP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return j6=t,j6}var A6,PP;function kpe(){if(PP)return A6;PP=1;var t=Nc(),e=_c(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return A6=n,A6}var E6,LP;function r7(){if(LP)return E6;LP=1;var t=kpe(),e=_c(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return E6=i,E6}var vm={exports:{}},k6,BP;function Cpe(){if(BP)return k6;BP=1;function t(){return!1}return k6=t,k6}vm.exports;var $P;function UW(){return $P||($P=1,(function(t,e){var r=gl(),n=Cpe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(vm,vm.exports)),vm.exports}var C6,zP;function n7(){if(zP)return C6;zP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return C6=r,C6}var O6,UP;function a7(){if(UP)return O6;UP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return O6=e,O6}var I6,VP;function Ope(){if(VP)return I6;VP=1;var t=Nc(),e=a7(),r=_c(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",x="[object RegExp]",y="[object Set]",S="[object String]",w="[object WeakMap]",N="[object ArrayBuffer]",A="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",I="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",q="[object Uint32Array]",D={};D[R]=D[O]=D[L]=D[I]=D[k]=D[E]=D[j]=D[C]=D[q]=!0,D[n]=D[a]=D[N]=D[i]=D[A]=D[o]=D[c]=D[d]=D[h]=D[p]=D[m]=D[x]=D[y]=D[S]=D[w]=!1;function $(B){return r(B)&&e(B.length)&&!!D[t(B)]}return I6=$,I6}var R6,FP;function VW(){if(FP)return R6;FP=1;function t(e){return function(r){return e(r)}}return R6=t,R6}var bm={exports:{}};bm.exports;var qP;function Ipe(){return qP||(qP=1,(function(t,e){var r=lW(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(bm,bm.exports)),bm.exports}var M6,HP;function FW(){if(HP)return M6;HP=1;var t=Ope(),e=VW(),r=Ipe(),n=r&&r.isTypedArray,a=n?e(n):t;return M6=a,M6}var D6,GP;function Rpe(){if(GP)return D6;GP=1;var t=Epe(),e=r7(),r=ds(),n=UW(),a=n7(),i=FW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,p){var m=r(h),x=!m&&e(h),y=!m&&!x&&n(h),S=!m&&!x&&!y&&i(h),w=m||x||y||S,N=w?t(h.length,String):[],A=N.length;for(var R in h)(p||c.call(h,R))&&!(w&&(R=="length"||y&&(R=="offset"||R=="parent")||S&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||a(R,A)))&&N.push(R);return N}return D6=d,D6}var P6,WP;function Mpe(){if(WP)return P6;WP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return P6=e,P6}var L6,KP;function qW(){if(KP)return L6;KP=1;function t(e,r){return function(n){return e(r(n))}}return L6=t,L6}var B6,XP;function Dpe(){if(XP)return B6;XP=1;var t=qW(),e=t(Object.keys,Object);return B6=e,B6}var $6,QP;function Ppe(){if(QP)return $6;QP=1;var t=Mpe(),e=Dpe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return $6=a,$6}var z6,YP;function Rx(){if(YP)return z6;YP=1;var t=FE(),e=a7();function r(n){return n!=null&&e(n.length)&&!t(n)}return z6=r,z6}var U6,JP;function mw(){if(JP)return U6;JP=1;var t=Rpe(),e=Ppe(),r=Rx();function n(a){return r(a)?t(a):e(a)}return U6=n,U6}var V6,ZP;function Lpe(){if(ZP)return V6;ZP=1;var t=_pe(),e=Ape(),r=mw();function n(a){return t(a,r,e)}return V6=n,V6}var F6,eL;function Bpe(){if(eL)return F6;eL=1;var t=Lpe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,p){var m=c&e,x=t(i),y=x.length,S=t(o),w=S.length;if(y!=w&&!m)return!1;for(var N=y;N--;){var A=x[N];if(!(m?A in o:n.call(o,A)))return!1}var R=p.get(i),O=p.get(o);if(R&&O)return R==o&&O==i;var L=!0;p.set(i,o),p.set(o,i);for(var I=m;++N<y;){A=x[N];var k=i[A],E=o[A];if(d)var j=m?d(E,k,A,o,i,p):d(k,E,A,i,o,p);if(!(j===void 0?k===E||h(k,E,c,d,p):j)){L=!1;break}I||(I=A=="constructor")}if(L&&!I){var C=i.constructor,q=o.constructor;C!=q&&"constructor"in i&&"constructor"in o&&!(typeof C=="function"&&C instanceof C&&typeof q=="function"&&q instanceof q)&&(L=!1)}return p.delete(i),p.delete(o),L}return F6=a,F6}var q6,tL;function $pe(){if(tL)return q6;tL=1;var t=_0(),e=gl(),r=t(e,"DataView");return q6=r,q6}var H6,rL;function zpe(){if(rL)return H6;rL=1;var t=_0(),e=gl(),r=t(e,"Promise");return H6=r,H6}var G6,nL;function HW(){if(nL)return G6;nL=1;var t=_0(),e=gl(),r=t(e,"Set");return G6=r,G6}var W6,aL;function Upe(){if(aL)return W6;aL=1;var t=_0(),e=gl(),r=t(e,"WeakMap");return W6=r,W6}var K6,iL;function Vpe(){if(iL)return K6;iL=1;var t=$pe(),e=HE(),r=zpe(),n=HW(),a=Upe(),i=Nc(),o=cW(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",x="[object DataView]",y=o(t),S=o(e),w=o(r),N=o(n),A=o(a),R=i;return(t&&R(new t(new ArrayBuffer(1)))!=x||e&&R(new e)!=c||r&&R(r.resolve())!=h||n&&R(new n)!=p||a&&R(new a)!=m)&&(R=function(O){var L=i(O),I=L==d?O.constructor:void 0,k=I?o(I):"";if(k)switch(k){case y:return x;case S:return c;case w:return h;case N:return p;case A:return m}return L}),K6=R,K6}var X6,sL;function Fpe(){if(sL)return X6;sL=1;var t=DW(),e=$W(),r=Npe(),n=Bpe(),a=Vpe(),i=ds(),o=UW(),c=FW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",x=Object.prototype,y=x.hasOwnProperty;function S(w,N,A,R,O,L){var I=i(w),k=i(N),E=I?p:a(w),j=k?p:a(N);E=E==h?m:E,j=j==h?m:j;var C=E==m,q=j==m,D=E==j;if(D&&o(w)){if(!o(N))return!1;I=!0,C=!1}if(D&&!C)return L||(L=new t),I||c(w)?e(w,N,A,R,O,L):r(w,N,E,A,R,O,L);if(!(A&d)){var $=C&&y.call(w,"__wrapped__"),B=q&&y.call(N,"__wrapped__");if($||B){var V=$?w.value():w,W=B?N.value():N;return L||(L=new t),O(V,W,A,R,L)}}return D?(L||(L=new t),n(w,N,A,R,O,L)):!1}return X6=S,X6}var Q6,oL;function i7(){if(oL)return Q6;oL=1;var t=Fpe(),e=_c();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return Q6=r,Q6}var Y6,lL;function qpe(){if(lL)return Y6;lL=1;var t=DW(),e=i7(),r=1,n=2;function a(i,o,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var x=c[h];if(m&&x[2]?x[1]!==i[x[0]]:!(x[0]in i))return!1}for(;++h<p;){x=c[h];var y=x[0],S=i[y],w=x[1];if(m&&x[2]){if(S===void 0&&!(y in i))return!1}else{var N=new t;if(d)var A=d(S,w,y,i,o,N);if(!(A===void 0?e(w,S,r|n,d,N):A))return!1}}return!0}return Y6=a,Y6}var J6,cL;function GW(){if(cL)return J6;cL=1;var t=Gu();function e(r){return r===r&&!t(r)}return J6=e,J6}var Z6,uL;function Hpe(){if(uL)return Z6;uL=1;var t=GW(),e=mw();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return Z6=r,Z6}var eN,dL;function WW(){if(dL)return eN;dL=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return eN=t,eN}var tN,hL;function Gpe(){if(hL)return tN;hL=1;var t=qpe(),e=Hpe(),r=WW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return tN=n,tN}var rN,fL;function Wpe(){if(fL)return rN;fL=1;function t(e,r){return e!=null&&r in Object(e)}return rN=t,rN}var nN,pL;function Kpe(){if(pL)return nN;pL=1;var t=hW(),e=r7(),r=ds(),n=n7(),a=a7(),i=cw();function o(c,d,h){d=t(d,c);for(var p=-1,m=d.length,x=!1;++p<m;){var y=i(d[p]);if(!(x=c!=null&&h(c,y)))break;c=c[y]}return x||++p!=m?x:(m=c==null?0:c.length,!!m&&a(m)&&n(y,m)&&(r(c)||e(c)))}return nN=o,nN}var aN,mL;function Xpe(){if(mL)return aN;mL=1;var t=Wpe(),e=Kpe();function r(n,a){return n!=null&&e(n,a,t)}return aN=r,aN}var iN,gL;function Qpe(){if(gL)return iN;gL=1;var t=i7(),e=fW(),r=Xpe(),n=VE(),a=GW(),i=WW(),o=cw(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(o(p),m):function(x){var y=e(x,p);return y===void 0&&y===m?r(x,p):t(m,y,c|d)}}return iN=h,iN}var sN,xL;function Kf(){if(xL)return sN;xL=1;function t(e){return e}return sN=t,sN}var oN,yL;function Ype(){if(yL)return oN;yL=1;function t(e){return function(r){return r==null?void 0:r[e]}}return oN=t,oN}var lN,vL;function Jpe(){if(vL)return lN;vL=1;var t=KE();function e(r){return function(n){return t(n,r)}}return lN=e,lN}var cN,bL;function Zpe(){if(bL)return cN;bL=1;var t=Ype(),e=Jpe(),r=VE(),n=cw();function a(i){return r(i)?t(n(i)):e(i)}return cN=a,cN}var uN,wL;function xl(){if(wL)return uN;wL=1;var t=Gpe(),e=Qpe(),r=Kf(),n=ds(),a=Zpe();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return uN=i,uN}var dN,SL;function KW(){if(SL)return dN;SL=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return dN=t,dN}var hN,NL;function eme(){if(NL)return hN;NL=1;function t(e){return e!==e}return hN=t,hN}var fN,_L;function tme(){if(_L)return fN;_L=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return fN=t,fN}var pN,TL;function rme(){if(TL)return pN;TL=1;var t=KW(),e=eme(),r=tme();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return pN=n,pN}var mN,jL;function nme(){if(jL)return mN;jL=1;var t=rme();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return mN=e,mN}var gN,AL;function ame(){if(AL)return gN;AL=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return gN=t,gN}var xN,EL;function ime(){if(EL)return xN;EL=1;function t(){}return xN=t,xN}var yN,kL;function sme(){if(kL)return yN;kL=1;var t=HW(),e=ime(),r=t7(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return yN=a,yN}var vN,CL;function ome(){if(CL)return vN;CL=1;var t=PW(),e=nme(),r=ame(),n=BW(),a=sme(),i=t7(),o=200;function c(d,h,p){var m=-1,x=e,y=d.length,S=!0,w=[],N=w;if(p)S=!1,x=r;else if(y>=o){var A=h?null:a(d);if(A)return i(A);S=!1,x=n,N=new t}else N=h?[]:w;e:for(;++m<y;){var R=d[m],O=h?h(R):R;if(R=p||R!==0?R:0,S&&O===O){for(var L=N.length;L--;)if(N[L]===O)continue e;h&&N.push(O),w.push(R)}else x(N,O,p)||(N!==w&&N.push(O),w.push(R))}return w}return vN=c,vN}var bN,OL;function lme(){if(OL)return bN;OL=1;var t=xl(),e=ome();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return bN=r,bN}var cme=lme();const IL=sn(cme);function XW(t,e,r){return e===!0?IL(t,r):cr(e)?IL(t,e):t}function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}var ume=["ref"];function RL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(r),!0).forEach(function(n){gw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ML(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YW(n.key),n)}}function hme(t,e,r){return e&&ML(t.prototype,e),r&&ML(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fme(t,e,r){return e=xb(e),pme(t,QW()?Reflect.construct(e,r||[],xb(t).constructor):e.apply(t,r))}function pme(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mme(t)}function mme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QW=function(){return!!t})()}function xb(t){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xb(t)}function gme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_j(t,e)}function _j(t,e){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_j(t,e)}function gw(t,e,r){return e=YW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YW(t){var e=xme(t,"string");return lf(e)=="symbol"?e:e+""}function xme(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function yme(t,e){if(t==null)return{};var r=vme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bme(t){return t.value}function wme(t,e){if(ie.isValidElement(t))return ie.cloneElement(t,e);if(typeof t=="function")return ie.createElement(t,e);e.ref;var r=yme(e,ume);return ie.createElement(e7,r)}var DL=1,Ph=(function(t){function e(){var r;dme(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=fme(this,e,[].concat(a)),gw(r,"lastBoundingBox",{width:-1,height:-1}),r}return gme(e,t),hme(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>DL||Math.abs(a.height-this.lastBoundingBox.height)>DL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,x;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var y=this.getBBoxSnapshot();m={left:((h||0)-y.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var S=this.getBBoxSnapshot();x={top:((p||0)-S.height)/2}}else x=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return zl(zl({},m),x)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=zl(zl({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return ie.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(y){n.wrapperNode=y}},wme(i,zl(zl({},this.props),{},{payload:XW(p,h,bme)})))}}],[{key:"getWithHeight",value:function(n,a){var i=zl(zl({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&yt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(T.PureComponent);gw(Ph,"displayName","Legend");gw(Ph,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var wN,PL;function Sme(){if(PL)return wN;PL=1;var t=Cx(),e=r7(),r=ds(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return wN=a,wN}var SN,LL;function JW(){if(LL)return SN;LL=1;var t=zW(),e=Sme();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,o,c):t(c,p):o||(c[c.length]=p)}return c}return SN=r,SN}var NN,BL;function Nme(){if(BL)return NN;BL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return NN=t,NN}var _N,$L;function _me(){if($L)return _N;$L=1;var t=Nme(),e=t();return _N=e,_N}var TN,zL;function ZW(){if(zL)return TN;zL=1;var t=_me(),e=mw();function r(n,a){return n&&t(n,a,e)}return TN=r,TN}var jN,UL;function Tme(){if(UL)return jN;UL=1;var t=Rx();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return jN=e,jN}var AN,VL;function s7(){if(VL)return AN;VL=1;var t=ZW(),e=Tme(),r=e(t);return AN=r,AN}var EN,FL;function eK(){if(FL)return EN;FL=1;var t=s7(),e=Rx();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return EN=r,EN}var kN,qL;function jme(){if(qL)return kN;qL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return kN=t,kN}var CN,HL;function Ame(){if(HL)return CN;HL=1;var t=Gf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!o)return 1;if(!i&&!c&&!m&&r<n||m&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!p)return-1}return 0}return CN=e,CN}var ON,GL;function Eme(){if(GL)return ON;GL=1;var t=Ame();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var p=t(o[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return ON=e,ON}var IN,WL;function kme(){if(WL)return IN;WL=1;var t=WE(),e=KE(),r=xl(),n=eK(),a=jme(),i=VW(),o=Eme(),c=Kf(),d=ds();function h(p,m,x){m.length?m=t(m,function(w){return d(w)?function(N){return e(N,w.length===1?w[0]:w)}:w}):m=[c];var y=-1;m=t(m,i(r));var S=n(p,function(w,N,A){var R=t(m,function(O){return O(w)});return{criteria:R,index:++y,value:w}});return a(S,function(w,N){return o(w,N,x)})}return IN=h,IN}var RN,KL;function Cme(){if(KL)return RN;KL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return RN=t,RN}var MN,XL;function Ome(){if(XL)return MN;XL=1;var t=Cme(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=o[c];return p[a]=i(h),t(n,this,p)}}return MN=r,MN}var DN,QL;function Ime(){if(QL)return DN;QL=1;function t(e){return function(){return e}}return DN=t,DN}var PN,YL;function tK(){if(YL)return PN;YL=1;var t=_0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return PN=e,PN}var LN,JL;function Rme(){if(JL)return LN;JL=1;var t=Ime(),e=tK(),r=Kf(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return LN=n,LN}var BN,ZL;function Mme(){if(ZL)return BN;ZL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return BN=n,BN}var $N,eB;function Dme(){if(eB)return $N;eB=1;var t=Rme(),e=Mme(),r=e(t);return $N=r,$N}var zN,tB;function Pme(){if(tB)return zN;tB=1;var t=Kf(),e=Ome(),r=Dme();function n(a,i){return r(e(a,i,t),a+"")}return zN=n,zN}var UN,rB;function xw(){if(rB)return UN;rB=1;var t=qE(),e=Rx(),r=n7(),n=Gu();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return UN=a,UN}var VN,nB;function Lme(){if(nB)return VN;nB=1;var t=JW(),e=kme(),r=Pme(),n=xw(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return VN=a,VN}var Bme=Lme();const o7=sn(Bme);function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tj.apply(this,arguments)}function $me(t,e){return Fme(t)||Vme(t,e)||Ume(t,e)||zme()}function zme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ume(t,e){if(t){if(typeof t=="string")return aB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aB(t,e)}}function aB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Fme(t){if(Array.isArray(t))return t}function iB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iB(Object(r),!0).forEach(function(n){qme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qme(t,e,r){return e=Hme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hme(t){var e=Gme(t,"string");return vg(e)=="symbol"?e:e+""}function Gme(t,e){if(vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wme(t){return Array.isArray(t)&&Ga(t[0])&&Ga(t[1])?t.join(" ~ "):t}var Kme=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,x=e.itemSorter,y=e.wrapperClassName,S=e.labelClassName,w=e.label,N=e.labelFormatter,A=e.accessibilityLayer,R=A===void 0?!1:A,O=function(){if(p&&p.length){var $={padding:0,margin:0},B=(x?o7(p,x):p).map(function(V,W){if(V.type==="none")return null;var G=FN({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},c),Y=V.formatter||m||Wme,re=V.value,ce=V.name,de=re,X=ce;if(Y&&de!=null&&X!=null){var ae=Y(re,ce,V,W,p);if(Array.isArray(ae)){var ne=$me(ae,2);de=ne[0],X=ne[1]}else de=ae}return ie.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:G},Ga(X)?ie.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Ga(X)?ie.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ie.createElement("span",{className:"recharts-tooltip-item-value"},de),ie.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return ie.createElement("ul",{className:"recharts-tooltip-item-list",style:$},B)}return null},L=FN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),I=FN({margin:0},h),k=!xr(w),E=k?w:"",j=Sr("recharts-default-tooltip",y),C=Sr("recharts-tooltip-label",S);k&&N&&p!==void 0&&p!==null&&(E=N(w,p));var q=R?{role:"status","aria-live":"assertive"}:{};return ie.createElement("div",Tj({className:j,style:L},q),ie.createElement("p",{className:C,style:I},ie.isValidElement(E)?E:"".concat(E)),O())};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function $y(t,e,r){return e=Xme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xme(t){var e=Qme(t,"string");return bg(e)=="symbol"?e:e+""}function Qme(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rm="recharts-tooltip-wrapper",Yme={visibility:"hidden"};function Jme(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Sr(rm,$y($y($y($y({},"".concat(rm,"-right"),yt(r)&&e&&yt(e.x)&&r>=e.x),"".concat(rm,"-left"),yt(r)&&e&&yt(e.x)&&r<e.x),"".concat(rm,"-bottom"),yt(n)&&e&&yt(e.y)&&n>=e.y),"".concat(rm,"-top"),yt(n)&&e&&yt(e.y)&&n<e.y))}function sB(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&yt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return o[n]?p:m;if(o[n]){var x=p,y=d[n];return x<y?Math.max(m,d[n]):Math.max(p,d[n])}var S=m+c,w=d[n]+h;return S>w?Math.max(p,d[n]):Math.max(m,d[n])}function Zme(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function ege(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return o.height>0&&o.width>0&&r?(p=sB({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=sB({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=Zme({translateX:p,translateY:m,useTranslate3d:c})):h=Yme,{cssProperties:h,cssClasses:Jme({translateX:p,translateY:m,coordinate:r})}}function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function oB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oB(Object(r),!0).forEach(function(n){Aj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nK(n.key),n)}}function nge(t,e,r){return e&&rge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function age(t,e,r){return e=yb(e),ige(t,rK()?Reflect.construct(e,r||[],yb(t).constructor):e.apply(t,r))}function ige(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(t)}function sge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rK=function(){return!!t})()}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yb(t)}function oge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jj(t,e)}function jj(t,e){return jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jj(t,e)}function Aj(t,e,r){return e=nK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nK(t){var e=lge(t,"string");return cf(e)=="symbol"?e:e+""}function lge(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cB=1,cge=(function(t){function e(){var r;tge(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=age(this,e,[].concat(a)),Aj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Aj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return oge(e,t),nge(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>cB||Math.abs(n.height-this.state.lastBoundingBox.height)>cB)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,x=a.isAnimationActive,y=a.offset,S=a.position,w=a.reverseDirection,N=a.useTranslate3d,A=a.viewBox,R=a.wrapperStyle,O=ege({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:y,position:S,reverseDirection:w,tooltipBox:this.state.lastBoundingBox,useTranslate3d:N,viewBox:A}),L=O.cssClasses,I=O.cssProperties,k=lB(lB({transition:x&&i?"transform ".concat(c,"ms ").concat(d):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},R);return ie.createElement("div",{tabIndex:-1,className:L,style:k,ref:function(j){n.wrapperNode=j}},h)}}])})(T.PureComponent),uge=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},T0={isSsr:uge()};function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function uB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(r),!0).forEach(function(n){l7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iK(n.key),n)}}function fge(t,e,r){return e&&hge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pge(t,e,r){return e=vb(e),mge(t,aK()?Reflect.construct(e,r||[],vb(t).constructor):e.apply(t,r))}function mge(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gge(t)}function gge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!t})()}function vb(t){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vb(t)}function xge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ej(t,e)}function Ej(t,e){return Ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ej(t,e)}function l7(t,e,r){return e=iK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iK(t){var e=yge(t,"string");return uf(e)=="symbol"?e:e+""}function yge(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vge(t){return t.dataKey}function bge(t,e){return ie.isValidElement(t)?ie.cloneElement(t,e):typeof t=="function"?ie.createElement(t,e):ie.createElement(Kme,e)}var Wo=(function(t){function e(){return dge(this,e),pge(this,e,arguments)}return xge(e,t),fge(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,x=a.isAnimationActive,y=a.offset,S=a.payload,w=a.payloadUniqBy,N=a.position,A=a.reverseDirection,R=a.useTranslate3d,O=a.viewBox,L=a.wrapperStyle,I=S??[];m&&I.length&&(I=XW(S.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),w,vge));var k=I.length>0;return ie.createElement(cge,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:x,active:i,coordinate:p,hasPayload:k,offset:y,position:N,reverseDirection:A,useTranslate3d:R,viewBox:O,wrapperStyle:L},bge(h,dB(dB({},this.props),{},{payload:I})))}}])})(T.PureComponent);l7(Wo,"displayName","Tooltip");l7(Wo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!T0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var qN,hB;function wge(){if(hB)return qN;hB=1;var t=gl(),e=function(){return t.Date.now()};return qN=e,qN}var HN,fB;function Sge(){if(fB)return HN;fB=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return HN=e,HN}var GN,pB;function Nge(){if(pB)return GN;pB=1;var t=Sge(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return GN=r,GN}var WN,mB;function sK(){if(mB)return WN;mB=1;var t=Nge(),e=Gu(),r=Gf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return WN=d,WN}var KN,gB;function _ge(){if(gB)return KN;gB=1;var t=Gu(),e=wge(),r=sK(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var p,m,x,y,S,w,N=0,A=!1,R=!1,O=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(A=!!h.leading,R="maxWait"in h,x=R?a(r(h.maxWait)||0,d):x,O="trailing"in h?!!h.trailing:O);function L(B){var V=p,W=m;return p=m=void 0,N=B,y=c.apply(W,V),y}function I(B){return N=B,S=setTimeout(j,d),A?L(B):y}function k(B){var V=B-w,W=B-N,G=d-V;return R?i(G,x-W):G}function E(B){var V=B-w,W=B-N;return w===void 0||V>=d||V<0||R&&W>=x}function j(){var B=e();if(E(B))return C(B);S=setTimeout(j,k(B))}function C(B){return S=void 0,O&&p?L(B):(p=m=void 0,y)}function q(){S!==void 0&&clearTimeout(S),N=0,p=w=m=S=void 0}function D(){return S===void 0?y:C(e())}function $(){var B=e(),V=E(B);if(p=arguments,m=this,w=B,V){if(S===void 0)return I(w);if(R)return clearTimeout(S),S=setTimeout(j,d),L(w)}return S===void 0&&(S=setTimeout(j,d)),y}return $.cancel=q,$.flush=D,$}return KN=o,KN}var XN,xB;function Tge(){if(xB)return XN;xB=1;var t=_ge(),e=Gu(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return XN=n,XN}var jge=Tge();const oK=sn(jge);function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function yB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(r),!0).forEach(function(n){Age(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Age(t,e,r){return e=Ege(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ege(t){var e=kge(t,"string");return wg(e)=="symbol"?e:e+""}function kge(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cge(t,e){return Mge(t)||Rge(t,e)||Ige(t,e)||Oge()}function Oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ige(t,e){if(t){if(typeof t=="string")return vB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vB(t,e)}}function vB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Mge(t){if(Array.isArray(t))return t}var lK=T.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,x=t.maxHeight,y=t.children,S=t.debounce,w=S===void 0?0:S,N=t.id,A=t.className,R=t.onResize,O=t.style,L=O===void 0?{}:O,I=T.useRef(null),k=T.useRef();k.current=R,T.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var E=T.useState({containerWidth:a.width,containerHeight:a.height}),j=Cge(E,2),C=j[0],q=j[1],D=T.useCallback(function(B,V){q(function(W){var G=Math.round(B),Y=Math.round(V);return W.containerWidth===G&&W.containerHeight===Y?W:{containerWidth:G,containerHeight:Y}})},[]);T.useEffect(function(){var B=function(ce){var de,X=ce[0].contentRect,ae=X.width,ne=X.height;D(ae,ne),(de=k.current)===null||de===void 0||de.call(k,ae,ne)};w>0&&(B=oK(B,w,{trailing:!0,leading:!1}));var V=new ResizeObserver(B),W=I.current.getBoundingClientRect(),G=W.width,Y=W.height;return D(G,Y),V.observe(I.current),function(){V.disconnect()}},[D,w]);var $=T.useMemo(function(){var B=C.containerWidth,V=C.containerHeight;if(B<0||V<0)return null;ac(Pd(o)||Pd(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),ac(!r||r>0,"The aspect(%s) must be greater than zero.",r);var W=Pd(o)?B:o,G=Pd(d)?V:d;r&&r>0&&(W?G=W/r:G&&(W=G*r),x&&G>x&&(G=x)),ac(W>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,G,o,d,p,m,r);var Y=!Array.isArray(y)&&nc(y.type).endsWith("Chart");return ie.Children.map(y,function(re){return ie.isValidElement(re)?T.cloneElement(re,zy({width:W,height:G},Y?{style:zy({height:"100%",width:"100%",maxHeight:G,maxWidth:W},re.props.style)}:{})):re})},[r,y,d,x,m,p,C,o]);return ie.createElement("div",{id:N?"".concat(N):void 0,className:Sr("recharts-responsive-container",A),style:zy(zy({},L),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:x}),ref:I},$)}),c7=function(e){return null};c7.displayName="Cell";function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function bB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kj(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bB(Object(r),!0).forEach(function(n){Dge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dge(t,e,r){return e=Pge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pge(t){var e=Lge(t,"string");return Sg(e)=="symbol"?e:e+""}function Lge(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fh={widthCache:{},cacheCount:0},Bge=2e3,$ge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wB="recharts_measurement_span";function zge(t){var e=kj({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Rm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||T0.isSsr)return{width:0,height:0};var n=zge(r),a=JSON.stringify({text:e,copyStyle:n});if(fh.widthCache[a])return fh.widthCache[a];try{var i=document.getElementById(wB);i||(i=document.createElement("span"),i.setAttribute("id",wB),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=kj(kj({},$ge),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return fh.widthCache[a]=d,++fh.cacheCount>Bge&&(fh.cacheCount=0,fh.widthCache={}),d}catch{return{width:0,height:0}}},Uge=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function bb(t,e){return Hge(t)||qge(t,e)||Fge(t,e)||Vge()}function Vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fge(t,e){if(t){if(typeof t=="string")return SB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SB(t,e)}}function SB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Hge(t){if(Array.isArray(t))return t}function Gge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kge(n.key),n)}}function Wge(t,e,r){return e&&NB(t.prototype,e),r&&NB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kge(t){var e=Xge(t,"string");return Ng(e)=="symbol"?e:e+""}function Xge(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _B=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Yge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Jge=Object.keys(cK),_h="NaN";function Zge(t,e){return t*cK[e]}var Uy=(function(){function t(e,r){Gge(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Qge.test(r)&&(this.num=NaN,this.unit=""),Jge.includes(r)&&(this.num=Zge(e,r),this.unit="px")}return Wge(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Yge.exec(r))!==null&&n!==void 0?n:[],i=bb(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function uK(t){if(t.includes(_h))return _h;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=_B.exec(e))!==null&&r!==void 0?r:[],a=bb(n,4),i=a[1],o=a[2],c=a[3],d=Uy.parse(i??""),h=Uy.parse(c??""),p=o==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return _h;e=e.replace(_B,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,x=(m=TB.exec(e))!==null&&m!==void 0?m:[],y=bb(x,4),S=y[1],w=y[2],N=y[3],A=Uy.parse(S??""),R=Uy.parse(N??""),O=w==="+"?A.add(R):A.subtract(R);if(O.isNaN())return _h;e=e.replace(TB,O.toString())}return e}var jB=/\(([^()]*)\)/;function exe(t){for(var e=t;e.includes("(");){var r=jB.exec(e),n=bb(r,2),a=n[1];e=e.replace(jB,uK(a))}return e}function txe(t){var e=t.replace(/\s+/g,"");return e=exe(e),e=uK(e),e}function rxe(t){try{return txe(t)}catch{return _h}}function QN(t){var e=rxe(t.slice(5,-1));return e===_h?"":e}var nxe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],axe=["dx","dy","angle","className","breakAll"];function Cj(){return Cj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cj.apply(this,arguments)}function AB(t,e){if(t==null)return{};var r=ixe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ixe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function EB(t,e){return cxe(t)||lxe(t,e)||oxe(t,e)||sxe()}function sxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oxe(t,e){if(t){if(typeof t=="string")return kB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kB(t,e)}}function kB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function cxe(t){if(Array.isArray(t))return t}var dK=/[ \f\n\r\t\v\u2028\u2029]+/,hK=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];xr(r)||(n?i=r.toString().split(""):i=r.toString().split(dK));var o=i.map(function(d){return{word:d,width:Rm(d,a).width}}),c=n?0:Rm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},uxe=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=yt(o),m=c,x=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(G,Y){var re=Y.word,ce=Y.width,de=G[G.length-1];if(de&&(a==null||i||de.width+ce+n<Number(a)))de.words.push(re),de.width+=ce+n;else{var X={words:[re],width:ce};G.push(X)}return G},[])},y=x(r),S=function(W){return W.reduce(function(G,Y){return G.width>Y.width?G:Y})};if(!p)return y;for(var w="",N=function(W){var G=m.slice(0,W),Y=hK({breakAll:h,style:d,children:G+w}).wordsWithComputedWidth,re=x(Y),ce=re.length>o||S(re).width>Number(a);return[ce,re]},A=0,R=m.length-1,O=0,L;A<=R&&O<=m.length-1;){var I=Math.floor((A+R)/2),k=I-1,E=N(k),j=EB(E,2),C=j[0],q=j[1],D=N(I),$=EB(D,1),B=$[0];if(!C&&!B&&(A=I+1),C&&B&&(R=I-1),!C&&B){L=q;break}O++}return L||y},CB=function(e){var r=xr(e)?[]:e.toString().split(dK);return[{words:r}]},dxe=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!T0.isSsr){var d,h,p=hK({breakAll:o,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,x=p.spaceWidth;d=m,h=x}else return CB(a);return uxe({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return CB(a)},OB="#808080",df=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,x=e.textAnchor,y=x===void 0?"start":x,S=e.verticalAnchor,w=S===void 0?"end":S,N=e.fill,A=N===void 0?OB:N,R=AB(e,nxe),O=T.useMemo(function(){return dxe({breakAll:R.breakAll,children:R.children,maxLines:R.maxLines,scaleToFit:m,style:R.style,width:R.width})},[R.breakAll,R.children,R.maxLines,m,R.style,R.width]),L=R.dx,I=R.dy,k=R.angle,E=R.className,j=R.breakAll,C=AB(R,axe);if(!Ga(n)||!Ga(i))return null;var q=n+(yt(L)?L:0),D=i+(yt(I)?I:0),$;switch(w){case"start":$=QN("calc(".concat(h,")"));break;case"middle":$=QN("calc(".concat((O.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:$=QN("calc(".concat(O.length-1," * -").concat(c,")"));break}var B=[];if(m){var V=O[0].width,W=R.width;B.push("scale(".concat((yt(W)?W/V:1)/V,")"))}return k&&B.push("rotate(".concat(k,", ").concat(q,", ").concat(D,")")),B.length&&(C.transform=B.join(" ")),ie.createElement("text",Cj({},Wt(C,!0),{x:q,y:D,className:Sr("recharts-text",E),textAnchor:y,fill:A.includes("url")?OB:A}),O.map(function(G,Y){var re=G.words.join(j?"":" ");return ie.createElement("tspan",{x:q,dy:Y===0?$:c,key:"".concat(re,"-").concat(Y)},re)}))};function Ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function u7(t){let e,r,n;t.length!==2?(e=Ou,r=(c,d)=>Ou(t(c),d),n=(c,d)=>t(c)-d):(e=t===Ou||t===hxe?t:fxe,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function o(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:o,right:i}}function fxe(){return 0}function fK(t){return t===null?NaN:+t}function*pxe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const mxe=u7(Ou),Mx=mxe.right;u7(fK).center;class IB extends Map{constructor(e,r=yxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(RB(this,e))}has(e){return super.has(RB(this,e))}set(e,r){return super.set(gxe(this,e),r)}delete(e){return super.delete(xxe(this,e))}}function RB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function gxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function xxe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function yxe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function vxe(t=Ou){if(t===Ou)return pK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function pK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const bxe=Math.sqrt(50),wxe=Math.sqrt(10),Sxe=Math.sqrt(2);function wb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=bxe?10:i>=wxe?5:i>=Sxe?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?wb(t,e,r*2):[c,d,h]}function Oj(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?wb(e,t,r):wb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function Ij(t,e,r){return e=+e,t=+t,r=+r,wb(t,e,r)[2]}function Rj(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Ij(e,t,r):Ij(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function MB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function DB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function mK(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?pK:vxe(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),y=Math.max(r,Math.floor(e-h*m/d+x)),S=Math.min(n,Math.floor(e+(d-h)*m/d+x));mK(t,e,y,S,a)}const i=t[e];let o=r,c=n;for(nm(t,r,e),a(t[n],i)>0&&nm(t,r,n);o<c;){for(nm(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?nm(t,r,c):(++c,nm(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function nm(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Nxe(t,e,r){if(t=Float64Array.from(pxe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return DB(t);if(e>=1)return MB(t);var n,a=(n-1)*e,i=Math.floor(a),o=MB(mK(t,i).subarray(0,i+1)),c=DB(t.subarray(i+1));return o+(c-o)*(a-i)}}function _xe(t,e,r=fK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function Txe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function uo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Tc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Mj=Symbol("implicit");function d7(){var t=new IB,e=[],r=[],n=Mj;function a(i){let o=t.get(i);if(o===void 0){if(n!==Mj)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new IB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return d7(e,r).unknown(n)},uo.apply(a,arguments),a}function _g(){var t=d7().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var x=e().length,y=a<n,S=y?a:n,w=y?n:a;i=(w-S)/Math.max(1,x-d+h*2),c&&(i=Math.floor(i)),S+=(w-S-i*(x-d))*p,o=i*(1-d),c&&(S=Math.round(S),o=Math.round(o));var N=Txe(x).map(function(A){return S+i*A});return r(y?N.reverse():N)}return t.domain=function(x){return arguments.length?(e(x),m()):e()},t.range=function(x){return arguments.length?([n,a]=x,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(x){return[n,a]=x,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(x){return arguments.length?(c=!!x,m()):c},t.padding=function(x){return arguments.length?(d=Math.min(1,h=+x),m()):d},t.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),m()):d},t.paddingOuter=function(x){return arguments.length?(h=+x,m()):h},t.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),m()):p},t.copy=function(){return _g(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},uo.apply(m(),arguments)}function gK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return gK(e())},t}function Mm(){return gK(_g.apply(null,arguments).paddingInner(1))}function h7(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function xK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Dx(){}var Tg=.7,Sb=1/Tg,Lh="\\s*([+-]?\\d+)\\s*",jg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jxe=/^#([0-9a-f]{3,8})$/,Axe=new RegExp(`^rgb\\(${Lh},${Lh},${Lh}\\)$`),Exe=new RegExp(`^rgb\\(${al},${al},${al}\\)$`),kxe=new RegExp(`^rgba\\(${Lh},${Lh},${Lh},${jg}\\)$`),Cxe=new RegExp(`^rgba\\(${al},${al},${al},${jg}\\)$`),Oxe=new RegExp(`^hsl\\(${jg},${al},${al}\\)$`),Ixe=new RegExp(`^hsla\\(${jg},${al},${al},${jg}\\)$`),PB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};h7(Dx,Ag,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:LB,formatHex:LB,formatHex8:Rxe,formatHsl:Mxe,formatRgb:BB,toString:BB});function LB(){return this.rgb().formatHex()}function Rxe(){return this.rgb().formatHex8()}function Mxe(){return yK(this).formatHsl()}function BB(){return this.rgb().formatRgb()}function Ag(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=jxe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?$B(e):r===3?new ss(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Vy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Vy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Axe.exec(t))?new ss(e[1],e[2],e[3],1):(e=Exe.exec(t))?new ss(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=kxe.exec(t))?Vy(e[1],e[2],e[3],e[4]):(e=Cxe.exec(t))?Vy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Oxe.exec(t))?VB(e[1],e[2]/100,e[3]/100,1):(e=Ixe.exec(t))?VB(e[1],e[2]/100,e[3]/100,e[4]):PB.hasOwnProperty(t)?$B(PB[t]):t==="transparent"?new ss(NaN,NaN,NaN,0):null}function $B(t){return new ss(t>>16&255,t>>8&255,t&255,1)}function Vy(t,e,r,n){return n<=0&&(t=e=r=NaN),new ss(t,e,r,n)}function Dxe(t){return t instanceof Dx||(t=Ag(t)),t?(t=t.rgb(),new ss(t.r,t.g,t.b,t.opacity)):new ss}function Dj(t,e,r,n){return arguments.length===1?Dxe(t):new ss(t,e,r,n??1)}function ss(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}h7(ss,Dj,xK(Dx,{brighter(t){return t=t==null?Sb:Math.pow(Sb,t),new ss(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tg:Math.pow(Tg,t),new ss(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ss(Wd(this.r),Wd(this.g),Wd(this.b),Nb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zB,formatHex:zB,formatHex8:Pxe,formatRgb:UB,toString:UB}));function zB(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}`}function Pxe(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}${Ld((isNaN(this.opacity)?1:this.opacity)*255)}`}function UB(){const t=Nb(this.opacity);return`${t===1?"rgb(":"rgba("}${Wd(this.r)}, ${Wd(this.g)}, ${Wd(this.b)}${t===1?")":`, ${t})`}`}function Nb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ld(t){return t=Wd(t),(t<16?"0":"")+t.toString(16)}function VB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new No(t,e,r,n)}function yK(t){if(t instanceof No)return new No(t.h,t.s,t.l,t.opacity);if(t instanceof Dx||(t=Ag(t)),!t)return new No;if(t instanceof No)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new No(o,c,d,t.opacity)}function Lxe(t,e,r,n){return arguments.length===1?yK(t):new No(t,e,r,n??1)}function No(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}h7(No,Lxe,xK(Dx,{brighter(t){return t=t==null?Sb:Math.pow(Sb,t),new No(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tg:Math.pow(Tg,t),new No(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ss(YN(t>=240?t-240:t+120,a,n),YN(t,a,n),YN(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new No(FB(this.h),Fy(this.s),Fy(this.l),Nb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nb(this.opacity);return`${t===1?"hsl(":"hsla("}${FB(this.h)}, ${Fy(this.s)*100}%, ${Fy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function FB(t){return t=(t||0)%360,t<0?t+360:t}function Fy(t){return Math.max(0,Math.min(1,t||0))}function YN(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const f7=t=>()=>t;function Bxe(t,e){return function(r){return t+r*e}}function $xe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function zxe(t){return(t=+t)==1?vK:function(e,r){return r-e?$xe(e,r,t):f7(isNaN(e)?r:e)}}function vK(t,e){var r=e-t;return r?Bxe(t,r):f7(isNaN(t)?e:t)}const qB=(function t(e){var r=zxe(e);function n(a,i){var o=r((a=Dj(a)).r,(i=Dj(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=vK(a.opacity,i.opacity);return function(p){return a.r=o(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function Uxe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function Vxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fxe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Xf(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function qxe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function _b(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Hxe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Xf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Pj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,JN=new RegExp(Pj.source,"g");function Gxe(t){return function(){return t}}function Wxe(t){return function(e){return t(e)+""}}function Kxe(t,e){var r=Pj.lastIndex=JN.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=Pj.exec(t))&&(a=JN.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:_b(n,a)})),r=JN.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?Wxe(d[0].x):Gxe(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Xf(t,e){var r=typeof e,n;return e==null||r==="boolean"?f7(e):(r==="number"?_b:r==="string"?(n=Ag(e))?(e=n,qB):Kxe:e instanceof Ag?qB:e instanceof Date?qxe:Vxe(e)?Uxe:Array.isArray(e)?Fxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Hxe:_b)(t,e)}function p7(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Xxe(t,e){e===void 0&&(e=t,t=Xf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function Qxe(t){return function(){return t}}function Tb(t){return+t}var HB=[0,1];function Li(t){return t}function Lj(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Qxe(isNaN(e)?NaN:.5)}function Yxe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Jxe(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=Lj(a,n),i=r(o,i)):(n=Lj(n,a),i=r(i,o)),function(c){return i(n(c))}}function Zxe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=Lj(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=Mx(t,c,1,n)-1;return i[d](a[d](c))}}function Px(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yw(){var t=HB,e=HB,r=Xf,n,a,i,o=Li,c,d,h;function p(){var x=Math.min(t.length,e.length);return o!==Li&&(o=Yxe(t[0],t[x-1])),c=x>2?Zxe:Jxe,d=h=null,m}function m(x){return x==null||isNaN(x=+x)?i:(d||(d=c(t.map(n),e,r)))(n(o(x)))}return m.invert=function(x){return o(a((h||(h=c(e,t.map(n),_b)))(x)))},m.domain=function(x){return arguments.length?(t=Array.from(x,Tb),p()):t.slice()},m.range=function(x){return arguments.length?(e=Array.from(x),p()):e.slice()},m.rangeRound=function(x){return e=Array.from(x),r=p7,p()},m.clamp=function(x){return arguments.length?(o=x?!0:Li,p()):o!==Li},m.interpolate=function(x){return arguments.length?(r=x,p()):r},m.unknown=function(x){return arguments.length?(i=x,m):i},function(x,y){return n=x,a=y,p()}}function m7(){return yw()(Li,Li)}function e1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function hf(t){return t=jb(Math.abs(t)),t?t[1]:NaN}function t1e(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function r1e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var n1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Eg(t){if(!(e=n1e.exec(t)))throw new Error("invalid format: "+t);var e;return new g7({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Eg.prototype=g7.prototype;function g7(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}g7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function a1e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Ab;function i1e(t,e){var r=jb(t,e);if(!r)return Ab=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(Ab=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+jb(t,Math.max(0,e+i-1))[0]}function GB(t,e){var r=jb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const WB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:e1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>GB(t*100,e),r:GB,s:i1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function KB(t){return t}var XB=Array.prototype.map,QB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function s1e(t){var e=t.grouping===void 0||t.thousands===void 0?KB:t1e(XB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?KB:r1e(XB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,x){m=Eg(m);var y=m.fill,S=m.align,w=m.sign,N=m.symbol,A=m.zero,R=m.width,O=m.comma,L=m.precision,I=m.trim,k=m.type;k==="n"?(O=!0,k="g"):WB[k]||(L===void 0&&(L=12),I=!0,k="g"),(A||y==="0"&&S==="=")&&(A=!0,y="0",S="=");var E=(x&&x.prefix!==void 0?x.prefix:"")+(N==="$"?r:N==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),j=(N==="$"?n:/[%p]/.test(k)?o:"")+(x&&x.suffix!==void 0?x.suffix:""),C=WB[k],q=/[defgprs%]/.test(k);L=L===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function D($){var B=E,V=j,W,G,Y;if(k==="c")V=C($)+V,$="";else{$=+$;var re=$<0||1/$<0;if($=isNaN($)?d:C(Math.abs($),L),I&&($=a1e($)),re&&+$==0&&w!=="+"&&(re=!1),B=(re?w==="("?w:c:w==="-"||w==="("?"":w)+B,V=(k==="s"&&!isNaN($)&&Ab!==void 0?QB[8+Ab/3]:"")+V+(re&&w==="("?")":""),q){for(W=-1,G=$.length;++W<G;)if(Y=$.charCodeAt(W),48>Y||Y>57){V=(Y===46?a+$.slice(W+1):$.slice(W))+V,$=$.slice(0,W);break}}}O&&!A&&($=e($,1/0));var ce=B.length+$.length+V.length,de=ce<R?new Array(R-ce+1).join(y):"";switch(O&&A&&($=e(de+$,de.length?R-V.length:1/0),de=""),S){case"<":$=B+$+V+de;break;case"=":$=B+de+$+V;break;case"^":$=de.slice(0,ce=de.length>>1)+B+$+V+de.slice(ce);break;default:$=de+B+$+V;break}return i($)}return D.toString=function(){return m+""},D}function p(m,x){var y=Math.max(-8,Math.min(8,Math.floor(hf(x)/3)))*3,S=Math.pow(10,-y),w=h((m=Eg(m),m.type="f",m),{suffix:QB[8+y/3]});return function(N){return w(S*N)}}return{format:h,formatPrefix:p}}var qy,x7,bK;o1e({thousands:",",grouping:[3],currency:["$",""]});function o1e(t){return qy=s1e(t),x7=qy.format,bK=qy.formatPrefix,qy}function l1e(t){return Math.max(0,-hf(Math.abs(t)))}function c1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hf(e)/3)))*3-hf(Math.abs(t)))}function u1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hf(e)-hf(t))+1}function wK(t,e,r,n){var a=Rj(t,e,r),i;switch(n=Eg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=c1e(a,o))&&(n.precision=i),bK(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=u1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=l1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return x7(n)}function Wu(t){var e=t.domain;return t.ticks=function(r){var n=e();return Oj(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return wK(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,p=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=Ij(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Eb(){var t=m7();return t.copy=function(){return Px(t,Eb())},uo.apply(t,arguments),Wu(t)}function SK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Tb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return SK(t).unknown(e)},t=arguments.length?Array.from(t,Tb):[0,1],Wu(r)}function NK(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function YB(t){return Math.log(t)}function JB(t){return Math.exp(t)}function d1e(t){return-Math.log(-t)}function h1e(t){return-Math.exp(-t)}function f1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function p1e(t){return t===10?f1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function m1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ZB(t){return(e,r)=>-t(-e,r)}function y7(t){const e=t(YB,JB),r=e.domain;let n=10,a,i;function o(){return a=m1e(n),i=p1e(n),r()[0]<0?(a=ZB(a),i=ZB(i),t(d1e,h1e)):t(YB,JB),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let x=a(h),y=a(p),S,w;const N=c==null?10:+c;let A=[];if(!(n%1)&&y-x<N){if(x=Math.floor(x),y=Math.ceil(y),h>0){for(;x<=y;++x)for(S=1;S<n;++S)if(w=x<0?S/i(-x):S*i(x),!(w<h)){if(w>p)break;A.push(w)}}else for(;x<=y;++x)for(S=n-1;S>=1;--S)if(w=x>0?S/i(-x):S*i(x),!(w<h)){if(w>p)break;A.push(w)}A.length*2<N&&(A=Oj(h,p,N))}else A=Oj(x,y,Math.min(y-x,N)).map(i);return m?A.reverse():A},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Eg(d)).precision==null&&(d.trim=!0),d=x7(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(NK(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function _K(){const t=y7(yw()).domain([1,10]);return t.copy=()=>Px(t,_K()).base(t.base()),uo.apply(t,arguments),t}function e$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function t$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function v7(t){var e=1,r=t(e$(e),t$(e));return r.constant=function(n){return arguments.length?t(e$(e=+n),t$(e)):e},Wu(r)}function TK(){var t=v7(yw());return t.copy=function(){return Px(t,TK()).constant(t.constant())},uo.apply(t,arguments)}function r$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function g1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function x1e(t){return t<0?-t*t:t*t}function b7(t){var e=t(Li,Li),r=1;function n(){return r===1?t(Li,Li):r===.5?t(g1e,x1e):t(r$(r),r$(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Wu(e)}function w7(){var t=b7(yw());return t.copy=function(){return Px(t,w7()).exponent(t.exponent())},uo.apply(t,arguments),t}function y1e(){return w7.apply(null,arguments).exponent(.5)}function n$(t){return Math.sign(t)*t*t}function v1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function jK(){var t=m7(),e=[0,1],r=!1,n;function a(i){var o=v1e(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(n$(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,Tb)).map(n$)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return jK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},uo.apply(a,arguments),Wu(a)}function AK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=_xe(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[Mx(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Ou),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return AK().domain(t).range(e).unknown(n)},uo.apply(i,arguments)}function EK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[Mx(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return EK().domain([t,e]).range(a).unknown(i)},uo.apply(Wu(o),arguments)}function kK(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[Mx(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return kK().domain(t).range(e).unknown(r)},uo.apply(a,arguments)}const ZN=new Date,e_=new Date;function Ya(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Ya(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(ZN.setTime(+i),e_.setTime(+o),t(ZN),t(e_),Math.floor(r(ZN,e_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const kb=Ya(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);kb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ya(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):kb);kb.range;const Yl=1e3,to=Yl*60,Jl=to*60,mc=Jl*24,S7=mc*7,a$=mc*30,t_=mc*365,Bd=Ya(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Yl)},(t,e)=>(e-t)/Yl,t=>t.getUTCSeconds());Bd.range;const N7=Ya(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yl)},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getMinutes());N7.range;const _7=Ya(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*to)},(t,e)=>(e-t)/to,t=>t.getUTCMinutes());_7.range;const T7=Ya(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Yl-t.getMinutes()*to)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getHours());T7.range;const j7=Ya(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getUTCHours());j7.range;const Lx=Ya(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*to)/mc,t=>t.getDate()-1);Lx.range;const vw=Ya(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mc,t=>t.getUTCDate()-1);vw.range;const CK=Ya(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/mc,t=>Math.floor(t/mc));CK.range;function j0(t){return Ya(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*to)/S7)}const bw=j0(0),Cb=j0(1),b1e=j0(2),w1e=j0(3),ff=j0(4),S1e=j0(5),N1e=j0(6);bw.range;Cb.range;b1e.range;w1e.range;ff.range;S1e.range;N1e.range;function A0(t){return Ya(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/S7)}const ww=A0(0),Ob=A0(1),_1e=A0(2),T1e=A0(3),pf=A0(4),j1e=A0(5),A1e=A0(6);ww.range;Ob.range;_1e.range;T1e.range;pf.range;j1e.range;A1e.range;const A7=Ya(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());A7.range;const E7=Ya(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());E7.range;const gc=Ya(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());gc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ya(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});gc.range;const xc=Ya(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());xc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ya(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});xc.range;function OK(t,e,r,n,a,i){const o=[[Bd,1,Yl],[Bd,5,5*Yl],[Bd,15,15*Yl],[Bd,30,30*Yl],[i,1,to],[i,5,5*to],[i,15,15*to],[i,30,30*to],[a,1,Jl],[a,3,3*Jl],[a,6,6*Jl],[a,12,12*Jl],[n,1,mc],[n,2,2*mc],[r,1,S7],[e,1,a$],[e,3,3*a$],[t,1,t_]];function c(h,p,m){const x=p<h;x&&([h,p]=[p,h]);const y=m&&typeof m.range=="function"?m:d(h,p,m),S=y?y.range(h,+p+1):[];return x?S.reverse():S}function d(h,p,m){const x=Math.abs(p-h)/m,y=u7(([,,N])=>N).right(o,x);if(y===o.length)return t.every(Rj(h/t_,p/t_,m));if(y===0)return kb.every(Math.max(Rj(h,p,m),1));const[S,w]=o[x/o[y-1][2]<o[y][2]/x?y-1:y];return S.every(w)}return[c,d]}const[E1e,k1e]=OK(xc,E7,ww,CK,j7,_7),[C1e,O1e]=OK(gc,A7,bw,Lx,T7,N7);function r_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function n_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function am(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function I1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=im(a),p=sm(a),m=im(i),x=sm(i),y=im(o),S=sm(o),w=im(c),N=sm(c),A=im(d),R=sm(d),O={a:Y,A:re,b:ce,B:de,c:null,d:u$,e:u$,f:tye,g:dye,G:fye,H:J1e,I:Z1e,j:eye,L:IK,m:rye,M:nye,p:X,q:ae,Q:f$,s:p$,S:aye,u:iye,U:sye,V:oye,w:lye,W:cye,x:null,X:null,y:uye,Y:hye,Z:pye,"%":h$},L={a:ne,A:ve,b:pe,B:Be,c:null,d:d$,e:d$,f:yye,g:Eye,G:Cye,H:mye,I:gye,j:xye,L:MK,m:vye,M:bye,p:Ue,q:Fe,Q:f$,s:p$,S:wye,u:Sye,U:Nye,V:_ye,w:Tye,W:jye,x:null,X:null,y:Aye,Y:kye,Z:Oye,"%":h$},I={a:q,A:D,b:$,B,c:V,d:l$,e:l$,f:K1e,g:o$,G:s$,H:c$,I:c$,j:q1e,L:W1e,m:F1e,M:H1e,p:C,q:V1e,Q:Q1e,s:Y1e,S:G1e,u:L1e,U:B1e,V:$1e,w:P1e,W:z1e,x:W,X:G,y:o$,Y:s$,Z:U1e,"%":X1e};O.x=k(r,O),O.X=k(n,O),O.c=k(e,O),L.x=k(r,L),L.X=k(n,L),L.c=k(e,L);function k(Ne,He){return function(Z){var te=[],be=-1,Se=0,Ze=Ne.length,rt,It,At;for(Z instanceof Date||(Z=new Date(+Z));++be<Ze;)Ne.charCodeAt(be)===37&&(te.push(Ne.slice(Se,be)),(It=i$[rt=Ne.charAt(++be)])!=null?rt=Ne.charAt(++be):It=rt==="e"?" ":"0",(At=He[rt])&&(rt=At(Z,It)),te.push(rt),Se=be+1);return te.push(Ne.slice(Se,be)),te.join("")}}function E(Ne,He){return function(Z){var te=am(1900,void 0,1),be=j(te,Ne,Z+="",0),Se,Ze;if(be!=Z.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(He&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(Se=n_(am(te.y,0,1)),Ze=Se.getUTCDay(),Se=Ze>4||Ze===0?Ob.ceil(Se):Ob(Se),Se=vw.offset(Se,(te.V-1)*7),te.y=Se.getUTCFullYear(),te.m=Se.getUTCMonth(),te.d=Se.getUTCDate()+(te.w+6)%7):(Se=r_(am(te.y,0,1)),Ze=Se.getDay(),Se=Ze>4||Ze===0?Cb.ceil(Se):Cb(Se),Se=Lx.offset(Se,(te.V-1)*7),te.y=Se.getFullYear(),te.m=Se.getMonth(),te.d=Se.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Ze="Z"in te?n_(am(te.y,0,1)).getUTCDay():r_(am(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Ze+5)%7:te.w+te.U*7-(Ze+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,n_(te)):r_(te)}}function j(Ne,He,Z,te){for(var be=0,Se=He.length,Ze=Z.length,rt,It;be<Se;){if(te>=Ze)return-1;if(rt=He.charCodeAt(be++),rt===37){if(rt=He.charAt(be++),It=I[rt in i$?He.charAt(be++):rt],!It||(te=It(Ne,Z,te))<0)return-1}else if(rt!=Z.charCodeAt(te++))return-1}return te}function C(Ne,He,Z){var te=h.exec(He.slice(Z));return te?(Ne.p=p.get(te[0].toLowerCase()),Z+te[0].length):-1}function q(Ne,He,Z){var te=y.exec(He.slice(Z));return te?(Ne.w=S.get(te[0].toLowerCase()),Z+te[0].length):-1}function D(Ne,He,Z){var te=m.exec(He.slice(Z));return te?(Ne.w=x.get(te[0].toLowerCase()),Z+te[0].length):-1}function $(Ne,He,Z){var te=A.exec(He.slice(Z));return te?(Ne.m=R.get(te[0].toLowerCase()),Z+te[0].length):-1}function B(Ne,He,Z){var te=w.exec(He.slice(Z));return te?(Ne.m=N.get(te[0].toLowerCase()),Z+te[0].length):-1}function V(Ne,He,Z){return j(Ne,e,He,Z)}function W(Ne,He,Z){return j(Ne,r,He,Z)}function G(Ne,He,Z){return j(Ne,n,He,Z)}function Y(Ne){return o[Ne.getDay()]}function re(Ne){return i[Ne.getDay()]}function ce(Ne){return d[Ne.getMonth()]}function de(Ne){return c[Ne.getMonth()]}function X(Ne){return a[+(Ne.getHours()>=12)]}function ae(Ne){return 1+~~(Ne.getMonth()/3)}function ne(Ne){return o[Ne.getUTCDay()]}function ve(Ne){return i[Ne.getUTCDay()]}function pe(Ne){return d[Ne.getUTCMonth()]}function Be(Ne){return c[Ne.getUTCMonth()]}function Ue(Ne){return a[+(Ne.getUTCHours()>=12)]}function Fe(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var He=k(Ne+="",O);return He.toString=function(){return Ne},He},parse:function(Ne){var He=E(Ne+="",!1);return He.toString=function(){return Ne},He},utcFormat:function(Ne){var He=k(Ne+="",L);return He.toString=function(){return Ne},He},utcParse:function(Ne){var He=E(Ne+="",!0);return He.toString=function(){return Ne},He}}}var i$={"-":"",_:" ",0:"0"},si=/^\s*\d+/,R1e=/^%/,M1e=/[\\^$*+?|[\]().{}]/g;function en(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function D1e(t){return t.replace(M1e,"\\$&")}function im(t){return new RegExp("^(?:"+t.map(D1e).join("|")+")","i")}function sm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function P1e(t,e,r){var n=si.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function L1e(t,e,r){var n=si.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function B1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function $1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function z1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function s$(t,e,r){var n=si.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function o$(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function U1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function V1e(t,e,r){var n=si.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function F1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function l$(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function q1e(t,e,r){var n=si.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function c$(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function H1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function G1e(t,e,r){var n=si.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function W1e(t,e,r){var n=si.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function K1e(t,e,r){var n=si.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function X1e(t,e,r){var n=R1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Q1e(t,e,r){var n=si.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Y1e(t,e,r){var n=si.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function u$(t,e){return en(t.getDate(),e,2)}function J1e(t,e){return en(t.getHours(),e,2)}function Z1e(t,e){return en(t.getHours()%12||12,e,2)}function eye(t,e){return en(1+Lx.count(gc(t),t),e,3)}function IK(t,e){return en(t.getMilliseconds(),e,3)}function tye(t,e){return IK(t,e)+"000"}function rye(t,e){return en(t.getMonth()+1,e,2)}function nye(t,e){return en(t.getMinutes(),e,2)}function aye(t,e){return en(t.getSeconds(),e,2)}function iye(t){var e=t.getDay();return e===0?7:e}function sye(t,e){return en(bw.count(gc(t)-1,t),e,2)}function RK(t){var e=t.getDay();return e>=4||e===0?ff(t):ff.ceil(t)}function oye(t,e){return t=RK(t),en(ff.count(gc(t),t)+(gc(t).getDay()===4),e,2)}function lye(t){return t.getDay()}function cye(t,e){return en(Cb.count(gc(t)-1,t),e,2)}function uye(t,e){return en(t.getFullYear()%100,e,2)}function dye(t,e){return t=RK(t),en(t.getFullYear()%100,e,2)}function hye(t,e){return en(t.getFullYear()%1e4,e,4)}function fye(t,e){var r=t.getDay();return t=r>=4||r===0?ff(t):ff.ceil(t),en(t.getFullYear()%1e4,e,4)}function pye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+en(e/60|0,"0",2)+en(e%60,"0",2)}function d$(t,e){return en(t.getUTCDate(),e,2)}function mye(t,e){return en(t.getUTCHours(),e,2)}function gye(t,e){return en(t.getUTCHours()%12||12,e,2)}function xye(t,e){return en(1+vw.count(xc(t),t),e,3)}function MK(t,e){return en(t.getUTCMilliseconds(),e,3)}function yye(t,e){return MK(t,e)+"000"}function vye(t,e){return en(t.getUTCMonth()+1,e,2)}function bye(t,e){return en(t.getUTCMinutes(),e,2)}function wye(t,e){return en(t.getUTCSeconds(),e,2)}function Sye(t){var e=t.getUTCDay();return e===0?7:e}function Nye(t,e){return en(ww.count(xc(t)-1,t),e,2)}function DK(t){var e=t.getUTCDay();return e>=4||e===0?pf(t):pf.ceil(t)}function _ye(t,e){return t=DK(t),en(pf.count(xc(t),t)+(xc(t).getUTCDay()===4),e,2)}function Tye(t){return t.getUTCDay()}function jye(t,e){return en(Ob.count(xc(t)-1,t),e,2)}function Aye(t,e){return en(t.getUTCFullYear()%100,e,2)}function Eye(t,e){return t=DK(t),en(t.getUTCFullYear()%100,e,2)}function kye(t,e){return en(t.getUTCFullYear()%1e4,e,4)}function Cye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?pf(t):pf.ceil(t),en(t.getUTCFullYear()%1e4,e,4)}function Oye(){return"+0000"}function h$(){return"%"}function f$(t){return+t}function p$(t){return Math.floor(+t/1e3)}var ph,PK,LK;Iye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Iye(t){return ph=I1e(t),PK=ph.format,ph.parse,LK=ph.utcFormat,ph.utcParse,ph}function Rye(t){return new Date(t)}function Mye(t){return t instanceof Date?+t:+new Date(+t)}function k7(t,e,r,n,a,i,o,c,d,h){var p=m7(),m=p.invert,x=p.domain,y=h(".%L"),S=h(":%S"),w=h("%I:%M"),N=h("%I %p"),A=h("%a %d"),R=h("%b %d"),O=h("%B"),L=h("%Y");function I(k){return(d(k)<k?y:c(k)<k?S:o(k)<k?w:i(k)<k?N:n(k)<k?a(k)<k?A:R:r(k)<k?O:L)(k)}return p.invert=function(k){return new Date(m(k))},p.domain=function(k){return arguments.length?x(Array.from(k,Mye)):x().map(Rye)},p.ticks=function(k){var E=x();return t(E[0],E[E.length-1],k??10)},p.tickFormat=function(k,E){return E==null?I:h(E)},p.nice=function(k){var E=x();return(!k||typeof k.range!="function")&&(k=e(E[0],E[E.length-1],k??10)),k?x(NK(E,k)):p},p.copy=function(){return Px(p,k7(t,e,r,n,a,i,o,c,d,h))},p}function Dye(){return uo.apply(k7(C1e,O1e,gc,A7,bw,Lx,T7,N7,Bd,PK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Pye(){return uo.apply(k7(E1e,k1e,xc,E7,ww,vw,j7,_7,Bd,LK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sw(){var t=0,e=1,r,n,a,i,o=Li,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(o=m,h):o};function p(m){return function(x){var y,S;return arguments.length?([y,S]=x,o=m(y,S),h):[o(0),o(1)]}}return h.range=p(Xf),h.rangeRound=p(p7),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Ku(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function BK(){var t=Wu(Sw()(Li));return t.copy=function(){return Ku(t,BK())},Tc.apply(t,arguments)}function $K(){var t=y7(Sw()).domain([1,10]);return t.copy=function(){return Ku(t,$K()).base(t.base())},Tc.apply(t,arguments)}function zK(){var t=v7(Sw());return t.copy=function(){return Ku(t,zK()).constant(t.constant())},Tc.apply(t,arguments)}function C7(){var t=b7(Sw());return t.copy=function(){return Ku(t,C7()).exponent(t.exponent())},Tc.apply(t,arguments)}function Lye(){return C7.apply(null,arguments).exponent(.5)}function UK(){var t=[],e=Li;function r(n){if(n!=null&&!isNaN(n=+n))return e((Mx(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ou),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Nxe(t,i/n))},r.copy=function(){return UK(e).domain(t)},Tc.apply(r,arguments)}function Nw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=Li,p,m=!1,x;function y(w){return isNaN(w=+w)?x:(w=.5+((w=+p(w))-i)*(n*w<n*i?c:d),h(m?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([t,e,r]=w,a=p(t=+t),i=p(e=+e),o=p(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y):[t,e,r]},y.clamp=function(w){return arguments.length?(m=!!w,y):m},y.interpolator=function(w){return arguments.length?(h=w,y):h};function S(w){return function(N){var A,R,O;return arguments.length?([A,R,O]=N,h=Xxe(w,[A,R,O]),y):[h(0),h(.5),h(1)]}}return y.range=S(Xf),y.rangeRound=S(p7),y.unknown=function(w){return arguments.length?(x=w,y):x},function(w){return p=w,a=w(t),i=w(e),o=w(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,y}}function VK(){var t=Wu(Nw()(Li));return t.copy=function(){return Ku(t,VK())},Tc.apply(t,arguments)}function FK(){var t=y7(Nw()).domain([.1,1,10]);return t.copy=function(){return Ku(t,FK()).base(t.base())},Tc.apply(t,arguments)}function qK(){var t=v7(Nw());return t.copy=function(){return Ku(t,qK()).constant(t.constant())},Tc.apply(t,arguments)}function O7(){var t=b7(Nw());return t.copy=function(){return Ku(t,O7()).exponent(t.exponent())},Tc.apply(t,arguments)}function Bye(){return O7.apply(null,arguments).exponent(.5)}const m$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_g,scaleDiverging:VK,scaleDivergingLog:FK,scaleDivergingPow:O7,scaleDivergingSqrt:Bye,scaleDivergingSymlog:qK,scaleIdentity:SK,scaleImplicit:Mj,scaleLinear:Eb,scaleLog:_K,scaleOrdinal:d7,scalePoint:Mm,scalePow:w7,scaleQuantile:AK,scaleQuantize:EK,scaleRadial:jK,scaleSequential:BK,scaleSequentialLog:$K,scaleSequentialPow:C7,scaleSequentialQuantile:UK,scaleSequentialSqrt:Lye,scaleSequentialSymlog:zK,scaleSqrt:y1e,scaleSymlog:TK,scaleThreshold:kK,scaleTime:Dye,scaleUtc:Pye,tickFormat:wK},Symbol.toStringTag,{value:"Module"}));var a_,g$;function _w(){if(g$)return a_;g$=1;var t=Gf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return a_=e,a_}var i_,x$;function HK(){if(x$)return i_;x$=1;function t(e,r){return e>r}return i_=t,i_}var s_,y$;function $ye(){if(y$)return s_;y$=1;var t=_w(),e=HK(),r=Kf();function n(a){return a&&a.length?t(a,r,e):void 0}return s_=n,s_}var zye=$ye();const Tw=sn(zye);var o_,v$;function GK(){if(v$)return o_;v$=1;function t(e,r){return e<r}return o_=t,o_}var l_,b$;function Uye(){if(b$)return l_;b$=1;var t=_w(),e=GK(),r=Kf();function n(a){return a&&a.length?t(a,r,e):void 0}return l_=n,l_}var Vye=Uye();const jw=sn(Vye);var c_,w$;function Fye(){if(w$)return c_;w$=1;var t=WE(),e=xl(),r=eK(),n=ds();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return c_=a,c_}var u_,S$;function qye(){if(S$)return u_;S$=1;var t=JW(),e=Fye();function r(n,a){return t(e(n,a),1)}return u_=r,u_}var Hye=qye();const Gye=sn(Hye);var d_,N$;function Wye(){if(N$)return d_;N$=1;var t=i7();function e(r,n){return t(r,n)}return d_=e,d_}var Kye=Wye();const Bx=sn(Kye);var Qf=1e9,Xye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},R7,ea=!0,co="[DecimalError] ",Kd=co+"Invalid argument: ",I7=co+"Exponent out of range: ",Yf=Math.floor,kd=Math.pow,Qye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ks,ri=1e7,Xn=7,WK=9007199254740991,Ib=Yf(WK/Xn),kt={};kt.absoluteValue=kt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kt.comparedTo=kt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Xn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(t){return ic(this,new this.constructor(t))};kt.dividedToIntegerBy=kt.idiv=function(t){var e=this,r=e.constructor;return zn(ic(e,new r(t),0,1),r.precision)};kt.equals=kt.eq=function(t){return!this.cmp(t)};kt.exponent=function(){return Da(this)};kt.greaterThan=kt.gt=function(t){return this.cmp(t)>0};kt.greaterThanOrEqualTo=kt.gte=function(t){return this.cmp(t)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(t){return this.cmp(t)<0};kt.lessThanOrEqualTo=kt.lte=function(t){return this.cmp(t)<1};kt.logarithm=kt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(ks))throw Error(co+"NaN");if(r.s<1)throw Error(co+(r.s?"NaN":"-Infinity"));return r.eq(ks)?new n(0):(ea=!1,e=ic(kg(r,i),kg(t,i),i),ea=!0,zn(e,a))};kt.minus=kt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?QK(e,t):KK(e,(t.s=-t.s,t))};kt.modulo=kt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(co+"NaN");return r.s?(ea=!1,e=ic(r,t,0,1).times(t),ea=!0,r.minus(e)):zn(new n(r),a)};kt.naturalExponential=kt.exp=function(){return XK(this)};kt.naturalLogarithm=kt.ln=function(){return kg(this)};kt.negated=kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kt.plus=kt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?KK(e,t):QK(e,(t.s=-t.s,t))};kt.precision=kt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Kd+t);if(e=Da(a)+1,n=a.d.length-1,r=n*Xn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kt.squareRoot=kt.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(co+"NaN")}for(t=Da(c),ea=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=el(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Yf((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(ic(c,i,o+2)).times(.5),el(i.d).slice(0,o)===(e=el(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(zn(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return ea=!0,zn(n,r)};kt.times=kt.mul=function(t){var e,r,n,a,i,o,c,d,h,p=this,m=p.constructor,x=p.d,y=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=x.length,h=y.length,d<h&&(i=x,x=y,y=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+y[n]*x[a-n-1]+e,i[a--]=c%ri|0,e=c/ri|0;i[a]=(i[a]+e)%ri|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,ea?zn(t,m.precision):t};kt.toDecimalPlaces=kt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ul(t,0,Qf),e===void 0?e=n.rounding:ul(e,0,8),zn(r,t+Da(r)+1,e))};kt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=h0(n,!0):(ul(t,0,Qf),e===void 0?e=a.rounding:ul(e,0,8),n=zn(new a(n),t+1,e),r=h0(n,!0,t+1)),r};kt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?h0(a):(ul(t,0,Qf),e===void 0?e=i.rounding:ul(e,0,8),n=zn(new i(a),t+Da(a)+1,e),r=h0(n.abs(),!1,t+Da(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var t=this,e=t.constructor;return zn(new e(t),Da(t)+1,e.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(ks);if(c=new d(c),!c.s){if(t.s<1)throw Error(co+"Infinity");return c}if(c.eq(ks))return c;if(n=d.precision,t.eq(ks))return zn(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=p<0?-p:p)<=WK){for(a=new d(ks),e=Math.ceil(n/Xn+4),ea=!1;r%2&&(a=a.times(c),T$(a.d,e)),r=Yf(r/2),r!==0;)c=c.times(c),T$(c.d,e);return ea=!0,t.s<0?new d(ks).div(a):zn(a,n)}}else if(i<0)throw Error(co+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,ea=!1,a=t.times(kg(c,n+h)),ea=!0,a=XK(a),a.s=i,a};kt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Da(a),n=h0(a,r<=i.toExpNeg||r>=i.toExpPos)):(ul(t,1,Qf),e===void 0?e=i.rounding:ul(e,0,8),a=zn(new i(a),t,e),r=Da(a),n=h0(a,t<=r||r<=i.toExpNeg,t)),n};kt.toSignificantDigits=kt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ul(t,1,Qf),e===void 0?e=n.rounding:ul(e,0,8)),zn(new n(r),t,e)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Da(t),r=t.constructor;return h0(t,e<=r.toExpNeg||e>=r.toExpPos)};function KK(t,e){var r,n,a,i,o,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),ea?zn(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(m/Xn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/ri|0,d[i]%=ri;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,ea?zn(e,m):e}function ul(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Kd+t)}function el(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=Xn-n.length,r&&(i+=ou(r)),i+=n;o=t[e],n=o+"",r=Xn-n.length,r&&(i+=ou(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ic=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%ri|0,o=i/ri|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*ri+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,p,m,x,y,S,w,N,A,R,O,L,I,k,E,j,C=n.constructor,q=n.s==a.s?1:-1,D=n.d,$=a.d;if(!n.s)return new C(n);if(!a.s)throw Error(co+"Division by zero");for(d=n.e-a.e,E=$.length,I=D.length,y=new C(q),S=y.d=[],h=0;$[h]==(D[h]||0);)++h;if($[h]>(D[h]||0)&&--d,i==null?R=i=C.precision:o?R=i+(Da(n)-Da(a))+1:R=i,R<0)return new C(0);if(R=R/Xn+2|0,h=0,E==1)for(p=0,$=$[0],R++;(h<I||p)&&R--;h++)O=p*ri+(D[h]||0),S[h]=O/$|0,p=O%$|0;else{for(p=ri/($[0]+1)|0,p>1&&($=t($,p),D=t(D,p),E=$.length,I=D.length),L=E,w=D.slice(0,E),N=w.length;N<E;)w[N++]=0;j=$.slice(),j.unshift(0),k=$[0],$[1]>=ri/2&&++k;do p=0,c=e($,w,E,N),c<0?(A=w[0],E!=N&&(A=A*ri+(w[1]||0)),p=A/k|0,p>1?(p>=ri&&(p=ri-1),m=t($,p),x=m.length,N=w.length,c=e(m,w,x,N),c==1&&(p--,r(m,E<x?j:$,x))):(p==0&&(c=p=1),m=$.slice()),x=m.length,x<N&&m.unshift(0),r(w,m,N),c==-1&&(N=w.length,c=e($,w,E,N),c<1&&(p++,r(w,E<N?j:$,N))),N=w.length):c===0&&(p++,w=[0]),S[h++]=p,c&&w[0]?w[N++]=D[L]||0:(w=[D[L]],N=1);while((L++<I||w[0]!==void 0)&&R--)}return S[0]||S.shift(),y.e=d,zn(y,o?i+Da(y)+1:i)}})();function XK(t,e){var r,n,a,i,o,c,d=0,h=0,p=t.constructor,m=p.precision;if(Da(t)>16)throw Error(I7+Da(t));if(!t.s)return new p(ks);for(ea=!1,c=m,o=new p(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(kd(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(ks),p.precision=c;;){if(a=zn(a.times(t),c),r=r.times(++d),o=i.plus(ic(a,r,c)),el(o.d).slice(0,c)===el(i.d).slice(0,c)){for(;h--;)i=zn(i.times(i),c);return p.precision=m,e==null?(ea=!0,zn(i,m)):i}i=o}}function Da(t){for(var e=t.e*Xn,r=t.d[0];r>=10;r/=10)e++;return e}function h_(t,e,r){if(e>t.LN10.sd())throw ea=!0,r&&(t.precision=r),Error(co+"LN10 precision limit exceeded");return zn(new t(t.LN10),e)}function ou(t){for(var e="";t--;)e+="0";return e}function kg(t,e){var r,n,a,i,o,c,d,h,p,m=1,x=10,y=t,S=y.d,w=y.constructor,N=w.precision;if(y.s<1)throw Error(co+(y.s?"NaN":"-Infinity"));if(y.eq(ks))return new w(0);if(e==null?(ea=!1,h=N):h=e,y.eq(10))return e==null&&(ea=!0),h_(w,h);if(h+=x,w.precision=h,r=el(S),n=r.charAt(0),i=Da(y),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=el(y.d),n=r.charAt(0),m++;i=Da(y),n>1?(y=new w("0."+r),i++):y=new w(n+"."+r.slice(1))}else return d=h_(w,h+2,N).times(i+""),y=kg(new w(n+"."+r.slice(1)),h-x).plus(d),w.precision=N,e==null?(ea=!0,zn(y,N)):y;for(c=o=y=ic(y.minus(ks),y.plus(ks),h),p=zn(y.times(y),h),a=3;;){if(o=zn(o.times(p),h),d=c.plus(ic(o,new w(a),h)),el(d.d).slice(0,h)===el(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(h_(w,h+2,N).times(i+""))),c=ic(c,new w(m),h),w.precision=N,e==null?(ea=!0,zn(c,N)):c;c=d,a+=2}}function _$(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Yf(r/Xn),t.d=[],n=(r+1)%Xn,r<0&&(n+=Xn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Xn;n<a;)t.d.push(+e.slice(n,n+=Xn));e=e.slice(n),n=Xn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),ea&&(t.e>Ib||t.e<-Ib))throw Error(I7+r)}else t.s=0,t.e=0,t.d=[0];return t}function zn(t,e,r){var n,a,i,o,c,d,h,p,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=Xn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/Xn),i=m.length,p>=i)return t;for(h=i=m[p],o=1;i>=10;i/=10)o++;n%=Xn,a=n-Xn+o}if(r!==void 0&&(i=kd(10,o-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/kd(10,o-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Da(t),m.length=1,e=e-i-1,m[0]=kd(10,(Xn-e%Xn)%Xn),t.e=Yf(-e/Xn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=kd(10,Xn-n),m[p]=a>0?(h/kd(10,o-a)%kd(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==ri&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=ri)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(ea&&(t.e>Ib||t.e<-Ib))throw Error(I7+Da(t));return t}function QK(t,e){var r,n,a,i,o,c,d,h,p,m,x=t.constructor,y=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),ea?zn(e,y):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(p=o<0,p?(r=d,o=-o,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(y/Xn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}o=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=ri-1;--d[i],d[a]+=ri}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,ea?zn(e,y):e):new x(0)}function h0(t,e,r){var n,a=Da(t),i=el(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ou(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ou(-a-1)+i,r&&(n=r-o)>0&&(i+=ou(n))):a>=o?(i+=ou(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+ou(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=ou(n))),t.s<0?"-"+i:i}function T$(t,e){if(t.length>e)return t.length=e,!0}function YK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Kd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return _$(o,i.toString())}else if(typeof i!="string")throw Error(Kd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Qye.test(i))_$(o,i);else throw Error(Kd+i)}if(a.prototype=kt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=YK,a.config=a.set=Yye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Yye(t){if(!t||typeof t!="object")throw Error(co+"Object expected");var e,r,n,a=["precision",1,Qf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Yf(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Kd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kd+r+": "+n);return this}var R7=YK(Xye);ks=new R7(1);const kn=R7;function Jye(t){return rve(t)||tve(t)||eve(t)||Zye()}function Zye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(t,e){if(t){if(typeof t=="string")return Bj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bj(t,e)}}function tve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function rve(t){if(Array.isArray(t))return Bj(t)}function Bj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nve=function(e){return e},JK={},ZK=function(e){return e===JK},j$=function(e){return function r(){return arguments.length===0||arguments.length===1&&ZK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},ave=function t(e,r){return e===1?r:j$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==JK}).length;return o>=e?r.apply(void 0,a):t(e-o,j$(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return ZK(m)?d.shift():m});return r.apply(void 0,Jye(p).concat(d))}))})},Aw=function(e){return ave(e.length,e)},$j=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},ive=Aw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),sve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return nve;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},zj=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},eX=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function ove(t){var e;return t===0?e=1:e=Math.floor(new kn(t).abs().log(10).toNumber())+1,e}function lve(t,e,r){for(var n=new kn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var cve=Aw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),uve=Aw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),dve=Aw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Ew={rangeStep:lve,getDigitCount:ove,interpolateNumber:cve,uninterpolateNumber:uve,uninterpolateTruncation:dve};function Uj(t){return pve(t)||fve(t)||tX(t)||hve()}function hve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pve(t){if(Array.isArray(t))return Vj(t)}function Cg(t,e){return xve(t)||gve(t,e)||tX(t,e)||mve()}function mve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tX(t,e){if(t){if(typeof t=="string")return Vj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(t,e)}}function Vj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function xve(t){if(Array.isArray(t))return t}function rX(t){var e=Cg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function nX(t,e,r){if(t.lte(0))return new kn(0);var n=Ew.getDigitCount(t.toNumber()),a=new kn(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new kn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new kn(Math.ceil(d))}function yve(t,e,r){var n=1,a=new kn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new kn(10).pow(Ew.getDigitCount(t)-1),a=new kn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new kn(Math.floor(t)))}else t===0?a=new kn(Math.floor((e-1)/2)):r||(a=new kn(Math.floor(t)));var o=Math.floor((e-1)/2),c=sve(ive(function(d){return a.add(new kn(d-o).mul(n)).toNumber()}),$j);return c(0,e)}function aX(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new kn(0),tickMin:new kn(0),tickMax:new kn(0)};var i=nX(new kn(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new kn(0):(o=new kn(t).add(e).div(2),o=o.sub(new kn(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new kn(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?aX(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new kn(c).mul(i)),tickMax:o.add(new kn(d).mul(i))})}function vve(t){var e=Cg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=rX([r,n]),d=Cg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(Uj($j(0,a-1).map(function(){return 1/0}))):[].concat(Uj($j(0,a-1).map(function(){return-1/0})),[p]);return r>n?zj(m):m}if(h===p)return yve(h,a,i);var x=aX(h,p,o,i),y=x.step,S=x.tickMin,w=x.tickMax,N=Ew.rangeStep(S,w.add(new kn(.1).mul(y)),y);return r>n?zj(N):N}function bve(t,e){var r=Cg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=rX([n,a]),c=Cg(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=nX(new kn(h).sub(d).div(p-1),i,0),x=[].concat(Uj(Ew.rangeStep(new kn(d),new kn(h).sub(new kn(.99).mul(m)),m)),[h]);return n>a?zj(x):x}var wve=eX(vve),Sve=eX(bve),Nve="Invariant failed";function f0(t,e){throw new Error(Nve)}var _ve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rb.apply(this,arguments)}function Tve(t,e){return kve(t)||Eve(t,e)||Ave(t,e)||jve()}function jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t,e){if(t){if(typeof t=="string")return A$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A$(t,e)}}function A$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function kve(t){if(Array.isArray(t))return t}function Cve(t,e){if(t==null)return{};var r=Ove(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ove(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ive(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oX(n.key),n)}}function Mve(t,e,r){return e&&Rve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dve(t,e,r){return e=Mb(e),Pve(t,iX()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function Pve(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lve(t)}function Lve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iX=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function Bve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fj(t,e)}function Fj(t,e){return Fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fj(t,e)}function sX(t,e,r){return e=oX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oX(t){var e=$ve(t,"string");return mf(e)=="symbol"?e:e+""}function $ve(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $x=(function(t){function e(){return Ive(this,e),Dve(this,e,arguments)}return Bve(e,t),Mve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,x=Cve(n,_ve),y=Wt(x,!1);this.props.direction==="x"&&p.type!=="number"&&f0();var S=d.map(function(w){var N=h(w,c),A=N.x,R=N.y,O=N.value,L=N.errorVal;if(!L)return null;var I=[],k,E;if(Array.isArray(L)){var j=Tve(L,2);k=j[0],E=j[1]}else k=E=L;if(i==="vertical"){var C=p.scale,q=R+a,D=q+o,$=q-o,B=C(O-k),V=C(O+E);I.push({x1:V,y1:D,x2:V,y2:$}),I.push({x1:B,y1:q,x2:V,y2:q}),I.push({x1:B,y1:D,x2:B,y2:$})}else if(i==="horizontal"){var W=m.scale,G=A+a,Y=G-o,re=G+o,ce=W(O-k),de=W(O+E);I.push({x1:Y,y1:de,x2:re,y2:de}),I.push({x1:G,y1:ce,x2:G,y2:de}),I.push({x1:Y,y1:ce,x2:re,y2:ce})}return ie.createElement(Jr,Rb({className:"recharts-errorBar",key:"bar-".concat(I.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},y),I.map(function(X){return ie.createElement("line",Rb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return ie.createElement(Jr,{className:"recharts-errorBars"},S)}}])})(ie.Component);sX($x,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});sX($x,"displayName","ErrorBar");function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function E$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E$(Object(r),!0).forEach(function(n){zve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zve(t,e,r){return e=Uve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uve(t){var e=Vve(t,"string");return Og(e)=="symbol"?e:e+""}function Vve(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lX=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=As(r,Ph);if(!o)return null;var c=Ph.defaultProps,d=c!==void 0?Nd(Nd({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var x=m.item,y=m.props,S=y.sectors||y.data||[];return p.concat(S.map(function(w){return{type:o.props.iconType||x.props.legendType,value:w.name,color:w.fill,payload:w}}))},[]):h=(n||[]).map(function(p){var m=p.item,x=m.type.defaultProps,y=x!==void 0?Nd(Nd({},x),m.props):{},S=y.dataKey,w=y.name,N=y.legendType,A=y.hide;return{inactive:A,dataKey:S,type:d.iconType||N||"square",color:M7(m),value:w||S,payload:y}}),Nd(Nd(Nd({},d),Ph.getWithHeight(o,a)),{},{payload:h,item:o})};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function k$(t){return Gve(t)||Hve(t)||qve(t)||Fve()}function Fve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qve(t,e){if(t){if(typeof t=="string")return qj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qj(t,e)}}function Hve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gve(t){if(Array.isArray(t))return qj(t)}function qj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function da(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(r),!0).forEach(function(n){Bh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bh(t,e,r){return e=Wve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wve(t){var e=Kve(t,"string");return Ig(e)=="symbol"?e:e+""}function Kve(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yi(t,e,r){return xr(t)||xr(e)?r:Ga(e)?ao(t,e,r):cr(e)?e(t):r}function Dm(t,e,r,n){var a=Gye(t,function(c){return yi(c,e)});if(r==="number"){var i=a.filter(function(c){return yt(c)||parseFloat(c)});return i.length?[jw(i),Tw(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!xr(c)}):a;return o.map(function(c){return Ga(c)||c instanceof Date?c:""})}var Xve=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,x=h>=c-1?a[0].coordinate:a[h+1].coordinate,y=void 0;if(To(m-p)!==To(x-m)){var S=[];if(To(x-m)===To(d[1]-d[0])){y=x;var w=m+d[1]-d[0];S[0]=Math.min(w,(w+p)/2),S[1]=Math.max(w,(w+p)/2)}else{y=p;var N=x+d[1]-d[0];S[0]=Math.min(m,(N+m)/2),S[1]=Math.max(m,(N+m)/2)}var A=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(e>A[0]&&e<=A[1]||e>=S[0]&&e<=S[1]){o=a[h].index;break}}else{var R=Math.min(p,x),O=Math.max(p,x);if(e>(R+m)/2&&e<=(O+m)/2){o=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){o=n[L].index;break}return o},M7=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?da(da({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},Qve=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),x=0,y=m.length;x<y;x++){var S=p[m[x]],w=S.items,N=S.cateAxisId,A=w.filter(function(E){return nc(E.type).indexOf("Bar")>=0});if(A&&A.length){var R=A[0].type.defaultProps,O=R!==void 0?da(da({},R),A[0].props):A[0].props,L=O.barSize,I=O[N];o[I]||(o[I]=[]);var k=xr(L)?r:L;o[I].push({item:A[0],stackList:A.slice(1),barSize:xr(k)?void 0:jo(k,n,0)})}}return o},Yve=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=jo(r,a,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var x=!1,y=a/d,S=o.reduce(function(L,I){return L+I.barSize||0},0);S+=(d-1)*h,S>=a&&(S-=(d-1)*h,h=0),S>=a&&y>0&&(x=!0,y*=.9,S=d*y);var w=(a-S)/2>>0,N={offset:w-h,size:0};p=o.reduce(function(L,I){var k={item:I.item,position:{offset:N.offset+N.size+h,size:x?y:I.barSize}},E=[].concat(k$(L),[k]);return N=E[E.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(j){E.push({item:j,position:N})}),E},m)}else{var A=jo(n,a,0,!0);a-2*A-(d-1)*h<=0&&(h=0);var R=(a-2*A-(d-1)*h)/d;R>1&&(R>>=0);var O=c===+c?Math.min(R,c):R;p=o.reduce(function(L,I,k){var E=[].concat(k$(L),[{item:I.item,position:{offset:A+(R+h)*k+(R-O)/2,size:O}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(j){E.push({item:j,position:E[E.length-1].position})}),E},m)}return p},Jve=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=lX({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,x=p.height,y=h.align,S=h.verticalAlign,w=h.layout;if((w==="vertical"||w==="horizontal"&&S==="middle")&&y!=="center"&&yt(e[y]))return da(da({},e),{},Bh({},y,e[y]+(m||0)));if((w==="horizontal"||w==="vertical"&&y==="center")&&S!=="middle"&&yt(e[S]))return da(da({},e),{},Bh({},S,e[S]+(x||0)))}return e},Zve=function(e,r,n){return xr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},cX=function(e,r,n,a,i){var o=r.props.children,c=Ms(o,$x).filter(function(h){return Zve(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=yi(p,n);if(xr(m))return h;var x=Array.isArray(m)?[jw(m),Tw(m)]:[m,m],y=d.reduce(function(S,w){var N=yi(p,w,0),A=x[0]-Math.abs(Array.isArray(N)?N[0]:N),R=x[1]+Math.abs(Array.isArray(N)?N[1]:N);return[Math.min(A,S[0]),Math.max(R,S[1])]},[1/0,-1/0]);return[Math.min(y[0],h[0]),Math.max(y[1],h[1])]},[1/0,-1/0])}return null},ebe=function(e,r,n,a,i){var o=r.map(function(c){return cX(e,c,n,i,a)}).filter(function(c){return!xr(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},uX=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&cX(e,d,h,a)||Dm(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},dX=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},hX=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},Zl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?To(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var x=i?i.indexOf(m):m;return{coordinate:a(x)+h,value:m,offset:h}});return p.filter(function(m){return!Ox(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,x){return{coordinate:a(m)+h,value:m,index:x,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,x){return{coordinate:a(m)+h,value:i?i[m]:m,index:x,offset:h}})},f_=new WeakMap,Hy=function(e,r){if(typeof r!="function")return e;f_.has(e)||f_.set(e,new WeakMap);var n=f_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},fX=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:_g(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:Eb(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Mm(),realScaleType:"point"}:i==="category"?{scale:_g(),realScaleType:"band"}:{scale:Eb(),realScaleType:"linear"};if(u0(a)){var d="scale".concat(uw(a));return{scale:(m$[d]||Mm)(),realScaleType:m$[d]?d:"point"}}return cr(a)?{scale:a}:{scale:Mm(),realScaleType:"point"}},O$=1e-4,pX=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-O$,o=Math.max(a[0],a[1])+O$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},tbe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},rbe=function(e,r){if(!r||r.length!==2||!yt(r[0])||!yt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!yt(e[0])||e[0]<n)&&(i[0]=n),(!yt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},nbe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=Ox(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},abe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=Ox(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},ibe={sign:nbe,expand:Gfe,none:sf,silhouette:Wfe,wiggle:Kfe,positive:abe},sbe=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=ibe[n],o=Hfe().keys(a).value(function(c,d){return+yi(c,d,0)}).order(bj).offset(i);return o(e)},obe=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(m,x){var y,S=(y=x.type)!==null&&y!==void 0&&y.defaultProps?da(da({},x.type.defaultProps),x.props):x.props,w=S.stackId,N=S.hide;if(N)return m;var A=S[n],R=m[A]||{hasStack:!1,stackGroups:{}};if(Ga(w)){var O=R.stackGroups[w]||{numericAxisId:n,cateAxisId:a,items:[]};O.items.push(x),R.hasStack=!0,R.stackGroups[w]=O}else R.stackGroups[Ix("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[x]};return da(da({},m),{},Bh({},A,R))},d),p={};return Object.keys(h).reduce(function(m,x){var y=h[x];if(y.hasStack){var S={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(w,N){var A=y.stackGroups[N];return da(da({},w),{},Bh({},N,{numericAxisId:n,cateAxisId:a,items:A.items,stackedData:sbe(e,A.items,i)}))},S)}return da(da({},m),{},Bh({},x,y))},p)},mX=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=wve(h,i,c);return e.domain([jw(p),Tw(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),x=Sve(m,i,c);return{niceTicks:x}}return null};function I$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xr(a[e.dataKey])){var c=cb(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=yi(a,xr(o)?e.dataKey:o);return xr(d)?null:e.scale(d)}var R$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=yi(o,r.dataKey,r.domain[c]);return xr(d)?null:r.scale(d)-i/2+a},lbe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},cbe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?da(da({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Ga(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},ube=function(e){return e.reduce(function(r,n){return[jw(n.concat([r[0]]).filter(yt)),Tw(n.concat([r[1]]).filter(yt))]},[1/0,-1/0])},gX=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,p){var m=ube(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},M$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,D$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hj=function(e,r,n){if(cr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(yt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(M$.test(e[0])){var i=+M$.exec(e[0])[1];a[0]=r[0]-i}else cr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(yt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(D$.test(e[1])){var o=+D$.exec(e[1])[1];a[1]=r[1]+o}else cr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Db=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=o7(r,function(m){return m.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},P$=function(e,r,n){return!e||!e.length||Bx(e,ao(n,"type.defaultProps.domain"))?r:e},xX=function(e,r){var n=e.type.defaultProps?da(da({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return da(da({},Wt(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:M7(e),value:yi(r,a),type:d,payload:r,chartType:h,hide:p})};function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function L$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(r),!0).forEach(function(n){yX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yX(t,e,r){return e=dbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dbe(t){var e=hbe(t,"string");return Rg(e)=="symbol"?e:e+""}function hbe(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fbe(t,e){return xbe(t)||gbe(t,e)||mbe(t,e)||pbe()}function pbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mbe(t,e){if(t){if(typeof t=="string")return B$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B$(t,e)}}function B$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function xbe(t){if(Array.isArray(t))return t}var Pb=Math.PI/180,ybe=function(e){return e*180/Math.PI},On=function(e,r,n,a){return{x:e+Math.cos(-Pb*a)*n,y:r+Math.sin(-Pb*a)*n}},vbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},bbe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=jo(e.cx,o,o/2),m=jo(e.cy,c,c/2),x=vbe(o,c,n),y=jo(e.innerRadius,x,0),S=jo(e.outerRadius,x,x*.8),w=Object.keys(r);return w.reduce(function(N,A){var R=r[A],O=R.domain,L=R.reversed,I;if(xr(R.range))a==="angleAxis"?I=[d,h]:a==="radiusAxis"&&(I=[y,S]),L&&(I=[I[1],I[0]]);else{I=R.range;var k=I,E=fbe(k,2);d=E[0],h=E[1]}var j=fX(R,i),C=j.realScaleType,q=j.scale;q.domain(O).range(I),pX(q);var D=mX(q,Vl(Vl({},R),{},{realScaleType:C})),$=Vl(Vl(Vl({},R),D),{},{range:I,radius:S,realScaleType:C,scale:q,cx:p,cy:m,innerRadius:y,outerRadius:S,startAngle:d,endAngle:h});return Vl(Vl({},N),{},yX({},A,$))},{})},wbe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Sbe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=wbe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:ybe(h),angleInRadian:h}},Nbe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},_be=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},$$=function(e,r){var n=e.x,a=e.y,i=Sbe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var p=Nbe(r),m=p.startAngle,x=p.endAngle,y=c,S;if(m<=x){for(;y>x;)y-=360;for(;y<m;)y+=360;S=y>=m&&y<=x}else{for(;y>m;)y-=360;for(;y<x;)y+=360;S=y>=x&&y<=m}return S?Vl(Vl({},r),{},{radius:o,angle:_be(y,r)}):null},vX=function(e){return!T.isValidElement(e)&&!cr(e)&&typeof e!="boolean"?e.className:""};function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}var Tbe=["offset"];function jbe(t){return Cbe(t)||kbe(t)||Ebe(t)||Abe()}function Abe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ebe(t,e){if(t){if(typeof t=="string")return Gj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gj(t,e)}}function kbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cbe(t){if(Array.isArray(t))return Gj(t)}function Gj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Obe(t,e){if(t==null)return{};var r=Ibe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ibe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function z$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Va(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z$(Object(r),!0).forEach(function(n){Rbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rbe(t,e,r){return e=Mbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mbe(t){var e=Dbe(t,"string");return Mg(e)=="symbol"?e:e+""}function Dbe(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dg(){return Dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dg.apply(this,arguments)}var Pbe=function(e){var r=e.value,n=e.formatter,a=xr(e.children)?r:e.children;return cr(n)?n(a):a},Lbe=function(e,r){var n=To(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Bbe=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,x=d.outerRadius,y=d.startAngle,S=d.endAngle,w=d.clockWise,N=(m+x)/2,A=Lbe(y,S),R=A>=0?1:-1,O,L;a==="insideStart"?(O=y+R*o,L=w):a==="insideEnd"?(O=S-R*o,L=!w):a==="end"&&(O=S+R*o,L=w),L=A<=0?L:!L;var I=On(h,p,N,O),k=On(h,p,N,O+(L?1:-1)*359),E="M".concat(I.x,",").concat(I.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(L?0:1,`,
    `).concat(k.x,",").concat(k.y),j=xr(e.id)?Ix("recharts-radial-line-"):e.id;return ie.createElement("text",Dg({},n,{dominantBaseline:"central",className:Sr("recharts-radial-bar-label",c)}),ie.createElement("defs",null,ie.createElement("path",{id:j,d:E})),ie.createElement("textPath",{xlinkHref:"#".concat(j)},r))},$be=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,x=(p+m)/2;if(a==="outside"){var y=On(o,c,h+n,x),S=y.x,w=y.y;return{x:S,y:w,textAnchor:S>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var N=(d+h)/2,A=On(o,c,N,x),R=A.x,O=A.y;return{x:R,y:O,textAnchor:"middle",verticalAnchor:"middle"}},zbe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,p=o.height,m=p>=0?1:-1,x=m*a,y=m>0?"end":"start",S=m>0?"start":"end",w=h>=0?1:-1,N=w*a,A=w>0?"end":"start",R=w>0?"start":"end";if(i==="top"){var O={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:y};return Va(Va({},O),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+x,textAnchor:"middle",verticalAnchor:S};return Va(Va({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var I={x:c-N,y:d+p/2,textAnchor:A,verticalAnchor:"middle"};return Va(Va({},I),n?{width:Math.max(I.x-n.x,0),height:p}:{})}if(i==="right"){var k={x:c+h+N,y:d+p/2,textAnchor:R,verticalAnchor:"middle"};return Va(Va({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:p}:{})}var E=n?{width:h,height:p}:{};return i==="insideLeft"?Va({x:c+N,y:d+p/2,textAnchor:R,verticalAnchor:"middle"},E):i==="insideRight"?Va({x:c+h-N,y:d+p/2,textAnchor:A,verticalAnchor:"middle"},E):i==="insideTop"?Va({x:c+h/2,y:d+x,textAnchor:"middle",verticalAnchor:S},E):i==="insideBottom"?Va({x:c+h/2,y:d+p-x,textAnchor:"middle",verticalAnchor:y},E):i==="insideTopLeft"?Va({x:c+N,y:d+x,textAnchor:R,verticalAnchor:S},E):i==="insideTopRight"?Va({x:c+h-N,y:d+x,textAnchor:A,verticalAnchor:S},E):i==="insideBottomLeft"?Va({x:c+N,y:d+p-x,textAnchor:R,verticalAnchor:y},E):i==="insideBottomRight"?Va({x:c+h-N,y:d+p-x,textAnchor:A,verticalAnchor:y},E):Wf(i)&&(yt(i.x)||Pd(i.x))&&(yt(i.y)||Pd(i.y))?Va({x:c+jo(i.x,h),y:d+jo(i.y,p),textAnchor:"end",verticalAnchor:"end"},E):Va({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Ube=function(e){return"cx"in e&&yt(e.cx)};function mi(t){var e=t.offset,r=e===void 0?5:e,n=Obe(t,Tbe),a=Va({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,x=a.textBreakAll;if(!i||xr(c)&&xr(d)&&!T.isValidElement(h)&&!cr(h))return null;if(T.isValidElement(h))return T.cloneElement(h,a);var y;if(cr(h)){if(y=T.createElement(h,a),T.isValidElement(y))return y}else y=Pbe(a);var S=Ube(i),w=Wt(a,!0);if(S&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Bbe(a,y,w);var N=S?$be(a):zbe(a);return ie.createElement(df,Dg({className:Sr("recharts-label",m)},w,N,{breakAll:x}),y)}mi.displayName="Label";var bX=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,x=e.y,y=e.top,S=e.left,w=e.width,N=e.height,A=e.clockWise,R=e.labelViewBox;if(R)return R;if(yt(w)&&yt(N)){if(yt(m)&&yt(x))return{x:m,y:x,width:w,height:N};if(yt(y)&&yt(S))return{x:y,y:S,width:w,height:N}}return yt(m)&&yt(x)?{x:m,y:x,width:0,height:0}:yt(r)&&yt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:A}:e.viewBox?e.viewBox:{}},Vbe=function(e,r){return e?e===!0?ie.createElement(mi,{key:"label-implicit",viewBox:r}):Ga(e)?ie.createElement(mi,{key:"label-implicit",viewBox:r,value:e}):T.isValidElement(e)?e.type===mi?T.cloneElement(e,{key:"label-implicit",viewBox:r}):ie.createElement(mi,{key:"label-implicit",content:e,viewBox:r}):cr(e)?ie.createElement(mi,{key:"label-implicit",content:e,viewBox:r}):Wf(e)?ie.createElement(mi,Dg({viewBox:r},e,{key:"label-implicit"})):null:null},Fbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=bX(e),o=Ms(a,mi).map(function(d,h){return T.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=Vbe(e.label,r||i);return[c].concat(jbe(o))};mi.parseViewBox=bX;mi.renderCallByParent=Fbe;var p_,U$;function qbe(){if(U$)return p_;U$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return p_=t,p_}var Hbe=qbe();const wX=sn(Hbe);function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}var Gbe=["valueAccessor"],Wbe=["data","dataKey","clockWise","id","textBreakAll"];function Kbe(t){return Jbe(t)||Ybe(t)||Qbe(t)||Xbe()}function Xbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qbe(t,e){if(t){if(typeof t=="string")return Wj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wj(t,e)}}function Ybe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Jbe(t){if(Array.isArray(t))return Wj(t)}function Wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lb.apply(this,arguments)}function V$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function F$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(r),!0).forEach(function(n){Zbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zbe(t,e,r){return e=e2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e2e(t){var e=t2e(t,"string");return Pg(e)=="symbol"?e:e+""}function t2e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q$(t,e){if(t==null)return{};var r=r2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var n2e=function(e){return Array.isArray(e.value)?wX(e.value):e.value};function sc(t){var e=t.valueAccessor,r=e===void 0?n2e:e,n=q$(t,Gbe),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=q$(n,Wbe);return!a||!a.length?null:ie.createElement(Jr,{className:"recharts-label-list"},a.map(function(p,m){var x=xr(i)?r(p,m):yi(p&&p.payload,i),y=xr(c)?{}:{id:"".concat(c,"-").concat(m)};return ie.createElement(mi,Lb({},Wt(p,!0),h,y,{parentViewBox:p.parentViewBox,value:x,textBreakAll:d,viewBox:mi.parseViewBox(xr(o)?p:F$(F$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}sc.displayName="LabelList";function a2e(t,e){return t?t===!0?ie.createElement(sc,{key:"labelList-implicit",data:e}):ie.isValidElement(t)||cr(t)?ie.createElement(sc,{key:"labelList-implicit",data:e,content:t}):Wf(t)?ie.createElement(sc,Lb({data:e},t,{key:"labelList-implicit"})):null:null}function i2e(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Ms(n,sc).map(function(o,c){return T.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=a2e(t.label,e);return[i].concat(Kbe(a))}sc.renderCallByParent=i2e;function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function Kj(){return Kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kj.apply(this,arguments)}function H$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function G$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H$(Object(r),!0).forEach(function(n){s2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s2e(t,e,r){return e=o2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o2e(t){var e=l2e(t,"string");return Lg(e)=="symbol"?e:e+""}function l2e(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c2e=function(e,r){var n=To(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Gy=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/Pb,x=h?i:i+o*m,y=On(r,n,p,x),S=On(r,n,a,x),w=h?i-o*m:i,N=On(r,n,p*Math.cos(m*Pb),w);return{center:y,circleTangency:S,lineTangency:N,theta:m}},SX=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=c2e(o,c),h=o+d,p=On(r,n,i,o),m=On(r,n,i,h),x="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var y=On(r,n,a,o),S=On(r,n,a,h);x+="L ".concat(S.x,",").concat(S.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(y.x,",").concat(y.y," Z")}else x+="L ".concat(r,",").concat(n," Z");return x},u2e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=To(p-h),x=Gy({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),y=x.circleTangency,S=x.lineTangency,w=x.theta,N=Gy({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),A=N.circleTangency,R=N.lineTangency,O=N.theta,L=d?Math.abs(h-p):Math.abs(h-p)-w-O;if(L<0)return c?"M ".concat(S.x,",").concat(S.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):SX({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var I="M ".concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(A.x,",").concat(A.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,`
  `);if(a>0){var k=Gy({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),E=k.circleTangency,j=k.lineTangency,C=k.theta,q=Gy({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),D=q.circleTangency,$=q.lineTangency,B=q.theta,V=d?Math.abs(h-p):Math.abs(h-p)-C-B;if(V<0&&o===0)return"".concat(I,"L").concat(r,",").concat(n,"Z");I+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(V>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(j.x,",").concat(j.y,"Z")}else I+="L".concat(r,",").concat(n,"Z");return I},d2e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},NX=function(e){var r=G$(G$({},d2e),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,x=r.className;if(o<i||p===m)return null;var y=Sr("recharts-sector",x),S=o-i,w=jo(c,S,0,!0),N;return w>0&&Math.abs(p-m)<360?N=u2e({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(w,S/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):N=SX({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),ie.createElement("path",Kj({},Wt(r,!0),{className:y,d:N,role:"img"}))};function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function Xj(){return Xj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xj.apply(this,arguments)}function W$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(r),!0).forEach(function(n){h2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h2e(t,e,r){return e=f2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f2e(t){var e=p2e(t,"string");return Bg(e)=="symbol"?e:e+""}function p2e(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X$={curveBasisClosed:Mfe,curveBasisOpen:Dfe,curveBasis:Rfe,curveBumpX:vfe,curveBumpY:bfe,curveLinearClosed:Pfe,curveLinear:hw,curveMonotoneX:Lfe,curveMonotoneY:Bfe,curveNatural:$fe,curveStep:zfe,curveStepAfter:Vfe,curveStepBefore:Ufe},Wy=function(e){return e.x===+e.x&&e.y===+e.y},om=function(e){return e.x},lm=function(e){return e.y},m2e=function(e,r){if(cr(e))return e;var n="curve".concat(uw(e));return(n==="curveMonotone"||n==="curveBump")&&r?X$["".concat(n).concat(r==="vertical"?"Y":"X")]:X$[n]||hw},g2e=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=m2e(n,c),m=h?i.filter(function(w){return Wy(w)}):i,x;if(Array.isArray(o)){var y=h?o.filter(function(w){return Wy(w)}):o,S=m.map(function(w,N){return K$(K$({},w),{},{base:y[N]})});return c==="vertical"?x=By().y(lm).x1(om).x0(function(w){return w.base.x}):x=By().x(om).y1(lm).y0(function(w){return w.base.y}),x.defined(Wy).curve(p),x(S)}return c==="vertical"&&yt(o)?x=By().y(lm).x1(om).x0(o):yt(o)?x=By().x(om).y1(lm).y0(o):x=wW().x(om).y(lm),x.defined(Wy).curve(p),x(m)},Qj=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?g2e(e):a;return T.createElement("path",Xj({},Wt(e,!1),ub(e),{className:Sr("recharts-curve",r),d:o,ref:i}))},m_={exports:{}},g_,Q$;function x2e(){if(Q$)return g_;Q$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return g_=t,g_}var x_,Y$;function y2e(){if(Y$)return x_;Y$=1;var t=x2e();function e(){}function r(){}return r.resetWarningCache=e,x_=function(){function n(o,c,d,h,p,m){if(m!==t){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},x_}var J$;function v2e(){return J$||(J$=1,m_.exports=y2e()()),m_.exports}var b2e=v2e();const mn=sn(b2e),{getOwnPropertyNames:w2e,getOwnPropertySymbols:S2e}=Object,{hasOwnProperty:N2e}=Object.prototype;function y_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Ky(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function _2e(t){return t!=null?t[Symbol.toStringTag]:void 0}function Z$(t){return w2e(t).concat(S2e(t))}const T2e=Object.hasOwn||((t,e)=>N2e.call(t,e));function E0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const j2e="__v",A2e="__o",E2e="_owner",{getOwnPropertyDescriptor:ez,keys:tz}=Object;function k2e(t,e){return t.byteLength===e.byteLength&&Bb(new Uint8Array(t),new Uint8Array(e))}function C2e(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function O2e(t,e){return t.byteLength===e.byteLength&&Bb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function I2e(t,e){return E0(t.getTime(),e.getTime())}function R2e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function M2e(t,e){return t===e}function rz(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const x=o.value,y=c.value;if(r.equals(x[0],y[0],d,m,t,e,r)&&r.equals(x[1],y[1],x[0],y[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const D2e=E0;function P2e(t,e,r){const n=tz(t);let a=n.length;if(tz(e).length!==a)return!1;for(;a-- >0;)if(!_X(t,e,r,n[a]))return!1;return!0}function cm(t,e,r){const n=Z$(t);let a=n.length;if(Z$(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!_X(t,e,r,i)||(o=ez(t,i),c=ez(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function L2e(t,e){return E0(t.valueOf(),e.valueOf())}function B2e(t,e){return t.source===e.source&&t.flags===e.flags}function nz(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function Bb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function $2e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function _X(t,e,r,n){return(n===E2e||n===A2e||n===j2e)&&(t.$$typeof||e.$$typeof)?!0:T2e(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const z2e="[object ArrayBuffer]",U2e="[object Arguments]",V2e="[object Boolean]",F2e="[object DataView]",q2e="[object Date]",H2e="[object Error]",G2e="[object Map]",W2e="[object Number]",K2e="[object Object]",X2e="[object RegExp]",Q2e="[object Set]",Y2e="[object String]",J2e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Z2e="[object URL]",ewe=Object.prototype.toString;function twe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:x,areUrlsEqual:y,unknownTagComparators:S}){return function(N,A,R){if(N===A)return!0;if(N==null||A==null)return!1;const O=typeof N;if(O!==typeof A)return!1;if(O!=="object")return O==="number"?c(N,A,R):O==="function"?i(N,A,R):!1;const L=N.constructor;if(L!==A.constructor)return!1;if(L===Object)return d(N,A,R);if(Array.isArray(N))return e(N,A,R);if(L===Date)return n(N,A,R);if(L===RegExp)return p(N,A,R);if(L===Map)return o(N,A,R);if(L===Set)return m(N,A,R);const I=ewe.call(N);if(I===q2e)return n(N,A,R);if(I===X2e)return p(N,A,R);if(I===G2e)return o(N,A,R);if(I===Q2e)return m(N,A,R);if(I===K2e)return typeof N.then!="function"&&typeof A.then!="function"&&d(N,A,R);if(I===Z2e)return y(N,A,R);if(I===H2e)return a(N,A,R);if(I===U2e)return d(N,A,R);if(J2e[I])return x(N,A,R);if(I===z2e)return t(N,A,R);if(I===F2e)return r(N,A,R);if(I===V2e||I===W2e||I===Y2e)return h(N,A,R);if(S){let k=S[I];if(!k){const E=_2e(N);E&&(k=S[E])}if(k)return k(N,A,R)}return!1}}function rwe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:k2e,areArraysEqual:r?cm:C2e,areDataViewsEqual:O2e,areDatesEqual:I2e,areErrorsEqual:R2e,areFunctionsEqual:M2e,areMapsEqual:r?y_(rz,cm):rz,areNumbersEqual:D2e,areObjectsEqual:r?cm:P2e,arePrimitiveWrappersEqual:L2e,areRegExpsEqual:B2e,areSetsEqual:r?y_(nz,cm):nz,areTypedArraysEqual:r?y_(Bb,cm):Bb,areUrlsEqual:$2e,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Ky(n.areArraysEqual),i=Ky(n.areMapsEqual),o=Ky(n.areObjectsEqual),c=Ky(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function nwe(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function awe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const iwe=Xu();Xu({strict:!0});Xu({circular:!0});Xu({circular:!0,strict:!0});Xu({createInternalComparator:()=>E0});Xu({strict:!0,createInternalComparator:()=>E0});Xu({circular:!0,createInternalComparator:()=>E0});Xu({circular:!0,createInternalComparator:()=>E0,strict:!0});function Xu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=rwe(t),o=twe(i),c=r?r(o):nwe(o);return awe({circular:e,comparator:o,createState:n,equals:c,strict:a})}function swe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function az(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):swe(a)};requestAnimationFrame(n)}function Yj(t){"@babel/helpers - typeof";return Yj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yj(t)}function owe(t){return dwe(t)||uwe(t)||cwe(t)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cwe(t,e){if(t){if(typeof t=="string")return iz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iz(t,e)}}function iz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dwe(t){if(Array.isArray(t))return t}function hwe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=owe(o),d=c[0],h=c.slice(1);if(typeof d=="number"){az(a.bind(null,h),d);return}a(d),az(a.bind(null,h));return}Yj(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(r),!0).forEach(function(n){TX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TX(t,e,r){return e=fwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fwe(t){var e=pwe(t,"string");return $g(e)==="symbol"?e:String(e)}function pwe(t,e){if($g(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mwe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},gwe=function(e){return e},xwe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Pm=function(e,r){return Object.keys(r).reduce(function(n,a){return oz(oz({},n),{},TX({},a,e(a,r[a])))},{})},lz=function(e,r,n){return e.map(function(a){return"".concat(xwe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function ywe(t,e){return wwe(t)||bwe(t,e)||jX(t,e)||vwe()}function vwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function wwe(t){if(Array.isArray(t))return t}function Swe(t){return Twe(t)||_we(t)||jX(t)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jX(t,e){if(t){if(typeof t=="string")return Jj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jj(t,e)}}function _we(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Twe(t){if(Array.isArray(t))return Jj(t)}function Jj(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $b=1e-4,AX=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},EX=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},cz=function(e,r){return function(n){var a=AX(e,r);return EX(a,n)}},jwe=function(e,r){return function(n){var a=AX(e,r),i=[].concat(Swe(a.map(function(o,c){return o*c}).slice(1)),[0]);return EX(i,n)}},uz=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(N){return parseFloat(N)}),p=ywe(h,4);a=p[0],i=p[1],o=p[2],c=p[3]}}}var m=cz(a,o),x=cz(i,c),y=jwe(a,o),S=function(A){return A>1?1:A<0?0:A},w=function(A){for(var R=A>1?1:A,O=R,L=0;L<8;++L){var I=m(O)-R,k=y(O);if(Math.abs(I-R)<$b||k<$b)return x(O);O=S(O-I/k)}return x(O)};return w.isStepper=!1,w},Awe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(p,m,x){var y=-(p-m)*n,S=x*i,w=x+(y-S)*c/1e3,N=x*c/1e3+p;return Math.abs(N-m)<$b&&Math.abs(w)<$b?[m,0]:[N,w]};return d.isStepper=!0,d.dt=c,d},Ewe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uz(a);case"spring":return Awe();default:if(a.split("(")[0]==="cubic-bezier")return uz(a)}return typeof a=="function"?a:null};function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function dz(t){return Owe(t)||Cwe(t)||kX(t)||kwe()}function kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Owe(t){if(Array.isArray(t))return eA(t)}function hz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(r),!0).forEach(function(n){Zj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zj(t,e,r){return e=Iwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iwe(t){var e=Rwe(t,"string");return zg(e)==="symbol"?e:String(e)}function Rwe(t,e){if(zg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mwe(t,e){return Lwe(t)||Pwe(t,e)||kX(t,e)||Dwe()}function Dwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kX(t,e){if(t){if(typeof t=="string")return eA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eA(t,e)}}function eA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Lwe(t){if(Array.isArray(t))return t}var zb=function(e,r,n){return e+(r-e)*n},tA=function(e){var r=e.from,n=e.to;return r!==n},Bwe=function t(e,r,n){var a=Pm(function(i,o){if(tA(o)){var c=e(o.from,o.to,o.velocity),d=Mwe(c,2),h=d[0],p=d[1];return fi(fi({},o),{},{from:h,velocity:p})}return o},r);return n<1?Pm(function(i,o){return tA(o)?fi(fi({},o),{},{velocity:zb(o.velocity,a[i].velocity,n),from:zb(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const $we=(function(t,e,r,n,a){var i=mwe(t,e),o=i.reduce(function(N,A){return fi(fi({},N),{},Zj({},A,[t[A],e[A]]))},{}),c=i.reduce(function(N,A){return fi(fi({},N),{},Zj({},A,{from:t[A],velocity:0,to:e[A]}))},{}),d=-1,h,p,m=function(){return null},x=function(){return Pm(function(A,R){return R.from},c)},y=function(){return!Object.values(c).filter(tA).length},S=function(A){h||(h=A);var R=A-h,O=R/r.dt;c=Bwe(r,c,O),a(fi(fi(fi({},t),e),x())),h=A,y()||(d=requestAnimationFrame(m))},w=function(A){p||(p=A);var R=(A-p)/n,O=Pm(function(I,k){return zb.apply(void 0,dz(k).concat([r(R)]))},o);if(a(fi(fi(fi({},t),e),O)),R<1)d=requestAnimationFrame(m);else{var L=Pm(function(I,k){return zb.apply(void 0,dz(k).concat([r(1)]))},o);a(fi(fi(fi({},t),e),L))}};return m=r.isStepper?S:w,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}var zwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Uwe(t,e){if(t==null)return{};var r=Vwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vwe(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function v_(t){return Gwe(t)||Hwe(t)||qwe(t)||Fwe()}function Fwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qwe(t,e){if(t){if(typeof t=="string")return rA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rA(t,e)}}function Hwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gwe(t){if(Array.isArray(t))return rA(t)}function rA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fz(Object(r),!0).forEach(function(n){wm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wm(t,e,r){return e=CX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CX(n.key),n)}}function Xwe(t,e,r){return e&&Kwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CX(t){var e=Qwe(t,"string");return gf(e)==="symbol"?e:String(e)}function Qwe(t,e){if(gf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ywe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nA(t,e)}function nA(t,e){return nA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nA(t,e)}function Jwe(t){var e=Zwe();return function(){var n=Ub(t),a;if(e){var i=Ub(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return aA(this,a)}}function aA(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iA(t)}function iA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}var dl=(function(t){Ywe(r,t);var e=Jwe(r);function r(n,a){var i;Wwe(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,p=o.to,m=o.steps,x=o.children,y=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(iA(i)),i.changeStyle=i.changeStyle.bind(iA(i)),!c||y<=0)return i.state={style:{}},typeof x=="function"&&(i.state={style:p}),aA(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof x=="function")return i.state={style:h},aA(i);i.state={style:d?wm({},d,h):h}}else i.state={style:{}};return i}return Xwe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,x=this.state.style;if(c){if(!o){var y={style:d?wm({},d,p):p};this.state&&x&&(d&&x[d]!==p||!d&&x!==p)&&this.setState(y);return}if(!(iwe(a.to,p)&&a.canBegin&&a.isActive)){var S=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var w=S||h?m:a.to;if(this.state&&x){var N={style:d?wm({},d,w):w};(d&&x[d]!==w||!d&&x!==w)&&this.setState(N)}this.runAnimation(vo(vo({},this.props),{},{from:w,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,x=a.onAnimationStart,y=$we(o,c,Ewe(h),d,this.changeStyle),S=function(){i.stopJSAnimation=y()};this.manager.start([x,p,S,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],p=h.style,m=h.duration,x=m===void 0?0:m,y=function(w,N,A){if(A===0)return w;var R=N.duration,O=N.easing,L=O===void 0?"ease":O,I=N.style,k=N.properties,E=N.onAnimationEnd,j=A>0?o[A-1]:N,C=k||Object.keys(I);if(typeof L=="function"||L==="spring")return[].concat(v_(w),[i.runJSAnimation.bind(i,{from:j.style,to:I,duration:R,easing:L}),R]);var q=lz(C,R,L),D=vo(vo(vo({},j.style),I),{},{transition:q});return[].concat(v_(w),[D,R,E]).filter(gwe)};return this.manager.start([d].concat(v_(o.reduce(y,[p,Math.max(x,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=hwe());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,x=a.steps,y=a.children,S=this.manager;if(this.unSubscribe=S.subscribe(this.handleStyleChange),typeof h=="function"||typeof y=="function"||h==="spring"){this.runJSAnimation(a);return}if(x.length>1){this.runStepAnimation(a);return}var w=c?wm({},c,d):d,N=lz(Object.keys(w),o,h);S.start([p,i,vo(vo({},w),{},{transition:N}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=Uwe(a,zwe),h=T.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||o<=0)return i;var m=function(y){var S=y.props,w=S.style,N=w===void 0?{}:w,A=S.className,R=T.cloneElement(y,vo(vo({},d),{},{style:vo(vo({},N),p),className:A}));return R};return h===1?m(T.Children.only(i)):ie.createElement("div",null,T.Children.map(i,function(x){return m(x)}))}}]),r})(T.PureComponent);dl.displayName="Animate";dl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};dl.propTypes={from:mn.oneOfType([mn.object,mn.string]),to:mn.oneOfType([mn.object,mn.string]),attributeName:mn.string,duration:mn.number,begin:mn.number,easing:mn.oneOfType([mn.string,mn.func]),steps:mn.arrayOf(mn.shape({duration:mn.number.isRequired,style:mn.object.isRequired,easing:mn.oneOfType([mn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),mn.func]),properties:mn.arrayOf("string"),onAnimationEnd:mn.func})),children:mn.oneOfType([mn.node,mn.func]),isActive:mn.bool,canBegin:mn.bool,onAnimationEnd:mn.func,shouldReAnimate:mn.bool,onAnimationStart:mn.func,onAnimationReStart:mn.func};function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vb.apply(this,arguments)}function e4e(t,e){return a4e(t)||n4e(t,e)||r4e(t,e)||t4e()}function t4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r4e(t,e){if(t){if(typeof t=="string")return pz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pz(t,e)}}function pz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function n4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function a4e(t){if(Array.isArray(t))return t}function mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(r),!0).forEach(function(n){i4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i4e(t,e,r){return e=s4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s4e(t){var e=o4e(t,"string");return Ug(e)=="symbol"?e:e+""}function o4e(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xz=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],x=0,y=4;x<y;x++)m[x]=i[x]>o?o:i[x];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);p="M ".concat(e,",").concat(r+c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+d*S,",").concat(r,`
            L `).concat(e+n-d*S,",").concat(r,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*S,`
            L `).concat(e+n,",").concat(r+a-c*S,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e+n-d*S,",").concat(r+a,`
            L `).concat(e+d*S,",").concat(r+a,`
            A `).concat(S,",").concat(S,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*S," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},l4e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(o,o+d),x=Math.max(o,o+d);return n>=h&&n<=p&&a>=m&&a<=x}return!1},c4e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},D7=function(e){var r=gz(gz({},c4e),e),n=T.useRef(),a=T.useState(-1),i=e4e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,x=r.radius,y=r.className,S=r.animationEasing,w=r.animationDuration,N=r.animationBegin,A=r.isAnimationActive,R=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var O=Sr("recharts-rectangle",y);return R?ie.createElement(dl,{canBegin:o>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:w,animationEasing:S,isActive:R},function(L){var I=L.width,k=L.height,E=L.x,j=L.y;return ie.createElement(dl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:w,isActive:A,easing:S},ie.createElement("path",Vb({},Wt(r,!0),{className:O,d:xz(E,j,I,k,x),ref:n})))}):ie.createElement("path",Vb({},Wt(r,!0),{className:O,d:xz(d,h,p,m,x)}))},u4e=["points","className","baseLinePoints","connectNulls"];function Th(){return Th=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Th.apply(this,arguments)}function d4e(t,e){if(t==null)return{};var r=h4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yz(t){return g4e(t)||m4e(t)||p4e(t)||f4e()}function f4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p4e(t,e){if(t){if(typeof t=="string")return sA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sA(t,e)}}function m4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g4e(t){if(Array.isArray(t))return sA(t)}function sA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vz=function(e){return e&&e.x===+e.x&&e.y===+e.y},x4e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){vz(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),vz(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Lm=function(e,r){var n=x4e(e);r&&(n=[n.reduce(function(i,o){return[].concat(yz(i),yz(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},y4e=function(e,r,n){var a=Lm(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Lm(r.reverse(),n).slice(1))},OX=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=d4e(e,u4e);if(!r||!r.length)return null;var c=Sr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=y4e(r,a,i);return ie.createElement("g",{className:c},ie.createElement("path",Th({},Wt(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?ie.createElement("path",Th({},Wt(o,!0),{fill:"none",d:Lm(r,i)})):null,d?ie.createElement("path",Th({},Wt(o,!0),{fill:"none",d:Lm(a,i)})):null)}var p=Lm(r,i);return ie.createElement("path",Th({},Wt(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:c,d:p}))};function oA(){return oA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oA.apply(this,arguments)}var kw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=Sr("recharts-dot",i);return r===+r&&n===+n&&a===+a?T.createElement("circle",oA({},Wt(e,!1),ub(e),{className:o,cx:r,cy:n,r:a})):null};function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}var v4e=["x","y","top","left","width","height","className"];function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lA.apply(this,arguments)}function bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(r),!0).forEach(function(n){w4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w4e(t,e,r){return e=S4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S4e(t){var e=N4e(t,"string");return Vg(e)=="symbol"?e:e+""}function N4e(t,e){if(Vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _4e(t,e){if(t==null)return{};var r=T4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function T4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var j4e=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},A4e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,x=e.height,y=x===void 0?0:x,S=e.className,w=_4e(e,v4e),N=b4e({x:n,y:i,top:c,left:h,width:m,height:y},w);return!yt(n)||!yt(i)||!yt(m)||!yt(y)||!yt(c)||!yt(h)?null:ie.createElement("path",lA({},Wt(N,!0),{className:Sr("recharts-cross",S),d:j4e(n,i,m,y,c,h)}))},E4e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function k4e(t,e){if(t==null)return{};var r=C4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yc(){return yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yc.apply(this,arguments)}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){O4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O4e(t,e,r){return e=I4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I4e(t){var e=R4e(t,"string");return Fg(e)=="symbol"?e:e+""}function R4e(t,e){if(Fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M4e=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=On(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},D4e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=qg({stroke:"#ccc"},Wt(e,!1));return ie.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var p=On(r,n,a,h),m=On(r,n,i,h);return ie.createElement("line",yc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},P4e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=qg(qg({stroke:"#ccc"},Wt(e,!1)),{},{fill:"none"});return ie.createElement("circle",yc({},o,{className:Sr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},L4e=function(e){var r=e.radius,n=e.index,a=qg(qg({stroke:"#ccc"},Wt(e,!1)),{},{fill:"none"});return ie.createElement("path",yc({},a,{className:Sr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:M4e(r,e.cx,e.cy,e.polarAngles)}))},B4e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:ie.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?ie.createElement(P4e,yc({key:o},e,{radius:a,index:i})):ie.createElement(L4e,yc({key:o},e,{radius:a,index:i}))}))},IX=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,x=e.radialLines,y=x===void 0?!0:x,S=k4e(e,E4e);return h<=0?null:ie.createElement("g",{className:"recharts-polar-grid"},ie.createElement(D4e,yc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},S)),ie.createElement(B4e,yc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:y},S)))};IX.displayName="PolarGrid";var b_,Sz;function $4e(){if(Sz)return b_;Sz=1;var t=_w(),e=HK(),r=xl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return b_=n,b_}var z4e=$4e();const U4e=sn(z4e);var w_,Nz;function V4e(){if(Nz)return w_;Nz=1;var t=_w(),e=xl(),r=GK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return w_=n,w_}var F4e=V4e();const q4e=sn(F4e);var H4e=["cx","cy","angle","ticks","axisLine"],G4e=["ticks","tick","angle","tickFormatter","stroke"];function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bm.apply(this,arguments)}function _z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _d(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(r),!0).forEach(function(n){Cw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tz(t,e){if(t==null)return{};var r=W4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function W4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function K4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MX(n.key),n)}}function X4e(t,e,r){return e&&jz(t.prototype,e),r&&jz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q4e(t,e,r){return e=Fb(e),Y4e(t,RX()?Reflect.construct(e,r||[],Fb(t).constructor):e.apply(t,r))}function Y4e(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J4e(t)}function J4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RX=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(t)}function Z4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cA(t,e)}function cA(t,e){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cA(t,e)}function Cw(t,e,r){return e=MX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MX(t){var e=e5e(t,"string");return xf(e)=="symbol"?e:e+""}function e5e(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zx=(function(t){function e(){return K4e(this,e),Q4e(this,e,arguments)}return Z4e(e,t),X4e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return On(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=U4e(c,function(p){return p.coordinate||0}),h=q4e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=Tz(n,H4e),p=c.reduce(function(S,w){return[Math.min(S[0],w.coordinate),Math.max(S[1],w.coordinate)]},[1/0,-1/0]),m=On(a,i,p[0],o),x=On(a,i,p[1],o),y=_d(_d(_d({},Wt(h,!1)),{},{fill:"none"},Wt(d,!1)),{},{x1:m.x,y1:m.y,x2:x.x,y2:x.y});return ie.createElement("line",Bm({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=Tz(a,G4e),m=this.getTickTextAnchor(),x=Wt(p,!1),y=Wt(o,!1),S=i.map(function(w,N){var A=n.getTickValueCoord(w),R=_d(_d(_d(_d({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(A.x,", ").concat(A.y,")")},x),{},{stroke:"none",fill:h},y),{},{index:N},A),{},{payload:w});return ie.createElement(Jr,Bm({className:Sr("recharts-polar-radius-axis-tick",vX(o)),key:"tick-".concat(w.coordinate)},d0(n.props,w,N)),e.renderTickItem(o,R,d?d(w.value,N):w.value))});return ie.createElement(Jr,{className:"recharts-polar-radius-axis-ticks"},S)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:ie.createElement(Jr,{className:Sr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),mi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,a):cr(n)?o=n(a):o=ie.createElement(df,Bm({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(T.PureComponent);Cw(zx,"displayName","PolarRadiusAxis");Cw(zx,"axisType","radiusAxis");Cw(zx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Md.apply(this,arguments)}function Az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Td(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(r),!0).forEach(function(n){Ow(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ez(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PX(n.key),n)}}function r5e(t,e,r){return e&&Ez(t.prototype,e),r&&Ez(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n5e(t,e,r){return e=qb(e),a5e(t,DX()?Reflect.construct(e,r||[],qb(t).constructor):e.apply(t,r))}function a5e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i5e(t)}function i5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DX=function(){return!!t})()}function qb(t){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(t)}function s5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uA(t,e)}function uA(t,e){return uA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uA(t,e)}function Ow(t,e,r){return e=PX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PX(t){var e=o5e(t,"string");return yf(e)=="symbol"?e:e+""}function o5e(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var l5e=Math.PI/180,kz=1e-5,Ux=(function(t){function e(){return t5e(this,e),n5e(this,e,arguments)}return s5e(e,t),r5e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=On(i,o,c,n.coordinate),x=On(i,o,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:x.x,y2:x.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*l5e),o;return i>kz?o=a==="outer"?"start":"end":i<-kz?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=Td(Td({},Wt(this.props,!1)),{},{fill:"none"},Wt(c,!1));if(d==="circle")return ie.createElement(kw,Md({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(x){return On(a,i,o,x.coordinate)});return ie.createElement(OX,Md({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=Wt(this.props,!1),m=Wt(o,!1),x=Td(Td({},p),{},{fill:"none"},Wt(c,!1)),y=i.map(function(S,w){var N=n.getTickLineCoord(S),A=n.getTickTextAnchor(S),R=Td(Td(Td({textAnchor:A},p),{},{stroke:"none",fill:h},m),{},{index:w,payload:S,x:N.x2,y:N.y2});return ie.createElement(Jr,Md({className:Sr("recharts-polar-angle-axis-tick",vX(o)),key:"tick-".concat(S.coordinate)},d0(n.props,S,w)),c&&ie.createElement("line",Md({className:"recharts-polar-angle-axis-tick-line"},x,N)),o&&e.renderTickItem(o,R,d?d(S.value,w):S.value))});return ie.createElement(Jr,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:ie.createElement(Jr,{className:Sr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return ie.isValidElement(n)?o=ie.cloneElement(n,a):cr(n)?o=n(a):o=ie.createElement(df,Md({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(T.PureComponent);Ow(Ux,"displayName","PolarAngleAxis");Ow(Ux,"axisType","angleAxis");Ow(Ux,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var S_,Cz;function c5e(){if(Cz)return S_;Cz=1;var t=qW(),e=t(Object.getPrototypeOf,Object);return S_=e,S_}var N_,Oz;function u5e(){if(Oz)return N_;Oz=1;var t=Nc(),e=c5e(),r=_c(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var x=c.call(m,"constructor")&&m.constructor;return typeof x=="function"&&x instanceof x&&o.call(x)==d}return N_=h,N_}var d5e=u5e();const h5e=sn(d5e);var __,Iz;function f5e(){if(Iz)return __;Iz=1;var t=Nc(),e=_c(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return __=n,__}var p5e=f5e();const m5e=sn(p5e);function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function Hb(){return Hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hb.apply(this,arguments)}function g5e(t,e){return b5e(t)||v5e(t,e)||y5e(t,e)||x5e()}function x5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y5e(t,e){if(t){if(typeof t=="string")return Rz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rz(t,e)}}function Rz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function b5e(t){if(Array.isArray(t))return t}function Mz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mz(Object(r),!0).forEach(function(n){w5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w5e(t,e,r){return e=S5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S5e(t){var e=N5e(t,"string");return Hg(e)=="symbol"?e:e+""}function N5e(t,e){if(Hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pz=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},_5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},T5e=function(e){var r=Dz(Dz({},_5e),e),n=T.useRef(),a=T.useState(-1),i=g5e(a,2),o=i[0],c=i[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var O=n.current.getTotalLength();O&&c(O)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,x=r.height,y=r.className,S=r.animationEasing,w=r.animationDuration,N=r.animationBegin,A=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||x!==+x||p===0&&m===0||x===0)return null;var R=Sr("recharts-trapezoid",y);return A?ie.createElement(dl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:x,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:x,x:d,y:h},duration:w,animationEasing:S,isActive:A},function(O){var L=O.upperWidth,I=O.lowerWidth,k=O.height,E=O.x,j=O.y;return ie.createElement(dl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:w,easing:S},ie.createElement("path",Hb({},Wt(r,!0),{className:R,d:Pz(E,j,L,I,k),ref:n})))}):ie.createElement("g",null,ie.createElement("path",Hb({},Wt(r,!0),{className:R,d:Pz(d,h,p,m,x)})))},j5e=["option","shapeType","propTransformer","activeClassName","isActive"];function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function A5e(t,e){if(t==null)return{};var r=E5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(r),!0).forEach(function(n){k5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function k5e(t,e,r){return e=C5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C5e(t){var e=O5e(t,"string");return Gg(e)=="symbol"?e:e+""}function O5e(t,e){if(Gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I5e(t,e){return Gb(Gb({},e),t)}function R5e(t,e){return t==="symbols"}function Bz(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return ie.createElement(D7,r);case"trapezoid":return ie.createElement(T5e,r);case"sector":return ie.createElement(NX,r);case"symbols":if(R5e(e))return ie.createElement(pw,r);break;default:return null}}function M5e(t){return T.isValidElement(t)?t.props:t}function dA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?I5e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=A5e(t,j5e),h;if(T.isValidElement(e))h=T.cloneElement(e,Gb(Gb({},d),M5e(e)));else if(cr(e))h=e(d);else if(h5e(e)&&!m5e(e)){var p=a(e,d);h=ie.createElement(Bz,{shapeType:r,elementProps:p})}else{var m=d;h=ie.createElement(Bz,{shapeType:r,elementProps:m})}return c?ie.createElement(Jr,{className:o},h):h}function Iw(t,e){return e!=null&&"trapezoids"in t.props}function Rw(t,e){return e!=null&&"sectors"in t.props}function Wg(t,e){return e!=null&&"points"in t.props}function D5e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function P5e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function L5e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function B5e(t,e){var r;return Iw(t,e)?r=D5e:Rw(t,e)?r=P5e:Wg(t,e)&&(r=L5e),r}function $5e(t,e){var r;return Iw(t,e)?r="trapezoids":Rw(t,e)?r="sectors":Wg(t,e)&&(r="points"),r}function z5e(t,e){if(Iw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Rw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Wg(t,e)?e.payload:{}}function U5e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=$5e(r,e),i=z5e(r,e),o=n.filter(function(d,h){var p=Bx(i,d),m=r.props[a].filter(function(S){var w=B5e(r,e);return w(S,e)}),x=r.props[a].indexOf(m[m.length-1]),y=h===x;return p&&y}),c=n.indexOf(o[o.length-1]);return c}var T_,$z;function V5e(){if($z)return T_;$z=1;function t(e){return e&&e.length?e[0]:void 0}return T_=t,T_}var j_,zz;function F5e(){return zz||(zz=1,j_=V5e()),j_}var q5e=F5e();const H5e=sn(q5e);var G5e=["key"];function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function W5e(t,e){if(t==null)return{};var r=K5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wb.apply(this,arguments)}function Uz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Di(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(r),!0).forEach(function(n){Hl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BX(n.key),n)}}function Q5e(t,e,r){return e&&Vz(t.prototype,e),r&&Vz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y5e(t,e,r){return e=Kb(e),J5e(t,LX()?Reflect.construct(e,r||[],Kb(t).constructor):e.apply(t,r))}function J5e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z5e(t)}function Z5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LX=function(){return!!t})()}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kb(t)}function e3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hA(t,e)}function hA(t,e){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hA(t,e)}function Hl(t,e,r){return e=BX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BX(t){var e=t3e(t,"string");return vf(e)=="symbol"?e:e+""}function t3e(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vx=(function(t){function e(){var r;X5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Y5e(this,e,[].concat(a)),Hl(r,"state",{isAnimationFinished:!1}),Hl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),cr(o)&&o()}),Hl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),cr(o)&&o()}),Hl(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),Hl(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return e3e(e,t),Q5e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=Wt(this.props,!1),d=Wt(i,!0),h=n.map(function(p,m){var x=Di(Di(Di({key:"dot-".concat(m),r:3},c),d),{},{dataKey:o,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,x)});return ie.createElement(Jr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return ie.isValidElement(i)?p=ie.cloneElement(i,Di(Di({},this.props),{},{points:n})):cr(i)?p=i(Di(Di({},this.props),{},{points:n})):p=ie.createElement(OX,Wb({},Wt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),ie.createElement(Jr,{className:"recharts-radar-polygon"},p,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return ie.createElement(dl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=m&&m.length/i.length,w=i.map(function(N,A){var R=m&&m[Math.floor(A*S)];if(R){var O=ts(R.x,N.x),L=ts(R.y,N.y);return Di(Di({},N),{},{x:O(y),y:L(y)})}var I=ts(N.cx,N.x),k=ts(N.cy,N.y);return Di(Di({},N),{},{x:I(y),y:k(y)})});return n.renderPolygonStatically(w)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!Bx(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=Sr("recharts-radar",i);return ie.createElement(Jr,{className:h},this.renderPolygon(),(!c||d)&&sc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(ie.isValidElement(n))i=ie.cloneElement(n,a);else if(cr(n))i=n(a);else{var o=a.key,c=W5e(a,G5e);i=ie.createElement(kw,Wb({},c,{key:o,className:Sr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(T.PureComponent);Hl(Vx,"displayName","Radar");Hl(Vx,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Hl(Vx,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(x,y){var S=yi(x,r.dataKey,y),w=yi(x,a),N=r.scale(S)+p,A=Array.isArray(w)?wX(w):w,R=xr(A)?void 0:e.scale(A);Array.isArray(w)&&w.length>=2&&(d=!0),h.push(Di(Di({},On(o,c,R,N)),{},{name:S,value:w,cx:o,cy:c,radius:R,angle:N,payload:x}))});var m=[];return d&&h.forEach(function(x){if(Array.isArray(x.value)){var y=H5e(x.value),S=xr(y)?void 0:e.scale(y);m.push(Di(Di({},x),{},{radius:S},On(o,c,S,x.angle)))}else m.push(x)}),{points:h,isRange:d,baseLinePoints:m}});var A_,Fz;function r3e(){if(Fz)return A_;Fz=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return A_=r,A_}var E_,qz;function $X(){if(qz)return E_;qz=1;var t=sK(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return E_=n,E_}var k_,Hz;function n3e(){if(Hz)return k_;Hz=1;var t=r3e(),e=xw(),r=$X();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return k_=n,k_}var C_,Gz;function a3e(){if(Gz)return C_;Gz=1;var t=n3e(),e=t();return C_=e,C_}var i3e=a3e();const Xb=sn(i3e);function Kg(t){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(t)}function Wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wz(Object(r),!0).forEach(function(n){zX(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zX(t,e,r){return e=s3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s3e(t){var e=o3e(t,"string");return Kg(e)=="symbol"?e:e+""}function o3e(t,e){if(Kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l3e=["Webkit","Moz","O","ms"],c3e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=l3e.reduce(function(i,o){return Kz(Kz({},i),{},zX({},o+n,r))},{});return a[e]=r,a};function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qb.apply(this,arguments)}function Xz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function O_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xz(Object(r),!0).forEach(function(n){js(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VX(n.key),n)}}function d3e(t,e,r){return e&&Qz(t.prototype,e),r&&Qz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h3e(t,e,r){return e=Yb(e),f3e(t,UX()?Reflect.construct(e,r||[],Yb(t).constructor):e.apply(t,r))}function f3e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p3e(t)}function p3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UX=function(){return!!t})()}function Yb(t){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(t)}function m3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fA(t,e)}function fA(t,e){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fA(t,e)}function js(t,e,r){return e=VX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VX(t){var e=g3e(t,"string");return bf(e)=="symbol"?e:e+""}function g3e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x3e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=Mm().domain(Xb(0,d)).range([i,i+o-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},Yz=function(e){return e.changedTouches&&!!e.changedTouches.length},wf=(function(t){function e(r){var n;return u3e(this,e),n=h3e(this,e,[r]),js(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),js(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),js(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),js(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),js(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),js(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),js(n,"handleSlideDragStart",function(a){var i=Yz(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return m3e(e,t),d3e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),x=Math.max(a,i),y=e.getIndexInRange(o,m),S=e.getIndexInRange(o,x);return{startIndex:y-y%d,endIndex:S===p?p:S-S%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=yi(i[n],c,n);return cr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,x=d.startIndex,y=d.endIndex,S=d.onChange,w=n.pageX-i;w>0?w=Math.min(w,h+p-m-c,h+p-m-o):w<0&&(w=Math.max(w,h-o,h-c));var N=this.getIndex({startX:o+w,endX:c+w});(N.startIndex!==x||N.endIndex!==y)&&S&&S(N),this.setState({startX:o+w,endX:c+w,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=Yz(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],p=this.props,m=p.x,x=p.width,y=p.travellerWidth,S=p.onChange,w=p.gap,N=p.data,A={startX:this.state.startX,endX:this.state.endX},R=n.pageX-i;R>0?R=Math.min(R,m+x-y-h):R<0&&(R=Math.max(R,m-h)),A[o]=h+R;var O=this.getIndex(A),L=O.startIndex,I=O.endIndex,k=function(){var j=N.length-1;return o==="startX"&&(c>d?L%w===0:I%w===0)||c<d&&I===j||o==="endX"&&(c>d?I%w===0:L%w===0)||c>d&&I===j};this.setState(js(js({},o,h+R),"brushMoveStartX",n.pageX),function(){S&&k()&&S(O)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var x=m+n;if(!(x===-1||x>=c.length)){var y=c[x];a==="startX"&&y>=h||a==="endX"&&y<=d||this.setState(js({},a,y),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return ie.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=T.Children.only(h);return m?ie.cloneElement(m,{x:a,y:i,width:o,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,x=d.traveller,y=d.ariaLabel,S=d.data,w=d.startIndex,N=d.endIndex,A=Math.max(n,this.props.x),R=O_(O_({},Wt(this.props,!1)),{},{x:A,y:h,width:p,height:m}),O=y||"Min value: ".concat((i=S[w])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=S[N])===null||o===void 0?void 0:o.name);return ie.createElement(Jr,{tabIndex:0,role:"slider","aria-label":O,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),c.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(x,R))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return ie.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,x=p.endX,y=5,S={pointerEvents:"none",fill:h};return ie.createElement(Jr,{className:"recharts-brush-texts"},ie.createElement(df,Qb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,x)-y,y:o+c/2},S),this.getTextOfTick(a)),ie.createElement(df,Qb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,x)+d+y,y:o+c/2},S),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,x=this.state,y=x.startX,S=x.endX,w=x.isTextActive,N=x.isSlideMoving,A=x.isTravellerMoving,R=x.isTravellerFocused;if(!a||!a.length||!yt(c)||!yt(d)||!yt(h)||!yt(p)||h<=0||p<=0)return null;var O=Sr("recharts-brush",i),L=ie.Children.count(o)===1,I=c3e("userSelect","none");return ie.createElement(Jr,{className:O,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(y,S),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(S,"endX"),(w||N||A||R||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return ie.createElement(ie.Fragment,null,ie.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),ie.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),ie.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ie.isValidElement(n)?i=ie.cloneElement(n,a):cr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return O_({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?x3e({data:i,width:o,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var x=a.scale.domain().map(function(y){return a.scale(y)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:x}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(T.PureComponent);js(wf,"displayName","Brush");js(wf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var I_,Jz;function y3e(){if(Jz)return I_;Jz=1;var t=s7();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return I_=e,I_}var R_,Zz;function v3e(){if(Zz)return R_;Zz=1;var t=LW(),e=xl(),r=y3e(),n=ds(),a=xw();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return R_=i,R_}var b3e=v3e();const w3e=sn(b3e);var il=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},M_,eU;function S3e(){if(eU)return M_;eU=1;var t=tK();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return M_=e,M_}var D_,tU;function N3e(){if(tU)return D_;tU=1;var t=S3e(),e=ZW(),r=xl();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return D_=n,D_}var _3e=N3e();const T3e=sn(_3e);var P_,rU;function j3e(){if(rU)return P_;rU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return P_=t,P_}var L_,nU;function A3e(){if(nU)return L_;nU=1;var t=s7();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return L_=e,L_}var B_,aU;function E3e(){if(aU)return B_;aU=1;var t=j3e(),e=A3e(),r=xl(),n=ds(),a=xw();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return B_=i,B_}var k3e=E3e();const FX=sn(k3e);var C3e=["x","y"];function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pA.apply(this,arguments)}function iU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function um(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(r),!0).forEach(function(n){O3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O3e(t,e,r){return e=I3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I3e(t){var e=R3e(t,"string");return Xg(e)=="symbol"?e:e+""}function R3e(t,e){if(Xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M3e(t,e){if(t==null)return{};var r=D3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function D3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function P3e(t,e){var r=t.x,n=t.y,a=M3e(t,C3e),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),x=parseInt(m,10);return um(um(um(um(um({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:x,name:e.name,radius:e.radius})}function sU(t){return ie.createElement(dA,pA({shapeType:"rectangle",propTransformer:P3e,activeClassName:"recharts-active-bar"},t))}var L3e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=yt(n)||zhe(n);return i?e(n,a):(i||f0(),r)}},B3e=["value","background"],qX;function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function $3e(t,e){if(t==null)return{};var r=z3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Jb(){return Jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jb.apply(this,arguments)}function oU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(r),!0).forEach(function(n){vu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GX(n.key),n)}}function V3e(t,e,r){return e&&lU(t.prototype,e),r&&lU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function F3e(t,e,r){return e=Zb(e),q3e(t,HX()?Reflect.construct(e,r||[],Zb(t).constructor):e.apply(t,r))}function q3e(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H3e(t)}function H3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HX=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(t)}function G3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},mA(t,e)}function vu(t,e,r){return e=GX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GX(t){var e=W3e(t,"string");return Sf(e)=="symbol"?e:e+""}function W3e(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fx=(function(t){function e(){var r;U3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=F3e(this,e,[].concat(a)),vu(r,"state",{isAnimationFinished:!1}),vu(r,"id",Ix("recharts-bar-")),vu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),vu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return G3e(e,t),V3e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=Wt(this.props,!1);return n&&n.map(function(m,x){var y=x===d,S=y?h:o,w=Ra(Ra(Ra({},p),m),{},{isActive:y,option:S,index:x,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ie.createElement(Jr,Jb({className:"recharts-bar-rectangle"},d0(a.props,m,x),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(x)}),ie.createElement(sU,w))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,x=this.state.prevData;return ie.createElement(dl,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var S=y.t,w=i.map(function(N,A){var R=x&&x[A];if(R){var O=ts(R.x,N.x),L=ts(R.y,N.y),I=ts(R.width,N.width),k=ts(R.height,N.height);return Ra(Ra({},N),{},{x:O(S),y:L(S),width:I(S),height:k(S)})}if(o==="horizontal"){var E=ts(0,N.height),j=E(S);return Ra(Ra({},N),{},{y:N.y+N.height-j,height:j})}var C=ts(0,N.width),q=C(S);return Ra(Ra({},N),{},{width:q})});return ie.createElement(Jr,null,n.renderRectanglesStatically(w))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Bx(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=Wt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,x=$3e(h,B3e);if(!m)return null;var y=Ra(Ra(Ra(Ra(Ra({},x),{},{fill:"#eee"},m),d),d0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return ie.createElement(sU,Jb({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},y))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=Ms(p,$x);if(!m)return null;var x=h==="vertical"?o[0].height/2:o[0].width/2,y=function(N,A){var R=Array.isArray(N.value)?N.value[1]:N.value;return{x:N.x,y:N.y,value:R,errorVal:yi(N,A)}},S={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ie.createElement(Jr,S,m.map(function(w){return ie.cloneElement(w,{key:"error-bar-".concat(a,"-").concat(w.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:x,dataPointFormatter:y})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,x=n.height,y=n.isAnimationActive,S=n.background,w=n.id;if(a||!i||!i.length)return null;var N=this.state.isAnimationFinished,A=Sr("recharts-bar",o),R=c&&c.allowDataOverflow,O=d&&d.allowDataOverflow,L=R||O,I=xr(w)?this.id:w;return ie.createElement(Jr,{className:A},R||O?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(I)},ie.createElement("rect",{x:R?h:h-m/2,y:O?p:p-x/2,width:R?m:m*2,height:O?x:x*2}))):null,ie.createElement(Jr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(I,")"):null},S?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,I),(!y||N)&&sc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(T.PureComponent);qX=Fx;vu(Fx,"displayName","Bar");vu(Fx,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vu(Fx,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,x=t.offset,y=tbe(n,r);if(!y)return null;var S=e.layout,w=r.type.defaultProps,N=w!==void 0?Ra(Ra({},w),r.props):r.props,A=N.dataKey,R=N.children,O=N.minPointSize,L=S==="horizontal"?o:i,I=h?L.scale.domain():null,k=lbe({numericAxis:L}),E=Ms(R,c7),j=m.map(function(C,q){var D,$,B,V,W,G;h?D=rbe(h[p+q],I):(D=yi(C,A),Array.isArray(D)||(D=[k,D]));var Y=L3e(O,qX.defaultProps.minPointSize)(D[1],q);if(S==="horizontal"){var re,ce=[o.scale(D[0]),o.scale(D[1])],de=ce[0],X=ce[1];$=R$({axis:i,ticks:c,bandSize:a,offset:y.offset,entry:C,index:q}),B=(re=X??de)!==null&&re!==void 0?re:void 0,V=y.size;var ae=de-X;if(W=Number.isNaN(ae)?0:ae,G={x:$,y:o.y,width:V,height:o.height},Math.abs(Y)>0&&Math.abs(W)<Math.abs(Y)){var ne=To(W||Y)*(Math.abs(Y)-Math.abs(W));B-=ne,W+=ne}}else{var ve=[i.scale(D[0]),i.scale(D[1])],pe=ve[0],Be=ve[1];if($=pe,B=R$({axis:o,ticks:d,bandSize:a,offset:y.offset,entry:C,index:q}),V=Be-pe,W=y.size,G={x:i.x,y:B,width:i.width,height:W},Math.abs(Y)>0&&Math.abs(V)<Math.abs(Y)){var Ue=To(V||Y)*(Math.abs(Y)-Math.abs(V));V+=Ue}}return Ra(Ra(Ra({},C),{},{x:$,y:B,width:V,height:W,value:h?D:D[1],payload:C,background:G},E&&E[q]&&E[q].props),{},{tooltipPayload:[xX(r,C)],tooltipPosition:{x:$+V/2,y:B+W/2}})});return Ra({data:j,layout:S},x)});function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function K3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WX(n.key),n)}}function X3e(t,e,r){return e&&cU(t.prototype,e),r&&cU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function uU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function So(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(r),!0).forEach(function(n){Mw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mw(t,e,r){return e=WX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WX(t){var e=Q3e(t,"string");return Qg(e)=="symbol"?e:e+""}function Q3e(t,e){if(Qg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y3e=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},x=!!As(h,Fx);return p.reduce(function(y,S){var w=r[S],N=w.orientation,A=w.domain,R=w.padding,O=R===void 0?{}:R,L=w.mirror,I=w.reversed,k="".concat(N).concat(L?"Mirror":""),E,j,C,q,D;if(w.type==="number"&&(w.padding==="gap"||w.padding==="no-gap")){var $=A[1]-A[0],B=1/0,V=w.categoricalDomain.sort(qhe);if(V.forEach(function(ve,pe){pe>0&&(B=Math.min((ve||0)-(V[pe-1]||0),B))}),Number.isFinite(B)){var W=B/$,G=w.layout==="vertical"?n.height:n.width;if(w.padding==="gap"&&(E=W*G/2),w.padding==="no-gap"){var Y=jo(e.barCategoryGap,W*G),re=W*G/2;E=re-Y-(re-Y)/G*Y}}}a==="xAxis"?j=[n.left+(O.left||0)+(E||0),n.left+n.width-(O.right||0)-(E||0)]:a==="yAxis"?j=d==="horizontal"?[n.top+n.height-(O.bottom||0),n.top+(O.top||0)]:[n.top+(O.top||0)+(E||0),n.top+n.height-(O.bottom||0)-(E||0)]:j=w.range,I&&(j=[j[1],j[0]]);var ce=fX(w,i,x),de=ce.scale,X=ce.realScaleType;de.domain(A).range(j),pX(de);var ae=mX(de,So(So({},w),{},{realScaleType:X}));a==="xAxis"?(D=N==="top"&&!L||N==="bottom"&&L,C=n.left,q=m[k]-D*w.height):a==="yAxis"&&(D=N==="left"&&!L||N==="right"&&L,C=m[k]-D*w.width,q=n.top);var ne=So(So(So({},w),ae),{},{realScaleType:X,x:C,y:q,scale:de,width:a==="xAxis"?n.width:w.width,height:a==="yAxis"?n.height:w.height});return ne.bandSize=Db(ne,ae),!w.hide&&a==="xAxis"?m[k]+=(D?-1:1)*ne.height:w.hide||(m[k]+=(D?-1:1)*ne.width),So(So({},y),{},Mw({},S,ne))},{})},KX=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},J3e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return KX({x:r,y:n},{x:a,y:i})},XX=(function(){function t(e){K3e(this,t),this.scale=e}return X3e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();Mw(XX,"EPS",1e-4);var P7=function(e){var r=Object.keys(e).reduce(function(n,a){return So(So({},n),{},Mw({},a,XX.create(e[a])))},{});return So(So({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return T3e(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return FX(a,function(i,o){return r[o].isInRange(i)})}})};function Z3e(t){return(t%180+180)%180}var eSe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Z3e(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},$_,dU;function tSe(){if(dU)return $_;dU=1;var t=xl(),e=Rx(),r=mw();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var p=a(i,o,c);return p>-1?d[h?i[p]:p]:void 0}}return $_=n,$_}var z_,hU;function rSe(){if(hU)return z_;hU=1;var t=$X();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return z_=e,z_}var U_,fU;function nSe(){if(fU)return U_;fU=1;var t=KW(),e=xl(),r=rSe(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return U_=a,U_}var V_,pU;function aSe(){if(pU)return V_;pU=1;var t=tSe(),e=nSe(),r=t(e);return V_=r,V_}var iSe=aSe();const sSe=sn(iSe);var oSe=uW();const lSe=sn(oSe);var cSe=lSe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),L7=T.createContext(void 0),B7=T.createContext(void 0),QX=T.createContext(void 0),YX=T.createContext({}),JX=T.createContext(void 0),ZX=T.createContext(0),eQ=T.createContext(0),mU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,p=cSe(i);return ie.createElement(L7.Provider,{value:n},ie.createElement(B7.Provider,{value:a},ie.createElement(YX.Provider,{value:i},ie.createElement(QX.Provider,{value:p},ie.createElement(JX.Provider,{value:o},ie.createElement(ZX.Provider,{value:h},ie.createElement(eQ.Provider,{value:d},c)))))))},uSe=function(){return T.useContext(JX)},tQ=function(e){var r=T.useContext(L7);r==null&&f0();var n=r[e];return n==null&&f0(),n},dSe=function(){var e=T.useContext(L7);return mu(e)},hSe=function(){var e=T.useContext(B7),r=sSe(e,function(n){return FX(n.domain,Number.isFinite)});return r||mu(e)},rQ=function(e){var r=T.useContext(B7);r==null&&f0();var n=r[e];return n==null&&f0(),n},fSe=function(){var e=T.useContext(QX);return e},pSe=function(){return T.useContext(YX)},$7=function(){return T.useContext(eQ)},z7=function(){return T.useContext(ZX)};function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function mSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aQ(n.key),n)}}function xSe(t,e,r){return e&&gSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ySe(t,e,r){return e=e2(e),vSe(t,nQ()?Reflect.construct(e,r||[],e2(t).constructor):e.apply(t,r))}function vSe(t,e){if(e&&(Nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bSe(t)}function bSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nQ=function(){return!!t})()}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e2(t)}function wSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gA(t,e)}function gA(t,e){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gA(t,e)}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){U7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U7(t,e,r){return e=aQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aQ(t){var e=SSe(t,"string");return Nf(e)=="symbol"?e:e+""}function SSe(t,e){if(Nf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NSe(t,e){return ASe(t)||jSe(t,e)||TSe(t,e)||_Se()}function _Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TSe(t,e){if(t){if(typeof t=="string")return yU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yU(t,e)}}function yU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function ASe(t){if(Array.isArray(t))return t}function xA(){return xA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xA.apply(this,arguments)}var ESe=function(e,r){var n;return ie.isValidElement(e)?n=ie.cloneElement(e,r):cr(e)?n=e(r):n=ie.createElement("line",xA({},r,{className:"recharts-reference-line-line"})),n},kSe=function(e,r,n,a,i,o,c,d,h){var p=i.x,m=i.y,x=i.width,y=i.height;if(n){var S=h.y,w=e.y.apply(S,{position:o});if(il(h,"discard")&&!e.y.isInRange(w))return null;var N=[{x:p+x,y:w},{x:p,y:w}];return d==="left"?N.reverse():N}if(r){var A=h.x,R=e.x.apply(A,{position:o});if(il(h,"discard")&&!e.x.isInRange(R))return null;var O=[{x:R,y:m+y},{x:R,y:m}];return c==="top"?O.reverse():O}if(a){var L=h.segment,I=L.map(function(k){return e.apply(k,{position:o})});return il(h,"discard")&&w3e(I,function(k){return!e.isInRange(k)})?null:I}return null};function CSe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=uSe(),p=tQ(a),m=rQ(i),x=fSe();if(!h||!x)return null;ac(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=P7({x:p.scale,y:m.scale}),S=Ga(e),w=Ga(r),N=n&&n.length===2,A=kSe(y,S,w,N,x,t.position,p.orientation,m.orientation,t);if(!A)return null;var R=NSe(A,2),O=R[0],L=O.x,I=O.y,k=R[1],E=k.x,j=k.y,C=il(t,"hidden")?"url(#".concat(h,")"):void 0,q=xU(xU({clipPath:C},Wt(t,!0)),{},{x1:L,y1:I,x2:E,y2:j});return ie.createElement(Jr,{className:Sr("recharts-reference-line",c)},ESe(o,q),mi.renderCallByParent(t,J3e({x1:L,y1:I,x2:E,y2:j})))}var V7=(function(t){function e(){return mSe(this,e),ySe(this,e,arguments)}return wSe(e,t),xSe(e,[{key:"render",value:function(){return ie.createElement(CSe,this.props)}}])})(ie.Component);U7(V7,"displayName","ReferenceLine");U7(V7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function yA(){return yA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yA.apply(this,arguments)}function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){Dw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ISe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sQ(n.key),n)}}function RSe(t,e,r){return e&&ISe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MSe(t,e,r){return e=t2(e),DSe(t,iQ()?Reflect.construct(e,r||[],t2(t).constructor):e.apply(t,r))}function DSe(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PSe(t)}function PSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iQ=function(){return!!t})()}function t2(t){return t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},t2(t)}function LSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vA(t,e)}function vA(t,e){return vA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vA(t,e)}function Dw(t,e,r){return e=sQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sQ(t){var e=BSe(t,"string");return _f(e)=="symbol"?e:e+""}function BSe(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $Se=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=P7({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return il(e,"discard")&&!o.isInRange(c)?null:c},Pw=(function(t){function e(){return OSe(this,e),MSe(this,e,arguments)}return LSe(e,t),RSe(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=Ga(a),p=Ga(i);if(ac(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=$Se(this.props);if(!m)return null;var x=m.x,y=m.y,S=this.props,w=S.shape,N=S.className,A=il(this.props,"hidden")?"url(#".concat(d,")"):void 0,R=bU(bU({clipPath:A},Wt(this.props,!0)),{},{cx:x,cy:y});return ie.createElement(Jr,{className:Sr("recharts-reference-dot",N)},e.renderDot(w,R),mi.renderCallByParent(this.props,{x:x-o,y:y-o,width:2*o,height:2*o}))}}])})(ie.Component);Dw(Pw,"displayName","ReferenceDot");Dw(Pw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Dw(Pw,"renderDot",function(t,e){var r;return ie.isValidElement(t)?r=ie.cloneElement(t,e):cr(t)?r=t(e):r=ie.createElement(kw,yA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function bA(){return bA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bA.apply(this,arguments)}function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function SU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){Lw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function USe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lQ(n.key),n)}}function VSe(t,e,r){return e&&USe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FSe(t,e,r){return e=r2(e),qSe(t,oQ()?Reflect.construct(e,r||[],r2(t).constructor):e.apply(t,r))}function qSe(t,e){if(e&&(Tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HSe(t)}function HSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oQ=function(){return!!t})()}function r2(t){return r2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},r2(t)}function GSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wA(t,e)}function Lw(t,e,r){return e=lQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lQ(t){var e=WSe(t,"string");return Tf(e)=="symbol"?e:e+""}function WSe(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KSe=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var x=P7({x:p.scale,y:m.scale}),y={x:e?x.x.apply(o,{position:"start"}):x.x.rangeMin,y:n?x.y.apply(d,{position:"start"}):x.y.rangeMin},S={x:r?x.x.apply(c,{position:"end"}):x.x.rangeMax,y:a?x.y.apply(h,{position:"end"}):x.y.rangeMax};return il(i,"discard")&&(!x.isInRange(y)||!x.isInRange(S))?null:KX(y,S)},Bw=(function(t){function e(){return zSe(this,e),FSe(this,e,arguments)}return GSe(e,t),VSe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;ac(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ga(a),x=Ga(i),y=Ga(o),S=Ga(c),w=this.props.shape;if(!m&&!x&&!y&&!S&&!w)return null;var N=KSe(m,x,y,S,this.props);if(!N&&!w)return null;var A=il(this.props,"hidden")?"url(#".concat(p,")"):void 0;return ie.createElement(Jr,{className:Sr("recharts-reference-area",d)},e.renderRect(w,SU(SU({clipPath:A},Wt(this.props,!0)),N)),mi.renderCallByParent(this.props,N))}}])})(ie.Component);Lw(Bw,"displayName","ReferenceArea");Lw(Bw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Lw(Bw,"renderRect",function(t,e){var r;return ie.isValidElement(t)?r=ie.cloneElement(t,e):cr(t)?r=t(e):r=ie.createElement(D7,bA({},e,{className:"recharts-reference-area-rect"})),r});function cQ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function XSe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return eSe(n,r)}function QSe(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function n2(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function YSe(t,e){return cQ(t,e+1)}function JSe(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,p=o,m=function(){var S=n==null?void 0:n[d];if(S===void 0)return{v:cQ(n,h)};var w=d,N,A=function(){return N===void 0&&(N=r(S,w)),N},R=S.coordinate,O=d===0||n2(t,R,A,p,c);O||(d=0,p=o,h+=1),O&&(p=R+t*(A()/2+a),d+=h)},x;h<=i.length;)if(x=m(),x)return x.v;return[]}function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function NU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(r),!0).forEach(function(n){ZSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZSe(t,e,r){return e=e6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e6e(t){var e=t6e(t,"string");return Yg(e)=="symbol"?e:e+""}function t6e(t,e){if(Yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function r6e(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(x){var y=i[x],S,w=function(){return S===void 0&&(S=r(y,x)),S};if(x===o-1){var N=t*(y.coordinate+t*w()/2-d);i[x]=y=Ti(Ti({},y),{},{tickCoord:N>0?y.coordinate-N*t:y.coordinate})}else i[x]=y=Ti(Ti({},y),{},{tickCoord:y.coordinate});var A=n2(t,y.tickCoord,w,c,d);A&&(d=y.tickCoord-t*(w()/2+a),i[x]=Ti(Ti({},y),{},{isShow:!0}))},p=o-1;p>=0;p--)h(p);return i}function n6e(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),x=t*(p.coordinate+t*m/2-h);o[c-1]=p=Ti(Ti({},p),{},{tickCoord:x>0?p.coordinate-x*t:p.coordinate});var y=n2(t,p.tickCoord,function(){return m},d,h);y&&(h=p.tickCoord-t*(m/2+a),o[c-1]=Ti(Ti({},p),{},{isShow:!0}))}for(var S=i?c-1:c,w=function(R){var O=o[R],L,I=function(){return L===void 0&&(L=r(O,R)),L};if(R===0){var k=t*(O.coordinate-t*I()/2-d);o[R]=O=Ti(Ti({},O),{},{tickCoord:k<0?O.coordinate-k*t:O.coordinate})}else o[R]=O=Ti(Ti({},O),{},{tickCoord:O.coordinate});var E=n2(t,O.tickCoord,I,d,h);E&&(d=O.tickCoord+t*(I()/2+a),o[R]=Ti(Ti({},O),{},{isShow:!0}))},N=0;N<S;N++)w(N);return o}function F7(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(yt(d)||T0.isSsr)return YSe(a,typeof d=="number"&&yt(d)?d:0);var x=[],y=c==="top"||c==="bottom"?"width":"height",S=p&&y==="width"?Rm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},w=function(O,L){var I=cr(h)?h(O.value,L):O.value;return y==="width"?XSe(Rm(I,{fontSize:e,letterSpacing:r}),S,m):Rm(I,{fontSize:e,letterSpacing:r})[y]},N=a.length>=2?To(a[1].coordinate-a[0].coordinate):1,A=QSe(i,N,y);return d==="equidistantPreserveStart"?JSe(N,A,w,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=n6e(N,A,w,a,o,d==="preserveStartEnd"):x=r6e(N,A,w,a,o),x.filter(function(R){return R.isShow}))}var a6e=["viewBox"],i6e=["viewBox"],s6e=["ticks"];function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function jh(){return jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jh.apply(this,arguments)}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ua(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){q7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function F_(t,e){if(t==null)return{};var r=o6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function l6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dQ(n.key),n)}}function c6e(t,e,r){return e&&TU(t.prototype,e),r&&TU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u6e(t,e,r){return e=a2(e),d6e(t,uQ()?Reflect.construct(e,r||[],a2(t).constructor):e.apply(t,r))}function d6e(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h6e(t)}function h6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uQ=function(){return!!t})()}function a2(t){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(t)}function f6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},SA(t,e)}function q7(t,e,r){return e=dQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dQ(t){var e=p6e(t,"string");return jf(e)=="symbol"?e:e+""}function p6e(t,e){if(jf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jf=(function(t){function e(r){var n;return l6e(this,e),n=u6e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return f6e(e,t),c6e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=F_(n,a6e),c=this.props,d=c.viewBox,h=F_(c,i6e);return!Dh(i,d)||!Dh(o,h)||!Dh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,x=a.tickMargin,y,S,w,N,A,R,O=m?-1:1,L=n.tickSize||p,I=yt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":y=S=n.coordinate,N=o+ +!m*d,w=N-O*L,R=w-O*x,A=I;break;case"left":w=N=n.coordinate,S=i+ +!m*c,y=S-O*L,A=y-O*x,R=I;break;case"right":w=N=n.coordinate,S=i+ +m*c,y=S+O*L,A=y+O*x,R=I;break;default:y=S=n.coordinate,N=o+ +m*d,w=N+O*L,R=w+O*x,A=I;break}return{line:{x1:y,y1:w,x2:S,y2:N},tick:{x:A,y:R}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Ua(Ua(Ua({},Wt(this.props,!1)),Wt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var x=+(d==="top"&&!h||d==="bottom"&&h);m=Ua(Ua({},m),{},{x1:a,y1:i+x*c,x2:a+o,y2:i+x*c})}else{var y=+(d==="left"&&!h||d==="right"&&h);m=Ua(Ua({},m),{},{x1:a+y*o,y1:i,x2:a+y*o,y2:i+c})}return ie.createElement("line",jh({},m,{className:Sr("recharts-cartesian-axis-line",ao(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,x=c.unit,y=F7(Ua(Ua({},this.props),{},{ticks:n}),a,i),S=this.getTickTextAnchor(),w=this.getTickVerticalAnchor(),N=Wt(this.props,!1),A=Wt(p,!1),R=Ua(Ua({},N),{},{fill:"none"},Wt(d,!1)),O=y.map(function(L,I){var k=o.getTickLineCoord(L),E=k.line,j=k.tick,C=Ua(Ua(Ua(Ua({textAnchor:S,verticalAnchor:w},N),{},{stroke:"none",fill:h},A),j),{},{index:I,payload:L,visibleTicksCount:y.length,tickFormatter:m});return ie.createElement(Jr,jh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},d0(o.props,L,I)),d&&ie.createElement("line",jh({},R,E,{className:Sr("recharts-cartesian-axis-tick-line",ao(d,"className"))})),p&&e.renderTickItem(p,C,"".concat(cr(m)?m(L.value,I):L.value).concat(x||"")))});return ie.createElement("g",{className:"recharts-cartesian-axis-ticks"},O)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,x=m.ticks,y=F_(m,s6e),S=x;return cr(d)&&(S=x&&x.length>0?d(this.props):d(y)),o<=0||c<=0||!S||!S.length?null:ie.createElement(Jr,{className:Sr("recharts-cartesian-axis",h),ref:function(N){n.layerReference=N}},i&&this.renderAxisLine(),this.renderTicks(S,this.state.fontSize,this.state.letterSpacing),mi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=Sr(a.className,"recharts-cartesian-axis-tick-value");return ie.isValidElement(n)?o=ie.cloneElement(n,Ua(Ua({},a),{},{className:c})):cr(n)?o=n(Ua(Ua({},a),{},{className:c})):o=ie.createElement(df,jh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(T.Component);q7(Jf,"displayName","CartesianAxis");q7(Jf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var m6e=["x1","y1","x2","y2","key"],g6e=["offset"];function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ai(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){x6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x6e(t,e,r){return e=y6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y6e(t){var e=v6e(t,"string");return p0(e)=="symbol"?e:e+""}function v6e(t,e){if(p0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(p0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$d.apply(this,arguments)}function AU(t,e){if(t==null)return{};var r=b6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var w6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return ie.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function hQ(t,e){var r;if(ie.isValidElement(t))r=ie.cloneElement(t,e);else if(cr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=AU(e,m6e),h=Wt(d,!1);h.offset;var p=AU(h,g6e);r=ie.createElement("line",$d({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function S6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ai(Ai({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return hQ(a,h)});return ie.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function N6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=Ai(Ai({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return hQ(a,h)});return ie.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function _6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(x){return Math.round(x+a-a)}).sort(function(x,y){return x-y});a!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var S=!p[y+1],w=S?a+o-x:p[y+1]-x;if(w<=0)return null;var N=y%e.length;return ie.createElement("rect",{key:"react-".concat(y),y:x,x:n,height:w,width:i,stroke:"none",fill:e[N],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function T6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(x){return Math.round(x+i-i)}).sort(function(x,y){return x-y});i!==p[0]&&p.unshift(0);var m=p.map(function(x,y){var S=!p[y+1],w=S?i+c-x:p[y+1]-x;if(w<=0)return null;var N=y%n.length;return ie.createElement("rect",{key:"react-".concat(y),x,y:o,width:w,height:d,stroke:"none",fill:n[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ie.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var j6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return hX(F7(Ai(Ai(Ai({},Jf.defaultProps),n),{},{ticks:Zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},A6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return hX(F7(Ai(Ai(Ai({},Jf.defaultProps),n),{},{ticks:Zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},mh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fQ(t){var e,r,n,a,i,o,c=$7(),d=z7(),h=pSe(),p=Ai(Ai({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:mh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:mh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:mh.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:mh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:mh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:mh.verticalFill,x:yt(t.x)?t.x:h.left,y:yt(t.y)?t.y:h.top,width:yt(t.width)?t.width:h.width,height:yt(t.height)?t.height:h.height}),m=p.x,x=p.y,y=p.width,S=p.height,w=p.syncWithTicks,N=p.horizontalValues,A=p.verticalValues,R=dSe(),O=hSe();if(!yt(y)||y<=0||!yt(S)||S<=0||!yt(m)||m!==+m||!yt(x)||x!==+x)return null;var L=p.verticalCoordinatesGenerator||j6e,I=p.horizontalCoordinatesGenerator||A6e,k=p.horizontalPoints,E=p.verticalPoints;if((!k||!k.length)&&cr(I)){var j=N&&N.length,C=I({yAxis:O?Ai(Ai({},O),{},{ticks:j?N:O.ticks}):void 0,width:c,height:d,offset:h},j?!0:w);ac(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(p0(C),"]")),Array.isArray(C)&&(k=C)}if((!E||!E.length)&&cr(L)){var q=A&&A.length,D=L({xAxis:R?Ai(Ai({},R),{},{ticks:q?A:R.ticks}):void 0,width:c,height:d,offset:h},q?!0:w);ac(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(p0(D),"]")),Array.isArray(D)&&(E=D)}return ie.createElement("g",{className:"recharts-cartesian-grid"},ie.createElement(w6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),ie.createElement(S6e,$d({},p,{offset:h,horizontalPoints:k,xAxis:R,yAxis:O})),ie.createElement(N6e,$d({},p,{offset:h,verticalPoints:E,xAxis:R,yAxis:O})),ie.createElement(_6e,$d({},p,{horizontalPoints:k})),ie.createElement(T6e,$d({},p,{verticalPoints:E})))}fQ.displayName="CartesianGrid";function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function E6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gQ(n.key),n)}}function C6e(t,e,r){return e&&k6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O6e(t,e,r){return e=i2(e),I6e(t,pQ()?Reflect.construct(e,r||[],i2(t).constructor):e.apply(t,r))}function I6e(t,e){if(e&&(Af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R6e(t)}function R6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pQ=function(){return!!t})()}function i2(t){return i2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i2(t)}function M6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NA(t,e)}function NA(t,e){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NA(t,e)}function mQ(t,e,r){return e=gQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gQ(t){var e=D6e(t,"string");return Af(e)=="symbol"?e:e+""}function D6e(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $w=(function(t){function e(){return E6e(this,e),O6e(this,e,arguments)}return M6e(e,t),C6e(e,[{key:"render",value:function(){return null}}])})(T.Component);mQ($w,"displayName","ZAxis");mQ($w,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var P6e=["option","isActive"];function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$m.apply(this,arguments)}function L6e(t,e){if(t==null)return{};var r=B6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function B6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $6e(t){var e=t.option,r=t.isActive,n=L6e(t,P6e);return typeof e=="string"?T.createElement(dA,$m({option:T.createElement(pw,$m({type:e},n)),isActive:r,shapeType:"symbols"},n)):T.createElement(dA,$m({option:e,isActive:r,shapeType:"symbols"},n))}function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function zm(){return zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zm.apply(this,arguments)}function EU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(r),!0).forEach(function(n){bu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function z6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yQ(n.key),n)}}function U6e(t,e,r){return e&&kU(t.prototype,e),r&&kU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function V6e(t,e,r){return e=s2(e),F6e(t,xQ()?Reflect.construct(e,r||[],s2(t).constructor):e.apply(t,r))}function F6e(t,e){if(e&&(Ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q6e(t)}function q6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xQ=function(){return!!t})()}function s2(t){return s2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s2(t)}function H6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_A(t,e)}function _A(t,e){return _A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_A(t,e)}function bu(t,e,r){return e=yQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yQ(t){var e=G6e(t,"string");return Ef(e)=="symbol"?e:e+""}function G6e(t,e){if(Ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qx=(function(t){function e(){var r;z6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=V6e(this,e,[].concat(a)),bu(r,"state",{isAnimationFinished:!1}),bu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),bu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),bu(r,"id",Ix("recharts-scatter-")),r}return H6e(e,t),U6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=Wt(this.props,!1);return n.map(function(p,m){var x=d===m,y=x?c:o,S=Js(Js({},h),p);return ie.createElement(Jr,zm({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},d0(a.props,p,m),{role:"img"}),ie.createElement($6e,zm({option:y,isActive:x,key:"symbol-".concat(m)},S)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return ie.createElement(dl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t,S=i.map(function(w,N){var A=m&&m[N];if(A){var R=ts(A.cx,w.cx),O=ts(A.cy,w.cy),L=ts(A.size,w.size);return Js(Js({},w),{},{cx:R(y),cy:O(y),size:L(y)})}var I=ts(0,w.size);return Js(Js({},w),{},{size:I(y)})});return ie.createElement(Jr,null,n.renderSymbolsStatically(S))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!Bx(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=Ms(d,$x);return h?h.map(function(p,m){var x=p.props,y=x.direction,S=x.dataKey;return ie.cloneElement(p,{key:"".concat(y,"-").concat(S,"-").concat(i[m]),data:i,xAxis:o,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(N,A){return{x:N.cx,y:N.cy,value:y==="x"?+N.node.x:+N.node.y,errorVal:yi(N,A)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=Wt(this.props,!1),h=Wt(i,!1),p,m;if(o==="joint")p=a.map(function(O){return{x:O.cx,y:O.cy}});else if(o==="fitting"){var x=Fhe(a),y=x.xmin,S=x.xmax,w=x.a,N=x.b,A=function(L){return w*L+N};p=[{x:y,y:A(y)},{x:S,y:A(S)}]}var R=Js(Js(Js({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return ie.isValidElement(i)?m=ie.cloneElement(i,R):cr(i)?m=i(R):m=ie.createElement(Qj,zm({},R,{type:c})),ie.createElement(Jr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,x=n.width,y=n.height,S=n.id,w=n.isAnimationActive;if(a||!i||!i.length)return null;var N=this.state.isAnimationFinished,A=Sr("recharts-scatter",c),R=d&&d.allowDataOverflow,O=h&&h.allowDataOverflow,L=R||O,I=xr(S)?this.id:S;return ie.createElement(Jr,{className:A,clipPath:L?"url(#clipPath-".concat(I,")"):null},R||O?ie.createElement("defs",null,ie.createElement("clipPath",{id:"clipPath-".concat(I)},ie.createElement("rect",{x:R?p:p-x/2,y:O?m:m-y/2,width:R?x:x*2,height:O?y:y*2}))):null,o&&this.renderLine(),this.renderErrorBar(),ie.createElement(Jr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!w||N)&&sc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(T.PureComponent);bu(qx,"displayName","Scatter");bu(qx,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!T0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});bu(qx,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=Ms(a.props.children,c7),m=xr(e.dataKey)?a.props.dataKey:e.dataKey,x=xr(r.dataKey)?a.props.dataKey:r.dataKey,y=n&&n.dataKey,S=n?n.range:$w.defaultProps.range,w=S&&S[0],N=e.scale.bandwidth?e.scale.bandwidth():0,A=r.scale.bandwidth?r.scale.bandwidth():0,R=i.map(function(O,L){var I=yi(O,m),k=yi(O,x),E=!xr(y)&&yi(O,y)||"-",j=[{name:xr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:I,payload:O,dataKey:m,type:h},{name:xr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:k,payload:O,dataKey:x,type:h}];E!=="-"&&j.push({name:n.name||n.dataKey,unit:n.unit||"",value:E,payload:O,dataKey:y,type:h});var C=I$({axis:e,ticks:o,bandSize:N,entry:O,index:L,dataKey:m}),q=I$({axis:r,ticks:c,bandSize:A,entry:O,index:L,dataKey:x}),D=E!=="-"?n.scale(E):w,$=Math.sqrt(Math.max(D,0)/Math.PI);return Js(Js({},O),{},{cx:C,cy:q,x:C-$,y:q-$,xAxis:e,yAxis:r,zAxis:n,width:2*$,height:2*$,size:D,node:{x:I,y:k,z:E},tooltipPayload:j,tooltipPosition:{x:C,y:q},payload:O},p&&p[L]&&p[L].props)});return Js({points:R},d)});function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function W6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wQ(n.key),n)}}function X6e(t,e,r){return e&&K6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q6e(t,e,r){return e=o2(e),Y6e(t,vQ()?Reflect.construct(e,r||[],o2(t).constructor):e.apply(t,r))}function Y6e(t,e){if(e&&(kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J6e(t)}function J6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vQ=function(){return!!t})()}function o2(t){return o2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o2(t)}function Z6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TA(t,e)}function TA(t,e){return TA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},TA(t,e)}function bQ(t,e,r){return e=wQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wQ(t){var e=eNe(t,"string");return kf(e)=="symbol"?e:e+""}function eNe(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jA.apply(this,arguments)}function tNe(t){var e=t.xAxisId,r=$7(),n=z7(),a=tQ(e);return a==null?null:T.createElement(Jf,jA({},a,{className:Sr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Zl(o,!0)}}))}var zw=(function(t){function e(){return W6e(this,e),Q6e(this,e,arguments)}return Z6e(e,t),X6e(e,[{key:"render",value:function(){return T.createElement(tNe,this.props)}}])})(T.Component);bQ(zw,"displayName","XAxis");bQ(zw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function rNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_Q(n.key),n)}}function aNe(t,e,r){return e&&nNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iNe(t,e,r){return e=l2(e),sNe(t,SQ()?Reflect.construct(e,r||[],l2(t).constructor):e.apply(t,r))}function sNe(t,e){if(e&&(Cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oNe(t)}function oNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SQ=function(){return!!t})()}function l2(t){return l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l2(t)}function lNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AA(t,e)}function AA(t,e){return AA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},AA(t,e)}function NQ(t,e,r){return e=_Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Q(t){var e=cNe(t,"string");return Cf(e)=="symbol"?e:e+""}function cNe(t,e){if(Cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EA.apply(this,arguments)}var uNe=function(e){var r=e.yAxisId,n=$7(),a=z7(),i=rQ(r);return i==null?null:T.createElement(Jf,EA({},i,{className:Sr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Zl(c,!0)}}))},Uw=(function(t){function e(){return rNe(this,e),iNe(this,e,arguments)}return lNe(e,t),aNe(e,[{key:"render",value:function(){return T.createElement(uNe,this.props)}}])})(T.Component);NQ(Uw,"displayName","YAxis");NQ(Uw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function CU(t){return pNe(t)||fNe(t)||hNe(t)||dNe()}function dNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hNe(t,e){if(t){if(typeof t=="string")return kA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kA(t,e)}}function fNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pNe(t){if(Array.isArray(t))return kA(t)}function kA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var CA=function(e,r,n,a,i){var o=Ms(e,V7),c=Ms(e,Pw),d=[].concat(CU(o),CU(c)),h=Ms(e,Bw),p="".concat(a,"Id"),m=a[0],x=r;if(d.length&&(x=d.reduce(function(w,N){if(N.props[p]===n&&il(N.props,"extendDomain")&&yt(N.props[m])){var A=N.props[m];return[Math.min(w[0],A),Math.max(w[1],A)]}return w},x)),h.length){var y="".concat(m,"1"),S="".concat(m,"2");x=h.reduce(function(w,N){if(N.props[p]===n&&il(N.props,"extendDomain")&&yt(N.props[y])&&yt(N.props[S])){var A=N.props[y],R=N.props[S];return[Math.min(w[0],A,R),Math.max(w[1],A,R)]}return w},x)}return i&&i.length&&(x=i.reduce(function(w,N){return yt(N)?[Math.min(w[0],N),Math.max(w[1],N)]:w},x)),x},q_={exports:{}},OU;function mNe(){return OU||(OU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var y=new a(p,m||d,x),S=r?r+h:h;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],y]:d._events[S].push(y):(d._events[S]=y,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,y=m.length,S=new Array(y);x<y;x++)S[x]=m[x].fn;return S},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,x,y,S){var w=r?r+h:h;if(!this._events[w])return!1;var N=this._events[w],A=arguments.length,R,O;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),A){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,p),!0;case 3:return N.fn.call(N.context,p,m),!0;case 4:return N.fn.call(N.context,p,m,x),!0;case 5:return N.fn.call(N.context,p,m,x,y),!0;case 6:return N.fn.call(N.context,p,m,x,y,S),!0}for(O=1,R=new Array(A-1);O<A;O++)R[O-1]=arguments[O];N.fn.apply(N.context,R)}else{var L=N.length,I;for(O=0;O<L;O++)switch(N[O].once&&this.removeListener(h,N[O].fn,void 0,!0),A){case 1:N[O].fn.call(N[O].context);break;case 2:N[O].fn.call(N[O].context,p);break;case 3:N[O].fn.call(N[O].context,p,m);break;case 4:N[O].fn.call(N[O].context,p,m,x);break;default:if(!R)for(I=1,R=new Array(A-1);I<A;I++)R[I-1]=arguments[I];N[O].fn.apply(N[O].context,R)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,x){var y=r?r+h:h;if(!this._events[y])return this;if(!p)return o(this,y),this;var S=this._events[y];if(S.fn)S.fn===p&&(!x||S.once)&&(!m||S.context===m)&&o(this,y);else{for(var w=0,N=[],A=S.length;w<A;w++)(S[w].fn!==p||x&&!S[w].once||m&&S[w].context!==m)&&N.push(S[w]);N.length?this._events[y]=N.length===1?N[0]:N:o(this,y)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(q_)),q_.exports}var gNe=mNe();const xNe=sn(gNe);var H_=new xNe,G_="recharts.syncMouseEvents";function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}function yNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TQ(n.key),n)}}function bNe(t,e,r){return e&&vNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W_(t,e,r){return e=TQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TQ(t){var e=wNe(t,"string");return Jg(e)=="symbol"?e:e+""}function wNe(t,e){if(Jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SNe=(function(){function t(){yNe(this,t),W_(this,"activeIndex",0),W_(this,"coordinateList",[]),W_(this,"layout","horizontal")}return bNe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,x=r.mouseHandlerCallback,y=x===void 0?null:x;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,x=o+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:x})}}}])})();function NNe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&yt(n)&&yt(a))return!0}return!1}function _Ne(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function jQ(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=On(e,r,n,a),c=On(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function TNe(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,x=On(c,d,h,m),y=On(c,d,p,m);n=x.x,a=x.y,i=y.x,o=y.y}else return jQ(e);return[{x:n,y:a},{x:i,y:o}]}function Zg(t){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(t)}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){jNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jNe(t,e,r){return e=ANe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ANe(t){var e=ENe(t,"string");return Zg(e)=="symbol"?e:e+""}function ENe(t,e){if(Zg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kNe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,x=t.chartName,y=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!y||!i||!o||x!=="ScatterChart"&&a!=="axis")return null;var S,w=Qj;if(x==="ScatterChart")S=o,w=A4e;else if(x==="BarChart")S=_Ne(m,o,d,p),w=D7;else if(m==="radial"){var N=jQ(o),A=N.cx,R=N.cy,O=N.radius,L=N.startAngle,I=N.endAngle;S={cx:A,cy:R,startAngle:L,endAngle:I,innerRadius:O,outerRadius:O},w=NX}else S={points:TNe(m,o,d)},w=Qj;var k=Xy(Xy(Xy(Xy({stroke:"#ccc",pointerEvents:"none"},d),S),Wt(y,!1)),{},{payload:c,payloadIndex:h,className:Sr("recharts-tooltip-cursor",y.className)});return T.isValidElement(y)?T.cloneElement(y,k):T.createElement(w,k)}var CNe=["item"],ONe=["children","className","width","height","style","compact","title","desc"];function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ah.apply(this,arguments)}function RU(t,e){return MNe(t)||RNe(t,e)||EQ(t,e)||INe()}function INe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RNe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function MNe(t){if(Array.isArray(t))return t}function MU(t,e){if(t==null)return{};var r=DNe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function DNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kQ(n.key),n)}}function BNe(t,e,r){return e&&LNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Ne(t,e,r){return e=c2(e),zNe(t,AQ()?Reflect.construct(e,r||[],c2(t).constructor):e.apply(t,r))}function zNe(t,e){if(e&&(Of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UNe(t)}function UNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AQ=function(){return!!t})()}function c2(t){return c2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},c2(t)}function VNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}function OA(t,e){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},OA(t,e)}function If(t){return HNe(t)||qNe(t)||EQ(t)||FNe()}function FNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EQ(t,e){if(t){if(typeof t=="string")return IA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IA(t,e)}}function qNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HNe(t){if(Array.isArray(t))return IA(t)}function IA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function DU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(r),!0).forEach(function(n){Jt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jt(t,e,r){return e=kQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kQ(t){var e=GNe(t,"string");return Of(e)=="symbol"?e:e+""}function GNe(t,e){if(Of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WNe={xAxis:["bottom","top"],yAxis:["left","right"]},KNe={width:"100%",height:"100%"},CQ={x:0,y:0};function Qy(t){return t}var XNe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},QNe=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return Qe(Qe(Qe({},a),On(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return Qe(Qe(Qe({},a),On(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return CQ},Vw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(If(c),If(h)):c},[]);return o.length>0?o:e&&e.length&&yt(a)&&yt(i)?e.slice(a,i+1):[]};function OQ(t){return t==="number"?[0,"auto"]:void 0}var RA=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Vw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var x;if(o.dataKey&&!o.allowDuplicatedCategory){var y=m===void 0?c:m;x=cb(y,o.dataKey,a)}else x=m&&m[n]||c[n];return x?[].concat(If(d),[xX(h,x)]):d},[])},PU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=XNe(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Xve(o,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,x=RA(e,r,p,m),y=QNe(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:x,activeCoordinate:y}}return null},YNe=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=e.stackOffset,y=dX(p,i);return n.reduce(function(S,w){var N,A=w.type.defaultProps!==void 0?Qe(Qe({},w.type.defaultProps),w.props):w.props,R=A.type,O=A.dataKey,L=A.allowDataOverflow,I=A.allowDuplicatedCategory,k=A.scale,E=A.ticks,j=A.includeHidden,C=A[o];if(S[C])return S;var q=Vw(e.data,{graphicalItems:a.filter(function(ae){var ne,ve=o in ae.props?ae.props[o]:(ne=ae.type.defaultProps)===null||ne===void 0?void 0:ne[o];return ve===C}),dataStartIndex:d,dataEndIndex:h}),D=q.length,$,B,V;NNe(A.domain,L,R)&&($=Hj(A.domain,null,L),y&&(R==="number"||k!=="auto")&&(V=Dm(q,O,"category")));var W=OQ(R);if(!$||$.length===0){var G,Y=(G=A.domain)!==null&&G!==void 0?G:W;if(O){if($=Dm(q,O,R),R==="category"&&y){var re=Vhe($);I&&re?(B=$,$=Xb(0,D)):I||($=P$(Y,$,w).reduce(function(ae,ne){return ae.indexOf(ne)>=0?ae:[].concat(If(ae),[ne])},[]))}else if(R==="category")I?$=$.filter(function(ae){return ae!==""&&!xr(ae)}):$=P$(Y,$,w).reduce(function(ae,ne){return ae.indexOf(ne)>=0||ne===""||xr(ne)?ae:[].concat(If(ae),[ne])},[]);else if(R==="number"){var ce=ebe(q,a.filter(function(ae){var ne,ve,pe=o in ae.props?ae.props[o]:(ne=ae.type.defaultProps)===null||ne===void 0?void 0:ne[o],Be="hide"in ae.props?ae.props.hide:(ve=ae.type.defaultProps)===null||ve===void 0?void 0:ve.hide;return pe===C&&(j||!Be)}),O,i,p);ce&&($=ce)}y&&(R==="number"||k!=="auto")&&(V=Dm(q,O,"category"))}else y?$=Xb(0,D):c&&c[C]&&c[C].hasStack&&R==="number"?$=x==="expand"?[0,1]:gX(c[C].stackGroups,d,h):$=uX(q,a.filter(function(ae){var ne=o in ae.props?ae.props[o]:ae.type.defaultProps[o],ve="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return ne===C&&(j||!ve)}),R,p,!0);if(R==="number")$=CA(m,$,C,i,E),Y&&($=Hj(Y,$,L));else if(R==="category"&&Y){var de=Y,X=$.every(function(ae){return de.indexOf(ae)>=0});X&&($=de)}}return Qe(Qe({},S),{},Jt({},C,Qe(Qe({},A),{},{axisType:i,domain:$,categoricalDomain:V,duplicateDomain:B,originalDomain:(N=A.domain)!==null&&N!==void 0?N:W,isCategorical:y,layout:p})))},{})},JNe=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,x=Vw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),y=x.length,S=dX(p,i),w=-1;return n.reduce(function(N,A){var R=A.type.defaultProps!==void 0?Qe(Qe({},A.type.defaultProps),A.props):A.props,O=R[o],L=OQ("number");if(!N[O]){w++;var I;return S?I=Xb(0,y):c&&c[O]&&c[O].hasStack?(I=gX(c[O].stackGroups,d,h),I=CA(m,I,O,i)):(I=Hj(L,uX(x,n.filter(function(k){var E,j,C=o in k.props?k.props[o]:(E=k.type.defaultProps)===null||E===void 0?void 0:E[o],q="hide"in k.props?k.props.hide:(j=k.type.defaultProps)===null||j===void 0?void 0:j.hide;return C===O&&!q}),"number",p),a.defaultProps.allowDataOverflow),I=CA(m,I,O,i)),Qe(Qe({},N),{},Jt({},O,Qe(Qe({axisType:i},a.defaultProps),{},{hide:!0,orientation:ao(WNe,"".concat(i,".").concat(w%2),null),domain:I,originalDomain:L,isCategorical:S,layout:p})))}return N},{})},ZNe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),x=Ms(p,i),y={};return x&&x.length?y=YNe(e,{axes:x,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(y=JNe(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),y},e_e=function(e){var r=mu(e),n=Zl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:o7(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Db(r,n)}},LU=function(e){var r=e.children,n=e.defaultShowTooltip,a=As(r,wf),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},t_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=nc(r&&r.type);return n&&n.indexOf("Bar")>=0})},BU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},r_e=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,x=n.margin||{},y=As(m,wf),S=As(m,Ph),w=Object.keys(d).reduce(function(I,k){var E=d[k],j=E.orientation;return!E.mirror&&!E.hide?Qe(Qe({},I),{},Jt({},j,I[j]+E.width)):I},{left:x.left||0,right:x.right||0}),N=Object.keys(o).reduce(function(I,k){var E=o[k],j=E.orientation;return!E.mirror&&!E.hide?Qe(Qe({},I),{},Jt({},j,ao(I,"".concat(j))+E.height)):I},{top:x.top||0,bottom:x.bottom||0}),A=Qe(Qe({},N),w),R=A.bottom;y&&(A.bottom+=y.props.height||wf.defaultProps.height),S&&r&&(A=Jve(A,a,n,r));var O=h-A.left-A.right,L=p-A.top-A.bottom;return Qe(Qe({brushBottom:R},A),{},{width:Math.max(O,0),height:Math.max(L,0)})},n_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},IQ=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,x=function(A,R){var O=R.graphicalItems,L=R.stackGroups,I=R.offset,k=R.updateId,E=R.dataStartIndex,j=R.dataEndIndex,C=A.barSize,q=A.layout,D=A.barGap,$=A.barCategoryGap,B=A.maxBarSize,V=BU(q),W=V.numericAxisName,G=V.cateAxisName,Y=t_e(O),re=[];return O.forEach(function(ce,de){var X=Vw(A.data,{graphicalItems:[ce],dataStartIndex:E,dataEndIndex:j}),ae=ce.type.defaultProps!==void 0?Qe(Qe({},ce.type.defaultProps),ce.props):ce.props,ne=ae.dataKey,ve=ae.maxBarSize,pe=ae["".concat(W,"Id")],Be=ae["".concat(G,"Id")],Ue={},Fe=d.reduce(function(Dt,tr){var he=R["".concat(tr.axisType,"Map")],Ge=ae["".concat(tr.axisType,"Id")];he&&he[Ge]||tr.axisType==="zAxis"||f0();var Pt=he[Ge];return Qe(Qe({},Dt),{},Jt(Jt({},tr.axisType,Pt),"".concat(tr.axisType,"Ticks"),Zl(Pt)))},Ue),Ne=Fe[G],He=Fe["".concat(G,"Ticks")],Z=L&&L[pe]&&L[pe].hasStack&&cbe(ce,L[pe].stackGroups),te=nc(ce.type).indexOf("Bar")>=0,be=Db(Ne,He),Se=[],Ze=Y&&Qve({barSize:C,stackGroups:L,totalSize:n_e(Fe,G)});if(te){var rt,It,At=xr(ve)?B:ve,Ft=(rt=(It=Db(Ne,He,!0))!==null&&It!==void 0?It:At)!==null&&rt!==void 0?rt:0;Se=Yve({barGap:D,barCategoryGap:$,bandSize:Ft!==be?Ft:be,sizeList:Ze[Be],maxBarSize:At}),Ft!==be&&(Se=Se.map(function(Dt){return Qe(Qe({},Dt),{},{position:Qe(Qe({},Dt.position),{},{offset:Dt.position.offset-Ft/2})})}))}var qt=ce&&ce.type&&ce.type.getComposedData;qt&&re.push({props:Qe(Qe({},qt(Qe(Qe({},Fe),{},{displayedData:X,props:A,dataKey:ne,item:ce,bandSize:be,barPosition:Se,offset:I,stackedData:Z,layout:q,dataStartIndex:E,dataEndIndex:j}))),{},Jt(Jt(Jt({key:ce.key||"item-".concat(de)},W,Fe[W]),G,Fe[G]),"animationId",k)),childIndex:tfe(ce,A.children),item:ce})}),re},y=function(A,R){var O=A.props,L=A.dataStartIndex,I=A.dataEndIndex,k=A.updateId;if(!QD({props:O}))return null;var E=O.children,j=O.layout,C=O.stackOffset,q=O.data,D=O.reverseStackOrder,$=BU(j),B=$.numericAxisName,V=$.cateAxisName,W=Ms(E,n),G=obe(q,W,"".concat(B,"Id"),"".concat(V,"Id"),C,D),Y=d.reduce(function(ae,ne){var ve="".concat(ne.axisType,"Map");return Qe(Qe({},ae),{},Jt({},ve,ZNe(O,Qe(Qe({},ne),{},{graphicalItems:W,stackGroups:ne.axisType===B&&G,dataStartIndex:L,dataEndIndex:I}))))},{}),re=r_e(Qe(Qe({},Y),{},{props:O,graphicalItems:W}),R==null?void 0:R.legendBBox);Object.keys(Y).forEach(function(ae){Y[ae]=p(O,Y[ae],re,ae.replace("Map",""),r)});var ce=Y["".concat(V,"Map")],de=e_e(ce),X=x(O,Qe(Qe({},Y),{},{dataStartIndex:L,dataEndIndex:I,updateId:k,graphicalItems:W,stackGroups:G,offset:re}));return Qe(Qe({formattedGraphicalItems:X,graphicalItems:W,offset:re,stackGroups:G},de),Y)},S=(function(N){function A(R){var O,L,I;return PNe(this,A),I=$Ne(this,A,[R]),Jt(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Jt(I,"accessibilityManager",new SNe),Jt(I,"handleLegendBBoxUpdate",function(k){if(k){var E=I.state,j=E.dataStartIndex,C=E.dataEndIndex,q=E.updateId;I.setState(Qe({legendBBox:k},y({props:I.props,dataStartIndex:j,dataEndIndex:C,updateId:q},Qe(Qe({},I.state),{},{legendBBox:k}))))}}),Jt(I,"handleReceiveSyncEvent",function(k,E,j){if(I.props.syncId===k){if(j===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(E)}}),Jt(I,"handleBrushChange",function(k){var E=k.startIndex,j=k.endIndex;if(E!==I.state.dataStartIndex||j!==I.state.dataEndIndex){var C=I.state.updateId;I.setState(function(){return Qe({dataStartIndex:E,dataEndIndex:j},y({props:I.props,dataStartIndex:E,dataEndIndex:j,updateId:C},I.state))}),I.triggerSyncEvent({dataStartIndex:E,dataEndIndex:j})}}),Jt(I,"handleMouseEnter",function(k){var E=I.getMouseInfo(k);if(E){var j=Qe(Qe({},E),{},{isTooltipActive:!0});I.setState(j),I.triggerSyncEvent(j);var C=I.props.onMouseEnter;cr(C)&&C(j,k)}}),Jt(I,"triggeredAfterMouseMove",function(k){var E=I.getMouseInfo(k),j=E?Qe(Qe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(j),I.triggerSyncEvent(j);var C=I.props.onMouseMove;cr(C)&&C(j,k)}),Jt(I,"handleItemMouseEnter",function(k){I.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Jt(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),Jt(I,"handleMouseMove",function(k){k.persist(),I.throttleTriggeredAfterMouseMove(k)}),Jt(I,"handleMouseLeave",function(k){I.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};I.setState(E),I.triggerSyncEvent(E);var j=I.props.onMouseLeave;cr(j)&&j(E,k)}),Jt(I,"handleOuterEvent",function(k){var E=efe(k),j=ao(I.props,"".concat(E));if(E&&cr(j)){var C,q;/.*touch.*/i.test(E)?q=I.getMouseInfo(k.changedTouches[0]):q=I.getMouseInfo(k),j((C=q)!==null&&C!==void 0?C:{},k)}}),Jt(I,"handleClick",function(k){var E=I.getMouseInfo(k);if(E){var j=Qe(Qe({},E),{},{isTooltipActive:!0});I.setState(j),I.triggerSyncEvent(j);var C=I.props.onClick;cr(C)&&C(j,k)}}),Jt(I,"handleMouseDown",function(k){var E=I.props.onMouseDown;if(cr(E)){var j=I.getMouseInfo(k);E(j,k)}}),Jt(I,"handleMouseUp",function(k){var E=I.props.onMouseUp;if(cr(E)){var j=I.getMouseInfo(k);E(j,k)}}),Jt(I,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Jt(I,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&I.handleMouseDown(k.changedTouches[0])}),Jt(I,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&I.handleMouseUp(k.changedTouches[0])}),Jt(I,"handleDoubleClick",function(k){var E=I.props.onDoubleClick;if(cr(E)){var j=I.getMouseInfo(k);E(j,k)}}),Jt(I,"handleContextMenu",function(k){var E=I.props.onContextMenu;if(cr(E)){var j=I.getMouseInfo(k);E(j,k)}}),Jt(I,"triggerSyncEvent",function(k){I.props.syncId!==void 0&&H_.emit(G_,I.props.syncId,k,I.eventEmitterSymbol)}),Jt(I,"applySyncEvent",function(k){var E=I.props,j=E.layout,C=E.syncMethod,q=I.state.updateId,D=k.dataStartIndex,$=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)I.setState(Qe({dataStartIndex:D,dataEndIndex:$},y({props:I.props,dataStartIndex:D,dataEndIndex:$,updateId:q},I.state)));else if(k.activeTooltipIndex!==void 0){var B=k.chartX,V=k.chartY,W=k.activeTooltipIndex,G=I.state,Y=G.offset,re=G.tooltipTicks;if(!Y)return;if(typeof C=="function")W=C(re,k);else if(C==="value"){W=-1;for(var ce=0;ce<re.length;ce++)if(re[ce].value===k.activeLabel){W=ce;break}}var de=Qe(Qe({},Y),{},{x:Y.left,y:Y.top}),X=Math.min(B,de.x+de.width),ae=Math.min(V,de.y+de.height),ne=re[W]&&re[W].value,ve=RA(I.state,I.props.data,W),pe=re[W]?{x:j==="horizontal"?re[W].coordinate:X,y:j==="horizontal"?ae:re[W].coordinate}:CQ;I.setState(Qe(Qe({},k),{},{activeLabel:ne,activeCoordinate:pe,activePayload:ve,activeTooltipIndex:W}))}else I.setState(k)}),Jt(I,"renderCursor",function(k){var E,j=I.state,C=j.isTooltipActive,q=j.activeCoordinate,D=j.activePayload,$=j.offset,B=j.activeTooltipIndex,V=j.tooltipAxisBandSize,W=I.getTooltipEventType(),G=(E=k.props.active)!==null&&E!==void 0?E:C,Y=I.props.layout,re=k.key||"_recharts-cursor";return ie.createElement(kNe,{key:re,activeCoordinate:q,activePayload:D,activeTooltipIndex:B,chartName:r,element:k,isActive:G,layout:Y,offset:$,tooltipAxisBandSize:V,tooltipEventType:W})}),Jt(I,"renderPolarAxis",function(k,E,j){var C=ao(k,"type.axisType"),q=ao(I.state,"".concat(C,"Map")),D=k.type.defaultProps,$=D!==void 0?Qe(Qe({},D),k.props):k.props,B=q&&q[$["".concat(C,"Id")]];return T.cloneElement(k,Qe(Qe({},B),{},{className:Sr(C,B.className),key:k.key||"".concat(E,"-").concat(j),ticks:Zl(B,!0)}))}),Jt(I,"renderPolarGrid",function(k){var E=k.props,j=E.radialLines,C=E.polarAngles,q=E.polarRadius,D=I.state,$=D.radiusAxisMap,B=D.angleAxisMap,V=mu($),W=mu(B),G=W.cx,Y=W.cy,re=W.innerRadius,ce=W.outerRadius;return T.cloneElement(k,{polarAngles:Array.isArray(C)?C:Zl(W,!0).map(function(de){return de.coordinate}),polarRadius:Array.isArray(q)?q:Zl(V,!0).map(function(de){return de.coordinate}),cx:G,cy:Y,innerRadius:re,outerRadius:ce,key:k.key||"polar-grid",radialLines:j})}),Jt(I,"renderLegend",function(){var k=I.state.formattedGraphicalItems,E=I.props,j=E.children,C=E.width,q=E.height,D=I.props.margin||{},$=C-(D.left||0)-(D.right||0),B=lX({children:j,formattedGraphicalItems:k,legendWidth:$,legendContent:h});if(!B)return null;var V=B.item,W=MU(B,CNe);return T.cloneElement(V,Qe(Qe({},W),{},{chartWidth:C,chartHeight:q,margin:D,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),Jt(I,"renderTooltip",function(){var k,E=I.props,j=E.children,C=E.accessibilityLayer,q=As(j,Wo);if(!q)return null;var D=I.state,$=D.isTooltipActive,B=D.activeCoordinate,V=D.activePayload,W=D.activeLabel,G=D.offset,Y=(k=q.props.active)!==null&&k!==void 0?k:$;return T.cloneElement(q,{viewBox:Qe(Qe({},G),{},{x:G.left,y:G.top}),active:Y,label:W,payload:Y?V:[],coordinate:B,accessibilityLayer:C})}),Jt(I,"renderBrush",function(k){var E=I.props,j=E.margin,C=E.data,q=I.state,D=q.offset,$=q.dataStartIndex,B=q.dataEndIndex,V=q.updateId;return T.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Hy(I.handleBrushChange,k.props.onChange),data:C,x:yt(k.props.x)?k.props.x:D.left,y:yt(k.props.y)?k.props.y:D.top+D.height+D.brushBottom-(j.bottom||0),width:yt(k.props.width)?k.props.width:D.width,startIndex:$,endIndex:B,updateId:"brush-".concat(V)})}),Jt(I,"renderReferenceElement",function(k,E,j){if(!k)return null;var C=I,q=C.clipPathId,D=I.state,$=D.xAxisMap,B=D.yAxisMap,V=D.offset,W=k.type.defaultProps||{},G=k.props,Y=G.xAxisId,re=Y===void 0?W.xAxisId:Y,ce=G.yAxisId,de=ce===void 0?W.yAxisId:ce;return T.cloneElement(k,{key:k.key||"".concat(E,"-").concat(j),xAxis:$[re],yAxis:B[de],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:q})}),Jt(I,"renderActivePoints",function(k){var E=k.item,j=k.activePoint,C=k.basePoint,q=k.childIndex,D=k.isRange,$=[],B=E.props.key,V=E.item.type.defaultProps!==void 0?Qe(Qe({},E.item.type.defaultProps),E.item.props):E.item.props,W=V.activeDot,G=V.dataKey,Y=Qe(Qe({index:q,dataKey:G,cx:j.x,cy:j.y,r:4,fill:M7(E.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},Wt(W,!1)),ub(W));return $.push(A.renderActiveDot(W,Y,"".concat(B,"-activePoint-").concat(q))),C?$.push(A.renderActiveDot(W,Qe(Qe({},Y),{},{cx:C.x,cy:C.y}),"".concat(B,"-basePoint-").concat(q))):D&&$.push(null),$}),Jt(I,"renderGraphicChild",function(k,E,j){var C=I.filterFormatItem(k,E,j);if(!C)return null;var q=I.getTooltipEventType(),D=I.state,$=D.isTooltipActive,B=D.tooltipAxis,V=D.activeTooltipIndex,W=D.activeLabel,G=I.props.children,Y=As(G,Wo),re=C.props,ce=re.points,de=re.isRange,X=re.baseLine,ae=C.item.type.defaultProps!==void 0?Qe(Qe({},C.item.type.defaultProps),C.item.props):C.item.props,ne=ae.activeDot,ve=ae.hide,pe=ae.activeBar,Be=ae.activeShape,Ue=!!(!ve&&$&&Y&&(ne||pe||Be)),Fe={};q!=="axis"&&Y&&Y.props.trigger==="click"?Fe={onClick:Hy(I.handleItemMouseEnter,k.props.onClick)}:q!=="axis"&&(Fe={onMouseLeave:Hy(I.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Hy(I.handleItemMouseEnter,k.props.onMouseEnter)});var Ne=T.cloneElement(k,Qe(Qe({},C.props),Fe));function He(tr){return typeof B.dataKey=="function"?B.dataKey(tr.payload):null}if(Ue)if(V>=0){var Z,te;if(B.dataKey&&!B.allowDuplicatedCategory){var be=typeof B.dataKey=="function"?He:"payload.".concat(B.dataKey.toString());Z=cb(ce,be,W),te=de&&X&&cb(X,be,W)}else Z=ce==null?void 0:ce[V],te=de&&X&&X[V];if(Be||pe){var Se=k.props.activeIndex!==void 0?k.props.activeIndex:V;return[T.cloneElement(k,Qe(Qe(Qe({},C.props),Fe),{},{activeIndex:Se})),null,null]}if(!xr(Z))return[Ne].concat(If(I.renderActivePoints({item:C,activePoint:Z,basePoint:te,childIndex:V,isRange:de})))}else{var Ze,rt=(Ze=I.getItemByXY(I.state.activeCoordinate))!==null&&Ze!==void 0?Ze:{graphicalItem:Ne},It=rt.graphicalItem,At=It.item,Ft=At===void 0?k:At,qt=It.childIndex,Dt=Qe(Qe(Qe({},C.props),Fe),{},{activeIndex:qt});return[T.cloneElement(Ft,Dt),null,null]}return de?[Ne,null,null]:[Ne,null]}),Jt(I,"renderCustomized",function(k,E,j){return T.cloneElement(k,Qe(Qe({key:"recharts-customized-".concat(j)},I.props),I.state))}),Jt(I,"renderMap",{CartesianGrid:{handler:Qy,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:Qy},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:Qy},YAxis:{handler:Qy},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((O=R.id)!==null&&O!==void 0?O:Ix("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=oK(I.triggeredAfterMouseMove,(L=R.throttleDelay)!==null&&L!==void 0?L:1e3/60),I.state={},I}return VNe(A,N),BNe(A,[{key:"componentDidMount",value:function(){var O,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var O=this.props,L=O.children,I=O.data,k=O.height,E=O.layout,j=As(L,Wo);if(j){var C=j.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var q=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,D=RA(this.state,I,C,q),$=this.state.tooltipTicks[C].coordinate,B=(this.state.offset.top+k)/2,V=E==="horizontal",W=V?{x:$,y:B}:{y:$,x:B},G=this.state.formattedGraphicalItems.find(function(re){var ce=re.item;return ce.type.name==="Scatter"});G&&(W=Qe(Qe({},W),G.props.points[C].tooltipPosition),D=G.props.points[C].tooltipPayload);var Y={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:q,activePayload:D,activeCoordinate:W};this.setState(Y),this.renderCursor(j),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(O,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==O.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==O.margin){var I,k;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(O){fj([As(O.children,Wo)],[As(this.props.children,Wo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var O=As(this.props.children,Wo);if(O&&typeof O.props.shared=="boolean"){var L=O.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(O){if(!this.container)return null;var L=this.container,I=L.getBoundingClientRect(),k=Uge(I),E={chartX:Math.round(O.pageX-k.left),chartY:Math.round(O.pageY-k.top)},j=I.width/L.offsetWidth||1,C=this.inRange(E.chartX,E.chartY,j);if(!C)return null;var q=this.state,D=q.xAxisMap,$=q.yAxisMap,B=this.getTooltipEventType(),V=PU(this.state,this.props.data,this.props.layout,C);if(B!=="axis"&&D&&$){var W=mu(D).scale,G=mu($).scale,Y=W&&W.invert?W.invert(E.chartX):null,re=G&&G.invert?G.invert(E.chartY):null;return Qe(Qe({},E),{},{xValue:Y,yValue:re},V)}return V?Qe(Qe({},E),V):null}},{key:"inRange",value:function(O,L){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,E=O/I,j=L/I;if(k==="horizontal"||k==="vertical"){var C=this.state.offset,q=E>=C.left&&E<=C.left+C.width&&j>=C.top&&j<=C.top+C.height;return q?{x:E,y:j}:null}var D=this.state,$=D.angleAxisMap,B=D.radiusAxisMap;if($&&B){var V=mu($);return $$({x:E,y:j},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var O=this.props.children,L=this.getTooltipEventType(),I=As(O,Wo),k={};I&&L==="axis"&&(I.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=ub(this.props,this.handleOuterEvent);return Qe(Qe({},E),k)}},{key:"addListener",value:function(){H_.on(G_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){H_.removeListener(G_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(O,L,I){for(var k=this.state.formattedGraphicalItems,E=0,j=k.length;E<j;E++){var C=k[E];if(C.item===O||C.props.key===O.key||L===nc(C.item.type)&&I===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var O=this.clipPathId,L=this.state.offset,I=L.left,k=L.top,E=L.height,j=L.width;return ie.createElement("defs",null,ie.createElement("clipPath",{id:O},ie.createElement("rect",{x:I,y:k,height:E,width:j})))}},{key:"getXScales",value:function(){var O=this.state.xAxisMap;return O?Object.entries(O).reduce(function(L,I){var k=RU(I,2),E=k[0],j=k[1];return Qe(Qe({},L),{},Jt({},E,j.scale))},{}):null}},{key:"getYScales",value:function(){var O=this.state.yAxisMap;return O?Object.entries(O).reduce(function(L,I){var k=RU(I,2),E=k[0],j=k[1];return Qe(Qe({},L),{},Jt({},E,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(O){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[O])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(O){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[O])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(O){var L=this.state,I=L.formattedGraphicalItems,k=L.activeItem;if(I&&I.length)for(var E=0,j=I.length;E<j;E++){var C=I[E],q=C.props,D=C.item,$=D.type.defaultProps!==void 0?Qe(Qe({},D.type.defaultProps),D.props):D.props,B=nc(D.type);if(B==="Bar"){var V=(q.data||[]).find(function(re){return l4e(O,re)});if(V)return{graphicalItem:C,payload:V}}else if(B==="RadialBar"){var W=(q.data||[]).find(function(re){return $$(O,re)});if(W)return{graphicalItem:C,payload:W}}else if(Iw(C,k)||Rw(C,k)||Wg(C,k)){var G=U5e({graphicalItem:C,activeTooltipItem:k,itemData:$.data}),Y=$.activeIndex===void 0?G:$.activeIndex;return{graphicalItem:Qe(Qe({},C),{},{childIndex:Y}),payload:Wg(C,k)?$.data[G]:C.props.data[G]}}}return null}},{key:"render",value:function(){var O=this;if(!QD(this))return null;var L=this.props,I=L.children,k=L.className,E=L.width,j=L.height,C=L.style,q=L.compact,D=L.title,$=L.desc,B=MU(L,ONe),V=Wt(B,!1);if(q)return ie.createElement(mU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement(mj,Ah({},V,{width:E,height:j,title:D,desc:$}),this.renderClipPath(),JD(I,this.renderMap)));if(this.props.accessibilityLayer){var W,G;V.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,V.role=(G=this.props.role)!==null&&G!==void 0?G:"application",V.onKeyDown=function(re){O.accessibilityManager.keyboardEvent(re)},V.onFocus=function(){O.accessibilityManager.focus()}}var Y=this.parseEventsOfWrapper();return ie.createElement(mU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ie.createElement("div",Ah({className:Sr("recharts-wrapper",k),style:Qe({position:"relative",cursor:"default",width:E,height:j},C)},Y,{ref:function(ce){O.container=ce}}),ie.createElement(mj,Ah({},V,{width:E,height:j,title:D,desc:$,style:KNe}),this.renderClipPath(),JD(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(T.Component);Jt(S,"displayName",r),Jt(S,"defaultProps",Qe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Jt(S,"getDerivedStateFromProps",function(N,A){var R=N.dataKey,O=N.data,L=N.children,I=N.width,k=N.height,E=N.layout,j=N.stackOffset,C=N.margin,q=A.dataStartIndex,D=A.dataEndIndex;if(A.updateId===void 0){var $=LU(N);return Qe(Qe(Qe({},$),{},{updateId:0},y(Qe(Qe({props:N},$),{},{updateId:0}),A)),{},{prevDataKey:R,prevData:O,prevWidth:I,prevHeight:k,prevLayout:E,prevStackOffset:j,prevMargin:C,prevChildren:L})}if(R!==A.prevDataKey||O!==A.prevData||I!==A.prevWidth||k!==A.prevHeight||E!==A.prevLayout||j!==A.prevStackOffset||!Dh(C,A.prevMargin)){var B=LU(N),V={chartX:A.chartX,chartY:A.chartY,isTooltipActive:A.isTooltipActive},W=Qe(Qe({},PU(A,O,E)),{},{updateId:A.updateId+1}),G=Qe(Qe(Qe({},B),V),W);return Qe(Qe(Qe({},G),y(Qe({props:N},G),A)),{},{prevDataKey:R,prevData:O,prevWidth:I,prevHeight:k,prevLayout:E,prevStackOffset:j,prevMargin:C,prevChildren:L})}if(!fj(L,A.prevChildren)){var Y,re,ce,de,X=As(L,wf),ae=X&&(Y=(re=X.props)===null||re===void 0?void 0:re.startIndex)!==null&&Y!==void 0?Y:q,ne=X&&(ce=(de=X.props)===null||de===void 0?void 0:de.endIndex)!==null&&ce!==void 0?ce:D,ve=ae!==q||ne!==D,pe=!xr(O),Be=pe&&!ve?A.updateId:A.updateId+1;return Qe(Qe({updateId:Be},y(Qe(Qe({props:N},A),{},{updateId:Be,dataStartIndex:ae,dataEndIndex:ne}),A)),{},{prevChildren:L,dataStartIndex:ae,dataEndIndex:ne})}return null}),Jt(S,"renderActiveDot",function(N,A,R){var O;return T.isValidElement(N)?O=T.cloneElement(N,A):cr(N)?O=N(A):O=ie.createElement(kw,A),ie.createElement(Jr,{className:"recharts-active-dot",key:R},O)});var w=T.forwardRef(function(A,R){return ie.createElement(S,Ah({},A,{ref:R}))});return w.displayName=S.displayName,w},a_e=IQ({chartName:"RadarChart",GraphicalChild:Vx,axisComponents:[{axisType:"angleAxis",AxisComp:Ux},{axisType:"radiusAxis",AxisComp:zx}],formatAxisMap:bbe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),i_e=IQ({chartName:"ScatterChart",GraphicalChild:qx,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:zw},{axisType:"yAxis",AxisComp:Uw},{axisType:"zAxis",AxisComp:$w}],formatAxisMap:Y3e});const Fw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function H7(t){return"nodeType"in t}function Vi(t){var e,r;return t?Zf(t)?t:H7(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function G7(t){const{Document:e}=Vi(t);return t instanceof e}function Hx(t){return Zf(t)?!1:t instanceof Vi(t).HTMLElement}function RQ(t){return t instanceof Vi(t).SVGElement}function ep(t){return t?Zf(t)?t.document:H7(t)?G7(t)?t:Hx(t)||RQ(t)?t.ownerDocument:document:document:document}const vc=Fw?T.useLayoutEffect:T.useEffect;function qw(t){const e=T.useRef(t);return vc(()=>{e.current=t}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function s_e(){const t=T.useRef(null),e=T.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function ex(t,e){e===void 0&&(e=[t]);const r=T.useRef(t);return vc(()=>{r.current!==t&&(r.current=t)},e),r}function Gx(t,e){const r=T.useRef();return T.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function u2(t){const e=qw(t),r=T.useRef(null),n=T.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function d2(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let K_={};function Hw(t,e){return T.useMemo(()=>{if(e)return e;const r=K_[t]==null?0:K_[t]+1;return K_[t]=r,t+"-"+r},[t,e])}function MQ(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const $h=MQ(1),h2=MQ(-1);function o_e(t){return"clientX"in t&&"clientY"in t}function W7(t){if(!t)return!1;const{KeyboardEvent:e}=Vi(t.target);return e&&t instanceof e}function l_e(t){if(!t)return!1;const{TouchEvent:e}=Vi(t.target);return e&&t instanceof e}function tx(t){if(l_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return o_e(t)?{x:t.clientX,y:t.clientY}:null}const rx=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[rx.Translate.toString(t),rx.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),$U="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function c_e(t){return t.matches($U)?t:t.querySelector($U)}const u_e={display:"none"};function d_e(t){let{id:e,value:r}=t;return ie.createElement("div",{id:e,style:u_e},r)}function h_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ie.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function f_e(){const[t,e]=T.useState("");return{announce:T.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const DQ=T.createContext(null);function p_e(t){const e=T.useContext(DQ);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function m_e(){const[t]=T.useState(()=>new Set),e=T.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[T.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const g_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function y_e(t){let{announcements:e=x_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=g_e}=t;const{announce:i,announcement:o}=f_e(),c=Hw("DndLiveRegion"),[d,h]=T.useState(!1);if(T.useEffect(()=>{h(!0)},[]),p_e(T.useMemo(()=>({onDragStart(m){let{active:x}=m;i(e.onDragStart({active:x}))},onDragMove(m){let{active:x,over:y}=m;e.onDragMove&&i(e.onDragMove({active:x,over:y}))},onDragOver(m){let{active:x,over:y}=m;i(e.onDragOver({active:x,over:y}))},onDragEnd(m){let{active:x,over:y}=m;i(e.onDragEnd({active:x,over:y}))},onDragCancel(m){let{active:x,over:y}=m;i(e.onDragCancel({active:x,over:y}))}}),[i,e])),!d)return null;const p=ie.createElement(ie.Fragment,null,ie.createElement(d_e,{id:n,value:a.draggable}),ie.createElement(h_e,{id:c,announcement:o}));return r?xu.createPortal(p,r):p}var Ha;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ha||(Ha={}));function f2(){}function zU(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function v_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Io=Object.freeze({x:0,y:0});function b_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function w_e(t,e){const r=tx(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function S_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function N_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function __e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function UU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const T_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=UU(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=b_e(UU(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(S_e)};function j_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=o*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const A_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=j_e(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(N_e)};function E_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function PQ(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Io}function k_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const C_e=k_e(1);function LQ(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function O_e(t,e,r){const n=LQ(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const I_e={ignoreTransform:!1};function Wx(t,e){e===void 0&&(e=I_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Vi(t).getComputedStyle(t);h&&(r=O_e(r,h,p))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function VU(t){return Wx(t,{ignoreTransform:!0})}function R_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function M_e(t,e){return e===void 0&&(e=Vi(t).getComputedStyle(t)),e.position==="fixed"}function D_e(t,e){e===void 0&&(e=Vi(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function K7(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(G7(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!Hx(a)||RQ(a)||r.includes(a))return r;const i=Vi(t).getComputedStyle(a);return a!==t&&D_e(a,i)&&r.push(a),M_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function BQ(t){const[e]=K7(t,1);return e??null}function X_(t){return!Fw||!t?null:Zf(t)?t:H7(t)?G7(t)||t===ep(t).scrollingElement?window:Hx(t)?t:null:null}function $Q(t){return Zf(t)?t.scrollX:t.scrollLeft}function zQ(t){return Zf(t)?t.scrollY:t.scrollTop}function MA(t){return{x:$Q(t),y:zQ(t)}}var ni;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ni||(ni={}));function UQ(t){return!Fw||!t?!1:t===document.scrollingElement}function VQ(t){const e={x:0,y:0},r=UQ(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const P_e={x:.2,y:.2};function L_e(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=P_e);const{isTop:h,isBottom:p,isLeft:m,isRight:x}=VQ(t),y={x:0,y:0},S={x:0,y:0},w={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+w.height?(y.y=ni.Backward,S.y=n*Math.abs((e.top+w.height-i)/w.height)):!p&&d>=e.bottom-w.height&&(y.y=ni.Forward,S.y=n*Math.abs((e.bottom-w.height-d)/w.height)),!x&&c>=e.right-w.width?(y.x=ni.Forward,S.x=n*Math.abs((e.right-w.width-c)/w.width)):!m&&o<=e.left+w.width&&(y.x=ni.Backward,S.x=n*Math.abs((e.left+w.width-o)/w.width)),{direction:y,speed:S}}function B_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function FQ(t){return t.reduce((e,r)=>$h(e,MA(r)),Io)}function $_e(t){return t.reduce((e,r)=>e+$Q(r),0)}function z_e(t){return t.reduce((e,r)=>e+zQ(r),0)}function qQ(t,e){if(e===void 0&&(e=Wx),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);BQ(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const U_e=[["x",["left","right"],$_e],["y",["top","bottom"],z_e]];class X7{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=K7(r),a=FQ(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of U_e)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Um{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function V_e(t){const{EventTarget:e}=Vi(t);return t instanceof e?t:ep(t)}function Q_(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Zs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Zs||(Zs={}));function FU(t){t.preventDefault()}function F_e(t){t.stopPropagation()}var Ln;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ln||(Ln={}));const HQ={start:[Ln.Space,Ln.Enter],cancel:[Ln.Esc],end:[Ln.Space,Ln.Enter,Ln.Tab]},q_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Ln.Right:return{...r,x:r.x+25};case Ln.Left:return{...r,x:r.x-25};case Ln.Down:return{...r,y:r.y+25};case Ln.Up:return{...r,y:r.y-25}}};class GQ{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Um(ep(r)),this.windowListeners=new Um(Vi(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Zs.Resize,this.handleCancel),this.windowListeners.add(Zs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Zs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&qQ(n),r(Io)}handleKeyDown(e){if(W7(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=HQ,coordinateGetter:o=q_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:Io;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:r,context:n.current,currentCoordinates:p});if(m){const x=h2(m,p),y={x:0,y:0},{scrollableAncestors:S}=n.current;for(const w of S){const N=e.code,{isTop:A,isRight:R,isLeft:O,isBottom:L,maxScroll:I,minScroll:k}=VQ(w),E=B_e(w),j={x:Math.min(N===Ln.Right?E.right-E.width/2:E.right,Math.max(N===Ln.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(N===Ln.Down?E.bottom-E.height/2:E.bottom,Math.max(N===Ln.Down?E.top:E.top+E.height/2,m.y))},C=N===Ln.Right&&!R||N===Ln.Left&&!O,q=N===Ln.Down&&!L||N===Ln.Up&&!A;if(C&&j.x!==m.x){const D=w.scrollLeft+x.x,$=N===Ln.Right&&D<=I.x||N===Ln.Left&&D>=k.x;if($&&!x.y){w.scrollTo({left:D,behavior:c});return}$?y.x=w.scrollLeft-D:y.x=N===Ln.Right?w.scrollLeft-I.x:w.scrollLeft-k.x,y.x&&w.scrollBy({left:-y.x,behavior:c});break}else if(q&&j.y!==m.y){const D=w.scrollTop+x.y,$=N===Ln.Down&&D<=I.y||N===Ln.Up&&D>=k.y;if($&&!x.x){w.scrollTo({top:D,behavior:c});return}$?y.y=w.scrollTop-D:y.y=N===Ln.Down?w.scrollTop-I.y:w.scrollTop-k.y,y.y&&w.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(e,$h(h2(m,this.referenceCoordinates),y))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}GQ.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=HQ,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function qU(t){return!!(t&&"distance"in t)}function HU(t){return!!(t&&"delay"in t)}class Q7{constructor(e,r,n){var a;n===void 0&&(n=V_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=ep(o),this.documentListeners=new Um(this.document),this.listeners=new Um(n),this.windowListeners=new Um(Vi(o)),this.initialCoordinates=(a=tx(i))!=null?a:Io,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Zs.Resize,this.handleCancel),this.windowListeners.add(Zs.DragStart,FU),this.windowListeners.add(Zs.VisibilityChange,this.handleCancel),this.windowListeners.add(Zs.ContextMenu,FU),this.documentListeners.add(Zs.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(HU(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(qU(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Zs.Click,F_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Zs.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=tx(e))!=null?r:Io,h=h2(a,d);if(!n&&c){if(qU(c)){if(c.tolerance!=null&&Q_(h,c.tolerance))return this.handleCancel();if(Q_(h,c.distance))return this.handleStart()}if(HU(c)&&Q_(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Ln.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const H_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Y7 extends Q7{constructor(e){const{event:r}=e,n=ep(r.target);super(e,H_e,n)}}Y7.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const G_e={move:{name:"mousemove"},end:{name:"mouseup"}};var DA;(function(t){t[t.RightClick=2]="RightClick"})(DA||(DA={}));class W_e extends Q7{constructor(e){super(e,G_e,ep(e.event.target))}}W_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===DA.RightClick?!1:(n==null||n({event:r}),!0)}}];const Y_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class WQ extends Q7{constructor(e){super(e,Y_)}static setup(){return window.addEventListener(Y_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Y_.move.name,e)};function e(){}}}WQ.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Vm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Vm||(Vm={}));var p2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(p2||(p2={}));function K_e(t){let{acceleration:e,activator:r=Vm.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=p2.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:x}=t;const y=Q_e({delta:m,disabled:!i}),[S,w]=s_e(),N=T.useRef({x:0,y:0}),A=T.useRef({x:0,y:0}),R=T.useMemo(()=>{switch(r){case Vm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Vm.DraggableRect:return a}},[r,a,d]),O=T.useRef(null),L=T.useCallback(()=>{const k=O.current;if(!k)return;const E=N.current.x*A.current.x,j=N.current.y*A.current.y;k.scrollBy(E,j)},[]),I=T.useMemo(()=>c===p2.TreeOrder?[...h].reverse():h,[c,h]);T.useEffect(()=>{if(!i||!h.length||!R){w();return}for(const k of I){if((n==null?void 0:n(k))===!1)continue;const E=h.indexOf(k),j=p[E];if(!j)continue;const{direction:C,speed:q}=L_e(k,j,R,e,x);for(const D of["x","y"])y[D][C[D]]||(q[D]=0,C[D]=0);if(q.x>0||q.y>0){w(),O.current=k,S(L,o),N.current=q,A.current=C;return}}N.current={x:0,y:0},A.current={x:0,y:0},w()},[e,L,n,w,i,o,JSON.stringify(R),JSON.stringify(y),S,h,I,p,JSON.stringify(x)])}const X_e={x:{[ni.Backward]:!1,[ni.Forward]:!1},y:{[ni.Backward]:!1,[ni.Forward]:!1}};function Q_e(t){let{delta:e,disabled:r}=t;const n=d2(e);return Gx(a=>{if(r||!n||!a)return X_e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ni.Backward]:a.x[ni.Backward]||i.x===-1,[ni.Forward]:a.x[ni.Forward]||i.x===1},y:{[ni.Backward]:a.y[ni.Backward]||i.y===-1,[ni.Forward]:a.y[ni.Forward]||i.y===1}}},[r,e,n])}function Y_e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return Gx(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function J_e(t,e){return T.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var nx;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(nx||(nx={}));var PA;(function(t){t.Optimized="optimized"})(PA||(PA={}));const GU=new Map;function Z_e(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=T.useState(null),{frequency:c,measure:d,strategy:h}=a,p=T.useRef(t),m=N(),x=ex(m),y=T.useCallback(function(A){A===void 0&&(A=[]),!x.current&&o(R=>R===null?A:R.concat(A.filter(O=>!R.includes(O))))},[x]),S=T.useRef(null),w=Gx(A=>{if(m&&!r)return GU;if(!A||A===GU||p.current!==t||i!=null){const R=new Map;for(let O of t){if(!O)continue;if(i&&i.length>0&&!i.includes(O.id)&&O.rect.current){R.set(O.id,O.rect.current);continue}const L=O.node.current,I=L?new X7(d(L),L):null;O.rect.current=I,I&&R.set(O.id,I)}return R}return A},[t,i,r,m,d]);return T.useEffect(()=>{p.current=t},[t]),T.useEffect(()=>{m||y()},[r,m]),T.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),T.useEffect(()=>{m||typeof c!="number"||S.current!==null||(S.current=setTimeout(()=>{y(),S.current=null},c))},[c,m,y,...n]),{droppableRects:w,measureDroppableContainers:y,measuringScheduled:i!=null};function N(){switch(h){case nx.Always:return!1;case nx.BeforeDragging:return r;default:return!r}}}function J7(t,e){return Gx(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function eTe(t,e){return J7(t,e)}function tTe(t){let{callback:e,disabled:r}=t;const n=qw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Gw(t){let{callback:e,disabled:r}=t;const n=qw(e),a=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function rTe(t){return new X7(Wx(t),t)}function WU(t,e,r){e===void 0&&(e=rTe);const[n,a]=T.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const o=tTe({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=Gw({callback:i});return vc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function nTe(t){const e=J7(t);return PQ(t,e)}const KU=[];function aTe(t){const e=T.useRef(t),r=Gx(n=>t?n&&n!==KU&&t&&e.current&&t.parentNode===e.current.parentNode?n:K7(t):KU,[t]);return T.useEffect(()=>{e.current=t},[t]),r}function iTe(t){const[e,r]=T.useState(null),n=T.useRef(t),a=T.useCallback(i=>{const o=X_(i.target);o&&r(c=>c?(c.set(o,MA(o)),new Map(c)):null)},[]);return T.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=X_(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,MA(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=X_(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>$h(i,o),Io):FQ(t):Io,[t,e])}function XU(t,e){e===void 0&&(e=[]);const r=T.useRef(null);return T.useEffect(()=>{r.current=null},e),T.useEffect(()=>{const n=t!==Io;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?h2(t,r.current):Io}function sTe(t){T.useEffect(()=>{if(!Fw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function oTe(t,e){return T.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function KQ(t){return T.useMemo(()=>t?R_e(t):null,[t])}const QU=[];function lTe(t,e){e===void 0&&(e=Wx);const[r]=t,n=KQ(r?Vi(r):null),[a,i]=T.useState(QU);function o(){i(()=>t.length?t.map(d=>UQ(d)?n:new X7(e(d),d)):QU)}const c=Gw({callback:o});return vc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function XQ(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Hx(e)?e:t}function cTe(t){let{measure:e}=t;const[r,n]=T.useState(null),a=T.useCallback(h=>{for(const{target:p}of h)if(Hx(p)){n(m=>{const x=e(p);return m?{...m,width:x.width,height:x.height}:x});break}},[e]),i=Gw({callback:a}),o=T.useCallback(h=>{const p=XQ(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=u2(o);return T.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const uTe=[{sensor:Y7,options:{}},{sensor:GQ,options:{}}],dTe={current:{}},Nv={draggable:{measure:VU},droppable:{measure:VU,strategy:nx.WhileDragging,frequency:PA.Optimized},dragOverlay:{measure:Wx}};class Fm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const hTe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:f2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Nv,measureDroppableContainers:f2,windowRect:null,measuringScheduled:!1},QQ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:f2,draggableNodes:new Map,over:null,measureDroppableContainers:f2},Kx=T.createContext(QQ),YQ=T.createContext(hTe);function fTe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fm}}}function pTe(t,e){switch(e.type){case Ha.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ha.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ha.DragEnd:case Ha.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ha.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Fm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Ha.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Fm(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Ha.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Fm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function mTe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=T.useContext(Kx),i=d2(n),o=d2(r==null?void 0:r.id);return T.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!W7(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=c_e(p);if(m){m.focus();break}}})}},[n,e,a,o,i]),null}function JQ(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function gTe(t){return T.useMemo(()=>({draggable:{...Nv.draggable,...t==null?void 0:t.draggable},droppable:{...Nv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Nv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function xTe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=T.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;vc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=PQ(p,n);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=BQ(h);x&&x.scrollBy({top:m.y,left:m.x})}},[e,o,c,n,r])}const Ww=T.createContext({...Io,scaleX:1,scaleY:1});var lu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(lu||(lu={}));const yTe=T.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:p=uTe,collisionDetection:m=A_e,measuring:x,modifiers:y,...S}=e;const w=T.useReducer(pTe,void 0,fTe),[N,A]=w,[R,O]=m_e(),[L,I]=T.useState(lu.Uninitialized),k=L===lu.Initialized,{draggable:{active:E,nodes:j,translate:C},droppable:{containers:q}}=N,D=E!=null?j.get(E):null,$=T.useRef({initial:null,translated:null}),B=T.useMemo(()=>{var Qt;return E!=null?{id:E,data:(Qt=D==null?void 0:D.data)!=null?Qt:dTe,rect:$}:null},[E,D]),V=T.useRef(null),[W,G]=T.useState(null),[Y,re]=T.useState(null),ce=ex(S,Object.values(S)),de=Hw("DndDescribedBy",o),X=T.useMemo(()=>q.getEnabled(),[q]),ae=gTe(x),{droppableRects:ne,measureDroppableContainers:ve,measuringScheduled:pe}=Z_e(X,{dragging:k,dependencies:[C.x,C.y],config:ae.droppable}),Be=Y_e(j,E),Ue=T.useMemo(()=>Y?tx(Y):null,[Y]),Fe=yr(),Ne=eTe(Be,ae.draggable.measure);xTe({activeNode:E!=null?j.get(E):null,config:Fe.layoutShiftCompensation,initialRect:Ne,measure:ae.draggable.measure});const He=WU(Be,ae.draggable.measure,Ne),Z=WU(Be?Be.parentElement:null),te=T.useRef({activatorEvent:null,active:null,activeNode:Be,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=q.getNodeFor((r=te.current.over)==null?void 0:r.id),Se=cTe({measure:ae.dragOverlay.measure}),Ze=(n=Se.nodeRef.current)!=null?n:Be,rt=k?(a=Se.rect)!=null?a:He:null,It=!!(Se.nodeRef.current&&Se.rect),At=nTe(It?null:He),Ft=KQ(Ze?Vi(Ze):null),qt=aTe(k?be??Be:null),Dt=lTe(qt),tr=JQ(y,{transform:{x:C.x-At.x,y:C.y-At.y,scaleX:1,scaleY:1},activatorEvent:Y,active:B,activeNodeRect:He,containerNodeRect:Z,draggingNodeRect:rt,over:te.current.over,overlayNodeRect:Se.rect,scrollableAncestors:qt,scrollableAncestorRects:Dt,windowRect:Ft}),he=Ue?$h(Ue,C):null,Ge=iTe(qt),Pt=XU(Ge),Ke=XU(Ge,[He]),it=$h(tr,Pt),$t=rt?C_e(rt,tr):null,Nt=B&&$t?m({active:B,collisionRect:$t,droppableRects:ne,droppableContainers:X,pointerCoordinates:he}):null,kr=__e(Nt,"id"),[ye,ot]=T.useState(null),mt=It?tr:$h(tr,Ke),Ct=E_e(mt,(i=ye==null?void 0:ye.rect)!=null?i:null,He),vt=T.useRef(null),tt=T.useCallback((Qt,Lt)=>{let{sensor:bt,options:Fr}=Lt;if(V.current==null)return;const tn=j.get(V.current);if(!tn)return;const Dr=Qt.nativeEvent,Cr=new bt({active:V.current,activeNode:tn,event:Dr,options:Fr,context:te,onAbort(dr){if(!j.get(dr))return;const{onDragAbort:un}=ce.current,dn={id:dr};un==null||un(dn),R({type:"onDragAbort",event:dn})},onPending(dr,Qn,un,dn){if(!j.get(dr))return;const{onDragPending:Ye}=ce.current,qe={id:dr,constraint:Qn,initialCoordinates:un,offset:dn};Ye==null||Ye(qe),R({type:"onDragPending",event:qe})},onStart(dr){const Qn=V.current;if(Qn==null)return;const un=j.get(Qn);if(!un)return;const{onDragStart:dn}=ce.current,Re={activatorEvent:Dr,active:{id:Qn,data:un.data,rect:$}};xu.unstable_batchedUpdates(()=>{dn==null||dn(Re),I(lu.Initializing),A({type:Ha.DragStart,initialCoordinates:dr,active:Qn}),R({type:"onDragStart",event:Re}),G(vt.current),re(Dr)})},onMove(dr){A({type:Ha.DragMove,coordinates:dr})},onEnd:xn(Ha.DragEnd),onCancel:xn(Ha.DragCancel)});vt.current=Cr;function xn(dr){return async function(){const{active:un,collisions:dn,over:Re,scrollAdjustedTranslate:Ye}=te.current;let qe=null;if(un&&Ye){const{cancelDrop:hr}=ce.current;qe={activatorEvent:Dr,active:un,collisions:dn,delta:Ye,over:Re},dr===Ha.DragEnd&&typeof hr=="function"&&await Promise.resolve(hr(qe))&&(dr=Ha.DragCancel)}V.current=null,xu.unstable_batchedUpdates(()=>{A({type:dr}),I(lu.Uninitialized),ot(null),G(null),re(null),vt.current=null;const hr=dr===Ha.DragEnd?"onDragEnd":"onDragCancel";if(qe){const Hr=ce.current[hr];Hr==null||Hr(qe),R({type:hr,event:qe})}})}}},[j]),gr=T.useCallback((Qt,Lt)=>(bt,Fr)=>{const tn=bt.nativeEvent,Dr=j.get(Fr);if(V.current!==null||!Dr||tn.dndKit||tn.defaultPrevented)return;const Cr={active:Dr};Qt(bt,Lt.options,Cr)===!0&&(tn.dndKit={capturedBy:Lt.sensor},V.current=Fr,tt(bt,Lt))},[j,tt]),Gt=J_e(p,gr);sTe(p),vc(()=>{He&&L===lu.Initializing&&I(lu.Initialized)},[He,L]),T.useEffect(()=>{const{onDragMove:Qt}=ce.current,{active:Lt,activatorEvent:bt,collisions:Fr,over:tn}=te.current;if(!Lt||!bt)return;const Dr={active:Lt,activatorEvent:bt,collisions:Fr,delta:{x:it.x,y:it.y},over:tn};xu.unstable_batchedUpdates(()=>{Qt==null||Qt(Dr),R({type:"onDragMove",event:Dr})})},[it.x,it.y]),T.useEffect(()=>{const{active:Qt,activatorEvent:Lt,collisions:bt,droppableContainers:Fr,scrollAdjustedTranslate:tn}=te.current;if(!Qt||V.current==null||!Lt||!tn)return;const{onDragOver:Dr}=ce.current,Cr=Fr.get(kr),xn=Cr&&Cr.rect.current?{id:Cr.id,rect:Cr.rect.current,data:Cr.data,disabled:Cr.disabled}:null,dr={active:Qt,activatorEvent:Lt,collisions:bt,delta:{x:tn.x,y:tn.y},over:xn};xu.unstable_batchedUpdates(()=>{ot(xn),Dr==null||Dr(dr),R({type:"onDragOver",event:dr})})},[kr]),vc(()=>{te.current={activatorEvent:Y,active:B,activeNode:Be,collisionRect:$t,collisions:Nt,droppableRects:ne,draggableNodes:j,draggingNode:Ze,draggingNodeRect:rt,droppableContainers:q,over:ye,scrollableAncestors:qt,scrollAdjustedTranslate:it},$.current={initial:rt,translated:$t}},[B,Be,Nt,$t,j,Ze,rt,ne,q,ye,qt,it]),K_e({...Fe,delta:C,draggingRect:$t,pointerCoordinates:he,scrollableAncestors:qt,scrollableAncestorRects:Dt});const Vr=T.useMemo(()=>({active:B,activeNode:Be,activeNodeRect:He,activatorEvent:Y,collisions:Nt,containerNodeRect:Z,dragOverlay:Se,draggableNodes:j,droppableContainers:q,droppableRects:ne,over:ye,measureDroppableContainers:ve,scrollableAncestors:qt,scrollableAncestorRects:Dt,measuringConfiguration:ae,measuringScheduled:pe,windowRect:Ft}),[B,Be,He,Y,Nt,Z,Se,j,q,ne,ye,ve,qt,Dt,ae,pe,Ft]),cn=T.useMemo(()=>({activatorEvent:Y,activators:Gt,active:B,activeNodeRect:He,ariaDescribedById:{draggable:de},dispatch:A,draggableNodes:j,over:ye,measureDroppableContainers:ve}),[Y,Gt,B,He,A,de,j,ye,ve]);return ie.createElement(DQ.Provider,{value:O},ie.createElement(Kx.Provider,{value:cn},ie.createElement(YQ.Provider,{value:Vr},ie.createElement(Ww.Provider,{value:Ct},h)),ie.createElement(mTe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),ie.createElement(y_e,{...c,hiddenTextDescribedById:de}));function yr(){const Qt=(W==null?void 0:W.autoScrollEnabled)===!1,Lt=typeof d=="object"?d.enabled===!1:d===!1,bt=k&&!Qt&&!Lt;return typeof d=="object"?{...d,enabled:bt}:{enabled:bt}}}),vTe=T.createContext(null),YU="button",bTe="Draggable";function ZQ(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Hw(bTe),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:x}=T.useContext(Kx),{role:y=YU,roleDescription:S="draggable",tabIndex:w=0}=a??{},N=(d==null?void 0:d.id)===e,A=T.useContext(N?Ww:vTe),[R,O]=u2(),[L,I]=u2(),k=oTe(o,e),E=ex(r);vc(()=>(m.set(e,{id:e,key:i,node:R,activatorNode:L,data:E}),()=>{const C=m.get(e);C&&C.key===i&&m.delete(e)}),[m,e]);const j=T.useMemo(()=>({role:y,tabIndex:w,"aria-disabled":n,"aria-pressed":N&&y===YU?!0:void 0,"aria-roledescription":S,"aria-describedby":p.draggable}),[n,y,w,N,S,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:j,isDragging:N,listeners:n?void 0:k,node:R,over:x,setNodeRef:O,setActivatorNodeRef:I,transform:A}}function wTe(){return T.useContext(YQ)}const STe="Droppable",NTe={timeout:25};function Z7(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Hw(STe),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=T.useContext(Kx),p=T.useRef({disabled:r}),m=T.useRef(!1),x=T.useRef(null),y=T.useRef(null),{disabled:S,updateMeasurementsFor:w,timeout:N}={...NTe,...a},A=ex(w??n),R=T.useCallback(()=>{if(!m.current){m.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{h(Array.isArray(A.current)?A.current:[A.current]),y.current=null},N)},[N]),O=Gw({callback:R,disabled:S||!o}),L=T.useCallback((j,C)=>{O&&(C&&(O.unobserve(C),m.current=!1),j&&O.observe(j))},[O]),[I,k]=u2(L),E=ex(e);return T.useEffect(()=>{!O||!I.current||(O.disconnect(),m.current=!1,O.observe(I.current))},[I,O]),T.useEffect(()=>(c({type:Ha.RegisterDroppable,element:{id:n,key:i,disabled:r,node:I,rect:x,data:E}}),()=>c({type:Ha.UnregisterDroppable,key:i,id:n})),[n]),T.useEffect(()=>{r!==p.current.disabled&&(c({type:Ha.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:o,rect:x,isOver:(d==null?void 0:d.id)===n,node:I,over:d,setNodeRef:k}}function _Te(t){let{animation:e,children:r}=t;const[n,a]=T.useState(null),[i,o]=T.useState(null),c=d2(r);return!r&&!n&&c&&a(c),vc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),ie.createElement(ie.Fragment,null,r,n?T.cloneElement(n,{ref:o}):null)}const TTe={x:0,y:0,scaleX:1,scaleY:1};function jTe(t){let{children:e}=t;return ie.createElement(Kx.Provider,{value:QQ},ie.createElement(Ww.Provider,{value:TTe},e))}const ATe={position:"fixed",touchAction:"none"},ETe=t=>W7(t)?"transform 250ms ease":void 0,kTe=T.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:p=ETe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},x={...ATe,width:c.width,height:c.height,top:c.top,left:c.left,transform:rx.Transform.toString(m),transformOrigin:a&&n?w_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return ie.createElement(r,{className:o,style:x,ref:e},i)}),CTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},OTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:rx.Transform.toString(e)},{transform:rx.Transform.toString(r)}]},ITe={duration:250,easing:"ease",keyframes:OTe,sideEffects:CTe({styles:{active:{opacity:"0"}}})};function RTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return qw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=XQ(o);if(!h)return;const{transform:p}=Vi(o).getComputedStyle(o),m=LQ(p);if(!m)return;const x=typeof e=="function"?e:MTe(e);return qQ(d,a.draggable.measure),x({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function MTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...ITe,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},m={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},x={x:d.x-p.x,y:d.y-p.y,...m},y=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:x}}),[S]=y,w=y[y.length-1];if(JSON.stringify(S)===JSON.stringify(w))return;const N=n==null?void 0:n({active:o,dragOverlay:c,...h}),A=c.node.animate(y,{duration:e,easing:r,fill:"forwards"});return new Promise(R=>{A.onfinish=()=>{N==null||N(),R()}})}}let JU=0;function DTe(t){return T.useMemo(()=>{if(t!=null)return JU++,JU},[t])}const PTe=ie.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggableNodes:S,droppableContainers:w,dragOverlay:N,over:A,measuringConfiguration:R,scrollableAncestors:O,scrollableAncestorRects:L,windowRect:I}=wTe(),k=T.useContext(Ww),E=DTe(m==null?void 0:m.id),j=JQ(o,{activatorEvent:p,active:m,activeNodeRect:x,containerNodeRect:y,draggingNodeRect:N.rect,over:A,overlayNodeRect:N.rect,scrollableAncestors:O,scrollableAncestorRects:L,transform:k,windowRect:I}),C=J7(x),q=RTe({config:n,draggableNodes:S,droppableContainers:w,measuringConfiguration:R}),D=C?N.setRef:void 0;return ie.createElement(jTe,null,ie.createElement(_Te,{animation:q},m&&E?ie.createElement(kTe,{key:E,id:m.id,ref:D,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:C,style:{zIndex:h,...a},transform:j},r):null))});function ZU(t,e=800){const[r,n]=T.useState(t),a=T.useRef(t),i=T.useRef(0);return T.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,p=m=>{const x=m-d,y=Math.min(x/e,1),S=1-Math.pow(1-y,3);n(Math.round(o+h*S)),y<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const eY=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],tY=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],LTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],eV={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},gh=t=>t?eV[t.rarity]||eV.COMMON:null,BTe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},ax=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=eY[(e==null?void 0:e.skinTone)??0],p=tY[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,x=h+"99",y=t==null?void 0:t.HEAD,S=t==null?void 0:t.CHEST,w=t==null?void 0:t.HANDS,N=t==null?void 0:t.FEET,A=t==null?void 0:t.BELT,R=t==null?void 0:t.AMULET,O=T.useMemo(()=>[y,S,w,N,A,R].filter(Boolean).length,[y,S,w,N,A,R]),L=T.useMemo(()=>[y,S,w,N,A,R].some(j=>(j==null?void 0:j.rarity)==="UNIQUE"),[y,S,w,N,A,R]),I=Math.min(1,.2+O*.13),k=c?23:21,E=T.useMemo(()=>BTe(m,k),[m,k]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:x})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:I}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:I*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:p}),s.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),N?(()=>{const j=gh(N);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:j.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:j.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),j.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:j.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:j.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),S&&(()=>{const j=gh(S);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:j.primary,fillOpacity:"0.3",stroke:j.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:j.primary,fillOpacity:"0.5",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:j.primary,fillOpacity:"0.5",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:j.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:j.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:j.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),j.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:j.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:j.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),A?(()=>{const j=gh(A);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:j.primary,fillOpacity:"0.55",stroke:j.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:j.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:j.primary,fillOpacity:"0.3",stroke:j.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:j.primary,fillOpacity:"0.3",stroke:j.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),w?(()=>{const j=gh(w);return s.jsxs("g",{filter:j.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:j.primary,fillOpacity:"0.5",stroke:j.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:j.primary,fillOpacity:"0.5",stroke:j.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:j.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:j.particle,strokeWidth:"1",strokeOpacity:"0.5"}),j.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:j.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:j.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),O>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:I*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${I*.7};${I*.3};${I*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),O>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),R&&(()=>{const j=gh(R);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:j.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:j.primary,stroke:j.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:j.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[E.back&&s.jsx("path",{d:E.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:k,ry:"28",fill:"url(#av-face)",stroke:x,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-k-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+k+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:x,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:x,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:E.main,fill:"url(#av-hair)"}),E.accent&&s.jsx("path",{d:E.accent,fill:"url(#av-hair)",opacity:"0.9"}),y&&(()=>{const j=gh(y),C=y.visualId||"";return s.jsx("g",{filter:j.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:C.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-k-2} 28 Q100 10 ${100+k+2} 28 L${100+k+4} 62 Q100 72 ${100-k-4} 62 Z`,fill:j.primary,fillOpacity:"0.55",stroke:j.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):C.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:j.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:j.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:j.primary,fillOpacity:"0.7",stroke:j.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:j.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:j.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:j.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:j.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((j,C)=>s.jsx("polygon",{points:`${100+j},16 ${97+j},22 ${103+j},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+C*.2}s`,repeatCount:"indefinite"})},C))]}),L&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((j,C)=>{const q=j*Math.PI/180,D=100+Math.cos(q)*50,$=145+Math.sin(q)*75;return s.jsxs("circle",{cx:D,cy:$,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-18};${$}`,dur:`${2+C*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+C*.3}s`,repeatCount:"indefinite"})]},C)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((j,C)=>{const q=C*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),D=100+Math.cos(q)*(38+C*3),$=140+Math.sin(q)*(55+C*2),B=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:D,cy:$,r:"1",fill:B,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${$};${$-12};${$}`,dur:`${2+C*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+C*.4}s`,repeatCount:"indefinite"})]},C)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((j,C)=>{const q=60+Math.random()*80,D=20+Math.random()*260;return s.jsxs("circle",{cx:q,cy:D,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${D};${D-25};${D}`,dur:`${3+C*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+C*.5}s`,repeatCount:"indefinite"})]},`c-${C}`)})})]})]})},$Te={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},zTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=T.useMemo(()=>N0e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=BE.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(cl,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=$Te[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,x=Math.min(100,m/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&s.jsx(tf,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${x}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},UTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},VTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=T.useState(t||null),[i,o]=T.useState(null),c=Qa(),{confirm:d}=Do(),h=!!t,p=n||"THEORIST",m=rW.filter(S=>S.specialization===p),x=[1,2,3,4],y=async S=>{if(!i){if(!h){const w=Ly[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${w} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${w}`,cancelLabel:"Go Back",variant:"warning"}))return}o(S);try{await Ae.unlockSkill(S,p),Kn.skillUnlock(),c.success("Skill unlocked!")}catch(w){c.error(w instanceof Error?w.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx(ta,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Mo,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx(gn,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[Ly[t].icon," ",Ly[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Ly).map(([S,w])=>{const N=p===S,A=h&&t!==S;return s.jsxs("button",{onClick:()=>!A&&a(S),disabled:A,className:`p-3 rounded-xl border text-left transition-all ${N?`border-white/30 bg-gradient-to-br ${UTe[S]} bg-opacity-10`:A?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:w.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:w.name}),A&&s.jsx(tf,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:w.description}),!h&&N&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},S)})}),s.jsx("div",{className:"space-y-4",children:x.map(S=>{const w=m.filter(N=>N.tier===S);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",S]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.map(N=>{const A=r.includes(N.id),R=!A&&DM(N.id,r)&&e>=N.cost,O=DM(N.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${A?"border-green-500/30 bg-green-500/10":R?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>R&&y(N.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:N.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:N.name}),A&&s.jsx(gn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!A&&!O&&s.jsx(tf,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:N.description}),!A&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",N.cost," SP"]}),i===N.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},N.id)})})]},S)})})]})},J_=25,Yy=T0e,FTe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=T.useState(!1),[i,o]=T.useState(0),[c,d]=T.useState(null),h=T.useRef(null),p=Qa(),m=new Date().toISOString().split("T")[0],x=e===m,y=!x&&t>=J_&&!n,S=async()=>{if(y){a(!0),d(null),Kn.wheelSpin();try{const A=await Ae.spinFortuneWheel(r),R=Yy.findIndex(I=>I.id===A.prizeId),O=360/Yy.length,L=360*5+(360-R*O-O/2);o(I=>I+L),setTimeout(()=>{Kn.wheelPrize(),d(A.rewardDescription),a(!1),A.prizeType!=="NOTHING"?p.success(`You won: ${A.rewardDescription}!`):p.info(A.rewardDescription)},4e3)}catch(A){a(!1),p.error(A instanceof Error?A.message:"Spin failed")}}},w=360/Yy.length,N=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",J_," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Yy.map((A,R)=>{const O=(R*w-90)*(Math.PI/180),L=((R+1)*w-90)*(Math.PI/180),I=N*Math.cos(O),k=N*Math.sin(O),E=N*Math.cos(L),j=N*Math.sin(L),C=w>180?1:0,q=((R+.5)*w-90)*(Math.PI/180),D=N*.65*Math.cos(q),$=N*.65*Math.sin(q),B=(R+.5)*w;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${I},${k} A${N},${N} 0 ${C},1 ${E},${j} Z`,fill:A.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:D,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${B}, ${D}, ${$})`,children:A.label})]},A.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:S,disabled:!y,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${y?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":x?"Come back tomorrow!":`Spin (${J_} Flux)`})]})};function qTe(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=Ae.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function HTe(t){const[e,r]=T.useState([]);return T.useEffect(()=>{const n=Ae.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const GTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var S;const i=qTe(t.id,t.maxHp),o=HTe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=o.reduce((w,N)=>(w[N.userId]||(w[N.userId]={name:N.userName,total:0}),w[N.userId].total+=N.damage,w),{}),m=Object.entries(p).sort(([,w],[,N])=>N.total-w.total).slice(0,5),x=((S=p[e])==null?void 0:S.total)||0,y=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[y&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(Ps,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),y&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),x>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(ls,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:x})]}),m.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx($i,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([w,N],A)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${w===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",A+1," ",N.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[N.total," dmg"]})]},w))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ta,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(ku,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},WTe=({userId:t,userName:e,classType:r})=>{const[n,a]=T.useState([]),[i,o]=T.useState(null),[c,d]=T.useState(null),h=Qa();T.useEffect(()=>{let m;try{m=Ae.subscribeToBossEncounters(x=>{const y=x.filter(S=>!S.classType||S.classType===r||S.classType==="GLOBAL");a(y)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){o(m);try{const x=await Ae.dealBossDamage(m,e,r||"");if(Kn.bossHit(),d({bossId:m,damage:x.damageDealt,isCrit:x.isCrit}),setTimeout(()=>d(null),2e3),x.bossDefeated)Kn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const y=x.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${x.damageDealt} damage!${y} (+${x.xpEarned} XP)`)}}catch(x){h.error(x instanceof Error?x.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(Kle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>s.jsx(GTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},KTe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:p})=>{const[m,x]=T.useState(!1),[y,S]=T.useState(!1),[w,N]=T.useState(null),[A,R]=T.useState(!1),[O,L]=T.useState(null),[I,k]=T.useState(!1),[E,j]=T.useState([]),[C,q]=T.useState(!1),D=(n==null?void 0:n.bossType)||"BRUTE",$=(n==null?void 0:n.hue)??0,B=(V,W,G)=>{const Y=V==="right"?75:25,re=Array.from({length:G},(ce,de)=>({id:Date.now()+de,x:Y+(Math.random()-.5)*20,y:30+(Math.random()-.5)*15,color:W,px:(Math.random()-.5)*60,py:-(Math.random()*40+10)}));j(ce=>[...ce,...re]),setTimeout(()=>j(ce=>ce.filter(de=>!re.find(X=>X.id===de.id))),1e3)};return T.useEffect(()=>{if(a==="player-attack"&&i){x(!0),N({value:i,side:"right",isCrit:d}),B("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(R(!0),q(!0),setTimeout(()=>R(!1),400),setTimeout(()=>q(!1),400));const V=setTimeout(()=>x(!1),500),W=setTimeout(()=>N(null),1200);return h&&h>0&&setTimeout(()=>{L(h),setTimeout(()=>L(null),1200)},400),()=>{clearTimeout(V),clearTimeout(W)}}else if(a==="boss-attack"){if(p){k(!0),B("left","#22d3ee",6),setTimeout(()=>k(!1),800);return}if(i&&i>0){S(!0),q(!0),B("left","#ef4444",8),N({value:i,side:"left"}),setTimeout(()=>q(!1),300);const V=setTimeout(()=>S(!1),500),W=setTimeout(()=>N(null),1200);return()=>{clearTimeout(V),clearTimeout(W)}}}},[a,i,d,h,p]),s.jsxs("div",{className:`relative w-full h-48 flex items-end justify-between px-4 overflow-hidden select-none ${C?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[A&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),I&&s.jsx("div",{className:"absolute left-10 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-8 h-8 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),E.map(V=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${V.x}%`,top:`${V.y}%`,backgroundColor:V.color,"--px":`${V.px}px`,"--py":`${V.py}px`}},V.id)),O!==null&&s.jsxs("div",{className:"absolute left-8 bottom-12 text-base font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",O," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-24 h-36 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-10 scale-110":""} ${y?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2.5rem) scale(1.1)":void 0},children:[s.jsx(ax,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),m&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),y&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),w&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${w.isCrit?"text-2xl":"text-xl"} ${w.side==="right"?`right-4 ${w.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[w.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",w.value]})]}),s.jsxs("div",{className:`relative w-28 h-40 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-10 scale-110":""} ${m?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2.5rem) scale(1.1)":m?void 0:"scaleX(-1)",...m?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx(sW,{bossType:D,hue:$})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},XTe=({bossId:t,maxEntries:e=5})=>{const[r,n]=T.useState([]),a=T.useRef(null);return T.useEffect(()=>{const i=Ae.subscribeToBossQuizDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),T.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx(ta,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:`font-bold ${i.isCrit?"text-yellow-300":"text-amber-400"}`,children:["-",i.damage,i.isCrit?"!":""]})]},`${i.userId}-${i.timestamp}`))})]})};function QTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function YTe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function JTe(t,e){const r=[...t],n=QTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function ZTe(t,e){const[r,n]=T.useState(e);return T.useEffect(()=>{const a=Ae.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const eje=({modifier:t})=>{const e=uT[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(Cu,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},tje=({quiz:t,progress:e})=>{var m,x;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(VH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((x=t.rewards)==null?void 0:x.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Hm," attempts and ",Gm," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Gd,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(ta,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(ls,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(jx,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Rh,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(y=>{const S=r.correctByDifficulty[y]||0,w=r.incorrectByDifficulty[y]||0,N=S+w,A=N>0?Math.round(S/N*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${y==="EASY"?"border-green-500/20 bg-green-500/5":y==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${y==="EASY"?"text-green-400":y==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:y}),s.jsxs("div",{className:"text-sm font-black text-white",children:[A,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[S,"/",N]})]},y)})})]})},rje=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var Fe,Ne,He,Z;const c=ZTe(t.id,t.maxHp),d=c/t.maxHp*100,h=ie.useMemo(()=>JTe(t.questions,YTe(e+t.id)),[t.questions,e,t.id]),[p,m]=T.useState(null),[x,y]=T.useState(!1);T.useEffect(()=>{const te=Ae.subscribeToBossQuizProgress(e,t.id,be=>{m(be),y(!0)});return()=>te()},[e,t.id]);const S=ie.useMemo(()=>n?zE(n).maxHp:100,[n]),[w,N]=T.useState(-1),[A,R]=T.useState(-1),[O,L]=T.useState(S),[I,k]=T.useState(!1),[E,j]=T.useState(null),[C,q]=T.useState(null),[D,$]=T.useState(!1),[B,V]=T.useState("idle"),[W,G]=T.useState(void 0),[Y,re]=T.useState(!1),[ce,de]=T.useState(void 0),[X,ae]=T.useState(!1);T.useEffect(()=>{if(x&&w===-1)if(p){const te=new Set(p.answeredQuestions||[]),be=h.findIndex(rt=>!te.has(rt.id));N(be===-1?h.length:be);const Se=p.currentHp,Ze=p.maxHp>0?p.maxHp:S;L(Ze),Se>=0?(R(Se),Se===0&&k(!0)):R(Ze)}else N(0),R(S),L(S)},[x]),T.useEffect(()=>{L(S)},[S]);const ne=O>0?(A===-1?O:A)/O*100:100,ve=w>=0?h[w%h.length]:void 0,pe=w>=h.length,Be=c<=0,Ue=async(te,be,Se)=>{D||I||($(!0),j(Se),r(te,be,Se,{onResult:Ze=>{Ze.playerHp!==void 0&&R(Ze.playerHp),Ze.playerMaxHp!==void 0&&L(Ze.playerMaxHp),Ze.knockedOut&&k(!0),Ze.correct?(G(Ze.damage),re(!!Ze.isCrit),de(Ze.healAmount),ae(!1),V("player-attack"),setTimeout(()=>V("idle"),800)):Ze.shieldBlocked?(G(0),ae(!0),re(!1),V("boss-attack"),setTimeout(()=>V("idle"),800)):Ze.playerDamage&&Ze.playerDamage>0&&(G(Ze.playerDamage),ae(!1),re(!1),V("boss-attack"),setTimeout(()=>V("idle"),800)),q(Ze),Ze.knockedOut||setTimeout(()=>{N(rt=>rt+1),j(null),q(null)},2e3),$(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Be&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((te,be)=>s.jsx(eje,{modifier:te},be))}),Be?s.jsx(tje,{quiz:t,progress:p}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(KTe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:B,damage:W,playerHpPercent:ne,bossHpPercent:d,isCrit:Y,healAmount:ce,shieldBlocked:X})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Rh,{className:"w-3 h-3"})," Your HP: ",A===-1?O:A]}),s.jsx("span",{className:"text-gray-600",children:O})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${ne>50?"bg-gradient-to-r from-emerald-600 to-green-500":ne>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${ne}%`}})})]}),I?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Co,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):pe?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(gn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):ve?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",w+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ve.difficulty==="HARD"?"bg-red-500/20 text-red-400":ve.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[ve.difficulty,ve.damageBonus?` (+${ve.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-base text-white font-semibold leading-relaxed",children:ve.stem}),s.jsx("div",{className:"space-y-2.5",children:ve.options.map((te,be)=>{const Se=E===be,Ze=C&&Se,rt=C==null?void 0:C.correct;return s.jsx("button",{onClick:()=>Ue(t.id,ve.id,be),disabled:D||!!C||I,className:`w-full text-left p-4 rounded-xl border text-base transition-all ${Ze&&rt?"border-green-500/50 bg-green-500/10 text-green-400":Ze&&!rt?"border-red-500/50 bg-red-500/10 text-red-400":Se?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm font-mono text-gray-600 w-6",children:[String.fromCharCode(65+be),"."]}),s.jsx("span",{children:te}),Ze&&rt&&s.jsx(gn,{className:"w-5 h-5 text-green-400 ml-auto shrink-0"}),Ze&&!rt&&s.jsx(Co,{className:"w-5 h-5 text-red-400 ml-auto shrink-0"})]})},be)})}),C&&C.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-base text-amber-400 font-bold animate-bounce",children:[s.jsx(ta,{className:"w-5 h-5 inline mr-1"}),C.isCrit?"CRITICAL HIT! ":"","-",C.damage," HP to boss!"]}),C.healAmount&&C.healAmount>0&&s.jsxs("div",{className:"text-sm text-emerald-400 font-bold",children:[s.jsx(Rh,{className:"w-4 h-4 inline mr-1"})," +",C.healAmount," HP healed"]})]}),C&&!C.correct&&C.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(ls,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),C&&!C.correct&&!C.shieldBlocked&&C.playerDamage&&C.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Rh,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",C.playerDamage," damage!"]})]}):null,p&&!Be&&!I&&!pe&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((Fe=p.combatStats)==null?void 0:Fe.questionsAttempted)||0)<Hm||(((Ne=p.combatStats)==null?void 0:Ne.questionsCorrect)||0)<Gm?s.jsxs("span",{children:["Rewards: ",((He=p.combatStats)==null?void 0:He.questionsAttempted)||0,"/",Hm," attempts"," ",""," ",((Z=p.combatStats)==null?void 0:Z.questionsCorrect)||0,"/",Gm," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(XTe,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},nje=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=T.useState([]),p=Qa();T.useEffect(()=>{let y;try{y=Ae.subscribeToBossQuizzes(e,h)}catch{}return()=>y==null?void 0:y()},[e]);const m=d.filter(y=>{var S;if(y.scheduledAt&&new Date(y.scheduledAt)>new Date)return!1;if((S=y.targetSections)!=null&&S.length){const w=y.classType!=="GLOBAL"?y.classType:e,N=(n==null?void 0:n[w])||(n==null?void 0:n[e])||r||"";if(!y.targetSections.includes(N))return!1}return!0}),x=async(y,S,w,N)=>{try{const A=await Ae.answerBossQuiz(y,S,w);A.alreadyAnswered?p.info("Already answered this question!"):A.correct?(Kn.bossHit(),A.bossDefeated?(Kn.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):A.isCrit?p.success(`CRITICAL HIT! Dealt ${A.damage} damage!`):p.success(`Correct! Dealt ${A.damage} damage!`)):A.shieldBlocked?p.info("Shield blocked the attack!"):A.playerDamage&&A.playerDamage>0?p.error(`Wrong! The boss hits you for ${A.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),A.knockedOut&&Kn.bossHit(),N.onResult(A)}catch(A){p.error(A instanceof Error?A.message:"Failed to submit answer"),N.onResult({correct:!1,damage:0})}};return m.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(rl,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(y=>s.jsx(rje,{quiz:y,userId:t,onAnswer:x,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},y.id))]})},Z_={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},tV=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(Vf,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),aje=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=T.useState(0),[i,o]=T.useState(0),[c,d]=T.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(tV,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(tV,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(gE,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},ije=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(""),[p,m]=T.useState(!1),[x,y]=T.useState(null),[S,w]=T.useState(!1),N=Qa();T.useEffect(()=>{let C;try{C=Ae.subscribeToTutoringSessions(r,i)}catch{}return()=>C==null?void 0:C()},[r]);const A=async()=>{if(!(!d.trim()||p)){m(!0);try{await Ae.createTutoringRequest(t,e,d,r),N.success("Tutoring request posted!"),h(""),c(!1)}catch{N.error("Failed to create request")}m(!1)}},R=async C=>{try{await Ae.claimTutorRole(C,t,e),N.success("You are now the tutor for this session!")}catch{N.error("Failed to claim tutor role")}},O=async C=>{try{await Ae.startTutoringSession(C),N.success("Session started!")}catch{N.error("Failed to start session")}},L=async(C,q)=>{w(!0);try{const D=a.find(B=>B.id===C);if(!D)throw new Error("Session not found");const $=D.requesterId===t?"requester":"tutor";await Ae.submitTutoringFeedback(C,$,q),N.success("Feedback submitted! "+($==="requester"?D.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":D.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),y(null)}catch{N.error("Failed to submit feedback")}w(!1)},I=async(C,q)=>{try{const D=await Ae.completeTutoring(C,q);N.success(`Verified! Tutor earned ${D.xpAwarded} XP and ${D.fluxAwarded} Flux`)}catch{N.error("Failed to verify session")}},k=a.filter(C=>C.status==="OPEN"),E=a.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),j=a.filter(C=>C.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Oo,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Bn,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:A,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),k.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Cle,{className:"w-3 h-3"})," Open Requests"]}),k.map(C=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Z_[C.status]}`,children:C.status})]}),C.requesterId!==t&&s.jsxs("button",{onClick:()=>R(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx($i,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),E.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(Ps,{className:"w-3 h-3"})," Active Sessions"]}),E.map(C=>{const q=C.requesterId===t||C.tutorId===t,D=C.requesterId===t,$=C.tutorId===t,B=D?C.requesterFeedback:C.tutorFeedback,V=D?C.tutorFeedback:C.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Z_[C.status]}`,children:C.status}),C.status==="MATCHED"&&q&&s.jsx("button",{onClick:()=>O(C.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),C.status==="IN_PROGRESS"&&q&&!B&&s.jsxs("button",{onClick:()=>y(C.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(gn,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),C.status==="IN_PROGRESS"&&q&&B&&!V&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",D?"tutor":"student"]}),n&&C.tutorId&&C.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>I(C.id,C.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx(gn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),x===C.id&&C.status==="IN_PROGRESS"&&($||D)&&s.jsx(aje,{role:D?"requester":"tutor",onSubmit:W=>L(C.id,W),submitting:S})]},C.id)})]}),a.filter(C=>C.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(Ps,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(C=>C.status==="COMPLETED").map(C=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),C.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),C.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&C.tutorId&&s.jsxs("button",{onClick:()=>I(C.id,C.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(gn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),j.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(gn,{className:"w-3 h-3 text-green-400"})," Completed (",j.length,")"]}),j.slice(0,3).map(C=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${Z_[C.status]}`,children:C.status})]},C.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(Oo,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},sje=({item:t,onClose:e})=>{const[r,n]=T.useState("chest"),a=ba(t.rarity);T.useEffect(()=>{Kn.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},oje=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],lje=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],cje=({user:t,classType:e,onClose:r})=>{var k,E,j;const[n,a]=ie.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=l0(o),d=nW(o),{equipped:h,appearance:p}=zu(t,e),m=UE({gamification:{...i,equipped:h}}),x=c0(h),y=((k=i.classXp)==null?void 0:k[e])||0,S=(E=t.settings)==null?void 0:E.privacyMode,w=S?i.codename||"Unknown Agent":t.name,N=Object.values(h).filter(Boolean),A=$E(N),R=i.unlockedAchievements||[],O=T.useMemo(()=>BE.filter(C=>R.includes(C.id)),[R]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),I=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(ax,{equipped:h,appearance:p})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${S?"text-purple-300 italic":"text-white"}`,children:w}),s.jsx("button",{onClick:I,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(_o,{className:"w-4 h-4 text-green-400"}):s.jsx(K2,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:y.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:x}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:R.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:oje.map(({key:C,label:q,color:D,bg:$})=>{const B=m[C]||0,V=B/L*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:q}),s.jsx("span",{className:`text-xs font-bold ${D}`,children:B})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${V}%`}})})]},C)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ls,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:lje.map(C=>{const q=h[C];if(!q)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:C}),s.jsx("span",{className:"italic",children:"Empty"})]},C);const D=ba(q.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${D.border} ${D.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:C}),s.jsx("span",{className:`text-xs font-bold truncate ${D.text}`,children:q.name})]},C)})})]}),A.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(Vf,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),A.map(({set:C,activeBonus:q})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:C.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",q.label]})]},C.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",R.length,")"]}),O.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:O.slice(0,12).map(C=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:C.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:C.title})]},C.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Cu,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Gd,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((j=i.completedQuests)==null?void 0:j.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Oo,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ta,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})},Jy=({label:t,value:e,max:r,color:n,icon:a,description:i})=>{const o=Math.min(e/r*100,100);return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:n,children:a}),s.jsx("span",{className:"text-gray-400 font-bold uppercase tracking-wider",children:t})]}),s.jsx("span",{className:`text-sm font-black ${n}`,children:e})]}),s.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${n.replace("text-","bg-").replace("400","500/60")}`,style:{width:`${o}%`}})}),s.jsx("div",{className:"absolute -top-10 left-0 hidden group-hover:block z-20 w-56 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:i})]})},Zy=({label:t,value:e,sub:r,color:n="text-white",icon:a})=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-gray-600",children:a}),s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:t})]}),s.jsx("div",{className:`text-lg font-black ${n} leading-tight`,children:e}),r&&s.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:r})]}),uje=({user:t,submissions:e,assignments:r,activeClass:n})=>{var D;const a=t.gamification,i=((D=a==null?void 0:a.classXp)==null?void 0:D[n])||0,o=(a==null?void 0:a.xp)||0,c=(a==null?void 0:a.level)||1,d=(a==null?void 0:a.currency)||0,h=(a==null?void 0:a.engagementStreak)||0,p=(a==null?void 0:a.loginStreak)||0,m=l0(c),y=T.useMemo(()=>zu(t,n),[t,n]).equipped,S=T.useMemo(()=>{const $={tech:10,focus:10,analysis:10,charisma:10};return Object.values(y).filter(Boolean).forEach(V=>{V.stats&&Object.entries(V.stats).forEach(([W,G])=>{$[W]+=G})}),$},[y]),w=T.useMemo(()=>zE(S),[S]),N=T.useMemo(()=>c0(y),[y]),A=T.useMemo(()=>C0e(y),[y]),R=T.useMemo(()=>O0e(y),[y]),O=T.useMemo(()=>k0e(y),[y]),L=aW(h),I=T.useMemo(()=>{const $=new Set(r.filter(B=>B.classType===n).map(B=>B.id));return e.filter(B=>$.has(B.assignmentId))},[e,r,n]),k=T.useMemo(()=>{var de;const $=I.reduce((X,ae)=>{var ne;return X+(((ne=ae.metrics)==null?void 0:ne.engagementTime)||0)},0),B=Math.round($/60)*10,W=(((de=a==null?void 0:a.completedQuests)==null?void 0:de.length)||0)*100,G=(a==null?void 0:a.bossDamageDealt)||{},Y=Object.values(G).reduce((X,ae)=>X+ae,0)*2,re=(a==null?void 0:a.tutoringXpEarned)||0,ce=Math.max(0,i-B-W-Y-re);return{engagementXp:B,questXp:W,bossXp:Y,tutoringXp:re,otherXp:ce}},[I,a,i]),E=T.useMemo(()=>{const $=Date.now(),B=10080*60*1e3,V=I.filter(ne=>(ne.submittedAt?new Date(ne.submittedAt).getTime():0)>$-B),W=new Set(V.filter(ne=>ne.submittedAt).map(ne=>new Date(ne.submittedAt).toISOString().split("T")[0])).size,G={totalTime:V.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.engagementTime)||0)},0),submissionCount:V.length,totalClicks:V.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.clickCount)||0)},0),totalPastes:V.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.pasteCount)||0)},0),totalKeystrokes:V.reduce((ne,ve)=>{var pe;return ne+(((pe=ve.metrics)==null?void 0:pe.keystrokes)||0)},0),totalXP:i,activityDays:W},Y=G.totalTime/60+G.submissionCount*10,de=dle(G,Y,150,60),X=hle(de),ae=Go[de];return{bucket:de,recommendation:X,meta:ae,metrics:G,engagementScore:Y}},[I,i]),j=T.useMemo(()=>{const $=[];for(let B=6;B>=0;B--){const V=new Date;V.setDate(V.getDate()-B);const W=V.toISOString().split("T")[0],G=V.toLocaleDateString("en",{weekday:"short"}),Y=I.filter(re=>{var ce;return(ce=re.submittedAt)==null?void 0:ce.startsWith(W)});$.push({label:G,count:Y.length,minutes:Math.round(Y.reduce((re,ce)=>{var de;return re+(((de=ce.metrics)==null?void 0:de.engagementTime)||0)},0)/60)})}return $},[I]),C=Math.max(1,...j.map($=>$.minutes)),q=T.useMemo(()=>{const $={SUCCESS:0,NORMAL:0,SUPPORT_NEEDED:0,FLAGGED:0,STARTED:0};return I.forEach(B=>{B.status in $&&$[B.status]++}),$},[I]);return s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-black text-white flex items-center gap-2",children:[s.jsx(rl,{className:"w-5 h-5 text-purple-400"}),"Intel Dossier"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Classified operative analysis  ",n]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-sm font-black ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Level ",c]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsx(Zy,{label:"Class XP",value:i.toLocaleString(),sub:`${o.toLocaleString()} total across all classes`,color:"text-amber-400",icon:s.jsx(ta,{className:"w-3.5 h-3.5"})}),s.jsx(Zy,{label:"Gear Score",value:N,sub:`${Object.values(y).filter(Boolean).length}/8 slots filled`,color:"text-purple-400",icon:s.jsx(ls,{className:"w-3.5 h-3.5"})}),s.jsx(Zy,{label:"Resources Accessed",value:I.length,sub:`${q.SUCCESS} excellent`,color:"text-emerald-400",icon:s.jsx(cs,{className:"w-3.5 h-3.5"})}),s.jsx(Zy,{label:"Cyber-Flux",value:d,sub:"crafting currency",color:"text-cyan-400",icon:s.jsx(fg,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Gd,{className:"w-4 h-4 text-red-400"})," Combat Analysis"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your character stats translate to boss fight performance"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Jy,{label:"Tech",value:S.tech,max:100,color:"text-blue-400",icon:s.jsx(ta,{className:"w-3 h-3"}),description:"Attack Power  Increases base damage dealt to bosses in quiz events."}),s.jsx(Jy,{label:"Focus",value:S.focus,max:100,color:"text-green-400",icon:s.jsx(ku,{className:"w-3 h-3"}),description:`Critical Strikes  ${(w.critChance*100).toFixed(0)}% crit chance, ${w.critMultiplier.toFixed(2)}x crit multiplier.`}),s.jsx(Jy,{label:"Analysis",value:S.analysis,max:100,color:"text-yellow-400",icon:s.jsx(ls,{className:"w-3 h-3"}),description:`Armor  Reduces incoming boss damage by ${w.armorPercent.toFixed(0)}%.`}),s.jsx(Jy,{label:"Charisma",value:S.charisma,max:100,color:"text-purple-400",icon:s.jsx(Rh,{className:"w-3 h-3"}),description:`Health Pool  Gives you ${w.maxHp} HP in boss fights (base 100 + 5 per charisma above 10).`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 pt-3 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Max HP"}),s.jsx("div",{className:"text-sm font-black text-emerald-400",children:w.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Armor"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:[w.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit %"}),s.jsxs("div",{className:"text-sm font-black text-green-400",children:[(w.critChance*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold",children:"Crit Dmg"}),s.jsxs("div",{className:"text-sm font-black text-red-400",children:[w.critMultiplier.toFixed(2),"x"]})]})]}),(Object.keys(A).length>0||Object.keys(R).length>0||Object.keys(O).length>0)&&s.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest",children:"Stat Sources"}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[s.jsxs("div",{className:"flex justify-between text-gray-500",children:[s.jsx("span",{children:"Base Stats"}),s.jsx("span",{className:"text-gray-400",children:"10 each"})]}),Object.keys(A).length>0&&s.jsxs("div",{className:"flex justify-between text-cyan-400/70",children:[s.jsx("span",{children:"Gems"}),s.jsxs("span",{children:["+",Object.values(A).reduce(($,B)=>$+B,0)]})]}),Object.keys(R).length>0&&s.jsxs("div",{className:"flex justify-between text-orange-400/70",children:[s.jsx("span",{children:"Runewords"}),s.jsxs("span",{children:["+",Object.values(R).reduce(($,B)=>$+B,0)]})]}),Object.keys(O).length>0&&s.jsxs("div",{className:"flex justify-between text-amber-400/70",children:[s.jsx("span",{children:"Set Bonus"}),s.jsxs("span",{children:["+",Object.values(O).reduce(($,B)=>$+B,0)]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(ta,{className:"w-4 h-4 text-amber-400"})," XP Sources"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 -mt-2",children:["Where your ",i.toLocaleString()," XP in ",n," came from"]}),s.jsx("div",{className:"space-y-2",children:[{label:"Resource Engagement",xp:k.engagementXp,color:"bg-purple-500",textColor:"text-purple-400",desc:"~10 XP per minute of active engagement"},{label:"Mission Rewards",xp:k.questXp,color:"bg-indigo-500",textColor:"text-indigo-400",desc:"XP from completing contracts"},{label:"Boss Encounters",xp:k.bossXp,color:"bg-red-500",textColor:"text-red-400",desc:"XP from boss quiz damage"},{label:"Peer Tutoring",xp:k.tutoringXp,color:"bg-emerald-500",textColor:"text-emerald-400",desc:"XP earned helping other agents"},{label:"Other (Badges, Daily, Behavior)",xp:k.otherXp,color:"bg-amber-500",textColor:"text-amber-400",desc:"Login rewards, behavior awards, badge XP"}].filter($=>$.xp>0).map($=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${$.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-300",children:$.label}),s.jsxs("span",{className:`font-bold ${$.textColor}`,children:["~",$.xp.toLocaleString()," XP"]})]}),s.jsx("div",{className:"text-[10px] text-gray-600",children:$.desc})]})]},$.label))}),L>1&&s.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Cu,{className:"w-4 h-4 text-orange-400"}),s.jsx("span",{className:"text-orange-400 font-bold",children:"Streak Bonus Active"}),s.jsxs("span",{className:"ml-auto text-sm font-black text-yellow-400",children:["+",Math.round((L-1)*100),"%"]})]}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[h,"-week engagement streak  All XP earnings boosted"]})]}),p>1&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2 border-t border-white/5",children:[s.jsx(Vf,{className:"w-3.5 h-3.5 text-purple-400"}),s.jsxs("span",{children:[p,"-day daily login streak"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-2xl p-5 space-y-4 ${E.meta.bgColor} ${E.meta.borderColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(cg,{className:"w-4 h-4"})," Engagement Status"]}),s.jsx("span",{className:`text-sm font-black ${E.meta.color}`,children:E.meta.label})]}),s.jsx("p",{className:"text-sm text-gray-300",children:E.meta.description}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 space-y-2",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Why this classification"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active time (7d)"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[Math.round(E.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Resources (7d)"}),s.jsx("span",{className:"text-gray-300 font-mono",children:E.metrics.submissionCount})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Active days"}),s.jsxs("span",{className:"text-gray-300 font-mono",children:[E.metrics.activityDays,"/7"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Keystrokes"}),s.jsx("span",{className:"text-gray-300 font-mono",children:E.metrics.totalKeystrokes})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-1",children:"How to level up your status"}),s.jsx("p",{className:"text-sm text-gray-300",children:E.recommendation.studentTip})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommended for you"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:E.recommendation.categories.map($=>s.jsx("span",{className:"text-[10px] bg-white/5 border border-white/10 px-2.5 py-1 rounded-full text-gray-300 font-medium",children:$},$))})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(S0,{className:"w-4 h-4 text-cyan-400"})," 7-Day Activity"]}),s.jsx("div",{className:"flex items-end gap-2 h-32",children:j.map(($,B)=>s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 font-mono",children:[$.minutes,"m"]}),s.jsx("div",{className:"w-full bg-white/5 rounded-t-lg relative flex-1 flex items-end",children:s.jsx("div",{className:`w-full rounded-t-lg transition-all duration-500 ${$.minutes>0?"bg-purple-500/50 border border-purple-500/30":"bg-white/5"}`,style:{height:`${Math.max($.minutes>0?8:0,$.minutes/C*100)}%`}})}),s.jsx("div",{className:"text-[9px] text-gray-500 font-bold",children:$.label}),$.count>0&&s.jsxs("div",{className:"text-[8px] text-gray-600",children:[$.count," res"]})]},B))}),s.jsxs("div",{className:"pt-3 border-t border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Submission Quality"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[11px]",children:[q.SUCCESS>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-gray-400",children:"Excellent"}),s.jsx("span",{className:"text-emerald-400 font-bold ml-auto",children:q.SUCCESS})]}),q.NORMAL>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-gray-400",children:"Normal"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:q.NORMAL})]}),q.SUPPORT_NEEDED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("span",{className:"text-gray-400",children:"Needs Support"}),s.jsx("span",{className:"text-amber-400 font-bold ml-auto",children:q.SUPPORT_NEEDED})]}),q.STARTED>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),s.jsx("span",{className:"text-gray-400",children:"Started"}),s.jsx("span",{className:"text-gray-400 font-bold ml-auto",children:q.STARTED})]})]})]})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Gd,{className:"w-4 h-4 text-red-400"})," Boss Fight Readiness"]}),s.jsx("p",{className:"text-[11px] text-gray-500 -mt-2",children:"How your equipment and stats prepare you for boss quiz encounters"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-red-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-red-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Gd,{className:"w-3 h-3"})," Offense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:["Your ",s.jsxs("span",{className:"text-blue-400 font-bold",children:[S.tech," Tech"]})," powers your base attack.",S.tech>20&&s.jsx("span",{className:"text-emerald-400",children:" Strong offensive capability."}),S.tech<=20&&S.tech>10&&s.jsx("span",{className:"text-yellow-400",children:" Moderate damage output."}),S.tech<=10&&s.jsx("span",{className:"text-red-400",children:" Low damage  equip Tech gear to improve."})]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:["Crit chance: ",s.jsxs("span",{className:"text-green-400 font-bold",children:[(w.critChance*100).toFixed(0),"%"]})," (from ",S.focus," Focus)"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-yellow-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-yellow-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(ls,{className:"w-3 h-3"})," Defense"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[w.armorPercent.toFixed(0),"% Armor"]})," from ",S.analysis," Analysis reduces boss damage.",w.armorPercent>=30&&s.jsx("span",{className:"text-emerald-400",children:" Excellent damage mitigation."}),w.armorPercent<30&&w.armorPercent>=15&&s.jsx("span",{className:"text-yellow-400",children:" Decent protection."}),w.armorPercent<15&&s.jsx("span",{className:"text-red-400",children:" Vulnerable  equip Analysis gear."})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 border border-emerald-500/10 space-y-2",children:[s.jsxs("div",{className:"text-[10px] text-emerald-400 uppercase font-bold tracking-widest flex items-center gap-1.5",children:[s.jsx(Rh,{className:"w-3 h-3"})," Survivability"]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsxs("span",{className:"text-emerald-400 font-bold",children:[w.maxHp," HP"]})," from ",S.charisma," Charisma.",w.maxHp>=150&&s.jsx("span",{className:"text-emerald-400",children:" Large health pool  can absorb many hits."}),w.maxHp<150&&w.maxHp>=120&&s.jsx("span",{className:"text-yellow-400",children:" Average survivability."}),w.maxHp<120&&s.jsx("span",{className:"text-red-400",children:" Fragile  Charisma gear increases HP."})]})]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Recommendations"}),s.jsxs("div",{className:"space-y-1.5",children:[N<100&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(_y,{className:"w-3 h-3 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your Gear Score is ",s.jsx("span",{className:"text-amber-400 font-bold",children:N}),". Complete more missions and level up to earn better equipment drops."]})]}),S.tech<=15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(_y,{className:"w-3 h-3 text-blue-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Equip items with ",s.jsx("span",{className:"text-blue-400 font-bold",children:"Tech"})," stats to increase boss damage output."]})]}),w.critChance<.1&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(_y,{className:"w-3 h-3 text-green-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Socket ",s.jsx("span",{className:"text-green-400 font-bold",children:"Focus"})," gems to boost critical hit chance beyond ",(w.critChance*100).toFixed(0),"%."]})]}),w.armorPercent<10&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-gray-400",children:[s.jsx(_y,{className:"w-3 h-3 text-yellow-400 mt-0.5 shrink-0"}),s.jsxs("span",{children:["Your armor is low. ",s.jsx("span",{className:"text-yellow-400 font-bold",children:"Analysis"})," items will reduce boss damage significantly."]})]}),N>=100&&w.critChance>=.1&&w.armorPercent>=10&&S.tech>15&&s.jsxs("div",{className:"flex items-start gap-2 text-[11px] text-emerald-400",children:[s.jsx(fg,{className:"w-3 h-3 mt-0.5 shrink-0"}),s.jsx("span",{children:"Your loadout is well-balanced. Consider specializing in one stat for even greater effectiveness."})]})]})]})]})]})};function dje(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=tx(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const hje={Textbook:s.jsx(vi,{className:"w-5 h-5"}),Simulation:s.jsx(Uf,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(_x,{className:"w-5 h-5"}),"Practice Set":s.jsx(cs,{className:"w-5 h-5"}),Article:s.jsx(WH,{className:"w-5 h-5"}),"Video Lesson":s.jsx(YH,{className:"w-5 h-5"}),Supplemental:s.jsx(Q2,{className:"w-5 h-5"})};let xh=0,eT=!1,tT=!1,rV="";const fje=({user:t,assignments:e,submissions:r,classConfigs:n,enabledFeatures:a,onNavigate:i,onStartAssignment:o,studentTab:c="RESOURCES"})=>{var ga,hs,bi,_t,fe,nt,dt,rr,br,vn,nn,_n,zr,Bs,fs,ho,vl,ps,ms,Ba,ja,H,we,je,Ee,pt,Rt,jt,nr,Or,hn;const d=Qa(),{confirm:h}=Do(),[p,m]=T.useState(new Set),[x,y]=T.useState(t.classType||((ga=t.enrolledClasses)==null?void 0:ga[0])||"Unassigned"),[S,w]=T.useState(null),[N,A]=T.useState([]),[R,O]=T.useState({}),[L,I]=T.useState(!1),[k,E]=T.useState(null);rV!==t.id&&(rV=t.id,xh=((hs=t.gamification)==null?void 0:hs.lastLevelSeen)||1,eT=!1,tT=!1),xh===0&&(xh=((bi=t.gamification)==null?void 0:bi.lastLevelSeen)||1);const j=c,[C,q]=T.useState(!1),[D,$]=T.useState(null),[B,V]=T.useState(!1),[W,G]=T.useState(null),[Y,re]=T.useState(null),[ce,de]=T.useState(null),[X,ae]=T.useState(null),[ne,ve]=T.useState(null),[pe,Be]=T.useState(null),[Ue,Fe]=T.useState(!1),[Ne,He]=T.useState(null),[Z,te]=T.useState(!1);T.useEffect(()=>{var Le,Pe,ht;const se=((Le=t.gamification)==null?void 0:Le.level)||1,xe=Math.max(((Pe=t.gamification)==null?void 0:Pe.lastLevelSeen)||1,xh);if(se>xe){xh=se;const or=((ht=t.gamification)==null?void 0:ht.inventory)||[],Zt=or.length>0?or[or.length-1]:null;E(Zt),I(!0),Kn.levelUp()}},[(_t=t.gamification)==null?void 0:_t.level,(fe=t.gamification)==null?void 0:fe.lastLevelSeen,(nt=t.gamification)==null?void 0:nt.inventory]),T.useEffect(()=>{const se=[];try{se.push(Ae.subscribeToXPEvents(xe=>{const Le=xe.find(Pe=>{var ht,or,Zt;if(!Pe.isActive||Pe.type!=="GLOBAL"&&Pe.targetClass!==x||Pe.scheduledAt&&new Date(Pe.scheduledAt)>new Date)return!1;if((ht=Pe.targetSections)!=null&&ht.length){const Mn=Pe.type!=="GLOBAL"&&Pe.targetClass?Pe.targetClass:x,$a=((or=t.classSections)==null?void 0:or[Mn])||((Zt=t.classSections)==null?void 0:Zt[x])||t.section||"";if(!Pe.targetSections.includes($a))return!1}return!0});w(Le||null)}))}catch{}try{se.push(Ae.subscribeToQuests(xe=>{const Le=t.enrolledClasses||(t.classType?[t.classType]:[]);A(xe.filter(Pe=>{var or,Zt;if(!Pe.isActive)return!1;const ht=new Date;if(Pe.startsAt&&new Date(Pe.startsAt)>ht||Pe.expiresAt&&new Date(Pe.expiresAt)<ht||Pe.targetClass&&!Le.includes(Pe.targetClass))return!1;if((or=Pe.targetSections)!=null&&or.length){const Mn=((Zt=t.classSections)==null?void 0:Zt[Pe.targetClass||x])||t.section||"";if(!Pe.targetSections.includes(Mn))return!1}return!0}))}))}catch{}try{se.push(Ae.subscribeToStudentPracticeProgress(t.id,O))}catch{}return()=>se.forEach(xe=>xe())},[x]);const be=((rr=(dt=t.gamification)==null?void 0:dt.classXp)==null?void 0:rr[x])||0,Se=ie.useRef(be),Ze=ie.useRef(x);T.useEffect(()=>{if(Ze.current!==x){Ze.current=x,Se.current=be;return}if(be>Se.current&&Se.current>=0){const se=be-Se.current;if(se>0&&se<500){Be(se),Kn.xpGain();const xe=setTimeout(()=>Be(null),2e3);return()=>clearTimeout(xe)}}Se.current=be},[be]),T.useEffect(()=>{var Le;if(eT)return;eT=!0;const se=new Date().toISOString().split("T")[0];((Le=t.gamification)==null?void 0:Le.lastLoginRewardDate)!==se&&!Z&&Ae.claimDailyLogin().then(Pe=>{Pe.alreadyClaimed||(te(!0),Kn.dailyReward(),d.success(`Daily login: +${Pe.xpReward} XP, +${Pe.fluxReward} Flux (${Pe.streak}-day streak!)`))}).catch(()=>{})},[]),T.useEffect(()=>{tT||(tT=!0,Ae.updateEngagementStreak().catch(()=>{}))},[]);const[rt,It]=T.useState([]);T.useEffect(()=>{let se;try{se=Ae.subscribeToAnnouncements(It)}catch{}return()=>se==null?void 0:se()},[]);const At=T.useMemo(()=>{var xe;const se=((xe=t.gamification)==null?void 0:xe.dismissedAnnouncements)||[];return rt.filter(Le=>{var Pe,ht,or;if(se.includes(Le.id)||Le.classType!=="GLOBAL"&&Le.classType!==x)return!1;if((Pe=Le.targetSections)!=null&&Pe.length){const Zt=Le.classType!=="GLOBAL"?Le.classType:x,Mn=((ht=t.classSections)==null?void 0:ht[Zt])||((or=t.classSections)==null?void 0:or[x])||t.section||"";if(!Le.targetSections.includes(Mn))return!1}return!0})},[rt,(br=t.gamification)==null?void 0:br.dismissedAnnouncements,x,t.classSections,t.section]),Ft=async se=>{await Ae.dismissAnnouncement(t.id,se)},qt=()=>{var xe;const se=((xe=t.gamification)==null?void 0:xe.level)||1;xh=se,I(!1),E(null),Ae.updateUserLastLevelSeen(t.id,se).catch(()=>{})},Dt=async se=>{try{await Ae.updateUserAppearance(t.id,se,x),d.success("Profile updated!"),q(!1),G(null),re(null),de(null),ae(null),ve(null)}catch{d.error("Failed to save  try again")}},tr=t.enrolledClasses||(t.classType?[t.classType]:[]),he=T.useMemo(()=>zu(t,x),[t,x]),Ge=he.equipped,Pt=he.inventory,Ke=T.useMemo(()=>{const se={tech:10,focus:10,analysis:10,charisma:10};return Object.values(Ge).filter(Boolean).forEach(Le=>{Le.stats&&Object.entries(Le.stats).forEach(([Pe,ht])=>{se[Pe]+=ht})}),se},[Ge]),it=T.useMemo(()=>c0(Ge),[Ge]),$t=T.useMemo(()=>{const se=t.gamification||{},Le={...se.achievementProgress||{}},Pe=se.xp||0,ht=se.level||1,or=se.inventory||[],Zt=se.completedQuests||[],Mn=se.engagementStreak||0,$a=se.loginStreak||0,$s=se.tutoringSessionsCompleted||0,Dn=se.bossesDefeated||0,Tn=se.challengesCompleted||0,Fi=se.itemsCrafted||0,Tr=(gs,wi)=>{(!Le[gs]||wi>Le[gs])&&(Le[gs]=wi)};return Tr("first_steps",Pe),Tr("xp_5k",Pe),Tr("xp_25k",Pe),Tr("rising_star",ht),Tr("veteran",ht),Tr("elite",ht),Tr("legend",ht),Tr("collector_10",or.length),Tr("collector_50",or.length),Tr("gear_score_100",it),Tr("gear_score_500",it),Tr("first_mission",Zt.length),Tr("mission_5",Zt.length),Tr("mission_20",Zt.length),Tr("boss_slayer",Dn),Tr("streak_3",Mn),Tr("streak_8",Mn),Tr("streak_16",Mn),Tr("login_7",$a),Tr("login_30",$a),Tr("challenges_10",Tn),Tr("tutor_1",$s),Tr("tutor_10",$s),Tr("tech_50",Ke.tech),Tr("focus_50",Ke.focus),Tr("analysis_50",Ke.analysis),Tr("charisma_50",Ke.charisma),Tr("craft_10",Fi),Le},[t,it,Ke]),Nt=[{subject:"Tech",A:Ke.tech,fullMark:100},{subject:"Focus",A:Ke.focus,fullMark:100},{subject:"Analysis",A:Ke.analysis,fullMark:100},{subject:"Charisma",A:Ke.charisma,fullMark:100}],kr=T.useMemo(()=>{const se={};return e.filter(xe=>{var Le,Pe;if(xe.classType!==x||xe.status==="DRAFT"||xe.status==="ARCHIVED"||xe.scheduledAt&&new Date(xe.scheduledAt)>new Date)return!1;if((Le=xe.targetSections)!=null&&Le.length){const ht=((Pe=t.classSections)==null?void 0:Pe[x])||t.section||"";if(!xe.targetSections.includes(ht))return!1}return!0}).forEach(xe=>{var ht;const Le=r.find(or=>or.assignmentId===xe.id),Pe=xe.unit||"General Resources";se[Pe]||(se[Pe]=[]),se[Pe].push({...xe,lastEngagement:Le&&Le.submittedAt||null,engagementTime:((ht=Le==null?void 0:Le.metrics)==null?void 0:ht.engagementTime)||0})}),se},[e,r,x]),ye=se=>{const xe=new Set(p);xe.has(se)?xe.delete(se):xe.add(se),m(xe)},ot=((vn=t.gamification)==null?void 0:vn.level)||1,mt=((nn=t.gamification)==null?void 0:nn.currency)||0,Ct=be,vt=Ct%1e3/1e3*100,tt=ZU(Ct),gr=ZU(mt),Gt=l0(ot),Vr=async se=>{const xe=se.target.value;y(xe),await Ae.switchUserView(t.id,xe)},cn=async se=>{if(!B){V(!0);try{await Ae.equipItem(t.id,se,x),$(null),Kn.equip(),d.success(`${se.name} equipped.`)}catch{d.error("Failed to equip item.")}finally{V(!1)}}},yr=async se=>{V(!0);try{await Ae.unequipItem(t.id,se,x),$(null),d.success("Item unequipped.")}catch{d.error("Failed to unequip item.")}finally{V(!1)}},Qt=async()=>{if(!D)return;if(Object.values(Ge).some(Le=>Le&&Le.id===D.id)){d.error("Unequip this item before salvaging.");return}const xe=$M(D);if(await h({message:`Salvage ${D.name} for ${xe} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){V(!0);try{await Ae.disenchantItem(t.id,D,x),$(null),Kn.salvage(),d.success(`Salvaged for ${xe} Cyber-Flux.`)}catch{d.error("Failed to salvage item.")}finally{V(!1)}}},Lt=async se=>{if(!D)return;const xe=Yi[se];if(mt<xe)return d.error("Insufficient Cyber-Flux.");V(!0);try{await Ae.craftItem(t.id,D,se,x),$(null),Kn.craft(),d.success(`${se.charAt(0)+se.slice(1).toLowerCase()} complete.`)}catch(Le){const Pe=(Le==null?void 0:Le.message)||(Le==null?void 0:Le.code)||"Unknown error";d.error(`Fabrication failed: ${Pe}`)}finally{V(!1)}},bt=((_n=t.gamification)==null?void 0:_n.gemsInventory)||[],Fr=async()=>{if(!(!D||B)){if(mt<Yi.SOCKET)return d.error("Insufficient Cyber-Flux.");if((D.sockets||0)>=3)return d.error("Maximum sockets reached.");V(!0);try{const se=await Ae.addSocket(D.id,x);$(se.item),Kn.craft(),d.success("Socket added!")}catch(se){d.error((se==null?void 0:se.message)||"Failed to add socket.")}finally{V(!1)}}},tn=async se=>{if(!(!D||B)){if(mt<Yi.ENCHANT)return d.error("Insufficient Cyber-Flux.");V(!0);try{const xe=await Ae.socketGem(D.id,se,x);$(xe.item),Kn.craft(),xe.runewordActivated?(Kn.levelUp(),d.success(`RUNEWORD ACTIVATED: ${xe.runewordActivated.name}!`)):d.success("Gem socketed!")}catch(xe){d.error((xe==null?void 0:xe.message)||"Failed to socket gem.")}finally{V(!1)}}},Dr=async se=>{var Pe;if(!D||B)return;const xe=(Pe=D.gems)==null?void 0:Pe[se];if(!xe)return;const Le=BM(D.rarity,xe.tier,D.unsocketCount||0);if(mt<Le)return d.error(`Insufficient Cyber-Flux. Need ${Le}.`);V(!0);try{const ht=await Ae.unsocketGem(D.id,se,x);$(ht.item),Kn.craft(),d.success(`Gem removed! -${ht.cost} Flux`)}catch(ht){d.error((ht==null?void 0:ht.message)||"Failed to unsocket gem.")}finally{V(!1)}},Cr=((zr=t.gamification)==null?void 0:zr.activeQuests)||[],xn=((Bs=t.gamification)==null?void 0:Bs.completedQuests)||[],dr=N.filter(se=>Cr.some(xe=>xe.questId===se.id)),Qn=N.filter(se=>!Cr.some(xe=>xe.questId===se.id)&&!xn.includes(se.id)),un=async se=>{try{await Ae.acceptQuest(t.id,se.id),Kn.questAccept(),d.success(`Contract accepted: ${se.title}`)}catch{d.error("Failed to accept contract.")}},dn=async se=>{const xe=se.type==="CUSTOM";if(await h({message:xe?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:xe?"Submit":"Deploy",variant:"info"}))try{await Ae.deployMission(t.id,se),Kn.questDeploy(),d.info("Mission deployed. Awaiting verification.")}catch{d.error("Deployment failed.")}},Re=["HEAD","HANDS","RING1","AMULET"],Ye=["CHEST","BELT","FEET","RING2"],[qe,hr]=T.useState(null),Hr=v_e(zU(Y7,{activationConstraint:{distance:8}}),zU(WQ,{activationConstraint:{delay:150,tolerance:5}})),_r=se=>se==="RING1"||se==="RING2"?["RING"]:[se],rn=se=>{const{active:xe}=se,Le=Pt.find(Pe=>Pe.id===xe.id)||Object.values(Ge).find(Pe=>Pe&&Pe.id===xe.id);hr(Le||null)},yn=se=>{const{active:xe,over:Le}=se;if(hr(null),!Le)return;const Pe=xe.id,ht=Le.id;if(ht.startsWith("slot-")){const or=ht.replace("slot-",""),Zt=Pt.find($a=>$a.id===Pe);if(!Zt||!_r(or).includes(Zt.slot))return;cn(Zt)}if(Pe.startsWith("equipped-")&&(ht==="inventory-zone"||ht.startsWith("storage-cell-"))){const or=Pe.replace("equipped-","");yr(or)}},pa=(se,xe,Le="w-5 h-5")=>{const Pe=`${Le} ${xe}`,ht={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(se){case"HEAD":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:Pe,...ht,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(Xv,{className:Pe})}},ma=({slot:se})=>{const xe=Ge[se],Le=xe?ba(xe.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Pe,isOver:ht}=Z7({id:`slot-${se}`}),{attributes:or,listeners:Zt,setNodeRef:Mn,isDragging:$a}=ZQ({id:xe?`equipped-${se}`:`empty-slot-${se}`,disabled:!xe}),$s=qe&&_r(se).includes(qe.slot),Dn=ht&&$s?"ring-2 ring-purple-500 scale-110":qe&&$s?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:Pe,className:"relative",children:s.jsx("div",{ref:Mn,...or,...Zt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${$a?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${Le.border} ${Le.bg} ${Le.shimmer} ${Le.glow} ${Dn}`,onClick:()=>!$a&&xe&&$(xe),children:xe?s.jsxs(s.Fragment,{children:[pa(se.replace(/\d/,""),Le.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${Le.text}`,children:xe.baseName||xe.name.split(" ").slice(-1)[0]}),!$a&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${Le.text}`,children:xe.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[xe.rarity," ",se]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(xe.stats).map(([Tn,Fi])=>`+${Fi} ${Tn.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:se.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 md:gap-6 lg:gap-8 h-full pb-6 lg:pb-12",children:[At.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:At.map(se=>{const xe={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${xe[se.priority]}`,children:[s.jsx(Jv,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:se.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:se.content})]}),s.jsx("button",{onClick:()=>Ft(se.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx($n,{className:"w-4 h-4"})})]},se.id)})}),S&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx(ta,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[S.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",S.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[S.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${Gt.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${Gt.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${Gt.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((fs=t.gamification)==null?void 0:fs.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${Gt.tierColor.split(" ")[1]}`,children:[Gt.rankName," (Lvl ",ot,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",it]})]}),tr.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:x,onChange:Vr,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:tr.map(se=>s.jsx("option",{value:se,children:se},se))}),s.jsx(Ei,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${vt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[tt.toLocaleString()," XP (",x,")"]}),s.jsx("span",{children:"Next Rank"}),pe&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",pe," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(y3,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:gr})]})]})}),(((ho=t.gamification)==null?void 0:ho.engagementStreak)||0)>0&&(()=>{var Le;const se=((Le=t.gamification)==null?void 0:Le.engagementStreak)||0,xe=aW(se);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(Cu,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[se,"w"]})]}),xe>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((xe-1)*100),"%"]})]})]})})})(),(((vl=t.gamification)==null?void 0:vl.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(fg,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((ps=t.gamification)==null?void 0:ps.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>Fe(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(s0,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),a.physicsLab&&s.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(_x,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(nl,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),a.evidenceLocker&&s.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(Ble,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(nl,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[j==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Qn.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),Qn.map(se=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:se.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:se.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:se.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[se.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(se.statRequirements).map(([xe,Le])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[Le," ",xe]},xe))}),se.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Mo,{className:"w-3 h-3"})," Expires: ",new Date(se.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>un(se),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(ku,{className:"w-4 h-4"})," Accept Contract"]})]},se.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[dr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),dr.map(se=>{var ht,or;const xe=((ht=Cr.find(Zt=>Zt.questId===se.id))==null?void 0:ht.status)||"ACCEPTED",Le=(or=Cr.find(Zt=>Zt.questId===se.id))==null?void 0:or.deploymentRoll,Pe=se.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(cs,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:se.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[se.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${xe==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":xe==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":xe==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:xe})]}),xe==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:se.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>dn(se),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(XH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Pe?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),se.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx($i,{className:"w-5 h-5"})})]})]}):xe==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx(ta,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Pe?"AWAITING_HQ_SIG_VERIFICATION":Le===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Pe?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},se.id)})]})]},"missions"),j==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(kr).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:(()=>{var Le;const se=(Le=n==null?void 0:n.find(Pe=>Pe.className===x))==null?void 0:Le.unitOrder;return dj(Object.keys(kr),se).map(Pe=>[Pe,kr[Pe]])})().map(([se,xe])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>ye(se),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[p.has(se)?s.jsx(Ei,{className:"w-4 h-4 text-purple-400"}):s.jsx(nl,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:se})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[xe.length," Files"]})]}),p.has(se)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:xe.map(Le=>{const Pe=!!Le.dueDate,ht=Le.dueDate?new Date(Le.dueDate):null,or=new Date,Zt=ht?Math.ceil((ht.getTime()-or.getTime())/864e5):1/0,Mn=Zt<=0?"text-red-400":Zt<=2?"text-yellow-400":"text-gray-500",$a=Math.floor(Le.engagementTime/60),$s=$a>=5,Dn=R[Le.id],Tn=Dn==null?void 0:Dn.completed,Fi=Le.lessonBlocks&&Le.lessonBlocks.length>0,Tr=Fi&&!Le.contentUrl;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${Tn?"border-green-500/20":Fi?"border-indigo-500/10":"border-white/5"}`,onClick:()=>o&&o(Le.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Tn||$s?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":Le.lastEngagement?"bg-green-500/10 text-green-400":Tr?"bg-indigo-500/10 text-indigo-400 group-hover:scale-110 shadow-lg group-hover:shadow-indigo-500/20":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Tn?s.jsx(gn,{className:"w-6 h-6"}):$s?s.jsx(gn,{className:"w-6 h-6"}):Le.lastEngagement?s.jsx(gn,{className:"w-5 h-5 opacity-60"}):Tr?s.jsx(Oo,{className:"w-6 h-6"}):hje[Le.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[8px] font-bold uppercase px-1.5 py-0.5 rounded border ${Tr?"bg-indigo-500/10 text-indigo-400 border-indigo-500/20":"bg-black/40 text-gray-500 border-white/5"}`,children:Tr?"Lesson":Le.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:Le.title}),Tn&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx(gn,{className:"w-2.5 h-2.5"}),"COMPLETED",((Dn==null?void 0:Dn.totalCompletions)||0)>1?` (${Dn.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:Le.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Le.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[$a,"m engaged"]}),Tn&&(Dn==null?void 0:Dn.bestScore)!=null&&Dn.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",Dn.bestScore,"%"]}),Fi&&s.jsxs("span",{className:"text-[9px] text-indigo-400 font-bold flex items-center gap-0.5",children:[s.jsx(Oo,{className:"w-3 h-3"})," ",Le.lessonBlocks.length," blocks"]}),Pe&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Mn}`,children:[s.jsx(Ps,{className:"w-3 h-3"}),Zt<=0?"Overdue":Zt===1?"Due tomorrow":`Due in ${Zt}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(Uf,{className:"w-4 h-4 text-purple-400 fill-current"})})]},Le.id)})})]},se))})},"resources"),j==="LOADOUT"&&s.jsxs(yTe,{sensors:Hr,collisionDetection:T_e,modifiers:[dje],onDragStart:rn,onDragEnd:yn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((ms=he.appearance)==null?void 0:ms.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:Re.map(se=>s.jsx(ma,{slot:se},se))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(ax,{equipped:Ge,appearance:he.appearance,evolutionLevel:ot})}),s.jsx("div",{className:"flex flex-col gap-4",children:Ye.map(se=>s.jsx(ma,{slot:se},se))})]}),s.jsxs("button",{onClick:se=>{se.preventDefault(),se.stopPropagation(),q(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(ece,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(lK,{width:"100%",height:"100%",children:s.jsxs(a_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:Nt,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(IX,{stroke:"rgba(255,255,255,0.08)"}),s.jsx(Ux,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(zx,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(Vx,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const se=zE(Ke);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:Ke.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:Ke.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(se.critChance*100).toFixed(0),"%  Crit damage: ",se.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:Ke.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",se.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:Ke.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",se.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:se.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[se.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(se.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(pje,{inventory:Pt,equipped:Ge,draggedItem:qe,onInspect:$,getSlotIcon:pa})]},"loadout"),s.jsx(PTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:qe&&(()=>{const se=ba(qe.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${se.bg} ${se.border} ${se.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[pa(qe.slot,se.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${se.text} drop-shadow-lg`,children:qe.baseName||qe.name.split(" ").slice(-1)[0]})]})})})()})]}),j==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(zTe,{unlockedAchievements:((Ba=t.gamification)==null?void 0:Ba.unlockedAchievements)||[],achievementProgress:$t})},"achievements"),j==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(VTe,{specialization:(ja=t.gamification)==null?void 0:ja.specialization,skillPoints:((H=t.gamification)==null?void 0:H.skillPoints)||0,unlockedSkills:((we=t.gamification)==null?void 0:we.unlockedSkills)||[]})},"skills"),j==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(FTe,{currency:mt,lastSpin:(je=t.gamification)==null?void 0:je.lastWheelSpin,classType:x})},"fortune"),j==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(ije,{userId:t.id,userName:t.name,classType:x})},"tutoring"),j==="INTEL"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(uje,{user:t,submissions:r,assignments:e,activeClass:x})},"intel")]})}),s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(WTe,{userId:t.id,userName:t.name,classType:x}),s.jsx(nje,{userId:t.id,classType:x,userSection:((Ee=t.classSections)==null?void 0:Ee[x])||t.section,userClassSections:t.classSections,playerStats:Ke,playerAppearance:he.appearance,playerEquipped:Ge,playerEvolutionLevel:ot})]})}),s.jsx(is,{isOpen:C,onClose:()=>{q(!1),G(null),re(null),de(null),ae(null),ve(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(ax,{equipped:Ge,appearance:{...he.appearance,hue:W??((pt=he.appearance)==null?void 0:pt.hue)??0,bodyType:Y??((Rt=he.appearance)==null?void 0:Rt.bodyType)??"A",skinTone:ce??((jt=he.appearance)==null?void 0:jt.skinTone)??0,hairStyle:X??((nr=he.appearance)==null?void 0:nr.hairStyle)??1,hairColor:ne??((Or=he.appearance)==null?void 0:Or.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:eY.map((se,xe)=>{var Pe;const Le=(ce??((Pe=he.appearance)==null?void 0:Pe.skinTone)??0)===xe;return s.jsx("button",{onClick:()=>de(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Le?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:se}},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:LTe.map((se,xe)=>{var Pe;const Le=(X??((Pe=he.appearance)==null?void 0:Pe.hairStyle)??1)===xe;return s.jsx("button",{onClick:()=>ae(xe),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${Le?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:se},xe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:tY.map((se,xe)=>{var Pe;const Le=(ne??((Pe=he.appearance)==null?void 0:Pe.hairColor)??0)===xe;return s.jsx("button",{onClick:()=>ve(xe),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Le?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:se}},xe)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(se=>{var Le;const xe=(Y??((Le=he.appearance)==null?void 0:Le.bodyType)??"A")===se;return s.jsx("button",{onClick:()=>re(se),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${xe?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:se==="A"?"Alpha":se==="B"?"Beta":"Femme"},se)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(se=>{var Le;const xe=(W??((Le=he.appearance)==null?void 0:Le.hue)??0)===se;return s.jsx("button",{onClick:()=>G(se),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${xe?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${se}, 60%, 45%)`}},se)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{q(!1),G(null),re(null),de(null),ae(null),ve(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var se,xe,Le,Pe,ht;return Dt({hue:W??((se=he.appearance)==null?void 0:se.hue)??0,bodyType:Y??((xe=he.appearance)==null?void 0:xe.bodyType)??"A",skinTone:ce??((Le=he.appearance)==null?void 0:Le.skinTone)??0,hairStyle:X??((Pe=he.appearance)==null?void 0:Pe.hairStyle)??1,hairColor:ne??((ht=he.appearance)==null?void 0:ht.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(is,{isOpen:!!D,onClose:()=>$(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:D&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${D.runewordActive?"border-amber-500/40 runeword-active":ba(D.rarity).border} ${ba(D.rarity).bg} ${ba(D.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${D.runewordActive?"border-amber-500/50":ba(D.rarity).border} ${ba(D.rarity).bg}`,style:{boxShadow:D.runewordActive?"0 0 20px rgba(245,158,11,0.3)":D.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":D.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:pa(D.slot,D.runewordActive?"text-amber-400":ba(D.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${D.runewordActive?"text-amber-300":ba(D.rarity).text}`,children:D.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[D.rarity," ",D.slot]}),D.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(hn=zM(D))==null?void 0:hn.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(D.stats).map(([se,xe])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:se}),s.jsxs("span",{className:"font-mono font-bold",children:["+",xe]})]},se))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:D.affixes.map((se,xe)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[se.name," (T",se.tier,")"]},xe))})]}),(D.sockets||0)>0&&(()=>{const se=D.sockets||0,xe=D.gems||[],Le=se-xe.length,Pe=zM(D);return s.jsxs("div",{className:`p-4 rounded-xl border ${Pe?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Pe&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Pe.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Pe.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Pe.bonusStats).map(([ht,or])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",or," ",ht.slice(0,3).toUpperCase()]},ht))}),Pe.bonusEffects&&Pe.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:Pe.bonusEffects.map(ht=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:ht.description},ht.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(y3,{className:"w-3 h-3"})," Gem Sockets (",xe.length,"/",se,")"]}),s.jsxs("div",{className:"flex gap-2",children:[xe.map((ht,or)=>{const Zt=BM(D.rarity,ht.tier,D.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:ht.color,backgroundColor:`${ht.color}20`,boxShadow:`0 0 8px ${ht.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ht.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:ht.name}),s.jsxs("button",{onClick:()=>Dr(or),disabled:B||mt<Zt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Zt} Flux`,children:["Remove (",Zt," F)"]})]},or)}),Array.from({length:Le}).map((ht,or)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${or}`))]}),Le>0&&bt.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Yi.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:bt.map(ht=>s.jsxs("button",{onClick:()=>tn(ht.id),disabled:B||mt<Yi.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ht.color}}),s.jsx("span",{className:"text-gray-300",children:ht.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",ht.value]})]},ht.id))}),xe.length>0&&!Pe&&(()=>{const ht=xe.map(Zt=>Zt.name),or=LE.filter(Zt=>Zt.requiredSockets===se&&Zt.pattern.slice(0,ht.length).every((Mn,$a)=>Mn===ht[$a]));return or.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:or.map(Zt=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:Zt.name}),"  needs [",Zt.pattern.join("  "),"]"]},Zt.id))})})()]})]})})(),(D.sockets||0)<3&&s.jsxs("button",{onClick:Fr,disabled:B||mt<Yi.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(y3,{className:"w-4 h-4"}),"Add Socket (",Yi.SOCKET," Flux)  ",D.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const se=D.slot==="RING"?"RING1":D.slot,xe=Ge[se]||(D.slot==="RING"?Ge.RING2:null);if(!xe||xe.id===D.id)return null;const Le=ba(xe.rarity),Pe=new Set([...Object.keys(D.stats),...Object.keys(xe.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${Le.text}`,children:xe.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:xe.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Pe).map(ht=>{const or=D.stats[ht]||0,Zt=xe.stats[ht]||0,Mn=or-Zt;return Mn===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[ht.slice(0,3).toUpperCase(),": 0"]},ht):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${Mn>0?"text-green-400":"text-red-400"}`,children:[ht.slice(0,3).toUpperCase(),": ",Mn>0?"":"",Math.abs(Mn)]},ht)})})]})})(),(()=>{var xe;const se=(xe=Object.entries(Ge).find(([,Le])=>Le&&Le.id===D.id))==null?void 0:xe[0];return se?s.jsx("button",{onClick:()=>yr(se),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:B,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>cn(D),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:B,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Lt("RECALIBRATE"),disabled:B||mt<Yi.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Lt("REFORGE"),disabled:B||mt<Yi.REFORGE||D.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Lt("OPTIMIZE"),disabled:B||mt<Yi.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Yi.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:Qt,disabled:B,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(Cn,{className:"w-4 h-4"}),"Salvage for ",$M(D)," Flux"]})]})]})}),Ue&&s.jsx(cje,{user:t,classType:x,onClose:()=>Fe(!1)}),Ne&&s.jsx(sje,{item:Ne,onClose:()=>He(null)}),s.jsx(is,{isOpen:L,onClose:qt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((se,xe)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][xe%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},xe))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:ot})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:Gt.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),k&&s.jsxs("div",{className:`${ba(k.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${ba(k.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${ba(k.rarity).text}`,children:k.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[k.rarity," ",k.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(k.stats).map(([se,xe])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",xe," ",se.toUpperCase()]},se))})]})]}),s.jsx("button",{onClick:qt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},pje=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=Z7({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(ug,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(gje,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(mje,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},mje=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=Z7({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},gje=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=ZQ({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=ba(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Kw=typeof self<"u"?self:global;const ix=typeof navigator<"u",xje=ix&&typeof HTMLImageElement>"u",m2=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Xw=Kw.Buffer,ev=Kw.BigInt,Qw=!!Xw,yje=t=>t;function g2(t,e=yje){if(m2)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let ek=Kw.fetch;const vje=t=>ek=t;if(!Kw.fetch){const t=g2("http",(n=>n)),e=g2("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const x={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(x.port=Number(c));const y=(p==="https:"?await e:await t).request(x,(S=>{if(S.statusCode===301||S.statusCode===302){let w=new URL(S.headers.location,n).toString();return r(w,{headers:a}).then(i).catch(o)}i({status:S.statusCode,arrayBuffer:()=>new Promise((w=>{let N=[];S.on("data",(A=>N.push(A))),S.on("end",(()=>w(Buffer.concat(N))))}))})}));y.on("error",o),y.end()}));vje(r)}function ir(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const x2=t=>rY(t)?void 0:t,bje=t=>t!==void 0;function rY(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(bje).length===0)}function Pa(t){let e=new Error(t);throw delete e.stack,e}function zd(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function LA(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const BA=t=>String.fromCharCode.apply(null,t),nV=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function nY(t){return nV?nV.decode(t):Qw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(BA(t)))}class rs{static from(e,r){return e instanceof this&&e.le===r?e:new rs(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof rs){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Pa("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Pa("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=rs){return e instanceof DataView||e instanceof rs?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Pa("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new rs(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return nY(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return BA(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return BA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function $A(t,e){Pa(`${t} '${e}' was not loaded, try using full build of exifr.`)}class tk extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||$A(this.kind,e),r&&(e in r||(function(n,a){Pa(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||$A(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var hl=new tk("file parser"),Ma=new tk("segment parser"),yl=new tk("file reader");function wje(t,e){return typeof t=="string"?aV(t,e):ix&&!xje&&t instanceof HTMLImageElement?aV(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new rs(t):ix&&t instanceof Blob?zA(t,e,"blob",g0):void Pa("Invalid input argument")}function aV(t,e){return(r=t).startsWith("data:")||r.length>1e4?UA(t,e,"base64"):m2&&t.includes("://")?zA(t,e,"url",m0):m2?UA(t,e,"fs"):ix?zA(t,e,"url",m0):void Pa("Invalid input argument");var r}async function zA(t,e,r,n){return yl.has(r)?UA(t,e,r):n?(async function(a,i){let o=await i(a);return new rs(o)})(t,n):void Pa(`Parser ${r} is not loaded`)}async function UA(t,e,r){let n=new(yl.get(r))(t,e);return await n.read(),n}const m0=t=>ek(t).then((e=>e.arrayBuffer())),g0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class Sje extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function _a(t,e,r){let n=new Sje;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function x0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const ii=new Map,Lo=new Map,Iu=new Map,wu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],tp=["jfif","xmp","icc","iptc","ihdr"],y0=["tiff",...tp],ua=["ifd0","ifd1","exif","gps","interop"],Su=[...y0,...ua],Nu=["makerNote","userComment"],rp=["translateKeys","translateValues","reviveValues","multiSegment"],_u=[...rp,"sanitize","mergeOutput","silentErrors"];class aY{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class dm extends aY{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),ir(this,"enabled",!1),ir(this,"skip",new Set),ir(this,"pick",new Set),ir(this,"deps",new Set),ir(this,"translateKeys",!1),ir(this,"translateValues",!1),ir(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=ua.includes(e),this.canBeFiltered&&(this.dict=ii.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Pa(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of rp)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,y2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&y2(this.pick,this.deps)}}var Mi={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},iV=new Map;class k0 extends aY{static useCached(e){let r=iV.get(e);return r!==void 0||(r=new this(e),iV.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Pa(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ix?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of wu)this[e]=Mi[e];for(e of _u)this[e]=Mi[e];for(e of Nu)this[e]=Mi[e];for(e of Su)this[e]=new dm(e,Mi[e],void 0,this)}setupFromTrue(){let e;for(e of wu)this[e]=Mi[e];for(e of _u)this[e]=Mi[e];for(e of Nu)this[e]=!0;for(e of Su)this[e]=new dm(e,!0,void 0,this)}setupFromArray(e){let r;for(r of wu)this[r]=Mi[r];for(r of _u)this[r]=Mi[r];for(r of Nu)this[r]=Mi[r];for(r of Su)this[r]=new dm(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,ua)}setupFromObject(e){let r;for(r of(ua.ifd0=ua.ifd0||ua.image,ua.ifd1=ua.ifd1||ua.thumbnail,Object.assign(this,e),wu))this[r]=rT(e[r],Mi[r]);for(r of _u)this[r]=rT(e[r],Mi[r]);for(r of Nu)this[r]=rT(e[r],Mi[r]);for(r of y0)this[r]=new dm(r,Mi[r],e[r],this);for(r of ua)this[r]=new dm(r,Mi[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ua,Su),e.tiff===!0?this.batchEnableWithBool(ua,!0):e.tiff===!1?this.batchEnableWithUserValue(ua,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ua):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ua)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=sV(e,n);for(let[o,c]of i)y2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=sV(r,n);for(let[o,c]of i)y2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ua.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of ua)this[i].finalizeFilters()}get onlyTiff(){return!tp.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of y0)this[e].enabled&&!Ma.has(e)&&$A("segment parser",e)}}function sV(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=ii.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function rT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function y2(t,e){for(let r of e)t.add(r)}ir(k0,"default",Mi);class Qu{constructor(e){ir(this,"parsers",{}),ir(this,"output",{}),ir(this,"errors",[]),ir(this,"pushToErrors",(r=>this.errors.push(r))),this.options=k0.useCached(e)}async read(e){this.file=await wje(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of hl)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Pa("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),x2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Ma.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function Yw(t,e){let r=new Qu(e);return await r.read(t),r.parse()}var Nje=Object.freeze({__proto__:null,parse:Yw,Exifr:Qu,fileParsers:hl,segmentParsers:Ma,fileReaders:yl,tagKeys:ii,tagValues:Lo,tagRevivers:Iu,createDictionary:_a,extendDictionary:x0,fetchUrlAsArrayBuffer:m0,readBlobAsArrayBuffer:g0,chunkedProps:wu,otherSegments:tp,segments:y0,tiffBlocks:ua,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:rp,allFormatters:_u,Options:k0});class Jw{constructor(e,r,n){ir(this,"errors",[]),ir(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){Pa(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):Pa("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Ma.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class Ao{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new k0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof rs?e:new rs(e)}constructor(e,r={},n){ir(this,"errors",[]),ir(this,"raw",new Map),ir(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Iu.get(r),a=Lo.get(r),i=ii.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,p={};for(let[m,x]of e)c&&n.has(m)?x=n.get(m)(x):d&&a.has(m)&&(x=this.translateValue(x,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=x;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}ir(Ao,"headerLength",4),ir(Ao,"type",void 0),ir(Ao,"multiSegment",!1),ir(Ao,"canHandle",(()=>!1));function _je(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function Tje(t){return t>=224&&t<=239}function jje(t,e,r){for(let[n,a]of Ma)if(a.canHandle(t,e,r))return n}class oV extends Jw{constructor(...e){super(...e),ir(this,"appSegments",[]),ir(this,"jpegSegments",[]),ir(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ma.keyList())):(e=e===void 0?Ma.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Ma.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Ma.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:p,wanted:m,remaining:x,options:y}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),Tje(n)){if(a=h.getUint16(e+2),i=jje(h,e,a),i&&m.has(i)&&(o=Ma.get(i),c=o.findPosition(h,e),d=y[i],c.type=i,this.appSegments.push(c),!p&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||x.delete(i)):x.delete(i),x.size===0)))break;y.recordUnknownSegments&&(c=Ao.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(_je(n)){if(a=h.getUint16(e+2),n===218&&y.stopAfterSos!==!1)return;y.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Ma.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}ir(oV,"type","jpeg"),hl.set("jpeg",oV);const Aje=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Eje extends Ao{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(o){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=Aje[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Pa(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Pa(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return zd(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let p=0;p<o;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Pa(`Invalid tiff type ${e}`)}}}class nT extends Eje{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Pa("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Pa(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,LA(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,LA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",lV(...e.get(2),e.get(1))),e.set("longitude",lV(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of ua)if(e=this[r],!rY(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function lV(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}ir(nT,"type","tiff"),ir(nT,"headerLength",10),Ma.set("tiff",nT);var kje=Object.freeze({__proto__:null,default:Nje,Exifr:Qu,fileParsers:hl,segmentParsers:Ma,fileReaders:yl,tagKeys:ii,tagValues:Lo,tagRevivers:Iu,createDictionary:_a,extendDictionary:x0,fetchUrlAsArrayBuffer:m0,readBlobAsArrayBuffer:g0,chunkedProps:wu,otherSegments:tp,segments:y0,tiffBlocks:ua,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:rp,allFormatters:_u,Options:k0,parse:Yw});const rk={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},nk=Object.assign({},rk,{firstChunkSize:4e4,gps:[1,2,3,4]});async function iY(t){let e=new Qu(nk);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const ak=Object.assign({},rk,{tiff:!1,ifd1:!0,mergeOutput:!1});async function sY(t){let e=new Qu(ak);await e.read(t);let r=await e.extractThumbnail();return r&&Qw?Xw.from(r):r}async function oY(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const ik=Object.assign({},rk,{firstChunkSize:4e4,ifd0:[274]});async function sk(t){let e=new Qu(ik);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const ok=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Ud=!0,Vd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Ud=Number(r)+.1*Number(n)<13.4,Vd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Ud=Vd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Ud=Vd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Ud=Vd=Number(e)<77}}async function lY(t){let e=await sk(t);return Object.assign({canvas:Ud,css:Vd},ok[e])}class Cje extends rs{constructor(...e){super(...e),ir(this,"ranges",new Oje),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=Qw?Xw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class Oje{constructor(){ir(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>cV(e,o.offset,a)||cV(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function cV(t,e,r){return t<=e&&e<=r}class Zw extends Cje{constructor(e,r){super(0),ir(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}yl.set("blob",class extends Zw{async readWhole(){this.chunked=!1;let t=await g0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await g0(n);return this.set(a,t,!0)}});var Ije=Object.freeze({__proto__:null,default:kje,Exifr:Qu,fileParsers:hl,segmentParsers:Ma,fileReaders:yl,tagKeys:ii,tagValues:Lo,tagRevivers:Iu,createDictionary:_a,extendDictionary:x0,fetchUrlAsArrayBuffer:m0,readBlobAsArrayBuffer:g0,chunkedProps:wu,otherSegments:tp,segments:y0,tiffBlocks:ua,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:rp,allFormatters:_u,Options:k0,parse:Yw,gpsOnlyOptions:nk,gps:iY,thumbnailOnlyOptions:ak,thumbnail:sY,thumbnailUrl:oY,orientationOnlyOptions:ik,orientation:sk,rotations:ok,get rotateCanvas(){return Ud},get rotateCss(){return Vd},rotation:lY});yl.set("url",class extends Zw{async readWhole(){this.chunked=!1;let t=await m0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await ek(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});rs.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof ev!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),ev(e)<<ev(32)|ev(r)):void Pa("Trying to read 64b value but JS can only handle 53b numbers.")};class Rje extends Jw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class cY extends Rje{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,x=this.file.getUintBytes(n,m);for(n+=m;x--;){let y=this.file.getUintBytes(n,d);n+=d+h+2+o;let S=this.file.getUint16(n);if(n+=2,y===r)return S>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=S*p}}}class uY extends cY{}ir(uY,"type","heic");class uV extends cY{}ir(uV,"type","avif"),hl.set("heic",uY),hl.set("avif",uV),_a(ii,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),_a(ii,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),_a(ii,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),_a(Lo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let qm=_a(Lo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const dV={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};qm.set(37392,dV),qm.set(41488,dV);const aT={0:"Normal",1:"Low",2:"High"};function hV(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function fV(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function iT(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function hm(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(pV(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(pV(t[r],t[r+1]));return zd(String.fromCodePoint(...e))}function pV(t,e){return t<<8|e}qm.set(41992,aT),qm.set(41993,aT),qm.set(41994,aT),_a(Iu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?nY(t):t}],[306,iT],[40091,hm],[40092,hm],[40093,hm],[40094,hm],[40095,hm]]),_a(Iu,"exif",[[40960,fV],[36864,fV],[36867,iT],[36868,iT],[40962,hV],[40963,hV]]),_a(Iu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class sT extends Ao{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:rs.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of pY)o[d]=[],c[d]=0;return i.replace(Lje,((d,h,p)=>{if(h==="<"){let m=++c[p];return o[p].push(m),`${d}#${m}`}return`${d}#${o[p].pop()}`}))})(e);let r=zh.findAll(e,"rdf","Description");r.length===0&&r.push(new zh("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=Pje(o.ns,a),dY(o,n);return(function(i){let o;for(let c in i)o=i[c]=x2(i[c]),o===void 0&&delete i[c];return x2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}ir(sT,"type","xmp"),ir(sT,"multiSegment",!0),Ma.set("xmp",sT);class v2{static findAll(e){return hY(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(v2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=fY(a),new v2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class zh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return hY(e,a).map(zh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new zh(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=v2.findAll(n),this.children=zh.findAll(a),this.value=this.children.length===0?fY(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Dje(this.children.map(Mje));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)dY(r,e);return this.value!==void 0&&(e.value=this.value),x2(e)}}function dY(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var Mje=t=>t.serialize(),Dje=t=>t.length===1?t[0]:t,Pje=(t,e)=>e[t]?e[t]:e[t]={};function hY(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function fY(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const pY=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],Lje=new RegExp(`(<|\\/)(${pY.join("|")})`,"g");var Bje=Object.freeze({__proto__:null,default:Ije,Exifr:Qu,fileParsers:hl,segmentParsers:Ma,fileReaders:yl,tagKeys:ii,tagValues:Lo,tagRevivers:Iu,createDictionary:_a,extendDictionary:x0,fetchUrlAsArrayBuffer:m0,readBlobAsArrayBuffer:g0,chunkedProps:wu,otherSegments:tp,segments:y0,tiffBlocks:ua,segmentsAndBlocks:Su,tiffExtractables:Nu,inheritables:rp,allFormatters:_u,Options:k0,parse:Yw,gpsOnlyOptions:nk,gps:iY,thumbnailOnlyOptions:ak,thumbnail:sY,thumbnailUrl:oY,orientationOnlyOptions:ik,orientation:sk,rotations:ok,get rotateCanvas(){return Ud},get rotateCss(){return Vd},rotation:lY});let mV=g2("fs",(t=>t.promises));yl.set("fs",class extends Zw{async readWhole(){this.chunked=!1,this.fs=await mV;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await mV,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});yl.set("base64",class extends Zw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(Qw){let d=Xw.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class gV extends Jw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(LA(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}ir(gV,"type","tiff"),hl.set("tiff",gV);let $je=g2("zlib");const zje=["ihdr","iccp","text","itxt","exif"];class xV extends Jw{constructor(...e){super(...e),ir(this,"catchError",(r=>this.errors.push(r))),ir(this,"metaChunks",[]),ir(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};zje.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),m2){let c=await $je,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}ir(xV,"type","png"),hl.set("png",xV),_a(ii,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),x0(ii,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let yV=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];x0(ii,"ifd0",yV),x0(ii,"exif",yV),_a(Lo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class oT extends Ao{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}ir(oT,"type","jfif"),ir(oT,"headerLength",9),Ma.set("jfif",oT),_a(ii,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class vV extends Ao{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}ir(vV,"type","ihdr"),Ma.set("ihdr",vV),_a(ii,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),_a(Lo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class _v extends Ao{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new rs(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Pa("ICC header is too short");for(let[r,n]of Object.entries(Uje)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return zd(this.chunk.getString(e+12,r))}parseText(e,r){return zd(this.chunk.getString(e+8,r-8))}parseSig(e){return zd(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,x=zd(r.getUnicodeString(m,p));o.push({lang:d,country:h,text:x}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}ir(_v,"type","icc"),ir(_v,"multiSegment",!0),ir(_v,"headerLength",18);const Uje={4:Ul,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Ul,16:Ul,20:Ul,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:Ul,40:Ul,48:Ul,52:Ul,64:(t,e)=>t.getUint32(e),80:Ul};function Ul(t,e){return zd(t.getString(e,4))}Ma.set("icc",_v),_a(ii,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const tv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},bV={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};_a(Lo,"icc",[[4,tv],[12,bV],[40,Object.assign({},tv,bV)],[48,tv],[80,tv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class rv extends Ao{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}ir(rv,"type","iptc"),ir(rv,"translateValues",!1),ir(rv,"reviveValues",!1),Ma.set("iptc",rv),_a(ii,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),_a(Lo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const fm=["Monday","Tuesday","Wednesday","Thursday","Friday"],Vje=({user:t})=>{const e=Qa(),{confirm:r}=Do(),n=T.useMemo(()=>Ae.getWeekId(),[]),[a,i]=T.useState([]),[o,c]=T.useState("Monday"),[d,h]=T.useState(!1),p=T.useRef(null),[m,x]=T.useState(!1),y=t.enrolledClasses||(t.classType?[t.classType]:[]),[S,w]=T.useState(t.classType||y[0]||"Uncategorized");T.useEffect(()=>{const E=new Date().toLocaleDateString("en-US",{weekday:"long"});fm.includes(E)&&c(E)},[]),T.useEffect(()=>{const E=Ae.subscribeToEvidence(t.id,n,i);return()=>E()},[t.id,n]);const N=T.useMemo(()=>{const E=y[0]||"Uncategorized";return a.filter(j=>j.classType?j.classType===S:S===E)},[a,S,y]),A=E=>N.find(j=>j.dayOfWeek===E),R=E=>E?new Date(E).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,O=async E=>{var C;const j=(C=E.target.files)==null?void 0:C[0];if(j){h(!0);try{let q=null;if(j.type.startsWith("image/"))try{const re=await Bje.parse(j,["DateTimeOriginal"])||{};re.DateTimeOriginal&&(q=re.DateTimeOriginal.toISOString())}catch(re){console.warn("EXIF extraction failed",re)}const D=S.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),B=Cm(Om,`evidence/${t.id}/${n}/${D}_${o}_${$}`);await FT(B,j);const V=await Gv(B),W=A(o),Y={id:`${t.id}_${n}_${o}_${D}`,studentId:t.id,weekId:n,classType:S,dayOfWeek:o,imageUrl:V,timestamp:new Date().toISOString(),exifDate:q,reflection:(W==null?void 0:W.reflection)||""};await Ae.uploadEvidence(Y)}catch(q){e.error("Upload failed: "+(q instanceof Error?q.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(E,j)=>{const C=A(E);C&&C.reflection!==j&&await Ae.uploadEvidence({...C,reflection:j})},I=async()=>{if(!(N.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${S} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){x(!0);try{const j=new GJ,C=j.internal.pageSize.getWidth(),q=j.internal.pageSize.getHeight(),D=20,$=C-D*2,B=q-D;j.setFillColor(15,7,32),j.rect(0,0,C,40,"F"),j.setTextColor(255,255,255),j.setFontSize(22),j.setFont("helvetica","bold"),j.text("WEEKLY PROGRESS REPORT",D,18),j.setFontSize(10),j.setFont("helvetica","normal"),j.text(`Operative: ${t.name.toUpperCase()}`,D,28),j.text(`Class: ${S}`,D,33),j.text(`Cycle ID: ${n}`,D,38),j.text(`Generated: ${new Date().toLocaleDateString()}`,C-D,33,{align:"right"});let V=55;const W=[...N].sort((G,Y)=>fm.indexOf(G.dayOfWeek)-fm.indexOf(Y.dayOfWeek));for(const G of W){let Y=null,re="JPEG",ce=0,de=0,X=!1;try{const Ne=await fetch(G.imageUrl);if(!Ne.ok)throw new Error(`Image fetch failed: ${Ne.statusText}`);const He=await Ne.blob();Y=await new Promise((Se,Ze)=>{const rt=new FileReader;rt.onloadend=()=>Se(rt.result),rt.onerror=Ze,rt.readAsDataURL(He)}),He.type==="image/png"&&(re="PNG"),He.type==="image/webp"&&(re="WEBP");const Z=j.getImageProperties(Y),te=Z.width/Z.height,be=100;ce=$,de=ce/te,de>be&&(de=be,ce=de*te)}catch(Ne){console.warn("Image processing error for PDF",Ne),X=!0,de=15}const ve=20+de+12;V+ve>B&&(j.addPage(),V=D),j.setDrawColor(200,200,200),j.setLineWidth(.5),j.line(D,V,C-D,V),V+=6,j.setTextColor(15,7,32),j.setFontSize(16),j.setFont("helvetica","bold"),j.text(G.dayOfWeek.toUpperCase(),D,V);const pe=R(G.exifDate)||R(G.timestamp);if(j.setFontSize(9),j.setFont("helvetica","italic"),j.setTextColor(100,100,100),j.text(`Captured: ${pe}`,C-D,V,{align:"right"}),V+=10,!X&&Y){const Ne=(C-ce)/2;j.addImage(Y,re,Ne,V,ce,de),V+=de+12}else j.setTextColor(255,0,0),j.setFontSize(8),j.text("[Image Error]",D,V),V+=15;j.setFont("helvetica","normal"),j.setFontSize(10);const Be=G.reflection||"No reflection logged for this cycle.",Ue=j.splitTextToSize(Be,$),Fe=Ue.length*5+15;V+Fe>B&&(j.addPage(),V=D),j.setTextColor(15,7,32),j.setFontSize(11),j.setFont("helvetica","bold"),j.text("DAILY REFLECTION:",D,V),V+=6,j.setFont("helvetica","normal"),j.setFontSize(10),j.setTextColor(60,60,60),j.text(Ue,D,V),V+=Ue.length*5+25}j.save(`Report_${S.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Ae.deleteWeeklyEvidence(N),e.success("PDF generated and evidence cleared.")}catch(j){console.error("PDF generation failed:",j),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{x(!1)}}},k=A(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(IR,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:S,onChange:E=>w(E.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:y.map(E=>s.jsx("option",{value:E,children:E},E))}),s.jsx(Ei,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:S}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:I,disabled:m||N.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?s.jsx(no,{className:"w-5 h-5 animate-spin"}):s.jsx(Tle,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:p,onChange:O,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:fm.map(E=>{const j=A(E),C=o===E;return s.jsxs("button",{onClick:()=>c(E),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${C?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${C?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",fm.indexOf(E)+1]}),s.jsx("span",{className:"font-bold text-sm",children:E}),j&&s.jsx("div",{className:`absolute top-2 right-2 ${C?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(dc,{className:"w-3 h-3"})})]},E)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(HH,{className:"w-4 h-4"})," Evidence Capture (",S,")"]}),k&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(Ps,{className:"w-3 h-3"}),R(k.exifDate)||R(k.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:k?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:k.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},children:[s.jsx(nf,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(no,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(IR,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(zf,{className:"w-4 h-4"})," Daily Reflection"]})}),k?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${S}...`,defaultValue:k.reflection,onBlur:E=>L(o,E.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(nl,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},Fje=({user:t})=>{const e=Qa(),[r,n]=T.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=T.useState(""),[o,c]=T.useState(""),[d,h]=T.useState("");T.useEffect(()=>{const x=r.content.replace(/\$(.*?)\$/g,(y,S)=>{try{return ob.renderToString(S,{throwOnError:!1})}catch{return S}}).replace(/\n/g,"<br/>");i(x)},[r.content]);const p=async()=>{await Ae.saveLabReport(r),await Ae.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const x=parseFloat(o),y=parseFloat(d);!isNaN(x)&&!isNaN(y)&&(n(S=>({...S,dataPoints:[...S.dataPoints,{x,y}].sort((w,N)=>w.x-N.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(_x,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(hg,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:x=>c(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:x=>h(x.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(lK,{width:"100%",height:"100%",children:s.jsxs(i_e,{children:[s.jsx(fQ,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(zw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(Uw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(Wo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(qx,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:x=>n(y=>({...y,content:x.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:eW.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},qje=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],Hje=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],Gje=({userId:t,classType:e,onClose:r})=>{var L,I,k,E,j;const[n,a]=T.useState(null),[i,o]=T.useState(!0);if(T.useEffect(()=>{(async()=>{const q=await Ae.getPublicProfile(t);a(q),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=l0(p),x=nW(p),{equipped:y,appearance:S}=zu(n,e),w=UE({gamification:{...c,equipped:y}}),N=c0(y),A=((I=c.classXp)==null?void 0:I[e])||0,R=Object.values(y).filter(Boolean),O=$E(R);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx($n,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(ax,{equipped:y,appearance:S})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[x.name," - Level ",p]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ta,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[A.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ls,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[N," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cs,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:qje.map(({key:C,label:q,color:D,icon:$})=>{const B=w[C]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:$}),s.jsx("span",{className:"text-xs text-gray-400",children:q}),s.jsx("span",{className:`text-sm font-bold ${D} ml-auto`,children:B})]},C)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(ls,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Hje.map(C=>{const q=y[C];if(!q)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:C}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},C);const D=ba(q.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${D.border} ${D.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:C}),s.jsx("div",{className:`text-xs font-bold truncate ${D.text}`,children:q.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:q.rarity})]},C)})})]}),O.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Vf,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),O.map(({set:C,activeBonus:q})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:C.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[q.label,": ",q.effects.map(D=>`+${D.value} ${D.stat}`).join(", ")]})]},C.id))]}),(((k=c.unlockedAchievements)==null?void 0:k.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(cl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(E=c.unlockedAchievements)==null?void 0:E.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(j=c.unlockedAchievements)==null?void 0:j.slice(0,12).map(C=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:C.replace(/_/g," ")},C))})]})]})})},Wje=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),Kje=({user:t})=>{var m;const[e,r]=T.useState([]),[n,a]=T.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Mr.AP_PHYSICS),[i,o]=T.useState(!0),[c,d]=T.useState(null);T.useEffect(()=>{const x=Ae.subscribeToLeaderboard(y=>{r(y),o(!1)});return()=>x()},[]);const h=T.useMemo(()=>{const x=t.enrolledClasses||[];if(x.length>0)return x.sort();const y=new Set;return e.forEach(S=>{var w;return(w=S.enrolledClasses)==null?void 0:w.forEach(N=>y.add(N))}),Array.from(y).sort()},[t.enrolledClasses,e]),p=T.useMemo(()=>e.filter(x=>{var y;return(y=x.enrolledClasses)==null?void 0:y.includes(n)}).sort((x,y)=>{var N,A,R,O;const S=((A=(N=x.gamification)==null?void 0:N.classXp)==null?void 0:A[n])||0;return(((O=(R=y.gamification)==null?void 0:R.classXp)==null?void 0:O[n])||0)-S}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:x=>a(x.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(x=>s.jsx("option",{value:x,children:x},x)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(Ei,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(Wje,{}):s.jsxs(s.Fragment,{children:[p.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(x=>{var E,j,C,q;const y=p[x];if(!y)return null;const S=(E=y.settings)==null?void 0:E.privacyMode,w=S?((j=y.gamification)==null?void 0:j.codename)||"Unknown Agent":y.name,N=((q=(C=y.gamification)==null?void 0:C.classXp)==null?void 0:q[n])||0,A=Math.floor(N/1e3)+1,R=l0(A),O=x===0,L=["h-28","h-20","h-16"],I=["w-20 h-20","w-14 h-14","w-14 h-14"],k=[{icon:s.jsx(cl,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(Ty,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(Ty,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${O?"order-2":x===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+x*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${O?"mb-3":""}`,children:[s.jsx("div",{className:`${I[x]} rounded-full p-0.5 bg-white/10 ring-2 ${k[x].ring} relative ${O?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${R.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${k[x].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:k[x].icon})]}),s.jsxs("div",{className:`text-center ${O?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${O?"text-sm text-white":"text-xs text-gray-300"} ${S?"italic":""}`,children:w}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${O?"text-xl":"text-base"}`,children:N.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${R.tierColor.split(" ")[1]}`,children:R.rankName}),s.jsxs("button",{onClick:()=>d(y.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(s0,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${L[x]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${x===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":x===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},y.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((x,y)=>{var L,I,k,E;const S=p.length>=3?y+3:y,w=(L=x.settings)==null?void 0:L.privacyMode,N=w?((I=x.gamification)==null?void 0:I.codename)||"Unknown Agent":x.name,A=((E=(k=x.gamification)==null?void 0:k.classXp)==null?void 0:E[n])||0,R=Math.floor(A/1e3)+1,O=l0(R);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*S}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[S<3&&S===0&&s.jsx(cl,{className:"w-6 h-6 text-yellow-400 mx-auto"}),S<3&&S===1&&s.jsx(Ty,{className:"w-6 h-6 text-gray-300 mx-auto"}),S<3&&S===2&&s.jsx(Ty,{className:"w-6 h-6 text-amber-600 mx-auto"}),S>=3&&`#${S+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:x.avatarUrl,alt:N,className:`w-full h-full rounded-full border-2 ${O.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:R})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${w?"text-purple-300 italic":"text-white"}`,children:[N,w&&s.jsx(tf,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${O.tierColor.split(" ")[1]}`,children:O.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:A.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(x.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(s0,{className:"w-4 h-4"})})]},x.id)}),p.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx($i,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(Gje,{userId:c,classType:n,onClose:()=>d(null)})]})};class Xje extends ie.Component{constructor(r){super(r);jO(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(eb,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const wV={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(rl,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx(fE,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(Vf,{className:"w-4 h-4"})}},Qje={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},lT=3;function cT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const Yje=({assignment:t})=>{const e=Qa(),[r,n]=T.useState([]),[a,i]=T.useState([]),[o,c]=T.useState(!0),[d,h]=T.useState(!1),[p,m]=T.useState({}),[x,y]=T.useState(1),[S,w]=T.useState(null),[N,A]=T.useState(new Set),R=T.useRef({engagementTime:0}),O=T.useRef(Date.now());T.useEffect(()=>{const V=setInterval(()=>{Date.now()-O.current<6e4&&(R.current.engagementTime+=1)},1e3);return()=>clearInterval(V)},[]),T.useEffect(()=>{const V=()=>{O.current=Date.now()},W=["mousemove","keydown","scroll","click"];return W.forEach(G=>window.addEventListener(G,V)),()=>W.forEach(G=>window.removeEventListener(G,V))},[]),T.useEffect(()=>()=>{var W;const V=R.current.engagementTime;if(V>=5){const G=(W=vT().currentUser)==null?void 0:W.uid;G&&Ae.submitReviewEngagement(G,t.id,t.title,t.classType,V).catch(()=>{})}},[t.id,t.title,t.classType]);const L=T.useCallback(V=>{const W=cT(V.filter(re=>re.tier===1),lT),G=cT(V.filter(re=>re.tier===2),lT),Y=cT(V.filter(re=>re.tier===3),lT);i([...W,...G,...Y]),m({}),w(null)},[]);T.useEffect(()=>{(async()=>{var W;c(!0),h(!1);try{const G=await qa(ct(Me,"question_banks",t.id));if(!G.exists()){h(!0);return}const Y=G.data().questions||[];n(Y),L(Y)}catch(G){console.error("Failed to load question bank:",G),h(!0);return}finally{c(!1)}try{const G=(W=vT().currentUser)==null?void 0:W.uid;if(G){const Y=await qa(ct(Me,"review_progress",`${G}_${t.id}`));Y.exists()&&A(new Set(Y.data().answeredQuestions||[]))}}catch(G){console.warn("Could not load review progress:",G)}})()},[t.id,L]);const I=()=>{r.length>0&&L(r)},k=(V,W,G)=>{const Y=p[V];if(!(Y!=null&&Y.submitted))if(G==="multiple_select"||G==="ranking"){const re=(Y==null?void 0:Y.selected)||[],ce=re.includes(W)?re.filter(de=>de!==W):[...re,W];m(de=>({...de,[V]:{...de[V],selected:ce,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(re=>({...re,[V]:{selected:W,submitted:!1,correct:!1,xpAwarded:!1}}))},E=(V,W)=>{var G;(G=p[V])!=null&&G.submitted||m(Y=>({...Y,[V]:{...Y[V],linkedSelected:W}}))},j=async V=>{const W=p[V.id];if(!(W!=null&&W.selected))return;let G=!1;if(V.type==="multiple_select"||V.type==="ranking"){const Y=W.selected,re=V.correctAnswer;G=Y.length===re.length&&Y.every((ce,de)=>ce===re[de])}else V.type==="linked_mc"?G=W.selected===V.correctAnswer&&(!V.linkedFollowUp||W.linkedSelected===V.linkedFollowUp.correctAnswer):G=W.selected===V.correctAnswer;if(G)if(N.has(V.id))m(Y=>({...Y,[V.id]:{...Y[V.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(Y=>({...Y,[V.id]:{...Y[V.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await WT({assignmentId:t.id,questionId:V.id,xpAmount:V.xp,classType:t.classType})).data.awarded?(e.success(`+${V.xp} XP earned!`),m(ce=>({...ce,[V.id]:{...ce[V.id],submitted:!0,correct:!0,xpAwarded:!0}})),A(ce=>new Set([...ce,V.id]))):e.success("Correct! (XP already claimed)")}catch(Y){console.error("XP award error:",Y)}}else{const Y=Math.ceil(V.xp/2);m(re=>({...re,[V.id]:{...re[V.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:Y}})),e.error(`-${Y} XP penalty`);try{await Koe({assignmentId:t.id,questionId:V.id,classType:t.classType})}catch(re){console.error("Penalty error:",re)}}},C=T.useMemo(()=>a.filter(V=>V.tier===x),[a,x]),q=T.useMemo(()=>Object.entries(p).filter(([,V])=>V.correct&&V.xpAwarded).reduce((V,[W])=>{var G;return V+(((G=a.find(Y=>Y.id===W))==null?void 0:G.xp)||0)},0),[p,a]),D=T.useMemo(()=>Object.values(p).reduce((V,W)=>V+(W.penalty||0),0),[p]),$=T.useMemo(()=>a.reduce((V,W)=>V+W.xp,0),[a]),B=T.useMemo(()=>a.length>0&&a.every(V=>{var W;return(W=p[V.id])==null?void 0:W.submitted}),[a,p]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(no,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(rl,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rl,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ta,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:q}),D>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",D]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",$," XP"]})]}),s.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(eb,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(V=>{const W=wV[V],G=a.filter(ce=>ce.tier===V),Y=G.filter(ce=>{var de;return(de=p[ce.id])==null?void 0:de.submitted}).length,re=G.filter(ce=>{var de;return(de=p[ce.id])==null?void 0:de.correct}).length;return s.jsxs("button",{onClick:()=>y(V),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${x===V?`${W.bg} ${W.color} ${W.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[W.icon,s.jsx("span",{className:"hidden sm:inline",children:W.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",V]}),Y>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${re===G.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[re,"/",G.length]})]},V)})}),B&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:I,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(eb,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[C.map((V,W)=>{const G=p[V.id],Y=S===V.id,re=G==null?void 0:G.submitted,ce=G==null?void 0:G.correct,de=wV[V.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${re?ce?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Y?`${de.border} ${de.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>w(Y?null:V.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${re?ce?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${de.bg} ${de.color}`}`,children:re?ce?s.jsx(gn,{className:"w-4 h-4"}):s.jsx(Co,{className:"w-4 h-4"}):W+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${de.color}`,children:V.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:Qje[V.type]||V.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(ta,{className:"w-3 h-3"}),V.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(V.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:V.stem})]}),s.jsx(nl,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Y?"rotate-90":""}`})]}),Y&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[V.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:V.context}),V.type==="ranking"?s.jsx(eAe,{question:V,answer:G,onSelect:k}):V.type==="multiple_select"?s.jsx(Zje,{question:V,answer:G,onSelect:k}):s.jsx(Jje,{question:V,answer:G,onSelect:k}),V.type==="linked_mc"&&V.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:V.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:V.linkedFollowUp.options.map(X=>{const ae=(G==null?void 0:G.linkedSelected)===X.id,ne=re,ve=X.id===V.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>E(V.id,X.id),disabled:re,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ne?ve?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ae?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ae?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[X.id.toUpperCase(),"."]})," ",X.text]},X.id)})})]}),re?s.jsxs("div",{className:`p-4 rounded-xl border ${ce?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ce?s.jsx(gn,{className:"w-5 h-5 text-emerald-400"}):s.jsx(Co,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${ce?"text-emerald-400":"text-red-400"}`,children:ce?`Correct! +${V.xp} XP`:`Incorrect  ${(G==null?void 0:G.penalty)||Math.ceil(V.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:V.explanation})]}):s.jsx("button",{onClick:()=>j(V),disabled:!(G!=null&&G.selected)||Array.isArray(G==null?void 0:G.selected)&&G.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},V.id)}),C.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(tf,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},Jje=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),Zje=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx(gn,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},eAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(H2,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(p=>p.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function tAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${ob.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return ob.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const rAe=({assignment:t,onComplete:e})=>{const[r,n]=T.useState(null),[a,i]=T.useState(!0),[o,c]=T.useState(!1),d=T.useRef(Kv()),h=T.useRef(Date.now()),p=T.useRef(e),[m,x]=T.useState(!0),[y,S]=T.useState(0);T.useEffect(()=>{p.current=e},[e]);const w=T.useCallback(()=>{h.current=Date.now(),m||x(!0)},[m]);T.useEffect(()=>{const A=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,S(d.current.engagementTime),m||x(!0)):m&&x(!1)},1e3);return()=>clearInterval(A)},[m]),T.useEffect(()=>{const A=["mousemove","keydown","scroll","click"];return A.forEach(R=>window.addEventListener(R,w)),()=>{A.forEach(R=>window.removeEventListener(R,w))}},[w]),T.useEffect(()=>()=>{p.current(d.current)},[]),T.useEffect(()=>{(async()=>{i(!0);try{const R=await qa(ct(Me,"reading_materials",t.id));R.exists()?n(R.data()):c(!0)}catch(R){console.error("Failed to load reading material:",R),c(!0)}finally{i(!1)}})()},[t.id]);const N=T.useMemo(()=>r?r.sections.map(A=>({title:A.title,html:tAe(A.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(no,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(vi,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(dE,{className:"w-4 h-4"}):s.jsx(Ps,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Mo,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:w,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:N.map((A,R)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:R+1}),A.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:A.html}})]},R))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(vi,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},nAe=({user:t})=>{const[e,r]=T.useState(!1),[n,a]=T.useState(""),[i,o]=T.useState("bug"),[c,d]=T.useState(!1),[h,p]=T.useState(!1),m=async()=>{if(n.trim()){d(!0);try{await Ae.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),p(!0),setTimeout(()=>{p(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(Qv,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:x=>x.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(dc,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Qv,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx($n,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(x=>s.jsx("button",{onClick:()=>o(x),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===x?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:x==="bug"?"Bug":x==="feature"?"Feature Request":"Other"},x))}),s.jsx("textarea",{value:n,onChange:x=>a(x.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:m,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(gE,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},aAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},iAe=({userId:t,streakData:e,compact:r})=>{var h,p;const[n,a]=T.useState(e||null),[i,o]=T.useState(null);if(T.useEffect(()=>{(async()=>{try{const x=await Ae.updateDailyStreak(t);x.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):x.newMilestone&&(o({message:`${x.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),T.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Cu,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((m,x)=>s.jsx(b3,{className:"w-3 h-3 text-cyan-400"},x))})]});const d=Array.from({length:7}).map((m,x)=>{var A;const y=new Date(Date.now()-(6-x)*864e5).toISOString().split("T")[0],S=(A=n.streakHistory)==null?void 0:A.includes(y),w=y===new Date().toISOString().split("T")[0],N=new Date(y).toLocaleDateString("en-US",{weekday:"narrow"});return{date:y,isActive:S,isToday:w,dayLabel:N}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(b3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(cl,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cu,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((m,x)=>s.jsx(b3,{className:`w-5 h-5 ${x<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},x))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(m=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:m.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${m.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":m.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:m.isActive?s.jsx(Cu,{className:"w-3.5 h-3.5"}):""})]},m.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(p=n.milestones)==null?void 0:p.map(m=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${aAe[m]||"text-white"}`,children:[m,"d"]},m))})]})]})},sAe=({classConfigs:t,availableSections:e})=>{const r=Qa(),{confirm:n}=Do(),[a,i]=T.useState([]),[o,c]=T.useState(!1),[d,h]=T.useState(Mr.AP_PHYSICS),[p,m]=T.useState(""),[x,y]=T.useState(""),[S,w]=T.useState(null);T.useEffect(()=>{const k=Ae.subscribeToEnrollmentCodes(i);return()=>k()},[]);const N=async()=>{const k=await Ae.createEnrollmentCode(d,p||void 0,x?parseInt(x):void 0);r.success(`Code created: ${k}`),c(!1),m(""),y("")},A=(k,E)=>{navigator.clipboard.writeText(k),w(E),setTimeout(()=>w(null),2e3)},R=async k=>{await n({message:"Deactivate this enrollment code?",confirmLabel:"Deactivate"})&&await Ae.deactivateEnrollmentCode(k)},O=t&&t.length>0?t.map(k=>k.className):Object.values(Mr).filter(k=>k!=="Uncategorized"),L=a.filter(k=>k.isActive),I=a.filter(k=>!k.isActive);return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(dg,{className:"w-5 h-5 text-emerald-400"}),"Enrollment Codes"]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Bn,{className:"w-3.5 h-3.5"})," Generate Code"]})]}),o&&s.jsxs("div",{className:"mb-5 p-4 bg-black/20 border border-white/10 rounded-xl space-y-3 animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("select",{value:d,onChange:k=>h(k.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:O.map(k=>s.jsx("option",{value:k,children:k},k))}),s.jsxs("select",{value:p,onChange:k=>m(k.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"",children:"No Section"}),e.map(k=>s.jsx("option",{value:k,children:k},k))]})]}),s.jsxs("div",{className:"flex gap-3 items-center",children:[s.jsx("input",{type:"number",min:"1",placeholder:"Max uses (unlimited if empty)",value:x,onChange:k=>y(k.target.value),className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-emerald-500/50"}),s.jsx("button",{onClick:N,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx($n,{className:"w-4 h-4"})})]})]}),L.length===0&&!o?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(dg,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active enrollment codes. Generate one to let students self-enroll."]}):s.jsx("div",{className:"space-y-2",children:L.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 border border-white/10 rounded-xl group hover:border-emerald-500/20 transition",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("code",{className:"text-lg font-mono font-bold text-emerald-400 tracking-widest",children:k.code}),s.jsx("span",{className:"text-xs text-gray-500",children:k.classType}),k.section&&s.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded",children:k.section})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[10px] text-gray-500",children:[k.usedCount," used",k.maxUses?` / ${k.maxUses}`:""]}),s.jsx("button",{onClick:()=>A(k.code,k.id),className:"p-1.5 text-gray-500 hover:text-white transition",title:"Copy code",children:S===k.id?s.jsx(_o,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(K2,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>R(k.id),className:"p-1.5 text-gray-500 hover:text-red-400 transition",title:"Deactivate",children:s.jsx(vle,{className:"w-3.5 h-3.5"})})]})]},k.id))}),I.length>0&&s.jsxs("details",{className:"mt-4",children:[s.jsxs("summary",{className:"text-[10px] text-gray-500 cursor-pointer hover:text-gray-300 uppercase tracking-widest font-bold",children:[I.length," expired code",I.length!==1?"s":""]}),s.jsx("div",{className:"mt-2 space-y-1",children:I.map(k=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/10 border border-white/5 rounded-lg opacity-50",children:[s.jsx("code",{className:"text-sm font-mono text-gray-500",children:k.code}),s.jsxs("span",{className:"text-[10px] text-gray-600",children:[k.classType," | ",k.usedCount," used"]})]},k.id))})]})]})},oAe={Textbook:s.jsx(vi,{className:"w-3 h-3"}),Simulation:s.jsx(dE,{className:"w-3 h-3"}),"Lab Guide":s.jsx(_x,{className:"w-3 h-3"}),"Practice Set":s.jsx(cs,{className:"w-3 h-3"}),Article:s.jsx(WH,{className:"w-3 h-3"}),"Video Lesson":s.jsx(YH,{className:"w-3 h-3"}),Supplemental:s.jsx(Q2,{className:"w-3 h-3"})},mY=[{type:"TEXT",label:"Text",icon:s.jsx(Qle,{className:"w-4 h-4"}),description:"Plain text content",category:"Content"},{type:"SECTION_HEADER",label:"Section Header",icon:s.jsx(qH,{className:"w-4 h-4"}),description:"Section title & subtitle",category:"Content"},{type:"IMAGE",label:"Image",icon:s.jsx(HH,{className:"w-4 h-4"}),description:"Image with caption",category:"Content"},{type:"VIDEO",label:"Video",icon:s.jsx(Uf,{className:"w-4 h-4"}),description:"YouTube embed",category:"Content"},{type:"OBJECTIVES",label:"Objectives",icon:s.jsx(cs,{className:"w-4 h-4"}),description:"Learning objectives",category:"Content"},{type:"DIVIDER",label:"Divider",icon:s.jsx(mE,{className:"w-4 h-4"}),description:"Separator line",category:"Content"},{type:"EXTERNAL_LINK",label:"External Link",icon:s.jsx(hE,{className:"w-4 h-4"}),description:"Styled link card",category:"Content"},{type:"EMBED",label:"Embed",icon:s.jsx(UH,{className:"w-4 h-4"}),description:"iFrame embed",category:"Content"},{type:"INFO_BOX",label:"Info Box",icon:s.jsx(X2,{className:"w-4 h-4"}),description:"Tip, warning, or note",category:"Content"},{type:"VOCABULARY",label:"Vocabulary",icon:s.jsx(vi,{className:"w-4 h-4"}),description:"Term & definition",category:"Interactive"},{type:"VOCAB_LIST",label:"Vocab List",icon:s.jsx(Rle,{className:"w-4 h-4"}),description:"Multiple terms",category:"Interactive"},{type:"ACTIVITY",label:"Activity",icon:s.jsx(ta,{className:"w-4 h-4"}),description:"Activity instructions",category:"Interactive"},{type:"CHECKLIST",label:"Checklist",icon:s.jsx(pE,{className:"w-4 h-4"}),description:"Task list",category:"Interactive"},{type:"SORTING",label:"Sorting",icon:s.jsx(H2,{className:"w-4 h-4"}),description:"Categorize items",category:"Interactive"},{type:"DATA_TABLE",label:"Data Table",icon:s.jsx(QH,{className:"w-4 h-4"}),description:"Editable table",category:"Interactive"},{type:"BAR_CHART",label:"Bar Chart",icon:s.jsx(S0,{className:"w-4 h-4"}),description:"Interactive chart",category:"Interactive"},{type:"MC",label:"Multiple Choice",icon:s.jsx(W2,{className:"w-4 h-4"}),description:"Question with options",category:"Questions"},{type:"SHORT_ANSWER",label:"Short Answer",icon:s.jsx(rf,{className:"w-4 h-4"}),description:"Free-text question",category:"Questions"},{type:"RANKING",label:"Ranking",icon:s.jsx(ug,{className:"w-4 h-4"}),description:"Reorder items",category:"Questions"},{type:"LINKED",label:"Linked Question",icon:s.jsx(Yv,{className:"w-4 h-4"}),description:"Follow-up question",category:"Questions"}],VA=()=>`block_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,lAe=t=>{const e={id:VA(),type:t,content:""};switch(t){case"MC":return{...e,options:["",""],correctAnswer:0};case"SHORT_ANSWER":return{...e,acceptedAnswers:[""]};case"VOCABULARY":return{...e,term:"",definition:""};case"CHECKLIST":return{...e,items:[""]};case"INFO_BOX":return{...e,variant:"note"};case"SECTION_HEADER":return{...e,icon:"",title:"",subtitle:""};case"IMAGE":return{...e,url:"",caption:"",alt:""};case"VIDEO":return{...e,url:"",caption:""};case"OBJECTIVES":return{...e,title:"Learning Objectives",items:[""]};case"DIVIDER":return e;case"EXTERNAL_LINK":return{...e,title:"",url:"",buttonLabel:"Open",openInNewTab:!0};case"EMBED":return{...e,url:"",caption:"",height:500};case"VOCAB_LIST":return{...e,terms:[{term:"",definition:""}]};case"ACTIVITY":return{...e,icon:"",title:"",instructions:""};case"SORTING":return{...e,title:"",instructions:"",leftLabel:"Category A",rightLabel:"Category B",sortItems:[{text:"",correct:"left"}]};case"DATA_TABLE":return{...e,title:"",columns:[{key:"col1",label:"Column 1",editable:!0}],trials:3};case"BAR_CHART":return{...e,title:"",barCount:3,initialLabel:"Initial",finalLabel:"Final",deltaLabel:"Change",height:300};case"RANKING":return{...e,items:[""]};case"LINKED":return{...e,linkedBlockId:"",acceptedAnswers:[""]};default:return e}},cAe=({onSelect:t,onClose:e})=>{const r=["Content","Interactive","Questions"];return s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-1 bg-[#1a1b26] border border-white/10 rounded-2xl shadow-2xl p-3 z-50 w-[480px] max-h-[50vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:r.map(n=>s.jsxs("div",{className:"mb-2 last:mb-0",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest px-2 mb-1",children:n}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:mY.filter(a=>a.category===n).map(a=>s.jsxs("button",{type:"button",onClick:()=>{t(a.type),e()},className:"flex items-center gap-2 p-2 rounded-lg text-left hover:bg-white/5 transition group",children:[s.jsx("span",{className:"text-gray-500 group-hover:text-purple-400 transition",children:a.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] font-bold text-gray-300",children:a.label}),s.jsx("div",{className:"text-[9px] text-gray-600",children:a.description})]})]},a.type))})]},n))})},SV=({onInsert:t})=>{const[e,r]=T.useState(!1);return s.jsxs("div",{className:"relative flex items-center justify-center py-1 group",children:[s.jsx("div",{className:"absolute inset-x-0 top-1/2 h-px bg-white/5 group-hover:bg-purple-500/20 transition"}),s.jsx("button",{type:"button",onClick:()=>r(!e),className:"relative z-10 w-7 h-7 rounded-full bg-[#1a1b26] border border-white/10 hover:border-purple-500/40 hover:bg-purple-500/10 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(Bn,{className:"w-3.5 h-3.5 text-gray-500 group-hover:text-purple-400"})}),e&&s.jsx(cAe,{onSelect:t,onClose:()=>r(!1)})]})},uAe=t=>{switch(t.type){case"TEXT":return t.content.slice(0,80)||"Empty text";case"MC":return t.content.slice(0,60)||"Multiple choice question";case"SHORT_ANSWER":return t.content.slice(0,60)||"Short answer question";case"VOCABULARY":return t.term||"Vocabulary term";case"CHECKLIST":return t.content||`${(t.items||[]).length} items`;case"INFO_BOX":return`${t.variant}: ${t.content.slice(0,50)}`;case"SECTION_HEADER":return`${t.icon||""} ${t.title||"Section"}`.trim();case"IMAGE":return t.caption||t.alt||"Image";case"VIDEO":return t.caption||"Video";case"OBJECTIVES":return t.title||"Objectives";case"DIVIDER":return"";case"EXTERNAL_LINK":return t.title||"Link";case"EMBED":return t.caption||"Embed";case"VOCAB_LIST":return`${(t.terms||[]).length} terms`;case"ACTIVITY":return t.title||"Activity";case"SORTING":return t.title||"Sorting activity";case"DATA_TABLE":return t.title||"Data table";case"BAR_CHART":return t.title||"Bar chart";case"RANKING":return t.content.slice(0,60)||"Ranking question";case"LINKED":return t.content.slice(0,60)||"Linked question";default:return t.type}},dAe=t=>mY.find(e=>e.type===t),NV=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],hAe=({value:t,onChange:e,existingUnits:r})=>{const[n,a]=T.useState(!1),[i,o]=T.useState(""),c=T.useRef(null);T.useEffect(()=>{const p=m=>{c.current&&!c.current.contains(m.target)&&a(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const d=r.filter(p=>p.toLowerCase().includes(i.toLowerCase())),h=i&&!r.some(p=>p.toLowerCase()===i.toLowerCase());return s.jsxs("div",{ref:c,className:"relative",children:[s.jsx("label",{className:pr,children:"Unit"}),s.jsx("input",{type:"text",value:t,onChange:p=>{e(p.target.value),o(p.target.value)},onFocus:()=>{a(!0),o("")},placeholder:"Select or type a unit...",className:er}),n&&r.length>0&&s.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-[#1a1b26] border border-white/10 rounded-xl shadow-2xl max-h-48 overflow-y-auto",children:[d.map(p=>s.jsx("button",{type:"button",onClick:()=>{e(p),a(!1)},className:`w-full text-left px-4 py-2 text-sm hover:bg-purple-500/10 transition ${t===p?"text-purple-300 bg-purple-500/5":"text-gray-300"}`,children:p},p)),d.length===0&&!h&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 italic",children:"No matching units"}),h&&s.jsxs("button",{type:"button",onClick:()=>{e(i),a(!1)},className:"w-full text-left px-4 py-2 text-sm text-emerald-400 hover:bg-emerald-500/10 transition flex items-center gap-2",children:[s.jsx(Bn,{className:"w-3 h-3"}),' Create "',i,'"']})]})]})},fAe=({assignments:t,onClose:e,initialAssignmentId:r,classConfigs:n=[],users:a=[],availableSections:i=[],onCreateAssignment:o})=>{const c=Qa(),d=T.useMemo(()=>{const Re={};return t.sort((Ye,qe)=>Ye.title.localeCompare(qe.title)).forEach(Ye=>{const qe=Ye.unit||"Unassigned";Re[qe]||(Re[qe]=[]),Re[qe].push(Ye)}),Re},[t]),h=T.useMemo(()=>{const Re=Object.values(Mr).filter(qe=>qe!==Mr.UNCATEGORIZED),Ye=(n||[]).map(qe=>qe.className);return Array.from(new Set([...Re,...Ye]))},[n]),p=T.useMemo(()=>a.filter(Re=>Re.role==="STUDENT"),[a]),[m,x]=T.useState(r||null),[y,S]=T.useState(!1),[w,N]=T.useState([]),[A,R]=T.useState(null),[O,L]=T.useState(!1),[I,k]=T.useState(!1),[E,j]=T.useState(""),[C,q]=T.useState(""),[D,$]=T.useState(!1),[B,V]=T.useState(""),[W,G]=T.useState(new Set(Object.keys(d))),[Y,re]=T.useState(!1),[ce,de]=T.useState(!1),[X,ae]=T.useState("All Classes"),[ne,ve]=T.useState("All Categories"),[pe,Be]=T.useState(!1),[Ue,Fe]=T.useState(null),[Ne,He]=T.useState(!1),[Z,te]=T.useState(null),[be,Se]=T.useState(""),[Ze,rt]=T.useState("Unit 1: Overview"),[It,At]=T.useState("Textbook"),[Ft,qt]=T.useState(""),[Dt,tr]=T.useState(null),[he,Ge]=T.useState(new Set([h[0]||Mr.AP_PHYSICS])),[Pt,Ke]=T.useState([]),[it,$t]=T.useState(""),[Nt,kr]=T.useState(""),[ye,ot]=T.useState(!1),mt=T.useMemo(()=>{const Re=Array.from(he)[0];if(!Re)return i;const Ye=nv(p,Re);return Ye.length>0?Ye:i},[he,p,i]),Ct=T.useMemo(()=>{const Re=new Set;return t.forEach(Ye=>{he.has(Ye.classType)&&Ye.unit&&Re.add(Ye.unit)}),Array.from(Re).sort()},[t,he]),vt=T.useMemo(()=>t.find(Re=>Re.id===m)||null,[t,m]),tt=T.useCallback(Re=>{const Ye=t.find(qe=>qe.id===Re);Ye&&(x(Re),S(!1),N(Ye.lessonBlocks||[]),Se(Ye.title),rt(Ye.unit||"Unit 1: Overview"),At(Ye.category||"Textbook"),qt(Ye.description||""),tr(Ye.contentUrl||null),Ge(new Set([Ye.classType])),Ke(Ye.targetSections||[]),$t(Ye.scheduledAt?Ye.scheduledAt.slice(0,16):""),kr(Ye.dueDate?Ye.dueDate.slice(0,16):""),R(null),L(!1),re(!1),de(!1))},[t]),gr=T.useCallback(()=>{x(null),S(!0),N([]),Se(""),rt("Unit 1: Overview"),At("Textbook"),qt(""),tr(null),Ge(new Set([h[0]||Mr.AP_PHYSICS])),Ke([]),$t(""),kr(""),R(null),L(!1),re(!1),de(!0)},[h]);ie.useEffect(()=>{r&&tt(r)},[r,tt]);const Gt=T.useCallback(Re=>{N(Re),re(!0)},[]),Vr=T.useCallback((Re,Ye)=>{const qe=lAe(Ye),hr=[...w];hr.splice(Re,0,qe),Gt(hr),R(qe.id)},[w,Gt]),cn=T.useCallback(Re=>{Gt(w.filter((Ye,qe)=>qe!==Re))},[w,Gt]),yr=T.useCallback((Re,Ye)=>{const qe=Re+Ye;if(qe<0||qe>=w.length)return;const hr=[...w];[hr[Re],hr[qe]]=[hr[qe],hr[Re]],Gt(hr)},[w,Gt]),Qt=T.useCallback(Re=>{const Ye={...w[Re],id:VA()},qe=[...w];qe.splice(Re+1,0,Ye),Gt(qe)},[w,Gt]),Lt=T.useCallback((Re,Ye)=>{const qe={title:be,description:Ft,unit:Ze,category:It,status:Re,lessonBlocks:w,contentUrl:Dt};return Pt.length>0&&(qe.targetSections=Pt),Ye&&(qe.scheduledAt=new Date(Ye).toISOString()),Nt&&(qe.dueDate=new Date(Nt).toISOString()),vt!=null&&vt.id&&!y&&(qe.id=vt.id),qe},[be,Ft,Ze,It,w,Dt,Pt,Nt,vt,y]),bt=T.useCallback(async(Re,Ye)=>{if(!be.trim()){c.error("Title is required.");return}if(he.size===0){c.error("Select a target class.");return}$(!0);try{const qe=Lt(Re,Ye);if(o)vt!=null&&vt.id&&!y?await o({...qe,classType:Array.from(he)[0]}):await Promise.all(Array.from(he).map(hr=>o({...qe,classType:hr})));else for(const hr of Array.from(he))await Ae.addAssignment({...qe,classType:hr});c.success(Re===Ts.DRAFT?"Draft saved.":Ye?"Deployment scheduled.":"Resource deployed!"),re(!1),S(!1)}catch(qe){c.error("Save failed."),console.error(qe)}finally{$(!1)}},[be,he,Lt,o,vt,y,c]),Fr=T.useCallback(async()=>{if(!(!vt&&!y)){if(y){await bt(Ts.ACTIVE);return}$(!0);try{const Re=Lt(vt.status);await Ae.addAssignment({...vt,...Re}),c.success("Saved!"),re(!1)}catch(Re){c.error("Failed to save."),console.error(Re)}finally{$(!1)}}},[vt,y,bt,Lt,c]),tn=T.useCallback(()=>{q("");try{const Re=JSON.parse(E);let Ye;if(Array.isArray(Re))Ye=Re;else if(Re!=null&&Re.blocks&&Array.isArray(Re.blocks))Ye=Re.blocks;else{q("JSON must be an array of blocks or { blocks: [...] }");return}Ye=Ye.map(qe=>{if(!qe.type)throw new Error('Block missing "type" field');return{...qe,id:qe.id||VA(),content:qe.content??""}}),Gt([...w,...Ye]),k(!1),j(""),c.success(`${Ye.length} blocks imported!`)}catch(Re){q(Re instanceof Error?Re.message:"Invalid JSON")}},[E,w,Gt,c]),Dr=T.useMemo(()=>{const Re={},Ye=B.toLowerCase();return Object.entries(d).forEach(([qe,hr])=>{const Hr=hr.filter(_r=>!(B&&!_r.title.toLowerCase().includes(Ye)&&!qe.toLowerCase().includes(Ye)||X!=="All Classes"&&_r.classType!==X||ne!=="All Categories"&&_r.category!==ne));Hr.length>0&&(Re[qe]=Hr)}),Re},[d,B,X,ne]),Cr=T.useCallback(async Re=>{try{await Ae.updateAssignmentStatus(Re,Ts.ACTIVE),c.success("Resource deployed!")}catch{c.error("Deploy failed.")}},[c]),xn=T.useCallback(async(Re,Ye)=>{try{const qe=Ye===Ts.ARCHIVED?Ts.ACTIVE:Ts.ARCHIVED;await Ae.updateAssignmentStatus(Re,qe),c.success(qe===Ts.ARCHIVED?"Archived.":"Restored.")}catch{c.error("Status change failed.")}},[c]),dr=T.useCallback(async Re=>{if(window.confirm("Delete this resource permanently?"))try{await Ae.deleteAssignment(Re),m===Re&&(x(null),S(!1)),c.success("Resource deleted.")}catch{c.error("Delete failed.")}},[m,c]),Qn=T.useMemo(()=>{var Re;if(X!=="All Classes")return(Re=n==null?void 0:n.find(Ye=>Ye.className===X))==null?void 0:Re.unitOrder},[X,n]),un=T.useCallback(async()=>{if(!(!Ue||X==="All Classes")){He(!0);try{const Re=n==null?void 0:n.find(Ye=>Ye.className===X);Re?await Ae.saveClassConfig({...Re,unitOrder:Ue}):await Ae.saveClassConfig({id:X,className:X,unitOrder:Ue,features:{physicsLab:!1,evidenceLocker:!1,leaderboard:!1,physicsTools:!1,communications:!1}}),c.success("Unit order saved!"),Fe(null),Be(!1)}catch{c.error("Failed to save unit order.")}finally{He(!1)}}},[Ue,X,n,c]),dn=vt!==null||y;return s.jsxs("div",{className:"fixed inset-0 z-[9999] bg-[#0f0720] flex flex-col",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md border-b border-white/10 px-6 py-3 flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h1",{className:"text-lg font-black text-white tracking-tight flex items-center gap-2",children:[s.jsx(vi,{className:"w-5 h-5 text-purple-400"})," Resource Editor"]}),dn&&s.jsxs("span",{className:"text-xs text-gray-400 bg-white/5 px-3 py-1 rounded-lg border border-white/10",children:[y?"New Resource":be,Y&&s.jsx("span",{className:"ml-2 text-amber-400",children:"*unsaved"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>k(!I),className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(nf,{className:"w-3 h-3"})," Paste JSON"]}),dn&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>de(!ce),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${ce?"text-amber-300 bg-amber-500/20 border-amber-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(o0,{className:"w-3 h-3"})," Settings"]}),s.jsxs("button",{type:"button",onClick:()=>L(!O),className:`flex items-center gap-1.5 text-[10px] px-3 py-1.5 rounded-lg border uppercase font-bold tracking-wider transition ${O?"text-purple-300 bg-purple-500/20 border-purple-500/30":"text-gray-300 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(s0,{className:"w-3 h-3"})," ",O?"Edit":"Preview"]}),s.jsxs("button",{type:"button",onClick:Fr,disabled:D||!Y,className:"flex items-center gap-1.5 text-[10px] text-emerald-300 bg-emerald-500/10 hover:bg-emerald-500/20 disabled:opacity-40 px-3 py-1.5 rounded-lg border border-emerald-500/20 uppercase font-bold tracking-wider transition",children:[s.jsx(hg,{className:"w-3 h-3"})," ",D?"Saving...":"Save"]})]}),s.jsx("div",{className:"w-px h-6 bg-white/10"}),s.jsx("button",{type:"button",onClick:e,className:"p-2 text-gray-400 hover:text-white transition",children:s.jsx($n,{className:"w-5 h-5"})})]})]}),I&&s.jsx("div",{className:"bg-black/60 border-b border-white/10 px-6 py-4 shrink-0",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-3",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["Paste a JSON array of blocks or ",s.jsx("code",{className:"text-purple-300",children:"{ blocks: [...] }"})]}),s.jsx("textarea",{value:E,onChange:Re=>{j(Re.target.value),q("")},placeholder:'[{"type":"TEXT","content":"Hello"}]',className:"w-full bg-black/30 border border-white/10 rounded-xl p-3 text-xs font-mono text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition min-h-[120px]"}),C&&s.jsx("div",{className:"text-xs text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg p-2",children:C}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:tn,disabled:!E.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Import"}),s.jsx("button",{type:"button",onClick:()=>{k(!1),j(""),q("")},className:"px-4 py-2 text-gray-400 hover:text-white text-xs transition",children:"Cancel"})]})]})}),s.jsxs("div",{className:"flex flex-1 min-h-0",children:[s.jsxs("div",{className:"w-80 border-r border-white/10 bg-black/20 flex flex-col shrink-0",children:[s.jsxs("div",{className:"p-3 border-b border-white/5 space-y-2",children:[s.jsxs("button",{onClick:gr,className:"w-full bg-purple-600 hover:bg-purple-500 text-white px-4 py-2.5 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition shadow-lg cursor-pointer",children:[s.jsx(Bn,{className:"w-4 h-4"})," New Resource"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Tx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",value:B,onChange:Re=>V(Re.target.value),placeholder:"Search resources...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[s.jsxs("select",{value:X,onChange:Re=>ae(Re.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-gray-300 font-bold focus:outline-none focus:border-purple-500/50 transition cursor-pointer",children:[s.jsx("option",{value:"All Classes",children:"All Classes"}),h.map(Re=>s.jsx("option",{value:Re,children:Re},Re))]}),s.jsxs("select",{value:ne,onChange:Re=>ve(Re.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-gray-300 font-bold focus:outline-none focus:border-purple-500/50 transition cursor-pointer",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),NV.map(Re=>s.jsx("option",{value:Re,children:Re},Re))]})]}),X!=="All Classes"&&Object.keys(Dr).length>1&&s.jsxs("button",{onClick:()=>{if(!pe){const Re=dj(Object.keys(Dr),Qn);Fe(Re)}Be(!pe)},className:`w-full flex items-center justify-center gap-1.5 text-[10px] font-bold px-3 py-1.5 rounded-lg border transition cursor-pointer ${pe?"text-amber-300 bg-amber-500/20 border-amber-500/30":"text-gray-400 bg-white/5 border-white/10 hover:text-white"}`,children:[s.jsx(H2,{className:"w-3 h-3"})," Reorder Units"]})]}),pe&&Ue&&s.jsxs("div",{className:"border-b border-white/5 p-3 bg-amber-500/5 space-y-2",children:[s.jsxs("div",{className:"text-[9px] font-bold text-amber-300 uppercase tracking-widest",children:["Unit Order  ",X]}),s.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar",children:Ue.map((Re,Ye)=>s.jsxs("div",{className:"flex items-center gap-1.5 bg-black/30 border border-white/5 rounded-lg px-2 py-1.5",children:[s.jsx("span",{className:"text-[9px] text-gray-600 font-mono w-4 text-right",children:Ye+1}),s.jsx("span",{className:"text-[10px] text-gray-300 truncate flex-1",children:Re}),s.jsx("button",{disabled:Ye===0,onClick:()=>{const qe=[...Ue];[qe[Ye],qe[Ye-1]]=[qe[Ye-1],qe[Ye]],Fe(qe)},className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20 transition cursor-pointer",children:s.jsx(ef,{className:"w-3 h-3"})}),s.jsx("button",{disabled:Ye===Ue.length-1,onClick:()=>{const qe=[...Ue];[qe[Ye],qe[Ye+1]]=[qe[Ye+1],qe[Ye]],Fe(qe)},className:"p-0.5 text-gray-600 hover:text-white disabled:opacity-20 transition cursor-pointer",children:s.jsx(Ei,{className:"w-3 h-3"})})]},Re))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:un,disabled:Ne,className:"flex-1 text-[10px] font-bold text-amber-300 bg-amber-500/20 border border-amber-500/30 py-1.5 rounded-lg hover:bg-amber-500/30 transition cursor-pointer disabled:opacity-40",children:Ne?"Saving...":"Save Order"}),s.jsx("button",{onClick:()=>{Be(!1),Fe(null)},className:"text-[10px] text-gray-500 hover:text-white px-3 py-1.5 rounded-lg transition cursor-pointer",children:"Cancel"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[(()=>{const Re=X!=="All Classes"?Qn:void 0;return dj(Object.keys(Dr),Re).map(qe=>[qe,Dr[qe]])})().map(([Re,Ye])=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>G(qe=>{const hr=new Set(qe);return hr.has(Re)?hr.delete(Re):hr.add(Re),hr}),className:"w-full flex items-center gap-2 px-2 py-1.5 text-left hover:bg-white/5 rounded-lg transition cursor-pointer",children:[W.has(Re)?s.jsx(Ei,{className:"w-3 h-3 text-gray-500"}):s.jsx(nl,{className:"w-3 h-3 text-gray-500"}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest truncate flex-1",children:Re}),s.jsx("span",{className:"text-[9px] text-gray-600 font-mono",children:Ye.length})]}),W.has(Re)&&Ye.map(qe=>{const hr=qe.lessonBlocks&&qe.lessonBlocks.length>0,Hr=!!qe.contentUrl,_r=Z===qe.id,rn=qe.status===Ts.DRAFT,yn=qe.status===Ts.ARCHIVED,pa=!!qe.scheduledAt&&new Date(qe.scheduledAt)>new Date,ma=qe.category?oAe[qe.category]:null;return s.jsxs("div",{onMouseEnter:()=>te(qe.id),onMouseLeave:()=>te(null),className:`relative ml-2 rounded-lg transition ${yn?"opacity-50":""} ${m===qe.id?"bg-purple-500/20 border border-purple-500/30":"hover:bg-white/5 border border-transparent"}`,children:[s.jsxs("button",{onClick:()=>tt(qe.id),className:`w-full flex items-center gap-2 px-3 py-2 text-left text-[11px] cursor-pointer ${m===qe.id?"text-purple-300":"text-gray-400 hover:text-gray-200"}`,children:[ma?s.jsx("span",{className:"shrink-0 text-gray-500",children:ma}):s.jsx(Q2,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"truncate flex-1",children:qe.title}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[hr&&s.jsxs("span",{className:"text-[8px] text-indigo-400 bg-indigo-500/10 px-1 rounded font-mono",children:[qe.lessonBlocks.length,"b"]}),Hr&&s.jsx("span",{className:"text-[8px] text-cyan-400 bg-cyan-500/10 px-1 rounded font-mono",children:"html"}),rn&&s.jsx("span",{className:"text-[8px] text-blue-400 bg-blue-500/10 px-1 rounded font-mono",children:"draft"}),yn&&s.jsx("span",{className:"text-[8px] text-gray-500 bg-gray-500/10 px-1 rounded font-mono",children:"arch"}),pa&&s.jsx("span",{className:"text-[8px] text-amber-400 bg-amber-500/10 px-1 rounded font-mono",children:s.jsx(OR,{className:"w-2.5 h-2.5 inline"})})]})]}),_r&&s.jsxs("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 flex items-center gap-0.5 bg-[#1a1b26]/95 border border-white/10 rounded-lg px-1 py-0.5 shadow-xl z-10",children:[rn&&s.jsx("button",{onClick:ga=>{ga.stopPropagation(),Cr(qe.id)},className:"p-1 text-gray-500 hover:text-emerald-400 transition cursor-pointer",title:"Quick Deploy",children:s.jsx(YT,{className:"w-3 h-3"})}),s.jsx("button",{onClick:ga=>{ga.stopPropagation(),xn(qe.id,qe.status)},className:"p-1 text-gray-500 hover:text-amber-400 transition cursor-pointer",title:yn?"Restore":"Archive",children:yn?s.jsx(s0,{className:"w-3 h-3"}):s.jsx(gle,{className:"w-3 h-3"})}),s.jsx("button",{onClick:ga=>{ga.stopPropagation(),dr(qe.id)},className:"p-1 text-gray-500 hover:text-red-400 transition cursor-pointer",title:"Delete",children:s.jsx(Cn,{className:"w-3 h-3"})})]})]},qe.id)})]},Re)),Object.keys(Dr).length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-600 text-xs",children:[s.jsx(FH,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),"No resources match filters"]})]}),s.jsxs("div",{className:"border-t border-white/5 px-3 py-2 text-[9px] text-gray-600 flex items-center justify-between",children:[s.jsxs("span",{children:[Object.values(Dr).reduce((Re,Ye)=>Re+Ye.length,0)," resources"]}),s.jsxs("span",{children:[Object.keys(Dr).length," units"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:dn?O?s.jsxs("div",{className:"flex flex-col h-full",children:[Dt&&s.jsx("div",{className:`relative bg-white ${w.length>0?"flex-[3]":"flex-1"}`,children:s.jsx("iframe",{src:Dt,className:"w-full h-full border-none bg-white",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",title:"Resource Preview"})}),w.length>0&&s.jsx("div",{className:`${Dt?"flex-[2] border-t border-white/10 overflow-y-auto p-6":"flex-1 overflow-y-auto p-6"}`,children:s.jsx(JT,{blocks:w,showSidebar:!0})}),!Dt&&w.length===0&&s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 text-sm",children:"No content to preview. Add blocks or upload HTML."})]}):s.jsxs("div",{className:"max-w-3xl mx-auto p-6 pb-32",children:[ce&&s.jsxs("div",{className:"bg-white/[0.03] border border-white/10 rounded-2xl p-5 mb-6 space-y-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(o0,{className:"w-3.5 h-3.5"})," Resource Settings"]}),s.jsx("button",{type:"button",onClick:()=>de(!1),className:"text-gray-600 hover:text-gray-300 transition",children:s.jsx($n,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:be,onChange:Re=>{Se(Re.target.value),re(!0)},placeholder:"Resource title...",className:er})]}),s.jsx(hAe,{value:Ze,onChange:Re=>{rt(Re),re(!0)},existingUnits:Ct}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Category"}),s.jsx("select",{value:It,onChange:Re=>{At(Re.target.value),re(!0)},className:er,children:NV.map(Re=>s.jsx("option",{value:Re,children:Re},Re))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map(Re=>s.jsx("button",{type:"button",onClick:()=>{const Ye=new Set(he);Ye.has(Re)?Ye.size>1&&Ye.delete(Re):Ye.add(Re),Ge(Ye),Ke([]),re(!0)},className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${he.has(Re)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Re},Re))})]}),s.jsx(gg,{availableSections:mt,selectedSections:Pt,onChange:Re=>{Ke(Re),re(!0)}}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[s.jsx("label",{className:"block text-[11px] font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-xs file:mr-3 file:py-1.5 file:px-3 file:rounded-full file:border-0 file:bg-purple-600 file:text-white file:text-xs",onChange:async Re=>{var Ye;if((Ye=Re.target.files)!=null&&Ye[0]){ot(!0);try{const qe=await Ae.uploadHtmlResource(Re.target.files[0]);tr(qe),re(!0),c.success("File uploaded!")}catch(qe){c.error("Upload failed: "+(qe instanceof Error?qe.message:"Unknown error"))}finally{ot(!1)}}}}),ye&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(no,{className:"w-3.5 h-3.5 animate-spin"})," Uploading..."]}),!ye&&Dt&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(dc,{className:"w-3.5 h-3.5"})," Resource uploaded"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{value:Ft,onChange:Re=>{qt(Re.target.value),re(!0)},placeholder:"Brief description...",className:`${Ho} h-16`})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Schedule ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:it,onChange:Re=>{$t(Re.target.value),re(!0)},className:er})]}),s.jsxs("div",{children:[s.jsxs("label",{className:pr,children:["Due Date ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:Nt,onChange:Re=>{kr(Re.target.value),re(!0)},className:er})]})]}),s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsxs("button",{type:"button",disabled:D,onClick:()=>bt(Ts.DRAFT),className:"flex-1 flex items-center justify-center gap-2 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-3 rounded-xl font-bold text-xs transition",children:[s.jsx(zf,{className:"w-3.5 h-3.5"})," Save Draft"]}),it?s.jsx("button",{type:"button",disabled:D,onClick:()=>bt(Ts.ACTIVE,it),className:"flex-[2] flex items-center justify-center gap-2 bg-amber-600 hover:bg-amber-500 text-white py-3 rounded-xl font-bold text-xs transition",children:D?s.jsx(no,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(OR,{className:"w-3.5 h-3.5"})," Schedule"]})}):s.jsx("button",{type:"button",disabled:D,onClick:()=>bt(Ts.ACTIVE),className:"flex-[2] flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-500 text-white py-3 rounded-xl font-bold text-xs transition",children:D?s.jsx(no,{className:"w-4 h-4 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(YT,{className:"w-3.5 h-3.5"})," Deploy"]})})]})]}),s.jsxs("div",{className:"space-y-0",children:[s.jsx(SV,{onInsert:Re=>Vr(0,Re)}),w.map((Re,Ye)=>{const qe=dAe(Re.type),hr=A===Re.id;return s.jsxs(ie.Fragment,{children:[s.jsxs("div",{className:`border rounded-2xl transition-all ${hr?"bg-white/5 border-purple-500/30 shadow-lg shadow-purple-500/5":"bg-white/[0.02] border-white/5 hover:border-white/15"}`,children:[s.jsxs("button",{type:"button",onClick:()=>R(hr?null:Re.id),className:"w-full flex items-center gap-3 px-4 py-3 text-left",children:[s.jsx("span",{className:"text-gray-500",children:qe==null?void 0:qe.icon}),s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wider w-24 shrink-0",children:qe==null?void 0:qe.label}),s.jsx("span",{className:"text-xs text-gray-400 truncate flex-1",children:uAe(Re)}),s.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",onClick:Hr=>Hr.stopPropagation(),children:[s.jsx("button",{type:"button",onClick:()=>yr(Ye,-1),disabled:Ye===0,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(ef,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>yr(Ye,1),disabled:Ye===w.length-1,className:"p-1 text-gray-600 hover:text-white disabled:opacity-20 transition",children:s.jsx(Ei,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>Qt(Ye),className:"p-1 text-gray-600 hover:text-blue-400 transition",children:s.jsx(K2,{className:"w-3.5 h-3.5"})}),s.jsx("button",{type:"button",onClick:()=>cn(Ye),className:"p-1 text-gray-600 hover:text-red-400 transition",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]}),s.jsx(nl,{className:`w-4 h-4 text-gray-600 transition-transform ${hr?"rotate-90":""}`})]}),hr&&s.jsx("div",{className:"px-4 pb-4 border-t border-white/5 pt-3 animate-in fade-in slide-in-from-top-1 duration-200",children:s.jsx(pAe,{block:Re,allBlocks:w,onUpdate:Hr=>{const _r=[...w];_r[Ye]=Hr,Gt(_r)}})})]}),s.jsx(SV,{onInsert:Hr=>Vr(Ye+1,Hr)})]},Re.id)}),w.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-600",children:[s.jsxs("p",{className:"text-sm mb-2",children:["No blocks yet. Click the ",s.jsx(Bn,{className:"w-4 h-4 inline"})," button above to add your first block."]}),s.jsx("p",{className:"text-xs",children:"Or paste JSON to import blocks in bulk."})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-8",children:[s.jsx(vi,{className:"w-16 h-16 text-gray-700 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-400 mb-2",children:"Select or Create a Resource"}),s.jsx("p",{className:"text-sm text-gray-600 max-w-md mb-6",children:"Choose a resource from the sidebar to edit, or create a new one."}),s.jsxs("button",{onClick:gr,className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl font-bold flex items-center gap-2 transition shadow-xl",children:[s.jsx(Bn,{className:"w-5 h-5"})," New Resource"]})]})})]})]})},er="w-full bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",Ho="w-full bg-black/30 border border-white/10 rounded-xl p-3 text-sm text-white placeholder-gray-600 resize-none focus:outline-none focus:border-purple-500/50 transition",pr="text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-1",pAe=({block:t,allBlocks:e,onUpdate:r})=>{switch(t.type){case"TEXT":return s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Enter text content...",className:`${Ho} min-h-[80px]`,rows:3});case"SECTION_HEADER":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),placeholder:"",className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),placeholder:"Section title...",className:er})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Subtitle"}),s.jsx("input",{type:"text",value:t.subtitle||"",onChange:n=>r({...t,subtitle:n.target.value}),placeholder:"Optional subtitle...",className:er})]})]});case"IMAGE":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Image URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://...",className:er})]}),t.url&&s.jsx("img",{src:t.url,alt:t.alt||"",className:"max-h-32 rounded-lg border border-white/10 object-contain",onError:n=>n.currentTarget.style.display="none"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Alt Text"}),s.jsx("input",{type:"text",value:t.alt||"",onChange:n=>r({...t,alt:n.target.value}),placeholder:"Describe...",className:er})]})]})]});case"VIDEO":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"YouTube URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),placeholder:"https://youtube.com/watch?v=...",className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),placeholder:"Caption...",className:er})]})]});case"OBJECTIVES":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:er})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(cs,{className:"w-4 h-4 text-emerald-400 mt-2 shrink-0"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Objective ${i+1}`,className:`flex-1 ${er}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add"]})]})}case"DIVIDER":return s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Horizontal divider  no configuration needed."});case"EXTERNAL_LINK":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:er})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Description"}),s.jsx("input",{type:"text",value:t.content,onChange:n=>r({...t,content:n.target.value}),className:er})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Button Label"}),s.jsx("input",{type:"text",value:t.buttonLabel||"",onChange:n=>r({...t,buttonLabel:n.target.value}),className:er})]}),s.jsx("div",{className:"flex items-end pb-1",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx("input",{type:"checkbox",checked:t.openInNewTab??!0,onChange:n=>r({...t,openInNewTab:n.target.checked})})," New tab"]})})]})]});case"EMBED":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Embed URL"}),s.jsx("input",{type:"text",value:t.url||"",onChange:n=>r({...t,url:n.target.value}),className:er})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Caption"}),s.jsx("input",{type:"text",value:t.caption||"",onChange:n=>r({...t,caption:n.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||500,onChange:n=>r({...t,height:parseInt(n.target.value)||500}),className:er})]})]})]});case"INFO_BOX":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex gap-2",children:["tip","warning","note"].map(n=>s.jsx("button",{type:"button",onClick:()=>r({...t,variant:n}),className:`px-3 py-1 rounded-lg border text-xs font-bold capitalize transition ${t.variant===n?n==="tip"?"bg-green-500/20 border-green-500/30 text-green-400":n==="warning"?"bg-amber-500/20 border-amber-500/30 text-amber-400":"bg-blue-500/20 border-blue-500/30 text-blue-400":"bg-black/30 border-white/10 text-gray-400"}`,children:n},n))}),s.jsx("textarea",{value:t.content,onChange:n=>r({...t,content:n.target.value}),placeholder:"Content...",className:Ho,rows:2})]});case"MC":{const n=t.options||["",""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:Ho,rows:2}),n.map((a,i)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>r({...t,correctAnswer:i}),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center shrink-0 ${t.correctAnswer===i?"border-green-500 bg-green-500":"border-gray-600"}`,children:t.correctAnswer===i&&s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,options:c})},placeholder:`Option ${String.fromCharCode(65+i)}`,className:`flex-1 ${er}`}),n.length>2&&s.jsx("button",{type:"button",onClick:()=>{const o=n.filter((c,d)=>d!==i);r({...t,options:o,correctAnswer:t.correctAnswer===i?0:(t.correctAnswer||0)>i?(t.correctAnswer||0)-1:t.correctAnswer})},className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),n.length<6&&s.jsxs("button",{type:"button",onClick:()=>r({...t,options:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Option"]})]})}case"SHORT_ANSWER":{const n=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Question...",className:Ho,rows:2}),s.jsx("label",{className:pr,children:"Accepted Answers"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,acceptedAnswers:c})},placeholder:`Answer ${i+1}`,className:`flex-1 ${er}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Answer"]})]})}case"VOCABULARY":return s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Term"}),s.jsx("input",{type:"text",value:t.term||"",onChange:n=>r({...t,term:n.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Definition"}),s.jsx("input",{type:"text",value:t.definition||"",onChange:n=>r({...t,definition:n.target.value}),className:er})]})]});case"VOCAB_LIST":{const n=t.terms||[{term:"",definition:""}];return s.jsxs("div",{className:"space-y-2",children:[n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.term,onChange:o=>{const c=[...n];c[i]={...c[i],term:o.target.value},r({...t,terms:c})},placeholder:"Term",className:`flex-1 ${er}`}),s.jsx("input",{type:"text",value:a.definition,onChange:o=>{const c=[...n];c[i]={...c[i],definition:o.target.value},r({...t,terms:c})},placeholder:"Definition",className:`flex-1 ${er}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,terms:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,terms:[...n,{term:"",definition:""}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Term"]})]})}case"CHECKLIST":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Checklist title...",className:Ho,rows:1}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"w-5 h-5 rounded border-2 border-gray-600 shrink-0 mt-1.5"}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${er}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Item"]})]})}case"ACTIVITY":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Icon"}),s.jsx("input",{type:"text",value:t.icon||"",onChange:n=>r({...t,icon:n.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:er})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:n=>r({...t,instructions:n.target.value}),className:`${Ho} min-h-[60px]`,rows:2})]})]});case"SORTING":{const n=t.sortItems||[{text:"",correct:"left"}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Instructions"}),s.jsx("textarea",{value:t.instructions||"",onChange:a=>r({...t,instructions:a.target.value}),className:Ho,rows:1})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Left Category"}),s.jsx("input",{type:"text",value:t.leftLabel||"",onChange:a=>r({...t,leftLabel:a.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Right Category"}),s.jsx("input",{type:"text",value:t.rightLabel||"",onChange:a=>r({...t,rightLabel:a.target.value}),className:er})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.text,onChange:o=>{const c=[...n];c[i]={...c[i],text:o.target.value},r({...t,sortItems:c})},placeholder:`Item ${i+1}`,className:`flex-1 ${er}`}),s.jsxs("select",{value:a.correct,onChange:o=>{const c=[...n];c[i]={...c[i],correct:o.target.value},r({...t,sortItems:c})},className:`w-28 ${er}`,children:[s.jsx("option",{value:"left",children:t.leftLabel||"Left"}),s.jsx("option",{value:"right",children:t.rightLabel||"Right"})]}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,sortItems:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,sortItems:[...n,{text:"",correct:"left"}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Item"]})]})}case"DATA_TABLE":{const n=t.columns||[{key:"col1",label:"Column 1",editable:!0}];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:a=>r({...t,title:a.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Rows"}),s.jsx("input",{type:"number",value:t.trials||3,onChange:a=>r({...t,trials:parseInt(a.target.value)||3}),className:er})]})]}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:a.label,onChange:o=>{const c=[...n];c[i]={...c[i],label:o.target.value},r({...t,columns:c})},placeholder:"Label",className:`flex-1 ${er}`}),s.jsx("input",{type:"text",value:a.unit||"",onChange:o=>{const c=[...n];c[i]={...c[i],unit:o.target.value},r({...t,columns:c})},placeholder:"Unit",className:`w-20 ${er}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,columns:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,columns:[...n,{key:`col${n.length+1}`,label:"",editable:!0}]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Column"]})]})}case"BAR_CHART":return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Title"}),s.jsx("input",{type:"text",value:t.title||"",onChange:n=>r({...t,title:n.target.value}),className:er})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Bars"}),s.jsx("input",{type:"number",value:t.barCount||3,onChange:n=>r({...t,barCount:parseInt(n.target.value)||3}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Height (px)"}),s.jsx("input",{type:"number",value:t.height||300,onChange:n=>r({...t,height:parseInt(n.target.value)||300}),className:er})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Initial"}),s.jsx("input",{type:"text",value:t.initialLabel||"",onChange:n=>r({...t,initialLabel:n.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Delta"}),s.jsx("input",{type:"text",value:t.deltaLabel||"",onChange:n=>r({...t,deltaLabel:n.target.value}),className:er})]}),s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Final"}),s.jsx("input",{type:"text",value:t.finalLabel||"",onChange:n=>r({...t,finalLabel:n.target.value}),className:er})]})]})]});case"RANKING":{const n=t.items||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:t.content,onChange:a=>r({...t,content:a.target.value}),placeholder:"Ranking question...",className:Ho,rows:2}),s.jsx("label",{className:pr,children:"Items (in correct order)"}),n.map((a,i)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 mt-2 w-5 text-right",children:[i+1,"."]}),s.jsx("input",{type:"text",value:a,onChange:o=>{const c=[...n];c[i]=o.target.value,r({...t,items:c})},className:`flex-1 ${er}`}),n.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,items:n.filter((o,c)=>c!==i)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},i)),s.jsxs("button",{type:"button",onClick:()=>r({...t,items:[...n,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Item"]})]})}case"LINKED":{const n=e.filter(i=>i.id!==t.id&&["MC","SHORT_ANSWER","RANKING"].includes(i.type)),a=t.acceptedAnswers||[""];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:pr,children:"Reference Block"}),s.jsxs("select",{value:t.linkedBlockId||"",onChange:i=>r({...t,linkedBlockId:i.target.value}),className:er,children:[s.jsx("option",{value:"",children:"Select..."}),n.map(i=>s.jsxs("option",{value:i.id,children:[i.type,": ",(i.content||"").slice(0,40)]},i.id))]})]}),s.jsx("textarea",{value:t.content,onChange:i=>r({...t,content:i.target.value}),placeholder:"Follow-up question...",className:Ho,rows:2}),s.jsx("label",{className:pr,children:"Accepted Answers"}),a.map((i,o)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:i,onChange:c=>{const d=[...a];d[o]=c.target.value,r({...t,acceptedAnswers:d})},className:`flex-1 ${er}`}),a.length>1&&s.jsx("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:a.filter((c,d)=>d!==o)}),className:"p-1 text-red-400",children:s.jsx(Cn,{className:"w-3.5 h-3.5"})})]},o)),s.jsxs("button",{type:"button",onClick:()=>r({...t,acceptedAnswers:[...a,""]}),className:"text-xs text-purple-400 flex items-center gap-1",children:[s.jsx(Bn,{className:"w-3 h-3"})," Add Answer"]})]})}default:return s.jsxs("div",{className:"text-xs text-gray-500 italic",children:["Unknown block type: ",t.type]})}},mAe=({userName:t,userId:e,onLogout:r})=>{const[n,a]=T.useState(""),[i,o]=T.useState(!1),[c,d]=T.useState(null),[h,p]=T.useState(null),m=y=>{const S=y.replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,8);a(S.length>4?S.slice(0,4)+"-"+S.slice(4):S),d(null)},x=async()=>{if(n.replace("-","").length<4){d("Please enter a valid enrollment code.");return}o(!0),d(null);try{const y=await Ae.redeemEnrollmentCode(n,e);y.success?p(`Enrolled in ${y.classType}! Refreshing...`):d(y.error||"Failed to redeem code.")}catch{d("Something went wrong. Please try again.")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(Y2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:["Hi ",t,"! Your account is not yet enrolled in a class."]}),s.jsxs("div",{className:"bg-black/20 border border-white/10 rounded-2xl p-6 mb-6 text-left",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-white mb-3",children:[s.jsx(dg,{className:"w-4 h-4 text-emerald-400"}),"Have an enrollment code?"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:n,onChange:y=>m(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!i&&x()},placeholder:"XXXX-XXXX",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-center text-lg font-mono font-bold text-emerald-400 tracking-[0.2em] placeholder-gray-600 focus:outline-none focus:border-emerald-500/50 transition",maxLength:9,disabled:i||!!h}),s.jsx("button",{onClick:x,disabled:i||!!h||n.replace("-","").length<4,className:"px-5 py-3 bg-emerald-600 hover:bg-emerald-500 disabled:opacity-40 disabled:cursor-not-allowed text-white rounded-xl font-bold transition flex items-center gap-2",children:i?s.jsx(no,{className:"w-4 h-4 animate-spin"}):"Join"})]}),c&&s.jsx("p",{className:"mt-3 text-sm text-red-400 animate-in fade-in slide-in-from-top-1 duration-200",children:c}),h&&s.jsxs("p",{className:"mt-3 text-sm text-emerald-400 flex items-center gap-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[s.jsx(dc,{className:"w-4 h-4"})," ",h]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mb-6",children:["No code? Ask ",ZH," for one, or wait for manual authorization."]}),s.jsx("button",{onClick:r,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})})},_V={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING","Intel Dossier":"INTEL"},gAe=()=>{var Ne,He;const[t,e]=T.useState(null),[r,n]=T.useState("Dashboard"),[a,i]=T.useState([]),[o,c]=T.useState([]),[d,h]=T.useState([]),[p,m]=T.useState([]),[x,y]=T.useState([]),[S,w]=T.useState(null),[N,A]=T.useState("STUDENT"),[R,O]=T.useState("WORK"),[L,I]=T.useState(!1),[k,E]=T.useState(!1),[j,C]=T.useState(!0),[q,D]=T.useState(!1),[$,B]=T.useState(new Set),V=T.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),W=T.useRef(new Set);T.useEffect(()=>{if(!(t!=null&&t.id)||t.role===Fa.ADMIN)return;const Z=Ae.subscribeToMyGroups(t.id,te=>{W.current=new Set(te.map(be=>be.id))});return()=>Z()},[t==null?void 0:t.id,t==null?void 0:t.role]);const G=T.useCallback(Z=>{const te=Date.now();V.current[Z]=te,localStorage.setItem("chatChannelLastSeen",JSON.stringify(V.current)),B(be=>{if(!be.has(Z))return be;const Se=new Set(be);return Se.delete(Z),Se})},[]);T.useEffect(()=>{const Z=Ae.subscribeToRecentMessages(te=>{const be=new Set,Se=V.current,Ze=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(rt=>`class_${rt.replace(/\s+/g,"_").toLowerCase()}`));for(const rt of te){if(!rt.channelId||rt.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==Fa.ADMIN){if(rt.channelId.startsWith("group_")){const Ft=rt.channelId.slice(6);if(!W.current.has(Ft))continue}else if(rt.channelId.startsWith("class_")&&!Ze.has(rt.channelId))continue}const It=new Date(rt.timestamp).getTime(),At=Se[rt.channelId]||0;It>At&&be.add(rt.channelId)}B(be)});return()=>Z()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const Y=T.useMemo(()=>{const Z=new Map;return o.forEach(te=>{const be=Z.get(te.userId)||[];be.push(te),Z.set(te.userId,be)}),d.map(te=>{const be=Z.get(te.id)||[],Se=be.length,Ze=Math.round(be.reduce((rt,It)=>{var At;return rt+(((At=It.metrics)==null?void 0:At.engagementTime)||0)},0)/60);return{...te,stats:{problemsCompleted:Se,avgScore:0,rawAccuracy:0,totalTime:Ze}}})},[d,o]),re=T.useMemo(()=>{const Z=new Set;return d.forEach(te=>{te.section&&Z.add(te.section)}),Array.from(Z).sort()},[d]),ce=T.useMemo(()=>a.find(Z=>Z.id===S)||null,[a,S]);T.useEffect(()=>{if(I(!1),E(!1),!S)return;const Z=qa(ct(Me,"question_banks",S)).then(be=>{be.exists()&&(be.data().questions||[]).length>0&&I(!0)}).catch(()=>{}),te=qa(ct(Me,"reading_materials",S)).then(be=>{be.exists()&&E(!0)}).catch(()=>{});Promise.all([Z,te]).then(()=>{})},[S]),T.useEffect(()=>{let Z=null;const te=Nte(GT,async be=>{be?(await de(be),Z=Wr(ct(Me,"users",be.uid),Se=>{Se.exists()&&e(Ze=>({...Ze||{},...Se.data(),id:be.uid}))})):(e(null),Z&&Z(),C(!1))});return()=>{te(),Z&&Z()}},[]),T.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Fa.ADMIN)){const Z=Ae.subscribeToAssignments(i),te=Ae.subscribeToClassConfigs(y),be=[Z,te];return t.role===Fa.ADMIN?(be.push(Ae.subscribeToSubmissions(c)),be.push(Ae.subscribeToUsers(h)),be.push(Ae.subscribeToWhitelist(m))):be.push(Ae.subscribeToUserSubmissions(t.id,c)),()=>be.forEach(Se=>Se())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),T.useEffect(()=>{(t==null?void 0:t.role)===Fa.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),T.useEffect(()=>{var Z;mce(((Z=t==null?void 0:t.settings)==null?void 0:Z.soundEffects)!==!1)},[(Ne=t==null?void 0:t.settings)==null?void 0:Ne.soundEffects]),hce((t==null?void 0:t.id)||null,((He=t==null?void 0:t.settings)==null?void 0:He.pushNotifications)===!0);const de=async Z=>{try{const te=ct(Me,"users",Z.uid),be=await qa(te),Se=await qa(ct(Me,"allowed_emails",Z.email||"")),rt=(await Z.getIdTokenResult()).claims.admin===!0||Z.email===ice,It=Se.exists()||rt,At=Se.exists()?Se.data():null,Ft=(At==null?void 0:At.classType)||Mr.UNCATEGORIZED,qt=(At==null?void 0:At.classTypes)||(Ft!==Mr.UNCATEGORIZED?[Ft]:[]);if(be.exists()){const Dt=be.data(),tr={lastLoginAt:new Date().toISOString(),isWhitelisted:It};if(rt&&(tr.role="ADMIN"),!It&&!rt&&(tr.enrolledClasses=[]),It&&qt.length>0){const he=Dt.enrolledClasses||[],Ge=Array.from(new Set([...he,...qt]));Ge.length!==he.length&&(tr.enrolledClasses=Ge,(!Dt.classType||Dt.classType===Mr.UNCATEGORIZED)&&(tr.classType=qt[0]))}await lr(te,tr)}else{const Dt={email:Z.email,name:Z.displayName||"Student",avatarUrl:Z.photoURL||"",role:rt?"ADMIN":"STUDENT",classType:Ft,enrolledClasses:It?qt:[],isWhitelisted:It,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await va(te,Dt)}}catch(te){console.error(te)}finally{C(!1)}},X=async()=>{await _te(GT),e(null),w(null)},ae=Z=>{O("WORK"),w(Z)},ne=T.useRef(ce),ve=T.useRef(t);T.useEffect(()=>{ne.current=ce},[ce]),T.useEffect(()=>{ve.current=t},[t]);const pe=async Z=>{const te=ve.current,be=ne.current;if(!(!te||!be||te.role===Fa.ADMIN)&&!(Z.engagementTime<10))try{await Ae.submitEngagement(te.id,te.name,be.id,be.title,Z,be.classType)}catch(Se){console.error("Engagement submission failed:",Se)}},Be=T.useMemo(()=>{const Z={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const te=x.find(be=>be.className===t.classType);if(te)return te.features}return Z},[t==null?void 0:t.role,t==null?void 0:t.classType,x]);if(j)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(b0e,{});if(!t.isWhitelisted&&t.role!==Fa.ADMIN)return s.jsx(mAe,{userName:t.name,userId:t.id,onLogout:X});const Ue=t.role===Fa.ADMIN||Be.physicsTools,Fe=t.role===Fa.ADMIN||Be.communications;return s.jsx(Xje,{children:s.jsx(w0e,{children:s.jsx(lce,{children:s.jsxs(s.Fragment,{children:[s.jsx(cce,{}),Ue&&s.jsx(Q0e,{onToggleChat:Fe?()=>D(!q):void 0,hasUnreadChat:$.size>0}),Fe&&s.jsx(Z0e,{user:t,isOpen:q,onClose:()=>D(!1),assignments:a,classConfigs:x,unreadChannels:$,onMarkChannelRead:G,onOpenResource:Z=>{ae(Z)}}),s.jsx(yce,{user:t,onLogout:X,activeTab:r,setActiveTab:n,children:ce?s.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between text-white bg-white/5 px-4 py-2 rounded-xl border border-white/10 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[s.jsxs("h2",{className:"text-sm font-bold truncate flex items-center gap-2",children:[ce.title,t.role===Fa.ADMIN&&s.jsx("span",{className:"text-[9px] bg-purple-600 px-1.5 py-0.5 rounded-full uppercase tracking-widest shrink-0",children:"Admin"})]}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[s.jsx("button",{onClick:()=>O("WORK"),className:`text-xs font-bold px-2.5 py-1 rounded-lg transition ${R==="WORK"?"bg-purple-500/20 text-white":"text-gray-400 hover:text-white"}`,children:"Resource"}),L&&s.jsxs("button",{onClick:()=>O("REVIEW"),className:`text-xs font-bold px-2.5 py-1 rounded-lg transition flex items-center gap-1 ${R==="REVIEW"?"bg-purple-500/20 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(rl,{className:"w-3 h-3"})," Review"]}),k&&s.jsxs("button",{onClick:()=>O("STUDY"),className:`text-xs font-bold px-2.5 py-1 rounded-lg transition flex items-center gap-1 ${R==="STUDY"?"bg-purple-500/20 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(vi,{className:"w-3 h-3"})," Study"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-0.5 border border-white/10 text-[9px] font-bold",children:[s.jsx("button",{onClick:()=>A("STUDENT"),className:`px-2 py-1 rounded transition ${N==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student"}),s.jsx("button",{onClick:()=>A("ADMIN"),className:`px-2 py-1 rounded transition ${N==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin"})]}),s.jsxs("button",{onClick:()=>{w(null),O("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-xs bg-white/5 px-3 py-1.5 rounded-lg border border-white/10",children:[s.jsx(xle,{className:"w-3.5 h-3.5"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[R==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(v0e,{onComplete:pe,contentUrl:ce.contentUrl,htmlContent:ce.htmlContent,userId:t.id,assignmentId:ce.id,classType:ce.classType,lessonBlocks:ce.lessonBlocks})}),N==="ADMIN"&&t.role===Fa.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(o0,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx($i,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(Z=>Z.assignmentId===ce.id&&!Z.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>D(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),R==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(Yje,{assignment:ce})}),R==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(rAe,{assignment:ce,onComplete:pe})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Fa.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(M0e,{users:Y,assignments:a,submissions:o}),r==="User Management"&&s.jsx(D0e,{users:Y,whitelistedEmails:p,classConfigs:x,onWhitelist:async(Z,te)=>Ae.addToWhitelist(Z,te)}),r==="Admin Panel"&&s.jsx(P0e,{assignments:[],submissions:o,users:d,onCreateAssignment:void 0,classConfigs:[],onNavigate:n}),r==="Student Groups"&&s.jsx(K0e,{students:Y.filter(Z=>Z.role==="STUDENT"),availableSections:re,fullPage:!0}),r==="Enrollment Codes"&&s.jsx(sAe,{classConfigs:x,availableSections:re}),r==="Resource Editor"&&s.jsx(fAe,{assignments:a,onClose:()=>n("Admin Panel"),classConfigs:x,users:d,availableSections:re,onCreateAssignment:async Z=>{Z.title&&await Ae.addAssignment(Z)}}),r.startsWith("XP Command:")&&s.jsx(W0e,{users:d,initialTab:r.split(":")[1]})]}),t.role===Fa.STUDENT&&s.jsxs(s.Fragment,{children:[r in _V&&s.jsx(fje,{user:t,assignments:a,submissions:o,classConfigs:x,enabledFeatures:Be,onNavigate:n,onStartAssignment:ae,studentTab:_V[r]}),r==="Forensics"&&Be.evidenceLocker&&s.jsx(Vje,{user:t}),r==="Physics Lab"&&Be.physicsLab&&s.jsx(Fje,{user:t}),r==="Leaderboard"&&Be.leaderboard&&s.jsx(Kje,{user:t})]})]},r)})}),s.jsx(nAe,{user:t}),t.role===Fa.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(iAe,{userId:t.id,compact:!0})})]})})})})},gY=document.getElementById("root");if(!gY)throw new Error("Could not find root element to mount to");const xAe=rZ.createRoot(gY);xAe.render(s.jsx(ie.StrictMode,{children:s.jsx(gAe,{})}));
