var BY=Object.defineProperty;var UY=(t,e,r)=>e in t?BY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ik=(t,e,r)=>UY(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as zY}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h5={exports:{}},Ap={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function $Y(){if(Rk)return Ap;Rk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:s,ref:i!==void 0?i:null,props:a}}return Ap.Fragment=e,Ap.jsx=r,Ap.jsxs=r,Ap}var Mk;function VY(){return Mk||(Mk=1,h5.exports=$Y()),h5.exports}var l=VY(),f5={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk;function FY(){if(Pk)return Yt;Pk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function b(Q){return Q===null||typeof Q!="object"?null:(Q=y&&Q[y]||Q["@@iterator"],typeof Q=="function"?Q:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function N(Q,re,de){this.props=Q,this.context=re,this.refs=w,this.updater=de||T}N.prototype.isReactComponent={},N.prototype.setState=function(Q,re){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,re,"setState")},N.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function k(){}k.prototype=N.prototype;function C(Q,re,de){this.props=Q,this.context=re,this.refs=w,this.updater=de||T}var $=C.prototype=new k;$.constructor=C,_($,N.prototype),$.isPureReactComponent=!0;var I=Array.isArray;function L(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(Q,re,de){var oe=de.ref;return{$$typeof:t,type:Q,key:re,ref:oe!==void 0?oe:null,props:de}}function F(Q,re){return R(Q.type,re,Q.props)}function P(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function B(Q){var re={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(de){return re[de]})}var D=/\/+/g;function Y(Q,re){return typeof Q=="object"&&Q!==null&&Q.key!=null?B(""+Q.key):re.toString(36)}function J(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(L,L):(Q.status="pending",Q.then(function(re){Q.status==="pending"&&(Q.status="fulfilled",Q.value=re)},function(re){Q.status==="pending"&&(Q.status="rejected",Q.reason=re)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function X(Q,re,de,oe,ae){var pe=typeof Q;(pe==="undefined"||pe==="boolean")&&(Q=null);var ve=!1;if(Q===null)ve=!0;else switch(pe){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(Q.$$typeof){case t:case e:ve=!0;break;case p:return ve=Q._init,X(ve(Q._payload),re,de,oe,ae)}}if(ve)return ae=ae(Q),ve=oe===""?"."+Y(Q,0):oe,I(ae)?(de="",ve!=null&&(de=ve.replace(D,"$&/")+"/"),X(ae,re,de,"",function(le){return le})):ae!=null&&(P(ae)&&(ae=F(ae,de+(ae.key==null||Q&&Q.key===ae.key?"":(""+ae.key).replace(D,"$&/")+"/")+ve)),re.push(ae)),1;ve=0;var Ye=oe===""?".":oe+":";if(I(Q))for(var Ne=0;Ne<Q.length;Ne++)oe=Q[Ne],pe=Ye+Y(oe,Ne),ve+=X(oe,re,de,pe,ae);else if(Ne=b(Q),typeof Ne=="function")for(Q=Ne.call(Q),Ne=0;!(oe=Q.next()).done;)oe=oe.value,pe=Ye+Y(oe,Ne++),ve+=X(oe,re,de,pe,ae);else if(pe==="object"){if(typeof Q.then=="function")return X(J(Q),re,de,oe,ae);throw re=String(Q),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ve}function ee(Q,re,de){if(Q==null)return Q;var oe=[],ae=0;return X(Q,oe,"","",function(pe){return re.call(de,pe,ae++)}),oe}function Z(Q){if(Q._status===-1){var re=Q._result;re=re(),re.then(function(de){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=de)},function(de){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=de)}),Q._status===-1&&(Q._status=0,Q._result=re)}if(Q._status===1)return Q._result.default;throw Q._result}var ge=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},ce={map:ee,forEach:function(Q,re,de){ee(Q,function(){re.apply(this,arguments)},de)},count:function(Q){var re=0;return ee(Q,function(){re++}),re},toArray:function(Q){return ee(Q,function(re){return re})||[]},only:function(Q){if(!P(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return Yt.Activity=m,Yt.Children=ce,Yt.Component=N,Yt.Fragment=r,Yt.Profiler=i,Yt.PureComponent=C,Yt.StrictMode=n,Yt.Suspense=d,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return E.H.useMemoCache(Q)}},Yt.cache=function(Q){return function(){return Q.apply(null,arguments)}},Yt.cacheSignal=function(){return null},Yt.cloneElement=function(Q,re,de){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var oe=_({},Q.props),ae=Q.key;if(re!=null)for(pe in re.key!==void 0&&(ae=""+re.key),re)!A.call(re,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&re.ref===void 0||(oe[pe]=re[pe]);var pe=arguments.length-2;if(pe===1)oe.children=de;else if(1<pe){for(var ve=Array(pe),Ye=0;Ye<pe;Ye++)ve[Ye]=arguments[Ye+2];oe.children=ve}return R(Q.type,ae,oe)},Yt.createContext=function(Q){return Q={$$typeof:s,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:a,_context:Q},Q},Yt.createElement=function(Q,re,de){var oe,ae={},pe=null;if(re!=null)for(oe in re.key!==void 0&&(pe=""+re.key),re)A.call(re,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ae[oe]=re[oe]);var ve=arguments.length-2;if(ve===1)ae.children=de;else if(1<ve){for(var Ye=Array(ve),Ne=0;Ne<ve;Ne++)Ye[Ne]=arguments[Ne+2];ae.children=Ye}if(Q&&Q.defaultProps)for(oe in ve=Q.defaultProps,ve)ae[oe]===void 0&&(ae[oe]=ve[oe]);return R(Q,pe,ae)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(Q){return{$$typeof:c,render:Q}},Yt.isValidElement=P,Yt.lazy=function(Q){return{$$typeof:p,_payload:{_status:-1,_result:Q},_init:Z}},Yt.memo=function(Q,re){return{$$typeof:h,type:Q,compare:re===void 0?null:re}},Yt.startTransition=function(Q){var re=E.T,de={};E.T=de;try{var oe=Q(),ae=E.S;ae!==null&&ae(de,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(L,ge)}catch(pe){ge(pe)}finally{re!==null&&de.types!==null&&(re.types=de.types),E.T=re}},Yt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Yt.use=function(Q){return E.H.use(Q)},Yt.useActionState=function(Q,re,de){return E.H.useActionState(Q,re,de)},Yt.useCallback=function(Q,re){return E.H.useCallback(Q,re)},Yt.useContext=function(Q){return E.H.useContext(Q)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(Q,re){return E.H.useDeferredValue(Q,re)},Yt.useEffect=function(Q,re){return E.H.useEffect(Q,re)},Yt.useEffectEvent=function(Q){return E.H.useEffectEvent(Q)},Yt.useId=function(){return E.H.useId()},Yt.useImperativeHandle=function(Q,re,de){return E.H.useImperativeHandle(Q,re,de)},Yt.useInsertionEffect=function(Q,re){return E.H.useInsertionEffect(Q,re)},Yt.useLayoutEffect=function(Q,re){return E.H.useLayoutEffect(Q,re)},Yt.useMemo=function(Q,re){return E.H.useMemo(Q,re)},Yt.useOptimistic=function(Q,re){return E.H.useOptimistic(Q,re)},Yt.useReducer=function(Q,re,de){return E.H.useReducer(Q,re,de)},Yt.useRef=function(Q){return E.H.useRef(Q)},Yt.useState=function(Q){return E.H.useState(Q)},Yt.useSyncExternalStore=function(Q,re,de){return E.H.useSyncExternalStore(Q,re,de)},Yt.useTransition=function(){return E.H.useTransition()},Yt.version="19.2.4",Yt}var Dk;function J8(){return Dk||(Dk=1,f5.exports=FY()),f5.exports}var M=J8();const te=Dr(M);var p5={exports:{}},Ep={},m5={exports:{}},g5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lk;function qY(){return Lk||(Lk=1,(function(t){function e(X,ee){var Z=X.length;X.push(ee);e:for(;0<Z;){var ge=Z-1>>>1,ce=X[ge];if(0<i(ce,ee))X[ge]=ee,X[Z]=ce,Z=ge;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ee=X[0],Z=X.pop();if(Z!==ee){X[0]=Z;e:for(var ge=0,ce=X.length,Q=ce>>>1;ge<Q;){var re=2*(ge+1)-1,de=X[re],oe=re+1,ae=X[oe];if(0>i(de,Z))oe<ce&&0>i(ae,de)?(X[ge]=ae,X[oe]=Z,ge=oe):(X[ge]=de,X[re]=Z,ge=re);else if(oe<ce&&0>i(ae,Z))X[ge]=ae,X[oe]=Z,ge=oe;else break e}}return ee}function i(X,ee){var Z=X.sortIndex-ee.sortIndex;return Z!==0?Z:X.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var d=[],h=[],p=1,m=null,y=3,b=!1,T=!1,_=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function $(X){for(var ee=r(h);ee!==null;){if(ee.callback===null)n(h);else if(ee.startTime<=X)n(h),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=r(h)}}function I(X){if(_=!1,$(X),!T)if(r(d)!==null)T=!0,L||(L=!0,B());else{var ee=r(h);ee!==null&&J(I,ee.startTime-X)}}var L=!1,E=-1,A=5,R=-1;function F(){return w?!0:!(t.unstable_now()-R<A)}function P(){if(w=!1,L){var X=t.unstable_now();R=X;var ee=!0;try{e:{T=!1,_&&(_=!1,k(E),E=-1),b=!0;var Z=y;try{t:{for($(X),m=r(d);m!==null&&!(m.expirationTime>X&&F());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,y=m.priorityLevel;var ce=ge(m.expirationTime<=X);if(X=t.unstable_now(),typeof ce=="function"){m.callback=ce,$(X),ee=!0;break t}m===r(d)&&n(d),$(X)}else n(d);m=r(d)}if(m!==null)ee=!0;else{var Q=r(h);Q!==null&&J(I,Q.startTime-X),ee=!1}}break e}finally{m=null,y=Z,b=!1}ee=void 0}}finally{ee?B():L=!1}}}var B;if(typeof C=="function")B=function(){C(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Y=D.port2;D.port1.onmessage=P,B=function(){Y.postMessage(null)}}else B=function(){N(P,0)};function J(X,ee){E=N(function(){X(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(X){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var Z=y;y=ee;try{return X()}finally{y=Z}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Z=y;y=X;try{return ee()}finally{y=Z}},t.unstable_scheduleCallback=function(X,ee,Z){var ge=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ge+Z:ge):Z=ge,X){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Z+ce,X={id:p++,callback:ee,priorityLevel:X,startTime:Z,expirationTime:ce,sortIndex:-1},Z>ge?(X.sortIndex=Z,e(h,X),r(d)===null&&X===r(h)&&(_?(k(E),E=-1):_=!0,J(I,Z-ge))):(X.sortIndex=ce,e(d,X),T||b||(T=!0,L||(L=!0,B()))),X},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(X){var ee=y;return function(){var Z=y;y=ee;try{return X.apply(this,arguments)}finally{y=Z}}}})(g5)),g5}var Bk;function HY(){return Bk||(Bk=1,m5.exports=qY()),m5.exports}var y5={exports:{}},ea={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk;function GY(){if(Uk)return ea;Uk=1;var t=J8();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ea.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ea.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,p)},ea.flushSync=function(d){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=h,n.p=p,n.d.f()}},ea.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},ea.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ea.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ea.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},ea.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ea.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},ea.requestFormReset=function(d){n.d.r(d)},ea.unstable_batchedUpdates=function(d,h){return d(h)},ea.useFormState=function(d,h,p){return s.H.useFormState(d,h,p)},ea.useFormStatus=function(){return s.H.useHostTransitionStatus()},ea.version="19.2.4",ea}var zk;function _$(){if(zk)return y5.exports;zk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),y5.exports=GY(),y5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k;function KY(){if($k)return Ep;$k=1;var t=HY(),e=J8(),r=_$();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,f=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(f=u.return),o=u.return;while(o)}return u.tag===3?f:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(n(188))}function h(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(n(188));return u!==o?null:o}for(var f=o,g=u;;){var x=f.return;if(x===null)break;var S=x.alternate;if(S===null){if(g=x.return,g!==null){f=g;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===f)return d(x),o;if(S===g)return d(x),u;S=S.sibling}throw Error(n(188))}if(f.return!==g.return)f=x,g=S;else{for(var z=!1,H=x.child;H;){if(H===f){z=!0,f=x,g=S;break}if(H===g){z=!0,g=x,f=S;break}H=H.sibling}if(!z){for(H=S.child;H;){if(H===f){z=!0,f=S,g=x;break}if(H===g){z=!0,g=S,f=x;break}H=H.sibling}if(!z)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),C=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=P&&o[P]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function Y(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case N:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList";case R:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case C:return o.displayName||"Context";case k:return(o._context.displayName||"Context")+".Consumer";case $:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case E:return u=o.displayName||null,u!==null?u:Y(o.type)||"Memo";case A:u=o._payload,o=o._init;try{return Y(o(u))}catch{}}return null}var J=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ge=[],ce=-1;function Q(o){return{current:o}}function re(o){0>ce||(o.current=ge[ce],ge[ce]=null,ce--)}function de(o,u){ce++,ge[ce]=o.current,o.current=u}var oe=Q(null),ae=Q(null),pe=Q(null),ve=Q(null);function Ye(o,u){switch(de(pe,u),de(ae,o),de(oe,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?tk(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=tk(u),o=rk(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}re(oe),de(oe,o)}function Ne(){re(oe),re(ae),re(pe)}function le(o){o.memoizedState!==null&&de(ve,o);var u=oe.current,f=rk(u,o.type);u!==f&&(de(ae,o),de(oe,f))}function we(o){ae.current===o&&(re(oe),re(ae)),ve.current===o&&(re(ve),wp._currentValue=Z)}var xe,dt;function Ke(o){if(xe===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);xe=u&&u[1]||"",dt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+o+dt}var ut=!1;function it(o,u){if(!o||ut)return"";ut=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ve=function(){throw Error()};if(Object.defineProperty(Ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ve,[])}catch(ke){var je=ke}Reflect.construct(o,[],Ve)}else{try{Ve.call()}catch(ke){je=ke}o.call(Ve.prototype)}}else{try{throw Error()}catch(ke){je=ke}(Ve=o())&&typeof Ve.catch=="function"&&Ve.catch(function(){})}}catch(ke){if(ke&&je&&typeof ke.stack=="string")return[ke.stack,je.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),z=S[0],H=S[1];if(z&&H){var se=z.split(`
`),Ae=H.split(`
`);for(x=g=0;g<se.length&&!se[g].includes("DetermineComponentFrameRoot");)g++;for(;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;if(g===se.length||x===Ae.length)for(g=se.length-1,x=Ae.length-1;1<=g&&0<=x&&se[g]!==Ae[x];)x--;for(;1<=g&&0<=x;g--,x--)if(se[g]!==Ae[x]){if(g!==1||x!==1)do if(g--,x--,0>x||se[g]!==Ae[x]){var De=`
`+se[g].replace(" at new "," at ");return o.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",o.displayName)),De}while(1<=g&&0<=x);break}}}finally{ut=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Ke(f):""}function jt(o,u){switch(o.tag){case 26:case 27:case 5:return Ke(o.type);case 16:return Ke("Lazy");case 13:return o.child!==u&&u!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return it(o.type,!1);case 11:return it(o.type.render,!1);case 1:return it(o.type,!0);case 31:return Ke("Activity");default:return""}}function Ie(o){try{var u="",f=null;do u+=jt(o,f),f=o,o=o.return;while(o);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var $e=Object.prototype.hasOwnProperty,nt=t.unstable_scheduleCallback,_t=t.unstable_cancelCallback,Xt=t.unstable_shouldYield,ye=t.unstable_requestPaint,We=t.unstable_now,gt=t.unstable_getCurrentPriorityLevel,yt=t.unstable_ImmediatePriority,lt=t.unstable_UserBlockingPriority,et=t.unstable_NormalPriority,Lt=t.unstable_LowPriority,tr=t.unstable_IdlePriority,Wr=t.log,hn=t.unstable_setDisableYieldValue,fn=null,Qt=null;function Ft(o){if(typeof Wr=="function"&&hn(o),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(fn,o)}catch{}}var Kt=Math.clz32?Math.clz32:Yi,Dn=Math.log,Gn=Math.LN2;function Yi(o){return o>>>=0,o===0?32:31-(Dn(o)/Gn|0)|0}var pi=256,Lr=262144,Ir=4194304;function wr(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function It(o,u,f){var g=o.pendingLanes;if(g===0)return 0;var x=0,S=o.suspendedLanes,z=o.pingedLanes;o=o.warmLanes;var H=g&134217727;return H!==0?(g=H&~S,g!==0?x=wr(g):(z&=H,z!==0?x=wr(z):f||(f=H&~o,f!==0&&(x=wr(f))))):(H=g&~S,H!==0?x=wr(H):z!==0?x=wr(z):f||(f=g&~o,f!==0&&(x=wr(f)))),x===0?0:u!==0&&u!==x&&(u&S)===0&&(S=x&-x,f=u&-u,S>=f||S===32&&(f&4194048)!==0)?u:x}function Xr(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function pn(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function on(){var o=Ir;return Ir<<=1,(Ir&62914560)===0&&(Ir=4194304),o}function Qr(o){for(var u=[],f=0;31>f;f++)u.push(o);return u}function mn(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function G(o,u,f,g,x,S){var z=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var H=o.entanglements,se=o.expirationTimes,Ae=o.hiddenUpdates;for(f=z&~f;0<f;){var De=31-Kt(f),Ve=1<<De;H[De]=0,se[De]=-1;var je=Ae[De];if(je!==null)for(Ae[De]=null,De=0;De<je.length;De++){var ke=je[De];ke!==null&&(ke.lane&=-536870913)}f&=~Ve}g!==0&&Re(o,g,0),S!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=S&~(z&~u))}function Re(o,u,f){o.pendingLanes|=u,o.suspendedLanes&=~u;var g=31-Kt(u);o.entangledLanes|=u,o.entanglements[g]=o.entanglements[g]|1073741824|f&261930}function Pe(o,u){var f=o.entangledLanes|=u;for(o=o.entanglements;f;){var g=31-Kt(f),x=1<<g;x&u|o[g]&u&&(o[g]|=u),f&=~x}}function mt(o,u){var f=u&-u;return f=(f&42)!==0?1:bt(f),(f&(o.suspendedLanes|u))!==0?0:f}function bt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Pt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Wt(){var o=ee.p;return o!==0?o:(o=window.event,o===void 0?32:Ak(o.type))}function br(o,u){var f=ee.p;try{return ee.p=o,u()}finally{ee.p=f}}var Jt=Math.random().toString(36).slice(2),$t="__reactFiber$"+Jt,$r="__reactProps$"+Jt,gn="__reactContainer$"+Jt,Yr="__reactEvents$"+Jt,Zi="__reactListeners$"+Jt,ho="__reactHandles$"+Jt,zs="__reactResources$"+Jt,Sa="__reactMarker$"+Jt;function xt(o){delete o[$t],delete o[$r],delete o[Yr],delete o[Zi],delete o[ho]}function he(o){var u=o[$t];if(u)return u;for(var f=o.parentNode;f;){if(u=f[gn]||f[$t]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(o=ck(o);o!==null;){if(f=o[$t])return f;o=ck(o)}return u}o=f,f=o.parentNode}return null}function He(o){if(o=o[$t]||o[gn]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function at(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function qt(o){var u=o[zs];return u||(u=o[zs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function cr(o){o[Sa]=!0}var yn=new Set,Vr={};function vn(o,u){Sr(o,u),Sr(o+"Capture",u)}function Sr(o,u){for(Vr[o]=u,o=0;o<u.length;o++)yn.add(u[o])}var fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$s={},Go={};function ku(o){return $e.call(Go,o)?!0:$e.call($s,o)?!1:fo.test(o)?Go[o]=!0:($s[o]=!0,!1)}function Vs(o,u,f){if(ku(u))if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+f)}}function Fs(o,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+f)}}function oa(o,u,f,g){if(g===null)o.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(u,f,""+g)}}function Ei(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ou(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function u0(o,u,f){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,S=g.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return x.call(this)},set:function(z){f=""+z,S.call(this,z)}}),Object.defineProperty(o,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(z){f=""+z},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Ko(o){if(!o._valueTracker){var u=Ou(o)?"checked":"value";o._valueTracker=u0(o,u,""+o[u])}}function nc(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return o&&(g=Ou(o)?o.checked?"true":"false":o.value),o=g,o!==f?(u.setValue(o),!0):!1}function Wo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ps=/[\n"\\]/g;function ue(o){return o.replace(ps,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ce(o,u,f,g,x,S,z,H){o.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?o.type=z:o.removeAttribute("type"),u!=null?z==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Ei(u)):o.value!==""+Ei(u)&&(o.value=""+Ei(u)):z!=="submit"&&z!=="reset"||o.removeAttribute("value"),u!=null?tt(o,z,Ei(u)):f!=null?tt(o,z,Ei(f)):g!=null&&o.removeAttribute("value"),x==null&&S!=null&&(o.defaultChecked=!!S),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+Ei(H):o.removeAttribute("name")}function qe(o,u,f,g,x,S,z,H){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),u!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||u!=null)){Ko(o);return}f=f!=null?""+Ei(f):"",u=u!=null?""+Ei(u):f,H||u===o.value||(o.value=u),o.defaultValue=u}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=H?o.checked:!!g,o.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(o.name=z),Ko(o)}function tt(o,u,f){u==="number"&&Wo(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Qe(o,u,f,g){if(o=o.options,u){u={};for(var x=0;x<f.length;x++)u["$"+f[x]]=!0;for(f=0;f<o.length;f++)x=u.hasOwnProperty("$"+o[f].value),o[f].selected!==x&&(o[f].selected=x),x&&g&&(o[f].defaultSelected=!0)}else{for(f=""+Ei(f),u=null,x=0;x<o.length;x++){if(o[x].value===f){o[x].selected=!0,g&&(o[x].defaultSelected=!0);return}u!==null||o[x].disabled||(u=o[x])}u!==null&&(u.selected=!0)}}function hr(o,u,f){if(u!=null&&(u=""+Ei(u),u!==o.value&&(o.value=u),f==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=f!=null?""+Ei(f):""}function nr(o,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(J(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Ei(u),o.defaultValue=f,g=o.textContent,g===f&&g!==""&&g!==null&&(o.value=g),Ko(o)}function Zr(o,u){if(u){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=u;return}}o.textContent=u}var Li=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ta(o,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":g?o.setProperty(u,f):typeof f!="number"||f===0||Li.has(u)?u==="float"?o.cssFloat=f:o[u]=(""+f).trim():o[u]=f+"px"}function ic(o,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var x in u)g=u[x],u.hasOwnProperty(x)&&f[x]!==g&&Ta(o,x,g)}else for(var S in u)u.hasOwnProperty(S)&&Ta(o,S,u[S])}function Xo(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Aa(o){return Ar.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Kn(){}var d0=null;function h0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Qo=null,Ha=null;function S1(o){var u=He(o);if(u&&(o=u.stateNode)){var f=o[$r]||null;e:switch(o=u.stateNode,u.type){case"input":if(Ce(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ue(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==o&&g.form===o.form){var x=g[$r]||null;if(!x)throw Error(n(90));Ce(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===o.form&&nc(g)}break e;case"textarea":hr(o,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&Qe(o,!!f.multiple,u,!1)}}}var Lf=!1;function T1(o,u,f){if(Lf)return o(u,f);Lf=!0;try{var g=o(u);return g}finally{if(Lf=!1,(Qo!==null||Ha!==null)&&(xy(),Qo&&(u=Qo,o=Ha,Ha=Qo=null,S1(u),o)))for(u=0;u<o.length;u++)S1(o[u])}}function Ea(o,u){var f=o.stateNode;if(f===null)return null;var g=f[$r]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bf=!1;if(qs)try{var po={};Object.defineProperty(po,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Bf=!1}var Ga=null,f0=null,mo=null;function ac(){if(mo)return mo;var o,u=f0,f=u.length,g,x="value"in Ga?Ga.value:Ga.textContent,S=x.length;for(o=0;o<f&&u[o]===x[o];o++);var z=f-o;for(g=1;g<=z&&u[f-g]===x[S-g];g++);return mo=x.slice(o,1<g?1-g:void 0)}function Ru(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function sc(){return!0}function _n(){return!1}function Ji(o){function u(f,g,x,S,z){this._reactName=f,this._targetInst=x,this.type=g,this.nativeEvent=S,this.target=z,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(f=o[H],this[H]=f?f(S):S[H]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?sc:_n,this.isPropagationStopped=_n,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),u}var Yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mu=Ji(Yo),oc=m({},Yo,{view:0,detail:0}),A1=Ji(oc),lc,p0,la,Pu=m({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==la&&(la&&o.type==="mousemove"?(lc=o.screenX-la.screenX,p0=o.screenY-la.screenY):p0=lc=0,la=o),lc)},movementY:function(o){return"movementY"in o?o.movementY:p0}}),E1=Ji(Pu),Du=m({},Pu,{dataTransfer:0}),N1=Ji(Du),Uf=m({},oc,{relatedTarget:0}),cc=Ji(Uf),j1=m({},Yo,{animationName:0,elapsedTime:0,pseudoElement:0}),m0=Ji(j1),vw=m({},Yo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),C1=Ji(vw),Lu=m({},Yo,{data:0}),zf=Ji(Lu),k1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O1(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Vf[o])?!!u[o]:!1}function uc(){return O1}var I1=m({},oc,{key:function(o){if(o.key){var u=k1[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Ru(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?$f[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(o){return o.type==="keypress"?Ru(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ru(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),R1=Ji(I1),Zo=m({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=Ji(Zo),M1=m({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),P1=Ji(M1),D1=m({},Yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),g0=Ji(D1),ca=m({},Pu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),L1=Ji(ca),B1=m({},Yo,{newState:0,oldState:0}),dc=Ji(B1),v=[9,13,27,32],O=qs&&"CompositionEvent"in window,V=null;qs&&"documentMode"in document&&(V=document.documentMode);var W=qs&&"TextEvent"in window&&!V,_e=qs&&(!O||V&&8<V&&11>=V),Oe=" ",st=!1;function Br(o,u){switch(o){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ni(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ur=!1;function Ni(o,u){switch(o){case"compositionend":return ni(u);case"keypress":return u.which!==32?null:(st=!0,Oe);case"textInput":return o=u.data,o===Oe&&st?null:o;default:return null}}function ji(o,u){if(ur)return o==="compositionend"||!O&&Br(o,u)?(o=ac(),mo=f0=Ga=null,ur=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _e&&u.locale!=="ko"?null:u.data;default:return null}}var hc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Na(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!hc[o.type]:u==="textarea"}function Bu(o,u,f,g){Qo?Ha?Ha.push(g):Ha=[g]:Qo=g,u=Ny(u,"onChange"),0<u.length&&(f=new Mu("onChange","change",null,f,g),o.push({event:f,listeners:u}))}var Jo=null,qf=null;function dQ(o){XC(o,0)}function U1(o){var u=at(o);if(nc(u))return o}function p9(o,u){if(o==="change")return u}var m9=!1;if(qs){var bw;if(qs){var xw="oninput"in document;if(!xw){var g9=document.createElement("div");g9.setAttribute("oninput","return;"),xw=typeof g9.oninput=="function"}bw=xw}else bw=!1;m9=bw&&(!document.documentMode||9<document.documentMode)}function y9(){Jo&&(Jo.detachEvent("onpropertychange",v9),qf=Jo=null)}function v9(o){if(o.propertyName==="value"&&U1(qf)){var u=[];Bu(u,qf,o,h0(o)),T1(dQ,u)}}function hQ(o,u,f){o==="focusin"?(y9(),Jo=u,qf=f,Jo.attachEvent("onpropertychange",v9)):o==="focusout"&&y9()}function fQ(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return U1(qf)}function pQ(o,u){if(o==="click")return U1(u)}function mQ(o,u){if(o==="input"||o==="change")return U1(u)}function gQ(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Ka=typeof Object.is=="function"?Object.is:gQ;function Hf(o,u){if(Ka(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var f=Object.keys(o),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var x=f[g];if(!$e.call(u,x)||!Ka(o[x],u[x]))return!1}return!0}function b9(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function x9(o,u){var f=b9(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=u&&g>=u)return{node:f,offset:u-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=b9(f)}}function w9(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?w9(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function _9(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Wo(o.document);u instanceof o.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)o=u.contentWindow;else break;u=Wo(o.document)}return u}function ww(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var yQ=qs&&"documentMode"in document&&11>=document.documentMode,y0=null,_w=null,Gf=null,Sw=!1;function S9(o,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Sw||y0==null||y0!==Wo(g)||(g=y0,"selectionStart"in g&&ww(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Gf&&Hf(Gf,g)||(Gf=g,g=Ny(_w,"onSelect"),0<g.length&&(u=new Mu("onSelect","select",null,u,f),o.push({event:u,listeners:g}),u.target=y0)))}function Uu(o,u){var f={};return f[o.toLowerCase()]=u.toLowerCase(),f["Webkit"+o]="webkit"+u,f["Moz"+o]="moz"+u,f}var v0={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionrun:Uu("Transition","TransitionRun"),transitionstart:Uu("Transition","TransitionStart"),transitioncancel:Uu("Transition","TransitionCancel"),transitionend:Uu("Transition","TransitionEnd")},Tw={},T9={};qs&&(T9=document.createElement("div").style,"AnimationEvent"in window||(delete v0.animationend.animation,delete v0.animationiteration.animation,delete v0.animationstart.animation),"TransitionEvent"in window||delete v0.transitionend.transition);function zu(o){if(Tw[o])return Tw[o];if(!v0[o])return o;var u=v0[o],f;for(f in u)if(u.hasOwnProperty(f)&&f in T9)return Tw[o]=u[f];return o}var A9=zu("animationend"),E9=zu("animationiteration"),N9=zu("animationstart"),vQ=zu("transitionrun"),bQ=zu("transitionstart"),xQ=zu("transitioncancel"),j9=zu("transitionend"),C9=new Map,Aw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Aw.push("scrollEnd");function Hs(o,u){C9.set(o,u),vn(u,[o])}var z1=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ms=[],b0=0,Ew=0;function $1(){for(var o=b0,u=Ew=b0=0;u<o;){var f=ms[u];ms[u++]=null;var g=ms[u];ms[u++]=null;var x=ms[u];ms[u++]=null;var S=ms[u];if(ms[u++]=null,g!==null&&x!==null){var z=g.pending;z===null?x.next=x:(x.next=z.next,z.next=x),g.pending=x}S!==0&&k9(f,x,S)}}function V1(o,u,f,g){ms[b0++]=o,ms[b0++]=u,ms[b0++]=f,ms[b0++]=g,Ew|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function Nw(o,u,f,g){return V1(o,u,f,g),F1(o)}function $u(o,u){return V1(o,null,null,u),F1(o)}function k9(o,u,f){o.lanes|=f;var g=o.alternate;g!==null&&(g.lanes|=f);for(var x=!1,S=o.return;S!==null;)S.childLanes|=f,g=S.alternate,g!==null&&(g.childLanes|=f),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(x=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,x&&u!==null&&(x=31-Kt(f),o=S.hiddenUpdates,g=o[x],g===null?o[x]=[u]:g.push(u),u.lane=f|536870912),S):null}function F1(o){if(50<pp)throw pp=0,D4=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var x0={};function wQ(o,u,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wa(o,u,f,g){return new wQ(o,u,f,g)}function jw(o){return o=o.prototype,!(!o||!o.isReactComponent)}function el(o,u){var f=o.alternate;return f===null?(f=Wa(o.tag,u,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=u,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,u=o.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function O9(o,u){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,u=f.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function q1(o,u,f,g,x,S){var z=0;if(g=o,typeof o=="function")jw(o)&&(z=1);else if(typeof o=="string")z=EY(o,f,oe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case R:return o=Wa(31,f,u,x),o.elementType=R,o.lanes=S,o;case _:return Vu(f.children,x,S,u);case w:z=8,x|=24;break;case N:return o=Wa(12,f,u,x|2),o.elementType=N,o.lanes=S,o;case I:return o=Wa(13,f,u,x),o.elementType=I,o.lanes=S,o;case L:return o=Wa(19,f,u,x),o.elementType=L,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:z=10;break e;case k:z=9;break e;case $:z=11;break e;case E:z=14;break e;case A:z=16,g=null;break e}z=29,f=Error(n(130,o===null?"null":typeof o,"")),g=null}return u=Wa(z,f,u,x),u.elementType=o,u.type=g,u.lanes=S,u}function Vu(o,u,f,g){return o=Wa(7,o,g,u),o.lanes=f,o}function Cw(o,u,f){return o=Wa(6,o,null,u),o.lanes=f,o}function I9(o){var u=Wa(18,null,null,0);return u.stateNode=o,u}function kw(o,u,f){return u=Wa(4,o.children!==null?o.children:[],o.key,u),u.lanes=f,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var R9=new WeakMap;function gs(o,u){if(typeof o=="object"&&o!==null){var f=R9.get(o);return f!==void 0?f:(u={value:o,source:u,stack:Ie(u)},R9.set(o,u),u)}return{value:o,source:u,stack:Ie(u)}}var w0=[],_0=0,H1=null,Kf=0,ys=[],vs=0,fc=null,go=1,yo="";function tl(o,u){w0[_0++]=Kf,w0[_0++]=H1,H1=o,Kf=u}function M9(o,u,f){ys[vs++]=go,ys[vs++]=yo,ys[vs++]=fc,fc=o;var g=go;o=yo;var x=32-Kt(g)-1;g&=~(1<<x),f+=1;var S=32-Kt(u)+x;if(30<S){var z=x-x%5;S=(g&(1<<z)-1).toString(32),g>>=z,x-=z,go=1<<32-Kt(u)+x|f<<x|g,yo=S+o}else go=1<<S|f<<x|g,yo=o}function Ow(o){o.return!==null&&(tl(o,1),M9(o,1,0))}function Iw(o){for(;o===H1;)H1=w0[--_0],w0[_0]=null,Kf=w0[--_0],w0[_0]=null;for(;o===fc;)fc=ys[--vs],ys[vs]=null,yo=ys[--vs],ys[vs]=null,go=ys[--vs],ys[vs]=null}function P9(o,u){ys[vs++]=go,ys[vs++]=yo,ys[vs++]=fc,go=u.id,yo=u.overflow,fc=o}var Bi=null,Sn=null,xr=!1,pc=null,bs=!1,Rw=Error(n(519));function mc(o){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wf(gs(u,o)),Rw}function D9(o){var u=o.stateNode,f=o.type,g=o.memoizedProps;switch(u[$t]=o,u[$r]=g,f){case"dialog":pr("cancel",u),pr("close",u);break;case"iframe":case"object":case"embed":pr("load",u);break;case"video":case"audio":for(f=0;f<gp.length;f++)pr(gp[f],u);break;case"source":pr("error",u);break;case"img":case"image":case"link":pr("error",u),pr("load",u);break;case"details":pr("toggle",u);break;case"input":pr("invalid",u),qe(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":pr("invalid",u);break;case"textarea":pr("invalid",u),nr(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||JC(u.textContent,f)?(g.popover!=null&&(pr("beforetoggle",u),pr("toggle",u)),g.onScroll!=null&&pr("scroll",u),g.onScrollEnd!=null&&pr("scrollend",u),g.onClick!=null&&(u.onclick=Kn),u=!0):u=!1,u||mc(o,!0)}function L9(o){for(Bi=o.return;Bi;)switch(Bi.tag){case 5:case 31:case 13:bs=!1;return;case 27:case 3:bs=!0;return;default:Bi=Bi.return}}function S0(o){if(o!==Bi)return!1;if(!xr)return L9(o),xr=!0,!1;var u=o.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Y4(o.type,o.memoizedProps)),f=!f),f&&Sn&&mc(o),L9(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Sn=lk(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Sn=lk(o)}else u===27?(u=Sn,Cc(o.type)?(o=r5,r5=null,Sn=o):Sn=u):Sn=Bi?ws(o.stateNode.nextSibling):null;return!0}function Fu(){Sn=Bi=null,xr=!1}function Mw(){var o=pc;return o!==null&&(Oa===null?Oa=o:Oa.push.apply(Oa,o),pc=null),o}function Wf(o){pc===null?pc=[o]:pc.push(o)}var Pw=Q(null),qu=null,rl=null;function gc(o,u,f){de(Pw,u._currentValue),u._currentValue=f}function nl(o){o._currentValue=Pw.current,re(Pw)}function Dw(o,u,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),o===f)break;o=o.return}}function Lw(o,u,f,g){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var S=x.dependencies;if(S!==null){var z=x.child;S=S.firstContext;e:for(;S!==null;){var H=S;S=x;for(var se=0;se<u.length;se++)if(H.context===u[se]){S.lanes|=f,H=S.alternate,H!==null&&(H.lanes|=f),Dw(S.return,f,o),g||(z=null);break e}S=H.next}}else if(x.tag===18){if(z=x.return,z===null)throw Error(n(341));z.lanes|=f,S=z.alternate,S!==null&&(S.lanes|=f),Dw(z,f,o),z=null}else z=x.child;if(z!==null)z.return=x;else for(z=x;z!==null;){if(z===o){z=null;break}if(x=z.sibling,x!==null){x.return=z.return,z=x;break}z=z.return}x=z}}function T0(o,u,f,g){o=null;for(var x=u,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var z=x.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var H=x.type;Ka(x.pendingProps.value,z.value)||(o!==null?o.push(H):o=[H])}}else if(x===ve.current){if(z=x.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(wp):o=[wp])}x=x.return}o!==null&&Lw(u,o,f,g),u.flags|=262144}function G1(o){for(o=o.firstContext;o!==null;){if(!Ka(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Hu(o){qu=o,rl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ui(o){return B9(qu,o)}function K1(o,u){return qu===null&&Hu(o),B9(o,u)}function B9(o,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},rl===null){if(o===null)throw Error(n(308));rl=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else rl=rl.next=u;return f}var _Q=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(f,g){o.push(g)}};this.abort=function(){u.aborted=!0,o.forEach(function(f){return f()})}},SQ=t.unstable_scheduleCallback,TQ=t.unstable_NormalPriority,ii={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bw(){return{controller:new _Q,data:new Map,refCount:0}}function Xf(o){o.refCount--,o.refCount===0&&SQ(TQ,function(){o.controller.abort()})}var Qf=null,Uw=0,A0=0,E0=null;function AQ(o,u){if(Qf===null){var f=Qf=[];Uw=0,A0=V4(),E0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Uw++,u.then(U9,U9),u}function U9(){if(--Uw===0&&Qf!==null){E0!==null&&(E0.status="fulfilled");var o=Qf;Qf=null,A0=0,E0=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function EQ(o,u){var f=[],g={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return o.then(function(){g.status="fulfilled",g.value=u;for(var x=0;x<f.length;x++)(0,f[x])(u)},function(x){for(g.status="rejected",g.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),g}var z9=X.S;X.S=function(o,u){SC=We(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&AQ(o,u),z9!==null&&z9(o,u)};var Gu=Q(null);function zw(){var o=Gu.current;return o!==null?o:ln.pooledCache}function W1(o,u){u===null?de(Gu,Gu.current):de(Gu,u.pool)}function $9(){var o=zw();return o===null?null:{parent:ii._currentValue,pool:o}}var N0=Error(n(460)),$w=Error(n(474)),X1=Error(n(542)),Q1={then:function(){}};function V9(o){return o=o.status,o==="fulfilled"||o==="rejected"}function F9(o,u,f){switch(f=o[f],f===void 0?o.push(u):f!==u&&(u.then(Kn,Kn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,H9(o),o;default:if(typeof u.status=="string")u.then(Kn,Kn);else{if(o=ln,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(g){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=g}},function(g){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,H9(o),o}throw Wu=u,N0}}function Ku(o){try{var u=o._init;return u(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Wu=f,N0):f}}var Wu=null;function q9(){if(Wu===null)throw Error(n(459));var o=Wu;return Wu=null,o}function H9(o){if(o===N0||o===X1)throw Error(n(483))}var j0=null,Yf=0;function Y1(o){var u=Yf;return Yf+=1,j0===null&&(j0=[]),F9(j0,o,u)}function Zf(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Z1(o,u){throw u.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function G9(o){function u(be,fe){if(o){var Se=be.deletions;Se===null?(be.deletions=[fe],be.flags|=16):Se.push(fe)}}function f(be,fe){if(!o)return null;for(;fe!==null;)u(be,fe),fe=fe.sibling;return null}function g(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function x(be,fe){return be=el(be,fe),be.index=0,be.sibling=null,be}function S(be,fe,Se){return be.index=Se,o?(Se=be.alternate,Se!==null?(Se=Se.index,Se<fe?(be.flags|=67108866,fe):Se):(be.flags|=67108866,fe)):(be.flags|=1048576,fe)}function z(be){return o&&be.alternate===null&&(be.flags|=67108866),be}function H(be,fe,Se,ze){return fe===null||fe.tag!==6?(fe=Cw(Se,be.mode,ze),fe.return=be,fe):(fe=x(fe,Se),fe.return=be,fe)}function se(be,fe,Se,ze){var kt=Se.type;return kt===_?De(be,fe,Se.props.children,ze,Se.key):fe!==null&&(fe.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===A&&Ku(kt)===fe.type)?(fe=x(fe,Se.props),Zf(fe,Se),fe.return=be,fe):(fe=q1(Se.type,Se.key,Se.props,null,be.mode,ze),Zf(fe,Se),fe.return=be,fe)}function Ae(be,fe,Se,ze){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Se.containerInfo||fe.stateNode.implementation!==Se.implementation?(fe=kw(Se,be.mode,ze),fe.return=be,fe):(fe=x(fe,Se.children||[]),fe.return=be,fe)}function De(be,fe,Se,ze,kt){return fe===null||fe.tag!==7?(fe=Vu(Se,be.mode,ze,kt),fe.return=be,fe):(fe=x(fe,Se),fe.return=be,fe)}function Ve(be,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Cw(""+fe,be.mode,Se),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return Se=q1(fe.type,fe.key,fe.props,null,be.mode,Se),Zf(Se,fe),Se.return=be,Se;case T:return fe=kw(fe,be.mode,Se),fe.return=be,fe;case A:return fe=Ku(fe),Ve(be,fe,Se)}if(J(fe)||B(fe))return fe=Vu(fe,be.mode,Se,null),fe.return=be,fe;if(typeof fe.then=="function")return Ve(be,Y1(fe),Se);if(fe.$$typeof===C)return Ve(be,K1(be,fe),Se);Z1(be,fe)}return null}function je(be,fe,Se,ze){var kt=fe!==null?fe.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return kt!==null?null:H(be,fe,""+Se,ze);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:return Se.key===kt?se(be,fe,Se,ze):null;case T:return Se.key===kt?Ae(be,fe,Se,ze):null;case A:return Se=Ku(Se),je(be,fe,Se,ze)}if(J(Se)||B(Se))return kt!==null?null:De(be,fe,Se,ze,null);if(typeof Se.then=="function")return je(be,fe,Y1(Se),ze);if(Se.$$typeof===C)return je(be,fe,K1(be,Se),ze);Z1(be,Se)}return null}function ke(be,fe,Se,ze,kt){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return be=be.get(Se)||null,H(fe,be,""+ze,kt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case b:return be=be.get(ze.key===null?Se:ze.key)||null,se(fe,be,ze,kt);case T:return be=be.get(ze.key===null?Se:ze.key)||null,Ae(fe,be,ze,kt);case A:return ze=Ku(ze),ke(be,fe,Se,ze,kt)}if(J(ze)||B(ze))return be=be.get(Se)||null,De(fe,be,ze,kt,null);if(typeof ze.then=="function")return ke(be,fe,Se,Y1(ze),kt);if(ze.$$typeof===C)return ke(be,fe,Se,K1(fe,ze),kt);Z1(fe,ze)}return null}function Tt(be,fe,Se,ze){for(var kt=null,Er=null,Nt=fe,ir=fe=0,gr=null;Nt!==null&&ir<Se.length;ir++){Nt.index>ir?(gr=Nt,Nt=null):gr=Nt.sibling;var Nr=je(be,Nt,Se[ir],ze);if(Nr===null){Nt===null&&(Nt=gr);break}o&&Nt&&Nr.alternate===null&&u(be,Nt),fe=S(Nr,fe,ir),Er===null?kt=Nr:Er.sibling=Nr,Er=Nr,Nt=gr}if(ir===Se.length)return f(be,Nt),xr&&tl(be,ir),kt;if(Nt===null){for(;ir<Se.length;ir++)Nt=Ve(be,Se[ir],ze),Nt!==null&&(fe=S(Nt,fe,ir),Er===null?kt=Nt:Er.sibling=Nt,Er=Nt);return xr&&tl(be,ir),kt}for(Nt=g(Nt);ir<Se.length;ir++)gr=ke(Nt,be,ir,Se[ir],ze),gr!==null&&(o&&gr.alternate!==null&&Nt.delete(gr.key===null?ir:gr.key),fe=S(gr,fe,ir),Er===null?kt=gr:Er.sibling=gr,Er=gr);return o&&Nt.forEach(function(Mc){return u(be,Mc)}),xr&&tl(be,ir),kt}function Dt(be,fe,Se,ze){if(Se==null)throw Error(n(151));for(var kt=null,Er=null,Nt=fe,ir=fe=0,gr=null,Nr=Se.next();Nt!==null&&!Nr.done;ir++,Nr=Se.next()){Nt.index>ir?(gr=Nt,Nt=null):gr=Nt.sibling;var Mc=je(be,Nt,Nr.value,ze);if(Mc===null){Nt===null&&(Nt=gr);break}o&&Nt&&Mc.alternate===null&&u(be,Nt),fe=S(Mc,fe,ir),Er===null?kt=Mc:Er.sibling=Mc,Er=Mc,Nt=gr}if(Nr.done)return f(be,Nt),xr&&tl(be,ir),kt;if(Nt===null){for(;!Nr.done;ir++,Nr=Se.next())Nr=Ve(be,Nr.value,ze),Nr!==null&&(fe=S(Nr,fe,ir),Er===null?kt=Nr:Er.sibling=Nr,Er=Nr);return xr&&tl(be,ir),kt}for(Nt=g(Nt);!Nr.done;ir++,Nr=Se.next())Nr=ke(Nt,be,ir,Nr.value,ze),Nr!==null&&(o&&Nr.alternate!==null&&Nt.delete(Nr.key===null?ir:Nr.key),fe=S(Nr,fe,ir),Er===null?kt=Nr:Er.sibling=Nr,Er=Nr);return o&&Nt.forEach(function(LY){return u(be,LY)}),xr&&tl(be,ir),kt}function tn(be,fe,Se,ze){if(typeof Se=="object"&&Se!==null&&Se.type===_&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:e:{for(var kt=Se.key;fe!==null;){if(fe.key===kt){if(kt=Se.type,kt===_){if(fe.tag===7){f(be,fe.sibling),ze=x(fe,Se.props.children),ze.return=be,be=ze;break e}}else if(fe.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===A&&Ku(kt)===fe.type){f(be,fe.sibling),ze=x(fe,Se.props),Zf(ze,Se),ze.return=be,be=ze;break e}f(be,fe);break}else u(be,fe);fe=fe.sibling}Se.type===_?(ze=Vu(Se.props.children,be.mode,ze,Se.key),ze.return=be,be=ze):(ze=q1(Se.type,Se.key,Se.props,null,be.mode,ze),Zf(ze,Se),ze.return=be,be=ze)}return z(be);case T:e:{for(kt=Se.key;fe!==null;){if(fe.key===kt)if(fe.tag===4&&fe.stateNode.containerInfo===Se.containerInfo&&fe.stateNode.implementation===Se.implementation){f(be,fe.sibling),ze=x(fe,Se.children||[]),ze.return=be,be=ze;break e}else{f(be,fe);break}else u(be,fe);fe=fe.sibling}ze=kw(Se,be.mode,ze),ze.return=be,be=ze}return z(be);case A:return Se=Ku(Se),tn(be,fe,Se,ze)}if(J(Se))return Tt(be,fe,Se,ze);if(B(Se)){if(kt=B(Se),typeof kt!="function")throw Error(n(150));return Se=kt.call(Se),Dt(be,fe,Se,ze)}if(typeof Se.then=="function")return tn(be,fe,Y1(Se),ze);if(Se.$$typeof===C)return tn(be,fe,K1(be,Se),ze);Z1(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,fe!==null&&fe.tag===6?(f(be,fe.sibling),ze=x(fe,Se),ze.return=be,be=ze):(f(be,fe),ze=Cw(Se,be.mode,ze),ze.return=be,be=ze),z(be)):f(be,fe)}return function(be,fe,Se,ze){try{Yf=0;var kt=tn(be,fe,Se,ze);return j0=null,kt}catch(Nt){if(Nt===N0||Nt===X1)throw Nt;var Er=Wa(29,Nt,null,be.mode);return Er.lanes=ze,Er.return=be,Er}finally{}}}var Xu=G9(!0),K9=G9(!1),yc=!1;function Vw(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fw(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function vc(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function bc(o,u,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Rr&2)!==0){var x=g.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),g.pending=u,u=F1(o),k9(o,null,f),u}return V1(o,g,u,f),F1(o)}function Jf(o,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=o.pendingLanes,f|=g,u.lanes=f,Pe(o,f)}}function qw(o,u){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var x=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?x=S=z:S=S.next=z,f=f.next}while(f!==null);S===null?x=S=u:S=S.next=u}else x=S=u;f={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=u}var Hw=!1;function ep(){if(Hw){var o=E0;if(o!==null)throw o}}function tp(o,u,f,g){Hw=!1;var x=o.updateQueue;yc=!1;var S=x.firstBaseUpdate,z=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var se=H,Ae=se.next;se.next=null,z===null?S=Ae:z.next=Ae,z=se;var De=o.alternate;De!==null&&(De=De.updateQueue,H=De.lastBaseUpdate,H!==z&&(H===null?De.firstBaseUpdate=Ae:H.next=Ae,De.lastBaseUpdate=se))}if(S!==null){var Ve=x.baseState;z=0,De=Ae=se=null,H=S;do{var je=H.lane&-536870913,ke=je!==H.lane;if(ke?(mr&je)===je:(g&je)===je){je!==0&&je===A0&&(Hw=!0),De!==null&&(De=De.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Tt=o,Dt=H;je=u;var tn=f;switch(Dt.tag){case 1:if(Tt=Dt.payload,typeof Tt=="function"){Ve=Tt.call(tn,Ve,je);break e}Ve=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Dt.payload,je=typeof Tt=="function"?Tt.call(tn,Ve,je):Tt,je==null)break e;Ve=m({},Ve,je);break e;case 2:yc=!0}}je=H.callback,je!==null&&(o.flags|=64,ke&&(o.flags|=8192),ke=x.callbacks,ke===null?x.callbacks=[je]:ke.push(je))}else ke={lane:je,tag:H.tag,payload:H.payload,callback:H.callback,next:null},De===null?(Ae=De=ke,se=Ve):De=De.next=ke,z|=je;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;ke=H,H=ke.next,ke.next=null,x.lastBaseUpdate=ke,x.shared.pending=null}}while(!0);De===null&&(se=Ve),x.baseState=se,x.firstBaseUpdate=Ae,x.lastBaseUpdate=De,S===null&&(x.shared.lanes=0),Tc|=z,o.lanes=z,o.memoizedState=Ve}}function W9(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function X9(o,u){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)W9(f[o],u)}var C0=Q(null),J1=Q(0);function Q9(o,u){o=hl,de(J1,o),de(C0,u),hl=o|u.baseLanes}function Gw(){de(J1,hl),de(C0,C0.current)}function Kw(){hl=J1.current,re(C0),re(J1)}var Xa=Q(null),xs=null;function xc(o){var u=o.alternate;de(Wn,Wn.current&1),de(Xa,o),xs===null&&(u===null||C0.current!==null||u.memoizedState!==null)&&(xs=o)}function Ww(o){de(Wn,Wn.current),de(Xa,o),xs===null&&(xs=o)}function Y9(o){o.tag===22?(de(Wn,Wn.current),de(Xa,o),xs===null&&(xs=o)):wc()}function wc(){de(Wn,Wn.current),de(Xa,Xa.current)}function Qa(o){re(Xa),xs===o&&(xs=null),re(Wn)}var Wn=Q(0);function ey(o){for(var u=o;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||e5(f)||t5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var il=0,rr=null,Jr=null,ai=null,ty=!1,k0=!1,Qu=!1,ry=0,rp=0,O0=null,NQ=0;function Ln(){throw Error(n(321))}function Xw(o,u){if(u===null)return!1;for(var f=0;f<u.length&&f<o.length;f++)if(!Ka(o[f],u[f]))return!1;return!0}function Qw(o,u,f,g,x,S){return il=S,rr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,X.H=o===null||o.memoizedState===null?Mj:d4,Qu=!1,S=f(g,x),Qu=!1,k0&&(S=J9(u,f,g,x)),Z9(o),S}function Z9(o){X.H=ap;var u=Jr!==null&&Jr.next!==null;if(il=0,ai=Jr=rr=null,ty=!1,rp=0,O0=null,u)throw Error(n(300));o===null||si||(o=o.dependencies,o!==null&&G1(o)&&(si=!0))}function J9(o,u,f,g){rr=o;var x=0;do{if(k0&&(O0=null),rp=0,k0=!1,25<=x)throw Error(n(301));if(x+=1,ai=Jr=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}X.H=Pj,S=u(f,g)}while(k0);return S}function jQ(){var o=X.H,u=o.useState()[0];return u=typeof u.then=="function"?np(u):u,o=o.useState()[0],(Jr!==null?Jr.memoizedState:null)!==o&&(rr.flags|=1024),u}function Yw(){var o=ry!==0;return ry=0,o}function Zw(o,u,f){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~f}function Jw(o){if(ty){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}ty=!1}il=0,ai=Jr=rr=null,k0=!1,rp=ry=0,O0=null}function ua(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?rr.memoizedState=ai=o:ai=ai.next=o,ai}function Xn(){if(Jr===null){var o=rr.alternate;o=o!==null?o.memoizedState:null}else o=Jr.next;var u=ai===null?rr.memoizedState:ai.next;if(u!==null)ai=u,Jr=o;else{if(o===null)throw rr.alternate===null?Error(n(467)):Error(n(310));Jr=o,o={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},ai===null?rr.memoizedState=ai=o:ai=ai.next=o}return ai}function ny(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function np(o){var u=rp;return rp+=1,O0===null&&(O0=[]),o=F9(O0,o,u),u=rr,(ai===null?u.memoizedState:ai.next)===null&&(u=u.alternate,X.H=u===null||u.memoizedState===null?Mj:d4),o}function iy(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return np(o);if(o.$$typeof===C)return Ui(o)}throw Error(n(438,String(o)))}function e4(o){var u=null,f=rr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=rr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=ny(),rr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(o),g=0;g<o;g++)f[g]=F;return u.index++,f}function al(o,u){return typeof u=="function"?u(o):u}function ay(o){var u=Xn();return t4(u,Jr,o)}function t4(o,u,f){var g=o.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var x=o.baseQueue,S=g.pending;if(S!==null){if(x!==null){var z=x.next;x.next=S.next,S.next=z}u.baseQueue=x=S,g.pending=null}if(S=o.baseState,x===null)o.memoizedState=S;else{u=x.next;var H=z=null,se=null,Ae=u,De=!1;do{var Ve=Ae.lane&-536870913;if(Ve!==Ae.lane?(mr&Ve)===Ve:(il&Ve)===Ve){var je=Ae.revertLane;if(je===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Ve===A0&&(De=!0);else if((il&je)===je){Ae=Ae.next,je===A0&&(De=!0);continue}else Ve={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},se===null?(H=se=Ve,z=S):se=se.next=Ve,rr.lanes|=je,Tc|=je;Ve=Ae.action,Qu&&f(S,Ve),S=Ae.hasEagerState?Ae.eagerState:f(S,Ve)}else je={lane:Ve,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},se===null?(H=se=je,z=S):se=se.next=je,rr.lanes|=Ve,Tc|=Ve;Ae=Ae.next}while(Ae!==null&&Ae!==u);if(se===null?z=S:se.next=H,!Ka(S,o.memoizedState)&&(si=!0,De&&(f=E0,f!==null)))throw f;o.memoizedState=S,o.baseState=z,o.baseQueue=se,g.lastRenderedState=S}return x===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function r4(o){var u=Xn(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var g=f.dispatch,x=f.pending,S=u.memoizedState;if(x!==null){f.pending=null;var z=x=x.next;do S=o(S,z.action),z=z.next;while(z!==x);Ka(S,u.memoizedState)||(si=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),f.lastRenderedState=S}return[S,g]}function ej(o,u,f){var g=rr,x=Xn(),S=xr;if(S){if(f===void 0)throw Error(n(407));f=f()}else f=u();var z=!Ka((Jr||x).memoizedState,f);if(z&&(x.memoizedState=f,si=!0),x=x.queue,a4(nj.bind(null,g,x,o),[o]),x.getSnapshot!==u||z||ai!==null&&ai.memoizedState.tag&1){if(g.flags|=2048,I0(9,{destroy:void 0},rj.bind(null,g,x,f,u),null),ln===null)throw Error(n(349));S||(il&127)!==0||tj(g,u,f)}return f}function tj(o,u,f){o.flags|=16384,o={getSnapshot:u,value:f},u=rr.updateQueue,u===null?(u=ny(),rr.updateQueue=u,u.stores=[o]):(f=u.stores,f===null?u.stores=[o]:f.push(o))}function rj(o,u,f,g){u.value=f,u.getSnapshot=g,ij(u)&&aj(o)}function nj(o,u,f){return f(function(){ij(u)&&aj(o)})}function ij(o){var u=o.getSnapshot;o=o.value;try{var f=u();return!Ka(o,f)}catch{return!0}}function aj(o){var u=$u(o,2);u!==null&&Ia(u,o,2)}function n4(o){var u=ua();if(typeof o=="function"){var f=o;if(o=f(),Qu){Ft(!0);try{f()}finally{Ft(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:o},u}function sj(o,u,f,g){return o.baseState=f,t4(o,Jr,typeof g=="function"?g:al)}function CQ(o,u,f,g,x){if(ly(o))throw Error(n(485));if(o=u.action,o!==null){var S={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){S.listeners.push(z)}};X.T!==null?f(!0):S.isTransition=!1,g(S),f=u.pending,f===null?(S.next=u.pending=S,oj(u,S)):(S.next=f.next,u.pending=f.next=S)}}function oj(o,u){var f=u.action,g=u.payload,x=o.state;if(u.isTransition){var S=X.T,z={};X.T=z;try{var H=f(x,g),se=X.S;se!==null&&se(z,H),lj(o,u,H)}catch(Ae){i4(o,u,Ae)}finally{S!==null&&z.types!==null&&(S.types=z.types),X.T=S}}else try{S=f(x,g),lj(o,u,S)}catch(Ae){i4(o,u,Ae)}}function lj(o,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){cj(o,u,g)},function(g){return i4(o,u,g)}):cj(o,u,f)}function cj(o,u,f){u.status="fulfilled",u.value=f,uj(u),o.state=f,u=o.pending,u!==null&&(f=u.next,f===u?o.pending=null:(f=f.next,u.next=f,oj(o,f)))}function i4(o,u,f){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,uj(u),u=u.next;while(u!==g)}o.action=null}function uj(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function dj(o,u){return u}function hj(o,u){if(xr){var f=ln.formState;if(f!==null){e:{var g=rr;if(xr){if(Sn){t:{for(var x=Sn,S=bs;x.nodeType!==8;){if(!S){x=null;break t}if(x=ws(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Sn=ws(x.nextSibling),g=x.data==="F!";break e}}mc(g)}g=!1}g&&(u=f[0])}}return f=ua(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dj,lastRenderedState:u},f.queue=g,f=Oj.bind(null,rr,g),g.dispatch=f,g=n4(!1),S=u4.bind(null,rr,!1,g.queue),g=ua(),x={state:u,dispatch:null,action:o,pending:null},g.queue=x,f=CQ.bind(null,rr,x,S,f),x.dispatch=f,g.memoizedState=o,[u,f,!1]}function fj(o){var u=Xn();return pj(u,Jr,o)}function pj(o,u,f){if(u=t4(o,u,dj)[0],o=ay(al)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=np(u)}catch(z){throw z===N0?X1:z}else g=u;u=Xn();var x=u.queue,S=x.dispatch;return f!==u.memoizedState&&(rr.flags|=2048,I0(9,{destroy:void 0},kQ.bind(null,x,f),null)),[g,S,o]}function kQ(o,u){o.action=u}function mj(o){var u=Xn(),f=Jr;if(f!==null)return pj(u,f,o);Xn(),u=u.memoizedState,f=Xn();var g=f.queue.dispatch;return f.memoizedState=o,[u,g,!1]}function I0(o,u,f,g){return o={tag:o,create:f,deps:g,inst:u,next:null},u=rr.updateQueue,u===null&&(u=ny(),rr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,u.lastEffect=o),o}function gj(){return Xn().memoizedState}function sy(o,u,f,g){var x=ua();rr.flags|=o,x.memoizedState=I0(1|u,{destroy:void 0},f,g===void 0?null:g)}function oy(o,u,f,g){var x=Xn();g=g===void 0?null:g;var S=x.memoizedState.inst;Jr!==null&&g!==null&&Xw(g,Jr.memoizedState.deps)?x.memoizedState=I0(u,S,f,g):(rr.flags|=o,x.memoizedState=I0(1|u,S,f,g))}function yj(o,u){sy(8390656,8,o,u)}function a4(o,u){oy(2048,8,o,u)}function OQ(o){rr.flags|=4;var u=rr.updateQueue;if(u===null)u=ny(),rr.updateQueue=u,u.events=[o];else{var f=u.events;f===null?u.events=[o]:f.push(o)}}function vj(o){var u=Xn().memoizedState;return OQ({ref:u,nextImpl:o}),function(){if((Rr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function bj(o,u){return oy(4,2,o,u)}function xj(o,u){return oy(4,4,o,u)}function wj(o,u){if(typeof u=="function"){o=o();var f=u(o);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function _j(o,u,f){f=f!=null?f.concat([o]):null,oy(4,4,wj.bind(null,u,o),f)}function s4(){}function Sj(o,u){var f=Xn();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&Xw(u,g[1])?g[0]:(f.memoizedState=[o,u],o)}function Tj(o,u){var f=Xn();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&Xw(u,g[1]))return g[0];if(g=o(),Qu){Ft(!0);try{o()}finally{Ft(!1)}}return f.memoizedState=[g,u],g}function o4(o,u,f){return f===void 0||(il&1073741824)!==0&&(mr&261930)===0?o.memoizedState=u:(o.memoizedState=f,o=AC(),rr.lanes|=o,Tc|=o,f)}function Aj(o,u,f,g){return Ka(f,u)?f:C0.current!==null?(o=o4(o,f,g),Ka(o,u)||(si=!0),o):(il&42)===0||(il&1073741824)!==0&&(mr&261930)===0?(si=!0,o.memoizedState=f):(o=AC(),rr.lanes|=o,Tc|=o,u)}function Ej(o,u,f,g,x){var S=ee.p;ee.p=S!==0&&8>S?S:8;var z=X.T,H={};X.T=H,u4(o,!1,u,f);try{var se=x(),Ae=X.S;if(Ae!==null&&Ae(H,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var De=EQ(se,g);ip(o,u,De,Ja(o))}else ip(o,u,g,Ja(o))}catch(Ve){ip(o,u,{then:function(){},status:"rejected",reason:Ve},Ja())}finally{ee.p=S,z!==null&&H.types!==null&&(z.types=H.types),X.T=z}}function IQ(){}function l4(o,u,f,g){if(o.tag!==5)throw Error(n(476));var x=Nj(o).queue;Ej(o,x,u,Z,f===null?IQ:function(){return jj(o),f(g)})}function Nj(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:Z},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:f},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function jj(o){var u=Nj(o);u.next===null&&(u=o.alternate.memoizedState),ip(o,u.next.queue,{},Ja())}function c4(){return Ui(wp)}function Cj(){return Xn().memoizedState}function kj(){return Xn().memoizedState}function RQ(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ja();o=vc(f);var g=bc(u,o,f);g!==null&&(Ia(g,u,f),Jf(g,u,f)),u={cache:Bw()},o.payload=u;return}u=u.return}}function MQ(o,u,f){var g=Ja();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},ly(o)?Ij(u,f):(f=Nw(o,u,f,g),f!==null&&(Ia(f,o,g),Rj(f,u,g)))}function Oj(o,u,f){var g=Ja();ip(o,u,f,g)}function ip(o,u,f,g){var x={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(ly(o))Ij(u,x);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var z=u.lastRenderedState,H=S(z,f);if(x.hasEagerState=!0,x.eagerState=H,Ka(H,z))return V1(o,u,x,0),ln===null&&$1(),!1}catch{}finally{}if(f=Nw(o,u,x,g),f!==null)return Ia(f,o,g),Rj(f,u,g),!0}return!1}function u4(o,u,f,g){if(g={lane:2,revertLane:V4(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ly(o)){if(u)throw Error(n(479))}else u=Nw(o,f,g,2),u!==null&&Ia(u,o,2)}function ly(o){var u=o.alternate;return o===rr||u!==null&&u===rr}function Ij(o,u){k0=ty=!0;var f=o.pending;f===null?u.next=u:(u.next=f.next,f.next=u),o.pending=u}function Rj(o,u,f){if((f&4194048)!==0){var g=u.lanes;g&=o.pendingLanes,f|=g,u.lanes=f,Pe(o,f)}}var ap={readContext:Ui,use:iy,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useLayoutEffect:Ln,useInsertionEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useSyncExternalStore:Ln,useId:Ln,useHostTransitionStatus:Ln,useFormState:Ln,useActionState:Ln,useOptimistic:Ln,useMemoCache:Ln,useCacheRefresh:Ln};ap.useEffectEvent=Ln;var Mj={readContext:Ui,use:iy,useCallback:function(o,u){return ua().memoizedState=[o,u===void 0?null:u],o},useContext:Ui,useEffect:yj,useImperativeHandle:function(o,u,f){f=f!=null?f.concat([o]):null,sy(4194308,4,wj.bind(null,u,o),f)},useLayoutEffect:function(o,u){return sy(4194308,4,o,u)},useInsertionEffect:function(o,u){sy(4,2,o,u)},useMemo:function(o,u){var f=ua();u=u===void 0?null:u;var g=o();if(Qu){Ft(!0);try{o()}finally{Ft(!1)}}return f.memoizedState=[g,u],g},useReducer:function(o,u,f){var g=ua();if(f!==void 0){var x=f(u);if(Qu){Ft(!0);try{f(u)}finally{Ft(!1)}}}else x=u;return g.memoizedState=g.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},g.queue=o,o=o.dispatch=MQ.bind(null,rr,o),[g.memoizedState,o]},useRef:function(o){var u=ua();return o={current:o},u.memoizedState=o},useState:function(o){o=n4(o);var u=o.queue,f=Oj.bind(null,rr,u);return u.dispatch=f,[o.memoizedState,f]},useDebugValue:s4,useDeferredValue:function(o,u){var f=ua();return o4(f,o,u)},useTransition:function(){var o=n4(!1);return o=Ej.bind(null,rr,o.queue,!0,!1),ua().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,f){var g=rr,x=ua();if(xr){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),ln===null)throw Error(n(349));(mr&127)!==0||tj(g,u,f)}x.memoizedState=f;var S={value:f,getSnapshot:u};return x.queue=S,yj(nj.bind(null,g,S,o),[o]),g.flags|=2048,I0(9,{destroy:void 0},rj.bind(null,g,S,f,u),null),f},useId:function(){var o=ua(),u=ln.identifierPrefix;if(xr){var f=yo,g=go;f=(g&~(1<<32-Kt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=ry++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=NQ++,u="_"+u+"r_"+f.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:c4,useFormState:hj,useActionState:hj,useOptimistic:function(o){var u=ua();u.memoizedState=u.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=u4.bind(null,rr,!0,f),f.dispatch=u,[o,u]},useMemoCache:e4,useCacheRefresh:function(){return ua().memoizedState=RQ.bind(null,rr)},useEffectEvent:function(o){var u=ua(),f={impl:o};return u.memoizedState=f,function(){if((Rr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},d4={readContext:Ui,use:iy,useCallback:Sj,useContext:Ui,useEffect:a4,useImperativeHandle:_j,useInsertionEffect:bj,useLayoutEffect:xj,useMemo:Tj,useReducer:ay,useRef:gj,useState:function(){return ay(al)},useDebugValue:s4,useDeferredValue:function(o,u){var f=Xn();return Aj(f,Jr.memoizedState,o,u)},useTransition:function(){var o=ay(al)[0],u=Xn().memoizedState;return[typeof o=="boolean"?o:np(o),u]},useSyncExternalStore:ej,useId:Cj,useHostTransitionStatus:c4,useFormState:fj,useActionState:fj,useOptimistic:function(o,u){var f=Xn();return sj(f,Jr,o,u)},useMemoCache:e4,useCacheRefresh:kj};d4.useEffectEvent=vj;var Pj={readContext:Ui,use:iy,useCallback:Sj,useContext:Ui,useEffect:a4,useImperativeHandle:_j,useInsertionEffect:bj,useLayoutEffect:xj,useMemo:Tj,useReducer:r4,useRef:gj,useState:function(){return r4(al)},useDebugValue:s4,useDeferredValue:function(o,u){var f=Xn();return Jr===null?o4(f,o,u):Aj(f,Jr.memoizedState,o,u)},useTransition:function(){var o=r4(al)[0],u=Xn().memoizedState;return[typeof o=="boolean"?o:np(o),u]},useSyncExternalStore:ej,useId:Cj,useHostTransitionStatus:c4,useFormState:mj,useActionState:mj,useOptimistic:function(o,u){var f=Xn();return Jr!==null?sj(f,Jr,o,u):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:e4,useCacheRefresh:kj};Pj.useEffectEvent=vj;function h4(o,u,f,g){u=o.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var f4={enqueueSetState:function(o,u,f){o=o._reactInternals;var g=Ja(),x=vc(g);x.payload=u,f!=null&&(x.callback=f),u=bc(o,x,g),u!==null&&(Ia(u,o,g),Jf(u,o,g))},enqueueReplaceState:function(o,u,f){o=o._reactInternals;var g=Ja(),x=vc(g);x.tag=1,x.payload=u,f!=null&&(x.callback=f),u=bc(o,x,g),u!==null&&(Ia(u,o,g),Jf(u,o,g))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var f=Ja(),g=vc(f);g.tag=2,u!=null&&(g.callback=u),u=bc(o,g,f),u!==null&&(Ia(u,o,f),Jf(u,o,f))}};function Dj(o,u,f,g,x,S,z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,z):u.prototype&&u.prototype.isPureReactComponent?!Hf(f,g)||!Hf(x,S):!0}function Lj(o,u,f,g){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==o&&f4.enqueueReplaceState(u,u.state,null)}function Yu(o,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(o=o.defaultProps){f===u&&(f=m({},f));for(var x in o)f[x]===void 0&&(f[x]=o[x])}return f}function Bj(o){z1(o)}function Uj(o){console.error(o)}function zj(o){z1(o)}function cy(o,u){try{var f=o.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function $j(o,u,f){try{var g=o.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function p4(o,u,f){return f=vc(f),f.tag=3,f.payload={element:null},f.callback=function(){cy(o,u)},f}function Vj(o){return o=vc(o),o.tag=3,o}function Fj(o,u,f,g){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var S=g.value;o.payload=function(){return x(S)},o.callback=function(){$j(u,f,g)}}var z=f.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(o.callback=function(){$j(u,f,g),typeof x!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function PQ(o,u,f,g,x){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&T0(u,f,x,!0),f=Xa.current,f!==null){switch(f.tag){case 31:case 13:return xs===null?wy():f.alternate===null&&Bn===0&&(Bn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,g===Q1?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),U4(o,g,x)),!1;case 22:return f.flags|=65536,g===Q1?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),U4(o,g,x)),!1}throw Error(n(435,f.tag))}return U4(o,g,x),wy(),!1}if(xr)return u=Xa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,g!==Rw&&(o=Error(n(422),{cause:g}),Wf(gs(o,f)))):(g!==Rw&&(u=Error(n(423),{cause:g}),Wf(gs(u,f))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,g=gs(g,f),x=p4(o.stateNode,g,x),qw(o,x),Bn!==4&&(Bn=2)),!1;var S=Error(n(520),{cause:g});if(S=gs(S,f),fp===null?fp=[S]:fp.push(S),Bn!==4&&(Bn=2),u===null)return!0;g=gs(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,o=x&-x,f.lanes|=o,o=p4(f.stateNode,g,o),qw(f,o),!1;case 1:if(u=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ac===null||!Ac.has(S))))return f.flags|=65536,x&=-x,f.lanes|=x,x=Vj(x),Fj(x,o,f,g),qw(f,x),!1}f=f.return}while(f!==null);return!1}var m4=Error(n(461)),si=!1;function zi(o,u,f,g){u.child=o===null?K9(u,null,f,g):Xu(u,o.child,f,g)}function qj(o,u,f,g,x){f=f.render;var S=u.ref;if("ref"in g){var z={};for(var H in g)H!=="ref"&&(z[H]=g[H])}else z=g;return Hu(u),g=Qw(o,u,f,z,S,x),H=Yw(),o!==null&&!si?(Zw(o,u,x),sl(o,u,x)):(xr&&H&&Ow(u),u.flags|=1,zi(o,u,g,x),u.child)}function Hj(o,u,f,g,x){if(o===null){var S=f.type;return typeof S=="function"&&!jw(S)&&S.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=S,Gj(o,u,S,g,x)):(o=q1(f.type,null,g,u,u.mode,x),o.ref=u.ref,o.return=u,u.child=o)}if(S=o.child,!S4(o,x)){var z=S.memoizedProps;if(f=f.compare,f=f!==null?f:Hf,f(z,g)&&o.ref===u.ref)return sl(o,u,x)}return u.flags|=1,o=el(S,g),o.ref=u.ref,o.return=u,u.child=o}function Gj(o,u,f,g,x){if(o!==null){var S=o.memoizedProps;if(Hf(S,g)&&o.ref===u.ref)if(si=!1,u.pendingProps=g=S,S4(o,x))(o.flags&131072)!==0&&(si=!0);else return u.lanes=o.lanes,sl(o,u,x)}return g4(o,u,f,g,x)}function Kj(o,u,f,g){var x=g.children,S=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,o!==null){for(g=u.child=o.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~S}else g=0,u.child=null;return Wj(o,u,S,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&W1(u,S!==null?S.cachePool:null),S!==null?Q9(u,S):Gw(),Y9(u);else return g=u.lanes=536870912,Wj(o,u,S!==null?S.baseLanes|f:f,f,g)}else S!==null?(W1(u,S.cachePool),Q9(u,S),wc(),u.memoizedState=null):(o!==null&&W1(u,null),Gw(),wc());return zi(o,u,x,f),u.child}function sp(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Wj(o,u,f,g,x){var S=zw();return S=S===null?null:{parent:ii._currentValue,pool:S},u.memoizedState={baseLanes:f,cachePool:S},o!==null&&W1(u,null),Gw(),Y9(u),o!==null&&T0(o,u,g,!0),u.childLanes=x,null}function uy(o,u){return u=hy({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Xj(o,u,f){return Xu(u,o.child,null,f),o=uy(u,u.pendingProps),o.flags|=2,Qa(u),u.memoizedState=null,o}function DQ(o,u,f){var g=u.pendingProps,x=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(xr){if(g.mode==="hidden")return o=uy(u,g),u.lanes=536870912,sp(null,o);if(Ww(u),(o=Sn)?(o=ok(o,bs),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:fc!==null?{id:go,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},f=I9(o),f.return=u,u.child=f,Bi=u,Sn=null)):o=null,o===null)throw mc(u);return u.lanes=536870912,null}return uy(u,g)}var S=o.memoizedState;if(S!==null){var z=S.dehydrated;if(Ww(u),x)if(u.flags&256)u.flags&=-257,u=Xj(o,u,f);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(n(558));else if(si||T0(o,u,f,!1),x=(f&o.childLanes)!==0,si||x){if(g=ln,g!==null&&(z=mt(g,f),z!==0&&z!==S.retryLane))throw S.retryLane=z,$u(o,z),Ia(g,o,z),m4;wy(),u=Xj(o,u,f)}else o=S.treeContext,Sn=ws(z.nextSibling),Bi=u,xr=!0,pc=null,bs=!1,o!==null&&P9(u,o),u=uy(u,g),u.flags|=4096;return u}return o=el(o.child,{mode:g.mode,children:g.children}),o.ref=u.ref,u.child=o,o.return=u,o}function dy(o,u){var f=u.ref;if(f===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(u.flags|=4194816)}}function g4(o,u,f,g,x){return Hu(u),f=Qw(o,u,f,g,void 0,x),g=Yw(),o!==null&&!si?(Zw(o,u,x),sl(o,u,x)):(xr&&g&&Ow(u),u.flags|=1,zi(o,u,f,x),u.child)}function Qj(o,u,f,g,x,S){return Hu(u),u.updateQueue=null,f=J9(u,g,f,x),Z9(o),g=Yw(),o!==null&&!si?(Zw(o,u,S),sl(o,u,S)):(xr&&g&&Ow(u),u.flags|=1,zi(o,u,f,S),u.child)}function Yj(o,u,f,g,x){if(Hu(u),u.stateNode===null){var S=x0,z=f.contextType;typeof z=="object"&&z!==null&&(S=Ui(z)),S=new f(g,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=f4,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=g,S.state=u.memoizedState,S.refs={},Vw(u),z=f.contextType,S.context=typeof z=="object"&&z!==null?Ui(z):x0,S.state=u.memoizedState,z=f.getDerivedStateFromProps,typeof z=="function"&&(h4(u,f,z,g),S.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(z=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),z!==S.state&&f4.enqueueReplaceState(S,S.state,null),tp(u,g,S,x),ep(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(o===null){S=u.stateNode;var H=u.memoizedProps,se=Yu(f,H);S.props=se;var Ae=S.context,De=f.contextType;z=x0,typeof De=="object"&&De!==null&&(z=Ui(De));var Ve=f.getDerivedStateFromProps;De=typeof Ve=="function"||typeof S.getSnapshotBeforeUpdate=="function",H=u.pendingProps!==H,De||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(H||Ae!==z)&&Lj(u,S,g,z),yc=!1;var je=u.memoizedState;S.state=je,tp(u,g,S,x),ep(),Ae=u.memoizedState,H||je!==Ae||yc?(typeof Ve=="function"&&(h4(u,f,Ve,g),Ae=u.memoizedState),(se=yc||Dj(u,f,se,g,je,Ae,z))?(De||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Ae),S.props=g,S.state=Ae,S.context=z,g=se):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{S=u.stateNode,Fw(o,u),z=u.memoizedProps,De=Yu(f,z),S.props=De,Ve=u.pendingProps,je=S.context,Ae=f.contextType,se=x0,typeof Ae=="object"&&Ae!==null&&(se=Ui(Ae)),H=f.getDerivedStateFromProps,(Ae=typeof H=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(z!==Ve||je!==se)&&Lj(u,S,g,se),yc=!1,je=u.memoizedState,S.state=je,tp(u,g,S,x),ep();var ke=u.memoizedState;z!==Ve||je!==ke||yc||o!==null&&o.dependencies!==null&&G1(o.dependencies)?(typeof H=="function"&&(h4(u,f,H,g),ke=u.memoizedState),(De=yc||Dj(u,f,De,g,je,ke,se)||o!==null&&o.dependencies!==null&&G1(o.dependencies))?(Ae||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,ke,se),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,ke,se)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=ke),S.props=g,S.state=ke,S.context=se,g=De):(typeof S.componentDidUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=1024),g=!1)}return S=g,dy(o,u),g=(u.flags&128)!==0,S||g?(S=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,o!==null&&g?(u.child=Xu(u,o.child,null,x),u.child=Xu(u,null,f,x)):zi(o,u,f,x),u.memoizedState=S.state,o=u.child):o=sl(o,u,x),o}function Zj(o,u,f,g){return Fu(),u.flags|=256,zi(o,u,f,g),u.child}var y4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function v4(o){return{baseLanes:o,cachePool:$9()}}function b4(o,u,f){return o=o!==null?o.childLanes&~f:0,u&&(o|=Za),o}function Jj(o,u,f){var g=u.pendingProps,x=!1,S=(u.flags&128)!==0,z;if((z=S)||(z=o!==null&&o.memoizedState===null?!1:(Wn.current&2)!==0),z&&(x=!0,u.flags&=-129),z=(u.flags&32)!==0,u.flags&=-33,o===null){if(xr){if(x?xc(u):wc(),(o=Sn)?(o=ok(o,bs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:fc!==null?{id:go,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},f=I9(o),f.return=u,u.child=f,Bi=u,Sn=null)):o=null,o===null)throw mc(u);return t5(o)?u.lanes=32:u.lanes=536870912,null}var H=g.children;return g=g.fallback,x?(wc(),x=u.mode,H=hy({mode:"hidden",children:H},x),g=Vu(g,x,f,null),H.return=u,g.return=u,H.sibling=g,u.child=H,g=u.child,g.memoizedState=v4(f),g.childLanes=b4(o,z,f),u.memoizedState=y4,sp(null,g)):(xc(u),x4(u,H))}var se=o.memoizedState;if(se!==null&&(H=se.dehydrated,H!==null)){if(S)u.flags&256?(xc(u),u.flags&=-257,u=w4(o,u,f)):u.memoizedState!==null?(wc(),u.child=o.child,u.flags|=128,u=null):(wc(),H=g.fallback,x=u.mode,g=hy({mode:"visible",children:g.children},x),H=Vu(H,x,f,null),H.flags|=2,g.return=u,H.return=u,g.sibling=H,u.child=g,Xu(u,o.child,null,f),g=u.child,g.memoizedState=v4(f),g.childLanes=b4(o,z,f),u.memoizedState=y4,u=sp(null,g));else if(xc(u),t5(H)){if(z=H.nextSibling&&H.nextSibling.dataset,z)var Ae=z.dgst;z=Ae,g=Error(n(419)),g.stack="",g.digest=z,Wf({value:g,source:null,stack:null}),u=w4(o,u,f)}else if(si||T0(o,u,f,!1),z=(f&o.childLanes)!==0,si||z){if(z=ln,z!==null&&(g=mt(z,f),g!==0&&g!==se.retryLane))throw se.retryLane=g,$u(o,g),Ia(z,o,g),m4;e5(H)||wy(),u=w4(o,u,f)}else e5(H)?(u.flags|=192,u.child=o.child,u=null):(o=se.treeContext,Sn=ws(H.nextSibling),Bi=u,xr=!0,pc=null,bs=!1,o!==null&&P9(u,o),u=x4(u,g.children),u.flags|=4096);return u}return x?(wc(),H=g.fallback,x=u.mode,se=o.child,Ae=se.sibling,g=el(se,{mode:"hidden",children:g.children}),g.subtreeFlags=se.subtreeFlags&65011712,Ae!==null?H=el(Ae,H):(H=Vu(H,x,f,null),H.flags|=2),H.return=u,g.return=u,g.sibling=H,u.child=g,sp(null,g),g=u.child,H=o.child.memoizedState,H===null?H=v4(f):(x=H.cachePool,x!==null?(se=ii._currentValue,x=x.parent!==se?{parent:se,pool:se}:x):x=$9(),H={baseLanes:H.baseLanes|f,cachePool:x}),g.memoizedState=H,g.childLanes=b4(o,z,f),u.memoizedState=y4,sp(o.child,g)):(xc(u),f=o.child,o=f.sibling,f=el(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,o!==null&&(z=u.deletions,z===null?(u.deletions=[o],u.flags|=16):z.push(o)),u.child=f,u.memoizedState=null,f)}function x4(o,u){return u=hy({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function hy(o,u){return o=Wa(22,o,null,u),o.lanes=0,o}function w4(o,u,f){return Xu(u,o.child,null,f),o=x4(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function eC(o,u,f){o.lanes|=u;var g=o.alternate;g!==null&&(g.lanes|=u),Dw(o.return,u,f)}function _4(o,u,f,g,x,S){var z=o.memoizedState;z===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:x,treeForkCount:S}:(z.isBackwards=u,z.rendering=null,z.renderingStartTime=0,z.last=g,z.tail=f,z.tailMode=x,z.treeForkCount=S)}function tC(o,u,f){var g=u.pendingProps,x=g.revealOrder,S=g.tail;g=g.children;var z=Wn.current,H=(z&2)!==0;if(H?(z=z&1|2,u.flags|=128):z&=1,de(Wn,z),zi(o,u,g,f),g=xr?Kf:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&eC(o,f,u);else if(o.tag===19)eC(o,f,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(f=u.child,x=null;f!==null;)o=f.alternate,o!==null&&ey(o)===null&&(x=f),f=f.sibling;f=x,f===null?(x=u.child,u.child=null):(x=f.sibling,f.sibling=null),_4(u,!1,x,f,S,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=u.child,u.child=null;x!==null;){if(o=x.alternate,o!==null&&ey(o)===null){u.child=x;break}o=x.sibling,x.sibling=f,f=x,x=o}_4(u,!0,f,null,S,g);break;case"together":_4(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function sl(o,u,f){if(o!==null&&(u.dependencies=o.dependencies),Tc|=u.lanes,(f&u.childLanes)===0)if(o!==null){if(T0(o,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,f=el(o,o.pendingProps),u.child=f,f.return=u;o.sibling!==null;)o=o.sibling,f=f.sibling=el(o,o.pendingProps),f.return=u;f.sibling=null}return u.child}function S4(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&G1(o)))}function LQ(o,u,f){switch(u.tag){case 3:Ye(u,u.stateNode.containerInfo),gc(u,ii,o.memoizedState.cache),Fu();break;case 27:case 5:le(u);break;case 4:Ye(u,u.stateNode.containerInfo);break;case 10:gc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Ww(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(xc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?Jj(o,u,f):(xc(u),o=sl(o,u,f),o!==null?o.sibling:null);xc(u);break;case 19:var x=(o.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(T0(o,u,f,!1),g=(f&u.childLanes)!==0),x){if(g)return tC(o,u,f);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),de(Wn,Wn.current),g)break;return null;case 22:return u.lanes=0,Kj(o,u,f,u.pendingProps);case 24:gc(u,ii,o.memoizedState.cache)}return sl(o,u,f)}function rC(o,u,f){if(o!==null)if(o.memoizedProps!==u.pendingProps)si=!0;else{if(!S4(o,f)&&(u.flags&128)===0)return si=!1,LQ(o,u,f);si=(o.flags&131072)!==0}else si=!1,xr&&(u.flags&1048576)!==0&&M9(u,Kf,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(o=Ku(u.elementType),u.type=o,typeof o=="function")jw(o)?(g=Yu(o,g),u.tag=1,u=Yj(null,u,o,g,f)):(u.tag=0,u=g4(null,u,o,g,f));else{if(o!=null){var x=o.$$typeof;if(x===$){u.tag=11,u=qj(null,u,o,g,f);break e}else if(x===E){u.tag=14,u=Hj(null,u,o,g,f);break e}}throw u=Y(o)||o,Error(n(306,u,""))}}return u;case 0:return g4(o,u,u.type,u.pendingProps,f);case 1:return g=u.type,x=Yu(g,u.pendingProps),Yj(o,u,g,x,f);case 3:e:{if(Ye(u,u.stateNode.containerInfo),o===null)throw Error(n(387));g=u.pendingProps;var S=u.memoizedState;x=S.element,Fw(o,u),tp(u,g,null,f);var z=u.memoizedState;if(g=z.cache,gc(u,ii,g),g!==S.cache&&Lw(u,[ii],f,!0),ep(),g=z.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:z.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Zj(o,u,g,f);break e}else if(g!==x){x=gs(Error(n(424)),u),Wf(x),u=Zj(o,u,g,f);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Sn=ws(o.firstChild),Bi=u,xr=!0,pc=null,bs=!0,f=K9(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Fu(),g===x){u=sl(o,u,f);break e}zi(o,u,g,f)}u=u.child}return u;case 26:return dy(o,u),o===null?(f=fk(u.type,null,u.pendingProps,null))?u.memoizedState=f:xr||(f=u.type,o=u.pendingProps,g=jy(pe.current).createElement(f),g[$t]=u,g[$r]=o,$i(g,f,o),cr(g),u.stateNode=g):u.memoizedState=fk(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return le(u),o===null&&xr&&(g=u.stateNode=uk(u.type,u.pendingProps,pe.current),Bi=u,bs=!0,x=Sn,Cc(u.type)?(r5=x,Sn=ws(g.firstChild)):Sn=x),zi(o,u,u.pendingProps.children,f),dy(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&xr&&((x=g=Sn)&&(g=fY(g,u.type,u.pendingProps,bs),g!==null?(u.stateNode=g,Bi=u,Sn=ws(g.firstChild),bs=!1,x=!0):x=!1),x||mc(u)),le(u),x=u.type,S=u.pendingProps,z=o!==null?o.memoizedProps:null,g=S.children,Y4(x,S)?g=null:z!==null&&Y4(x,z)&&(u.flags|=32),u.memoizedState!==null&&(x=Qw(o,u,jQ,null,null,f),wp._currentValue=x),dy(o,u),zi(o,u,g,f),u.child;case 6:return o===null&&xr&&((o=f=Sn)&&(f=pY(f,u.pendingProps,bs),f!==null?(u.stateNode=f,Bi=u,Sn=null,o=!0):o=!1),o||mc(u)),null;case 13:return Jj(o,u,f);case 4:return Ye(u,u.stateNode.containerInfo),g=u.pendingProps,o===null?u.child=Xu(u,null,g,f):zi(o,u,g,f),u.child;case 11:return qj(o,u,u.type,u.pendingProps,f);case 7:return zi(o,u,u.pendingProps,f),u.child;case 8:return zi(o,u,u.pendingProps.children,f),u.child;case 12:return zi(o,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,gc(u,u.type,g.value),zi(o,u,g.children,f),u.child;case 9:return x=u.type._context,g=u.pendingProps.children,Hu(u),x=Ui(x),g=g(x),u.flags|=1,zi(o,u,g,f),u.child;case 14:return Hj(o,u,u.type,u.pendingProps,f);case 15:return Gj(o,u,u.type,u.pendingProps,f);case 19:return tC(o,u,f);case 31:return DQ(o,u,f);case 22:return Kj(o,u,f,u.pendingProps);case 24:return Hu(u),g=Ui(ii),o===null?(x=zw(),x===null&&(x=ln,S=Bw(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=f),x=S),u.memoizedState={parent:g,cache:x},Vw(u),gc(u,ii,x)):((o.lanes&f)!==0&&(Fw(o,u),tp(u,null,null,f),ep()),x=o.memoizedState,S=u.memoizedState,x.parent!==g?(x={parent:g,cache:g},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),gc(u,ii,g)):(g=S.cache,gc(u,ii,g),g!==x.cache&&Lw(u,[ii],f,!0))),zi(o,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function ol(o){o.flags|=4}function T4(o,u,f,g,x){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(CC())o.flags|=8192;else throw Wu=Q1,$w}else o.flags&=-16777217}function nC(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!vk(u))if(CC())o.flags|=8192;else throw Wu=Q1,$w}function fy(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?on():536870912,o.lanes|=u,D0|=u)}function op(o,u){if(!xr)switch(o.tailMode){case"hidden":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Tn(o){var u=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(u)for(var x=o.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=g,o.childLanes=f,u}function BQ(o,u,f){var g=u.pendingProps;switch(Iw(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(u),null;case 1:return Tn(u),null;case 3:return f=u.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),nl(ii),Ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(S0(u)?ol(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Mw())),Tn(u),null;case 26:var x=u.type,S=u.memoizedState;return o===null?(ol(u),S!==null?(Tn(u),nC(u,S)):(Tn(u),T4(u,x,null,g,f))):S?S!==o.memoizedState?(ol(u),Tn(u),nC(u,S)):(Tn(u),u.flags&=-16777217):(o=o.memoizedProps,o!==g&&ol(u),Tn(u),T4(u,x,o,g,f)),null;case 27:if(we(u),f=pe.current,x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&ol(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Tn(u),null}o=oe.current,S0(u)?D9(u):(o=uk(x,g,f),u.stateNode=o,ol(u))}return Tn(u),null;case 5:if(we(u),x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&ol(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Tn(u),null}if(S=oe.current,S0(u))D9(u);else{var z=jy(pe.current);switch(S){case 1:S=z.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:S=z.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":S=z.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":S=z.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":S=z.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof g.is=="string"?z.createElement("select",{is:g.is}):z.createElement("select"),g.multiple?S.multiple=!0:g.size&&(S.size=g.size);break;default:S=typeof g.is=="string"?z.createElement(x,{is:g.is}):z.createElement(x)}}S[$t]=u,S[$r]=g;e:for(z=u.child;z!==null;){if(z.tag===5||z.tag===6)S.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===u)break e;for(;z.sibling===null;){if(z.return===null||z.return===u)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}u.stateNode=S;e:switch($i(S,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ol(u)}}return Tn(u),T4(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,f),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==g&&ol(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(o=pe.current,S0(u)){if(o=u.stateNode,f=u.memoizedProps,g=null,x=Bi,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}o[$t]=u,o=!!(o.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||JC(o.nodeValue,f)),o||mc(u,!0)}else o=jy(o).createTextNode(g),o[$t]=u,u.stateNode=o}return Tn(u),null;case 31:if(f=u.memoizedState,o===null||o.memoizedState!==null){if(g=S0(u),f!==null){if(o===null){if(!g)throw Error(n(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[$t]=u}else Fu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Tn(u),o=!1}else f=Mw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return u.flags&256?(Qa(u),u):(Qa(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Tn(u),null;case 13:if(g=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=S0(u),g!==null&&g.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[$t]=u}else Fu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Tn(u),x=!1}else x=Mw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(Qa(u),u):(Qa(u),null)}return Qa(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,o=o!==null&&o.memoizedState!==null,f&&(g=u.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==x&&(g.flags|=2048)),f!==o&&f&&(u.child.flags|=8192),fy(u,u.updateQueue),Tn(u),null);case 4:return Ne(),o===null&&G4(u.stateNode.containerInfo),Tn(u),null;case 10:return nl(u.type),Tn(u),null;case 19:if(re(Wn),g=u.memoizedState,g===null)return Tn(u),null;if(x=(u.flags&128)!==0,S=g.rendering,S===null)if(x)op(g,!1);else{if(Bn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(S=ey(o),S!==null){for(u.flags|=128,op(g,!1),o=S.updateQueue,u.updateQueue=o,fy(u,o),u.subtreeFlags=0,o=f,f=u.child;f!==null;)O9(f,o),f=f.sibling;return de(Wn,Wn.current&1|2),xr&&tl(u,g.treeForkCount),u.child}o=o.sibling}g.tail!==null&&We()>vy&&(u.flags|=128,x=!0,op(g,!1),u.lanes=4194304)}else{if(!x)if(o=ey(S),o!==null){if(u.flags|=128,x=!0,o=o.updateQueue,u.updateQueue=o,fy(u,o),op(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!xr)return Tn(u),null}else 2*We()-g.renderingStartTime>vy&&f!==536870912&&(u.flags|=128,x=!0,op(g,!1),u.lanes=4194304);g.isBackwards?(S.sibling=u.child,u.child=S):(o=g.last,o!==null?o.sibling=S:u.child=S,g.last=S)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=We(),o.sibling=null,f=Wn.current,de(Wn,x?f&1|2:f&1),xr&&tl(u,g.treeForkCount),o):(Tn(u),null);case 22:case 23:return Qa(u),Kw(),g=u.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Tn(u),u.subtreeFlags&6&&(u.flags|=8192)):Tn(u),f=u.updateQueue,f!==null&&fy(u,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),o!==null&&re(Gu),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),nl(ii),Tn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function UQ(o,u){switch(Iw(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return nl(ii),Ne(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return we(u),null;case 31:if(u.memoizedState!==null){if(Qa(u),u.alternate===null)throw Error(n(340));Fu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Qa(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Fu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return re(Wn),null;case 4:return Ne(),null;case 10:return nl(u.type),null;case 22:case 23:return Qa(u),Kw(),o!==null&&re(Gu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return nl(ii),null;case 25:return null;default:return null}}function iC(o,u){switch(Iw(u),u.tag){case 3:nl(ii),Ne();break;case 26:case 27:case 5:we(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&Qa(u);break;case 13:Qa(u);break;case 19:re(Wn);break;case 10:nl(u.type);break;case 22:case 23:Qa(u),Kw(),o!==null&&re(Gu);break;case 24:nl(ii)}}function lp(o,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var x=g.next;f=x;do{if((f.tag&o)===o){g=void 0;var S=f.create,z=f.inst;g=S(),z.destroy=g}f=f.next}while(f!==x)}}catch(H){qr(u,u.return,H)}}function _c(o,u,f){try{var g=u.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var S=x.next;g=S;do{if((g.tag&o)===o){var z=g.inst,H=z.destroy;if(H!==void 0){z.destroy=void 0,x=u;var se=f,Ae=H;try{Ae()}catch(De){qr(x,se,De)}}}g=g.next}while(g!==S)}}catch(De){qr(u,u.return,De)}}function aC(o){var u=o.updateQueue;if(u!==null){var f=o.stateNode;try{X9(u,f)}catch(g){qr(o,o.return,g)}}}function sC(o,u,f){f.props=Yu(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(g){qr(o,u,g)}}function cp(o,u){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof f=="function"?o.refCleanup=f(g):f.current=g}}catch(x){qr(o,u,x)}}function vo(o,u){var f=o.ref,g=o.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(x){qr(o,u,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){qr(o,u,x)}else f.current=null}function oC(o){var u=o.type,f=o.memoizedProps,g=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(x){qr(o,o.return,x)}}function A4(o,u,f){try{var g=o.stateNode;oY(g,o.type,f,u),g[$r]=u}catch(x){qr(o,o.return,x)}}function lC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Cc(o.type)||o.tag===4}function E4(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||lC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Cc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function N4(o,u,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(o),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Kn));else if(g!==4&&(g===27&&Cc(o.type)&&(f=o.stateNode,u=null),o=o.child,o!==null))for(N4(o,u,f),o=o.sibling;o!==null;)N4(o,u,f),o=o.sibling}function py(o,u,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?f.insertBefore(o,u):f.appendChild(o);else if(g!==4&&(g===27&&Cc(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(py(o,u,f),o=o.sibling;o!==null;)py(o,u,f),o=o.sibling}function cC(o){var u=o.stateNode,f=o.memoizedProps;try{for(var g=o.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);$i(u,g,f),u[$t]=o,u[$r]=f}catch(S){qr(o,o.return,S)}}var ll=!1,oi=!1,j4=!1,uC=typeof WeakSet=="function"?WeakSet:Set,Ci=null;function zQ(o,u){if(o=o.containerInfo,X4=Py,o=_9(o),ww(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var x=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var z=0,H=-1,se=-1,Ae=0,De=0,Ve=o,je=null;t:for(;;){for(var ke;Ve!==f||x!==0&&Ve.nodeType!==3||(H=z+x),Ve!==S||g!==0&&Ve.nodeType!==3||(se=z+g),Ve.nodeType===3&&(z+=Ve.nodeValue.length),(ke=Ve.firstChild)!==null;)je=Ve,Ve=ke;for(;;){if(Ve===o)break t;if(je===f&&++Ae===x&&(H=z),je===S&&++De===g&&(se=z),(ke=Ve.nextSibling)!==null)break;Ve=je,je=Ve.parentNode}Ve=ke}f=H===-1||se===-1?null:{start:H,end:se}}else f=null}f=f||{start:0,end:0}}else f=null;for(Q4={focusedElem:o,selectionRange:f},Py=!1,Ci=u;Ci!==null;)if(u=Ci,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Ci=o;else for(;Ci!==null;){switch(u=Ci,S=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)x=o[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,f=u,x=S.memoizedProps,S=S.memoizedState,g=f.stateNode;try{var Tt=Yu(f.type,x);o=g.getSnapshotBeforeUpdate(Tt,S),g.__reactInternalSnapshotBeforeUpdate=o}catch(Dt){qr(f,f.return,Dt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,f=o.nodeType,f===9)J4(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":J4(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,Ci=o;break}Ci=u.return}}function dC(o,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:ul(o,f),g&4&&lp(5,f);break;case 1:if(ul(o,f),g&4)if(o=f.stateNode,u===null)try{o.componentDidMount()}catch(z){qr(f,f.return,z)}else{var x=Yu(f.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(x,u,o.__reactInternalSnapshotBeforeUpdate)}catch(z){qr(f,f.return,z)}}g&64&&aC(f),g&512&&cp(f,f.return);break;case 3:if(ul(o,f),g&64&&(o=f.updateQueue,o!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{X9(o,u)}catch(z){qr(f,f.return,z)}}break;case 27:u===null&&g&4&&cC(f);case 26:case 5:ul(o,f),u===null&&g&4&&oC(f),g&512&&cp(f,f.return);break;case 12:ul(o,f);break;case 31:ul(o,f),g&4&&pC(o,f);break;case 13:ul(o,f),g&4&&mC(o,f),g&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=XQ.bind(null,f),mY(o,f))));break;case 22:if(g=f.memoizedState!==null||ll,!g){u=u!==null&&u.memoizedState!==null||oi,x=ll;var S=oi;ll=g,(oi=u)&&!S?dl(o,f,(f.subtreeFlags&8772)!==0):ul(o,f),ll=x,oi=S}break;case 30:break;default:ul(o,f)}}function hC(o){var u=o.alternate;u!==null&&(o.alternate=null,hC(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&xt(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var En=null,ja=!1;function cl(o,u,f){for(f=f.child;f!==null;)fC(o,u,f),f=f.sibling}function fC(o,u,f){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(fn,f)}catch{}switch(f.tag){case 26:oi||vo(f,u),cl(o,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:oi||vo(f,u);var g=En,x=ja;Cc(f.type)&&(En=f.stateNode,ja=!1),cl(o,u,f),vp(f.stateNode),En=g,ja=x;break;case 5:oi||vo(f,u);case 6:if(g=En,x=ja,En=null,cl(o,u,f),En=g,ja=x,En!==null)if(ja)try{(En.nodeType===9?En.body:En.nodeName==="HTML"?En.ownerDocument.body:En).removeChild(f.stateNode)}catch(S){qr(f,u,S)}else try{En.removeChild(f.stateNode)}catch(S){qr(f,u,S)}break;case 18:En!==null&&(ja?(o=En,ak(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),q0(o)):ak(En,f.stateNode));break;case 4:g=En,x=ja,En=f.stateNode.containerInfo,ja=!0,cl(o,u,f),En=g,ja=x;break;case 0:case 11:case 14:case 15:_c(2,f,u),oi||_c(4,f,u),cl(o,u,f);break;case 1:oi||(vo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&sC(f,u,g)),cl(o,u,f);break;case 21:cl(o,u,f);break;case 22:oi=(g=oi)||f.memoizedState!==null,cl(o,u,f),oi=g;break;default:cl(o,u,f)}}function pC(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{q0(o)}catch(f){qr(u,u.return,f)}}}function mC(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{q0(o)}catch(f){qr(u,u.return,f)}}function $Q(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new uC),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new uC),u;default:throw Error(n(435,o.tag))}}function my(o,u){var f=$Q(o);u.forEach(function(g){if(!f.has(g)){f.add(g);var x=QQ.bind(null,o,g);g.then(x,x)}})}function Ca(o,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var x=f[g],S=o,z=u,H=z;e:for(;H!==null;){switch(H.tag){case 27:if(Cc(H.type)){En=H.stateNode,ja=!1;break e}break;case 5:En=H.stateNode,ja=!1;break e;case 3:case 4:En=H.stateNode.containerInfo,ja=!0;break e}H=H.return}if(En===null)throw Error(n(160));fC(S,z,x),En=null,ja=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)gC(u,o),u=u.sibling}var Gs=null;function gC(o,u){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ca(u,o),ka(o),g&4&&(_c(3,o,o.return),lp(3,o),_c(5,o,o.return));break;case 1:Ca(u,o),ka(o),g&512&&(oi||f===null||vo(f,f.return)),g&64&&ll&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var x=Gs;if(Ca(u,o),ka(o),g&512&&(oi||f===null||vo(f,f.return)),g&4){var S=f!==null?f.memoizedState:null;if(g=o.memoizedState,f===null)if(g===null)if(o.stateNode===null){e:{g=o.type,f=o.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":S=x.getElementsByTagName("title")[0],(!S||S[Sa]||S[$t]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(g),x.head.insertBefore(S,x.querySelector("head > title"))),$i(S,g,f),S[$t]=o,cr(S),g=S;break e;case"link":var z=gk("link","href",x).get(g+(f.href||""));if(z){for(var H=0;H<z.length;H++)if(S=z[H],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){z.splice(H,1);break t}}S=x.createElement(g),$i(S,g,f),x.head.appendChild(S);break;case"meta":if(z=gk("meta","content",x).get(g+(f.content||""))){for(H=0;H<z.length;H++)if(S=z[H],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){z.splice(H,1);break t}}S=x.createElement(g),$i(S,g,f),x.head.appendChild(S);break;default:throw Error(n(468,g))}S[$t]=o,cr(S),g=S}o.stateNode=g}else yk(x,o.type,o.stateNode);else o.stateNode=mk(x,g,o.memoizedProps);else S!==g?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,g===null?yk(x,o.type,o.stateNode):mk(x,g,o.memoizedProps)):g===null&&o.stateNode!==null&&A4(o,o.memoizedProps,f.memoizedProps)}break;case 27:Ca(u,o),ka(o),g&512&&(oi||f===null||vo(f,f.return)),f!==null&&g&4&&A4(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Ca(u,o),ka(o),g&512&&(oi||f===null||vo(f,f.return)),o.flags&32){x=o.stateNode;try{Zr(x,"")}catch(Tt){qr(o,o.return,Tt)}}g&4&&o.stateNode!=null&&(x=o.memoizedProps,A4(o,x,f!==null?f.memoizedProps:x)),g&1024&&(j4=!0);break;case 6:if(Ca(u,o),ka(o),g&4){if(o.stateNode===null)throw Error(n(162));g=o.memoizedProps,f=o.stateNode;try{f.nodeValue=g}catch(Tt){qr(o,o.return,Tt)}}break;case 3:if(Oy=null,x=Gs,Gs=Cy(u.containerInfo),Ca(u,o),Gs=x,ka(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{q0(u.containerInfo)}catch(Tt){qr(o,o.return,Tt)}j4&&(j4=!1,yC(o));break;case 4:g=Gs,Gs=Cy(o.stateNode.containerInfo),Ca(u,o),ka(o),Gs=g;break;case 12:Ca(u,o),ka(o);break;case 31:Ca(u,o),ka(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,my(o,g)));break;case 13:Ca(u,o),ka(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(yy=We()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,my(o,g)));break;case 22:x=o.memoizedState!==null;var se=f!==null&&f.memoizedState!==null,Ae=ll,De=oi;if(ll=Ae||x,oi=De||se,Ca(u,o),oi=De,ll=Ae,ka(o),g&8192)e:for(u=o.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(f===null||se||ll||oi||Zu(o)),f=null,u=o;;){if(u.tag===5||u.tag===26){if(f===null){se=f=u;try{if(S=se.stateNode,x)z=S.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{H=se.stateNode;var Ve=se.memoizedProps.style,je=Ve!=null&&Ve.hasOwnProperty("display")?Ve.display:null;H.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(Tt){qr(se,se.return,Tt)}}}else if(u.tag===6){if(f===null){se=u;try{se.stateNode.nodeValue=x?"":se.memoizedProps}catch(Tt){qr(se,se.return,Tt)}}}else if(u.tag===18){if(f===null){se=u;try{var ke=se.stateNode;x?sk(ke,!0):sk(se.stateNode,!1)}catch(Tt){qr(se,se.return,Tt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=o.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,my(o,f))));break;case 19:Ca(u,o),ka(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,my(o,g)));break;case 30:break;case 21:break;default:Ca(u,o),ka(o)}}function ka(o){var u=o.flags;if(u&2){try{for(var f,g=o.return;g!==null;){if(lC(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var x=f.stateNode,S=E4(o);py(o,S,x);break;case 5:var z=f.stateNode;f.flags&32&&(Zr(z,""),f.flags&=-33);var H=E4(o);py(o,H,z);break;case 3:case 4:var se=f.stateNode.containerInfo,Ae=E4(o);N4(o,Ae,se);break;default:throw Error(n(161))}}catch(De){qr(o,o.return,De)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function yC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;yC(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ul(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)dC(o,u.alternate,u),u=u.sibling}function Zu(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:_c(4,u,u.return),Zu(u);break;case 1:vo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&sC(u,u.return,f),Zu(u);break;case 27:vp(u.stateNode);case 26:case 5:vo(u,u.return),Zu(u);break;case 22:u.memoizedState===null&&Zu(u);break;case 30:Zu(u);break;default:Zu(u)}o=o.sibling}}function dl(o,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,x=o,S=u,z=S.flags;switch(S.tag){case 0:case 11:case 15:dl(x,S,f),lp(4,S);break;case 1:if(dl(x,S,f),g=S,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ae){qr(g,g.return,Ae)}if(g=S,x=g.updateQueue,x!==null){var H=g.stateNode;try{var se=x.shared.hiddenCallbacks;if(se!==null)for(x.shared.hiddenCallbacks=null,x=0;x<se.length;x++)W9(se[x],H)}catch(Ae){qr(g,g.return,Ae)}}f&&z&64&&aC(S),cp(S,S.return);break;case 27:cC(S);case 26:case 5:dl(x,S,f),f&&g===null&&z&4&&oC(S),cp(S,S.return);break;case 12:dl(x,S,f);break;case 31:dl(x,S,f),f&&z&4&&pC(x,S);break;case 13:dl(x,S,f),f&&z&4&&mC(x,S);break;case 22:S.memoizedState===null&&dl(x,S,f),cp(S,S.return);break;case 30:break;default:dl(x,S,f)}u=u.sibling}}function C4(o,u){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Xf(f))}function k4(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Xf(o))}function Ks(o,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)vC(o,u,f,g),u=u.sibling}function vC(o,u,f,g){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Ks(o,u,f,g),x&2048&&lp(9,u);break;case 1:Ks(o,u,f,g);break;case 3:Ks(o,u,f,g),x&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Xf(o)));break;case 12:if(x&2048){Ks(o,u,f,g),o=u.stateNode;try{var S=u.memoizedProps,z=S.id,H=S.onPostCommit;typeof H=="function"&&H(z,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(se){qr(u,u.return,se)}}else Ks(o,u,f,g);break;case 31:Ks(o,u,f,g);break;case 13:Ks(o,u,f,g);break;case 23:break;case 22:S=u.stateNode,z=u.alternate,u.memoizedState!==null?S._visibility&2?Ks(o,u,f,g):up(o,u):S._visibility&2?Ks(o,u,f,g):(S._visibility|=2,R0(o,u,f,g,(u.subtreeFlags&10256)!==0||!1)),x&2048&&C4(z,u);break;case 24:Ks(o,u,f,g),x&2048&&k4(u.alternate,u);break;default:Ks(o,u,f,g)}}function R0(o,u,f,g,x){for(x=x&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var S=o,z=u,H=f,se=g,Ae=z.flags;switch(z.tag){case 0:case 11:case 15:R0(S,z,H,se,x),lp(8,z);break;case 23:break;case 22:var De=z.stateNode;z.memoizedState!==null?De._visibility&2?R0(S,z,H,se,x):up(S,z):(De._visibility|=2,R0(S,z,H,se,x)),x&&Ae&2048&&C4(z.alternate,z);break;case 24:R0(S,z,H,se,x),x&&Ae&2048&&k4(z.alternate,z);break;default:R0(S,z,H,se,x)}u=u.sibling}}function up(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=o,g=u,x=g.flags;switch(g.tag){case 22:up(f,g),x&2048&&C4(g.alternate,g);break;case 24:up(f,g),x&2048&&k4(g.alternate,g);break;default:up(f,g)}u=u.sibling}}var dp=8192;function M0(o,u,f){if(o.subtreeFlags&dp)for(o=o.child;o!==null;)bC(o,u,f),o=o.sibling}function bC(o,u,f){switch(o.tag){case 26:M0(o,u,f),o.flags&dp&&o.memoizedState!==null&&NY(f,Gs,o.memoizedState,o.memoizedProps);break;case 5:M0(o,u,f);break;case 3:case 4:var g=Gs;Gs=Cy(o.stateNode.containerInfo),M0(o,u,f),Gs=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=dp,dp=16777216,M0(o,u,f),dp=g):M0(o,u,f));break;default:M0(o,u,f)}}function xC(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function hp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ci=g,_C(g,o)}xC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wC(o),o=o.sibling}function wC(o){switch(o.tag){case 0:case 11:case 15:hp(o),o.flags&2048&&_c(9,o,o.return);break;case 3:hp(o);break;case 12:hp(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,gy(o)):hp(o);break;default:hp(o)}}function gy(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ci=g,_C(g,o)}xC(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:_c(8,u,u.return),gy(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,gy(u));break;default:gy(u)}o=o.sibling}}function _C(o,u){for(;Ci!==null;){var f=Ci;switch(f.tag){case 0:case 11:case 15:_c(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Xf(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ci=g;else e:for(f=o;Ci!==null;){g=Ci;var x=g.sibling,S=g.return;if(hC(g),g===f){Ci=null;break e}if(x!==null){x.return=S,Ci=x;break e}Ci=S}}}var VQ={getCacheForType:function(o){var u=Ui(ii),f=u.data.get(o);return f===void 0&&(f=o(),u.data.set(o,f)),f},cacheSignal:function(){return Ui(ii).controller.signal}},FQ=typeof WeakMap=="function"?WeakMap:Map,Rr=0,ln=null,fr=null,mr=0,Fr=0,Ya=null,Sc=!1,P0=!1,O4=!1,hl=0,Bn=0,Tc=0,Ju=0,I4=0,Za=0,D0=0,fp=null,Oa=null,R4=!1,yy=0,SC=0,vy=1/0,by=null,Ac=null,mi=0,Ec=null,L0=null,fl=0,M4=0,P4=null,TC=null,pp=0,D4=null;function Ja(){return(Rr&2)!==0&&mr!==0?mr&-mr:X.T!==null?V4():Wt()}function AC(){if(Za===0)if((mr&536870912)===0||xr){var o=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),Za=o}else Za=536870912;return o=Xa.current,o!==null&&(o.flags|=32),Za}function Ia(o,u,f){(o===ln&&(Fr===2||Fr===9)||o.cancelPendingCommit!==null)&&(B0(o,0),Nc(o,mr,Za,!1)),mn(o,f),((Rr&2)===0||o!==ln)&&(o===ln&&((Rr&2)===0&&(Ju|=f),Bn===4&&Nc(o,mr,Za,!1)),bo(o))}function EC(o,u,f){if((Rr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&o.expiredLanes)===0||Xr(o,u),x=g?GQ(o,u):B4(o,u,!0),S=g;do{if(x===0){P0&&!g&&Nc(o,u,0,!1);break}else{if(f=o.current.alternate,S&&!qQ(f)){x=B4(o,u,!1),S=!1;continue}if(x===2){if(S=u,o.errorRecoveryDisabledLanes&S)var z=0;else z=o.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){u=z;e:{var H=o;x=fp;var se=H.current.memoizedState.isDehydrated;if(se&&(B0(H,z).flags|=256),z=B4(H,z,!1),z!==2){if(O4&&!se){H.errorRecoveryDisabledLanes|=S,Ju|=S,x=4;break e}S=Oa,Oa=x,S!==null&&(Oa===null?Oa=S:Oa.push.apply(Oa,S))}x=z}if(S=!1,x!==2)continue}}if(x===1){B0(o,0),Nc(o,u,0,!0);break}e:{switch(g=o,S=x,S){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Nc(g,u,Za,!Sc);break e;case 2:Oa=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(x=yy+300-We(),10<x)){if(Nc(g,u,Za,!Sc),It(g,0,!0)!==0)break e;fl=u,g.timeoutHandle=nk(NC.bind(null,g,f,Oa,by,R4,u,Za,Ju,D0,Sc,S,"Throttled",-0,0),x);break e}NC(g,f,Oa,by,R4,u,Za,Ju,D0,Sc,S,null,-0,0)}}break}while(!0);bo(o)}function NC(o,u,f,g,x,S,z,H,se,Ae,De,Ve,je,ke){if(o.timeoutHandle=-1,Ve=u.subtreeFlags,Ve&8192||(Ve&16785408)===16785408){Ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},bC(u,S,Ve);var Tt=(S&62914560)===S?yy-We():(S&4194048)===S?SC-We():0;if(Tt=jY(Ve,Tt),Tt!==null){fl=S,o.cancelPendingCommit=Tt(PC.bind(null,o,u,S,f,g,x,z,H,se,De,Ve,null,je,ke)),Nc(o,S,z,!Ae);return}}PC(o,u,S,f,g,x,z,H,se)}function qQ(o){for(var u=o;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var x=f[g],S=x.getSnapshot;x=x.value;try{if(!Ka(S(),x))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Nc(o,u,f,g){u&=~I4,u&=~Ju,o.suspendedLanes|=u,o.pingedLanes&=~u,g&&(o.warmLanes|=u),g=o.expirationTimes;for(var x=u;0<x;){var S=31-Kt(x),z=1<<S;g[S]=-1,x&=~z}f!==0&&Re(o,f,u)}function xy(){return(Rr&6)===0?(mp(0),!1):!0}function L4(){if(fr!==null){if(Fr===0)var o=fr.return;else o=fr,rl=qu=null,Jw(o),j0=null,Yf=0,o=fr;for(;o!==null;)iC(o.alternate,o),o=o.return;fr=null}}function B0(o,u){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,uY(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),fl=0,L4(),ln=o,fr=f=el(o.current,null),mr=u,Fr=0,Ya=null,Sc=!1,P0=Xr(o,u),O4=!1,D0=Za=I4=Ju=Tc=Bn=0,Oa=fp=null,R4=!1,(u&8)!==0&&(u|=u&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=u;0<g;){var x=31-Kt(g),S=1<<x;u|=o[x],g&=~S}return hl=u,$1(),f}function jC(o,u){rr=null,X.H=ap,u===N0||u===X1?(u=q9(),Fr=3):u===$w?(u=q9(),Fr=4):Fr=u===m4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ya=u,fr===null&&(Bn=1,cy(o,gs(u,o.current)))}function CC(){var o=Xa.current;return o===null?!0:(mr&4194048)===mr?xs===null:(mr&62914560)===mr||(mr&536870912)!==0?o===xs:!1}function kC(){var o=X.H;return X.H=ap,o===null?ap:o}function OC(){var o=X.A;return X.A=VQ,o}function wy(){Bn=4,Sc||(mr&4194048)!==mr&&Xa.current!==null||(P0=!0),(Tc&134217727)===0&&(Ju&134217727)===0||ln===null||Nc(ln,mr,Za,!1)}function B4(o,u,f){var g=Rr;Rr|=2;var x=kC(),S=OC();(ln!==o||mr!==u)&&(by=null,B0(o,u)),u=!1;var z=Bn;e:do try{if(Fr!==0&&fr!==null){var H=fr,se=Ya;switch(Fr){case 8:L4(),z=6;break e;case 3:case 2:case 9:case 6:Xa.current===null&&(u=!0);var Ae=Fr;if(Fr=0,Ya=null,U0(o,H,se,Ae),f&&P0){z=0;break e}break;default:Ae=Fr,Fr=0,Ya=null,U0(o,H,se,Ae)}}HQ(),z=Bn;break}catch(De){jC(o,De)}while(!0);return u&&o.shellSuspendCounter++,rl=qu=null,Rr=g,X.H=x,X.A=S,fr===null&&(ln=null,mr=0,$1()),z}function HQ(){for(;fr!==null;)IC(fr)}function GQ(o,u){var f=Rr;Rr|=2;var g=kC(),x=OC();ln!==o||mr!==u?(by=null,vy=We()+500,B0(o,u)):P0=Xr(o,u);e:do try{if(Fr!==0&&fr!==null){u=fr;var S=Ya;t:switch(Fr){case 1:Fr=0,Ya=null,U0(o,u,S,1);break;case 2:case 9:if(V9(S)){Fr=0,Ya=null,RC(u);break}u=function(){Fr!==2&&Fr!==9||ln!==o||(Fr=7),bo(o)},S.then(u,u);break e;case 3:Fr=7;break e;case 4:Fr=5;break e;case 7:V9(S)?(Fr=0,Ya=null,RC(u)):(Fr=0,Ya=null,U0(o,u,S,7));break;case 5:var z=null;switch(fr.tag){case 26:z=fr.memoizedState;case 5:case 27:var H=fr;if(z?vk(z):H.stateNode.complete){Fr=0,Ya=null;var se=H.sibling;if(se!==null)fr=se;else{var Ae=H.return;Ae!==null?(fr=Ae,_y(Ae)):fr=null}break t}}Fr=0,Ya=null,U0(o,u,S,5);break;case 6:Fr=0,Ya=null,U0(o,u,S,6);break;case 8:L4(),Bn=6;break e;default:throw Error(n(462))}}KQ();break}catch(De){jC(o,De)}while(!0);return rl=qu=null,X.H=g,X.A=x,Rr=f,fr!==null?0:(ln=null,mr=0,$1(),Bn)}function KQ(){for(;fr!==null&&!Xt();)IC(fr)}function IC(o){var u=rC(o.alternate,o,hl);o.memoizedProps=o.pendingProps,u===null?_y(o):fr=u}function RC(o){var u=o,f=u.alternate;switch(u.tag){case 15:case 0:u=Qj(f,u,u.pendingProps,u.type,void 0,mr);break;case 11:u=Qj(f,u,u.pendingProps,u.type.render,u.ref,mr);break;case 5:Jw(u);default:iC(f,u),u=fr=O9(u,hl),u=rC(f,u,hl)}o.memoizedProps=o.pendingProps,u===null?_y(o):fr=u}function U0(o,u,f,g){rl=qu=null,Jw(u),j0=null,Yf=0;var x=u.return;try{if(PQ(o,x,u,f,mr)){Bn=1,cy(o,gs(f,o.current)),fr=null;return}}catch(S){if(x!==null)throw fr=x,S;Bn=1,cy(o,gs(f,o.current)),fr=null;return}u.flags&32768?(xr||g===1?o=!0:P0||(mr&536870912)!==0?o=!1:(Sc=o=!0,(g===2||g===9||g===3||g===6)&&(g=Xa.current,g!==null&&g.tag===13&&(g.flags|=16384))),MC(u,o)):_y(u)}function _y(o){var u=o;do{if((u.flags&32768)!==0){MC(u,Sc);return}o=u.return;var f=BQ(u.alternate,u,hl);if(f!==null){fr=f;return}if(u=u.sibling,u!==null){fr=u;return}fr=u=o}while(u!==null);Bn===0&&(Bn=5)}function MC(o,u){do{var f=UQ(o.alternate,o);if(f!==null){f.flags&=32767,fr=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(o=o.sibling,o!==null)){fr=o;return}fr=o=f}while(o!==null);Bn=6,fr=null}function PC(o,u,f,g,x,S,z,H,se){o.cancelPendingCommit=null;do Sy();while(mi!==0);if((Rr&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(S=u.lanes|u.childLanes,S|=Ew,G(o,f,S,z,H,se),o===ln&&(fr=ln=null,mr=0),L0=u,Ec=o,fl=f,M4=S,P4=x,TC=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,YQ(et,function(){return zC(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=X.T,X.T=null,x=ee.p,ee.p=2,z=Rr,Rr|=4;try{zQ(o,u,f)}finally{Rr=z,ee.p=x,X.T=g}}mi=1,DC(),LC(),BC()}}function DC(){if(mi===1){mi=0;var o=Ec,u=L0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=X.T,X.T=null;var g=ee.p;ee.p=2;var x=Rr;Rr|=4;try{gC(u,o);var S=Q4,z=_9(o.containerInfo),H=S.focusedElem,se=S.selectionRange;if(z!==H&&H&&H.ownerDocument&&w9(H.ownerDocument.documentElement,H)){if(se!==null&&ww(H)){var Ae=se.start,De=se.end;if(De===void 0&&(De=Ae),"selectionStart"in H)H.selectionStart=Ae,H.selectionEnd=Math.min(De,H.value.length);else{var Ve=H.ownerDocument||document,je=Ve&&Ve.defaultView||window;if(je.getSelection){var ke=je.getSelection(),Tt=H.textContent.length,Dt=Math.min(se.start,Tt),tn=se.end===void 0?Dt:Math.min(se.end,Tt);!ke.extend&&Dt>tn&&(z=tn,tn=Dt,Dt=z);var be=x9(H,Dt),fe=x9(H,tn);if(be&&fe&&(ke.rangeCount!==1||ke.anchorNode!==be.node||ke.anchorOffset!==be.offset||ke.focusNode!==fe.node||ke.focusOffset!==fe.offset)){var Se=Ve.createRange();Se.setStart(be.node,be.offset),ke.removeAllRanges(),Dt>tn?(ke.addRange(Se),ke.extend(fe.node,fe.offset)):(Se.setEnd(fe.node,fe.offset),ke.addRange(Se))}}}}for(Ve=[],ke=H;ke=ke.parentNode;)ke.nodeType===1&&Ve.push({element:ke,left:ke.scrollLeft,top:ke.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Ve.length;H++){var ze=Ve[H];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}Py=!!X4,Q4=X4=null}finally{Rr=x,ee.p=g,X.T=f}}o.current=u,mi=2}}function LC(){if(mi===2){mi=0;var o=Ec,u=L0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=X.T,X.T=null;var g=ee.p;ee.p=2;var x=Rr;Rr|=4;try{dC(o,u.alternate,u)}finally{Rr=x,ee.p=g,X.T=f}}mi=3}}function BC(){if(mi===4||mi===3){mi=0,ye();var o=Ec,u=L0,f=fl,g=TC;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?mi=5:(mi=0,L0=Ec=null,UC(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(Ac=null),Pt(f),u=u.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(fn,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=X.T,x=ee.p,ee.p=2,X.T=null;try{for(var S=o.onRecoverableError,z=0;z<g.length;z++){var H=g[z];S(H.value,{componentStack:H.stack})}}finally{X.T=u,ee.p=x}}(fl&3)!==0&&Sy(),bo(o),x=o.pendingLanes,(f&261930)!==0&&(x&42)!==0?o===D4?pp++:(pp=0,D4=o):pp=0,mp(0)}}function UC(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Xf(u)))}function Sy(){return DC(),LC(),BC(),zC()}function zC(){if(mi!==5)return!1;var o=Ec,u=M4;M4=0;var f=Pt(fl),g=X.T,x=ee.p;try{ee.p=32>f?32:f,X.T=null,f=P4,P4=null;var S=Ec,z=fl;if(mi=0,L0=Ec=null,fl=0,(Rr&6)!==0)throw Error(n(331));var H=Rr;if(Rr|=4,wC(S.current),vC(S,S.current,z,f),Rr=H,mp(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(fn,S)}catch{}return!0}finally{ee.p=x,X.T=g,UC(o,u)}}function $C(o,u,f){u=gs(f,u),u=p4(o.stateNode,u,2),o=bc(o,u,2),o!==null&&(mn(o,2),bo(o))}function qr(o,u,f){if(o.tag===3)$C(o,o,f);else for(;u!==null;){if(u.tag===3){$C(u,o,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ac===null||!Ac.has(g))){o=gs(f,o),f=Vj(2),g=bc(u,f,2),g!==null&&(Fj(f,g,u,o),mn(g,2),bo(g));break}}u=u.return}}function U4(o,u,f){var g=o.pingCache;if(g===null){g=o.pingCache=new FQ;var x=new Set;g.set(u,x)}else x=g.get(u),x===void 0&&(x=new Set,g.set(u,x));x.has(f)||(O4=!0,x.add(f),o=WQ.bind(null,o,u,f),u.then(o,o))}function WQ(o,u,f){var g=o.pingCache;g!==null&&g.delete(u),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,ln===o&&(mr&f)===f&&(Bn===4||Bn===3&&(mr&62914560)===mr&&300>We()-yy?(Rr&2)===0&&B0(o,0):I4|=f,D0===mr&&(D0=0)),bo(o)}function VC(o,u){u===0&&(u=on()),o=$u(o,u),o!==null&&(mn(o,u),bo(o))}function XQ(o){var u=o.memoizedState,f=0;u!==null&&(f=u.retryLane),VC(o,f)}function QQ(o,u){var f=0;switch(o.tag){case 31:case 13:var g=o.stateNode,x=o.memoizedState;x!==null&&(f=x.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),VC(o,f)}function YQ(o,u){return nt(o,u)}var Ty=null,z0=null,z4=!1,Ay=!1,$4=!1,jc=0;function bo(o){o!==z0&&o.next===null&&(z0===null?Ty=z0=o:z0=z0.next=o),Ay=!0,z4||(z4=!0,JQ())}function mp(o,u){if(!$4&&Ay){$4=!0;do for(var f=!1,g=Ty;g!==null;){if(o!==0){var x=g.pendingLanes;if(x===0)var S=0;else{var z=g.suspendedLanes,H=g.pingedLanes;S=(1<<31-Kt(42|o)+1)-1,S&=x&~(z&~H),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,GC(g,S))}else S=mr,S=It(g,g===ln?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||Xr(g,S)||(f=!0,GC(g,S));g=g.next}while(f);$4=!1}}function ZQ(){FC()}function FC(){Ay=z4=!1;var o=0;jc!==0&&cY()&&(o=jc);for(var u=We(),f=null,g=Ty;g!==null;){var x=g.next,S=qC(g,u);S===0?(g.next=null,f===null?Ty=x:f.next=x,x===null&&(z0=f)):(f=g,(o!==0||(S&3)!==0)&&(Ay=!0)),g=x}mi!==0&&mi!==5||mp(o),jc!==0&&(jc=0)}function qC(o,u){for(var f=o.suspendedLanes,g=o.pingedLanes,x=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var z=31-Kt(S),H=1<<z,se=x[z];se===-1?((H&f)===0||(H&g)!==0)&&(x[z]=pn(H,u)):se<=u&&(o.expiredLanes|=H),S&=~H}if(u=ln,f=mr,f=It(o,o===u?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,f===0||o===u&&(Fr===2||Fr===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&_t(g),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Xr(o,f)){if(u=f&-f,u===o.callbackPriority)return u;switch(g!==null&&_t(g),Pt(f)){case 2:case 8:f=lt;break;case 32:f=et;break;case 268435456:f=tr;break;default:f=et}return g=HC.bind(null,o),f=nt(f,g),o.callbackPriority=u,o.callbackNode=f,u}return g!==null&&g!==null&&_t(g),o.callbackPriority=2,o.callbackNode=null,2}function HC(o,u){if(mi!==0&&mi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(Sy()&&o.callbackNode!==f)return null;var g=mr;return g=It(o,o===ln?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(EC(o,g,u),qC(o,We()),o.callbackNode!=null&&o.callbackNode===f?HC.bind(null,o):null)}function GC(o,u){if(Sy())return null;EC(o,u,!0)}function JQ(){dY(function(){(Rr&6)!==0?nt(yt,ZQ):FC()})}function V4(){if(jc===0){var o=A0;o===0&&(o=pi,pi<<=1,(pi&261888)===0&&(pi=256)),jc=o}return jc}function KC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Aa(""+o)}function WC(o,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,o.id&&f.setAttribute("form",o.id),u.parentNode.insertBefore(f,u),o=new FormData(o),f.parentNode.removeChild(f),o}function eY(o,u,f,g,x){if(u==="submit"&&f&&f.stateNode===x){var S=KC((x[$r]||null).action),z=g.submitter;z&&(u=(u=z[$r]||null)?KC(u.formAction):z.getAttribute("formAction"),u!==null&&(S=u,z=null));var H=new Mu("action","action",null,g,x);o.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(jc!==0){var se=z?WC(x,z):new FormData(x);l4(f,{pending:!0,data:se,method:x.method,action:S},null,se)}}else typeof S=="function"&&(H.preventDefault(),se=z?WC(x,z):new FormData(x),l4(f,{pending:!0,data:se,method:x.method,action:S},S,se))},currentTarget:x}]})}}for(var F4=0;F4<Aw.length;F4++){var q4=Aw[F4],tY=q4.toLowerCase(),rY=q4[0].toUpperCase()+q4.slice(1);Hs(tY,"on"+rY)}Hs(A9,"onAnimationEnd"),Hs(E9,"onAnimationIteration"),Hs(N9,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(vQ,"onTransitionRun"),Hs(bQ,"onTransitionStart"),Hs(xQ,"onTransitionCancel"),Hs(j9,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gp));function XC(o,u){u=(u&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],x=g.event;g=g.listeners;e:{var S=void 0;if(u)for(var z=g.length-1;0<=z;z--){var H=g[z],se=H.instance,Ae=H.currentTarget;if(H=H.listener,se!==S&&x.isPropagationStopped())break e;S=H,x.currentTarget=Ae;try{S(x)}catch(De){z1(De)}x.currentTarget=null,S=se}else for(z=0;z<g.length;z++){if(H=g[z],se=H.instance,Ae=H.currentTarget,H=H.listener,se!==S&&x.isPropagationStopped())break e;S=H,x.currentTarget=Ae;try{S(x)}catch(De){z1(De)}x.currentTarget=null,S=se}}}}function pr(o,u){var f=u[Yr];f===void 0&&(f=u[Yr]=new Set);var g=o+"__bubble";f.has(g)||(QC(u,o,2,!1),f.add(g))}function H4(o,u,f){var g=0;u&&(g|=4),QC(f,o,g,u)}var Ey="_reactListening"+Math.random().toString(36).slice(2);function G4(o){if(!o[Ey]){o[Ey]=!0,yn.forEach(function(f){f!=="selectionchange"&&(nY.has(f)||H4(f,!1,o),H4(f,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ey]||(u[Ey]=!0,H4("selectionchange",!1,u))}}function QC(o,u,f,g){switch(Ak(u)){case 2:var x=OY;break;case 8:x=IY;break;default:x=o5}f=x.bind(null,u,f,o),x=void 0,!Bf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),g?x!==void 0?o.addEventListener(u,f,{capture:!0,passive:x}):o.addEventListener(u,f,!0):x!==void 0?o.addEventListener(u,f,{passive:x}):o.addEventListener(u,f,!1)}function K4(o,u,f,g,x){var S=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var H=g.stateNode.containerInfo;if(H===x)break;if(z===4)for(z=g.return;z!==null;){var se=z.tag;if((se===3||se===4)&&z.stateNode.containerInfo===x)return;z=z.return}for(;H!==null;){if(z=he(H),z===null)return;if(se=z.tag,se===5||se===6||se===26||se===27){g=S=z;continue e}H=H.parentNode}}g=g.return}T1(function(){var Ae=S,De=h0(f),Ve=[];e:{var je=C9.get(o);if(je!==void 0){var ke=Mu,Tt=o;switch(o){case"keypress":if(Ru(f)===0)break e;case"keydown":case"keyup":ke=R1;break;case"focusin":Tt="focus",ke=cc;break;case"focusout":Tt="blur",ke=cc;break;case"beforeblur":case"afterblur":ke=cc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=N1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=P1;break;case A9:case E9:case N9:ke=m0;break;case j9:ke=g0;break;case"scroll":case"scrollend":ke=A1;break;case"wheel":ke=L1;break;case"copy":case"cut":case"paste":ke=C1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=Ff;break;case"toggle":case"beforetoggle":ke=dc}var Dt=(u&4)!==0,tn=!Dt&&(o==="scroll"||o==="scrollend"),be=Dt?je!==null?je+"Capture":null:je;Dt=[];for(var fe=Ae,Se;fe!==null;){var ze=fe;if(Se=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||Se===null||be===null||(ze=Ea(fe,be),ze!=null&&Dt.push(yp(fe,ze,Se))),tn)break;fe=fe.return}0<Dt.length&&(je=new ke(je,Tt,null,f,De),Ve.push({event:je,listeners:Dt}))}}if((u&7)===0){e:{if(je=o==="mouseover"||o==="pointerover",ke=o==="mouseout"||o==="pointerout",je&&f!==d0&&(Tt=f.relatedTarget||f.fromElement)&&(he(Tt)||Tt[gn]))break e;if((ke||je)&&(je=De.window===De?De:(je=De.ownerDocument)?je.defaultView||je.parentWindow:window,ke?(Tt=f.relatedTarget||f.toElement,ke=Ae,Tt=Tt?he(Tt):null,Tt!==null&&(tn=a(Tt),Dt=Tt.tag,Tt!==tn||Dt!==5&&Dt!==27&&Dt!==6)&&(Tt=null)):(ke=null,Tt=Ae),ke!==Tt)){if(Dt=E1,ze="onMouseLeave",be="onMouseEnter",fe="mouse",(o==="pointerout"||o==="pointerover")&&(Dt=Ff,ze="onPointerLeave",be="onPointerEnter",fe="pointer"),tn=ke==null?je:at(ke),Se=Tt==null?je:at(Tt),je=new Dt(ze,fe+"leave",ke,f,De),je.target=tn,je.relatedTarget=Se,ze=null,he(De)===Ae&&(Dt=new Dt(be,fe+"enter",Tt,f,De),Dt.target=Se,Dt.relatedTarget=tn,ze=Dt),tn=ze,ke&&Tt)t:{for(Dt=iY,be=ke,fe=Tt,Se=0,ze=be;ze;ze=Dt(ze))Se++;ze=0;for(var kt=fe;kt;kt=Dt(kt))ze++;for(;0<Se-ze;)be=Dt(be),Se--;for(;0<ze-Se;)fe=Dt(fe),ze--;for(;Se--;){if(be===fe||fe!==null&&be===fe.alternate){Dt=be;break t}be=Dt(be),fe=Dt(fe)}Dt=null}else Dt=null;ke!==null&&YC(Ve,je,ke,Dt,!1),Tt!==null&&tn!==null&&YC(Ve,tn,Tt,Dt,!0)}}e:{if(je=Ae?at(Ae):window,ke=je.nodeName&&je.nodeName.toLowerCase(),ke==="select"||ke==="input"&&je.type==="file")var Er=p9;else if(Na(je))if(m9)Er=mQ;else{Er=fQ;var Nt=hQ}else ke=je.nodeName,!ke||ke.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Ae&&Xo(Ae.elementType)&&(Er=p9):Er=pQ;if(Er&&(Er=Er(o,Ae))){Bu(Ve,Er,f,De);break e}Nt&&Nt(o,je,Ae),o==="focusout"&&Ae&&je.type==="number"&&Ae.memoizedProps.value!=null&&tt(je,"number",je.value)}switch(Nt=Ae?at(Ae):window,o){case"focusin":(Na(Nt)||Nt.contentEditable==="true")&&(y0=Nt,_w=Ae,Gf=null);break;case"focusout":Gf=_w=y0=null;break;case"mousedown":Sw=!0;break;case"contextmenu":case"mouseup":case"dragend":Sw=!1,S9(Ve,f,De);break;case"selectionchange":if(yQ)break;case"keydown":case"keyup":S9(Ve,f,De)}var ir;if(O)e:{switch(o){case"compositionstart":var gr="onCompositionStart";break e;case"compositionend":gr="onCompositionEnd";break e;case"compositionupdate":gr="onCompositionUpdate";break e}gr=void 0}else ur?Br(o,f)&&(gr="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(gr="onCompositionStart");gr&&(_e&&f.locale!=="ko"&&(ur||gr!=="onCompositionStart"?gr==="onCompositionEnd"&&ur&&(ir=ac()):(Ga=De,f0="value"in Ga?Ga.value:Ga.textContent,ur=!0)),Nt=Ny(Ae,gr),0<Nt.length&&(gr=new zf(gr,o,null,f,De),Ve.push({event:gr,listeners:Nt}),ir?gr.data=ir:(ir=ni(f),ir!==null&&(gr.data=ir)))),(ir=W?Ni(o,f):ji(o,f))&&(gr=Ny(Ae,"onBeforeInput"),0<gr.length&&(Nt=new zf("onBeforeInput","beforeinput",null,f,De),Ve.push({event:Nt,listeners:gr}),Nt.data=ir)),eY(Ve,o,Ae,f,De)}XC(Ve,u)})}function yp(o,u,f){return{instance:o,listener:u,currentTarget:f}}function Ny(o,u){for(var f=u+"Capture",g=[];o!==null;){var x=o,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Ea(o,f),x!=null&&g.unshift(yp(o,x,S)),x=Ea(o,u),x!=null&&g.push(yp(o,x,S))),o.tag===3)return g;o=o.return}return[]}function iY(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function YC(o,u,f,g,x){for(var S=u._reactName,z=[];f!==null&&f!==g;){var H=f,se=H.alternate,Ae=H.stateNode;if(H=H.tag,se!==null&&se===g)break;H!==5&&H!==26&&H!==27||Ae===null||(se=Ae,x?(Ae=Ea(f,S),Ae!=null&&z.unshift(yp(f,Ae,se))):x||(Ae=Ea(f,S),Ae!=null&&z.push(yp(f,Ae,se)))),f=f.return}z.length!==0&&o.push({event:u,listeners:z})}var aY=/\r\n?/g,sY=/\u0000|\uFFFD/g;function ZC(o){return(typeof o=="string"?o:""+o).replace(aY,`
`).replace(sY,"")}function JC(o,u){return u=ZC(u),ZC(o)===u}function en(o,u,f,g,x,S){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Zr(o,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Zr(o,""+g);break;case"className":Fs(o,"class",g);break;case"tabIndex":Fs(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Fs(o,f,g);break;case"style":ic(o,g,S);break;case"data":if(u!=="object"){Fs(o,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){o.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Aa(""+g),o.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(u!=="input"&&en(o,u,"name",x.name,x,null),en(o,u,"formEncType",x.formEncType,x,null),en(o,u,"formMethod",x.formMethod,x,null),en(o,u,"formTarget",x.formTarget,x,null)):(en(o,u,"encType",x.encType,x,null),en(o,u,"method",x.method,x,null),en(o,u,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Aa(""+g),o.setAttribute(f,g);break;case"onClick":g!=null&&(o.onclick=Kn);break;case"onScroll":g!=null&&pr("scroll",o);break;case"onScrollEnd":g!=null&&pr("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}f=Aa(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""+g):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":g===!0?o.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,g):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(f,g):o.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(f):o.setAttribute(f,g);break;case"popover":pr("beforetoggle",o),pr("toggle",o),Vs(o,"popover",g);break;case"xlinkActuate":oa(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":oa(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":oa(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":oa(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":oa(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":oa(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":oa(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":oa(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":oa(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Vs(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Iu.get(f)||f,Vs(o,f,g))}}function W4(o,u,f,g,x,S){switch(f){case"style":ic(o,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof g=="string"?Zr(o,g):(typeof g=="number"||typeof g=="bigint")&&Zr(o,""+g);break;case"onScroll":g!=null&&pr("scroll",o);break;case"onScrollEnd":g!=null&&pr("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),u=f.slice(2,x?f.length-7:void 0),S=o[$r]||null,S=S!=null?S[f]:null,typeof S=="function"&&o.removeEventListener(u,S,x),typeof g=="function")){typeof S!="function"&&S!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(u,g,x);break e}f in o?o[f]=g:g===!0?o.setAttribute(f,""):Vs(o,f,g)}}}function $i(o,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pr("error",o),pr("load",o);var g=!1,x=!1,S;for(S in f)if(f.hasOwnProperty(S)){var z=f[S];if(z!=null)switch(S){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:en(o,u,S,z,f,null)}}x&&en(o,u,"srcSet",f.srcSet,f,null),g&&en(o,u,"src",f.src,f,null);return;case"input":pr("invalid",o);var H=S=z=x=null,se=null,Ae=null;for(g in f)if(f.hasOwnProperty(g)){var De=f[g];if(De!=null)switch(g){case"name":x=De;break;case"type":z=De;break;case"checked":se=De;break;case"defaultChecked":Ae=De;break;case"value":S=De;break;case"defaultValue":H=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,u));break;default:en(o,u,g,De,f,null)}}qe(o,S,H,se,Ae,z,x,!1);return;case"select":pr("invalid",o),g=z=S=null;for(x in f)if(f.hasOwnProperty(x)&&(H=f[x],H!=null))switch(x){case"value":S=H;break;case"defaultValue":z=H;break;case"multiple":g=H;default:en(o,u,x,H,f,null)}u=S,f=z,o.multiple=!!g,u!=null?Qe(o,!!g,u,!1):f!=null&&Qe(o,!!g,f,!0);return;case"textarea":pr("invalid",o),S=x=g=null;for(z in f)if(f.hasOwnProperty(z)&&(H=f[z],H!=null))switch(z){case"value":g=H;break;case"defaultValue":x=H;break;case"children":S=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:en(o,u,z,H,f,null)}nr(o,g,x,S);return;case"option":for(se in f)if(f.hasOwnProperty(se)&&(g=f[se],g!=null))switch(se){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:en(o,u,se,g,f,null)}return;case"dialog":pr("beforetoggle",o),pr("toggle",o),pr("cancel",o),pr("close",o);break;case"iframe":case"object":pr("load",o);break;case"video":case"audio":for(g=0;g<gp.length;g++)pr(gp[g],o);break;case"image":pr("error",o),pr("load",o);break;case"details":pr("toggle",o);break;case"embed":case"source":case"link":pr("error",o),pr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in f)if(f.hasOwnProperty(Ae)&&(g=f[Ae],g!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:en(o,u,Ae,g,f,null)}return;default:if(Xo(u)){for(De in f)f.hasOwnProperty(De)&&(g=f[De],g!==void 0&&W4(o,u,De,g,f,void 0));return}}for(H in f)f.hasOwnProperty(H)&&(g=f[H],g!=null&&en(o,u,H,g,f,null))}function oY(o,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,z=null,H=null,se=null,Ae=null,De=null;for(ke in f){var Ve=f[ke];if(f.hasOwnProperty(ke)&&Ve!=null)switch(ke){case"checked":break;case"value":break;case"defaultValue":se=Ve;default:g.hasOwnProperty(ke)||en(o,u,ke,null,g,Ve)}}for(var je in g){var ke=g[je];if(Ve=f[je],g.hasOwnProperty(je)&&(ke!=null||Ve!=null))switch(je){case"type":S=ke;break;case"name":x=ke;break;case"checked":Ae=ke;break;case"defaultChecked":De=ke;break;case"value":z=ke;break;case"defaultValue":H=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(n(137,u));break;default:ke!==Ve&&en(o,u,je,ke,g,Ve)}}Ce(o,z,H,se,Ae,De,S,x);return;case"select":ke=z=H=je=null;for(S in f)if(se=f[S],f.hasOwnProperty(S)&&se!=null)switch(S){case"value":break;case"multiple":ke=se;default:g.hasOwnProperty(S)||en(o,u,S,null,g,se)}for(x in g)if(S=g[x],se=f[x],g.hasOwnProperty(x)&&(S!=null||se!=null))switch(x){case"value":je=S;break;case"defaultValue":H=S;break;case"multiple":z=S;default:S!==se&&en(o,u,x,S,g,se)}u=H,f=z,g=ke,je!=null?Qe(o,!!f,je,!1):!!g!=!!f&&(u!=null?Qe(o,!!f,u,!0):Qe(o,!!f,f?[]:"",!1));return;case"textarea":ke=je=null;for(H in f)if(x=f[H],f.hasOwnProperty(H)&&x!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:en(o,u,H,null,g,x)}for(z in g)if(x=g[z],S=f[z],g.hasOwnProperty(z)&&(x!=null||S!=null))switch(z){case"value":je=x;break;case"defaultValue":ke=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==S&&en(o,u,z,x,g,S)}hr(o,je,ke);return;case"option":for(var Tt in f)if(je=f[Tt],f.hasOwnProperty(Tt)&&je!=null&&!g.hasOwnProperty(Tt))switch(Tt){case"selected":o.selected=!1;break;default:en(o,u,Tt,null,g,je)}for(se in g)if(je=g[se],ke=f[se],g.hasOwnProperty(se)&&je!==ke&&(je!=null||ke!=null))switch(se){case"selected":o.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:en(o,u,se,je,g,ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in f)je=f[Dt],f.hasOwnProperty(Dt)&&je!=null&&!g.hasOwnProperty(Dt)&&en(o,u,Dt,null,g,je);for(Ae in g)if(je=g[Ae],ke=f[Ae],g.hasOwnProperty(Ae)&&je!==ke&&(je!=null||ke!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,u));break;default:en(o,u,Ae,je,g,ke)}return;default:if(Xo(u)){for(var tn in f)je=f[tn],f.hasOwnProperty(tn)&&je!==void 0&&!g.hasOwnProperty(tn)&&W4(o,u,tn,void 0,g,je);for(De in g)je=g[De],ke=f[De],!g.hasOwnProperty(De)||je===ke||je===void 0&&ke===void 0||W4(o,u,De,je,g,ke);return}}for(var be in f)je=f[be],f.hasOwnProperty(be)&&je!=null&&!g.hasOwnProperty(be)&&en(o,u,be,null,g,je);for(Ve in g)je=g[Ve],ke=f[Ve],!g.hasOwnProperty(Ve)||je===ke||je==null&&ke==null||en(o,u,Ve,je,g,ke)}function ek(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lY(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var x=f[g],S=x.transferSize,z=x.initiatorType,H=x.duration;if(S&&H&&ek(z)){for(z=0,H=x.responseEnd,g+=1;g<f.length;g++){var se=f[g],Ae=se.startTime;if(Ae>H)break;var De=se.transferSize,Ve=se.initiatorType;De&&ek(Ve)&&(se=se.responseEnd,z+=De*(se<H?1:(H-Ae)/(se-Ae)))}if(--g,u+=8*(S+z)/(x.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var X4=null,Q4=null;function jy(o){return o.nodeType===9?o:o.ownerDocument}function tk(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rk(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Y4(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Z4=null;function cY(){var o=window.event;return o&&o.type==="popstate"?o===Z4?!1:(Z4=o,!0):(Z4=null,!1)}var nk=typeof setTimeout=="function"?setTimeout:void 0,uY=typeof clearTimeout=="function"?clearTimeout:void 0,ik=typeof Promise=="function"?Promise:void 0,dY=typeof queueMicrotask=="function"?queueMicrotask:typeof ik<"u"?function(o){return ik.resolve(null).then(o).catch(hY)}:nk;function hY(o){setTimeout(function(){throw o})}function Cc(o){return o==="head"}function ak(o,u){var f=u,g=0;do{var x=f.nextSibling;if(o.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(g===0){o.removeChild(x),q0(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")vp(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,vp(f);for(var S=f.firstChild;S;){var z=S.nextSibling,H=S.nodeName;S[Sa]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=z}}else f==="body"&&vp(o.ownerDocument.body);f=x}while(f);q0(u)}function sk(o,u){var f=o;o=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=g}while(f)}function J4(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":J4(f),xt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function fY(o,u,f,g){for(;o.nodeType===1;){var x=f;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Sa])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=ws(o.nextSibling),o===null)break}return null}function pY(o,u,f){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=ws(o.nextSibling),o===null))return null;return o}function ok(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ws(o.nextSibling),o===null))return null;return o}function e5(o){return o.data==="$?"||o.data==="$~"}function t5(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function mY(o,u){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function ws(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var r5=null;function lk(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(u===0)return ws(o.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}o=o.nextSibling}return null}function ck(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return o;u--}else f!=="/$"&&f!=="/&"||u++}o=o.previousSibling}return null}function uk(o,u,f){switch(u=jy(f),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function vp(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);xt(o)}var _s=new Map,dk=new Set;function Cy(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var pl=ee.d;ee.d={f:gY,r:yY,D:vY,C:bY,L:xY,m:wY,X:SY,S:_Y,M:TY};function gY(){var o=pl.f(),u=xy();return o||u}function yY(o){var u=He(o);u!==null&&u.tag===5&&u.type==="form"?jj(u):pl.r(o)}var $0=typeof document>"u"?null:document;function hk(o,u,f){var g=$0;if(g&&typeof u=="string"&&u){var x=ue(u);x='link[rel="'+o+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),dk.has(x)||(dk.add(x),o={rel:o,crossOrigin:f,href:u},g.querySelector(x)===null&&(u=g.createElement("link"),$i(u,"link",o),cr(u),g.head.appendChild(u)))}}function vY(o){pl.D(o),hk("dns-prefetch",o,null)}function bY(o,u){pl.C(o,u),hk("preconnect",o,u)}function xY(o,u,f){pl.L(o,u,f);var g=$0;if(g&&o&&u){var x='link[rel="preload"][as="'+ue(u)+'"]';u==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+ue(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+ue(f.imageSizes)+'"]')):x+='[href="'+ue(o)+'"]';var S=x;switch(u){case"style":S=V0(o);break;case"script":S=F0(o)}_s.has(S)||(o=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:o,as:u},f),_s.set(S,o),g.querySelector(x)!==null||u==="style"&&g.querySelector(bp(S))||u==="script"&&g.querySelector(xp(S))||(u=g.createElement("link"),$i(u,"link",o),cr(u),g.head.appendChild(u)))}}function wY(o,u){pl.m(o,u);var f=$0;if(f&&o){var g=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+ue(g)+'"][href="'+ue(o)+'"]',S=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=F0(o)}if(!_s.has(S)&&(o=m({rel:"modulepreload",href:o},u),_s.set(S,o),f.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(xp(S)))return}g=f.createElement("link"),$i(g,"link",o),cr(g),f.head.appendChild(g)}}}function _Y(o,u,f){pl.S(o,u,f);var g=$0;if(g&&o){var x=qt(g).hoistableStyles,S=V0(o);u=u||"default";var z=x.get(S);if(!z){var H={loading:0,preload:null};if(z=g.querySelector(bp(S)))H.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":u},f),(f=_s.get(S))&&n5(o,f);var se=z=g.createElement("link");cr(se),$i(se,"link",o),se._p=new Promise(function(Ae,De){se.onload=Ae,se.onerror=De}),se.addEventListener("load",function(){H.loading|=1}),se.addEventListener("error",function(){H.loading|=2}),H.loading|=4,ky(z,u,g)}z={type:"stylesheet",instance:z,count:1,state:H},x.set(S,z)}}}function SY(o,u){pl.X(o,u);var f=$0;if(f&&o){var g=qt(f).hoistableScripts,x=F0(o),S=g.get(x);S||(S=f.querySelector(xp(x)),S||(o=m({src:o,async:!0},u),(u=_s.get(x))&&i5(o,u),S=f.createElement("script"),cr(S),$i(S,"link",o),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function TY(o,u){pl.M(o,u);var f=$0;if(f&&o){var g=qt(f).hoistableScripts,x=F0(o),S=g.get(x);S||(S=f.querySelector(xp(x)),S||(o=m({src:o,async:!0,type:"module"},u),(u=_s.get(x))&&i5(o,u),S=f.createElement("script"),cr(S),$i(S,"link",o),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(x,S))}}function fk(o,u,f,g){var x=(x=pe.current)?Cy(x):null;if(!x)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=V0(f.href),f=qt(x).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=V0(f.href);var S=qt(x).hoistableStyles,z=S.get(o);if(z||(x=x.ownerDocument||x,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,z),(S=x.querySelector(bp(o)))&&!S._p&&(z.instance=S,z.state.loading=5),_s.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},_s.set(o,f),S||AY(x,o,f,z.state))),u&&g===null)throw Error(n(528,""));return z}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=F0(f),f=qt(x).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function V0(o){return'href="'+ue(o)+'"'}function bp(o){return'link[rel="stylesheet"]['+o+"]"}function pk(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function AY(o,u,f,g){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=o.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),$i(u,"link",f),cr(u),o.head.appendChild(u))}function F0(o){return'[src="'+ue(o)+'"]'}function xp(o){return"script[async]"+o}function mk(o,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=o.querySelector('style[data-href~="'+ue(f.href)+'"]');if(g)return u.instance=g,cr(g),g;var x=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),cr(g),$i(g,"style",x),ky(g,f.precedence,o),u.instance=g;case"stylesheet":x=V0(f.href);var S=o.querySelector(bp(x));if(S)return u.state.loading|=4,u.instance=S,cr(S),S;g=pk(f),(x=_s.get(x))&&n5(g,x),S=(o.ownerDocument||o).createElement("link"),cr(S);var z=S;return z._p=new Promise(function(H,se){z.onload=H,z.onerror=se}),$i(S,"link",g),u.state.loading|=4,ky(S,f.precedence,o),u.instance=S;case"script":return S=F0(f.src),(x=o.querySelector(xp(S)))?(u.instance=x,cr(x),x):(g=f,(x=_s.get(S))&&(g=m({},f),i5(g,x)),o=o.ownerDocument||o,x=o.createElement("script"),cr(x),$i(x,"link",g),o.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ky(g,f.precedence,o));return u.instance}function ky(o,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,S=x,z=0;z<g.length;z++){var H=g[z];if(H.dataset.precedence===u)S=H;else if(S!==x)break}S?S.parentNode.insertBefore(o,S.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(o,u.firstChild))}function n5(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function i5(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Oy=null;function gk(o,u,f){if(Oy===null){var g=new Map,x=Oy=new Map;x.set(f,g)}else x=Oy,g=x.get(f),g||(g=new Map,x.set(f,g));if(g.has(o))return g;for(g.set(o,null),f=f.getElementsByTagName(o),x=0;x<f.length;x++){var S=f[x];if(!(S[Sa]||S[$t]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var z=S.getAttribute(u)||"";z=o+z;var H=g.get(z);H?H.push(S):g.set(z,[S])}}return g}function yk(o,u,f){o=o.ownerDocument||o,o.head.insertBefore(f,u==="title"?o.querySelector("head > title"):null)}function EY(o,u,f){if(f===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function vk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function NY(o,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=V0(g.href),S=u.querySelector(bp(x));if(S){u=S._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Iy.bind(o),u.then(o,o)),f.state.loading|=4,f.instance=S,cr(S);return}S=u.ownerDocument||u,g=pk(g),(x=_s.get(x))&&n5(g,x),S=S.createElement("link"),cr(S);var z=S;z._p=new Promise(function(H,se){z.onload=H,z.onerror=se}),$i(S,"link",g),f.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=Iy.bind(o),u.addEventListener("load",f),u.addEventListener("error",f))}}var a5=0;function jY(o,u){return o.stylesheets&&o.count===0&&My(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var g=setTimeout(function(){if(o.stylesheets&&My(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+u);0<o.imgBytes&&a5===0&&(a5=62500*lY());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&My(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>a5?50:800)+u);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function Iy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)My(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Ry=null;function My(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Ry=new Map,u.forEach(CY,o),Ry=null,Iy.call(o))}function CY(o,u){if(!(u.state.loading&4)){var f=Ry.get(o);if(f)var g=f.get(null);else{f=new Map,Ry.set(o,f);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var z=x[S];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(f.set(z.dataset.precedence,z),g=z)}g&&f.set(null,g)}x=u.instance,z=x.getAttribute("data-precedence"),S=f.get(z)||g,S===g&&f.set(null,x),f.set(z,x),this.count++,g=Iy.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),S?S.parentNode.insertBefore(x,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),u.state.loading|=4}}var wp={$$typeof:C,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function kY(o,u,f,g,x,S,z,H,se){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function bk(o,u,f,g,x,S,z,H,se,Ae,De,Ve){return o=new kY(o,u,f,z,se,Ae,De,Ve,H),u=1,S===!0&&(u|=24),S=Wa(3,null,null,u),o.current=S,S.stateNode=o,u=Bw(),u.refCount++,o.pooledCache=u,u.refCount++,S.memoizedState={element:g,isDehydrated:f,cache:u},Vw(S),o}function xk(o){return o?(o=x0,o):x0}function wk(o,u,f,g,x,S){x=xk(x),g.context===null?g.context=x:g.pendingContext=x,g=vc(u),g.payload={element:f},S=S===void 0?null:S,S!==null&&(g.callback=S),f=bc(o,g,u),f!==null&&(Ia(f,o,u),Jf(f,o,u))}function _k(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<u?f:u}}function s5(o,u){_k(o,u),(o=o.alternate)&&_k(o,u)}function Sk(o){if(o.tag===13||o.tag===31){var u=$u(o,67108864);u!==null&&Ia(u,o,67108864),s5(o,67108864)}}function Tk(o){if(o.tag===13||o.tag===31){var u=Ja();u=bt(u);var f=$u(o,u);f!==null&&Ia(f,o,u),s5(o,u)}}var Py=!0;function OY(o,u,f,g){var x=X.T;X.T=null;var S=ee.p;try{ee.p=2,o5(o,u,f,g)}finally{ee.p=S,X.T=x}}function IY(o,u,f,g){var x=X.T;X.T=null;var S=ee.p;try{ee.p=8,o5(o,u,f,g)}finally{ee.p=S,X.T=x}}function o5(o,u,f,g){if(Py){var x=l5(g);if(x===null)K4(o,u,g,Dy,f),Ek(o,g);else if(MY(x,o,u,f,g))g.stopPropagation();else if(Ek(o,g),u&4&&-1<RY.indexOf(o)){for(;x!==null;){var S=He(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var z=wr(S.pendingLanes);if(z!==0){var H=S;for(H.pendingLanes|=2,H.entangledLanes|=2;z;){var se=1<<31-Kt(z);H.entanglements[1]|=se,z&=~se}bo(S),(Rr&6)===0&&(vy=We()+500,mp(0))}}break;case 31:case 13:H=$u(S,2),H!==null&&Ia(H,S,2),xy(),s5(S,2)}if(S=l5(g),S===null&&K4(o,u,g,Dy,f),S===x)break;x=S}x!==null&&g.stopPropagation()}else K4(o,u,g,null,f)}}function l5(o){return o=h0(o),c5(o)}var Dy=null;function c5(o){if(Dy=null,o=he(o),o!==null){var u=a(o);if(u===null)o=null;else{var f=u.tag;if(f===13){if(o=s(u),o!==null)return o;o=null}else if(f===31){if(o=c(u),o!==null)return o;o=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Dy=o,null}function Ak(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case yt:return 2;case lt:return 8;case et:case Lt:return 32;case tr:return 268435456;default:return 32}default:return 32}}var u5=!1,kc=null,Oc=null,Ic=null,_p=new Map,Sp=new Map,Rc=[],RY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ek(o,u){switch(o){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":Oc=null;break;case"mouseover":case"mouseout":Ic=null;break;case"pointerover":case"pointerout":_p.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sp.delete(u.pointerId)}}function Tp(o,u,f,g,x,S){return o===null||o.nativeEvent!==S?(o={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[x]},u!==null&&(u=He(u),u!==null&&Sk(u)),o):(o.eventSystemFlags|=g,u=o.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),o)}function MY(o,u,f,g,x){switch(u){case"focusin":return kc=Tp(kc,o,u,f,g,x),!0;case"dragenter":return Oc=Tp(Oc,o,u,f,g,x),!0;case"mouseover":return Ic=Tp(Ic,o,u,f,g,x),!0;case"pointerover":var S=x.pointerId;return _p.set(S,Tp(_p.get(S)||null,o,u,f,g,x)),!0;case"gotpointercapture":return S=x.pointerId,Sp.set(S,Tp(Sp.get(S)||null,o,u,f,g,x)),!0}return!1}function Nk(o){var u=he(o.target);if(u!==null){var f=a(u);if(f!==null){if(u=f.tag,u===13){if(u=s(f),u!==null){o.blockedOn=u,br(o.priority,function(){Tk(f)});return}}else if(u===31){if(u=c(f),u!==null){o.blockedOn=u,br(o.priority,function(){Tk(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ly(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var f=l5(o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);d0=g,f.target.dispatchEvent(g),d0=null}else return u=He(f),u!==null&&Sk(u),o.blockedOn=f,!1;u.shift()}return!0}function jk(o,u,f){Ly(o)&&f.delete(u)}function PY(){u5=!1,kc!==null&&Ly(kc)&&(kc=null),Oc!==null&&Ly(Oc)&&(Oc=null),Ic!==null&&Ly(Ic)&&(Ic=null),_p.forEach(jk),Sp.forEach(jk)}function By(o,u){o.blockedOn===u&&(o.blockedOn=null,u5||(u5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PY)))}var Uy=null;function Ck(o){Uy!==o&&(Uy=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Uy===o&&(Uy=null);for(var u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],x=o[u+2];if(typeof g!="function"){if(c5(g||f)===null)continue;break}var S=He(f);S!==null&&(o.splice(u,3),u-=3,l4(S,{pending:!0,data:x,method:f.method,action:g},g,x))}}))}function q0(o){function u(se){return By(se,o)}kc!==null&&By(kc,o),Oc!==null&&By(Oc,o),Ic!==null&&By(Ic,o),_p.forEach(u),Sp.forEach(u);for(var f=0;f<Rc.length;f++){var g=Rc[f];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Rc.length&&(f=Rc[0],f.blockedOn===null);)Nk(f),f.blockedOn===null&&Rc.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var x=f[g],S=f[g+1],z=x[$r]||null;if(typeof S=="function")z||Ck(f);else if(z){var H=null;if(S&&S.hasAttribute("formAction")){if(x=S,z=S[$r]||null)H=z.formAction;else if(c5(x)!==null)continue}else H=z.action;typeof H=="function"?f[g+1]=H:(f.splice(g,3),g-=3),Ck(f)}}}function kk(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(z){return x=z})},focusReset:"manual",scroll:"manual"})}function u(){x!==null&&(x(),x=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),x!==null&&(x(),x=null)}}}function d5(o){this._internalRoot=o}zy.prototype.render=d5.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=Ja();wk(f,g,o,u,null,null)},zy.prototype.unmount=d5.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;wk(o.current,2,null,o,null,null),xy(),u[gn]=null}};function zy(o){this._internalRoot=o}zy.prototype.unstable_scheduleHydration=function(o){if(o){var u=Wt();o={blockedOn:null,target:o,priority:u};for(var f=0;f<Rc.length&&u!==0&&u<Rc[f].priority;f++);Rc.splice(f,0,o),f===0&&Nk(o)}};var Ok=e.version;if(Ok!=="19.2.4")throw Error(n(527,Ok,"19.2.4"));ee.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var DY={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$y.isDisabled&&$y.supportsFiber)try{fn=$y.inject(DY),Qt=$y}catch{}}return Ep.createRoot=function(o,u){if(!i(o))throw Error(n(299));var f=!1,g="",x=Bj,S=Uj,z=zj;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(z=u.onRecoverableError)),u=bk(o,1,!1,null,null,f,g,null,x,S,z,kk),o[gn]=u.current,G4(o),new d5(u)},Ep.hydrateRoot=function(o,u,f){if(!i(o))throw Error(n(299));var g=!1,x="",S=Bj,z=Uj,H=zj,se=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.formState!==void 0&&(se=f.formState)),u=bk(o,1,!0,u,f??null,g,x,se,S,z,H,kk),u.context=xk(null),f=u.current,g=Ja(),g=bt(g),x=vc(g),x.callback=null,bc(f,x,g),f=g,u.current.lanes=f,mn(u,f),bo(u),o[gn]=u.current,G4(o),new zy(u)},Ep.version="19.2.4",Ep}var Vk;function WY(){if(Vk)return p5.exports;Vk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),p5.exports=KY(),p5.exports}var XY=WY();const QY=Dr(XY);var ra=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(ra||{});const Pr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var vl=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(vl||{}),Fk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},YY=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],c=t[r++],d=((i&7)<<18|(a&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},T$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,c=s?t[i+1]:0,d=i+2<t.length,h=d?t[i+2]:0,p=a>>2,m=(a&3)<<4|c>>4;let y=(c&15)<<2|h>>6,b=h&63;d||(b=64,s||(y=64)),n.push(r[p],r[m],r[y],r[b])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YY(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const h=i<t.length?r[t.charAt(i)]:64;++i;const m=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||m==null)throw new ZY;const y=a<<2|c>>4;if(n.push(y),h!==64){const b=c<<4&240|h>>2;if(n.push(b),m!==64){const T=h<<6&192|m;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JY=function(t){const e=S$(t);return T$.encodeByteArray(e,!0)},Wv=function(t){return JY(t).replace(/\./g,"")},A$=function(t){try{return T$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ=()=>eZ().__FIREBASE_DEFAULTS__,rZ=()=>{if(typeof process>"u"||typeof Fk>"u")return;const t=Fk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A$(t[1]);return e&&JSON.parse(e)},Vx=()=>{try{return tZ()||rZ()||nZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E$=t=>{var e,r;return(r=(e=Vx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},N$=t=>{const e=E$(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},j$=()=>{var t;return(t=Vx())===null||t===void 0?void 0:t.config},C$=t=>{var e;return(e=Vx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wv(JSON.stringify(r)),Wv(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_i())}function oZ(){var t;const e=(t=Vx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dZ(){const t=_i();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k$(){return!oZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O$(){try{return typeof indexedDB=="object"}catch{return!1}}function hZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fZ="FirebaseError";class lo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=fZ,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bg.prototype.create)}}class Bg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?pZ(a,n):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new lo(i,c,n)}}function pZ(t,e){return t.replace(mZ,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const mZ=/\{\$([^}]+)}/g;function gZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Th(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(qk(a)&&qk(s)){if(!Th(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function qk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function yZ(t,e){const r=new vZ(t,e);return r.subscribe.bind(r)}class vZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");bZ(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=v5),i.error===void 0&&(i.error=v5),i.complete===void 0&&(i.complete=v5);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function v5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class Bl{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new iZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_Z(e))try{this.getOrInitializeService({instanceIdentifier:ld})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=ld){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ld){return this.instances.has(e)}getOptions(e=ld){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:wZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ld){return this.component?this.component.multipleInstances?e:ld:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wZ(t){return t===ld?void 0:t}function _Z(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new xZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yr||(yr={}));const TZ={debug:yr.DEBUG,verbose:yr.VERBOSE,info:yr.INFO,warn:yr.WARN,error:yr.ERROR,silent:yr.SILENT},AZ=yr.INFO,EZ={[yr.DEBUG]:"log",[yr.VERBOSE]:"log",[yr.INFO]:"info",[yr.WARN]:"warn",[yr.ERROR]:"error"},NZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=EZ[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e7{constructor(e){this.name=e,this._logLevel=AZ,this._logHandler=NZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yr.DEBUG,...e),this._logHandler(this,yr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yr.VERBOSE,...e),this._logHandler(this,yr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yr.INFO,...e),this._logHandler(this,yr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yr.WARN,...e),this._logHandler(this,yr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yr.ERROR,...e),this._logHandler(this,yr.ERROR,...e)}}const jZ=(t,e)=>e.some(r=>t instanceof r);let Hk,Gk;function CZ(){return Hk||(Hk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kZ(){return Gk||(Gk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I$=new WeakMap,ET=new WeakMap,R$=new WeakMap,b5=new WeakMap,t7=new WeakMap;function OZ(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(iu(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&I$.set(r,t)}).catch(()=>{}),t7.set(e,t),e}function IZ(t){if(ET.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});ET.set(t,e)}let NT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ET.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R$.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return iu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RZ(t){NT=t(NT)}function MZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(x5(this),e,...r);return R$.set(n,e.sort?e.sort():[e]),iu(n)}:kZ().includes(t)?function(...e){return t.apply(x5(this),e),iu(I$.get(this))}:function(...e){return iu(t.apply(x5(this),e))}}function PZ(t){return typeof t=="function"?MZ(t):(t instanceof IDBTransaction&&IZ(t),jZ(t,CZ())?new Proxy(t,NT):t)}function iu(t){if(t instanceof IDBRequest)return OZ(t);if(b5.has(t))return b5.get(t);const e=PZ(t);return e!==t&&(b5.set(t,e),t7.set(e,t)),e}const x5=t=>t7.get(t);function DZ(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),c=iu(s);return n&&s.addEventListener("upgradeneeded",d=>{n(iu(s.result),d.oldVersion,d.newVersion,iu(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const LZ=["get","getKey","getAll","getAllKeys","count"],BZ=["put","add","delete","clear"],w5=new Map;function Kk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w5.get(e))return w5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=BZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||LZ.includes(r)))return;const a=async function(s,...c){const d=this.transaction(s,i?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),i&&d.done]))[0]};return w5.set(e,a),a}RZ(t=>({...t,get:(e,r,n)=>Kk(e,r)||t.get(e,r,n),has:(e,r)=>!!Kk(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(zZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function zZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jT="@firebase/app",Wk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new e7("@firebase/app"),$Z="@firebase/app-compat",VZ="@firebase/analytics-compat",FZ="@firebase/analytics",qZ="@firebase/app-check-compat",HZ="@firebase/app-check",GZ="@firebase/auth",KZ="@firebase/auth-compat",WZ="@firebase/database",XZ="@firebase/data-connect",QZ="@firebase/database-compat",YZ="@firebase/functions",ZZ="@firebase/functions-compat",JZ="@firebase/installations",eJ="@firebase/installations-compat",tJ="@firebase/messaging",rJ="@firebase/messaging-compat",nJ="@firebase/performance",iJ="@firebase/performance-compat",aJ="@firebase/remote-config",sJ="@firebase/remote-config-compat",oJ="@firebase/storage",lJ="@firebase/storage-compat",cJ="@firebase/firestore",uJ="@firebase/vertexai-preview",dJ="@firebase/firestore-compat",hJ="firebase",fJ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="[DEFAULT]",pJ={[jT]:"fire-core",[$Z]:"fire-core-compat",[FZ]:"fire-analytics",[VZ]:"fire-analytics-compat",[HZ]:"fire-app-check",[qZ]:"fire-app-check-compat",[GZ]:"fire-auth",[KZ]:"fire-auth-compat",[WZ]:"fire-rtdb",[XZ]:"fire-data-connect",[QZ]:"fire-rtdb-compat",[YZ]:"fire-fn",[ZZ]:"fire-fn-compat",[JZ]:"fire-iid",[eJ]:"fire-iid-compat",[tJ]:"fire-fcm",[rJ]:"fire-fcm-compat",[nJ]:"fire-perf",[iJ]:"fire-perf-compat",[aJ]:"fire-rc",[sJ]:"fire-rc-compat",[oJ]:"fire-gcs",[lJ]:"fire-gcs-compat",[cJ]:"fire-fst",[dJ]:"fire-fst-compat",[uJ]:"fire-vertex","fire-js":"fire-js",[hJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map,mJ=new Map,kT=new Map;function Xk(t,e){try{t.container.addComponent(e)}catch(r){Ul.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function uu(t){const e=t.name;if(kT.has(e))return Ul.debug(`There were multiple attempts to register component ${e}.`),!1;kT.set(e,t);for(const r of Xv.values())Xk(r,t);for(const r of mJ.values())Xk(r,t);return!0}function zg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Sl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},au=new Bg("app","Firebase",gJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw au.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=fJ;function M$(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:CT,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw au.create("bad-app-name",{appName:String(i)});if(r||(r=j$()),!r)throw au.create("no-options");const a=Xv.get(i);if(a){if(Th(r,a.options)&&Th(n,a.config))return a;throw au.create("duplicate-app",{appName:i})}const s=new SZ(i);for(const d of kT.values())s.addComponent(d);const c=new yJ(r,n,s);return Xv.set(i,c),c}function r7(t=CT){const e=Xv.get(t);if(!e&&t===CT&&j$())return M$();if(!e)throw au.create("no-app",{appName:t});return e}function ks(t,e,r){var n;let i=(n=pJ[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ul.warn(c.join(" "));return}uu(new Bl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="firebase-heartbeat-database",bJ=1,Nm="firebase-heartbeat-store";let _5=null;function P$(){return _5||(_5=DZ(vJ,bJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nm)}catch(r){console.warn(r)}}}}).catch(t=>{throw au.create("idb-open",{originalErrorMessage:t.message})})),_5}async function xJ(t){try{const r=(await P$()).transaction(Nm),n=await r.objectStore(Nm).get(D$(t));return await r.done,n}catch(e){if(e instanceof lo)Ul.warn(e.message);else{const r=au.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ul.warn(r.message)}}}async function Qk(t,e){try{const n=(await P$()).transaction(Nm,"readwrite");await n.objectStore(Nm).put(e,D$(t)),await n.done}catch(r){if(r instanceof lo)Ul.warn(r.message);else{const n=au.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ul.warn(n.message)}}}function D$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ=1024,_J=720*60*60*1e3;class SJ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new AJ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Yk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=_J}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ul.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Yk(),{heartbeatsToSend:n,unsentEntries:i}=TJ(this._heartbeatsCache.heartbeats),a=Wv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Ul.warn(r),""}}}function Yk(){return new Date().toISOString().substring(0,10)}function TJ(t,e=wJ){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),Zk(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Zk(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class AJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O$()?hZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await xJ(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zk(t){return Wv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t){uu(new Bl("platform-logger",e=>new UZ(e),"PRIVATE")),uu(new Bl("heartbeat",e=>new SJ(e),"PRIVATE")),ks(jT,Wk,t),ks(jT,Wk,"esm2017"),ks("fire-js","")}EJ("");var NJ="firebase",jJ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ks(NJ,jJ,"app");function n7(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function L$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CJ=L$,B$=new Bg("auth","Firebase",L$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new e7("@firebase/auth");function kJ(t,...e){Qv.logLevel<=yr.WARN&&Qv.warn(`Auth (${e0}): ${t}`,...e)}function jv(t,...e){Qv.logLevel<=yr.ERROR&&Qv.error(`Auth (${e0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,...e){throw a7(t,...e)}function io(t,...e){return a7(t,...e)}function i7(t,e,r){const n=Object.assign(Object.assign({},CJ()),{[e]:r});return new Bg("auth","Firebase",n).create(e,{appName:t.name})}function Ed(t){return i7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OJ(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ro(t,"argument-error"),i7(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function a7(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return B$.create(t,...e)}function Gt(t,e,...r){if(!t)throw a7(e,...r)}function Tl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jv(e),new Error(e)}function zl(t,e){t||Tl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IJ(){return Jk()==="http:"||Jk()==="https:"}function Jk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IJ()||cZ()||"connection"in navigator)?navigator.onLine:!0}function MJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,r){this.shortDelay=e,this.longDelay=r,zl(r>e,"Short delay should be less than long delay!"),this.isMobile=sZ()||uZ()}get(){return RJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t,e){zl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=new $g(3e4,6e4);function o7(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gf(t,e,r,n,i={}){return z$(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const c=Ug(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return lZ()||(h.referrerPolicy="no-referrer"),U$.fetch()($$(t,t.config.apiHost,r,c),h)})}async function z$(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},PJ),e);try{const i=new BJ(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Fy(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const c=a.ok?s.errorMessage:s.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw Fy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw Fy(t,"user-disabled",s);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw i7(t,p,h);Ro(t,p)}}catch(i){if(i instanceof lo)throw i;Ro(t,"network-request-failed",{message:String(i)})}}async function LJ(t,e,r,n,i={}){const a=await gf(t,e,r,n,i);return"mfaPendingCredential"in a&&Ro(t,"multi-factor-auth-required",{_serverResponse:a}),a}function $$(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?s7(t.config,i):`${t.config.apiScheme}://${i}`}class BJ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(io(this.auth,"network-request-failed")),DJ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=io(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UJ(t,e){return gf(t,"POST","/v1/accounts:delete",e)}async function V$(t,e){return gf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zJ(t,e=!1){const r=sn(t),n=await r.getIdToken(e),i=l7(n);Gt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:im(S5(i.auth_time)),issuedAtTime:im(S5(i.iat)),expirationTime:im(S5(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function S5(t){return Number(t)*1e3}function l7(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return jv("JWT malformed, contained fewer than 3 sections"),null;try{const i=A$(r);return i?JSON.parse(i):(jv("Failed to decode base64 JWT payload"),null)}catch(i){return jv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eO(t){const e=l7(t);return Gt(e,"internal-error"),Gt(typeof e.exp<"u","internal-error"),Gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof lo&&$J(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function $J({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=im(this.lastLoginAt),this.creationTime=im(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(t){var e;const r=t.auth,n=await t.getIdToken(),i=await jm(t,V$(r,{idToken:n}));Gt(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?F$(a.providerUserInfo):[],c=qJ(t.providerData,s),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new IT(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function FJ(t){const e=sn(t);await Yv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qJ(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function F$(t){return t.map(e=>{var{providerId:r}=e,n=n7(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HJ(t,e){const r=await z$(t,{},async()=>{const n=Ug({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=$$(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",U$.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function GJ(t,e){return gf(t,"POST","/v2/accounts:revokeToken",o7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gt(e.idToken,"internal-error"),Gt(typeof e.idToken<"u","internal-error"),Gt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Gt(e.length!==0,"internal-error");const r=eO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await HJ(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new hh;return n&&(Gt(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Gt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Gt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hh,this.toJSON())}_performRefresh(){return Tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t,e){Gt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Al{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=n7(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new IT(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await jm(this,this.stsTokenManager.getToken(this.auth,e));return Gt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return zJ(this,e)}reload(){return FJ(this)}_assign(e){this!==e&&(Gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Al(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Yv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sl(this.auth.app))return Promise.reject(Ed(this.auth));const e=await this.getIdToken();return await jm(this,UJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(i=r.email)!==null&&i!==void 0?i:void 0,b=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,_=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,N=(h=r.createdAt)!==null&&h!==void 0?h:void 0,k=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:C,emailVerified:$,isAnonymous:I,providerData:L,stsTokenManager:E}=r;Gt(C&&E,e,"internal-error");const A=hh.fromJSON(this.name,E);Gt(typeof C=="string",e,"internal-error"),Pc(m,e.name),Pc(y,e.name),Gt(typeof $=="boolean",e,"internal-error"),Gt(typeof I=="boolean",e,"internal-error"),Pc(b,e.name),Pc(T,e.name),Pc(_,e.name),Pc(w,e.name),Pc(N,e.name),Pc(k,e.name);const R=new Al({uid:C,auth:e,email:y,emailVerified:$,displayName:m,isAnonymous:I,photoURL:T,phoneNumber:b,tenantId:_,stsTokenManager:A,createdAt:N,lastLoginAt:k});return L&&Array.isArray(L)&&(R.providerData=L.map(F=>Object.assign({},F))),w&&(R._redirectEventId=w),R}static async _fromIdTokenResponse(e,r,n=!1){const i=new hh;i.updateFromServerResponse(r);const a=new Al({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Yv(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Gt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?F$(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new hh;c.updateFromIdToken(n);const d=new Al({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new IT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new Map;function El(t){zl(t instanceof Function,"Expected a class definition");let e=tO.get(t);return e?(zl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}q$.type="NONE";const rO=q$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e,r){return`firebase:${t}:${e}:${r}`}class fh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Cv(this.userKey,i.apiKey,a),this.fullPersistenceKey=Cv("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Al._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new fh(El(rO),e,n);const i=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||El(rO);const s=Cv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(s);if(p){const m=Al._fromJSON(e,p);h!==a&&(c=m),a=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new fh(a,e,n):(a=d[0],c&&await a._set(s,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new fh(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q$(e))return"Blackberry";if(Y$(e))return"Webos";if(G$(e))return"Safari";if((e.includes("chrome/")||K$(e))&&!e.includes("edge/"))return"Chrome";if(X$(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function H$(t=_i()){return/firefox\//i.test(t)}function G$(t=_i()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K$(t=_i()){return/crios\//i.test(t)}function W$(t=_i()){return/iemobile/i.test(t)}function X$(t=_i()){return/android/i.test(t)}function Q$(t=_i()){return/blackberry/i.test(t)}function Y$(t=_i()){return/webos/i.test(t)}function c7(t=_i()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KJ(t=_i()){var e;return c7(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WJ(){return dZ()&&document.documentMode===10}function Z$(t=_i()){return c7(t)||X$(t)||Y$(t)||Q$(t)||/windows phone/i.test(t)||W$(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t,e=[]){let r;switch(t){case"Browser":r=nO(_i());break;case"Worker":r=`${nO(_i())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${e0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,c)=>{try{const d=e(a);s(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QJ(t,e={}){return gf(t,"GET","/v2/passwordPolicy",o7(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=6;class ZJ{constructor(e){var r,n,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:YJ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iO(this),this.idTokenSubscription=new iO(this),this.beforeStateQueue=new XJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=El(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await fh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await V$(this,{idToken:e}),n=await Al._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Sl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Yv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sl(this.app))return Promise.reject(Ed(this));const r=e?sn(e):null;return r&&Gt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sl(this.app)?Promise.reject(Ed(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sl(this.app)?Promise.reject(Ed(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(El(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QJ(this),r=new ZJ(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await GJ(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&El(e)||this._popupRedirectResolver;Gt(r,this,"argument-error"),this.redirectPersistenceManager=await fh.create(this,[El(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gt(c,this,"internal-error"),c.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,i);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&kJ(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Fx(t){return sn(t)}class iO{constructor(e){this.auth=e,this.observer=null,this.addObserver=yZ(r=>this.observer=r)}get next(){return Gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eee(t){u7=t}function tee(t){return u7.loadJS(t)}function ree(){return u7.gapiScript}function nee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iee(t,e){const r=zg(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Th(a,e??{}))return i;Ro(i,"already-initialized")}return r.initialize({options:e})}function aee(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(El);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function see(t,e,r){const n=Fx(t);Gt(n._canInitEmulator,n,"emulator-config-failed"),Gt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=eV(e),{host:s,port:c}=oee(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${a}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),lee()}function eV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oee(t){const e=eV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:aO(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:aO(s)}}}function aO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Tl("not implemented")}_getIdTokenResponse(e){return Tl("not implemented")}_linkToIdToken(e,r){return Tl("not implemented")}_getReauthenticationResolver(e){return Tl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t,e){return LJ(t,"POST","/v1/accounts:signInWithIdp",o7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cee="http://localhost";class Rd extends tV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Rd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ro("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=n7(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Rd(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return ph(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ph(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ph(e,r)}buildRequest(){const e={requestUri:cee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ug(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends d7{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends Vg{constructor(){super("facebook.com")}static credential(e){return Rd._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fc.credentialFromTaggedObject(e)}static credentialFromError(e){return Fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fc.credential(e.oauthAccessToken)}catch{return null}}}Fc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Vg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Rd._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return wl.credential(r,n)}catch{return null}}}wl.GOOGLE_SIGN_IN_METHOD="google.com";wl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends Vg{constructor(){super("github.com")}static credential(e){return Rd._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qc.credential(e.oauthAccessToken)}catch{return null}}}qc.GITHUB_SIGN_IN_METHOD="github.com";qc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Vg{constructor(){super("twitter.com")}static credential(e,r){return Rd._fromParams({providerId:Hc.PROVIDER_ID,signInMethod:Hc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Hc.credentialFromTaggedObject(e)}static credentialFromError(e){return Hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Hc.credential(r,n)}catch{return null}}}Hc.TWITTER_SIGN_IN_METHOD="twitter.com";Hc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Al._fromIdTokenResponse(e,n,i),s=sO(n);return new Ah({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=sO(n);return new Ah({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function sO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends lo{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Zv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Zv(e,r,n,i)}}function rV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Zv._fromErrorAndOperation(t,a,e,n):a})}async function uee(t,e,r=!1){const n=await jm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ah._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dee(t,e,r=!1){const{auth:n}=t;if(Sl(n.app))return Promise.reject(Ed(n));const i="reauthenticate";try{const a=await jm(t,rV(n,i,e,t),r);Gt(a.idToken,n,"internal-error");const s=l7(a.idToken);Gt(s,n,"internal-error");const{sub:c}=s;return Gt(t.uid===c,n,"user-mismatch"),Ah._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ro(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hee(t,e,r=!1){if(Sl(t.app))return Promise.reject(Ed(t));const n="signIn",i=await rV(t,n,e),a=await Ah._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}function fee(t,e,r,n){return sn(t).onIdTokenChanged(e,r,n)}function pee(t,e,r){return sn(t).beforeAuthStateChanged(e,r)}function mee(t,e,r,n){return sn(t).onAuthStateChanged(e,r,n)}function gee(t){return sn(t).signOut()}const Jv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Jv,"1"),this.storage.removeItem(Jv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yee=1e3,vee=10;class iV extends nV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);WJ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vee):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},yee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}iV.type="LOCAL";const bee=iV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV extends nV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}aV.type="SESSION";const sV=aV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new qx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(s).map(async h=>h(r.origin,a)),d=await xee(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((c,d)=>{const h=h7("",20);i.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(p),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(){return window}function _ee(t){Co().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(){return typeof Co().WorkerGlobalScope<"u"&&typeof Co().importScripts=="function"}async function See(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tee(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Aee(){return oV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="firebaseLocalStorageDb",Eee=1,eb="firebaseLocalStorage",cV="fbase_key";class Fg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Hx(t,e){return t.transaction([eb],e?"readwrite":"readonly").objectStore(eb)}function Nee(){const t=indexedDB.deleteDatabase(lV);return new Fg(t).toPromise()}function RT(){const t=indexedDB.open(lV,Eee);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(eb,{keyPath:cV})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(eb)?e(n):(n.close(),await Nee(),e(await RT()))})})}async function oO(t,e,r){const n=Hx(t,!0).put({[cV]:e,value:r});return new Fg(n).toPromise()}async function jee(t,e){const r=Hx(t,!1).get(e),n=await new Fg(r).toPromise();return n===void 0?null:n.value}function lO(t,e){const r=Hx(t,!0).delete(e);return new Fg(r).toPromise()}const Cee=800,kee=3;class uV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await RT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>kee)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qx._getInstance(Aee()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await See(),!this.activeServiceWorker)return;this.sender=new wee(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await RT();return await oO(e,Jv,"1"),await lO(e,Jv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>oO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>jee(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Hx(i,!1).getAll();return new Fg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Cee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uV.type="LOCAL";const Oee=uV;new $g(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t,e){return e?El(e):(Gt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7 extends tV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ph(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ph(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ph(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Iee(t){return hee(t.auth,new f7(t),t.bypassAuthState)}function Ree(t){const{auth:e,user:r}=t;return Gt(r,e,"internal-error"),dee(r,new f7(t),t.bypassAuthState)}async function Mee(t){const{auth:e,user:r}=t;return Gt(r,e,"internal-error"),uee(r,new f7(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Iee;case"linkViaPopup":case"linkViaRedirect":return Mee;case"reauthViaPopup":case"reauthViaRedirect":return Ree;default:Ro(this.auth,"internal-error")}}resolve(e){zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pee=new $g(2e3,1e4);async function Dee(t,e,r){if(Sl(t.app))return Promise.reject(io(t,"operation-not-supported-in-this-environment"));const n=Fx(t);OJ(t,e,d7);const i=dV(n,r);return new vd(n,"signInViaPopup",e,i).executeNotNull()}class vd extends hV{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,vd.currentPopupAction&&vd.currentPopupAction.cancel(),vd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gt(e,this.auth,"internal-error"),e}async onExecution(){zl(this.filter.length===1,"Popup operations only handle one event");const e=h7();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(io(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(io(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(io(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Pee.get())};e()}}vd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lee="pendingRedirect",kv=new Map;class Bee extends hV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=kv.get(this.auth._key());if(!e){try{const n=await Uee(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}kv.set(this.auth._key(),e)}return this.bypassAuthState||kv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Uee(t,e){const r=Vee(e),n=$ee(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function zee(t,e){kv.set(t._key(),e)}function $ee(t){return El(t._redirectPersistence)}function Vee(t){return Cv(Lee,t.config.apiKey,t.name)}async function Fee(t,e,r=!1){if(Sl(t.app))return Promise.reject(Ed(t));const n=Fx(t),i=dV(n,e),s=await new Bee(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee=600*1e3;class Hee{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Gee(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!fV(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(io(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qee&&this.cachedEventUids.clear(),this.cachedEventUids.has(cO(e))}saveEventToCache(e){this.cachedEventUids.add(cO(e)),this.lastProcessedEventTime=Date.now()}}function cO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Gee(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(t,e={}){return gf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xee=/^https?/;async function Qee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Kee(t);for(const r of e)try{if(Yee(r))return}catch{}Ro(t,"unauthorized-domain")}function Yee(t){const e=OT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!Xee.test(r))return!1;if(Wee.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee=new $g(3e4,6e4);function uO(){const t=Co().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Jee(t){return new Promise((e,r)=>{var n,i,a;function s(){uO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uO(),r(io(t,"network-request-failed"))},timeout:Zee.get()})}if(!((i=(n=Co().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Co().gapi)===null||a===void 0)&&a.load)s();else{const c=nee("iframefcb");return Co()[c]=()=>{gapi.load?s():r(io(t,"network-request-failed"))},tee(`${ree()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw Ov=null,e})}let Ov=null;function ete(t){return Ov=Ov||Jee(t),Ov}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tte=new $g(5e3,15e3),rte="__/auth/iframe",nte="emulator/auth/iframe",ite={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ate=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ste(t){const e=t.config;Gt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?s7(e,nte):`https://${t.config.authDomain}/${rte}`,n={apiKey:e.apiKey,appName:t.name,v:e0},i=ate.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Ug(n).slice(1)}`}async function ote(t){const e=await ete(t),r=Co().gapi;return Gt(r,t,"internal-error"),e.open({where:document.body,url:ste(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ite,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=io(t,"network-request-failed"),c=Co().setTimeout(()=>{a(s)},tte.get());function d(){Co().clearTimeout(c),i(n)}n.ping(d).then(d,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cte=500,ute=600,dte="_blank",hte="http://localhost";class dO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fte(t,e,r,n=cte,i=ute){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},lte),{width:n.toString(),height:i.toString(),top:a,left:s}),h=_i().toLowerCase();r&&(c=K$(h)?dte:r),H$(h)&&(e=e||hte,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[b,T])=>`${y}${b}=${T},`,"");if(KJ(h)&&c!=="_self")return pte(e||"",c),new dO(null);const m=window.open(e||"",c,p);Gt(m,t,"popup-blocked");try{m.focus()}catch{}return new dO(m)}function pte(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mte="__/auth/handler",gte="emulator/auth/handler",yte=encodeURIComponent("fac");async function hO(t,e,r,n,i,a){Gt(t.config.authDomain,t,"auth-domain-config-required"),Gt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:e0,eventId:i};if(e instanceof d7){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",gZ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof Vg){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const c=s;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${yte}=${encodeURIComponent(d)}`:"";return`${vte(t)}?${Ug(c).slice(1)}${h}`}function vte({config:t}){return t.emulator?s7(t,gte):`https://${t.authDomain}/${mte}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="webStorageSupport";class bte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sV,this._completeRedirectFn=Fee,this._overrideRedirectResult=zee}async _openPopup(e,r,n,i){var a;zl((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await hO(e,r,n,OT(),i);return fte(e,s,h7())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await hO(e,r,n,OT(),i);return _ee(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(zl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await ote(e),n=new Hee(e);return r.register("authEvent",i=>(Gt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(T5,{type:T5},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[T5];s!==void 0&&r(!!s),Ro(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Qee(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Z$()||G$()||c7()}}const xte=bte;var fO="@firebase/auth",pO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _te(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ste(t){uu(new Bl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;Gt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J$(t)},h=new JJ(n,i,a,d);return aee(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),uu(new Bl("auth-internal",e=>{const r=Fx(e.getProvider("auth").getImmediate());return(n=>new wte(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(fO,pO,_te(t)),ks(fO,pO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tte=300,Ate=C$("authIdTokenMaxAge")||Tte;let mO=null;const Ete=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Ate)return;const i=r==null?void 0:r.token;mO!==i&&(mO=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pV(t=r7()){const e=zg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=iee(t,{popupRedirectResolver:xte,persistence:[Oee,bee,sV]}),n=C$("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=Ete(a.toString());pee(r,s,()=>s(r.currentUser)),fee(r,c=>s(c))}}const i=E$("auth");return i&&see(r,`http://${i}`),r}function Nte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}eee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=io("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",Nte().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ste("Browser");var gO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nd,mV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,A){function R(){}R.prototype=A.prototype,E.D=A.prototype,E.prototype=new R,E.prototype.constructor=E,E.C=function(F,P,B){for(var D=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)D[Y-2]=arguments[Y];return A.prototype[P].apply(F,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,A,R){R||(R=0);var F=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)F[P]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(P=0;16>P;++P)F[P]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=E.g[0],R=E.g[1],P=E.g[2];var B=E.g[3],D=A+(B^R&(P^B))+F[0]+3614090360&4294967295;A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[1]+3905402710&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[2]+606105819&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[3]+3250441966&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(B^R&(P^B))+F[4]+4118548399&4294967295,A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[5]+1200080426&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[6]+2821735955&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[7]+4249261313&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(B^R&(P^B))+F[8]+1770035416&4294967295,A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[9]+2336552879&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[10]+4294925233&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[11]+2304563134&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(B^R&(P^B))+F[12]+1804603682&4294967295,A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[13]+4254626195&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[14]+2792965006&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[15]+1236535329&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(P^B&(R^P))+F[1]+4129170786&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[6]+3225465664&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[11]+643717713&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[0]+3921069994&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(P^B&(R^P))+F[5]+3593408605&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[10]+38016083&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[15]+3634488961&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[4]+3889429448&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(P^B&(R^P))+F[9]+568446438&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[14]+3275163606&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[3]+4107603335&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[8]+1163531501&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(P^B&(R^P))+F[13]+2850285829&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[2]+4243563512&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[7]+1735328473&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[12]+2368359562&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(R^P^B)+F[5]+4294588738&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[8]+2272392833&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[11]+1839030562&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[14]+4259657740&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(R^P^B)+F[1]+2763975236&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[4]+1272893353&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[7]+4139469664&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[10]+3200236656&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(R^P^B)+F[13]+681279174&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[0]+3936430074&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[3]+3572445317&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[6]+76029189&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(R^P^B)+F[9]+3654602809&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[12]+3873151461&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[15]+530742520&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[2]+3299628645&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(P^(R|~B))+F[0]+4096336452&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[7]+1126891415&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[14]+2878612391&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[5]+4237533241&4294967295,R=P+(D<<21&4294967295|D>>>11),D=A+(P^(R|~B))+F[12]+1700485571&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[3]+2399980690&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[10]+4293915773&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[1]+2240044497&4294967295,R=P+(D<<21&4294967295|D>>>11),D=A+(P^(R|~B))+F[8]+1873313359&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[15]+4264355552&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[6]+2734768916&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[13]+1309151649&4294967295,R=P+(D<<21&4294967295|D>>>11),D=A+(P^(R|~B))+F[4]+4149444226&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[11]+3174756917&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[2]+718787259&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[9]+3951481745&4294967295,E.g[0]=E.g[0]+A&4294967295,E.g[1]=E.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+B&4294967295}n.prototype.u=function(E,A){A===void 0&&(A=E.length);for(var R=A-this.blockSize,F=this.B,P=this.h,B=0;B<A;){if(P==0)for(;B<=R;)i(this,E,B),B+=this.blockSize;if(typeof E=="string"){for(;B<A;)if(F[P++]=E.charCodeAt(B++),P==this.blockSize){i(this,F),P=0;break}}else for(;B<A;)if(F[P++]=E[B++],P==this.blockSize){i(this,F),P=0;break}}this.h=P,this.o+=A},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var A=1;A<E.length-8;++A)E[A]=0;var R=8*this.o;for(A=E.length-8;A<E.length;++A)E[A]=R&255,R/=256;for(this.u(E),E=Array(16),A=R=0;4>A;++A)for(var F=0;32>F;F+=8)E[R++]=this.g[A]>>>F&255;return E};function a(E,A){var R=c;return Object.prototype.hasOwnProperty.call(R,E)?R[E]:R[E]=A(E)}function s(E,A){this.h=A;for(var R=[],F=!0,P=E.length-1;0<=P;P--){var B=E[P]|0;F&&B==A||(R[P]=B,F=!1)}this.g=R}var c={};function d(E){return-128<=E&&128>E?a(E,function(A){return new s([A|0],0>A?-1:0)}):new s([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return w(h(-E));for(var A=[],R=1,F=0;E>=R;F++)A[F]=E/R|0,R*=4294967296;return new s(A,0)}function p(E,A){if(E.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(E.charAt(0)=="-")return w(p(E.substring(1),A));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(A,8)),F=m,P=0;P<E.length;P+=8){var B=Math.min(8,E.length-P),D=parseInt(E.substring(P,P+B),A);8>B?(B=h(Math.pow(A,B)),F=F.j(B).add(h(D))):(F=F.j(R),F=F.add(h(D)))}return F}var m=d(0),y=d(1),b=d(16777216);t=s.prototype,t.m=function(){if(_(this))return-w(this).m();for(var E=0,A=1,R=0;R<this.g.length;R++){var F=this.i(R);E+=(0<=F?F:4294967296+F)*A,A*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(_(this))return"-"+w(this).toString(E);for(var A=h(Math.pow(E,6)),R=this,F="";;){var P=$(R,A).g;R=N(R,P.j(A));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(E);if(R=P,T(R))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var A=0;A<E.g.length;A++)if(E.g[A]!=0)return!1;return!0}function _(E){return E.h==-1}t.l=function(E){return E=N(this,E),_(E)?-1:T(E)?0:1};function w(E){for(var A=E.g.length,R=[],F=0;F<A;F++)R[F]=~E.g[F];return new s(R,~E.h).add(y)}t.abs=function(){return _(this)?w(this):this},t.add=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0,P=0;P<=A;P++){var B=F+(this.i(P)&65535)+(E.i(P)&65535),D=(B>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);F=D>>>16,B&=65535,D&=65535,R[P]=D<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function N(E,A){return E.add(w(A))}t.j=function(E){if(T(this)||T(E))return m;if(_(this))return _(E)?w(this).j(w(E)):w(w(this).j(E));if(_(E))return w(this.j(w(E)));if(0>this.l(b)&&0>E.l(b))return h(this.m()*E.m());for(var A=this.g.length+E.g.length,R=[],F=0;F<2*A;F++)R[F]=0;for(F=0;F<this.g.length;F++)for(var P=0;P<E.g.length;P++){var B=this.i(F)>>>16,D=this.i(F)&65535,Y=E.i(P)>>>16,J=E.i(P)&65535;R[2*F+2*P]+=D*J,k(R,2*F+2*P),R[2*F+2*P+1]+=B*J,k(R,2*F+2*P+1),R[2*F+2*P+1]+=D*Y,k(R,2*F+2*P+1),R[2*F+2*P+2]+=B*Y,k(R,2*F+2*P+2)}for(F=0;F<A;F++)R[F]=R[2*F+1]<<16|R[2*F];for(F=A;F<2*A;F++)R[F]=0;return new s(R,0)};function k(E,A){for(;(E[A]&65535)!=E[A];)E[A+1]+=E[A]>>>16,E[A]&=65535,A++}function C(E,A){this.g=E,this.h=A}function $(E,A){if(T(A))throw Error("division by zero");if(T(E))return new C(m,m);if(_(E))return A=$(w(E),A),new C(w(A.g),w(A.h));if(_(A))return A=$(E,w(A)),new C(w(A.g),A.h);if(30<E.g.length){if(_(E)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var R=y,F=A;0>=F.l(E);)R=I(R),F=I(F);var P=L(R,1),B=L(F,1);for(F=L(F,2),R=L(R,2);!T(F);){var D=B.add(F);0>=D.l(E)&&(P=P.add(R),B=D),F=L(F,1),R=L(R,1)}return A=N(E,P.j(A)),new C(P,A)}for(P=m;0<=E.l(A);){for(R=Math.max(1,Math.floor(E.m()/A.m())),F=Math.ceil(Math.log(R)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=h(R),D=B.j(A);_(D)||0<D.l(E);)R-=F,B=h(R),D=B.j(A);T(B)&&(B=y),P=P.add(B),E=N(E,D)}return new C(P,E)}t.A=function(E){return $(this,E).h},t.and=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)&E.i(F);return new s(R,this.h&E.h)},t.or=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)|E.i(F);return new s(R,this.h|E.h)},t.xor=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)^E.i(F);return new s(R,this.h^E.h)};function I(E){for(var A=E.g.length+1,R=[],F=0;F<A;F++)R[F]=E.i(F)<<1|E.i(F-1)>>>31;return new s(R,E.h)}function L(E,A){var R=A>>5;A%=32;for(var F=E.g.length-R,P=[],B=0;B<F;B++)P[B]=0<A?E.i(B+R)>>>A|E.i(B+R+1)<<32-A:E.i(B+R);return new s(P,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,mV=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Nd=s}).apply(typeof gO<"u"?gO:typeof self<"u"?self:typeof window<"u"?window:{});var qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gV,Xp,yV,Iv,MT,vV,bV,xV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,O,V){return v==Array.prototype||v==Object.prototype||(v[O]=V.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof qy=="object"&&qy];for(var O=0;O<v.length;++O){var V=v[O];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function i(v,O){if(O)e:{var V=n;v=v.split(".");for(var W=0;W<v.length-1;W++){var _e=v[W];if(!(_e in V))break e;V=V[_e]}v=v[v.length-1],W=V[v],O=O(W),O!=W&&O!=null&&e(V,v,{configurable:!0,writable:!0,value:O})}}function a(v,O){v instanceof String&&(v+="");var V=0,W=!1,_e={next:function(){if(!W&&V<v.length){var Oe=V++;return{value:O(Oe,v[Oe]),done:!1}}return W=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(v){return v||function(){return a(this,function(O,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(v){var O=typeof v;return O=O!="object"?O:v?Array.isArray(v)?"array":O:"null",O=="array"||O=="object"&&typeof v.length=="number"}function h(v){var O=typeof v;return O=="object"&&v!=null||O=="function"}function p(v,O,V){return v.call.apply(v.bind,arguments)}function m(v,O,V){if(!v)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,W),v.apply(O,_e)}}return function(){return v.apply(O,arguments)}}function y(v,O,V){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function b(v,O){var V=Array.prototype.slice.call(arguments,1);return function(){var W=V.slice();return W.push.apply(W,arguments),v.apply(this,W)}}function T(v,O){function V(){}V.prototype=O.prototype,v.aa=O.prototype,v.prototype=new V,v.prototype.constructor=v,v.Qb=function(W,_e,Oe){for(var st=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)st[Br-2]=arguments[Br];return O.prototype[_e].apply(W,st)}}function _(v){const O=v.length;if(0<O){const V=Array(O);for(let W=0;W<O;W++)V[W]=v[W];return V}return[]}function w(v,O){for(let V=1;V<arguments.length;V++){const W=arguments[V];if(d(W)){const _e=v.length||0,Oe=W.length||0;v.length=_e+Oe;for(let st=0;st<Oe;st++)v[_e+st]=W[st]}else v.push(W)}}class N{constructor(O,V){this.i=O,this.j=V,this.h=0,this.g=null}get(){let O;return 0<this.h?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function k(v){return/^[\s\xa0]*$/.test(v)}function C(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function $(v){return $[" "](v),v}$[" "]=function(){};var I=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(v,O,V){for(const W in v)O.call(V,v[W],W,v)}function E(v,O){for(const V in v)O.call(void 0,v[V],V,v)}function A(v){const O={};for(const V in v)O[V]=v[V];return O}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(v,O){let V,W;for(let _e=1;_e<arguments.length;_e++){W=arguments[_e];for(V in W)v[V]=W[V];for(let Oe=0;Oe<R.length;Oe++)V=R[Oe],Object.prototype.hasOwnProperty.call(W,V)&&(v[V]=W[V])}}function P(v){var O=1;v=v.split(":");const V=[];for(;0<O&&v.length;)V.push(v.shift()),O--;return v.length&&V.push(v.join(":")),V}function B(v){c.setTimeout(()=>{throw v},0)}function D(){var v=ge;let O=null;return v.g&&(O=v.g,v.g=v.g.next,v.g||(v.h=null),O.next=null),O}class Y{constructor(){this.h=this.g=null}add(O,V){const W=J.get();W.set(O,V),this.h?this.h.next=W:this.g=W,this.h=W}}var J=new N(()=>new X,v=>v.reset());class X{constructor(){this.next=this.g=this.h=null}set(O,V){this.h=O,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,Z=!1,ge=new Y,ce=()=>{const v=c.Promise.resolve(void 0);ee=()=>{v.then(Q)}};var Q=()=>{for(var v;v=D();){try{v.h.call(v.g)}catch(V){B(V)}var O=J;O.j(v),100>O.h&&(O.h++,v.next=O.g,O.g=v)}Z=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(v,O){this.type=v,this.g=this.target=O,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,O=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};c.addEventListener("test",V,O),c.removeEventListener("test",V,O)}catch{}return v})();function ae(v,O){if(de.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var V=this.type=v.type,W=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=O,O=v.relatedTarget){if(I){e:{try{$(O.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(O=null)}}else V=="mouseover"?O=v.fromElement:V=="mouseout"&&(O=v.toElement);this.relatedTarget=O,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:pe[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&ae.aa.h.call(this)}}T(ae,de);var pe={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Ne(v,O,V,W,_e){this.listener=v,this.proxy=null,this.src=O,this.type=V,this.capture=!!W,this.ha=_e,this.key=++Ye,this.da=this.fa=!1}function le(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v){this.src=v,this.g={},this.h=0}we.prototype.add=function(v,O,V,W,_e){var Oe=v.toString();v=this.g[Oe],v||(v=this.g[Oe]=[],this.h++);var st=dt(v,O,W,_e);return-1<st?(O=v[st],V||(O.fa=!1)):(O=new Ne(O,this.src,Oe,!!W,_e),O.fa=V,v.push(O)),O};function xe(v,O){var V=O.type;if(V in v.g){var W=v.g[V],_e=Array.prototype.indexOf.call(W,O,void 0),Oe;(Oe=0<=_e)&&Array.prototype.splice.call(W,_e,1),Oe&&(le(O),v.g[V].length==0&&(delete v.g[V],v.h--))}}function dt(v,O,V,W){for(var _e=0;_e<v.length;++_e){var Oe=v[_e];if(!Oe.da&&Oe.listener==O&&Oe.capture==!!V&&Oe.ha==W)return _e}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),ut={};function it(v,O,V,W,_e){if(Array.isArray(O)){for(var Oe=0;Oe<O.length;Oe++)it(v,O[Oe],V,W,_e);return null}return V=gt(V),v&&v[ve]?v.K(O,V,h(W)?!!W.capture:!1,_e):jt(v,O,V,!1,W,_e)}function jt(v,O,V,W,_e,Oe){if(!O)throw Error("Invalid event type");var st=h(_e)?!!_e.capture:!!_e,Br=ye(v);if(Br||(v[Ke]=Br=new we(v)),V=Br.add(O,V,W,st,Oe),V.proxy)return V;if(W=Ie(),V.proxy=W,W.src=v,W.listener=V,v.addEventListener)oe||(_e=st),_e===void 0&&(_e=!1),v.addEventListener(O.toString(),W,_e);else if(v.attachEvent)v.attachEvent(_t(O.toString()),W);else if(v.addListener&&v.removeListener)v.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Ie(){function v(V){return O.call(v.src,v.listener,V)}const O=Xt;return v}function $e(v,O,V,W,_e){if(Array.isArray(O))for(var Oe=0;Oe<O.length;Oe++)$e(v,O[Oe],V,W,_e);else W=h(W)?!!W.capture:!!W,V=gt(V),v&&v[ve]?(v=v.i,O=String(O).toString(),O in v.g&&(Oe=v.g[O],V=dt(Oe,V,W,_e),-1<V&&(le(Oe[V]),Array.prototype.splice.call(Oe,V,1),Oe.length==0&&(delete v.g[O],v.h--)))):v&&(v=ye(v))&&(O=v.g[O.toString()],v=-1,O&&(v=dt(O,V,W,_e)),(V=-1<v?O[v]:null)&&nt(V))}function nt(v){if(typeof v!="number"&&v&&!v.da){var O=v.src;if(O&&O[ve])xe(O.i,v);else{var V=v.type,W=v.proxy;O.removeEventListener?O.removeEventListener(V,W,v.capture):O.detachEvent?O.detachEvent(_t(V),W):O.addListener&&O.removeListener&&O.removeListener(W),(V=ye(O))?(xe(V,v),V.h==0&&(V.src=null,O[Ke]=null)):le(v)}}}function _t(v){return v in ut?ut[v]:ut[v]="on"+v}function Xt(v,O){if(v.da)v=!0;else{O=new ae(O,this);var V=v.listener,W=v.ha||v.src;v.fa&&nt(v),v=V.call(W,O)}return v}function ye(v){return v=v[Ke],v instanceof we?v:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(v){return typeof v=="function"?v:(v[We]||(v[We]=function(O){return v.handleEvent(O)}),v[We])}function yt(){re.call(this),this.i=new we(this),this.M=this,this.F=null}T(yt,re),yt.prototype[ve]=!0,yt.prototype.removeEventListener=function(v,O,V,W){$e(this,v,O,V,W)};function lt(v,O){var V,W=v.F;if(W)for(V=[];W;W=W.F)V.push(W);if(v=v.M,W=O.type||O,typeof O=="string")O=new de(O,v);else if(O instanceof de)O.target=O.target||v;else{var _e=O;O=new de(W,v),F(O,_e)}if(_e=!0,V)for(var Oe=V.length-1;0<=Oe;Oe--){var st=O.g=V[Oe];_e=et(st,W,!0,O)&&_e}if(st=O.g=v,_e=et(st,W,!0,O)&&_e,_e=et(st,W,!1,O)&&_e,V)for(Oe=0;Oe<V.length;Oe++)st=O.g=V[Oe],_e=et(st,W,!1,O)&&_e}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var v=this.i,O;for(O in v.g){for(var V=v.g[O],W=0;W<V.length;W++)le(V[W]);delete v.g[O],v.h--}}this.F=null},yt.prototype.K=function(v,O,V,W){return this.i.add(String(v),O,!1,V,W)},yt.prototype.L=function(v,O,V,W){return this.i.add(String(v),O,!0,V,W)};function et(v,O,V,W){if(O=v.i.g[String(O)],!O)return!0;O=O.concat();for(var _e=!0,Oe=0;Oe<O.length;++Oe){var st=O[Oe];if(st&&!st.da&&st.capture==V){var Br=st.listener,ni=st.ha||st.src;st.fa&&xe(v.i,st),_e=Br.call(ni,W)!==!1&&_e}}return _e&&!W.defaultPrevented}function Lt(v,O,V){if(typeof v=="function")V&&(v=y(v,V));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(O)?-1:c.setTimeout(v,O||0)}function tr(v){v.g=Lt(()=>{v.g=null,v.i&&(v.i=!1,tr(v))},v.l);const O=v.h;v.h=null,v.m.apply(null,O)}class Wr extends re{constructor(O,V){super(),this.m=O,this.l=V,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:tr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(v){re.call(this),this.h=v,this.g={}}T(hn,re);var fn=[];function Qt(v){L(v.g,function(O,V){this.g.hasOwnProperty(V)&&nt(O)},v),v.g={}}hn.prototype.N=function(){hn.aa.N.call(this),Qt(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=c.JSON.stringify,Kt=c.JSON.parse,Dn=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Gn(){}Gn.prototype.h=null;function Yi(v){return v.h||(v.h=v.i())}function pi(){}var Lr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ir(){de.call(this,"d")}T(Ir,de);function wr(){de.call(this,"c")}T(wr,de);var It={},Xr=null;function pn(){return Xr=Xr||new yt}It.La="serverreachability";function on(v){de.call(this,It.La,v)}T(on,de);function Qr(v){const O=pn();lt(O,new on(O))}It.STAT_EVENT="statevent";function mn(v,O){de.call(this,It.STAT_EVENT,v),this.stat=O}T(mn,de);function G(v){const O=pn();lt(O,new mn(O,v))}It.Ma="timingevent";function Re(v,O){de.call(this,It.Ma,v),this.size=O}T(Re,de);function Pe(v,O){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},O)}function mt(){this.g=!0}mt.prototype.xa=function(){this.g=!1};function bt(v,O,V,W,_e,Oe){v.info(function(){if(v.g)if(Oe)for(var st="",Br=Oe.split("&"),ni=0;ni<Br.length;ni++){var ur=Br[ni].split("=");if(1<ur.length){var Ni=ur[0];ur=ur[1];var ji=Ni.split("_");st=2<=ji.length&&ji[1]=="type"?st+(Ni+"="+ur+"&"):st+(Ni+"=redacted&")}}else st=null;else st=Oe;return"XMLHTTP REQ ("+W+") [attempt "+_e+"]: "+O+`
`+V+`
`+st})}function Pt(v,O,V,W,_e,Oe,st){v.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+_e+"]: "+O+`
`+V+`
`+Oe+" "+st})}function Wt(v,O,V,W){v.info(function(){return"XMLHTTP TEXT ("+O+"): "+Jt(v,V)+(W?" "+W:"")})}function br(v,O){v.info(function(){return"TIMEOUT: "+O})}mt.prototype.info=function(){};function Jt(v,O){if(!v.g)return O;if(!O)return null;try{var V=JSON.parse(O);if(V){for(v=0;v<V.length;v++)if(Array.isArray(V[v])){var W=V[v];if(!(2>W.length)){var _e=W[1];if(Array.isArray(_e)&&!(1>_e.length)){var Oe=_e[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var st=1;st<_e.length;st++)_e[st]=""}}}}return Ft(V)}catch{return O}}var $t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$r={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gn;function Yr(){}T(Yr,Gn),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},gn=new Yr;function Zi(v,O,V,W){this.j=v,this.i=O,this.l=V,this.R=W||1,this.U=new hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ho}function ho(){this.i=null,this.g="",this.h=!1}var zs={},Sa={};function xt(v,O,V){v.L=1,v.v=hr(ue(O)),v.m=V,v.P=!0,he(v,null)}function he(v,O){v.F=Date.now(),qt(v),v.A=ue(v.v);var V=v.A,W=v.R;Array.isArray(W)||(W=[String(W)]),Qo(V.i,"t",W),v.C=0,V=v.j.J,v.h=new ho,v.g=P1(v.j,V?O:null,!v.m),0<v.O&&(v.M=new Wr(y(v.Y,v,v.g),v.O)),O=v.U,V=v.g,W=v.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(fn[0]=_e.toString()),_e=fn);for(var Oe=0;Oe<_e.length;Oe++){var st=it(V,_e[Oe],W||O.handleEvent,!1,O.h||O);if(!st)break;O.g[st.key]=st}O=v.H?A(v.H):{},v.m?(v.u||(v.u="POST"),O["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,O)):(v.u="GET",v.g.ea(v.A,v.u,null,O)),Qr(),bt(v.i,v.u,v.A,v.l,v.R,v.m)}Zi.prototype.ca=function(v){v=v.target;const O=this.M;O&&la(v)==3?O.j():this.Y(v)},Zi.prototype.Y=function(v){try{if(v==this.g)e:{const ji=la(this.g);var O=this.g.Ba();const hc=this.g.Z();if(!(3>ji)&&(ji!=3||this.g&&(this.h.h||this.g.oa()||Pu(this.g)))){this.J||ji!=4||O==7||(O==8||0>=hc?Qr(3):Qr(2)),yn(this);var V=this.g.Z();this.X=V;t:if(He(this)){var W=Pu(this.g);v="";var _e=W.length,Oe=la(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Vr(this);var st="";break t}this.h.i=new c.TextDecoder}for(O=0;O<_e;O++)this.h.h=!0,v+=this.h.i.decode(W[O],{stream:!(Oe&&O==_e-1)});W.length=0,this.h.g+=v,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=V==200,Pt(this.i,this.u,this.A,this.l,this.R,ji,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,ni=this.g;if((Br=ni.g?ni.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Br)){var ur=Br;break t}}ur=null}if(V=ur)Wt(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sr(this,V);else{this.o=!1,this.s=3,G(12),vn(this),Vr(this);break e}}if(this.P){V=!0;let Na;for(;!this.J&&this.C<st.length;)if(Na=at(this,st),Na==Sa){ji==4&&(this.s=4,G(14),V=!1),Wt(this.i,this.l,null,"[Incomplete Response]");break}else if(Na==zs){this.s=4,G(15),Wt(this.i,this.l,st,"[Invalid Chunk]"),V=!1;break}else Wt(this.i,this.l,Na,null),Sr(this,Na);if(He(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ji!=4||st.length!=0||this.h.h||(this.s=1,G(16),V=!1),this.o=this.o&&V,!V)Wt(this.i,this.l,st,"[Invalid Chunked Response]"),vn(this),Vr(this);else if(0<st.length&&!this.W){this.W=!0;var Ni=this.j;Ni.g==this&&Ni.ba&&!Ni.M&&(Ni.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),Vf(Ni),Ni.M=!0,G(11))}}else Wt(this.i,this.l,st,null),Sr(this,st);ji==4&&vn(this),this.o&&!this.J&&(ji==4?I1(this.j,this):(this.o=!1,qt(this)))}else E1(this.g),V==400&&0<st.indexOf("Unknown SID")?(this.s=3,G(12)):(this.s=0,G(13)),vn(this),Vr(this)}}}catch{}finally{}};function He(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function at(v,O){var V=v.C,W=O.indexOf(`
`,V);return W==-1?Sa:(V=Number(O.substring(V,W)),isNaN(V)?zs:(W+=1,W+V>O.length?Sa:(O=O.slice(W,W+V),v.C=W+V,O)))}Zi.prototype.cancel=function(){this.J=!0,vn(this)};function qt(v){v.S=Date.now()+v.I,cr(v,v.I)}function cr(v,O){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Pe(y(v.ba,v),O)}function yn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Zi.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(br(this.i,this.A),this.L!=2&&(Qr(),G(17)),vn(this),this.s=2,Vr(this)):cr(this,this.S-v)};function Vr(v){v.j.G==0||v.J||I1(v.j,v)}function vn(v){yn(v);var O=v.M;O&&typeof O.ma=="function"&&O.ma(),v.M=null,Qt(v.U),v.g&&(O=v.g,v.g=null,O.abort(),O.ma())}function Sr(v,O){try{var V=v.j;if(V.G!=0&&(V.g==v||Vs(V.h,v))){if(!v.K&&Vs(V.h,v)&&V.G==3){try{var W=V.Da.g.parse(O)}catch{W=null}if(Array.isArray(W)&&W.length==3){var _e=W;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<v.F)uc(V),cc(V);else break e;$f(V),G(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=Pe(y(V.Za,V),6e3));if(1>=ku(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Zo(V,11)}else if((v.K||V.g==v)&&uc(V),!k(O))for(_e=V.Da.g.parse(O),O=0;O<_e.length;O++){let ur=_e[O];if(V.T=ur[0],ur=ur[1],V.G==2)if(ur[0]=="c"){V.K=ur[1],V.ia=ur[2];const Ni=ur[3];Ni!=null&&(V.la=Ni,V.j.info("VER="+V.la));const ji=ur[4];ji!=null&&(V.Aa=ji,V.j.info("SVER="+V.Aa));const hc=ur[5];hc!=null&&typeof hc=="number"&&0<hc&&(W=1.5*hc,V.L=W,V.j.info("backChannelRequestTimeoutMs_="+W)),W=V;const Na=v.g;if(Na){const Bu=Na.g?Na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bu){var Oe=W.h;Oe.g||Bu.indexOf("spdy")==-1&&Bu.indexOf("quic")==-1&&Bu.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(Fs(Oe,Oe.h),Oe.h=null))}if(W.D){const Jo=Na.g?Na.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(W.ya=Jo,Qe(W.I,W.D,Jo))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-v.F,V.j.info("Handshake RTT: "+V.R+"ms")),W=V;var st=v;if(W.qa=M1(W,W.J?W.ia:null,W.W),st.K){oa(W.h,st);var Br=st,ni=W.L;ni&&(Br.I=ni),Br.B&&(yn(Br),qt(Br)),W.g=st}else k1(W);0<V.i.length&&m0(V)}else ur[0]!="stop"&&ur[0]!="close"||Zo(V,7);else V.G==3&&(ur[0]=="stop"||ur[0]=="close"?ur[0]=="stop"?Zo(V,7):Uf(V):ur[0]!="noop"&&V.l&&V.l.ta(ur),V.v=0)}}Qr(4)}catch{}}var fo=class{constructor(v,O){this.g=v,this.map=O}};function $s(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Go(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ku(v){return v.h?1:v.g?v.g.size:0}function Vs(v,O){return v.h?v.h==O:v.g?v.g.has(O):!1}function Fs(v,O){v.g?v.g.add(O):v.h=O}function oa(v,O){v.h&&v.h==O?v.h=null:v.g&&v.g.has(O)&&v.g.delete(O)}$s.prototype.cancel=function(){if(this.i=Ei(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Ei(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let O=v.i;for(const V of v.g.values())O=O.concat(V.D);return O}return _(v.i)}function Ou(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var O=[],V=v.length,W=0;W<V;W++)O.push(v[W]);return O}O=[],V=0;for(W in v)O[V++]=v[W];return O}function u0(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var O=[];v=v.length;for(var V=0;V<v;V++)O.push(V);return O}O=[],V=0;for(const W in v)O[V++]=W;return O}}}function Ko(v,O){if(v.forEach&&typeof v.forEach=="function")v.forEach(O,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,O,void 0);else for(var V=u0(v),W=Ou(v),_e=W.length,Oe=0;Oe<_e;Oe++)O.call(void 0,W[Oe],V&&V[Oe],v)}var nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wo(v,O){if(v){v=v.split("&");for(var V=0;V<v.length;V++){var W=v[V].indexOf("="),_e=null;if(0<=W){var Oe=v[V].substring(0,W);_e=v[V].substring(W+1)}else Oe=v[V];O(Oe,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function ps(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof ps){this.h=v.h,Ce(this,v.j),this.o=v.o,this.g=v.g,qe(this,v.s),this.l=v.l;var O=v.i,V=new Aa;V.i=O.i,O.g&&(V.g=new Map(O.g),V.h=O.h),tt(this,V),this.m=v.m}else v&&(O=String(v).match(nc))?(this.h=!1,Ce(this,O[1]||"",!0),this.o=nr(O[2]||""),this.g=nr(O[3]||"",!0),qe(this,O[4]),this.l=nr(O[5]||"",!0),tt(this,O[6]||"",!0),this.m=nr(O[7]||"")):(this.h=!1,this.i=new Aa(null,this.h))}ps.prototype.toString=function(){var v=[],O=this.j;O&&v.push(Zr(O,Ta,!0),":");var V=this.g;return(V||O=="file")&&(v.push("//"),(O=this.o)&&v.push(Zr(O,Ta,!0),"@"),v.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&v.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(Zr(V,V.charAt(0)=="/"?Xo:ic,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",Zr(V,Ar)),v.join("")};function ue(v){return new ps(v)}function Ce(v,O,V){v.j=V?nr(O,!0):O,v.j&&(v.j=v.j.replace(/:$/,""))}function qe(v,O){if(O){if(O=Number(O),isNaN(O)||0>O)throw Error("Bad port number "+O);v.s=O}else v.s=null}function tt(v,O,V){O instanceof Aa?(v.i=O,S1(v.i,v.h)):(V||(O=Zr(O,Iu)),v.i=new Aa(O,v.h))}function Qe(v,O,V){v.i.set(O,V)}function hr(v){return Qe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function nr(v,O){return v?O?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Zr(v,O,V){return typeof v=="string"?(v=encodeURI(v).replace(O,Li),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Li(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var Ta=/[#\/\?@]/g,ic=/[#\?:]/g,Xo=/[#\?]/g,Iu=/[#\?@]/g,Ar=/#/g;function Aa(v,O){this.h=this.g=null,this.i=v||null,this.j=!!O}function Kn(v){v.g||(v.g=new Map,v.h=0,v.i&&Wo(v.i,function(O,V){v.add(decodeURIComponent(O.replace(/\+/g," ")),V)}))}t=Aa.prototype,t.add=function(v,O){Kn(this),this.i=null,v=Ha(this,v);var V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(O),this.h+=1,this};function d0(v,O){Kn(v),O=Ha(v,O),v.g.has(O)&&(v.i=null,v.h-=v.g.get(O).length,v.g.delete(O))}function h0(v,O){return Kn(v),O=Ha(v,O),v.g.has(O)}t.forEach=function(v,O){Kn(this),this.g.forEach(function(V,W){V.forEach(function(_e){v.call(O,_e,W,this)},this)},this)},t.na=function(){Kn(this);const v=Array.from(this.g.values()),O=Array.from(this.g.keys()),V=[];for(let W=0;W<O.length;W++){const _e=v[W];for(let Oe=0;Oe<_e.length;Oe++)V.push(O[W])}return V},t.V=function(v){Kn(this);let O=[];if(typeof v=="string")h0(this,v)&&(O=O.concat(this.g.get(Ha(this,v))));else{v=Array.from(this.g.values());for(let V=0;V<v.length;V++)O=O.concat(v[V])}return O},t.set=function(v,O){return Kn(this),this.i=null,v=Ha(this,v),h0(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[O]),this.h+=1,this},t.get=function(v,O){return v?(v=this.V(v),0<v.length?String(v[0]):O):O};function Qo(v,O,V){d0(v,O),0<V.length&&(v.i=null,v.g.set(Ha(v,O),_(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],O=Array.from(this.g.keys());for(var V=0;V<O.length;V++){var W=O[V];const Oe=encodeURIComponent(String(W)),st=this.V(W);for(W=0;W<st.length;W++){var _e=Oe;st[W]!==""&&(_e+="="+encodeURIComponent(String(st[W]))),v.push(_e)}}return this.i=v.join("&")};function Ha(v,O){return O=String(O),v.j&&(O=O.toLowerCase()),O}function S1(v,O){O&&!v.j&&(Kn(v),v.i=null,v.g.forEach(function(V,W){var _e=W.toLowerCase();W!=_e&&(d0(this,W),Qo(this,_e,V))},v)),v.j=O}function Lf(v,O){const V=new mt;if(c.Image){const W=new Image;W.onload=b(Ea,V,"TestLoadImage: loaded",!0,O,W),W.onerror=b(Ea,V,"TestLoadImage: error",!1,O,W),W.onabort=b(Ea,V,"TestLoadImage: abort",!1,O,W),W.ontimeout=b(Ea,V,"TestLoadImage: timeout",!1,O,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=v}else O(!1)}function T1(v,O){const V=new mt,W=new AbortController,_e=setTimeout(()=>{W.abort(),Ea(V,"TestPingServer: timeout",!1,O)},1e4);fetch(v,{signal:W.signal}).then(Oe=>{clearTimeout(_e),Oe.ok?Ea(V,"TestPingServer: ok",!0,O):Ea(V,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(_e),Ea(V,"TestPingServer: error",!1,O)})}function Ea(v,O,V,W,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),W(V)}catch{}}function qs(){this.g=new Dn}function Bf(v,O,V){const W=V||"";try{Ko(v,function(_e,Oe){let st=_e;h(_e)&&(st=Ft(_e)),O.push(W+Oe+"="+encodeURIComponent(st))})}catch(_e){throw O.push(W+"type="+encodeURIComponent("_badmap")),_e}}function po(v){this.l=v.Ub||null,this.j=v.eb||!1}T(po,Gn),po.prototype.g=function(){return new Ga(this.l,this.j)},po.prototype.i=(function(v){return function(){return v}})({});function Ga(v,O){yt.call(this),this.D=v,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ga,yt),t=Ga.prototype,t.open=function(v,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=O,this.readyState=1,ac(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const O={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(O.body=v),(this.D||c).fetch(new Request(this.A,O)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ac(this)),this.g&&(this.readyState=3,ac(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;f0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function f0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var O=v.value?v.value:new Uint8Array(0);(O=this.v.decode(O,{stream:!v.done}))&&(this.response=this.responseText+=O)}v.done?mo(this):ac(this),this.readyState==3&&f0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,mo(this))},t.Qa=function(v){this.g&&(this.response=v,mo(this))},t.ga=function(){this.g&&mo(this)};function mo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,ac(v)}t.setRequestHeader=function(v,O){this.u.append(v,O)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],O=this.h.entries();for(var V=O.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=O.next();return v.join(`\r
`)};function ac(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ru(v){let O="";return L(v,function(V,W){O+=W,O+=":",O+=V,O+=`\r
`}),O}function sc(v,O,V){e:{for(W in V){var W=!1;break e}W=!0}W||(V=Ru(V),typeof v=="string"?V!=null&&encodeURIComponent(String(V)):Qe(v,O,V))}function _n(v){yt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(_n,yt);var Ji=/^https?$/i,Yo=["POST","PUT"];t=_n.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,O,V,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);O=O?O.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gn.g(),this.v=this.o?Yi(this.o):Yi(gn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(O,String(v),!0),this.B=!1}catch(Oe){Mu(this,Oe);return}if(v=V||"",V=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var _e in W)V.set(_e,W[_e]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Oe of W.keys())V.set(Oe,W.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(V.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),_e=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Yo,O,void 0))||W||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,st]of V)this.g.setRequestHeader(Oe,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{p0(this),this.u=!0,this.g.send(v),this.u=!1}catch(Oe){Mu(this,Oe)}};function Mu(v,O){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=O,v.m=5,oc(v),lc(v)}function oc(v){v.A||(v.A=!0,lt(v,"complete"),lt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,lt(this,"complete"),lt(this,"abort"),lc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lc(this,!0)),_n.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?A1(this):this.bb())},t.bb=function(){A1(this)};function A1(v){if(v.h&&typeof s<"u"&&(!v.v[1]||la(v)!=4||v.Z()!=2)){if(v.u&&la(v)==4)Lt(v.Ea,0,v);else if(lt(v,"readystatechange"),la(v)==4){v.h=!1;try{const st=v.Z();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var V;if(!(V=O)){var W;if(W=st===0){var _e=String(v.D).match(nc)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),W=!Ji.test(_e?_e.toLowerCase():"")}V=W}if(V)lt(v,"complete"),lt(v,"success");else{v.m=6;try{var Oe=2<la(v)?v.g.statusText:""}catch{Oe=""}v.l=Oe+" ["+v.Z()+"]",oc(v)}}finally{lc(v)}}}}function lc(v,O){if(v.g){p0(v);const V=v.g,W=v.v[0]?()=>{}:null;v.g=null,v.v=null,O||lt(v,"ready");try{V.onreadystatechange=W}catch{}}}function p0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function la(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<la(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var O=this.g.responseText;return v&&O.indexOf(v)==0&&(O=O.substring(v.length)),Kt(O)}};function Pu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function E1(v){const O={};v=(v.g&&2<=la(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<v.length;W++){if(k(v[W]))continue;var V=P(v[W]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Oe=O[_e]||[];O[_e]=Oe,Oe.push(V)}E(O,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Du(v,O,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||O}function N1(v){this.Aa=0,this.i=[],this.j=new mt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Du("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Du("baseRetryDelayMs",5e3,v),this.cb=Du("retryDelaySeedMs",1e4,v),this.Wa=Du("forwardChannelMaxRetries",2,v),this.wa=Du("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new $s(v&&v.concurrentRequestLimit),this.Da=new qs,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=N1.prototype,t.la=8,t.G=1,t.connect=function(v,O,V,W){G(0),this.W=v,this.H=O||{},V&&W!==void 0&&(this.H.OSID=V,this.H.OAID=W),this.F=this.X,this.I=M1(this,null,this.W),m0(this)};function Uf(v){if(j1(v),v.G==3){var O=v.U++,V=ue(v.I);if(Qe(V,"SID",v.K),Qe(V,"RID",O),Qe(V,"TYPE","terminate"),Lu(v,V),O=new Zi(v,v.j,O),O.L=2,O.v=hr(ue(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(O.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=O.v,V=!0),V||(O.g=P1(O.j,null),O.g.ea(O.v)),O.F=Date.now(),qt(O)}Ff(v)}function cc(v){v.g&&(Vf(v),v.g.cancel(),v.g=null)}function j1(v){cc(v),v.u&&(c.clearTimeout(v.u),v.u=null),uc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function m0(v){if(!Go(v.h)&&!v.s){v.s=!0;var O=v.Ga;ee||ce(),Z||(ee(),Z=!0),ge.add(O,v),v.B=0}}function vw(v,O){return ku(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=O.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Pe(y(v.Ga,v,O),R1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const _e=new Zi(this,this.j,v);let Oe=this.o;if(this.S&&(Oe?(Oe=A(Oe),F(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(_e.H=Oe,Oe=null),this.P)e:{for(var O=0,V=0;V<this.i.length;V++){t:{var W=this.i[V];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(O+=W,4096<O){O=V;break e}if(O===4096||V===this.i.length-1){O=V+1;break e}}O=1e3}else O=1e3;O=zf(this,_e,O),V=ue(this.I),Qe(V,"RID",v),Qe(V,"CVER",22),this.D&&Qe(V,"X-HTTP-Session-Id",this.D),Lu(this,V),Oe&&(this.O?O="headers="+encodeURIComponent(String(Ru(Oe)))+"&"+O:this.m&&sc(V,this.m,Oe)),Fs(this.h,_e),this.Ua&&Qe(V,"TYPE","init"),this.P?(Qe(V,"$req",O),Qe(V,"SID","null"),_e.T=!0,xt(_e,V,null)):xt(_e,V,O),this.G=2}}else this.G==3&&(v?C1(this,v):this.i.length==0||Go(this.h)||C1(this))};function C1(v,O){var V;O?V=O.l:V=v.U++;const W=ue(v.I);Qe(W,"SID",v.K),Qe(W,"RID",V),Qe(W,"AID",v.T),Lu(v,W),v.m&&v.o&&sc(W,v.m,v.o),V=new Zi(v,v.j,V,v.B+1),v.m===null&&(V.H=v.o),O&&(v.i=O.D.concat(v.i)),O=zf(v,V,1e3),V.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Fs(v.h,V),xt(V,W,O)}function Lu(v,O){v.H&&L(v.H,function(V,W){Qe(O,W,V)}),v.l&&Ko({},function(V,W){Qe(O,W,V)})}function zf(v,O,V){V=Math.min(v.i.length,V);var W=v.l?y(v.l.Na,v.l,v):null;e:{var _e=v.i;let Oe=-1;for(;;){const st=["count="+V];Oe==-1?0<V?(Oe=_e[0].g,st.push("ofs="+Oe)):Oe=0:st.push("ofs="+Oe);let Br=!0;for(let ni=0;ni<V;ni++){let ur=_e[ni].g;const Ni=_e[ni].map;if(ur-=Oe,0>ur)Oe=Math.max(0,_e[ni].g-100),Br=!1;else try{Bf(Ni,st,"req"+ur+"_")}catch{W&&W(Ni)}}if(Br){W=st.join("&");break e}}}return v=v.i.splice(0,V),O.D=v,W}function k1(v){if(!v.g&&!v.u){v.Y=1;var O=v.Fa;ee||ce(),Z||(ee(),Z=!0),ge.add(O,v),v.v=0}}function $f(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Pe(y(v.Fa,v),R1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,O1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Pe(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,G(10),cc(this),O1(this))};function Vf(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function O1(v){v.g=new Zi(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var O=ue(v.qa);Qe(O,"RID","rpc"),Qe(O,"SID",v.K),Qe(O,"AID",v.T),Qe(O,"CI",v.F?"0":"1"),!v.F&&v.ja&&Qe(O,"TO",v.ja),Qe(O,"TYPE","xmlhttp"),Lu(v,O),v.m&&v.o&&sc(O,v.m,v.o),v.L&&(v.g.I=v.L);var V=v.g;v=v.ia,V.L=1,V.v=hr(ue(O)),V.m=null,V.P=!0,he(V,v)}t.Za=function(){this.C!=null&&(this.C=null,cc(this),$f(this),G(19))};function uc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function I1(v,O){var V=null;if(v.g==O){uc(v),Vf(v),v.g=null;var W=2}else if(Vs(v.h,O))V=O.D,oa(v.h,O),W=1;else return;if(v.G!=0){if(O.o)if(W==1){V=O.m?O.m.length:0,O=Date.now()-O.F;var _e=v.B;W=pn(),lt(W,new Re(W,V)),m0(v)}else k1(v);else if(_e=O.s,_e==3||_e==0&&0<O.X||!(W==1&&vw(v,O)||W==2&&$f(v)))switch(V&&0<V.length&&(O=v.h,O.i=O.i.concat(V)),_e){case 1:Zo(v,5);break;case 4:Zo(v,10);break;case 3:Zo(v,6);break;default:Zo(v,2)}}}function R1(v,O){let V=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(V*=2),V*O}function Zo(v,O){if(v.j.info("Error code "+O),O==2){var V=y(v.fb,v),W=v.Xa;const _e=!W;W=new ps(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ce(W,"https"),hr(W),_e?Lf(W.toString(),V):T1(W.toString(),V)}else G(2);v.G=0,v.l&&v.l.sa(O),Ff(v),j1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),G(2)):(this.j.info("Failed to ping google.com"),G(1))};function Ff(v){if(v.G=0,v.ka=[],v.l){const O=Ei(v.h);(O.length!=0||v.i.length!=0)&&(w(v.ka,O),w(v.ka,v.i),v.h.i.length=0,_(v.i),v.i.length=0),v.l.ra()}}function M1(v,O,V){var W=V instanceof ps?ue(V):new ps(V);if(W.g!="")O&&(W.g=O+"."+W.g),qe(W,W.s);else{var _e=c.location;W=_e.protocol,O=O?O+"."+_e.hostname:_e.hostname,_e=+_e.port;var Oe=new ps(null);W&&Ce(Oe,W),O&&(Oe.g=O),_e&&qe(Oe,_e),V&&(Oe.l=V),W=Oe}return V=v.D,O=v.ya,V&&O&&Qe(W,V,O),Qe(W,"VER",v.la),Lu(v,W),W}function P1(v,O,V){if(O&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return O=v.Ca&&!v.pa?new _n(new po({eb:V})):new _n(v.pa),O.Ha(v.J),O}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function D1(){}t=D1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function g0(){}g0.prototype.g=function(v,O){return new ca(v,O)};function ca(v,O){yt.call(this),this.g=new N1(O),this.l=v,this.h=O&&O.messageUrlParams||null,v=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(v?v["X-WebChannel-Content-Type"]=O.messageContentType:v={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.va&&(v?v["X-WebChannel-Client-Profile"]=O.va:v={"X-WebChannel-Client-Profile":O.va}),this.g.S=v,(v=O&&O.Sb)&&!k(v)&&(this.g.m=v),this.v=O&&O.supportsCrossDomainXhr||!1,this.u=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!k(O)&&(this.g.D=O,v=this.h,v!==null&&O in v&&(v=this.h,O in v&&delete v[O])),this.j=new dc(this)}T(ca,yt),ca.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ca.prototype.close=function(){Uf(this.g)},ca.prototype.o=function(v){var O=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.u&&(V={},V.__data__=Ft(v),v=V);O.i.push(new fo(O.Ya++,v)),O.G==3&&m0(O)},ca.prototype.N=function(){this.g.l=null,delete this.j,Uf(this.g),delete this.g,ca.aa.N.call(this)};function L1(v){Ir.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var O=v.__sm__;if(O){e:{for(const V in O){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,O=O!==null&&v in O?O[v]:void 0),this.data=O}else this.data=v}T(L1,Ir);function B1(){wr.call(this),this.status=1}T(B1,wr);function dc(v){this.g=v}T(dc,D1),dc.prototype.ua=function(){lt(this.g,"a")},dc.prototype.ta=function(v){lt(this.g,new L1(v))},dc.prototype.sa=function(v){lt(this.g,new B1)},dc.prototype.ra=function(){lt(this.g,"b")},g0.prototype.createWebChannel=g0.prototype.g,ca.prototype.send=ca.prototype.o,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,xV=function(){return new g0},bV=function(){return pn()},vV=It,MT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$t.NO_ERROR=0,$t.TIMEOUT=8,$t.HTTP_ERROR=6,Iv=$t,$r.COMPLETE="complete",yV=$r,pi.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Xp=pi,_n.prototype.listenOnce=_n.prototype.L,_n.prototype.getLastError=_n.prototype.Ka,_n.prototype.getLastErrorCode=_n.prototype.Ba,_n.prototype.getStatus=_n.prototype.Z,_n.prototype.getResponseJson=_n.prototype.Oa,_n.prototype.getResponseText=_n.prototype.oa,_n.prototype.send=_n.prototype.ea,_n.prototype.setWithCredentials=_n.prototype.Ha,gV=_n}).apply(typeof qy<"u"?qy:typeof self<"u"?self:typeof window<"u"?window:{});const yO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ia.UNAUTHENTICATED=new ia(null),ia.GOOGLE_CREDENTIALS=new ia("google-credentials-uid"),ia.FIRST_PARTY=new ia("first-party-uid"),ia.MOCK_USER=new ia("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new e7("@firebase/firestore");function rh(){return Md.logLevel}function Xe(t,...e){if(Md.logLevel<=yr.DEBUG){const r=e.map(p7);Md.debug(`Firestore (${yf}): ${t}`,...r)}}function Zn(t,...e){if(Md.logLevel<=yr.ERROR){const r=e.map(p7);Md.error(`Firestore (${yf}): ${t}`,...r)}}function Cm(t,...e){if(Md.logLevel<=yr.WARN){const r=e.map(p7);Md.warn(`Firestore (${yf}): ${t}`,...r)}}function p7(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${yf}) INTERNAL ASSERTION FAILED: `+t;throw Zn(e),new Error(e)}function Et(t,e){t||wt()}function At(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends lo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jte{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(ia.UNAUTHENTICATED)))}shutdown(){}}class kte{constructor(e){this.t=e,this.currentUser=ia.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Et(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let a=new ao;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ao,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},c=d=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ao)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Et(typeof n.accessToken=="string"),new jte(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new ia(e)}}class Ote{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ia.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ite{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Ote(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(ia.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rte{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Et(this.o===void 0);const n=a=>{a.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,Xe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Et(typeof r.token=="string"),this.R=r.token,new Rte(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pte(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Pte(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Zt(t,e){return t<e?-1:t>e?1:0}function Eh(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function _V(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new rt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new rt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new rt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Pn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Pn(0,0))}static max(){return new Ct(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,r,n){r===void 0?r=0:r>e.length&&wt(),n===void 0?n=e.length-r:n>e.length-r&&wt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return km.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof km?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class jr extends km{construct(e,r,n){return new jr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new rt(Me.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new jr(r)}static emptyPath(){return new jr([])}}const Dte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends km{construct(e,r,n){return new Mn(e,r,n)}static isValidIdentifier(e){return Dte.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mn(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new rt(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new rt(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new rt(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(n+=c,i++):(a(),i++)}if(a(),s)throw new rt(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(r)}static emptyPath(){return new Mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(jr.fromString(e))}static fromName(e){return new ft(jr.fromString(e).popFirst(5))}static empty(){return new ft(jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return jr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new jr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function PT(t){return t.fields.find((e=>e.kind===2))}function cd(t){return t.fields.filter((e=>e.kind!==2))}tb.UNKNOWN_ID=-1;class Rv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Om{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Om(0,ds.min())}}function SV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(n===1e9?new Pn(r+1,0):new Pn(r,n));return new ds(i,ft.empty(),e)}function TV(t){return new ds(t.readTime,t.key,-1)}class ds{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ds(Ct.min(),ft.empty(),-1)}static max(){return new ds(Ct.max(),ft.empty(),-1)}}function m7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ft.comparator(t.documentKey,e.documentKey),r!==0?r:Zt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t){if(t.code!==Me.FAILED_PRECONDITION||t.message!==AV)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ee(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ee?r:Ee.resolve(r)}catch(r){return Ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ee.reject(r)}static resolve(e){return new Ee(((r,n)=>{r(e)}))}static reject(e){return new Ee(((r,n)=>{n(e)}))}static waitFor(e){return new Ee(((r,n)=>{let i=0,a=0,s=!1;e.forEach((c=>{++i,c.next((()=>{++a,s&&a===i&&r()}),(d=>n(d)))})),s=!0,a===i&&r()}))}static or(e){let r=Ee.resolve(!1);for(const n of e)r=r.next((i=>i?Ee.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new Ee(((n,i)=>{const a=e.length,s=new Array(a);let c=0;for(let d=0;d<a;d++){const h=d;r(e[h]).next((p=>{s[h]=p,++c,c===a&&n(s)}),(p=>i(p)))}}))}static doWhile(e,r){return new Ee(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ao,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new am(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=g7(n.target.error);this.V.reject(new am(e,i))}}static open(e,r,n,i){try{return new Gx(r,e.transaction(i,n))}catch(a){throw new am(r,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Bte(r)}}class su{constructor(e,r,n){this.name=e,this.version=r,this.p=n,su.S(_i())===12.2&&Zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),fd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!O$())return!1;if(su.v())return!0;const e=_i(),r=su.S(e),n=0<r&&r<10,i=NV(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Xe("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;r(s)},i.onblocked=()=>{n(new am(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new rt(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new rt(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new am(e,s))},i.onupgradeneeded=a=>{Xe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.p.O(s,i.transaction,a.oldVersion,this.version).next((()=>{Xe("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const a=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=Gx.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Ee.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&s<3;if(Xe("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function NV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Lte{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return fd(this.B.delete())}}class am extends rt{constructor(e,r){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function xu(t){return t.name==="IndexedDbTransactionError"}class Bte{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Xe("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fd(n)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),fd(this.store.add(e))}get(e){return fd(this.store.get(e)).next((r=>(r===void 0&&(r=null),Xe("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),fd(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),fd(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new Ee(((s,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{s(d.target.result)}}))}{const a=this.cursor(n),s=[];return this.W(a,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ee(((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}}))}j(e,r){Xe("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((a,s,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new Ee(((n,i)=>{r.onerror=a=>{const s=g7(a.target.error);i(s)},r.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,r){const n=[];return new Ee(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void i();const d=new Lte(c),h=r(c.primaryKey,c.value,d);if(h instanceof Ee){const p=h.catch((m=>(d.done(),Ee.reject(m))));n.push(p)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Ee.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function fd(t){return new Ee(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=g7(n.target.error);r(i)}}))}let vO=!1;function g7(t){const e=su.S(_i());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vO||(vO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Ute{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Xe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Xe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){xu(r)?Xe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await bu(r)}await this.X(6e4)}))}}class zte{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,a=!0;return Ee.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return Xe("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next((c=>{i-=c,n.add(s)}));a=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(i,a))).next((c=>(Xe("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,a)=>{const s=TV(a);m7(s,n)>0&&(n=s)})),new ds(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ba.oe=-1;function qg(t){return t==null}function Im(t){return t===0&&1/t==-1/0}function jV(t){return typeof t=="number"&&Number.isInteger(t)&&!Im(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=bO(e)),e=$te(t.get(r),e);return bO(e)}function $te(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case"":r+="";break;default:r+=a}}return r}function bO(t){return t+""}function _o(t){const e=t.length;if(Et(e>=2),e===2)return Et(t.charAt(0)===""&&t.charAt(1)===""),jr.emptyPath();const r=e-2,n=[];let i="";for(let a=0;a<e;){const s=t.indexOf("",a);switch((s<0||s>r)&&wt(),t.charAt(s+1)){case"":const c=t.substring(a,s);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:wt()}a=s+2}return new jr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t,e){return[t,va(e)]}function CV(t,e,r){return[t,va(e),r]}const Vte={},Fte=["prefixPath","collectionGroup","readTime","documentId"],qte=["prefixPath","collectionGroup","documentId"],Hte=["collectionGroup","readTime","prefixPath","documentId"],Gte=["canonicalId","targetId"],Kte=["targetId","path"],Wte=["path","targetId"],Xte=["collectionId","parent"],Qte=["indexId","uid"],Yte=["uid","sequenceNumber"],Zte=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jte=["indexId","uid","orderedDocumentKey"],ere=["userId","collectionPath","documentId"],tre=["userId","collectionPath","largestBatchId"],rre=["userId","collectionGroup","largestBatchId"],kV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nre=[...kV,"documentOverlays"],OV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IV=OV,y7=[...IV,"indexConfiguration","indexState","indexEntries"],ire=y7,are=[...y7,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT extends EV{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ti(t,e){const r=At(t);return su.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function t0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function RV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,r){this.comparator=e,this.root=r||Hi.EMPTY}insert(e,r){return new wn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hy(this.root,e,this.comparator,!0)}}class Hy{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hi{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Hi.RED,this.left=i??Hi.EMPTY,this.right=a??Hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Hi(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Hi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,r,n,i,a){return this}insert(e,r,n){return new Hi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new _O(this.data.getIterator())}getIteratorFrom(e){return new _O(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new an(this.comparator);return r.data=e,r}}class _O{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function H0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new Ua([])}unionWith(e){let r=new an(Mn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Ua(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Eh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MV("Invalid base64 string: "+a):a}})(e);return new ri(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new ri(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const sre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $l(t){if(Et(!!t),typeof t=="string"){let e=0;const r=sre.exec(t);if(Et(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Nn(t.seconds),nanos:Nn(t.nanos)}}function Nn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function du(t){return typeof t=="string"?ri.fromBase64String(t):ri.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v7(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function b7(t){const e=t.mapValue.fields.__previous_value__;return v7(e)?b7(e):e}function Rm(t){const e=$l(t.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ore{constructor(e,r,n,i,a,s,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Pd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Pd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pv={nullValue:"NULL_VALUE"};function Dd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?v7(t)?4:PV(t)?9007199254740991:Kx(t)?10:11:wt()}function Mo(t,e){if(t===e)return!0;const r=Dd(t);if(r!==Dd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rm(t).isEqual(Rm(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=$l(i.timestampValue),c=$l(a.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return du(i.bytesValue).isEqual(du(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Nn(i.geoPointValue.latitude)===Nn(a.geoPointValue.latitude)&&Nn(i.geoPointValue.longitude)===Nn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Nn(i.integerValue)===Nn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Nn(i.doubleValue),c=Nn(a.doubleValue);return s===c?Im(s)===Im(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Eh(t.arrayValue.values||[],e.arrayValue.values||[],Mo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},c=a.mapValue.fields||{};if(wO(s)!==wO(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!Mo(s[d],c[d])))return!1;return!0})(t,e);default:return wt()}}function Mm(t,e){return(t.values||[]).find((r=>Mo(r,e)))!==void 0}function hu(t,e){if(t===e)return 0;const r=Dd(t),n=Dd(e);if(r!==n)return Zt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Zt(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const c=Nn(a.integerValue||a.doubleValue),d=Nn(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return SO(t.timestampValue,e.timestampValue);case 4:return SO(Rm(t),Rm(e));case 5:return Zt(t.stringValue,e.stringValue);case 6:return(function(a,s){const c=du(a),d=du(s);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const c=a.split("/"),d=s.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=Zt(c[h],d[h]);if(p!==0)return p}return Zt(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const c=Zt(Nn(a.latitude),Nn(s.latitude));return c!==0?c:Zt(Nn(a.longitude),Nn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return TO(t.arrayValue,e.arrayValue);case 10:return(function(a,s){var c,d,h,p;const m=a.fields||{},y=s.fields||{},b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,_=Zt(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return _!==0?_:TO(b,T)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Qc.mapValue&&s===Qc.mapValue)return 0;if(a===Qc.mapValue)return 1;if(s===Qc.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),h=s.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=Zt(d[m],p[m]);if(y!==0)return y;const b=hu(c[d[m]],h[p[m]]);if(b!==0)return b}return Zt(d.length,p.length)})(t.mapValue,e.mapValue);default:throw wt()}}function SO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Zt(t,e);const r=$l(t),n=$l(e),i=Zt(r.seconds,n.seconds);return i!==0?i:Zt(r.nanos,n.nanos)}function TO(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=hu(r[i],n[i]);if(a)return a}return Zt(r.length,n.length)}function Nh(t){return LT(t)}function LT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=$l(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return du(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return ft.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=LT(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${LT(r.fields[s])}`;return i+"}"})(t.mapValue):wt()}function Pm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function BT(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function AO(t){return!!t&&"nullValue"in t}function EO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dv(t){return!!t&&"mapValue"in t}function Kx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function sm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return t0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=sm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=sm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function PV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const DV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function lre(t){return"nullValue"in t?Pv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Pm(Pd.empty(),ft.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Kx(t)?DV:{mapValue:{}}:wt()}function cre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Pm(Pd.empty(),ft.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?DV:"mapValue"in t?Kx(t)?{mapValue:{}}:Qc:wt()}function NO(t,e){const r=hu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function jO(t,e){const r=hu(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.value=e}static empty(){return new Wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Dv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=sm(r)}setAll(e){let r=Mn.emptyPath(),n={},i=[];e.forEach(((s,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,i),n={},i=[],r=c.popLast()}s?n[c.lastSegment()]=sm(s):i.push(c.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());Dv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Mo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Dv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){t0(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new Wi(sm(this.value))}}function LV(t){const e=[];return t0(t.fields,((r,n)=>{const i=new Mn([r]);if(Dv(n)){const a=LV(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Ua(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,r,n,i,a,s,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=c}static newInvalidDocument(e){return new jn(e,0,Ct.min(),Ct.min(),Ct.min(),Wi.empty(),0)}static newFoundDocument(e,r,n,i){return new jn(e,1,r,Ct.min(),n,i,0)}static newNoDocument(e,r){return new jn(e,2,r,Ct.min(),Ct.min(),Wi.empty(),0)}static newUnknownDocument(e,r){return new jn(e,3,r,Ct.min(),Ct.min(),Wi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,r){this.position=e,this.inclusive=r}}function CO(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=ft.comparator(ft.fromName(s.referenceValue),r.key):n=hu(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function kO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Mo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,r="asc"){this.field=e,this.dir=r}}function ure(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BV=class{};class vr extends BV{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new dre(e,r,n):r==="array-contains"?new pre(e,n):r==="in"?new qV(e,n):r==="not-in"?new mre(e,n):r==="array-contains-any"?new gre(e,n):new vr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new hre(e,n):new fre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(hu(r,this.value)):r!==null&&Dd(this.value)===Dd(r)&&this.matchesComparison(hu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends BV{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Hr(e,r)}matches(e){return Ch(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ch(t){return t.op==="and"}function UT(t){return t.op==="or"}function x7(t){return UV(t)&&Ch(t)}function UV(t){for(const e of t.filters)if(e instanceof Hr)return!1;return!0}function zT(t){if(t instanceof vr)return t.field.canonicalString()+t.op.toString()+Nh(t.value);if(x7(t))return t.filters.map((e=>zT(e))).join(",");{const e=t.filters.map((r=>zT(r))).join(",");return`${t.op}(${e})`}}function zV(t,e){return t instanceof vr?(function(n,i){return i instanceof vr&&n.op===i.op&&n.field.isEqual(i.field)&&Mo(n.value,i.value)})(t,e):t instanceof Hr?(function(n,i){return i instanceof Hr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,s,c)=>a&&zV(s,i.filters[c])),!0):!1})(t,e):void wt()}function $V(t,e){const r=t.filters.concat(e);return Hr.create(r,t.op)}function VV(t){return t instanceof vr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Nh(r.value)}`})(t):t instanceof Hr?(function(r){return r.op.toString()+" {"+r.getFilters().map(VV).join(" ,")+"}"})(t):"Filter"}class dre extends vr{constructor(e,r,n){super(e,r,n),this.key=ft.fromName(n.referenceValue)}matches(e){const r=ft.comparator(e.key,this.key);return this.matchesComparison(r)}}class hre extends vr{constructor(e,r){super(e,"in",r),this.keys=FV("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class fre extends vr{constructor(e,r){super(e,"not-in",r),this.keys=FV("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function FV(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>ft.fromName(n.referenceValue)))}class pre extends vr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Dm(r)&&Mm(r.arrayValue,this.value)}}class qV extends vr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Mm(this.value.arrayValue,r)}}class mre extends vr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Mm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Mm(this.value.arrayValue,r)}}class gre extends vr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Dm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Mm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yre{constructor(e,r=null,n=[],i=[],a=null,s=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=c,this.ue=null}}function $T(t,e=null,r=[],n=[],i=null,a=null,s=null){return new yre(t,e,r,n,i,a,s)}function Ld(t){const e=At(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>zT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),qg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Nh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Nh(n))).join(",")),e.ue=r}return e.ue}function Hg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!ure(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!zV(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kO(t.startAt,e.startAt)&&kO(t.endAt,e.endAt)}function rb(t){return ft.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nb(t,e){return t.filters.filter((r=>r instanceof vr&&r.field.isEqual(e)))}function OO(t,e,r){let n=Pv,i=!0;for(const a of nb(t,e)){let s=Pv,c=!0;switch(a.op){case"<":case"<=":s=lre(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,c=!1;break;case"!=":case"not-in":s=Pv}NO({value:n,inclusive:i},{value:s,inclusive:c})<0&&(n=s,i=c)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];NO({value:n,inclusive:i},{value:s,inclusive:r.inclusive})<0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}function IO(t,e,r){let n=Qc,i=!0;for(const a of nb(t,e)){let s=Qc,c=!0;switch(a.op){case">=":case">":s=cre(a.value),c=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,c=!1;break;case"!=":case"not-in":s=Qc}jO({value:n,inclusive:i},{value:s,inclusive:c})>0&&(n=s,i=c)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];jO({value:n,inclusive:i},{value:s,inclusive:r.inclusive})>0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,r=null,n=[],i=[],a=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HV(t,e,r,n,i,a,s,c){return new vf(t,e,r,n,i,a,s,c)}function Gg(t){return new vf(t)}function RO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GV(t){return t.collectionGroup!==null}function om(t){const e=At(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new an(Mn.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Lm(a,n))})),r.has(Mn.keyField().canonicalString())||e.ce.push(new Lm(Mn.keyField(),n))}return e.ce}function ls(t){const e=At(t);return e.le||(e.le=vre(e,om(t))),e.le}function vre(t,e){if(t.limitType==="F")return $T(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Lm(i.field,a)}));const r=t.endAt?new jh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new jh(t.startAt.position,t.startAt.inclusive):null;return $T(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function VT(t,e){const r=t.filters.concat([e]);return new vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ib(t,e,r){return new vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Wx(t,e){return Hg(ls(t),ls(e))&&t.limitType===e.limitType}function KV(t){return`${Ld(ls(t))}|lt:${t.limitType}`}function nh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>VV(i))).join(", ")}]`),qg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>Nh(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>Nh(i))).join(",")),`Target(${n})`})(ls(t))}; limitType=${t.limitType})`}function Kg(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ft.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of om(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(s,c,d){const h=CO(s,c,d);return s.inclusive?h<=0:h<0})(n.startAt,om(n),i)||n.endAt&&!(function(s,c,d){const h=CO(s,c,d);return s.inclusive?h>=0:h>0})(n.endAt,om(n),i))})(t,e)}function WV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XV(t){return(e,r)=>{let n=!1;for(const i of om(t)){const a=bre(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function bre(t,e,r){const n=t.field.isKeyField()?ft.comparator(e.key,r.key):(function(a,s,c){const d=s.data.field(a),h=c.data.field(a);return d!==null&&h!==null?hu(d,h):wt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){t0(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return RV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xre=new wn(ft.comparator);function as(){return xre}const QV=new wn(ft.comparator);function Qp(...t){let e=QV;for(const r of t)e=e.insert(r.key,r);return e}function YV(t){let e=QV;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function So(){return lm()}function ZV(){return lm()}function lm(){return new wu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wre=new wn(ft.comparator),_re=new an(ft.comparator);function dr(...t){let e=_re;for(const r of t)e=e.add(r);return e}const Sre=new an(Zt);function w7(){return Sre}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Im(e)?"-0":e}}function JV(t){return{integerValue:""+t}}function Tre(t,e){return jV(e)?JV(e):_7(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this._=void 0}}function Are(t,e,r){return t instanceof Bm?(function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&v7(a)&&(a=b7(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}})(r,e):t instanceof Bd?tF(t,e):t instanceof kh?rF(t,e):(function(i,a){const s=eF(i,a),c=MO(s)+MO(i.Pe);return BT(s)&&BT(i.Pe)?JV(c):_7(i.serializer,c)})(t,e)}function Ere(t,e,r){return t instanceof Bd?tF(t,e):t instanceof kh?rF(t,e):r}function eF(t,e){return t instanceof Um?(function(n){return BT(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class Bm extends Xx{}class Bd extends Xx{constructor(e){super(),this.elements=e}}function tF(t,e){const r=nF(e);for(const n of t.elements)r.some((i=>Mo(i,n)))||r.push(n);return{arrayValue:{values:r}}}class kh extends Xx{constructor(e){super(),this.elements=e}}function rF(t,e){let r=nF(e);for(const n of t.elements)r=r.filter((i=>!Mo(i,n)));return{arrayValue:{values:r}}}class Um extends Xx{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function MO(t){return Nn(t.integerValue||t.doubleValue)}function nF(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,r){this.field=e,this.transform=r}}function Nre(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof Bd&&i instanceof Bd||n instanceof kh&&i instanceof kh?Eh(n.elements,i.elements,Mo):n instanceof Um&&i instanceof Um?Mo(n.Pe,i.Pe):n instanceof Bm&&i instanceof Bm})(t.transform,e.transform)}class jre{constructor(e,r){this.version=e,this.transformResults=r}}class Jn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qx{}function aF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wg(t.key,Jn.none()):new bf(t.key,t.data,Jn.none());{const r=t.data,n=Wi.empty();let i=new an(Mn.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Yl(t.key,n,new Ua(i.toArray()),Jn.none())}}function Cre(t,e,r){t instanceof bf?(function(i,a,s){const c=i.value.clone(),d=DO(i.fieldTransforms,a,s.transformResults);c.setAll(d),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,r):t instanceof Yl?(function(i,a,s){if(!Lv(i.precondition,a))return void a.convertToUnknownDocument(s.version);const c=DO(i.fieldTransforms,a,s.transformResults),d=a.data;d.setAll(sF(i)),d.setAll(c),a.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function cm(t,e,r,n){return t instanceof bf?(function(a,s,c,d){if(!Lv(a.precondition,s))return c;const h=a.value.clone(),p=LO(a.fieldTransforms,d,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof Yl?(function(a,s,c,d){if(!Lv(a.precondition,s))return c;const h=LO(a.fieldTransforms,d,s),p=s.data;return p.setAll(sF(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(a,s,c){return Lv(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,r)}function kre(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=eF(n.transform,i||null);a!=null&&(r===null&&(r=Wi.empty()),r.set(n.field,a))}return r||null}function PO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Eh(n,i,((a,s)=>Nre(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bf extends Qx{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yl extends Qx{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function DO(t,e,r){const n=new Map;Et(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,c=e.data.field(a.field);n.set(a.field,Ere(s,c,r[i]))}return n}function LO(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,Are(a,s,e))}return n}class Wg extends Qx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S7 extends Qx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Cre(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=cm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=cm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=ZV();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let c=this.applyToLocalView(s,a.mutatedFields);c=r.has(i.key)?null:c;const d=aF(s,c);d!==null&&n.set(i.key,d),s.isValidDocument()||s.convertToNoDocument(Ct.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),dr())}isEqual(e){return this.batchId===e.batchId&&Eh(this.mutations,e.mutations,((r,n)=>PO(r,n)))&&Eh(this.baseMutations,e.baseMutations,((r,n)=>PO(r,n)))}}class A7{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Et(e.mutations.length===n.length);let i=(function(){return wre})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new A7(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li,_r;function oF(t){switch(t){default:return wt();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}function lF(t){if(t===void 0)return Zn("GRPC error has no .code"),Me.UNKNOWN;switch(t){case li.OK:return Me.OK;case li.CANCELLED:return Me.CANCELLED;case li.UNKNOWN:return Me.UNKNOWN;case li.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case li.INTERNAL:return Me.INTERNAL;case li.UNAVAILABLE:return Me.UNAVAILABLE;case li.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case li.NOT_FOUND:return Me.NOT_FOUND;case li.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case li.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case li.ABORTED:return Me.ABORTED;case li.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case li.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case li.DATA_LOSS:return Me.DATA_LOSS;default:return wt()}}(_r=li||(li={}))[_r.OK=0]="OK",_r[_r.CANCELLED=1]="CANCELLED",_r[_r.UNKNOWN=2]="UNKNOWN",_r[_r.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_r[_r.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_r[_r.NOT_FOUND=5]="NOT_FOUND",_r[_r.ALREADY_EXISTS=6]="ALREADY_EXISTS",_r[_r.PERMISSION_DENIED=7]="PERMISSION_DENIED",_r[_r.UNAUTHENTICATED=16]="UNAUTHENTICATED",_r[_r.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_r[_r.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_r[_r.ABORTED=10]="ABORTED",_r[_r.OUT_OF_RANGE=11]="OUT_OF_RANGE",_r[_r.UNIMPLEMENTED=12]="UNIMPLEMENTED",_r[_r.INTERNAL=13]="INTERNAL",_r[_r.UNAVAILABLE=14]="UNAVAILABLE",_r[_r.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ire(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre=new Nd([4294967295,4294967295],0);function BO(t){const e=Ire().encode(t),r=new mV;return r.update(e),new Uint8Array(r.digest())}function UO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Nd([r,n],0),new Nd([i,a],0)]}class N7{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Yp(`Invalid padding: ${r}`);if(n<0)throw new Yp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Yp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Yp(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Nd.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Nd.fromNumber(n)));return i.compare(Rre)===1&&(i=new Nd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=BO(e),[n,i]=UO(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);if(!this.de(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new N7(a,i,r);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const r=BO(e),[n,i]=UO(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Yp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Qg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Xg(Ct.min(),i,new wn(Zt),as(),dr())}}class Qg{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Qg(n,r,dr(),dr(),dr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class cF{constructor(e,r){this.targetId=e,this.me=r}}class uF{constructor(e,r,n=ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class zO{constructor(){this.fe=0,this.ge=VO(),this.pe=ri.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=dr(),r=dr(),n=dr();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:wt()}})),new Qg(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=VO()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Mre{constructor(e){this.Le=e,this.Be=new Map,this.ke=as(),this.qe=$O(),this.Qe=new wn(Zt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:wt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(rb(a))if(n===0){const s=new ft(a.path);this.Ue(r,s,jn.newNoDocument(s,Ct.min()))}else Et(n===1);else{const s=this.Ye(r);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,c;try{s=du(n).toUint8Array()}catch(d){if(d instanceof MV)return Cm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new N7(s,i,a)}catch(d){return Cm(d instanceof Yp?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,a,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((a,s)=>{const c=this.Je(s);if(c){if(a.current&&rb(c.target)){const d=new ft(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,jn.newNoDocument(d,e))}a.be&&(r.set(s,a.ve()),a.Ce())}}));let n=dr();this.qe.forEach(((a,s)=>{let c=!0;s.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(a))})),this.ke.forEach(((a,s)=>s.setReadTime(e)));const i=new Xg(e,r,this.Qe,this.ke,n);return this.ke=as(),this.qe=$O(),this.Qe=new wn(Zt),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new zO,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new an(Zt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zO),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function $O(){return new wn(ft.comparator)}function VO(){return new wn(ft.comparator)}const Pre={asc:"ASCENDING",desc:"DESCENDING"},Dre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lre={and:"AND",or:"OR"};class Bre{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function FT(t,e){return t.useProto3Json||qg(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ure(t,e){return Oh(t,e.toTimestamp())}function Ri(t){return Et(!!t),Ct.fromTimestamp((function(r){const n=$l(r);return new Pn(n.seconds,n.nanos)})(t))}function j7(t,e){return qT(t,e).canonicalString()}function qT(t,e){const r=(function(i){return new jr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function hF(t){const e=jr.fromString(t);return Et(wF(e)),e}function zm(t,e){return j7(t.databaseId,e.path)}function Ol(t,e){const r=hF(e);if(r.get(1)!==t.databaseId.projectId)throw new rt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new rt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ft(mF(r))}function fF(t,e){return j7(t.databaseId,e)}function pF(t){const e=hF(t);return e.length===4?jr.emptyPath():mF(e)}function HT(t){return new jr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mF(t){return Et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FO(t,e,r){return{name:zm(t,e),fields:r.value.mapValue.fields}}function zre(t,e,r){const n=Ol(t,e.name),i=Ri(e.updateTime),a=e.createTime?Ri(e.createTime):Ct.min(),s=new Wi({mapValue:{fields:e.fields}}),c=jn.newFoundDocument(n,i,a,s);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function $re(t,e){return"found"in e?(function(n,i){Et(!!i.found),i.found.name,i.found.updateTime;const a=Ol(n,i.found.name),s=Ri(i.found.updateTime),c=i.found.createTime?Ri(i.found.createTime):Ct.min(),d=new Wi({mapValue:{fields:i.found.fields}});return jn.newFoundDocument(a,s,c,d)})(t,e):"missing"in e?(function(n,i){Et(!!i.missing),Et(!!i.readTime);const a=Ol(n,i.missing),s=Ri(i.readTime);return jn.newNoDocument(a,s)})(t,e):wt()}function Vre(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:wt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Et(p===void 0||typeof p=="string"),ri.fromBase64String(p||"")):(Et(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ri.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(h){const p=h.code===void 0?Me.UNKNOWN:lF(h.code);return new rt(p,h.message||"")})(s);r=new uF(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Ol(t,n.document.name),a=Ri(n.document.updateTime),s=n.document.createTime?Ri(n.document.createTime):Ct.min(),c=new Wi({mapValue:{fields:n.document.fields}}),d=jn.newFoundDocument(i,a,s,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new Bv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Ol(t,n.document),a=n.readTime?Ri(n.readTime):Ct.min(),s=jn.newNoDocument(i,a),c=n.removedTargetIds||[];r=new Bv([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Ol(t,n.document),a=n.removedTargetIds||[];r=new Bv([],a,i,null)}else{if(!("filter"in e))return wt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new Ore(i,a),c=n.targetId;r=new cF(c,s)}}return r}function $m(t,e){let r;if(e instanceof bf)r={update:FO(t,e.key,e.value)};else if(e instanceof Wg)r={delete:zm(t,e.key)};else if(e instanceof Yl)r={update:FO(t,e.key,e.data),updateMask:Wre(e.fieldMask)};else{if(!(e instanceof S7))return wt();r={verify:zm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,s){const c=s.transform;if(c instanceof Bm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof kh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Um)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw wt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Ure(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:wt()})(t,e.precondition)),r}function GT(t,e){const r=e.currentDocument?(function(a){return a.updateTime!==void 0?Jn.updateTime(Ri(a.updateTime)):a.exists!==void 0?Jn.exists(a.exists):Jn.none()})(e.currentDocument):Jn.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(s,c){let d=null;if("setToServerValue"in c)Et(c.setToServerValue==="REQUEST_TIME"),d=new Bm;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new Bd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new kh(p)}else"increment"in c?d=new Um(s,c.increment):wt();const h=Mn.fromServerFormat(c.fieldPath);return new iF(h,d)})(t,i))):[];if(e.update){e.update.name;const i=Ol(t,e.update.name),a=new Wi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const h=d.fieldPaths||[];return new Ua(h.map((p=>Mn.fromServerFormat(p))))})(e.updateMask);return new Yl(i,a,s,r,n)}return new bf(i,a,r,n)}if(e.delete){const i=Ol(t,e.delete);return new Wg(i,r)}if(e.verify){const i=Ol(t,e.verify);return new S7(i,r)}return wt()}function Fre(t,e){return t&&t.length>0?(Et(e!==void 0),t.map((r=>(function(i,a){let s=i.updateTime?Ri(i.updateTime):Ri(a);return s.isEqual(Ct.min())&&(s=Ri(a)),new jre(s,i.transformResults||[])})(r,e)))):[]}function gF(t,e){return{documents:[fF(t,e.path)]}}function yF(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=fF(t,i);const a=(function(h){if(h.length!==0)return xF(Hr.create(h,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const s=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:ih(y.field),direction:Hre(y.dir)}})(p)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const c=FT(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:i}}function vF(t){let e=pF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Et(n===1);const p=r.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];r.where&&(a=(function(m){const y=bF(m);return y instanceof Hr&&x7(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(m){return m.map((y=>(function(T){return new Lm(ah(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,qg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,b=m.values||[];return new jh(b,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,b=m.values||[];return new jh(b,y)})(r.endAt)),HV(e,i,s,a,c,"F",d,h)}function qre(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function bF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ah(r.unaryFilter.field);return vr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=ah(r.unaryFilter.field);return vr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ah(r.unaryFilter.field);return vr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ah(r.unaryFilter.field);return vr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return wt()}})(t):t.fieldFilter!==void 0?(function(r){return vr.create(ah(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Hr.create(r.compositeFilter.filters.map((n=>bF(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return wt()}})(r.compositeFilter.op))})(t):wt()}function Hre(t){return Pre[t]}function Gre(t){return Dre[t]}function Kre(t){return Lre[t]}function ih(t){return{fieldPath:t.canonicalString()}}function ah(t){return Mn.fromServerFormat(t.fieldPath)}function xF(t){return t instanceof vr?(function(r){if(r.op==="=="){if(EO(r.value))return{unaryFilter:{field:ih(r.field),op:"IS_NAN"}};if(AO(r.value))return{unaryFilter:{field:ih(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(EO(r.value))return{unaryFilter:{field:ih(r.field),op:"IS_NOT_NAN"}};if(AO(r.value))return{unaryFilter:{field:ih(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ih(r.field),op:Gre(r.op),value:r.value}}})(t):t instanceof Hr?(function(r){const n=r.getFilters().map((i=>xF(i)));return n.length===1?n[0]:{compositeFilter:{op:Kre(r.op),filters:n}}})(t):wt()}function Wre(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function wF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,r,n,i,a=Ct.min(),s=Ct.min(),c=ri.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.ct=e}}function Xre(t,e){let r;if(e.document)r=zre(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ft.fromSegments(e.noDocument.path),i=zd(e.noDocument.readTime);r=jn.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return wt();{const n=ft.fromSegments(e.unknownDocument.path),i=zd(e.unknownDocument.version);r=jn.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const a=new Pn(i[0],i[1]);return Ct.fromTimestamp(a)})(e.readTime)),r}function qO(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ab(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,s){return{name:zm(a,s.key),fields:s.data.value.mapValue.fields,updateTime:Oh(a,s.version.toTimestamp()),createTime:Oh(a,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ud(e.version)};else{if(!e.isUnknownDocument())return wt();n.unknownDocument={path:r.path.toArray(),version:Ud(e.version)}}return n}function ab(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ud(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zd(t){const e=new Pn(t.seconds,t.nanoseconds);return Ct.fromTimestamp(e)}function pd(t,e){const r=(e.baseMutations||[]).map((a=>GT(t.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>GT(t.ct,a))),i=Pn.fromMillis(e.localWriteTimeMs);return new T7(e.batchId,i,r,n)}function Zp(t){const e=zd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?zd(t.lastLimboFreeSnapshotVersion):Ct.min();let n;return n=(function(a){return a.documents!==void 0})(t.query)?(function(a){return Et(a.documents.length===1),ls(Gg(pF(a.documents[0])))})(t.query):(function(a){return ls(vF(a))})(t.query),new Nl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ri.fromBase64String(t.resumeToken))}function SF(t,e){const r=Ud(e.snapshotVersion),n=Ud(e.lastLimboFreeSnapshotVersion);let i;i=rb(e.target)?gF(t.ct,e.target):yF(t.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ld(e.target),readTime:r,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function TF(t){const e=vF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ib(e,e.limit,"L"):e}function A5(t,e){return new E7(e.largestBatchId,GT(t.ct,e.overlayMutation))}function HO(t,e){const r=e.path.lastSegment();return[t,va(e.path.popLast()),r]}function GO(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Ud(n.readTime),documentKey:va(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre{getBundleMetadata(e,r){return KO(e).get(r).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:zd(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,r){return KO(e).put((function(i){return{bundleId:i.id,createTime:Ud(Ri(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return WO(e).get(r).next((n=>{if(n)return(function(a){return{name:a.name,query:TF(a.bundledQuery),readTime:zd(a.readTime)}})(n)}))}saveNamedQuery(e,r){return WO(e).put((function(i){return{name:i.name,readTime:Ud(Ri(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function KO(t){return Ti(t,"bundles")}function WO(t){return Ti(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Yx(e,n)}getOverlay(e,r){return Np(e).get(HO(this.userId,r)).next((n=>n?A5(this.serializer,n):null))}getOverlays(e,r){const n=So();return Ee.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((a,s)=>{const c=new E7(r,s);i.push(this.ht(e,c))})),Ee.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((s=>i.add(va(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(Np(e).j("collectionPathOverlayIndex",c))})),Ee.waitFor(a)}getOverlaysForCollection(e,r,n){const i=So(),a=va(r),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Np(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const h=A5(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const a=So();let s;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Np(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=A5(this.serializer,h);a.size()<i||m.largestBatchId===s?(a.set(m.getKey(),m),s=m.largestBatchId):p.done()})).next((()=>a))}ht(e,r){return Np(e).put((function(i,a,s){const[c,d,h]=HO(a,s.mutation.key);return{userId:a,collectionPath:d,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:$m(i.ct,s.mutation)}})(this.serializer,this.userId,r))}}function Np(t){return Ti(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{Pt(e){return Ti(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?ri.fromUint8Array(n):ri.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Nn(e.integerValue));else if("doubleValue"in e){const n=Nn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Im(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=$l(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(du(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?PV(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Kx(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):wt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const a=e.fields||{};this.dt(r,53);const s="value",c=((i=(n=a[s].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(Nn(c)),this.Vt(s,r),this.Tt(a[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),ft.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}md.vt=new md;function Zre(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function XO(t){const e=64-(function(n){let i=0;for(let a=0;a<8;++a){const s=Zre(255&n[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class Jre{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=XO(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=XO(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class ene{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class tne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class jp{constructor(){this.jt=new Jre,this.Ht=new ene(this.jt),this.Jt=new tne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new gd(this.indexId,this.documentKey,this.arrayValue,n)}}function Dc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=QO(t.arrayValue,e.arrayValue),r!==0?r:(r=QO(t.directionalValue,e.directionalValue),r!==0?r:ft.comparator(t.documentKey,e.documentKey)))}function QO(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.Xt=new an(((r,n)=>Mn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Et(e.collectionGroup===this.collectionId),this.nn)return!1;const r=PT(e);if(r!==void 0&&!this.sn(r))return!1;const n=cd(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.sn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new an(Mn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Rv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Rv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Rv(n.field,n.dir==="asc"?0:1)));return new tb(tb.UNKNOWN_ID,this.collectionId,r,Om.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){var e,r;if(Et(t instanceof vr||t instanceof Hr),t instanceof vr){if(t instanceof qV){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((a=>vr.create(t.field,"==",a))))||[];return Hr.create(i,"or")}return t}const n=t.filters.map((i=>AF(i)));return Hr.create(n,t.op)}function rne(t){if(t.getFilters().length===0)return[];const e=XT(AF(t));return Et(EF(e)),KT(e)||WT(e)?[e]:e.getFilters()}function KT(t){return t instanceof vr}function WT(t){return t instanceof Hr&&x7(t)}function EF(t){return KT(t)||WT(t)||(function(r){if(r instanceof Hr&&UT(r)){for(const n of r.getFilters())if(!KT(n)&&!WT(n))return!1;return!0}return!1})(t)}function XT(t){if(Et(t instanceof vr||t instanceof Hr),t instanceof vr)return t;if(t.filters.length===1)return XT(t.filters[0]);const e=t.filters.map((n=>XT(n)));let r=Hr.create(e,t.op);return r=sb(r),EF(r)?r:(Et(r instanceof Hr),Et(Ch(r)),Et(r.filters.length>1),r.filters.reduce(((n,i)=>C7(n,i))))}function C7(t,e){let r;return Et(t instanceof vr||t instanceof Hr),Et(e instanceof vr||e instanceof Hr),r=t instanceof vr?e instanceof vr?(function(i,a){return Hr.create([i,a],"and")})(t,e):ZO(t,e):e instanceof vr?ZO(e,t):(function(i,a){if(Et(i.filters.length>0&&a.filters.length>0),Ch(i)&&Ch(a))return $V(i,a.getFilters());const s=UT(i)?i:a,c=UT(i)?a:i,d=s.filters.map((h=>C7(h,c)));return Hr.create(d,"or")})(t,e),sb(r)}function ZO(t,e){if(Ch(e))return $V(e,t.getFilters());{const r=e.filters.map((n=>C7(t,n)));return Hr.create(r,"or")}}function sb(t){if(Et(t instanceof vr||t instanceof Hr),t instanceof vr)return t;const e=t.getFilters();if(e.length===1)return sb(e[0]);if(UV(t))return t;const r=e.map((i=>sb(i))),n=[];return r.forEach((i=>{i instanceof vr?n.push(i):i instanceof Hr&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Hr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nne{constructor(){this.un=new k7}addToCollectionParentIndex(e,r){return this.un.add(r),Ee.resolve()}getCollectionParents(e,r){return Ee.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ee.resolve()}deleteFieldIndex(e,r){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,r){return Ee.resolve()}getDocumentsMatchingTarget(e,r){return Ee.resolve(null)}getIndexType(e,r){return Ee.resolve(0)}getFieldIndexes(e,r){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,r){return Ee.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,r){return Ee.resolve(ds.min())}updateCollectionGroup(e,r,n){return Ee.resolve()}updateIndexEntries(e,r){return Ee.resolve()}}class k7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new an(jr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new an(jr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Uint8Array(0);class ine{constructor(e,r){this.databaseId=r,this.cn=new k7,this.ln=new wu((n=>Ld(n)),((n,i)=>Hg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const a={collectionId:n,parent:va(i)};return JO(e).put(a)}return Ee.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[_V(r),""],!1,!0);return JO(e).U(i).next((a=>{for(const s of a){if(s.collectionId!==r)break;n.push(_o(s.parent))}return n}))}addFieldIndex(e,r){const n=Cp(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete i.indexId;const a=n.add(i);if(r.indexState){const s=K0(e);return a.next((c=>{s.put(GO(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return a.next()}deleteFieldIndex(e,r){const n=Cp(e),i=K0(e),a=G0(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Cp(e),n=G0(e),i=K0(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return Ee.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const a=new YO(n).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,r){const n=G0(e);let i=!0;const a=new Map;return Ee.forEach(this.hn(r),(s=>this.Pn(e,s).next((c=>{i&&(i=!!c),a.set(s,c)})))).next((()=>{if(i){let s=dr();const c=[];return Ee.forEach(a,((d,h)=>{Xe("IndexedDbIndexManager",`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(($=>`${$.fieldPath}:${$.kind}`)).join(",")}`})(d)} to execute ${Ld(r)}`);const p=(function(C,$){const I=PT($);if(I===void 0)return null;for(const L of nb(C,I.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null})(h,d),m=(function(C,$){const I=new Map;for(const L of cd($))for(const E of nb(C,L.fieldPath))switch(E.op){case"==":case"in":I.set(L.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return I.set(L.fieldPath.canonicalString(),E.value),Array.from(I.values())}return null})(h,d),y=(function(C,$){const I=[];let L=!0;for(const E of cd($)){const A=E.kind===0?OO(C,E.fieldPath,C.startAt):IO(C,E.fieldPath,C.startAt);I.push(A.value),L&&(L=A.inclusive)}return new jh(I,L)})(h,d),b=(function(C,$){const I=[];let L=!0;for(const E of cd($)){const A=E.kind===0?IO(C,E.fieldPath,C.endAt):OO(C,E.fieldPath,C.endAt);I.push(A.value),L&&(L=A.inclusive)}return new jh(I,L)})(h,d),T=this.In(d,h,y),_=this.In(d,h,b),w=this.Tn(d,h,m),N=this.En(d.indexId,p,T,y.inclusive,_,b.inclusive,w);return Ee.forEach(N,(k=>n.G(k,r.limit).next((C=>{C.forEach(($=>{const I=ft.fromSegments($.documentKey);s.has(I)||(s=s.add(I),c.push(I))}))}))))})).next((()=>c))}return Ee.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=rne(Hr.create(e.filters,"and")).map((n=>$T(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,a,s,c){const d=(r!=null?r.length:1)*Math.max(n.length,a.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):Gy,b=this.An(e,y,n[m%h],i),T=this.Rn(e,y,a[m%h],s),_=c.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(b,T,_))}return p}An(e,r,n,i){const a=new gd(e,ft.empty(),r,n);return i?a:a.Zt()}Rn(e,r,n,i){const a=new gd(e,ft.empty(),r,n);return i?a.Zt():a}Pn(e,r){const n=new YO(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const c of a)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,r){let n=2;const i=this.hn(r);return Ee.forEach(i,(a=>this.Pn(e,a).next((s=>{s?n!==0&&s.fields.length<(function(d){let h=new an(Mn.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new jp;for(const i of cd(e)){const a=r.data.field(i.fieldPath);if(a==null)return null;const s=n.Yt(i.kind);md.vt.It(a,s)}return n.zt()}dn(e){const r=new jp;return md.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new jp;return md.vt.It(Pm(this.databaseId,r),n.Yt((function(a){const s=cd(a);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new jp);let a=0;for(const s of cd(e)){const c=n[a++];for(const d of i)if(this.fn(r,s.fieldPath)&&Dm(c))i=this.gn(i,s,c);else{const h=d.Yt(s.kind);md.vt.It(c,h)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const c of i){const d=new jp;d.seed(c.zt()),md.vt.It(s,d.Yt(r.kind)),a.push(d)}return a}fn(e,r){return!!e.filters.find((n=>n instanceof vr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Cp(e),i=K0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((a=>{const s=[];return Ee.forEach(a,(c=>i.get([c.indexId,this.uid]).next((d=>{s.push((function(p,m){const y=m?new Om(m.sequenceNumber,new ds(zd(m.readTime),new ft(_o(m.documentKey)),m.largestBatchId)):Om.empty(),b=p.fields.map((([T,_])=>new Rv(Mn.fromServerFormat(T),_)));return new tb(p.indexId,p.collectionGroup,b,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Zt(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=Cp(e),a=K0(e);return this.yn(e).next((s=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Ee.forEach(c,(d=>a.put(GO(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return Ee.forEach(r,((i,a)=>{const s=n.get(i.collectionGroup);return(s?Ee.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(n.set(i.collectionGroup,c),Ee.forEach(c,(d=>this.wn(e,i,d).next((h=>{const p=this.Sn(a,d);return h.isEqual(p)?Ee.resolve():this.bn(e,a,d,h,p)})))))))}))}Dn(e,r,n,i){return G0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return G0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=G0(e);let a=new an(Dc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,c)=>{a=a.add(new gd(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>a))}Sn(e,r){let n=new an(Dc);const i=this.Vn(r,e);if(i==null)return n;const a=PT(r);if(a!=null){const s=e.data.field(a.fieldPath);if(Dm(s))for(const c of s.arrayValue.values||[])n=n.add(new gd(r.indexId,e.key,this.dn(c),i))}else n=n.add(new gd(r.indexId,e.key,Gy,i));return n}bn(e,r,n,i,a){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,h,p,m,y){const b=d.getIterator(),T=h.getIterator();let _=H0(b),w=H0(T);for(;_||w;){let N=!1,k=!1;if(_&&w){const C=p(_,w);C<0?k=!0:C>0&&(N=!0)}else _!=null?k=!0:N=!0;N?(m(w),w=H0(T)):k?(y(_),_=H0(b)):(_=H0(b),w=H0(T))}})(i,a,Dc,(c=>{s.push(this.Dn(e,r,n,c))}),(c=>{s.push(this.vn(e,r,n,c))})),Ee.waitFor(s)}yn(e){let r=1;return K0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,a)=>{a.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,c)=>Dc(s,c))).filter(((s,c,d)=>!c||Dc(s,d[c-1])!==0));const i=[];i.push(e);for(const s of n){const c=Dc(s,e),d=Dc(s,r);if(c===0)i[0]=e.Zt();else if(c>0&&d<0)i.push(s),i.push(s.Zt());else if(d>0)break}i.push(r);const a=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];const c=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Gy,[]],d=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Gy,[]];a.push(IDBKeyRange.bound(c,d))}return a}Cn(e,r){return Dc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(eI)}getMinOffset(e,r){return Ee.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||wt())))).next(eI)}}function JO(t){return Ti(t,"collectionParents")}function G0(t){return Ti(t,"indexEntries")}function Cp(t){return Ti(t,"indexConfiguration")}function K0(t){return Ti(t,"indexState")}function eI(t){Et(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;m7(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new ds(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ma{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ma(e,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),a=[],s=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:s},((p,m,y)=>(c++,y.delete())));a.push(d.next((()=>{Et(c===1)})));const h=[];for(const p of r.mutations){const m=CV(e,p.key.path,r.batchId);a.push(i.delete(m)),h.push(p.key)}return Ee.waitFor(a).next((()=>h))}function ob(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw wt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ma.DEFAULT_COLLECTION_PERCENTILE=10,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ma.DEFAULT=new Ma(41943040,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ma.DISABLED=new Ma(-1,0,0);class Zx{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){Et(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Zx(a,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lc(e).J({index:"userMutationsIndex",range:n},((i,a,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const a=sh(e),s=Lc(e);return s.add({}).next((c=>{Et(typeof c=="number");const d=new T7(c,r,n,i),h=(function(b,T,_){const w=_.baseMutations.map((k=>$m(b.ct,k))),N=_.mutations.map((k=>$m(b.ct,k)));return{userId:T,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:w,mutations:N}})(this.serializer,this.userId,d),p=[];let m=new an(((y,b)=>Zt(y.canonicalString(),b.canonicalString())));for(const y of i){const b=CV(this.userId,y.key.path,c);m=m.add(y.key.path.popLast()),p.push(s.put(h)),p.push(a.put(b,Vte))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Ee.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Lc(e).get(r).next((n=>n?(Et(n.userId===this.userId),pd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Ee.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Lc(e).J({index:"userMutationsIndex",range:i},((s,c,d)=>{c.userId===this.userId&&(Et(c.batchId>=n),a=pd(this.serializer,c)),d.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Lc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,a,s)=>{n=a.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lc(e).U("userMutationsIndex",r).next((n=>n.map((i=>pd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Mv(this.userId,r.path),i=IDBKeyRange.lowerBound(n),a=[];return sh(e).J({range:i},((s,c,d)=>{const[h,p,m]=s,y=_o(p);if(h===this.userId&&r.path.isEqual(y))return Lc(e).get(m).next((b=>{if(!b)throw wt();Et(b.userId===this.userId),a.push(pd(this.serializer,b))}));d.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new an(Zt);const i=[];return r.forEach((a=>{const s=Mv(this.userId,a.path),c=IDBKeyRange.lowerBound(s),d=sh(e).J({range:c},((h,p,m)=>{const[y,b,T]=h,_=_o(b);y===this.userId&&a.path.isEqual(_)?n=n.add(T):m.done()}));i.push(d)})),Ee.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,a=Mv(this.userId,n),s=IDBKeyRange.lowerBound(a);let c=new an(Zt);return sh(e).J({range:s},((d,h,p)=>{const[m,y,b]=d,T=_o(y);m===this.userId&&n.isPrefixOf(T)?T.length===i&&(c=c.add(b)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],i=[];return r.forEach((a=>{i.push(Lc(e).get(a).next((s=>{if(s===null)throw wt();Et(s.userId===this.userId),n.push(pd(this.serializer,s))})))})),Ee.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return NF(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Ee.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Ee.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return sh(e).J({range:n},((a,s,c)=>{if(a[0]===this.userId){const d=_o(a[1]);i.push(d)}else c.done()})).next((()=>{Et(i.length===0)}))}))}containsKey(e,r){return jF(e,this.userId,r)}Nn(e){return CF(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function jF(t,e,r){const n=Mv(e,r.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return sh(t).J({range:a,H:!0},((c,d,h)=>{const[p,m,y]=c;p===e&&m===i&&(s=!0),h.done()})).next((()=>s))}function Lc(t){return Ti(t,"mutations")}function sh(t){return Ti(t,"documentMutations")}function CF(t){return Ti(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $d(0)}static kn(){return new $d(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new $d(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Ct.fromTimestamp(new Pn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>W0(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Et(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const a=[];return W0(e).J(((s,c)=>{const d=Zp(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))})).next((()=>Ee.waitFor(a))).next((()=>i))}forEachTarget(e,r){return W0(e).J(((n,i)=>{const a=Zp(i);r(a)}))}qn(e){return rI(e).get("targetGlobalKey").next((r=>(Et(r!==null),r)))}Qn(e,r){return rI(e).put("targetGlobalKey",r)}Kn(e,r){return W0(e).put(SF(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Ld(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return W0(e).J({range:i,index:"queryTargetsIndex"},((s,c,d)=>{const h=Zp(c);Hg(r,h.target)&&(a=h,d.done())})).next((()=>a))}addMatchingKeys(e,r,n){const i=[],a=Gc(e);return r.forEach((s=>{const c=va(s.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,s))})),Ee.waitFor(i)}removeMatchingKeys(e,r,n){const i=Gc(e);return Ee.forEach(r,(a=>{const s=va(a.path);return Ee.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,r){const n=Gc(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=Gc(e);let a=dr();return i.J({range:n,H:!0},((s,c,d)=>{const h=_o(s[1]),p=new ft(h);a=a.add(p)})).next((()=>a))}containsKey(e,r){const n=va(r.path),i=IDBKeyRange.bound([n],[_V(n)],!1,!0);let a=0;return Gc(e).J({index:"documentTargetsIndex",H:!0,range:i},(([s,c],d,h)=>{s!==0&&(a++,h.done())})).next((()=>a>0))}ot(e,r){return W0(e).get(r).next((n=>n?Zp(n):null))}}function W0(t){return Ti(t,"targets")}function rI(t){return Ti(t,"targetGlobal")}function Gc(t){return Ti(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI([t,e],[r,n]){const i=Zt(t,r);return i===0?Zt(e,n):i}class sne{constructor(e){this.Un=e,this.buffer=new an(nI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();nI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class one{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){xu(r)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await bu(r)}await this.Hn(3e5)}))}}class lne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Ee.resolve(Ba.oe);const n=new sne(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(tI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,a,s,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(a=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),rh()<=yr.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m}))))}}function cne(t,e){return new lne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class une{constructor(e,r){this.db=e,this.garbageCollector=cne(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return Ky(e,n)}removeReference(e,r,n){return Ky(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Ky(e,r)}nr(e,r){return(function(i,a){let s=!1;return CF(i).Y((c=>jF(i,c,a).next((d=>(d&&(s=!0),Ee.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.tr(e,((s,c)=>{if(c<=r){const d=this.nr(e,s).next((h=>{if(!h)return a++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Ct.min()),Gc(e).delete((function(m){return[0,va(m.path)]})(s)))))}));i.push(d)}})).next((()=>Ee.waitFor(i))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Ky(e,r)}tr(e,r){const n=Gc(e);let i,a=Ba.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:h})=>{s===0?(a!==Ba.oe&&r(new ft(_o(i)),a),a=h,i=d):a=Ba.oe})).next((()=>{a!==Ba.oe&&r(new ft(_o(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ky(t,e){return Gc(t).put((function(n,i){return{targetId:0,path:va(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.changes=new wu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ee.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dne{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return ed(e).put(n)}removeEntry(e,r,n){return ed(e).delete((function(a,s){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ab(s),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=jn.newInvalidDocument(r);return ed(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kp(r))},((i,a)=>{n=this.ir(r,a)})).next((()=>n))}sr(e,r){let n={size:0,document:jn.newInvalidDocument(r)};return ed(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kp(r))},((i,a)=>{n={document:this.ir(r,a),size:ob(a)}})).next((()=>n))}getEntries(e,r){let n=as();return this._r(e,r,((i,a)=>{const s=this.ir(i,a);n=n.insert(i,s)})).next((()=>n))}ar(e,r){let n=as(),i=new wn(ft.comparator);return this._r(e,r,((a,s)=>{const c=this.ir(a,s);n=n.insert(a,c),i=i.insert(a,ob(s))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return Ee.resolve();let i=new an(sI);r.forEach((d=>i=i.add(d)));const a=IDBKeyRange.bound(kp(i.first()),kp(i.last())),s=i.getIterator();let c=s.getNext();return ed(e).J({index:"documentKeyIndex",range:a},((d,h,p)=>{const m=ft.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&sI(c,m)<0;)n(c,null),c=s.getNext();c&&c.isEqual(m)&&(n(c,h),c=s.hasNext()?s.getNext():null),c?p.$(kp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,a){const s=r.path,c=[s.popLast().toArray(),s.lastSegment(),ab(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ed(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{a==null||a.incrementDocumentReadCount(h.length);let p=as();for(const m of h){const y=this.ir(ft.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Kg(r,y)||i.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,i){let a=as();const s=aI(r,n),c=aI(r,ds.max());return ed(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,h,p)=>{const m=this.ir(ft.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(m.key,m),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(e){return new hne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return iI(e).get("remoteDocumentGlobalKey").next((r=>(Et(!!r),r)))}rr(e,r){return iI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Xre(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ct.min())))return n}return jn.newInvalidDocument(e)}}function OF(t){return new dne(t)}class hne extends kF{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new wu((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new an(((a,s)=>Zt(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const c=this.lr.get(a);if(r.push(this.cr.removeEntry(e,a,c.readTime)),s.isValidDocument()){const d=qO(this.cr.serializer,s);i=i.add(a.path.popLast());const h=ob(d);n+=h-c.size,r.push(this.cr.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=qO(this.cr.serializer,s.convertToNoDocument(Ct.min()));r.push(this.cr.addEntry(e,a,d))}})),i.forEach((a=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),r.push(this.cr.updateMetadata(e,n)),Ee.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((a,s)=>{this.lr.set(a,{size:s,readTime:n.get(a).readTime})})),n)))}}function iI(t){return Ti(t,"remoteDocumentGlobal")}function ed(t){return Ti(t,"remoteDocumentsV14")}function kp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aI(t,e){const r=e.documentKey.path.toArray();return[t,ab(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function sI(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<r.length-2&&a<n.length-2;++a)if(i=Zt(r[a],n[a]),i)return i;return i=Zt(r.length,n.length),i||(i=Zt(r[r.length-2],n[n.length-2]),i||Zt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&cm(n.mutation,i,Ua.empty(),Pn.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,dr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=dr()){const i=So();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let s=Qp();return a.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=So();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,dr())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,c)=>{r.set(s,c)}))}))}computeViews(e,r,n,i){let a=as();const s=lm(),c=(function(){return lm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Yl)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),cm(p.mutation,h,p.mutation.getFieldMask(),Pn.now())):s.set(h.key,Ua.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,p)=>s.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new fne(p,(m=s.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=lm();let i=new wn(((s,c)=>s-c)),a=dr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const c of s)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||Ua.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(i.get(c.batchId)||dr()).add(d);i=i.insert(c.batchId,m)}))})).next((()=>{const s=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=ZV();p.forEach((y=>{if(!a.has(y)){const b=aF(r.get(y),n.get(y));b!==null&&m.set(y,b),a=a.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ee.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(s){return ft.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):GV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Ee.resolve(So());let c=-1,d=a;return s.next((h=>Ee.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(p)?Ee.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,dr()))).next((p=>({batchId:c,changes:YV(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ft(r)).next((n=>{let i=Qp();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=Qp();return this.indexManager.getCollectionParents(e,a).next((c=>Ee.forEach(c,(d=>{const h=(function(m,y){return new vf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,n,i).next((p=>{p.forEach(((m,y)=>{s=s.insert(m,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((s=>{a.forEach(((d,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,jn.newInvalidDocument(p)))}));let c=Qp();return s.forEach(((d,h)=>{const p=a.get(d);p!==void 0&&cm(p.mutation,h,Ua.empty(),Pn.now()),Kg(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ee.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:Ri(i.createTime)}})(r)),Ee.resolve()}getNamedQuery(e,r){return Ee.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:TF(i.bundledQuery),readTime:Ri(i.readTime)}})(r)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(){this.overlays=new wn(ft.comparator),this.Ir=new Map}getOverlay(e,r){return Ee.resolve(this.overlays.get(r))}getOverlays(e,r){const n=So();return Ee.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.ht(e,r,a)})),Ee.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(n)),Ee.resolve()}getOverlaysForCollection(e,r,n){const i=So(),a=r.length+1,s=new ft(r.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new wn(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=a.get(h.largestBatchId);p===null&&(p=So(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=So(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=i)););return Ee.resolve(c)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new E7(r,n));let a=this.Ir.get(r);a===void 0&&(a=dr(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{constructor(){this.sessionToken=ri.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(){this.Tr=new an(ki.Er),this.dr=new an(ki.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new ki(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new ki(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new ft(new jr([])),n=new ki(r,e),i=new ki(r,e+1),a=[];return this.dr.forEachInRange([n,i],(s=>{this.Vr(s),a.push(s.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ft(new jr([])),n=new ki(r,e),i=new ki(r,e+1);let a=dr();return this.dr.forEachInRange([n,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const r=new ki(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class ki{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ft.comparator(e.key,r.key)||Zt(e.wr,r.wr)}static Ar(e,r){return Zt(e.wr,r.wr)||ft.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new an(ki.Er)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new T7(a,r,n,i);this.mutationQueue.push(s);for(const c of i)this.br=this.br.add(new ki(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ee.resolve(s)}lookupMutationBatch(e,r){return Ee.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new ki(r,0),i=new ki(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],(s=>{const c=this.Dr(s.wr);a.push(c)})),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new an(Zt);return r.forEach((i=>{const a=new ki(i,0),s=new ki(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],(c=>{n=n.add(c.wr)}))})),Ee.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;ft.isDocumentKey(a)||(a=a.child(""));const s=new ki(new ft(a),0);let c=new an(Zt);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===i&&(c=c.add(d.wr)),!0)}),s),Ee.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){Et(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ee.forEach(r.mutations,(i=>{const a=new ki(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new ki(r,0),i=this.br.firstAfterOrEqual(n);return Ee.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{constructor(e){this.Mr=e,this.docs=(function(){return new wn(ft.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ee.resolve(n?n.document.mutableCopy():jn.newInvalidDocument(r))}getEntries(e,r){let n=as();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():jn.newInvalidDocument(i))})),Ee.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=as();const s=r.path,c=new ft(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||m7(TV(p),n)<=0||(i.has(p.key)||Kg(r,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Ee.resolve(a)}getAllFromCollectionGroup(e,r,n,i){wt()}Or(e,r){return Ee.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new bne(this)}getSize(e){return Ee.resolve(this.size)}}class bne extends kF{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),Ee.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(e){this.persistence=e,this.Nr=new wu((r=>Ld(r)),Hg),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Lr=0,this.Br=new O7,this.targetCount=0,this.kr=$d.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ee.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new $d(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ee.resolve()}updateTargetData(e,r){return this.Kn(r),Ee.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Ee.waitFor(a).next((()=>i))}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ee.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ee.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ee.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ee.resolve(n)}containsKey(e,r){return Ee.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ba(0),this.Kr=!1,this.Kr=!0,this.$r=new gne,this.referenceDelegate=e(this),this.Ur=new xne(this),this.indexManager=new nne,this.remoteDocumentCache=(function(i){return new vne(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new _F(r),this.Gr=new pne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new mne,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new yne(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("MemoryPersistence","Starting transaction:",e);const i=new wne(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,r){return Ee.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class wne extends EV{constructor(e){super(),this.currentSequenceNumber=e}}class Jx{constructor(e){this.persistence=e,this.Jr=new O7,this.Yr=null}static Zr(e){return new Jx(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ee.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ee.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ee.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Xr,(n=>{const i=ft.fromPath(n);return this.ei(e,i).next((a=>{a||r.removeEntry(i,Ct.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ee.or([()=>Ee.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ne{constructor(e){this.serializer=e}O(e,r,n,i){const a=new Gx("createOrUpgrade",r);n<1&&i>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xO,{unique:!0}),d.createObjectStore("documentMutations")})(e),oI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=Ee.resolve();return n<3&&i>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),oI(e)),s=s.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(a)))),n<4&&i>=4&&(n!==0&&(s=s.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xO,{unique:!0});const m=h.store("mutations"),y=p.map((b=>m.put(b)));return Ee.waitFor(y)}))})(e,a)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(s=s.next((()=>this.ni(a)))),n<6&&i>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),n<7&&i>=7&&(s=s.next((()=>this.ii(a)))),n<8&&i>=8&&(s=s.next((()=>this.si(e,a)))),n<9&&i>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(s=s.next((()=>this.oi(a)))),n<11&&i>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(s=s.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:ere});h.createIndex("collectionPathOverlayIndex",tre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",rre,{unique:!1})})(e)}))),n<13&&i>=13&&(s=s.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Fte});h.createIndex("documentKeyIndex",qte),h.createIndex("collectionGroupIndex",Hte)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.ai(e,a)))),n<15&&i>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Qte}).createIndex("sequenceNumberIndex",Yte,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Zte}).createIndex("documentKeyIndex",Jte,{unique:!1})})(e)))),n<16&&i>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=ob(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>Ee.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>Ee.forEach(c,(d=>{Et(d.userId===a.userId);const h=pd(this.serializer,d);return NF(e,a.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const a=[];return n.J(((s,c)=>{const d=new jr(s),h=(function(m){return[0,va(m)]})(d);a.push(r.get(h).next((p=>p?Ee.resolve():(m=>r.put({targetId:0,path:va(m),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>Ee.waitFor(a)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:Xte});const n=r.store("collectionParents"),i=new k7,a=s=>{if(i.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:va(d)})}};return r.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new jr(s);return a(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,c,d],h)=>{const p=_o(c);return a(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const a=Zp(i),s=SF(this.serializer,a);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((a,s)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new ft(jr.fromString(m.document.name).popFirst(5)):m.noDocument?ft.fromSegments(m.noDocument.path):m.unknownDocument?ft.fromSegments(m.unknownDocument.path):wt()})(s).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(c.put(h))})).next((()=>Ee.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=OF(this.serializer),a=new RF(Jx.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:dr();pd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Ee.forEach(c,((d,h)=>{const p=new ia(h),m=Yx.lt(this.serializer,p),y=a.getIndexManager(p),b=Zx.lt(p,this.serializer,y,a.referenceDelegate);return new IF(i,b,m,y).recalculateAndSaveOverlaysForDocumentKeys(new DT(r,Ba.oe),d).next()}))}))}}function oI(t){t.createObjectStore("targetDocuments",{keyPath:Kte}).createIndex("documentTargetsIndex",Wte,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gte,{unique:!0}),t.createObjectStore("targetGlobal")}const E5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class I7{constructor(e,r,n,i,a,s,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=a,this.window=s,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!I7.D())throw new rt(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new une(this,i),this.Ai=r+"main",this.serializer=new _F(d),this.Ri=new su(this.Ai,this.hi,new _ne(this.serializer)),this.$r=new Yre,this.Ur=new ane(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OF(this.serializer),this.Gr=new Qre,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new rt(Me.FAILED_PRECONDITION,E5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Ba(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(xu(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Op(e).get("owner").next((r=>Ee.resolve(this.vi(r))))}Ci(e){return Wy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Ti(r,"clientMetadata");return n.U().next((i=>{const a=this.xi(i,18e5),s=i.filter((c=>a.indexOf(c)===-1));return Ee.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ee.resolve(!0):Op(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new rt(Me.FAILED_PRECONDITION,E5);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wy(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||s&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Xe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new DT(e,Ba.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Wy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Zx.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ine(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",a=(function(d){return d===17?are:d===16?ire:d===15?y7:d===14?IV:d===13?OV:d===12?nre:d===11?kV:void wt()})(this.hi);let s;return this.Ri.runTransaction(e,i,a,(c=>(s=new DT(c,this.Qr?this.Qr.next():Ba.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw Zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new rt(Me.FAILED_PRECONDITION,AV);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return Op(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new rt(Me.FAILED_PRECONDITION,E5)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Op(e).put("owner",r)}static D(){return su.D()}bi(e){const r=Op(e);return r.get("owner").next((n=>this.vi(n)?(Xe("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ee.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Zn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;k$()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Xe("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Zn("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Zn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Op(t){return Ti(t,"owner")}function Wy(t){return Ti(t,"clientMetadata")}function MF(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=dr(),i=dr();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new R7(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return k$()?8:NV(_i())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.Zi(e,r,i,n).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Sne;return this.Xi(e,r,s).next((c=>{if(a.result=c,this.zi)return this.es(e,r,s,c.size)}))})).next((()=>a.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(rh()<=yr.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",nh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ee.resolve()):(rh()<=yr.DEBUG&&Xe("QueryEngine","Query:",nh(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(rh()<=yr.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",nh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(r))):Ee.resolve())}Yi(e,r){if(RO(r))return Ee.resolve(null);let n=ls(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=ib(r,null,"F"),n=ls(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const s=dr(...a);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,s,d.readTime)?this.Yi(e,ib(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,i){return RO(r)||i.isEqual(Ct.min())?Ee.resolve(null):this.Ji.getDocuments(e,n).next((a=>{const s=this.ts(r,a);return this.ns(r,s,n,i)?Ee.resolve(null):(rh()<=yr.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nh(r)),this.rs(e,s,r,SV(i,-1)).next((c=>c)))}))}ts(e,r){let n=new an(XV(e));return r.forEach(((i,a)=>{Kg(e,a)&&(n=n.add(a))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return rh()<=yr.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",nh(r)),this.Ji.getDocumentsMatchingQuery(e,r,ds.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new wn(Zt),this._s=new wu((a=>Ld(a)),Hg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function DF(t,e,r,n){return new Tne(t,e,r,n)}async function LF(t,e){const r=At(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const s=[],c=[];let d=dr();for(const h of i){s.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of a){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:s,addedBatchIds:c})))}))}))}function Ane(t,e){const r=At(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,y=m.keys();let b=Ee.resolve();return y.forEach((T=>{b=b.next((()=>p.getEntry(d,T))).next((_=>{const w=h.docVersions.get(T);Et(w!==null),_.version.compareTo(w)<0&&(m.applyToRemoteDocument(_,h),_.isValidDocument()&&(_.setReadTime(h.commitVersion),p.addEntry(_)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=dr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function BF(t){const e=At(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Ene(t,e){const r=At(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const y=i.get(m);if(!y)return;c.push(r.Ur.removeMatchingKeys(a,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(a,p.addedDocuments,m))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(ri.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,n)),i=i.insert(m,b),(function(_,w,N){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,b,p)&&c.push(r.Ur.updateTargetData(a,b))}));let d=as(),h=dr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(a,p))})),c.push(Nne(a,s,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Ct.min())){const p=r.Ur.getLastRemoteSnapshotVersion(a).next((m=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n)));c.push(p)}return Ee.waitFor(c).next((()=>s.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(r.os=i,a)))}function Nne(t,e,r){let n=dr(),i=dr();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let s=as();return r.forEach(((c,d)=>{const h=a.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Ct.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):Xe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:s,Is:i}}))}function jne(t,e){const r=At(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function lb(t,e){const r=At(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((a=>a?(i=a,Ee.resolve(i)):r.Ur.allocateTargetId(n).next((s=>(i=new Nl(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Ih(t,e,r){const n=At(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!xu(s))throw s;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function QT(t,e,r){const n=At(t);let i=Ct.min(),a=dr();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,h,p){const m=At(d),y=m._s.get(p);return y!==void 0?Ee.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,s,ls(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{a=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?i:Ct.min(),r?a:dr()))).next((c=>($F(n,WV(e),c),{documents:c,Ts:a})))))}function UF(t,e){const r=At(t),n=At(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(a=>n.ot(a,e).next((s=>s?s.target:null))))}function zF(t,e){const r=At(t),n=r.us.get(e)||Ct.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,SV(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>($F(r,e,i),i)))}function $F(t,e,r){let n=t.us.get(e)||Ct.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.us.set(e,n)}function lI(t,e){return`firestore_clients_${t}_${e}`}function cI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function N5(t,e){return`firestore_targets_${t}_${e}`}class cb{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new rt(i.error.code,i.error.message))),s?new cb(e,r,i.state,a):(Zn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class um{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new rt(n.error.code,n.error.message))),a?new um(e,n.state,i):(Zn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ub{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=w7();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=jV(n.activeTargetIds[s]),a=a.add(n.activeTargetIds[s]);return i?new ub(e,a):(Zn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class M7{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new M7(r.clientId,r.onlineState):(Zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YT{constructor(){this.activeTargetIds=w7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j5{constructor(e,r,n,i,a){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new wn(Zt),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=lI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new YT),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(lI(this.persistenceKey,n));if(i){const a=ub.Rs(n,i);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(N5(this.persistenceKey,e));if(i){const a=um.Rs(e,i);a&&(n=a.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(N5(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Xe("SharedClientState","READ",e,r),r}setItem(e,r){Xe("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(a){let s=Ba.oe;if(a!=null)try{const c=JSON.parse(a);Et(typeof c=="number"),s=c}catch(c){Zn("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(r.newValue);n!==Ba.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new cb(this.currentUser,e,r,n),a=cI(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Vs())}Qs(e){const r=cI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=N5(this.persistenceKey,e),a=new um(e,r,n);this.setItem(i,a.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return ub.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return cb.Rs(new ia(a),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return um.Rs(i,r)}Ls(e){return M7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),a=this.ks(n),s=[],c=[];return a.forEach((d=>{i.has(d)||s.push(d)})),i.forEach((d=>{a.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=w7();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class VF{constructor(){this.so=new YT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new YT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xy=null;function C5(){return Xy===null?Xy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xy++,"0x"+Xy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="WebChannelConnection";class Ine extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,s){const c=C5(),d=this.xo(r,n.toUriEncodedString());Xe("RestConnection",`Sending RPC '${r}' ${c}:`,d,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,s),this.No(r,d,h,i).then((p=>(Xe("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Cm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",i),p}))}Lo(r,n,i,a,s,c){return this.Mo(r,n,i,a,s)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,s)=>r[s]=a)),i&&i.headers.forEach(((a,s)=>r[s]=a))}xo(r,n){const i=kne[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=C5();return new Promise(((s,c)=>{const d=new gV;d.setWithCredentials(!0),d.listenOnce(yV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Iv.NO_ERROR:const p=d.getResponseJson();Xe(ta,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),s(p);break;case Iv.TIMEOUT:Xe(ta,`RPC '${e}' ${a} timed out`),c(new rt(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Iv.HTTP_ERROR:const m=d.getStatus();if(Xe(ta,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const T=(function(w){const N=w.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(N)>=0?N:Me.UNKNOWN})(b.status);c(new rt(T,b.message))}else c(new rt(Me.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new rt(Me.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{Xe(ta,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Xe(ta,`RPC '${e}' ${a} sending request:`,i),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const i=C5(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xV(),c=bV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=a.join("");Xe(ta,`Creating RPC '${e}' stream ${i}: ${p}`,d);const m=s.createWebChannel(p,d);let y=!1,b=!1;const T=new One({Io:w=>{b?Xe(ta,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(y||(Xe(ta,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Xe(ta,`RPC '${e}' stream ${i} sending:`,w),m.send(w))},To:()=>m.close()}),_=(w,N,k)=>{w.listen(N,(C=>{try{k(C)}catch($){setTimeout((()=>{throw $}),0)}}))};return _(m,Xp.EventType.OPEN,(()=>{b||(Xe(ta,`RPC '${e}' stream ${i} transport opened.`),T.yo())})),_(m,Xp.EventType.CLOSE,(()=>{b||(b=!0,Xe(ta,`RPC '${e}' stream ${i} transport closed`),T.So())})),_(m,Xp.EventType.ERROR,(w=>{b||(b=!0,Cm(ta,`RPC '${e}' stream ${i} transport errored:`,w),T.So(new rt(Me.UNAVAILABLE,"The operation could not be completed")))})),_(m,Xp.EventType.MESSAGE,(w=>{var N;if(!b){const k=w.data[0];Et(!!k);const C=k,$=C.error||((N=C[0])===null||N===void 0?void 0:N.error);if($){Xe(ta,`RPC '${e}' stream ${i} received error:`,$);const I=$.status;let L=(function(R){const F=li[R];if(F!==void 0)return lF(F)})(I),E=$.message;L===void 0&&(L=Me.INTERNAL,E="Unknown error status: "+I+" with message "+$.message),b=!0,T.So(new rt(L,E)),m.close()}else Xe(ta,`RPC '${e}' stream ${i} received:`,k),T.bo(k)}})),_(c,vV.STAT_EVENT,(w=>{w.stat===MT.PROXY?Xe(ta,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===MT.NOPROXY&&Xe(ta,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(){return typeof window<"u"?window:null}function Uv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){return new Bre(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,r,n,i,a,s,c,d){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new P7(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Me.RESOURCE_EXHAUSTED?(Zn(r.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new rt(Me.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rne extends qF{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Vre(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Ct.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Ct.min():s.readTime?Ri(s.readTime):Ct.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=HT(this.serializer),r.addTarget=(function(a,s){let c;const d=s.target;if(c=rb(d)?{documents:gF(a,d)}:{query:yF(a,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=dF(a,s.resumeToken);const h=FT(a,s.expectedCount);h!==null&&(c.expectedCount=h)}else if(s.snapshotVersion.compareTo(Ct.min())>0){c.readTime=Oh(a,s.snapshotVersion.toTimestamp());const h=FT(a,s.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=qre(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=HT(this.serializer),r.removeTarget=e,this.a_(r)}}class Mne extends qF{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Et(!!e.streamToken),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Fre(e.writeResults,e.commitTime),n=Ri(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=HT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>$m(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new rt(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Mo(e,qT(r,n),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new rt(Me.UNKNOWN,a.toString())}))}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,qT(r,n),i,s,c,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new rt(Me.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Dne{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zn(r),this.D_=!1):Xe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((s=>{n.enqueueAndForget((async()=>{r0(this)&&(Xe("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=At(d);h.L_.add(4),await Yg(h),h.q_.set("Unknown"),h.L_.delete(4),await t2(h)})(this))}))})),this.q_=new Dne(n,i)}}async function t2(t){if(r0(t))for(const e of t.B_)await e(!0)}async function Yg(t){for(const e of t.B_)await e(!1)}function r2(t,e){const r=At(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),B7(r)?L7(r):wf(r).r_()&&D7(r,e))}function Rh(t,e){const r=At(t),n=wf(r);r.N_.delete(e),n.r_()&&HF(r,e),r.N_.size===0&&(n.r_()?n.o_():r0(r)&&r.q_.set("Unknown"))}function D7(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}wf(t).A_(e)}function HF(t,e){t.Q_.xe(e),wf(t).R_(e)}function L7(t){t.Q_=new Mre({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wf(t).start(),t.q_.v_()}function B7(t){return r0(t)&&!wf(t).n_()&&t.N_.size>0}function r0(t){return At(t).L_.size===0}function GF(t){t.Q_=void 0}async function Bne(t){t.q_.set("Online")}async function Une(t){t.N_.forEach(((e,r)=>{D7(t,e)}))}async function zne(t,e){GF(t),B7(t)?(t.q_.M_(e),L7(t)):t.q_.set("Unknown")}async function $ne(t,e,r){if(t.q_.set("Online"),e instanceof uF&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(n){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await db(t,n)}else if(e instanceof Bv?t.Q_.Ke(e):e instanceof cF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ct.min()))try{const n=await BF(t.localStore);r.compareTo(n)>=0&&await(function(a,s){const c=a.Q_.rt(s);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=a.N_.get(h);p&&a.N_.set(h,p.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,h)=>{const p=a.N_.get(d);if(!p)return;a.N_.set(d,p.withResumeToken(ri.EMPTY_BYTE_STRING,p.snapshotVersion)),HF(a,d);const m=new Nl(p.target,d,h,p.sequenceNumber);D7(a,m)})),a.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){Xe("RemoteStore","Failed to raise snapshot:",n),await db(t,n)}}async function db(t,e,r){if(!xu(e))throw e;t.L_.add(1),await Yg(t),t.q_.set("Offline"),r||(r=()=>BF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Xe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await t2(t)}))}function KF(t,e){return e().catch((r=>db(t,r,e)))}async function xf(t){const e=At(t),r=fu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Vne(e);)try{const i=await jne(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,Fne(e,i)}catch(i){await db(e,i)}WF(e)&&XF(e)}function Vne(t){return r0(t)&&t.O_.length<10}function Fne(t,e){t.O_.push(e);const r=fu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function WF(t){return r0(t)&&!fu(t).n_()&&t.O_.length>0}function XF(t){fu(t).start()}async function qne(t){fu(t).p_()}async function Hne(t){const e=fu(t);for(const r of t.O_)e.m_(r.mutations)}async function Gne(t,e,r){const n=t.O_.shift(),i=A7.from(n,e,r);await KF(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await xf(t)}async function Kne(t,e){e&&fu(t).V_&&await(async function(n,i){if((function(s){return oF(s)&&s!==Me.ABORTED})(i.code)){const a=n.O_.shift();fu(n).s_(),await KF(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await xf(n)}})(t,e),WF(t)&&XF(t)}async function dI(t,e){const r=At(t);r.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const n=r0(r);r.L_.add(3),await Yg(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await t2(r)}async function ZT(t,e){const r=At(t);e?(r.L_.delete(2),await t2(r)):e||(r.L_.add(2),await Yg(r),r.q_.set("Unknown"))}function wf(t){return t.K_||(t.K_=(function(r,n,i){const a=At(r);return a.w_(),new Rne(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Bne.bind(null,t),Ro:Une.bind(null,t),mo:zne.bind(null,t),d_:$ne.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),B7(t)?L7(t):t.q_.set("Unknown")):(await t.K_.stop(),GF(t))}))),t.K_}function fu(t){return t.U_||(t.U_=(function(r,n,i){const a=At(r);return a.w_(),new Mne(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qne.bind(null,t),mo:Kne.bind(null,t),f_:Hne.bind(null,t),g_:Gne.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await xf(t)):(await t.U_.stop(),t.O_.length>0&&(Xe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,c=new U7(e,r,s,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new rt(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z7(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),xu(t))return new rt(Me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ft.comparator(r.key,n.key):(r,n)=>ft.comparator(r.key,n.key),this.keyedMap=Qp(),this.sortedSet=new wn(this.comparator)}static emptySet(e){return new mh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof mh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new mh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.W_=new wn(ft.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Mh{constructor(e,r,n,i,a,s,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach((c=>{s.push({type:0,doc:c})})),new Mh(e,r,mh.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Xne{constructor(){this.queries=fI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=At(r),a=i.queries;i.queries=fI(),a.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new rt(Me.ABORTED,"Firestore shutting down"))}}function fI(){return new wu((t=>KV(t)),Wx)}async function $7(t,e){const r=At(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new Wne,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const c=z7(s,`Initialization of query '${nh(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&F7(r)}async function V7(t,e){const r=At(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Qne(t,e){const r=At(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const c of s.j_)c.X_(i)&&(n=!0);s.z_=i}}n&&F7(r)}function Yne(t,e,r){const n=At(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function F7(t){t.Y_.forEach((e=>{e.next()}))}var JT,pI;(pI=JT||(JT={})).ea="default",pI.Cache="cache";class q7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Mh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==JT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.key=e}}class YF{constructor(e){this.key=e}}class Zne{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=dr(),this.mutatedKeys=dr(),this.Aa=XV(e),this.Ra=new mh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new hI,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,m)=>{const y=i.get(p),b=Kg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),_=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let w=!1;y&&b?y.data.isEqual(b.data)?T!==_&&(n.track({type:3,doc:b}),w=!0):this.ga(y,b)||(n.track({type:2,doc:b}),w=!0,(d&&this.Aa(b,d)>0||h&&this.Aa(b,h)<0)&&(c=!0)):!y&&b?(n.track({type:0,doc:b}),w=!0):y&&!b&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(c=!0)),w&&(b?(s=s.add(b),a=_?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),n.track({type:1,doc:p})}return{Ra:s,fa:n,ns:c,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((p,m)=>(function(b,T){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return _(b)-_(T)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),i=i!=null&&i;const c=r&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,h=d!==this.Ea;return this.Ea=d,s.length!==0||h?{snapshot:new Mh(this.query,e.Ra,a,s,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=dr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new YF(n))})),this.da.forEach((n=>{e.has(n)||r.push(new QF(n))})),r}ba(e){this.Ta=e.Ts,this.da=dr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Mh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Jne{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class eie{constructor(e){this.key=e,this.va=!1}}class tie{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new wu((c=>KV(c)),Wx),this.Ma=new Map,this.xa=new Set,this.Oa=new wn(ft.comparator),this.Na=new Map,this.La=new O7,this.Ba={},this.ka=new Map,this.qa=$d.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rie(t,e,r=!0){const n=n2(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await ZF(n,e,r,!0),i}async function nie(t,e){const r=n2(t);await ZF(r,e,!0,!1)}async function ZF(t,e,r,n){const i=await lb(t.localStore,ls(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let c;return n&&(c=await H7(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&r2(t.remoteStore,i),c}async function H7(t,e,r,n,i){t.Ka=(m,y,b)=>(async function(_,w,N,k){let C=w.view.ma(N);C.ns&&(C=await QT(_.localStore,w.query,!1).then((({documents:E})=>w.view.ma(E,C))));const $=k&&k.targetChanges.get(w.targetId),I=k&&k.targetMismatches.get(w.targetId)!=null,L=w.view.applyChanges(C,_.isPrimaryClient,$,I);return eA(_,w.targetId,L.wa),L.snapshot})(t,m,y,b);const a=await QT(t.localStore,e,!0),s=new Zne(e,a.Ts),c=s.ma(a.documents),d=Qg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),h=s.applyChanges(c,t.isPrimaryClient,d);eA(t,r,h.wa);const p=new Jne(e,r,s);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function iie(t,e,r){const n=At(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter((s=>!Wx(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ih(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Rh(n.remoteStore,i.targetId),Ph(n,i.targetId)})).catch(bu)):(Ph(n,i.targetId),await Ih(n.localStore,i.targetId,!0))}async function aie(t,e){const r=At(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Rh(r.remoteStore,n.targetId))}async function sie(t,e,r){const n=X7(t);try{const i=await(function(s,c){const d=At(s),h=Pn.now(),p=c.reduce(((b,T)=>b.add(T.key)),dr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=as(),_=dr();return d.cs.getEntries(b,p).next((w=>{T=w,T.forEach(((N,k)=>{k.isValidDocument()||(_=_.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,T))).next((w=>{m=w;const N=[];for(const k of c){const C=kre(k,m.get(k.key).overlayedDocument);C!=null&&N.push(new Yl(k.key,C,LV(C.value.mapValue),Jn.exists(!0)))}return d.mutationQueue.addMutationBatch(b,h,N,c)})).next((w=>{y=w;const N=w.applyToLocalDocumentSet(m,_);return d.documentOverlayCache.saveOverlays(b,w.batchId,N)}))})).then((()=>({batchId:y.batchId,changes:YV(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,c,d){let h=s.Ba[s.currentUser.toKey()];h||(h=new wn(Zt)),h=h.insert(c,d),s.Ba[s.currentUser.toKey()]=h})(n,i.batchId,r),await _u(n,i.changes),await xf(n.remoteStore)}catch(i){const a=z7(i,"Failed to persist write");r.reject(a)}}async function JF(t,e){const r=At(t);try{const n=await Ene(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=r.Na.get(a);s&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Et(s.va):i.removedDocuments.size>0&&(Et(s.va),s.va=!1))})),await _u(r,n,e)}catch(n){await bu(n)}}function mI(t,e,r){const n=At(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((a,s)=>{const c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(s,c){const d=At(s);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)})),h&&F7(d)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oie(t,e,r){const n=At(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let s=new wn(ft.comparator);s=s.insert(a,jn.newNoDocument(a,Ct.min()));const c=dr().add(a),d=new Xg(Ct.min(),new Map,new wn(Zt),s,c);await JF(n,d),n.Oa=n.Oa.remove(a),n.Na.delete(e),W7(n)}else await Ih(n.localStore,e,!1).then((()=>Ph(n,e,r))).catch(bu)}async function lie(t,e){const r=At(t),n=e.batch.batchId;try{const i=await Ane(r.localStore,e);K7(r,n,null),G7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await _u(r,i)}catch(i){await bu(i)}}async function cie(t,e,r){const n=At(t);try{const i=await(function(s,c){const d=At(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Et(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);K7(n,e,r),G7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await _u(n,i)}catch(i){await bu(i)}}function G7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function K7(t,e,r){const n=At(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Ph(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||eq(t,n)}))}function eq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Rh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),W7(t))}function eA(t,e,r){for(const n of r)n instanceof QF?(t.La.addReference(n.key,e),uie(t,n)):n instanceof YF?(Xe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||eq(t,n.key)):wt()}function uie(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Xe("SyncEngine","New document in limbo: "+r),t.xa.add(n),W7(t))}function W7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ft(jr.fromString(e)),n=t.qa.next();t.Na.set(n,new eie(r)),t.Oa=t.Oa.insert(r,n),r2(t.remoteStore,new Nl(ls(Gg(r.path)),n,"TargetPurposeLimboResolution",Ba.oe))}}async function _u(t,e,r){const n=At(t),i=[],a=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=R7.Wi(d.targetId,h);a.push(m)}})))})),await Promise.all(s),n.Ca.d_(i),await(async function(d,h){const p=At(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ee.forEach(h,(y=>Ee.forEach(y.$i,(b=>p.persistence.referenceDelegate.addReference(m,y.targetId,b))).next((()=>Ee.forEach(y.Ui,(b=>p.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))))))}catch(m){if(!xu(m))throw m;Xe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const b=p.os.get(y),T=b.snapshotVersion,_=b.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,_)}}})(n.localStore,a))}async function die(t,e){const r=At(t);if(!r.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const n=await LF(r.localStore,e);r.currentUser=e,(function(a,s){a.ka.forEach((c=>{c.forEach((d=>{d.reject(new rt(Me.CANCELLED,s))}))})),a.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await _u(r,n.hs)}}function hie(t,e){const r=At(t),n=r.Na.get(e);if(n&&n.va)return dr().add(n.key);{let i=dr();const a=r.Ma.get(e);if(!a)return i;for(const s of a){const c=r.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}async function fie(t,e){const r=At(t),n=await QT(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&eA(r,e.targetId,i.wa),i}async function pie(t,e){const r=At(t);return zF(r.localStore,e).then((n=>_u(r,n)))}async function mie(t,e,r,n){const i=At(t),a=await(function(c,d){const h=At(c),p=At(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):Ee.resolve(null)))))})(i.localStore,e);a!==null?(r==="pending"?await xf(i.remoteStore):r==="acknowledged"||r==="rejected"?(K7(i,e,n||null),G7(i,e),(function(c,d){At(At(c).mutationQueue).On(d)})(i.localStore,e)):wt(),await _u(i,a)):Xe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function gie(t,e){const r=At(t);if(n2(r),X7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await gI(r,n.toArray());r.Qa=!0,await ZT(r.remoteStore,!0);for(const a of i)r2(r.remoteStore,a)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((a,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then((()=>(Ph(r,s),Ih(r.localStore,s,!0)))),Rh(r.remoteStore,s)})),await i,await gI(r,n),(function(s){const c=At(s);c.Na.forEach(((d,h)=>{Rh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new wn(ft.comparator)})(r),r.Qa=!1,await ZT(r.remoteStore,!1)}}async function gI(t,e,r){const n=At(t),i=[],a=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await lb(n.localStore,ls(d[0]));for(const h of d){const p=n.Fa.get(h),m=await fie(n,p);m.snapshot&&a.push(m.snapshot)}}else{const h=await UF(n.localStore,s);c=await lb(n.localStore,h),await H7(n,tq(h),s,!1,c.resumeToken)}i.push(c)}return n.Ca.d_(a),i}function tq(t){return HV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yie(t){return(function(r){return At(At(r).persistence).Qi()})(At(t).localStore)}async function vie(t,e,r,n){const i=At(t);if(i.Qa)return void Xe("SyncEngine","Ignoring unexpected query state notification.");const a=i.Ma.get(e);if(a&&a.length>0)switch(r){case"current":case"not-current":{const s=await zF(i.localStore,WV(a[0])),c=Xg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ri.EMPTY_BYTE_STRING);await _u(i,s,c);break}case"rejected":await Ih(i.localStore,e,!0),Ph(i,e,n);break;default:wt()}}async function bie(t,e,r){const n=n2(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Xe("SyncEngine","Adding an already active target "+i);continue}const a=await UF(n.localStore,i),s=await lb(n.localStore,a);await H7(n,tq(a),s.targetId,!1,s.resumeToken),r2(n.remoteStore,s)}for(const i of r)n.Ma.has(i)&&await Ih(n.localStore,i,!1).then((()=>{Rh(n.remoteStore,i),Ph(n,i)})).catch(bu)}}function n2(t){const e=At(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oie.bind(null,e),e.Ca.d_=Qne.bind(null,e.eventManager),e.Ca.$a=Yne.bind(null,e.eventManager),e}function X7(t){const e=At(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cie.bind(null,e),e}class Vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=e2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return DF(this.persistence,new PF,e.initialUser,this.serializer)}Ga(e){return new RF(Jx.Zr,this.serializer)}Wa(e){return new VF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vm.provider={build:()=>new Vm};class rq extends Vm{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await X7(this.Ja.syncEngine),await xf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return DF(this.persistence,new PF,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new one(n,e.asyncQueue,r)}Ha(e,r){const n=new zte(r,this.persistence);return new Ute(e.asyncQueue,n)}Ga(e){const r=MF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Ma.withCacheSize(this.cacheSizeBytes):Ma.DEFAULT;return new I7(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,FF(),Uv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new VF}}class xie extends rq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof j5&&(this.sharedClientState.syncEngine={no:mie.bind(null,r),ro:vie.bind(null,r),io:bie.bind(null,r),Qi:yie.bind(null,r),eo:pie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await gie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=FF();if(!j5.D(r))throw new rt(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=MF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new j5(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Fm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>mI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=die.bind(null,this.syncEngine),await ZT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Xne})()}createDatastore(e){const r=e2(e.databaseInfo.databaseId),n=(function(a){return new Ine(a)})(e.databaseInfo);return(function(a,s,c,d){return new Pne(a,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,s,c){return new Lne(n,i,a,s,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>mI(this.syncEngine,r,0)),(function(){return uI.D()?new uI:new Cne})())}createSyncEngine(e,r){return(function(i,a,s,c,d,h,p){const m=new tie(i,a,s,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const a=At(i);Xe("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Yg(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Fm.provider={build:()=>new Fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new rt(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,a){const s=At(i),c={documents:a.map((m=>zm(s.serializer,m)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,jr.emptyPath(),c,a.length),h=new Map;d.forEach((m=>{const y=$re(s.serializer,m);h.set(y.key.toString(),y)}));const p=[];return a.forEach((m=>{const y=h.get(m.toString());Et(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=ft.fromPath(n);this.mutations.push(new S7(i,this.precondition(i)))})),await(async function(n,i){const a=At(n),s={writes:i.map((c=>$m(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,jr.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw wt();r=Ct.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new rt(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ct.min())?Jn.exists(!1):Jn.updateTime(r):Jn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ct.min()))throw new rt(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(r)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e,r,n,i,a){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=a,this._u=n.maxAttempts,this.t_=new P7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new wie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!qg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!oF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ia.UNAUTHENTICATED,this.clientId=wV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async s=>{Xe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Xe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=z7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function k5(t,e){t.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await LF(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function yI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Tie(t);Xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>dI(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>dI(e.remoteStore,i))),t._onlineComponents=e}async function Tie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await k5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Me.FAILED_PRECONDITION||i.code===Me.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;Cm("Error using user provided cache. Falling back to memory cache: "+r),await k5(t,new Vm)}}else Xe("FirestoreClient","Using default OfflineComponentProvider"),await k5(t,new Vm);return t._offlineComponents}async function Y7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe("FirestoreClient","Using user provided OnlineComponentProvider"),await yI(t,t._uninitializedComponentsProvider._online)):(Xe("FirestoreClient","Using default OnlineComponentProvider"),await yI(t,new Fm))),t._onlineComponents}function Aie(t){return Y7(t).then((e=>e.syncEngine))}function Eie(t){return Y7(t).then((e=>e.datastore))}async function hb(t){const e=await Y7(t),r=e.eventManager;return r.onListen=rie.bind(null,e.syncEngine),r.onUnlisten=iie.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=nie.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=aie.bind(null,e.syncEngine),r}function Nie(t,e,r={}){const n=new ao;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,h){const p=new Q7({next:y=>{p.Za(),s.enqueueAndForget((()=>V7(a,m)));const b=y.docs.has(c);!b&&y.fromCache?h.reject(new rt(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&d&&d.source==="server"?h.reject(new rt(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new q7(Gg(c.path),p,{includeMetadataChanges:!0,_a:!0});return $7(a,m)})(await hb(t),t.asyncQueue,e,r,n))),n.promise}function jie(t,e,r={}){const n=new ao;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,h){const p=new Q7({next:y=>{p.Za(),s.enqueueAndForget((()=>V7(a,m))),y.fromCache&&d.source==="server"?h.reject(new rt(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new q7(c,p,{includeMetadataChanges:!0,_a:!0});return $7(a,m)})(await hb(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iq(t,e,r){if(!r)throw new rt(Me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cie(t,e,r,n){if(e===!0&&n===!0)throw new rt(Me.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function bI(t){if(!ft.isDocumentKey(t))throw new rt(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xI(t){if(ft.isDocumentKey(t))throw new rt(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function $a(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new rt(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=i2(t);throw new rt(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function kie(t,e){if(e<=0)throw new rt(Me.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new rt(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new rt(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new rt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new rt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new rt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Z7{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new rt(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new rt(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wI(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Cte;switch(n.type){case"firstParty":return new Ite(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new rt(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=vI.get(r);n&&(Xe("ComponentProvider","Removing Datastore"),vI.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Zl(this.firestore,e,this._query)}}class Xi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ou(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xi(this.firestore,e,this._key)}}class ou extends Zl{constructor(e,r,n){super(e,r,Gg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xi(this.firestore,null,new ft(e))}withConverter(e){return new ou(this.firestore,e,this._path)}}function ar(t,e,...r){if(t=sn(t),iq("collection","path",e),t instanceof Z7){const n=jr.fromString(e,...r);return xI(n),new ou(t,null,n)}{if(!(t instanceof Xi||t instanceof ou))throw new rt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(jr.fromString(e,...r));return xI(n),new ou(t.firestore,null,n)}}function ht(t,e,...r){if(t=sn(t),arguments.length===1&&(e=wV.newId()),iq("doc","path",e),t instanceof Z7){const n=jr.fromString(e,...r);return bI(n),new Xi(t,null,new ft(n))}{if(!(t instanceof Xi||t instanceof ou))throw new rt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(jr.fromString(e,...r));return bI(n),new Xi(t.firestore,t instanceof ou?t.converter:null,new ft(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new P7(this,"async_queue_retry"),this.Vu=()=>{const n=Uv();n&&Xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Uv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Uv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new ao;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xu(e))throw e;Xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw Zn("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=U7.createAndSchedule(this,e,r,n,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function SI(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Po extends Z7{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new _I,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _I(e),this._firestoreClient=void 0,await e}}}function Oie(t,e,r){r||(r="(default)");const n=zg(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),a=n.getOptions(r);if(Th(a,e))return i;throw new rt(Me.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new rt(Me.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new rt(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function Zg(t){if(t._terminated)throw new rt(Me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Iie(t),t._firestoreClient}function Iie(t){var e,r,n;const i=t._freezeSettings(),a=(function(c,d,h,p){return new ore(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,nq(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Sie(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vd(ri.fromBase64String(e))}catch(r){throw new rt(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Vd(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new rt(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new rt(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new rt(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rie=/^__.*__$/;class Mie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Yl(e,this.data,this.fieldMask,r,this.fieldTransforms):new bf(e,this.data,r,this.fieldTransforms)}}class aq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Yl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function sq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class s2{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new s2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fb(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sq(this.Cu)&&Rie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Pie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||e2(e)}Qu(e,r,n,i=!1){return new s2({Cu:e,methodName:r,qu:n,path:Mn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e1(t){const e=t._freezeSettings(),r=e2(t._databaseId);return new Pie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function tE(t,e,r,n,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);nE("Data must be an object, but it was:",s,n);const c=cq(n,s);let d,h;if(a.merge)d=new Ua(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const m of a.mergeFields){const y=tA(e,m,r);if(!s.contains(y))throw new rt(Me.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);dq(p,y)||p.push(y)}d=new Ua(p),h=s.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=s.fieldTransforms;return new Mie(new Wi(c),d,h)}class o2 extends a2{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o2}}function Die(t,e,r){return new s2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rE extends a2{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Die(this,e,!0),n=this.Ku.map((a=>_f(a,r))),i=new Bd(n);return new iF(e.path,i)}isEqual(e){return e instanceof rE&&Th(this.Ku,e.Ku)}}function oq(t,e,r,n){const i=t.Qu(1,e,r);nE("Data must be an object, but it was:",i,n);const a=[],s=Wi.empty();t0(n,((d,h)=>{const p=iE(e,d,r);h=sn(h);const m=i.Nu(p);if(h instanceof o2)a.push(p);else{const y=_f(h,m);y!=null&&(a.push(p),s.set(p,y))}}));const c=new Ua(a);return new aq(s,c,i.fieldTransforms)}function lq(t,e,r,n,i,a){const s=t.Qu(1,e,r),c=[tA(e,n,r)],d=[i];if(a.length%2!=0)throw new rt(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)c.push(tA(e,a[y])),d.push(a[y+1]);const h=[],p=Wi.empty();for(let y=c.length-1;y>=0;--y)if(!dq(h,c[y])){const b=c[y];let T=d[y];T=sn(T);const _=s.Nu(b);if(T instanceof o2)h.push(b);else{const w=_f(T,_);w!=null&&(h.push(b),p.set(b,w))}}const m=new Ua(h);return new aq(p,m,s.fieldTransforms)}function Lie(t,e,r,n=!1){return _f(r,t.Qu(n?4:3,e))}function _f(t,e){if(uq(t=sn(t)))return nE("Unsupported field value:",e,t),cq(t,e);if(t instanceof a2)return(function(n,i){if(!sq(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const a=[];let s=0;for(const c of n){let d=_f(c,i.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),s++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=sn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Tre(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Pn.fromDate(n);return{timestampValue:Oh(i.serializer,a)}}if(n instanceof Pn){const a=new Pn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Oh(i.serializer,a)}}if(n instanceof J7)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vd)return{bytesValue:dF(i.serializer,n._byteString)};if(n instanceof Xi){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:j7(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof eE)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return _7(c.serializer,d)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${i2(n)}`)})(t,e)}function cq(t,e){const r={};return RV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):t0(t,((n,i)=>{const a=_f(i,e.Mu(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function uq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pn||t instanceof J7||t instanceof Vd||t instanceof Xi||t instanceof a2||t instanceof eE)}function nE(t,e,r){if(!uq(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=i2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function tA(t,e,r){if((e=sn(e))instanceof Jg)return e._internalPath;if(typeof e=="string")return iE(t,e);throw fb("Field path arguments must be of type string or ",t,!1,void 0,r)}const Bie=new RegExp("[~\\*/\\[\\]]");function iE(t,e,r){if(e.search(Bie)>=0)throw fb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Jg(...e.split("."))._internalPath}catch{throw fb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function fb(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||s)&&(d+=" (found",a&&(d+=` in field ${n}`),s&&(d+=` in document ${i}`),d+=")"),new rt(Me.INVALID_ARGUMENT,c+t+d)}function dq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(l2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Uie extends pb{data(){return super.data()}}function l2(t,e){return typeof e=="string"?iE(t,e):e instanceof Jg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new rt(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class aE{}class sE extends aE{}function On(t,e,...r){let n=[];e instanceof aE&&n.push(e),n=n.concat(r),(function(a){const s=a.filter((d=>d instanceof oE)).length,c=a.filter((d=>d instanceof c2)).length;if(s>1||s>0&&c>0)throw new rt(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class c2 extends sE{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new c2(e,r,n)}_apply(e){const r=this._parse(e);return fq(e._query,r),new Zl(e.firestore,e.converter,VT(e._query,r))}_parse(e){const r=e1(e.firestore);return(function(a,s,c,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new rt(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){AI(m,p);const b=[];for(const T of m)b.push(TI(d,a,T));y={arrayValue:{values:b}}}else y=TI(d,a,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||AI(m,p),y=Lie(c,s,m,p==="in"||p==="not-in");return vr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Un(t,e,r){const n=e,i=l2("where",t);return c2._create(i,n,r)}class oE extends aE{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new oE(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Hr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let s=i;const c=a.getFlattenedFilters();for(const d of c)fq(s,d),s=VT(s,d)})(e._query,r),new Zl(e.firestore,e.converter,VT(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lE extends sE{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new lE(e,r)}_apply(e){const r=(function(i,a,s){if(i.startAt!==null)throw new rt(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new rt(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lm(a,s)})(e._query,this._field,this._direction);return new Zl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new vf(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Ip(t,e="asc"){const r=e,n=l2("orderBy",t);return lE._create(n,r)}class cE extends sE{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new cE(e,r,n)}_apply(e){return new Zl(e.firestore,e.converter,ib(e._query,this._limit,this._limitType))}}function td(t){return kie("limit",t),cE._create("limit",t,"F")}function TI(t,e,r){if(typeof(r=sn(r))=="string"){if(r==="")throw new rt(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GV(e)&&r.indexOf("/")!==-1)throw new rt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(jr.fromString(r));if(!ft.isDocumentKey(n))throw new rt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Pm(t,new ft(n))}if(r instanceof Xi)return Pm(t,r._key);throw new rt(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i2(r)}.`)}function AI(t,e){if(!Array.isArray(t)||t.length===0)throw new rt(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fq(t,e){const r=(function(i,a){for(const s of i)for(const c of s.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new rt(Me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new rt(Me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class pq{convertValue(e,r="none"){switch(Dd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return t0(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((s=>Nn(s.doubleValue)));return new eE(a)}convertGeoPoint(e){return new J7(Nn(e.latitude),Nn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=b7(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Rm(e));default:return null}}convertTimestamp(e){const r=$l(e);return new Pn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=jr.fromString(e);Et(wF(n));const i=new Pd(n.get(1),n.get(3)),a=new ft(n.popFirst(5));return i.isEqual(r)||Zn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class zie extends pq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dE extends pb{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(l2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class zv extends dE{data(e={}){return super.data(e)}}class mq{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new oh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new zv(this._firestore,this._userDataWriter,n.key,n,new oh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new rt(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((c=>{const d=new zv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new oh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new zv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new oh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return c.type!==0&&(h=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),p=s.indexOf(c.doc.key)),{type:$ie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function $ie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){t=$a(t,Xi);const e=$a(t.firestore,Po);return Nie(Zg(e),t._key).then((r=>gq(e,t,r)))}class u2 extends pq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}function Rp(t){t=$a(t,Zl);const e=$a(t.firestore,Po),r=Zg(e),n=new u2(e);return hq(t._query),jie(r,t._query).then((i=>new mq(e,n,t,i)))}function Fi(t,e,r){t=$a(t,Xi);const n=$a(t.firestore,Po),i=uE(t.converter,e,r);return d2(n,[tE(e1(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Jn.none())])}function Mr(t,e,r,...n){t=$a(t,Xi);const i=$a(t.firestore,Po),a=e1(i);let s;return s=typeof(e=sn(e))=="string"||e instanceof Jg?lq(a,"updateDoc",t._key,e,r,n):oq(a,"updateDoc",t._key,e),d2(i,[s.toMutation(t._key,Jn.exists(!0))])}function pa(t){return d2($a(t.firestore,Po),[new Wg(t._key,Jn.none())])}function X0(t,e){const r=$a(t.firestore,Po),n=ht(t),i=uE(t.converter,e);return d2(r,[tE(e1(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Jn.exists(!1))]).then((()=>n))}function $n(t,...e){var r,n,i;t=sn(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||SI(e[s])||(a=e[s],s++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(SI(e[s])){const m=e[s];e[s]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[s+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[s+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let d,h,p;if(t instanceof Xi)h=$a(t.firestore,Po),p=Gg(t._key.path),d={next:m=>{e[s]&&e[s](gq(h,t,m))},error:e[s+1],complete:e[s+2]};else{const m=$a(t,Zl);h=$a(m.firestore,Po),p=m._query;const y=new u2(h);d={next:b=>{e[s]&&e[s](new mq(h,y,m,b))},error:e[s+1],complete:e[s+2]},hq(t._query)}return(function(y,b,T,_){const w=new Q7(_),N=new q7(b,w,T);return y.asyncQueue.enqueueAndForget((async()=>$7(await hb(y),N))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>V7(await hb(y),N)))}})(Zg(h),p,c,d)}function d2(t,e){return(function(n,i){const a=new ao;return n.asyncQueue.enqueueAndForget((async()=>sie(await Aie(n),i,a))),a.promise})(Zg(t),e)}function gq(t,e,r){const n=r.docs.get(e._key),i=new u2(t);return new dE(t,i,e._key,n,new oh(r.hasPendingWrites,r.fromCache),e.converter)}class Vie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Gie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Fie(t){return new Vie(t)}class qie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fm.provider,this._offlineComponentProvider={build:r=>new rq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Hie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fm.provider,this._offlineComponentProvider={build:r=>new xie(r,e==null?void 0:e.cacheSizeBytes)}}}function Gie(t){return new qie(void 0)}function Kie(){return new Hie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wie={maxAttempts:5};function Mp(t,e){if((t=sn(t)).firestore!==e)throw new rt(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=e1(r)}get(r){const n=Mp(r,this._firestore),i=new zie(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return wt();const s=a[0];if(s.isFoundDocument())return new pb(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new pb(this._firestore,i,n._key,null,n.converter);throw wt()}))}set(r,n,i){const a=Mp(r,this._firestore),s=uE(a.converter,n,i),c=tE(this._dataReader,"Transaction.set",a._key,s,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(r,n,i,...a){const s=Mp(r,this._firestore);let c;return c=typeof(n=sn(n))=="string"||n instanceof Jg?lq(this._dataReader,"Transaction.update",s._key,n,i,a):oq(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(r){const n=Mp(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Mp(e,this._firestore),n=new u2(this._firestore);return super.get(e).then((i=>new dE(this._firestore,n,r._key,i._document,new oh(!1,!1),r.converter)))}}function O5(t,e,r){t=$a(t,Po);const n=Object.assign(Object.assign({},Wie),r);return(function(a){if(a.maxAttempts<1)throw new rt(Me.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,s,c){const d=new ao;return a.asyncQueue.enqueueAndForget((async()=>{const h=await Eie(a);new _ie(a.asyncQueue,h,c,s,d).au()})),d.promise})(Zg(t),(i=>e(new Xie(t,i))),n)}function Qie(...t){return new rE("arrayUnion",t)}(function(e,r=!0){(function(i){yf=i})(e0),uu(new Bl("firestore",((n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),c=new Po(new kte(n.getProvider("auth-internal")),new Mte(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new rt(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pd(h.options.projectId,p)})(s,i),s);return a=Object.assign({useFetchStreams:r},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),ks(yO,"4.7.3",e),ks(yO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq="firebasestorage.googleapis.com",vq="storageBucket",Yie=120*1e3,Zie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends lo{constructor(e,r,n=0){super(I5(e),`Firebase Storage: ${r} (${I5(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return I5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qn||(qn={}));function I5(t){return"storage/"+t}function hE(){const t="An unknown error occurred, please check the error payload for server response.";return new Hn(qn.UNKNOWN,t)}function Jie(t){return new Hn(qn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function eae(t){return new Hn(qn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function tae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Hn(qn.UNAUTHENTICATED,t)}function rae(){return new Hn(qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nae(t){return new Hn(qn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iae(){return new Hn(qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aae(){return new Hn(qn.CANCELED,"User canceled the upload/download.")}function sae(t){return new Hn(qn.INVALID_URL,"Invalid URL '"+t+"'.")}function oae(t){return new Hn(qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lae(){return new Hn(qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vq+"' property when initializing the app?")}function cae(){return new Hn(qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uae(){return new Hn(qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dae(t){return new Hn(qn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rA(t){return new Hn(qn.INVALID_ARGUMENT,t)}function bq(){return new Hn(qn.APP_DELETED,"The Firebase app was deleted.")}function hae(t){return new Hn(qn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dm(t,e){return new Hn(qn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Pp(t){throw new Hn(qn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ss.makeFromUrl(e,r)}catch{return new ss(e,"")}if(n.path==="")return n;throw oae(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+i+s,"i"),d={bucket:1,path:3};function h($){$.path_=decodeURIComponent($.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${m}/${p}/b/${i}/o${y}`,"i"),T={bucket:1,path:3},_=r===yq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",N=new RegExp(`^https?://${_}/${i}/${w}`,"i"),C=[{regex:c,indices:d,postModify:a},{regex:b,indices:T,postModify:h},{regex:N,indices:{bucket:1,path:2},postModify:h}];for(let $=0;$<C.length;$++){const I=C[$],L=I.regex.exec(e);if(L){const E=L[I.indices.bucket];let A=L[I.indices.path];A||(A=""),n=new ss(E,A),I.postModify(n);break}}if(n==null)throw sae(e);return n}}class fae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(t,e,r){let n=1,i=null,a=null,s=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){i=setTimeout(()=>{i=null,t(b,d())},w)}function y(){a&&clearTimeout(a)}function b(w,...N){if(h){y();return}if(w){y(),p.call(null,w,...N);return}if(d()||s){y(),p.call(null,w,...N);return}n<64&&(n*=2);let C;c===1?(c=2,C=0):C=(n+Math.random())*1e3,m(C)}let T=!1;function _(w){T||(T=!0,y(),!h&&(i!==null?(w||(c=2),clearTimeout(i),m(0)):w||(c=1)))}return m(0),a=setTimeout(()=>{s=!0,_(!0)},r),_}function mae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gae(t){return t!==void 0}function yae(t){return typeof t=="object"&&!Array.isArray(t)}function fE(t){return typeof t=="string"||t instanceof String}function EI(t){return pE()&&t instanceof Blob}function pE(){return typeof Blob<"u"}function NI(t,e,r,n){if(n<e)throw rA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw rA(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function xq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var jd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(jd||(jd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vae(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e,r,n,i,a,s,c,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,T)=>{this.resolve_=b,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Qy(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const c=a.getErrorCode()===jd.NO_ERROR,d=a.getStatus();if(!c||vae(d,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===jd.ABORT;n(!1,new Qy(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Qy(h,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());gae(d)?a(d):a()}catch(d){s(d)}else if(c!==null){const d=hE();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(i.canceled){const d=this.appDelete_?bq():aae();s(d)}else{const d=iae();s(d)}};this.canceled_?r(!1,new Qy(!1,null,!0)):this.backoffId_=pae(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qy{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function xae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _ae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Tae(t,e,r,n,i,a,s=!0){const c=xq(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return _ae(h,e),xae(h,r),wae(h,a),Sae(h,n),new bae(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Eae(...t){const e=Aae();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(pE())return new Blob(t);throw new Hn(qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Nae(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jae(t){if(typeof atob>"u")throw dae("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class R5{constructor(e,r){this.data=e,this.contentType=r||null}}function Cae(t,e){switch(t){case To.RAW:return new R5(wq(e));case To.BASE64:case To.BASE64URL:return new R5(_q(t,e));case To.DATA_URL:return new R5(Oae(e),Iae(e))}throw hE()}function wq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function kae(t){let e;try{e=decodeURIComponent(t)}catch{throw dm(To.DATA_URL,"Malformed data URL.")}return wq(e)}function _q(t,e){switch(t){case To.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw dm(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case To.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw dm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=jae(e)}catch(i){throw i.message.includes("polyfill")?i:dm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class Sq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw dm(To.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Rae(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Oae(t){const e=new Sq(t);return e.base64?_q(To.BASE64,e.rest):kae(e.rest)}function Iae(t){return new Sq(t).contentType}function Rae(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,r){let n=0,i="";EI(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(EI(this.data_)){const n=this.data_,i=Nae(n,e,r);return i===null?null:new Kc(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Kc(n,!0)}}static getBlob(...e){if(pE()){const r=e.map(n=>n instanceof Kc?n.data_:n);return new Kc(Eae.apply(null,r))}else{const r=e.map(s=>fE(s)?Cae(To.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let c=0;c<s.length;c++)i[a++]=s[c]}),new Kc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(t){let e;try{e=JSON.parse(t)}catch{return null}return yae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mae(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Pae(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Aq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dae(t,e){return e}class da{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||Dae}}let Yy=null;function Lae(t){return!fE(t)||t.length<2?t:Aq(t)}function Eq(){if(Yy)return Yy;const t=[];t.push(new da("bucket")),t.push(new da("generation")),t.push(new da("metageneration")),t.push(new da("name","fullPath",!0));function e(a,s){return Lae(s)}const r=new da("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new da("size");return i.xform=n,t.push(i),t.push(new da("timeCreated")),t.push(new da("updated")),t.push(new da("md5Hash",null,!0)),t.push(new da("cacheControl",null,!0)),t.push(new da("contentDisposition",null,!0)),t.push(new da("contentEncoding",null,!0)),t.push(new da("contentLanguage",null,!0)),t.push(new da("contentType",null,!0)),t.push(new da("metadata","customMetadata",!0)),Yy=t,Yy}function Bae(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new ss(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function Uae(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return Bae(n,t),n}function Nq(t,e,r){const n=Tq(e);return n===null?null:Uae(t,n,r)}function zae(t,e,r,n){const i=Tq(e);if(i===null||!fE(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+s(p)+"/o/"+s(m),b=h2(y,r,n),T=xq({alt:"media",token:h});return b+T})[0]}function $ae(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class mE{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t){if(!t)throw hE()}function Vae(t,e){function r(n,i){const a=Nq(t,i,e);return jq(a!==null),a}return r}function Fae(t,e){function r(n,i){const a=Nq(t,i,e);return jq(a!==null),zae(a,i,t.host,t._protocol)}return r}function Cq(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=rae():i=tae():r.getStatus()===402?i=eae(t.bucket):r.getStatus()===403?i=nae(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function kq(t){const e=Cq(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=Jie(t.path)),a.serverResponse=i.serverResponse,a}return r}function qae(t,e,r){const n=e.fullServerUrl(),i=h2(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,c=new mE(i,a,Fae(t,r),s);return c.errorHandler=kq(e),c}function Hae(t,e){const r=e.fullServerUrl(),n=h2(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function s(d,h){}const c=new mE(n,i,s,a);return c.successCodes=[200,204],c.errorHandler=kq(e),c}function Gae(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Kae(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Gae(null,e)),n}function Wae(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let $=0;$<2;$++)C=C+Math.random().toString().slice(2);return C}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const h=Kae(e,n,i),p=$ae(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",b=Kc.getBlob(m,n,y);if(b===null)throw cae();const T={name:h.fullPath},_=h2(a,t.host,t._protocol),w="POST",N=t.maxUploadRetryTime,k=new mE(_,w,Vae(t,r),N);return k.urlParams=T,k.headers=s,k.body=b.uploadData(),k.errorHandler=Cq(e),k}class Xae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Pp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Qae extends Xae{initXhr(){this.xhr_.responseType="text"}}function gE(){return new Qae}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,r){this._service=e,r instanceof ss?this._location=r:this._location=ss.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Fd(e,r)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Aq(this._location.path)}get storage(){return this._service}get parent(){const e=Mae(this._location.path);if(e===null)return null;const r=new ss(this._location.bucket,e);return new Fd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw hae(e)}}function Yae(t,e,r){t._throwIfRoot("uploadBytes");const n=Wae(t.storage,t._location,Eq(),new Kc(e,!0),r);return t.storage.makeRequestWithTokens(n,gE).then(i=>({metadata:i,ref:t}))}function Zae(t){t._throwIfRoot("getDownloadURL");const e=qae(t.storage,t._location,Eq());return t.storage.makeRequestWithTokens(e,gE).then(r=>{if(r===null)throw uae();return r})}function Jae(t){t._throwIfRoot("deleteObject");const e=Hae(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gE)}function ese(t,e){const r=Pae(t._location.path,e),n=new ss(t._location.bucket,r);return new Fd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(t){return/^[A-Za-z]+:\/\//.test(t)}function rse(t,e){return new Fd(t,e)}function Oq(t,e){if(t instanceof yE){const r=t;if(r._bucket==null)throw lae();const n=new Fd(r,r._bucket);return e!=null?Oq(n,e):n}else return e!==void 0?ese(t,e):t}function nse(t,e){if(e&&tse(e)){if(t instanceof yE)return rse(t,e);throw rA("To use ref(service, url), the first argument must be a Storage instance.")}else return Oq(t,e)}function jI(t,e){const r=e==null?void 0:e[vq];return r==null?null:ss.makeFromBucketSpec(r,t)}function ise(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:aZ(i,t.app.options.projectId))}class yE{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=yq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yie,this._maxUploadRetryTime=Zie,this._requests=new Set,i!=null?this._bucket=ss.makeFromBucketSpec(i,this._host):this._bucket=jI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ss.makeFromBucketSpec(this._url,e):this._bucket=jI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fd(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new fae(bq());{const s=Tae(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const CI="@firebase/storage",kI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq="storage";function nA(t,e,r){return t=sn(t),Yae(t,e,r)}function mb(t){return t=sn(t),Zae(t)}function ase(t){return t=sn(t),Jae(t)}function hm(t,e){return t=sn(t),nse(t,e)}function sse(t=r7(),e){t=sn(t);const n=zg(t,Iq).getImmediate({identifier:e}),i=N$("storage");return i&&ose(n,...i),n}function ose(t,e,r,n={}){ise(t,e,r,n)}function lse(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new yE(r,n,i,e,e0)}function cse(){uu(new Bl(Iq,lse,"PUBLIC").setMultipleInstances(!0)),ks(CI,kI,""),ks(CI,kI,"esm2017")}cse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const use="type.googleapis.com/google.protobuf.Int64Value",dse="type.googleapis.com/google.protobuf.UInt64Value";function Rq(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function iA(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>iA(e));if(typeof t=="function"||typeof t=="object")return Rq(t,e=>iA(e));throw new Error("Data cannot be encoded in JSON: "+t)}function gb(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case use:case dse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>gb(e)):typeof t=="function"||typeof t=="object"?Rq(t,e=>gb(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gh extends lo{constructor(e,r,n){super(`${vE}/${e}`,r||""),this.details=n}}function hse(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fse(t,e){let r=hse(t),n=r,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!OI[s])return new gh("internal","internal");r=OI[s],n=s}const c=a.message;typeof c=="string"&&(n=c),i=a.details,i!==void 0&&(i=gb(i))}}catch{}return r==="ok"?null:new gh(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="us-central1";function mse(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new gh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class gse{constructor(e,r,n,i,a=aA,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new pse(r,n,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=aA}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function yse(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function vse(t,e,r){return(n=>xse(t,e,n,{}))}async function bse(t,e,r,n){r["Content-Type"]="application/json";let i;try{i=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function xse(t,e,r,n){const i=t._url(e);return wse(t,i,r,n)}async function wse(t,e,r,n){r=iA(r);const i={data:r},a={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(a.Authorization="Bearer "+s.authToken),s.messagingToken&&(a["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=mse(c),h=await Promise.race([bse(e,i,a,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new gh("cancelled","Firebase Functions instance was deleted.");const p=fse(h.status,h.json);if(p)throw p;if(!h.json)throw new gh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new gh("internal","Response is missing data field.");return{data:gb(m)}}const II="@firebase/functions",RI="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _se="auth-internal",Sse="app-check-internal",Tse="messaging-internal";function Ase(t,e){const r=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),s=n.getProvider(_se),c=n.getProvider(Tse),d=n.getProvider(Sse);return new gse(a,s,c,d,i,t)};uu(new Bl(vE,r,"PUBLIC").setMultipleInstances(!0)),ks(II,RI,e),ks(II,RI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ese(t=r7(),e=aA){const n=zg(sn(t),vE).getImmediate({identifier:e}),i=N$("functions");return i&&Nse(n,...i),n}function Nse(t,e,r){yse(sn(t),e,r)}function Gr(t,e,r){return vse(sn(t),e)}Ase(fetch.bind(self));const Mq={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},jse=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of jse)if(!Mq[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const f2=M$(Mq),sA=pV(f2),Cse=new wl,Ue=Oie(f2,{localCache:Fie({tabManager:Kie()})}),fm=sse(f2),Kr=Ese(f2),kse=Gr(Kr,"awardXP"),Ose=Gr(Kr,"acceptQuest"),Ise=Gr(Kr,"deployMission"),Rse=Gr(Kr,"resolveQuest"),Mse=Gr(Kr,"equipItem"),Pse=Gr(Kr,"unequipItem"),Dse=Gr(Kr,"disenchantItem"),Lse=Gr(Kr,"craftItem"),Bse=Gr(Kr,"adminUpdateInventory"),Use=Gr(Kr,"adminUpdateEquipped"),zse=Gr(Kr,"submitEngagement"),$se=Gr(Kr,"sendClassMessage");Gr(Kr,"uploadQuestionBank");const Pq=Gr(Kr,"awardQuestionXP"),Vse=Gr(Kr,"updateStreak"),Fse=Gr(Kr,"claimDailyLogin"),qse=Gr(Kr,"spinFortuneWheel"),Hse=Gr(Kr,"unlockSkill"),Gse=Gr(Kr,"addSocket"),Kse=Gr(Kr,"socketGem"),Wse=Gr(Kr,"dealBossDamage"),Xse=Gr(Kr,"answerBossQuiz"),Qse=Gr(Kr,"createParty"),Yse=Gr(Kr,"joinParty"),Zse=Gr(Kr,"completeTutoring"),Jse=Gr(Kr,"claimKnowledgeLoot"),eoe=Gr(Kr,"purchaseCosmetic"),toe=Gr(Kr,"claimDailyChallenge"),roe=Gr(Kr,"dismissAlert"),yb=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),ud={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ioe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...c},d)=>M.createElement("svg",{ref:d,...ioe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Dq("lucide",i),...c},[...s.map(([h,p])=>M.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(t,e)=>{const r=M.forwardRef(({className:n,...i},a)=>M.createElement(aoe,{ref:a,iconNode:e,className:Dq(`lucide-${noe(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=Fe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=Fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=Fe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=Fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=Fe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=Fe("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=Fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=Fe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Fe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Fe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=Fe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=Fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=Fe("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=Fe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=Fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=Fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Fe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=Fe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=Fe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=Fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=Fe("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Fe("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=Fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=Fe("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=Fe("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=Fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=Fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Fe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=Fe("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Fe("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=Fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=Fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=Fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Fe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=Fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=Fe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=Fe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=Fe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=Fe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=Fe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=Fe("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=Fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=Fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=Fe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=Fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=Fe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=Fe("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=Fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=Fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Fe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=Fe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=Fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=Fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Fe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=Fe("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=Fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=Fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=Fe("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=Fe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=Fe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=Fe("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=Fe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=Fe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=Fe("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=Fe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=Fe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Fe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=Fe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=Fe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=Fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=Fe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=Fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=Fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=Fe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Fe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Fe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=Fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Fe("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Fe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=Fe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=Fe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=Fe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=Fe("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=Fe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=Fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=Fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Fe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=Fe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=Fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=Fe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=Fe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=Fe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=Fe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Yoe="kellporter2@paps.net",Xq="Mr. Porter",Zoe=[{name:"Dashboard",icon:l.jsx(joe,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:l.jsx(m2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:l.jsx(mu,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:l.jsx(Do,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:l.jsx(SE,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:l.jsx(vb,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:l.jsx(Do,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:l.jsx(pu,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:l.jsx(Soe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:l.jsx(yoe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:l.jsx(pu,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:l.jsx(Lh,{className:"w-5 h-5"}),role:"STUDENT"}],qI=new Set,Ws=(t,e,r)=>qI.has(t)?()=>{}:$n(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&qI.add(t)}),Be={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Ws("xp_events",ar(Ue,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Fi(ht(Ue,"xp_events",t.id),t)},deleteXPEvent:async t=>{await pa(ht(Ue,"xp_events",t))},subscribeToQuests:t=>Ws("quests",ar(Ue,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Fi(ht(Ue,"quests",t.id),t)},deleteQuest:async t=>{await pa(ht(Ue,"quests",t))},acceptQuest:async(t,e)=>{await Ose({questId:e})},deployMission:async(t,e)=>{await Ise({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Rse({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Be.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Mse({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Pse({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Dse({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Lse({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Bse({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await Use({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ht(Ue,"users",t);r?await Mr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await Mr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const i=new Date(t.mutedUntil);if(i>new Date)throw new Error(`You are muted until ${i.toLocaleTimeString()}.`)}await $se({content:e,channelId:r,classType:n})}catch(i){throw console.error("Error sending message:",i),i}},toggleReaction:async(t,e,r)=>{const n=ht(Ue,"class_messages",t);await O5(Ue,async i=>{const a=await i.get(n);if(!a.exists())return;const c={...a.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),i.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ht(Ue,"class_messages",t);await O5(Ue,async n=>{const i=await n.get(r);if(!i.exists())return;const s=[...i.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=ht(Ue,"class_messages",t);await Mr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await pa(ht(Ue,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=On(ar(Ue,"class_messages"),Un("isFlagged","==",!0),td(50));return $n(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ht(Ue,"class_messages",t);await Mr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Be.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await Mr(ht(Ue,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},subscribeToChannelMessages:(t,e)=>{const r=On(ar(Ue,"class_messages"),Un("channelId","==",t),td(100));return $n(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(a.timestamp).getTime()-new Date(s.timestamp).getTime()),e(i)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToAllConversations:t=>{const e=On(ar(Ue,"conversations"),Ip("lastMessageAt","desc"));return $n(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=On(ar(Ue,`conversations/${t}/messages`),Ip("timestamp","asc"));return $n(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===ra.ADMIN?Xq:e.name,content:r,timestamp:new Date().toISOString()};await X0(ar(Ue,`conversations/${t}/messages`),n),await Mr(ht(Ue,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await Mr(ht(Ue,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=On(ar(Ue,"chat_flags"),Un("isResolved","==",!1));return $n(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await Mr(ht(Ue,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=On(ar(Ue,"chat_flags"),Un("messageId","==",t),Un("isResolved","==",!1)),n=(await Rp(e)).docs.map(i=>Mr(i.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=On(ar(Ue,"evidence"),Un("studentId","==",t),Un("weekId","==",e));return $n(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));r(a)},i=>console.error("Evidence subscription error:",i))},uploadEvidence:async t=>{await Fi(ht(Ue,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const i=hm(fm,n.imageUrl);return ase(i).catch(a=>console.warn("File missing:",a))});await Promise.all(e);const r=t.map(n=>pa(ht(Ue,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Fi(ht(Ue,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ht(Ue,"users",t);await Mr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await Mr(ht(Ue,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await Mr(ht(Ue,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=ar(Ue,"users");return $n(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,...a}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=ar(Ue,"assignments");return $n(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,title:a.title,description:a.description,classType:a.classType,status:a.status,unit:a.unit||"Unassigned Unit",category:a.category||"Supplemental",htmlContent:a.htmlContent,contentUrl:a.contentUrl,resources:a.resources||[],publicComments:(a.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:a.dueDate}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=On(ar(Ue,"submissions"),Ip("submittedAt","desc"),td(200));return $n(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,userId:a.userId,userName:a.userName,assignmentId:a.assignmentId,assignmentTitle:a.assignmentTitle,metrics:a.metrics||yb(),submittedAt:a.submittedAt,status:a.status,score:a.score,hasUnreadAdmin:a.hasUnreadAdmin||!1,hasUnreadStudent:a.hasUnreadStudent||!1,isPinned:a.isPinned||!1,isArchived:a.isArchived||!1,privateComments:(a.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=On(ar(Ue,"submissions"),Un("userId","==",t),td(50));return $n(r,n=>{const i=n.docs.map(a=>{const s=a.data();return{id:a.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||yb(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((a,s)=>new Date(s.submittedAt||"").getTime()-new Date(a.submittedAt||"").getTime());e(i)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=ar(Ue,"allowed_emails");return $n(e,r=>{const n=r.docs.map(i=>({email:i.id,classType:i.data().classType,classTypes:i.data().classTypes||[i.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=ar(Ue,"class_configs");return $n(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null};t.id?await Fi(ht(Ue,"assignments",t.id),e,{merge:!0}):await X0(ar(Ue,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await Mr(ht(Ue,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await pa(ht(Ue,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ht(Ue,"allowed_emails",t),n=await Gi(r),i=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],a=Array.from(new Set([...i,e]));await Fi(r,{classType:e,classTypes:a});const s=On(ar(Ue,"users"),Un("email","==",t)),c=await Rp(s);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await Mr(ht(Ue,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await Mr(ht(Ue,"allowed_emails",t),{section:e});const r=On(ar(Ue,"users"),Un("email","==",t)),n=await Rp(r);await Promise.all(n.docs.map(async i=>{await Mr(ht(Ue,"users",i.id),{section:e})}))}catch(r){console.error(r)}},removeFromWhitelist:async t=>{try{await pa(ht(Ue,"allowed_emails",t));const e=On(ar(Ue,"users"),Un("email","==",t)),r=await Rp(e);await Promise.all(r.docs.map(async n=>{await Mr(ht(Ue,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ht(Ue,"users",t),n=await Gi(r);if(n.exists()){const i=n.data(),a=i.enrolledClasses||(i.classType?[i.classType]:[]),s=Array.from(new Set([...a,e]));await Mr(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=i.email;if(c){const d=await Gi(ht(Ue,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await Fi(ht(Ue,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await Gi(ht(Ue,"users",t));if(e.exists()){const r=e.data().email;await pa(ht(Ue,"allowed_emails",r))}await pa(ht(Ue,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Fi(ht(Ue,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ht(Ue,"users",t),n=await Gi(r);if(!n.exists())return;const a=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,a&&await pa(ht(Ue,"allowed_emails",a))):(s.isWhitelisted=!0,a&&await Fi(ht(Ue,"allowed_emails",a),{classType:e[0],classTypes:e})),await Mr(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ht(Ue,"users",t),n=await Gi(r);if(n.exists()){const i=n.data().enrolledClasses||[],a=Array.from(new Set([...i,e]));await Mr(r,{classType:e,enrolledClasses:a,isWhitelisted:!0});const s=n.data().email;s&&await Fi(ht(Ue,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await Mr(ht(Ue,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await kse({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,i,a)=>(await zse({assignmentId:r,assignmentTitle:n,userName:e,metrics:i,classType:a})).data,subscribeToLeaderboard:t=>{const e=On(ar(Ue,"users"),Un("role","==","STUDENT"));return $n(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Fi(ht(Ue,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await pa(ht(Ue,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=hm(fm,`resources/${e}_${t.name}`);return await nA(r,t),await mb(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=hm(fm,`resources/html/${e}_${t.name}`);return await nA(r,t),await mb(r)},subscribeToAnnouncements:t=>{const e=On(ar(Ue,"announcements"),Ip("createdAt","desc"),td(20));return Ws("announcements",e,r=>{const n=new Date,i=r.docs.map(a=>({id:a.id,...a.data()})).filter(a=>!a.expiresAt||new Date(a.expiresAt)>n);t(i)})},createAnnouncement:async t=>{await X0(ar(Ue,"announcements"),t)},deleteAnnouncement:async t=>{await pa(ht(Ue,"announcements",t))},dismissAnnouncement:async(t,e)=>{await Mr(ht(Ue,"users",t),{"gamification.dismissedAnnouncements":Qie(e)})},subscribeToNotifications:(t,e)=>{const r=On(ar(Ue,"notifications"),Un("userId","==",t),Ip("timestamp","desc"),td(50));return $n(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await Mr(ht(Ue,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=On(ar(Ue,"notifications"),Un("userId","==",t),Un("isRead","==",!1)),n=(await Rp(e)).docs.map(i=>Mr(i.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await X0(ar(Ue,"notifications"),t)},notifyUsers:async(t,e,r,n,i)=>{const a=t.map(s=>X0(ar(Ue,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:i||{}}));await Promise.all(a)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await Mr(ht(Ue,"users",t),n)},toggleCodenameLock:async(t,e)=>{await Mr(ht(Ue,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Vse({})).data,claimDailyLogin:async()=>(await Fse({})).data,spinFortuneWheel:async t=>(await qse({classType:t})).data,unlockSkill:async(t,e)=>(await Hse({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Gse({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await Kse({itemId:t,gemId:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=On(ar(Ue,"boss_encounters"),Un("isActive","==",!0));return Ws("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=ar(Ue,"boss_encounters");return $n(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ht(Ue,"boss_encounters",t.id);await Fi(e,t)},toggleBossActive:async(t,e)=>{const r=ht(Ue,"boss_encounters",t);await Mr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ht(Ue,"boss_encounters",t);await pa(e)},subscribeToBossShards:(t,e)=>{const r=ar(Ue,`boss_encounters/${t}/shards`);return $n(r,n=>{let i=0;n.forEach(a=>{i+=a.data().damageDealt||0}),e(i)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=ar(Ue,`boss_encounters/${t}/damage_log`);return $n(r,n=>{const i=n.docs.map(a=>a.data());e(i)},()=>{})},dealBossDamage:async(t,e,r)=>(await Wse({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=On(ar(Ue,"boss_quizzes"),Un("isActive","==",!0));return Ws("boss_quizzes",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.classType===t||a.classType==="GLOBAL");e(i)})},subscribeToBossQuizShards:(t,e)=>{const r=ar(Ue,`boss_quizzes/${t}/shards`);return $n(r,n=>{let i=0;n.forEach(a=>{i+=a.data().damageDealt||0}),e(i)},()=>{})},answerBossQuiz:async(t,e,r)=>(await Xse({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=ar(Ue,"boss_quizzes");return $n(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ht(Ue,"boss_quizzes",t.id);await Fi(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ht(Ue,"boss_quizzes",t);await Mr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ht(Ue,"boss_quizzes",t);await pa(e)},createParty:async(t,e)=>(await Qse({questId:t,userName:e})).data,joinParty:async(t,e)=>(await Yse({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>$n(ht(Ue,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await X0(ar(Ue,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await Mr(ht(Ue,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},subscribeToTutoringSessions:(t,e)=>{const r=On(ar(Ue,"tutoring_sessions"),Un("classType","==",t),td(50));return Ws("tutoring_sessions",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime()),e(i)})},completeTutoring:async(t,e)=>(await Zse({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=On(ar(Ue,"knowledge_gates"),Un("isActive","==",!0));return Ws("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await Jse({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=On(ar(Ue,"seasonal_cosmetics"),Un("isAvailable","==",!0));return Ws("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await eoe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await Mr(ht(Ue,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=On(ar(Ue,"daily_challenges"),Un("date","==",e));return Ws("daily_challenges",r,n=>{t(n.docs.map(i=>({id:i.id,...i.data()})))})},claimDailyChallenge:async(t,e)=>(await toe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const i=ht(Ue,"users",t);await O5(Ue,async a=>{var h;const s=await a.get(i);if(!s.exists())return;const c=((h=s.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);a.update(i,{"gamification.activeDailyChallenges":p})}else a.update(i,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await Gi(ht(Ue,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=On(ar(Ue,"student_alerts"),Un("isDismissed","==",!1));return Ws("student_alerts",e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>{const s={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(s[a.riskLevel]||0)-(s[i.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await roe({alertId:t})},subscribeToStudentBuckets:t=>Ws("student_buckets",ar(Ue,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)})},Qq=M.createContext(null),sa=()=>{const t=M.useContext(Qq);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Joe={success:l.jsx(bi,{className:"w-5 h-5 text-green-400 shrink-0"}),error:l.jsx(Rs,{className:"w-5 h-5 text-red-400 shrink-0"}),info:l.jsx(Uq,{className:"w-5 h-5 text-blue-400 shrink-0"})},ele={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},tle=({children:t})=>{const[e,r]=M.useState([]),n=M.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:s,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),i=M.useCallback(s=>{r(c=>c.filter(d=>d.id!==s))},[]),a={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return l.jsxs(Qq.Provider,{value:a,children:[t,l.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>l.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${ele[s.type]}`,children:[Joe[s.type],l.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),l.jsx("button",{onClick:()=>i(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:l.jsx(hs,{className:"w-4 h-4"})})]},s.id))})]})},rle=()=>{const[t,e]=M.useState(navigator.onLine),[r,n]=M.useState(!1);return M.useEffect(()=>{const i=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{e(!1),n(!1)};return window.addEventListener("online",i),window.addEventListener("offline",a),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a)}},[]),t&&!r?null:l.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?l.jsxs(l.Fragment,{children:[l.jsx(Qoe,{className:"w-4 h-4"}),"Connection restored"]}):l.jsxs(l.Fragment,{children:[l.jsx(Xoe,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})},ba=({isOpen:t,onClose:e,title:r,children:n,maxWidth:i="max-w-md"})=>(M.useEffect(()=>{const a=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${i} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[l.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[l.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:l.jsx(hs,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),nle="/favicon.svg";function Sf(){return typeof window<"u"&&"Notification"in window}function $v(){return Sf()?Notification.permission:"unsupported"}async function Yq(){return Sf()?await Notification.requestPermission():"unsupported"}function ile(t,e,r){if(!(!Sf()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:nle,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function ale(t,e){const r=M.useRef(new Set),n=M.useRef(!0),i=M.useCallback(a=>{if(n.current){n.current=!1,r.current=new Set(a.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(a.map(c=>c.id));return}const s=a.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of s.slice(0,3))ile(c.title,c.message,`pp-${c.id}`);r.current=new Set(a.map(c=>c.id))},[e]);M.useEffect(()=>{if(!t||!e||!Sf())return;n.current=!0,r.current=new Set;const a=Be.subscribeToNotifications(t,i);return()=>a()},[t,e,i])}const sle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[i,a]=te.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=te.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,h]=te.useState(!1),p=sa(),m=_=>{a(w=>({...w,[_]:!w[_]}))},y=async()=>{var _;h(!0);try{await n(i),s!==(((_=r.gamification)==null?void 0:_.codename)||"")&&await Be.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},b=({icon:_,title:w,description:N,value:k,onToggle:C})=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`p-2 rounded-xl ${k?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:l.jsx(_,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-white text-sm",children:w}),l.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:N})]})]}),l.jsx("button",{onClick:C,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${k?"bg-purple-600":"bg-white/20"}`,children:l.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${k?"translate-x-5":"translate-x-0"}`})})]});return l.jsx(ba,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(b,{icon:Poe,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:i.liveBackground,onToggle:()=>m("liveBackground")}),l.jsx(b,{icon:moe,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:i.performanceMode,onToggle:()=>m("performanceMode")})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(b,{icon:Vl,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:i.privacyMode,onToggle:()=>m("privacyMode")}),i.privacyMode&&l.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[l.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),l.jsx("input",{type:"text",value:s,onChange:_=>c(_.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),l.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(b,{icon:Loe,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:i.compactView,onToggle:()=>m("compactView")}),l.jsx(b,{icon:Woe,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:i.soundEffects!==!1,onToggle:()=>a(_=>({..._,soundEffects:_.soundEffects===!1}))})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),l.jsx("div",{className:"space-y-2",children:Sf()?l.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`p-2 rounded-xl ${i.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:l.jsx(Lq,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),l.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:$v()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),l.jsx("button",{onClick:async()=>{if(i.pushNotifications)a(_=>({..._,pushNotifications:!1}));else{const _=await Yq();_==="granted"?(a(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):_==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:$v()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${$v()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":i.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:l.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${i.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):l.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),l.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?l.jsx(os,{className:"w-5 h-5 animate-spin"}):l.jsx(Gq,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let B5=null,Zq=!0;function ole(t){Zq=t}function lle(){if(!B5){const t=window.AudioContext||window.webkitAudioContext;B5=new t}return B5}function Vt(t,e,r="sine",n=.15){if(Zq)try{const i=lle(),a=i.createOscillator(),s=i.createGain();a.type=r,a.frequency.setValueAtTime(t,i.currentTime),s.gain.setValueAtTime(n,i.currentTime),s.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),a.connect(s),s.connect(i.destination),a.start(i.currentTime),a.stop(i.currentTime+e)}catch{}}const Yn={xpGain:()=>{Vt(600,.1,"sine",.1),setTimeout(()=>Vt(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Vt(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{Vt(1200,.15,"sine",.08),setTimeout(()=>Vt(1500,.12,"sine",.06),100),setTimeout(()=>Vt(1800,.2,"triangle",.05),180)},questAccept:()=>{Vt(440,.15,"square",.06),setTimeout(()=>Vt(660,.2,"square",.06),120)},questDeploy:()=>{Vt(880,.12,"sawtooth",.05),setTimeout(()=>Vt(660,.12,"sawtooth",.05),100),setTimeout(()=>Vt(550,.2,"sawtooth",.04),200)},equip:()=>{Vt(200,.05,"square",.1),setTimeout(()=>Vt(400,.08,"sine",.08),50)},salvage:()=>{Vt(300,.15,"sawtooth",.06),setTimeout(()=>Vt(200,.2,"sawtooth",.04),100),setTimeout(()=>Vt(100,.3,"sawtooth",.03),200)},craft:()=>{Vt(150,.08,"square",.1),setTimeout(()=>Vt(800,.2,"triangle",.08),60)},error:()=>{Vt(200,.15,"square",.08),setTimeout(()=>Vt(150,.2,"square",.06),120)},messageSend:()=>{Vt(500,.06,"sine",.05)},notification:()=>{Vt(800,.1,"sine",.06),setTimeout(()=>Vt(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>Vt(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{Vt(523,.12,"sine",.08),setTimeout(()=>Vt(659,.12,"sine",.07),100),setTimeout(()=>Vt(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>Vt(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{Vt(523,.15,"triangle",.1),setTimeout(()=>Vt(784,.15,"triangle",.1),120),setTimeout(()=>Vt(1047,.3,"sine",.12),240)},skillUnlock:()=>{Vt(300,.1,"sawtooth",.06),setTimeout(()=>Vt(600,.1,"sawtooth",.06),80),setTimeout(()=>Vt(900,.15,"sine",.08),160)},bossHit:()=>{Vt(100,.1,"square",.12),setTimeout(()=>Vt(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Vt(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{Vt(1200,.08,"sine",.08),setTimeout(()=>Vt(1600,.1,"sine",.06),60),setTimeout(()=>Vt(2e3,.15,"triangle",.04),120)},partyJoin:()=>{Vt(440,.1,"sine",.06),setTimeout(()=>Vt(554,.1,"sine",.06),80),setTimeout(()=>Vt(659,.15,"sine",.05),160)},chestOpen:()=>{Vt(200,.15,"square",.06),setTimeout(()=>Vt(300,.1,"square",.05),100),setTimeout(()=>Vt(500,.1,"triangle",.06),200),setTimeout(()=>Vt(800,.2,"sine",.08),350)}},cle={QUEST_APPROVED:l.jsx(kd,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:l.jsx(kd,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:l.jsx(uA,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:l.jsx(kd,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:l.jsx(Hq,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:l.jsx(coe,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:l.jsx(xb,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:l.jsx(Pi,{className:"w-4 h-4 text-cyan-400"})},HI=({userId:t,settings:e,onUpdateSettings:r})=>{const[n,i]=M.useState([]),[a,s]=M.useState(!1),[c,d]=M.useState(!1),h=M.useRef(null),p=M.useRef(0);M.useEffect(()=>{a&&Sf()&&$v()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&d(!0)},[a,e==null?void 0:e.pushNotifications]),M.useEffect(()=>{const _=Be.subscribeToNotifications(t,w=>{const N=w.filter(k=>!k.isRead).length;N>p.current&&p.current>=0&&Yn.notification(),p.current=N,i(w)});return()=>_()},[t]),M.useEffect(()=>{const _=w=>{h.current&&!h.current.contains(w.target)&&s(!1)};return a&&document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[a]);const m=n.filter(_=>!_.isRead).length,y=async()=>{await Be.markAllNotificationsRead(t)},b=async _=>{_.isRead||await Be.markNotificationRead(_.id)},T=_=>{const w=Date.now()-new Date(_).getTime();return w<6e4?"just now":w<36e5?`${Math.floor(w/6e4)}m ago`:w<864e5?`${Math.floor(w/36e5)}h ago`:`${Math.floor(w/864e5)}d ago`};return l.jsxs("div",{className:"relative",ref:h,children:[l.jsxs("button",{onClick:()=>s(!a),className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[l.jsx(M5,{className:"w-5 h-5"}),m>0&&l.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:m>9?"9+":m})]}),a&&l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in slide-in-from-top-2 fade-in duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[l.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),m>0&&l.jsxs("button",{onClick:y,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[l.jsx(hoe,{className:"w-3 h-3"})," Mark all read"]})]}),c&&l.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Lq,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{onClick:async()=>{await Yq()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),d(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),l.jsx("button",{onClick:()=>d(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),l.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:n.length===0?l.jsxs("div",{className:"p-8 text-center text-gray-500",children:[l.jsx(M5,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),l.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):n.slice(0,30).map(_=>l.jsxs("div",{onClick:()=>b(_),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${_.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[l.jsx("div",{className:"mt-0.5 shrink-0",children:cle[_.type]||l.jsx(M5,{className:"w-4 h-4 text-gray-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-xs font-bold text-white truncate",children:_.title}),l.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:_.message}),l.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:T(_.timestamp)})]}),!_.isRead&&l.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},_.id))})]})]})},ule=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:i})=>{var T,_;const[a,s]=M.useState(""),[c,d]=M.useState(!1),[h,p]=M.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};M.useEffect(()=>{if(!m.liveBackground){s("");return}(async()=>{try{const N=hm(fm,"public/background.mp4"),k=await mb(N);s(k)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[m.liveBackground]);const y=async w=>{await Be.updateUserSettings(t.id,w)},b=()=>{const w=Zoe.filter(N=>!(N.role==="ADMIN"&&t.role!==ra.ADMIN||N.role==="STUDENT"&&t.role!==ra.STUDENT));return l.jsx(l.Fragment,{children:w.map(N=>l.jsxs("button",{onClick:()=>{n(N.name),p(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===N.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[l.jsx("span",{className:`${r===N.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:N.icon}),l.jsx("span",{className:"font-medium text-sm",children:N.name})]},N.name))})};return l.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[l.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&a&&l.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:l.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:l.jsx("source",{src:a,type:"video/mp4"})},a)}),l.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),l.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:l.jsx(Lh,{className:"w-5 h-5 text-white"})}),l.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(HI,{userId:t.id,settings:m,onUpdateSettings:y}),l.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:l.jsx(Ooe,{className:"w-6 h-6"})})]})]}),h&&l.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),l.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),l.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),l.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:l.jsx(hs,{className:"w-6 h-6"})})]}),l.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:l.jsx(b,{})}),l.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[l.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[l.jsx(Gm,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:"Settings"})]}),l.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[l.jsx(BI,{className:"w-5 h-5"}),l.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),l.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:l.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[l.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[l.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:l.jsx(Lh,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),l.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===ra.ADMIN?"Admin System":"Operative Terminal"})]})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:l.jsx(b,{})}),l.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((_=t.gamification)==null?void 0:_.codename)||"Agent":t.name}),l.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(HI,{userId:t.id,settings:m,onUpdateSettings:y}),l.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:l.jsx(Gm,{className:"w-4 h-4"})})]})]}),l.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[l.jsx(BI,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),l.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:l.jsx("div",{className:"max-w-7xl mx-auto h-full",children:i})}),l.jsx(sle,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class Pa{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Pa(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class cs{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new cs(r,Pa.range(this,e))}}class Je{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,a,s=r&&r.loc;if(s&&s.start<=s.end){var c=s.lexer.input;i=s.start,a=s.end,i===c.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var d=c.slice(i,a).replace(/[^]/g,"$&"),h;i>15?h=""+c.slice(i-15,i):h=c.slice(0,i);var p;a+15<c.length?p=c.slice(a,a+15)+"":p=c.slice(a),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=Je.prototype,m.position=i,i!=null&&a!=null&&(m.length=a-i),m.rawMessage=e,m}}Je.prototype.__proto__=Error.prototype;var dle=function(e,r){return e===void 0?r:e},hle=/([A-Z])/g,fle=function(e){return e.replace(hle,"-$1").toLowerCase()},ple={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},mle=/[&><"']/g;function gle(t){return String(t).replace(mle,e=>ple[e])}var Jq=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},yle=function(e){var r=Jq(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},vle=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},ble=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},kr={deflt:dle,escape:gle,hyphenate:fle,getBaseElem:Jq,isCharacterBox:yle,protocolFromUrl:ble},Vv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function xle(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class EE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in Vv)if(Vv.hasOwnProperty(r)){var n=Vv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:xle(n)}}reportNonstrict(e,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,r,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new Je("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var i=this.strict;if(typeof i=="function")try{i=i(e,r,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=kr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Bc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return wo[wle[this.id]]}sub(){return wo[_le[this.id]]}fracNum(){return wo[Sle[this.id]]}fracDen(){return wo[Tle[this.id]]}cramp(){return wo[Ale[this.id]]}text(){return wo[Ele[this.id]]}isTight(){return this.size>=2}}var NE=0,Sb=1,yh=2,Il=3,Wm=4,js=5,Uh=6,ga=7,wo=[new Bc(NE,0,!1),new Bc(Sb,0,!0),new Bc(yh,1,!1),new Bc(Il,1,!0),new Bc(Wm,2,!1),new Bc(js,2,!0),new Bc(Uh,3,!1),new Bc(ga,3,!0)],wle=[Wm,js,Wm,js,Uh,ga,Uh,ga],_le=[js,js,js,js,ga,ga,ga,ga],Sle=[yh,Il,Wm,js,Uh,ga,Uh,ga],Tle=[Il,Il,js,js,ga,ga,ga,ga],Ale=[Sb,Sb,Il,Il,js,js,ga,ga],Ele=[NE,Sb,yh,Il,yh,Il,yh,Il],Mt={DISPLAY:wo[NE],TEXT:wo[yh],SCRIPT:wo[Wm],SCRIPTSCRIPT:wo[Uh]},dA=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Nle(t){for(var e=0;e<dA.length;e++)for(var r=dA[e],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(t>=i[0]&&t<=i[1])return r.name}return null}var Fv=[];dA.forEach(t=>t.blocks.forEach(e=>Fv.push(...e)));function eH(t){for(var e=0;e<Fv.length;e+=2)if(t>=Fv[e]&&t<=Fv[e+1])return!0;return!1}var Q0=80,jle=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Cle=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},kle=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Ole=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Ile=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Rle=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},Mle=function(e,r,n){var i=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},Ple=function(e,r,n){r=1e3*r;var i="";switch(e){case"sqrtMain":i=jle(r,Q0);break;case"sqrtSize1":i=Cle(r,Q0);break;case"sqrtSize2":i=kle(r,Q0);break;case"sqrtSize3":i=Ole(r,Q0);break;case"sqrtSize4":i=Ile(r,Q0);break;case"sqrtTall":i=Mle(r,Q0,n)}return i},Dle=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},GI={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Lle=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class t1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Eo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},ev={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},KI={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Ble(t,e){Eo[t]=e}function jE(t,e,r){if(!Eo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),i=Eo[e][n];if(!i&&t[0]in KI&&(n=KI[t[0]].charCodeAt(0),i=Eo[e][n]),!i&&r==="text"&&eH(n)&&(i=Eo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var U5={};function Ule(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!U5[e]){var r=U5[e]={cssEmPerMu:ev.quad[e]/18};for(var n in ev)ev.hasOwnProperty(n)&&(r[n]=ev[n][e])}return U5[e]}var zle=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],WI=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],XI=function(e,r){return r.size<2?e:zle[e-1][r.size-1]};class xl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||xl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=WI[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new xl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:XI(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:WI[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=XI(xl.BASESIZE,e);return this.size===r&&this.textSize===xl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==xl.BASESIZE?["sizing","reset-size"+this.size,"size"+xl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ule(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}xl.BASESIZE=6;var hA={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},$le={ex:!0,em:!0,mu:!0},tH=function(e){return typeof e!="string"&&(e=e.unit),e in hA||e in $le||e==="ex"},Rn=function(e,r){var n;if(e.unit in hA)n=hA[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var i;if(r.style.isTight()?i=r.havingStyle(r.style.text()):i=r,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new Je("Invalid unit: '"+e.unit+"'");i!==r&&(n*=i.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},ot=function(e){return+e.toFixed(4)+"em"},gu=function(e){return e.filter(r=>r).join(" ")},rH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var i=r.getColor();i&&(this.style.color=i)}},nH=function(e){var r=document.createElement(e);r.className=gu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&r.setAttribute(i,this.attributes[i]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},Vle=/[\s"'>/=\x00-\x1f]/,iH=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+kr.escape(gu(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=kr.hyphenate(i)+":"+this.style[i]+";");n&&(r+=' style="'+kr.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(Vle.test(a))throw new Je("Invalid attribute name '"+a+"'");r+=" "+a+'="'+kr.escape(this.attributes[a])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class r1{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,rH.call(this,e,n,i),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return nH.call(this,"span")}toMarkup(){return iH.call(this,"span")}}class CE{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,rH.call(this,r,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return nH.call(this,"a")}toMarkup(){return iH.call(this,"a")}}class Fle{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+kr.escape(this.src)+'"'+(' alt="'+kr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=kr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+kr.escape(r)+'"'),e+="'/>",e}}var qle={:"",:"",:"",:""};class Ms{constructor(e,r,n,i,a,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=Nle(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=qle[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=ot(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=gu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=kr.escape(gu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=kr.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,r+=' style="'+kr.escape(n)+'"');var a=kr.escape(this.text);return e?(r+=">",r+=a,r+="</span>",r):a}}class Fl{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+kr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class yu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",GI[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+kr.escape(this.alternate)+'"/>':'<path d="'+kr.escape(GI[this.pathName])+'"/>'}}class fA{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+kr.escape(this.attributes[r])+'"');return e+="/>",e}}function QI(t){if(t instanceof Ms)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Hle(t){if(t instanceof r1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Gle={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Kle={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},xn={math:{},text:{}};function j(t,e,r,n,i,a){xn[t][i]={font:e,group:r,replace:n},a&&n&&(xn[t][n]=xn[t][i])}var U="math",Ge="text",q="main",ne="ams",kn="accent-token",vt="bin",wa="close",Tf="inner",Rt="mathord",fi="op-token",fs="open",g2="punct",ie="rel",Jl="spacing",me="textord";j(U,q,ie,"","\\equiv",!0);j(U,q,ie,"","\\prec",!0);j(U,q,ie,"","\\succ",!0);j(U,q,ie,"","\\sim",!0);j(U,q,ie,"","\\perp");j(U,q,ie,"","\\preceq",!0);j(U,q,ie,"","\\succeq",!0);j(U,q,ie,"","\\simeq",!0);j(U,q,ie,"","\\mid",!0);j(U,q,ie,"","\\ll",!0);j(U,q,ie,"","\\gg",!0);j(U,q,ie,"","\\asymp",!0);j(U,q,ie,"","\\parallel");j(U,q,ie,"","\\bowtie",!0);j(U,q,ie,"","\\smile",!0);j(U,q,ie,"","\\sqsubseteq",!0);j(U,q,ie,"","\\sqsupseteq",!0);j(U,q,ie,"","\\doteq",!0);j(U,q,ie,"","\\frown",!0);j(U,q,ie,"","\\ni",!0);j(U,q,ie,"","\\propto",!0);j(U,q,ie,"","\\vdash",!0);j(U,q,ie,"","\\dashv",!0);j(U,q,ie,"","\\owns");j(U,q,g2,".","\\ldotp");j(U,q,g2,"","\\cdotp");j(U,q,me,"#","\\#");j(Ge,q,me,"#","\\#");j(U,q,me,"&","\\&");j(Ge,q,me,"&","\\&");j(U,q,me,"","\\aleph",!0);j(U,q,me,"","\\forall",!0);j(U,q,me,"","\\hbar",!0);j(U,q,me,"","\\exists",!0);j(U,q,me,"","\\nabla",!0);j(U,q,me,"","\\flat",!0);j(U,q,me,"","\\ell",!0);j(U,q,me,"","\\natural",!0);j(U,q,me,"","\\clubsuit",!0);j(U,q,me,"","\\wp",!0);j(U,q,me,"","\\sharp",!0);j(U,q,me,"","\\diamondsuit",!0);j(U,q,me,"","\\Re",!0);j(U,q,me,"","\\heartsuit",!0);j(U,q,me,"","\\Im",!0);j(U,q,me,"","\\spadesuit",!0);j(U,q,me,"","\\S",!0);j(Ge,q,me,"","\\S");j(U,q,me,"","\\P",!0);j(Ge,q,me,"","\\P");j(U,q,me,"","\\dag");j(Ge,q,me,"","\\dag");j(Ge,q,me,"","\\textdagger");j(U,q,me,"","\\ddag");j(Ge,q,me,"","\\ddag");j(Ge,q,me,"","\\textdaggerdbl");j(U,q,wa,"","\\rmoustache",!0);j(U,q,fs,"","\\lmoustache",!0);j(U,q,wa,"","\\rgroup",!0);j(U,q,fs,"","\\lgroup",!0);j(U,q,vt,"","\\mp",!0);j(U,q,vt,"","\\ominus",!0);j(U,q,vt,"","\\uplus",!0);j(U,q,vt,"","\\sqcap",!0);j(U,q,vt,"","\\ast");j(U,q,vt,"","\\sqcup",!0);j(U,q,vt,"","\\bigcirc",!0);j(U,q,vt,"","\\bullet",!0);j(U,q,vt,"","\\ddagger");j(U,q,vt,"","\\wr",!0);j(U,q,vt,"","\\amalg");j(U,q,vt,"&","\\And");j(U,q,ie,"","\\longleftarrow",!0);j(U,q,ie,"","\\Leftarrow",!0);j(U,q,ie,"","\\Longleftarrow",!0);j(U,q,ie,"","\\longrightarrow",!0);j(U,q,ie,"","\\Rightarrow",!0);j(U,q,ie,"","\\Longrightarrow",!0);j(U,q,ie,"","\\leftrightarrow",!0);j(U,q,ie,"","\\longleftrightarrow",!0);j(U,q,ie,"","\\Leftrightarrow",!0);j(U,q,ie,"","\\Longleftrightarrow",!0);j(U,q,ie,"","\\mapsto",!0);j(U,q,ie,"","\\longmapsto",!0);j(U,q,ie,"","\\nearrow",!0);j(U,q,ie,"","\\hookleftarrow",!0);j(U,q,ie,"","\\hookrightarrow",!0);j(U,q,ie,"","\\searrow",!0);j(U,q,ie,"","\\leftharpoonup",!0);j(U,q,ie,"","\\rightharpoonup",!0);j(U,q,ie,"","\\swarrow",!0);j(U,q,ie,"","\\leftharpoondown",!0);j(U,q,ie,"","\\rightharpoondown",!0);j(U,q,ie,"","\\nwarrow",!0);j(U,q,ie,"","\\rightleftharpoons",!0);j(U,ne,ie,"","\\nless",!0);j(U,ne,ie,"","\\@nleqslant");j(U,ne,ie,"","\\@nleqq");j(U,ne,ie,"","\\lneq",!0);j(U,ne,ie,"","\\lneqq",!0);j(U,ne,ie,"","\\@lvertneqq");j(U,ne,ie,"","\\lnsim",!0);j(U,ne,ie,"","\\lnapprox",!0);j(U,ne,ie,"","\\nprec",!0);j(U,ne,ie,"","\\npreceq",!0);j(U,ne,ie,"","\\precnsim",!0);j(U,ne,ie,"","\\precnapprox",!0);j(U,ne,ie,"","\\nsim",!0);j(U,ne,ie,"","\\@nshortmid");j(U,ne,ie,"","\\nmid",!0);j(U,ne,ie,"","\\nvdash",!0);j(U,ne,ie,"","\\nvDash",!0);j(U,ne,ie,"","\\ntriangleleft");j(U,ne,ie,"","\\ntrianglelefteq",!0);j(U,ne,ie,"","\\subsetneq",!0);j(U,ne,ie,"","\\@varsubsetneq");j(U,ne,ie,"","\\subsetneqq",!0);j(U,ne,ie,"","\\@varsubsetneqq");j(U,ne,ie,"","\\ngtr",!0);j(U,ne,ie,"","\\@ngeqslant");j(U,ne,ie,"","\\@ngeqq");j(U,ne,ie,"","\\gneq",!0);j(U,ne,ie,"","\\gneqq",!0);j(U,ne,ie,"","\\@gvertneqq");j(U,ne,ie,"","\\gnsim",!0);j(U,ne,ie,"","\\gnapprox",!0);j(U,ne,ie,"","\\nsucc",!0);j(U,ne,ie,"","\\nsucceq",!0);j(U,ne,ie,"","\\succnsim",!0);j(U,ne,ie,"","\\succnapprox",!0);j(U,ne,ie,"","\\ncong",!0);j(U,ne,ie,"","\\@nshortparallel");j(U,ne,ie,"","\\nparallel",!0);j(U,ne,ie,"","\\nVDash",!0);j(U,ne,ie,"","\\ntriangleright");j(U,ne,ie,"","\\ntrianglerighteq",!0);j(U,ne,ie,"","\\@nsupseteqq");j(U,ne,ie,"","\\supsetneq",!0);j(U,ne,ie,"","\\@varsupsetneq");j(U,ne,ie,"","\\supsetneqq",!0);j(U,ne,ie,"","\\@varsupsetneqq");j(U,ne,ie,"","\\nVdash",!0);j(U,ne,ie,"","\\precneqq",!0);j(U,ne,ie,"","\\succneqq",!0);j(U,ne,ie,"","\\@nsubseteqq");j(U,ne,vt,"","\\unlhd");j(U,ne,vt,"","\\unrhd");j(U,ne,ie,"","\\nleftarrow",!0);j(U,ne,ie,"","\\nrightarrow",!0);j(U,ne,ie,"","\\nLeftarrow",!0);j(U,ne,ie,"","\\nRightarrow",!0);j(U,ne,ie,"","\\nleftrightarrow",!0);j(U,ne,ie,"","\\nLeftrightarrow",!0);j(U,ne,ie,"","\\vartriangle");j(U,ne,me,"","\\hslash");j(U,ne,me,"","\\triangledown");j(U,ne,me,"","\\lozenge");j(U,ne,me,"","\\circledS");j(U,ne,me,"","\\circledR");j(Ge,ne,me,"","\\circledR");j(U,ne,me,"","\\measuredangle",!0);j(U,ne,me,"","\\nexists");j(U,ne,me,"","\\mho");j(U,ne,me,"","\\Finv",!0);j(U,ne,me,"","\\Game",!0);j(U,ne,me,"","\\backprime");j(U,ne,me,"","\\blacktriangle");j(U,ne,me,"","\\blacktriangledown");j(U,ne,me,"","\\blacksquare");j(U,ne,me,"","\\blacklozenge");j(U,ne,me,"","\\bigstar");j(U,ne,me,"","\\sphericalangle",!0);j(U,ne,me,"","\\complement",!0);j(U,ne,me,"","\\eth",!0);j(Ge,q,me,"","");j(U,ne,me,"","\\diagup");j(U,ne,me,"","\\diagdown");j(U,ne,me,"","\\square");j(U,ne,me,"","\\Box");j(U,ne,me,"","\\Diamond");j(U,ne,me,"","\\yen",!0);j(Ge,ne,me,"","\\yen",!0);j(U,ne,me,"","\\checkmark",!0);j(Ge,ne,me,"","\\checkmark");j(U,ne,me,"","\\beth",!0);j(U,ne,me,"","\\daleth",!0);j(U,ne,me,"","\\gimel",!0);j(U,ne,me,"","\\digamma",!0);j(U,ne,me,"","\\varkappa");j(U,ne,fs,"","\\@ulcorner",!0);j(U,ne,wa,"","\\@urcorner",!0);j(U,ne,fs,"","\\@llcorner",!0);j(U,ne,wa,"","\\@lrcorner",!0);j(U,ne,ie,"","\\leqq",!0);j(U,ne,ie,"","\\leqslant",!0);j(U,ne,ie,"","\\eqslantless",!0);j(U,ne,ie,"","\\lesssim",!0);j(U,ne,ie,"","\\lessapprox",!0);j(U,ne,ie,"","\\approxeq",!0);j(U,ne,vt,"","\\lessdot");j(U,ne,ie,"","\\lll",!0);j(U,ne,ie,"","\\lessgtr",!0);j(U,ne,ie,"","\\lesseqgtr",!0);j(U,ne,ie,"","\\lesseqqgtr",!0);j(U,ne,ie,"","\\doteqdot");j(U,ne,ie,"","\\risingdotseq",!0);j(U,ne,ie,"","\\fallingdotseq",!0);j(U,ne,ie,"","\\backsim",!0);j(U,ne,ie,"","\\backsimeq",!0);j(U,ne,ie,"","\\subseteqq",!0);j(U,ne,ie,"","\\Subset",!0);j(U,ne,ie,"","\\sqsubset",!0);j(U,ne,ie,"","\\preccurlyeq",!0);j(U,ne,ie,"","\\curlyeqprec",!0);j(U,ne,ie,"","\\precsim",!0);j(U,ne,ie,"","\\precapprox",!0);j(U,ne,ie,"","\\vartriangleleft");j(U,ne,ie,"","\\trianglelefteq");j(U,ne,ie,"","\\vDash",!0);j(U,ne,ie,"","\\Vvdash",!0);j(U,ne,ie,"","\\smallsmile");j(U,ne,ie,"","\\smallfrown");j(U,ne,ie,"","\\bumpeq",!0);j(U,ne,ie,"","\\Bumpeq",!0);j(U,ne,ie,"","\\geqq",!0);j(U,ne,ie,"","\\geqslant",!0);j(U,ne,ie,"","\\eqslantgtr",!0);j(U,ne,ie,"","\\gtrsim",!0);j(U,ne,ie,"","\\gtrapprox",!0);j(U,ne,vt,"","\\gtrdot");j(U,ne,ie,"","\\ggg",!0);j(U,ne,ie,"","\\gtrless",!0);j(U,ne,ie,"","\\gtreqless",!0);j(U,ne,ie,"","\\gtreqqless",!0);j(U,ne,ie,"","\\eqcirc",!0);j(U,ne,ie,"","\\circeq",!0);j(U,ne,ie,"","\\triangleq",!0);j(U,ne,ie,"","\\thicksim");j(U,ne,ie,"","\\thickapprox");j(U,ne,ie,"","\\supseteqq",!0);j(U,ne,ie,"","\\Supset",!0);j(U,ne,ie,"","\\sqsupset",!0);j(U,ne,ie,"","\\succcurlyeq",!0);j(U,ne,ie,"","\\curlyeqsucc",!0);j(U,ne,ie,"","\\succsim",!0);j(U,ne,ie,"","\\succapprox",!0);j(U,ne,ie,"","\\vartriangleright");j(U,ne,ie,"","\\trianglerighteq");j(U,ne,ie,"","\\Vdash",!0);j(U,ne,ie,"","\\shortmid");j(U,ne,ie,"","\\shortparallel");j(U,ne,ie,"","\\between",!0);j(U,ne,ie,"","\\pitchfork",!0);j(U,ne,ie,"","\\varpropto");j(U,ne,ie,"","\\blacktriangleleft");j(U,ne,ie,"","\\therefore",!0);j(U,ne,ie,"","\\backepsilon");j(U,ne,ie,"","\\blacktriangleright");j(U,ne,ie,"","\\because",!0);j(U,ne,ie,"","\\llless");j(U,ne,ie,"","\\gggtr");j(U,ne,vt,"","\\lhd");j(U,ne,vt,"","\\rhd");j(U,ne,ie,"","\\eqsim",!0);j(U,q,ie,"","\\Join");j(U,ne,ie,"","\\Doteq",!0);j(U,ne,vt,"","\\dotplus",!0);j(U,ne,vt,"","\\smallsetminus");j(U,ne,vt,"","\\Cap",!0);j(U,ne,vt,"","\\Cup",!0);j(U,ne,vt,"","\\doublebarwedge",!0);j(U,ne,vt,"","\\boxminus",!0);j(U,ne,vt,"","\\boxplus",!0);j(U,ne,vt,"","\\divideontimes",!0);j(U,ne,vt,"","\\ltimes",!0);j(U,ne,vt,"","\\rtimes",!0);j(U,ne,vt,"","\\leftthreetimes",!0);j(U,ne,vt,"","\\rightthreetimes",!0);j(U,ne,vt,"","\\curlywedge",!0);j(U,ne,vt,"","\\curlyvee",!0);j(U,ne,vt,"","\\circleddash",!0);j(U,ne,vt,"","\\circledast",!0);j(U,ne,vt,"","\\centerdot");j(U,ne,vt,"","\\intercal",!0);j(U,ne,vt,"","\\doublecap");j(U,ne,vt,"","\\doublecup");j(U,ne,vt,"","\\boxtimes",!0);j(U,ne,ie,"","\\dashrightarrow",!0);j(U,ne,ie,"","\\dashleftarrow",!0);j(U,ne,ie,"","\\leftleftarrows",!0);j(U,ne,ie,"","\\leftrightarrows",!0);j(U,ne,ie,"","\\Lleftarrow",!0);j(U,ne,ie,"","\\twoheadleftarrow",!0);j(U,ne,ie,"","\\leftarrowtail",!0);j(U,ne,ie,"","\\looparrowleft",!0);j(U,ne,ie,"","\\leftrightharpoons",!0);j(U,ne,ie,"","\\curvearrowleft",!0);j(U,ne,ie,"","\\circlearrowleft",!0);j(U,ne,ie,"","\\Lsh",!0);j(U,ne,ie,"","\\upuparrows",!0);j(U,ne,ie,"","\\upharpoonleft",!0);j(U,ne,ie,"","\\downharpoonleft",!0);j(U,q,ie,"","\\origof",!0);j(U,q,ie,"","\\imageof",!0);j(U,ne,ie,"","\\multimap",!0);j(U,ne,ie,"","\\leftrightsquigarrow",!0);j(U,ne,ie,"","\\rightrightarrows",!0);j(U,ne,ie,"","\\rightleftarrows",!0);j(U,ne,ie,"","\\twoheadrightarrow",!0);j(U,ne,ie,"","\\rightarrowtail",!0);j(U,ne,ie,"","\\looparrowright",!0);j(U,ne,ie,"","\\curvearrowright",!0);j(U,ne,ie,"","\\circlearrowright",!0);j(U,ne,ie,"","\\Rsh",!0);j(U,ne,ie,"","\\downdownarrows",!0);j(U,ne,ie,"","\\upharpoonright",!0);j(U,ne,ie,"","\\downharpoonright",!0);j(U,ne,ie,"","\\rightsquigarrow",!0);j(U,ne,ie,"","\\leadsto");j(U,ne,ie,"","\\Rrightarrow",!0);j(U,ne,ie,"","\\restriction");j(U,q,me,"","`");j(U,q,me,"$","\\$");j(Ge,q,me,"$","\\$");j(Ge,q,me,"$","\\textdollar");j(U,q,me,"%","\\%");j(Ge,q,me,"%","\\%");j(U,q,me,"_","\\_");j(Ge,q,me,"_","\\_");j(Ge,q,me,"_","\\textunderscore");j(U,q,me,"","\\angle",!0);j(U,q,me,"","\\infty",!0);j(U,q,me,"","\\prime");j(U,q,me,"","\\triangle");j(U,q,me,"","\\Gamma",!0);j(U,q,me,"","\\Delta",!0);j(U,q,me,"","\\Theta",!0);j(U,q,me,"","\\Lambda",!0);j(U,q,me,"","\\Xi",!0);j(U,q,me,"","\\Pi",!0);j(U,q,me,"","\\Sigma",!0);j(U,q,me,"","\\Upsilon",!0);j(U,q,me,"","\\Phi",!0);j(U,q,me,"","\\Psi",!0);j(U,q,me,"","\\Omega",!0);j(U,q,me,"A","");j(U,q,me,"B","");j(U,q,me,"E","");j(U,q,me,"Z","");j(U,q,me,"H","");j(U,q,me,"I","");j(U,q,me,"K","");j(U,q,me,"M","");j(U,q,me,"N","");j(U,q,me,"O","");j(U,q,me,"P","");j(U,q,me,"T","");j(U,q,me,"X","");j(U,q,me,"","\\neg",!0);j(U,q,me,"","\\lnot");j(U,q,me,"","\\top");j(U,q,me,"","\\bot");j(U,q,me,"","\\emptyset");j(U,ne,me,"","\\varnothing");j(U,q,Rt,"","\\alpha",!0);j(U,q,Rt,"","\\beta",!0);j(U,q,Rt,"","\\gamma",!0);j(U,q,Rt,"","\\delta",!0);j(U,q,Rt,"","\\epsilon",!0);j(U,q,Rt,"","\\zeta",!0);j(U,q,Rt,"","\\eta",!0);j(U,q,Rt,"","\\theta",!0);j(U,q,Rt,"","\\iota",!0);j(U,q,Rt,"","\\kappa",!0);j(U,q,Rt,"","\\lambda",!0);j(U,q,Rt,"","\\mu",!0);j(U,q,Rt,"","\\nu",!0);j(U,q,Rt,"","\\xi",!0);j(U,q,Rt,"","\\omicron",!0);j(U,q,Rt,"","\\pi",!0);j(U,q,Rt,"","\\rho",!0);j(U,q,Rt,"","\\sigma",!0);j(U,q,Rt,"","\\tau",!0);j(U,q,Rt,"","\\upsilon",!0);j(U,q,Rt,"","\\phi",!0);j(U,q,Rt,"","\\chi",!0);j(U,q,Rt,"","\\psi",!0);j(U,q,Rt,"","\\omega",!0);j(U,q,Rt,"","\\varepsilon",!0);j(U,q,Rt,"","\\vartheta",!0);j(U,q,Rt,"","\\varpi",!0);j(U,q,Rt,"","\\varrho",!0);j(U,q,Rt,"","\\varsigma",!0);j(U,q,Rt,"","\\varphi",!0);j(U,q,vt,"","*",!0);j(U,q,vt,"+","+");j(U,q,vt,"","-",!0);j(U,q,vt,"","\\cdot",!0);j(U,q,vt,"","\\circ",!0);j(U,q,vt,"","\\div",!0);j(U,q,vt,"","\\pm",!0);j(U,q,vt,"","\\times",!0);j(U,q,vt,"","\\cap",!0);j(U,q,vt,"","\\cup",!0);j(U,q,vt,"","\\setminus",!0);j(U,q,vt,"","\\land");j(U,q,vt,"","\\lor");j(U,q,vt,"","\\wedge",!0);j(U,q,vt,"","\\vee",!0);j(U,q,me,"","\\surd");j(U,q,fs,"","\\langle",!0);j(U,q,fs,"","\\lvert");j(U,q,fs,"","\\lVert");j(U,q,wa,"?","?");j(U,q,wa,"!","!");j(U,q,wa,"","\\rangle",!0);j(U,q,wa,"","\\rvert");j(U,q,wa,"","\\rVert");j(U,q,ie,"=","=");j(U,q,ie,":",":");j(U,q,ie,"","\\approx",!0);j(U,q,ie,"","\\cong",!0);j(U,q,ie,"","\\ge");j(U,q,ie,"","\\geq",!0);j(U,q,ie,"","\\gets");j(U,q,ie,">","\\gt",!0);j(U,q,ie,"","\\in",!0);j(U,q,ie,"","\\@not");j(U,q,ie,"","\\subset",!0);j(U,q,ie,"","\\supset",!0);j(U,q,ie,"","\\subseteq",!0);j(U,q,ie,"","\\supseteq",!0);j(U,ne,ie,"","\\nsubseteq",!0);j(U,ne,ie,"","\\nsupseteq",!0);j(U,q,ie,"","\\models");j(U,q,ie,"","\\leftarrow",!0);j(U,q,ie,"","\\le");j(U,q,ie,"","\\leq",!0);j(U,q,ie,"<","\\lt",!0);j(U,q,ie,"","\\rightarrow",!0);j(U,q,ie,"","\\to");j(U,ne,ie,"","\\ngeq",!0);j(U,ne,ie,"","\\nleq",!0);j(U,q,Jl,"","\\ ");j(U,q,Jl,"","\\space");j(U,q,Jl,"","\\nobreakspace");j(Ge,q,Jl,"","\\ ");j(Ge,q,Jl,""," ");j(Ge,q,Jl,"","\\space");j(Ge,q,Jl,"","\\nobreakspace");j(U,q,Jl,null,"\\nobreak");j(U,q,Jl,null,"\\allowbreak");j(U,q,g2,",",",");j(U,q,g2,";",";");j(U,ne,vt,"","\\barwedge",!0);j(U,ne,vt,"","\\veebar",!0);j(U,q,vt,"","\\odot",!0);j(U,q,vt,"","\\oplus",!0);j(U,q,vt,"","\\otimes",!0);j(U,q,me,"","\\partial",!0);j(U,q,vt,"","\\oslash",!0);j(U,ne,vt,"","\\circledcirc",!0);j(U,ne,vt,"","\\boxdot",!0);j(U,q,vt,"","\\bigtriangleup");j(U,q,vt,"","\\bigtriangledown");j(U,q,vt,"","\\dagger");j(U,q,vt,"","\\diamond");j(U,q,vt,"","\\star");j(U,q,vt,"","\\triangleleft");j(U,q,vt,"","\\triangleright");j(U,q,fs,"{","\\{");j(Ge,q,me,"{","\\{");j(Ge,q,me,"{","\\textbraceleft");j(U,q,wa,"}","\\}");j(Ge,q,me,"}","\\}");j(Ge,q,me,"}","\\textbraceright");j(U,q,fs,"{","\\lbrace");j(U,q,wa,"}","\\rbrace");j(U,q,fs,"[","\\lbrack",!0);j(Ge,q,me,"[","\\lbrack",!0);j(U,q,wa,"]","\\rbrack",!0);j(Ge,q,me,"]","\\rbrack",!0);j(U,q,fs,"(","\\lparen",!0);j(U,q,wa,")","\\rparen",!0);j(Ge,q,me,"<","\\textless",!0);j(Ge,q,me,">","\\textgreater",!0);j(U,q,fs,"","\\lfloor",!0);j(U,q,wa,"","\\rfloor",!0);j(U,q,fs,"","\\lceil",!0);j(U,q,wa,"","\\rceil",!0);j(U,q,me,"\\","\\backslash");j(U,q,me,"","|");j(U,q,me,"","\\vert");j(Ge,q,me,"|","\\textbar",!0);j(U,q,me,"","\\|");j(U,q,me,"","\\Vert");j(Ge,q,me,"","\\textbardbl");j(Ge,q,me,"~","\\textasciitilde");j(Ge,q,me,"\\","\\textbackslash");j(Ge,q,me,"^","\\textasciicircum");j(U,q,ie,"","\\uparrow",!0);j(U,q,ie,"","\\Uparrow",!0);j(U,q,ie,"","\\downarrow",!0);j(U,q,ie,"","\\Downarrow",!0);j(U,q,ie,"","\\updownarrow",!0);j(U,q,ie,"","\\Updownarrow",!0);j(U,q,fi,"","\\coprod");j(U,q,fi,"","\\bigvee");j(U,q,fi,"","\\bigwedge");j(U,q,fi,"","\\biguplus");j(U,q,fi,"","\\bigcap");j(U,q,fi,"","\\bigcup");j(U,q,fi,"","\\int");j(U,q,fi,"","\\intop");j(U,q,fi,"","\\iint");j(U,q,fi,"","\\iiint");j(U,q,fi,"","\\prod");j(U,q,fi,"","\\sum");j(U,q,fi,"","\\bigotimes");j(U,q,fi,"","\\bigoplus");j(U,q,fi,"","\\bigodot");j(U,q,fi,"","\\oint");j(U,q,fi,"","\\oiint");j(U,q,fi,"","\\oiiint");j(U,q,fi,"","\\bigsqcup");j(U,q,fi,"","\\smallint");j(Ge,q,Tf,"","\\textellipsis");j(U,q,Tf,"","\\mathellipsis");j(Ge,q,Tf,"","\\ldots",!0);j(U,q,Tf,"","\\ldots",!0);j(U,q,Tf,"","\\@cdots",!0);j(U,q,Tf,"","\\ddots",!0);j(U,q,me,"","\\varvdots");j(Ge,q,me,"","\\varvdots");j(U,q,kn,"","\\acute");j(U,q,kn,"","\\grave");j(U,q,kn,"","\\ddot");j(U,q,kn,"~","\\tilde");j(U,q,kn,"","\\bar");j(U,q,kn,"","\\breve");j(U,q,kn,"","\\check");j(U,q,kn,"^","\\hat");j(U,q,kn,"","\\vec");j(U,q,kn,"","\\dot");j(U,q,kn,"","\\mathring");j(U,q,Rt,"","\\@imath");j(U,q,Rt,"","\\@jmath");j(U,q,me,"","");j(U,q,me,"","");j(Ge,q,me,"","\\i",!0);j(Ge,q,me,"","\\j",!0);j(Ge,q,me,"","\\ss",!0);j(Ge,q,me,"","\\ae",!0);j(Ge,q,me,"","\\oe",!0);j(Ge,q,me,"","\\o",!0);j(Ge,q,me,"","\\AE",!0);j(Ge,q,me,"","\\OE",!0);j(Ge,q,me,"","\\O",!0);j(Ge,q,kn,"","\\'");j(Ge,q,kn,"","\\`");j(Ge,q,kn,"","\\^");j(Ge,q,kn,"","\\~");j(Ge,q,kn,"","\\=");j(Ge,q,kn,"","\\u");j(Ge,q,kn,"","\\.");j(Ge,q,kn,"","\\c");j(Ge,q,kn,"","\\r");j(Ge,q,kn,"","\\v");j(Ge,q,kn,"",'\\"');j(Ge,q,kn,"","\\H");j(Ge,q,kn,"","\\textcircled");var aH={"--":!0,"---":!0,"``":!0,"''":!0};j(Ge,q,me,"","--",!0);j(Ge,q,me,"","\\textendash");j(Ge,q,me,"","---",!0);j(Ge,q,me,"","\\textemdash");j(Ge,q,me,"","`",!0);j(Ge,q,me,"","\\textquoteleft");j(Ge,q,me,"","'",!0);j(Ge,q,me,"","\\textquoteright");j(Ge,q,me,"","``",!0);j(Ge,q,me,"","\\textquotedblleft");j(Ge,q,me,"","''",!0);j(Ge,q,me,"","\\textquotedblright");j(U,q,me,"","\\degree",!0);j(Ge,q,me,"","\\degree");j(Ge,q,me,"","\\textdegree",!0);j(U,q,me,"","\\pounds");j(U,q,me,"","\\mathsterling",!0);j(Ge,q,me,"","\\pounds");j(Ge,q,me,"","\\textsterling",!0);j(U,ne,me,"","\\maltese");j(Ge,ne,me,"","\\maltese");var YI='0123456789/@."';for(var z5=0;z5<YI.length;z5++){var ZI=YI.charAt(z5);j(U,q,me,ZI,ZI)}var JI='0123456789!@*()-=+";:?/.,';for(var $5=0;$5<JI.length;$5++){var eR=JI.charAt($5);j(Ge,q,me,eR,eR)}var Tb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var V5=0;V5<Tb.length;V5++){var tv=Tb.charAt(V5);j(U,q,Rt,tv,tv),j(Ge,q,me,tv,tv)}j(U,ne,me,"C","");j(Ge,ne,me,"C","");j(U,ne,me,"H","");j(Ge,ne,me,"H","");j(U,ne,me,"N","");j(Ge,ne,me,"N","");j(U,ne,me,"P","");j(Ge,ne,me,"P","");j(U,ne,me,"Q","");j(Ge,ne,me,"Q","");j(U,ne,me,"R","");j(Ge,ne,me,"R","");j(U,ne,me,"Z","");j(Ge,ne,me,"Z","");j(U,q,Rt,"h","");j(Ge,q,Rt,"h","");var Ut="";for(var ha=0;ha<Tb.length;ha++){var zn=Tb.charAt(ha);Ut=String.fromCharCode(55349,56320+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56372+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56424+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56580+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56684+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56736+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56788+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56840+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56944+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),ha<26&&(Ut=String.fromCharCode(55349,56632+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut),Ut=String.fromCharCode(55349,56476+ha),j(U,q,Rt,zn,Ut),j(Ge,q,me,zn,Ut))}Ut="";j(U,q,Rt,"k",Ut);j(Ge,q,me,"k",Ut);for(var rd=0;rd<10;rd++){var Uc=rd.toString();Ut=String.fromCharCode(55349,57294+rd),j(U,q,Rt,Uc,Ut),j(Ge,q,me,Uc,Ut),Ut=String.fromCharCode(55349,57314+rd),j(U,q,Rt,Uc,Ut),j(Ge,q,me,Uc,Ut),Ut=String.fromCharCode(55349,57324+rd),j(U,q,Rt,Uc,Ut),j(Ge,q,me,Uc,Ut),Ut=String.fromCharCode(55349,57334+rd),j(U,q,Rt,Uc,Ut),j(Ge,q,me,Uc,Ut)}var pA="";for(var F5=0;F5<pA.length;F5++){var rv=pA.charAt(F5);j(U,q,Rt,rv,rv),j(Ge,q,me,rv,rv)}var nv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],tR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Wle=function(e,r){var n=e.charCodeAt(0),i=e.charCodeAt(1),a=(n-55296)*1024+(i-56320)+65536,s=r==="math"?0:1;if(119808<=a&&a<120484){var c=Math.floor((a-119808)/26);return[nv[c][2],nv[c][s]]}else if(120782<=a&&a<=120831){var d=Math.floor((a-120782)/10);return[tR[d][2],tR[d][s]]}else{if(a===120485||a===120486)return[nv[0][2],nv[0][s]];if(120486<a&&a<120782)return["",""];throw new Je("Unsupported character: "+e)}},y2=function(e,r,n){return xn[n][e]&&xn[n][e].replace&&(e=xn[n][e].replace),{value:e,metrics:jE(e,r,n)}},Zs=function(e,r,n,i,a){var s=y2(e,r,n),c=s.metrics;e=s.value;var d;if(c){var h=c.italic;(n==="text"||i&&i.font==="mathit")&&(h=0),d=new Ms(e,c.height,c.depth,h,c.skew,c.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new Ms(e,0,0,0,0,0,a);if(i){d.maxFontSize=i.sizeMultiplier,i.style.isTight()&&d.classes.push("mtight");var p=i.getColor();p&&(d.style.color=p)}return d},Xle=function(e,r,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&y2(e,"Main-Bold",r).metrics?Zs(e,"Main-Bold",r,n,i.concat(["mathbf"])):e==="\\"||xn[r][e].font==="main"?Zs(e,"Main-Regular",r,n,i):Zs(e,"AMS-Regular",r,n,i.concat(["amsrm"]))},Qle=function(e,r,n,i,a){return a!=="textord"&&y2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Yle=function(e,r,n){var i=e.mode,a=e.text,s=["mord"],c=i==="math"||i==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(a.charCodeAt(0)===55349&&([h,p]=Wle(a,i)),h.length>0)return Zs(a,h,i,r,s.concat(p));if(d){var m,y;if(d==="boldsymbol"){var b=Qle(a,i,r,s,n);m=b.fontName,y=[b.fontClass]}else c?(m=lH[d].fontName,y=[d]):(m=iv(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(y2(a,m,i).metrics)return Zs(a,m,i,r,s.concat(y));if(aH.hasOwnProperty(a)&&m.slice(0,10)==="Typewriter"){for(var T=[],_=0;_<a.length;_++)T.push(Zs(a[_],m,i,r,s.concat(y)));return oH(T)}}if(n==="mathord")return Zs(a,"Math-Italic",i,r,s.concat(["mathnormal"]));if(n==="textord"){var w=xn[i][a]&&xn[i][a].font;if(w==="ams"){var N=iv("amsrm",r.fontWeight,r.fontShape);return Zs(a,N,i,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var k=iv("textrm",r.fontWeight,r.fontShape);return Zs(a,k,i,r,s.concat(r.fontWeight,r.fontShape))}else{var C=iv(w,r.fontWeight,r.fontShape);return Zs(a,C,i,r,s.concat(C,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Zle=(t,e)=>{if(gu(t.classes)!==gu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},Jle=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof Ms&&n instanceof Ms&&Zle(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},kE=function(e){for(var r=0,n=0,i=0,a=0;a<e.children.length;a++){var s=e.children[a];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=i},Ra=function(e,r,n,i){var a=new r1(e,r,n,i);return kE(a),a},sH=(t,e,r,n)=>new r1(t,e,r,n),ece=function(e,r,n){var i=Ra([e],[],r);return i.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),i.style.borderBottomWidth=ot(i.height),i.maxFontSize=1,i},tce=function(e,r,n,i){var a=new CE(e,r,n,i);return kE(a),a},oH=function(e){var r=new t1(e);return kE(r),r},rce=function(e,r){return e instanceof t1?Ra([],[e],r):e},nce=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,a=i,s=1;s<r.length;s++){var c=-r[s].shift-a-r[s].elem.depth,d=c-(r[s-1].elem.height+r[s-1].elem.depth);a=a+c,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:i}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var b=e.children[0];if(b.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-b.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-b.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},ice=function(e,r){for(var{children:n,depth:i}=nce(e),a=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;a=Math.max(a,d.maxFontSize,d.height)}}a+=2;var h=Ra(["pstrut"],[]);h.style.height=ot(a);for(var p=[],m=i,y=i,b=i,T=0;T<n.length;T++){var _=n[T];if(_.type==="kern")b+=_.size;else{var w=_.elem,N=_.wrapperClasses||[],k=_.wrapperStyle||{},C=Ra(N,[h,w],void 0,k);C.style.top=ot(-a-b-w.depth),_.marginLeft&&(C.style.marginLeft=_.marginLeft),_.marginRight&&(C.style.marginRight=_.marginRight),p.push(C),b+=w.height+w.depth}m=Math.min(m,b),y=Math.max(y,b)}var $=Ra(["vlist"],p);$.style.height=ot(y);var I;if(m<0){var L=Ra([],[]),E=Ra(["vlist"],[L]);E.style.height=ot(-m);var A=Ra(["vlist-s"],[new Ms("")]);I=[Ra(["vlist-r"],[$,A]),Ra(["vlist-r"],[E])]}else I=[Ra(["vlist-r"],[$])];var R=Ra(["vlist-t"],I);return I.length===2&&R.classes.push("vlist-t2"),R.height=y,R.depth=-m,R},ace=(t,e)=>{var r=Ra(["mspace"],[],e),n=Rn(t,e);return r.style.marginRight=ot(n),r},iv=function(e,r,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",i+"-"+a},lH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},cH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},sce=function(e,r){var[n,i,a]=cH[e],s=new yu(n),c=new Fl([s],{width:ot(i),height:ot(a),style:"width:"+ot(i),viewBox:"0 0 "+1e3*i+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),d=sH(["overlay"],[c],r);return d.height=a,d.style.height=ot(a),d.style.width=ot(i),d},Te={fontMap:lH,makeSymbol:Zs,mathsym:Xle,makeSpan:Ra,makeSvgSpan:sH,makeLineSpan:ece,makeAnchor:tce,makeFragment:oH,wrapFragment:rce,makeVList:ice,makeOrd:Yle,makeGlue:ace,staticSvg:sce,svgData:cH,tryCombineChars:Jle},In={number:3,unit:"mu"},nd={number:4,unit:"mu"},ml={number:5,unit:"mu"},oce={mord:{mop:In,mbin:nd,mrel:ml,minner:In},mop:{mord:In,mop:In,mrel:ml,minner:In},mbin:{mord:nd,mop:nd,mopen:nd,minner:nd},mrel:{mord:ml,mop:ml,mopen:ml,minner:ml},mopen:{},mclose:{mop:In,mbin:nd,mrel:ml,minner:In},mpunct:{mord:In,mop:In,mrel:ml,mopen:In,mclose:In,mpunct:In,minner:In},minner:{mord:In,mop:In,mbin:nd,mrel:ml,mopen:In,mpunct:In,minner:In}},lce={mord:{mop:In},mop:{mord:In,mop:In},mbin:{},mrel:{},mopen:{},mclose:{mop:In},mpunct:{},minner:{mop:In}},uH={},Ab={},Eb={};function pt(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},d=0;d<r.length;++d)uH[r[d]]=c;e&&(a&&(Ab[e]=a),s&&(Eb[e]=s))}function n0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;pt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Nb=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ei=function(e){return e.type==="ordgroup"?e.body:[e]},ql=Te.makeSpan,cce=["leftmost","mbin","mopen","mrel","mop","mpunct"],uce=["rightmost","mrel","mclose","mpunct"],dce={display:Mt.DISPLAY,text:Mt.TEXT,script:Mt.SCRIPT,scriptscript:Mt.SCRIPTSCRIPT},hce={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Si=function(e,r,n,i){i===void 0&&(i=[null,null]);for(var a=[],s=0;s<e.length;s++){var c=Tr(e[s],r);if(c instanceof t1){var d=c.children;a.push(...d)}else a.push(c)}if(Te.tryCombineChars(a),!n)return a;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(dce[p.style]))}var m=ql([i[0]||"leftmost"],[],r),y=ql([i[1]||"rightmost"],[],r),b=n==="root";return rR(a,(T,_)=>{var w=_.classes[0],N=T.classes[0];w==="mbin"&&uce.includes(N)?_.classes[0]="mord":N==="mbin"&&cce.includes(w)&&(T.classes[0]="mord")},{node:m},y,b),rR(a,(T,_)=>{var w=mA(_),N=mA(T),k=w&&N?T.hasClass("mtight")?lce[w][N]:oce[w][N]:null;if(k)return Te.makeGlue(k,h)},{node:m},y,b),a},rR=function t(e,r,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var c=e[s],d=dH(c);if(d){t(d.children,r,n,null,a);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),s++))}h?n.node=c:a&&c.hasClass("newline")&&(n.node=ql(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),s++})(s)}i&&e.pop()},dH=function(e){return e instanceof t1||e instanceof CE||e instanceof r1&&e.hasClass("enclosing")?e:null},fce=function t(e,r){var n=dH(e);if(n){var i=n.children;if(i.length){if(r==="right")return t(i[i.length-1],"right");if(r==="left")return t(i[0],"left")}}return e},mA=function(e,r){return e?(r&&(e=fce(e,r)),hce[e.classes[0]]||null):null},Xm=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return ql(r.concat(n))},Tr=function(e,r,n){if(!e)return ql();if(Ab[e.type]){var i=Ab[e.type](e,r);if(n&&r.size!==n.size){i=ql(r.sizingClasses(n),[i],r);var a=r.sizeMultiplier/n.sizeMultiplier;i.height*=a,i.depth*=a}return i}else throw new Je("Got group of unknown type: '"+e.type+"'")};function av(t,e){var r=ql(["base"],t,e),n=ql(["strut"]);return n.style.height=ot(r.height+r.depth),r.depth&&(n.style.verticalAlign=ot(-r.depth)),r.children.unshift(n),r}function gA(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Si(t,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var a=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(a.push(av(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(av(s,e)),s=[]),a.push(n[c]));s.length>0&&a.push(av(s,e));var h;r?(h=av(Si(r,e,!0)),h.classes=["tag"],a.push(h)):i&&a.push(i);var p=ql(["katex-html"],a);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=ot(p.height+p.depth),p.depth&&(m.style.verticalAlign=ot(-p.depth))}return p}function hH(t){return new t1(t)}class ns{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=gu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof No&&this.children[n+1]instanceof No){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof No;)i+=this.children[++n].toText();e.appendChild(new No(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=kr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+kr.escape(gu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class No{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return kr.escape(this.toText())}toText(){return this.text}}class pce{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",ot(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+ot(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ze={MathNode:ns,TextNode:No,SpaceNode:pce,newDocumentFragment:hH},Ps=function(e,r,n){return xn[r][e]&&xn[r][e].replace&&e.charCodeAt(0)!==55349&&!(aH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=xn[r][e].replace),new Ze.TextNode(e)},OE=function(e){return e.length===1?e[0]:new Ze.MathNode("mrow",e)},IE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=e.text;if(["\\imath","\\jmath"].includes(a))return null;xn[i][a]&&xn[i][a].replace&&(a=xn[i][a].replace);var s=Te.fontMap[n].fontName;return jE(a,s,i)?Te.fontMap[n].variant:null};function q5(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof No&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof No&&r.text===","}else return!1}var Fa=function(e,r,n){if(e.length===1){var i=dn(e[0],r);return n&&i instanceof ns&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var a=[],s,c=0;c<e.length;c++){var d=dn(e[c],r);if(d instanceof ns&&s instanceof ns){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(q5(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&q5(s))d.children=[...s.children,...d.children],a.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||q5(s))){var h=d.children[0];h instanceof ns&&h.type==="mn"&&(h.children=[...s.children,...h.children],a.pop())}else if(s.type==="mi"&&s.children.length===1){var p=s.children[0];if(p instanceof No&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof No&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),a.pop())}}}a.push(d),s=d}return a},vu=function(e,r,n){return OE(Fa(e,r,n))},dn=function(e,r){if(!e)return new Ze.MathNode("mrow");if(Eb[e.type]){var n=Eb[e.type](e,r);return n}else throw new Je("Got group of unknown type: '"+e.type+"'")};function nR(t,e,r,n,i){var a=Fa(t,r),s;a.length===1&&a[0]instanceof ns&&["mrow","mtable"].includes(a[0].type)?s=a[0]:s=new Ze.MathNode("mrow",a);var c=new Ze.MathNode("annotation",[new Ze.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new Ze.MathNode("semantics",[s,c]),h=new Ze.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=i?"katex":"katex-mathml";return Te.makeSpan([p],[h])}var fH=function(e){return new xl({style:e.displayMode?Mt.DISPLAY:Mt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},pH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Te.makeSpan(n,[e])}return e},mce=function(e,r,n){var i=fH(n),a;if(n.output==="mathml")return nR(e,r,i,n.displayMode,!0);if(n.output==="html"){var s=gA(e,i);a=Te.makeSpan(["katex"],[s])}else{var c=nR(e,r,i,n.displayMode,!1),d=gA(e,i);a=Te.makeSpan(["katex"],[c,d])}return pH(a,n)},gce=function(e,r,n){var i=fH(n),a=gA(e,i),s=Te.makeSpan(["katex"],[a]);return pH(s,n)},yce={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},vce=function(e){var r=new Ze.MathNode("mo",[new Ze.TextNode(yce[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},bce={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},xce=function(e){return e.type==="ordgroup"?e.body.length:1},wce=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=xce(h.base),m,y,b;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,b=.42,y=d+"4"):(m=312,c=2340,b=.34,y="tilde4");else{var T=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],m=[0,239,300,360,420][T],b=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],m=[0,260,286,306,312][T],b=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var _=new yu(y),w=new Fl([_],{width:"100%",height:ot(b),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Te.makeSvgSpan([],[w],r),minWidth:0,height:b}}else{var N=[],k=bce[d],[C,$,I]=k,L=I/1e3,E=C.length,A,R;if(E===1){var F=k[3];A=["hide-tail"],R=[F]}else if(E===2)A=["halfarrow-left","halfarrow-right"],R=["xMinYMin","xMaxYMin"];else if(E===3)A=["brace-left","brace-center","brace-right"],R=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var P=0;P<E;P++){var B=new yu(C[P]),D=new Fl([B],{width:"400em",height:ot(L),viewBox:"0 0 "+c+" "+I,preserveAspectRatio:R[P]+" slice"}),Y=Te.makeSvgSpan([A[P]],[D],r);if(E===1)return{span:Y,minWidth:$,height:L};Y.style.height=ot(L),N.push(Y)}return{span:Te.makeSpan(["stretchy"],N,r),minWidth:$,height:L}}}var{span:i,minWidth:a,height:s}=n();return i.height=s,i.style.height=ot(s),a>0&&(i.style.minWidth=ot(a)),i},_ce=function(e,r,n,i,a){var s,c=e.height+e.depth+n+i;if(/fbox|color|angl/.test(r)){if(s=Te.makeSpan(["stretchy",r],[],a),r==="fbox"){var d=a.color&&a.getColor();d&&(s.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new fA({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new fA({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new Fl(h,{width:"100%",height:ot(c)});s=Te.makeSvgSpan([],[p],a)}return s.height=c,s.style.height=ot(c),s},Hl={encloseSpan:_ce,mathMLnode:vce,svgSpan:wce};function or(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function RE(t){var e=v2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function v2(t){return t&&(t.type==="atom"||Kle.hasOwnProperty(t.type))?t:null}var ME=(t,e)=>{var r,n,i;t&&t.type==="supsub"?(n=or(t.base,"accent"),r=n.base,t.base=r,i=Hle(Tr(t,e)),t.base=n):(n=or(t,"accent"),r=n.base);var a=Tr(r,e.havingCrampedStyle()),s=n.isShifty&&kr.isCharacterBox(r),c=0;if(s){var d=kr.getBaseElem(r),h=Tr(d,e.havingCrampedStyle());c=QI(h).skew}var p=n.label==="\\c",m=p?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=Hl.svgSpan(n,e),y=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+ot(2*c)+")",marginLeft:ot(2*c)}:void 0}]},e);else{var b,T;n.label==="\\vec"?(b=Te.staticSvg("vec",e),T=Te.svgData.vec[1]):(b=Te.makeOrd({mode:n.mode,text:n.label},e,"textord"),b=QI(b),b.italic=0,T=b.width,p&&(m+=b.depth)),y=Te.makeSpan(["accent-body"],[b]);var _=n.label==="\\textcircled";_&&(y.classes.push("accent-full"),m=a.height);var w=c;_||(w-=T/2),y.style.left=ot(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var N=Te.makeSpan(["mord","accent"],[y],e);return i?(i.children[0]=N,i.height=Math.max(N.height,i.height),i.classes[0]="mord",i):N},mH=(t,e)=>{var r=t.isStretchy?Hl.mathMLnode(t.label):new Ze.MathNode("mo",[Ps(t.label,t.mode)]),n=new Ze.MathNode("mover",[dn(t.base,e),r]);return n.setAttribute("accent","true"),n},Sce=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));pt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Nb(e[0]),n=!Sce.test(t.funcName),i=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:ME,mathmlBuilder:mH});pt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:ME,mathmlBuilder:mH});pt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(t,e)=>{var r=Tr(t.base,e),n=Hl.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,a=Te.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},e);return Te.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(t,e)=>{var r=Hl.mathMLnode(t.label),n=new Ze.MathNode("munder",[dn(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var sv=t=>{var e=new Ze.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};pt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:i}=t;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),i=Te.wrapFragment(Tr(t.body,n,e),e),a=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(a+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=Te.wrapFragment(Tr(t.below,n,e),e),s.classes.push(a+"-arrow-pad"));var c=Hl.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(h-=i.depth);var p;if(s){var m=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;p=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:m}]},e)}else p=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Te.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=Hl.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var i=sv(dn(t.body,e));if(t.below){var a=sv(dn(t.below,e));n=new Ze.MathNode("munderover",[r,a,i])}else n=new Ze.MathNode("mover",[r,i])}else if(t.below){var s=sv(dn(t.below,e));n=new Ze.MathNode("munder",[r,s])}else n=sv(),n=new Ze.MathNode("mover",[r,n]);return n}});var Tce=Te.makeSpan;function gH(t,e){var r=Si(t.body,e,!0);return Tce([t.mclass],r,e)}function yH(t,e){var r,n=Fa(t.body,e);return t.mclass==="minner"?r=new Ze.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new Ze.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new Ze.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}pt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:ei(i),isCharacterBox:kr.isCharacterBox(i)}},htmlBuilder:gH,mathmlBuilder:yH});var b2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};pt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:b2(e[0]),body:ei(e[1]),isCharacterBox:kr.isCharacterBox(e[1])}}});pt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,i=e[1],a=e[0],s;n!=="\\stackrel"?s=b2(i):s="mrel";var c={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:ei(i)},d={type:"supsub",mode:a.mode,base:c,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:kr.isCharacterBox(d)}},htmlBuilder:gH,mathmlBuilder:yH});pt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:b2(e[0]),body:ei(e[0])}},htmlBuilder(t,e){var r=Si(t.body,e,!0),n=Te.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=Fa(t.body,e),n=new Ze.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Ace={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},iR=()=>({type:"styling",body:[],mode:"math",style:"display"}),aR=t=>t.type==="textord"&&t.text==="@",Ece=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Nce(t,e,r){var n=Ace[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=r.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[a],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[i,s,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function jce(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Je("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],c=iR(),d=0;d<s.length;d++)if(!aR(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var h=RE(s[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,b=d+1;b<s.length;b++){if(Ece(s[b],h)){y=!1,d=b;break}if(aR(s[b]))throw new Je("Missing a "+h+" character to complete a CD arrow.",s[b]);p[m].body.push(s[b])}if(y)throw new Je("Missing a "+h+" character to complete a CD arrow.",s[d])}else throw new Je('Expected one of "<>AV=|." after @',s[d]);var T=Nce(h,p,t),_={type:"styling",body:[T],mode:"math",style:"display"};n.push(_),c=iR()}a%2===0?n.push(c):n.shift(),n=[],i.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}pt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Te.wrapFragment(Tr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=ot(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new Ze.MathNode("mrow",[dn(t.label,e)]);return r=new Ze.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Ze.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});pt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Te.wrapFragment(Tr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new Ze.MathNode("mrow",[dn(t.fragment,e)])}});pt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=or(e[0],"ordgroup"),i=n.body,a="",s=0;s<i.length;s++){var c=or(i[s],"textord");a+=c.text}var d=parseInt(a),h;if(isNaN(d))throw new Je("\\@char has non-numeric argument "+a);if(d<0||d>=1114111)throw new Je("\\@char with invalid code point "+a);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var vH=(t,e)=>{var r=Si(t.body,e.withColor(t.color),!1);return Te.makeFragment(r)},bH=(t,e)=>{var r=Fa(t.body,e.withColor(t.color)),n=new Ze.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};pt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=or(e[0],"color-token").color,i=e[1];return{type:"color",mode:r.mode,color:n,body:ei(i)}},htmlBuilder:vH,mathmlBuilder:bH});pt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,i=or(e[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:a}},htmlBuilder:vH,mathmlBuilder:bH});pt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&or(i,"size").value}},htmlBuilder(t,e){var r=Te.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=ot(Rn(t.size,e)))),r},mathmlBuilder(t,e){var r=new Ze.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",ot(Rn(t.size,e)))),r}});var yA={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},xH=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Je("Expected a control sequence",t);return e},Cce=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},wH=(t,e,r,n)=>{var i=t.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,i,n)};pt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(yA[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=yA[n.text]),or(e.parseFunction(),"internal");throw new Je("Invalid token after macro prefix",n)}});pt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new Je("Expected a control sequence",n);for(var a=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[a].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Je('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new Je('Argument number "'+n.text+'" out of order');a++,c.push([])}else{if(n.text==="EOF")throw new Je("Expected a macro definition");c[a].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(i,{tokens:d,numArgs:a,delimiters:c},r===yA[r]),{type:"internal",mode:e.mode}}});pt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=xH(e.gullet.popToken());e.gullet.consumeSpaces();var i=Cce(e);return wH(e,n,i,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});pt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=xH(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return wH(e,n,a,r==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Jp=function(e,r,n){var i=xn.math[e]&&xn.math[e].replace,a=jE(i||e,r,n);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return a},PE=function(e,r,n,i){var a=n.havingBaseStyle(r),s=Te.makeSpan(i.concat(a.sizingClasses(n)),[e],n),c=a.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=a.sizeMultiplier,s},_H=function(e,r,n){var i=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/i.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=ot(a),e.height-=a,e.depth+=a},kce=function(e,r,n,i,a,s){var c=Te.makeSymbol(e,"Main-Regular",a,i),d=PE(c,r,i,s);return n&&_H(d,i,r),d},Oce=function(e,r,n,i){return Te.makeSymbol(e,"Size"+r+"-Regular",n,i)},SH=function(e,r,n,i,a,s){var c=Oce(e,r,a,i),d=PE(Te.makeSpan(["delimsizing","size"+r],[c],i),Mt.TEXT,i,s);return n&&_H(d,i,Mt.TEXT),d},H5=function(e,r,n){var i;r==="Size1-Regular"?i="delim-size1":i="delim-size4";var a=Te.makeSpan(["delimsizinginner",i],[Te.makeSpan([],[Te.makeSymbol(e,r,n)])]);return{type:"elem",elem:a}},G5=function(e,r,n){var i=Eo["Size4-Regular"][e.charCodeAt(0)]?Eo["Size4-Regular"][e.charCodeAt(0)][4]:Eo["Size1-Regular"][e.charCodeAt(0)][4],a=new yu("inner",Dle(e,Math.round(1e3*r))),s=new Fl([a],{width:ot(i),height:ot(r),style:"width:"+ot(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Te.makeSvgSpan([],[s],n);return c.height=r,c.style.height=ot(r),c.style.width=ot(i),{type:"elem",elem:c}},vA=.008,ov={type:"kern",size:-1*vA},Ice=["|","\\lvert","\\rvert","\\vert"],Rce=["\\|","\\lVert","\\rVert","\\Vert"],TH=function(e,r,n,i,a,s){var c,d,h,p,m="",y=0;c=h=p=e,d=null;var b="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):Ice.includes(e)?(h="",m="vert",y=333):Rce.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",h="",p="",b="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",b="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=c="",p="",b="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(c="",h=p="",b="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=c="",p="",b="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(c="",h=p="",b="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(c="",h="",p="",b="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(c="",h="",p="",b="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",b="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",b="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",b="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",b="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",b="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",b="Size4-Regular");var T=Jp(c,b,a),_=T.height+T.depth,w=Jp(h,b,a),N=w.height+w.depth,k=Jp(p,b,a),C=k.height+k.depth,$=0,I=1;if(d!==null){var L=Jp(d,b,a);$=L.height+L.depth,I=2}var E=_+C+$,A=Math.max(0,Math.ceil((r-E)/(I*N))),R=E+A*I*N,F=i.fontMetrics().axisHeight;n&&(F*=i.sizeMultiplier);var P=R/2-F,B=[];if(m.length>0){var D=R-_-C,Y=Math.round(R*1e3),J=Lle(m,Math.round(D*1e3)),X=new yu(m,J),ee=(y/1e3).toFixed(3)+"em",Z=(Y/1e3).toFixed(3)+"em",ge=new Fl([X],{width:ee,height:Z,viewBox:"0 0 "+y+" "+Y}),ce=Te.makeSvgSpan([],[ge],i);ce.height=Y/1e3,ce.style.width=ee,ce.style.height=Z,B.push({type:"elem",elem:ce})}else{if(B.push(H5(p,b,a)),B.push(ov),d===null){var Q=R-_-C+2*vA;B.push(G5(h,Q,i))}else{var re=(R-_-C-$)/2+2*vA;B.push(G5(h,re,i)),B.push(ov),B.push(H5(d,b,a)),B.push(ov),B.push(G5(h,re,i))}B.push(ov),B.push(H5(c,b,a))}var de=i.havingBaseStyle(Mt.TEXT),oe=Te.makeVList({positionType:"bottom",positionData:P,children:B},de);return PE(Te.makeSpan(["delimsizing","mult"],[oe],de),Mt.TEXT,i,s)},K5=80,W5=.08,X5=function(e,r,n,i,a){var s=Ple(e,i,n),c=new yu(e,s),d=new Fl([c],{width:"400em",height:ot(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Te.makeSvgSpan(["hide-tail"],[d],a)},Mce=function(e,r){var n=r.havingBaseSizing(),i=jH("\\surd",e*n.sizeMultiplier,NH,n),a=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return i.type==="small"?(p=1e3+1e3*s+K5,e<1?a=1:e<1.4&&(a=.7),d=(1+s+W5)/a,h=(1+s)/a,c=X5("sqrtMain",d,p,s,r),c.style.minWidth="0.853em",m=.833/a):i.type==="large"?(p=(1e3+K5)*pm[i.size],h=(pm[i.size]+s)/a,d=(pm[i.size]+s+W5)/a,c=X5("sqrtSize"+i.size,d,p,s,r),c.style.minWidth="1.02em",m=1/a):(d=e+s+W5,h=e+s,p=Math.floor(1e3*e+s)+K5,c=X5("sqrtTall",d,p,s,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=ot(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*a}},AH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Pce=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],EH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],pm=[0,1.2,1.8,2.4,3],Dce=function(e,r,n,i,a){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),AH.includes(e)||EH.includes(e))return SH(e,r,!1,n,i,a);if(Pce.includes(e))return TH(e,pm[r],!1,n,i,a);throw new Je("Illegal delimiter: '"+e+"'")},Lce=[{type:"small",style:Mt.SCRIPTSCRIPT},{type:"small",style:Mt.SCRIPT},{type:"small",style:Mt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Bce=[{type:"small",style:Mt.SCRIPTSCRIPT},{type:"small",style:Mt.SCRIPT},{type:"small",style:Mt.TEXT},{type:"stack"}],NH=[{type:"small",style:Mt.SCRIPTSCRIPT},{type:"small",style:Mt.SCRIPT},{type:"small",style:Mt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Uce=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},jH=function(e,r,n,i){for(var a=Math.min(2,3-i.style.size),s=a;s<n.length&&n[s].type!=="stack";s++){var c=Jp(e,Uce(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var h=i.havingBaseStyle(n[s].style);d*=h.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},CH=function(e,r,n,i,a,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;EH.includes(e)?c=Lce:AH.includes(e)?c=NH:c=Bce;var d=jH(e,r,c,i);return d.type==="small"?kce(e,d.style,n,i,a,s):d.type==="large"?SH(e,d.size,n,i,a,s):TH(e,r,n,i,a,s)},zce=function(e,r,n,i,a,s){var c=i.fontMetrics().axisHeight*i.sizeMultiplier,d=901,h=5/i.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return CH(e,m,!0,i,a,s)},Rl={sqrtImage:Mce,sizedDelim:Dce,sizeToMaxHeight:pm,customSizedDelim:CH,leftRightDelim:zce},sR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},$ce=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function x2(t,e){var r=v2(t);if(r&&$ce.includes(r.text))return r;throw r?new Je("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new Je("Invalid delimiter type '"+t.type+"'",t)}pt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=x2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:sR[t.funcName].size,mclass:sR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Te.makeSpan([t.mclass]):Rl.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Ps(t.delim,t.mode));var r=new Ze.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=ot(Rl.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function oR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}pt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Je("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:x2(e[0],t).text,color:r}}});pt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=x2(e[0],t),n=t.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=or(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(t,e)=>{oR(t);for(var r=Si(t.body,e,!0,["mopen","mclose"]),n=0,i=0,a=!1,s=0;s<r.length;s++)r[s].isMiddle?a=!0:(n=Math.max(r[s].height,n),i=Math.max(r[s].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var c;if(t.left==="."?c=Xm(e,["mopen"]):c=Rl.leftRightDelim(t.left,n,i,e,t.mode,["mopen"]),r.unshift(c),a)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Rl.leftRightDelim(p.delim,n,i,p.options,t.mode,[]))}var m;if(t.right===".")m=Xm(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=Rl.leftRightDelim(t.right,n,i,y,t.mode,["mclose"])}return r.push(m),Te.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{oR(t);var r=Fa(t.body,e);if(t.left!=="."){var n=new Ze.MathNode("mo",[Ps(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var i=new Ze.MathNode("mo",[Ps(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),r.push(i)}return OE(r)}});pt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=x2(e[0],t);if(!t.parser.leftrightDepth)throw new Je("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Xm(e,[]);else{r=Rl.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?Ps("|","text"):Ps(t.delim,t.mode),n=new Ze.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var DE=(t,e)=>{var r=Te.wrapFragment(Tr(t.body,e),e),n=t.label.slice(1),i=e.sizeMultiplier,a,s=0,c=kr.isCharacterBox(t.body);if(n==="sout")a=Te.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/i,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Rn({number:.6,unit:"pt"},e),h=Rn({number:.35,unit:"ex"},e),p=e.havingBaseSizing();i=i/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=ot(m/2+d);var y=Math.floor(1e3*m*i),b=Rle(y),T=new Fl([new yu("phase",b)],{width:"400em",height:ot(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});a=Te.makeSvgSpan(["hide-tail"],[T],e),a.style.height=ot(m),s=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var _=0,w=0,N=0;/box/.test(n)?(N=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),_=e.fontMetrics().fboxsep+(n==="colorbox"?0:N),w=_):n==="angl"?(N=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),_=4*N,w=Math.max(0,.25-r.depth)):(_=c?.2:0,w=_),a=Hl.encloseSpan(r,n,_,w,e),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=ot(N)):n==="angl"&&N!==.049&&(a.style.borderTopWidth=ot(N),a.style.borderRightWidth=ot(N)),s=r.depth+w,t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,t.borderColor&&(a.style.borderColor=t.borderColor))}var k;if(t.backgroundColor)k=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var C=/cancel|phase/.test(n)?["svg-align"]:[];k=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:C}]},e)}return/cancel/.test(n)&&(k.height=r.height,k.depth=r.depth),/cancel/.test(n)&&!c?Te.makeSpan(["mord","cancel-lap"],[k],e):Te.makeSpan(["mord"],[k],e)},LE=(t,e)=>{var r=0,n=new Ze.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[dn(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};pt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=or(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:DE,mathmlBuilder:LE});pt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=or(e[0],"color-token").color,s=or(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:c}},htmlBuilder:DE,mathmlBuilder:LE});pt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});pt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:DE,mathmlBuilder:LE});pt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var kH={};function zo(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},d=0;d<r.length;++d)kH[r[d]]=c;a&&(Ab[e]=a),s&&(Eb[e]=s)}var OH={};function K(t,e){OH[t]=e}function lR(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var w2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Je("{"+t.envName+"} can be used only in display mode.")};function BE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Su(t,e,r){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var b=t.gullet.expandMacroAsText("\\arraystretch");if(b==null)s=1;else if(s=parseFloat(b),!s||s<0)throw new Je("Invalid \\arraystretch: "+b)}t.gullet.beginGroup();var T=[],_=[T],w=[],N=[],k=d!=null?[]:void 0;function C(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function $(){k&&(t.gullet.macros.get("\\df@tag")?(k.push(t.subparse([new cs("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),N.push(lR(t));;){var I=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),I={type:"ordgroup",mode:t.mode,body:I},r&&(I={type:"styling",mode:t.mode,style:r,body:[I]}),T.push(I);var L=t.fetch().text;if(L==="&"){if(m&&T.length===m){if(h||c)throw new Je("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(L==="\\end"){$(),T.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(_.length>1||!p)&&_.pop(),N.length<_.length+1&&N.push([]);break}else if(L==="\\\\"){t.consume();var E=void 0;t.gullet.future().text!==" "&&(E=t.parseSizeGroup(!0)),w.push(E?E.value:null),$(),N.push(lR(t)),T=[],_.push(T),C()}else throw new Je("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:s,body:_,cols:a,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:N,colSeparationType:c,tags:k,leqno:y}}function UE(t){return t.slice(0,1)==="d"?"display":"text"}var $o=function(e,r){var n,i,a=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(a),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var b=r.havingStyle(Mt.SCRIPT).sizeMultiplier;y=.2778*(b/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?Rn({number:3,unit:"ex"},r):12*m,_=3*m,w=e.arraystretch*T,N=.7*w,k=.3*w,C=0;function $(Ie){for(var $e=0;$e<Ie.length;++$e)$e>0&&(C+=.25),h.push({pos:C,isDashed:Ie[$e]})}for($(s[0]),n=0;n<e.body.length;++n){var I=e.body[n],L=N,E=k;c<I.length&&(c=I.length);var A=new Array(I.length);for(i=0;i<I.length;++i){var R=Tr(I[i],r);E<R.depth&&(E=R.depth),L<R.height&&(L=R.height),A[i]=R}var F=e.rowGaps[n],P=0;F&&(P=Rn(F,r),P>0&&(P+=k,E<P&&(E=P),P=0)),e.addJot&&(E+=_),A.height=L,A.depth=E,C+=L,A.pos=C,C+=E+P,d[n]=A,$(s[n+1])}var B=C/2+r.fontMetrics().axisHeight,D=e.cols||[],Y=[],J,X,ee=[];if(e.tags&&e.tags.some(Ie=>Ie))for(n=0;n<a;++n){var Z=d[n],ge=Z.pos-B,ce=e.tags[n],Q=void 0;ce===!0?Q=Te.makeSpan(["eqn-num"],[],r):ce===!1?Q=Te.makeSpan([],[],r):Q=Te.makeSpan([],Si(ce,r,!0),r),Q.depth=Z.depth,Q.height=Z.height,ee.push({type:"elem",elem:Q,shift:ge})}for(i=0,X=0;i<c||X<D.length;++i,++X){for(var re=D[X]||{},de=!0;re.type==="separator";){if(de||(J=Te.makeSpan(["arraycolsep"],[]),J.style.width=ot(r.fontMetrics().doubleRuleSep),Y.push(J)),re.separator==="|"||re.separator===":"){var oe=re.separator==="|"?"solid":"dashed",ae=Te.makeSpan(["vertical-separator"],[],r);ae.style.height=ot(C),ae.style.borderRightWidth=ot(p),ae.style.borderRightStyle=oe,ae.style.margin="0 "+ot(-p/2);var pe=C-B;pe&&(ae.style.verticalAlign=ot(-pe)),Y.push(ae)}else throw new Je("Invalid separator type: "+re.separator);X++,re=D[X]||{},de=!1}if(!(i>=c)){var ve=void 0;(i>0||e.hskipBeforeAndAfter)&&(ve=kr.deflt(re.pregap,y),ve!==0&&(J=Te.makeSpan(["arraycolsep"],[]),J.style.width=ot(ve),Y.push(J)));var Ye=[];for(n=0;n<a;++n){var Ne=d[n],le=Ne[i];if(le){var we=Ne.pos-B;le.depth=Ne.depth,le.height=Ne.height,Ye.push({type:"elem",elem:le,shift:we})}}Ye=Te.makeVList({positionType:"individualShift",children:Ye},r),Ye=Te.makeSpan(["col-align-"+(re.align||"c")],[Ye]),Y.push(Ye),(i<c-1||e.hskipBeforeAndAfter)&&(ve=kr.deflt(re.postgap,y),ve!==0&&(J=Te.makeSpan(["arraycolsep"],[]),J.style.width=ot(ve),Y.push(J)))}}if(d=Te.makeSpan(["mtable"],Y),h.length>0){for(var xe=Te.makeLineSpan("hline",r,p),dt=Te.makeLineSpan("hdashline",r,p),Ke=[{type:"elem",elem:d,shift:0}];h.length>0;){var ut=h.pop(),it=ut.pos-B;ut.isDashed?Ke.push({type:"elem",elem:dt,shift:it}):Ke.push({type:"elem",elem:xe,shift:it})}d=Te.makeVList({positionType:"individualShift",children:Ke},r)}if(ee.length===0)return Te.makeSpan(["mord"],[d],r);var jt=Te.makeVList({positionType:"individualShift",children:ee},r);return jt=Te.makeSpan(["tag"],[jt],r),Te.makeFragment([d,jt])},Vce={c:"center ",l:"left ",r:"right "},Vo=function(e,r){for(var n=[],i=new Ze.MathNode("mtd",[],["mtr-glue"]),a=new Ze.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],h=0;h<c.length;h++)d.push(new Ze.MathNode("mtd",[dn(c[h],r)]));e.tags&&e.tags[s]&&(d.unshift(i),d.push(i),e.leqno?d.unshift(a):d.push(a)),n.push(new Ze.MathNode("mtr",d))}var p=new Ze.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",ot(m));var y="",b="";if(e.cols&&e.cols.length>0){var T=e.cols,_="",w=!1,N=0,k=T.length;T[0].type==="separator"&&(y+="top ",N=1),T[T.length-1].type==="separator"&&(y+="bottom ",k-=1);for(var C=N;C<k;C++)T[C].type==="align"?(b+=Vce[T[C].align],w&&(_+="none "),w=!0):T[C].type==="separator"&&w&&(_+=T[C].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",b.trim()),/[sd]/.test(_)&&p.setAttribute("columnlines",_.trim())}if(e.colSeparationType==="align"){for(var $=e.cols||[],I="",L=1;L<$.length;L++)I+=L%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var E="",A=e.hLinesBeforeRow;y+=A[0].length>0?"left ":"",y+=A[A.length-1].length>0?"right ":"";for(var R=1;R<A.length-1;R++)E+=A[R].length===0?"none ":A[R][0]?"dashed ":"solid ";return/[sd]/.test(E)&&p.setAttribute("rowlines",E.trim()),y!==""&&(p=new Ze.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new Ze.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},IH=function(e,r){e.envName.indexOf("ed")===-1&&w2(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",s=Su(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:BE(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=or(r[0].body[m],"textord");p+=y.text}c=Number(p),d=c*2}var b=!d;s.body.forEach(function(N){for(var k=1;k<N.length;k+=2){var C=or(N[k],"styling"),$=or(C.body[0],"ordgroup");$.body.unshift(h)}if(b)d<N.length&&(d=N.length);else{var I=N.length/2;if(c<I)throw new Je("Too many math in a row: "+("expected "+c+", but got "+I),N[0])}});for(var T=0;T<d;++T){var _="r",w=0;T%2===1?_="l":T>0&&b&&(w=1),n[T]={type:"align",align:_,pregap:w,postgap:0}}return s.colSeparationType=b?"align":"alignat",s};zo({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=v2(e[0]),n=r?[e[0]]:or(e[0],"ordgroup").body,i=n.map(function(s){var c=RE(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new Je("Unknown column alignment: "+d,s)}),a={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Su(t.parser,a,UE(t.envName))},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new Je("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var a=Su(t.parser,n,UE(t.envName)),s=Math.max(0,...a.body.map(c=>c.length));return a.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Su(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=v2(e[0]),n=r?[e[0]]:or(e[0],"ordgroup").body,i=n.map(function(s){var c=RE(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new Je("Unknown column alignment: "+d,s)});if(i.length>1)throw new Je("{subarray} can contain only one column");var a={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Su(t.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Je("{subarray} can contain only one column");return a},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Su(t.parser,e,UE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:IH,htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&w2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:BE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Su(t.parser,e,"display")},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:IH,htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){w2(t);var e={autoTag:BE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Su(t.parser,e,"display")},htmlBuilder:$o,mathmlBuilder:Vo});zo({type:"array",names:["CD"],props:{numArgs:0},handler(t){return w2(t),jce(t.parser)},htmlBuilder:$o,mathmlBuilder:Vo});K("\\nonumber","\\gdef\\@eqnsw{0}");K("\\notag","\\nonumber");pt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Je(t.funcName+" valid only within array environment")}});var cR=kH;pt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];if(i.type!=="ordgroup")throw new Je("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=or(i.body[s],"textord").text;if(n==="\\begin"){if(!cR.hasOwnProperty(a))throw new Je("No such environment: "+a,i);var c=cR[a],{args:d,optArgs:h}=r.parseArguments("\\begin{"+a+"}",c),p={mode:r.mode,envName:a,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,b=or(r.parseFunction(),"environment");if(b.name!==a)throw new Je("Mismatch: \\begin{"+a+"} matched by \\end{"+b.name+"}",y);return m}return{type:"environment",mode:r.mode,name:a,nameGroup:i}}});var RH=(t,e)=>{var r=t.font,n=e.withFont(r);return Tr(t.body,n)},MH=(t,e)=>{var r=t.font,n=e.withFont(r);return dn(t.body,n)},uR={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};pt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=Nb(e[0]),a=n;return a in uR&&(a=uR[a]),{type:"font",mode:r.mode,font:a.slice(1),body:i}},htmlBuilder:RH,mathmlBuilder:MH});pt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],i=kr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:b2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});pt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:i}=t,{mode:a}=r,s=r.parseExpression(!0,i),c="math"+n.slice(1);return{type:"font",mode:a,font:c,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:RH,mathmlBuilder:MH});var PH=(t,e)=>{var r=e;return t==="display"?r=r.id>=Mt.SCRIPT.id?r.text():Mt.DISPLAY:t==="text"&&r.size===Mt.DISPLAY.size?r=Mt.TEXT:t==="script"?r=Mt.SCRIPT:t==="scriptscript"&&(r=Mt.SCRIPTSCRIPT),r},zE=(t,e)=>{var r=PH(t.size,e.style),n=r.fracNum(),i=r.fracDen(),a;a=e.havingStyle(n);var s=Tr(t.numer,a,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}a=e.havingStyle(i);var h=Tr(t.denom,a,e),p,m,y;t.hasBarLine?(t.barSize?(m=Rn(t.barSize,e),p=Te.makeLineSpan("frac-line",e,m)):p=Te.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var b,T,_;r.size===Mt.DISPLAY.size||t.size==="display"?(b=e.fontMetrics().num1,m>0?T=3*y:T=7*y,_=e.fontMetrics().denom1):(m>0?(b=e.fontMetrics().num2,T=y):(b=e.fontMetrics().num3,T=3*y),_=e.fontMetrics().denom2);var w;if(p){var k=e.fontMetrics().axisHeight;b-s.depth-(k+.5*m)<T&&(b+=T-(b-s.depth-(k+.5*m))),k-.5*m-(h.height-_)<T&&(_+=T-(k-.5*m-(h.height-_)));var C=-(k-.5*m);w=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:_},{type:"elem",elem:p,shift:C},{type:"elem",elem:s,shift:-b}]},e)}else{var N=b-s.depth-(h.height-_);N<T&&(b+=.5*(T-N),_+=.5*(T-N)),w=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:_},{type:"elem",elem:s,shift:-b}]},e)}a=e.havingStyle(r),w.height*=a.sizeMultiplier/e.sizeMultiplier,w.depth*=a.sizeMultiplier/e.sizeMultiplier;var $;r.size===Mt.DISPLAY.size?$=e.fontMetrics().delim1:r.size===Mt.SCRIPTSCRIPT.size?$=e.havingStyle(Mt.SCRIPT).fontMetrics().delim2:$=e.fontMetrics().delim2;var I,L;return t.leftDelim==null?I=Xm(e,["mopen"]):I=Rl.customSizedDelim(t.leftDelim,$,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?L=Te.makeSpan([]):t.rightDelim==null?L=Xm(e,["mclose"]):L=Rl.customSizedDelim(t.rightDelim,$,!0,e.havingStyle(r),t.mode,["mclose"]),Te.makeSpan(["mord"].concat(a.sizingClasses(e)),[I,Te.makeSpan(["mfrac"],[w]),L],e)},$E=(t,e)=>{var r=new Ze.MathNode("mfrac",[dn(t.numer,e),dn(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Rn(t.barSize,e);r.setAttribute("linethickness",ot(n))}var i=PH(t.size,e.style);if(i.size!==e.style.size){r=new Ze.MathNode("mstyle",[r]);var a=i.size===Mt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var c=new Ze.MathNode("mo",[new Ze.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(r),t.rightDelim!=null){var d=new Ze.MathNode("mo",[new Ze.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return OE(s)}return r};pt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1],s,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:i,denom:a,hasBarLine:s,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:zE,mathmlBuilder:$E});pt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});pt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,i;switch(r){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var dR=["display","text","script","scriptscript"],hR=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};pt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],i=e[5],a=Nb(e[0]),s=a.type==="atom"&&a.family==="open"?hR(a.text):null,c=Nb(e[1]),d=c.type==="atom"&&c.family==="close"?hR(c.text):null,h=or(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",b=e[3];if(b.type==="ordgroup"){if(b.body.length>0){var T=or(b.body[0],"textord");y=dR[Number(T.text)]}}else b=or(b,"textord"),y=dR[Number(b.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:p,barSize:m,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:zE,mathmlBuilder:$E});pt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:i}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:or(e[0],"size").value,token:i}}});pt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=vle(or(e[1],"infix").size),s=e[2],c=a.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:c,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:zE,mathmlBuilder:$E});var DH=(t,e)=>{var r=e.style,n,i;t.type==="supsub"?(n=t.sup?Tr(t.sup,e.havingStyle(r.sup()),e):Tr(t.sub,e.havingStyle(r.sub()),e),i=or(t.base,"horizBrace")):i=or(t,"horizBrace");var a=Tr(i.base,e.havingBaseStyle(Mt.DISPLAY)),s=Hl.svgSpan(i,e),c;if(i.isOver?(c=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Te.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Te.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e);i.isOver?c=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Te.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Te.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e)},Fce=(t,e)=>{var r=Hl.mathMLnode(t.label);return new Ze.MathNode(t.isOver?"mover":"munder",[dn(t.base,e),r])};pt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:DH,mathmlBuilder:Fce});pt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],i=or(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:ei(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Si(t.body,e,!1);return Te.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=vu(t.body,e);return r instanceof ns||(r=new ns("mrow",[r])),r.setAttribute("href",t.href),r}});pt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=or(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:ei(c)}}});pt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:ei(e[0])}},htmlBuilder(t,e){var r=Si(t.body,e,!1);return Te.makeFragment(r)},mathmlBuilder(t,e){return new Ze.MathNode("mrow",Fa(t.body,e))}});pt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:i}=t,a=or(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=a,c={command:"\\htmlClass",class:a};break;case"\\htmlId":d.id=a,c={command:"\\htmlId",id:a};break;case"\\htmlStyle":d.style=a,c={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var h=a.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new Je("\\htmlData key/value '"+m+"' missing equals sign");var b=m.slice(0,y),T=m.slice(y+1);d["data-"+b.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:ei(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Si(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var i=Te.makeSpan(n,r,e);for(var a in t.attributes)a!=="class"&&t.attributes.hasOwnProperty(a)&&i.setAttribute(a,t.attributes[a]);return i},mathmlBuilder:(t,e)=>vu(t.body,e)});pt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:ei(e[0]),mathml:ei(e[1])}},htmlBuilder:(t,e)=>{var r=Si(t.html,e,!1);return Te.makeFragment(r)},mathmlBuilder:(t,e)=>vu(t.mathml,e)});var Q5=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new Je("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!tH(n))throw new Je("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};pt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(r[0])for(var d=or(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":c=y;break;case"width":i=Q5(y);break;case"height":a=Q5(y);break;case"totalheight":s=Q5(y);break;default:throw new Je("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var b=or(e[0],"url").url;return c===""&&(c=b,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:b})?{type:"includegraphics",mode:n.mode,alt:c,width:i,height:a,totalheight:s,src:b}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Rn(t.height,e),n=0;t.totalheight.number>0&&(n=Rn(t.totalheight,e)-r);var i=0;t.width.number>0&&(i=Rn(t.width,e));var a={height:ot(r+n)};i>0&&(a.width=ot(i)),n>0&&(a.verticalAlign=ot(-n));var s=new Fle(t.src,t.alt,a);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new Ze.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Rn(t.height,e),i=0;if(t.totalheight.number>0&&(i=Rn(t.totalheight,e)-n,r.setAttribute("valign",ot(-i))),r.setAttribute("height",ot(n+i)),t.width.number>0){var a=Rn(t.width,e);r.setAttribute("width",ot(a))}return r.setAttribute("src",t.src),r}});pt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=or(e[0],"size");if(r.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder(t,e){return Te.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Rn(t.dimension,e);return new Ze.SpaceNode(r)}});pt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Te.makeSpan([],[Tr(t.body,e)]),r=Te.makeSpan(["inner"],[r],e)):r=Te.makeSpan(["inner"],[Tr(t.body,e)]);var n=Te.makeSpan(["fix"],[]),i=Te.makeSpan([t.alignment],[r,n],e),a=Te.makeSpan(["strut"]);return a.style.height=ot(i.height+i.depth),i.depth&&(a.style.verticalAlign=ot(-i.depth)),i.children.unshift(a),i=Te.makeSpan(["thinbox"],[i],e),Te.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var r=new Ze.MathNode("mpadded",[dn(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});pt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,i=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}});pt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Je("Mismatched "+t.funcName)}});var fR=(t,e)=>{switch(e.style.size){case Mt.DISPLAY.size:return t.display;case Mt.TEXT.size:return t.text;case Mt.SCRIPT.size:return t.script;case Mt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};pt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:ei(e[0]),text:ei(e[1]),script:ei(e[2]),scriptscript:ei(e[3])}},htmlBuilder:(t,e)=>{var r=fR(t,e),n=Si(r,e,!1);return Te.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=fR(t,e);return vu(r,e)}});var LH=(t,e,r,n,i,a,s)=>{t=Te.makeSpan([],[t]);var c=r&&kr.isCharacterBox(r),d,h;if(e){var p=Tr(e,n.havingStyle(i.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Tr(r,n.havingStyle(i.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var b=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=Te.makeVList({positionType:"bottom",positionData:b,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:ot(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:ot(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=Te.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:ot(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var _=t.depth+s;y=Te.makeVList({positionType:"bottom",positionData:_,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:ot(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&a!==0&&!c){var N=Te.makeSpan(["mspace"],[],n);N.style.marginRight=ot(a),w.unshift(N)}return Te.makeSpan(["mop","op-limits"],w,n)},BH=["\\smallint"],Af=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=or(t.base,"op"),i=!0):a=or(t,"op");var s=e.style,c=!1;s.size===Mt.DISPLAY.size&&a.symbol&&!BH.includes(a.name)&&(c=!0);var d;if(a.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(p=a.name.slice(1),a.name=p==="oiint"?"\\iint":"\\iiint"),d=Te.makeSymbol(a.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,y=Te.staticSvg(p+"Size"+(c?"2":"1"),e);d=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),a.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(a.body){var b=Si(a.body,e,!0);b.length===1&&b[0]instanceof Ms?(d=b[0],d.classes[0]="mop"):d=Te.makeSpan(["mop"],b,e)}else{for(var T=[],_=1;_<a.name.length;_++)T.push(Te.mathsym(a.name[_],a.mode,e));d=Te.makeSpan(["mop"],T,e)}var w=0,N=0;return(d instanceof Ms||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,N=d.italic),i?LH(d,r,n,e,s,N,w):(w&&(d.style.position="relative",d.style.top=ot(w)),d)},n1=(t,e)=>{var r;if(t.symbol)r=new ns("mo",[Ps(t.name,t.mode)]),BH.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new ns("mo",Fa(t.body,e));else{r=new ns("mi",[new No(t.name.slice(1))]);var n=new ns("mo",[Ps("","text")]);t.parentIsSupSub?r=new ns("mrow",[r,n]):r=hH([r,n])}return r},qce={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};pt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=n;return i.length===1&&(i=qce[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Af,mathmlBuilder:n1});pt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ei(n)}},htmlBuilder:Af,mathmlBuilder:n1});var Hce={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};pt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Af,mathmlBuilder:n1});pt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Af,mathmlBuilder:n1});pt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Hce[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Af,mathmlBuilder:n1});var UH=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=or(t.base,"operatorname"),i=!0):a=or(t,"operatorname");var s;if(a.body.length>0){for(var c=a.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=Si(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof Ms&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Te.makeSpan(["mop"],d,e)}else s=Te.makeSpan(["mop"],[],e);return i?LH(s,r,n,e,e.style,0,0):s},Gce=(t,e)=>{for(var r=Fa(t.body,e.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var a=r[i];if(!(a instanceof Ze.SpaceNode))if(a instanceof Ze.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof Ze.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new Ze.TextNode(c)]}var d=new Ze.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new Ze.MathNode("mo",[Ps("","text")]);return t.parentIsSupSub?new Ze.MathNode("mrow",[d,h]):Ze.newDocumentFragment([d,h])};pt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"operatorname",mode:r.mode,body:ei(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:UH,mathmlBuilder:Gce});K("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");n0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Te.makeFragment(Si(t.body,e,!1)):Te.makeSpan(["mord"],Si(t.body,e,!0),e)},mathmlBuilder(t,e){return vu(t.body,e,!0)}});pt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Tr(t.body,e.havingCrampedStyle()),n=Te.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return Te.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(t,e){var r=new Ze.MathNode("mo",[new Ze.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ze.MathNode("mover",[dn(t.body,e),r]);return n.setAttribute("accent","true"),n}});pt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:ei(n)}},htmlBuilder:(t,e)=>{var r=Si(t.body,e.withPhantom(),!1);return Te.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=Fa(t.body,e);return new Ze.MathNode("mphantom",r)}});pt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Te.makeSpan([],[Tr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Te.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=Fa(ei(t.body),e),n=new Ze.MathNode("mphantom",r),i=new Ze.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});pt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Te.makeSpan(["inner"],[Tr(t.body,e.withPhantom())]),n=Te.makeSpan(["fix"],[]);return Te.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=Fa(ei(t.body),e),n=new Ze.MathNode("mphantom",r),i=new Ze.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});pt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=or(e[0],"size").value,i=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(t,e){var r=Tr(t.body,e),n=Rn(t.dy,e);return Te.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new Ze.MathNode("mpadded",[dn(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});pt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});pt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,i=r[0],a=or(e[0],"size"),s=or(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&or(i,"size").value,width:a.value,height:s.value}},htmlBuilder(t,e){var r=Te.makeSpan(["mord","rule"],[],e),n=Rn(t.width,e),i=Rn(t.height,e),a=t.shift?Rn(t.shift,e):0;return r.style.borderRightWidth=ot(n),r.style.borderTopWidth=ot(i),r.style.bottom=ot(a),r.width=n,r.height=i+a,r.depth=-a,r.maxFontSize=i*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Rn(t.width,e),n=Rn(t.height,e),i=t.shift?Rn(t.shift,e):0,a=e.color&&e.getColor()||"black",s=new Ze.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",ot(r)),s.setAttribute("height",ot(n));var c=new Ze.MathNode("mpadded",[s]);return i>=0?c.setAttribute("height",ot(i)):(c.setAttribute("height",ot(i)),c.setAttribute("depth",ot(-i))),c.setAttribute("voffset",ot(i)),c}});function zH(t,e,r){for(var n=Si(t,e,!1),i=e.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(r)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+r.size),n[a].height*=i,n[a].depth*=i}return Te.makeFragment(n)}var pR=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Kce=(t,e)=>{var r=e.havingSize(t.size);return zH(t.body,r,e)};pt({type:"sizing",names:pR,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:pR.indexOf(n)+1,body:a}},htmlBuilder:Kce,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=Fa(t.body,r),i=new Ze.MathNode("mstyle",n);return i.setAttribute("mathsize",ot(r.sizeMultiplier)),i}});pt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,i=!1,a=!1,s=r[0]&&or(r[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var h=s.body[d];if(c=h.text,c==="t")i=!0;else if(c==="b")a=!0;else{i=!1,a=!1;break}}else i=!0,a=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:i,smashDepth:a}},htmlBuilder:(t,e)=>{var r=Te.makeSpan([],[Tr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var a=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Te.makeSpan(["mord"],[a],e)},mathmlBuilder:(t,e)=>{var r=new Ze.MathNode("mpadded",[dn(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});pt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,i=r[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(t,e){var r=Tr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Te.wrapFragment(r,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,a=i;e.style.id<Mt.TEXT.id&&(a=e.fontMetrics().xHeight);var s=i+a/4,c=r.height+r.depth+s+i,{span:d,ruleWidth:h,advanceWidth:p}=Rl.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+s&&(s=(s+m-r.height-r.depth)/2);var y=d.height-r.height-s-h;r.style.paddingLeft=ot(p);var b=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var T=e.havingStyle(Mt.SCRIPTSCRIPT),_=Tr(t.index,T,e),w=.6*(b.height-b.depth),N=Te.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:_}]},e),k=Te.makeSpan(["root"],[N]);return Te.makeSpan(["mord","sqrt"],[k,b],e)}else return Te.makeSpan(["mord","sqrt"],[b],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new Ze.MathNode("mroot",[dn(r,e),dn(n,e)]):new Ze.MathNode("msqrt",[dn(r,e)])}});var mR={display:Mt.DISPLAY,text:Mt.TEXT,script:Mt.SCRIPT,scriptscript:Mt.SCRIPTSCRIPT};pt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(t,e){var r=mR[t.style],n=e.havingStyle(r).withFont("");return zH(t.body,n,e)},mathmlBuilder(t,e){var r=mR[t.style],n=e.havingStyle(r),i=Fa(t.body,n),a=new Ze.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[t.style];return a.setAttribute("scriptlevel",c[0]),a.setAttribute("displaystyle",c[1]),a}});var Wce=function(e,r){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(r.style.size===Mt.DISPLAY.size||n.alwaysHandleSupSub);return i?Af:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===Mt.DISPLAY.size||n.limits);return a?UH:null}else{if(n.type==="accent")return kr.isCharacterBox(n.base)?ME:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?DH:null}else return null}else return null};n0({type:"supsub",htmlBuilder(t,e){var r=Wce(t,e);if(r)return r(t,e);var{base:n,sup:i,sub:a}=t,s=Tr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,y=n&&kr.isCharacterBox(n);if(i){var b=e.havingStyle(e.style.sup());c=Tr(i,b,e),y||(p=s.height-b.fontMetrics().supDrop*b.sizeMultiplier/e.sizeMultiplier)}if(a){var T=e.havingStyle(e.style.sub());d=Tr(a,T,e),y||(m=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var _;e.style===Mt.DISPLAY?_=h.sup1:e.style.cramped?_=h.sup3:_=h.sup2;var w=e.sizeMultiplier,N=ot(.5/h.ptPerEm/w),k=null;if(d){var C=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof Ms||C)&&(k=ot(-s.italic))}var $;if(c&&d){p=Math.max(p,_,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var I=h.defaultRuleThickness,L=4*I;if(p-c.depth-(d.height-m)<L){m=L-(p-c.depth)+d.height;var E=.8*h.xHeight-(p-c.depth);E>0&&(p+=E,m-=E)}var A=[{type:"elem",elem:d,shift:m,marginRight:N,marginLeft:k},{type:"elem",elem:c,shift:-p,marginRight:N}];$=Te.makeVList({positionType:"individualShift",children:A},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var R=[{type:"elem",elem:d,marginLeft:k,marginRight:N}];$=Te.makeVList({positionType:"shift",positionData:m,children:R},e)}else if(c)p=Math.max(p,_,c.depth+.25*h.xHeight),$=Te.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:N}]},e);else throw new Error("supsub must have either sup or sub.");var F=mA(s,"right")||"mord";return Te.makeSpan([F],[s,Te.makeSpan(["msupsub"],[$])],e)},mathmlBuilder(t,e){var r=!1,n,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var a=[dn(t.base,e)];t.sub&&a.push(dn(t.sub,e)),t.sup&&a.push(dn(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Mt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Mt.DISPLAY||h.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Mt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Mt.DISPLAY)?s="munder":s="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Mt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Mt.DISPLAY)?s="mover":s="msup"}return new Ze.MathNode(s,a)}});n0({type:"atom",htmlBuilder(t,e){return Te.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new Ze.MathNode("mo",[Ps(t.text,t.mode)]);if(t.family==="bin"){var n=IE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var $H={mi:"italic",mn:"normal",mtext:"normal"};n0({type:"mathord",htmlBuilder(t,e){return Te.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new Ze.MathNode("mi",[Ps(t.text,t.mode,e)]),n=IE(t,e)||"italic";return n!==$H[r.type]&&r.setAttribute("mathvariant",n),r}});n0({type:"textord",htmlBuilder(t,e){return Te.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=Ps(t.text,t.mode,e),n=IE(t,e)||"normal",i;return t.mode==="text"?i=new Ze.MathNode("mtext",[r]):/[0-9]/.test(t.text)?i=new Ze.MathNode("mn",[r]):t.text==="\\prime"?i=new Ze.MathNode("mo",[r]):i=new Ze.MathNode("mi",[r]),n!==$H[i.type]&&i.setAttribute("mathvariant",n),i}});var Y5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Z5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};n0({type:"spacing",htmlBuilder(t,e){if(Z5.hasOwnProperty(t.text)){var r=Z5[t.text].className||"";if(t.mode==="text"){var n=Te.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Te.makeSpan(["mspace",r],[Te.mathsym(t.text,t.mode,e)],e)}else{if(Y5.hasOwnProperty(t.text))return Te.makeSpan(["mspace",Y5[t.text]],[],e);throw new Je('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(Z5.hasOwnProperty(t.text))r=new Ze.MathNode("mtext",[new Ze.TextNode("")]);else{if(Y5.hasOwnProperty(t.text))return new Ze.MathNode("mspace");throw new Je('Unknown type of space "'+t.text+'"')}return r}});var gR=()=>{var t=new Ze.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};n0({type:"tag",mathmlBuilder(t,e){var r=new Ze.MathNode("mtable",[new Ze.MathNode("mtr",[gR(),new Ze.MathNode("mtd",[vu(t.body,e)]),gR(),new Ze.MathNode("mtd",[vu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var yR={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},vR={"\\textbf":"textbf","\\textmd":"textmd"},Xce={"\\textit":"textit","\\textup":"textup"},bR=(t,e)=>{var r=t.font;if(r){if(yR[r])return e.withTextFontFamily(yR[r]);if(vR[r])return e.withTextFontWeight(vR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Xce[r])};pt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"text",mode:r.mode,body:ei(i),font:n}},htmlBuilder(t,e){var r=bR(t,e),n=Si(t.body,r,!0);return Te.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=bR(t,e);return vu(t.body,r)}});pt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Tr(t.body,e),n=Te.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Te.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},e);return Te.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(t,e){var r=new Ze.MathNode("mo",[new Ze.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ze.MathNode("munder",[dn(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});pt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Tr(t.body,e),n=e.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return Te.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new Ze.MathNode("mpadded",[dn(t.body,e)],["vcenter"])}});pt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new Je("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=xR(t),n=[],i=e.havingStyle(e.style.text()),a=0;a<r.length;a++){var s=r[a];s==="~"&&(s="\\textasciitilde"),n.push(Te.makeSymbol(s,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return Te.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Te.tryCombineChars(n),i)},mathmlBuilder(t,e){var r=new Ze.TextNode(xR(t)),n=new Ze.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var xR=t=>t.body.replace(/ /g,t.star?"":""),Yc=uH,VH=`[ \r
	]`,Qce="\\\\[a-zA-Z@]+",Yce="\\\\[^\uD800-\uDFFF]",Zce="("+Qce+")"+VH+"*",Jce=`\\\\(
|[ \r	]+
?)[ \r	]*`,bA="[-]",eue=new RegExp(bA+"+$"),tue="("+VH+"+)|"+(Jce+"|")+"([!-\\[\\]---]"+(bA+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(bA+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Zce)+("|"+Yce+")");class wR{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(tue,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new cs("EOF",new Pa(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new Je("Unexpected character: '"+e[r]+"'",new cs(e[r],new Pa(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new cs(i,new Pa(this,r,this.tokenRegex.lastIndex))}}class rue{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Je("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var nue=OH;K("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});K("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});K("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});K("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});K("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});K("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");K("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var _R={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};K("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Je("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=_R[e.text],n==null||n>=r)throw new Je("Invalid base-"+r+" digit "+e.text);for(var i;(i=_R[t.future().text])!=null&&i<r;)n*=r,n+=i,t.popToken()}return"\\@char{"+n+"}"});var VE=(t,e,r,n)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new Je("\\newcommand's first argument must be a macro name");var a=i[0].text,s=t.isDefined(a);if(s&&!e)throw new Je("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!s&&!r)throw new Je("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var c=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new Je("Invalid number of arguments: "+d);c=parseInt(d),i=t.consumeArg().tokens}return s&&n||t.macros.set(a,{tokens:i,numArgs:c}),""};K("\\newcommand",t=>VE(t,!1,!0,!1));K("\\renewcommand",t=>VE(t,!0,!1,!1));K("\\providecommand",t=>VE(t,!0,!0,!0));K("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});K("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});K("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Yc[r],xn.math[r],xn.text[r]),""});K("\\bgroup","{");K("\\egroup","}");K("~","\\nobreakspace");K("\\lq","`");K("\\rq","'");K("\\aa","\\r a");K("\\AA","\\r A");K("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");K("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");K("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");K("","\\mathscr{B}");K("","\\mathscr{E}");K("","\\mathscr{F}");K("","\\mathscr{H}");K("","\\mathscr{I}");K("","\\mathscr{L}");K("","\\mathscr{M}");K("","\\mathscr{R}");K("","\\mathfrak{C}");K("","\\mathfrak{H}");K("","\\mathfrak{Z}");K("\\Bbbk","\\Bbb{k}");K("","\\cdotp");K("\\llap","\\mathllap{\\textrm{#1}}");K("\\rlap","\\mathrlap{\\textrm{#1}}");K("\\clap","\\mathclap{\\textrm{#1}}");K("\\mathstrut","\\vphantom{(}");K("\\underbar","\\underline{\\text{#1}}");K("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');K("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");K("\\ne","\\neq");K("","\\neq");K("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");K("","\\notin");K("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");K("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");K("","\\perp");K("","\\mathclose{!\\mkern-0.8mu!}");K("","\\notni");K("","\\ulcorner");K("","\\urcorner");K("","\\llcorner");K("","\\lrcorner");K("","\\copyright");K("","\\textregistered");K("","\\textregistered");K("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');K("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');K("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');K("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');K("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");K("","\\vdots");K("\\varGamma","\\mathit{\\Gamma}");K("\\varDelta","\\mathit{\\Delta}");K("\\varTheta","\\mathit{\\Theta}");K("\\varLambda","\\mathit{\\Lambda}");K("\\varXi","\\mathit{\\Xi}");K("\\varPi","\\mathit{\\Pi}");K("\\varSigma","\\mathit{\\Sigma}");K("\\varUpsilon","\\mathit{\\Upsilon}");K("\\varPhi","\\mathit{\\Phi}");K("\\varPsi","\\mathit{\\Psi}");K("\\varOmega","\\mathit{\\Omega}");K("\\substack","\\begin{subarray}{c}#1\\end{subarray}");K("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");K("\\boxed","\\fbox{$\\displaystyle{#1}$}");K("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");K("\\implies","\\DOTSB\\;\\Longrightarrow\\;");K("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");K("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");K("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var SR={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};K("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in SR?e=SR[r]:(r.slice(0,4)==="\\not"||r in xn.math&&["bin","rel"].includes(xn.math[r].group))&&(e="\\dotsb"),e});var FE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};K("\\dotso",function(t){var e=t.future().text;return e in FE?"\\ldots\\,":"\\ldots"});K("\\dotsc",function(t){var e=t.future().text;return e in FE&&e!==","?"\\ldots\\,":"\\ldots"});K("\\cdots",function(t){var e=t.future().text;return e in FE?"\\@cdots\\,":"\\@cdots"});K("\\dotsb","\\cdots");K("\\dotsm","\\cdots");K("\\dotsi","\\!\\cdots");K("\\dotsx","\\ldots\\,");K("\\DOTSI","\\relax");K("\\DOTSB","\\relax");K("\\DOTSX","\\relax");K("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");K("\\,","\\tmspace+{3mu}{.1667em}");K("\\thinspace","\\,");K("\\>","\\mskip{4mu}");K("\\:","\\tmspace+{4mu}{.2222em}");K("\\medspace","\\:");K("\\;","\\tmspace+{5mu}{.2777em}");K("\\thickspace","\\;");K("\\!","\\tmspace-{3mu}{.1667em}");K("\\negthinspace","\\!");K("\\negmedspace","\\tmspace-{4mu}{.2222em}");K("\\negthickspace","\\tmspace-{5mu}{.277em}");K("\\enspace","\\kern.5em ");K("\\enskip","\\hskip.5em\\relax");K("\\quad","\\hskip1em\\relax");K("\\qquad","\\hskip2em\\relax");K("\\tag","\\@ifstar\\tag@literal\\tag@paren");K("\\tag@paren","\\tag@literal{({#1})}");K("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Je("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});K("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");K("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");K("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");K("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");K("\\newline","\\\\\\relax");K("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var FH=ot(Eo["Main-Regular"][84][1]-.7*Eo["Main-Regular"][65][1]);K("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+FH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");K("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+FH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");K("\\hspace","\\@ifstar\\@hspacer\\@hspace");K("\\@hspace","\\hskip #1\\relax");K("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");K("\\ordinarycolon",":");K("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");K("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');K("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');K("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');K("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');K("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');K("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');K("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');K("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');K("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');K("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');K("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');K("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');K("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');K("","\\dblcolon");K("","\\eqcolon");K("","\\coloneqq");K("","\\eqqcolon");K("","\\Coloneqq");K("\\ratio","\\vcentcolon");K("\\coloncolon","\\dblcolon");K("\\colonequals","\\coloneqq");K("\\coloncolonequals","\\Coloneqq");K("\\equalscolon","\\eqqcolon");K("\\equalscoloncolon","\\Eqqcolon");K("\\colonminus","\\coloneq");K("\\coloncolonminus","\\Coloneq");K("\\minuscolon","\\eqcolon");K("\\minuscoloncolon","\\Eqcolon");K("\\coloncolonapprox","\\Colonapprox");K("\\coloncolonsim","\\Colonsim");K("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");K("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");K("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");K("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");K("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");K("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");K("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");K("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");K("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");K("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");K("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");K("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");K("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");K("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");K("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");K("\\ngeqq","\\html@mathml{\\@ngeqq}{}");K("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");K("\\nleqq","\\html@mathml{\\@nleqq}{}");K("\\nleqslant","\\html@mathml{\\@nleqslant}{}");K("\\nshortmid","\\html@mathml{\\@nshortmid}{}");K("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");K("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");K("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");K("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");K("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");K("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");K("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");K("\\imath","\\html@mathml{\\@imath}{}");K("\\jmath","\\html@mathml{\\@jmath}{}");K("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");K("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");K("","\\llbracket");K("","\\rrbracket");K("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");K("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");K("","\\lBrace");K("","\\rBrace");K("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");K("","\\minuso");K("\\darr","\\downarrow");K("\\dArr","\\Downarrow");K("\\Darr","\\Downarrow");K("\\lang","\\langle");K("\\rang","\\rangle");K("\\uarr","\\uparrow");K("\\uArr","\\Uparrow");K("\\Uarr","\\Uparrow");K("\\N","\\mathbb{N}");K("\\R","\\mathbb{R}");K("\\Z","\\mathbb{Z}");K("\\alef","\\aleph");K("\\alefsym","\\aleph");K("\\Alpha","\\mathrm{A}");K("\\Beta","\\mathrm{B}");K("\\bull","\\bullet");K("\\Chi","\\mathrm{X}");K("\\clubs","\\clubsuit");K("\\cnums","\\mathbb{C}");K("\\Complex","\\mathbb{C}");K("\\Dagger","\\ddagger");K("\\diamonds","\\diamondsuit");K("\\empty","\\emptyset");K("\\Epsilon","\\mathrm{E}");K("\\Eta","\\mathrm{H}");K("\\exist","\\exists");K("\\harr","\\leftrightarrow");K("\\hArr","\\Leftrightarrow");K("\\Harr","\\Leftrightarrow");K("\\hearts","\\heartsuit");K("\\image","\\Im");K("\\infin","\\infty");K("\\Iota","\\mathrm{I}");K("\\isin","\\in");K("\\Kappa","\\mathrm{K}");K("\\larr","\\leftarrow");K("\\lArr","\\Leftarrow");K("\\Larr","\\Leftarrow");K("\\lrarr","\\leftrightarrow");K("\\lrArr","\\Leftrightarrow");K("\\Lrarr","\\Leftrightarrow");K("\\Mu","\\mathrm{M}");K("\\natnums","\\mathbb{N}");K("\\Nu","\\mathrm{N}");K("\\Omicron","\\mathrm{O}");K("\\plusmn","\\pm");K("\\rarr","\\rightarrow");K("\\rArr","\\Rightarrow");K("\\Rarr","\\Rightarrow");K("\\real","\\Re");K("\\reals","\\mathbb{R}");K("\\Reals","\\mathbb{R}");K("\\Rho","\\mathrm{P}");K("\\sdot","\\cdot");K("\\sect","\\S");K("\\spades","\\spadesuit");K("\\sub","\\subset");K("\\sube","\\subseteq");K("\\supe","\\supseteq");K("\\Tau","\\mathrm{T}");K("\\thetasym","\\vartheta");K("\\weierp","\\wp");K("\\Zeta","\\mathrm{Z}");K("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");K("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");K("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");K("\\bra","\\mathinner{\\langle{#1}|}");K("\\ket","\\mathinner{|{#1}\\rangle}");K("\\braket","\\mathinner{\\langle{#1}\\rangle}");K("\\Bra","\\left\\langle#1\\right|");K("\\Ket","\\left|#1\\right\\rangle");var qH=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",s),i.length&&y.macros.set("\\|",c));var b=m;if(!m&&i.length){var T=y.future();T.text==="|"&&(y.popToken(),b=!0)}return{tokens:b?i:n,numArgs:0}};e.macros.set("|",d(!1)),i.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...a,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};K("\\bra@ket",qH(!1));K("\\bra@set",qH(!0));K("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");K("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");K("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");K("\\angln","{\\angl n}");K("\\blue","\\textcolor{##6495ed}{#1}");K("\\orange","\\textcolor{##ffa500}{#1}");K("\\pink","\\textcolor{##ff00af}{#1}");K("\\red","\\textcolor{##df0030}{#1}");K("\\green","\\textcolor{##28ae7b}{#1}");K("\\gray","\\textcolor{gray}{#1}");K("\\purple","\\textcolor{##9d38bd}{#1}");K("\\blueA","\\textcolor{##ccfaff}{#1}");K("\\blueB","\\textcolor{##80f6ff}{#1}");K("\\blueC","\\textcolor{##63d9ea}{#1}");K("\\blueD","\\textcolor{##11accd}{#1}");K("\\blueE","\\textcolor{##0c7f99}{#1}");K("\\tealA","\\textcolor{##94fff5}{#1}");K("\\tealB","\\textcolor{##26edd5}{#1}");K("\\tealC","\\textcolor{##01d1c1}{#1}");K("\\tealD","\\textcolor{##01a995}{#1}");K("\\tealE","\\textcolor{##208170}{#1}");K("\\greenA","\\textcolor{##b6ffb0}{#1}");K("\\greenB","\\textcolor{##8af281}{#1}");K("\\greenC","\\textcolor{##74cf70}{#1}");K("\\greenD","\\textcolor{##1fab54}{#1}");K("\\greenE","\\textcolor{##0d923f}{#1}");K("\\goldA","\\textcolor{##ffd0a9}{#1}");K("\\goldB","\\textcolor{##ffbb71}{#1}");K("\\goldC","\\textcolor{##ff9c39}{#1}");K("\\goldD","\\textcolor{##e07d10}{#1}");K("\\goldE","\\textcolor{##a75a05}{#1}");K("\\redA","\\textcolor{##fca9a9}{#1}");K("\\redB","\\textcolor{##ff8482}{#1}");K("\\redC","\\textcolor{##f9685d}{#1}");K("\\redD","\\textcolor{##e84d39}{#1}");K("\\redE","\\textcolor{##bc2612}{#1}");K("\\maroonA","\\textcolor{##ffbde0}{#1}");K("\\maroonB","\\textcolor{##ff92c6}{#1}");K("\\maroonC","\\textcolor{##ed5fa6}{#1}");K("\\maroonD","\\textcolor{##ca337c}{#1}");K("\\maroonE","\\textcolor{##9e034e}{#1}");K("\\purpleA","\\textcolor{##ddd7ff}{#1}");K("\\purpleB","\\textcolor{##c6b9fc}{#1}");K("\\purpleC","\\textcolor{##aa87ff}{#1}");K("\\purpleD","\\textcolor{##7854ab}{#1}");K("\\purpleE","\\textcolor{##543b78}{#1}");K("\\mintA","\\textcolor{##f5f9e8}{#1}");K("\\mintB","\\textcolor{##edf2df}{#1}");K("\\mintC","\\textcolor{##e0e5cc}{#1}");K("\\grayA","\\textcolor{##f6f7f7}{#1}");K("\\grayB","\\textcolor{##f0f1f2}{#1}");K("\\grayC","\\textcolor{##e3e5e6}{#1}");K("\\grayD","\\textcolor{##d6d8da}{#1}");K("\\grayE","\\textcolor{##babec2}{#1}");K("\\grayF","\\textcolor{##888d93}{#1}");K("\\grayG","\\textcolor{##626569}{#1}");K("\\grayH","\\textcolor{##3b3e40}{#1}");K("\\grayI","\\textcolor{##21242c}{#1}");K("\\kaBlue","\\textcolor{##314453}{#1}");K("\\kaGreen","\\textcolor{##71B307}{#1}");var HH={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class iue{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new rue(nue,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new wR(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new cs("EOF",n.loc)),this.pushTokens(i),new cs("",Pa.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),a,s=0,c=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++s;else if(a.text==="}"){if(--s,s===-1)throw new Je("Extra }",a)}else if(a.text==="EOF")throw new Je("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",a);if(e&&n)if((s===0||s===1&&e[c]==="{")&&a.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(s!==0||n);return i.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:i,end:a}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new Je("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new Je("Use of the macro doesn't match its definition",a)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(r&&r[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Je("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new Je("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){a=a.slice();for(var c=a.length-1;c>=0;--c){var d=a[c];if(d.text==="#"){if(c===0)throw new Je("Incomplete placeholder at end of macro body",d);if(d=a[--c],d.text==="#")a.splice(c+1,1);else if(/^[1-9]$/.test(d.text))a.splice(c,2,...s[+d.text-1]);else throw new Je("Not a valid argument number",d)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new cs(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var c=new wR(i,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:a};return p}return i}isDefined(e){return this.macros.has(e)||Yc.hasOwnProperty(e)||xn.math.hasOwnProperty(e)||xn.text.hasOwnProperty(e)||HH.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Yc.hasOwnProperty(e)&&!Yc[e].primitive}}var TR=/^[]/,lv=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),J5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},AR={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class _2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new iue(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new Je("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new cs("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(_2.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||e&&Yc[i.text]&&Yc[i.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(r!==-1)throw new Je("only one infix operator per group",e[i].token);r=i,n=e[i].replaceWith}if(r!==-1&&n){var a,s,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?a=c[0]:a={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[a,e[r],s],[]):h=this.callFunction(n,[a,s],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i;do{var a;i=this.parseGroup(e)}while(((a=i)==null?void 0:a.type)==="internal");if(!i)throw new Je("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return a}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,i;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var s=a.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new Je("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new Je("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(i)throw new Je("Double subscript",a);i=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new Je("Double superscript",a);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(lv[a.text]){var h=TR.test(a.text),p=[];for(p.push(new cs(lv[a.text])),this.consume();;){var m=this.fetch().text;if(!lv[m]||TR.test(m)!==h)break;p.unshift(new cs(lv[m])),this.consume()}var y=this.subparse(p);h?i={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||i?{type:"supsub",mode:this.mode,base:r,sup:n,sub:i}:r}parseFunction(e,r){var n=this.fetch(),i=n.text,a=Yc[i];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new Je("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new Je("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new Je("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(i,a);return this.callFunction(i,s,c,n,e)}callFunction(e,r,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},c=Yc[e];if(c&&c.handler)return c.handler(s,r,n);throw new Je("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var c=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&s===1&&a[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)a.push(h);else if(h!=null)i.push(h);else throw new Je("Null argument, please report this as a bug")}return{args:i,optArgs:a}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new Je("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new Je("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Je("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i="",a;(a=this.fetch()).text!=="EOF";)i+=a.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,r){for(var n=this.fetch(),i=n,a="",s;(s=this.fetch()).text!=="EOF"&&e.test(a+s.text);)i=s,a+=i.text,this.consume();if(a==="")throw new Je("Invalid "+r+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new Je("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new Je("Invalid size: '"+r.text+"'",r);var a={number:+(i[1]+i[2]),unit:i[3]};if(!tH(a))throw new Je("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(i),s}parseGroup(e,r){var n=this.fetch(),i=n.text,a;if(i==="{"||i==="\\begingroup"){this.consume();var s=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:Pa.range(n,d),body:c,semisimple:i==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,e)||this.parseSymbol(),a==null&&i[0]==="\\"&&!HH.hasOwnProperty(i)){if(this.settings.throwOnError)throw new Je("Undefined control sequence: "+i,n);a=this.formatUnsupportedCmd(i),this.consume()}return a}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Pa.range(i,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Pa.range(i,e[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&e[n+1].text===a&&(e.splice(n,2,{type:"textord",mode:"text",loc:Pa.range(i,e[n+1]),text:a+a}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Je(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}AR.hasOwnProperty(r[0])&&!xn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=AR[r[0]]+r.slice(1));var a=eue.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var s;if(xn[this.mode][r]){this.settings.strict&&this.mode==="math"&&pA.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=xn[this.mode][r].group,d=Pa.range(e),h;if(Gle.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};s=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(eH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:Pa.range(e),text:r};else return null;if(this.consume(),a)for(var m=0;m<a[0].length;m++){var y=a[0][m];if(!J5[y])throw new Je("Unknown accent ' "+y+"'",e);var b=J5[y][this.mode]||J5[y].text;if(!b)throw new Je("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Pa.range(e),label:b,isStretchy:!1,isShifty:!0,base:s}}return s}}_2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var qE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new _2(e,r);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Je("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new cs("\\df@tag")])}]}return i},GH=function(e,r,n){r.textContent="";var i=HE(e,n).toNode();r.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),GH=function(){throw new Je("KaTeX doesn't work in quirks mode.")});var aue=function(e,r){var n=HE(e,r).toMarkup();return n},sue=function(e,r){var n=new EE(r);return qE(e,n)},KH=function(e,r,n){if(n.throwOnError||!(e instanceof Je))throw e;var i=Te.makeSpan(["katex-error"],[new Ms(r)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},HE=function(e,r){var n=new EE(r);try{var i=qE(e,n);return mce(i,e,n)}catch(a){return KH(a,e,n)}},oue=function(e,r){var n=new EE(r);try{var i=qE(e,n);return gce(i,e,n)}catch(a){return KH(a,e,n)}},lue="0.16.28",cue={Span:r1,Anchor:CE,SymbolNode:Ms,SvgNode:Fl,PathNode:yu,LineNode:fA},jb={version:lue,render:GH,renderToString:aue,ParseError:Je,SETTINGS_SCHEMA:Vv,__parse:sue,__renderToDomTree:HE,__renderToHTMLTree:oue,__setFontMetrics:Ble,__defineSymbol:j,__defineFunction:pt,__defineMacro:K,__domTree:cue};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function xA(t,e){return xA=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},xA(t,e)}function uue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qv(t,e,r){return uue()?qv=Reflect.construct:qv=function(i,a,s){var c=[null];c.push.apply(c,a);var d=Function.bind.apply(i,c),h=new d;return s&&xA(h,s.prototype),h},qv.apply(null,arguments)}function Ys(t){return due(t)||hue(t)||fue(t)||pue()}function due(t){if(Array.isArray(t))return wA(t)}function hue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fue(t,e){if(t){if(typeof t=="string")return wA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wA(t,e)}}function wA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mue=Object.hasOwnProperty,ER=Object.setPrototypeOf,gue=Object.isFrozen,yue=Object.getPrototypeOf,vue=Object.getOwnPropertyDescriptor,xa=Object.freeze,Ds=Object.seal,bue=Object.create,WH=typeof Reflect<"u"&&Reflect,Cb=WH.apply,_A=WH.construct;Cb||(Cb=function(e,r,n){return e.apply(r,n)});xa||(xa=function(e){return e});Ds||(Ds=function(e){return e});_A||(_A=function(e,r){return qv(e,Ys(r))});var xue=Ls(Array.prototype.forEach),NR=Ls(Array.prototype.pop),Dp=Ls(Array.prototype.push),Hv=Ls(String.prototype.toLowerCase),e3=Ls(String.prototype.toString),jR=Ls(String.prototype.match),Xs=Ls(String.prototype.replace),wue=Ls(String.prototype.indexOf),_ue=Ls(String.prototype.trim),Vi=Ls(RegExp.prototype.test),t3=Sue(TypeError);function Ls(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Cb(t,e,n)}}function Sue(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return _A(t,r)}}function lr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:Hv,ER&&ER(t,null);for(var i=e.length;i--;){var a=e[i];if(typeof a=="string"){var s=r(a);s!==a&&(gue(e)||(e[i]=s),a=s)}t[a]=!0}return t}function id(t){var e=bue(null),r;for(r in t)Cb(mue,t,[r])===!0&&(e[r]=t[r]);return e}function cv(t,e){for(;t!==null;){var r=vue(t,e);if(r){if(r.get)return Ls(r.get);if(typeof r.value=="function")return Ls(r.value)}t=yue(t)}function n(i){return console.warn("fallback value for",i),null}return n}var CR=xa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),r3=xa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),n3=xa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Tue=xa(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),i3=xa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Aue=xa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kR=xa(["#text"]),OR=xa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),a3=xa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),IR=xa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uv=xa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Eue=Ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nue=Ds(/<%[\w\W]*|[\w\W]*%>/gm),jue=Ds(/\${[\w\W]*}/gm),Cue=Ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),kue=Ds(/^aria-[\-\w]+$/),Oue=Ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Iue=Ds(/^(?:\w+script|data):/i),Rue=Ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mue=Ds(/^html$/i),Pue=Ds(/^[a-z][.\w]*(-[.\w]+)+$/i),Due=function(){return typeof window>"u"?null:window},Lue=function(e,r){if(Wc(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(i)&&(n=r.currentScript.getAttribute(i));var a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function XH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Due(),e=function(he){return XH(he)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,b=t.trustedTypes,T=c.prototype,_=cv(T,"cloneNode"),w=cv(T,"nextSibling"),N=cv(T,"childNodes"),k=cv(T,"parentNode");if(typeof a=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var $=Lue(b,r),I=$?$.createHTML(""):"",L=n,E=L.implementation,A=L.createNodeIterator,R=L.createDocumentFragment,F=L.getElementsByTagName,P=r.importNode,B={};try{B=id(n).documentMode?n.documentMode:{}}catch{}var D={};e.isSupported=typeof k=="function"&&E&&E.createHTMLDocument!==void 0&&B!==9;var Y=Eue,J=Nue,X=jue,ee=Cue,Z=kue,ge=Iue,ce=Rue,Q=Pue,re=Oue,de=null,oe=lr({},[].concat(Ys(CR),Ys(r3),Ys(n3),Ys(i3),Ys(kR))),ae=null,pe=lr({},[].concat(Ys(OR),Ys(a3),Ys(IR),Ys(uv))),ve=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ye=null,Ne=null,le=!0,we=!0,xe=!1,dt=!0,Ke=!1,ut=!0,it=!1,jt=!1,Ie=!1,$e=!1,nt=!1,_t=!1,Xt=!0,ye=!1,We="user-content-",gt=!0,yt=!1,lt={},et=null,Lt=lr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tr=null,Wr=lr({},["audio","video","img","source","image","track"]),hn=null,fn=lr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",Ft="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml",Dn=Kt,Gn=!1,Yi=null,pi=lr({},[Qt,Ft,Kt],e3),Lr,Ir=["application/xhtml+xml","text/html"],wr="text/html",It,Xr=null,pn=n.createElement("form"),on=function(he){return he instanceof RegExp||he instanceof Function},Qr=function(he){Xr&&Xr===he||((!he||Wc(he)!=="object")&&(he={}),he=id(he),Lr=Ir.indexOf(he.PARSER_MEDIA_TYPE)===-1?Lr=wr:Lr=he.PARSER_MEDIA_TYPE,It=Lr==="application/xhtml+xml"?e3:Hv,de="ALLOWED_TAGS"in he?lr({},he.ALLOWED_TAGS,It):oe,ae="ALLOWED_ATTR"in he?lr({},he.ALLOWED_ATTR,It):pe,Yi="ALLOWED_NAMESPACES"in he?lr({},he.ALLOWED_NAMESPACES,e3):pi,hn="ADD_URI_SAFE_ATTR"in he?lr(id(fn),he.ADD_URI_SAFE_ATTR,It):fn,tr="ADD_DATA_URI_TAGS"in he?lr(id(Wr),he.ADD_DATA_URI_TAGS,It):Wr,et="FORBID_CONTENTS"in he?lr({},he.FORBID_CONTENTS,It):Lt,Ye="FORBID_TAGS"in he?lr({},he.FORBID_TAGS,It):{},Ne="FORBID_ATTR"in he?lr({},he.FORBID_ATTR,It):{},lt="USE_PROFILES"in he?he.USE_PROFILES:!1,le=he.ALLOW_ARIA_ATTR!==!1,we=he.ALLOW_DATA_ATTR!==!1,xe=he.ALLOW_UNKNOWN_PROTOCOLS||!1,dt=he.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ke=he.SAFE_FOR_TEMPLATES||!1,ut=he.SAFE_FOR_XML!==!1,it=he.WHOLE_DOCUMENT||!1,$e=he.RETURN_DOM||!1,nt=he.RETURN_DOM_FRAGMENT||!1,_t=he.RETURN_TRUSTED_TYPE||!1,Ie=he.FORCE_BODY||!1,Xt=he.SANITIZE_DOM!==!1,ye=he.SANITIZE_NAMED_PROPS||!1,gt=he.KEEP_CONTENT!==!1,yt=he.IN_PLACE||!1,re=he.ALLOWED_URI_REGEXP||re,Dn=he.NAMESPACE||Kt,ve=he.CUSTOM_ELEMENT_HANDLING||{},he.CUSTOM_ELEMENT_HANDLING&&on(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ve.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&on(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ve.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ve.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ke&&(we=!1),nt&&($e=!0),lt&&(de=lr({},Ys(kR)),ae=[],lt.html===!0&&(lr(de,CR),lr(ae,OR)),lt.svg===!0&&(lr(de,r3),lr(ae,a3),lr(ae,uv)),lt.svgFilters===!0&&(lr(de,n3),lr(ae,a3),lr(ae,uv)),lt.mathMl===!0&&(lr(de,i3),lr(ae,IR),lr(ae,uv))),he.ADD_TAGS&&(de===oe&&(de=id(de)),lr(de,he.ADD_TAGS,It)),he.ADD_ATTR&&(ae===pe&&(ae=id(ae)),lr(ae,he.ADD_ATTR,It)),he.ADD_URI_SAFE_ATTR&&lr(hn,he.ADD_URI_SAFE_ATTR,It),he.FORBID_CONTENTS&&(et===Lt&&(et=id(et)),lr(et,he.FORBID_CONTENTS,It)),gt&&(de["#text"]=!0),it&&lr(de,["html","head","body"]),de.table&&(lr(de,["tbody"]),delete Ye.tbody),xa&&xa(he),Xr=he)},mn=lr({},["mi","mo","mn","ms","mtext"]),G=lr({},["annotation-xml"]),Re=lr({},["title","style","font","a","script"]),Pe=lr({},r3);lr(Pe,n3),lr(Pe,Tue);var mt=lr({},i3);lr(mt,Aue);var bt=function(he){var He=k(he);(!He||!He.tagName)&&(He={namespaceURI:Dn,tagName:"template"});var at=Hv(he.tagName),qt=Hv(He.tagName);return Yi[he.namespaceURI]?he.namespaceURI===Ft?He.namespaceURI===Kt?at==="svg":He.namespaceURI===Qt?at==="svg"&&(qt==="annotation-xml"||mn[qt]):!!Pe[at]:he.namespaceURI===Qt?He.namespaceURI===Kt?at==="math":He.namespaceURI===Ft?at==="math"&&G[qt]:!!mt[at]:he.namespaceURI===Kt?He.namespaceURI===Ft&&!G[qt]||He.namespaceURI===Qt&&!mn[qt]?!1:!mt[at]&&(Re[at]||!Pe[at]):!!(Lr==="application/xhtml+xml"&&Yi[he.namespaceURI]):!1},Pt=function(he){Dp(e.removed,{element:he});try{he.parentNode.removeChild(he)}catch{try{he.outerHTML=I}catch{he.remove()}}},Wt=function(he,He){try{Dp(e.removed,{attribute:He.getAttributeNode(he),from:He})}catch{Dp(e.removed,{attribute:null,from:He})}if(He.removeAttribute(he),he==="is"&&!ae[he])if($e||nt)try{Pt(He)}catch{}else try{He.setAttribute(he,"")}catch{}},br=function(he){var He,at;if(Ie)he="<remove></remove>"+he;else{var qt=jR(he,/^[\r\n\t ]+/);at=qt&&qt[0]}Lr==="application/xhtml+xml"&&Dn===Kt&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");var cr=$?$.createHTML(he):he;if(Dn===Kt)try{He=new y().parseFromString(cr,Lr)}catch{}if(!He||!He.documentElement){He=E.createDocument(Dn,"template",null);try{He.documentElement.innerHTML=Gn?I:cr}catch{}}var yn=He.body||He.documentElement;return he&&at&&yn.insertBefore(n.createTextNode(at),yn.childNodes[0]||null),Dn===Kt?F.call(He,it?"html":"body")[0]:it?He.documentElement:yn},Jt=function(he){return A.call(he.ownerDocument||he,he,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},$t=function(he){return he instanceof m&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof p)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function"||typeof he.hasChildNodes!="function")},$r=function(he){return Wc(s)==="object"?he instanceof s:he&&Wc(he)==="object"&&typeof he.nodeType=="number"&&typeof he.nodeName=="string"},gn=function(he,He,at){D[he]&&xue(D[he],function(qt){qt.call(e,He,at,Xr)})},Yr=function(he){var He;if(gn("beforeSanitizeElements",he,null),$t(he)||Vi(/[\u0080-\uFFFF]/,he.nodeName))return Pt(he),!0;var at=It(he.nodeName);if(gn("uponSanitizeElement",he,{tagName:at,allowedTags:de}),he.hasChildNodes()&&!$r(he.firstElementChild)&&(!$r(he.content)||!$r(he.content.firstElementChild))&&Vi(/<[/\w]/g,he.innerHTML)&&Vi(/<[/\w]/g,he.textContent)||at==="select"&&Vi(/<template/i,he.innerHTML)||he.nodeType===7||ut&&he.nodeType===8&&Vi(/<[/\w]/g,he.data))return Pt(he),!0;if(!de[at]||Ye[at]){if(!Ye[at]&&ho(at)&&(ve.tagNameCheck instanceof RegExp&&Vi(ve.tagNameCheck,at)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(at)))return!1;if(gt&&!et[at]){var qt=k(he)||he.parentNode,cr=N(he)||he.childNodes;if(cr&&qt)for(var yn=cr.length,Vr=yn-1;Vr>=0;--Vr){var vn=_(cr[Vr],!0);vn.__removalCount=(he.__removalCount||0)+1,qt.insertBefore(vn,w(he))}}return Pt(he),!0}return he instanceof c&&!bt(he)||(at==="noscript"||at==="noembed"||at==="noframes")&&Vi(/<\/no(script|embed|frames)/i,he.innerHTML)?(Pt(he),!0):(Ke&&he.nodeType===3&&(He=he.textContent,He=Xs(He,Y," "),He=Xs(He,J," "),He=Xs(He,X," "),he.textContent!==He&&(Dp(e.removed,{element:he.cloneNode()}),he.textContent=He)),gn("afterSanitizeElements",he,null),!1)},Zi=function(he,He,at){if(Xt&&(He==="id"||He==="name")&&(at in n||at in pn))return!1;if(!(we&&!Ne[He]&&Vi(ee,He))){if(!(le&&Vi(Z,He))){if(!ae[He]||Ne[He]){if(!(ho(he)&&(ve.tagNameCheck instanceof RegExp&&Vi(ve.tagNameCheck,he)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(he))&&(ve.attributeNameCheck instanceof RegExp&&Vi(ve.attributeNameCheck,He)||ve.attributeNameCheck instanceof Function&&ve.attributeNameCheck(He))||He==="is"&&ve.allowCustomizedBuiltInElements&&(ve.tagNameCheck instanceof RegExp&&Vi(ve.tagNameCheck,at)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(at))))return!1}else if(!hn[He]){if(!Vi(re,Xs(at,ce,""))){if(!((He==="src"||He==="xlink:href"||He==="href")&&he!=="script"&&wue(at,"data:")===0&&tr[he])){if(!(xe&&!Vi(ge,Xs(at,ce,"")))){if(at)return!1}}}}}}return!0},ho=function(he){return he!=="annotation-xml"&&jR(he,Q)},zs=function(he){var He,at,qt,cr;gn("beforeSanitizeAttributes",he,null);var yn=he.attributes;if(!(!yn||$t(he))){var Vr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae};for(cr=yn.length;cr--;){He=yn[cr];var vn=He,Sr=vn.name,fo=vn.namespaceURI;if(at=Sr==="value"?He.value:_ue(He.value),qt=It(Sr),Vr.attrName=qt,Vr.attrValue=at,Vr.keepAttr=!0,Vr.forceKeepAttr=void 0,gn("uponSanitizeAttribute",he,Vr),at=Vr.attrValue,!Vr.forceKeepAttr&&(Wt(Sr,he),!!Vr.keepAttr)){if(!dt&&Vi(/\/>/i,at)){Wt(Sr,he);continue}Ke&&(at=Xs(at,Y," "),at=Xs(at,J," "),at=Xs(at,X," "));var $s=It(he.nodeName);if(Zi($s,qt,at)){if(ye&&(qt==="id"||qt==="name")&&(Wt(Sr,he),at=We+at),ut&&Vi(/((--!?|])>)|<\/(style|title)/i,at)){Wt(Sr,he);continue}if($&&Wc(b)==="object"&&typeof b.getAttributeType=="function"&&!fo)switch(b.getAttributeType($s,qt)){case"TrustedHTML":{at=$.createHTML(at);break}case"TrustedScriptURL":{at=$.createScriptURL(at);break}}try{fo?he.setAttributeNS(fo,Sr,at):he.setAttribute(Sr,at),$t(he)?Pt(he):NR(e.removed)}catch{}}}}gn("afterSanitizeAttributes",he,null)}},Sa=function xt(he){var He,at=Jt(he);for(gn("beforeSanitizeShadowDOM",he,null);He=at.nextNode();)gn("uponSanitizeShadowNode",He,null),Yr(He),zs(He),He.content instanceof i&&xt(He.content);gn("afterSanitizeShadowDOM",he,null)};return e.sanitize=function(xt){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He,at,qt,cr,yn;if(Gn=!xt,Gn&&(xt="<!-->"),typeof xt!="string"&&!$r(xt))if(typeof xt.toString=="function"){if(xt=xt.toString(),typeof xt!="string")throw t3("dirty is not a string, aborting")}else throw t3("toString is not a function");if(!e.isSupported){if(Wc(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof xt=="string")return t.toStaticHTML(xt);if($r(xt))return t.toStaticHTML(xt.outerHTML)}return xt}if(jt||Qr(he),e.removed=[],typeof xt=="string"&&(yt=!1),yt){if(xt.nodeName){var Vr=It(xt.nodeName);if(!de[Vr]||Ye[Vr])throw t3("root node is forbidden and cannot be sanitized in-place")}}else if(xt instanceof s)He=br("<!---->"),at=He.ownerDocument.importNode(xt,!0),at.nodeType===1&&at.nodeName==="BODY"||at.nodeName==="HTML"?He=at:He.appendChild(at);else{if(!$e&&!Ke&&!it&&xt.indexOf("<")===-1)return $&&_t?$.createHTML(xt):xt;if(He=br(xt),!He)return $e?null:_t?I:""}He&&Ie&&Pt(He.firstChild);for(var vn=Jt(yt?xt:He);qt=vn.nextNode();)qt.nodeType===3&&qt===cr||(Yr(qt),zs(qt),qt.content instanceof i&&Sa(qt.content),cr=qt);if(cr=null,yt)return xt;if($e){if(nt)for(yn=R.call(He.ownerDocument);He.firstChild;)yn.appendChild(He.firstChild);else yn=He;return(ae.shadowroot||ae.shadowrootmod)&&(yn=P.call(r,yn,!0)),yn}var Sr=it?He.outerHTML:He.innerHTML;return it&&de["!doctype"]&&He.ownerDocument&&He.ownerDocument.doctype&&He.ownerDocument.doctype.name&&Vi(Mue,He.ownerDocument.doctype.name)&&(Sr="<!DOCTYPE "+He.ownerDocument.doctype.name+`>
`+Sr),Ke&&(Sr=Xs(Sr,Y," "),Sr=Xs(Sr,J," "),Sr=Xs(Sr,X," ")),$&&_t?$.createHTML(Sr):Sr},e.setConfig=function(xt){Qr(xt),jt=!0},e.clearConfig=function(){Xr=null,jt=!1},e.isValidAttribute=function(xt,he,He){Xr||Qr({});var at=It(xt),qt=It(he);return Zi(at,qt,He)},e.addHook=function(xt,he){typeof he=="function"&&(D[xt]=D[xt]||[],Dp(D[xt],he))},e.removeHook=function(xt){if(D[xt])return NR(D[xt])},e.removeHooks=function(xt){D[xt]&&(D[xt]=[])},e.removeAllHooks=function(){D={}},e}var QH=XH();const Bue=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:i,classType:a})=>{const s=M.useRef(yb()),c=M.useRef(Date.now()),d=M.useRef(t),[h,p]=M.useState(!0),[m,y]=M.useState(0),[b,T]=M.useState(!1),[_,w]=M.useState(null),[N,k]=M.useState(0),[C,$]=M.useState(0),I=M.useRef(null),L=M.useRef(null),E=M.useRef(null),A=M.useRef(new Set),[R,F]=M.useState(!1);M.useEffect(()=>{d.current=t},[t]);const P=M.useCallback(()=>{c.current=Date.now(),h||p(!0)},[h]);M.useEffect(()=>{const D=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),h||p(!0)):h&&p(!1)},1e3);return()=>clearInterval(D)},[h]),M.useEffect(()=>{const D=["mousemove","keydown","scroll","click"];return D.forEach(Y=>window.addEventListener(Y,P)),()=>D.forEach(Y=>window.removeEventListener(Y,P))},[P]),M.useEffect(()=>()=>{d.current(s.current)},[]),M.useEffect(()=>{if(!n||!i)return;const D=async Y=>{var ge,ce,Q,re,de,oe,ae,pe;const J=I.current;if(!J)return;const X=J.src?new URL(J.src).origin:"";if(Y.origin!==window.location.origin&&Y.origin!==X)return;const ee=Y.origin,Z=Y.data;if(!(!Z||typeof Z!="object"||!((ge=Z.type)!=null&&ge.startsWith("portal-"))))switch(P(),Z.type){case"portal-ready":{T(!0);try{const ve=await Gi(ht(Ue,"practice_progress",`${n}_${i}`)),Ye=ve.exists()?ve.data():null,Ne=Ye?{state:Ye.state||null,currentQuestion:Ye.currentQuestion??0}:null,le=(Ye==null?void 0:Ye.answeredQuestions)||[];le.forEach(we=>A.current.add(we)),k(le.length),(ce=J.contentWindow)==null||ce.postMessage({type:"portal-init",payload:{userId:n,savedState:Ne}},ee)}catch(ve){console.error("Bridge: Failed to load saved state",ve),(Q=J.contentWindow)==null||Q.postMessage({type:"portal-init",payload:{userId:n,savedState:null}},ee)}break}case"portal-save":{const{state:ve,currentQuestion:Ye}=Z.payload||{};if(!ve)break;try{await Fi(ht(Ue,"practice_progress",`${n}_${i}`),{userId:n,assignmentId:i,state:ve,currentQuestion:Ye??0,answeredQuestions:Array.from(A.current),lastUpdated:new Date().toISOString()},{merge:!0}),(re=J.contentWindow)==null||re.postMessage({type:"portal-save-ok"},ee)}catch(Ne){console.error("Bridge: Save failed",Ne),(de=J.contentWindow)==null||de.postMessage({type:"portal-save-error"},ee)}break}case"portal-answer":{const{questionId:ve,correct:Ye,attempts:Ne}=Z.payload||{};if(!ve)break;if(Ye&&!A.current.has(ve)){A.current.add(ve),k(we=>we+1);const le=Ne===1?15:10;try{const xe=(await Pq({assignmentId:i,questionId:ve,xpAmount:le,classType:a||"Uncategorized"})).data;if(xe.awarded){const dt=xe.serverXP||le;$(Ke=>Ke+dt),w({text:`+${dt} XP`,type:"success"}),Yn.xpGain(),setTimeout(()=>w(null),2e3)}(oe=J.contentWindow)==null||oe.postMessage({type:"portal-xp-result",payload:{questionId:ve,awarded:xe.awarded,xp:xe.serverXP||le}},ee)}catch(we){console.error("Bridge: XP award failed",we),(ae=J.contentWindow)==null||ae.postMessage({type:"portal-xp-result",payload:{questionId:ve,awarded:!1,xp:0}},ee)}}else Ye&&((pe=J.contentWindow)==null||pe.postMessage({type:"portal-xp-result",payload:{questionId:ve,awarded:!1,xp:0}},ee));break}}};return window.addEventListener("message",D),()=>window.removeEventListener("message",D)},[n,i,a,P]);const B=M.useCallback(()=>{const D=E.current;D&&(document.fullscreenElement?document.exitFullscreen():D.requestFullscreen().catch(()=>{F(Y=>!Y)}))},[]);return M.useEffect(()=>{const D=()=>F(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",D),()=>document.removeEventListener("fullscreenchange",D)},[]),M.useEffect(()=>{if(L.current&&r){const D=r.replace(/\$(.*?)\$/g,(Y,J)=>{try{return jb.renderToString(J,{throwOnError:!1})}catch{return J}});L.current.innerHTML=QH.sanitize(D,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),l.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h?"text-green-400":"text-yellow-500"}`,children:[h?l.jsx(xE,{className:"w-4 h-4"}):l.jsx(Is,{className:"w-4 h-4 animate-pulse"}),h?"Active Session":"Away (Paused)"]}),l.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(m/60),"m ",m%60,"s"]}),b&&N>0&&l.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[l.jsx(bi,{className:"w-3 h-3"})," ",N," answered"]}),b&&C>0&&l.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[l.jsx(Pi,{className:"w-3 h-3"})," ",C," XP"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[e&&l.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:R?"Exit full screen (Esc)":"Full screen",children:[R?l.jsx($q,{className:"w-3 h-3"}):l.jsx(lA,{className:"w-3 h-3"}),R?"Exit Full Screen":"Full Screen"]}),b&&l.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[l.jsx(Pi,{className:"w-3 h-3"})," XP Linked"]}),!h&&l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[l.jsx(Rs,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),_&&l.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${_.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[_.type==="success"?l.jsx(bi,{className:"w-4 h-4"}):l.jsx(qm,{className:"w-4 h-4"}),_.text]})}),l.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?l.jsx("div",{ref:E,className:"flex-1 flex flex-col bg-white",children:l.jsx("iframe",{ref:I,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:P})}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Hm,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),l.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&l.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[l.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[l.jsx(lA,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),l.jsx("div",{ref:L,className:"proctor-content text-sm leading-relaxed"})]})]})]})},Uue=()=>{const[t,e]=M.useState(!1),[r,n]=M.useState(null),i=async()=>{e(!0),n(null);try{await Dee(sA,Cse)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},a=r&&r.includes("api-key-not-valid");return l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[l.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),l.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:l.jsxs("div",{className:"p-10 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:l.jsx("span",{className:"text-3xl",children:""})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),l.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&l.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Rs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),l.jsxs("div",{className:"break-words",children:[l.jsx("strong",{children:"Login Failed:"})," ",r]})]}),a&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[l.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[l.jsx(xoe,{className:"w-4 h-4"}),"Action Required:"]}),l.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",l.jsx("code",{children:"lib/firebase.ts"})," and replace",l.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),l.jsx("button",{onClick:i,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),l.jsx("span",{children:"Sign in with Google"})]})}),l.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),l.jsx("span",{children:""}),l.jsx("span",{children:"Firebase Auth"})]})]})})]})},YH=M.createContext(null),Tu=()=>{const t=M.useContext(YH);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},zue=({children:t})=>{const[e,r]=M.useState({isOpen:!1,options:{message:""}}),n=M.useRef(null),i=M.useRef(null),a=M.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),s=M.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=M.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);M.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=i.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),M.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&s()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return l.jsxs(YH.Provider,{value:{confirm:a},children:[t,e.isOpen&&l.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),l.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[l.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[l.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:l.jsx(Rs,{className:"w-5 h-5"})}),l.jsxs("div",{children:[e.options.title&&l.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),l.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),l.jsx("button",{ref:i,onClick:s,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),l.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},RR={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:l.jsx(Uq,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:l.jsx(Rs,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:l.jsx(Doe,{className:"w-4 h-4"})}},$ue=({announcements:t,studentIds:e})=>{const{confirm:r}=Tu(),n=sa(),[i,a]=M.useState(!1),[s,c]=M.useState(""),[d,h]=M.useState(""),[p,m]=M.useState("INFO"),[y,b]=M.useState("GLOBAL"),T=async()=>{if(!(!s.trim()||!d.trim()))try{await Be.createAnnouncement({title:s.trim(),content:d.trim(),classType:y,priority:p,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN"}),await Be.notifyUsers(e,"ANNOUNCEMENT",s.trim(),d.trim().slice(0,100)),c(""),h(""),a(!1),n.success("Announcement broadcast sent.")}catch{n.error("Failed to create announcement.")}},_=async w=>{await r({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Be.deleteAnnouncement(w)};return l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(xb,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),l.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[l.jsx(ko,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?l.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[l.jsx(xb,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):l.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(w=>{const N=RR[w.priority]||RR.INFO;return l.jsxs("div",{className:`p-3 ${N.bg} border ${N.border} rounded-xl flex justify-between items-start`,children:[l.jsxs("div",{className:"flex gap-2 items-start",children:[l.jsx("div",{className:`mt-0.5 ${N.text}`,children:N.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-bold text-white",children:w.title}),l.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:w.content}),l.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[w.classType==="GLOBAL"?"All Classes":w.classType,"  ",new Date(w.createdAt).toLocaleDateString()]})]})]}),l.jsx("button",{onClick:()=>_(w.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:l.jsx(xi,{className:"w-3.5 h-3.5"})})]},w.id)})}),l.jsx(ba,{isOpen:i,onClose:()=>a(!1),title:"New Announcement",maxWidth:"max-w-md",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),l.jsx("input",{type:"text",value:s,onChange:w=>c(w.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),l.jsx("textarea",{value:d,onChange:w=>h(w.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),l.jsxs("select",{value:p,onChange:w=>m(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[l.jsx("option",{value:"INFO",children:"Info"}),l.jsx("option",{value:"WARNING",children:"Warning"}),l.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),l.jsxs("select",{value:y,onChange:w=>b(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[l.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Pr).filter(w=>w!=="Uncategorized").map(w=>l.jsx("option",{value:w,children:w},w))]})]})]}),l.jsx("button",{onClick:T,disabled:!s.trim()||!d.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},ZH=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],MR=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],Vue=["I","II","III","IV","V"],Fue=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},zh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,MR.length-1),i=MR[n]||"Unknownium",a=Vue[r],s=n+1,c=Fue(s);return{rankName:`${i} ${a}`,tierColor:c.color,tierGlow:c.glow}},es={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15},PR=t=>{const e=t.affixes.reduce((i,a)=>i+a.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},GE=t=>{var i;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((i=t.gamification)!=null&&i.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(a=>{a.stats&&Object.entries(a.stats).forEach(([s,c])=>{e[s]+=c})}),e},$h=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let i=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&i.length===0&&(i=[10]);const a=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=a*10+s}),Math.floor(e))},DR=t=>t.runewordActive&&ZH.find(e=>e.id===t.runewordActive)||null,Qn=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function qd(t,e){var i;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(i=r.classProfiles)==null?void 0:i[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const que=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:i})=>{var k,C,$,I,L,E,A,R,F,P;const a=((k=t.gamification)==null?void 0:k.level)||1,s=((C=t.gamification)==null?void 0:C.xp)||0,c=(($=t.gamification)==null?void 0:$.currency)||0,d=zh(a),h=GE(t),p=t.enrolledClasses||(t.classType?[t.classType]:[]),m=((L=(I=t.gamification)==null?void 0:I.completedQuests)==null?void 0:L.length)||0,y=((A=(E=t.gamification)==null?void 0:E.activeQuests)==null?void 0:A.filter(B=>B.status==="ACCEPTED"||B.status==="DEPLOYED").length)||0,b=M.useMemo(()=>p.map(B=>{var ge,ce;const D=((ce=(ge=t.gamification)==null?void 0:ge.classXp)==null?void 0:ce[B])||0,Y=qd(t,B),J=$h(Y.equipped),X=Y.inventory.length,ee=e.filter(Q=>{const re=r.find(de=>de.id===Q.assignmentId);return(re==null?void 0:re.classType)===B}),Z=Math.round(ee.reduce((Q,re)=>{var de;return Q+(((de=re.metrics)==null?void 0:de.engagementTime)||0)},0)/60);return{cls:B,classXp:D,gearScore:J,inventoryCount:X,resourcesViewed:ee.length,totalTime:Z}}),[t,e,r,p]),T=M.useMemo(()=>e.filter(B=>B.submittedAt).sort((B,D)=>new Date(D.submittedAt).getTime()-new Date(B.submittedAt).getTime()).slice(0,10).map(B=>{var D,Y;return{...B,assignmentTitle:((D=r.find(J=>J.id===B.assignmentId))==null?void 0:D.title)||B.assignmentTitle,classType:((Y=r.find(J=>J.id===B.assignmentId))==null?void 0:Y.classType)||"Unknown"}}),[e,r]),_=Math.round(e.reduce((B,D)=>{var Y;return B+(((Y=D.metrics)==null?void 0:Y.engagementTime)||0)},0)/60),w=M.useMemo(()=>{const B=new Set;e.forEach(Z=>{if(Z.submittedAt){const ge=new Date(Z.submittedAt),ce=ge.getFullYear(),Q=new Date(ce,0,1),re=Math.ceil(((ge.getTime()-Q.getTime())/864e5+Q.getDay()+1)/7);B.add(`${ce}-W${re}`)}});const D=new Date,Y=D.getFullYear(),J=new Date(Y,0,1),X=Math.ceil(((D.getTime()-J.getTime())/864e5+J.getDay()+1)/7);let ee=0;for(let Z=X;Z>0&&B.has(`${Y}-W${Z}`);Z--)ee++;return ee},[e]),N=M.useMemo(()=>{const B=[],D=new Date;for(let ce=6;ce>=0;ce--){const Q=new Date(D);Q.setDate(Q.getDate()-ce);const re=Q.toISOString().split("T")[0],de=e.filter(ae=>{var pe;return(pe=ae.submittedAt)==null?void 0:pe.startsWith(re)}),oe=de.reduce((ae,pe)=>{var ve;return ae+(((ve=pe.metrics)==null?void 0:ve.engagementTime)||0)},0);B.push({label:Q.toLocaleDateString([],{weekday:"short"}),time:Math.round(oe/60),subs:de.length})}const Y=B.slice(4).reduce((ce,Q)=>ce+Q.time,0),J=B.slice(0,4).reduce((ce,Q)=>ce+Q.time,0),X=Y/3,ee=J/4,Z=X>ee*1.2?"up":X<ee*.6?"down":"flat",ge=Math.max(1,...B.map(ce=>ce.time));return{days:B,trend:Z,maxTime:ge}},[e]);return l.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in",onClick:i}),l.jsxs("div",{className:"relative w-full max-w-lg bg-[#12132a]/98 border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[l.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a]/95 backdrop-blur-md border-b border-white/5 p-6 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${d.tierGlow} shadow-xl`,children:t.avatarUrl?l.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${d.tierColor.split(" ")[0]}`}):l.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${d.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${d.tierColor.split(" ")[1]}`,children:d.rankName}),l.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",a]})]}),((R=t.gamification)==null?void 0:R.codename)&&l.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),l.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition",children:l.jsx(hs,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[l.jsx(Pi,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),l.jsx("div",{className:"text-lg font-bold text-white",children:s.toLocaleString()}),l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[l.jsx(Is,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[_,"m"]}),l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[l.jsx(so,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),l.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[l.jsx(kd,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),l.jsx("div",{className:"text-lg font-bold text-white",children:m}),l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[l.jsx(uA,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),l.jsx("div",{className:"text-lg font-bold text-white",children:c}),l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[l.jsx(_E,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[w,"w"]}),l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),l.jsx("div",{className:"space-y-2",children:Object.entries(h).map(([B,D])=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:B}),l.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,D)}%`}})}),l.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:D})]},B))})]}),n.length>0&&(()=>{const B=n[0],D=ud[B.bucket];return D?l.jsxs("div",{className:`border rounded-2xl p-4 ${D.borderColor} ${D.bgColor}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${D.color} border ${D.borderColor}`,children:D.label})]}),l.jsx("p",{className:"text-xs text-gray-300 mb-3",children:D.description}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[l.jsxs("span",{children:["ES: ",B.engagementScore]}),l.jsxs("span",{children:["Subs: ",B.metrics.submissionCount]}),l.jsxs("span",{children:["Days Active: ",B.metrics.activityDays,"/7"]}),l.jsxs("span",{children:["Paste Ratio: ",Math.round(B.metrics.avgPasteRatio*100),"%"]}),l.jsxs("span",{children:["Time: ",Math.round(B.metrics.totalTime/60),"m"]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[l.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[l.jsx(zq,{className:"w-3.5 h-3.5 text-amber-400"}),l.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),l.jsx("p",{className:"text-xs text-gray-300 mb-2",children:B.recommendation.action}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:B.recommendation.categories.map(Y=>l.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Y},Y))})]}),(()=>{const Y=r.filter(J=>J.classType===B.classType&&J.status==="ACTIVE"&&B.recommendation.categories.includes(J.category||"Supplemental")).slice(0,3);return Y.length===0?null:l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),l.jsx("div",{className:"space-y-1",children:Y.map(J=>l.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[l.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:J.category}),l.jsx("span",{className:"text-white truncate",children:J.title})]},J.id))})]})})()]}):null})(),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),l.jsxs("div",{className:"flex items-center gap-1",children:[N.trend==="up"&&l.jsx(AE,{className:"w-3.5 h-3.5 text-green-400"}),N.trend==="down"&&l.jsx(Hoe,{className:"w-3.5 h-3.5 text-red-400"}),N.trend==="flat"&&l.jsx(Roe,{className:"w-3.5 h-3.5 text-gray-400"}),l.jsx("span",{className:`text-[10px] font-bold uppercase ${N.trend==="up"?"text-green-400":N.trend==="down"?"text-red-400":"text-gray-400"}`,children:N.trend==="up"?"Trending Up":N.trend==="down"?"Declining":"Stable"})]})]}),l.jsx("div",{className:"flex items-end gap-1 h-16",children:N.days.map((B,D)=>{const Y=N.maxTime>0?Math.max(2,B.time/N.maxTime*100):2,J=D===N.days.length-1;return l.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[l.jsx("div",{className:`w-full rounded-t transition-all ${B.time>0?J?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Y}%`}}),l.jsx("span",{className:"text-[8px] text-gray-500",children:B.label}),l.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[B.time,"m  ",B.subs," sub",B.subs!==1?"s":""]})]},D)})})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),l.jsx("div",{className:"space-y-3",children:b.map(B=>l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:B.cls}),l.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[B.classXp.toLocaleString()," XP"]})]}),l.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[l.jsxs("span",{children:[l.jsx(Vl,{className:"w-3 h-3 inline mr-0.5"}),B.gearScore," GS"]}),l.jsxs("span",{children:[l.jsx(uA,{className:"w-3 h-3 inline mr-0.5"}),B.inventoryCount," items"]}),l.jsxs("span",{children:[l.jsx(so,{className:"w-3 h-3 inline mr-0.5"}),B.resourcesViewed," viewed"]}),l.jsxs("span",{children:[l.jsx(Is,{className:"w-3 h-3 inline mr-0.5"}),B.totalTime,"m"]})]})]},B.cls))})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),T.length===0?l.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):l.jsx("div",{className:"space-y-2",children:T.map(B=>{var Y;const D=Math.round((((Y=B.metrics)==null?void 0:Y.engagementTime)||0)/60);return l.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${D>=5?"bg-green-500":D>=1?"bg-yellow-500":"bg-gray-500"}`}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-xs text-white font-bold truncate",children:B.assignmentTitle}),l.jsxs("div",{className:"text-[10px] text-gray-500",children:[B.classType,"  ",D,"m engaged"]})]}),l.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:B.submittedAt?new Date(B.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},B.id)})})]}),y>0&&l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),l.jsx("div",{className:"space-y-2",children:(P=(F=t.gamification)==null?void 0:F.activeQuests)==null?void 0:P.filter(B=>B.status==="ACCEPTED"||B.status==="DEPLOYED").map(B=>l.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kd,{className:`w-3.5 h-3.5 ${B.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),l.jsx("span",{className:"text-xs text-white",children:B.questId})]}),l.jsx("span",{className:`text-[10px] font-bold uppercase ${B.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:B.status})]},B.questId))})]}),l.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[l.jsxs("div",{children:["Email: ",t.email]}),l.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),l.jsxs("div",{children:["Enrolled: ",p.join(", ")||"None"]}),l.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),l.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&l.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})]})},Hue=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Tu(),[i,a]=M.useState(null),[s,c]=M.useState([]),[d,h]=M.useState([]),[p,m]=M.useState([]),[y,b]=M.useState([]),[T,_]=M.useState(Date.now()),[w,N]=M.useState(null),[k,C]=M.useState("xp"),[$,I]=M.useState("desc"),L=oe=>{k===oe?I(ae=>ae==="asc"?"desc":"asc"):(C(oe),I("asc"))},E=({label:oe,col:ae,className:pe})=>l.jsx("th",{className:`cursor-pointer select-none group p-3 ${pe??""}`,onClick:()=>L(ae),children:l.jsxs("div",{className:`flex items-center gap-1 ${pe!=null&&pe.includes("text-center")?"justify-center":pe!=null&&pe.includes("text-right")?"justify-end":"justify-start"}`,children:[l.jsx("span",{children:oe}),l.jsxs("span",{className:"flex flex-col gap-px",children:[l.jsx(bE,{className:`w-2.5 h-2.5 -mb-0.5 ${k===ae&&$==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),l.jsx(Va,{className:`w-2.5 h-2.5 -mt-0.5 ${k===ae&&$==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});M.useEffect(()=>{const oe=Be.subscribeToChatFlags(c),ae=Be.subscribeToAnnouncements(h),pe=Be.subscribeToStudentAlerts(m),ve=Be.subscribeToStudentBuckets(b),Ye=setInterval(()=>_(Date.now()),6e4);return()=>{oe(),ae(),pe(),ve(),clearInterval(Ye)}},[]);const A=t.filter(oe=>oe.role==="STUDENT"),R=M.useMemo(()=>{const oe=new Map;for(const ae of p){const pe=oe.get(ae.studentId),ve={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!pe||(ve[ae.riskLevel]||0)>(ve[pe.riskLevel]||0))&&oe.set(ae.studentId,ae)}return oe},[p]),F=M.useMemo(()=>{const oe=new Map;for(const ae of y)oe.has(ae.studentId)||oe.set(ae.studentId,ae);return oe},[y]),P=M.useMemo(()=>{const oe={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},ae=new Set;for(const pe of y)ae.has(pe.studentId)||(ae.add(pe.studentId),oe[pe.bucket]!==void 0&&oe[pe.bucket]++);return oe},[y]),B=A.length,D=Math.round(A.reduce((oe,ae)=>{var pe;return oe+(((pe=ae.stats)==null?void 0:pe.totalTime)||0)},0)/(B||1)),Y=A.reduce((oe,ae)=>{var pe;return oe+(((pe=ae.stats)==null?void 0:pe.problemsCompleted)||0)},0),J=A.reduce((oe,ae)=>{var pe;return oe+(((pe=ae.gamification)==null?void 0:pe.xp)||0)},0),X=A.filter(oe=>oe.mutedUntil&&new Date(oe.mutedUntil).getTime()>T),ee=async oe=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Be.muteUser(oe,0)},Z=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Be.INDEFINITE_MUTE}],ge=async(oe,ae)=>{await Be.muteUser(oe,ae),N(null)},ce=async(oe,ae)=>{const pe=new Date(ae).getTime(),ve=new Date(Math.max(pe,Date.now())+3600*1e3),Ye=Math.ceil((ve.getTime()-Date.now())/6e4);await Be.muteUser(oe,Ye)},Q=({label:oe,value:ae,icon:pe,color:ve})=>l.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[l.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${ve}`,children:pe}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:ae}),l.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:oe})]}),l.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${ve}`})]}),re=oe=>{const pe=new Date(oe).getTime()-T;if(pe<=0)return"Expired";const ve=Math.ceil(pe/6e4);return ve>60?`${Math.ceil(ve/60)} hrs`:`${ve} mins`},de=oe=>{if(!oe)return"Never";const ae=new Date(oe),pe=Date.now()-ae.getTime(),ve=Math.floor(pe/6e4);if(ve<1)return"Just now";if(ve<60)return`${ve}m ago`;const Ye=Math.floor(ve/60);return Ye<24?`${Ye}h ago`:ae.toLocaleDateString()};return l.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[l.jsx("div",{className:"flex justify-between items-end",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),l.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Q,{label:"Total Students",value:B,icon:l.jsx(mu,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),l.jsx(Q,{label:"Total XP Awarded",value:J.toLocaleString(),icon:l.jsx(Pi,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),l.jsx(Q,{label:"Resources Viewed",value:Y,icon:l.jsx(wE,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),l.jsx(Q,{label:"Avg Active Time",value:`${D}m`,icon:l.jsx(Is,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?l.jsx(Rs,{className:"w-5 h-5"}):l.jsx(m2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[l.jsx(bb,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(oe=>l.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-sm font-bold text-white",children:[oe.senderName," ",l.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",oe.classType]})]}),l.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',oe.content,'"']})]}),l.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(oe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs("button",{onClick:async()=>{await Be.resolveFlag(oe.id),oe.messageId&&await Be.unflagMessage(oe.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[l.jsx(Dh,{className:"w-3 h-3"})," Dismiss"]}),l.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Be.resolveFlag(oe.id),oe.messageId&&await Be.deleteMessage(oe.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[l.jsx(xi,{className:"w-3 h-3"})," Delete"]}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>N(w===oe.id?null:oe.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:l.jsx(wb,{className:"w-3 h-3"})}),w===oe.id&&l.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[l.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",oe.senderName]}),Z.map(ae=>l.jsx("button",{onClick:()=>ge(oe.senderId,ae.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:ae.label},ae.minutes))]})]})]})]},oe.id))})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[l.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[l.jsx(wb,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),X.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[l.jsx(mu,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[l.jsx("th",{className:"pb-2",children:"Operative"}),l.jsx("th",{className:"pb-2",children:"Remaining"}),l.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:X.map(oe=>l.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[l.jsxs("td",{className:"py-3",children:[l.jsx("div",{className:"text-sm font-bold text-white",children:oe.name}),l.jsx("div",{className:"text-[10px] text-gray-500",children:oe.classType})]}),l.jsx("td",{className:"py-3",children:l.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:re(oe.mutedUntil)})}),l.jsx("td",{className:"py-3 text-right",children:l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>ce(oe.id,oe.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:l.jsx(_b,{className:"w-3.5 h-3.5"})}),l.jsx("button",{onClick:()=>ee(oe.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:l.jsx(bb,{className:"w-3.5 h-3.5"})})]})})]},oe.id))})]})})]})]}),p.length>0&&l.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[l.jsx(MI,{className:"w-5 h-5"}),"Early Warning System"]}),l.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),l.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(oe=>{const ae={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},pe={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},ve=oe.bucket?ud[oe.bucket]:null;return l.jsx("div",{className:`border p-4 rounded-xl ${ae[oe.riskLevel]||ae.LOW}`,children:l.jsxs("div",{className:"flex justify-between items-start gap-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${pe[oe.riskLevel]||pe.LOW}`,children:oe.riskLevel}),ve&&l.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ve.bgColor} ${ve.color} ${ve.borderColor} border`,children:ve.label}),l.jsx("span",{className:"text-sm font-bold text-white truncate",children:oe.studentName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:oe.classType})]}),l.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:oe.message}),ve&&l.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:ve.description}),l.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[l.jsxs("span",{children:["ES: ",oe.engagementScore]}),l.jsxs("span",{children:["Class Avg: ",oe.classMean]}),l.jsx("span",{children:new Date(oe.createdAt).toLocaleDateString()})]})]}),l.jsxs("div",{className:"flex gap-2 shrink-0",children:[l.jsx("button",{onClick:()=>a(oe.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),l.jsx("button",{onClick:async()=>{await Be.dismissAlert(oe.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},oe.id)})})]}),y.length>0&&l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(MI,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),l.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(ud).map(oe=>{const ae=ud[oe],pe=P[oe];return l.jsxs("div",{className:`border rounded-xl p-3 ${ae.borderColor} ${ae.bgColor} transition hover:scale-[1.02]`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-xs font-bold ${ae.color}`,children:ae.label}),l.jsx("span",{className:"text-lg font-bold text-white",children:pe})]}),l.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:ae.description})]},oe)})}),(()=>{const oe=Object.values(P).reduce((ae,pe)=>ae+pe,0);return oe===0?null:l.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(ud).map(ae=>{const pe=P[ae]/oe*100;if(pe===0)return null;const ve={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return l.jsx("div",{className:`${ve[ae]||"bg-gray-500"} transition-all`,style:{width:`${pe}%`},title:`${ud[ae].label}: ${P[ae]} (${Math.round(pe)}%)`},ae)})})})()]}),l.jsx("div",{className:"mt-8",children:l.jsx($ue,{announcements:d,studentIds:A.map(oe=>oe.id)})}),l.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[l.jsx(E,{label:"Student",col:"name"}),l.jsx(E,{label:"Class",col:"class"}),l.jsx(E,{label:"Last Seen",col:"lastSeen",className:"text-center"}),l.jsx(E,{label:"Total Time",col:"time",className:"text-center"}),l.jsx(E,{label:"Resources",col:"resources",className:"text-center"}),l.jsx(E,{label:"XP",col:"xp",className:"text-right"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const oe=[...A].sort((pe,ve)=>{var Ye,Ne,le,we,xe,dt;switch(k){case"name":return $==="asc"?pe.name.localeCompare(ve.name):ve.name.localeCompare(pe.name);case"class":return $==="asc"?(pe.classType||"").localeCompare(ve.classType||""):(ve.classType||"").localeCompare(pe.classType||"");case"lastSeen":{const Ke=pe.lastLoginAt?new Date(pe.lastLoginAt).getTime():0,ut=ve.lastLoginAt?new Date(ve.lastLoginAt).getTime():0;return $==="asc"?Ke-ut:ut-Ke}case"time":{const Ke=((Ye=pe.stats)==null?void 0:Ye.totalTime)||0,ut=((Ne=ve.stats)==null?void 0:Ne.totalTime)||0;return $==="asc"?Ke-ut:ut-Ke}case"resources":{const Ke=((le=pe.stats)==null?void 0:le.problemsCompleted)||0,ut=((we=ve.stats)==null?void 0:we.problemsCompleted)||0;return $==="asc"?Ke-ut:ut-Ke}case"xp":default:{const Ke=((xe=pe.gamification)==null?void 0:xe.xp)||0,ut=((dt=ve.gamification)==null?void 0:dt.xp)||0;return $==="asc"?Ke-ut:ut-Ke}}}),ae=Math.max(1,...A.map(pe=>{var ve;return((ve=pe.gamification)==null?void 0:ve.xp)||0}));return oe.map(pe=>{var jt,Ie,$e;const ve=((jt=pe.gamification)==null?void 0:jt.xp)||0,Ye=Math.round(ve/ae*100),Ne=pe.lastLoginAt,le=Ne?Date.now()-new Date(Ne).getTime():1/0,we=le<36e5?"text-green-400":le<864e5?"text-yellow-400":le<1/0?"text-red-400":"text-gray-600",xe=le<36e5?"bg-green-500":le<864e5?"bg-yellow-500":le<1/0?"bg-red-500":"bg-gray-600",dt=R.get(pe.id),Ke={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ut=F.get(pe.id),it=ut?ud[ut.bucket]:null;return l.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(dt==null?void 0:dt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>a(pe.id),children:[l.jsx("td",{className:"p-3 font-bold text-white",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[pe.avatarUrl?l.jsx("img",{src:pe.avatarUrl,alt:pe.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):l.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:pe.name.charAt(0)}),l.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${xe}`})]}),l.jsx("span",{className:"truncate max-w-[120px]",children:pe.name}),dt&&Ke[dt.riskLevel]&&l.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Ke[dt.riskLevel]}`,title:`${dt.riskLevel} risk: ${dt.reason}`}),it&&l.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${it.bgColor} ${it.color} border ${it.borderColor}`,title:it.description,children:it.label})]})}),l.jsx("td",{className:"p-3 text-sm text-gray-400",children:pe.classType}),l.jsx("td",{className:`p-3 text-center text-xs font-mono ${we}`,children:de(pe.lastLoginAt)}),l.jsxs("td",{className:"p-3 text-center text-white",children:[((Ie=pe.stats)==null?void 0:Ie.totalTime)||0,"m"]}),l.jsx("td",{className:"p-3 text-center text-white",children:(($e=pe.stats)==null?void 0:$e.problemsCompleted)||0}),l.jsx("td",{className:"p-3 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Ye}%`}})}),l.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:ve})]})})]},pe.id)})})()})]})})]}),i&&(()=>{const oe=A.find(ae=>ae.id===i);return oe?l.jsx(que,{student:oe,submissions:r.filter(ae=>ae.userId===i),assignments:e,bucketProfiles:y.filter(ae=>ae.studentId===i),onClose:()=>a(null)}):null})()]})},Gue=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const i=sa(),{confirm:a}=Tu(),[s,c]=M.useState(new Set),[d,h]=M.useState(Pr.AP_PHYSICS),[p,m]=M.useState(!1),[y,b]=M.useState(!1),[T,_]=M.useState({}),w=(ye,We)=>{_(gt=>{const yt=gt[ye]||{col:"name",dir:"asc"};return{...gt,[ye]:{col:We,dir:yt.col===We&&yt.dir==="asc"?"desc":"asc"}}})},N=({label:ye,col:We,type:gt,className:yt})=>{const lt=T[gt]||{col:"name",dir:"asc"},et=lt.col===We;return l.jsx("th",{className:`cursor-pointer select-none group p-4 ${yt??""}`,onClick:()=>w(gt,We),children:l.jsxs("div",{className:`flex items-center gap-1 ${yt!=null&&yt.includes("text-center")?"justify-center":"justify-start"}`,children:[l.jsx("span",{children:ye}),l.jsxs("span",{className:"flex flex-col gap-px",children:[l.jsx(bE,{className:`w-2.5 h-2.5 -mb-0.5 ${et&&lt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),l.jsx(Va,{className:`w-2.5 h-2.5 -mt-0.5 ${et&&lt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[k,C]=M.useState(""),[$,I]=M.useState(Pr.AP_PHYSICS),[L,E]=M.useState(""),[A,R]=M.useState(""),[F,P]=M.useState(!1),[B,D]=M.useState(!1),[Y,J]=M.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[X,ee]=M.useState(10),[Z,ge]=M.useState("single"),[ce,Q]=M.useState([]),[re,de]=M.useState(!1),oe=M.useRef(null),ae=t.filter(ye=>ye.role==="STUDENT"),pe=M.useMemo(()=>e.filter(ye=>!t.some(We=>We.email.toLowerCase()===ye.email.toLowerCase())),[e,t]),ve=M.useMemo(()=>[...Array.from(new Set([...Object.values(Pr).filter(We=>We!==Pr.UNCATEGORIZED),...r.map(We=>We.className)])).sort(),Pr.UNCATEGORIZED],[r]),Ye=ye=>{const We=ae.filter(lt=>{var et,Lt;return((et=lt.enrolledClasses)==null?void 0:et.includes(ye))||ye===Pr.UNCATEGORIZED&&(((Lt=lt.enrolledClasses)==null?void 0:Lt.length)===0||!lt.enrolledClasses)}),gt=We.every(lt=>s.has(lt.id)),yt=new Set(s);We.forEach(lt=>{gt?yt.delete(lt.id):yt.add(lt.id)}),c(yt)},Ne=ye=>{const We=new Set(s);We.has(ye)?We.delete(ye):We.add(ye),c(We)},le=async()=>{if(s.size>0){const ye=Array.from(s).map(async We=>{const gt=t.find(yt=>yt.id===We);if(gt){const yt=gt.enrolledClasses||[],lt=Array.from(new Set([...yt.filter(et=>et!==Pr.UNCATEGORIZED),d]));await Be.updateUserEnrolledClasses(We,lt)}});await Promise.all(ye),c(new Set)}},we=async ye=>{if(s.size>0){if(!await a({message:`Remove ${s.size} students from ${ye}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const We=Array.from(s).map(async gt=>{const yt=t.find(lt=>lt.id===gt);if(yt){const et=(yt.enrolledClasses||[]).filter(Lt=>Lt!==ye);await Be.updateUserEnrolledClasses(gt,et)}});await Promise.all(We),c(new Set)}},xe=async(ye,We)=>{if(await a({message:`Remove ${ye.name} from ${We}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const yt=(ye.enrolledClasses||[]).filter(lt=>lt!==We);await Be.updateUserEnrolledClasses(ye.id,yt)}},dt=async(ye,We)=>{await a({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${We}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Be.removeUser(ye)},Ke=async ye=>{ye!==Pr.UNCATEGORIZED&&await a({message:`Delete group config ${ye}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Be.deleteClassConfig(ye)},ut=async ye=>{await a({message:`Cancel invite for ${ye}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Be.removeFromWhitelist(ye)},it=(ye,We)=>{ye!==Pr.UNCATEGORIZED&&(R(ye),P(!0),We?(J(We.features),ee(We.xpPerMinute||10)):(J({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),ee(10)),b(!0))},jt=ye=>{ye.preventDefault(),n(k,$),L.trim()&&Be.updateWhitelistSection(k,L.trim()),C(""),E(""),m(!1)},Ie=ye=>{var yt;const We=(yt=ye.target.files)==null?void 0:yt[0];if(!We)return;const gt=new FileReader;gt.onload=lt=>{var Qt,Ft;const et=(Qt=lt.target)==null?void 0:Qt.result;if(!et)return;const Lt=et.split(/\r?\n/).filter(Kt=>Kt.trim()),tr=(Ft=Lt[0])!=null&&Ft.toLowerCase().includes("email")?1:0,Wr=new Set(e.map(Kt=>Kt.email.toLowerCase())),hn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,fn=Lt.slice(tr).map(Kt=>{const Dn=Kt.includes("	")?Kt.split("	"):Kt.split(","),Gn=(Dn[0]||"").trim().toLowerCase(),Yi=(Dn[1]||"").trim()||Pr.AP_PHYSICS,pi=(Dn[2]||"").trim();let Lr="pending";return hn.test(Gn)?Wr.has(Gn)&&(Lr="duplicate"):Lr="invalid",{email:Gn,classType:Yi,section:pi,status:Lr}}).filter(Kt=>Kt.email.length>0);Q(fn)},gt.readAsText(We),ye.target.value=""},$e=async()=>{const ye=ce.filter(gt=>gt.status==="pending");if(ye.length===0)return;de(!0);let We=0;for(const gt of ye)try{await Be.addToWhitelist(gt.email,gt.classType),gt.section&&await Be.updateWhitelistSection(gt.email,gt.section),gt.status="success",We++}catch{gt.status="invalid"}Q([...ce]),de(!1),i.success(`${We} operative${We!==1?"s":""} imported successfully.`),ce.every(gt=>gt.status==="success"||gt.status==="duplicate")&&setTimeout(()=>{m(!1),Q([]),ge("single")},1500)},nt=async ye=>{if(ye.preventDefault(),!!A){D(!0);try{await Be.saveClassConfig({id:A,className:A,features:Y,xpPerMinute:X}),R(""),b(!1),P(!1)}catch(We){console.error("Failed to save config:",We),i.error("Failed to save class configuration.")}finally{D(!1)}}},_t=ye=>{if(!ye)return"Never";const We=new Date(ye),gt=Date.now()-We.getTime(),yt=Math.floor(gt/6e4);if(yt<60)return`${yt}m ago`;const lt=Math.floor(yt/60);return lt<24?`${lt}h ago`:We.toLocaleDateString()},Xt=ye=>{const We=ye===Pr.UNCATEGORIZED,gt=T[ye]||{col:"name",dir:"asc"},yt=[...ae.filter(et=>{var Lt;return((Lt=et.enrolledClasses)==null?void 0:Lt.includes(ye))||We&&(!et.enrolledClasses||et.enrolledClasses.length===0)})].sort((et,Lt)=>{var tr,Wr,hn,fn;switch(gt.col){case"status":{const Qt=et.isWhitelisted?1:0,Ft=Lt.isWhitelisted?1:0;return gt.dir==="asc"?Qt-Ft:Ft-Qt}case"lastSeen":{const Qt=et.lastLoginAt?new Date(et.lastLoginAt).getTime():0,Ft=Lt.lastLoginAt?new Date(Lt.lastLoginAt).getTime():0;return gt.dir==="asc"?Qt-Ft:Ft-Qt}case"xp":{const Qt=((Wr=(tr=et.gamification)==null?void 0:tr.classXp)==null?void 0:Wr[ye])||0,Ft=((fn=(hn=Lt.gamification)==null?void 0:hn.classXp)==null?void 0:fn[ye])||0;return gt.dir==="asc"?Qt-Ft:Ft-Qt}case"name":default:return gt.dir==="asc"?et.name.localeCompare(Lt.name):Lt.name.localeCompare(et.name)}}),lt=r.find(et=>et.className===ye);return l.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${We?"opacity-90":""}`,children:[l.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${We?"bg-orange-500/10":"bg-white/5"}`,children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("h3",{className:`font-bold text-lg tracking-wide ${We?"text-orange-300":"text-white"}`,children:[We&&l.jsx(poe,{className:"w-5 h-5 inline mr-2 mb-1"}),ye]}),l.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${We?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[yt.length," Registered"]}),!We&&l.jsx("button",{onClick:()=>it(ye,lt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:l.jsx(Gm,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex gap-2",children:[s.size>0&&Array.from(s).some(et=>yt.find(Lt=>Lt.id===et))&&l.jsxs("button",{onClick:()=>we(ye),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[l.jsx(Goe,{className:"w-3 h-3"})," Remove Selected"]}),!We&&l.jsxs("button",{onClick:()=>Ke(ye),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[l.jsx(xi,{className:"w-3 h-3"}),"Config"]})]})]}),l.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[l.jsx("th",{className:"w-12 p-4 text-center",children:yt.length>0&&l.jsx("button",{onClick:()=>Ye(ye),className:"hover:text-purple-400 transition",children:l.jsx(VI,{className:"w-4 h-4"})})}),l.jsx(N,{label:"Operative",col:"name",type:ye}),l.jsx(N,{label:"System Status",col:"status",type:ye,className:"text-center"}),l.jsx(N,{label:"Last Seen",col:"lastSeen",type:ye,className:"text-center"}),l.jsx(N,{label:"Class XP",col:"xp",type:ye,className:"text-center"}),l.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:yt.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 italic text-sm",children:We?"No restricted operatives found.":"No students registered in this roster yet."})}):yt.map(et=>{var tr,Wr,hn,fn;const Lt=((Wr=(tr=et.gamification)==null?void 0:tr.classXp)==null?void 0:Wr[ye])||0;return l.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(et.id)?"bg-purple-500/10":""}`,children:[l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>Ne(et.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(et.id)?l.jsx(Voe,{className:"w-4 h-4 text-purple-500"}):l.jsx(VI,{className:"w-4 h-4 group-hover:text-gray-400"})})}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:et.avatarUrl,alt:et.name,className:"w-8 h-8 rounded-full border border-white/10"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-gray-200 text-sm",children:et.name}),l.jsxs("div",{className:"text-[10px] text-gray-500 font-mono",children:[et.email,et.section?`  ${et.section}`:""]})]})]})}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${et.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[et.isWhitelisted?l.jsx(zI,{className:"w-3 h-3"}):l.jsx(m2,{className:"w-3 h-3"}),et.isWhitelisted?"Authorized":"Restricted"]})}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[l.jsx(Is,{className:"w-3 h-3"}),_t(et.lastLoginAt)]})}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-lg text-purple-300",children:Lt.toLocaleString()}),(((hn=et.enrolledClasses)==null?void 0:hn.length)||0)>1&&l.jsxs("details",{className:"mt-1",children:[l.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),l.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(fn=et.enrolledClasses)==null?void 0:fn.map(Qt=>{var Ft,Kt;return l.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[l.jsx("span",{className:`truncate ${Qt===ye?"text-purple-400 font-bold":"text-gray-500"}`,children:Qt}),l.jsx("span",{className:"text-gray-400 font-mono",children:(((Kt=(Ft=et.gamification)==null?void 0:Ft.classXp)==null?void 0:Kt[Qt])||0).toLocaleString()})]},Qt)})})]})]})}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("div",{className:"flex items-center justify-center gap-2",children:l.jsx("button",{onClick:()=>We?dt(et.id,et.name):xe(et,ye),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:We?"Permanently Delete":"Remove from this Class",children:l.jsx(hs,{className:"w-4 h-4"})})})})]},et.id)})})]})})]},ye)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),l.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[l.jsxs("button",{onClick:()=>{R(""),J({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),P(!1),b(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[l.jsx(Gm,{className:"w-4 h-4"}),"Class Config"]}),l.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[l.jsx(FI,{className:"w-4 h-4"}),"Invite Student"]})]})]}),pe.length>0&&l.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[l.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[l.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[l.jsx(koe,{className:"w-4 h-4"})," Pending Class Invitations (",pe.length,")"]}),l.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),l.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:pe.map(ye=>l.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ye.email}),l.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[l.jsx(zI,{className:"w-3 h-3 text-amber-500"}),l.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ye.classTypes||[ye.classType]).join(", ")," Access"]})]})]}),l.jsx("button",{onClick:()=>ut(ye.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:l.jsx(xi,{className:"w-3.5 h-3.5"})})]},ye.email))})]}),l.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[l.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),l.jsxs("div",{className:"relative w-full sm:w-auto",children:[l.jsx("select",{value:d,onChange:ye=>h(ye.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:ve.filter(ye=>ye!==Pr.UNCATEGORIZED).map(ye=>l.jsxs("option",{value:ye,children:["Apply ",ye," Access"]},ye))}),l.jsx(Va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),l.jsxs("button",{onClick:le,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[l.jsx(ko,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),l.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),l.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),l.jsx("div",{className:"pb-12",children:ve.map(ye=>Xt(ye))}),l.jsxs(ba,{isOpen:p,onClose:()=>{m(!1),Q([]),ge("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[l.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[l.jsxs("button",{onClick:()=>{ge("single"),Q([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Z==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[l.jsx(FI,{className:"w-3.5 h-3.5"})," Single"]}),l.jsxs("button",{onClick:()=>ge("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Z==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[l.jsx(Km,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),Z==="single"?l.jsxs("form",{onSubmit:jt,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),l.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:k,onChange:ye=>C(ye.target.value),placeholder:"student@gmail.com"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),l.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:$,onChange:ye=>I(ye.target.value),children:ve.filter(ye=>ye!==Pr.UNCATEGORIZED).map(ye=>l.jsx("option",{value:ye,children:ye},ye))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),l.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:L,onChange:ye=>E(ye.target.value),placeholder:"e.g. Period 3, Block A"})]}),l.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),l.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[l.jsx("input",{type:"file",ref:oe,accept:".csv,.tsv,.txt",onChange:Ie,className:"hidden"}),ce.length===0?l.jsxs(l.Fragment,{children:[l.jsx(Km,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),l.jsx("button",{onClick:()=>{var ye;return(ye=oe.current)==null?void 0:ye.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),l.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",l.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),l.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),l.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:l.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",l.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",l.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",l.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):l.jsxs(l.Fragment,{children:[l.jsx(wE,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),l.jsxs("p",{className:"text-sm font-bold text-white",children:[ce.length," records parsed"]}),l.jsx("button",{onClick:()=>{Q([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),ce.length>0&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:l.jsxs("table",{className:"w-full text-left text-xs",children:[l.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:l.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[l.jsx("th",{className:"p-2 pl-3",children:"Email"}),l.jsx("th",{className:"p-2",children:"Class"}),l.jsx("th",{className:"p-2",children:"Section"}),l.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:ce.map((ye,We)=>l.jsxs("tr",{className:ye.status==="invalid"?"bg-red-500/5":ye.status==="duplicate"?"bg-yellow-500/5":ye.status==="success"?"bg-green-500/5":"",children:[l.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ye.email}),l.jsx("td",{className:"p-2 text-gray-400",children:ye.classType}),l.jsx("td",{className:"p-2 text-gray-500",children:ye.section||""}),l.jsx("td",{className:"p-2 pr-3 text-right",children:l.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ye.status==="pending"?"bg-blue-500/20 text-blue-400":ye.status==="success"?"bg-green-500/20 text-green-400":ye.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ye.status})})]},We))})]})}),l.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("span",{className:"text-blue-400",children:[ce.filter(ye=>ye.status==="pending").length," ready"]}),l.jsxs("span",{className:"text-yellow-400",children:[ce.filter(ye=>ye.status==="duplicate").length," duplicates"]}),l.jsxs("span",{className:"text-red-400",children:[ce.filter(ye=>ye.status==="invalid").length," invalid"]}),ce.some(ye=>ye.status==="success")&&l.jsxs("span",{className:"text-green-400",children:[ce.filter(ye=>ye.status==="success").length," imported"]})]})}),ce.filter(ye=>ye.status==="duplicate").length>0&&l.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[l.jsx(Rs,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),l.jsx("button",{onClick:$e,disabled:re||ce.filter(ye=>ye.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:re?l.jsxs(l.Fragment,{children:[l.jsx(os,{className:"w-4 h-4 animate-spin"})," Importing..."]}):l.jsxs(l.Fragment,{children:["Import ",ce.filter(ye=>ye.status==="pending").length," Operatives"]})})]})]})]}),l.jsx(ba,{isOpen:y,onClose:()=>b(!1),title:F?"Edit Class Node Config":"Initialize New Class Node",children:l.jsxs("form",{onSubmit:nt,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),l.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:A,onChange:ye=>R(ye.target.value),placeholder:"e.g. AP Physics Period 4"}),F&&l.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),l.jsxs("div",{className:"border-t border-white/10 pt-4",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Y.physicsLab,onChange:ye=>J({...Y,physicsLab:ye.target.checked})}),l.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Y.evidenceLocker,onChange:ye=>J({...Y,evidenceLocker:ye.target.checked})}),l.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Y.leaderboard,onChange:ye=>J({...Y,leaderboard:ye.target.checked})}),l.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Y.physicsTools,onChange:ye=>J({...Y,physicsTools:ye.target.checked})}),l.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Y.communications,onChange:ye=>J({...Y,communications:ye.target.checked})}),l.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"number",min:1,max:100,value:X,onChange:ye=>ee(Math.max(1,Math.min(100,parseInt(ye.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),l.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),l.jsx("button",{type:"submit",disabled:B,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${B?"opacity-70 cursor-not-allowed":""}`,children:B?l.jsxs(l.Fragment,{children:[l.jsx(os,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):F?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},zc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},LR={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},Kue=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,Wue=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,Xue=({assignment:t,isOpen:e,onClose:r})=>{const n=sa(),i=M.useRef(null),[a,s]=M.useState([]),[c,d]=M.useState(!0),[h,p]=M.useState(!1),[m,y]=M.useState(t.category==="Practice Set"?"reading":"manage"),[b,T]=M.useState(null),[_,w]=M.useState(null),[N,k]=M.useState(""),[C,$]=M.useState(null),[I,L]=M.useState(!1),[E,A]=M.useState(null),[R,F]=M.useState({}),[P,B]=M.useState(null),[D,Y]=M.useState(!0),[J,X]=M.useState(null),[ee,Z]=M.useState(null),[ge,ce]=M.useState(null),[Q,re]=M.useState(!1),de=M.useRef(null),oe=t.category==="Practice Set";M.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const $e=await Gi(ht(Ue,"question_banks",t.id));$e.exists()?s($e.data().questions||[]):s([]);const nt=await Gi(ht(Ue,"reading_materials",t.id));nt.exists()?X(nt.data()):X(null)}catch($e){console.error("Failed to load bank:",$e),s([])}finally{d(!1)}})()},[e,t.id]);const ae=async Ie=>{p(!0);try{await Fi(ht(Ue,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Ie,questionCount:Ie.length,updatedAt:new Date().toISOString()}),s(Ie)}catch($e){n.error("Failed to save: "+($e instanceof Error?$e.message:"Unknown error"))}finally{p(!1)}},pe=async Ie=>{const $e=a.filter(nt=>nt.id!==Ie);await ae($e),n.success("Question removed."),C===Ie&&$(null)},ve=async()=>{try{await pa(ht(Ue,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Ye=()=>{navigator.clipboard.writeText(Kue(t.title,t.classType,t.description)),L(!0),setTimeout(()=>L(!1),2e3),n.success("Prompt copied!")},Ne=()=>{navigator.clipboard.writeText(Wue(t.title,t.classType,t.description)),re(!0),setTimeout(()=>re(!1),2e3),n.success("Reading prompt copied!")},le=async Ie=>{var nt;const $e=(nt=Ie.target.files)==null?void 0:nt[0];if($e){ce(null),Z(null);try{let Xt=(await $e.text()).replace(/```json\s*|```\s*/g,"").trim();Xt=Xt.replace(/[\x00-\x1F\x7F]/g,gt=>gt===`
`||gt==="\r"||gt==="	"?" ":"");let ye;try{ye=JSON.parse(Xt)}catch{const gt=Xt.match(/\{[\s\S]*\}/);if(gt)ye=JSON.parse(gt[0]);else throw new Error("No JSON object found.")}if(!ye.title||!ye.sections||!Array.isArray(ye.sections))throw new Error("Missing required fields: title and sections array.");const We=ye.sections.filter(gt=>!gt.title||!gt.content);if(We.length>0)throw new Error(`${We.length} section(s) missing title or content.`);Z(ye)}catch(_t){ce(_t instanceof Error?_t.message:"Parse failed.")}de.current&&(de.current.value="")}},we=async()=>{if(ee){p(!0);try{await Fi(ht(Ue,"reading_materials",t.id),{...ee,assignmentId:t.id,updatedAt:new Date().toISOString()}),X(ee),Z(null),n.success(`Study material uploaded: ${ee.sections.length} sections!`)}catch(Ie){n.error("Failed to save: "+(Ie instanceof Error?Ie.message:"Unknown error"))}finally{p(!1)}}},xe=async()=>{p(!0);try{await pa(ht(Ue,"reading_materials",t.id)),X(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},dt=async Ie=>{var nt;const $e=(nt=Ie.target.files)==null?void 0:nt[0];if($e){B(null),A(null);try{let Xt=(await $e.text()).replace(/```json\s*|```\s*/g,"").trim();Xt=Xt.replace(/[\x00-\x1F\x7F]/g,lt=>lt===`
`||lt==="\r"||lt==="	"?" ":"");let ye;try{ye=JSON.parse(Xt)}catch{const lt=Xt.match(/\[[\s\S]*\]/);if(lt)try{ye=JSON.parse(lt[0])}catch{const et=lt[0];let Lt=null;for(let tr=et.length-1;tr>0;tr--)if(et[tr]==="}")try{Lt=JSON.parse(et.slice(0,tr+1)+"]");break}catch{}if(Lt)ye=Lt;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let et=null;const Lt="["+Xt;for(let tr=Lt.length-1;tr>0;tr--)if(Lt[tr]==="}")try{et=JSON.parse(Lt.slice(0,tr+1)+"]");break}catch{}if(et)ye=et;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(ye)||ye.length===0)throw new Error("Must be a non-empty JSON array.");const We=ye.filter(lt=>lt.id&&lt.tier&&lt.type&&lt.stem&&lt.options&&lt.correctAnswer),gt=ye.length-We.length;if(We.length===0){B("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const yt={};We.forEach(lt=>{const et=lt.tier;yt[et]=(yt[et]||0)+1}),A(We),F(yt),gt>0&&n.success(`Parsed ${We.length} questions (${gt} skipped  missing fields).`)}catch(_t){B(_t instanceof Error?_t.message:"Parse failed.")}i.current&&(i.current.value="")}},Ke=async()=>{if(!E)return;let Ie;if(D&&a.length>0){const $e=new Set(a.map(_t=>_t.id)),nt=E.map((_t,Xt)=>({..._t,id:$e.has(_t.id)?`${_t.id}_${Date.now()}_${Xt}`:_t.id}));Ie=[...a,...nt]}else Ie=E;await ae(Ie),n.success(`${D?"Added":"Replaced with"} ${E.length} questions. Total: ${Ie.length}`),A(null),y("manage")},ut=M.useMemo(()=>{let Ie=a;if(b&&(Ie=Ie.filter($e=>$e.tier===b)),_&&(Ie=Ie.filter($e=>$e.type===_)),N){const $e=N.toLowerCase();Ie=Ie.filter(nt=>nt.stem.toLowerCase().includes($e)||nt.id.toLowerCase().includes($e))}return Ie},[a,b,_,N]),it=M.useMemo(()=>{const Ie={1:0,2:0,3:0};return a.forEach($e=>{Ie[$e.tier]=(Ie[$e.tier]||0)+1}),Ie},[a]),jt=M.useMemo(()=>{const Ie={};return a.forEach($e=>{Ie[$e.type]=(Ie[$e.type]||0)+1}),Ie},[a]);return e?l.jsx(ba,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:l.jsxs("div",{className:"text-gray-100",children:[l.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[l.jsx(P5,{className:"w-5 h-5 text-purple-400 shrink-0"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),l.jsx("div",{className:"text-xs mt-1",children:c?l.jsx("span",{className:"text-gray-500",children:"Loading..."}):a.length>0?l.jsxs("span",{className:"text-emerald-400",children:[a.length," questions loaded"]}):l.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),a.length>0&&!c&&l.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ie=>l.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${zc[Ie].bg} ${zc[Ie].border} border`,children:[l.jsx("div",{className:`text-sm font-bold ${zc[Ie].text}`,children:it[Ie]}),l.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ie]})]},Ie))})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[!oe&&l.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[l.jsx(P5,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",a.length,")"]}),!oe&&l.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[l.jsx(ko,{className:"w-3.5 h-3.5 inline mr-1.5"}),a.length>0?"Add More":"Create Bank"]}),l.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[l.jsx(so,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",J?`(${J.sections.length})`:""]})]}),m==="manage"&&l.jsx("div",{className:"space-y-3",children:c?l.jsx("div",{className:"py-12 text-center",children:l.jsx(os,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):a.length===0?l.jsxs("div",{className:"py-12 text-center",children:[l.jsx(P5,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),l.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),l.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[l.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[l.jsx(Kq,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),l.jsx("input",{value:N,onChange:Ie=>k(Ie.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ie=>l.jsxs("button",{onClick:()=>T(b===Ie?null:Ie),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b===Ie?`${zc[Ie].bg} ${zc[Ie].text} ${zc[Ie].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ie," (",it[Ie],")"]},Ie))]})]}),Object.keys(jt).length>1&&l.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(jt).sort((Ie,$e)=>$e[1]-Ie[1]).map(([Ie,$e])=>l.jsxs("button",{onClick:()=>w(_===Ie?null:Ie),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${_===Ie?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[LR[Ie]||Ie," (",$e,")"]},Ie))}),l.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:ut.length===0?l.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):ut.map(Ie=>{const $e=zc[Ie.tier]||zc[1],nt=C===Ie.id;return l.jsxs("div",{className:`rounded-xl border transition ${nt?`${$e.border} ${$e.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[l.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>$(nt?null:Ie.id),children:[l.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${$e.bg} ${$e.text}`,children:["T",Ie.tier]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[l.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ie.id}),l.jsx("span",{className:"text-[8px] text-gray-600",children:""}),l.jsx("span",{className:"text-[8px] text-gray-500",children:LR[Ie.type]||Ie.type}),l.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[l.jsx(Pi,{className:"w-2.5 h-2.5"}),Ie.xp]})]}),l.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ie.stem})]}),l.jsx(Cd,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${nt?"rotate-90":""}`})]}),nt&&l.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ie.context&&l.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ie.context}),l.jsx("div",{className:"space-y-1",children:Ie.options.map(_t=>{const Xt=Array.isArray(Ie.correctAnswer)?Ie.correctAnswer.includes(_t.id):Ie.correctAnswer===_t.id;return l.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${Xt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[l.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[_t.id.toUpperCase(),"."]}),l.jsx("span",{children:_t.text}),Xt&&l.jsx(bi,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},_t.id)})}),l.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[l.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ie.explanation]}),Ie.linkedFollowUp&&l.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[l.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ie.linkedFollowUp.stem]}),l.jsxs("button",{onClick:()=>pe(Ie.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[l.jsx(xi,{className:"w-3 h-3"})," Delete Question"]})]})]},Ie.id)})}),l.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[l.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",ut.length," of ",a.length]}),l.jsxs("button",{onClick:ve,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[l.jsx(xi,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[l.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),l.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),l.jsx("button",{onClick:Ye,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${I?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:I?l.jsxs(l.Fragment,{children:[l.jsx(bi,{className:"w-4 h-4"})," Copied!"]}):l.jsxs(l.Fragment,{children:[l.jsx(oA,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[l.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),l.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",l.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),l.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[l.jsx(LI,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),l.jsx("input",{ref:i,type:"file",accept:".json,.txt",onChange:dt,className:"hidden"})]})]}),P&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[l.jsx(Rs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),l.jsx("p",{className:"text-red-300/70 text-xs",children:P})]}),E&&l.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(bi,{className:"w-4 h-4 text-emerald-400"}),l.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[E.length," questions parsed"]})]}),l.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ie=>l.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-base font-bold text-white",children:R[Ie]||0}),l.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ie]})]},Ie))}),a.length>0&&l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>Y(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${D?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[l.jsx(ko,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",a.length," + ",E.length,")"]}),l.jsxs("button",{onClick:()=>Y(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${D?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[l.jsx(qm,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:Ke,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?l.jsx(os,{className:"w-4 h-4 animate-spin"}):l.jsx(Km,{className:"w-4 h-4"}),h?"Saving...":`Upload ${E.length} Questions`]}),l.jsx("button",{onClick:()=>A(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:l.jsx(xi,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&l.jsxs("div",{className:"space-y-5",children:[J?l.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(so,{className:"w-4 h-4 text-emerald-400"}),l.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:J.title})]}),l.jsxs("button",{onClick:xe,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[l.jsx(xi,{className:"w-3 h-3"})," Remove"]})]}),J.description&&l.jsx("p",{className:"text-xs text-gray-400",children:J.description}),l.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[l.jsxs("span",{children:[J.sections.length," sections"]}),J.estimatedMinutes&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsxs("span",{children:["~",J.estimatedMinutes," min read"]})]})]}),l.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:J.sections.map((Ie,$e)=>l.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[l.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:$e+1}),l.jsx("span",{className:"truncate",children:Ie.title})]},$e))})]}):l.jsxs("div",{className:"py-6 text-center",children:[l.jsx(so,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),l.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),l.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[l.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),l.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),l.jsx("button",{onClick:Ne,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${Q?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:Q?l.jsxs(l.Fragment,{children:[l.jsx(bi,{className:"w-4 h-4"})," Copied!"]}):l.jsxs(l.Fragment,{children:[l.jsx(oA,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[l.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),l.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[l.jsx(LI,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),l.jsx("input",{ref:de,type:"file",accept:".json,.txt",onChange:le,className:"hidden"})]})]}),ge&&l.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[l.jsx(Rs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),l.jsx("p",{className:"text-red-300/70 text-xs",children:ge})]}),ee&&l.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(bi,{className:"w-4 h-4 text-emerald-400"}),l.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:ee.title})]}),l.jsxs("p",{className:"text-xs text-gray-400",children:[ee.sections.length," sections  ~",ee.estimatedMinutes||"?"," min read"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:we,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?l.jsx(os,{className:"w-4 h-4 animate-spin"}):l.jsx(Km,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),l.jsx("button",{onClick:()=>Z(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:l.jsx(xi,{className:"w-4 h-4"})})]})]})]}),h&&l.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[l.jsx(os,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},BR=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],Que={Textbook:l.jsx(so,{className:"w-4 h-4"}),Simulation:l.jsx(xE,{className:"w-4 h-4"}),"Lab Guide":l.jsx(p2,{className:"w-4 h-4"}),"Practice Set":l.jsx(Do,{className:"w-4 h-4"}),Article:l.jsx(Vq,{className:"w-4 h-4"}),"Video Lesson":l.jsx(Wq,{className:"w-4 h-4"}),Supplemental:l.jsx(SE,{className:"w-4 h-4"})},Yue=({assignments:t,submissions:e,classConfigs:r,onCreateAssignment:n,onPreviewAssignment:i})=>{const a=sa(),{confirm:s}=Tu(),[c,d]=M.useState(!1),[h,p]=M.useState(!1),[m,y]=M.useState(!1),[b,T]=M.useState("All Classes"),[_,w]=M.useState("All Categories"),[N,k]=M.useState(new Set),[C,$]=M.useState(null),[I,L]=M.useState({title:"",description:"",status:vl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[E,A]=M.useState(new Set([Pr.AP_PHYSICS])),[R,F]=M.useState(!1),P=M.useMemo(()=>{const Z=Object.values(Pr).filter(ce=>ce!==Pr.UNCATEGORIZED),ge=(r||[]).map(ce=>ce.className);return Array.from(new Set(["All Classes",...Z,...ge]))},[r]),B=M.useMemo(()=>t.filter(Z=>{const ge=b==="All Classes"||Z.classType===b,ce=_==="All Categories"||Z.category===_;return ge&&ce}),[t,b,_]),D=M.useMemo(()=>{const Z={};return B.forEach(ge=>{const ce=b==="All Classes"?`${ge.classType.toUpperCase()}  ${ge.unit||"Unassigned"}`:ge.unit||"Unassigned";Z[ce]||(Z[ce]=[]),Z[ce].push(ge)}),Object.keys(Z).sort().reduce((ge,ce)=>(ge[ce]=Z[ce],ge),{})},[B,b]),Y=async Z=>{if(Z.preventDefault(),E.size===0){a.error("Select a target class.");return}y(!0);try{h&&I.id?await n({...I,classType:Array.from(E)[0]}):await Promise.all(Array.from(E).map(ge=>n({...I,classType:ge}))),d(!1),p(!1)}catch(ge){console.error(ge)}finally{y(!1)}},J=Z=>{L(Z),A(new Set([Z.classType])),p(!0),d(!0)},X=async Z=>{const ge=Z.status===vl.ACTIVE?vl.ARCHIVED:vl.ACTIVE;await Be.updateAssignmentStatus(Z.id,ge)},ee=M.useMemo(()=>[...Array.isArray(e)?e:[]].sort((ge,ce)=>{const Q=new Date(ge.submittedAt||0).getTime();return new Date(ce.submittedAt||0).getTime()-Q}),[e]);return l.jsxs("div",{className:"space-y-8 pb-12",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),l.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),l.jsxs("button",{onClick:()=>{L({title:"",description:"",status:vl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),p(!1),d(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[l.jsx(ko,{className:"w-5 h-5"})," Deploy Resource"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[l.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:b,onChange:Z=>T(Z.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:P.map(Z=>l.jsx("option",{value:Z,children:Z},Z))}),l.jsx(Va,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:_,onChange:Z=>w(Z.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[l.jsx("option",{value:"All Categories",children:"All Categories"}),BR.map(Z=>l.jsx("option",{value:Z,children:Z},Z))]}),l.jsx(Va,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),l.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(D).map(([Z,ge])=>l.jsxs("div",{className:"mb-6 last:mb-0",children:[l.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[l.jsx("button",{onClick:()=>{const ce=new Set(N);ce.has(Z)?ce.delete(Z):ce.add(Z),k(ce)},className:"text-gray-400 hover:text-white transition",children:N.has(Z)?l.jsx(Va,{className:"w-4 h-4"}):l.jsx(Cd,{className:"w-4 h-4"})}),l.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:Z}),l.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!N.has(Z)&&l.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:ge.map(ce=>l.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${ce.status===vl.ARCHIVED?"bg-white/2 border-white/5 opacity-60":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[l.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[l.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${ce.status===vl.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:Que[ce.category||"Supplemental"]}),l.jsxs("div",{className:"truncate flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[l.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:ce.title}),l.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:ce.classType})]}),l.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ce.description})]})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[l.jsx("button",{onClick:()=>$(ce),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:l.jsx(Ao,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>i==null?void 0:i(ce.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:l.jsx(Moe,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>J(ce),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:l.jsx(Boe,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>X(ce),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:ce.status===vl.ACTIVE?l.jsx(soe,{className:"w-4 h-4"}):l.jsx(Hm,{className:"w-4 h-4"})}),l.jsx("button",{onClick:async()=>{await s({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Be.deleteAssignment(ce.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:l.jsx(xi,{className:"w-4 h-4"})})]})]},ce.id))})]},Z))})]}),l.jsx("div",{className:"lg:col-span-4",children:l.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[l.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[l.jsx(Is,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),l.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[ee.length===0&&l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[l.jsx(Is,{className:"w-10 h-10 text-gray-700 mb-3"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),l.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),ee.map(Z=>l.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:Z.userName}),l.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:Z.assignmentTitle})]}),l.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(Z.score)," XP"]})]}),l.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[l.jsxs("span",{children:[Math.round(Z.metrics.engagementTime/60),"m active"]}),l.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(Z.submittedAt||"").toLocaleDateString()})]})]},Z.id))]})]})})]}),l.jsx(ba,{isOpen:c,onClose:()=>d(!1),title:h?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:l.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),l.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:I.title,onChange:Z=>L({...I,title:Z.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),l.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:I.unit,onChange:Z=>L({...I,unit:Z.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),l.jsx("select",{value:I.category,onChange:Z=>L({...I,category:Z.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:BR.map(Z=>l.jsx("option",{value:Z,children:Z},Z))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:P.filter(Z=>Z!=="All Classes").map(Z=>l.jsx("button",{type:"button",onClick:()=>{const ge=new Set(E);ge.has(Z)?ge.size>1&&ge.delete(Z):ge.add(Z),A(ge)},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${E.has(Z)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Z},Z))})]}),l.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[l.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),l.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async Z=>{var ge;if((ge=Z.target.files)!=null&&ge[0]){F(!0);try{const ce=await Be.uploadHtmlResource(Z.target.files[0]);L({...I,contentUrl:ce}),a.success("File uploaded!")}catch(ce){a.error("Upload failed: "+(ce instanceof Error?ce.message:"Unknown error"))}finally{F(!1)}}}}),R&&l.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[l.jsx(os,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!R&&I.contentUrl&&l.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[l.jsx(bb,{className:"w-4 h-4"})," Resource uploaded"]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",l.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),l.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:I.description,onChange:Z=>L({...I,description:Z.target.value})})]}),l.jsx("button",{type:"submit",disabled:m,className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2",children:m?l.jsx(os,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})}),C&&l.jsx(Xue,{assignment:C,isOpen:!!C,onClose:()=>$(null)})]})},Zue=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Jue=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:i})=>{var p,m;const[a,s]=M.useState(null),c=M.useMemo(()=>{var b;if(!t)return[];const y=Object.keys(((b=t.gamification)==null?void 0:b.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=a&&c.includes(a)?a:c[0]||"_legacy",h=M.useMemo(()=>{var b,T;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((b=t.gamification)==null?void 0:b.inventory)||[],equipped:((T=t.gamification)==null?void 0:T.equipped)||{}};const y=qd(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?l.jsx(ba,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:l.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[l.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),l.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),l.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>i(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:l.jsx(ko,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>i(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:l.jsx(hs,{className:"w-4 h-4"})})]})]})]}),c.length>1&&l.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>l.jsx("button",{onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),l.jsxs("div",{className:"border-b border-white/5 pb-6",children:[l.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&l.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),l.jsx("div",{className:"flex gap-2 flex-wrap",children:Zue.map(y=>{var T;const b=(T=h.equipped)==null?void 0:T[y];return l.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${b?Qn(b.rarity).border+" "+Qn(b.rarity).bg:"border-white/10 bg-black/20"}`,children:b?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:b.name}),l.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:l.jsx(hs,{className:"w-3 h-3"})})]}):l.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),l.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,b)=>l.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${Qn(y.rarity).border}`,children:[l.jsx("div",{className:`text-[8px] font-bold ${Qn(y.rarity).text} text-center truncate w-full`,children:y.name}),l.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),l.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:l.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:l.jsx(xi,{className:"w-4 h-4"})})})]},b)),h.inventory.length===0&&l.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},ede=[10,50,100,-10,-50,-100],tde=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,i]=M.useState(50);if(!t)return null;const a=()=>{r(t,n),i(50)};return l.jsx(ba,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[l.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),l.jsx("p",{className:"text-xs text-gray-500",children:t.email}),l.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:ede.map(c=>l.jsx("button",{onClick:()=>i(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),l.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>i(parseInt(c.target.value)||0)})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),l.jsx("button",{onClick:a,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},rde=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&l.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,i)=>{const a=n.quest.type==="CUSTOM";return l.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),l.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[l.jsx(Do,{className:"w-3 h-3"}),n.quest.title]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[l.jsxs("div",{className:"text-center md:text-right",children:[l.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),l.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[l.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:a?"Manual Review":"Auto-Check"}),l.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:a?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[!a&&n.roll===0&&l.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:l.jsx(goe,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),l.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),l.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:l.jsx(Dh,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:l.jsx(hs,{className:"w-5 h-5"})})]})]})]})]},i)})]}),UR={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:""},nde=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:i,isSubmitting:a})=>{const s=r.type==="SKILL_CHECK";return l.jsx(ba,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:l.jsxs("form",{onSubmit:i,className:"space-y-4 text-gray-200 p-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),l.jsx("input",{value:r.title,onChange:c=>n({...r,title:c.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),l.jsx("textarea",{value:r.description,onChange:c=>n({...r,description:c.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),l.jsxs("select",{value:r.type,onChange:c=>n({...r,type:c.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[l.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),l.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),l.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),l.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),l.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),l.jsxs("select",{value:r.targetClass,onChange:c=>n({...r,targetClass:c.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[l.jsx("option",{value:"",children:"All Classes"}),Object.values(Pr).filter(c=>c!=="Uncategorized").map(c=>l.jsx("option",{value:c,children:c},c))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",l.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),l.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:c=>n({...r,startsAt:c.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",l.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),l.jsx("input",{type:"number",value:r.durationHours||"",onChange:c=>n({...r,durationHours:parseInt(c.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[l.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),l.jsx("input",{type:"number",value:r.xpReward,onChange:c=>n({...r,xpReward:parseInt(c.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),l.jsx("input",{type:"number",value:r.fluxReward,onChange:c=>n({...r,fluxReward:parseInt(c.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),l.jsxs("select",{value:r.lootRarity,onChange:c=>n({...r,lootRarity:c.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[l.jsx("option",{value:"",children:"None"}),l.jsx("option",{value:"COMMON",children:"Common"}),l.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),l.jsx("option",{value:"RARE",children:"Rare"}),l.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:c=>n({...r,isGroup:c.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),s&&l.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[l.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),l.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),l.jsx("input",{type:"number",value:r.techReq||"",onChange:c=>n({...r,techReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),l.jsx("input",{type:"number",value:r.focusReq||"",onChange:c=>n({...r,focusReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),l.jsx("input",{type:"number",value:r.analysisReq||"",onChange:c=>n({...r,analysisReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),l.jsx("input",{type:"number",value:r.charismaReq||"",onChange:c=>n({...r,charismaReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),l.jsx("input",{type:"number",value:r.dieSides,onChange:c=>n({...r,dieSides:parseInt(c.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),l.jsx("input",{type:"text",value:r.consequence,onChange:c=>n({...r,consequence:c.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),l.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:a?"Transmitting...":"Broadcast Mission"})]})})},ide=({users:t})=>{const e=sa(),{confirm:r}=Tu(),[n,i]=M.useState("OPERATIVES"),[a,s]=M.useState(""),[c,d]=M.useState("All Classes"),[h,p]=M.useState("All Sections"),[m,y]=M.useState("xp"),[b,T]=M.useState("desc"),_=G=>{m===G?T(Re=>Re==="asc"?"desc":"asc"):(y(G),T("asc"))},w=({label:G,col:Re,className:Pe})=>l.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Pe??""}`,onClick:()=>_(Re),children:l.jsxs("div",{className:`flex items-center gap-1 ${Pe!=null&&Pe.includes("text-center")?"justify-center":Pe!=null&&Pe.includes("text-right")?"justify-end":"justify-start"}`,children:[l.jsx("span",{children:G}),l.jsxs("span",{className:"flex flex-col gap-px",children:[l.jsx(bE,{className:`w-2.5 h-2.5 -mb-0.5 ${m===Re&&b==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),l.jsx(Va,{className:`w-2.5 h-2.5 -mt-0.5 ${m===Re&&b==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[N,k]=M.useState([]),[C,$]=M.useState([]),[I,L]=M.useState(null),[E,A]=M.useState(null),[R,F]=M.useState(!1),[P,B]=M.useState(!1),[D,Y]=M.useState(UR),[J,X]=M.useState(!1),[ee,Z]=M.useState([]),[ge,ce]=M.useState(null),[Q,re]=M.useState(""),[de,oe]=M.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Pr.AP_PHYSICS}),[ae,pe]=M.useState([]),[ve,Ye]=M.useState(!1),[Ne,le]=M.useState(null),[we,xe]=M.useState({name:"",description:"",maxHp:5e3,classType:"GLOBAL",xpRewardPerHit:10,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",imageUrl:""}),[dt,Ke]=M.useState([]),[ut,it]=M.useState(!1),[jt,Ie]=M.useState(null),[$e,nt]=M.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[]});M.useEffect(()=>{const G=Be.subscribeToXPEvents(k),Re=Be.subscribeToQuests($),Pe=Be.subscribeToAllBossEncounters(pe),mt=Be.subscribeToAllBossQuizzes(Ke);return()=>{G(),Re(),Pe(),mt()}},[]),M.useEffect(()=>{const G=[];t.forEach(Re=>{var Pe,mt;(mt=(Pe=Re.gamification)==null?void 0:Pe.activeQuests)==null||mt.forEach(bt=>{const Pt=C.find(Wt=>Wt.id===bt.questId);Pt&&(bt.status==="DEPLOYED"||bt.status==="ACCEPTED")&&G.push({user:Re,quest:Pt,status:bt.status,roll:bt.deploymentRoll,acceptedAt:bt.acceptedAt})})}),Z(G)},[t,C,n]);const _t=M.useMemo(()=>t.filter(G=>G.role==="STUDENT"),[t]),Xt=M.useMemo(()=>{const G=new Set;return _t.forEach(Re=>{Re.section&&G.add(Re.section)}),Array.from(G).sort()},[_t]),ye=G=>{var Pe,mt;const Re=(Pe=G.gamification)==null?void 0:Pe.classProfiles;return Re&&Object.keys(Re).length>0?Object.values(Re).reduce((bt,Pt)=>bt+$h(Pt.equipped),0):$h((mt=G.gamification)==null?void 0:mt.equipped)},We=M.useMemo(()=>_t.filter(G=>{var bt;const Re=G.name.toLowerCase().includes(a.toLowerCase())||G.email.toLowerCase().includes(a.toLowerCase()),Pe=c==="All Classes"||G.classType===c||((bt=G.enrolledClasses)==null?void 0:bt.includes(c)),mt=h==="All Sections"||G.section===h;return Re&&Pe&&mt}).sort((G,Re)=>{var Pe,mt,bt,Pt,Wt,br;switch(m){case"name":return b==="asc"?G.name.localeCompare(Re.name):Re.name.localeCompare(G.name);case"class":return b==="asc"?(G.classType||"").localeCompare(Re.classType||""):(Re.classType||"").localeCompare(G.classType||"");case"level":{const Jt=((Pe=G.gamification)==null?void 0:Pe.level)||1,$t=((mt=Re.gamification)==null?void 0:mt.level)||1;return b==="asc"?Jt-$t:$t-Jt}case"flux":{const Jt=((bt=G.gamification)==null?void 0:bt.currency)||0,$t=((Pt=Re.gamification)==null?void 0:Pt.currency)||0;return b==="asc"?Jt-$t:$t-Jt}case"gear":{const Jt=ye(G),$t=ye(Re);return b==="asc"?Jt-$t:$t-Jt}case"xp":default:{const Jt=((Wt=G.gamification)==null?void 0:Wt.xp)||0,$t=((br=Re.gamification)==null?void 0:br.xp)||0;return b==="asc"?Jt-$t:$t-Jt}}}),[_t,a,c,h,m,b]),gt=async(G,Re)=>{try{await Be.adjustUserXP(G.id,Re,G.classType||Pr.UNCATEGORIZED),e.success(`${Re>0?"+":""}${Re} XP applied to ${G.name}.`)}catch{e.error("Failed to adjust XP.")}L(null)},yt=async G=>{G.preventDefault();const Re={id:Math.random().toString(36).substring(2,9),title:de.title,multiplier:de.multiplier,isActive:!0,type:de.type};de.type==="CLASS_SPECIFIC"&&(Re.targetClass=de.targetClass),await Be.saveXPEvent(Re),F(!1),oe({title:"",multiplier:2,type:"GLOBAL",targetClass:Pr.AP_PHYSICS})},lt=async G=>{G.preventDefault(),X(!0);try{const Re={};D.techReq>0&&(Re.tech=D.techReq),D.focusReq>0&&(Re.focus=D.focusReq),D.analysisReq>0&&(Re.analysis=D.analysisReq),D.charismaReq>0&&(Re.charisma=D.charismaReq);const Pe=new Date;Pe.setHours(Pe.getHours()+(D.durationHours||0));const mt={id:Math.random().toString(36).substring(2,9),title:D.title,description:D.description,xpReward:D.xpReward,fluxReward:D.fluxReward,isActive:!0,type:D.type,statRequirements:Re,startsAt:D.startsAt?new Date(D.startsAt).toISOString():null,expiresAt:D.durationHours>0?Pe.toISOString():null,itemRewardRarity:D.lootRarity||null,rollDieSides:D.dieSides||20,consequenceText:D.consequence||null,isGroupQuest:D.isGroup,targetClass:D.targetClass||void 0};await Be.saveQuest(mt),e.success(`Mission "${mt.title}" deployed.`),Y(UR),B(!1)}catch(Re){console.error("Failed to issue mission:",Re),e.error("Failed to issue mission.")}finally{X(!1)}},et=async G=>{await Be.saveXPEvent({...G,isActive:!G.isActive})},Lt=async G=>{const Re={...G,isActive:!G.isActive};Re.isActive&&(Re.expiresAt=null),await Be.saveQuest(Re)},tr=async(G,Re,Pe)=>{var Pt,Wt;if(!await r({message:`Confiscate ${Re.name} from ${G.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const bt=(Pe?qd(G,Pe):{inventory:((Pt=G.gamification)==null?void 0:Pt.inventory)||[]}).inventory.filter(br=>br.id!==Re.id);await Be.adminUpdateInventory(G.id,bt,((Wt=G.gamification)==null?void 0:Wt.currency)||0,Pe),A(br=>{var Jt,$t;return br?Pe&&(($t=(Jt=br.gamification)==null?void 0:Jt.classProfiles)!=null&&$t[Pe])?{...br,gamification:{...br.gamification,classProfiles:{...br.gamification.classProfiles,[Pe]:{...br.gamification.classProfiles[Pe],inventory:bt}}}}:{...br,gamification:{...br.gamification,inventory:bt}}:null})},Wr=async(G,Re,Pe)=>{var Pt;if(!await r({message:`Force unequip ${Re} from ${G.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const bt={...(Pe?qd(G,Pe):{equipped:{...(Pt=G.gamification)==null?void 0:Pt.equipped}}).equipped};delete bt[Re],await Be.adminUpdateEquipped(G.id,bt,Pe),A(Wt=>{var br,Jt;return Wt?Pe&&((Jt=(br=Wt.gamification)==null?void 0:br.classProfiles)!=null&&Jt[Pe])?{...Wt,gamification:{...Wt.gamification,classProfiles:{...Wt.gamification.classProfiles,[Pe]:{...Wt.gamification.classProfiles[Pe],equipped:bt}}}}:{...Wt,gamification:{...Wt.gamification,equipped:bt}}:null})},hn=async(G,Re)=>{var mt,bt;const Pe=Math.max(0,(((mt=G.gamification)==null?void 0:mt.currency)||0)+Re);await Be.adminUpdateInventory(G.id,((bt=G.gamification)==null?void 0:bt.inventory)||[],Pe),A(Pt=>Pt?{...Pt,gamification:{...Pt.gamification,currency:Pe}}:null)},fn=async(G,Re,Pe,mt)=>{try{await Be.resolveQuest(G,Re,Pe,mt),e.success(Pe?`Mission "${Re.title}" approved.`:`Mission "${Re.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},Qt=async G=>{const Re=G.quest.rollDieSides||20,Pe=Math.floor(Math.random()*Re)+1;e.info(`Rolled a ${Pe} on a D${Re}. ${Pe===Re?"CRITICAL SUCCESS!":"Failure confirmed."}`),await fn(G.user.id,G.quest,Pe===Re,G.user.classType)},Ft=async G=>{try{await Be.updateCodename(G,Q.trim().slice(0,24)),e.success("Code name updated.")}catch{e.error("Failed to update code name.")}ce(null)},Kt=async(G,Re)=>{try{await Be.toggleCodenameLock(G,Re),e.success(Re?"Codename locked.":"Codename unlocked.")}catch{e.error("Failed to update lock.")}},Dn=G=>{var Re,Pe,mt;if(G)le(G),xe({name:G.name,description:G.description,maxHp:G.maxHp,classType:G.classType||"GLOBAL",xpRewardPerHit:G.xpRewardPerHit||10,rewardXp:((Re=G.completionRewards)==null?void 0:Re.xp)||500,rewardFlux:((Pe=G.completionRewards)==null?void 0:Pe.flux)||100,rewardItemRarity:((mt=G.completionRewards)==null?void 0:mt.itemRarity)||"",deadline:G.deadline?G.deadline.slice(0,16):"",imageUrl:G.imageUrl||""});else{le(null);const bt=new Date;bt.setDate(bt.getDate()+7),xe({name:"",description:"",maxHp:5e3,classType:"GLOBAL",xpRewardPerHit:10,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:bt.toISOString().slice(0,16),imageUrl:""})}Ye(!0)},Gn=async G=>{G.preventDefault();try{const Re={id:(Ne==null?void 0:Ne.id)||Math.random().toString(36).substring(2,12),name:we.name,description:we.description,maxHp:we.maxHp,currentHp:(Ne==null?void 0:Ne.currentHp)??we.maxHp,xpRewardPerHit:we.xpRewardPerHit,completionRewards:{xp:we.rewardXp,flux:we.rewardFlux,...we.rewardItemRarity?{itemRarity:we.rewardItemRarity}:{}},deadline:new Date(we.deadline).toISOString(),isActive:(Ne==null?void 0:Ne.isActive)??!0,damageLog:(Ne==null?void 0:Ne.damageLog)||[]};we.classType!=="GLOBAL"&&(Re.classType=we.classType),we.imageUrl&&(Re.imageUrl=we.imageUrl),await Be.saveBossEncounter(Re),e.success(Ne?"Boss updated.":"Boss deployed!"),Ye(!1)}catch{e.error("Failed to save boss.")}},Yi=async G=>{await Be.toggleBossActive(G.id,!G.isActive)},pi=async G=>{await r({message:`Delete boss "${G.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Be.deleteBossEncounter(G.id),e.success("Boss deleted."))},Lr=G=>{var Re,Pe,mt;if(G)Ie(G),nt({bossName:G.bossName,description:G.description,maxHp:G.maxHp,classType:G.classType||"GLOBAL",damagePerCorrect:G.damagePerCorrect||50,rewardXp:((Re=G.rewards)==null?void 0:Re.xp)||500,rewardFlux:((Pe=G.rewards)==null?void 0:Pe.flux)||100,rewardItemRarity:((mt=G.rewards)==null?void 0:mt.itemRarity)||"",deadline:G.deadline?G.deadline.slice(0,16):"",questions:G.questions.map(bt=>({...bt,damageBonus:bt.damageBonus||0}))});else{Ie(null);const bt=new Date;bt.setDate(bt.getDate()+7),nt({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:bt.toISOString().slice(0,16),questions:[]})}it(!0)},Ir=()=>{nt(G=>({...G,questions:[...G.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},wr=(G,Re,Pe)=>{nt(mt=>{const bt=[...mt.questions];return bt[G]={...bt[G],[Re]:Pe},{...mt,questions:bt}})},It=(G,Re,Pe)=>{nt(mt=>{const bt=[...mt.questions],Pt=[...bt[G].options];return Pt[Re]=Pe,bt[G]={...bt[G],options:Pt},{...mt,questions:bt}})},Xr=G=>{nt(Re=>({...Re,questions:Re.questions.filter((Pe,mt)=>mt!==G)}))},pn=async G=>{if(G.preventDefault(),$e.questions.length===0){e.error("Add at least one question.");return}try{const Re={id:(jt==null?void 0:jt.id)||Math.random().toString(36).substring(2,12),bossName:$e.bossName,description:$e.description,maxHp:$e.maxHp,currentHp:(jt==null?void 0:jt.currentHp)??$e.maxHp,classType:$e.classType,isActive:(jt==null?void 0:jt.isActive)??!0,deadline:new Date($e.deadline).toISOString(),damagePerCorrect:$e.damagePerCorrect,questions:$e.questions.map(Pe=>({id:Pe.id,stem:Pe.stem,options:Pe.options.filter(mt=>mt.trim()),correctAnswer:Pe.correctAnswer,difficulty:Pe.difficulty,...Pe.damageBonus>0?{damageBonus:Pe.damageBonus}:{}})),rewards:{xp:$e.rewardXp,flux:$e.rewardFlux,...$e.rewardItemRarity?{itemRarity:$e.rewardItemRarity}:{}}};await Be.saveBossQuiz(Re),e.success(jt?"Quiz boss updated.":"Quiz boss deployed!"),it(!1)}catch{e.error("Failed to save quiz boss.")}},on=async G=>{await Be.toggleBossQuizActive(G.id,!G.isActive)},Qr=async G=>{await r({message:`Delete quiz boss "${G.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Be.deleteBossQuiz(G.id),e.success("Quiz boss deleted."))},mn=({id:G,label:Re,icon:Pe})=>l.jsxs("button",{onClick:()=>i(G),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===G?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[l.jsx(Pe,{className:"w-4 h-4"}),Re]});return l.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),l.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),l.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&l.jsxs("button",{onClick:()=>F(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[l.jsx(Uoe,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&l.jsxs("button",{onClick:()=>B(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[l.jsx(uoe,{className:"w-4 h-4"})," Issue Mission"]}),n==="BOSS_OPS"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>Dn(),className:"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-red-900/20",children:[l.jsx(Jy,{className:"w-4 h-4"})," Deploy Boss"]}),l.jsxs("button",{onClick:()=>Lr(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[l.jsx(Ao,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]})]}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[l.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[l.jsx(mn,{id:"OPERATIVES",label:"Operatives",icon:Vl}),l.jsx(mn,{id:"PROTOCOLS",label:"XP Protocols",icon:Pi}),l.jsx(mn,{id:"MISSIONS",label:"Missions",icon:Do}),l.jsx(mn,{id:"MISSION_CONTROL",label:"Mission Control",icon:vb}),l.jsx(mn,{id:"BOSS_OPS",label:"Boss Ops",icon:Jy})]}),l.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Kq,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),l.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:a,onChange:G=>s(G.target.value)})]}),l.jsxs("div",{className:"flex gap-2 items-center",children:[l.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[We.length," operatives"]}),l.jsxs("div",{className:"relative",children:[l.jsx(woe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),l.jsxs("select",{value:c,onChange:G=>d(G.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[l.jsx("option",{children:"All Classes"}),Object.values(Pr).map(G=>l.jsx("option",{value:G,children:G},G))]}),l.jsx(Va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),Xt.length>0&&l.jsxs("div",{className:"relative",children:[l.jsxs("select",{value:h,onChange:G=>p(G.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[l.jsx("option",{children:"All Sections"}),Xt.map(G=>l.jsx("option",{value:G,children:G},G))]}),l.jsx(Va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[l.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),l.jsx(w,{label:"Class",col:"class"}),l.jsx(w,{label:"Level",col:"level",className:"text-center"}),l.jsx(w,{label:"XP",col:"xp",className:"text-center"}),l.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),l.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),l.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-white/5",children:We.map(G=>{var bt,Pt,Wt,br,Jt,$t,$r,gn;const Re=((bt=G.gamification)==null?void 0:bt.level)||1,Pe=((Pt=G.gamification)==null?void 0:Pt.currency)||0,mt=G.enrolledClasses||(G.classType?[G.classType]:[]);return l.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[l.jsx("td",{className:"py-3 pl-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:G.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:G.name}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-gray-200",children:G.name}),ge===G.id?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{autoFocus:!0,value:Q,onChange:Yr=>re(Yr.target.value),maxLength:24,onKeyDown:Yr=>{Yr.key==="Enter"&&Ft(G.id),Yr.key==="Escape"&&ce(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),l.jsx("button",{onClick:()=>Ft(G.id),className:"text-green-400 hover:text-green-300",title:"Save",children:l.jsx(Dh,{className:"w-3 h-3"})}),l.jsx("button",{onClick:()=>ce(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:l.jsx(hs,{className:"w-3 h-3"})})]}):l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("button",{onClick:()=>{var Yr;ce(G.id),re(((Yr=G.gamification)==null?void 0:Yr.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((Wt=G.gamification)==null?void 0:Wt.codename)||"UNASSIGNED",l.jsx(L5,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),l.jsx("button",{onClick:()=>{var Yr;return Kt(G.id,!((Yr=G.gamification)!=null&&Yr.codenameLocked))},className:`transition ${(br=G.gamification)!=null&&br.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Jt=G.gamification)!=null&&Jt.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:($t=G.gamification)!=null&&$t.codenameLocked?l.jsx(Bh,{className:"w-2.5 h-2.5"}):l.jsx(Coe,{className:"w-2.5 h-2.5"})})]})]})]})}),l.jsx("td",{className:"py-3",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:mt.map(Yr=>l.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Yr},Yr))})}),l.jsx("td",{className:"py-3 text-center",children:l.jsx("span",{className:"text-lg font-black text-white",children:Re})}),l.jsx("td",{className:"py-3 text-center",children:l.jsx("span",{className:"text-sm font-bold text-gray-300",children:((gn=($r=G.gamification)==null?void 0:$r.xp)==null?void 0:gn.toLocaleString())||0})}),l.jsx("td",{className:"py-3 text-center",children:l.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Pe})}),l.jsx("td",{className:"py-3 text-center",children:l.jsx("span",{className:"text-sm font-bold text-yellow-400",children:ye(G)})}),l.jsx("td",{className:"py-3 text-right pr-4",children:l.jsxs("div",{className:"flex justify-end gap-1.5",children:[l.jsxs("button",{onClick:()=>A(G),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[l.jsx(vb,{className:"w-3 h-3"})," Inventory"]}),l.jsxs("button",{onClick:()=>L(G),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[l.jsx(ko,{className:"w-3 h-3"})," XP"]})]})})]},G.id)})})]})})]}),n==="PROTOCOLS"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.map(G=>l.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${G.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[G.isActive&&l.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${G.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:l.jsx(Pi,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>Be.deleteXPEvent(G.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:l.jsx(xi,{className:"w-4 h-4"})})]}),l.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:G.title}),l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[G.multiplier,"x"]}),l.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:G.type==="GLOBAL"?"Global Uplink":G.targetClass}),l.jsx("button",{onClick:()=>et(G),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${G.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:G.isActive?"Active":"Offline"})]})]},G.id)),l.jsxs("button",{onClick:()=>F(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:l.jsx(ko,{className:"w-6 h-6"})}),l.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&l.jsx("div",{className:"space-y-4",children:C.map(G=>l.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${G.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[l.jsxs("div",{className:"flex items-center gap-5",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${G.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:l.jsx(pu,{className:"w-7 h-7"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-lg text-white",children:G.title}),l.jsx("p",{className:"text-sm text-gray-500",children:G.description}),G.statRequirements&&l.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(G.statRequirements).map(([Re,Pe])=>l.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Pe," ",Re]},Re))}),l.jsxs("div",{className:"flex gap-3 mt-2",children:[l.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:G.type}),l.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",G.xpReward," XP"]}),G.itemRewardRarity&&l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),l.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:G.targetClass||"All Classes"})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("button",{onClick:()=>Lt(G),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${G.isActive?"bg-purple-600":"bg-gray-700"}`,children:l.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${G.isActive?"translate-x-6":""}`})}),l.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:G.isActive?"Active":"Standby"})]}),l.jsx("button",{onClick:()=>Be.deleteQuest(G.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:l.jsx(xi,{className:"w-4 h-4"})})]})]},G.id))}),n==="MISSION_CONTROL"&&l.jsx(rde,{deployments:ee,onResolveQuest:fn,onRollForSalvation:Qt}),n==="BOSS_OPS"&&l.jsxs("div",{className:"space-y-4",children:[ae.length===0&&l.jsxs("div",{className:"text-center py-16 text-gray-500",children:[l.jsx(Jy,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),l.jsx("p",{className:"font-bold",children:"No boss encounters deployed."}),l.jsx("p",{className:"text-sm mt-1",children:"Deploy a boss to challenge your operatives."})]}),ae.map(G=>{const Re=G.maxHp>0?Math.max(0,G.currentHp/G.maxHp*100):0,Pe=new Date(G.deadline)<new Date;return l.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all ${G.isActive&&!Pe?"bg-red-600/10 border-red-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${G.isActive&&!Pe?"bg-red-600 text-white shadow-lg shadow-red-900/40":"bg-gray-800 text-gray-400"}`,children:l.jsx(Jy,{className:"w-7 h-7"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-lg text-white truncate",children:G.name}),l.jsx("p",{className:"text-sm text-gray-500 truncate",children:G.description}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[l.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",G.currentHp.toLocaleString(),"/",G.maxHp.toLocaleString()]}),l.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",G.xpRewardPerHit," XP/hit"]}),l.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:G.classType||"GLOBAL"}),Pe&&l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"})]}),l.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:l.jsx("div",{className:`h-full rounded-full transition-all ${Re>50?"bg-green-500":Re>20?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Re}%`}})})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsxs("button",{onClick:()=>Dn(G),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[l.jsx(L5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),l.jsx("button",{onClick:()=>Yi(G),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${G.isActive?"bg-red-600":"bg-gray-700"}`,children:l.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${G.isActive?"translate-x-6":""}`})}),l.jsx("button",{onClick:()=>pi(G),className:"p-2 text-gray-600 hover:text-red-400 transition",children:l.jsx(xi,{className:"w-4 h-4"})})]})]},G.id)}),l.jsxs("div",{className:"mt-8 pt-6 border-t border-white/10",children:[l.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2 mb-4",children:[l.jsx(Ao,{className:"w-5 h-5"})," Quiz Bosses (Educational)"]}),l.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Students deal damage by answering questions correctly. Requires mastery of class material to defeat."}),dt.length===0&&l.jsxs("div",{className:"text-center py-10 text-gray-500",children:[l.jsx(Ao,{className:"w-10 h-10 mx-auto mb-3 opacity-20"}),l.jsx("p",{className:"font-bold text-sm",children:"No quiz bosses deployed."}),l.jsx("p",{className:"text-xs mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),dt.map(G=>{const Re=G.maxHp>0?Math.max(0,(G.currentHp||G.maxHp)/G.maxHp*100):0,Pe=new Date(G.deadline)<new Date;return l.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${G.isActive&&!Pe?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[l.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[l.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${G.isActive&&!Pe?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:l.jsx(Ao,{className:"w-7 h-7"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"font-bold text-lg text-white truncate",children:G.bossName}),l.jsx("p",{className:"text-sm text-gray-500 truncate",children:G.description}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[l.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[G.questions.length," Questions"]}),l.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(G.currentHp||G.maxHp).toLocaleString(),"/",G.maxHp.toLocaleString()]}),l.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[G.damagePerCorrect," dmg/correct"]}),l.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:G.classType}),Pe&&l.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"})]}),l.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:l.jsx("div",{className:`h-full rounded-full transition-all ${Re>50?"bg-amber-500":Re>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${Re}%`}})})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsxs("button",{onClick:()=>Lr(G),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[l.jsx(L5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),l.jsx("button",{onClick:()=>on(G),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${G.isActive?"bg-amber-600":"bg-gray-700"}`,children:l.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${G.isActive?"translate-x-6":""}`})}),l.jsx("button",{onClick:()=>Qr(G),className:"p-2 text-gray-600 hover:text-red-400 transition",children:l.jsx(xi,{className:"w-4 h-4"})})]})]},G.id)})]})]})]})]}),l.jsx(Jue,{user:E,onClose:()=>A(null),onDeleteItem:tr,onUnequipItem:Wr,onGrantFlux:hn}),l.jsx(nde,{isOpen:P,onClose:()=>B(!1),form:D,setForm:Y,onSubmit:lt,isSubmitting:J}),l.jsx(ba,{isOpen:R,onClose:()=>F(!1),title:"New XP Protocol Deployment",children:l.jsxs("form",{onSubmit:yt,className:"space-y-4 text-gray-100 p-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),l.jsx("input",{value:de.title,onChange:G=>oe({...de,title:G.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),l.jsx("input",{type:"number",step:"0.5",value:de.multiplier,onChange:G=>oe({...de,multiplier:parseFloat(G.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),l.jsxs("select",{value:de.type,onChange:G=>oe({...de,type:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[l.jsx("option",{value:"GLOBAL",children:"Global Node"}),l.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),de.type==="CLASS_SPECIFIC"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),l.jsx("select",{value:de.targetClass,onChange:G=>oe({...de,targetClass:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Pr).map(G=>l.jsx("option",{value:G,children:G},G))})]}),l.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})}),l.jsx(tde,{user:I,onClose:()=>L(null),onAdjust:gt}),l.jsx(ba,{isOpen:ve,onClose:()=>Ye(!1),title:Ne?"Edit Boss Encounter":"Deploy Boss Encounter",maxWidth:"max-w-lg",children:l.jsxs("form",{onSubmit:Gn,className:"space-y-4 text-gray-100 p-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),l.jsx("input",{value:we.name,onChange:G=>xe({...we,name:G.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Entropy Wyrm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),l.jsx("textarea",{value:we.description,onChange:G=>xe({...we,description:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-20",placeholder:"A fearsome creature that feeds on disorder..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),l.jsx("input",{type:"number",value:we.maxHp,onChange:G=>xe({...we,maxHp:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"XP Per Hit"}),l.jsx("input",{type:"number",value:we.xpRewardPerHit,onChange:G=>xe({...we,xpRewardPerHit:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),l.jsxs("select",{value:we.classType,onChange:G=>xe({...we,classType:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[l.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Pr).map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),l.jsx("input",{type:"datetime-local",value:we.deadline,onChange:G=>xe({...we,deadline:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]})]}),l.jsxs("div",{className:"border-t border-white/10 pt-4",children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-2 px-1",children:"Completion Rewards"}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"XP"}),l.jsx("input",{type:"number",value:we.rewardXp,onChange:G=>xe({...we,rewardXp:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),l.jsx("input",{type:"number",value:we.rewardFlux,onChange:G=>xe({...we,rewardFlux:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot Rarity"}),l.jsxs("select",{value:we.rewardItemRarity,onChange:G=>xe({...we,rewardItemRarity:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold",children:[l.jsx("option",{value:"",children:"None"}),l.jsx("option",{value:"COMMON",children:"Common"}),l.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),l.jsx("option",{value:"RARE",children:"Rare"}),l.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Image URL (optional)"}),l.jsx("input",{value:we.imageUrl,onChange:G=>xe({...we,imageUrl:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white",placeholder:"https://..."})]}),l.jsx("button",{type:"submit",className:"w-full bg-red-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-red-700",children:Ne?"Update Boss":"Deploy Boss"})]})}),l.jsx(ba,{isOpen:ut,onClose:()=>it(!1),title:jt?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:l.jsxs("form",{onSubmit:pn,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),l.jsx("input",{value:$e.bossName,onChange:G=>nt({...$e,bossName:G.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),l.jsx("textarea",{value:$e.description,onChange:G=>nt({...$e,description:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),l.jsx("input",{type:"number",value:$e.maxHp,onChange:G=>nt({...$e,maxHp:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),l.jsx("input",{type:"number",value:$e.damagePerCorrect,onChange:G=>nt({...$e,damagePerCorrect:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),l.jsxs("select",{value:$e.classType,onChange:G=>nt({...$e,classType:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[l.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Pr).map(G=>l.jsx("option",{value:G,children:G},G))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),l.jsx("input",{type:"datetime-local",value:$e.deadline,onChange:G=>nt({...$e,deadline:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),l.jsx("input",{type:"number",value:$e.rewardXp,onChange:G=>nt({...$e,rewardXp:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),l.jsx("input",{type:"number",value:$e.rewardFlux,onChange:G=>nt({...$e,rewardFlux:parseInt(G.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),l.jsxs("select",{value:$e.rewardItemRarity,onChange:G=>nt({...$e,rewardItemRarity:G.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[l.jsx("option",{value:"",children:"None"}),l.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),l.jsx("option",{value:"RARE",children:"Rare"}),l.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),l.jsxs("div",{className:"border-t border-white/10 pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",$e.questions.length,")"]}),l.jsxs("button",{type:"button",onClick:Ir,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[l.jsx(ko,{className:"w-3 h-3"})," Add Question"]})]}),$e.questions.length===0&&l.jsx("p",{className:"text-xs text-gray-600 text-center py-4",children:"No questions yet. Add questions that students must answer correctly to deal damage."}),$e.questions.map((G,Re)=>l.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",Re+1]}),l.jsx("textarea",{value:G.stem,onChange:Pe=>wr(Re,"stem",Pe.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),l.jsx("button",{type:"button",onClick:()=>Xr(Re),className:"text-gray-600 hover:text-red-400 mt-4",children:l.jsx(xi,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:G.options.map((Pe,mt)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>wr(Re,"correctAnswer",mt),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${G.correctAnswer===mt?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:l.jsx(Dh,{className:"w-3 h-3"})}),l.jsx("input",{value:Pe,onChange:bt=>It(Re,mt,bt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+mt)}`,required:!0})]},mt))}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("select",{value:G.difficulty,onChange:Pe=>wr(Re,"difficulty",Pe.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[l.jsx("option",{value:"EASY",children:"Easy"}),l.jsx("option",{value:"MEDIUM",children:"Medium"}),l.jsx("option",{value:"HARD",children:"Hard"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),l.jsx("input",{type:"number",value:G.damageBonus,onChange:Pe=>wr(Re,"damageBonus",parseInt(Pe.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},G.id))]}),l.jsx("button",{type:"submit",className:"w-full bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700",children:jt?"Update Quiz Boss":"Deploy Quiz Boss"})]})})]})},ade={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:l.jsx(Fq,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:l.jsx(Bq,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:l.jsx(AE,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},sde=({onToggleChat:t})=>{const[e,r]=M.useState(null),[n,i]=M.useState(!1),a=c=>{e===c?r(null):(r(c),i(!1))};if(!e)return l.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[l.jsxs("button",{onClick:()=>a("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[l.jsx(AE,{className:"w-6 h-6"}),l.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),l.jsxs("button",{onClick:()=>a("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[l.jsx(Bq,{className:"w-6 h-6"}),l.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),l.jsxs("button",{onClick:()=>a("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[l.jsx(Fq,{className:"w-6 h-6"}),l.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&l.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[l.jsx(cA,{className:"w-6 h-6"}),l.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const s=ade[e];return l.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${n?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[l.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-1.5 rounded-lg ${s.iconBg} ${s.iconText}`,children:s.icon}),l.jsx("span",{className:"font-bold text-white text-sm",children:s.label})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>i(!n),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:n?l.jsx(lA,{className:"w-4 h-4"}):l.jsx($q,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:l.jsx(hs,{className:"w-4 h-4"})})]})]}),!n&&l.jsx("div",{className:"flex-1 bg-white relative",children:l.jsx("iframe",{src:s.src,className:"w-full h-full border-none",title:s.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},ode=["","","","","","","",""],lde=["","","","","","","","","","","","","","","","","","","","","","","","","",""],cde=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:i,onOpenResource:a})=>{var Ne;const{confirm:s}=Tu(),[c,d]=M.useState([]),[h,p]=M.useState(""),[m,y]=M.useState("Main"),[b,T]=M.useState(!1),[_,w]=M.useState(!1),[N,k]=M.useState(null),[C,$]=M.useState(null),[I,L]=M.useState([]),[E,A]=M.useState(null),R=M.useRef(null),F=M.useRef(null),P=M.useRef(null),B=M.useMemo(()=>Object.values(Pr).filter(le=>{var Ke;if(le===Pr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const we=i.find(ut=>ut.className===le),xe=(Ke=t.enrolledClasses)==null?void 0:Ke.includes(le),dt=we?we.features.communications:!0;return xe&&dt}),[i,t.role,t.enrolledClasses]),[D,Y]=M.useState(B[0]||"");M.useEffect(()=>{(!D||!B.includes(D))&&B.length>0&&Y(B[0])},[B]);const J=M.useMemo(()=>m==="Resources"&&C?`res_${C}`:m==="Resources"&&!C||!D?"":`class_${D.replace(/\s+/g,"_").toLowerCase()}`,[D,m,C]),X=M.useRef(null),ee=M.useMemo(()=>n.filter(le=>le.classType===D&&le.status!=="DRAFT"),[n,D]),Z=M.useMemo(()=>c.filter(le=>{var we;return le.isGlobalPinned||((we=le.pinnedBy)==null?void 0:we.includes(t.id))}),[c,t.id]),ge=M.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]);M.useEffect(()=>{if(!e)return;let le="";if(m==="Resources"&&C?le=`res_${C}`:(m==="Main"||m==="Bookmarks")&&(le=`class_${D.replace(/\s+/g,"_").toLowerCase()}`),!le)return;T(!0);const we=Be.subscribeToChannelMessages(le,xe=>{d(xe),T(!1)});return()=>{we()}},[e,D,m,C]),M.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const le=Be.subscribeToFlaggedMessages(we=>{L(we)});return()=>le()},[e,t.role]),M.useEffect(()=>{X.current&&(X.current.scrollTop=X.current.scrollHeight)},[c,b,m,C]),M.useEffect(()=>{const le=we=>{R.current&&!R.current.contains(we.target)&&w(!1),F.current&&!F.current.contains(we.target)&&k(null)};return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[]),M.useEffect(()=>{if(!e)return;const le=we=>{we.key==="Escape"&&r()};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[e,r]);const ce=M.useCallback(async le=>{if(le.preventDefault(),!(!h.trim()||!J)&&!ge)try{await Be.sendMessage(t,h,J,D),p(""),w(!1)}catch(we){console.error("Failed to send message:",we)}},[h,J,ge,t,D]),Q=M.useCallback(async(le,we)=>{try{await Be.toggleReaction(le,we,t.id),k(null)}catch(xe){console.error(xe)}},[t.id]),re=M.useCallback(async le=>{try{await Be.togglePersonalPin(le,t.id)}catch(we){console.error(we)}},[t.id]),de=M.useCallback(async(le,we)=>{try{await Be.toggleGlobalPin(le,!we)}catch(xe){console.error(xe)}},[]),oe=async le=>{if(await s({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Be.deleteMessage(le)}catch(we){console.error(we)}},ae=async le=>{try{await Be.unflagMessage(le),await Be.resolveFlagByMessageId(le)}catch(we){console.error(we)}},pe=async le=>{if(await s({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Be.resolveFlagByMessageId(le),await Be.deleteMessage(le)}catch(we){console.error(we)}},ve=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Be.INDEFINITE_MUTE}],Ye=async le=>{if(E){try{await Be.muteUser(E.senderId,le)}catch(we){console.error(we)}A(null)}};return M.useEffect(()=>{const le=we=>{P.current&&!P.current.contains(we.target)&&A(null)};return E&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[E]),e?l.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[m==="Resources"&&C?l.jsx("button",{onClick:()=>$(null),className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:l.jsx(foe,{className:"w-5 h-5"})}):l.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:l.jsx(cA,{className:"w-5 h-5"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:m==="Moderation"?"Moderation Queue":m==="Resources"?C?(Ne=ee.find(le=>le.id===C))==null?void 0:Ne.title:"Class Resources":D}),m!=="Resources"&&m!=="Moderation"&&B.length>1&&l.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[l.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:D}),l.jsx(Va,{className:"w-3 h-3 text-gray-500 ml-1"}),l.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:D,onChange:le=>Y(le.target.value),children:B.map(le=>l.jsx("option",{value:le,children:le},le))})]})]})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:l.jsx(hs,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[l.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[l.jsx("button",{onClick:()=>y("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all ${m==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:l.jsx(cA,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>y("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all ${m==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:l.jsx(so,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>y("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${m==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:l.jsx(PI,{className:"w-5 h-5"})}),t.role==="ADMIN"&&l.jsxs("button",{onClick:()=>y("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${m==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[l.jsx(Vl,{className:"w-5 h-5"}),I.length>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:I.length})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col relative",children:[m==="Resources"&&!C&&l.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:l.jsx("div",{className:"space-y-2",children:ee.map(le=>l.jsxs("div",{onClick:()=>$(le.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[l.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:l.jsx(Eoe,{className:"w-5 h-5"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:le.title}),l.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:le.unit})]})]}),l.jsx("button",{onClick:we=>{we.stopPropagation(),a==null||a(le.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:l.jsx(boe,{className:"w-4 h-4"})})]},le.id))})}),m==="Moderation"&&t.role==="ADMIN"&&l.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Rs,{className:"w-4 h-4 text-red-400"}),l.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),l.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[I.length," item",I.length!==1?"s":""]})]}),I.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[l.jsx(Vl,{className:"w-10 h-10 mb-3 opacity-30"}),l.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):l.jsx("div",{className:"space-y-3",children:I.map(le=>{var we;return l.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-xs font-bold text-gray-300",children:le.senderName}),l.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(le.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),l.jsx("p",{className:"text-sm text-gray-200 mb-1",children:le.content}),le.systemNote&&l.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:le.systemNote}),l.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:((we=le.channelId)==null?void 0:we.replace("class_","").replace(/_/g," "))||"unknown channel"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>ae(le.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[l.jsx(Dh,{className:"w-3.5 h-3.5"})," Approve"]}),l.jsxs("button",{onClick:()=>pe(le.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[l.jsx(xi,{className:"w-3.5 h-3.5"})," Delete"]}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>A((E==null?void 0:E.id)===`flag-${le.id}`?null:{id:`flag-${le.id}`,senderId:le.senderId,senderName:le.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:l.jsx(wb,{className:"w-3.5 h-3.5"})}),(E==null?void 0:E.id)===`flag-${le.id}`&&l.jsxs("div",{ref:P,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[l.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",le.senderName]}),ve.map(xe=>l.jsx("button",{onClick:()=>Ye(xe.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:xe.label},xe.minutes))]})]})]})]},le.id)})})]}),(m==="Main"||m==="Bookmarks"||m==="Resources"&&C)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:X,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(m==="Bookmarks"?Z:c).map((le,we,xe)=>{var ut;const dt=le.senderId===t.id,Ke=we>0&&xe[we-1].senderId===le.senderId&&new Date(le.timestamp).getTime()-new Date(xe[we-1].timestamp).getTime()<3e5;return l.jsxs("div",{className:`group flex flex-col ${dt?"items-end":"items-start"} ${Ke?"mt-1":"mt-4"}`,children:[!Ke&&l.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[l.jsx("span",{className:`text-xs font-bold ${dt?"text-indigo-400":"text-gray-300"}`,children:le.senderName}),l.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(le.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),le.isGlobalPinned&&l.jsx(UI,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),l.jsxs("div",{className:"relative max-w-[85%]",children:[l.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${dt?"right-0":"left-0"} z-30`,children:[l.jsx("button",{onClick:()=>k(le.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:l.jsx($I,{className:"w-3.5 h-3.5 text-yellow-400"})}),l.jsx("button",{onClick:()=>re(le.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(ut=le.pinnedBy)!=null&&ut.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:l.jsx(PI,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>de(le.id,!!le.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${le.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:l.jsx(UI,{className:"w-3.5 h-3.5"})}),l.jsx("button",{onClick:()=>oe(le.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:l.jsx(xi,{className:"w-3.5 h-3.5"})}),le.senderId!==t.id&&l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>A((E==null?void 0:E.id)===le.id?null:{id:le.id,senderId:le.senderId,senderName:le.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:l.jsx(wb,{className:"w-3.5 h-3.5"})}),(E==null?void 0:E.id)===le.id&&l.jsxs("div",{ref:P,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[l.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",le.senderName]}),ve.map(it=>l.jsx("button",{onClick:()=>Ye(it.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:it.label},it.minutes))]})]})]})]}),N===le.id&&l.jsx("div",{ref:F,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${dt?"right-0":"left-0"}`,children:ode.map(it=>l.jsx("button",{onClick:()=>Q(le.id,it),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:it},it))}),l.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${dt?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${le.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${le.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:le.content}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:le.reactions&&Object.entries(le.reactions).map(([it,jt])=>{const Ie=jt;return Ie.length>0&&l.jsxs("button",{onClick:()=>Q(le.id,it),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${Ie.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[it," ",Ie.length]},it)})})]})]},le.id)})}),l.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:l.jsxs("form",{onSubmit:ce,className:"relative flex items-center gap-2",children:[_&&l.jsx("div",{ref:R,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:lde.map(le=>l.jsx("button",{type:"button",onClick:()=>p(we=>we+le),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:le},le))}),l.jsx("button",{type:"button",onClick:()=>w(!_),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:l.jsx($I,{className:"w-5 h-5"})}),l.jsx("input",{type:"text",value:h,onChange:le=>p(le.target.value),placeholder:ge?"Transmission Disabled":"Type message...",disabled:!J||ge,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),l.jsx("button",{type:"submit",disabled:!J||ge||!h.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:l.jsx(zoe,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function JH(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=JH(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function sr(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=JH(t))&&(n&&(n+=" "),n+=e);return n}var s3,zR;function qa(){if(zR)return s3;zR=1;var t=Array.isArray;return s3=t,s3}var o3,$R;function eG(){if($R)return o3;$R=1;var t=typeof Vy=="object"&&Vy&&Vy.Object===Object&&Vy;return o3=t,o3}var l3,VR;function Fo(){if(VR)return l3;VR=1;var t=eG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return l3=r,l3}var c3,FR;function i1(){if(FR)return c3;FR=1;var t=Fo(),e=t.Symbol;return c3=e,c3}var u3,qR;function ude(){if(qR)return u3;qR=1;var t=i1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function a(s){var c=r.call(s,i),d=s[i];try{s[i]=void 0;var h=!0}catch{}var p=n.call(s);return h&&(c?s[i]=d:delete s[i]),p}return u3=a,u3}var d3,HR;function dde(){if(HR)return d3;HR=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return d3=r,d3}var h3,GR;function ec(){if(GR)return h3;GR=1;var t=i1(),e=ude(),r=dde(),n="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):r(c)}return h3=s,h3}var f3,KR;function tc(){if(KR)return f3;KR=1;function t(e){return e!=null&&typeof e=="object"}return f3=t,f3}var p3,WR;function Ef(){if(WR)return p3;WR=1;var t=ec(),e=tc(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return p3=n,p3}var m3,XR;function KE(){if(XR)return m3;XR=1;var t=qa(),e=Ef(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(t(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||e(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return m3=i,m3}var g3,QR;function Au(){if(QR)return g3;QR=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return g3=t,g3}var y3,YR;function WE(){if(YR)return y3;YR=1;var t=ec(),e=Au(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(c){if(!e(c))return!1;var d=t(c);return d==n||d==i||d==r||d==a}return y3=s,y3}var v3,ZR;function hde(){if(ZR)return v3;ZR=1;var t=Fo(),e=t["__core-js_shared__"];return v3=e,v3}var b3,JR;function fde(){if(JR)return b3;JR=1;var t=hde(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return b3=r,b3}var x3,eM;function tG(){if(eM)return x3;eM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return x3=r,x3}var w3,tM;function pde(){if(tM)return w3;tM=1;var t=WE(),e=fde(),r=Au(),n=tG(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var b=t(y)?p:a;return b.test(n(y))}return w3=m,w3}var _3,rM;function mde(){if(rM)return _3;rM=1;function t(e,r){return e==null?void 0:e[r]}return _3=t,_3}var S3,nM;function i0(){if(nM)return S3;nM=1;var t=pde(),e=mde();function r(n,i){var a=e(n,i);return t(a)?a:void 0}return S3=r,S3}var T3,iM;function S2(){if(iM)return T3;iM=1;var t=i0(),e=t(Object,"create");return T3=e,T3}var A3,aM;function gde(){if(aM)return A3;aM=1;var t=S2();function e(){this.__data__=t?t(null):{},this.size=0}return A3=e,A3}var E3,sM;function yde(){if(sM)return E3;sM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return E3=t,E3}var N3,oM;function vde(){if(oM)return N3;oM=1;var t=S2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(t){var c=s[a];return c===e?void 0:c}return n.call(s,a)?s[a]:void 0}return N3=i,N3}var j3,lM;function bde(){if(lM)return j3;lM=1;var t=S2(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var a=this.__data__;return t?a[i]!==void 0:r.call(a,i)}return j3=n,j3}var C3,cM;function xde(){if(cM)return C3;cM=1;var t=S2(),e="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&i===void 0?e:i,this}return C3=r,C3}var k3,uM;function wde(){if(uM)return k3;uM=1;var t=gde(),e=yde(),r=vde(),n=bde(),i=xde();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,k3=a,k3}var O3,dM;function _de(){if(dM)return O3;dM=1;function t(){this.__data__=[],this.size=0}return O3=t,O3}var I3,hM;function XE(){if(hM)return I3;hM=1;function t(e,r){return e===r||e!==e&&r!==r}return I3=t,I3}var R3,fM;function T2(){if(fM)return R3;fM=1;var t=XE();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return R3=e,R3}var M3,pM;function Sde(){if(pM)return M3;pM=1;var t=T2(),e=Array.prototype,r=e.splice;function n(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var c=a.length-1;return s==c?a.pop():r.call(a,s,1),--this.size,!0}return M3=n,M3}var P3,mM;function Tde(){if(mM)return P3;mM=1;var t=T2();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return P3=e,P3}var D3,gM;function Ade(){if(gM)return D3;gM=1;var t=T2();function e(r){return t(this.__data__,r)>-1}return D3=e,D3}var L3,yM;function Ede(){if(yM)return L3;yM=1;var t=T2();function e(r,n){var i=this.__data__,a=t(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return L3=e,L3}var B3,vM;function A2(){if(vM)return B3;vM=1;var t=_de(),e=Sde(),r=Tde(),n=Ade(),i=Ede();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,B3=a,B3}var U3,bM;function QE(){if(bM)return U3;bM=1;var t=i0(),e=Fo(),r=t(e,"Map");return U3=r,U3}var z3,xM;function Nde(){if(xM)return z3;xM=1;var t=wde(),e=A2(),r=QE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return z3=n,z3}var $3,wM;function jde(){if(wM)return $3;wM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return $3=t,$3}var V3,_M;function E2(){if(_M)return V3;_M=1;var t=jde();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return V3=e,V3}var F3,SM;function Cde(){if(SM)return F3;SM=1;var t=E2();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return F3=e,F3}var q3,TM;function kde(){if(TM)return q3;TM=1;var t=E2();function e(r){return t(this,r).get(r)}return q3=e,q3}var H3,AM;function Ode(){if(AM)return H3;AM=1;var t=E2();function e(r){return t(this,r).has(r)}return H3=e,H3}var G3,EM;function Ide(){if(EM)return G3;EM=1;var t=E2();function e(r,n){var i=t(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return G3=e,G3}var K3,NM;function YE(){if(NM)return K3;NM=1;var t=Nde(),e=Cde(),r=kde(),n=Ode(),i=Ide();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,K3=a,K3}var W3,jM;function rG(){if(jM)return W3;jM=1;var t=YE(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,c=i?i.apply(this,s):s[0],d=a.cache;if(d.has(c))return d.get(c);var h=n.apply(this,s);return a.cache=d.set(c,h)||d,h};return a.cache=new(r.Cache||t),a}return r.Cache=t,W3=r,W3}var X3,CM;function Rde(){if(CM)return X3;CM=1;var t=rG(),e=500;function r(n){var i=t(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return X3=r,X3}var Q3,kM;function Mde(){if(kM)return Q3;kM=1;var t=Rde(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,c,d,h){a.push(d?h.replace(r,"$1"):c||s)}),a});return Q3=n,Q3}var Y3,OM;function ZE(){if(OM)return Y3;OM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=r(e[n],n,e);return a}return Y3=t,Y3}var Z3,IM;function Pde(){if(IM)return Z3;IM=1;var t=i1(),e=ZE(),r=qa(),n=Ef(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return e(c,s)+"";if(n(c))return a?a.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return Z3=s,Z3}var J3,RM;function nG(){if(RM)return J3;RM=1;var t=Pde();function e(r){return r==null?"":t(r)}return J3=e,J3}var e6,MM;function iG(){if(MM)return e6;MM=1;var t=qa(),e=KE(),r=Mde(),n=nG();function i(a,s){return t(a)?a:e(a,s)?[a]:r(n(a))}return e6=i,e6}var t6,PM;function N2(){if(PM)return t6;PM=1;var t=Ef();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return t6=e,t6}var r6,DM;function JE(){if(DM)return r6;DM=1;var t=iG(),e=N2();function r(n,i){i=t(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return r6=r,r6}var n6,LM;function aG(){if(LM)return n6;LM=1;var t=JE();function e(r,n,i){var a=r==null?void 0:t(r,n);return a===void 0?i:a}return n6=e,n6}var Dde=aG();const Os=Dr(Dde);var i6,BM;function Lde(){if(BM)return i6;BM=1;function t(e){return e==null}return i6=t,i6}var Bde=Lde();const er=Dr(Bde);var a6,UM;function Ude(){if(UM)return a6;UM=1;var t=ec(),e=qa(),r=tc(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==n}return a6=i,a6}var zde=Ude();const Hd=Dr(zde);var $de=WE();const Ht=Dr($de);var Vde=Au();const Nf=Dr(Vde);var s6={exports:{}},Ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function Fde(){if(zM)return Ur;zM=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function _(w){if(typeof w=="object"&&w!==null){var N=w.$$typeof;switch(N){case t:switch(w=w.type,w){case r:case i:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case m:case a:return w;default:return N}}case e:return N}}}return Ur.ContextConsumer=s,Ur.ContextProvider=a,Ur.Element=t,Ur.ForwardRef=d,Ur.Fragment=r,Ur.Lazy=y,Ur.Memo=m,Ur.Portal=e,Ur.Profiler=i,Ur.StrictMode=n,Ur.Suspense=h,Ur.SuspenseList=p,Ur.isAsyncMode=function(){return!1},Ur.isConcurrentMode=function(){return!1},Ur.isContextConsumer=function(w){return _(w)===s},Ur.isContextProvider=function(w){return _(w)===a},Ur.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Ur.isForwardRef=function(w){return _(w)===d},Ur.isFragment=function(w){return _(w)===r},Ur.isLazy=function(w){return _(w)===y},Ur.isMemo=function(w){return _(w)===m},Ur.isPortal=function(w){return _(w)===e},Ur.isProfiler=function(w){return _(w)===i},Ur.isStrictMode=function(w){return _(w)===n},Ur.isSuspense=function(w){return _(w)===h},Ur.isSuspenseList=function(w){return _(w)===p},Ur.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===i||w===n||w===h||w===p||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===a||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},Ur.typeOf=_,Ur}var $M;function qde(){return $M||($M=1,s6.exports=Fde()),s6.exports}var Hde=qde(),o6,VM;function sG(){if(VM)return o6;VM=1;var t=ec(),e=tc(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return o6=n,o6}var l6,FM;function Gde(){if(FM)return l6;FM=1;var t=sG();function e(r){return t(r)&&r!=+r}return l6=e,l6}var Kde=Gde();const a1=Dr(Kde);var Wde=sG();const Xde=Dr(Wde);var to=function(e){return e===0?0:e>0?1:-1},bd=function(e){return Hd(e)&&e.indexOf("%")===e.length-1},ct=function(e){return Xde(e)&&!a1(e)},Qde=function(e){return er(e)},wi=function(e){return ct(e)||Hd(e)},Yde=0,s1=function(e){var r=++Yde;return"".concat(e||"").concat(r)},ro=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ct(e)&&!Hd(e))return n;var a;if(bd(e)){var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return a1(a)&&(a=n),i&&a>r&&(a=r),a},Xc=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Zde=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Da=function(e,r){return ct(e)&&ct(r)?function(n){return e+n*(r-e)}:function(){return r}};function kb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Os(n,e))===r})}var Jde=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,i=0,a=0,s=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,i+=p,a+=h*p,s+=h*h,c=Math.min(c,h),d=Math.max(d,h);var y=r*s!==n*n?(r*a-n*i)/(r*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(i-y*n)/r}},e0e=function(e,r){return ct(e)&&ct(r)?e-r:Hd(e)&&Hd(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function vh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function SA(t){"@babel/helpers - typeof";return SA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SA(t)}var t0e=["viewBox","children"],r0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qM=["points","pathLength"],c6={svg:t0e,polygon:qM,polyline:qM},eN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ob=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(M.isValidElement(e)&&(n=e.props),!Nf(n))return null;var i={};return Object.keys(n).forEach(function(a){eN.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},n0e=function(e,r,n){return function(i){return e(r,n,i),null}},Gd=function(e,r,n){if(!Nf(e)||SA(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];eN.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=n0e(s,r,n))}),i},i0e=["children"],a0e=["children"];function HM(t,e){if(t==null)return{};var r=s0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var GM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ml=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},KM=null,u6=null,tN=function t(e){if(e===KM&&Array.isArray(u6))return u6;var r=[];return M.Children.forEach(e,function(n){er(n)||(Hde.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),u6=r,KM=e,r};function us(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Ml(i)}):n=[Ml(e)],tN(t).forEach(function(i){var a=Os(i,"type.displayName")||Os(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function rs(t,e){var r=us(t,e);return r&&r[0]}var WM=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!ct(n)||n<=0||!ct(i)||i<=0)},o0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],l0e=function(e){return e&&e.type&&Hd(e.type)&&o0e.indexOf(e.type)>=0},c0e=function(e,r,n,i){var a,s=(a=c6==null?void 0:c6[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Ht(e)&&(i&&s.includes(r)||r0e.includes(r))||n&&eN.includes(r)},Ot=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(M.isValidElement(e)&&(i=e.props),!Nf(i))return null;var a={};return Object.keys(i).forEach(function(s){var c;c0e((c=i)===null||c===void 0?void 0:c[s],s,r,n)&&(a[s]=i[s])}),a},TA=function t(e,r){if(e===r)return!0;var n=M.Children.count(e);if(n!==M.Children.count(r))return!1;if(n===0)return!0;if(n===1)return XM(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!XM(a,s))return!1}return!0},XM=function(e,r){if(er(e)&&er(r))return!0;if(!er(e)&&!er(r)){var n=e.props||{},i=n.children,a=HM(n,i0e),s=r.props||{},c=s.children,d=HM(s,a0e);return i&&c?vh(a,d)&&TA(i,c):!i&&!c?vh(a,d):!1}return!1},QM=function(e,r){var n=[],i={};return tN(e).forEach(function(a,s){if(l0e(a))n.push(a);else if(a){var c=Ml(a.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!i[c])){var m=h(a,c,s);n.push(m),i[c]=!0}}}),n},u0e=function(e){var r=e&&e.type;return r&&GM[r]?GM[r]:null},d0e=function(e,r){return tN(r).indexOf(e)},h0e=["children","width","height","viewBox","className","style","title","desc"];function AA(){return AA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AA.apply(this,arguments)}function f0e(t,e){if(t==null)return{};var r=p0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function EA(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,s=t.style,c=t.title,d=t.desc,h=f0e(t,h0e),p=i||{width:r,height:n,x:0,y:0},m=sr("recharts-surface",a);return te.createElement("svg",AA({},Ot(h,!0,"svg"),{className:m,width:r,height:n,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),te.createElement("title",null,c),te.createElement("desc",null,d),e)}var m0e=["children","className"];function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(this,arguments)}function g0e(t,e){if(t==null)return{};var r=y0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Cr=te.forwardRef(function(t,e){var r=t.children,n=t.className,i=g0e(t,m0e),a=sr("recharts-layer",n);return te.createElement("g",NA({className:a},Ot(i,!0),{ref:e}),r)}),Pl=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]},d6,YM;function v0e(){if(YM)return d6;YM=1;function t(e,r,n){var i=-1,a=e.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+r];return s}return d6=t,d6}var h6,ZM;function b0e(){if(ZM)return h6;ZM=1;var t=v0e();function e(r,n,i){var a=r.length;return i=i===void 0?a:i,!n&&i>=a?r:t(r,n,i)}return h6=e,h6}var f6,JM;function oG(){if(JM)return f6;JM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+t+i+a+"]");function d(h){return c.test(h)}return f6=d,f6}var p6,eP;function x0e(){if(eP)return p6;eP=1;function t(e){return e.split("")}return p6=t,p6}var m6,tP;function w0e(){if(tP)return m6;tP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="["+t+"]",c="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",T=h+"?",_="["+a+"]?",w="(?:"+b+"(?:"+[p,m,y].join("|")+")"+_+T+")*",N=_+T+w,k="(?:"+[p+c+"?",c,m,y,s].join("|")+")",C=RegExp(d+"(?="+d+")|"+k+N,"g");function $(I){return I.match(C)||[]}return m6=$,m6}var g6,rP;function _0e(){if(rP)return g6;rP=1;var t=x0e(),e=oG(),r=w0e();function n(i){return e(i)?r(i):t(i)}return g6=n,g6}var y6,nP;function S0e(){if(nP)return y6;nP=1;var t=b0e(),e=oG(),r=_0e(),n=nG();function i(a){return function(s){s=n(s);var c=e(s)?r(s):void 0,d=c?c[0]:s.charAt(0),h=c?t(c,1).join(""):s.slice(1);return d[a]()+h}}return y6=i,y6}var v6,iP;function T0e(){if(iP)return v6;iP=1;var t=S0e(),e=t("toUpperCase");return v6=e,v6}var A0e=T0e();const j2=Dr(A0e);function bn(t){return function(){return t}}const lG=Math.cos,Ib=Math.sin,co=Math.sqrt,Rb=Math.PI,C2=2*Rb,jA=Math.PI,CA=2*jA,dd=1e-6,E0e=CA-dd;function cG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function N0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cG;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class j0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cG:N0e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,d=n-e,h=i-r,p=s-e,m=c-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>dd)if(!(Math.abs(m*d-h*p)>dd)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let b=n-s,T=i-c,_=d*d+h*h,w=b*b+T*T,N=Math.sqrt(_),k=Math.sqrt(y),C=a*Math.tan((jA-Math.acos((_+y-w)/(2*N*k)))/2),$=C/k,I=C/N;Math.abs($-1)>dd&&this._append`L${e+$*p},${r+$*m}`,this._append`A${a},${a},0,0,${+(m*b>p*T)},${this._x1=e+I*d},${this._y1=r+I*h}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),d=n*Math.sin(i),h=e+c,p=r+d,m=1^s,y=s?i-a:a-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>dd||Math.abs(this._y1-p)>dd)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%CA+CA),y>E0e?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>dd&&this._append`A${n},${n},0,${+(y>=jA)},${m},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function rN(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new j0e(e)}function nN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uG(t){this._context=t}uG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function k2(t){return new uG(t)}function dG(t){return t[0]}function hG(t){return t[1]}function fG(t,e){var r=bn(!0),n=null,i=k2,a=null,s=rN(c);t=typeof t=="function"?t:t===void 0?dG:bn(t),e=typeof e=="function"?e:e===void 0?hG:bn(e);function c(d){var h,p=(d=nN(d)).length,m,y=!1,b;for(n==null&&(a=i(b=s())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(m,h,d),+e(m,h,d));if(b)return a=null,b+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:bn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:bn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:bn(!!d),c):r},c.curve=function(d){return arguments.length?(i=d,n!=null&&(a=i(n)),c):i},c.context=function(d){return arguments.length?(d==null?n=a=null:a=i(n=d),c):n},c}function dv(t,e,r){var n=null,i=bn(!0),a=null,s=k2,c=null,d=rN(h);t=typeof t=="function"?t:t===void 0?dG:bn(+t),e=typeof e=="function"?e:bn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?hG:bn(+r);function h(m){var y,b,T,_=(m=nN(m)).length,w,N=!1,k,C=new Array(_),$=new Array(_);for(a==null&&(c=s(k=d())),y=0;y<=_;++y){if(!(y<_&&i(w=m[y],y,m))===N)if(N=!N)b=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=b;--T)c.point(C[T],$[T]);c.lineEnd(),c.areaEnd()}N&&(C[y]=+t(w,y,m),$[y]=+e(w,y,m),c.point(n?+n(w,y,m):C[y],r?+r(w,y,m):$[y]))}if(k)return c=null,k+""||null}function p(){return fG().defined(i).curve(s).context(a)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:bn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:bn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:bn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:bn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:bn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:bn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:bn(!!m),h):i},h.curve=function(m){return arguments.length?(s=m,a!=null&&(c=s(a)),h):s},h.context=function(m){return arguments.length?(m==null?a=c=null:c=s(a=m),h):a},h}class pG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function C0e(t){return new pG(t,!0)}function k0e(t){return new pG(t,!1)}const iN={draw(t,e){const r=co(e/Rb);t.moveTo(r,0),t.arc(0,0,r,0,C2)}},O0e={draw(t,e){const r=co(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},mG=co(1/3),I0e=mG*2,R0e={draw(t,e){const r=co(e/I0e),n=r*mG;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},M0e={draw(t,e){const r=co(e),n=-r/2;t.rect(n,n,r,r)}},P0e=.8908130915292852,gG=Ib(Rb/10)/Ib(7*Rb/10),D0e=Ib(C2/10)*gG,L0e=-lG(C2/10)*gG,B0e={draw(t,e){const r=co(e*P0e),n=D0e*r,i=L0e*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=C2*a/5,c=lG(s),d=Ib(s);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*i,d*n+c*i)}t.closePath()}},b6=co(3),U0e={draw(t,e){const r=-co(e/(b6*3));t.moveTo(0,r*2),t.lineTo(-b6*r,-r),t.lineTo(b6*r,-r),t.closePath()}},Ss=-.5,Ts=co(3)/2,kA=1/co(12),z0e=(kA/2+1)*3,$0e={draw(t,e){const r=co(e/z0e),n=r/2,i=r*kA,a=n,s=r*kA+r,c=-a,d=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(c,d),t.lineTo(Ss*n-Ts*i,Ts*n+Ss*i),t.lineTo(Ss*a-Ts*s,Ts*a+Ss*s),t.lineTo(Ss*c-Ts*d,Ts*c+Ss*d),t.lineTo(Ss*n+Ts*i,Ss*i-Ts*n),t.lineTo(Ss*a+Ts*s,Ss*s-Ts*a),t.lineTo(Ss*c+Ts*d,Ss*d-Ts*c),t.closePath()}};function V0e(t,e){let r=null,n=rN(i);t=typeof t=="function"?t:bn(t||iN),e=typeof e=="function"?e:bn(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:bn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:bn(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Mb(){}function Pb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function yG(t){this._context=t}yG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function F0e(t){return new yG(t)}function vG(t){this._context=t}vG.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function q0e(t){return new vG(t)}function bG(t){this._context=t}bG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function H0e(t){return new bG(t)}function xG(t){this._context=t}xG.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function G0e(t){return new xG(t)}function aP(t){return t<0?-1:1}function sP(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),c=(a*i+s*n)/(n+i);return(aP(a)+aP(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function oP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function x6(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,c=(a-n)/3;t._context.bezierCurveTo(n+c,i+c*e,a-c,s-c*r,a,s)}function Db(t){this._context=t}Db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:x6(this,this._t0,oP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,x6(this,oP(this,r=sP(this,t,e)),r);break;default:x6(this,this._t0,r=sP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function wG(t){this._context=new _G(t)}(wG.prototype=Object.create(Db.prototype)).point=function(t,e){Db.prototype.point.call(this,e,t)};function _G(t){this._context=t}_G.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function K0e(t){return new Db(t)}function W0e(t){return new wG(t)}function SG(t){this._context=t}SG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=lP(t),i=lP(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lP(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function X0e(t){return new SG(t)}function O2(t,e){this._context=t,this._t=e}O2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Q0e(t){return new O2(t,.5)}function Y0e(t){return new O2(t,0)}function Z0e(t){return new O2(t,1)}function Vh(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,c=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function OA(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function J0e(t,e){return t[e]}function ehe(t){const e=[];return e.key=t,e}function the(){var t=bn([]),e=OA,r=Vh,n=J0e;function i(a){var s=Array.from(t.apply(this,arguments),ehe),c,d=s.length,h=-1,p;for(const m of a)for(c=0,++h;c<d;++c)(s[c][h]=[0,+n(m,s[c].key,h,a)]).data=m;for(c=0,p=nN(e(s));c<d;++c)s[p[c]].index=c;return r(s,p),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:bn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:bn(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?OA:typeof a=="function"?a:bn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Vh,i):r},i}function rhe(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}Vh(t,e)}}function nhe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,c=0;s<i;++s)c+=t[s][r][1]||0;n[r][1]+=n[r][0]=-c/2}Vh(t,e)}}function ihe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var c=0,d=0,h=0;c<s;++c){for(var p=t[e[c]],m=p[n][1]||0,y=p[n-1][1]||0,b=(m-y)/2,T=0;T<c;++T){var _=t[e[T]],w=_[n][1]||0,N=_[n-1][1]||0;b+=w-N}d+=m,h+=b*m}i[n-1][1]+=i[n-1][0]=r,d&&(r-=h/d)}i[n-1][1]+=i[n-1][0]=r,Vh(t,e)}}function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}var ahe=["type","size","sizeType"];function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IA.apply(this,arguments)}function cP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(r),!0).forEach(function(n){she(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function she(t,e,r){return e=ohe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ohe(t){var e=lhe(t,"string");return Qm(e)=="symbol"?e:e+""}function lhe(t,e){if(Qm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function che(t,e){if(t==null)return{};var r=uhe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var TG={symbolCircle:iN,symbolCross:O0e,symbolDiamond:R0e,symbolSquare:M0e,symbolStar:B0e,symbolTriangle:U0e,symbolWye:$0e},dhe=Math.PI/180,hhe=function(e){var r="symbol".concat(j2(e));return TG[r]||iN},fhe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*dhe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},phe=function(e,r){TG["symbol".concat(j2(e))]=r},I2=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,s=e.sizeType,c=s===void 0?"area":s,d=che(e,ahe),h=uP(uP({},d),{},{type:n,size:a,sizeType:c}),p=function(){var w=hhe(n),N=V0e().type(w).size(fhe(a,c,n));return N()},m=h.className,y=h.cx,b=h.cy,T=Ot(h,!0);return y===+y&&b===+b&&a===+a?te.createElement("path",IA({},T,{className:sr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(b,")"),d:p()})):null};I2.registerSymbol=phe;function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RA.apply(this,arguments)}function dP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(r),!0).forEach(function(n){Ym(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ghe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EG(n.key),n)}}function vhe(t,e,r){return e&&yhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bhe(t,e,r){return e=Lb(e),xhe(t,AG()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function xhe(t,e){if(e&&(Fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return whe(t)}function whe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AG=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function _he(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MA(t,e)}function MA(t,e){return MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},MA(t,e)}function Ym(t,e,r){return e=EG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EG(t){var e=She(t,"string");return Fh(e)=="symbol"?e:e+""}function She(t,e){if(Fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var As=32,aN=(function(t){function e(){return ghe(this,e),bhe(this,e,arguments)}return _he(e,t),vhe(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=As/2,s=As/6,c=As/3,d=n.inactive?i:n.color;if(n.type==="plainline")return te.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:As,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return te.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(As,"M").concat(2*c,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return te.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(As/8,"h").concat(As,"v").concat(As*3/4,"h").concat(-As,"z"),className:"recharts-legend-icon"});if(te.isValidElement(n.legendIcon)){var h=mhe({},n);return delete h.legendIcon,te.cloneElement(n.legendIcon,h)}return te.createElement(I2,{fill:d,cx:a,cy:a,size:As,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,c=i.layout,d=i.formatter,h=i.inactiveColor,p={x:0,y:0,width:As,height:As},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(b,T){var _=b.formatter||d,w=sr(Ym(Ym({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",b.inactive));if(b.type==="none")return null;var N=Ht(b.value)?null:b.value;Pl(!Ht(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var k=b.inactive?h:b.color;return te.createElement("li",RA({className:w,style:m,key:"legend-item-".concat(T)},Gd(n.props,b,T)),te.createElement(EA,{width:s,height:s,viewBox:p,style:y},n.renderIcon(b)),te.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},_?_(N,b,T):N))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var c={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return te.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(M.PureComponent);Ym(aN,"displayName","Legend");Ym(aN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var w6,hP;function The(){if(hP)return w6;hP=1;var t=A2();function e(){this.__data__=new t,this.size=0}return w6=e,w6}var _6,fP;function Ahe(){if(fP)return _6;fP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return _6=t,_6}var S6,pP;function Ehe(){if(pP)return S6;pP=1;function t(e){return this.__data__.get(e)}return S6=t,S6}var T6,mP;function Nhe(){if(mP)return T6;mP=1;function t(e){return this.__data__.has(e)}return T6=t,T6}var A6,gP;function jhe(){if(gP)return A6;gP=1;var t=A2(),e=QE(),r=YE(),n=200;function i(a,s){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([a,s]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(a,s),this.size=c.size,this}return A6=i,A6}var E6,yP;function NG(){if(yP)return E6;yP=1;var t=A2(),e=The(),r=Ahe(),n=Ehe(),i=Nhe(),a=jhe();function s(c){var d=this.__data__=new t(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,E6=s,E6}var N6,vP;function Che(){if(vP)return N6;vP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return N6=e,N6}var j6,bP;function khe(){if(bP)return j6;bP=1;function t(e){return this.__data__.has(e)}return j6=t,j6}var C6,xP;function jG(){if(xP)return C6;xP=1;var t=YE(),e=Che(),r=khe();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,C6=n,C6}var k6,wP;function CG(){if(wP)return k6;wP=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return k6=t,k6}var O6,_P;function kG(){if(_P)return O6;_P=1;function t(e,r){return e.has(r)}return O6=t,O6}var I6,SP;function OG(){if(SP)return I6;SP=1;var t=jG(),e=CG(),r=kG(),n=1,i=2;function a(s,c,d,h,p,m){var y=d&n,b=s.length,T=c.length;if(b!=T&&!(y&&T>b))return!1;var _=m.get(s),w=m.get(c);if(_&&w)return _==c&&w==s;var N=-1,k=!0,C=d&i?new t:void 0;for(m.set(s,c),m.set(c,s);++N<b;){var $=s[N],I=c[N];if(h)var L=y?h(I,$,N,c,s,m):h($,I,N,s,c,m);if(L!==void 0){if(L)continue;k=!1;break}if(C){if(!e(c,function(E,A){if(!r(C,A)&&($===E||p($,E,d,h,m)))return C.push(A)})){k=!1;break}}else if(!($===I||p($,I,d,h,m))){k=!1;break}}return m.delete(s),m.delete(c),k}return I6=a,I6}var R6,TP;function Ohe(){if(TP)return R6;TP=1;var t=Fo(),e=t.Uint8Array;return R6=e,R6}var M6,AP;function Ihe(){if(AP)return M6;AP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,a){n[++r]=[a,i]}),n}return M6=t,M6}var P6,EP;function sN(){if(EP)return P6;EP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return P6=t,P6}var D6,NP;function Rhe(){if(NP)return D6;NP=1;var t=i1(),e=Ohe(),r=XE(),n=OG(),i=Ihe(),a=sN(),s=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",b="[object RegExp]",T="[object Set]",_="[object String]",w="[object Symbol]",N="[object ArrayBuffer]",k="[object DataView]",C=t?t.prototype:void 0,$=C?C.valueOf:void 0;function I(L,E,A,R,F,P,B){switch(A){case k:if(L.byteLength!=E.byteLength||L.byteOffset!=E.byteOffset)return!1;L=L.buffer,E=E.buffer;case N:return!(L.byteLength!=E.byteLength||!P(new e(L),new e(E)));case d:case h:case y:return r(+L,+E);case p:return L.name==E.name&&L.message==E.message;case b:case _:return L==E+"";case m:var D=i;case T:var Y=R&s;if(D||(D=a),L.size!=E.size&&!Y)return!1;var J=B.get(L);if(J)return J==E;R|=c,B.set(L,E);var X=n(D(L),D(E),R,F,P,B);return B.delete(L),X;case w:if($)return $.call(L)==$.call(E)}return!1}return D6=I,D6}var L6,jP;function IG(){if(jP)return L6;jP=1;function t(e,r){for(var n=-1,i=r.length,a=e.length;++n<i;)e[a+n]=r[n];return e}return L6=t,L6}var B6,CP;function Mhe(){if(CP)return B6;CP=1;var t=IG(),e=qa();function r(n,i,a){var s=i(n);return e(n)?s:t(s,a(n))}return B6=r,B6}var U6,kP;function Phe(){if(kP)return U6;kP=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var c=e[n];r(c,n,e)&&(s[a++]=c)}return s}return U6=t,U6}var z6,OP;function Dhe(){if(OP)return z6;OP=1;function t(){return[]}return z6=t,z6}var $6,IP;function Lhe(){if(IP)return $6;IP=1;var t=Phe(),e=Dhe(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(c){return n.call(s,c)}))}:e;return $6=a,$6}var V6,RP;function Bhe(){if(RP)return V6;RP=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return V6=t,V6}var F6,MP;function Uhe(){if(MP)return F6;MP=1;var t=ec(),e=tc(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return F6=n,F6}var q6,PP;function oN(){if(PP)return q6;PP=1;var t=Uhe(),e=tc(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return q6=a,q6}var em={exports:{}},H6,DP;function zhe(){if(DP)return H6;DP=1;function t(){return!1}return H6=t,H6}em.exports;var LP;function RG(){return LP||(LP=1,(function(t,e){var r=Fo(),n=zhe(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,c=s?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(em,em.exports)),em.exports}var G6,BP;function lN(){if(BP)return G6;BP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return G6=r,G6}var K6,UP;function cN(){if(UP)return K6;UP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return K6=e,K6}var W6,zP;function $he(){if(zP)return W6;zP=1;var t=ec(),e=cN(),r=tc(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",b="[object Set]",T="[object String]",_="[object WeakMap]",w="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",$="[object Int8Array]",I="[object Int16Array]",L="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",F="[object Uint32Array]",P={};P[k]=P[C]=P[$]=P[I]=P[L]=P[E]=P[A]=P[R]=P[F]=!0,P[n]=P[i]=P[w]=P[a]=P[N]=P[s]=P[c]=P[d]=P[h]=P[p]=P[m]=P[y]=P[b]=P[T]=P[_]=!1;function B(D){return r(D)&&e(D.length)&&!!P[t(D)]}return W6=B,W6}var X6,$P;function MG(){if($P)return X6;$P=1;function t(e){return function(r){return e(r)}}return X6=t,X6}var tm={exports:{}};tm.exports;var VP;function Vhe(){return VP||(VP=1,(function(t,e){var r=eG(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a&&r.process,c=(function(){try{var d=i&&i.require&&i.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=c})(tm,tm.exports)),tm.exports}var Q6,FP;function PG(){if(FP)return Q6;FP=1;var t=$he(),e=MG(),r=Vhe(),n=r&&r.isTypedArray,i=n?e(n):t;return Q6=i,Q6}var Y6,qP;function Fhe(){if(qP)return Y6;qP=1;var t=Bhe(),e=oN(),r=qa(),n=RG(),i=lN(),a=PG(),s=Object.prototype,c=s.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),b=!m&&!y&&n(h),T=!m&&!y&&!b&&a(h),_=m||y||b||T,w=_?t(h.length,String):[],N=w.length;for(var k in h)(p||c.call(h,k))&&!(_&&(k=="length"||b&&(k=="offset"||k=="parent")||T&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,N)))&&w.push(k);return w}return Y6=d,Y6}var Z6,HP;function qhe(){if(HP)return Z6;HP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return Z6=e,Z6}var J6,GP;function DG(){if(GP)return J6;GP=1;function t(e,r){return function(n){return e(r(n))}}return J6=t,J6}var e_,KP;function Hhe(){if(KP)return e_;KP=1;var t=DG(),e=t(Object.keys,Object);return e_=e,e_}var t_,WP;function Ghe(){if(WP)return t_;WP=1;var t=qhe(),e=Hhe(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&s.push(c);return s}return t_=i,t_}var r_,XP;function o1(){if(XP)return r_;XP=1;var t=WE(),e=cN();function r(n){return n!=null&&e(n.length)&&!t(n)}return r_=r,r_}var n_,QP;function R2(){if(QP)return n_;QP=1;var t=Fhe(),e=Ghe(),r=o1();function n(i){return r(i)?t(i):e(i)}return n_=n,n_}var i_,YP;function Khe(){if(YP)return i_;YP=1;var t=Mhe(),e=Lhe(),r=R2();function n(i){return t(i,r,e)}return i_=n,i_}var a_,ZP;function Whe(){if(ZP)return a_;ZP=1;var t=Khe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,c,d,h,p){var m=c&e,y=t(a),b=y.length,T=t(s),_=T.length;if(b!=_&&!m)return!1;for(var w=b;w--;){var N=y[w];if(!(m?N in s:n.call(s,N)))return!1}var k=p.get(a),C=p.get(s);if(k&&C)return k==s&&C==a;var $=!0;p.set(a,s),p.set(s,a);for(var I=m;++w<b;){N=y[w];var L=a[N],E=s[N];if(d)var A=m?d(E,L,N,s,a,p):d(L,E,N,a,s,p);if(!(A===void 0?L===E||h(L,E,c,d,p):A)){$=!1;break}I||(I=N=="constructor")}if($&&!I){var R=a.constructor,F=s.constructor;R!=F&&"constructor"in a&&"constructor"in s&&!(typeof R=="function"&&R instanceof R&&typeof F=="function"&&F instanceof F)&&($=!1)}return p.delete(a),p.delete(s),$}return a_=i,a_}var s_,JP;function Xhe(){if(JP)return s_;JP=1;var t=i0(),e=Fo(),r=t(e,"DataView");return s_=r,s_}var o_,eD;function Qhe(){if(eD)return o_;eD=1;var t=i0(),e=Fo(),r=t(e,"Promise");return o_=r,o_}var l_,tD;function LG(){if(tD)return l_;tD=1;var t=i0(),e=Fo(),r=t(e,"Set");return l_=r,l_}var c_,rD;function Yhe(){if(rD)return c_;rD=1;var t=i0(),e=Fo(),r=t(e,"WeakMap");return c_=r,c_}var u_,nD;function Zhe(){if(nD)return u_;nD=1;var t=Xhe(),e=QE(),r=Qhe(),n=LG(),i=Yhe(),a=ec(),s=tG(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",b=s(t),T=s(e),_=s(r),w=s(n),N=s(i),k=a;return(t&&k(new t(new ArrayBuffer(1)))!=y||e&&k(new e)!=c||r&&k(r.resolve())!=h||n&&k(new n)!=p||i&&k(new i)!=m)&&(k=function(C){var $=a(C),I=$==d?C.constructor:void 0,L=I?s(I):"";if(L)switch(L){case b:return y;case T:return c;case _:return h;case w:return p;case N:return m}return $}),u_=k,u_}var d_,iD;function Jhe(){if(iD)return d_;iD=1;var t=NG(),e=OG(),r=Rhe(),n=Whe(),i=Zhe(),a=qa(),s=RG(),c=PG(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,b=y.hasOwnProperty;function T(_,w,N,k,C,$){var I=a(_),L=a(w),E=I?p:i(_),A=L?p:i(w);E=E==h?m:E,A=A==h?m:A;var R=E==m,F=A==m,P=E==A;if(P&&s(_)){if(!s(w))return!1;I=!0,R=!1}if(P&&!R)return $||($=new t),I||c(_)?e(_,w,N,k,C,$):r(_,w,E,N,k,C,$);if(!(N&d)){var B=R&&b.call(_,"__wrapped__"),D=F&&b.call(w,"__wrapped__");if(B||D){var Y=B?_.value():_,J=D?w.value():w;return $||($=new t),C(Y,J,N,k,$)}}return P?($||($=new t),n(_,w,N,k,C,$)):!1}return d_=T,d_}var h_,aD;function uN(){if(aD)return h_;aD=1;var t=Jhe(),e=tc();function r(n,i,a,s,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,a,s,r,c)}return h_=r,h_}var f_,sD;function efe(){if(sD)return f_;sD=1;var t=NG(),e=uN(),r=1,n=2;function i(a,s,c,d){var h=c.length,p=h,m=!d;if(a==null)return!p;for(a=Object(a);h--;){var y=c[h];if(m&&y[2]?y[1]!==a[y[0]]:!(y[0]in a))return!1}for(;++h<p;){y=c[h];var b=y[0],T=a[b],_=y[1];if(m&&y[2]){if(T===void 0&&!(b in a))return!1}else{var w=new t;if(d)var N=d(T,_,b,a,s,w);if(!(N===void 0?e(_,T,r|n,d,w):N))return!1}}return!0}return f_=i,f_}var p_,oD;function BG(){if(oD)return p_;oD=1;var t=Au();function e(r){return r===r&&!t(r)}return p_=e,p_}var m_,lD;function tfe(){if(lD)return m_;lD=1;var t=BG(),e=R2();function r(n){for(var i=e(n),a=i.length;a--;){var s=i[a],c=n[s];i[a]=[s,c,t(c)]}return i}return m_=r,m_}var g_,cD;function UG(){if(cD)return g_;cD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return g_=t,g_}var y_,uD;function rfe(){if(uD)return y_;uD=1;var t=efe(),e=tfe(),r=UG();function n(i){var a=e(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return y_=n,y_}var v_,dD;function nfe(){if(dD)return v_;dD=1;function t(e,r){return e!=null&&r in Object(e)}return v_=t,v_}var b_,hD;function ife(){if(hD)return b_;hD=1;var t=iG(),e=oN(),r=qa(),n=lN(),i=cN(),a=N2();function s(c,d,h){d=t(d,c);for(var p=-1,m=d.length,y=!1;++p<m;){var b=a(d[p]);if(!(y=c!=null&&h(c,b)))break;c=c[b]}return y||++p!=m?y:(m=c==null?0:c.length,!!m&&i(m)&&n(b,m)&&(r(c)||e(c)))}return b_=s,b_}var x_,fD;function afe(){if(fD)return x_;fD=1;var t=nfe(),e=ife();function r(n,i){return n!=null&&e(n,i,t)}return x_=r,x_}var w_,pD;function sfe(){if(pD)return w_;pD=1;var t=uN(),e=aG(),r=afe(),n=KE(),i=BG(),a=UG(),s=N2(),c=1,d=2;function h(p,m){return n(p)&&i(m)?a(s(p),m):function(y){var b=e(y,p);return b===void 0&&b===m?r(y,p):t(m,b,c|d)}}return w_=h,w_}var __,mD;function jf(){if(mD)return __;mD=1;function t(e){return e}return __=t,__}var S_,gD;function ofe(){if(gD)return S_;gD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return S_=t,S_}var T_,yD;function lfe(){if(yD)return T_;yD=1;var t=JE();function e(r){return function(n){return t(n,r)}}return T_=e,T_}var A_,vD;function cfe(){if(vD)return A_;vD=1;var t=ofe(),e=lfe(),r=KE(),n=N2();function i(a){return r(a)?t(n(a)):e(a)}return A_=i,A_}var E_,bD;function qo(){if(bD)return E_;bD=1;var t=rfe(),e=sfe(),r=jf(),n=qa(),i=cfe();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):i(s)}return E_=a,E_}var N_,xD;function zG(){if(xD)return N_;xD=1;function t(e,r,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(e[s],s,e))return s;return-1}return N_=t,N_}var j_,wD;function ufe(){if(wD)return j_;wD=1;function t(e){return e!==e}return j_=t,j_}var C_,_D;function dfe(){if(_D)return C_;_D=1;function t(e,r,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===r)return i;return-1}return C_=t,C_}var k_,SD;function hfe(){if(SD)return k_;SD=1;var t=zG(),e=ufe(),r=dfe();function n(i,a,s){return a===a?r(i,a,s):t(i,e,s)}return k_=n,k_}var O_,TD;function ffe(){if(TD)return O_;TD=1;var t=hfe();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return O_=e,O_}var I_,AD;function pfe(){if(AD)return I_;AD=1;function t(e,r,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(r,e[i]))return!0;return!1}return I_=t,I_}var R_,ED;function mfe(){if(ED)return R_;ED=1;function t(){}return R_=t,R_}var M_,ND;function gfe(){if(ND)return M_;ND=1;var t=LG(),e=mfe(),r=sN(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(a){return new t(a)}:e;return M_=i,M_}var P_,jD;function yfe(){if(jD)return P_;jD=1;var t=jG(),e=ffe(),r=pfe(),n=kG(),i=gfe(),a=sN(),s=200;function c(d,h,p){var m=-1,y=e,b=d.length,T=!0,_=[],w=_;if(p)T=!1,y=r;else if(b>=s){var N=h?null:i(d);if(N)return a(N);T=!1,y=n,w=new t}else w=h?[]:_;e:for(;++m<b;){var k=d[m],C=h?h(k):k;if(k=p||k!==0?k:0,T&&C===C){for(var $=w.length;$--;)if(w[$]===C)continue e;h&&w.push(C),_.push(k)}else y(w,C,p)||(w!==_&&w.push(C),_.push(k))}return _}return P_=c,P_}var D_,CD;function vfe(){if(CD)return D_;CD=1;var t=qo(),e=yfe();function r(n,i){return n&&n.length?e(n,t(i,2)):[]}return D_=r,D_}var bfe=vfe();const kD=Dr(bfe);function $G(t,e,r){return e===!0?kD(t,r):Ht(e)?kD(t,e):t}function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}var xfe=["ref"];function OD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(r),!0).forEach(function(n){M2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ID(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FG(n.key),n)}}function _fe(t,e,r){return e&&ID(t.prototype,e),r&&ID(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sfe(t,e,r){return e=Bb(e),Tfe(t,VG()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function Tfe(t,e){if(e&&(qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Afe(t)}function Afe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VG=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function Efe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PA(t,e)}function PA(t,e){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PA(t,e)}function M2(t,e,r){return e=FG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FG(t){var e=Nfe(t,"string");return qh(e)=="symbol"?e:e+""}function Nfe(t,e){if(qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jfe(t,e){if(t==null)return{};var r=Cfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Cfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kfe(t){return t.value}function Ofe(t,e){if(te.isValidElement(t))return te.cloneElement(t,e);if(typeof t=="function")return te.createElement(t,e);e.ref;var r=jfe(e,xfe);return te.createElement(aN,r)}var RD=1,bh=(function(t){function e(){var r;wfe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Sfe(this,e,[].concat(i)),M2(r,"lastBoundingBox",{width:-1,height:-1}),r}return Efe(e,t),_fe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>RD||Math.abs(i.height-this.lastBoundingBox.height)>RD)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,c=i.verticalAlign,d=i.margin,h=i.chartWidth,p=i.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var b=this.getBBoxSnapshot();m={left:((h||0)-b.width)/2}}else m=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((p||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return gl(gl({},m),y)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,c=i.height,d=i.wrapperStyle,h=i.payloadUniqBy,p=i.payload,m=gl(gl({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return te.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(b){n.wrapperNode=b}},Ofe(a,gl(gl({},this.props),{},{payload:$G(p,h,kfe)})))}}],[{key:"getWithHeight",value:function(n,i){var a=gl(gl({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&ct(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])})(M.PureComponent);M2(bh,"displayName","Legend");M2(bh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var L_,MD;function Ife(){if(MD)return L_;MD=1;var t=i1(),e=oN(),r=qa(),n=t?t.isConcatSpreadable:void 0;function i(a){return r(a)||e(a)||!!(n&&a&&a[n])}return L_=i,L_}var B_,PD;function qG(){if(PD)return B_;PD=1;var t=IG(),e=Ife();function r(n,i,a,s,c){var d=-1,h=n.length;for(a||(a=e),c||(c=[]);++d<h;){var p=n[d];i>0&&a(p)?i>1?r(p,i-1,a,s,c):t(c,p):s||(c[c.length]=p)}return c}return B_=r,B_}var U_,DD;function Rfe(){if(DD)return U_;DD=1;function t(e){return function(r,n,i){for(var a=-1,s=Object(r),c=i(r),d=c.length;d--;){var h=c[e?d:++a];if(n(s[h],h,s)===!1)break}return r}}return U_=t,U_}var z_,LD;function Mfe(){if(LD)return z_;LD=1;var t=Rfe(),e=t();return z_=e,z_}var $_,BD;function HG(){if(BD)return $_;BD=1;var t=Mfe(),e=R2();function r(n,i){return n&&t(n,i,e)}return $_=r,$_}var V_,UD;function Pfe(){if(UD)return V_;UD=1;var t=o1();function e(r,n){return function(i,a){if(i==null)return i;if(!t(i))return r(i,a);for(var s=i.length,c=n?s:-1,d=Object(i);(n?c--:++c<s)&&a(d[c],c,d)!==!1;);return i}}return V_=e,V_}var F_,zD;function dN(){if(zD)return F_;zD=1;var t=HG(),e=Pfe(),r=e(t);return F_=r,F_}var q_,$D;function GG(){if($D)return q_;$D=1;var t=dN(),e=o1();function r(n,i){var a=-1,s=e(n)?Array(n.length):[];return t(n,function(c,d,h){s[++a]=i(c,d,h)}),s}return q_=r,q_}var H_,VD;function Dfe(){if(VD)return H_;VD=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return H_=t,H_}var G_,FD;function Lfe(){if(FD)return G_;FD=1;var t=Ef();function e(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||a&&d&&p||!i&&p||!s)return 1;if(!a&&!c&&!m&&r<n||m&&i&&s&&!a&&!c||h&&i&&s||!d&&s||!p)return-1}return 0}return G_=e,G_}var K_,qD;function Bfe(){if(qD)return K_;qD=1;var t=Lfe();function e(r,n,i){for(var a=-1,s=r.criteria,c=n.criteria,d=s.length,h=i.length;++a<d;){var p=t(s[a],c[a]);if(p){if(a>=h)return p;var m=i[a];return p*(m=="desc"?-1:1)}}return r.index-n.index}return K_=e,K_}var W_,HD;function Ufe(){if(HD)return W_;HD=1;var t=ZE(),e=JE(),r=qo(),n=GG(),i=Dfe(),a=MG(),s=Bfe(),c=jf(),d=qa();function h(p,m,y){m.length?m=t(m,function(_){return d(_)?function(w){return e(w,_.length===1?_[0]:_)}:_}):m=[c];var b=-1;m=t(m,a(r));var T=n(p,function(_,w,N){var k=t(m,function(C){return C(_)});return{criteria:k,index:++b,value:_}});return i(T,function(_,w){return s(_,w,y)})}return W_=h,W_}var X_,GD;function zfe(){if(GD)return X_;GD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return X_=t,X_}var Q_,KD;function $fe(){if(KD)return Q_;KD=1;var t=zfe(),e=Math.max;function r(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,c=-1,d=e(s.length-i,0),h=Array(d);++c<d;)h[c]=s[i+c];c=-1;for(var p=Array(i+1);++c<i;)p[c]=s[c];return p[i]=a(h),t(n,this,p)}}return Q_=r,Q_}var Y_,WD;function Vfe(){if(WD)return Y_;WD=1;function t(e){return function(){return e}}return Y_=t,Y_}var Z_,XD;function KG(){if(XD)return Z_;XD=1;var t=i0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Z_=e,Z_}var J_,QD;function Ffe(){if(QD)return J_;QD=1;var t=Vfe(),e=KG(),r=jf(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return J_=n,J_}var eS,YD;function qfe(){if(YD)return eS;YD=1;var t=800,e=16,r=Date.now;function n(i){var a=0,s=0;return function(){var c=r(),d=e-(c-s);if(s=c,d>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return eS=n,eS}var tS,ZD;function Hfe(){if(ZD)return tS;ZD=1;var t=Ffe(),e=qfe(),r=e(t);return tS=r,tS}var rS,JD;function Gfe(){if(JD)return rS;JD=1;var t=jf(),e=$fe(),r=Hfe();function n(i,a){return r(e(i,a,t),i+"")}return rS=n,rS}var nS,eL;function P2(){if(eL)return nS;eL=1;var t=XE(),e=o1(),r=lN(),n=Au();function i(a,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&r(s,c.length):d=="string"&&s in c)?t(c[s],a):!1}return nS=i,nS}var iS,tL;function Kfe(){if(tL)return iS;tL=1;var t=qG(),e=Ufe(),r=Gfe(),n=P2(),i=r(function(a,s){if(a==null)return[];var c=s.length;return c>1&&n(a,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return iS=i,iS}var Wfe=Kfe();const hN=Dr(Wfe);function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function DA(){return DA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DA.apply(this,arguments)}function Xfe(t,e){return Jfe(t)||Zfe(t,e)||Yfe(t,e)||Qfe()}function Qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yfe(t,e){if(t){if(typeof t=="string")return rL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rL(t,e)}}function rL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function Jfe(t){if(Array.isArray(t))return t}function nL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(r),!0).forEach(function(n){epe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function epe(t,e,r){return e=tpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tpe(t){var e=rpe(t,"string");return Zm(e)=="symbol"?e:e+""}function rpe(t,e){if(Zm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function npe(t){return Array.isArray(t)&&wi(t[0])&&wi(t[1])?t.join(" ~ "):t}var ipe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,b=e.wrapperClassName,T=e.labelClassName,_=e.label,w=e.labelFormatter,N=e.accessibilityLayer,k=N===void 0?!1:N,C=function(){if(p&&p.length){var B={padding:0,margin:0},D=(y?hN(p,y):p).map(function(Y,J){if(Y.type==="none")return null;var X=aS({display:"block",paddingTop:4,paddingBottom:4,color:Y.color||"#000"},c),ee=Y.formatter||m||npe,Z=Y.value,ge=Y.name,ce=Z,Q=ge;if(ee&&ce!=null&&Q!=null){var re=ee(Z,ge,Y,J,p);if(Array.isArray(re)){var de=Xfe(re,2);ce=de[0],Q=de[1]}else ce=re}return te.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:X},wi(Q)?te.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,wi(Q)?te.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,te.createElement("span",{className:"recharts-tooltip-item-value"},ce),te.createElement("span",{className:"recharts-tooltip-item-unit"},Y.unit||""))});return te.createElement("ul",{className:"recharts-tooltip-item-list",style:B},D)}return null},$=aS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),I=aS({margin:0},h),L=!er(_),E=L?_:"",A=sr("recharts-default-tooltip",b),R=sr("recharts-tooltip-label",T);L&&w&&p!==void 0&&p!==null&&(E=w(_,p));var F=k?{role:"status","aria-live":"assertive"}:{};return te.createElement("div",DA({className:A,style:$},F),te.createElement("p",{className:R,style:I},te.isValidElement(E)?E:"".concat(E)),C())};function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function hv(t,e,r){return e=ape(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ape(t){var e=spe(t,"string");return Jm(e)=="symbol"?e:e+""}function spe(t,e){if(Jm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lp="recharts-tooltip-wrapper",ope={visibility:"hidden"};function lpe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return sr(Lp,hv(hv(hv(hv({},"".concat(Lp,"-right"),ct(r)&&e&&ct(e.x)&&r>=e.x),"".concat(Lp,"-left"),ct(r)&&e&&ct(e.x)&&r<e.x),"".concat(Lp,"-bottom"),ct(n)&&e&&ct(e.y)&&n>=e.y),"".concat(Lp,"-top"),ct(n)&&e&&ct(e.y)&&n<e.y))}function iL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(a&&ct(a[n]))return a[n];var p=r[n]-c-i,m=r[n]+i;if(e[n])return s[n]?p:m;if(s[n]){var y=p,b=d[n];return y<b?Math.max(m,d[n]):Math.max(p,d[n])}var T=m+c,_=d[n]+h;return T>_?Math.max(p,d[n]):Math.max(m,d[n])}function cpe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function upe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return s.height>0&&s.width>0&&r?(p=iL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),m=iL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),h=cpe({translateX:p,translateY:m,useTranslate3d:c})):h=ope,{cssProperties:h,cssClasses:lpe({translateX:p,translateY:m,coordinate:r})}}function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}function aL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(r),!0).forEach(function(n){BA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XG(n.key),n)}}function fpe(t,e,r){return e&&hpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ppe(t,e,r){return e=Ub(e),mpe(t,WG()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function mpe(t,e){if(e&&(Hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gpe(t)}function gpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WG=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function ype(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LA(t,e)}function LA(t,e){return LA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},LA(t,e)}function BA(t,e,r){return e=XG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XG(t){var e=vpe(t,"string");return Hh(e)=="symbol"?e:e+""}function vpe(t,e){if(Hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oL=1,bpe=(function(t){function e(){var r;dpe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=ppe(this,e,[].concat(i)),BA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),BA(r,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return ype(e,t),fpe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>oL||Math.abs(n.height-this.state.lastBoundingBox.height)>oL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,h=i.children,p=i.coordinate,m=i.hasPayload,y=i.isAnimationActive,b=i.offset,T=i.position,_=i.reverseDirection,w=i.useTranslate3d,N=i.viewBox,k=i.wrapperStyle,C=upe({allowEscapeViewBox:s,coordinate:p,offsetTopLeft:b,position:T,reverseDirection:_,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:N}),$=C.cssClasses,I=C.cssProperties,L=sL(sL({transition:y&&a?"transform ".concat(c,"ms ").concat(d):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&m?"visible":"hidden",position:"absolute",top:0,left:0},k);return te.createElement("div",{tabIndex:-1,className:$,style:L,ref:function(A){n.wrapperNode=A}},h)}}])})(M.PureComponent),xpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},a0={isSsr:xpe()};function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function lL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(r),!0).forEach(function(n){fN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YG(n.key),n)}}function Spe(t,e,r){return e&&_pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tpe(t,e,r){return e=zb(e),Ape(t,QG()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function Ape(t,e){if(e&&(Gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Epe(t)}function Epe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QG=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function Npe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UA(t,e)}function UA(t,e){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},UA(t,e)}function fN(t,e,r){return e=YG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YG(t){var e=jpe(t,"string");return Gh(e)=="symbol"?e:e+""}function jpe(t,e){if(Gh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Cpe(t){return t.dataKey}function kpe(t,e){return te.isValidElement(t)?te.cloneElement(t,e):typeof t=="function"?te.createElement(t,e):te.createElement(ipe,e)}var xo=(function(t){function e(){return wpe(this,e),Tpe(this,e,arguments)}return Npe(e,t),Spe(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,h=i.content,p=i.coordinate,m=i.filterNull,y=i.isAnimationActive,b=i.offset,T=i.payload,_=i.payloadUniqBy,w=i.position,N=i.reverseDirection,k=i.useTranslate3d,C=i.viewBox,$=i.wrapperStyle,I=T??[];m&&I.length&&(I=$G(T.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),_,Cpe));var L=I.length>0;return te.createElement(bpe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:a,coordinate:p,hasPayload:L,offset:b,position:w,reverseDirection:N,useTranslate3d:k,viewBox:C,wrapperStyle:$},kpe(h,cL(cL({},this.props),{},{payload:I})))}}])})(M.PureComponent);fN(xo,"displayName","Tooltip");fN(xo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!a0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var sS,uL;function Ope(){if(uL)return sS;uL=1;var t=Fo(),e=function(){return t.Date.now()};return sS=e,sS}var oS,dL;function Ipe(){if(dL)return oS;dL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return oS=e,oS}var lS,hL;function Rpe(){if(hL)return lS;hL=1;var t=Ipe(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return lS=r,lS}var cS,fL;function ZG(){if(fL)return cS;fL=1;var t=Rpe(),e=Au(),r=Ef(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=a.test(h);return m||s.test(h)?c(h.slice(2),m?2:8):i.test(h)?n:+h}return cS=d,cS}var uS,pL;function Mpe(){if(pL)return uS;pL=1;var t=Au(),e=Ope(),r=ZG(),n="Expected a function",i=Math.max,a=Math.min;function s(c,d,h){var p,m,y,b,T,_,w=0,N=!1,k=!1,C=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(N=!!h.leading,k="maxWait"in h,y=k?i(r(h.maxWait)||0,d):y,C="trailing"in h?!!h.trailing:C);function $(D){var Y=p,J=m;return p=m=void 0,w=D,b=c.apply(J,Y),b}function I(D){return w=D,T=setTimeout(A,d),N?$(D):b}function L(D){var Y=D-_,J=D-w,X=d-Y;return k?a(X,y-J):X}function E(D){var Y=D-_,J=D-w;return _===void 0||Y>=d||Y<0||k&&J>=y}function A(){var D=e();if(E(D))return R(D);T=setTimeout(A,L(D))}function R(D){return T=void 0,C&&p?$(D):(p=m=void 0,b)}function F(){T!==void 0&&clearTimeout(T),w=0,p=_=m=T=void 0}function P(){return T===void 0?b:R(e())}function B(){var D=e(),Y=E(D);if(p=arguments,m=this,_=D,Y){if(T===void 0)return I(_);if(k)return clearTimeout(T),T=setTimeout(A,d),$(_)}return T===void 0&&(T=setTimeout(A,d)),b}return B.cancel=F,B.flush=P,B}return uS=s,uS}var dS,mL;function Ppe(){if(mL)return dS;mL=1;var t=Mpe(),e=Au(),r="Expected a function";function n(i,a,s){var c=!0,d=!0;if(typeof i!="function")throw new TypeError(r);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),t(i,a,{leading:c,maxWait:a,trailing:d})}return dS=n,dS}var Dpe=Ppe();const JG=Dr(Dpe);function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function gL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(r),!0).forEach(function(n){Lpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lpe(t,e,r){return e=Bpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bpe(t){var e=Upe(t,"string");return eg(e)=="symbol"?e:e+""}function Upe(t,e){if(eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zpe(t,e){return qpe(t)||Fpe(t,e)||Vpe(t,e)||$pe()}function $pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vpe(t,e){if(t){if(typeof t=="string")return yL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yL(t,e)}}function yL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fpe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function qpe(t){if(Array.isArray(t))return t}var eK=M.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,s=a===void 0?"100%":a,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,b=t.children,T=t.debounce,_=T===void 0?0:T,w=t.id,N=t.className,k=t.onResize,C=t.style,$=C===void 0?{}:C,I=M.useRef(null),L=M.useRef();L.current=k,M.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var E=M.useState({containerWidth:i.width,containerHeight:i.height}),A=zpe(E,2),R=A[0],F=A[1],P=M.useCallback(function(D,Y){F(function(J){var X=Math.round(D),ee=Math.round(Y);return J.containerWidth===X&&J.containerHeight===ee?J:{containerWidth:X,containerHeight:ee}})},[]);M.useEffect(function(){var D=function(ge){var ce,Q=ge[0].contentRect,re=Q.width,de=Q.height;P(re,de),(ce=L.current)===null||ce===void 0||ce.call(L,re,de)};_>0&&(D=JG(D,_,{trailing:!0,leading:!1}));var Y=new ResizeObserver(D),J=I.current.getBoundingClientRect(),X=J.width,ee=J.height;return P(X,ee),Y.observe(I.current),function(){Y.disconnect()}},[P,_]);var B=M.useMemo(function(){var D=R.containerWidth,Y=R.containerHeight;if(D<0||Y<0)return null;Pl(bd(s)||bd(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),Pl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var J=bd(s)?D:s,X=bd(d)?Y:d;r&&r>0&&(J?X=J/r:X&&(J=X*r),y&&X>y&&(X=y)),Pl(J>0||X>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,J,X,s,d,p,m,r);var ee=!Array.isArray(b)&&Ml(b.type).endsWith("Chart");return te.Children.map(b,function(Z){return te.isValidElement(Z)?M.cloneElement(Z,fv({width:J,height:X},ee?{style:fv({height:"100%",width:"100%",maxHeight:X,maxWidth:J},Z.props.style)}:{})):Z})},[r,b,d,y,m,p,R,s]);return te.createElement("div",{id:w?"".concat(w):void 0,className:sr("recharts-responsive-container",N),style:fv(fv({},$),{},{width:s,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:I},B)}),pN=function(e){return null};pN.displayName="Cell";function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function vL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(r),!0).forEach(function(n){Hpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hpe(t,e,r){return e=Gpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gpe(t){var e=Kpe(t,"string");return tg(e)=="symbol"?e:e+""}function Kpe(t,e){if(tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y0={widthCache:{},cacheCount:0},Wpe=2e3,Xpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bL="recharts_measurement_span";function Qpe(t){var e=zA({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var mm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||a0.isSsr)return{width:0,height:0};var n=Qpe(r),i=JSON.stringify({text:e,copyStyle:n});if(Y0.widthCache[i])return Y0.widthCache[i];try{var a=document.getElementById(bL);a||(a=document.createElement("span"),a.setAttribute("id",bL),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=zA(zA({},Xpe),n);Object.assign(a.style,s),a.textContent="".concat(e);var c=a.getBoundingClientRect(),d={width:c.width,height:c.height};return Y0.widthCache[i]=d,++Y0.cacheCount>Wpe&&(Y0.cacheCount=0,Y0.widthCache={}),d}catch{return{width:0,height:0}}},Ype=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function $b(t,e){return tme(t)||eme(t,e)||Jpe(t,e)||Zpe()}function Zpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jpe(t,e){if(t){if(typeof t=="string")return xL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xL(t,e)}}function xL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function tme(t){if(Array.isArray(t))return t}function rme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ime(n.key),n)}}function nme(t,e,r){return e&&wL(t.prototype,e),r&&wL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ime(t){var e=ame(t,"string");return rg(e)=="symbol"?e:e+""}function ame(t,e){if(rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _L=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ome=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lme=Object.keys(tK),lh="NaN";function cme(t,e){return t*tK[e]}var pv=(function(){function t(e,r){rme(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!sme.test(r)&&(this.num=NaN,this.unit=""),lme.includes(r)&&(this.num=cme(e,r),this.unit="px")}return nme(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=ome.exec(r))!==null&&n!==void 0?n:[],a=$b(i,3),s=a[1],c=a[2];return new t(parseFloat(s),c??"")}}])})();function rK(t){if(t.includes(lh))return lh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=_L.exec(e))!==null&&r!==void 0?r:[],i=$b(n,4),a=i[1],s=i[2],c=i[3],d=pv.parse(a??""),h=pv.parse(c??""),p=s==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return lh;e=e.replace(_L,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=SL.exec(e))!==null&&m!==void 0?m:[],b=$b(y,4),T=b[1],_=b[2],w=b[3],N=pv.parse(T??""),k=pv.parse(w??""),C=_==="+"?N.add(k):N.subtract(k);if(C.isNaN())return lh;e=e.replace(SL,C.toString())}return e}var TL=/\(([^()]*)\)/;function ume(t){for(var e=t;e.includes("(");){var r=TL.exec(e),n=$b(r,2),i=n[1];e=e.replace(TL,rK(i))}return e}function dme(t){var e=t.replace(/\s+/g,"");return e=ume(e),e=rK(e),e}function hme(t){try{return dme(t)}catch{return lh}}function hS(t){var e=hme(t.slice(5,-1));return e===lh?"":e}var fme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pme=["dx","dy","angle","className","breakAll"];function $A(){return $A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$A.apply(this,arguments)}function AL(t,e){if(t==null)return{};var r=mme(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function EL(t,e){return bme(t)||vme(t,e)||yme(t,e)||gme()}function gme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yme(t,e){if(t){if(typeof t=="string")return NL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NL(t,e)}}function NL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function bme(t){if(Array.isArray(t))return t}var nK=/[ \f\n\r\t\v\u2028\u2029]+/,iK=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];er(r)||(n?a=r.toString().split(""):a=r.toString().split(nK));var s=a.map(function(d){return{word:d,width:mm(d,i).width}}),c=n?0:mm("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},xme=function(e,r,n,i,a){var s=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=ct(s),m=c,y=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return J.reduce(function(X,ee){var Z=ee.word,ge=ee.width,ce=X[X.length-1];if(ce&&(i==null||a||ce.width+ge+n<Number(i)))ce.words.push(Z),ce.width+=ge+n;else{var Q={words:[Z],width:ge};X.push(Q)}return X},[])},b=y(r),T=function(J){return J.reduce(function(X,ee){return X.width>ee.width?X:ee})};if(!p)return b;for(var _="",w=function(J){var X=m.slice(0,J),ee=iK({breakAll:h,style:d,children:X+_}).wordsWithComputedWidth,Z=y(ee),ge=Z.length>s||T(Z).width>Number(i);return[ge,Z]},N=0,k=m.length-1,C=0,$;N<=k&&C<=m.length-1;){var I=Math.floor((N+k)/2),L=I-1,E=w(L),A=EL(E,2),R=A[0],F=A[1],P=w(I),B=EL(P,1),D=B[0];if(!R&&!D&&(N=I+1),R&&D&&(k=I-1),!R&&D){$=F;break}C++}return $||b},jL=function(e){var r=er(e)?[]:e.toString().split(nK);return[{words:r}]},wme=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,c=e.maxLines;if((r||n)&&!a0.isSsr){var d,h,p=iK({breakAll:s,children:i,style:a});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return jL(i);return xme({breakAll:s,children:i,maxLines:c,style:a},d,h,r,n)}return jL(i)},CL="#808080",Kh=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,b=y===void 0?"start":y,T=e.verticalAnchor,_=T===void 0?"end":T,w=e.fill,N=w===void 0?CL:w,k=AL(e,fme),C=M.useMemo(function(){return wme({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:m,style:k.style,width:k.width})},[k.breakAll,k.children,k.maxLines,m,k.style,k.width]),$=k.dx,I=k.dy,L=k.angle,E=k.className,A=k.breakAll,R=AL(k,pme);if(!wi(n)||!wi(a))return null;var F=n+(ct($)?$:0),P=a+(ct(I)?I:0),B;switch(_){case"start":B=hS("calc(".concat(h,")"));break;case"middle":B=hS("calc(".concat((C.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:B=hS("calc(".concat(C.length-1," * -").concat(c,")"));break}var D=[];if(m){var Y=C[0].width,J=k.width;D.push("scale(".concat((ct(J)?J/Y:1)/Y,")"))}return L&&D.push("rotate(".concat(L,", ").concat(F,", ").concat(P,")")),D.length&&(R.transform=D.join(" ")),te.createElement("text",$A({},Ot(R,!0),{x:F,y:P,className:sr("recharts-text",E),textAnchor:b,fill:N.includes("url")?CL:N}),C.map(function(X,ee){var Z=X.words.join(A?"":" ");return te.createElement("tspan",{x:F,dy:ee===0?B:c,key:"".concat(Z,"-").concat(ee)},Z)}))};function lu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _me(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mN(t){let e,r,n;t.length!==2?(e=lu,r=(c,d)=>lu(t(c),d),n=(c,d)=>t(c)-d):(e=t===lu||t===_me?t:Sme,r=t,n=t);function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function s(c,d,h=0,p=c.length){const m=i(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:i,center:s,right:a}}function Sme(){return 0}function aK(t){return t===null?NaN:+t}function*Tme(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Ame=mN(lu),l1=Ame.right;mN(aK).center;class kL extends Map{constructor(e,r=jme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(OL(this,e))}has(e){return super.has(OL(this,e))}set(e,r){return super.set(Eme(this,e),r)}delete(e){return super.delete(Nme(this,e))}}function OL({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Eme({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Nme({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function jme(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Cme(t=lu){if(t===lu)return sK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function sK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const kme=Math.sqrt(50),Ome=Math.sqrt(10),Ime=Math.sqrt(2);function Vb(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=kme?10:a>=Ome?5:a>=Ime?2:1;let c,d,h;return i<0?(h=Math.pow(10,-i)/s,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,i)*s,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Vb(t,e,r*2):[c,d,h]}function VA(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?Vb(e,t,r):Vb(t,e,r);if(!(a>=i))return[];const c=a-i+1,d=new Array(c);if(n)if(s<0)for(let h=0;h<c;++h)d[h]=(a-h)/-s;else for(let h=0;h<c;++h)d[h]=(a-h)*s;else if(s<0)for(let h=0;h<c;++h)d[h]=(i+h)/-s;else for(let h=0;h<c;++h)d[h]=(i+h)*s;return d}function FA(t,e,r){return e=+e,t=+t,r=+r,Vb(t,e,r)[2]}function qA(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?FA(e,t,r):FA(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function IL(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function RL(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function oK(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?sK:Cme(i);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),b=Math.max(r,Math.floor(e-h*m/d+y)),T=Math.min(n,Math.floor(e+(d-h)*m/d+y));oK(t,e,b,T,i)}const a=t[e];let s=r,c=n;for(Bp(t,r,e),i(t[n],a)>0&&Bp(t,r,n);s<c;){for(Bp(t,s,c),++s,--c;i(t[s],a)<0;)++s;for(;i(t[c],a)>0;)--c}i(t[r],a)===0?Bp(t,r,c):(++c,Bp(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function Bp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Rme(t,e,r){if(t=Float64Array.from(Tme(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return RL(t);if(e>=1)return IL(t);var n,i=(n-1)*e,a=Math.floor(i),s=IL(oK(t,a).subarray(0,a+1)),c=RL(t.subarray(a+1));return s+(c-s)*(i-a)}}function Mme(t,e,r=aK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),c=+r(t[a+1],a+1,t);return s+(c-s)*(i-a)}}function Pme(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Us(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function rc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const HA=Symbol("implicit");function gN(){var t=new kL,e=[],r=[],n=HA;function i(a){let s=t.get(a);if(s===void 0){if(n!==HA)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new kL;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return gN(e,r).unknown(n)},Us.apply(i,arguments),i}function ng(){var t=gN().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,b=i<n,T=b?i:n,_=b?n:i;a=(_-T)/Math.max(1,y-d+h*2),c&&(a=Math.floor(a)),T+=(_-T-a*(y-d))*p,s=a*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=Pme(y).map(function(N){return T+a*N});return r(b?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,i]=y,n=+n,i=+i,m()):[n,i]},t.rangeRound=function(y){return[n,i]=y,n=+n,i=+i,c=!0,m()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(y){return arguments.length?(c=!!y,m()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return ng(e(),[n,i]).round(c).paddingInner(d).paddingOuter(h).align(p)},Us.apply(m(),arguments)}function lK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return lK(e())},t}function gm(){return lK(ng.apply(null,arguments).paddingInner(1))}function yN(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function cK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function c1(){}var ig=.7,Fb=1/ig,xh="\\s*([+-]?\\d+)\\s*",ag="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dme=/^#([0-9a-f]{3,8})$/,Lme=new RegExp(`^rgb\\(${xh},${xh},${xh}\\)$`),Bme=new RegExp(`^rgb\\(${Oo},${Oo},${Oo}\\)$`),Ume=new RegExp(`^rgba\\(${xh},${xh},${xh},${ag}\\)$`),zme=new RegExp(`^rgba\\(${Oo},${Oo},${Oo},${ag}\\)$`),$me=new RegExp(`^hsl\\(${ag},${Oo},${Oo}\\)$`),Vme=new RegExp(`^hsla\\(${ag},${Oo},${Oo},${ag}\\)$`),ML={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yN(c1,sg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:PL,formatHex:PL,formatHex8:Fme,formatHsl:qme,formatRgb:DL,toString:DL});function PL(){return this.rgb().formatHex()}function Fme(){return this.rgb().formatHex8()}function qme(){return uK(this).formatHsl()}function DL(){return this.rgb().formatRgb()}function sg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Dme.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?LL(e):r===3?new za(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?mv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?mv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Lme.exec(t))?new za(e[1],e[2],e[3],1):(e=Bme.exec(t))?new za(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ume.exec(t))?mv(e[1],e[2],e[3],e[4]):(e=zme.exec(t))?mv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$me.exec(t))?zL(e[1],e[2]/100,e[3]/100,1):(e=Vme.exec(t))?zL(e[1],e[2]/100,e[3]/100,e[4]):ML.hasOwnProperty(t)?LL(ML[t]):t==="transparent"?new za(NaN,NaN,NaN,0):null}function LL(t){return new za(t>>16&255,t>>8&255,t&255,1)}function mv(t,e,r,n){return n<=0&&(t=e=r=NaN),new za(t,e,r,n)}function Hme(t){return t instanceof c1||(t=sg(t)),t?(t=t.rgb(),new za(t.r,t.g,t.b,t.opacity)):new za}function GA(t,e,r,n){return arguments.length===1?Hme(t):new za(t,e,r,n??1)}function za(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}yN(za,GA,cK(c1,{brighter(t){return t=t==null?Fb:Math.pow(Fb,t),new za(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ig:Math.pow(ig,t),new za(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new za(Od(this.r),Od(this.g),Od(this.b),qb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BL,formatHex:BL,formatHex8:Gme,formatRgb:UL,toString:UL}));function BL(){return`#${xd(this.r)}${xd(this.g)}${xd(this.b)}`}function Gme(){return`#${xd(this.r)}${xd(this.g)}${xd(this.b)}${xd((isNaN(this.opacity)?1:this.opacity)*255)}`}function UL(){const t=qb(this.opacity);return`${t===1?"rgb(":"rgba("}${Od(this.r)}, ${Od(this.g)}, ${Od(this.b)}${t===1?")":`, ${t})`}`}function qb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Od(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xd(t){return t=Od(t),(t<16?"0":"")+t.toString(16)}function zL(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new eo(t,e,r,n)}function uK(t){if(t instanceof eo)return new eo(t.h,t.s,t.l,t.opacity);if(t instanceof c1||(t=sg(t)),!t)return new eo;if(t instanceof eo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,c=a-i,d=(a+i)/2;return c?(e===a?s=(r-n)/c+(r<n)*6:r===a?s=(n-e)/c+2:s=(e-r)/c+4,c/=d<.5?a+i:2-a-i,s*=60):c=d>0&&d<1?0:s,new eo(s,c,d,t.opacity)}function Kme(t,e,r,n){return arguments.length===1?uK(t):new eo(t,e,r,n??1)}function eo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}yN(eo,Kme,cK(c1,{brighter(t){return t=t==null?Fb:Math.pow(Fb,t),new eo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ig:Math.pow(ig,t),new eo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new za(fS(t>=240?t-240:t+120,i,n),fS(t,i,n),fS(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new eo($L(this.h),gv(this.s),gv(this.l),qb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qb(this.opacity);return`${t===1?"hsl(":"hsla("}${$L(this.h)}, ${gv(this.s)*100}%, ${gv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $L(t){return t=(t||0)%360,t<0?t+360:t}function gv(t){return Math.max(0,Math.min(1,t||0))}function fS(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const vN=t=>()=>t;function Wme(t,e){return function(r){return t+r*e}}function Xme(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Qme(t){return(t=+t)==1?dK:function(e,r){return r-e?Xme(e,r,t):vN(isNaN(e)?r:e)}}function dK(t,e){var r=e-t;return r?Wme(t,r):vN(isNaN(t)?e:t)}const VL=(function t(e){var r=Qme(e);function n(i,a){var s=r((i=GA(i)).r,(a=GA(a)).r),c=r(i.g,a.g),d=r(i.b,a.b),h=dK(i.opacity,a.opacity);return function(p){return i.r=s(p),i.g=c(p),i.b=d(p),i.opacity=h(p),i+""}}return n.gamma=t,n})(1);function Yme(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Zme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Jme(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Cf(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(c){for(s=0;s<n;++s)a[s]=i[s](c);return a}}function ege(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Hb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function tge(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=Cf(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var KA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pS=new RegExp(KA.source,"g");function rge(t){return function(){return t}}function nge(t){return function(e){return t(e)+""}}function ige(t,e){var r=KA.lastIndex=pS.lastIndex=0,n,i,a,s=-1,c=[],d=[];for(t=t+"",e=e+"";(n=KA.exec(t))&&(i=pS.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),c[s]?c[s]+=a:c[++s]=a),(n=n[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,d.push({i:s,x:Hb(n,i)})),r=pS.lastIndex;return r<e.length&&(a=e.slice(r),c[s]?c[s]+=a:c[++s]=a),c.length<2?d[0]?nge(d[0].x):rge(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Cf(t,e){var r=typeof e,n;return e==null||r==="boolean"?vN(e):(r==="number"?Hb:r==="string"?(n=sg(e))?(e=n,VL):ige:e instanceof sg?VL:e instanceof Date?ege:Zme(e)?Yme:Array.isArray(e)?Jme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?tge:Hb)(t,e)}function bN(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function age(t,e){e===void 0&&(e=t,t=Cf);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[c](s-c)}}function sge(t){return function(){return t}}function Gb(t){return+t}var FL=[0,1];function ya(t){return t}function WA(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:sge(isNaN(e)?NaN:.5)}function oge(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function lge(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=WA(i,n),a=r(s,a)):(n=WA(n,i),a=r(a,s)),function(c){return a(n(c))}}function cge(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=WA(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(c){var d=l1(t,c,1,n)-1;return a[d](i[d](c))}}function u1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function D2(){var t=FL,e=FL,r=Cf,n,i,a,s=ya,c,d,h;function p(){var y=Math.min(t.length,e.length);return s!==ya&&(s=oge(t[0],t[y-1])),c=y>2?cge:lge,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?a:(d||(d=c(t.map(n),e,r)))(n(s(y)))}return m.invert=function(y){return s(i((h||(h=c(e,t.map(n),Hb)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,Gb),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=bN,p()},m.clamp=function(y){return arguments.length?(s=y?!0:ya,p()):s!==ya},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(a=y,m):a},function(y,b){return n=y,i=b,p()}}function xN(){return D2()(ya,ya)}function uge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Kb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Wh(t){return t=Kb(Math.abs(t)),t?t[1]:NaN}function dge(t,e){return function(r,n){for(var i=r.length,a=[],s=0,c=t[0],d=0;i>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),a.push(r.substring(i-=c,i+c)),!((d+=c+1)>n));)c=t[s=(s+1)%t.length];return a.reverse().join(e)}}function hge(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var fge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function og(t){if(!(e=fge.exec(t)))throw new Error("invalid format: "+t);var e;return new wN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}og.prototype=wN.prototype;function wN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pge(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var Wb;function mge(t,e){var r=Kb(t,e);if(!r)return Wb=void 0,t.toPrecision(e);var n=r[0],i=r[1],a=i-(Wb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Kb(t,Math.max(0,e+a-1))[0]}function qL(t,e){var r=Kb(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const HL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qL(t*100,e),r:qL,s:mge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function GL(t){return t}var KL=Array.prototype.map,WL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gge(t){var e=t.grouping===void 0||t.thousands===void 0?GL:dge(KL.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?GL:hge(KL.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=og(m);var b=m.fill,T=m.align,_=m.sign,w=m.symbol,N=m.zero,k=m.width,C=m.comma,$=m.precision,I=m.trim,L=m.type;L==="n"?(C=!0,L="g"):HL[L]||($===void 0&&($=12),I=!0,L="g"),(N||b==="0"&&T==="=")&&(N=!0,b="0",T="=");var E=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():""),A=(w==="$"?n:/[%p]/.test(L)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),R=HL[L],F=/[defgprs%]/.test(L);$=$===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function P(B){var D=E,Y=A,J,X,ee;if(L==="c")Y=R(B)+Y,B="";else{B=+B;var Z=B<0||1/B<0;if(B=isNaN(B)?d:R(Math.abs(B),$),I&&(B=pge(B)),Z&&+B==0&&_!=="+"&&(Z=!1),D=(Z?_==="("?_:c:_==="-"||_==="("?"":_)+D,Y=(L==="s"&&!isNaN(B)&&Wb!==void 0?WL[8+Wb/3]:"")+Y+(Z&&_==="("?")":""),F){for(J=-1,X=B.length;++J<X;)if(ee=B.charCodeAt(J),48>ee||ee>57){Y=(ee===46?i+B.slice(J+1):B.slice(J))+Y,B=B.slice(0,J);break}}}C&&!N&&(B=e(B,1/0));var ge=D.length+B.length+Y.length,ce=ge<k?new Array(k-ge+1).join(b):"";switch(C&&N&&(B=e(ce+B,ce.length?k-Y.length:1/0),ce=""),T){case"<":B=D+B+Y+ce;break;case"=":B=D+ce+B+Y;break;case"^":B=ce.slice(0,ge=ce.length>>1)+D+B+Y+ce.slice(ge);break;default:B=ce+D+B+Y;break}return a(B)}return P.toString=function(){return m+""},P}function p(m,y){var b=Math.max(-8,Math.min(8,Math.floor(Wh(y)/3)))*3,T=Math.pow(10,-b),_=h((m=og(m),m.type="f",m),{suffix:WL[8+b/3]});return function(w){return _(T*w)}}return{format:h,formatPrefix:p}}var yv,_N,hK;yge({thousands:",",grouping:[3],currency:["$",""]});function yge(t){return yv=gge(t),_N=yv.format,hK=yv.formatPrefix,yv}function vge(t){return Math.max(0,-Wh(Math.abs(t)))}function bge(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wh(e)/3)))*3-Wh(Math.abs(t)))}function xge(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Wh(e)-Wh(t))+1}function fK(t,e,r,n){var i=qA(t,e,r),a;switch(n=og(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=bge(i,s))&&(n.precision=a),hK(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=xge(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=vge(i))&&(n.precision=a-(n.type==="%")*2);break}}return _N(n)}function Eu(t){var e=t.domain;return t.ticks=function(r){var n=e();return VA(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return fK(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],c=n[a],d,h,p=10;for(c<s&&(h=s,s=c,c=h,h=i,i=a,a=h);p-- >0;){if(h=FA(s,c,r),h===d)return n[i]=s,n[a]=c,e(n);if(h>0)s=Math.floor(s/h)*h,c=Math.ceil(c/h)*h;else if(h<0)s=Math.ceil(s*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function Xb(){var t=xN();return t.copy=function(){return u1(t,Xb())},Us.apply(t,arguments),Eu(t)}function pK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Gb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return pK(t).unknown(e)},t=arguments.length?Array.from(t,Gb):[0,1],Eu(r)}function mK(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function XL(t){return Math.log(t)}function QL(t){return Math.exp(t)}function wge(t){return-Math.log(-t)}function _ge(t){return-Math.exp(-t)}function Sge(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Tge(t){return t===10?Sge:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Age(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function YL(t){return(e,r)=>-t(-e,r)}function SN(t){const e=t(XL,QL),r=e.domain;let n=10,i,a;function s(){return i=Age(n),a=Tge(n),r()[0]<0?(i=YL(i),a=YL(a),t(wge,_ge)):t(XL,QL),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=i(h),b=i(p),T,_;const w=c==null?10:+c;let N=[];if(!(n%1)&&b-y<w){if(y=Math.floor(y),b=Math.ceil(b),h>0){for(;y<=b;++y)for(T=1;T<n;++T)if(_=y<0?T/a(-y):T*a(y),!(_<h)){if(_>p)break;N.push(_)}}else for(;y<=b;++y)for(T=n-1;T>=1;--T)if(_=y>0?T/a(-y):T*a(y),!(_<h)){if(_>p)break;N.push(_)}N.length*2<w&&(N=VA(h,p,w))}else N=VA(y,b,Math.min(b-y,w)).map(a);return m?N.reverse():N},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=og(d)).precision==null&&(d.trim=!0),d=_N(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/a(Math.round(i(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(mK(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function gK(){const t=SN(D2()).domain([1,10]);return t.copy=()=>u1(t,gK()).base(t.base()),Us.apply(t,arguments),t}function ZL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function TN(t){var e=1,r=t(ZL(e),JL(e));return r.constant=function(n){return arguments.length?t(ZL(e=+n),JL(e)):e},Eu(r)}function yK(){var t=TN(D2());return t.copy=function(){return u1(t,yK()).constant(t.constant())},Us.apply(t,arguments)}function eB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ege(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Nge(t){return t<0?-t*t:t*t}function AN(t){var e=t(ya,ya),r=1;function n(){return r===1?t(ya,ya):r===.5?t(Ege,Nge):t(eB(r),eB(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Eu(e)}function EN(){var t=AN(D2());return t.copy=function(){return u1(t,EN()).exponent(t.exponent())},Us.apply(t,arguments),t}function jge(){return EN.apply(null,arguments).exponent(.5)}function tB(t){return Math.sign(t)*t*t}function Cge(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function vK(){var t=xN(),e=[0,1],r=!1,n;function i(a){var s=Cge(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(tB(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Gb)).map(tB)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Us.apply(i,arguments),Eu(i)}function bK(){var t=[],e=[],r=[],n;function i(){var s=0,c=Math.max(1,e.length);for(r=new Array(c-1);++s<c;)r[s-1]=Mme(t,s/c);return a}function a(s){return s==null||isNaN(s=+s)?n:e[l1(r,s)]}return a.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(lu),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return bK().domain(t).range(e).unknown(n)},Us.apply(a,arguments)}function xK(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(d){return d!=null&&d<=d?i[l1(n,d,0,r)]:a}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},s.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,c()):i.slice()},s.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},s.unknown=function(d){return arguments.length&&(a=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return xK().domain([t,e]).range(i).unknown(a)},Us.apply(Eu(s),arguments)}function wK(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[l1(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return wK().domain(t).range(e).unknown(r)},Us.apply(i,arguments)}const mS=new Date,gS=new Date;function Ai(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),c=i.ceil(a);return a-s<c-a?s:c},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,c)=>{const d=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<s)||!(c>0))return d;let h;do d.push(h=new Date(+a)),e(a,c),t(a);while(h<a&&a<s);return d},i.filter=a=>Ai(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!a(s););else for(;--c>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(mS.setTime(+a),gS.setTime(+s),t(mS),t(gS),Math.floor(r(mS,gS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Qb=Ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Qb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Qb);Qb.range;const jl=1e3,Cs=jl*60,Cl=Cs*60,Gl=Cl*24,NN=Gl*7,rB=Gl*30,yS=Gl*365,wd=Ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*jl)},(t,e)=>(e-t)/jl,t=>t.getUTCSeconds());wd.range;const jN=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jl)},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getMinutes());jN.range;const CN=Ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cs)},(t,e)=>(e-t)/Cs,t=>t.getUTCMinutes());CN.range;const kN=Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jl-t.getMinutes()*Cs)},(t,e)=>{t.setTime(+t+e*Cl)},(t,e)=>(e-t)/Cl,t=>t.getHours());kN.range;const ON=Ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Cl)},(t,e)=>(e-t)/Cl,t=>t.getUTCHours());ON.range;const d1=Ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cs)/Gl,t=>t.getDate()-1);d1.range;const L2=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Gl,t=>t.getUTCDate()-1);L2.range;const _K=Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Gl,t=>Math.floor(t/Gl));_K.range;function s0(t){return Ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Cs)/NN)}const B2=s0(0),Yb=s0(1),kge=s0(2),Oge=s0(3),Xh=s0(4),Ige=s0(5),Rge=s0(6);B2.range;Yb.range;kge.range;Oge.range;Xh.range;Ige.range;Rge.range;function o0(t){return Ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/NN)}const U2=o0(0),Zb=o0(1),Mge=o0(2),Pge=o0(3),Qh=o0(4),Dge=o0(5),Lge=o0(6);U2.range;Zb.range;Mge.range;Pge.range;Qh.range;Dge.range;Lge.range;const IN=Ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());IN.range;const RN=Ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());RN.range;const Kl=Ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Kl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Kl.range;const Wl=Ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Wl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Wl.range;function SK(t,e,r,n,i,a){const s=[[wd,1,jl],[wd,5,5*jl],[wd,15,15*jl],[wd,30,30*jl],[a,1,Cs],[a,5,5*Cs],[a,15,15*Cs],[a,30,30*Cs],[i,1,Cl],[i,3,3*Cl],[i,6,6*Cl],[i,12,12*Cl],[n,1,Gl],[n,2,2*Gl],[r,1,NN],[e,1,rB],[e,3,3*rB],[t,1,yS]];function c(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const b=m&&typeof m.range=="function"?m:d(h,p,m),T=b?b.range(h,+p+1):[];return y?T.reverse():T}function d(h,p,m){const y=Math.abs(p-h)/m,b=mN(([,,w])=>w).right(s,y);if(b===s.length)return t.every(qA(h/yS,p/yS,m));if(b===0)return Qb.every(Math.max(qA(h,p,m),1));const[T,_]=s[y/s[b-1][2]<s[b][2]/y?b-1:b];return T.every(_)}return[c,d]}const[Bge,Uge]=SK(Wl,RN,U2,_K,ON,CN),[zge,$ge]=SK(Kl,IN,B2,d1,kN,jN);function vS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Up(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Vge(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,c=t.months,d=t.shortMonths,h=zp(i),p=$p(i),m=zp(a),y=$p(a),b=zp(s),T=$p(s),_=zp(c),w=$p(c),N=zp(d),k=$p(d),C={a:ee,A:Z,b:ge,B:ce,c:null,d:lB,e:lB,f:d1e,g:w1e,G:S1e,H:l1e,I:c1e,j:u1e,L:TK,m:h1e,M:f1e,p:Q,q:re,Q:dB,s:hB,S:p1e,u:m1e,U:g1e,V:y1e,w:v1e,W:b1e,x:null,X:null,y:x1e,Y:_1e,Z:T1e,"%":uB},$={a:de,A:oe,b:ae,B:pe,c:null,d:cB,e:cB,f:j1e,g:B1e,G:z1e,H:A1e,I:E1e,j:N1e,L:EK,m:C1e,M:k1e,p:ve,q:Ye,Q:dB,s:hB,S:O1e,u:I1e,U:R1e,V:M1e,w:P1e,W:D1e,x:null,X:null,y:L1e,Y:U1e,Z:$1e,"%":uB},I={a:F,A:P,b:B,B:D,c:Y,d:sB,e:sB,f:i1e,g:aB,G:iB,H:oB,I:oB,j:e1e,L:n1e,m:Jge,M:t1e,p:R,q:Zge,Q:s1e,s:o1e,S:r1e,u:Kge,U:Wge,V:Xge,w:Gge,W:Qge,x:J,X,y:aB,Y:iB,Z:Yge,"%":a1e};C.x=L(r,C),C.X=L(n,C),C.c=L(e,C),$.x=L(r,$),$.X=L(n,$),$.c=L(e,$);function L(Ne,le){return function(we){var xe=[],dt=-1,Ke=0,ut=Ne.length,it,jt,Ie;for(we instanceof Date||(we=new Date(+we));++dt<ut;)Ne.charCodeAt(dt)===37&&(xe.push(Ne.slice(Ke,dt)),(jt=nB[it=Ne.charAt(++dt)])!=null?it=Ne.charAt(++dt):jt=it==="e"?" ":"0",(Ie=le[it])&&(it=Ie(we,jt)),xe.push(it),Ke=dt+1);return xe.push(Ne.slice(Ke,dt)),xe.join("")}}function E(Ne,le){return function(we){var xe=Up(1900,void 0,1),dt=A(xe,Ne,we+="",0),Ke,ut;if(dt!=we.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(le&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(Ke=bS(Up(xe.y,0,1)),ut=Ke.getUTCDay(),Ke=ut>4||ut===0?Zb.ceil(Ke):Zb(Ke),Ke=L2.offset(Ke,(xe.V-1)*7),xe.y=Ke.getUTCFullYear(),xe.m=Ke.getUTCMonth(),xe.d=Ke.getUTCDate()+(xe.w+6)%7):(Ke=vS(Up(xe.y,0,1)),ut=Ke.getDay(),Ke=ut>4||ut===0?Yb.ceil(Ke):Yb(Ke),Ke=d1.offset(Ke,(xe.V-1)*7),xe.y=Ke.getFullYear(),xe.m=Ke.getMonth(),xe.d=Ke.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),ut="Z"in xe?bS(Up(xe.y,0,1)).getUTCDay():vS(Up(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(ut+5)%7:xe.w+xe.U*7-(ut+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,bS(xe)):vS(xe)}}function A(Ne,le,we,xe){for(var dt=0,Ke=le.length,ut=we.length,it,jt;dt<Ke;){if(xe>=ut)return-1;if(it=le.charCodeAt(dt++),it===37){if(it=le.charAt(dt++),jt=I[it in nB?le.charAt(dt++):it],!jt||(xe=jt(Ne,we,xe))<0)return-1}else if(it!=we.charCodeAt(xe++))return-1}return xe}function R(Ne,le,we){var xe=h.exec(le.slice(we));return xe?(Ne.p=p.get(xe[0].toLowerCase()),we+xe[0].length):-1}function F(Ne,le,we){var xe=b.exec(le.slice(we));return xe?(Ne.w=T.get(xe[0].toLowerCase()),we+xe[0].length):-1}function P(Ne,le,we){var xe=m.exec(le.slice(we));return xe?(Ne.w=y.get(xe[0].toLowerCase()),we+xe[0].length):-1}function B(Ne,le,we){var xe=N.exec(le.slice(we));return xe?(Ne.m=k.get(xe[0].toLowerCase()),we+xe[0].length):-1}function D(Ne,le,we){var xe=_.exec(le.slice(we));return xe?(Ne.m=w.get(xe[0].toLowerCase()),we+xe[0].length):-1}function Y(Ne,le,we){return A(Ne,e,le,we)}function J(Ne,le,we){return A(Ne,r,le,we)}function X(Ne,le,we){return A(Ne,n,le,we)}function ee(Ne){return s[Ne.getDay()]}function Z(Ne){return a[Ne.getDay()]}function ge(Ne){return d[Ne.getMonth()]}function ce(Ne){return c[Ne.getMonth()]}function Q(Ne){return i[+(Ne.getHours()>=12)]}function re(Ne){return 1+~~(Ne.getMonth()/3)}function de(Ne){return s[Ne.getUTCDay()]}function oe(Ne){return a[Ne.getUTCDay()]}function ae(Ne){return d[Ne.getUTCMonth()]}function pe(Ne){return c[Ne.getUTCMonth()]}function ve(Ne){return i[+(Ne.getUTCHours()>=12)]}function Ye(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var le=L(Ne+="",C);return le.toString=function(){return Ne},le},parse:function(Ne){var le=E(Ne+="",!1);return le.toString=function(){return Ne},le},utcFormat:function(Ne){var le=L(Ne+="",$);return le.toString=function(){return Ne},le},utcParse:function(Ne){var le=E(Ne+="",!0);return le.toString=function(){return Ne},le}}}var nB={"-":"",_:" ",0:"0"},Di=/^\s*\d+/,Fge=/^%/,qge=/[\\^$*+?|[\]().{}]/g;function Or(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function Hge(t){return t.replace(qge,"\\$&")}function zp(t){return new RegExp("^(?:"+t.map(Hge).join("|")+")","i")}function $p(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Gge(t,e,r){var n=Di.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Kge(t,e,r){var n=Di.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Wge(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Xge(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Qge(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function iB(t,e,r){var n=Di.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function aB(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Yge(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Zge(t,e,r){var n=Di.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Jge(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function sB(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function e1e(t,e,r){var n=Di.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function oB(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function t1e(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function r1e(t,e,r){var n=Di.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function n1e(t,e,r){var n=Di.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function i1e(t,e,r){var n=Di.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function a1e(t,e,r){var n=Fge.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function s1e(t,e,r){var n=Di.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function o1e(t,e,r){var n=Di.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function lB(t,e){return Or(t.getDate(),e,2)}function l1e(t,e){return Or(t.getHours(),e,2)}function c1e(t,e){return Or(t.getHours()%12||12,e,2)}function u1e(t,e){return Or(1+d1.count(Kl(t),t),e,3)}function TK(t,e){return Or(t.getMilliseconds(),e,3)}function d1e(t,e){return TK(t,e)+"000"}function h1e(t,e){return Or(t.getMonth()+1,e,2)}function f1e(t,e){return Or(t.getMinutes(),e,2)}function p1e(t,e){return Or(t.getSeconds(),e,2)}function m1e(t){var e=t.getDay();return e===0?7:e}function g1e(t,e){return Or(B2.count(Kl(t)-1,t),e,2)}function AK(t){var e=t.getDay();return e>=4||e===0?Xh(t):Xh.ceil(t)}function y1e(t,e){return t=AK(t),Or(Xh.count(Kl(t),t)+(Kl(t).getDay()===4),e,2)}function v1e(t){return t.getDay()}function b1e(t,e){return Or(Yb.count(Kl(t)-1,t),e,2)}function x1e(t,e){return Or(t.getFullYear()%100,e,2)}function w1e(t,e){return t=AK(t),Or(t.getFullYear()%100,e,2)}function _1e(t,e){return Or(t.getFullYear()%1e4,e,4)}function S1e(t,e){var r=t.getDay();return t=r>=4||r===0?Xh(t):Xh.ceil(t),Or(t.getFullYear()%1e4,e,4)}function T1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Or(e/60|0,"0",2)+Or(e%60,"0",2)}function cB(t,e){return Or(t.getUTCDate(),e,2)}function A1e(t,e){return Or(t.getUTCHours(),e,2)}function E1e(t,e){return Or(t.getUTCHours()%12||12,e,2)}function N1e(t,e){return Or(1+L2.count(Wl(t),t),e,3)}function EK(t,e){return Or(t.getUTCMilliseconds(),e,3)}function j1e(t,e){return EK(t,e)+"000"}function C1e(t,e){return Or(t.getUTCMonth()+1,e,2)}function k1e(t,e){return Or(t.getUTCMinutes(),e,2)}function O1e(t,e){return Or(t.getUTCSeconds(),e,2)}function I1e(t){var e=t.getUTCDay();return e===0?7:e}function R1e(t,e){return Or(U2.count(Wl(t)-1,t),e,2)}function NK(t){var e=t.getUTCDay();return e>=4||e===0?Qh(t):Qh.ceil(t)}function M1e(t,e){return t=NK(t),Or(Qh.count(Wl(t),t)+(Wl(t).getUTCDay()===4),e,2)}function P1e(t){return t.getUTCDay()}function D1e(t,e){return Or(Zb.count(Wl(t)-1,t),e,2)}function L1e(t,e){return Or(t.getUTCFullYear()%100,e,2)}function B1e(t,e){return t=NK(t),Or(t.getUTCFullYear()%100,e,2)}function U1e(t,e){return Or(t.getUTCFullYear()%1e4,e,4)}function z1e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Qh(t):Qh.ceil(t),Or(t.getUTCFullYear()%1e4,e,4)}function $1e(){return"+0000"}function uB(){return"%"}function dB(t){return+t}function hB(t){return Math.floor(+t/1e3)}var Z0,jK,CK;V1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function V1e(t){return Z0=Vge(t),jK=Z0.format,Z0.parse,CK=Z0.utcFormat,Z0.utcParse,Z0}function F1e(t){return new Date(t)}function q1e(t){return t instanceof Date?+t:+new Date(+t)}function MN(t,e,r,n,i,a,s,c,d,h){var p=xN(),m=p.invert,y=p.domain,b=h(".%L"),T=h(":%S"),_=h("%I:%M"),w=h("%I %p"),N=h("%a %d"),k=h("%b %d"),C=h("%B"),$=h("%Y");function I(L){return(d(L)<L?b:c(L)<L?T:s(L)<L?_:a(L)<L?w:n(L)<L?i(L)<L?N:k:r(L)<L?C:$)(L)}return p.invert=function(L){return new Date(m(L))},p.domain=function(L){return arguments.length?y(Array.from(L,q1e)):y().map(F1e)},p.ticks=function(L){var E=y();return t(E[0],E[E.length-1],L??10)},p.tickFormat=function(L,E){return E==null?I:h(E)},p.nice=function(L){var E=y();return(!L||typeof L.range!="function")&&(L=e(E[0],E[E.length-1],L??10)),L?y(mK(E,L)):p},p.copy=function(){return u1(p,MN(t,e,r,n,i,a,s,c,d,h))},p}function H1e(){return Us.apply(MN(zge,$ge,Kl,IN,B2,d1,kN,jN,wd,jK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function G1e(){return Us.apply(MN(Bge,Uge,Wl,RN,U2,L2,ON,CN,wd,CK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function z2(){var t=0,e=1,r,n,i,a,s=ya,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:s(i===0?.5:(m=(a(m)-r)*i,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(s=m,h):s};function p(m){return function(y){var b,T;return arguments.length?([b,T]=y,s=m(b,T),h):[s(0),s(1)]}}return h.range=p(Cf),h.rangeRound=p(bN),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return a=m,r=m(t),n=m(e),i=r===n?0:1/(n-r),h}}function Nu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kK(){var t=Eu(z2()(ya));return t.copy=function(){return Nu(t,kK())},rc.apply(t,arguments)}function OK(){var t=SN(z2()).domain([1,10]);return t.copy=function(){return Nu(t,OK()).base(t.base())},rc.apply(t,arguments)}function IK(){var t=TN(z2());return t.copy=function(){return Nu(t,IK()).constant(t.constant())},rc.apply(t,arguments)}function PN(){var t=AN(z2());return t.copy=function(){return Nu(t,PN()).exponent(t.exponent())},rc.apply(t,arguments)}function K1e(){return PN.apply(null,arguments).exponent(.5)}function RK(){var t=[],e=ya;function r(n){if(n!=null&&!isNaN(n=+n))return e((l1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(lu),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Rme(t,a/n))},r.copy=function(){return RK(e).domain(t)},rc.apply(r,arguments)}function $2(){var t=0,e=.5,r=1,n=1,i,a,s,c,d,h=ya,p,m=!1,y;function b(_){return isNaN(_=+_)?y:(_=.5+((_=+p(_))-a)*(n*_<n*a?c:d),h(m?Math.max(0,Math.min(1,_)):_))}b.domain=function(_){return arguments.length?([t,e,r]=_,i=p(t=+t),a=p(e=+e),s=p(r=+r),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b):[t,e,r]},b.clamp=function(_){return arguments.length?(m=!!_,b):m},b.interpolator=function(_){return arguments.length?(h=_,b):h};function T(_){return function(w){var N,k,C;return arguments.length?([N,k,C]=w,h=age(_,[N,k,C]),b):[h(0),h(.5),h(1)]}}return b.range=T(Cf),b.rangeRound=T(bN),b.unknown=function(_){return arguments.length?(y=_,b):y},function(_){return p=_,i=_(t),a=_(e),s=_(r),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b}}function MK(){var t=Eu($2()(ya));return t.copy=function(){return Nu(t,MK())},rc.apply(t,arguments)}function PK(){var t=SN($2()).domain([.1,1,10]);return t.copy=function(){return Nu(t,PK()).base(t.base())},rc.apply(t,arguments)}function DK(){var t=TN($2());return t.copy=function(){return Nu(t,DK()).constant(t.constant())},rc.apply(t,arguments)}function DN(){var t=AN($2());return t.copy=function(){return Nu(t,DN()).exponent(t.exponent())},rc.apply(t,arguments)}function W1e(){return DN.apply(null,arguments).exponent(.5)}const fB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ng,scaleDiverging:MK,scaleDivergingLog:PK,scaleDivergingPow:DN,scaleDivergingSqrt:W1e,scaleDivergingSymlog:DK,scaleIdentity:pK,scaleImplicit:HA,scaleLinear:Xb,scaleLog:gK,scaleOrdinal:gN,scalePoint:gm,scalePow:EN,scaleQuantile:bK,scaleQuantize:xK,scaleRadial:vK,scaleSequential:kK,scaleSequentialLog:OK,scaleSequentialPow:PN,scaleSequentialQuantile:RK,scaleSequentialSqrt:K1e,scaleSequentialSymlog:IK,scaleSqrt:jge,scaleSymlog:yK,scaleThreshold:wK,scaleTime:H1e,scaleUtc:G1e,tickFormat:fK},Symbol.toStringTag,{value:"Module"}));var xS,pB;function V2(){if(pB)return xS;pB=1;var t=Ef();function e(r,n,i){for(var a=-1,s=r.length;++a<s;){var c=r[a],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):i(d,h)))var h=d,p=c}return p}return xS=e,xS}var wS,mB;function LK(){if(mB)return wS;mB=1;function t(e,r){return e>r}return wS=t,wS}var _S,gB;function X1e(){if(gB)return _S;gB=1;var t=V2(),e=LK(),r=jf();function n(i){return i&&i.length?t(i,r,e):void 0}return _S=n,_S}var Q1e=X1e();const F2=Dr(Q1e);var SS,yB;function BK(){if(yB)return SS;yB=1;function t(e,r){return e<r}return SS=t,SS}var TS,vB;function Y1e(){if(vB)return TS;vB=1;var t=V2(),e=BK(),r=jf();function n(i){return i&&i.length?t(i,r,e):void 0}return TS=n,TS}var Z1e=Y1e();const q2=Dr(Z1e);var AS,bB;function J1e(){if(bB)return AS;bB=1;var t=ZE(),e=qo(),r=GG(),n=qa();function i(a,s){var c=n(a)?t:r;return c(a,e(s,3))}return AS=i,AS}var ES,xB;function eye(){if(xB)return ES;xB=1;var t=qG(),e=J1e();function r(n,i){return t(e(n,i),1)}return ES=r,ES}var tye=eye();const rye=Dr(tye);var NS,wB;function nye(){if(wB)return NS;wB=1;var t=uN();function e(r,n){return t(r,n)}return NS=e,NS}var iye=nye();const h1=Dr(iye);var kf=1e9,aye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},BN,Cn=!0,Bs="[DecimalError] ",Id=Bs+"Invalid argument: ",LN=Bs+"Exponent out of range: ",Of=Math.floor,hd=Math.pow,sye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,is,Oi=1e7,An=7,UK=9007199254740991,Jb=Of(UK/An),St={};St.absoluteValue=St.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};St.comparedTo=St.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};St.decimalPlaces=St.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*An;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};St.dividedBy=St.div=function(t){return Dl(this,new this.constructor(t))};St.dividedToIntegerBy=St.idiv=function(t){var e=this,r=e.constructor;return un(Dl(e,new r(t),0,1),r.precision)};St.equals=St.eq=function(t){return!this.cmp(t)};St.exponent=function(){return di(this)};St.greaterThan=St.gt=function(t){return this.cmp(t)>0};St.greaterThanOrEqualTo=St.gte=function(t){return this.cmp(t)>=0};St.isInteger=St.isint=function(){return this.e>this.d.length-2};St.isNegative=St.isneg=function(){return this.s<0};St.isPositive=St.ispos=function(){return this.s>0};St.isZero=function(){return this.s===0};St.lessThan=St.lt=function(t){return this.cmp(t)<0};St.lessThanOrEqualTo=St.lte=function(t){return this.cmp(t)<1};St.logarithm=St.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(is))throw Error(Bs+"NaN");if(r.s<1)throw Error(Bs+(r.s?"NaN":"-Infinity"));return r.eq(is)?new n(0):(Cn=!1,e=Dl(lg(r,a),lg(t,a),a),Cn=!0,un(e,i))};St.minus=St.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?VK(e,t):zK(e,(t.s=-t.s,t))};St.modulo=St.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Bs+"NaN");return r.s?(Cn=!1,e=Dl(r,t,0,1).times(t),Cn=!0,r.minus(e)):un(new n(r),i)};St.naturalExponential=St.exp=function(){return $K(this)};St.naturalLogarithm=St.ln=function(){return lg(this)};St.negated=St.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};St.plus=St.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?zK(e,t):VK(e,(t.s=-t.s,t))};St.precision=St.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Id+t);if(e=di(i)+1,n=i.d.length-1,r=n*An+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};St.squareRoot=St.sqrt=function(){var t,e,r,n,i,a,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(Bs+"NaN")}for(t=di(c),Cn=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=jo(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Of((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(i.toString()),r=d.precision,i=s=r+3;;)if(a=n,n=a.plus(Dl(c,a,s+2)).times(.5),jo(a.d).slice(0,s)===(e=jo(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(un(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if(e!="9999")break;s+=4}return Cn=!0,un(n,r)};St.times=St.mul=function(t){var e,r,n,i,a,s,c,d,h,p=this,m=p.constructor,y=p.d,b=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=b.length,d<h&&(a=y,y=b,b=a,s=d,d=h,h=s),a=[],s=d+h,n=s;n--;)a.push(0);for(n=h;--n>=0;){for(e=0,i=d+n;i>n;)c=a[i]+b[n]*y[i-n-1]+e,a[i--]=c%Oi|0,e=c/Oi|0;a[i]=(a[i]+e)%Oi|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,Cn?un(t,m.precision):t};St.toDecimalPlaces=St.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Lo(t,0,kf),e===void 0?e=n.rounding:Lo(e,0,8),un(r,t+di(r)+1,e))};St.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Kd(n,!0):(Lo(t,0,kf),e===void 0?e=i.rounding:Lo(e,0,8),n=un(new i(n),t+1,e),r=Kd(n,!0,t+1)),r};St.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?Kd(i):(Lo(t,0,kf),e===void 0?e=a.rounding:Lo(e,0,8),n=un(new a(i),t+di(i)+1,e),r=Kd(n.abs(),!1,t+di(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};St.toInteger=St.toint=function(){var t=this,e=t.constructor;return un(new e(t),di(t)+1,e.rounding)};St.toNumber=function(){return+this};St.toPower=St.pow=function(t){var e,r,n,i,a,s,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(is);if(c=new d(c),!c.s){if(t.s<1)throw Error(Bs+"Infinity");return c}if(c.eq(is))return c;if(n=d.precision,t.eq(is))return un(c,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=c.s,s){if((r=p<0?-p:p)<=UK){for(i=new d(is),e=Math.ceil(n/An+4),Cn=!1;r%2&&(i=i.times(c),SB(i.d,e)),r=Of(r/2),r!==0;)c=c.times(c),SB(c.d,e);return Cn=!0,t.s<0?new d(is).div(i):un(i,n)}}else if(a<0)throw Error(Bs+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Cn=!1,i=t.times(lg(c,n+h)),Cn=!0,i=$K(i),i.s=a,i};St.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=di(i),n=Kd(i,r<=a.toExpNeg||r>=a.toExpPos)):(Lo(t,1,kf),e===void 0?e=a.rounding:Lo(e,0,8),i=un(new a(i),t,e),r=di(i),n=Kd(i,t<=r||r<=a.toExpNeg,t)),n};St.toSignificantDigits=St.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Lo(t,1,kf),e===void 0?e=n.rounding:Lo(e,0,8)),un(new n(r),t,e)};St.toString=St.valueOf=St.val=St.toJSON=St[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=di(t),r=t.constructor;return Kd(t,e<=r.toExpNeg||e>=r.toExpPos)};function zK(t,e){var r,n,i,a,s,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Cn?un(e,m):e;if(d=t.d,h=e.d,s=t.e,i=e.e,d=d.slice(),a=s-i,a){for(a<0?(n=d,a=-a,c=h.length):(n=h,i=s,c=d.length),s=Math.ceil(m/An),c=s>c?s+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=d.length,a=h.length,c-a<0&&(a=c,n=h,h=d,d=n),r=0;a;)r=(d[--a]=d[a]+h[a]+r)/Oi|0,d[a]%=Oi;for(r&&(d.unshift(r),++i),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=i,Cn?un(e,m):e}function Lo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Id+t)}function jo(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=An-n.length,r&&(a+=$c(r)),a+=n;s=t[e],n=s+"",r=An-n.length,r&&(a+=$c(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Dl=(function(){function t(n,i){var a,s=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+s,n[c]=a%Oi|0,s=a/Oi|0;return s&&n.unshift(s),n}function e(n,i,a,s){var c,d;if(a!=s)d=a>s?1:-1;else for(c=d=0;c<a;c++)if(n[c]!=i[c]){d=n[c]>i[c]?1:-1;break}return d}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*Oi+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var c,d,h,p,m,y,b,T,_,w,N,k,C,$,I,L,E,A,R=n.constructor,F=n.s==i.s?1:-1,P=n.d,B=i.d;if(!n.s)return new R(n);if(!i.s)throw Error(Bs+"Division by zero");for(d=n.e-i.e,E=B.length,I=P.length,b=new R(F),T=b.d=[],h=0;B[h]==(P[h]||0);)++h;if(B[h]>(P[h]||0)&&--d,a==null?k=a=R.precision:s?k=a+(di(n)-di(i))+1:k=a,k<0)return new R(0);if(k=k/An+2|0,h=0,E==1)for(p=0,B=B[0],k++;(h<I||p)&&k--;h++)C=p*Oi+(P[h]||0),T[h]=C/B|0,p=C%B|0;else{for(p=Oi/(B[0]+1)|0,p>1&&(B=t(B,p),P=t(P,p),E=B.length,I=P.length),$=E,_=P.slice(0,E),w=_.length;w<E;)_[w++]=0;A=B.slice(),A.unshift(0),L=B[0],B[1]>=Oi/2&&++L;do p=0,c=e(B,_,E,w),c<0?(N=_[0],E!=w&&(N=N*Oi+(_[1]||0)),p=N/L|0,p>1?(p>=Oi&&(p=Oi-1),m=t(B,p),y=m.length,w=_.length,c=e(m,_,y,w),c==1&&(p--,r(m,E<y?A:B,y))):(p==0&&(c=p=1),m=B.slice()),y=m.length,y<w&&m.unshift(0),r(_,m,w),c==-1&&(w=_.length,c=e(B,_,E,w),c<1&&(p++,r(_,E<w?A:B,w))),w=_.length):c===0&&(p++,_=[0]),T[h++]=p,c&&_[0]?_[w++]=P[$]||0:(_=[P[$]],w=1);while(($++<I||_[0]!==void 0)&&k--)}return T[0]||T.shift(),b.e=d,un(b,s?a+di(b)+1:a)}})();function $K(t,e){var r,n,i,a,s,c,d=0,h=0,p=t.constructor,m=p.precision;if(di(t)>16)throw Error(LN+di(t));if(!t.s)return new p(is);for(Cn=!1,c=m,s=new p(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(n=Math.log(hd(2,h))/Math.LN10*2+5|0,c+=n,r=i=a=new p(is),p.precision=c;;){if(i=un(i.times(t),c),r=r.times(++d),s=a.plus(Dl(i,r,c)),jo(s.d).slice(0,c)===jo(a.d).slice(0,c)){for(;h--;)a=un(a.times(a),c);return p.precision=m,e==null?(Cn=!0,un(a,m)):a}a=s}}function di(t){for(var e=t.e*An,r=t.d[0];r>=10;r/=10)e++;return e}function jS(t,e,r){if(e>t.LN10.sd())throw Cn=!0,r&&(t.precision=r),Error(Bs+"LN10 precision limit exceeded");return un(new t(t.LN10),e)}function $c(t){for(var e="";t--;)e+="0";return e}function lg(t,e){var r,n,i,a,s,c,d,h,p,m=1,y=10,b=t,T=b.d,_=b.constructor,w=_.precision;if(b.s<1)throw Error(Bs+(b.s?"NaN":"-Infinity"));if(b.eq(is))return new _(0);if(e==null?(Cn=!1,h=w):h=e,b.eq(10))return e==null&&(Cn=!0),jS(_,h);if(h+=y,_.precision=h,r=jo(T),n=r.charAt(0),a=di(b),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(t),r=jo(b.d),n=r.charAt(0),m++;a=di(b),n>1?(b=new _("0."+r),a++):b=new _(n+"."+r.slice(1))}else return d=jS(_,h+2,w).times(a+""),b=lg(new _(n+"."+r.slice(1)),h-y).plus(d),_.precision=w,e==null?(Cn=!0,un(b,w)):b;for(c=s=b=Dl(b.minus(is),b.plus(is),h),p=un(b.times(b),h),i=3;;){if(s=un(s.times(p),h),d=c.plus(Dl(s,new _(i),h)),jo(d.d).slice(0,h)===jo(c.d).slice(0,h))return c=c.times(2),a!==0&&(c=c.plus(jS(_,h+2,w).times(a+""))),c=Dl(c,new _(m),h),_.precision=w,e==null?(Cn=!0,un(c,w)):c;c=d,i+=2}}function _B(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Of(r/An),t.d=[],n=(r+1)%An,r<0&&(n+=An),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=An;n<i;)t.d.push(+e.slice(n,n+=An));e=e.slice(n),n=An-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Cn&&(t.e>Jb||t.e<-Jb))throw Error(LN+r)}else t.s=0,t.e=0,t.d=[0];return t}function un(t,e,r){var n,i,a,s,c,d,h,p,m=t.d;for(s=1,a=m[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=An,i=e,h=m[p=0];else{if(p=Math.ceil((n+1)/An),a=m.length,p>=a)return t;for(h=a=m[p],s=1;a>=10;a/=10)s++;n%=An,i=n-An+s}if(r!==void 0&&(a=hd(10,s-i-1),c=h/a%10|0,d=e<0||m[p+1]!==void 0||h%a,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?i>0?h/hd(10,s-i):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(a=di(t),m.length=1,e=e-a-1,m[0]=hd(10,(An-e%An)%An),t.e=Of(-e/An)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,a=1,p--):(m.length=p+1,a=hd(10,An-n),m[p]=i>0?(h/hd(10,s-i)%hd(10,i)|0)*a:0),d)for(;;)if(p==0){(m[0]+=a)==Oi&&(m[0]=1,++t.e);break}else{if(m[p]+=a,m[p]!=Oi)break;m[p--]=0,a=1}for(n=m.length;m[--n]===0;)m.pop();if(Cn&&(t.e>Jb||t.e<-Jb))throw Error(LN+di(t));return t}function VK(t,e){var r,n,i,a,s,c,d,h,p,m,y=t.constructor,b=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Cn?un(e,b):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),s=h-n,s){for(p=s<0,p?(r=d,s=-s,c=m.length):(r=m,n=h,c=d.length),i=Math.max(Math.ceil(b/An),c)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=d.length,c=m.length,p=i<c,p&&(c=i),i=0;i<c;i++)if(d[i]!=m[i]){p=d[i]<m[i];break}s=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,i=m.length-c;i>0;--i)d[c++]=0;for(i=m.length;i>s;){if(d[--i]<m[i]){for(a=i;a&&d[--a]===0;)d[a]=Oi-1;--d[a],d[i]+=Oi}d[i]-=m[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Cn?un(e,b):e):new y(0)}function Kd(t,e,r){var n,i=di(t),a=jo(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+$c(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+$c(-i-1)+a,r&&(n=r-s)>0&&(a+=$c(n))):i>=s?(a+=$c(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+$c(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=$c(n))),t.s<0?"-"+a:a}function SB(t,e){if(t.length>e)return t.length=e,!0}function FK(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Id+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return _B(s,a.toString())}else if(typeof a!="string")throw Error(Id+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,sye.test(a))_B(s,a);else throw Error(Id+a)}if(i.prototype=St,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=FK,i.config=i.set=oye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function oye(t){if(!t||typeof t!="object")throw Error(Bs+"Object expected");var e,r,n,i=["precision",1,kf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Of(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Id+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Id+r+": "+n);return this}var BN=FK(aye);is=new BN(1);const rn=BN;function lye(t){return hye(t)||dye(t)||uye(t)||cye()}function cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uye(t,e){if(t){if(typeof t=="string")return XA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XA(t,e)}}function dye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function hye(t){if(Array.isArray(t))return XA(t)}function XA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fye=function(e){return e},qK={},HK=function(e){return e===qK},TB=function(e){return function r(){return arguments.length===0||arguments.length===1&&HK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},pye=function t(e,r){return e===1?r:TB(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(c){return c!==qK}).length;return s>=e?r.apply(void 0,i):t(e-s,TB(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=i.map(function(m){return HK(m)?d.shift():m});return r.apply(void 0,lye(p).concat(d))}))})},H2=function(e){return pye(e.length,e)},QA=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},mye=H2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),gye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return fye;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(c,d){return d(c)},a.apply(void 0,arguments))}},YA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},GK=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(c,d){return c===r[d]})||(r=a,n=e.apply(void 0,a)),n}};function yye(t){var e;return t===0?e=1:e=Math.floor(new rn(t).abs().log(10).toNumber())+1,e}function vye(t,e,r){for(var n=new rn(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var bye=H2(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),xye=H2(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),wye=H2(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const G2={rangeStep:vye,getDigitCount:yye,interpolateNumber:bye,uninterpolateNumber:xye,uninterpolateTruncation:wye};function ZA(t){return Tye(t)||Sye(t)||KK(t)||_ye()}function _ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Tye(t){if(Array.isArray(t))return JA(t)}function cg(t,e){return Nye(t)||Eye(t,e)||KK(t,e)||Aye()}function Aye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KK(t,e){if(t){if(typeof t=="string")return JA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JA(t,e)}}function JA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function Nye(t){if(Array.isArray(t))return t}function WK(t){var e=cg(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function XK(t,e,r){if(t.lte(0))return new rn(0);var n=G2.getDigitCount(t.toNumber()),i=new rn(10).pow(n),a=t.div(i),s=n!==1?.05:.1,c=new rn(Math.ceil(a.div(s).toNumber())).add(r).mul(s),d=c.mul(i);return e?d:new rn(Math.ceil(d))}function jye(t,e,r){var n=1,i=new rn(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new rn(10).pow(G2.getDigitCount(t)-1),i=new rn(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new rn(Math.floor(t)))}else t===0?i=new rn(Math.floor((e-1)/2)):r||(i=new rn(Math.floor(t)));var s=Math.floor((e-1)/2),c=gye(mye(function(d){return i.add(new rn(d-s).mul(n)).toNumber()}),QA);return c(0,e)}function QK(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new rn(0),tickMin:new rn(0),tickMax:new rn(0)};var a=XK(new rn(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new rn(0):(s=new rn(t).add(e).div(2),s=s.sub(new rn(s).mod(a)));var c=Math.ceil(s.sub(t).div(a).toNumber()),d=Math.ceil(new rn(e).sub(s).div(a).toNumber()),h=c+d+1;return h>r?QK(t,e,r,n,i+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:a,tickMin:s.sub(new rn(c).mul(a)),tickMax:s.add(new rn(d).mul(a))})}function Cye(t){var e=cg(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),c=WK([r,n]),d=cg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(ZA(QA(0,i-1).map(function(){return 1/0}))):[].concat(ZA(QA(0,i-1).map(function(){return-1/0})),[p]);return r>n?YA(m):m}if(h===p)return jye(h,i,a);var y=QK(h,p,s,a),b=y.step,T=y.tickMin,_=y.tickMax,w=G2.rangeStep(T,_.add(new rn(.1).mul(b)),b);return r>n?YA(w):w}function kye(t,e){var r=cg(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=WK([n,i]),c=cg(s,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,i];if(d===h)return[d];var p=Math.max(e,2),m=XK(new rn(h).sub(d).div(p-1),a,0),y=[].concat(ZA(G2.rangeStep(new rn(d),new rn(h).sub(new rn(.99).mul(m)),m)),[h]);return n>i?YA(y):y}var Oye=GK(Cye),Iye=GK(kye),Rye="Invariant failed";function Wd(t,e){throw new Error(Rye)}var Mye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function ex(){return ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ex.apply(this,arguments)}function Pye(t,e){return Uye(t)||Bye(t,e)||Lye(t,e)||Dye()}function Dye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lye(t,e){if(t){if(typeof t=="string")return AB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AB(t,e)}}function AB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function Uye(t){if(Array.isArray(t))return t}function zye(t,e){if(t==null)return{};var r=$ye(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $ye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JK(n.key),n)}}function qye(t,e,r){return e&&Fye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hye(t,e,r){return e=tx(e),Gye(t,YK()?Reflect.construct(e,r||[],tx(t).constructor):e.apply(t,r))}function Gye(t,e){if(e&&(Yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kye(t)}function Kye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YK=function(){return!!t})()}function tx(t){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tx(t)}function Wye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e8(t,e)}function e8(t,e){return e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},e8(t,e)}function ZK(t,e,r){return e=JK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JK(t){var e=Xye(t,"string");return Yh(e)=="symbol"?e:e+""}function Xye(t,e){if(Yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var f1=(function(t){function e(){return Vye(this,e),Hye(this,e,arguments)}return Wye(e,t),qye(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=zye(n,Mye),b=Ot(y,!1);this.props.direction==="x"&&p.type!=="number"&&Wd();var T=d.map(function(_){var w=h(_,c),N=w.x,k=w.y,C=w.value,$=w.errorVal;if(!$)return null;var I=[],L,E;if(Array.isArray($)){var A=Pye($,2);L=A[0],E=A[1]}else L=E=$;if(a==="vertical"){var R=p.scale,F=k+i,P=F+s,B=F-s,D=R(C-L),Y=R(C+E);I.push({x1:Y,y1:P,x2:Y,y2:B}),I.push({x1:D,y1:F,x2:Y,y2:F}),I.push({x1:D,y1:P,x2:D,y2:B})}else if(a==="horizontal"){var J=m.scale,X=N+i,ee=X-s,Z=X+s,ge=J(C-L),ce=J(C+E);I.push({x1:ee,y1:ce,x2:Z,y2:ce}),I.push({x1:X,y1:ge,x2:X,y2:ce}),I.push({x1:ee,y1:ge,x2:Z,y2:ge})}return te.createElement(Cr,ex({className:"recharts-errorBar",key:"bar-".concat(I.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},b),I.map(function(Q){return te.createElement("line",ex({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return te.createElement(Cr,{className:"recharts-errorBars"},T)}}])})(te.Component);ZK(f1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZK(f1,"displayName","ErrorBar");function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function EB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ad(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(r),!0).forEach(function(n){Qye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qye(t,e,r){return e=Yye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yye(t){var e=Zye(t,"string");return ug(e)=="symbol"?e:e+""}function Zye(t,e){if(ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eW=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=rs(r,bh);if(!s)return null;var c=bh.defaultProps,d=c!==void 0?ad(ad({},c),s.props):{},h;return s.props&&s.props.payload?h=s.props&&s.props.payload:a==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,b=m.props,T=b.sectors||b.data||[];return p.concat(T.map(function(_){return{type:s.props.iconType||y.props.legendType,value:_.name,color:_.fill,payload:_}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,b=y!==void 0?ad(ad({},y),m.props):{},T=b.dataKey,_=b.name,w=b.legendType,N=b.hide;return{inactive:N,dataKey:T,type:d.iconType||w||"square",color:UN(m),value:_||T,payload:b}}),ad(ad(ad({},d),bh.getWithHeight(s,i)),{},{payload:h,item:s})};function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function NB(t){return rve(t)||tve(t)||eve(t)||Jye()}function Jye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(t,e){if(t){if(typeof t=="string")return t8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t8(t,e)}}function tve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rve(t){if(Array.isArray(t))return t8(t)}function t8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(r),!0).forEach(function(n){wh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wh(t,e,r){return e=nve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nve(t){var e=ive(t,"string");return dg(e)=="symbol"?e:e+""}function ive(t,e){if(dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qi(t,e,r){return er(t)||er(e)?r:wi(e)?Os(t,e,r):Ht(e)?e(t):r}function ym(t,e,r,n){var i=rye(t,function(c){return Qi(c,e)});if(r==="number"){var a=i.filter(function(c){return ct(c)||parseFloat(c)});return a.length?[q2(a),F2(a)]:[1/0,-1/0]}var s=n?i.filter(function(c){return!er(c)}):i;return s.map(function(c){return wi(c)||c instanceof Date?c:""})}var ave=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var d=a.range,h=0;h<c;h++){var p=h>0?i[h-1].coordinate:i[c-1].coordinate,m=i[h].coordinate,y=h>=c-1?i[0].coordinate:i[h+1].coordinate,b=void 0;if(to(m-p)!==to(y-m)){var T=[];if(to(y-m)===to(d[1]-d[0])){b=y;var _=m+d[1]-d[0];T[0]=Math.min(_,(_+p)/2),T[1]=Math.max(_,(_+p)/2)}else{b=p;var w=y+d[1]-d[0];T[0]=Math.min(m,(w+m)/2),T[1]=Math.max(m,(w+m)/2)}var N=[Math.min(m,(b+m)/2),Math.max(m,(b+m)/2)];if(e>N[0]&&e<=N[1]||e>=T[0]&&e<=T[1]){s=i[h].index;break}}else{var k=Math.min(p,y),C=Math.max(p,y);if(e>(k+m)/2&&e<=(C+m)/2){s=i[h].index;break}}}else for(var $=0;$<c;$++)if($===0&&e<=(n[$].coordinate+n[$+1].coordinate)/2||$>0&&$<c-1&&e>(n[$].coordinate+n[$-1].coordinate)/2&&e<=(n[$].coordinate+n[$+1].coordinate)/2||$===c-1&&e>(n[$].coordinate+n[$-1].coordinate)/2){s=n[$].index;break}return s},UN=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Fn(Fn({},e.type.defaultProps),e.props):e.props,s=a.stroke,c=a.fill,d;switch(i){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},sve=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},c=Object.keys(a),d=0,h=c.length;d<h;d++)for(var p=a[c[d]].stackGroups,m=Object.keys(p),y=0,b=m.length;y<b;y++){var T=p[m[y]],_=T.items,w=T.cateAxisId,N=_.filter(function(E){return Ml(E.type).indexOf("Bar")>=0});if(N&&N.length){var k=N[0].type.defaultProps,C=k!==void 0?Fn(Fn({},k),N[0].props):N[0].props,$=C.barSize,I=C[w];s[I]||(s[I]=[]);var L=er($)?r:$;s[I].push({item:N[0],stackList:N.slice(1),barSize:er(L)?void 0:ro(L,n,0)})}}return s},ove=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,c=e.maxBarSize,d=s.length;if(d<1)return null;var h=ro(r,i,0,!0),p,m=[];if(s[0].barSize===+s[0].barSize){var y=!1,b=i/d,T=s.reduce(function($,I){return $+I.barSize||0},0);T+=(d-1)*h,T>=i&&(T-=(d-1)*h,h=0),T>=i&&b>0&&(y=!0,b*=.9,T=d*b);var _=(i-T)/2>>0,w={offset:_-h,size:0};p=s.reduce(function($,I){var L={item:I.item,position:{offset:w.offset+w.size+h,size:y?b:I.barSize}},E=[].concat(NB($),[L]);return w=E[E.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(A){E.push({item:A,position:w})}),E},m)}else{var N=ro(n,i,0,!0);i-2*N-(d-1)*h<=0&&(h=0);var k=(i-2*N-(d-1)*h)/d;k>1&&(k>>=0);var C=c===+c?Math.min(k,c):k;p=s.reduce(function($,I,L){var E=[].concat(NB($),[{item:I.item,position:{offset:N+(k+h)*L+(k-C)/2,size:C}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(A){E.push({item:A,position:E[E.length-1].position})}),E},m)}return p},lve=function(e,r,n,i){var a=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),h=eW({children:a,legendWidth:d});if(h){var p=i||{},m=p.width,y=p.height,b=h.align,T=h.verticalAlign,_=h.layout;if((_==="vertical"||_==="horizontal"&&T==="middle")&&b!=="center"&&ct(e[b]))return Fn(Fn({},e),{},wh({},b,e[b]+(m||0)));if((_==="horizontal"||_==="vertical"&&b==="center")&&T!=="middle"&&ct(e[T]))return Fn(Fn({},e),{},wh({},T,e[T]+(y||0)))}return e},cve=function(e,r,n){return er(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},tW=function(e,r,n,i,a){var s=r.props.children,c=us(s,f1).filter(function(h){return cve(i,a,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=Qi(p,n);if(er(m))return h;var y=Array.isArray(m)?[q2(m),F2(m)]:[m,m],b=d.reduce(function(T,_){var w=Qi(p,_,0),N=y[0]-Math.abs(Array.isArray(w)?w[0]:w),k=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(N,T[0]),Math.max(k,T[1])]},[1/0,-1/0]);return[Math.min(b[0],h[0]),Math.max(b[1],h[1])]},[1/0,-1/0])}return null},uve=function(e,r,n,i,a){var s=r.map(function(c){return tW(e,c,n,a,i)}).filter(function(c){return!er(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},rW=function(e,r,n,i,a){var s=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&tW(e,d,h,i)||ym(e,h,n,a)});if(n==="number")return s.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},nW=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},iW=function(e,r,n,i){if(i)return e.map(function(d){return d.coordinate});var a,s,c=e.map(function(d){return d.coordinate===r&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate});return a||c.push(r),s||c.push(n),c},kl=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,h=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?to(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=a?a.indexOf(m):m;return{coordinate:i(y)+h,value:m,offset:h}});return p.filter(function(m){return!a1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:i(m)+h,value:m,index:y,offset:h}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(m){return{coordinate:i(m)+h,value:m,offset:h}}):i.domain().map(function(m,y){return{coordinate:i(m)+h,value:a?a[m]:m,index:y,offset:h}})},CS=new WeakMap,vv=function(e,r){if(typeof r!="function")return e;CS.has(e)||CS.set(e,new WeakMap);var n=CS.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},aW=function(e,r,n){var i=e.scale,a=e.type,s=e.layout,c=e.axisType;if(i==="auto")return s==="radial"&&c==="radiusAxis"?{scale:ng(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:Xb(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:gm(),realScaleType:"point"}:a==="category"?{scale:ng(),realScaleType:"band"}:{scale:Xb(),realScaleType:"linear"};if(Hd(i)){var d="scale".concat(j2(i));return{scale:(fB[d]||gm)(),realScaleType:fB[d]?d:"point"}}return Ht(i)?{scale:i}:{scale:gm(),realScaleType:"point"}},CB=1e-4,sW=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-CB,s=Math.max(i[0],i[1])+CB,c=e(r[0]),d=e(r[n-1]);(c<a||c>s||d<a||d>s)&&e.domain([r[0],r[n-1]])}},dve=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},hve=function(e,r){if(!r||r.length!==2||!ct(r[0])||!ct(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!ct(e[0])||e[0]<n)&&(a[0]=n),(!ct(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},fve=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0,c=0;c<r;++c){var d=a1(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=a,e[c][n][1]=a+d,a=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},pve=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var c=a1(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=a,e[s][n][1]=a+c,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},mve={sign:fve,expand:rhe,none:Vh,silhouette:nhe,wiggle:ihe,positive:pve},gve=function(e,r,n){var i=r.map(function(c){return c.props.dataKey}),a=mve[n],s=the().keys(i).value(function(c,d){return+Qi(c,d,0)}).order(OA).offset(a);return s(e)},yve=function(e,r,n,i,a,s){if(!e)return null;var c=s?r.reverse():r,d={},h=c.reduce(function(m,y){var b,T=(b=y.type)!==null&&b!==void 0&&b.defaultProps?Fn(Fn({},y.type.defaultProps),y.props):y.props,_=T.stackId,w=T.hide;if(w)return m;var N=T[n],k=m[N]||{hasStack:!1,stackGroups:{}};if(wi(_)){var C=k.stackGroups[_]||{numericAxisId:n,cateAxisId:i,items:[]};C.items.push(y),k.hasStack=!0,k.stackGroups[_]=C}else k.stackGroups[s1("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[y]};return Fn(Fn({},m),{},wh({},N,k))},d),p={};return Object.keys(h).reduce(function(m,y){var b=h[y];if(b.hasStack){var T={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(_,w){var N=b.stackGroups[w];return Fn(Fn({},_),{},wh({},w,{numericAxisId:n,cateAxisId:i,items:N.items,stackedData:gve(e,N.items,a)}))},T)}return Fn(Fn({},m),{},wh({},y,b))},p)},oW=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=Oye(h,a,c);return e.domain([q2(p),F2(p)]),{niceTicks:p}}if(a&&i==="number"){var m=e.domain(),y=Iye(m,a,c);return{niceTicks:y}}return null};function kB(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!er(i[e.dataKey])){var c=kb(r,"value",i[e.dataKey]);if(c)return c.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var d=Qi(i,er(s)?e.dataKey:s);return er(d)?null:e.scale(d)}var OB=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+i:null;var d=Qi(s,r.dataKey,r.domain[c]);return er(d)?null:r.scale(d)-a/2+i},vve=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},bve=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Fn(Fn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(wi(a)){var s=r[a];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},xve=function(e){return e.reduce(function(r,n){return[q2(n.concat([r[0]]).filter(ct)),F2(n.concat([r[1]]).filter(ct))]},[1/0,-1/0])},lW=function(e,r,n){return Object.keys(e).reduce(function(i,a){var s=e[a],c=s.stackedData,d=c.reduce(function(h,p){var m=xve(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],i[0]),Math.max(d[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},IB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,r8=function(e,r,n){if(Ht(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(ct(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(IB.test(e[0])){var a=+IB.exec(e[0])[1];i[0]=r[0]-a}else Ht(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(ct(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(RB.test(e[1])){var s=+RB.exec(e[1])[1];i[1]=r[1]+s}else Ht(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},rx=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=hN(r,function(m){return m.coordinate}),s=1/0,c=1,d=a.length;c<d;c++){var h=a[c],p=a[c-1];s=Math.min((h.coordinate||0)-(p.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},MB=function(e,r,n){return!e||!e.length||h1(e,Os(n,"type.defaultProps.domain"))?r:e},cW=function(e,r){var n=e.type.defaultProps?Fn(Fn({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return Fn(Fn({},Ot(e,!1)),{},{dataKey:i,unit:s,formatter:c,name:a||i,color:UN(e),value:Qi(r,i),type:d,payload:r,chartType:h,hide:p})};function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}function PB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(r),!0).forEach(function(n){uW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uW(t,e,r){return e=wve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wve(t){var e=_ve(t,"string");return hg(e)=="symbol"?e:e+""}function _ve(t,e){if(hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sve(t,e){return Nve(t)||Eve(t,e)||Ave(t,e)||Tve()}function Tve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t,e){if(t){if(typeof t=="string")return DB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DB(t,e)}}function DB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function Nve(t){if(Array.isArray(t))return t}var nx=Math.PI/180,jve=function(e){return e*180/Math.PI},nn=function(e,r,n,i){return{x:e+Math.cos(-nx*i)*n,y:r+Math.sin(-nx*i)*n}},Cve=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},kve=function(e,r,n,i,a){var s=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=ro(e.cx,s,s/2),m=ro(e.cy,c,c/2),y=Cve(s,c,n),b=ro(e.innerRadius,y,0),T=ro(e.outerRadius,y,y*.8),_=Object.keys(r);return _.reduce(function(w,N){var k=r[N],C=k.domain,$=k.reversed,I;if(er(k.range))i==="angleAxis"?I=[d,h]:i==="radiusAxis"&&(I=[b,T]),$&&(I=[I[1],I[0]]);else{I=k.range;var L=I,E=Sve(L,2);d=E[0],h=E[1]}var A=aW(k,a),R=A.realScaleType,F=A.scale;F.domain(C).range(I),sW(F);var P=oW(F,bl(bl({},k),{},{realScaleType:R})),B=bl(bl(bl({},k),P),{},{range:I,radius:T,realScaleType:R,scale:F,cx:p,cy:m,innerRadius:b,outerRadius:T,startAngle:d,endAngle:h});return bl(bl({},w),{},uW({},N,B))},{})},Ove=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},Ive=function(e,r){var n=e.x,i=e.y,a=r.cx,s=r.cy,c=Ove({x:n,y:i},{x:a,y:s});if(c<=0)return{radius:c};var d=(n-a)/c,h=Math.acos(d);return i>s&&(h=2*Math.PI-h),{radius:c,angle:jve(h),angleInRadian:h}},Rve=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},Mve=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),c=Math.min(a,s);return e+c*360},LB=function(e,r){var n=e.x,i=e.y,a=Ive({x:n,y:i},r),s=a.radius,c=a.angle,d=r.innerRadius,h=r.outerRadius;if(s<d||s>h)return!1;if(s===0)return!0;var p=Rve(r),m=p.startAngle,y=p.endAngle,b=c,T;if(m<=y){for(;b>y;)b-=360;for(;b<m;)b+=360;T=b>=m&&b<=y}else{for(;b>m;)b-=360;for(;b<y;)b+=360;T=b>=y&&b<=m}return T?bl(bl({},r),{},{radius:s,angle:Mve(b,r)}):null},dW=function(e){return!M.isValidElement(e)&&!Ht(e)&&typeof e!="boolean"?e.className:""};function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}var Pve=["offset"];function Dve(t){return zve(t)||Uve(t)||Bve(t)||Lve()}function Lve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(t,e){if(t){if(typeof t=="string")return n8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n8(t,e)}}function Uve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zve(t){if(Array.isArray(t))return n8(t)}function n8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $ve(t,e){if(t==null)return{};var r=Vve(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function BB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(r),!0).forEach(function(n){Fve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fve(t,e,r){return e=qve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qve(t){var e=Hve(t,"string");return fg(e)=="symbol"?e:e+""}function Hve(t,e){if(fg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pg(){return pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pg.apply(this,arguments)}var Gve=function(e){var r=e.value,n=e.formatter,i=er(e.children)?r:e.children;return Ht(n)?n(i):i},Kve=function(e,r){var n=to(r-e),i=Math.min(Math.abs(r-e),360);return n*i},Wve=function(e,r,n){var i=e.position,a=e.viewBox,s=e.offset,c=e.className,d=a,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,b=d.startAngle,T=d.endAngle,_=d.clockWise,w=(m+y)/2,N=Kve(b,T),k=N>=0?1:-1,C,$;i==="insideStart"?(C=b+k*s,$=_):i==="insideEnd"?(C=T-k*s,$=!_):i==="end"&&(C=T+k*s,$=_),$=N<=0?$:!$;var I=nn(h,p,w,C),L=nn(h,p,w,C+($?1:-1)*359),E="M".concat(I.x,",").concat(I.y,`
    A`).concat(w,",").concat(w,",0,1,").concat($?0:1,`,
    `).concat(L.x,",").concat(L.y),A=er(e.id)?s1("recharts-radial-line-"):e.id;return te.createElement("text",pg({},n,{dominantBaseline:"central",className:sr("recharts-radial-bar-label",c)}),te.createElement("defs",null,te.createElement("path",{id:A,d:E})),te.createElement("textPath",{xlinkHref:"#".concat(A)},r))},Xve=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,s=a.cx,c=a.cy,d=a.innerRadius,h=a.outerRadius,p=a.startAngle,m=a.endAngle,y=(p+m)/2;if(i==="outside"){var b=nn(s,c,h+n,y),T=b.x,_=b.y;return{x:T,y:_,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,N=nn(s,c,w,y),k=N.x,C=N.y;return{x:k,y:C,textAnchor:"middle",verticalAnchor:"middle"}},Qve=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,s=r,c=s.x,d=s.y,h=s.width,p=s.height,m=p>=0?1:-1,y=m*i,b=m>0?"end":"start",T=m>0?"start":"end",_=h>=0?1:-1,w=_*i,N=_>0?"end":"start",k=_>0?"start":"end";if(a==="top"){var C={x:c+h/2,y:d-m*i,textAnchor:"middle",verticalAnchor:b};return yi(yi({},C),n?{height:Math.max(d-n.y,0),width:h}:{})}if(a==="bottom"){var $={x:c+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:T};return yi(yi({},$),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(a==="left"){var I={x:c-w,y:d+p/2,textAnchor:N,verticalAnchor:"middle"};return yi(yi({},I),n?{width:Math.max(I.x-n.x,0),height:p}:{})}if(a==="right"){var L={x:c+h+w,y:d+p/2,textAnchor:k,verticalAnchor:"middle"};return yi(yi({},L),n?{width:Math.max(n.x+n.width-L.x,0),height:p}:{})}var E=n?{width:h,height:p}:{};return a==="insideLeft"?yi({x:c+w,y:d+p/2,textAnchor:k,verticalAnchor:"middle"},E):a==="insideRight"?yi({x:c+h-w,y:d+p/2,textAnchor:N,verticalAnchor:"middle"},E):a==="insideTop"?yi({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:T},E):a==="insideBottom"?yi({x:c+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:b},E):a==="insideTopLeft"?yi({x:c+w,y:d+y,textAnchor:k,verticalAnchor:T},E):a==="insideTopRight"?yi({x:c+h-w,y:d+y,textAnchor:N,verticalAnchor:T},E):a==="insideBottomLeft"?yi({x:c+w,y:d+p-y,textAnchor:k,verticalAnchor:b},E):a==="insideBottomRight"?yi({x:c+h-w,y:d+p-y,textAnchor:N,verticalAnchor:b},E):Nf(a)&&(ct(a.x)||bd(a.x))&&(ct(a.y)||bd(a.y))?yi({x:c+ro(a.x,h),y:d+ro(a.y,p),textAnchor:"end",verticalAnchor:"end"},E):yi({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Yve=function(e){return"cx"in e&&ct(e.cx)};function Ki(t){var e=t.offset,r=e===void 0?5:e,n=$ve(t,Pve),i=yi({offset:r},n),a=i.viewBox,s=i.position,c=i.value,d=i.children,h=i.content,p=i.className,m=p===void 0?"":p,y=i.textBreakAll;if(!a||er(c)&&er(d)&&!M.isValidElement(h)&&!Ht(h))return null;if(M.isValidElement(h))return M.cloneElement(h,i);var b;if(Ht(h)){if(b=M.createElement(h,i),M.isValidElement(b))return b}else b=Gve(i);var T=Yve(a),_=Ot(i,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Wve(i,b,_);var w=T?Xve(i):Qve(i);return te.createElement(Kh,pg({className:sr("recharts-label",m)},_,w,{breakAll:y}),b)}Ki.displayName="Label";var hW=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,b=e.top,T=e.left,_=e.width,w=e.height,N=e.clockWise,k=e.labelViewBox;if(k)return k;if(ct(_)&&ct(w)){if(ct(m)&&ct(y))return{x:m,y,width:_,height:w};if(ct(b)&&ct(T))return{x:b,y:T,width:_,height:w}}return ct(m)&&ct(y)?{x:m,y,width:0,height:0}:ct(r)&&ct(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:N}:e.viewBox?e.viewBox:{}},Zve=function(e,r){return e?e===!0?te.createElement(Ki,{key:"label-implicit",viewBox:r}):wi(e)?te.createElement(Ki,{key:"label-implicit",viewBox:r,value:e}):M.isValidElement(e)?e.type===Ki?M.cloneElement(e,{key:"label-implicit",viewBox:r}):te.createElement(Ki,{key:"label-implicit",content:e,viewBox:r}):Ht(e)?te.createElement(Ki,{key:"label-implicit",content:e,viewBox:r}):Nf(e)?te.createElement(Ki,pg({viewBox:r},e,{key:"label-implicit"})):null:null},Jve=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=hW(e),s=us(i,Ki).map(function(d,h){return M.cloneElement(d,{viewBox:r||a,key:"label-".concat(h)})});if(!n)return s;var c=Zve(e.label,r||a);return[c].concat(Dve(s))};Ki.parseViewBox=hW;Ki.renderCallByParent=Jve;var kS,UB;function ebe(){if(UB)return kS;UB=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return kS=t,kS}var tbe=ebe();const fW=Dr(tbe);function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}var rbe=["valueAccessor"],nbe=["data","dataKey","clockWise","id","textBreakAll"];function ibe(t){return lbe(t)||obe(t)||sbe(t)||abe()}function abe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sbe(t,e){if(t){if(typeof t=="string")return i8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i8(t,e)}}function obe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lbe(t){if(Array.isArray(t))return i8(t)}function i8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ix(){return ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ix.apply(this,arguments)}function zB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $B(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(r),!0).forEach(function(n){cbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cbe(t,e,r){return e=ube(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ube(t){var e=dbe(t,"string");return mg(e)=="symbol"?e:e+""}function dbe(t,e){if(mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VB(t,e){if(t==null)return{};var r=hbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var fbe=function(e){return Array.isArray(e.value)?fW(e.value):e.value};function Ll(t){var e=t.valueAccessor,r=e===void 0?fbe:e,n=VB(t,rbe),i=n.data,a=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,h=VB(n,nbe);return!i||!i.length?null:te.createElement(Cr,{className:"recharts-label-list"},i.map(function(p,m){var y=er(a)?r(p,m):Qi(p&&p.payload,a),b=er(c)?{}:{id:"".concat(c,"-").concat(m)};return te.createElement(Ki,ix({},Ot(p,!0),h,b,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:Ki.parseViewBox(er(s)?p:$B($B({},p),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}Ll.displayName="LabelList";function pbe(t,e){return t?t===!0?te.createElement(Ll,{key:"labelList-implicit",data:e}):te.isValidElement(t)||Ht(t)?te.createElement(Ll,{key:"labelList-implicit",data:e,content:t}):Nf(t)?te.createElement(Ll,ix({data:e},t,{key:"labelList-implicit"})):null:null}function mbe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=us(n,Ll).map(function(s,c){return M.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!r)return i;var a=pbe(t.label,e);return[a].concat(ibe(i))}Ll.renderCallByParent=mbe;function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function a8(){return a8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a8.apply(this,arguments)}function FB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FB(Object(r),!0).forEach(function(n){gbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gbe(t,e,r){return e=ybe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ybe(t){var e=vbe(t,"string");return gg(e)=="symbol"?e:e+""}function vbe(t,e){if(gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bbe=function(e,r){var n=to(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},bv=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+i,m=Math.asin(d/p)/nx,y=h?a:a+s*m,b=nn(r,n,p,y),T=nn(r,n,i,y),_=h?a-s*m:a,w=nn(r,n,p*Math.cos(m*nx),_);return{center:b,circleTangency:T,lineTangency:w,theta:m}},pW=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,c=e.endAngle,d=bbe(s,c),h=s+d,p=nn(r,n,a,s),m=nn(r,n,a,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var b=nn(r,n,i,s),T=nn(r,n,i,h);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=h),`,
            `).concat(b.x,",").concat(b.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},xbe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=to(p-h),y=bv({cx:r,cy:n,radius:a,angle:h,sign:m,cornerRadius:s,cornerIsExternal:d}),b=y.circleTangency,T=y.lineTangency,_=y.theta,w=bv({cx:r,cy:n,radius:a,angle:p,sign:-m,cornerRadius:s,cornerIsExternal:d}),N=w.circleTangency,k=w.lineTangency,C=w.theta,$=d?Math.abs(h-p):Math.abs(h-p)-_-C;if($<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):pW({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:h,endAngle:p});var I="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+($>180),",").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(k.x,",").concat(k.y,`
  `);if(i>0){var L=bv({cx:r,cy:n,radius:i,angle:h,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),E=L.circleTangency,A=L.lineTangency,R=L.theta,F=bv({cx:r,cy:n,radius:i,angle:p,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),P=F.circleTangency,B=F.lineTangency,D=F.theta,Y=d?Math.abs(h-p):Math.abs(h-p)-R-D;if(Y<0&&s===0)return"".concat(I,"L").concat(r,",").concat(n,"Z");I+="L".concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Y>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else I+="L".concat(r,",").concat(n,"Z");return I},wbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mW=function(e){var r=qB(qB({},wbe),e),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(s<a||p===m)return null;var b=sr("recharts-sector",y),T=s-a,_=ro(c,T,0,!0),w;return _>0&&Math.abs(p-m)<360?w=xbe({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(_,T/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=pW({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:p,endAngle:m}),te.createElement("path",a8({},Ot(r,!0),{className:b,d:w,role:"img"}))};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function s8(){return s8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s8.apply(this,arguments)}function HB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HB(Object(r),!0).forEach(function(n){_be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _be(t,e,r){return e=Sbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sbe(t){var e=Tbe(t,"string");return yg(e)=="symbol"?e:e+""}function Tbe(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KB={curveBasisClosed:q0e,curveBasisOpen:H0e,curveBasis:F0e,curveBumpX:C0e,curveBumpY:k0e,curveLinearClosed:G0e,curveLinear:k2,curveMonotoneX:K0e,curveMonotoneY:W0e,curveNatural:X0e,curveStep:Q0e,curveStepAfter:Z0e,curveStepBefore:Y0e},xv=function(e){return e.x===+e.x&&e.y===+e.y},Vp=function(e){return e.x},Fp=function(e){return e.y},Abe=function(e,r){if(Ht(e))return e;var n="curve".concat(j2(e));return(n==="curveMonotone"||n==="curveBump")&&r?KB["".concat(n).concat(r==="vertical"?"Y":"X")]:KB[n]||k2},Ebe=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,s=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=Abe(n,c),m=h?a.filter(function(_){return xv(_)}):a,y;if(Array.isArray(s)){var b=h?s.filter(function(_){return xv(_)}):s,T=m.map(function(_,w){return GB(GB({},_),{},{base:b[w]})});return c==="vertical"?y=dv().y(Fp).x1(Vp).x0(function(_){return _.base.x}):y=dv().x(Vp).y1(Fp).y0(function(_){return _.base.y}),y.defined(xv).curve(p),y(T)}return c==="vertical"&&ct(s)?y=dv().y(Fp).x1(Vp).x0(s):ct(s)?y=dv().x(Vp).y1(Fp).y0(s):y=fG().x(Vp).y(Fp),y.defined(xv).curve(p),y(m)},o8=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Ebe(e):i;return M.createElement("path",s8({},Ot(e,!1),Ob(e),{className:sr("recharts-curve",r),d:s,ref:a}))},OS={exports:{}},IS,WB;function Nbe(){if(WB)return IS;WB=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return IS=t,IS}var RS,XB;function jbe(){if(XB)return RS;XB=1;var t=Nbe();function e(){}function r(){}return r.resetWarningCache=e,RS=function(){function n(s,c,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function i(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},RS}var QB;function Cbe(){return QB||(QB=1,OS.exports=jbe()()),OS.exports}var kbe=Cbe();const zr=Dr(kbe),{getOwnPropertyNames:Obe,getOwnPropertySymbols:Ibe}=Object,{hasOwnProperty:Rbe}=Object.prototype;function MS(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function wv(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:a}=i,s=a.get(r),c=a.get(n);if(s&&c)return s===n&&c===r;a.set(r,n),a.set(n,r);const d=t(r,n,i);return a.delete(r),a.delete(n),d}}function Mbe(t){return t!=null?t[Symbol.toStringTag]:void 0}function YB(t){return Obe(t).concat(Ibe(t))}const Pbe=Object.hasOwn||((t,e)=>Rbe.call(t,e));function l0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Dbe="__v",Lbe="__o",Bbe="_owner",{getOwnPropertyDescriptor:ZB,keys:JB}=Object;function Ube(t,e){return t.byteLength===e.byteLength&&ax(new Uint8Array(t),new Uint8Array(e))}function zbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function $be(t,e){return t.byteLength===e.byteLength&&ax(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Vbe(t,e){return l0(t.getTime(),e.getTime())}function Fbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function qbe(t,e){return t===e}function eU(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.entries();let s,c,d=0;for(;(s=a.next())&&!s.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(i[m]){m++;continue}const y=s.value,b=c.value;if(r.equals(y[0],b[0],d,m,t,e,r)&&r.equals(y[1],b[1],y[0],b[0],t,e,r)){p=i[m]=!0;break}m++}if(!p)return!1;d++}return!0}const Hbe=l0;function Gbe(t,e,r){const n=JB(t);let i=n.length;if(JB(e).length!==i)return!1;for(;i-- >0;)if(!gW(t,e,r,n[i]))return!1;return!0}function qp(t,e,r){const n=YB(t);let i=n.length;if(YB(e).length!==i)return!1;let a,s,c;for(;i-- >0;)if(a=n[i],!gW(t,e,r,a)||(s=ZB(t,a),c=ZB(e,a),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function Kbe(t,e){return l0(t.valueOf(),e.valueOf())}function Wbe(t,e){return t.source===e.source&&t.flags===e.flags}function tU(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.values();let s,c;for(;(s=a.next())&&!s.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!i[p]&&r.equals(s.value,c.value,s.value,c.value,t,e,r)){h=i[p]=!0;break}p++}if(!h)return!1}return!0}function ax(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Xbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function gW(t,e,r,n){return(n===Bbe||n===Lbe||n===Dbe)&&(t.$$typeof||e.$$typeof)?!0:Pbe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Qbe="[object ArrayBuffer]",Ybe="[object Arguments]",Zbe="[object Boolean]",Jbe="[object DataView]",exe="[object Date]",txe="[object Error]",rxe="[object Map]",nxe="[object Number]",ixe="[object Object]",axe="[object RegExp]",sxe="[object Set]",oxe="[object String]",lxe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},cxe="[object URL]",uxe=Object.prototype.toString;function dxe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:b,unknownTagComparators:T}){return function(w,N,k){if(w===N)return!0;if(w==null||N==null)return!1;const C=typeof w;if(C!==typeof N)return!1;if(C!=="object")return C==="number"?c(w,N,k):C==="function"?a(w,N,k):!1;const $=w.constructor;if($!==N.constructor)return!1;if($===Object)return d(w,N,k);if(Array.isArray(w))return e(w,N,k);if($===Date)return n(w,N,k);if($===RegExp)return p(w,N,k);if($===Map)return s(w,N,k);if($===Set)return m(w,N,k);const I=uxe.call(w);if(I===exe)return n(w,N,k);if(I===axe)return p(w,N,k);if(I===rxe)return s(w,N,k);if(I===sxe)return m(w,N,k);if(I===ixe)return typeof w.then!="function"&&typeof N.then!="function"&&d(w,N,k);if(I===cxe)return b(w,N,k);if(I===txe)return i(w,N,k);if(I===Ybe)return d(w,N,k);if(lxe[I])return y(w,N,k);if(I===Qbe)return t(w,N,k);if(I===Jbe)return r(w,N,k);if(I===Zbe||I===nxe||I===oxe)return h(w,N,k);if(T){let L=T[I];if(!L){const E=Mbe(w);E&&(L=T[E])}if(L)return L(w,N,k)}return!1}}function hxe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Ube,areArraysEqual:r?qp:zbe,areDataViewsEqual:$be,areDatesEqual:Vbe,areErrorsEqual:Fbe,areFunctionsEqual:qbe,areMapsEqual:r?MS(eU,qp):eU,areNumbersEqual:Hbe,areObjectsEqual:r?qp:Gbe,arePrimitiveWrappersEqual:Kbe,areRegExpsEqual:Wbe,areSetsEqual:r?MS(tU,qp):tU,areTypedArraysEqual:r?MS(ax,qp):ax,areUrlsEqual:Xbe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=wv(n.areArraysEqual),a=wv(n.areMapsEqual),s=wv(n.areObjectsEqual),c=wv(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return n}function fxe(t){return function(e,r,n,i,a,s,c){return t(e,r,c)}}function pxe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:i})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(c,d){return e(c,d,a)}}const mxe=ju();ju({strict:!0});ju({circular:!0});ju({circular:!0,strict:!0});ju({createInternalComparator:()=>l0});ju({strict:!0,createInternalComparator:()=>l0});ju({circular:!0,createInternalComparator:()=>l0});ju({circular:!0,createInternalComparator:()=>l0,strict:!0});function ju(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,a=hxe(t),s=dxe(a),c=r?r(s):fxe(s);return pxe({circular:e,comparator:s,createState:n,equals:c,strict:i})}function gxe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function rU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):gxe(i)};requestAnimationFrame(n)}function l8(t){"@babel/helpers - typeof";return l8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l8(t)}function yxe(t){return wxe(t)||xxe(t)||bxe(t)||vxe()}function vxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bxe(t,e){if(t){if(typeof t=="string")return nU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nU(t,e)}}function nU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wxe(t){if(Array.isArray(t))return t}function _xe(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,c=yxe(s),d=c[0],h=c.slice(1);if(typeof d=="number"){rU(i.bind(null,h),d);return}i(d),rU(i.bind(null,h));return}l8(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function iU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(r),!0).forEach(function(n){yW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yW(t,e,r){return e=Sxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sxe(t){var e=Txe(t,"string");return vg(e)==="symbol"?e:String(e)}function Txe(t,e){if(vg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Axe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},Exe=function(e){return e},Nxe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},vm=function(e,r){return Object.keys(r).reduce(function(n,i){return aU(aU({},n),{},yW({},i,e(i,r[i])))},{})},sU=function(e,r,n){return e.map(function(i){return"".concat(Nxe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function jxe(t,e){return Oxe(t)||kxe(t,e)||vW(t,e)||Cxe()}function Cxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function Oxe(t){if(Array.isArray(t))return t}function Ixe(t){return Pxe(t)||Mxe(t)||vW(t)||Rxe()}function Rxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vW(t,e){if(t){if(typeof t=="string")return c8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c8(t,e)}}function Mxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pxe(t){if(Array.isArray(t))return c8(t)}function c8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var sx=1e-4,bW=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},xW=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},oU=function(e,r){return function(n){var i=bW(e,r);return xW(i,n)}},Dxe=function(e,r){return function(n){var i=bW(e,r),a=[].concat(Ixe(i.map(function(s,c){return s*c}).slice(1)),[0]);return xW(a,n)}},lU=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,c=1;break;case"ease":i=.25,a=.1,s=.25,c=1;break;case"ease-in":i=.42,a=0,s=1,c=1;break;case"ease-out":i=.42,a=0,s=.58,c=1;break;case"ease-in-out":i=0,a=0,s=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=jxe(h,4);i=p[0],a=p[1],s=p[2],c=p[3]}}}var m=oU(i,s),y=oU(a,c),b=Dxe(i,s),T=function(N){return N>1?1:N<0?0:N},_=function(N){for(var k=N>1?1:N,C=k,$=0;$<8;++$){var I=m(C)-k,L=b(C);if(Math.abs(I-k)<sx||L<sx)return y(C);C=T(C-I/L)}return y(C)};return _.isStepper=!1,_},Lxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,s=e.dt,c=s===void 0?17:s,d=function(p,m,y){var b=-(p-m)*n,T=y*a,_=y+(b-T)*c/1e3,w=y*c/1e3+p;return Math.abs(w-m)<sx&&Math.abs(_)<sx?[m,0]:[w,_]};return d.isStepper=!0,d.dt=c,d},Bxe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lU(i);case"spring":return Lxe();default:if(i.split("(")[0]==="cubic-bezier")return lU(i)}return typeof i=="function"?i:null};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function cU(t){return $xe(t)||zxe(t)||wW(t)||Uxe()}function Uxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $xe(t){if(Array.isArray(t))return d8(t)}function uU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(r),!0).forEach(function(n){u8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u8(t,e,r){return e=Vxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vxe(t){var e=Fxe(t,"string");return bg(e)==="symbol"?e:String(e)}function Fxe(t,e){if(bg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qxe(t,e){return Kxe(t)||Gxe(t,e)||wW(t,e)||Hxe()}function Hxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wW(t,e){if(t){if(typeof t=="string")return d8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d8(t,e)}}function d8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function Kxe(t){if(Array.isArray(t))return t}var ox=function(e,r,n){return e+(r-e)*n},h8=function(e){var r=e.from,n=e.to;return r!==n},Wxe=function t(e,r,n){var i=vm(function(a,s){if(h8(s)){var c=e(s.from,s.to,s.velocity),d=qxe(c,2),h=d[0],p=d[1];return qi(qi({},s),{},{from:h,velocity:p})}return s},r);return n<1?vm(function(a,s){return h8(s)?qi(qi({},s),{},{velocity:ox(s.velocity,i[a].velocity,n),from:ox(s.from,i[a].from,n)}):s},r):t(e,i,n-1)};const Xxe=(function(t,e,r,n,i){var a=Axe(t,e),s=a.reduce(function(w,N){return qi(qi({},w),{},u8({},N,[t[N],e[N]]))},{}),c=a.reduce(function(w,N){return qi(qi({},w),{},u8({},N,{from:t[N],velocity:0,to:e[N]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return vm(function(N,k){return k.from},c)},b=function(){return!Object.values(c).filter(h8).length},T=function(N){h||(h=N);var k=N-h,C=k/r.dt;c=Wxe(r,c,C),i(qi(qi(qi({},t),e),y())),h=N,b()||(d=requestAnimationFrame(m))},_=function(N){p||(p=N);var k=(N-p)/n,C=vm(function(I,L){return ox.apply(void 0,cU(L).concat([r(k)]))},s);if(i(qi(qi(qi({},t),e),C)),k<1)d=requestAnimationFrame(m);else{var $=vm(function(I,L){return ox.apply(void 0,cU(L).concat([r(1)]))},s);i(qi(qi(qi({},t),e),$))}};return m=r.isStepper?T:_,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}var Qxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Yxe(t,e){if(t==null)return{};var r=Zxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zxe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function PS(t){return r2e(t)||t2e(t)||e2e(t)||Jxe()}function Jxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e2e(t,e){if(t){if(typeof t=="string")return f8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f8(t,e)}}function t2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r2e(t){if(Array.isArray(t))return f8(t)}function f8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(r),!0).forEach(function(n){rm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rm(t,e,r){return e=_W(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_W(n.key),n)}}function a2e(t,e,r){return e&&i2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _W(t){var e=s2e(t,"string");return Zh(e)==="symbol"?e:String(e)}function s2e(t,e){if(Zh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p8(t,e)}function p8(t,e){return p8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},p8(t,e)}function l2e(t){var e=c2e();return function(){var n=lx(t),i;if(e){var a=lx(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return m8(this,i)}}function m8(t,e){if(e&&(Zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g8(t)}function g8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lx(t){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lx(t)}var Bo=(function(t){o2e(r,t);var e=l2e(r);function r(n,i){var a;n2e(this,r),a=e.call(this,n,i);var s=a.props,c=s.isActive,d=s.attributeName,h=s.from,p=s.to,m=s.steps,y=s.children,b=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(g8(a)),a.changeStyle=a.changeStyle.bind(g8(a)),!c||b<=0)return a.state={style:{}},typeof y=="function"&&(a.state={style:p}),m8(a);if(m&&m.length)a.state={style:m[0].style};else if(h){if(typeof y=="function")return a.state={style:h},m8(a);a.state={style:d?rm({},d,h):h}}else a.state={style:{}};return a}return a2e(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,c=a.canBegin,d=a.attributeName,h=a.shouldReAnimate,p=a.to,m=a.from,y=this.state.style;if(c){if(!s){var b={style:d?rm({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(b);return}if(!(mxe(i.to,p)&&i.canBegin&&i.isActive)){var T=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var _=T||h?m:i.to;if(this.state&&y){var w={style:d?rm({},d,_):_};(d&&y[d]!==_||!d&&y!==_)&&this.setState(w)}this.runAnimation(Qs(Qs({},this.props),{},{from:_,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,c=i.to,d=i.duration,h=i.easing,p=i.begin,m=i.onAnimationEnd,y=i.onAnimationStart,b=Xxe(s,c,Bxe(h),d,this.changeStyle),T=function(){a.stopJSAnimation=b()};this.manager.start([y,p,T,d,m])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,c=i.begin,d=i.onAnimationStart,h=s[0],p=h.style,m=h.duration,y=m===void 0?0:m,b=function(_,w,N){if(N===0)return _;var k=w.duration,C=w.easing,$=C===void 0?"ease":C,I=w.style,L=w.properties,E=w.onAnimationEnd,A=N>0?s[N-1]:w,R=L||Object.keys(I);if(typeof $=="function"||$==="spring")return[].concat(PS(_),[a.runJSAnimation.bind(a,{from:A.style,to:I,duration:k,easing:$}),k]);var F=sU(R,k,$),P=Qs(Qs(Qs({},A.style),I),{},{transition:F});return[].concat(PS(_),[P,k,E]).filter(Exe)};return this.manager.start([d].concat(PS(s.reduce(b,[p,Math.max(y,c)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=_xe());var a=i.begin,s=i.duration,c=i.attributeName,d=i.to,h=i.easing,p=i.onAnimationStart,m=i.onAnimationEnd,y=i.steps,b=i.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof h=="function"||typeof b=="function"||h==="spring"){this.runJSAnimation(i);return}if(y.length>1){this.runStepAnimation(i);return}var _=c?rm({},c,d):d,w=sU(Object.keys(_),s,h);T.start([p,a,Qs(Qs({},_),{},{transition:w}),s,m])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var c=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var d=Yxe(i,Qxe),h=M.Children.count(a),p=this.state.style;if(typeof a=="function")return a(p);if(!c||h===0||s<=0)return a;var m=function(b){var T=b.props,_=T.style,w=_===void 0?{}:_,N=T.className,k=M.cloneElement(b,Qs(Qs({},d),{},{style:Qs(Qs({},w),p),className:N}));return k};return h===1?m(M.Children.only(a)):te.createElement("div",null,M.Children.map(a,function(y){return m(y)}))}}]),r})(M.PureComponent);Bo.displayName="Animate";Bo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Bo.propTypes={from:zr.oneOfType([zr.object,zr.string]),to:zr.oneOfType([zr.object,zr.string]),attributeName:zr.string,duration:zr.number,begin:zr.number,easing:zr.oneOfType([zr.string,zr.func]),steps:zr.arrayOf(zr.shape({duration:zr.number.isRequired,style:zr.object.isRequired,easing:zr.oneOfType([zr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zr.func]),properties:zr.arrayOf("string"),onAnimationEnd:zr.func})),children:zr.oneOfType([zr.node,zr.func]),isActive:zr.bool,canBegin:zr.bool,onAnimationEnd:zr.func,shouldReAnimate:zr.bool,onAnimationStart:zr.func,onAnimationReStart:zr.func};var nm=_$();function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cx.apply(this,arguments)}function u2e(t,e){return p2e(t)||f2e(t,e)||h2e(t,e)||d2e()}function d2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h2e(t,e){if(t){if(typeof t=="string")return hU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hU(t,e)}}function hU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function p2e(t){if(Array.isArray(t))return t}function fU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(r),!0).forEach(function(n){m2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m2e(t,e,r){return e=g2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g2e(t){var e=y2e(t,"string");return xg(e)=="symbol"?e:e+""}function y2e(t,e){if(xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mU=function(e,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),c=i>=0?1:-1,d=n>=0?1:-1,h=i>=0&&n>=0||i<0&&n<0?1:0,p;if(s>0&&a instanceof Array){for(var m=[0,0,0,0],y=0,b=4;y<b;y++)m[y]=a[y]>s?s:a[y];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+i-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+i)),p+="L ".concat(e+d*m[3],",").concat(r+i),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+i-c*m[3])),p+="Z"}else if(s>0&&a===+a&&a>0){var T=Math.min(s,a);p="M ".concat(e,",").concat(r+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*T,`
            L `).concat(e+n,",").concat(r+i-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n-d*T,",").concat(r+i,`
            L `).concat(e+d*T,",").concat(r+i,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e,",").concat(r+i-c*T," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return p},v2e=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,s=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(a,a+c),p=Math.max(a,a+c),m=Math.min(s,s+d),y=Math.max(s,s+d);return n>=h&&n<=p&&i>=m&&i<=y}return!1},b2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zN=function(e){var r=pU(pU({},b2e),e),n=M.useRef(),i=M.useState(-1),a=u2e(i,2),s=a[0],c=a[1];M.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var $=n.current.getTotalLength();$&&c($)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,b=r.className,T=r.animationEasing,_=r.animationDuration,w=r.animationBegin,N=r.isAnimationActive,k=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var C=sr("recharts-rectangle",b);return k?te.createElement(Bo,{canBegin:s>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:_,animationEasing:T,isActive:k},function($){var I=$.width,L=$.height,E=$.x,A=$.y;return te.createElement(Bo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:_,isActive:N,easing:T},te.createElement("path",cx({},Ot(r,!0),{className:C,d:mU(E,A,I,L,y),ref:n})))}):te.createElement("path",cx({},Ot(r,!0),{className:C,d:mU(d,h,p,m,y)}))},x2e=["points","className","baseLinePoints","connectNulls"];function ch(){return ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ch.apply(this,arguments)}function w2e(t,e){if(t==null)return{};var r=_2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function gU(t){return E2e(t)||A2e(t)||T2e(t)||S2e()}function S2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T2e(t,e){if(t){if(typeof t=="string")return y8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y8(t,e)}}function A2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E2e(t){if(Array.isArray(t))return y8(t)}function y8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yU=function(e){return e&&e.x===+e.x&&e.y===+e.y},N2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){yU(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),yU(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},bm=function(e,r){var n=N2e(e);r&&(n=[n.reduce(function(a,s){return[].concat(gU(a),gU(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},j2e=function(e,r,n){var i=bm(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(bm(r.reverse(),n).slice(1))},SW=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=w2e(e,x2e);if(!r||!r.length)return null;var c=sr("recharts-polygon",n);if(i&&i.length){var d=s.stroke&&s.stroke!=="none",h=j2e(r,i,a);return te.createElement("g",{className:c},te.createElement("path",ch({},Ot(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:h})),d?te.createElement("path",ch({},Ot(s,!0),{fill:"none",d:bm(r,a)})):null,d?te.createElement("path",ch({},Ot(s,!0),{fill:"none",d:bm(i,a)})):null)}var p=bm(r,a);return te.createElement("path",ch({},Ot(s,!0),{fill:p.slice(-1)==="Z"?s.fill:"none",className:c,d:p}))};function v8(){return v8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v8.apply(this,arguments)}var K2=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,s=sr("recharts-dot",a);return r===+r&&n===+n&&i===+i?M.createElement("circle",v8({},Ot(e,!1),Ob(e),{className:s,cx:r,cy:n,r:i})):null};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}var C2e=["x","y","top","left","width","height","className"];function b8(){return b8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b8.apply(this,arguments)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function k2e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){O2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O2e(t,e,r){return e=I2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I2e(t){var e=R2e(t,"string");return wg(e)=="symbol"?e:e+""}function R2e(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M2e(t,e){if(t==null)return{};var r=P2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var D2e=function(e,r,n,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},L2e=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.top,c=s===void 0?0:s,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,b=y===void 0?0:y,T=e.className,_=M2e(e,C2e),w=k2e({x:n,y:a,top:c,left:h,width:m,height:b},_);return!ct(n)||!ct(a)||!ct(m)||!ct(b)||!ct(c)||!ct(h)?null:te.createElement("path",b8({},Ot(w,!0),{className:sr("recharts-cross",T),d:D2e(n,a,m,b,c,h)}))},B2e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function U2e(t,e){if(t==null)return{};var r=z2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xl.apply(this,arguments)}function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){$2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $2e(t,e,r){return e=V2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V2e(t){var e=F2e(t,"string");return _g(e)=="symbol"?e:e+""}function F2e(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q2e=function(e,r,n,i){var a="";return i.forEach(function(s,c){var d=nn(r,n,e,s);c?a+="L ".concat(d.x,",").concat(d.y):a+="M ".concat(d.x,",").concat(d.y)}),a+="Z",a},H2e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=Sg({stroke:"#ccc"},Ot(e,!1));return te.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(h){var p=nn(r,n,i,h),m=nn(r,n,a,h);return te.createElement("line",Xl({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},G2e=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.index,s=Sg(Sg({stroke:"#ccc"},Ot(e,!1)),{},{fill:"none"});return te.createElement("circle",Xl({},s,{className:sr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:r,cy:n,r:i}))},K2e=function(e){var r=e.radius,n=e.index,i=Sg(Sg({stroke:"#ccc"},Ot(e,!1)),{},{fill:"none"});return te.createElement("path",Xl({},i,{className:sr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:q2e(r,e.cx,e.cy,e.polarAngles)}))},W2e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:te.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(i,a){var s=a;return n==="circle"?te.createElement(G2e,Xl({key:s},e,{radius:i,index:a})):te.createElement(K2e,Xl({key:s},e,{radius:i,index:a}))}))},TW=function(e){var r=e.cx,n=r===void 0?0:r,i=e.cy,a=i===void 0?0:i,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,b=y===void 0?!0:y,T=U2e(e,B2e);return h<=0?null:te.createElement("g",{className:"recharts-polar-grid"},te.createElement(H2e,Xl({cx:n,cy:a,innerRadius:c,outerRadius:h,gridType:m,radialLines:b},T)),te.createElement(W2e,Xl({cx:n,cy:a,innerRadius:c,outerRadius:h,gridType:m,radialLines:b},T)))};TW.displayName="PolarGrid";var DS,xU;function X2e(){if(xU)return DS;xU=1;var t=V2(),e=LK(),r=qo();function n(i,a){return i&&i.length?t(i,r(a,2),e):void 0}return DS=n,DS}var Q2e=X2e();const Y2e=Dr(Q2e);var LS,wU;function Z2e(){if(wU)return LS;wU=1;var t=V2(),e=qo(),r=BK();function n(i,a){return i&&i.length?t(i,e(a,2),r):void 0}return LS=n,LS}var J2e=Z2e();const ewe=Dr(J2e);var twe=["cx","cy","angle","ticks","axisLine"],rwe=["ticks","tick","angle","tickFormatter","stroke"];function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xm.apply(this,arguments)}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){W2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SU(t,e){if(t==null)return{};var r=nwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function iwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EW(n.key),n)}}function awe(t,e,r){return e&&TU(t.prototype,e),r&&TU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function swe(t,e,r){return e=ux(e),owe(t,AW()?Reflect.construct(e,r||[],ux(t).constructor):e.apply(t,r))}function owe(t,e){if(e&&(Jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lwe(t)}function lwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AW=function(){return!!t})()}function ux(t){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ux(t)}function cwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x8(t,e)}function x8(t,e){return x8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x8(t,e)}function W2(t,e,r){return e=EW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EW(t){var e=uwe(t,"string");return Jh(e)=="symbol"?e:e+""}function uwe(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p1=(function(t){function e(){return iwe(this,e),swe(this,e,arguments)}return cwe(e,t),awe(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,c=a.cx,d=a.cy;return nn(c,d,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=Y2e(c,function(p){return p.coordinate||0}),h=ewe(c,function(p){return p.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,h=SU(n,twe),p=c.reduce(function(T,_){return[Math.min(T[0],_.coordinate),Math.max(T[1],_.coordinate)]},[1/0,-1/0]),m=nn(i,a,p[0],s),y=nn(i,a,p[1],s),b=sd(sd(sd({},Ot(h,!1)),{},{fill:"none"},Ot(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return te.createElement("line",xm({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.angle,d=i.tickFormatter,h=i.stroke,p=SU(i,rwe),m=this.getTickTextAnchor(),y=Ot(p,!1),b=Ot(s,!1),T=a.map(function(_,w){var N=n.getTickValueCoord(_),k=sd(sd(sd(sd({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(N.x,", ").concat(N.y,")")},y),{},{stroke:"none",fill:h},b),{},{index:w},N),{},{payload:_});return te.createElement(Cr,xm({className:sr("recharts-polar-radius-axis-tick",dW(s)),key:"tick-".concat(_.coordinate)},Gd(n.props,_,w)),e.renderTickItem(s,k,d?d(_.value,w):_.value))});return te.createElement(Cr,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:te.createElement(Cr,{className:sr("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Ki.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return te.isValidElement(n)?s=te.cloneElement(n,i):Ht(n)?s=n(i):s=te.createElement(Kh,xm({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(M.PureComponent);W2(p1,"displayName","PolarRadiusAxis");W2(p1,"axisType","radiusAxis");W2(p1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yd.apply(this,arguments)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function od(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){X2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jW(n.key),n)}}function hwe(t,e,r){return e&&EU(t.prototype,e),r&&EU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fwe(t,e,r){return e=dx(e),pwe(t,NW()?Reflect.construct(e,r||[],dx(t).constructor):e.apply(t,r))}function pwe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mwe(t)}function mwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!t})()}function dx(t){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dx(t)}function gwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w8(t,e)}function w8(t,e){return w8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},w8(t,e)}function X2(t,e,r){return e=jW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jW(t){var e=ywe(t,"string");return ef(e)=="symbol"?e:e+""}function ywe(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vwe=Math.PI/180,NU=1e-5,m1=(function(t){function e(){return dwe(this,e),fwe(this,e,arguments)}return gwe(e,t),hwe(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,c=i.radius,d=i.orientation,h=i.tickSize,p=h||8,m=nn(a,s,c,n.coordinate),y=nn(a,s,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*vwe),s;return a>NU?s=i==="outer"?"start":"end":a<-NU?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,h=od(od({},Ot(this.props,!1)),{},{fill:"none"},Ot(c,!1));if(d==="circle")return te.createElement(K2,yd({className:"recharts-polar-angle-axis-line"},h,{cx:i,cy:a,r:s}));var p=this.props.ticks,m=p.map(function(y){return nn(i,a,s,y.coordinate)});return te.createElement(SW,yd({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.tickLine,d=i.tickFormatter,h=i.stroke,p=Ot(this.props,!1),m=Ot(s,!1),y=od(od({},p),{},{fill:"none"},Ot(c,!1)),b=a.map(function(T,_){var w=n.getTickLineCoord(T),N=n.getTickTextAnchor(T),k=od(od(od({textAnchor:N},p),{},{stroke:"none",fill:h},m),{},{index:_,payload:T,x:w.x2,y:w.y2});return te.createElement(Cr,yd({className:sr("recharts-polar-angle-axis-tick",dW(s)),key:"tick-".concat(T.coordinate)},Gd(n.props,T,_)),c&&te.createElement("line",yd({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,k,d?d(T.value,_):T.value))});return te.createElement(Cr,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:te.createElement(Cr,{className:sr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return te.isValidElement(n)?s=te.cloneElement(n,i):Ht(n)?s=n(i):s=te.createElement(Kh,yd({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(M.PureComponent);X2(m1,"displayName","PolarAngleAxis");X2(m1,"axisType","angleAxis");X2(m1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var BS,jU;function bwe(){if(jU)return BS;jU=1;var t=DG(),e=t(Object.getPrototypeOf,Object);return BS=e,BS}var US,CU;function xwe(){if(CU)return US;CU=1;var t=ec(),e=bwe(),r=tc(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,c=a.hasOwnProperty,d=s.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=c.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return US=h,US}var wwe=xwe();const _we=Dr(wwe);var zS,kU;function Swe(){if(kU)return zS;kU=1;var t=ec(),e=tc(),r="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&t(i)==r}return zS=n,zS}var Twe=Swe();const Awe=Dr(Twe);function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hx.apply(this,arguments)}function Ewe(t,e){return kwe(t)||Cwe(t,e)||jwe(t,e)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jwe(t,e){if(t){if(typeof t=="string")return OU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OU(t,e)}}function OU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Cwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function kwe(t){if(Array.isArray(t))return t}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){Owe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Owe(t,e,r){return e=Iwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Iwe(t){var e=Rwe(t,"string");return Tg(e)=="symbol"?e:e+""}function Rwe(t,e){if(Tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MU=function(e,r,n,i,a){var s=n-i,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-s/2,",").concat(r+a),c+="L ".concat(e+n-s/2-i,",").concat(r+a),c+="L ".concat(e,",").concat(r," Z"),c},Mwe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pwe=function(e){var r=RU(RU({},Mwe),e),n=M.useRef(),i=M.useState(-1),a=Ewe(i,2),s=a[0],c=a[1];M.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&c(C)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,b=r.className,T=r.animationEasing,_=r.animationDuration,w=r.animationBegin,N=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var k=sr("recharts-trapezoid",b);return N?te.createElement(Bo,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:_,animationEasing:T,isActive:N},function(C){var $=C.upperWidth,I=C.lowerWidth,L=C.height,E=C.x,A=C.y;return te.createElement(Bo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:_,easing:T},te.createElement("path",hx({},Ot(r,!0),{className:k,d:MU(E,A,$,I,L),ref:n})))}):te.createElement("g",null,te.createElement("path",hx({},Ot(r,!0),{className:k,d:MU(d,h,p,m,y)})))},Dwe=["option","shapeType","propTransformer","activeClassName","isActive"];function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function Lwe(t,e){if(t==null)return{};var r=Bwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){Uwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uwe(t,e,r){return e=zwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zwe(t){var e=$we(t,"string");return Ag(e)=="symbol"?e:e+""}function $we(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vwe(t,e){return fx(fx({},e),t)}function Fwe(t,e){return t==="symbols"}function DU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return te.createElement(zN,r);case"trapezoid":return te.createElement(Pwe,r);case"sector":return te.createElement(mW,r);case"symbols":if(Fwe(e))return te.createElement(I2,r);break;default:return null}}function qwe(t){return M.isValidElement(t)?t.props:t}function _8(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Vwe:n,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,c=t.isActive,d=Lwe(t,Dwe),h;if(M.isValidElement(e))h=M.cloneElement(e,fx(fx({},d),qwe(e)));else if(Ht(e))h=e(d);else if(_we(e)&&!Awe(e)){var p=i(e,d);h=te.createElement(DU,{shapeType:r,elementProps:p})}else{var m=d;h=te.createElement(DU,{shapeType:r,elementProps:m})}return c?te.createElement(Cr,{className:s},h):h}function Q2(t,e){return e!=null&&"trapezoids"in t.props}function Y2(t,e){return e!=null&&"sectors"in t.props}function Eg(t,e){return e!=null&&"points"in t.props}function Hwe(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function Gwe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Kwe(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function Wwe(t,e){var r;return Q2(t,e)?r=Hwe:Y2(t,e)?r=Gwe:Eg(t,e)&&(r=Kwe),r}function Xwe(t,e){var r;return Q2(t,e)?r="trapezoids":Y2(t,e)?r="sectors":Eg(t,e)&&(r="points"),r}function Qwe(t,e){if(Q2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Y2(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Eg(t,e)?e.payload:{}}function Ywe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=Xwe(r,e),a=Qwe(r,e),s=n.filter(function(d,h){var p=h1(a,d),m=r.props[i].filter(function(T){var _=Wwe(r,e);return _(T,e)}),y=r.props[i].indexOf(m[m.length-1]),b=h===y;return p&&b}),c=n.indexOf(s[s.length-1]);return c}var $S,LU;function Zwe(){if(LU)return $S;LU=1;function t(e){return e&&e.length?e[0]:void 0}return $S=t,$S}var VS,BU;function Jwe(){return BU||(BU=1,VS=Zwe()),VS}var e4e=Jwe();const t4e=Dr(e4e);var r4e=["key"];function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function n4e(t,e){if(t==null)return{};var r=i4e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function i4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},px.apply(this,arguments)}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){_l(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kW(n.key),n)}}function s4e(t,e,r){return e&&zU(t.prototype,e),r&&zU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o4e(t,e,r){return e=mx(e),l4e(t,CW()?Reflect.construct(e,r||[],mx(t).constructor):e.apply(t,r))}function l4e(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c4e(t)}function c4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CW=function(){return!!t})()}function mx(t){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mx(t)}function u4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S8(t,e)}function S8(t,e){return S8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S8(t,e)}function _l(t,e,r){return e=kW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kW(t){var e=d4e(t,"string");return tf(e)=="symbol"?e:e+""}function d4e(t,e){if(tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var g1=(function(t){function e(){var r;a4e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=o4e(this,e,[].concat(i)),_l(r,"state",{isAnimationFinished:!1}),_l(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ht(s)&&s()}),_l(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ht(s)&&s()}),_l(r,"handleMouseEnter",function(s){var c=r.props.onMouseEnter;c&&c(r.props,s)}),_l(r,"handleMouseLeave",function(s){var c=r.props.onMouseLeave;c&&c(r.props,s)}),r}return u4e(e,t),s4e(e,[{key:"renderDots",value:function(n){var i=this.props,a=i.dot,s=i.dataKey,c=Ot(this.props,!1),d=Ot(a,!0),h=n.map(function(p,m){var y=ma(ma(ma({key:"dot-".concat(m),r:3},c),d),{},{dataKey:s,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(a,y)});return te.createElement(Cr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,a=i.shape,s=i.dot,c=i.isRange,d=i.baseLinePoints,h=i.connectNulls,p;return te.isValidElement(a)?p=te.cloneElement(a,ma(ma({},this.props),{},{points:n})):Ht(a)?p=a(ma(ma({},this.props),{},{points:n})):p=te.createElement(SW,px({},Ot(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),te.createElement(Cr,{className:"recharts-radar-polygon"},p,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,h=i.animationEasing,p=i.animationId,m=this.state.prevPoints;return te.createElement(Bo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=m&&m.length/a.length,_=a.map(function(w,N){var k=m&&m[Math.floor(N*T)];if(k){var C=Da(k.x,w.x),$=Da(k.y,w.y);return ma(ma({},w),{},{x:C(b),y:$(b)})}var I=Da(w.cx,w.x),L=Da(w.cy,w.y);return ma(ma({},w),{},{x:I(b),y:L(b)})});return n.renderPolygonStatically(_)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return a&&i&&i.length&&!s&&(!c||!h1(c,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.className,s=n.points,c=n.isAnimationActive;if(i||!s||!s.length)return null;var d=this.state.isAnimationFinished,h=sr("recharts-radar",a);return te.createElement(Cr,{className:h},this.renderPolygon(),(!c||d)&&Ll.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var a;if(te.isValidElement(n))a=te.cloneElement(n,i);else if(Ht(n))a=n(i);else{var s=i.key,c=n4e(i,r4e);a=te.createElement(K2,px({},c,{key:s,className:sr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return a}}])})(M.PureComponent);_l(g1,"displayName","Radar");_l(g1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!a0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_l(g1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,i=t.dataKey,a=t.bandSize,s=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?a??0:0;n.forEach(function(y,b){var T=Qi(y,r.dataKey,b),_=Qi(y,i),w=r.scale(T)+p,N=Array.isArray(_)?fW(_):_,k=er(N)?void 0:e.scale(N);Array.isArray(_)&&_.length>=2&&(d=!0),h.push(ma(ma({},nn(s,c,k,w)),{},{name:T,value:_,cx:s,cy:c,radius:k,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var b=t4e(y.value),T=er(b)?void 0:e.scale(b);m.push(ma(ma({},y),{},{radius:T},nn(s,c,T,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var FS,$U;function h4e(){if($U)return FS;$U=1;var t=Math.ceil,e=Math.max;function r(n,i,a,s){for(var c=-1,d=e(t((i-n)/(a||1)),0),h=Array(d);d--;)h[s?d:++c]=n,n+=a;return h}return FS=r,FS}var qS,VU;function OW(){if(VU)return qS;VU=1;var t=ZG(),e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*r}return i===i?i:0}return qS=n,qS}var HS,FU;function f4e(){if(FU)return HS;FU=1;var t=h4e(),e=P2(),r=OW();function n(i){return function(a,s,c){return c&&typeof c!="number"&&e(a,s,c)&&(s=c=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),c=c===void 0?a<s?1:-1:r(c),t(a,s,c,i)}}return HS=n,HS}var GS,qU;function p4e(){if(qU)return GS;qU=1;var t=f4e(),e=t();return GS=e,GS}var m4e=p4e();const gx=Dr(m4e);function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function HU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(r),!0).forEach(function(n){IW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IW(t,e,r){return e=g4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g4e(t){var e=y4e(t,"string");return Ng(e)=="symbol"?e:e+""}function y4e(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v4e=["Webkit","Moz","O","ms"],b4e=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=v4e.reduce(function(a,s){return GU(GU({},a),{},IW({},s+n,r))},{});return i[e]=r,i};function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yx.apply(this,arguments)}function KU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function KS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(r),!0).forEach(function(n){ts(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MW(n.key),n)}}function w4e(t,e,r){return e&&WU(t.prototype,e),r&&WU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _4e(t,e,r){return e=vx(e),S4e(t,RW()?Reflect.construct(e,r||[],vx(t).constructor):e.apply(t,r))}function S4e(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T4e(t)}function T4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!t})()}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vx(t)}function A4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T8(t,e)}function T8(t,e){return T8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},T8(t,e)}function ts(t,e,r){return e=MW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MW(t){var e=E4e(t,"string");return rf(e)=="symbol"?e:e+""}function E4e(t,e){if(rf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var N4e=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,s=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=gm().domain(gx(0,d)).range([a,a+s-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(i),scale:h,scaleValues:p}},XU=function(e){return e.changedTouches&&!!e.changedTouches.length},nf=(function(t){function e(r){var n;return x4e(this,e),n=_4e(this,e,[r]),ts(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),ts(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),ts(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,c=i.startIndex;s==null||s({endIndex:a,startIndex:c})}),n.detachDragEndListener()}),ts(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ts(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ts(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ts(n,"handleSlideDragStart",function(i){var a=XU(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return A4e(e,t),w4e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(i,a),y=Math.max(i,a),b=e.getIndexInRange(s,m),T=e.getIndexInRange(s,y);return{startIndex:b-b%d,endIndex:T===p?p:T-T%d}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,c=i.dataKey,d=Qi(a[n],c,n);return Ht(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,c=i.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,b=d.endIndex,T=d.onChange,_=n.pageX-a;_>0?_=Math.min(_,h+p-m-c,h+p-m-s):_<0&&(_=Math.max(_,h-s,h-c));var w=this.getIndex({startX:s+_,endX:c+_});(w.startIndex!==y||w.endIndex!==b)&&T&&T(w),this.setState({startX:s+_,endX:c+_,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=XU(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,c=i.endX,d=i.startX,h=this.state[s],p=this.props,m=p.x,y=p.width,b=p.travellerWidth,T=p.onChange,_=p.gap,w=p.data,N={startX:this.state.startX,endX:this.state.endX},k=n.pageX-a;k>0?k=Math.min(k,m+y-b-h):k<0&&(k=Math.max(k,m-h)),N[s]=h+k;var C=this.getIndex(N),$=C.startIndex,I=C.endIndex,L=function(){var A=w.length-1;return s==="startX"&&(c>d?$%_===0:I%_===0)||c<d&&I===A||s==="endX"&&(c>d?I%_===0:$%_===0)||c>d&&I===A};this.setState(ts(ts({},s,h+k),"brushMoveStartX",n.pageX),function(){T&&L()&&T(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,c=s.scaleValues,d=s.startX,h=s.endX,p=this.state[i],m=c.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=c.length)){var b=c[y];i==="startX"&&b>=h||i==="endX"&&b<=d||this.setState(ts({},i,b),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.fill,h=n.stroke;return te.createElement("rect",{stroke:h,fill:d,x:i,y:a,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=M.Children.only(h);return m?te.cloneElement(m,{x:i,y:a,width:s,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,b=d.ariaLabel,T=d.data,_=d.startIndex,w=d.endIndex,N=Math.max(n,this.props.x),k=KS(KS({},Ot(this.props,!1)),{},{x:N,y:h,width:p,height:m}),C=b||"Min value: ".concat((a=T[_])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return te.createElement(Cr,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),c.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,i))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,k))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,c=a.height,d=a.stroke,h=a.travellerWidth,p=Math.min(n,i)+h,m=Math.max(Math.abs(i-n)-h,0);return te.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:s,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,b=5,T={pointerEvents:"none",fill:h};return te.createElement(Cr,{className:"recharts-brush-texts"},te.createElement(Kh,yx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-b,y:s+c/2},T),this.getTextOfTick(i)),te.createElement(Kh,yx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+b,y:s+c/2},T),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,b=y.startX,T=y.endX,_=y.isTextActive,w=y.isSlideMoving,N=y.isTravellerMoving,k=y.isTravellerFocused;if(!i||!i.length||!ct(c)||!ct(d)||!ct(h)||!ct(p)||h<=0||p<=0)return null;var C=sr("recharts-brush",a),$=te.Children.count(s)===1,I=b4e("userSelect","none");return te.createElement(Cr,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),$&&this.renderPanorama(),this.renderSlide(b,T),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(T,"endX"),(_||w||N||k||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,c=n.height,d=n.stroke,h=Math.floor(a+c/2)-1;return te.createElement(te.Fragment,null,te.createElement("rect",{x:i,y:a,width:s,height:c,fill:d,stroke:"none"}),te.createElement("line",{x1:i+1,y1:h,x2:i+s-1,y2:h,fill:"none",stroke:"#fff"}),te.createElement("line",{x1:i+1,y1:h+2,x2:i+s-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return te.isValidElement(n)?a=te.cloneElement(n,i):Ht(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(a!==i.prevData||h!==i.prevUpdateId)return KS({prevData:a,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s},a&&a.length?N4e({data:a,width:s,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||c!==i.prevX||d!==i.prevTravellerWidth)){i.scale.range([c,c+s-d]);var y=i.scale.domain().map(function(b){return i.scale(b)});return{prevData:a,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,c=a-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>i?c=d:s=d}return i>=n[c]?c:s}}])})(M.PureComponent);ts(nf,"displayName","Brush");ts(nf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var WS,QU;function j4e(){if(QU)return WS;QU=1;var t=dN();function e(r,n){var i;return t(r,function(a,s,c){return i=n(a,s,c),!i}),!!i}return WS=e,WS}var XS,YU;function C4e(){if(YU)return XS;YU=1;var t=CG(),e=qo(),r=j4e(),n=qa(),i=P2();function a(s,c,d){var h=n(s)?t:r;return d&&i(s,c,d)&&(c=void 0),h(s,e(c,3))}return XS=a,XS}var k4e=C4e();const O4e=Dr(k4e);var Io=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},QS,ZU;function I4e(){if(ZU)return QS;ZU=1;var t=KG();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return QS=e,QS}var YS,JU;function R4e(){if(JU)return YS;JU=1;var t=I4e(),e=HG(),r=qo();function n(i,a){var s={};return a=r(a,3),e(i,function(c,d,h){t(s,d,a(c,d,h))}),s}return YS=n,YS}var M4e=R4e();const P4e=Dr(M4e);var ZS,ez;function D4e(){if(ez)return ZS;ez=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!r(e[n],n,e))return!1;return!0}return ZS=t,ZS}var JS,tz;function L4e(){if(tz)return JS;tz=1;var t=dN();function e(r,n){var i=!0;return t(r,function(a,s,c){return i=!!n(a,s,c),i}),i}return JS=e,JS}var eT,rz;function B4e(){if(rz)return eT;rz=1;var t=D4e(),e=L4e(),r=qo(),n=qa(),i=P2();function a(s,c,d){var h=n(s)?t:e;return d&&i(s,c,d)&&(c=void 0),h(s,r(c,3))}return eT=a,eT}var U4e=B4e();const PW=Dr(U4e);var z4e=["x","y"];function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function A8(){return A8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A8.apply(this,arguments)}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){$4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $4e(t,e,r){return e=V4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V4e(t){var e=F4e(t,"string");return jg(e)=="symbol"?e:e+""}function F4e(t,e){if(jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q4e(t,e){if(t==null)return{};var r=H4e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function H4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G4e(t,e){var r=t.x,n=t.y,i=q4e(t,z4e),a="".concat(r),s=parseInt(a,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||i.height),p=parseInt(h,10),m="".concat(e.width||i.width),y=parseInt(m,10);return Hp(Hp(Hp(Hp(Hp({},e),i),s?{x:s}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function iz(t){return te.createElement(_8,A8({shapeType:"rectangle",propTransformer:G4e,activeClassName:"recharts-active-bar"},t))}var K4e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=ct(n)||Qde(n);return a?e(n,i):(a||Wd(),r)}},W4e=["value","background"],DW;function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function X4e(t,e){if(t==null)return{};var r=Q4e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Q4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bx(){return bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bx.apply(this,arguments)}function az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?az(Object(r),!0).forEach(function(n){Zc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BW(n.key),n)}}function Z4e(t,e,r){return e&&sz(t.prototype,e),r&&sz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function J4e(t,e,r){return e=xx(e),e5e(t,LW()?Reflect.construct(e,r||[],xx(t).constructor):e.apply(t,r))}function e5e(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t5e(t)}function t5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!t})()}function xx(t){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xx(t)}function r5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E8(t,e)}function E8(t,e){return E8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},E8(t,e)}function Zc(t,e,r){return e=BW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BW(t){var e=n5e(t,"string");return af(e)=="symbol"?e:e+""}function n5e(t,e){if(af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var y1=(function(t){function e(){var r;Y4e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=J4e(this,e,[].concat(i)),Zc(r,"state",{isAnimationFinished:!1}),Zc(r,"id",s1("recharts-bar-")),Zc(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Zc(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return r5e(e,t),Z4e(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.dataKey,d=a.activeIndex,h=a.activeBar,p=Ot(this.props,!1);return n&&n.map(function(m,y){var b=y===d,T=b?h:s,_=ci(ci(ci({},p),m),{},{isActive:b,option:T,index:y,dataKey:c,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return te.createElement(Cr,bx({className:"recharts-bar-rectangle"},Gd(i.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),te.createElement(iz,_))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,c=i.isAnimationActive,d=i.animationBegin,h=i.animationDuration,p=i.animationEasing,m=i.animationId,y=this.state.prevData;return te.createElement(Bo,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var T=b.t,_=a.map(function(w,N){var k=y&&y[N];if(k){var C=Da(k.x,w.x),$=Da(k.y,w.y),I=Da(k.width,w.width),L=Da(k.height,w.height);return ci(ci({},w),{},{x:C(T),y:$(T),width:I(T),height:L(T)})}if(s==="horizontal"){var E=Da(0,w.height),A=E(T);return ci(ci({},w),{},{y:w.y+w.height-A,height:A})}var R=Da(0,w.width),F=R(T);return ci(ci({},w),{},{width:F})});return te.createElement(Cr,null,n.renderRectanglesStatically(_))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!h1(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,c=i.activeIndex,d=Ot(this.props.background,!1);return a.map(function(h,p){h.value;var m=h.background,y=X4e(h,W4e);if(!m)return null;var b=ci(ci(ci(ci(ci({},y),{},{fill:"#eee"},m),d),Gd(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:p,className:"recharts-bar-background-rectangle"});return te.createElement(iz,bx({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},b))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,c=a.xAxis,d=a.yAxis,h=a.layout,p=a.children,m=us(p,f1);if(!m)return null;var y=h==="vertical"?s[0].height/2:s[0].width/2,b=function(w,N){var k=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:k,errorVal:Qi(w,N)}},T={clipPath:n?"url(#clipPath-".concat(i,")"):null};return te.createElement(Cr,T,m.map(function(_){return te.cloneElement(_,{key:"error-bar-".concat(i,"-").concat(_.props.dataKey),data:s,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:b})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,b=n.isAnimationActive,T=n.background,_=n.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,N=sr("recharts-bar",s),k=c&&c.allowDataOverflow,C=d&&d.allowDataOverflow,$=k||C,I=er(_)?this.id:_;return te.createElement(Cr,{className:N},k||C?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(I)},te.createElement("rect",{x:k?h:h-m/2,y:C?p:p-y/2,width:k?m:m*2,height:C?y:y*2}))):null,te.createElement(Cr,{className:"recharts-bar-rectangles",clipPath:$?"url(#clipPath-".concat(I,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar($,I),(!b||w)&&Ll.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])})(M.PureComponent);DW=y1;Zc(y1,"displayName","Bar");Zc(y1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!a0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Zc(y1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,b=dve(n,r);if(!b)return null;var T=e.layout,_=r.type.defaultProps,w=_!==void 0?ci(ci({},_),r.props):r.props,N=w.dataKey,k=w.children,C=w.minPointSize,$=T==="horizontal"?s:a,I=h?$.scale.domain():null,L=vve({numericAxis:$}),E=us(k,pN),A=m.map(function(R,F){var P,B,D,Y,J,X;h?P=hve(h[p+F],I):(P=Qi(R,N),Array.isArray(P)||(P=[L,P]));var ee=K4e(C,DW.defaultProps.minPointSize)(P[1],F);if(T==="horizontal"){var Z,ge=[s.scale(P[0]),s.scale(P[1])],ce=ge[0],Q=ge[1];B=OB({axis:a,ticks:c,bandSize:i,offset:b.offset,entry:R,index:F}),D=(Z=Q??ce)!==null&&Z!==void 0?Z:void 0,Y=b.size;var re=ce-Q;if(J=Number.isNaN(re)?0:re,X={x:B,y:s.y,width:Y,height:s.height},Math.abs(ee)>0&&Math.abs(J)<Math.abs(ee)){var de=to(J||ee)*(Math.abs(ee)-Math.abs(J));D-=de,J+=de}}else{var oe=[a.scale(P[0]),a.scale(P[1])],ae=oe[0],pe=oe[1];if(B=ae,D=OB({axis:s,ticks:d,bandSize:i,offset:b.offset,entry:R,index:F}),Y=pe-ae,J=b.size,X={x:a.x,y:D,width:a.width,height:J},Math.abs(ee)>0&&Math.abs(Y)<Math.abs(ee)){var ve=to(Y||ee)*(Math.abs(ee)-Math.abs(Y));Y+=ve}}return ci(ci(ci({},R),{},{x:B,y:D,width:Y,height:J,value:h?P:P[1],payload:R,background:X},E&&E[F]&&E[F].props),{},{tooltipPayload:[cW(r,R)],tooltipPosition:{x:B+Y/2,y:D+J/2}})});return ci({data:A,layout:T},y)});function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function i5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UW(n.key),n)}}function a5e(t,e,r){return e&&oz(t.prototype,e),r&&oz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){Z2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z2(t,e,r){return e=UW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UW(t){var e=s5e(t,"string");return Cg(e)=="symbol"?e:e+""}function s5e(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o5e=function(e,r,n,i,a){var s=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!rs(h,y1);return p.reduce(function(b,T){var _=r[T],w=_.orientation,N=_.domain,k=_.padding,C=k===void 0?{}:k,$=_.mirror,I=_.reversed,L="".concat(w).concat($?"Mirror":""),E,A,R,F,P;if(_.type==="number"&&(_.padding==="gap"||_.padding==="no-gap")){var B=N[1]-N[0],D=1/0,Y=_.categoricalDomain.sort(e0e);if(Y.forEach(function(oe,ae){ae>0&&(D=Math.min((oe||0)-(Y[ae-1]||0),D))}),Number.isFinite(D)){var J=D/B,X=_.layout==="vertical"?n.height:n.width;if(_.padding==="gap"&&(E=J*X/2),_.padding==="no-gap"){var ee=ro(e.barCategoryGap,J*X),Z=J*X/2;E=Z-ee-(Z-ee)/X*ee}}}i==="xAxis"?A=[n.left+(C.left||0)+(E||0),n.left+n.width-(C.right||0)-(E||0)]:i==="yAxis"?A=d==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(E||0),n.top+n.height-(C.bottom||0)-(E||0)]:A=_.range,I&&(A=[A[1],A[0]]);var ge=aW(_,a,y),ce=ge.scale,Q=ge.realScaleType;ce.domain(N).range(A),sW(ce);var re=oW(ce,Js(Js({},_),{},{realScaleType:Q}));i==="xAxis"?(P=w==="top"&&!$||w==="bottom"&&$,R=n.left,F=m[L]-P*_.height):i==="yAxis"&&(P=w==="left"&&!$||w==="right"&&$,R=m[L]-P*_.width,F=n.top);var de=Js(Js(Js({},_),re),{},{realScaleType:Q,x:R,y:F,scale:ce,width:i==="xAxis"?n.width:_.width,height:i==="yAxis"?n.height:_.height});return de.bandSize=rx(de,re),!_.hide&&i==="xAxis"?m[L]+=(P?-1:1)*de.height:_.hide||(m[L]+=(P?-1:1)*de.width),Js(Js({},b),{},Z2({},T,de))},{})},zW=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},l5e=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return zW({x:r,y:n},{x:i,y:a})},$W=(function(){function t(e){i5e(this,t),this.scale=e}return a5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(i){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])})();Z2($W,"EPS",1e-4);var $N=function(e){var r=Object.keys(e).reduce(function(n,i){return Js(Js({},n),{},Z2({},i,$W.create(e[i])))},{});return Js(Js({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,c=a.position;return P4e(i,function(d,h){return r[h].apply(d,{bandAware:s,position:c})})},isInRange:function(i){return PW(i,function(a,s){return r[s].isInRange(a)})}})};function c5e(t){return(t%180+180)%180}var u5e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=c5e(i),s=a*Math.PI/180,c=Math.atan(n/r),d=s>c&&s<Math.PI-c?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},tT,cz;function d5e(){if(cz)return tT;cz=1;var t=qo(),e=o1(),r=R2();function n(i){return function(a,s,c){var d=Object(a);if(!e(a)){var h=t(s,3);a=r(a),s=function(m){return h(d[m],m,d)}}var p=i(a,s,c);return p>-1?d[h?a[p]:p]:void 0}}return tT=n,tT}var rT,uz;function h5e(){if(uz)return rT;uz=1;var t=OW();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return rT=e,rT}var nT,dz;function f5e(){if(dz)return nT;dz=1;var t=zG(),e=qo(),r=h5e(),n=Math.max;function i(a,s,c){var d=a==null?0:a.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(a,e(s,3),h)}return nT=i,nT}var iT,hz;function p5e(){if(hz)return iT;hz=1;var t=d5e(),e=f5e(),r=t(e);return iT=r,iT}var m5e=p5e();const g5e=Dr(m5e);var y5e=rG();const v5e=Dr(y5e);var b5e=v5e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),VN=M.createContext(void 0),FN=M.createContext(void 0),VW=M.createContext(void 0),FW=M.createContext({}),qW=M.createContext(void 0),HW=M.createContext(0),GW=M.createContext(0),fz=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=e.clipPathId,c=e.children,d=e.width,h=e.height,p=b5e(a);return te.createElement(VN.Provider,{value:n},te.createElement(FN.Provider,{value:i},te.createElement(FW.Provider,{value:a},te.createElement(VW.Provider,{value:p},te.createElement(qW.Provider,{value:s},te.createElement(HW.Provider,{value:h},te.createElement(GW.Provider,{value:d},c)))))))},x5e=function(){return M.useContext(qW)},KW=function(e){var r=M.useContext(VN);r==null&&Wd();var n=r[e];return n==null&&Wd(),n},w5e=function(){var e=M.useContext(VN);return Xc(e)},_5e=function(){var e=M.useContext(FN),r=g5e(e,function(n){return PW(n.domain,Number.isFinite)});return r||Xc(e)},WW=function(e){var r=M.useContext(FN);r==null&&Wd();var n=r[e];return n==null&&Wd(),n},S5e=function(){var e=M.useContext(VW);return e},T5e=function(){return M.useContext(FW)},qN=function(){return M.useContext(GW)},HN=function(){return M.useContext(HW)};function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function A5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QW(n.key),n)}}function N5e(t,e,r){return e&&E5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function j5e(t,e,r){return e=wx(e),C5e(t,XW()?Reflect.construct(e,r||[],wx(t).constructor):e.apply(t,r))}function C5e(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k5e(t)}function k5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XW=function(){return!!t})()}function wx(t){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wx(t)}function O5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N8(t,e)}function N8(t,e){return N8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},N8(t,e)}function pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(r),!0).forEach(function(n){GN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GN(t,e,r){return e=QW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QW(t){var e=I5e(t,"string");return sf(e)=="symbol"?e:e+""}function I5e(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function R5e(t,e){return L5e(t)||D5e(t,e)||P5e(t,e)||M5e()}function M5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P5e(t,e){if(t){if(typeof t=="string")return gz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gz(t,e)}}function gz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function L5e(t){if(Array.isArray(t))return t}function j8(){return j8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j8.apply(this,arguments)}var B5e=function(e,r){var n;return te.isValidElement(e)?n=te.cloneElement(e,r):Ht(e)?n=e(r):n=te.createElement("line",j8({},r,{className:"recharts-reference-line-line"})),n},U5e=function(e,r,n,i,a,s,c,d,h){var p=a.x,m=a.y,y=a.width,b=a.height;if(n){var T=h.y,_=e.y.apply(T,{position:s});if(Io(h,"discard")&&!e.y.isInRange(_))return null;var w=[{x:p+y,y:_},{x:p,y:_}];return d==="left"?w.reverse():w}if(r){var N=h.x,k=e.x.apply(N,{position:s});if(Io(h,"discard")&&!e.x.isInRange(k))return null;var C=[{x:k,y:m+b},{x:k,y:m}];return c==="top"?C.reverse():C}if(i){var $=h.segment,I=$.map(function(L){return e.apply(L,{position:s})});return Io(h,"discard")&&O4e(I,function(L){return!e.isInRange(L)})?null:I}return null};function z5e(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,c=t.className,d=t.alwaysShow,h=x5e(),p=KW(i),m=WW(a),y=S5e();if(!h||!y)return null;Pl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=$N({x:p.scale,y:m.scale}),T=wi(e),_=wi(r),w=n&&n.length===2,N=U5e(b,T,_,w,y,t.position,p.orientation,m.orientation,t);if(!N)return null;var k=R5e(N,2),C=k[0],$=C.x,I=C.y,L=k[1],E=L.x,A=L.y,R=Io(t,"hidden")?"url(#".concat(h,")"):void 0,F=mz(mz({clipPath:R},Ot(t,!0)),{},{x1:$,y1:I,x2:E,y2:A});return te.createElement(Cr,{className:sr("recharts-reference-line",c)},B5e(s,F),Ki.renderCallByParent(t,l5e({x1:$,y1:I,x2:E,y2:A})))}var KN=(function(t){function e(){return A5e(this,e),j5e(this,e,arguments)}return O5e(e,t),N5e(e,[{key:"render",value:function(){return te.createElement(z5e,this.props)}}])})(te.Component);GN(KN,"displayName","ReferenceLine");GN(KN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function C8(){return C8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C8.apply(this,arguments)}function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(r),!0).forEach(function(n){J2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZW(n.key),n)}}function F5e(t,e,r){return e&&V5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q5e(t,e,r){return e=_x(e),H5e(t,YW()?Reflect.construct(e,r||[],_x(t).constructor):e.apply(t,r))}function H5e(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G5e(t)}function G5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YW=function(){return!!t})()}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_x(t)}function K5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k8(t,e)}function k8(t,e){return k8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},k8(t,e)}function J2(t,e,r){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZW(t){var e=W5e(t,"string");return of(e)=="symbol"?e:e+""}function W5e(t,e){if(of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X5e=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,s=$N({x:i.scale,y:a.scale}),c=s.apply({x:r,y:n},{bandAware:!0});return Io(e,"discard")&&!s.isInRange(c)?null:c},ew=(function(t){function e(){return $5e(this,e),q5e(this,e,arguments)}return K5e(e,t),F5e(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,h=wi(i),p=wi(a);if(Pl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=X5e(this.props);if(!m)return null;var y=m.x,b=m.y,T=this.props,_=T.shape,w=T.className,N=Io(this.props,"hidden")?"url(#".concat(d,")"):void 0,k=vz(vz({clipPath:N},Ot(this.props,!0)),{},{cx:y,cy:b});return te.createElement(Cr,{className:sr("recharts-reference-dot",w)},e.renderDot(_,k),Ki.renderCallByParent(this.props,{x:y-s,y:b-s,width:2*s,height:2*s}))}}])})(te.Component);J2(ew,"displayName","ReferenceDot");J2(ew,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});J2(ew,"renderDot",function(t,e){var r;return te.isValidElement(t)?r=te.cloneElement(t,e):Ht(t)?r=t(e):r=te.createElement(K2,C8({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function O8(){return O8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O8.apply(this,arguments)}function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(r),!0).forEach(function(n){tw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eX(n.key),n)}}function Z5e(t,e,r){return e&&Y5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J5e(t,e,r){return e=Sx(e),e3e(t,JW()?Reflect.construct(e,r||[],Sx(t).constructor):e.apply(t,r))}function e3e(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t3e(t)}function t3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JW=function(){return!!t})()}function Sx(t){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sx(t)}function r3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I8(t,e)}function I8(t,e){return I8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},I8(t,e)}function tw(t,e,r){return e=eX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eX(t){var e=n3e(t,"string");return lf(e)=="symbol"?e:e+""}function n3e(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var i3e=function(e,r,n,i,a){var s=a.x1,c=a.x2,d=a.y1,h=a.y2,p=a.xAxis,m=a.yAxis;if(!p||!m)return null;var y=$N({x:p.scale,y:m.scale}),b={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:i?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Io(a,"discard")&&(!y.isInRange(b)||!y.isInRange(T))?null:zW(b,T)},rw=(function(t){function e(){return Q5e(this,e),J5e(this,e,arguments)}return r3e(e,t),Z5e(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Pl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=wi(i),y=wi(a),b=wi(s),T=wi(c),_=this.props.shape;if(!m&&!y&&!b&&!T&&!_)return null;var w=i3e(m,y,b,T,this.props);if(!w&&!_)return null;var N=Io(this.props,"hidden")?"url(#".concat(p,")"):void 0;return te.createElement(Cr,{className:sr("recharts-reference-area",d)},e.renderRect(_,xz(xz({clipPath:N},Ot(this.props,!0)),w)),Ki.renderCallByParent(this.props,w))}}])})(te.Component);tw(rw,"displayName","ReferenceArea");tw(rw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});tw(rw,"renderRect",function(t,e){var r;return te.isValidElement(t)?r=te.cloneElement(t,e):Ht(t)?r=t(e):r=te.createElement(zN,O8({},e,{className:"recharts-reference-area-rect"})),r});function tX(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function a3e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return u5e(n,r)}function s3e(t,e,r){var n=r==="width",i=t.x,a=t.y,s=t.width,c=t.height;return e===1?{start:n?i:a,end:n?i+s:a+c}:{start:n?i+s:a+c,end:n?i:a}}function Tx(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function o3e(t,e){return tX(t,e+1)}function l3e(t,e,r,n,i){for(var a=(n||[]).slice(),s=e.start,c=e.end,d=0,h=1,p=s,m=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:tX(n,h)};var _=d,w,N=function(){return w===void 0&&(w=r(T,_)),w},k=T.coordinate,C=d===0||Tx(t,k,N,p,c);C||(d=0,p=s,h+=1),C&&(p=k+t*(N()/2+i),d+=h)},y;h<=a.length;)if(y=m(),y)return y.v;return[]}function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function na(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){c3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c3e(t,e,r){return e=u3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u3e(t){var e=d3e(t,"string");return kg(e)=="symbol"?e:e+""}function d3e(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h3e(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,c=e.start,d=e.end,h=function(y){var b=a[y],T,_=function(){return T===void 0&&(T=r(b,y)),T};if(y===s-1){var w=t*(b.coordinate+t*_()/2-d);a[y]=b=na(na({},b),{},{tickCoord:w>0?b.coordinate-w*t:b.coordinate})}else a[y]=b=na(na({},b),{},{tickCoord:b.coordinate});var N=Tx(t,b.tickCoord,_,c,d);N&&(d=b.tickCoord-t*(_()/2+i),a[y]=na(na({},b),{},{isShow:!0}))},p=s-1;p>=0;p--)h(p);return a}function f3e(t,e,r,n,i,a){var s=(n||[]).slice(),c=s.length,d=e.start,h=e.end;if(a){var p=n[c-1],m=r(p,c-1),y=t*(p.coordinate+t*m/2-h);s[c-1]=p=na(na({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var b=Tx(t,p.tickCoord,function(){return m},d,h);b&&(h=p.tickCoord-t*(m/2+i),s[c-1]=na(na({},p),{},{isShow:!0}))}for(var T=a?c-1:c,_=function(k){var C=s[k],$,I=function(){return $===void 0&&($=r(C,k)),$};if(k===0){var L=t*(C.coordinate-t*I()/2-d);s[k]=C=na(na({},C),{},{tickCoord:L<0?C.coordinate-L*t:C.coordinate})}else s[k]=C=na(na({},C),{},{tickCoord:C.coordinate});var E=Tx(t,C.tickCoord,I,d,h);E&&(d=C.tickCoord+t*(I()/2+i),s[k]=na(na({},C),{},{isShow:!0}))},w=0;w<T;w++)_(w);return s}function WN(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!i||!i.length||!n)return[];if(ct(d)||a0.isSsr)return o3e(i,typeof d=="number"&&ct(d)?d:0);var y=[],b=c==="top"||c==="bottom"?"width":"height",T=p&&b==="width"?mm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},_=function(C,$){var I=Ht(h)?h(C.value,$):C.value;return b==="width"?a3e(mm(I,{fontSize:e,letterSpacing:r}),T,m):mm(I,{fontSize:e,letterSpacing:r})[b]},w=i.length>=2?to(i[1].coordinate-i[0].coordinate):1,N=s3e(a,w,b);return d==="equidistantPreserveStart"?l3e(w,N,_,i,s):(d==="preserveStart"||d==="preserveStartEnd"?y=f3e(w,N,_,i,s,d==="preserveStartEnd"):y=h3e(w,N,_,i,s),y.filter(function(k){return k.isShow}))}var p3e=["viewBox"],m3e=["viewBox"],g3e=["ticks"];function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function uh(){return uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uh.apply(this,arguments)}function _z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(r),!0).forEach(function(n){XN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aT(t,e){if(t==null)return{};var r=y3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function v3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nX(n.key),n)}}function b3e(t,e,r){return e&&Sz(t.prototype,e),r&&Sz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function x3e(t,e,r){return e=Ax(e),w3e(t,rX()?Reflect.construct(e,r||[],Ax(t).constructor):e.apply(t,r))}function w3e(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _3e(t)}function _3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rX=function(){return!!t})()}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ax(t)}function S3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R8(t,e)}function R8(t,e){return R8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},R8(t,e)}function XN(t,e,r){return e=nX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nX(t){var e=T3e(t,"string");return cf(e)=="symbol"?e:e+""}function T3e(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var If=(function(t){function e(r){var n;return v3e(this,e),n=x3e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return S3e(e,t),b3e(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=aT(n,p3e),c=this.props,d=c.viewBox,h=aT(c,m3e);return!vh(a,d)||!vh(s,h)||!vh(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,c=i.width,d=i.height,h=i.orientation,p=i.tickSize,m=i.mirror,y=i.tickMargin,b,T,_,w,N,k,C=m?-1:1,$=n.tickSize||p,I=ct(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":b=T=n.coordinate,w=s+ +!m*d,_=w-C*$,k=_-C*y,N=I;break;case"left":_=w=n.coordinate,T=a+ +!m*c,b=T-C*$,N=b-C*y,k=I;break;case"right":_=w=n.coordinate,T=a+ +m*c,b=T+C*$,N=b+C*y,k=I;break;default:b=T=n.coordinate,w=s+ +m*d,_=w+C*$,k=_+C*y,N=I;break}return{line:{x1:b,y1:_,x2:T,y2:w},tick:{x:N,y:k}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=gi(gi(gi({},Ot(this.props,!1)),Ot(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=gi(gi({},m),{},{x1:i,y1:a+y*c,x2:i+s,y2:a+y*c})}else{var b=+(d==="left"&&!h||d==="right"&&h);m=gi(gi({},m),{},{x1:i+b*s,y1:a,x2:i+b*s,y2:a+c})}return te.createElement("line",uh({},m,{className:sr("recharts-cartesian-axis-line",Os(p,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,y=c.unit,b=WN(gi(gi({},this.props),{},{ticks:n}),i,a),T=this.getTickTextAnchor(),_=this.getTickVerticalAnchor(),w=Ot(this.props,!1),N=Ot(p,!1),k=gi(gi({},w),{},{fill:"none"},Ot(d,!1)),C=b.map(function($,I){var L=s.getTickLineCoord($),E=L.line,A=L.tick,R=gi(gi(gi(gi({textAnchor:T,verticalAnchor:_},w),{},{stroke:"none",fill:h},N),A),{},{index:I,payload:$,visibleTicksCount:b.length,tickFormatter:m});return te.createElement(Cr,uh({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},Gd(s.props,$,I)),d&&te.createElement("line",uh({},k,E,{className:sr("recharts-cartesian-axis-tick-line",Os(d,"className"))})),p&&e.renderTickItem(p,R,"".concat(Ht(m)?m($.value,I):$.value).concat(y||"")))});return te.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,c=i.height,d=i.ticksGenerator,h=i.className,p=i.hide;if(p)return null;var m=this.props,y=m.ticks,b=aT(m,g3e),T=y;return Ht(d)&&(T=y&&y.length>0?d(this.props):d(b)),s<=0||c<=0||!T||!T.length?null:te.createElement(Cr,{className:sr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),Ki.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,c=sr(i.className,"recharts-cartesian-axis-tick-value");return te.isValidElement(n)?s=te.cloneElement(n,gi(gi({},i),{},{className:c})):Ht(n)?s=n(gi(gi({},i),{},{className:c})):s=te.createElement(Kh,uh({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(M.Component);XN(If,"displayName","CartesianAxis");XN(If,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var A3e=["x1","y1","x2","y2","key"],E3e=["offset"];function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function Tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(r),!0).forEach(function(n){N3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N3e(t,e,r){return e=j3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j3e(t){var e=C3e(t,"string");return Xd(e)=="symbol"?e:e+""}function C3e(t,e){if(Xd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_d.apply(this,arguments)}function Az(t,e){if(t==null)return{};var r=k3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var O3e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,s=e.width,c=e.height,d=e.ry;return te.createElement("rect",{x:i,y:a,ry:d,width:s,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function iX(t,e){var r;if(te.isValidElement(t))r=te.cloneElement(t,e);else if(Ht(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,s=e.y2,c=e.key,d=Az(e,A3e),h=Ot(d,!1);h.offset;var p=Az(h,E3e);r=te.createElement("line",_d({},p,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:c}))}return r}function I3e(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var h=aa(aa({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return iX(i,h)});return te.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function R3e(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var h=aa(aa({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return iX(i,h)});return te.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function M3e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,s=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(y){return Math.round(y+i-i)}).sort(function(y,b){return y-b});i!==p[0]&&p.unshift(0);var m=p.map(function(y,b){var T=!p[b+1],_=T?i+s-y:p[b+1]-y;if(_<=0)return null;var w=b%e.length;return te.createElement("rect",{key:"react-".concat(b),y,x:n,height:_,width:a,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return te.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function P3e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+a-a)}).sort(function(y,b){return y-b});a!==p[0]&&p.unshift(0);var m=p.map(function(y,b){var T=!p[b+1],_=T?a+c-y:p[b+1]-y;if(_<=0)return null;var w=b%n.length;return te.createElement("rect",{key:"react-".concat(b),x:y,y:s,width:_,height:d,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return te.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var D3e=function(e,r){var n=e.xAxis,i=e.width,a=e.height,s=e.offset;return iW(WN(aa(aa(aa({},If.defaultProps),n),{},{ticks:kl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},L3e=function(e,r){var n=e.yAxis,i=e.width,a=e.height,s=e.offset;return iW(WN(aa(aa(aa({},If.defaultProps),n),{},{ticks:kl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},J0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function aX(t){var e,r,n,i,a,s,c=qN(),d=HN(),h=T5e(),p=aa(aa({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:J0.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:J0.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:J0.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:J0.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:J0.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:J0.verticalFill,x:ct(t.x)?t.x:h.left,y:ct(t.y)?t.y:h.top,width:ct(t.width)?t.width:h.width,height:ct(t.height)?t.height:h.height}),m=p.x,y=p.y,b=p.width,T=p.height,_=p.syncWithTicks,w=p.horizontalValues,N=p.verticalValues,k=w5e(),C=_5e();if(!ct(b)||b<=0||!ct(T)||T<=0||!ct(m)||m!==+m||!ct(y)||y!==+y)return null;var $=p.verticalCoordinatesGenerator||D3e,I=p.horizontalCoordinatesGenerator||L3e,L=p.horizontalPoints,E=p.verticalPoints;if((!L||!L.length)&&Ht(I)){var A=w&&w.length,R=I({yAxis:C?aa(aa({},C),{},{ticks:A?w:C.ticks}):void 0,width:c,height:d,offset:h},A?!0:_);Pl(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Xd(R),"]")),Array.isArray(R)&&(L=R)}if((!E||!E.length)&&Ht($)){var F=N&&N.length,P=$({xAxis:k?aa(aa({},k),{},{ticks:F?N:k.ticks}):void 0,width:c,height:d,offset:h},F?!0:_);Pl(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Xd(P),"]")),Array.isArray(P)&&(E=P)}return te.createElement("g",{className:"recharts-cartesian-grid"},te.createElement(O3e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),te.createElement(I3e,_d({},p,{offset:h,horizontalPoints:L,xAxis:k,yAxis:C})),te.createElement(R3e,_d({},p,{offset:h,verticalPoints:E,xAxis:k,yAxis:C})),te.createElement(M3e,_d({},p,{horizontalPoints:L})),te.createElement(P3e,_d({},p,{verticalPoints:E})))}aX.displayName="CartesianGrid";function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function B3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lX(n.key),n)}}function z3e(t,e,r){return e&&U3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $3e(t,e,r){return e=Ex(e),V3e(t,sX()?Reflect.construct(e,r||[],Ex(t).constructor):e.apply(t,r))}function V3e(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F3e(t)}function F3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function Ex(t){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ex(t)}function q3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M8(t,e)}function M8(t,e){return M8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},M8(t,e)}function oX(t,e,r){return e=lX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lX(t){var e=H3e(t,"string");return uf(e)=="symbol"?e:e+""}function H3e(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nw=(function(t){function e(){return B3e(this,e),$3e(this,e,arguments)}return q3e(e,t),z3e(e,[{key:"render",value:function(){return null}}])})(M.Component);oX(nw,"displayName","ZAxis");oX(nw,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var G3e=["option","isActive"];function wm(){return wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wm.apply(this,arguments)}function K3e(t,e){if(t==null)return{};var r=W3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function W3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function X3e(t){var e=t.option,r=t.isActive,n=K3e(t,G3e);return typeof e=="string"?M.createElement(_8,wm({option:M.createElement(I2,wm({type:e},n)),isActive:r,shapeType:"symbols"},n)):M.createElement(_8,wm({option:e,isActive:r,shapeType:"symbols"},n))}function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function _m(){return _m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_m.apply(this,arguments)}function Ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Es(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(r),!0).forEach(function(n){Jc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uX(n.key),n)}}function Y3e(t,e,r){return e&&Nz(t.prototype,e),r&&Nz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z3e(t,e,r){return e=Nx(e),J3e(t,cX()?Reflect.construct(e,r||[],Nx(t).constructor):e.apply(t,r))}function J3e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e6e(t)}function e6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cX=function(){return!!t})()}function Nx(t){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nx(t)}function t6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P8(t,e)}function P8(t,e){return P8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},P8(t,e)}function Jc(t,e,r){return e=uX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uX(t){var e=r6e(t,"string");return df(e)=="symbol"?e:e+""}function r6e(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var v1=(function(t){function e(){var r;Q3e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Z3e(this,e,[].concat(i)),Jc(r,"state",{isAnimationFinished:!1}),Jc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Jc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Jc(r,"id",s1("recharts-scatter-")),r}return t6e(e,t),Y3e(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.activeShape,d=a.activeIndex,h=Ot(this.props,!1);return n.map(function(p,m){var y=d===m,b=y?c:s,T=Es(Es({},h),p);return te.createElement(Cr,_m({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},Gd(i.props,p,m),{role:"img"}),te.createElement(X3e,_m({option:b,isActive:y,key:"symbol-".concat(m)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,h=i.animationEasing,p=i.animationId,m=this.state.prevPoints;return te.createElement(Bo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=a.map(function(_,w){var N=m&&m[w];if(N){var k=Da(N.cx,_.cx),C=Da(N.cy,_.cy),$=Da(N.size,_.size);return Es(Es({},_),{},{cx:k(b),cy:C(b),size:$(b)})}var I=Da(0,_.size);return Es(Es({},_),{},{size:I(b)})});return te.createElement(Cr,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=this.state.prevPoints;return a&&i&&i.length&&(!s||!h1(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,s=i.xAxis,c=i.yAxis,d=i.children,h=us(d,f1);return h?h.map(function(p,m){var y=p.props,b=y.direction,T=y.dataKey;return te.cloneElement(p,{key:"".concat(b,"-").concat(T,"-").concat(a[m]),data:a,xAxis:s,yAxis:c,layout:b==="x"?"vertical":"horizontal",dataPointFormatter:function(w,N){return{x:w.cx,y:w.cy,value:b==="x"?+w.node.x:+w.node.y,errorVal:Qi(w,N)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,a=n.line,s=n.lineType,c=n.lineJointType,d=Ot(this.props,!1),h=Ot(a,!1),p,m;if(s==="joint")p=i.map(function(C){return{x:C.cx,y:C.cy}});else if(s==="fitting"){var y=Jde(i),b=y.xmin,T=y.xmax,_=y.a,w=y.b,N=function($){return _*$+w};p=[{x:b,y:N(b)},{x:T,y:N(T)}]}var k=Es(Es(Es({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return te.isValidElement(a)?m=te.cloneElement(a,k):Ht(a)?m=a(k):m=te.createElement(o8,_m({},k,{type:c})),te.createElement(Cr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.points,s=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,b=n.height,T=n.id,_=n.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,N=sr("recharts-scatter",c),k=d&&d.allowDataOverflow,C=h&&h.allowDataOverflow,$=k||C,I=er(T)?this.id:T;return te.createElement(Cr,{className:N,clipPath:$?"url(#clipPath-".concat(I,")"):null},k||C?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(I)},te.createElement("rect",{x:k?p:p-y/2,y:C?m:m-b/2,width:k?y:y*2,height:C?b:b*2}))):null,s&&this.renderLine(),this.renderErrorBar(),te.createElement(Cr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!_||w)&&Ll.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(M.PureComponent);Jc(v1,"displayName","Scatter");Jc(v1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!a0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Jc(v1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,a=t.displayedData,s=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=i.props.tooltipType,p=us(i.props.children,pN),m=er(e.dataKey)?i.props.dataKey:e.dataKey,y=er(r.dataKey)?i.props.dataKey:r.dataKey,b=n&&n.dataKey,T=n?n.range:nw.defaultProps.range,_=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,N=r.scale.bandwidth?r.scale.bandwidth():0,k=a.map(function(C,$){var I=Qi(C,m),L=Qi(C,y),E=!er(b)&&Qi(C,b)||"-",A=[{name:er(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:I,payload:C,dataKey:m,type:h},{name:er(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:L,payload:C,dataKey:y,type:h}];E!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:E,payload:C,dataKey:b,type:h});var R=kB({axis:e,ticks:s,bandSize:w,entry:C,index:$,dataKey:m}),F=kB({axis:r,ticks:c,bandSize:N,entry:C,index:$,dataKey:y}),P=E!=="-"?n.scale(E):_,B=Math.sqrt(Math.max(P,0)/Math.PI);return Es(Es({},C),{},{cx:R,cy:F,x:R-B,y:F-B,xAxis:e,yAxis:r,zAxis:n,width:2*B,height:2*B,size:P,node:{x:I,y:L,z:E},tooltipPayload:A,tooltipPosition:{x:R,y:F},payload:C},p&&p[$]&&p[$].props)});return Es({points:k},d)});function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function n6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fX(n.key),n)}}function a6e(t,e,r){return e&&i6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s6e(t,e,r){return e=jx(e),o6e(t,dX()?Reflect.construct(e,r||[],jx(t).constructor):e.apply(t,r))}function o6e(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l6e(t)}function l6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dX=function(){return!!t})()}function jx(t){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jx(t)}function c6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D8(t,e)}function D8(t,e){return D8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},D8(t,e)}function hX(t,e,r){return e=fX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fX(t){var e=u6e(t,"string");return hf(e)=="symbol"?e:e+""}function u6e(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function L8(){return L8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},L8.apply(this,arguments)}function d6e(t){var e=t.xAxisId,r=qN(),n=HN(),i=KW(e);return i==null?null:M.createElement(If,L8({},i,{className:sr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return kl(s,!0)}}))}var iw=(function(t){function e(){return n6e(this,e),s6e(this,e,arguments)}return c6e(e,t),a6e(e,[{key:"render",value:function(){return M.createElement(d6e,this.props)}}])})(M.Component);hX(iw,"displayName","XAxis");hX(iw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function h6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gX(n.key),n)}}function p6e(t,e,r){return e&&f6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m6e(t,e,r){return e=Cx(e),g6e(t,pX()?Reflect.construct(e,r||[],Cx(t).constructor):e.apply(t,r))}function g6e(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y6e(t)}function y6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pX=function(){return!!t})()}function Cx(t){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cx(t)}function v6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B8(t,e)}function B8(t,e){return B8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},B8(t,e)}function mX(t,e,r){return e=gX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gX(t){var e=b6e(t,"string");return ff(e)=="symbol"?e:e+""}function b6e(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function U8(){return U8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U8.apply(this,arguments)}var x6e=function(e){var r=e.yAxisId,n=qN(),i=HN(),a=WW(r);return a==null?null:M.createElement(If,U8({},a,{className:sr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(c){return kl(c,!0)}}))},aw=(function(t){function e(){return h6e(this,e),m6e(this,e,arguments)}return v6e(e,t),p6e(e,[{key:"render",value:function(){return M.createElement(x6e,this.props)}}])})(M.Component);mX(aw,"displayName","YAxis");mX(aw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function jz(t){return T6e(t)||S6e(t)||_6e(t)||w6e()}function w6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _6e(t,e){if(t){if(typeof t=="string")return z8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z8(t,e)}}function S6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T6e(t){if(Array.isArray(t))return z8(t)}function z8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $8=function(e,r,n,i,a){var s=us(e,KN),c=us(e,ew),d=[].concat(jz(s),jz(c)),h=us(e,rw),p="".concat(i,"Id"),m=i[0],y=r;if(d.length&&(y=d.reduce(function(_,w){if(w.props[p]===n&&Io(w.props,"extendDomain")&&ct(w.props[m])){var N=w.props[m];return[Math.min(_[0],N),Math.max(_[1],N)]}return _},y)),h.length){var b="".concat(m,"1"),T="".concat(m,"2");y=h.reduce(function(_,w){if(w.props[p]===n&&Io(w.props,"extendDomain")&&ct(w.props[b])&&ct(w.props[T])){var N=w.props[b],k=w.props[T];return[Math.min(_[0],N,k),Math.max(_[1],N,k)]}return _},y)}return a&&a.length&&(y=a.reduce(function(_,w){return ct(w)?[Math.min(_[0],w),Math.max(_[1],w)]:_},y)),y},sT={exports:{}},Cz;function A6e(){return Cz||(Cz=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function a(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new i(p,m||d,y),T=r?r+h:h;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],b]:d._events[T].push(b):(d._events[T]=b,d._eventsCount++),d}function s(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,b=m.length,T=new Array(b);y<b;y++)T[y]=m[y].fn;return T},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,y,b,T){var _=r?r+h:h;if(!this._events[_])return!1;var w=this._events[_],N=arguments.length,k,C;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),N){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,b),!0;case 6:return w.fn.call(w.context,p,m,y,b,T),!0}for(C=1,k=new Array(N-1);C<N;C++)k[C-1]=arguments[C];w.fn.apply(w.context,k)}else{var $=w.length,I;for(C=0;C<$;C++)switch(w[C].once&&this.removeListener(h,w[C].fn,void 0,!0),N){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,p);break;case 3:w[C].fn.call(w[C].context,p,m);break;case 4:w[C].fn.call(w[C].context,p,m,y);break;default:if(!k)for(I=1,k=new Array(N-1);I<N;I++)k[I-1]=arguments[I];w[C].fn.apply(w[C].context,k)}}return!0},c.prototype.on=function(h,p,m){return a(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return a(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,y){var b=r?r+h:h;if(!this._events[b])return this;if(!p)return s(this,b),this;var T=this._events[b];if(T.fn)T.fn===p&&(!y||T.once)&&(!m||T.context===m)&&s(this,b);else{for(var _=0,w=[],N=T.length;_<N;_++)(T[_].fn!==p||y&&!T[_].once||m&&T[_].context!==m)&&w.push(T[_]);w.length?this._events[b]=w.length===1?w[0]:w:s(this,b)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&s(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(sT)),sT.exports}var E6e=A6e();const N6e=Dr(E6e);var oT=new N6e,lT="recharts.syncMouseEvents";function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function j6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yX(n.key),n)}}function k6e(t,e,r){return e&&C6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cT(t,e,r){return e=yX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yX(t){var e=O6e(t,"string");return Og(e)=="symbol"?e:e+""}function O6e(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var I6e=(function(){function t(){j6e(this,t),cT(this,"activeIndex",0),cT(this,"coordinateList",[]),cT(this,"layout","horizontal")}return k6e(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,c=s===void 0?null:s,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,b=y===void 0?null:y;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,c=i.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=a+d+h,y=s+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function R6e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&ct(n)&&ct(i))return!0}return!1}function M6e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function vX(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,s=nn(e,r,n,i),c=nn(e,r,n,a);return{points:[s,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function P6e(t,e,r){var n,i,a,s;if(t==="horizontal")n=e.x,a=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=nn(c,d,h,m),b=nn(c,d,p,m);n=y.x,i=y.y,a=b.x,s=b.y}else return vX(e);return[{x:n,y:i},{x:a,y:s}]}function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function kz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(r),!0).forEach(function(n){D6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D6e(t,e,r){return e=L6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L6e(t){var e=B6e(t,"string");return Ig(e)=="symbol"?e:e+""}function B6e(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U6e(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,b=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!b||!a||!s||y!=="ScatterChart"&&i!=="axis")return null;var T,_=o8;if(y==="ScatterChart")T=s,_=L2e;else if(y==="BarChart")T=M6e(m,s,d,p),_=zN;else if(m==="radial"){var w=vX(s),N=w.cx,k=w.cy,C=w.radius,$=w.startAngle,I=w.endAngle;T={cx:N,cy:k,startAngle:$,endAngle:I,innerRadius:C,outerRadius:C},_=mW}else T={points:P6e(m,s,d)},_=o8;var L=_v(_v(_v(_v({stroke:"#ccc",pointerEvents:"none"},d),T),Ot(b,!1)),{},{payload:c,payloadIndex:h,className:sr("recharts-tooltip-cursor",b.className)});return M.isValidElement(b)?M.cloneElement(b,L):M.createElement(_,L)}var z6e=["item"],$6e=["children","className","width","height","style","compact","title","desc"];function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function dh(){return dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dh.apply(this,arguments)}function Oz(t,e){return q6e(t)||F6e(t,e)||xX(t,e)||V6e()}function V6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F6e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return c}}function q6e(t){if(Array.isArray(t))return t}function Iz(t,e){if(t==null)return{};var r=H6e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function H6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wX(n.key),n)}}function W6e(t,e,r){return e&&K6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X6e(t,e,r){return e=kx(e),Q6e(t,bX()?Reflect.construct(e,r||[],kx(t).constructor):e.apply(t,r))}function Q6e(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y6e(t)}function Y6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bX=function(){return!!t})()}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kx(t)}function Z6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V8(t,e)}function V8(t,e){return V8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},V8(t,e)}function mf(t){return t_e(t)||e_e(t)||xX(t)||J6e()}function J6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(t,e){if(t){if(typeof t=="string")return F8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F8(t,e)}}function e_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t_e(t){if(Array.isArray(t))return F8(t)}function F8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){Bt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bt(t,e,r){return e=wX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wX(t){var e=r_e(t,"string");return pf(e)=="symbol"?e:e+""}function r_e(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n_e={xAxis:["bottom","top"],yAxis:["left","right"]},i_e={width:"100%",height:"100%"},_X={x:0,y:0};function Sv(t){return t}var a_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},s_e=function(e,r,n,i){var a=r.find(function(p){return p&&p.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,c=i.radius;return Le(Le(Le({},i),nn(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var d=a.coordinate,h=i.angle;return Le(Le(Le({},i),nn(i.cx,i.cy,d,h)),{},{angle:h,radius:d})}return _X},sw=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(mf(c),mf(h)):c},[]);return s.length>0?s:e&&e.length&&ct(i)&&ct(a)?e.slice(i,a+1):[]};function SX(t){return t==="number"?[0,"auto"]:void 0}var q8=function(e,r,n,i){var a=e.graphicalItems,s=e.tooltipAxis,c=sw(r,e);return n<0||!a||!a.length||n>=c.length?null:a.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var b=m===void 0?c:m;y=kb(b,s.dataKey,i)}else y=m&&m[n]||c[n];return y?[].concat(mf(d),[cW(h,y)]):d},[])},Mz=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},s=a_e(a,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=ave(s,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=q8(e,r,p,m),b=s_e(n,c,p,a);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:b}}return null},o_e=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,b=nW(p,a);return n.reduce(function(T,_){var w,N=_.type.defaultProps!==void 0?Le(Le({},_.type.defaultProps),_.props):_.props,k=N.type,C=N.dataKey,$=N.allowDataOverflow,I=N.allowDuplicatedCategory,L=N.scale,E=N.ticks,A=N.includeHidden,R=N[s];if(T[R])return T;var F=sw(e.data,{graphicalItems:i.filter(function(re){var de,oe=s in re.props?re.props[s]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[s];return oe===R}),dataStartIndex:d,dataEndIndex:h}),P=F.length,B,D,Y;R6e(N.domain,$,k)&&(B=r8(N.domain,null,$),b&&(k==="number"||L!=="auto")&&(Y=ym(F,C,"category")));var J=SX(k);if(!B||B.length===0){var X,ee=(X=N.domain)!==null&&X!==void 0?X:J;if(C){if(B=ym(F,C,k),k==="category"&&b){var Z=Zde(B);I&&Z?(D=B,B=gx(0,P)):I||(B=MB(ee,B,_).reduce(function(re,de){return re.indexOf(de)>=0?re:[].concat(mf(re),[de])},[]))}else if(k==="category")I?B=B.filter(function(re){return re!==""&&!er(re)}):B=MB(ee,B,_).reduce(function(re,de){return re.indexOf(de)>=0||de===""||er(de)?re:[].concat(mf(re),[de])},[]);else if(k==="number"){var ge=uve(F,i.filter(function(re){var de,oe,ae=s in re.props?re.props[s]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[s],pe="hide"in re.props?re.props.hide:(oe=re.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return ae===R&&(A||!pe)}),C,a,p);ge&&(B=ge)}b&&(k==="number"||L!=="auto")&&(Y=ym(F,C,"category"))}else b?B=gx(0,P):c&&c[R]&&c[R].hasStack&&k==="number"?B=y==="expand"?[0,1]:lW(c[R].stackGroups,d,h):B=rW(F,i.filter(function(re){var de=s in re.props?re.props[s]:re.type.defaultProps[s],oe="hide"in re.props?re.props.hide:re.type.defaultProps.hide;return de===R&&(A||!oe)}),k,p,!0);if(k==="number")B=$8(m,B,R,a,E),ee&&(B=r8(ee,B,$));else if(k==="category"&&ee){var ce=ee,Q=B.every(function(re){return ce.indexOf(re)>=0});Q&&(B=ce)}}return Le(Le({},T),{},Bt({},R,Le(Le({},N),{},{axisType:a,domain:B,categoricalDomain:Y,duplicateDomain:D,originalDomain:(w=N.domain)!==null&&w!==void 0?w:J,isCategorical:b,layout:p})))},{})},l_e=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=sw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),b=y.length,T=nW(p,a),_=-1;return n.reduce(function(w,N){var k=N.type.defaultProps!==void 0?Le(Le({},N.type.defaultProps),N.props):N.props,C=k[s],$=SX("number");if(!w[C]){_++;var I;return T?I=gx(0,b):c&&c[C]&&c[C].hasStack?(I=lW(c[C].stackGroups,d,h),I=$8(m,I,C,a)):(I=r8($,rW(y,n.filter(function(L){var E,A,R=s in L.props?L.props[s]:(E=L.type.defaultProps)===null||E===void 0?void 0:E[s],F="hide"in L.props?L.props.hide:(A=L.type.defaultProps)===null||A===void 0?void 0:A.hide;return R===C&&!F}),"number",p),i.defaultProps.allowDataOverflow),I=$8(m,I,C,a)),Le(Le({},w),{},Bt({},C,Le(Le({axisType:a},i.defaultProps),{},{hide:!0,orientation:Os(n_e,"".concat(a,".").concat(_%2),null),domain:I,originalDomain:$,isCategorical:T,layout:p})))}return w},{})},c_e=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(i,"Id"),y=us(p,a),b={};return y&&y.length?b=o_e(e,{axes:y,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):s&&s.length&&(b=l_e(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),b},u_e=function(e){var r=Xc(e),n=kl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:hN(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:rx(r,n)}},Pz=function(e){var r=e.children,n=e.defaultShowTooltip,i=rs(r,nf),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},d_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=Ml(r&&r.type);return n&&n.indexOf("Bar")>=0})},Dz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},h_e=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,y=n.margin||{},b=rs(m,nf),T=rs(m,bh),_=Object.keys(d).reduce(function(I,L){var E=d[L],A=E.orientation;return!E.mirror&&!E.hide?Le(Le({},I),{},Bt({},A,I[A]+E.width)):I},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(I,L){var E=s[L],A=E.orientation;return!E.mirror&&!E.hide?Le(Le({},I),{},Bt({},A,Os(I,"".concat(A))+E.height)):I},{top:y.top||0,bottom:y.bottom||0}),N=Le(Le({},w),_),k=N.bottom;b&&(N.bottom+=b.props.height||nf.defaultProps.height),T&&r&&(N=lve(N,i,n,r));var C=h-N.left-N.right,$=p-N.top-N.bottom;return Le(Le({brushBottom:k},N),{},{width:Math.max(C,0),height:Math.max($,0)})},f_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},TX=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(N,k){var C=k.graphicalItems,$=k.stackGroups,I=k.offset,L=k.updateId,E=k.dataStartIndex,A=k.dataEndIndex,R=N.barSize,F=N.layout,P=N.barGap,B=N.barCategoryGap,D=N.maxBarSize,Y=Dz(F),J=Y.numericAxisName,X=Y.cateAxisName,ee=d_e(C),Z=[];return C.forEach(function(ge,ce){var Q=sw(N.data,{graphicalItems:[ge],dataStartIndex:E,dataEndIndex:A}),re=ge.type.defaultProps!==void 0?Le(Le({},ge.type.defaultProps),ge.props):ge.props,de=re.dataKey,oe=re.maxBarSize,ae=re["".concat(J,"Id")],pe=re["".concat(X,"Id")],ve={},Ye=d.reduce(function(_t,Xt){var ye=k["".concat(Xt.axisType,"Map")],We=re["".concat(Xt.axisType,"Id")];ye&&ye[We]||Xt.axisType==="zAxis"||Wd();var gt=ye[We];return Le(Le({},_t),{},Bt(Bt({},Xt.axisType,gt),"".concat(Xt.axisType,"Ticks"),kl(gt)))},ve),Ne=Ye[X],le=Ye["".concat(X,"Ticks")],we=$&&$[ae]&&$[ae].hasStack&&bve(ge,$[ae].stackGroups),xe=Ml(ge.type).indexOf("Bar")>=0,dt=rx(Ne,le),Ke=[],ut=ee&&sve({barSize:R,stackGroups:$,totalSize:f_e(Ye,X)});if(xe){var it,jt,Ie=er(oe)?D:oe,$e=(it=(jt=rx(Ne,le,!0))!==null&&jt!==void 0?jt:Ie)!==null&&it!==void 0?it:0;Ke=ove({barGap:P,barCategoryGap:B,bandSize:$e!==dt?$e:dt,sizeList:ut[pe],maxBarSize:Ie}),$e!==dt&&(Ke=Ke.map(function(_t){return Le(Le({},_t),{},{position:Le(Le({},_t.position),{},{offset:_t.position.offset-$e/2})})}))}var nt=ge&&ge.type&&ge.type.getComposedData;nt&&Z.push({props:Le(Le({},nt(Le(Le({},Ye),{},{displayedData:Q,props:N,dataKey:de,item:ge,bandSize:dt,barPosition:Ke,offset:I,stackedData:we,layout:F,dataStartIndex:E,dataEndIndex:A}))),{},Bt(Bt(Bt({key:ge.key||"item-".concat(ce)},J,Ye[J]),X,Ye[X]),"animationId",L)),childIndex:d0e(ge,N.children),item:ge})}),Z},b=function(N,k){var C=N.props,$=N.dataStartIndex,I=N.dataEndIndex,L=N.updateId;if(!WM({props:C}))return null;var E=C.children,A=C.layout,R=C.stackOffset,F=C.data,P=C.reverseStackOrder,B=Dz(A),D=B.numericAxisName,Y=B.cateAxisName,J=us(E,n),X=yve(F,J,"".concat(D,"Id"),"".concat(Y,"Id"),R,P),ee=d.reduce(function(re,de){var oe="".concat(de.axisType,"Map");return Le(Le({},re),{},Bt({},oe,c_e(C,Le(Le({},de),{},{graphicalItems:J,stackGroups:de.axisType===D&&X,dataStartIndex:$,dataEndIndex:I}))))},{}),Z=h_e(Le(Le({},ee),{},{props:C,graphicalItems:J}),k==null?void 0:k.legendBBox);Object.keys(ee).forEach(function(re){ee[re]=p(C,ee[re],Z,re.replace("Map",""),r)});var ge=ee["".concat(Y,"Map")],ce=u_e(ge),Q=y(C,Le(Le({},ee),{},{dataStartIndex:$,dataEndIndex:I,updateId:L,graphicalItems:J,stackGroups:X,offset:Z}));return Le(Le({formattedGraphicalItems:Q,graphicalItems:J,offset:Z,stackGroups:X},ce),ee)},T=(function(w){function N(k){var C,$,I;return G6e(this,N),I=X6e(this,N,[k]),Bt(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Bt(I,"accessibilityManager",new I6e),Bt(I,"handleLegendBBoxUpdate",function(L){if(L){var E=I.state,A=E.dataStartIndex,R=E.dataEndIndex,F=E.updateId;I.setState(Le({legendBBox:L},b({props:I.props,dataStartIndex:A,dataEndIndex:R,updateId:F},Le(Le({},I.state),{},{legendBBox:L}))))}}),Bt(I,"handleReceiveSyncEvent",function(L,E,A){if(I.props.syncId===L){if(A===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(E)}}),Bt(I,"handleBrushChange",function(L){var E=L.startIndex,A=L.endIndex;if(E!==I.state.dataStartIndex||A!==I.state.dataEndIndex){var R=I.state.updateId;I.setState(function(){return Le({dataStartIndex:E,dataEndIndex:A},b({props:I.props,dataStartIndex:E,dataEndIndex:A,updateId:R},I.state))}),I.triggerSyncEvent({dataStartIndex:E,dataEndIndex:A})}}),Bt(I,"handleMouseEnter",function(L){var E=I.getMouseInfo(L);if(E){var A=Le(Le({},E),{},{isTooltipActive:!0});I.setState(A),I.triggerSyncEvent(A);var R=I.props.onMouseEnter;Ht(R)&&R(A,L)}}),Bt(I,"triggeredAfterMouseMove",function(L){var E=I.getMouseInfo(L),A=E?Le(Le({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(A),I.triggerSyncEvent(A);var R=I.props.onMouseMove;Ht(R)&&R(A,L)}),Bt(I,"handleItemMouseEnter",function(L){I.setState(function(){return{isTooltipActive:!0,activeItem:L,activePayload:L.tooltipPayload,activeCoordinate:L.tooltipPosition||{x:L.cx,y:L.cy}}})}),Bt(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),Bt(I,"handleMouseMove",function(L){L.persist(),I.throttleTriggeredAfterMouseMove(L)}),Bt(I,"handleMouseLeave",function(L){I.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};I.setState(E),I.triggerSyncEvent(E);var A=I.props.onMouseLeave;Ht(A)&&A(E,L)}),Bt(I,"handleOuterEvent",function(L){var E=u0e(L),A=Os(I.props,"".concat(E));if(E&&Ht(A)){var R,F;/.*touch.*/i.test(E)?F=I.getMouseInfo(L.changedTouches[0]):F=I.getMouseInfo(L),A((R=F)!==null&&R!==void 0?R:{},L)}}),Bt(I,"handleClick",function(L){var E=I.getMouseInfo(L);if(E){var A=Le(Le({},E),{},{isTooltipActive:!0});I.setState(A),I.triggerSyncEvent(A);var R=I.props.onClick;Ht(R)&&R(A,L)}}),Bt(I,"handleMouseDown",function(L){var E=I.props.onMouseDown;if(Ht(E)){var A=I.getMouseInfo(L);E(A,L)}}),Bt(I,"handleMouseUp",function(L){var E=I.props.onMouseUp;if(Ht(E)){var A=I.getMouseInfo(L);E(A,L)}}),Bt(I,"handleTouchMove",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(L.changedTouches[0])}),Bt(I,"handleTouchStart",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&I.handleMouseDown(L.changedTouches[0])}),Bt(I,"handleTouchEnd",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&I.handleMouseUp(L.changedTouches[0])}),Bt(I,"handleDoubleClick",function(L){var E=I.props.onDoubleClick;if(Ht(E)){var A=I.getMouseInfo(L);E(A,L)}}),Bt(I,"handleContextMenu",function(L){var E=I.props.onContextMenu;if(Ht(E)){var A=I.getMouseInfo(L);E(A,L)}}),Bt(I,"triggerSyncEvent",function(L){I.props.syncId!==void 0&&oT.emit(lT,I.props.syncId,L,I.eventEmitterSymbol)}),Bt(I,"applySyncEvent",function(L){var E=I.props,A=E.layout,R=E.syncMethod,F=I.state.updateId,P=L.dataStartIndex,B=L.dataEndIndex;if(L.dataStartIndex!==void 0||L.dataEndIndex!==void 0)I.setState(Le({dataStartIndex:P,dataEndIndex:B},b({props:I.props,dataStartIndex:P,dataEndIndex:B,updateId:F},I.state)));else if(L.activeTooltipIndex!==void 0){var D=L.chartX,Y=L.chartY,J=L.activeTooltipIndex,X=I.state,ee=X.offset,Z=X.tooltipTicks;if(!ee)return;if(typeof R=="function")J=R(Z,L);else if(R==="value"){J=-1;for(var ge=0;ge<Z.length;ge++)if(Z[ge].value===L.activeLabel){J=ge;break}}var ce=Le(Le({},ee),{},{x:ee.left,y:ee.top}),Q=Math.min(D,ce.x+ce.width),re=Math.min(Y,ce.y+ce.height),de=Z[J]&&Z[J].value,oe=q8(I.state,I.props.data,J),ae=Z[J]?{x:A==="horizontal"?Z[J].coordinate:Q,y:A==="horizontal"?re:Z[J].coordinate}:_X;I.setState(Le(Le({},L),{},{activeLabel:de,activeCoordinate:ae,activePayload:oe,activeTooltipIndex:J}))}else I.setState(L)}),Bt(I,"renderCursor",function(L){var E,A=I.state,R=A.isTooltipActive,F=A.activeCoordinate,P=A.activePayload,B=A.offset,D=A.activeTooltipIndex,Y=A.tooltipAxisBandSize,J=I.getTooltipEventType(),X=(E=L.props.active)!==null&&E!==void 0?E:R,ee=I.props.layout,Z=L.key||"_recharts-cursor";return te.createElement(U6e,{key:Z,activeCoordinate:F,activePayload:P,activeTooltipIndex:D,chartName:r,element:L,isActive:X,layout:ee,offset:B,tooltipAxisBandSize:Y,tooltipEventType:J})}),Bt(I,"renderPolarAxis",function(L,E,A){var R=Os(L,"type.axisType"),F=Os(I.state,"".concat(R,"Map")),P=L.type.defaultProps,B=P!==void 0?Le(Le({},P),L.props):L.props,D=F&&F[B["".concat(R,"Id")]];return M.cloneElement(L,Le(Le({},D),{},{className:sr(R,D.className),key:L.key||"".concat(E,"-").concat(A),ticks:kl(D,!0)}))}),Bt(I,"renderPolarGrid",function(L){var E=L.props,A=E.radialLines,R=E.polarAngles,F=E.polarRadius,P=I.state,B=P.radiusAxisMap,D=P.angleAxisMap,Y=Xc(B),J=Xc(D),X=J.cx,ee=J.cy,Z=J.innerRadius,ge=J.outerRadius;return M.cloneElement(L,{polarAngles:Array.isArray(R)?R:kl(J,!0).map(function(ce){return ce.coordinate}),polarRadius:Array.isArray(F)?F:kl(Y,!0).map(function(ce){return ce.coordinate}),cx:X,cy:ee,innerRadius:Z,outerRadius:ge,key:L.key||"polar-grid",radialLines:A})}),Bt(I,"renderLegend",function(){var L=I.state.formattedGraphicalItems,E=I.props,A=E.children,R=E.width,F=E.height,P=I.props.margin||{},B=R-(P.left||0)-(P.right||0),D=eW({children:A,formattedGraphicalItems:L,legendWidth:B,legendContent:h});if(!D)return null;var Y=D.item,J=Iz(D,z6e);return M.cloneElement(Y,Le(Le({},J),{},{chartWidth:R,chartHeight:F,margin:P,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),Bt(I,"renderTooltip",function(){var L,E=I.props,A=E.children,R=E.accessibilityLayer,F=rs(A,xo);if(!F)return null;var P=I.state,B=P.isTooltipActive,D=P.activeCoordinate,Y=P.activePayload,J=P.activeLabel,X=P.offset,ee=(L=F.props.active)!==null&&L!==void 0?L:B;return M.cloneElement(F,{viewBox:Le(Le({},X),{},{x:X.left,y:X.top}),active:ee,label:J,payload:ee?Y:[],coordinate:D,accessibilityLayer:R})}),Bt(I,"renderBrush",function(L){var E=I.props,A=E.margin,R=E.data,F=I.state,P=F.offset,B=F.dataStartIndex,D=F.dataEndIndex,Y=F.updateId;return M.cloneElement(L,{key:L.key||"_recharts-brush",onChange:vv(I.handleBrushChange,L.props.onChange),data:R,x:ct(L.props.x)?L.props.x:P.left,y:ct(L.props.y)?L.props.y:P.top+P.height+P.brushBottom-(A.bottom||0),width:ct(L.props.width)?L.props.width:P.width,startIndex:B,endIndex:D,updateId:"brush-".concat(Y)})}),Bt(I,"renderReferenceElement",function(L,E,A){if(!L)return null;var R=I,F=R.clipPathId,P=I.state,B=P.xAxisMap,D=P.yAxisMap,Y=P.offset,J=L.type.defaultProps||{},X=L.props,ee=X.xAxisId,Z=ee===void 0?J.xAxisId:ee,ge=X.yAxisId,ce=ge===void 0?J.yAxisId:ge;return M.cloneElement(L,{key:L.key||"".concat(E,"-").concat(A),xAxis:B[Z],yAxis:D[ce],viewBox:{x:Y.left,y:Y.top,width:Y.width,height:Y.height},clipPathId:F})}),Bt(I,"renderActivePoints",function(L){var E=L.item,A=L.activePoint,R=L.basePoint,F=L.childIndex,P=L.isRange,B=[],D=E.props.key,Y=E.item.type.defaultProps!==void 0?Le(Le({},E.item.type.defaultProps),E.item.props):E.item.props,J=Y.activeDot,X=Y.dataKey,ee=Le(Le({index:F,dataKey:X,cx:A.x,cy:A.y,r:4,fill:UN(E.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ot(J,!1)),Ob(J));return B.push(N.renderActiveDot(J,ee,"".concat(D,"-activePoint-").concat(F))),R?B.push(N.renderActiveDot(J,Le(Le({},ee),{},{cx:R.x,cy:R.y}),"".concat(D,"-basePoint-").concat(F))):P&&B.push(null),B}),Bt(I,"renderGraphicChild",function(L,E,A){var R=I.filterFormatItem(L,E,A);if(!R)return null;var F=I.getTooltipEventType(),P=I.state,B=P.isTooltipActive,D=P.tooltipAxis,Y=P.activeTooltipIndex,J=P.activeLabel,X=I.props.children,ee=rs(X,xo),Z=R.props,ge=Z.points,ce=Z.isRange,Q=Z.baseLine,re=R.item.type.defaultProps!==void 0?Le(Le({},R.item.type.defaultProps),R.item.props):R.item.props,de=re.activeDot,oe=re.hide,ae=re.activeBar,pe=re.activeShape,ve=!!(!oe&&B&&ee&&(de||ae||pe)),Ye={};F!=="axis"&&ee&&ee.props.trigger==="click"?Ye={onClick:vv(I.handleItemMouseEnter,L.props.onClick)}:F!=="axis"&&(Ye={onMouseLeave:vv(I.handleItemMouseLeave,L.props.onMouseLeave),onMouseEnter:vv(I.handleItemMouseEnter,L.props.onMouseEnter)});var Ne=M.cloneElement(L,Le(Le({},R.props),Ye));function le(Xt){return typeof D.dataKey=="function"?D.dataKey(Xt.payload):null}if(ve)if(Y>=0){var we,xe;if(D.dataKey&&!D.allowDuplicatedCategory){var dt=typeof D.dataKey=="function"?le:"payload.".concat(D.dataKey.toString());we=kb(ge,dt,J),xe=ce&&Q&&kb(Q,dt,J)}else we=ge==null?void 0:ge[Y],xe=ce&&Q&&Q[Y];if(pe||ae){var Ke=L.props.activeIndex!==void 0?L.props.activeIndex:Y;return[M.cloneElement(L,Le(Le(Le({},R.props),Ye),{},{activeIndex:Ke})),null,null]}if(!er(we))return[Ne].concat(mf(I.renderActivePoints({item:R,activePoint:we,basePoint:xe,childIndex:Y,isRange:ce})))}else{var ut,it=(ut=I.getItemByXY(I.state.activeCoordinate))!==null&&ut!==void 0?ut:{graphicalItem:Ne},jt=it.graphicalItem,Ie=jt.item,$e=Ie===void 0?L:Ie,nt=jt.childIndex,_t=Le(Le(Le({},R.props),Ye),{},{activeIndex:nt});return[M.cloneElement($e,_t),null,null]}return ce?[Ne,null,null]:[Ne,null]}),Bt(I,"renderCustomized",function(L,E,A){return M.cloneElement(L,Le(Le({key:"recharts-customized-".concat(A)},I.props),I.state))}),Bt(I,"renderMap",{CartesianGrid:{handler:Sv,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:Sv},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:Sv},YAxis:{handler:Sv},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((C=k.id)!==null&&C!==void 0?C:s1("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=JG(I.triggeredAfterMouseMove,($=k.throttleDelay)!==null&&$!==void 0?$:1e3/60),I.state={},I}return Z6e(N,w),W6e(N,[{key:"componentDidMount",value:function(){var C,$;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:($=this.props.margin.top)!==null&&$!==void 0?$:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,$=C.children,I=C.data,L=C.height,E=C.layout,A=rs($,xo);if(A){var R=A.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,P=q8(this.state,I,R,F),B=this.state.tooltipTicks[R].coordinate,D=(this.state.offset.top+L)/2,Y=E==="horizontal",J=Y?{x:B,y:D}:{y:B,x:D},X=this.state.formattedGraphicalItems.find(function(Z){var ge=Z.item;return ge.type.name==="Scatter"});X&&(J=Le(Le({},J),X.props.points[R].tooltipPosition),P=X.props.points[R].tooltipPayload);var ee={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:F,activePayload:P,activeCoordinate:J};this.setState(ee),this.renderCursor(A),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,$){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==$.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var I,L;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0}})}return null}},{key:"componentDidUpdate",value:function(C){TA([rs(C.children,xo)],[rs(this.props.children,xo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=rs(this.props.children,xo);if(C&&typeof C.props.shared=="boolean"){var $=C.props.shared?"axis":"item";return c.indexOf($)>=0?$:a}return a}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var $=this.container,I=$.getBoundingClientRect(),L=Ype(I),E={chartX:Math.round(C.pageX-L.left),chartY:Math.round(C.pageY-L.top)},A=I.width/$.offsetWidth||1,R=this.inRange(E.chartX,E.chartY,A);if(!R)return null;var F=this.state,P=F.xAxisMap,B=F.yAxisMap,D=this.getTooltipEventType(),Y=Mz(this.state,this.props.data,this.props.layout,R);if(D!=="axis"&&P&&B){var J=Xc(P).scale,X=Xc(B).scale,ee=J&&J.invert?J.invert(E.chartX):null,Z=X&&X.invert?X.invert(E.chartY):null;return Le(Le({},E),{},{xValue:ee,yValue:Z},Y)}return Y?Le(Le({},E),Y):null}},{key:"inRange",value:function(C,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,L=this.props.layout,E=C/I,A=$/I;if(L==="horizontal"||L==="vertical"){var R=this.state.offset,F=E>=R.left&&E<=R.left+R.width&&A>=R.top&&A<=R.top+R.height;return F?{x:E,y:A}:null}var P=this.state,B=P.angleAxisMap,D=P.radiusAxisMap;if(B&&D){var Y=Xc(B);return LB({x:E,y:A},Y)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,$=this.getTooltipEventType(),I=rs(C,xo),L={};I&&$==="axis"&&(I.props.trigger==="click"?L={onClick:this.handleClick}:L={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Ob(this.props,this.handleOuterEvent);return Le(Le({},E),L)}},{key:"addListener",value:function(){oT.on(lT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){oT.removeListener(lT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,$,I){for(var L=this.state.formattedGraphicalItems,E=0,A=L.length;E<A;E++){var R=L[E];if(R.item===C||R.props.key===C.key||$===Ml(R.item.type)&&I===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,$=this.state.offset,I=$.left,L=$.top,E=$.height,A=$.width;return te.createElement("defs",null,te.createElement("clipPath",{id:C},te.createElement("rect",{x:I,y:L,height:E,width:A})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function($,I){var L=Oz(I,2),E=L[0],A=L[1];return Le(Le({},$),{},Bt({},E,A.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function($,I){var L=Oz(I,2),E=L[0],A=L[1];return Le(Le({},$),{},Bt({},E,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var $;return($=this.state.xAxisMap)===null||$===void 0||($=$[C])===null||$===void 0?void 0:$.scale}},{key:"getYScaleByAxisId",value:function(C){var $;return($=this.state.yAxisMap)===null||$===void 0||($=$[C])===null||$===void 0?void 0:$.scale}},{key:"getItemByXY",value:function(C){var $=this.state,I=$.formattedGraphicalItems,L=$.activeItem;if(I&&I.length)for(var E=0,A=I.length;E<A;E++){var R=I[E],F=R.props,P=R.item,B=P.type.defaultProps!==void 0?Le(Le({},P.type.defaultProps),P.props):P.props,D=Ml(P.type);if(D==="Bar"){var Y=(F.data||[]).find(function(Z){return v2e(C,Z)});if(Y)return{graphicalItem:R,payload:Y}}else if(D==="RadialBar"){var J=(F.data||[]).find(function(Z){return LB(C,Z)});if(J)return{graphicalItem:R,payload:J}}else if(Q2(R,L)||Y2(R,L)||Eg(R,L)){var X=Ywe({graphicalItem:R,activeTooltipItem:L,itemData:B.data}),ee=B.activeIndex===void 0?X:B.activeIndex;return{graphicalItem:Le(Le({},R),{},{childIndex:ee}),payload:Eg(R,L)?B.data[X]:R.props.data[X]}}}return null}},{key:"render",value:function(){var C=this;if(!WM(this))return null;var $=this.props,I=$.children,L=$.className,E=$.width,A=$.height,R=$.style,F=$.compact,P=$.title,B=$.desc,D=Iz($,$6e),Y=Ot(D,!1);if(F)return te.createElement(fz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},te.createElement(EA,dh({},Y,{width:E,height:A,title:P,desc:B}),this.renderClipPath(),QM(I,this.renderMap)));if(this.props.accessibilityLayer){var J,X;Y.tabIndex=(J=this.props.tabIndex)!==null&&J!==void 0?J:0,Y.role=(X=this.props.role)!==null&&X!==void 0?X:"application",Y.onKeyDown=function(Z){C.accessibilityManager.keyboardEvent(Z)},Y.onFocus=function(){C.accessibilityManager.focus()}}var ee=this.parseEventsOfWrapper();return te.createElement(fz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},te.createElement("div",dh({className:sr("recharts-wrapper",L),style:Le({position:"relative",cursor:"default",width:E,height:A},R)},ee,{ref:function(ge){C.container=ge}}),te.createElement(EA,dh({},Y,{width:E,height:A,title:P,desc:B,style:i_e}),this.renderClipPath(),QM(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(M.Component);Bt(T,"displayName",r),Bt(T,"defaultProps",Le({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Bt(T,"getDerivedStateFromProps",function(w,N){var k=w.dataKey,C=w.data,$=w.children,I=w.width,L=w.height,E=w.layout,A=w.stackOffset,R=w.margin,F=N.dataStartIndex,P=N.dataEndIndex;if(N.updateId===void 0){var B=Pz(w);return Le(Le(Le({},B),{},{updateId:0},b(Le(Le({props:w},B),{},{updateId:0}),N)),{},{prevDataKey:k,prevData:C,prevWidth:I,prevHeight:L,prevLayout:E,prevStackOffset:A,prevMargin:R,prevChildren:$})}if(k!==N.prevDataKey||C!==N.prevData||I!==N.prevWidth||L!==N.prevHeight||E!==N.prevLayout||A!==N.prevStackOffset||!vh(R,N.prevMargin)){var D=Pz(w),Y={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},J=Le(Le({},Mz(N,C,E)),{},{updateId:N.updateId+1}),X=Le(Le(Le({},D),Y),J);return Le(Le(Le({},X),b(Le({props:w},X),N)),{},{prevDataKey:k,prevData:C,prevWidth:I,prevHeight:L,prevLayout:E,prevStackOffset:A,prevMargin:R,prevChildren:$})}if(!TA($,N.prevChildren)){var ee,Z,ge,ce,Q=rs($,nf),re=Q&&(ee=(Z=Q.props)===null||Z===void 0?void 0:Z.startIndex)!==null&&ee!==void 0?ee:F,de=Q&&(ge=(ce=Q.props)===null||ce===void 0?void 0:ce.endIndex)!==null&&ge!==void 0?ge:P,oe=re!==F||de!==P,ae=!er(C),pe=ae&&!oe?N.updateId:N.updateId+1;return Le(Le({updateId:pe},b(Le(Le({props:w},N),{},{updateId:pe,dataStartIndex:re,dataEndIndex:de}),N)),{},{prevChildren:$,dataStartIndex:re,dataEndIndex:de})}return null}),Bt(T,"renderActiveDot",function(w,N,k){var C;return M.isValidElement(w)?C=M.cloneElement(w,N):Ht(w)?C=w(N):C=te.createElement(K2,N),te.createElement(Cr,{className:"recharts-active-dot",key:k},C)});var _=M.forwardRef(function(N,k){return te.createElement(T,dh({},N,{ref:k}))});return _.displayName=T.displayName,_},p_e=TX({chartName:"RadarChart",GraphicalChild:g1,axisComponents:[{axisType:"angleAxis",AxisComp:m1},{axisType:"radiusAxis",AxisComp:p1}],formatAxisMap:kve,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),m_e=TX({chartName:"ScatterChart",GraphicalChild:v1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:iw},{axisType:"yAxis",AxisComp:aw},{axisType:"zAxis",AxisComp:nw}],formatAxisMap:o5e});const ow=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function QN(t){return"nodeType"in t}function _a(t){var e,r;return t?Rf(t)?t:QN(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function YN(t){const{Document:e}=_a(t);return t instanceof e}function b1(t){return Rf(t)?!1:t instanceof _a(t).HTMLElement}function AX(t){return t instanceof _a(t).SVGElement}function Mf(t){return t?Rf(t)?t.document:QN(t)?YN(t)?t:b1(t)||AX(t)?t.ownerDocument:document:document:document}const Ql=ow?M.useLayoutEffect:M.useEffect;function lw(t){const e=M.useRef(t);return Ql(()=>{e.current=t}),M.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function g_e(){const t=M.useRef(null),e=M.useCallback((n,i)=>{t.current=setInterval(n,i)},[]),r=M.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Rg(t,e){e===void 0&&(e=[t]);const r=M.useRef(t);return Ql(()=>{r.current!==t&&(r.current=t)},e),r}function x1(t,e){const r=M.useRef();return M.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Ox(t){const e=lw(t),r=M.useRef(null),n=M.useCallback(i=>{i!==r.current&&(e==null||e(i,r.current)),r.current=i},[]);return[r,n]}function Ix(t){const e=M.useRef();return M.useEffect(()=>{e.current=t},[t]),e.current}let uT={};function cw(t,e){return M.useMemo(()=>{if(e)return e;const r=uT[t]==null?0:uT[t]+1;return uT[t]=r,t+"-"+r},[t,e])}function EX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((a,s)=>{const c=Object.entries(s);for(const[d,h]of c){const p=a[d];p!=null&&(a[d]=p+t*h)}return a},{...e})}}const _h=EX(1),Rx=EX(-1);function y_e(t){return"clientX"in t&&"clientY"in t}function ZN(t){if(!t)return!1;const{KeyboardEvent:e}=_a(t.target);return e&&t instanceof e}function v_e(t){if(!t)return!1;const{TouchEvent:e}=_a(t.target);return e&&t instanceof e}function Mg(t){if(v_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return y_e(t)?{x:t.clientX,y:t.clientY}:null}const Pg=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Pg.Translate.toString(t),Pg.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),Lz="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function b_e(t){return t.matches(Lz)?t:t.querySelector(Lz)}const x_e={display:"none"};function w_e(t){let{id:e,value:r}=t;return te.createElement("div",{id:e,style:x_e},r)}function __e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return te.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function S_e(){const[t,e]=M.useState("");return{announce:M.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const NX=M.createContext(null);function T_e(t){const e=M.useContext(NX);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function A_e(){const[t]=M.useState(()=>new Set),e=M.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[M.useCallback(n=>{let{type:i,event:a}=n;t.forEach(s=>{var c;return(c=s[i])==null?void 0:c.call(s,a)})},[t]),e]}const E_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},N_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function j_e(t){let{announcements:e=N_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=E_e}=t;const{announce:a,announcement:s}=S_e(),c=cw("DndLiveRegion"),[d,h]=M.useState(!1);if(M.useEffect(()=>{h(!0)},[]),T_e(M.useMemo(()=>({onDragStart(m){let{active:y}=m;a(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:b}=m;e.onDragMove&&a(e.onDragMove({active:y,over:b}))},onDragOver(m){let{active:y,over:b}=m;a(e.onDragOver({active:y,over:b}))},onDragEnd(m){let{active:y,over:b}=m;a(e.onDragEnd({active:y,over:b}))},onDragCancel(m){let{active:y,over:b}=m;a(e.onDragCancel({active:y,over:b}))}}),[a,e])),!d)return null;const p=te.createElement(te.Fragment,null,te.createElement(w_e,{id:n,value:i.draggable}),te.createElement(__e,{id:c,announcement:s}));return r?nm.createPortal(p,r):p}var vi;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(vi||(vi={}));function Mx(){}function Bz(t,e){return M.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function C_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return M.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const oo=Object.freeze({x:0,y:0});function k_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function O_e(t,e){const r=Mg(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function I_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function R_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function M_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function Uz(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const P_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=Uz(e,e.left,e.top),a=[];for(const s of n){const{id:c}=s,d=r.get(c);if(d){const h=k_e(Uz(d),i);a.push({id:c,data:{droppableContainer:s,value:h}})}}return a.sort(I_e)};function D_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),s=i-n,c=a-r;if(n<i&&r<a){const d=e.width*e.height,h=t.width*t.height,p=s*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const L_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=[];for(const a of n){const{id:s}=a,c=r.get(s);if(c){const d=D_e(c,e);d>0&&i.push({id:s,data:{droppableContainer:a,value:d}})}}return i.sort(R_e)};function B_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function jX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:oo}function U_e(t){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((s,c)=>({...s,top:s.top+t*c.y,bottom:s.bottom+t*c.y,left:s.left+t*c.x,right:s.right+t*c.x}),{...r})}}const z_e=U_e(1);function CX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function $_e(t,e,r){const n=CX(e);if(!n)return t;const{scaleX:i,scaleY:a,x:s,y:c}=n,d=t.left-s-(1-i)*parseFloat(r),h=t.top-c-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),p=i?t.width/i:t.width,m=a?t.height/a:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const V_e={ignoreTransform:!1};function w1(t,e){e===void 0&&(e=V_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=_a(t).getComputedStyle(t);h&&(r=$_e(r,h,p))}const{top:n,left:i,width:a,height:s,bottom:c,right:d}=r;return{top:n,left:i,width:a,height:s,bottom:c,right:d}}function zz(t){return w1(t,{ignoreTransform:!0})}function F_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function q_e(t,e){return e===void 0&&(e=_a(t).getComputedStyle(t)),e.position==="fixed"}function H_e(t,e){e===void 0&&(e=_a(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?r.test(a):!1})}function JN(t,e){const r=[];function n(i){if(e!=null&&r.length>=e||!i)return r;if(YN(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!b1(i)||AX(i)||r.includes(i))return r;const a=_a(t).getComputedStyle(i);return i!==t&&H_e(i,a)&&r.push(i),q_e(i,a)?r:n(i.parentNode)}return t?n(t):r}function kX(t){const[e]=JN(t,1);return e??null}function dT(t){return!ow||!t?null:Rf(t)?t:QN(t)?YN(t)||t===Mf(t).scrollingElement?window:b1(t)?t:null:null}function OX(t){return Rf(t)?t.scrollX:t.scrollLeft}function IX(t){return Rf(t)?t.scrollY:t.scrollTop}function H8(t){return{x:OX(t),y:IX(t)}}var Ii;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ii||(Ii={}));function RX(t){return!ow||!t?!1:t===document.scrollingElement}function MX(t){const e={x:0,y:0},r=RX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,s=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:i,isLeft:a,isBottom:s,isRight:c,maxScroll:n,minScroll:e}}const G_e={x:.2,y:.2};function K_e(t,e,r,n,i){let{top:a,left:s,right:c,bottom:d}=r;n===void 0&&(n=10),i===void 0&&(i=G_e);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=MX(t),b={x:0,y:0},T={x:0,y:0},_={height:e.height*i.y,width:e.width*i.x};return!h&&a<=e.top+_.height?(b.y=Ii.Backward,T.y=n*Math.abs((e.top+_.height-a)/_.height)):!p&&d>=e.bottom-_.height&&(b.y=Ii.Forward,T.y=n*Math.abs((e.bottom-_.height-d)/_.height)),!y&&c>=e.right-_.width?(b.x=Ii.Forward,T.x=n*Math.abs((e.right-_.width-c)/_.width)):!m&&s<=e.left+_.width&&(b.x=Ii.Backward,T.x=n*Math.abs((e.left+_.width-s)/_.width)),{direction:b,speed:T}}function W_e(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:e,left:r,right:n,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:i,width:t.clientWidth,height:t.clientHeight}}function PX(t){return t.reduce((e,r)=>_h(e,H8(r)),oo)}function X_e(t){return t.reduce((e,r)=>e+OX(r),0)}function Q_e(t){return t.reduce((e,r)=>e+IX(r),0)}function DX(t,e){if(e===void 0&&(e=w1),!t)return;const{top:r,left:n,bottom:i,right:a}=e(t);kX(t)&&(i<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Y_e=[["x",["left","right"],X_e],["y",["top","bottom"],Q_e]];class e9{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=JN(r),i=PX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,s,c]of Y_e)for(const d of s)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=i[a]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Sm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var i;(i=this.target)==null||i.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function Z_e(t){const{EventTarget:e}=_a(t);return t instanceof e?t:Mf(t)}function hT(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ns;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ns||(Ns={}));function $z(t){t.preventDefault()}function J_e(t){t.stopPropagation()}var cn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(cn||(cn={}));const LX={start:[cn.Space,cn.Enter],cancel:[cn.Esc],end:[cn.Space,cn.Enter,cn.Tab]},eSe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case cn.Right:return{...r,x:r.x+25};case cn.Left:return{...r,x:r.x-25};case cn.Down:return{...r,y:r.y+25};case cn.Up:return{...r,y:r.y-25}}};class BX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Sm(Mf(r)),this.windowListeners=new Sm(_a(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ns.Resize,this.handleCancel),this.windowListeners.add(Ns.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ns.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&DX(n),r(oo)}handleKeyDown(e){if(ZN(e)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:a=LX,coordinateGetter:s=eSe,scrollBehavior:c="smooth"}=i,{code:d}=e;if(a.end.includes(d)){this.handleEnd(e);return}if(a.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:oo;this.referenceCoordinates||(this.referenceCoordinates=p);const m=s(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=Rx(m,p),b={x:0,y:0},{scrollableAncestors:T}=n.current;for(const _ of T){const w=e.code,{isTop:N,isRight:k,isLeft:C,isBottom:$,maxScroll:I,minScroll:L}=MX(_),E=W_e(_),A={x:Math.min(w===cn.Right?E.right-E.width/2:E.right,Math.max(w===cn.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(w===cn.Down?E.bottom-E.height/2:E.bottom,Math.max(w===cn.Down?E.top:E.top+E.height/2,m.y))},R=w===cn.Right&&!k||w===cn.Left&&!C,F=w===cn.Down&&!$||w===cn.Up&&!N;if(R&&A.x!==m.x){const P=_.scrollLeft+y.x,B=w===cn.Right&&P<=I.x||w===cn.Left&&P>=L.x;if(B&&!y.y){_.scrollTo({left:P,behavior:c});return}B?b.x=_.scrollLeft-P:b.x=w===cn.Right?_.scrollLeft-I.x:_.scrollLeft-L.x,b.x&&_.scrollBy({left:-b.x,behavior:c});break}else if(F&&A.y!==m.y){const P=_.scrollTop+y.y,B=w===cn.Down&&P<=I.y||w===cn.Up&&P>=L.y;if(B&&!y.x){_.scrollTo({top:P,behavior:c});return}B?b.y=_.scrollTop-P:b.y=w===cn.Down?_.scrollTop-I.y:_.scrollTop-L.y,b.y&&_.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,_h(Rx(m,this.referenceCoordinates),b))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}BX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=LX,onActivation:i}=e,{active:a}=r;const{code:s}=t.nativeEvent;if(n.start.includes(s)){const c=a.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Vz(t){return!!(t&&"distance"in t)}function Fz(t){return!!(t&&"delay"in t)}class t9{constructor(e,r,n){var i;n===void 0&&(n=Z_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:a}=e,{target:s}=a;this.props=e,this.events=r,this.document=Mf(s),this.documentListeners=new Sm(this.document),this.listeners=new Sm(n),this.windowListeners=new Sm(_a(s)),this.initialCoordinates=(i=Mg(a))!=null?i:oo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ns.Resize,this.handleCancel),this.windowListeners.add(Ns.DragStart,$z),this.windowListeners.add(Ns.VisibilityChange,this.handleCancel),this.windowListeners.add(Ns.ContextMenu,$z),this.documentListeners.add(Ns.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Vz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ns.Click,J_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ns.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:i,props:a}=this,{onMove:s,options:{activationConstraint:c}}=a;if(!i)return;const d=(r=Mg(e))!=null?r:oo,h=Rx(i,d);if(!n&&c){if(Vz(c)){if(c.tolerance!=null&&hT(h,c.tolerance))return this.handleCancel();if(hT(h,c.distance))return this.handleStart()}if(Fz(c)&&hT(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),s(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===cn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const tSe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class r9 extends t9{constructor(e){const{event:r}=e,n=Mf(r.target);super(e,tSe,n)}}r9.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const rSe={move:{name:"mousemove"},end:{name:"mouseup"}};var G8;(function(t){t[t.RightClick=2]="RightClick"})(G8||(G8={}));class nSe extends t9{constructor(e){super(e,rSe,Mf(e.event.target))}}nSe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===G8.RightClick?!1:(n==null||n({event:r}),!0)}}];const fT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class UX extends t9{constructor(e){super(e,fT)}static setup(){return window.addEventListener(fT.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(fT.move.name,e)};function e(){}}}UX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:i}=r;return i.length>1?!1:(n==null||n({event:r}),!0)}}];var Tm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Tm||(Tm={}));var Px;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Px||(Px={}));function iSe(t){let{acceleration:e,activator:r=Tm.Pointer,canScroll:n,draggingRect:i,enabled:a,interval:s=5,order:c=Px.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const b=sSe({delta:m,disabled:!a}),[T,_]=g_e(),w=M.useRef({x:0,y:0}),N=M.useRef({x:0,y:0}),k=M.useMemo(()=>{switch(r){case Tm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Tm.DraggableRect:return i}},[r,i,d]),C=M.useRef(null),$=M.useCallback(()=>{const L=C.current;if(!L)return;const E=w.current.x*N.current.x,A=w.current.y*N.current.y;L.scrollBy(E,A)},[]),I=M.useMemo(()=>c===Px.TreeOrder?[...h].reverse():h,[c,h]);M.useEffect(()=>{if(!a||!h.length||!k){_();return}for(const L of I){if((n==null?void 0:n(L))===!1)continue;const E=h.indexOf(L),A=p[E];if(!A)continue;const{direction:R,speed:F}=K_e(L,A,k,e,y);for(const P of["x","y"])b[P][R[P]]||(F[P]=0,R[P]=0);if(F.x>0||F.y>0){_(),C.current=L,T($,s),w.current=F,N.current=R;return}}w.current={x:0,y:0},N.current={x:0,y:0},_()},[e,$,n,_,a,s,JSON.stringify(k),JSON.stringify(b),T,h,I,p,JSON.stringify(y)])}const aSe={x:{[Ii.Backward]:!1,[Ii.Forward]:!1},y:{[Ii.Backward]:!1,[Ii.Forward]:!1}};function sSe(t){let{delta:e,disabled:r}=t;const n=Ix(e);return x1(i=>{if(r||!n||!i)return aSe;const a={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ii.Backward]:i.x[Ii.Backward]||a.x===-1,[Ii.Forward]:i.x[Ii.Forward]||a.x===1},y:{[Ii.Backward]:i.y[Ii.Backward]||a.y===-1,[Ii.Forward]:i.y[Ii.Forward]||a.y===1}}},[r,e,n])}function oSe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return x1(i=>{var a;return e==null?null:(a=n??i)!=null?a:null},[n,e])}function lSe(t,e){return M.useMemo(()=>t.reduce((r,n)=>{const{sensor:i}=n,a=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,n)}));return[...r,...a]},[]),[t,e])}var Dg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Dg||(Dg={}));var K8;(function(t){t.Optimized="optimized"})(K8||(K8={}));const qz=new Map;function cSe(t,e){let{dragging:r,dependencies:n,config:i}=e;const[a,s]=M.useState(null),{frequency:c,measure:d,strategy:h}=i,p=M.useRef(t),m=w(),y=Rg(m),b=M.useCallback(function(N){N===void 0&&(N=[]),!y.current&&s(k=>k===null?N:k.concat(N.filter(C=>!k.includes(C))))},[y]),T=M.useRef(null),_=x1(N=>{if(m&&!r)return qz;if(!N||N===qz||p.current!==t||a!=null){const k=new Map;for(let C of t){if(!C)continue;if(a&&a.length>0&&!a.includes(C.id)&&C.rect.current){k.set(C.id,C.rect.current);continue}const $=C.node.current,I=$?new e9(d($),$):null;C.rect.current=I,I&&k.set(C.id,I)}return k}return N},[t,a,r,m,d]);return M.useEffect(()=>{p.current=t},[t]),M.useEffect(()=>{m||b()},[r,m]),M.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),M.useEffect(()=>{m||typeof c!="number"||T.current!==null||(T.current=setTimeout(()=>{b(),T.current=null},c))},[c,m,b,...n]),{droppableRects:_,measureDroppableContainers:b,measuringScheduled:a!=null};function w(){switch(h){case Dg.Always:return!1;case Dg.BeforeDragging:return r;default:return!r}}}function n9(t,e){return x1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function uSe(t,e){return n9(t,e)}function dSe(t){let{callback:e,disabled:r}=t;const n=lw(e),i=M.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,r]);return M.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function uw(t){let{callback:e,disabled:r}=t;const n=lw(e),i=M.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[r]);return M.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function hSe(t){return new e9(w1(t),t)}function Hz(t,e,r){e===void 0&&(e=hSe);const[n,i]=M.useState(null);function a(){i(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const s=dSe({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){a();break}}}}),c=uw({callback:a});return Ql(()=>{a(),t?(c==null||c.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),s==null||s.disconnect())},[t]),n}function fSe(t){const e=n9(t);return jX(t,e)}const Gz=[];function pSe(t){const e=M.useRef(t),r=x1(n=>t?n&&n!==Gz&&t&&e.current&&t.parentNode===e.current.parentNode?n:JN(t):Gz,[t]);return M.useEffect(()=>{e.current=t},[t]),r}function mSe(t){const[e,r]=M.useState(null),n=M.useRef(t),i=M.useCallback(a=>{const s=dT(a.target);s&&r(c=>c?(c.set(s,H8(s)),new Map(c)):null)},[]);return M.useEffect(()=>{const a=n.current;if(t!==a){s(a);const c=t.map(d=>{const h=dT(d);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,H8(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{s(t),s(a)};function s(c){c.forEach(d=>{const h=dT(d);h==null||h.removeEventListener("scroll",i)})}},[i,t]),M.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,s)=>_h(a,s),oo):PX(t):oo,[t,e])}function Kz(t,e){e===void 0&&(e=[]);const r=M.useRef(null);return M.useEffect(()=>{r.current=null},e),M.useEffect(()=>{const n=t!==oo;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Rx(t,r.current):oo}function gSe(t){M.useEffect(()=>{if(!ow)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function ySe(t,e){return M.useMemo(()=>t.reduce((r,n)=>{let{eventName:i,handler:a}=n;return r[i]=s=>{a(s,e)},r},{}),[t,e])}function zX(t){return M.useMemo(()=>t?F_e(t):null,[t])}const Wz=[];function vSe(t,e){e===void 0&&(e=w1);const[r]=t,n=zX(r?_a(r):null),[i,a]=M.useState(Wz);function s(){a(()=>t.length?t.map(d=>RX(d)?n:new e9(e(d),d)):Wz)}const c=uw({callback:s});return Ql(()=>{c==null||c.disconnect(),s(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),i}function $X(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return b1(e)?e:t}function bSe(t){let{measure:e}=t;const[r,n]=M.useState(null),i=M.useCallback(h=>{for(const{target:p}of h)if(b1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),a=uw({callback:i}),s=M.useCallback(h=>{const p=$X(h);a==null||a.disconnect(),p&&(a==null||a.observe(p)),n(p?e(p):null)},[e,a]),[c,d]=Ox(s);return M.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const xSe=[{sensor:r9,options:{}},{sensor:BX,options:{}}],wSe={current:{}},Gv={draggable:{measure:zz},droppable:{measure:zz,strategy:Dg.WhileDragging,frequency:K8.Optimized},dragOverlay:{measure:w1}};class Am extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const _Se={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Am,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Gv,measureDroppableContainers:Mx,windowRect:null,measuringScheduled:!1},VX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mx,draggableNodes:new Map,over:null,measureDroppableContainers:Mx},_1=M.createContext(VX),FX=M.createContext(_Se);function SSe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Am}}}function TSe(t,e){switch(e.type){case vi.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case vi.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case vi.DragEnd:case vi.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case vi.RegisterDroppable:{const{element:r}=e,{id:n}=r,i=new Am(t.droppable.containers);return i.set(n,r),{...t,droppable:{...t.droppable,containers:i}}}case vi.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const s=new Am(t.droppable.containers);return s.set(r,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:s}}}case vi.UnregisterDroppable:{const{id:r,key:n}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const a=new Am(t.droppable.containers);return a.delete(r),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function ASe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:i}=M.useContext(_1),a=Ix(n),s=Ix(r==null?void 0:r.id);return M.useEffect(()=>{if(!e&&!n&&a&&s!=null){if(!ZN(a)||document.activeElement===a.target)return;const c=i.get(s);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=b_e(p);if(m){m.focus();break}}})}},[n,e,i,s,a]),null}function qX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...n}),r):r}function ESe(t){return M.useMemo(()=>({draggable:{...Gv.draggable,...t==null?void 0:t.draggable},droppable:{...Gv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Gv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function NSe(t){let{activeNode:e,measure:r,initialRect:n,config:i=!0}=t;const a=M.useRef(!1),{x:s,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Ql(()=>{if(!s&&!c||!e){a.current=!1;return}if(a.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=jX(p,n);if(s||(m.x=0),c||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=kX(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,s,c,n,r])}const dw=M.createContext({...oo,scaleX:1,scaleY:1});var Vc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Vc||(Vc={}));const jSe=M.memo(function(e){var r,n,i,a;let{id:s,accessibility:c,autoScroll:d=!0,children:h,sensors:p=xSe,collisionDetection:m=L_e,measuring:y,modifiers:b,...T}=e;const _=M.useReducer(TSe,void 0,SSe),[w,N]=_,[k,C]=A_e(),[$,I]=M.useState(Vc.Uninitialized),L=$===Vc.Initialized,{draggable:{active:E,nodes:A,translate:R},droppable:{containers:F}}=w,P=E!=null?A.get(E):null,B=M.useRef({initial:null,translated:null}),D=M.useMemo(()=>{var Ir;return E!=null?{id:E,data:(Ir=P==null?void 0:P.data)!=null?Ir:wSe,rect:B}:null},[E,P]),Y=M.useRef(null),[J,X]=M.useState(null),[ee,Z]=M.useState(null),ge=Rg(T,Object.values(T)),ce=cw("DndDescribedBy",s),Q=M.useMemo(()=>F.getEnabled(),[F]),re=ESe(y),{droppableRects:de,measureDroppableContainers:oe,measuringScheduled:ae}=cSe(Q,{dragging:L,dependencies:[R.x,R.y],config:re.droppable}),pe=oSe(A,E),ve=M.useMemo(()=>ee?Mg(ee):null,[ee]),Ye=Lr(),Ne=uSe(pe,re.draggable.measure);NSe({activeNode:E!=null?A.get(E):null,config:Ye.layoutShiftCompensation,initialRect:Ne,measure:re.draggable.measure});const le=Hz(pe,re.draggable.measure,Ne),we=Hz(pe?pe.parentElement:null),xe=M.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),dt=F.getNodeFor((r=xe.current.over)==null?void 0:r.id),Ke=bSe({measure:re.dragOverlay.measure}),ut=(n=Ke.nodeRef.current)!=null?n:pe,it=L?(i=Ke.rect)!=null?i:le:null,jt=!!(Ke.nodeRef.current&&Ke.rect),Ie=fSe(jt?null:le),$e=zX(ut?_a(ut):null),nt=pSe(L?dt??pe:null),_t=vSe(nt),Xt=qX(b,{transform:{x:R.x-Ie.x,y:R.y-Ie.y,scaleX:1,scaleY:1},activatorEvent:ee,active:D,activeNodeRect:le,containerNodeRect:we,draggingNodeRect:it,over:xe.current.over,overlayNodeRect:Ke.rect,scrollableAncestors:nt,scrollableAncestorRects:_t,windowRect:$e}),ye=ve?_h(ve,R):null,We=mSe(nt),gt=Kz(We),yt=Kz(We,[le]),lt=_h(Xt,gt),et=it?z_e(it,Xt):null,Lt=D&&et?m({active:D,collisionRect:et,droppableRects:de,droppableContainers:Q,pointerCoordinates:ye}):null,tr=M_e(Lt,"id"),[Wr,hn]=M.useState(null),fn=jt?Xt:_h(Xt,yt),Qt=B_e(fn,(a=Wr==null?void 0:Wr.rect)!=null?a:null,le),Ft=M.useRef(null),Kt=M.useCallback((Ir,wr)=>{let{sensor:It,options:Xr}=wr;if(Y.current==null)return;const pn=A.get(Y.current);if(!pn)return;const on=Ir.nativeEvent,Qr=new It({active:Y.current,activeNode:pn,event:on,options:Xr,context:xe,onAbort(G){if(!A.get(G))return;const{onDragAbort:Pe}=ge.current,mt={id:G};Pe==null||Pe(mt),k({type:"onDragAbort",event:mt})},onPending(G,Re,Pe,mt){if(!A.get(G))return;const{onDragPending:Pt}=ge.current,Wt={id:G,constraint:Re,initialCoordinates:Pe,offset:mt};Pt==null||Pt(Wt),k({type:"onDragPending",event:Wt})},onStart(G){const Re=Y.current;if(Re==null)return;const Pe=A.get(Re);if(!Pe)return;const{onDragStart:mt}=ge.current,bt={activatorEvent:on,active:{id:Re,data:Pe.data,rect:B}};nm.unstable_batchedUpdates(()=>{mt==null||mt(bt),I(Vc.Initializing),N({type:vi.DragStart,initialCoordinates:G,active:Re}),k({type:"onDragStart",event:bt}),X(Ft.current),Z(on)})},onMove(G){N({type:vi.DragMove,coordinates:G})},onEnd:mn(vi.DragEnd),onCancel:mn(vi.DragCancel)});Ft.current=Qr;function mn(G){return async function(){const{active:Pe,collisions:mt,over:bt,scrollAdjustedTranslate:Pt}=xe.current;let Wt=null;if(Pe&&Pt){const{cancelDrop:br}=ge.current;Wt={activatorEvent:on,active:Pe,collisions:mt,delta:Pt,over:bt},G===vi.DragEnd&&typeof br=="function"&&await Promise.resolve(br(Wt))&&(G=vi.DragCancel)}Y.current=null,nm.unstable_batchedUpdates(()=>{N({type:G}),I(Vc.Uninitialized),hn(null),X(null),Z(null),Ft.current=null;const br=G===vi.DragEnd?"onDragEnd":"onDragCancel";if(Wt){const Jt=ge.current[br];Jt==null||Jt(Wt),k({type:br,event:Wt})}})}}},[A]),Dn=M.useCallback((Ir,wr)=>(It,Xr)=>{const pn=It.nativeEvent,on=A.get(Xr);if(Y.current!==null||!on||pn.dndKit||pn.defaultPrevented)return;const Qr={active:on};Ir(It,wr.options,Qr)===!0&&(pn.dndKit={capturedBy:wr.sensor},Y.current=Xr,Kt(It,wr))},[A,Kt]),Gn=lSe(p,Dn);gSe(p),Ql(()=>{le&&$===Vc.Initializing&&I(Vc.Initialized)},[le,$]),M.useEffect(()=>{const{onDragMove:Ir}=ge.current,{active:wr,activatorEvent:It,collisions:Xr,over:pn}=xe.current;if(!wr||!It)return;const on={active:wr,activatorEvent:It,collisions:Xr,delta:{x:lt.x,y:lt.y},over:pn};nm.unstable_batchedUpdates(()=>{Ir==null||Ir(on),k({type:"onDragMove",event:on})})},[lt.x,lt.y]),M.useEffect(()=>{const{active:Ir,activatorEvent:wr,collisions:It,droppableContainers:Xr,scrollAdjustedTranslate:pn}=xe.current;if(!Ir||Y.current==null||!wr||!pn)return;const{onDragOver:on}=ge.current,Qr=Xr.get(tr),mn=Qr&&Qr.rect.current?{id:Qr.id,rect:Qr.rect.current,data:Qr.data,disabled:Qr.disabled}:null,G={active:Ir,activatorEvent:wr,collisions:It,delta:{x:pn.x,y:pn.y},over:mn};nm.unstable_batchedUpdates(()=>{hn(mn),on==null||on(G),k({type:"onDragOver",event:G})})},[tr]),Ql(()=>{xe.current={activatorEvent:ee,active:D,activeNode:pe,collisionRect:et,collisions:Lt,droppableRects:de,draggableNodes:A,draggingNode:ut,draggingNodeRect:it,droppableContainers:F,over:Wr,scrollableAncestors:nt,scrollAdjustedTranslate:lt},B.current={initial:it,translated:et}},[D,pe,Lt,et,A,ut,it,de,F,Wr,nt,lt]),iSe({...Ye,delta:R,draggingRect:et,pointerCoordinates:ye,scrollableAncestors:nt,scrollableAncestorRects:_t});const Yi=M.useMemo(()=>({active:D,activeNode:pe,activeNodeRect:le,activatorEvent:ee,collisions:Lt,containerNodeRect:we,dragOverlay:Ke,draggableNodes:A,droppableContainers:F,droppableRects:de,over:Wr,measureDroppableContainers:oe,scrollableAncestors:nt,scrollableAncestorRects:_t,measuringConfiguration:re,measuringScheduled:ae,windowRect:$e}),[D,pe,le,ee,Lt,we,Ke,A,F,de,Wr,oe,nt,_t,re,ae,$e]),pi=M.useMemo(()=>({activatorEvent:ee,activators:Gn,active:D,activeNodeRect:le,ariaDescribedById:{draggable:ce},dispatch:N,draggableNodes:A,over:Wr,measureDroppableContainers:oe}),[ee,Gn,D,le,N,ce,A,Wr,oe]);return te.createElement(NX.Provider,{value:C},te.createElement(_1.Provider,{value:pi},te.createElement(FX.Provider,{value:Yi},te.createElement(dw.Provider,{value:Qt},h)),te.createElement(ASe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),te.createElement(j_e,{...c,hiddenTextDescribedById:ce}));function Lr(){const Ir=(J==null?void 0:J.autoScrollEnabled)===!1,wr=typeof d=="object"?d.enabled===!1:d===!1,It=L&&!Ir&&!wr;return typeof d=="object"?{...d,enabled:It}:{enabled:It}}}),CSe=M.createContext(null),Xz="button",kSe="Draggable";function HX(t){let{id:e,data:r,disabled:n=!1,attributes:i}=t;const a=cw(kSe),{activators:s,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=M.useContext(_1),{role:b=Xz,roleDescription:T="draggable",tabIndex:_=0}=i??{},w=(d==null?void 0:d.id)===e,N=M.useContext(w?dw:CSe),[k,C]=Ox(),[$,I]=Ox(),L=ySe(s,e),E=Rg(r);Ql(()=>(m.set(e,{id:e,key:a,node:k,activatorNode:$,data:E}),()=>{const R=m.get(e);R&&R.key===a&&m.delete(e)}),[m,e]);const A=M.useMemo(()=>({role:b,tabIndex:_,"aria-disabled":n,"aria-pressed":w&&b===Xz?!0:void 0,"aria-roledescription":T,"aria-describedby":p.draggable}),[n,b,_,w,T,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:A,isDragging:w,listeners:n?void 0:L,node:k,over:y,setNodeRef:C,setActivatorNodeRef:I,transform:N}}function OSe(){return M.useContext(FX)}const ISe="Droppable",RSe={timeout:25};function i9(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:i}=t;const a=cw(ISe),{active:s,dispatch:c,over:d,measureDroppableContainers:h}=M.useContext(_1),p=M.useRef({disabled:r}),m=M.useRef(!1),y=M.useRef(null),b=M.useRef(null),{disabled:T,updateMeasurementsFor:_,timeout:w}={...RSe,...i},N=Rg(_??n),k=M.useCallback(()=>{if(!m.current){m.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{h(Array.isArray(N.current)?N.current:[N.current]),b.current=null},w)},[w]),C=uw({callback:k,disabled:T||!s}),$=M.useCallback((A,R)=>{C&&(R&&(C.unobserve(R),m.current=!1),A&&C.observe(A))},[C]),[I,L]=Ox($),E=Rg(e);return M.useEffect(()=>{!C||!I.current||(C.disconnect(),m.current=!1,C.observe(I.current))},[I,C]),M.useEffect(()=>(c({type:vi.RegisterDroppable,element:{id:n,key:a,disabled:r,node:I,rect:y,data:E}}),()=>c({type:vi.UnregisterDroppable,key:a,id:n})),[n]),M.useEffect(()=>{r!==p.current.disabled&&(c({type:vi.SetDroppableDisabled,id:n,key:a,disabled:r}),p.current.disabled=r)},[n,a,r,c]),{active:s,rect:y,isOver:(d==null?void 0:d.id)===n,node:I,over:d,setNodeRef:L}}function MSe(t){let{animation:e,children:r}=t;const[n,i]=M.useState(null),[a,s]=M.useState(null),c=Ix(r);return!r&&!n&&c&&i(c),Ql(()=>{if(!a)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){i(null);return}Promise.resolve(e(h,a)).then(()=>{i(null)})},[e,n,a]),te.createElement(te.Fragment,null,r,n?M.cloneElement(n,{ref:s}):null)}const PSe={x:0,y:0,scaleX:1,scaleY:1};function DSe(t){let{children:e}=t;return te.createElement(_1.Provider,{value:VX},te.createElement(dw.Provider,{value:PSe},e))}const LSe={position:"fixed",touchAction:"none"},BSe=t=>ZN(t)?"transform 250ms ease":void 0,USe=M.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:i,children:a,className:s,rect:c,style:d,transform:h,transition:p=BSe}=t;if(!c)return null;const m=i?h:{...h,scaleX:1,scaleY:1},y={...LSe,width:c.width,height:c.height,top:c.top,left:c.left,transform:Pg.Transform.toString(m),transformOrigin:i&&n?O_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return te.createElement(r,{className:s,style:y,ref:e},a)}),zSe=t=>e=>{let{active:r,dragOverlay:n}=e;const i={},{styles:a,className:s}=t;if(a!=null&&a.active)for(const[c,d]of Object.entries(a.active))d!==void 0&&(i[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(a!=null&&a.dragOverlay)for(const[c,d]of Object.entries(a.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[d,h]of Object.entries(i))r.node.style.setProperty(d,h);s!=null&&s.active&&r.node.classList.remove(s.active)}},$Se=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Pg.Transform.toString(e)},{transform:Pg.Transform.toString(r)}]},VSe={duration:250,easing:"ease",keyframes:$Se,sideEffects:zSe({styles:{active:{opacity:"0"}}})};function FSe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=t;return lw((a,s)=>{if(e===null)return;const c=r.get(a);if(!c)return;const d=c.node.current;if(!d)return;const h=$X(s);if(!h)return;const{transform:p}=_a(s).getComputedStyle(s),m=CX(p);if(!m)return;const y=typeof e=="function"?e:qSe(e);return DX(d,i.draggable.measure),y({active:{id:a,data:c.data,node:d,rect:i.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:s,rect:i.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:i,transform:m})})}function qSe(t){const{duration:e,easing:r,sideEffects:n,keyframes:i}={...VSe,...t};return a=>{let{active:s,dragOverlay:c,transform:d,...h}=a;if(!e)return;const p={x:c.rect.left-s.rect.left,y:c.rect.top-s.rect.top},m={scaleX:d.scaleX!==1?s.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?s.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},b=i({...h,active:s,dragOverlay:c,transform:{initial:d,final:y}}),[T]=b,_=b[b.length-1];if(JSON.stringify(T)===JSON.stringify(_))return;const w=n==null?void 0:n({active:s,dragOverlay:c,...h}),N=c.node.animate(b,{duration:e,easing:r,fill:"forwards"});return new Promise(k=>{N.onfinish=()=>{w==null||w(),k()}})}}let Qz=0;function HSe(t){return M.useMemo(()=>{if(t!=null)return Qz++,Qz},[t])}const GSe=te.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:i,transition:a,modifiers:s,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:b,draggableNodes:T,droppableContainers:_,dragOverlay:w,over:N,measuringConfiguration:k,scrollableAncestors:C,scrollableAncestorRects:$,windowRect:I}=OSe(),L=M.useContext(dw),E=HSe(m==null?void 0:m.id),A=qX(s,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:b,draggingNodeRect:w.rect,over:N,overlayNodeRect:w.rect,scrollableAncestors:C,scrollableAncestorRects:$,transform:L,windowRect:I}),R=n9(y),F=FSe({config:n,draggableNodes:T,droppableContainers:_,measuringConfiguration:k}),P=R?w.setRef:void 0;return te.createElement(DSe,null,te.createElement(MSe,{animation:F},m&&E?te.createElement(USe,{key:E,id:m.id,ref:P,as:c,activatorEvent:p,adjustScale:e,className:d,transition:a,rect:R,style:{zIndex:h,...i},transform:A},r):null))});function Yz(t,e=800){const[r,n]=M.useState(t),i=M.useRef(t),a=M.useRef(0);return M.useEffect(()=>{const s=i.current,c=t;if(i.current=t,s===c)return;const d=performance.now(),h=c-s,p=m=>{const y=m-d,b=Math.min(y/e,1),T=1-Math.pow(1-b,3);n(Math.round(s+h*T)),b<1&&(a.current=requestAnimationFrame(p))};return a.current=requestAnimationFrame(p),()=>cancelAnimationFrame(a.current)},[t,e]),r}const GX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],KX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],KSe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],Zz={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},eh=t=>t?Zz[t.rarity]||Zz.COMMON:null,WSe=(t,e)=>{const n=100-e,i=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${i} 30 ${i-2} 40 Q${i-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${i+3} 22 ${i+1} 46 Q${i-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${i+2} 24 ${i} 46 Q${i-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${i+3} 44 Q${i+6} 55 ${i+4} 85 Q${i+2} 92 ${i-4} 88 L${i-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${i+1} 26 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Dx=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:i})=>{const a=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)||"A",c=s==="B",d=s==="C",h=GX[(e==null?void 0:e.skinTone)??0],p=KX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",b=t==null?void 0:t.HEAD,T=t==null?void 0:t.CHEST,_=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,N=t==null?void 0:t.BELT,k=t==null?void 0:t.AMULET,C=M.useMemo(()=>[b,T,_,w,N,k].filter(Boolean).length,[b,T,_,w,N,k]),$=M.useMemo(()=>[b,T,_,w,N,k].some(A=>(A==null?void 0:A.rarity)==="UNIQUE"),[b,T,_,w,N,k]),I=Math.min(1,.2+C*.13),L=c?23:21,E=M.useMemo(()=>WSe(m,L),[m,L]);return l.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[l.jsxs("defs",{children:[l.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[l.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),l.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),l.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[l.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),l.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),l.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[l.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),l.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),l.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 20%, 20%)`}),l.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 18%, 12%)`})]}),l.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:`hsla(${a+240}, 30%, 35%, 0.2)`}),l.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),l.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 15%, 16%)`}),l.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 12%, 10%)`})]}),l.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[l.jsx("stop",{offset:"0%",stopColor:h}),l.jsx("stop",{offset:"100%",stopColor:y})]}),l.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[l.jsx("stop",{offset:"0%",stopColor:`hsl(${a+180}, 100%, 70%)`,stopOpacity:I}),l.jsx("stop",{offset:"60%",stopColor:`hsl(${a+200}, 80%, 50%)`,stopOpacity:I*.3}),l.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),l.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:p}),l.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),l.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:l.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),l.jsxs("g",{children:[l.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&l.jsxs("g",{filter:"url(#av-bloom)",children:[l.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:l.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),l.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:l.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),l.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),l.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const A=eh(w);return l.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[l.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),l.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),l.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),l.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),A.intensity>=.7&&l.jsxs(l.Fragment,{children:[l.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:l.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),l.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:l.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():l.jsxs("g",{children:[l.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"}),l.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"})]}),l.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"1"}),l.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),l.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),l.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${a+240},20%,28%)`,strokeWidth:"1.2"}),l.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${a+180},30%,40%,0.08)`,strokeWidth:"0.5"}),T&&(()=>{const A=eh(T);return l.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[l.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:A.primary,fillOpacity:"0.3",stroke:A.primary,strokeWidth:"1",strokeOpacity:"0.6"}),l.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),l.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),l.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),l.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),l.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:A.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),l.jsx("circle",{cx:"100",cy:"120",r:"2",fill:A.particle,fillOpacity:"0.7",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),A.intensity>=.7&&l.jsxs("g",{children:[l.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:l.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),l.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:l.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),N?(()=>{const A=eh(N);return l.jsxs("g",{children:[l.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"0.8"}),l.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:A.particle,fillOpacity:"0.4"}),l.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"}),l.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"})]})})():l.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${a+240},15%,25%)`,strokeWidth:"1.5"}),l.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),l.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),_?(()=>{const A=eh(_);return l.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[l.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),l.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),l.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),l.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),A.intensity>=.7&&l.jsxs(l.Fragment,{children:[l.jsx("circle",{cx:"50",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),l.jsx("circle",{cx:"150",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():l.jsxs("g",{children:[l.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),l.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),C>0&&l.jsxs(l.Fragment,{children:[l.jsx("g",{filter:"url(#av-bloom)",children:l.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:l.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),l.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${a+180},100%,75%)`,fillOpacity:I*.7,children:l.jsx("animate",{attributeName:"fillOpacity",values:`${I*.7};${I*.3};${I*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),C>=3&&l.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${a+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:l.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),l.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),k&&(()=>{const A=eh(k);return l.jsxs("g",{filter:"url(#av-glow)",children:[l.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:A.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),l.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",children:l.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),l.jsx("circle",{cx:"100",cy:"97",r:"2",fill:A.particle,children:l.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),l.jsxs("g",{children:[E.back&&l.jsx("path",{d:E.back,fill:"url(#av-hair)",opacity:"0.8"}),l.jsx("ellipse",{cx:"100",cy:"50",rx:L,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),l.jsx("ellipse",{cx:100-L-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),l.jsx("ellipse",{cx:100+L+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),l.jsxs("g",{children:[l.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),l.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),l.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),l.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),l.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),l.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),l.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),l.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),l.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),l.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),l.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:l.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),l.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:l.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),l.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),l.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),l.jsx("path",{d:E.main,fill:"url(#av-hair)"}),E.accent&&l.jsx("path",{d:E.accent,fill:"url(#av-hair)",opacity:"0.9"}),b&&(()=>{const A=eh(b),R=b.visualId||"";return l.jsx("g",{filter:A.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:R.includes("helm")?l.jsxs(l.Fragment,{children:[l.jsx("path",{d:`M${100-L-2} 28 Q100 10 ${100+L+2} 28 L${100+L+4} 62 Q100 72 ${100-L-4} 62 Z`,fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"1.2"}),l.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${a+180},90%,55%)`,fillOpacity:"0.85",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):R.includes("visor")?l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${a+180},80%,50%,0.7)`,stroke:A.primary,strokeWidth:"1",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),l.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:A.primary,strokeWidth:"1.5"}),l.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:A.primary,strokeWidth:"1.5"})]}):l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:A.primary,fillOpacity:"0.7",stroke:A.particle,strokeWidth:"0.5"}),l.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),l.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),l.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),l.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),l.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:A.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&l.jsxs("g",{filter:"url(#av-glow)",children:[l.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:l.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&l.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:l.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((A,R)=>l.jsx("polygon",{points:`${100+A},16 ${97+A},22 ${103+A},22`,fill:"#fbbf24",fillOpacity:"0.6",children:l.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+R*.2}s`,repeatCount:"indefinite"})},R))]}),$&&l.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((A,R)=>{const F=A*Math.PI/180,P=100+Math.cos(F)*50,B=145+Math.sin(F)*75;return l.jsxs("circle",{cx:P,cy:B,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[l.jsx("animate",{attributeName:"cy",values:`${B};${B-18};${B}`,dur:`${2+R*.3}s`,repeatCount:"indefinite"}),l.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+R*.3}s`,repeatCount:"indefinite"})]},R)})}),r>=5&&l.jsxs(l.Fragment,{children:[l.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),l.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&l.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((A,R)=>{const F=R*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),P=100+Math.cos(F)*(38+R*3),B=140+Math.sin(F)*(55+R*2),D=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${a+180},70%,60%)`;return l.jsxs("circle",{cx:P,cy:B,r:"1",fill:D,fillOpacity:"0.35",children:[l.jsx("animate",{attributeName:"cy",values:`${B};${B-12};${B}`,dur:`${2+R*.4}s`,repeatCount:"indefinite"}),l.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+R*.4}s`,repeatCount:"indefinite"})]},R)})}),n&&i&&l.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((A,R)=>{const F=60+Math.random()*80,P=20+Math.random()*260;return l.jsxs("circle",{cx:F,cy:P,r:1+Math.random(),fill:i,fillOpacity:"0.45",children:[l.jsx("animate",{attributeName:"cy",values:`${P};${P-25};${P}`,dur:`${3+R*.5}s`,repeatCount:"indefinite"}),l.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+R*.5}s`,repeatCount:"indefinite"})]},`c-${R}`)})})]})]})},a9=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],XSe=t=>a9.filter(e=>!e.isSecret||t.includes(e.id)),QSe={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},WX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],Jz=(t,e)=>{const r=WX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},YSe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],XX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of YSe){const i=n.itemIds.filter(s=>r.includes(s)).length,a=n.bonuses.filter(s=>i>=s.count).sort((s,c)=>c.count-s.count);a.length>0&&e.push({set:n,activeBonus:a[0]})}return e},ZSe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],e$=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],QX=t=>[...e$].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||e$[0],JSe=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,eTe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},tTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=M.useMemo(()=>XSe(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],i=t.length,a=a9.filter(s=>!s.isSecret).length;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(pu,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),l.jsxs("span",{className:"text-sm text-gray-400",children:[i,"/",a," unlocked"]})]}),l.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${i/a*100}%`}})}),n.map(s=>{const c=r.filter(h=>h.category===s);if(c.length===0)return null;const d=eTe[s];return l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[l.jsx("span",{children:d.icon})," ",d.label]}),l.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[l.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&l.jsx(Bh,{className:"w-3 h-3 text-gray-600"})]}),l.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&l.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[l.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:l.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),l.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&l.jsxs("div",{className:"text-right shrink-0",children:[l.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&l.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},s)})]})},rTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},nTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,i]=M.useState(t||null),[a,s]=M.useState(null),c=sa(),d=!!t,h=n||"THEORIST",p=WX.filter(b=>b.specialization===h),m=[1,2,3,4],y=async b=>{if(!a){s(b);try{await Be.unlockSkill(b,h),Yn.skillUnlock(),c.success("Skill unlocked!")}catch(T){c.error(T instanceof Error?T.message:"Failed to unlock")}s(null)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),l.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[l.jsx(Pi,{className:"w-4 h-4 text-yellow-400"}),l.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(QSe).map(([b,T])=>{const _=h===b,w=d&&t!==b;return l.jsxs("button",{onClick:()=>!w&&i(b),disabled:w,className:`p-3 rounded-xl border text-left transition-all ${_?`border-white/30 bg-gradient-to-br ${rTe[b]} bg-opacity-10`:w?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:T.icon}),l.jsx("span",{className:"font-bold text-sm text-white",children:T.name}),w&&l.jsx(Bh,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),l.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:T.description})]},b)})}),l.jsx("div",{className:"space-y-4",children:m.map(b=>{const T=p.filter(_=>_.tier===b);return l.jsxs("div",{children:[l.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",b]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(_=>{const w=r.includes(_.id),N=d&&!w&&Jz(_.id,r)&&e>=_.cost,k=Jz(_.id,r);return l.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${w?"border-green-500/30 bg-green-500/10":N?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>N&&y(_.id),children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-sm",children:_.icon}),l.jsx("span",{className:"text-xs font-bold text-white truncate",children:_.name}),w&&l.jsx(bi,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!w&&!k&&l.jsx(Bh,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),l.jsx("p",{className:"text-[10px] text-gray-400",children:_.description}),!w&&l.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",_.cost," SP"]}),a===_.id&&l.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:l.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},_.id)})})]},b)})})]})},pT=25,Tv=ZSe,iTe=({currency:t,lastSpin:e,classType:r})=>{const[n,i]=M.useState(!1),[a,s]=M.useState(0),[c,d]=M.useState(null),h=M.useRef(null),p=sa(),m=new Date().toISOString().split("T")[0],y=e===m,b=!y&&t>=pT&&!n,T=async()=>{if(b){i(!0),d(null),Yn.wheelSpin();try{const N=await Be.spinFortuneWheel(r),k=Tv.findIndex(I=>I.id===N.prizeId),C=360/Tv.length,$=360*5+(360-k*C-C/2);s(I=>I+$),setTimeout(()=>{Yn.wheelPrize(),d(N.rewardDescription),i(!1),N.prizeType!=="NOTHING"?p.success(`You won: ${N.rewardDescription}!`):p.info(N.rewardDescription)},4e3)}catch(N){i(!1),p.error(N instanceof Error?N.message:"Spin failed")}}},_=360/Tv.length,w=140;return l.jsxs("div",{className:"flex flex-col items-center gap-6",children:[l.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),l.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",pT," Flux for a daily spin"]}),l.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[l.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),l.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:l.jsxs("g",{style:{transform:`rotate(${a}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Tv.map((N,k)=>{const C=(k*_-90)*(Math.PI/180),$=((k+1)*_-90)*(Math.PI/180),I=w*Math.cos(C),L=w*Math.sin(C),E=w*Math.cos($),A=w*Math.sin($),R=_>180?1:0,F=((k+.5)*_-90)*(Math.PI/180),P=w*.65*Math.cos(F),B=w*.65*Math.sin(F),D=(k+.5)*_;return l.jsxs("g",{children:[l.jsx("path",{d:`M0,0 L${I},${L} A${w},${w} 0 ${R},1 ${E},${A} Z`,fill:N.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),l.jsx("text",{x:P,y:B,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${D}, ${P}, ${B})`,children:N.label})]},N.id)}),l.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),l.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&l.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[l.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),l.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),l.jsx("button",{onClick:T,disabled:!b,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${b?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${pT} Flux)`})]})};function aTe(t,e){const[r,n]=M.useState(e);return M.useEffect(()=>{const i=Be.subscribeToBossShards(t,a=>{n(Math.max(0,e-a))});return()=>i()},[t,e]),r}function sTe(t){const[e,r]=M.useState([]);return M.useEffect(()=>{const n=Be.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const oTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:i})=>{var T;const a=aTe(t.id,t.maxHp),s=sTe(t.id),c=a/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=s.reduce((_,w)=>(_[w.userId]||(_[w.userId]={name:w.userName,total:0}),_[w.userId].total+=w.damage,_),{}),m=Object.entries(p).sort(([,_],[,w])=>w.total-_.total).slice(0,5),y=((T=p[e])==null?void 0:T.total)||0,b=(i==null?void 0:i.bossId)===t.id;return l.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[b&&l.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),l.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[l.jsx(Is,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[l.jsxs("span",{className:"text-red-400 font-mono",children:[a.toLocaleString()," HP"]}),l.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),l.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),b&&i&&l.jsx("div",{className:"text-center animate-bounce",children:l.jsxs("span",{className:`text-xl font-black ${i.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",i.damage,i.isCrit&&" CRIT!"]})}),y>0&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[l.jsx(Vl,{className:"w-3 h-3"}),"Your total damage: ",l.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[l.jsx(mu,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([_,w],N)=>l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("span",{className:`${_===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",N+1," ",w.name]}),l.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},_))]}),l.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Pi,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&l.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),l.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[l.jsx(kd,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),l.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},lTe=({userId:t,userName:e,classType:r})=>{const[n,i]=M.useState([]),[a,s]=M.useState(null),[c,d]=M.useState(null),h=sa();M.useEffect(()=>{let m;try{m=Be.subscribeToBossEncounters(y=>{const b=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");i(b)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!a){s(m);try{const y=await Be.dealBossDamage(m,e,r||"");if(Yn.bossHit(),d({bossId:m,damage:y.damageDealt,isCrit:y.isCrit}),setTimeout(()=>d(null),2e3),y.bossDefeated)Yn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const b=y.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${y.damageDealt} damage!${b} (+${y.xpEarned} XP)`)}}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[l.jsx(Foe,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>l.jsx(oTe,{boss:m,userId:t,userName:e,attacking:a,onAttack:p,lastHit:c},m.id))]})};function cTe(t,e){const[r,n]=M.useState(e);return M.useEffect(()=>{const i=Be.subscribeToBossQuizShards(t,a=>{n(Math.max(0,e-a))});return()=>i()},[t,e]),r}const uTe=({quiz:t,onAnswer:e,submitting:r,currentQuestion:n,selectedAnswer:i,answerResult:a})=>{const s=cTe(t.id,t.maxHp),c=s/t.maxHp*100,d=t.questions[n%t.questions.length],h=n>=t.questions.length;return l.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-base font-black text-amber-400",children:t.bossName}),l.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[l.jsxs("span",{className:"text-red-400 font-mono",children:[s," HP"]}),l.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),l.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:l.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${c}%`}})})]}),h?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(bi,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):d?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("span",{children:["Question ",n+1," / ",t.questions.length]}),l.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${d.difficulty==="HARD"?"bg-red-500/20 text-red-400":d.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[d.difficulty,d.damageBonus?` (+${d.damageBonus} dmg)`:""]})]}),l.jsx("p",{className:"text-sm text-white font-medium",children:d.stem}),l.jsx("div",{className:"space-y-2",children:d.options.map((p,m)=>{const y=i===m,b=a&&y,T=a==null?void 0:a.correct;return l.jsx("button",{onClick:()=>e(t.id,d.id,m),disabled:r||!!a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${b&&T?"border-green-500/50 bg-green-500/10 text-green-400":b&&!T?"border-red-500/50 bg-red-500/10 text-red-400":y?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+m),"."]}),l.jsx("span",{children:p}),b&&T&&l.jsx(bi,{className:"w-4 h-4 text-green-400 ml-auto"}),b&&!T&&l.jsx(qm,{className:"w-4 h-4 text-red-400 ml-auto"})]})},m)})}),a&&a.correct&&l.jsxs("div",{className:"text-center text-sm text-amber-400 font-bold animate-bounce",children:[l.jsx(Pi,{className:"w-4 h-4 inline mr-1"}),"-",a.damage," HP!"]})]}):null,l.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[l.jsx("span",{children:"Defeat rewards:"}),l.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),l.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&l.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})},dTe=({classType:t})=>{const[e,r]=M.useState([]),[n,i]=M.useState(0),[a,s]=M.useState(null),[c,d]=M.useState(null),[h,p]=M.useState(!1),m=sa();M.useEffect(()=>{let b;try{b=Be.subscribeToBossQuizzes(t,r)}catch{}return()=>b==null?void 0:b()},[t]);const y=async(b,T,_)=>{if(!h){p(!0),s(_);try{const w=await Be.answerBossQuiz(b,T,_);w.alreadyAnswered?m.info("Already answered this question!"):w.correct?(Yn.bossHit(),m.success(`Correct! Dealt ${w.damage} damage!`)):m.error("Incorrect. No damage dealt."),d({correct:w.correct,damage:w.damage}),setTimeout(()=>{i(N=>N+1),s(null),d(null)},2e3)}catch(w){m.error(w instanceof Error?w.message:"Failed to submit answer")}p(!1)}};return e.length===0?null:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[l.jsx(Ao,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),e.map(b=>l.jsx(uTe,{quiz:b,onAnswer:y,submitting:h,currentQuestion:n,selectedAnswer:a,answerResult:c},b.id))]})},hTe=({activeChallenges:t,classType:e})=>{const[r,n]=M.useState([]),[i,a]=M.useState(null),s=sa();M.useEffect(()=>{let y;try{y=Be.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(b=>b.challengeId===y),d=async y=>{if(!i){a(y);try{const b=await Be.claimDailyChallenge(y,e);Yn.dailyReward(),s.success(`Claimed! +${b.xpReward} XP${b.fluxReward?` +${b.fluxReward} Flux`:""}`)}catch(b){s.error(b instanceof Error?b.message:"Claim failed")}a(null)}};if(r.length===0)return null;const h=r.filter(y=>!y.isWeekly),p=r.filter(y=>y.isWeekly),m=y=>{const b=c(y.id),T=(b==null?void 0:b.progress)||0,_=(b==null?void 0:b.completed)||!1,w=!!(b!=null&&b.claimedAt),N=Math.min(100,T/y.target*100);return l.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":_?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${_?"bg-yellow-500/20":"bg-white/5"}`,children:w?l.jsx(bi,{className:"w-4 h-4 text-green-400"}):_?l.jsx(_oe,{className:"w-4 h-4 text-yellow-400"}):l.jsx(Do,{className:"w-4 h-4 text-gray-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&l.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),l.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&l.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[l.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:l.jsx("div",{className:`h-1.5 rounded-full transition-all ${_?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${N}%`}})}),l.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),_&&!w&&l.jsx("button",{onClick:()=>d(y.id),disabled:!!i,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:i===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[l.jsx(doe,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),l.jsx("div",{className:"space-y-2",children:h.map(m)}),p.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[l.jsx(Pi,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),l.jsx("div",{className:"space-y-2",children:p.map(m)})]})]})},mT={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},fTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[i,a]=M.useState([]),[s,c]=M.useState(!1),[d,h]=M.useState(""),[p,m]=M.useState(!1),y=sa();M.useEffect(()=>{let C;try{C=Be.subscribeToTutoringSessions(r,a)}catch{}return()=>C==null?void 0:C()},[r]);const b=async()=>{if(!(!d.trim()||p)){m(!0);try{await Be.createTutoringRequest(t,e,d,r),y.success("Tutoring request posted!"),h(""),c(!1)}catch{y.error("Failed to create request")}m(!1)}},T=async C=>{try{await Be.claimTutorRole(C,t,e),y.success("You are now the tutor for this session!")}catch{y.error("Failed to claim tutor role")}},_=async(C,$)=>{try{const I=await Be.completeTutoring(C,$);y.success(`Verified! Tutor earned ${I.xpAwarded} XP and ${I.fluxAwarded} Flux`)}catch{y.error("Failed to verify session")}},w=i.filter(C=>C.status==="OPEN"),N=i.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),k=i.filter(C=>["COMPLETED","VERIFIED"].includes(C.status));return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[l.jsx(Lh,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),l.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[l.jsx(ko,{className:"w-3 h-3"})," Request Help"]})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&l.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[l.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:b,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),l.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),w.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[l.jsx(Aoe,{className:"w-3 h-3"})," Open Requests"]}),w.map(C=>l.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),l.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),l.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${mT[C.status]}`,children:C.status})]}),C.requesterId!==t&&l.jsxs("button",{onClick:()=>T(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[l.jsx(mu,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),N.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[l.jsx(Is,{className:"w-3 h-3"})," Active Sessions"]}),N.map(C=>l.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[l.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),l.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),l.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${mT[C.status]} mt-1 inline-block`,children:C.status}),n&&C.tutorId&&C.status!=="VERIFIED"&&l.jsxs("button",{onClick:()=>_(C.id,C.tutorId),className:"mt-2 ml-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[l.jsx(bi,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),k.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[l.jsx(bi,{className:"w-3 h-3 text-green-400"})," Completed (",k.length,")"]}),k.slice(0,3).map(C=>l.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),l.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${mT[C.status]}`,children:C.status})]},C.id))]}),i.length===0&&l.jsxs("div",{className:"text-center py-6 text-gray-600",children:[l.jsx(Lh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),l.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},pTe=({item:t,onClose:e})=>{const[r,n]=M.useState("chest"),i=Qn(t.rarity);M.useEffect(()=>{Yn.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const a={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:l.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&l.jsxs("div",{className:"animate-in zoom-in duration-500",children:[l.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[l.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),l.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),l.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),l.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),l.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[l.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),l.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),l.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&l.jsx("div",{className:"animate-in zoom-in duration-300",children:l.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[l.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),l.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),l.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[l.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),l.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>l.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[l.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),l.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),l.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&l.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[l.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${i.border} ${i.bg} shadow-2xl ${a[t.rarity]}`,children:[l.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${i.text} mb-2`,children:t.rarity}),l.jsx("h3",{className:`text-lg font-black ${i.text}`,children:t.name}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),l.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,c])=>l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-400 capitalize",children:s}),l.jsxs("span",{className:`font-bold ${i.text}`,children:["+",c]})]},s))}),t.affixes.length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,c)=>l.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),t.setId&&l.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&l.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,c)=>l.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),l.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},mTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],gTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],yTe=({user:t,classType:e,onClose:r})=>{var L,E,A;const[n,i]=te.useState(!1),a=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=a.level||1,c=zh(s),d=QX(s),{equipped:h,appearance:p}=qd(t,e),m=GE({gamification:{...a,equipped:h}}),y=$h(h),b=((L=a.classXp)==null?void 0:L[e])||0,T=(E=t.settings)==null?void 0:E.privacyMode,_=T?a.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),N=XX(w),k=a.unlockedAchievements||[],C=M.useMemo(()=>a9.filter(R=>k.includes(R.id)),[k]),$=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),I=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),i(!0),setTimeout(()=>i(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[l.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),l.jsxs("div",{className:"relative flex items-center gap-6",children:[l.jsx("div",{className:"w-32 h-44 shrink-0",children:l.jsx(Dx,{equipped:h,appearance:p})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:_}),l.jsx("button",{onClick:I,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?l.jsx(Dh,{className:"w-4 h-4 text-green-400"}):l.jsx(oA,{className:"w-4 h-4"})})]}),l.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),l.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),l.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:b.toLocaleString()}),l.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),l.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-xl font-black text-orange-400",children:[a.engagementStreak||0,"w"]}),l.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-xl font-black text-purple-400",children:k.length}),l.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),a.specialization&&l.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:l.jsx("span",{className:"text-xs text-gray-300 font-bold",children:a.specialization})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(Do,{className:"w-3 h-3"})," Combat Stats"]}),l.jsx("div",{className:"space-y-2",children:mTe.map(({key:R,label:F,color:P,bg:B})=>{const D=m[R]||0,Y=D/$*100;return l.jsxs("div",{className:"space-y-0.5",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-xs text-gray-400",children:F}),l.jsx("span",{className:`text-xs font-bold ${P}`,children:D})]}),l.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:l.jsx("div",{className:`h-1.5 rounded-full ${B} transition-all`,style:{width:`${Y}%`}})})]},R)})})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(Vl,{className:"w-3 h-3"})," Equipment"]}),l.jsx("div",{className:"space-y-1.5",children:gTe.map(R=>{const F=h[R];if(!F)return l.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[l.jsx("span",{className:"font-mono w-12 text-[10px]",children:R}),l.jsx("span",{className:"italic",children:"Empty"})]},R);const P=Qn(F.rarity);return l.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${P.border} ${P.bg}`,children:[l.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:R}),l.jsx("span",{className:`text-xs font-bold truncate ${P.text}`,children:F.name})]},R)})})]}),N.length>0&&l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[l.jsx(TE,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),N.map(({set:R,activeBonus:F})=>l.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[l.jsx("span",{className:"text-purple-400 font-bold",children:R.name}),l.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",F.label]})]},R.id))]})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(pu,{className:"w-3 h-3 text-yellow-400"})," Achievements (",k.length,")"]}),C.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.slice(0,12).map(R=>l.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[l.jsx("div",{className:"text-xl",children:R.icon}),l.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:R.title})]},R.id))}):l.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(_E,{className:"w-3.5 h-3.5 text-orange-400"}),l.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[a.engagementStreak||0," weeks"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(qoe,{className:"w-3.5 h-3.5 text-red-400"}),l.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),l.jsx("span",{className:"text-red-400 font-bold",children:((A=a.completedQuests)==null?void 0:A.length)||0})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(Lh,{className:"w-3.5 h-3.5 text-green-400"}),l.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),l.jsx("span",{className:"text-green-400 font-bold",children:a.tutoringSessionsCompleted||0})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[l.jsx(Pi,{className:"w-3.5 h-3.5 text-cyan-400"}),l.jsx("span",{className:"text-gray-400",children:"Total XP:"}),l.jsx("span",{className:"text-cyan-400 font-bold",children:(a.xp||0).toLocaleString()})]})]})]})]})]})]})})};function vTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const i=Mg(e);return i?{...n,x:n.x+i.x-(r.left+r.width/2),y:n.y+i.y-(r.top+r.height/2)}:n}return n}const bTe={Textbook:l.jsx(so,{className:"w-5 h-5"}),Simulation:l.jsx(qq,{className:"w-5 h-5 fill-current"}),"Lab Guide":l.jsx(p2,{className:"w-5 h-5"}),"Practice Set":l.jsx(Do,{className:"w-5 h-5"}),Article:l.jsx(Vq,{className:"w-5 h-5"}),"Video Lesson":l.jsx(Wq,{className:"w-5 h-5"}),Supplemental:l.jsx(SE,{className:"w-5 h-5"})};let th=0,gT=!1,yT=!1,t$="";const xTe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:i,onStartAssignment:a,studentTab:s="RESOURCES"})=>{var $r,gn,Yr,Zi,ho,zs,Sa,xt,he,He,at,qt,cr,yn,Vr,vn,Sr,fo,$s,Go,ku,Vs,Fs,oa,Ei,Ou,u0,Ko,nc,Wo,ps;const c=sa(),{confirm:d}=Tu(),[h,p]=M.useState(new Set),[m,y]=M.useState(t.classType||(($r=t.enrolledClasses)==null?void 0:$r[0])||"Unassigned"),[b,T]=M.useState(null),[_,w]=M.useState([]),[N,k]=M.useState(!1),[C,$]=M.useState(null);t$!==t.id&&(t$=t.id,th=((gn=t.gamification)==null?void 0:gn.lastLevelSeen)||1,gT=!1,yT=!1),th===0&&(th=((Yr=t.gamification)==null?void 0:Yr.lastLevelSeen)||1);const I=s,[L,E]=M.useState(!1),[A,R]=M.useState(null),[F,P]=M.useState(!1),[B,D]=M.useState(null),[Y,J]=M.useState(null),[X,ee]=M.useState(null),[Z,ge]=M.useState(null),[ce,Q]=M.useState(null),[re,de]=M.useState(null),[oe,ae]=M.useState(!1),[pe,ve]=M.useState(null),[Ye,Ne]=M.useState(!1);M.useEffect(()=>{var qe,tt,Qe;const ue=((qe=t.gamification)==null?void 0:qe.level)||1,Ce=Math.max(((tt=t.gamification)==null?void 0:tt.lastLevelSeen)||1,th);if(ue>Ce){th=ue;const hr=((Qe=t.gamification)==null?void 0:Qe.inventory)||[],nr=hr.length>0?hr[hr.length-1]:null;$(nr),k(!0),Yn.levelUp()}},[(Zi=t.gamification)==null?void 0:Zi.level,(ho=t.gamification)==null?void 0:ho.lastLevelSeen,(zs=t.gamification)==null?void 0:zs.inventory]),M.useEffect(()=>{const ue=[];try{ue.push(Be.subscribeToXPEvents(Ce=>{const qe=Ce.find(tt=>tt.isActive&&(tt.type==="GLOBAL"||tt.targetClass===m));T(qe||null)}))}catch{}try{ue.push(Be.subscribeToQuests(Ce=>{const qe=t.enrolledClasses||(t.classType?[t.classType]:[]);w(Ce.filter(tt=>{if(!tt.isActive)return!1;const Qe=new Date;return!(tt.startsAt&&new Date(tt.startsAt)>Qe||tt.expiresAt&&new Date(tt.expiresAt)<Qe||tt.targetClass&&!qe.includes(tt.targetClass))}))}))}catch{}return()=>ue.forEach(Ce=>Ce())},[m]);const le=((xt=(Sa=t.gamification)==null?void 0:Sa.classXp)==null?void 0:xt[m])||0,we=te.useRef(le),xe=te.useRef(m);M.useEffect(()=>{if(xe.current!==m){xe.current=m,we.current=le;return}if(le>we.current&&we.current>=0){const ue=le-we.current;if(ue>0&&ue<500){de(ue),Yn.xpGain();const Ce=setTimeout(()=>de(null),2e3);return()=>clearTimeout(Ce)}}we.current=le},[le]),M.useEffect(()=>{var qe;if(gT)return;gT=!0;const ue=new Date().toISOString().split("T")[0];((qe=t.gamification)==null?void 0:qe.lastLoginRewardDate)!==ue&&!Ye&&Be.claimDailyLogin().then(tt=>{tt.alreadyClaimed||(Ne(!0),Yn.dailyReward(),c.success(`Daily login: +${tt.xpReward} XP, +${tt.fluxReward} Flux (${tt.streak}-day streak!)`))}).catch(()=>{})},[]),M.useEffect(()=>{yT||(yT=!0,Be.updateEngagementStreak().catch(()=>{}))},[]);const[dt,Ke]=M.useState([]);M.useEffect(()=>{let ue;try{ue=Be.subscribeToAnnouncements(Ke)}catch{}return()=>ue==null?void 0:ue()},[]);const ut=M.useMemo(()=>{var Ce;const ue=((Ce=t.gamification)==null?void 0:Ce.dismissedAnnouncements)||[];return dt.filter(qe=>!ue.includes(qe.id)&&(qe.classType==="GLOBAL"||qe.classType===m))},[dt,(he=t.gamification)==null?void 0:he.dismissedAnnouncements,m]),it=async ue=>{await Be.dismissAnnouncement(t.id,ue)},jt=()=>{var Ce;const ue=((Ce=t.gamification)==null?void 0:Ce.level)||1;th=ue,k(!1),$(null),Be.updateUserLastLevelSeen(t.id,ue).catch(()=>{})},Ie=async ue=>{try{await Be.updateUserAppearance(t.id,ue,m),c.success("Profile updated!"),E(!1),D(null),J(null),ee(null),ge(null),Q(null)}catch{c.error("Failed to save  try again")}},$e=t.enrolledClasses||(t.classType?[t.classType]:[]),nt=M.useMemo(()=>qd(t,m),[t,m]),_t=nt.equipped,Xt=nt.inventory,ye=M.useMemo(()=>{const ue={tech:10,focus:10,analysis:10,charisma:10};return Object.values(_t).filter(Boolean).forEach(qe=>{qe.stats&&Object.entries(qe.stats).forEach(([tt,Qe])=>{ue[tt]+=Qe})}),ue},[_t]),We=M.useMemo(()=>$h(_t),[_t]),gt=M.useMemo(()=>{const ue=t.gamification||{},qe={...ue.achievementProgress||{}},tt=ue.xp||0,Qe=ue.level||1,hr=ue.inventory||[],nr=ue.completedQuests||[],Zr=ue.engagementStreak||0,Li=ue.loginStreak||0,Ta=ue.tutoringSessionsCompleted||0,ic=ue.bossesDefeated||0,Xo=ue.challengesCompleted||0,Iu=ue.itemsCrafted||0,Ar=(Aa,Kn)=>{(!qe[Aa]||Kn>qe[Aa])&&(qe[Aa]=Kn)};return Ar("first_steps",tt),Ar("xp_5k",tt),Ar("xp_25k",tt),Ar("rising_star",Qe),Ar("veteran",Qe),Ar("elite",Qe),Ar("legend",Qe),Ar("collector_10",hr.length),Ar("collector_50",hr.length),Ar("gear_score_100",We),Ar("gear_score_500",We),Ar("first_mission",nr.length),Ar("mission_5",nr.length),Ar("mission_20",nr.length),Ar("boss_slayer",ic),Ar("streak_3",Zr),Ar("streak_8",Zr),Ar("streak_16",Zr),Ar("login_7",Li),Ar("login_30",Li),Ar("challenges_10",Xo),Ar("tutor_1",Ta),Ar("tutor_10",Ta),Ar("tech_50",ye.tech),Ar("focus_50",ye.focus),Ar("analysis_50",ye.analysis),Ar("charisma_50",ye.charisma),Ar("craft_10",Iu),qe},[t,We,ye]),yt=[{subject:"Tech",A:ye.tech,fullMark:100},{subject:"Focus",A:ye.focus,fullMark:100},{subject:"Analysis",A:ye.analysis,fullMark:100},{subject:"Charisma",A:ye.charisma,fullMark:100}],lt=M.useMemo(()=>{const ue={};return e.filter(Ce=>Ce.classType===m&&Ce.status!=="DRAFT").forEach(Ce=>{var Qe;const qe=r.find(hr=>hr.assignmentId===Ce.id),tt=Ce.unit||"General Resources";ue[tt]||(ue[tt]=[]),ue[tt].push({...Ce,lastEngagement:qe&&qe.submittedAt||null,engagementTime:((Qe=qe==null?void 0:qe.metrics)==null?void 0:Qe.engagementTime)||0})}),ue},[e,r,m]),et=ue=>{const Ce=new Set(h);Ce.has(ue)?Ce.delete(ue):Ce.add(ue),p(Ce)},Lt=((He=t.gamification)==null?void 0:He.level)||1,tr=((at=t.gamification)==null?void 0:at.currency)||0,Wr=le,hn=Wr%1e3/1e3*100,fn=Yz(Wr),Qt=Yz(tr),Ft=zh(Lt),Kt=async ue=>{const Ce=ue.target.value;y(Ce),await Be.switchUserView(t.id,Ce)},Dn=async ue=>{if(!F){P(!0);try{await Be.equipItem(t.id,ue,m),R(null),Yn.equip(),c.success(`${ue.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{P(!1)}}},Gn=async ue=>{P(!0);try{await Be.unequipItem(t.id,ue,m),R(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{P(!1)}},Yi=async()=>{if(!A)return;if(Object.values(_t).some(qe=>qe&&qe.id===A.id)){c.error("Unequip this item before salvaging.");return}const Ce=PR(A);if(await d({message:`Salvage ${A.name} for ${Ce} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){P(!0);try{await Be.disenchantItem(t.id,A,m),R(null),Yn.salvage(),c.success(`Salvaged for ${Ce} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{P(!1)}}},pi=async ue=>{if(!A)return;const Ce=es[ue];if(tr<Ce)return c.error("Insufficient Cyber-Flux.");P(!0);try{await Be.craftItem(t.id,A,ue,m),R(null),Yn.craft(),c.success(`${ue.charAt(0)+ue.slice(1).toLowerCase()} complete.`)}catch(qe){const tt=(qe==null?void 0:qe.message)||(qe==null?void 0:qe.code)||"Unknown error";c.error(`Fabrication failed: ${tt}`)}finally{P(!1)}},Lr=((qt=t.gamification)==null?void 0:qt.gemsInventory)||[],Ir=async()=>{if(!(!A||F)){if(tr<es.SOCKET)return c.error("Insufficient Cyber-Flux.");if((A.sockets||0)>=3)return c.error("Maximum sockets reached.");P(!0);try{const ue=await Be.addSocket(A.id,m);R(ue.item),Yn.craft(),c.success("Socket added!")}catch(ue){c.error((ue==null?void 0:ue.message)||"Failed to add socket.")}finally{P(!1)}}},wr=async ue=>{if(!(!A||F)){if(tr<es.ENCHANT)return c.error("Insufficient Cyber-Flux.");P(!0);try{const Ce=await Be.socketGem(A.id,ue,m);R(Ce.item),Yn.craft(),Ce.runewordActivated?(Yn.levelUp(),c.success(`RUNEWORD ACTIVATED: ${Ce.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(Ce){c.error((Ce==null?void 0:Ce.message)||"Failed to socket gem.")}finally{P(!1)}}},It=((cr=t.gamification)==null?void 0:cr.activeQuests)||[],Xr=((yn=t.gamification)==null?void 0:yn.completedQuests)||[],pn=_.filter(ue=>It.some(Ce=>Ce.questId===ue.id)),on=_.filter(ue=>!It.some(Ce=>Ce.questId===ue.id)&&!Xr.includes(ue.id)),Qr=async ue=>{try{await Be.acceptQuest(t.id,ue.id),Yn.questAccept(),c.success(`Contract accepted: ${ue.title}`)}catch{c.error("Failed to accept contract.")}},mn=async ue=>{const Ce=ue.type==="CUSTOM";if(await d({message:Ce?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:Ce?"Submit":"Deploy",variant:"info"}))try{await Be.deployMission(t.id,ue),Yn.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},G=["HEAD","HANDS","RING1","AMULET"],Re=["CHEST","BELT","FEET","RING2"],[Pe,mt]=M.useState(null),bt=C_e(Bz(r9,{activationConstraint:{distance:8}}),Bz(UX,{activationConstraint:{delay:150,tolerance:5}})),Pt=ue=>ue==="RING1"||ue==="RING2"?["RING"]:[ue],Wt=ue=>{const{active:Ce}=ue,qe=Xt.find(tt=>tt.id===Ce.id)||Object.values(_t).find(tt=>tt&&tt.id===Ce.id);mt(qe||null)},br=ue=>{const{active:Ce,over:qe}=ue;if(mt(null),!qe)return;const tt=Ce.id,Qe=qe.id;if(Qe.startsWith("slot-")){const hr=Qe.replace("slot-",""),nr=Xt.find(Li=>Li.id===tt);if(!nr||!Pt(hr).includes(nr.slot))return;Dn(nr)}if(tt.startsWith("equipped-")&&(Qe==="inventory-zone"||Qe.startsWith("storage-cell-"))){const hr=tt.replace("equipped-","");Gn(hr)}},Jt=(ue,Ce,qe="w-5 h-5")=>{const tt=`${qe} ${Ce}`,Qe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(ue){case"HEAD":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),l.jsx("path",{d:"M5 11v2h14v-2"}),l.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),l.jsx("path",{d:"M6 4h12"}),l.jsx("path",{d:"M12 4v5"}),l.jsx("path",{d:"M9 9h6"})]});case"HANDS":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),l.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),l.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),l.jsx("path",{d:"M4 19h16"}),l.jsx("path",{d:"M11 3v4"})]});case"BELT":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),l.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),l.jsx("path",{d:"M12 7v3"}),l.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return l.jsxs("svg",{className:tt,...Qe,children:[l.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),l.jsx("path",{d:"M12 9V6"}),l.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return l.jsx(vb,{className:tt})}},$t=({slot:ue})=>{const Ce=_t[ue],qe=Ce?Qn(Ce.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:tt,isOver:Qe}=i9({id:`slot-${ue}`}),{attributes:hr,listeners:nr,setNodeRef:Zr,isDragging:Li}=HX({id:Ce?`equipped-${ue}`:`empty-slot-${ue}`,disabled:!Ce}),Ta=Pe&&Pt(ue).includes(Pe.slot),ic=Qe&&Ta?"ring-2 ring-purple-500 scale-110":Pe&&Ta?"ring-1 ring-purple-500/40 animate-pulse":"";return l.jsx("div",{ref:tt,className:"relative",children:l.jsx("div",{ref:Zr,...hr,...nr,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${Li?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${qe.border} ${qe.bg} ${qe.shimmer} ${qe.glow} ${ic}`,onClick:()=>!Li&&Ce&&R(Ce),children:Ce?l.jsxs(l.Fragment,{children:[Jt(ue.replace(/\d/,""),qe.text),l.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${qe.text}`,children:Ce.baseName||Ce.name.split(" ").slice(-1)[0]}),!Li&&l.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[l.jsx("div",{className:`text-[10px] font-bold ${qe.text}`,children:Ce.name}),l.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[Ce.rarity," ",ue]}),l.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(Ce.stats).map(([Xo,Iu])=>`+${Iu} ${Xo.slice(0,3).toUpperCase()}`).join("  ")}),l.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):l.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:ue.slice(0,4)})})})};return l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[ut.length>0&&l.jsx("div",{className:"lg:col-span-12 space-y-2",children:ut.map(ue=>{const Ce={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return l.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${Ce[ue.priority]}`,children:[l.jsx(xb,{className:"w-5 h-5 shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-bold text-sm text-white",children:ue.title}),l.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:ue.content})]}),l.jsx("button",{onClick:()=>it(ue.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:l.jsx(hs,{className:"w-4 h-4"})})]},ue.id)})}),b&&l.jsx("div",{className:"lg:col-span-12",children:l.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:l.jsx(Pi,{className:"w-5 h-5 fill-current"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[b.title," ACTIVE"]}),l.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",b.multiplier,"x XP on all tasks."]})]})]}),l.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[b.multiplier,"x"]})]})}),l.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[l.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${Ft.tierColor.split(" ")[0]} border-opacity-30`,children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[l.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${Ft.tierGlow} shadow-xl`,children:l.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${Ft.tierColor.split(" ")[0]}`})}),l.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Vr=t.gamification)==null?void 0:Vr.codename)||t.name}),l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${Ft.tierColor.split(" ")[1]}`,children:[Ft.rankName," (Lvl ",Lt,")"]}),l.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",We]})]}),$e.length>1&&l.jsxs("div",{className:"mt-4 relative w-full",children:[l.jsx("select",{value:m,onChange:Kt,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:$e.map(ue=>l.jsx("option",{value:ue,children:ue},ue))}),l.jsx(Va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),l.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${hn}%`}})}),l.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[l.jsxs("span",{children:[fn.toLocaleString()," XP (",m,")"]}),l.jsx("span",{children:"Next Rank"}),re&&l.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",re," XP"]})]})]})]}),l.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:l.jsx(D5,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),l.jsx("div",{className:"text-xl font-black text-white leading-none",children:Qt})]})]})}),(((vn=t.gamification)==null?void 0:vn.engagementStreak)||0)>0&&(()=>{var qe;const ue=((qe=t.gamification)==null?void 0:qe.engagementStreak)||0,Ce=JSe(ue);return l.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:l.jsx(_E,{className:"w-6 h-6"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),l.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[ue,"w"]})]}),Ce>1&&l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),l.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((Ce-1)*100),"%"]})]})]})})})(),(((Sr=t.gamification)==null?void 0:Sr.loginStreak)||0)>1&&l.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[l.jsx($oe,{className:"w-5 h-5 text-purple-400"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),l.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((fo=t.gamification)==null?void 0:fo.loginStreak)||0," day streak"]})]})]}),l.jsxs("button",{onClick:()=>ae(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[l.jsx(Hm,{className:"w-4 h-4"})," View Profile"]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&l.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:l.jsx(p2,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),l.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),l.jsx(Cd,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&l.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:l.jsx(Ioe,{className:"w-5 h-5"})}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),l.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),l.jsx(Cd,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),l.jsx("div",{className:"lg:col-span-9 space-y-6",children:l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[I==="MISSIONS"&&l.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[on.length===0&&l.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),on.map(ue=>l.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h4",{className:"text-lg font-bold text-white",children:ue.title}),l.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:ue.type.replace("_"," ")})]}),l.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:ue.description}),l.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[ue.statRequirements&&l.jsx("div",{className:"flex gap-2",children:Object.entries(ue.statRequirements).map(([Ce,qe])=>l.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[qe," ",Ce]},Ce))}),ue.expiresAt&&l.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[l.jsx(Rs,{className:"w-3 h-3"})," Expires: ",new Date(ue.expiresAt).toLocaleDateString()]})]}),l.jsxs("button",{onClick:()=>Qr(ue),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[l.jsx(kd,{className:"w-4 h-4"})," Accept Contract"]})]},ue.id))]}),l.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[pn.length===0&&l.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),pn.map(ue=>{var Qe,hr;const Ce=((Qe=It.find(nr=>nr.questId===ue.id))==null?void 0:Qe.status)||"ACCEPTED",qe=(hr=It.find(nr=>nr.questId===ue.id))==null?void 0:hr.deploymentRoll,tt=ue.type==="CUSTOM";return l.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:l.jsx(Do,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:ue.title}),l.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[ue.type," MISSION"]})]})]}),l.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${Ce==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":Ce==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":Ce==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:Ce})]}),Ce==="ACCEPTED"?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:ue.description}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>mn(ue),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[l.jsx(Hq,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),tt?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),ue.isGroupQuest&&l.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:l.jsx(mu,{className:"w-5 h-5"})})]})]}):Ce==="DEPLOYED"?l.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),l.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),l.jsx(Pi,{className:"w-6 h-6 text-purple-400"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),l.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:tt?"AWAITING_HQ_SIG_VERIFICATION":qe===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),l.jsx("div",{className:"h-10 w-px bg-white/5"}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),l.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),l.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),l.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:tt?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},ue.id)})]})]},"missions"),I==="RESOURCES"&&l.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(lt).length===0?l.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):l.jsx("div",{className:"space-y-4",children:Object.entries(lt).sort().map(([ue,Ce])=>l.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[l.jsxs("button",{onClick:()=>et(ue),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[h.has(ue)?l.jsx(Va,{className:"w-4 h-4 text-purple-400"}):l.jsx(Cd,{className:"w-4 h-4 text-gray-500"}),l.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:ue})]}),l.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[Ce.length," Files"]})]}),h.has(ue)&&l.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:Ce.map(qe=>{const tt=!!qe.dueDate,Qe=qe.dueDate?new Date(qe.dueDate):null,hr=new Date,nr=Qe?Math.ceil((Qe.getTime()-hr.getTime())/864e5):1/0,Zr=nr<=0?"text-red-400":nr<=2?"text-yellow-400":"text-gray-500",Li=Math.floor(qe.engagementTime/60),Ta=Li>=5;return l.jsxs("div",{className:"bg-white/5 border border-white/5 hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a&&a(qe.id),children:[l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Ta?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":qe.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Ta?l.jsx(bi,{className:"w-6 h-6"}):qe.lastEngagement?l.jsx(bi,{className:"w-5 h-5 opacity-60"}):bTe[qe.category||"Supplemental"]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:qe.category}),l.jsx("h4",{className:"font-bold text-white text-sm truncate",children:qe.title})]}),l.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:l.jsx("p",{className:"text-xs text-gray-500 truncate",children:qe.description})}),l.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[qe.lastEngagement&&l.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[Li,"m engaged"]}),tt&&l.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Zr}`,children:[l.jsx(Is,{className:"w-3 h-3"}),nr<=0?"Overdue":nr===1?"Due tomorrow":`Due in ${nr}d`]})]})]}),l.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:l.jsx(qq,{className:"w-4 h-4 text-purple-400 fill-current"})})]},qe.id)})})]},ue))})},"resources"),I==="LOADOUT"&&l.jsxs(jSe,{sensors:bt,collisionDetection:P_e,modifiers:[vTe],onDragStart:Wt,onDragEnd:br,children:[l.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[l.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative overflow-hidden flex flex-col items-center justify-center p-4 min-h-[400px]",children:[l.jsx("div",{className:"absolute inset-0 loadout-hex-bg pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${((($s=nt.appearance)==null?void 0:$s.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),l.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[l.jsx("div",{className:"flex flex-col gap-4",children:G.map(ue=>l.jsx($t,{slot:ue},ue))}),l.jsx("div",{className:"w-40 h-full relative",children:l.jsx(Dx,{equipped:_t,appearance:nt.appearance,evolutionLevel:Lt})}),l.jsx("div",{className:"flex flex-col gap-4",children:Re.map(ue=>l.jsx($t,{slot:ue},ue))})]}),l.jsxs("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),E(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[l.jsx(Koe,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),l.jsx("div",{className:"h-[200px]",children:l.jsx(eK,{width:"100%",height:"100%",children:l.jsxs(p_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:yt,children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),l.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),l.jsx(TW,{stroke:"rgba(255,255,255,0.08)"}),l.jsx(m1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),l.jsx(p1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),l.jsx(g1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),l.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),l.jsx("span",{className:"text-gray-500",children:"Tech"})," ",l.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:ye.tech})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),l.jsx("span",{className:"text-gray-500",children:"Focus"})," ",l.jsx("span",{className:"text-green-400 font-bold ml-auto",children:ye.focus})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),l.jsx("span",{className:"text-gray-500",children:"Analysis"})," ",l.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:ye.analysis})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),l.jsx("span",{className:"text-gray-500",children:"Charisma"})," ",l.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:ye.charisma})]})]})})]})]}),l.jsx(wTe,{inventory:Xt,equipped:_t,draggedItem:Pe,onInspect:R,getSlotIcon:Jt})]},"loadout"),l.jsx(GSe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Pe&&(()=>{const ue=Qn(Pe.rarity);return l.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:l.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${ue.bg} ${ue.border} ${ue.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Jt(Pe.slot,ue.text,"w-7 h-7"),l.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${ue.text} drop-shadow-lg`,children:Pe.baseName||Pe.name.split(" ").slice(-1)[0]})]})})})()})]}),I==="ACHIEVEMENTS"&&l.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:l.jsx(tTe,{unlockedAchievements:((Go=t.gamification)==null?void 0:Go.unlockedAchievements)||[],achievementProgress:gt})},"achievements"),I==="SKILLS"&&l.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:l.jsx(nTe,{specialization:(ku=t.gamification)==null?void 0:ku.specialization,skillPoints:((Vs=t.gamification)==null?void 0:Vs.skillPoints)||0,unlockedSkills:((Fs=t.gamification)==null?void 0:Fs.unlockedSkills)||[]})},"skills"),I==="FORTUNE"&&l.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:l.jsx(iTe,{currency:tr,lastSpin:(oa=t.gamification)==null?void 0:oa.lastWheelSpin,classType:m})},"fortune"),I==="TUTORING"&&l.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:l.jsx(fTe,{userId:t.id,userName:t.name,classType:m})},"tutoring")]})}),l.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:l.jsx(hTe,{userId:t.id,activeChallenges:((Ei=t.gamification)==null?void 0:Ei.activeDailyChallenges)||[],classType:m})}),l.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[l.jsx(lTe,{userId:t.id,userName:t.name,classType:m}),l.jsx(dTe,{classType:m})]})]}),l.jsx(ba,{isOpen:L,onClose:()=>{E(!1),D(null),J(null),ee(null),ge(null),Q(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:l.jsxs("div",{className:"p-4 space-y-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:l.jsx(Dx,{equipped:_t,appearance:{...nt.appearance,hue:B??((Ou=nt.appearance)==null?void 0:Ou.hue)??0,bodyType:Y??((u0=nt.appearance)==null?void 0:u0.bodyType)??"A",skinTone:X??((Ko=nt.appearance)==null?void 0:Ko.skinTone)??0,hairStyle:Z??((nc=nt.appearance)==null?void 0:nc.hairStyle)??1,hairColor:ce??((Wo=nt.appearance)==null?void 0:Wo.hairColor)??0}})})}),l.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[l.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),l.jsx("div",{className:"flex justify-center gap-2",children:GX.map((ue,Ce)=>{var tt;const qe=(X??((tt=nt.appearance)==null?void 0:tt.skinTone)??0)===Ce;return l.jsx("button",{onClick:()=>ee(Ce),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${qe?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},Ce)})})]}),l.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[l.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:KSe.map((ue,Ce)=>{var tt;const qe=(Z??((tt=nt.appearance)==null?void 0:tt.hairStyle)??1)===Ce;return l.jsx("button",{onClick:()=>ge(Ce),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${qe?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:ue},Ce)})})]}),l.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[l.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),l.jsx("div",{className:"flex justify-center gap-2",children:KX.map((ue,Ce)=>{var tt;const qe=(ce??((tt=nt.appearance)==null?void 0:tt.hairColor)??0)===Ce;return l.jsx("button",{onClick:()=>Q(Ce),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${qe?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},Ce)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[l.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),l.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(ue=>{var qe;const Ce=(Y??((qe=nt.appearance)==null?void 0:qe.bodyType)??"A")===ue;return l.jsx("button",{onClick:()=>J(ue),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${Ce?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:ue==="A"?"Alpha":ue==="B"?"Beta":"Femme"},ue)})})]}),l.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[l.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),l.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(ue=>{var qe;const Ce=(B??((qe=nt.appearance)==null?void 0:qe.hue)??0)===ue;return l.jsx("button",{onClick:()=>D(ue),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${Ce?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${ue}, 60%, 45%)`}},ue)})})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{E(!1),D(null),J(null),ee(null),ge(null),Q(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),l.jsx("button",{onClick:()=>{var ue,Ce,qe,tt,Qe;return Ie({hue:B??((ue=nt.appearance)==null?void 0:ue.hue)??0,bodyType:Y??((Ce=nt.appearance)==null?void 0:Ce.bodyType)??"A",skinTone:X??((qe=nt.appearance)==null?void 0:qe.skinTone)??0,hairStyle:Z??((tt=nt.appearance)==null?void 0:tt.hairStyle)??1,hairColor:ce??((Qe=nt.appearance)==null?void 0:Qe.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),l.jsx(ba,{isOpen:!!A,onClose:()=>R(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:A&&l.jsxs("div",{className:"space-y-6 text-gray-100",children:[l.jsxs("div",{className:`p-5 rounded-xl border ${A.runewordActive?"border-amber-500/40 runeword-active":Qn(A.rarity).border} ${Qn(A.rarity).bg} ${Qn(A.rarity).shimmer} relative overflow-hidden`,children:[l.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[l.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${A.runewordActive?"border-amber-500/50":Qn(A.rarity).border} ${Qn(A.rarity).bg}`,style:{boxShadow:A.runewordActive?"0 0 20px rgba(245,158,11,0.3)":A.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":A.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Jt(A.slot,A.runewordActive?"text-amber-400":Qn(A.rarity).text,"w-7 h-7")}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`text-lg font-bold ${A.runewordActive?"text-amber-300":Qn(A.rarity).text}`,children:A.name}),l.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[A.rarity," ",A.slot]}),A.runewordActive&&l.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(ps=DR(A))==null?void 0:ps.name})]})]}),l.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(A.stats).map(([ue,Ce])=>l.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[l.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:ue}),l.jsxs("span",{className:"font-mono font-bold",children:["+",Ce]})]},ue))}),l.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:A.affixes.map((ue,Ce)=>l.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[ue.name," (T",ue.tier,")"]},Ce))})]}),(A.sockets||0)>0&&(()=>{const ue=A.sockets||0,Ce=A.gems||[],qe=ue-Ce.length,tt=DR(A);return l.jsxs("div",{className:`p-4 rounded-xl border ${tt?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[tt&&l.jsxs("div",{className:"mb-3 text-center",children:[l.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),l.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:tt.name}),l.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:tt.lore}),l.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(tt.bonusStats).map(([Qe,hr])=>l.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",hr," ",Qe.slice(0,3).toUpperCase()]},Qe))}),tt.bonusEffects&&tt.bonusEffects.length>0&&l.jsx("div",{className:"mt-1",children:tt.bonusEffects.map(Qe=>l.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:Qe.description},Qe.id))})]}),l.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[l.jsx(D5,{className:"w-3 h-3"})," Gem Sockets (",Ce.length,"/",ue,")"]}),l.jsxs("div",{className:"flex gap-2",children:[Ce.map((Qe,hr)=>l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center",style:{borderColor:Qe.color,backgroundColor:`${Qe.color}20`,boxShadow:`0 0 8px ${Qe.color}40`},children:l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Qe.color}})}),l.jsx("span",{className:"text-[9px] text-gray-400",children:Qe.name})]},hr)),Array.from({length:qe}).map((Qe,hr)=>l.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${hr}`))]}),qe>0&&Lr.length>0&&l.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[l.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",es.ENCHANT," Flux)"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Lr.map(Qe=>l.jsxs("button",{onClick:()=>wr(Qe.id),disabled:F||tr<es.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Qe.color}}),l.jsx("span",{className:"text-gray-300",children:Qe.name}),l.jsxs("span",{className:"text-gray-600 font-mono",children:["+",Qe.value]})]},Qe.id))}),Ce.length>0&&!tt&&(()=>{const Qe=Ce.map(nr=>nr.name),hr=ZH.filter(nr=>nr.requiredSockets===ue&&nr.pattern.slice(0,Qe.length).every((Zr,Li)=>Zr===Qe[Li]));return hr.length===0?null:l.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:hr.map(nr=>l.jsxs("div",{children:["Possible: ",l.jsx("span",{className:"font-bold text-amber-400/80",children:nr.name}),"  needs [",nr.pattern.join("  "),"]"]},nr.id))})})()]})]})})(),(A.sockets||0)<3&&l.jsxs("button",{onClick:Ir,disabled:F||tr<es.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[l.jsx(D5,{className:"w-4 h-4"}),"Add Socket (",es.SOCKET," Flux)  ",A.sockets||0,"/3"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const ue=A.slot==="RING"?"RING1":A.slot,Ce=_t[ue]||(A.slot==="RING"?_t.RING2:null);if(!Ce||Ce.id===A.id)return null;const qe=Qn(Ce.rarity),tt=new Set([...Object.keys(A.stats),...Object.keys(Ce.stats)]);return l.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[l.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:`text-xs font-bold ${qe.text}`,children:Ce.name}),l.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:Ce.rarity})]}),l.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(tt).map(Qe=>{const hr=A.stats[Qe]||0,nr=Ce.stats[Qe]||0,Zr=hr-nr;return Zr===0?l.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[Qe.slice(0,3).toUpperCase(),": 0"]},Qe):l.jsxs("span",{className:`text-[10px] font-mono font-bold ${Zr>0?"text-green-400":"text-red-400"}`,children:[Qe.slice(0,3).toUpperCase(),": ",Zr>0?"":"",Math.abs(Zr)]},Qe)})})]})})(),(()=>{var Ce;const ue=(Ce=Object.entries(_t).find(([,qe])=>qe&&qe.id===A.id))==null?void 0:Ce[0];return ue?l.jsx("button",{onClick:()=>Gn(ue),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:F,children:"Unequip Gear"}):l.jsx("button",{onClick:()=>Dn(A),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:F,children:"Equip Gear"})})(),l.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),l.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),l.jsxs("button",{onClick:()=>pi("RECALIBRATE"),disabled:F||tr<es.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),l.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[es.RECALIBRATE," Flux"]})]}),l.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),l.jsxs("button",{onClick:()=>pi("REFORGE"),disabled:F||tr<es.REFORGE||A.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),l.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[es.REFORGE," Flux"]})]}),l.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),l.jsxs("button",{onClick:()=>pi("OPTIMIZE"),disabled:F||tr<es.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),l.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[es.OPTIMIZE," Flux"]})]}),l.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),l.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),l.jsxs("button",{onClick:Yi,disabled:F,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[l.jsx(xi,{className:"w-4 h-4"}),"Salvage for ",PR(A)," Flux"]})]})]})}),oe&&l.jsx(yTe,{user:t,classType:m,onClose:()=>ae(!1)}),pe&&l.jsx(pTe,{item:pe,onClose:()=>ve(null)}),l.jsx(ba,{isOpen:N,onClose:jt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:l.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((ue,Ce)=>l.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][Ce%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},Ce))}),l.jsxs("div",{className:"relative inline-block mb-6",children:[l.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),l.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),l.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:l.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:Lt})})]}),l.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:l.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:Ft.rankName})}),l.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&l.jsxs("div",{className:`${Qn(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${Qn(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),l.jsx("div",{className:`text-xl font-bold ${Qn(C.rarity).text}`,children:C.name}),l.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),l.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([ue,Ce])=>l.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",Ce," ",ue.toUpperCase()]},ue))})]})]}),l.jsx("button",{onClick:jt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},wTe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:i})=>{const{setNodeRef:a,isOver:s}=i9({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return l.jsxs("div",{ref:a,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":s?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[l.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[l.jsxs("span",{children:["Gear Storage (",t.length,")"]}),l.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[l.jsx(Toe,{className:"w-3 h-3"})," Drag to equip"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>l.jsx(STe,{item:d,equipped:e,onInspect:n,getSlotIcon:i},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>l.jsx(_Te,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},_Te=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=i9({id:`storage-cell-${t}`});return l.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},STe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:i,listeners:a,setNodeRef:s,isDragging:c}=HX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=Qn(t.rarity);return l.jsxs("div",{ref:s,...i,...a,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&l.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&l.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[l.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),l.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),l.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),l.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var hw=typeof self<"u"?self:global;const Lg=typeof navigator<"u",TTe=Lg&&typeof HTMLImageElement>"u",Lx=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),fw=hw.Buffer,Av=hw.BigInt,pw=!!fw,ATe=t=>t;function Bx(t,e=ATe){if(Lx)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let s9=hw.fetch;const ETe=t=>s9=t;if(!hw.fetch){const t=Bx("http",(n=>n)),e=Bx("https",(n=>n)),r=(n,{headers:i}={})=>new Promise((async(a,s)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:i};c!==""&&(y.port=Number(c));const b=(p==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let _=new URL(T.headers.location,n).toString();return r(_,{headers:i}).then(a).catch(s)}a({status:T.statusCode,arrayBuffer:()=>new Promise((_=>{let w=[];T.on("data",(N=>w.push(N))),T.on("end",(()=>_(Buffer.concat(w))))}))})}));b.on("error",s),b.end()}));ETe(r)}function zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Ux=t=>YX(t)?void 0:t,NTe=t=>t!==void 0;function YX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(NTe).length===0)}function hi(t){let e=new Error(t);throw delete e.stack,e}function Sd(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function W8(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const X8=t=>String.fromCharCode.apply(null,t),r$=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function ZX(t){return r$?r$.decode(t):pw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(X8(t)))}class La{static from(e,r){return e instanceof this&&e.le===r?e:new La(e,void 0,void 0,r)}constructor(e,r=0,n,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let a=new DataView(e,r,n);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof La){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&hi("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,r,n);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else hi("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=La){return e instanceof DataView||e instanceof La?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||hi("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new La(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return ZX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return X8(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let i=0;i<r&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return X8(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Q8(t,e){hi(`${t} '${e}' was not loaded, try using full build of exifr.`)}class o9 extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||Q8(this.kind,e),r&&(e in r||(function(n,i){hi(`Unknown ${n} '${i}'.`)})(this.kind,e),r[e].enabled||Q8(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Uo=new o9("file parser"),ui=new o9("segment parser"),Ho=new o9("file reader");function jTe(t,e){return typeof t=="string"?n$(t,e):Lg&&!TTe&&t instanceof HTMLImageElement?n$(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new La(t):Lg&&t instanceof Blob?Y8(t,e,"blob",Yd):void hi("Invalid input argument")}function n$(t,e){return(r=t).startsWith("data:")||r.length>1e4?Z8(t,e,"base64"):Lx&&t.includes("://")?Y8(t,e,"url",Qd):Lx?Z8(t,e,"fs"):Lg?Y8(t,e,"url",Qd):void hi("Invalid input argument");var r}async function Y8(t,e,r,n){return Ho.has(r)?Z8(t,e,r):n?(async function(i,a){let s=await a(i);return new La(s)})(t,n):void hi(`Parser ${r} is not loaded`)}async function Z8(t,e,r){let n=new(Ho.get(r))(t,e);return await n.read(),n}const Qd=t=>s9(t).then((e=>e.arrayBuffer())),Yd=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class CTe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ti(t,e,r){let n=new CTe;for(let[i,a]of r)n.set(i,a);if(Array.isArray(e))for(let i of e)t.set(i,n);else t.set(e,n);return n}function Zd(t,e,r){let n,i=t.get(e);for(n of r)i.set(n[0],n[1])}const Mi=new Map,uo=new Map,cu=new Map,eu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Pf=["jfif","xmp","icc","iptc","ihdr"],Jd=["tiff",...Pf],Vn=["ifd0","ifd1","exif","gps","interop"],tu=[...Jd,...Vn],ru=["makerNote","userComment"],Df=["translateKeys","translateValues","reviveValues","multiSegment"],nu=[...Df,"sanitize","mergeOutput","silentErrors"];class JX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Gp extends JX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,i){if(super(),zt(this,"enabled",!1),zt(this,"skip",new Set),zt(this,"pick",new Set),zt(this,"deps",new Set),zt(this,"translateKeys",!1),zt(this,"translateValues",!1),zt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=Vn.includes(e),this.canBeFiltered&&(this.dict=Mi.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:a,skip:s}=n;a&&a.length>0&&this.translateTagSet(a,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:hi(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of Df)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,i,{tagKeys:a,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(i=s.indexOf(n),i===-1&&(i=a.indexOf(Number(n))),i!==-1&&r.add(Number(a[i]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,zx(this.pick,this.deps)):this.enabled&&this.pick.size>0&&zx(this.pick,this.deps)}}var fa={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},i$=new Map;class c0 extends JX{static useCached(e){let r=i$.get(e);return r!==void 0||(r=new this(e),i$.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):hi(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Lg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of eu)this[e]=fa[e];for(e of nu)this[e]=fa[e];for(e of ru)this[e]=fa[e];for(e of tu)this[e]=new Gp(e,fa[e],void 0,this)}setupFromTrue(){let e;for(e of eu)this[e]=fa[e];for(e of nu)this[e]=fa[e];for(e of ru)this[e]=!0;for(e of tu)this[e]=new Gp(e,!0,void 0,this)}setupFromArray(e){let r;for(r of eu)this[r]=fa[r];for(r of nu)this[r]=fa[r];for(r of ru)this[r]=fa[r];for(r of tu)this[r]=new Gp(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,Vn)}setupFromObject(e){let r;for(r of(Vn.ifd0=Vn.ifd0||Vn.image,Vn.ifd1=Vn.ifd1||Vn.thumbnail,Object.assign(this,e),eu))this[r]=vT(e[r],fa[r]);for(r of nu)this[r]=vT(e[r],fa[r]);for(r of ru)this[r]=vT(e[r],fa[r]);for(r of Jd)this[r]=new Gp(r,fa[r],e[r],this);for(r of Vn)this[r]=new Gp(r,fa[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Vn,tu),e.tiff===!0?this.batchEnableWithBool(Vn,!0):e.tiff===!1?this.batchEnableWithUserValue(Vn,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Vn):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Vn)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let i=r[n];this[n].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,r,n,i=n){if(e&&e.length){for(let s of i)this[s].enabled=!1;let a=a$(e,n);for(let[s,c]of a)zx(this[s].pick,c),this[s].enabled=!0}else if(r&&r.length){let a=a$(r,n);for(let[s,c]of a)zx(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:i,icc:a}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:i}=this;i.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=Vn.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of Vn)this[a].finalizeFilters()}get onlyTiff(){return!Pf.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Jd)this[e].enabled&&!ui.has(e)&&Q8("segment parser",e)}}function a$(t,e){let r,n,i,a,s=[];for(i of e){for(a of(r=Mi.get(i),n=[],r))(t.includes(a[0])||t.includes(a[1]))&&n.push(a[0]);n.length&&s.push([i,n])}return s}function vT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function zx(t,e){for(let r of e)t.add(r)}zt(c0,"default",fa);class Cu{constructor(e){zt(this,"parsers",{}),zt(this,"output",{}),zt(this,"errors",[]),zt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=c0.useCached(e)}async read(e){this.file=await jTe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,i]of Uo)if(i.canHandle(e,r))return this.fileParser=new i(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),hi("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),Ux(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let i=await n.parse();n.assignToOutput(e,i)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=ui.get("tiff",e);var i;if(r.tiff?i={start:0,type:"tiff"}:r.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),s=this.parsers.tiff=new n(a,e,r),c=await s.extractThumbnail();return r.close&&r.close(),c}}async function mw(t,e){let r=new Cu(e);return await r.read(t),r.parse()}var kTe=Object.freeze({__proto__:null,parse:mw,Exifr:Cu,fileParsers:Uo,segmentParsers:ui,fileReaders:Ho,tagKeys:Mi,tagValues:uo,tagRevivers:cu,createDictionary:ti,extendDictionary:Zd,fetchUrlAsArrayBuffer:Qd,readBlobAsArrayBuffer:Yd,chunkedProps:eu,otherSegments:Pf,segments:Jd,tiffBlocks:Vn,segmentsAndBlocks:tu,tiffExtractables:ru,inheritables:Df,allFormatters:nu,Options:c0});class gw{constructor(e,r,n){zt(this,"errors",[]),zt(this,"ensureSegmentChunk",(async i=>{let a=i.start,s=i.size||65536;if(this.file.chunked)if(this.file.available(a,s))i.chunk=this.file.subarray(a,s);else try{i.chunk=await this.file.readChunk(a,s)}catch(c){hi(`Couldn't read segment: ${JSON.stringify(i)}. ${c.message}`)}else this.file.byteLength>a+s?i.chunk=this.file.subarray(a,s):i.size===void 0?i.chunk=this.file.subarray(a):hi("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(ui.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:i}=r,a=this.options[n];if(a&&a.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,i)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class no{static findPosition(e,r){let n=e.getUint16(r+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,a=r+i,s=n-i;return{offset:r,length:n,headerLength:i,start:a,size:s,end:a+s}}static parse(e,r={}){return new this(e,new c0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof La?e:new La(e)}constructor(e,r={},n){zt(this,"errors",[]),zt(this,"raw",new Map),zt(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=cu.get(r),i=uo.get(r),a=Mi.get(r),s=this.options[r],c=s.reviveValues&&!!n,d=s.translateValues&&!!i,h=s.translateKeys&&!!a,p={};for(let[m,y]of e)c&&n.has(m)?y=n.get(m)(y):d&&i.has(m)&&(y=this.translateValue(y,i.get(m))),h&&a.has(m)&&(m=a.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}zt(no,"headerLength",4),zt(no,"type",void 0),zt(no,"multiSegment",!1),zt(no,"canHandle",(()=>!1));function OTe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function ITe(t){return t>=224&&t<=239}function RTe(t,e,r){for(let[n,i]of ui)if(i.canHandle(t,e,r))return n}class s$ extends gw{constructor(...e){super(...e),zt(this,"appSegments",[]),zt(this,"jpegSegments",[]),zt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(ui.keyList())):(e=e===void 0?ui.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&ui.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:i,wanted:a,remaining:s}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((c=>{let d=ui.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,i,a,s,c,d,{file:h,findAll:p,wanted:m,remaining:y,options:b}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),ITe(n)){if(i=h.getUint16(e+2),a=RTe(h,e,i),a&&m.has(a)&&(s=ui.get(a),c=s.findPosition(h,e),d=b[a],c.type=a,this.appSegments.push(c),!p&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(a)):y.delete(a),y.size===0)))break;b.recordUnknownSegments&&(c=no.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=i+1}else if(OTe(n)){if(i=h.getUint16(e+2),n===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let i,a,s,c=new Map;for(let d=0;d<r.length;d++)i=r[d],a=i[n],c.has(a)?s=c.get(a):c.set(a,s=[]),s.push(i);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let i=ui.get(r,this.options);return i.handleMultiSegments?{type:r,chunk:i.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}zt(s$,"type","jpeg"),Uo.set("jpeg",s$);const MTe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class PTe extends no{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:i,skip:a}=this.options[r];i=new Set(i);let s=i.size>0,c=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(s){if(i.has(p)&&(n.set(p,this.parseTag(e,p,r)),i.delete(p),i.size===0))break}else!c&&a.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:i}=this,a=i.getUint16(e+2),s=i.getUint32(e+4),c=MTe[a];if(c*s<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&hi(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&hi(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,s);if(a===2)return Sd(i.getString(e,s));if(a===7)return i.getUint8Array(e,s);if(s===1)return this.parseTagValue(a,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(s),h=c;for(let p=0;p<s;p++)d[p]=this.parseTagValue(a,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:hi(`Invalid tiff type ${e}`)}}}class bT extends PTe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&hi("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&hi(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,W8(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,W8(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",o$(...e.get(2),e.get(1))),e.set("longitude",o$(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,i={};for(r of Vn)if(e=this[r],!YX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(i,n)}else i[r]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,i]of Object.entries(r))this.assignObjectToOutput(e,n,i)}}function o$(t,e,r,n){var i=t+e/60+r/3600;return n!=="S"&&n!=="W"||(i*=-1),i}zt(bT,"type","tiff"),zt(bT,"headerLength",10),ui.set("tiff",bT);var DTe=Object.freeze({__proto__:null,default:kTe,Exifr:Cu,fileParsers:Uo,segmentParsers:ui,fileReaders:Ho,tagKeys:Mi,tagValues:uo,tagRevivers:cu,createDictionary:ti,extendDictionary:Zd,fetchUrlAsArrayBuffer:Qd,readBlobAsArrayBuffer:Yd,chunkedProps:eu,otherSegments:Pf,segments:Jd,tiffBlocks:Vn,segmentsAndBlocks:tu,tiffExtractables:ru,inheritables:Df,allFormatters:nu,Options:c0,parse:mw});const l9={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},c9=Object.assign({},l9,{firstChunkSize:4e4,gps:[1,2,3,4]});async function eQ(t){let e=new Cu(c9);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:i}=r.gps;return{latitude:n,longitude:i}}}const u9=Object.assign({},l9,{tiff:!1,ifd1:!0,mergeOutput:!1});async function tQ(t){let e=new Cu(u9);await e.read(t);let r=await e.extractThumbnail();return r&&pw?fw.from(r):r}async function rQ(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const d9=Object.assign({},l9,{firstChunkSize:4e4,ifd0:[274]});async function h9(t){let e=new Cu(d9);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const f9=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Td=!0,Ad=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Td=Number(r)+.1*Number(n)<13.4,Ad=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Td=Ad=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Td=Ad=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Td=Ad=Number(e)<77}}async function nQ(t){let e=await h9(t);return Object.assign({canvas:Td,css:Ad},f9[e])}class LTe extends La{constructor(...e){super(...e),zt(this,"ranges",new BTe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{let i=e+r;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let r;r=pw?fw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let i=super.set(e,r);return this.ranges.add(r,i.byteLength),i}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class BTe{constructor(){zt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let i=e+r,a=this.list.filter((s=>l$(e,s.offset,i)||l$(e,s.end,i)));if(a.length>0){e=Math.min(e,...a.map((c=>c.offset))),i=Math.max(i,...a.map((c=>c.end))),r=i-e;let s=a.shift();s.offset=e,s.length=r,s.end=i,this.list=this.list.filter((c=>!a.includes(c)))}else this.list.push({offset:e,length:r,end:i})}available(e,r){let n=e+r;return this.list.some((i=>i.offset<=e&&n<=i.end))}}function l$(t,e,r){return t<=e&&e<=r}class yw extends LTe{constructor(e,r){super(0),zt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Ho.set("blob",class extends yw{async readWhole(){this.chunked=!1;let t=await Yd(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),i=await Yd(n);return this.set(i,t,!0)}});var UTe=Object.freeze({__proto__:null,default:DTe,Exifr:Cu,fileParsers:Uo,segmentParsers:ui,fileReaders:Ho,tagKeys:Mi,tagValues:uo,tagRevivers:cu,createDictionary:ti,extendDictionary:Zd,fetchUrlAsArrayBuffer:Qd,readBlobAsArrayBuffer:Yd,chunkedProps:eu,otherSegments:Pf,segments:Jd,tiffBlocks:Vn,segmentsAndBlocks:tu,tiffExtractables:ru,inheritables:Df,allFormatters:nu,Options:c0,parse:mw,gpsOnlyOptions:c9,gps:eQ,thumbnailOnlyOptions:u9,thumbnail:tQ,thumbnailUrl:rQ,orientationOnlyOptions:d9,orientation:h9,rotations:f9,get rotateCanvas(){return Td},get rotateCss(){return Ad},rotation:nQ});Ho.set("url",class extends yw{async readWhole(){this.chunked=!1;let t=await Qd(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let i=await s9(this.input,{headers:n}),a=await i.arrayBuffer(),s=a.byteLength;if(i.status!==416)return s!==e&&(this.size=t+s),this.set(a,t,!0)}});La.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Av!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Av(e)<<Av(32)|Av(r)):void hi("Trying to read 64b value but JS can only handle 53b numbers.")};class zTe extends gw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),i=e+8;return r===1&&(r=this.file.getUint64(e+8),i+=8),{offset:e,length:r,kind:n,start:i}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class iQ extends zTe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let i=16,a=[];for(;i<n;)a.push(e.getString(i,4)),i+=4;return a.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let i=this.file.subarray(r,n);this.createParser(e,i)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let i=this.findBox(n,"colr");i!==void 0&&await this.registerSegment("icc",i.offset+12,i.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let i=this.findExifLocIdInIinf(r),a=this.findExtentInIloc(n,i);if(a===void 0)return;let[s,c]=a;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,i,a,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(i=r.version===3?4:2,a=this.file.getString(n+i+2,4),a==="Exif"))return this.file.getUintBytes(n,i);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[i,a]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+i+a,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let b=this.file.getUintBytes(n,d);n+=d+h+2+s;let T=this.file.getUint16(n);if(n+=2,b===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,i),this.file.getUintBytes(n+c+i,a)];n+=T*p}}}class aQ extends iQ{}zt(aQ,"type","heic");class c$ extends iQ{}zt(c$,"type","avif"),Uo.set("heic",aQ),Uo.set("avif",c$),ti(Mi,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ti(Mi,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ti(Mi,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ti(uo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Em=ti(uo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const u$={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Em.set(37392,u$),Em.set(41488,u$);const xT={0:"Normal",1:"Low",2:"High"};function d$(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function h$(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function wT(t){if(typeof t=="string"){var[e,r,n,i,a,s]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(s)||(c.setHours(i),c.setMinutes(a),c.setSeconds(s)),Number.isNaN(+c)?t:c}}function Kp(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(f$(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(f$(t[r],t[r+1]));return Sd(String.fromCodePoint(...e))}function f$(t,e){return t<<8|e}Em.set(41992,xT),Em.set(41993,xT),Em.set(41994,xT),ti(cu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?ZX(t):t}],[306,wT],[40091,Kp],[40092,Kp],[40093,Kp],[40094,Kp],[40095,Kp]]),ti(cu,"exif",[[40960,h$],[36864,h$],[36867,wT],[36868,wT],[40962,d$],[40963,d$]]),ti(cu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class _T extends no{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:La.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(a){let s={},c={};for(let d of cQ)s[d]=[],c[d]=0;return a.replace(qTe,((d,h,p)=>{if(h==="<"){let m=++c[p];return s[p].push(m),`${d}#${m}`}return`${d}#${s[p].pop()}`}))})(e);let r=Sh.findAll(e,"rdf","Description");r.length===0&&r.push(new Sh("rdf","Description",void 0,e));let n,i={};for(let a of r)for(let s of a.properties)n=FTe(s.ns,i),sQ(s,n);return(function(a){let s;for(let c in a)s=a[c]=Ux(a[c]),s===void 0&&delete a[c];return Ux(a)})(i)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,i]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",i);break;case"exif":this.assignObjectToOutput(e,"exif",i);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,i)}else e.xmp=r}}zt(_T,"type","xmp"),zt(_T,"multiSegment",!0),ui.set("xmp",_T);class $x{static findAll(e){return oQ(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map($x.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[3].slice(1,-1);return i=lQ(i),new $x(r,n,i)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Sh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var i=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else i=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return oQ(e,i).map(Sh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[4],a=e[8];return new Sh(r,n,i,a)}constructor(e,r,n,i){this.ns=e,this.name=r,this.attrString=n,this.innerXml=i,this.attrs=$x.findAll(n),this.children=Sh.findAll(i),this.value=this.children.length===0?lQ(i):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return VTe(this.children.map($Te));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)sQ(r,e);return this.value!==void 0&&(e.value=this.value),Ux(e)}}function sQ(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var $Te=t=>t.serialize(),VTe=t=>t.length===1?t[0]:t,FTe=(t,e)=>e[t]?e[t]:e[t]={};function oQ(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function lQ(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const cQ=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],qTe=new RegExp(`(<|\\/)(${cQ.join("|")})`,"g");var HTe=Object.freeze({__proto__:null,default:UTe,Exifr:Cu,fileParsers:Uo,segmentParsers:ui,fileReaders:Ho,tagKeys:Mi,tagValues:uo,tagRevivers:cu,createDictionary:ti,extendDictionary:Zd,fetchUrlAsArrayBuffer:Qd,readBlobAsArrayBuffer:Yd,chunkedProps:eu,otherSegments:Pf,segments:Jd,tiffBlocks:Vn,segmentsAndBlocks:tu,tiffExtractables:ru,inheritables:Df,allFormatters:nu,Options:c0,parse:mw,gpsOnlyOptions:c9,gps:eQ,thumbnailOnlyOptions:u9,thumbnail:tQ,thumbnailUrl:rQ,orientationOnlyOptions:d9,orientation:h9,rotations:f9,get rotateCanvas(){return Td},get rotateCss(){return Ad},rotation:nQ});let p$=Bx("fs",(t=>t.promises));Ho.set("fs",class extends yw{async readWhole(){this.chunked=!1,this.fs=await p$;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await p$,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});Ho.set("base64",class extends yw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,i=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let a=t+e,s=r+4*Math.ceil(a/3);i=i.slice(r,s);let c=Math.min(e,this.size-t);if(pw){let d=fw.from(i,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(i),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class m$ extends gw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:i,icc:a}=e;n.enabled&&r.deps.add(700),i.enabled&&r.deps.add(33723),a.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:i}=this.options;if(e.enabled||r.enabled||n.enabled||i.enabled){let a=Math.max(W8(this.options),this.options.chunkSize);await this.file.ensureChunk(0,a),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}zt(m$,"type","tiff"),Uo.set("tiff",m$);let GTe=Bx("zlib");const KTe=["ihdr","iccp","text","itxt","exif"];class g$ extends gw{constructor(...e){super(...e),zt(this,"catchError",(r=>this.errors.push(r))),zt(this,"metaChunks",[]),zt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let i=n.getUint32(e),a=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=i+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:i,marker:a};KTe.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,i]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,i)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),i=0;for(;i<80&&n[i]!==0;)i++;let a=i+2,s=r.getString(0,i);if(this.injectKeyValToIhdr("ProfileName",s),Lx){let c=await GTe,d=r.getUint8Array(a);d=c.inflateSync(d),this.injectSegment("icc",d)}}}zt(g$,"type","png"),Uo.set("png",g$),ti(Mi,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Zd(Mi,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let y$=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Zd(Mi,"ifd0",y$),Zd(Mi,"exif",y$),ti(uo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class ST extends no{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}zt(ST,"type","jfif"),zt(ST,"headerLength",9),ui.set("jfif",ST),ti(Mi,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class v$ extends no{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}zt(v$,"type","ihdr"),ui.set("ihdr",v$),ti(Mi,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ti(uo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Kv extends no{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(i){let a=i[0].constructor,s=0;for(let h of i)s+=h.length;let c=new a(s),d=0;for(let h of i)c.set(h,d),d+=h.length;return c})(r.map((i=>i.chunk.toUint8())));return new La(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&hi("ICC header is too short");for(let[r,n]of Object.entries(WTe)){r=parseInt(r,10);let i=n(this.chunk,r);i!=="\0\0\0\0"&&e.set(r,i)}}parseTags(){let e,r,n,i,a,{raw:s}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),i=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");a=this.parseTag(i,r,n),a!==void 0&&a!=="\0\0\0\0"&&s.set(e,a),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Sd(this.chunk.getString(e+12,r))}parseText(e,r){return Sd(this.chunk.getString(e+8,r-8))}parseSig(e){return Sd(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),i=r.getUint32(e+12),a=e+16,s=[];for(let c=0;c<n;c++){let d=r.getString(a+0,2),h=r.getString(a+2,2),p=r.getUint32(a+4),m=r.getUint32(a+8)+e,y=Sd(r.getUnicodeString(m,p));s.push({lang:d,country:h,text:y}),a+=i}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}zt(Kv,"type","icc"),zt(Kv,"multiSegment",!0),zt(Kv,"headerLength",18);const WTe={4:yl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:yl,16:yl,20:yl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,i=t.getUint16(e+4),a=t.getUint16(e+6),s=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,i,a,s,c))},36:yl,40:yl,48:yl,52:yl,64:(t,e)=>t.getUint32(e),80:yl};function yl(t,e){return Sd(t.getString(e,4))}ui.set("icc",Kv),ti(Mi,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Ev={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},b$={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ti(uo,"icc",[[4,Ev],[12,b$],[40,Object.assign({},Ev,b$)],[48,Ev],[80,Ev],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Nv extends no{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let i,a=this.containsIptc8bim(e,r,n);if(a!==void 0)return i=e.getUint8(r+a+7),i%2!=0&&(i+=1),i===0&&(i=4),a+8+i}static containsIptc8bim(e,r,n){for(let i=0;i<n;i++)if(this.isIptcSegmentHead(e,r+i))return i}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let i=0;i<r;i++)if(this.chunk.getUint8(i)===28&&this.chunk.getUint8(i+1)===2){n=!0;let a=this.chunk.getUint16(i+3),s=this.chunk.getUint8(i+2),c=this.chunk.getLatin1String(i+5,a);e.set(s,this.pluralizeValue(e.get(s),c)),i+=4+a}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}zt(Nv,"type","iptc"),zt(Nv,"translateValues",!1),zt(Nv,"reviveValues",!1),ui.set("iptc",Nv),ti(Mi,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ti(uo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const Wp=["Monday","Tuesday","Wednesday","Thursday","Friday"],XTe=({user:t})=>{const e=sa(),{confirm:r}=Tu(),n=M.useMemo(()=>Be.getWeekId(),[]),[i,a]=M.useState([]),[s,c]=M.useState("Monday"),[d,h]=M.useState(!1),p=M.useRef(null),[m,y]=M.useState(!1),b=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,_]=M.useState(t.classType||b[0]||"Uncategorized");M.useEffect(()=>{const E=new Date().toLocaleDateString("en-US",{weekday:"long"});Wp.includes(E)&&c(E)},[]),M.useEffect(()=>{const E=Be.subscribeToEvidence(t.id,n,a);return()=>E()},[t.id,n]);const w=M.useMemo(()=>{const E=b[0]||"Uncategorized";return i.filter(A=>A.classType?A.classType===T:T===E)},[i,T,b]),N=E=>w.find(A=>A.dayOfWeek===E),k=E=>E?new Date(E).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,C=async E=>{var R;const A=(R=E.target.files)==null?void 0:R[0];if(A){h(!0);try{let F=null;if(A.type.startsWith("image/"))try{const Z=await HTe.parse(A,["DateTimeOriginal"])||{};Z.DateTimeOriginal&&(F=Z.DateTimeOriginal.toISOString())}catch(Z){console.warn("EXIF extraction failed",Z)}const P=T.replace(/[^a-zA-Z0-9]/g,"_"),B=Math.random().toString(36).substring(2,9),D=hm(fm,`evidence/${t.id}/${n}/${P}_${s}_${B}`);await nA(D,A);const Y=await mb(D),J=N(s),ee={id:`${t.id}_${n}_${s}_${P}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:Y,timestamp:new Date().toISOString(),exifDate:F,reflection:(J==null?void 0:J.reflection)||""};await Be.uploadEvidence(ee)}catch(F){e.error("Upload failed: "+(F instanceof Error?F.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},$=async(E,A)=>{const R=N(E);R&&R.reflection!==A&&await Be.uploadEvidence({...R,reflection:A})},I=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const A=new zY,R=A.internal.pageSize.getWidth(),F=A.internal.pageSize.getHeight(),P=20,B=R-P*2,D=F-P;A.setFillColor(15,7,32),A.rect(0,0,R,40,"F"),A.setTextColor(255,255,255),A.setFontSize(22),A.setFont("helvetica","bold"),A.text("WEEKLY PROGRESS REPORT",P,18),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Operative: ${t.name.toUpperCase()}`,P,28),A.text(`Class: ${T}`,P,33),A.text(`Cycle ID: ${n}`,P,38),A.text(`Generated: ${new Date().toLocaleDateString()}`,R-P,33,{align:"right"});let Y=55;const J=[...w].sort((X,ee)=>Wp.indexOf(X.dayOfWeek)-Wp.indexOf(ee.dayOfWeek));for(const X of J){let ee=null,Z="JPEG",ge=0,ce=0,Q=!1;try{const Ne=await fetch(X.imageUrl);if(!Ne.ok)throw new Error(`Image fetch failed: ${Ne.statusText}`);const le=await Ne.blob();ee=await new Promise((Ke,ut)=>{const it=new FileReader;it.onloadend=()=>Ke(it.result),it.onerror=ut,it.readAsDataURL(le)}),le.type==="image/png"&&(Z="PNG"),le.type==="image/webp"&&(Z="WEBP");const we=A.getImageProperties(ee),xe=we.width/we.height,dt=100;ge=B,ce=ge/xe,ce>dt&&(ce=dt,ge=ce*xe)}catch(Ne){console.warn("Image processing error for PDF",Ne),Q=!0,ce=15}const oe=20+ce+12;Y+oe>D&&(A.addPage(),Y=P),A.setDrawColor(200,200,200),A.setLineWidth(.5),A.line(P,Y,R-P,Y),Y+=6,A.setTextColor(15,7,32),A.setFontSize(16),A.setFont("helvetica","bold"),A.text(X.dayOfWeek.toUpperCase(),P,Y);const ae=k(X.exifDate)||k(X.timestamp);if(A.setFontSize(9),A.setFont("helvetica","italic"),A.setTextColor(100,100,100),A.text(`Captured: ${ae}`,R-P,Y,{align:"right"}),Y+=10,!Q&&ee){const Ne=(R-ge)/2;A.addImage(ee,Z,Ne,Y,ge,ce),Y+=ce+12}else A.setTextColor(255,0,0),A.setFontSize(8),A.text("[Image Error]",P,Y),Y+=15;A.setFont("helvetica","normal"),A.setFontSize(10);const pe=X.reflection||"No reflection logged for this cycle.",ve=A.splitTextToSize(pe,B),Ye=ve.length*5+15;Y+Ye>D&&(A.addPage(),Y=P),A.setTextColor(15,7,32),A.setFontSize(11),A.setFont("helvetica","bold"),A.text("DAILY REFLECTION:",P,Y),Y+=6,A.setFont("helvetica","normal"),A.setFontSize(10),A.setTextColor(60,60,60),A.text(ve,P,Y),Y+=ve.length*5+25}A.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Be.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(A){console.error("PDF generation failed:",A),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},L=N(s);return l.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[l.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[l.jsx(DI,{className:"w-7 h-7"})," Weekly Evidence Log"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.length>1?l.jsxs("div",{className:"relative group",children:[l.jsx("select",{value:T,onChange:E=>_(E.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:b.map(E=>l.jsx("option",{value:E,children:E},E))}),l.jsx(Va,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):l.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),l.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[l.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),l.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),l.jsxs("button",{onClick:I,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?l.jsx(os,{className:"w-5 h-5 animate-spin"}):l.jsx(voe,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),l.jsx("input",{type:"file",ref:p,onChange:C,className:"hidden",accept:"image/*"}),l.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:Wp.map(E=>{const A=N(E),R=s===E;return l.jsxs("button",{onClick:()=>c(E),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${R?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[l.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${R?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",Wp.indexOf(E)+1]}),l.jsx("span",{className:"font-bold text-sm",children:E}),A&&l.jsx("div",{className:`absolute top-2 right-2 ${R?"text-emerald-200":"text-emerald-500"}`,children:l.jsx(bb,{className:"w-3 h-3"})})]},E)})}),l.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[l.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[l.jsx(Noe,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),L&&l.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[l.jsx(Is,{className:"w-3 h-3"}),k(L.exifDate)||k(L.timestamp)]})]}),l.jsx("div",{className:"flex-1 bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:L?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:L.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),l.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},children:[l.jsx(Km,{className:"w-8 h-8 text-emerald-400"}),l.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):l.jsxs("button",{onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?l.jsx(os,{className:"w-10 h-10 animate-spin text-emerald-500"}):l.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:l.jsx(DI,{className:"w-8 h-8"})}),l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),l.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),l.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[l.jsx("div",{className:"mb-2",children:l.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[l.jsx(wE,{className:"w-4 h-4"})," Daily Reflection"]})}),L?l.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:L.reflection,onBlur:E=>$(s,E.target.value)},s):l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[l.jsx("div",{className:"mb-2 opacity-30",children:l.jsx(Cd,{className:"w-6 h-6"})}),l.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),l.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},QTe=({user:t})=>{const e=sa(),[r,n]=M.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[i,a]=M.useState(""),[s,c]=M.useState(""),[d,h]=M.useState("");M.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(b,T)=>{try{return jb.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");a(y)},[r.content]);const p=async()=>{await Be.saveLabReport(r),await Be.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(s),b=parseFloat(d);!isNaN(y)&&!isNaN(b)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:b}].sort((_,w)=>_.x-w.x)})),c(""),h(""))};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[l.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[l.jsx(p2,{className:"w-6 h-6"})," Physics Laboratory"]}),l.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[l.jsx(Gq,{className:"w-4 h-4"})," Save Report"]})]}),l.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:l.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),l.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[l.jsxs("div",{className:"w-1/3",children:[l.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),l.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),l.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx(eK,{width:"100%",height:"100%",children:l.jsxs(m_e,{children:[l.jsx(aX,{strokeDasharray:"3 3",stroke:"#333"}),l.jsx(iw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),l.jsx(aw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),l.jsx(xo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),l.jsx(v1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),l.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[l.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:l.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[l.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(b=>({...b,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),l.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:QH.sanitize(i,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},YTe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],ZTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],JTe=({userId:t,classType:e,onClose:r})=>{var $,I,L,E,A;const[n,i]=M.useState(null),[a,s]=M.useState(!0);if(M.useEffect(()=>{(async()=>{const F=await Be.getPublicProfile(t);i(F),s(!1)})()},[t]),a)return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:l.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:l.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=($=n.settings)==null?void 0:$.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=zh(p),y=QX(p),{equipped:b,appearance:T}=qd(n,e),_=GE({gamification:{...c,equipped:b}}),w=$h(b),N=((I=c.classXp)==null?void 0:I[e])||0,k=Object.values(b).filter(Boolean),C=XX(k);return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[l.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[l.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:l.jsx(hs,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-24 h-32 shrink-0",children:l.jsx(Dx,{equipped:b,appearance:T})}),l.jsxs("div",{children:[l.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),l.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),l.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),l.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Pi,{className:"w-3 h-3 text-cyan-400"}),l.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[N.toLocaleString()," XP"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Vl,{className:"w-3 h-3 text-yellow-400"}),l.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),l.jsxs("div",{className:"p-6 border-b border-white/5",children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(Do,{className:"w-3 h-3"})," Stats"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:YTe.map(({key:R,label:F,color:P,icon:B})=>{const D=_[R]||0;return l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[l.jsx("span",{className:"text-sm",children:B}),l.jsx("span",{className:"text-xs text-gray-400",children:F}),l.jsx("span",{className:`text-sm font-bold ${P} ml-auto`,children:D})]},R)})})]}),l.jsxs("div",{className:"p-6 border-b border-white/5",children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(Vl,{className:"w-3 h-3"})," Equipment"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:ZTe.map(R=>{const F=b[R];if(!F)return l.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[l.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:R}),l.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},R);const P=Qn(F.rarity);return l.jsxs("div",{className:`p-2 rounded-lg border ${P.border} ${P.bg}`,children:[l.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:R}),l.jsx("div",{className:`text-xs font-bold truncate ${P.text}`,children:F.name}),l.jsx("div",{className:"text-[9px] text-gray-500",children:F.rarity})]},R)})})]}),C.length>0&&l.jsxs("div",{className:"p-6 border-b border-white/5",children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(TE,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),C.map(({set:R,activeBonus:F})=>l.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[l.jsx("div",{className:"text-xs font-bold text-purple-400",children:R.name}),l.jsxs("div",{className:"text-[10px] text-gray-400",children:[F.label,": ",F.effects.map(P=>`+${P.value} ${P.stat}`).join(", ")]})]},R.id))]}),(((L=c.unlockedAchievements)==null?void 0:L.length)||0)>0&&l.jsxs("div",{className:"p-6",children:[l.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[l.jsx(pu,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(E=c.unlockedAchievements)==null?void 0:E.length,")"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:(A=c.unlockedAchievements)==null?void 0:A.slice(0,12).map(R=>l.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:R.replace(/_/g," ")},R))})]})]})})},eAe=()=>l.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>l.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[l.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),l.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),l.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),l.jsxs("div",{className:"space-y-2 text-right",children:[l.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),l.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),tAe=({user:t})=>{var m;const[e,r]=M.useState([]),[n,i]=M.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Pr.AP_PHYSICS),[a,s]=M.useState(!0),[c,d]=M.useState(null);M.useEffect(()=>{const y=Be.subscribeToLeaderboard(b=>{r(b),s(!1)});return()=>y()},[]);const h=M.useMemo(()=>{const y=t.enrolledClasses||[];if(y.length>0)return y.sort();const b=new Set;return e.forEach(T=>{var _;return(_=T.enrolledClasses)==null?void 0:_.forEach(w=>b.add(w))}),Array.from(b).sort()},[t.enrolledClasses,e]),p=M.useMemo(()=>e.filter(y=>{var b;return(b=y.enrolledClasses)==null?void 0:b.includes(n)}).sort((y,b)=>{var w,N,k,C;const T=((N=(w=y.gamification)==null?void 0:w.classXp)==null?void 0:N[n])||0;return(((C=(k=b.gamification)==null?void 0:k.classXp)==null?void 0:C[n])||0)-T}).slice(0,10),[e,n]);return l.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),l.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),l.jsxs("div",{className:"inline-block relative",children:[l.jsxs("select",{value:n,onChange:y=>i(y.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(y=>l.jsx("option",{value:y,children:y},y)),h.length===0&&l.jsx("option",{children:n})]}),l.jsx(Va,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),l.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:a?l.jsx(eAe,{}):l.jsxs(l.Fragment,{children:[p.length>=3&&l.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(y=>{var E,A,R,F,P;const b=p[y];if(!b)return null;const T=(E=b.settings)==null?void 0:E.privacyMode,_=T?((A=b.gamification)==null?void 0:A.codename)||"Unknown Agent":b.name,w=((F=(R=b.gamification)==null?void 0:R.classXp)==null?void 0:F[n])||0,N=((P=b.gamification)==null?void 0:P.level)||1,k=zh(N),C=y===0,$=["h-28","h-20","h-16"],I=["w-20 h-20","w-14 h-14","w-14 h-14"],L=[{icon:l.jsx(pu,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:l.jsx(Zy,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:l.jsx(Zy,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return l.jsxs("div",{className:`flex flex-col items-center ${C?"order-2":y===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+y*.15}s both`},children:[l.jsxs("div",{className:`relative mb-2 ${C?"mb-3":""}`,children:[l.jsx("div",{className:`${I[y]} rounded-full p-0.5 bg-white/10 ring-2 ${L[y].ring} relative ${C?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:l.jsx("img",{src:b.avatarUrl,alt:_,className:`w-full h-full rounded-full border-2 ${k.tierColor.split(" ")[0]} object-cover`})}),l.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${L[y].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:L[y].icon})]}),l.jsxs("div",{className:`text-center ${C?"mt-2":"mt-1"}`,children:[l.jsx("div",{className:`font-bold truncate max-w-[100px] ${C?"text-sm text-white":"text-xs text-gray-300"} ${T?"italic":""}`,children:_}),l.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${C?"text-xl":"text-base"}`,children:w.toLocaleString()}),l.jsx("div",{className:`text-[9px] font-mono uppercase ${k.tierColor.split(" ")[1]}`,children:k.rankName}),l.jsxs("button",{onClick:()=>d(b.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[l.jsx(Hm,{className:"w-3 h-3"})," Inspect"]})]}),l.jsx("div",{className:`${$[y]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${y===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":y===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},b.id)})}),l.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((y,b)=>{var $,I,L,E,A;const T=p.length>=3?b+3:b,_=($=y.settings)==null?void 0:$.privacyMode,w=_?((I=y.gamification)==null?void 0:I.codename)||"Unknown Agent":y.name,N=((E=(L=y.gamification)==null?void 0:L.classXp)==null?void 0:E[n])||0,k=((A=y.gamification)==null?void 0:A.level)||1,C=zh(k);return l.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*T}s both`},children:[l.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[T<3&&T===0&&l.jsx(pu,{className:"w-6 h-6 text-yellow-400 mx-auto"}),T<3&&T===1&&l.jsx(Zy,{className:"w-6 h-6 text-gray-300 mx-auto"}),T<3&&T===2&&l.jsx(Zy,{className:"w-6 h-6 text-amber-600 mx-auto"}),T>=3&&`#${T+1}`]}),l.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[l.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${C.tierColor.split(" ")[0]}`}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:k})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("h3",{className:`text-base font-bold truncate ${_?"text-purple-300 italic":"text-white"}`,children:[w,_&&l.jsx(Bh,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),l.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${C.tierColor.split(" ")[1]}`,children:C.rankName})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:N.toLocaleString()}),l.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),l.jsx("button",{onClick:()=>d(y.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:l.jsx(Hm,{className:"w-4 h-4"})})]},y.id)}),p.length===0&&l.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[l.jsx(mu,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&l.jsx(JTe,{userId:c,classType:n,onClose:()=>d(null)})]})};class rAe extends te.Component{constructor(r){super(r);Ik(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:l.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[l.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:l.jsx("span",{className:"text-3xl",children:""})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),l.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&l.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),l.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[l.jsx(_b,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const x$={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:l.jsx(Ao,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:l.jsx(zq,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:l.jsx(TE,{className:"w-4 h-4"})}},nAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},TT=3;function AT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[r[n],r[i]]=[r[i],r[n]]}return r.slice(0,e)}const iAe=({assignment:t})=>{const e=sa(),[r,n]=M.useState([]),[i,a]=M.useState([]),[s,c]=M.useState(!0),[d,h]=M.useState(!1),[p,m]=M.useState({}),[y,b]=M.useState(1),[T,_]=M.useState(null),[w,N]=M.useState(new Set),k=M.useCallback(P=>{const B=AT(P.filter(J=>J.tier===1),TT),D=AT(P.filter(J=>J.tier===2),TT),Y=AT(P.filter(J=>J.tier===3),TT);a([...B,...D,...Y]),m({}),_(null)},[]);M.useEffect(()=>{(async()=>{var B;c(!0),h(!1);try{const D=await Gi(ht(Ue,"question_banks",t.id));if(!D.exists()){h(!0);return}const Y=D.data().questions||[];n(Y),k(Y)}catch(D){console.error("Failed to load question bank:",D),h(!0);return}finally{c(!1)}try{const D=(B=pV().currentUser)==null?void 0:B.uid;if(D){const Y=await Gi(ht(Ue,"review_progress",`${D}_${t.id}`));Y.exists()&&N(new Set(Y.data().answeredQuestions||[]))}}catch(D){console.warn("Could not load review progress:",D)}})()},[t.id,k]);const C=()=>{r.length>0&&k(r)},$=(P,B,D)=>{const Y=p[P];if(!(Y!=null&&Y.submitted))if(D==="multiple_select"||D==="ranking"){const J=(Y==null?void 0:Y.selected)||[],X=J.includes(B)?J.filter(ee=>ee!==B):[...J,B];m(ee=>({...ee,[P]:{...ee[P],selected:X,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(J=>({...J,[P]:{selected:B,submitted:!1,correct:!1,xpAwarded:!1}}))},I=(P,B)=>{var D;(D=p[P])!=null&&D.submitted||m(Y=>({...Y,[P]:{...Y[P],linkedSelected:B}}))},L=async P=>{const B=p[P.id];if(!(B!=null&&B.selected))return;let D=!1;if(P.type==="multiple_select"||P.type==="ranking"){const Y=B.selected,J=P.correctAnswer;D=Y.length===J.length&&Y.every((X,ee)=>X===J[ee])}else P.type==="linked_mc"?D=B.selected===P.correctAnswer&&(!P.linkedFollowUp||B.linkedSelected===P.linkedFollowUp.correctAnswer):D=B.selected===P.correctAnswer;if(D)if(w.has(P.id))m(Y=>({...Y,[P.id]:{...Y[P.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(Y=>({...Y,[P.id]:{...Y[P.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await Pq({assignmentId:t.id,questionId:P.id,xpAmount:P.xp,classType:t.classType})).data.awarded?(e.success(`+${P.xp} XP earned!`),m(X=>({...X,[P.id]:{...X[P.id],submitted:!0,correct:!0,xpAwarded:!0}})),N(X=>new Set([...X,P.id]))):e.success("Correct! (XP already claimed)")}catch(Y){console.error("XP award error:",Y)}}else m(Y=>({...Y,[P.id]:{...Y[P.id],submitted:!0,correct:!1,xpAwarded:!1}}))},E=M.useMemo(()=>i.filter(P=>P.tier===y),[i,y]),A=M.useMemo(()=>Object.entries(p).filter(([,P])=>P.correct&&P.xpAwarded).reduce((P,[B])=>{var D;return P+(((D=i.find(Y=>Y.id===B))==null?void 0:D.xp)||0)},0),[p,i]),R=M.useMemo(()=>i.reduce((P,B)=>P+B.xp,0),[i]),F=M.useMemo(()=>i.length>0&&i.every(P=>{var B;return(B=p[P.id])==null?void 0:B.submitted}),[i,p]);return s?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx(os,{className:"w-8 h-8 text-purple-400 animate-spin"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[l.jsx(Ao,{className:"w-12 h-12 text-gray-600"}),l.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),l.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):l.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ao,{className:"w-5 h-5 text-purple-400"}),l.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),l.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pi,{className:"w-4 h-4 text-yellow-400"}),l.jsx("span",{className:"text-sm font-bold text-yellow-400",children:A}),l.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",R," XP"]})]}),l.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[l.jsx(_b,{className:"w-3 h-3"})," New Set"]})]})]}),l.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(P=>{const B=x$[P],D=i.filter(X=>X.tier===P),Y=D.filter(X=>{var ee;return(ee=p[X.id])==null?void 0:ee.submitted}).length,J=D.filter(X=>{var ee;return(ee=p[X.id])==null?void 0:ee.correct}).length;return l.jsxs("button",{onClick:()=>b(P),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===P?`${B.bg} ${B.color} ${B.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[B.icon,l.jsx("span",{className:"hidden sm:inline",children:B.name}),l.jsxs("span",{className:"sm:hidden",children:["Tier ",P]}),Y>0&&l.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${J===D.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[J,"/",D.length]})]},P)})}),F&&l.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),l.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[l.jsx(_b,{className:"w-3 h-3"})," New Questions"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[E.map((P,B)=>{const D=p[P.id],Y=T===P.id,J=D==null?void 0:D.submitted,X=D==null?void 0:D.correct,ee=x$[P.tier];return l.jsxs("div",{className:`rounded-2xl border transition-all ${J?X?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Y?`${ee.border} ${ee.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[l.jsxs("button",{onClick:()=>_(Y?null:P.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[l.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${J?X?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${ee.bg} ${ee.color}`}`,children:J?X?l.jsx(bi,{className:"w-4 h-4"}):l.jsx(qm,{className:"w-4 h-4"}):B+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[l.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${ee.color}`,children:P.bloomsLevel}),l.jsx("span",{className:"text-[9px] text-gray-600",children:""}),l.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:nAe[P.type]||P.type}),l.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[l.jsx(Pi,{className:"w-3 h-3"}),P.xp," XP"]})]}),l.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:P.stem})]}),l.jsx(Cd,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Y?"rotate-90":""}`})]}),Y&&l.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[P.context&&l.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:P.context}),P.type==="ranking"?l.jsx(oAe,{question:P,answer:D,onSelect:$}):P.type==="multiple_select"?l.jsx(sAe,{question:P,answer:D,onSelect:$}):l.jsx(aAe,{question:P,answer:D,onSelect:$}),P.type==="linked_mc"&&P.linkedFollowUp&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[l.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),l.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:P.linkedFollowUp.stem}),l.jsx("div",{className:"space-y-2",children:P.linkedFollowUp.options.map(Z=>{const ge=(D==null?void 0:D.linkedSelected)===Z.id,ce=J,Q=Z.id===P.linkedFollowUp.correctAnswer;return l.jsxs("button",{onClick:()=>I(P.id,Z.id),disabled:J,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ce?Q?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ge?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ge?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[l.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Z.id.toUpperCase(),"."]})," ",Z.text]},Z.id)})})]}),J?l.jsxs("div",{className:`p-4 rounded-xl border ${X?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[X?l.jsx(bi,{className:"w-5 h-5 text-emerald-400"}):l.jsx(qm,{className:"w-5 h-5 text-red-400"}),l.jsx("span",{className:`font-bold text-sm ${X?"text-emerald-400":"text-red-400"}`,children:X?`Correct! +${P.xp} XP`:"Incorrect"})]}),l.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:P.explanation})]}):l.jsx("button",{onClick:()=>L(P),disabled:!(D!=null&&D.selected)||Array.isArray(D==null?void 0:D.selected)&&D.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},P.id)}),E.length===0&&l.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[l.jsx(Bh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},aAe=({question:t,answer:e,onSelect:r})=>l.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const i=(e==null?void 0:e.selected)===n.id,a=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return l.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":i?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":i?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[l.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),sAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=t.correctAnswer;return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(a=>{const s=n.includes(a.id),c=e==null?void 0:e.submitted,d=i.includes(a.id);return l.jsxs("button",{onClick:()=>r(t.id,a.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&l.jsx(bi,{className:"w-3 h-3 text-white"})}),l.jsxs("span",{children:[l.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[a.id.toUpperCase(),"."]})," ",a.text]})]},a.id)})]})},oAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=e==null?void 0:e.submitted,a=t.correctAnswer;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[l.jsx(loe,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&l.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=t.options.find(p=>p.id===s),h=i&&a[c]===s;return l.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${i?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return l.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?l.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):l.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function lAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${jb.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return jb.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,i)=>`<code class="math-inline">${n} = ${i}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const cAe=({assignment:t,onComplete:e})=>{const[r,n]=M.useState(null),[i,a]=M.useState(!0),[s,c]=M.useState(!1),d=M.useRef(yb()),h=M.useRef(Date.now()),p=M.useRef(e),[m,y]=M.useState(!0),[b,T]=M.useState(0);M.useEffect(()=>{p.current=e},[e]);const _=M.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);M.useEffect(()=>{const N=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(N)},[m]),M.useEffect(()=>{const N=["mousemove","keydown","scroll","click"];return N.forEach(k=>window.addEventListener(k,_)),()=>{N.forEach(k=>window.removeEventListener(k,_))}},[_]),M.useEffect(()=>()=>{p.current(d.current)},[]),M.useEffect(()=>{(async()=>{a(!0);try{const k=await Gi(ht(Ue,"reading_materials",t.id));k.exists()?n(k.data()):c(!0)}catch(k){console.error("Failed to load reading material:",k),c(!0)}finally{a(!1)}})()},[t.id]);const w=M.useMemo(()=>r?r.sections.map(N=>({title:N.title,html:lAe(N.content)})):[],[r]);return i?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[l.jsx(os,{className:"w-8 h-8 text-purple-400 animate-spin"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?l.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[l.jsx(so,{className:"w-12 h-12 text-gray-600"}),l.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),l.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):l.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[l.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?l.jsx(xE,{className:"w-4 h-4"}):l.jsx(Is,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),l.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(b/60),"m ",b%60,"s"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&l.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[l.jsx(Rs,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:_,children:l.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&l.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),l.jsx("div",{className:"space-y-10",children:w.map((N,k)=>l.jsxs("div",{className:"group",children:[l.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[l.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:k+1}),N.title]}),l.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:N.html}})]},k))}),l.jsx("div",{className:"mt-12 mb-4 text-center",children:l.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[l.jsx(so,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},w$={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},uAe=()=>{var de,oe;const[t,e]=M.useState(null),[r,n]=M.useState("Dashboard"),[i,a]=M.useState([]),[s,c]=M.useState([]),[d,h]=M.useState([]),[p,m]=M.useState([]),[y,b]=M.useState([]),[T,_]=M.useState(null),[w,N]=M.useState("STUDENT"),[k,C]=M.useState("WORK"),[$,I]=M.useState(!1),[L,E]=M.useState(!1),[A,R]=M.useState(!0),[F,P]=M.useState(!1),B=M.useMemo(()=>{const ae=new Map;return s.forEach(pe=>{const ve=ae.get(pe.userId)||[];ve.push(pe),ae.set(pe.userId,ve)}),d.map(pe=>{const ve=ae.get(pe.id)||[],Ye=ve.length,Ne=Math.round(ve.reduce((le,we)=>{var xe;return le+(((xe=we.metrics)==null?void 0:xe.engagementTime)||0)},0)/60);return{...pe,stats:{problemsCompleted:Ye,avgScore:0,rawAccuracy:0,totalTime:Ne}}})},[d,s]),D=M.useMemo(()=>i.find(ae=>ae.id===T)||null,[i,T]);M.useEffect(()=>{if(I(!1),E(!1),!T)return;const ae=Gi(ht(Ue,"question_banks",T)).then(ve=>{ve.exists()&&(ve.data().questions||[]).length>0&&I(!0)}).catch(()=>{}),pe=Gi(ht(Ue,"reading_materials",T)).then(ve=>{ve.exists()&&E(!0)}).catch(()=>{});Promise.all([ae,pe]).then(()=>{})},[T]),M.useEffect(()=>{let ae=null;const pe=mee(sA,async ve=>{ve?(await Y(ve),ae=$n(ht(Ue,"users",ve.uid),Ye=>{Ye.exists()&&e(Ne=>({...Ne||{},...Ye.data(),id:ve.uid}))})):(e(null),ae&&ae(),R(!1))});return()=>{pe(),ae&&ae()}},[]),M.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===ra.ADMIN)){const ae=Be.subscribeToAssignments(a),pe=Be.subscribeToClassConfigs(b),ve=[ae,pe];return t.role===ra.ADMIN?(ve.push(Be.subscribeToSubmissions(c)),ve.push(Be.subscribeToUsers(h)),ve.push(Be.subscribeToWhitelist(m))):ve.push(Be.subscribeToUserSubmissions(t.id,c)),()=>ve.forEach(Ye=>Ye())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),M.useEffect(()=>{(t==null?void 0:t.role)===ra.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),M.useEffect(()=>{var ae;ole(((ae=t==null?void 0:t.settings)==null?void 0:ae.soundEffects)!==!1)},[(de=t==null?void 0:t.settings)==null?void 0:de.soundEffects]),ale((t==null?void 0:t.id)||null,((oe=t==null?void 0:t.settings)==null?void 0:oe.pushNotifications)===!0);const Y=async ae=>{try{const pe=ht(Ue,"users",ae.uid),ve=await Gi(pe),Ye=await Gi(ht(Ue,"allowed_emails",ae.email||"")),le=(await ae.getIdTokenResult()).claims.admin===!0||ae.email===Yoe,we=Ye.exists()||le,xe=Ye.exists()?Ye.data():null,dt=(xe==null?void 0:xe.classType)||Pr.UNCATEGORIZED,Ke=(xe==null?void 0:xe.classTypes)||(dt!==Pr.UNCATEGORIZED?[dt]:[]);if(ve.exists()){const ut=ve.data(),it={lastLoginAt:new Date().toISOString(),isWhitelisted:we};if(le&&(it.role="ADMIN"),!we&&!le&&(it.enrolledClasses=[]),we&&Ke.length>0){const jt=ut.enrolledClasses||[],Ie=Array.from(new Set([...jt,...Ke]));Ie.length!==jt.length&&(it.enrolledClasses=Ie,(!ut.classType||ut.classType===Pr.UNCATEGORIZED)&&(it.classType=Ke[0]))}await Mr(pe,it)}else{const ut={email:ae.email,name:ae.displayName||"Student",avatarUrl:ae.photoURL||"",role:le?"ADMIN":"STUDENT",classType:dt,enrolledClasses:we?Ke:[],isWhitelisted:we,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Fi(pe,ut)}}catch(pe){console.error(pe)}finally{R(!1)}},J=async()=>{await gee(sA),e(null),_(null)},X=ae=>{C("WORK"),_(ae)},ee=M.useRef(D),Z=M.useRef(t);M.useEffect(()=>{ee.current=D},[D]),M.useEffect(()=>{Z.current=t},[t]);const ge=async ae=>{const pe=Z.current,ve=ee.current;if(!(!pe||!ve||pe.role===ra.ADMIN)&&!(ae.engagementTime<10))try{await Be.submitEngagement(pe.id,pe.name,ve.id,ve.title,ae,ve.classType)}catch(Ye){console.error("Engagement submission failed:",Ye)}},ce=M.useMemo(()=>{const ae={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const pe=y.find(ve=>ve.className===t.classType);if(pe)return pe.features}return ae},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(A)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return l.jsx(Uue,{});if(!t.isWhitelisted&&t.role!==ra.ADMIN)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:l.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[l.jsx(m2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),l.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",Xq," for authorization."]}),l.jsx("button",{onClick:J,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const Q=t.role===ra.ADMIN||ce.physicsTools,re=t.role===ra.ADMIN||ce.communications;return l.jsx(rAe,{children:l.jsx(zue,{children:l.jsx(tle,{children:l.jsxs(l.Fragment,{children:[l.jsx(rle,{}),Q&&l.jsx(sde,{onToggleChat:re?()=>P(!F):void 0}),re&&l.jsx(cde,{user:t,isOpen:F,onClose:()=>P(!1),assignments:i,classConfigs:y,onOpenResource:ae=>{X(ae)}}),l.jsx(ule,{user:t,onLogout:J,activeTab:r,setActiveTab:n,children:D?l.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[D.title,t.role===ra.ADMIN&&l.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),l.jsxs("div",{className:"flex gap-4 mt-2",children:[l.jsx("button",{onClick:()=>C("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${k==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),$&&l.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${k==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[l.jsx(Ao,{className:"w-3.5 h-3.5"})," Review"]}),L&&l.jsxs("button",{onClick:()=>C("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${k==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[l.jsx(so,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),l.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&l.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[l.jsx("button",{onClick:()=>N("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),l.jsx("button",{onClick:()=>N("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),l.jsxs("button",{onClick:()=>{_(null),C("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[l.jsx(ooe,{className:"w-4 h-4"})," Exit"]})]})]}),l.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[k==="WORK"&&l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsx(Bue,{onComplete:ge,contentUrl:D.contentUrl,htmlContent:D.htmlContent,userId:t.id,assignmentId:D.id,classType:D.classType})}),w==="ADMIN"&&t.role===ra.ADMIN&&l.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[l.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[l.jsx(Gm,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[l.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:l.jsx(mu,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(ae=>ae.assignmentId===D.id&&!ae.isArchived).length}),l.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),l.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[l.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),l.jsx("button",{onClick:()=>P(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),k==="REVIEW"&&l.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:l.jsx(iAe,{assignment:D})}),k==="STUDY"&&l.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:l.jsx(cAe,{assignment:D,onComplete:ge})})]})]}):l.jsx("div",{className:"h-full",children:l.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===ra.ADMIN&&l.jsxs(l.Fragment,{children:[r==="Dashboard"&&l.jsx(Hue,{users:B,assignments:i,submissions:s}),r==="User Management"&&l.jsx(Gue,{users:B,whitelistedEmails:p,classConfigs:y,onWhitelist:async(ae,pe)=>Be.addToWhitelist(ae,pe)}),r==="Admin Panel"&&l.jsx(Yue,{assignments:i,submissions:s,onCreateAssignment:async ae=>{ae.title&&await Be.addAssignment(ae)},classConfigs:y,onPreviewAssignment:ae=>{N("STUDENT"),X(ae)}}),r==="XP Command"&&l.jsx(ide,{users:d})]}),t.role===ra.STUDENT&&l.jsxs(l.Fragment,{children:[r in w$&&l.jsx(xTe,{user:t,assignments:i,submissions:s,enabledFeatures:ce,onNavigate:n,onStartAssignment:X,studentTab:w$[r]}),r==="Forensics"&&ce.evidenceLocker&&l.jsx(XTe,{user:t}),r==="Physics Lab"&&ce.physicsLab&&l.jsx(QTe,{user:t}),r==="Leaderboard"&&ce.leaderboard&&l.jsx(tAe,{user:t})]})]},r)})})]})})})})},uQ=document.getElementById("root");if(!uQ)throw new Error("Could not find root element to mount to");const dAe=QY.createRoot(uQ);dAe.render(l.jsx(te.StrictMode,{children:l.jsx(uAe,{})}));
