var xZ=Object.defineProperty;var bZ=(t,e,r)=>e in t?xZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Y9=(t,e,r)=>bZ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as wZ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C5={exports:{}},Mp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z9;function SZ(){if(Z9)return Mp;Z9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Mp.Fragment=e,Mp.jsx=r,Mp.jsxs=r,Mp}var J9;function _Z(){return J9||(J9=1,C5.exports=SZ()),C5.exports}var s=_Z(),O5={exports:{}},or={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO;function TZ(){if(eO)return or;eO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function v(Z){return Z===null||typeof Z!="object"?null:(Z=y&&Z[y]||Z["@@iterator"],typeof Z=="function"?Z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function j(Z,ne,ae){this.props=Z,this.context=ne,this.refs=w,this.updater=ae||_}j.prototype.isReactComponent={},j.prototype.setState=function(Z,ne){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ne,"setState")},j.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function O(){}O.prototype=j.prototype;function R(Z,ne,ae){this.props=Z,this.context=ne,this.refs=w,this.updater=ae||_}var L=R.prototype=new O;L.constructor=R,S(L,j.prototype),L.isPureReactComponent=!0;var C=Array.isArray;function P(){}var E={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function k(Z,ne,ae){var xe=ae.ref;return{$$typeof:t,type:Z,key:ne,ref:xe!==void 0?xe:null,props:ae}}function z(Z,ne){return k(Z.type,ne,Z.props)}function D(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function B(Z){var ne={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ae){return ne[ae]})}var $=/\/+/g;function K(Z,ne){return typeof Z=="object"&&Z!==null&&Z.key!=null?B(""+Z.key):ne.toString(36)}function W(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(P,P):(Z.status="pending",Z.then(function(ne){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ne)},function(ne){Z.status==="pending"&&(Z.status="rejected",Z.reason=ne)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function H(Z,ne,ae,xe,Oe){var Ue=typeof Z;(Ue==="undefined"||Ue==="boolean")&&(Z=null);var Xe=!1;if(Z===null)Xe=!0;else switch(Ue){case"bigint":case"string":case"number":Xe=!0;break;case"object":switch(Z.$$typeof){case t:case e:Xe=!0;break;case p:return Xe=Z._init,H(Xe(Z._payload),ne,ae,xe,Oe)}}if(Xe)return Oe=Oe(Z),Xe=xe===""?"."+K(Z,0):xe,C(Oe)?(ae="",Xe!=null&&(ae=Xe.replace($,"$&/")+"/"),H(Oe,ne,ae,"",function(me){return me})):Oe!=null&&(D(Oe)&&(Oe=z(Oe,ae+(Oe.key==null||Z&&Z.key===Oe.key?"":(""+Oe.key).replace($,"$&/")+"/")+Xe)),ne.push(Oe)),1;Xe=0;var Ye=xe===""?".":xe+":";if(C(Z))for(var Q=0;Q<Z.length;Q++)xe=Z[Q],Ue=Ye+K(xe,Q),Xe+=H(xe,ne,ae,Ue,Oe);else if(Q=v(Z),typeof Q=="function")for(Z=Q.call(Z),Q=0;!(xe=Z.next()).done;)xe=xe.value,Ue=Ye+K(xe,Q++),Xe+=H(xe,ne,ae,Ue,Oe);else if(Ue==="object"){if(typeof Z.then=="function")return H(W(Z),ne,ae,xe,Oe);throw ne=String(Z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Xe}function J(Z,ne,ae){if(Z==null)return Z;var xe=[],Oe=0;return H(Z,xe,"","",function(Ue){return ne.call(ae,Ue,Oe++)}),xe}function ie(Z){if(Z._status===-1){var ne=Z._result;ne=ne(),ne.then(function(ae){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ae)},function(ae){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ae)}),Z._status===-1&&(Z._status=0,Z._result=ne)}if(Z._status===1)return Z._result.default;throw Z._result}var he=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},pe={map:J,forEach:function(Z,ne,ae){J(Z,function(){ne.apply(this,arguments)},ae)},count:function(Z){var ne=0;return J(Z,function(){ne++}),ne},toArray:function(Z){return J(Z,function(ne){return ne})||[]},only:function(Z){if(!D(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return or.Activity=m,or.Children=pe,or.Component=j,or.Fragment=r,or.Profiler=a,or.PureComponent=R,or.StrictMode=n,or.Suspense=d,or.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,or.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return E.H.useMemoCache(Z)}},or.cache=function(Z){return function(){return Z.apply(null,arguments)}},or.cacheSignal=function(){return null},or.cloneElement=function(Z,ne,ae){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var xe=S({},Z.props),Oe=Z.key;if(ne!=null)for(Ue in ne.key!==void 0&&(Oe=""+ne.key),ne)!N.call(ne,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&ne.ref===void 0||(xe[Ue]=ne[Ue]);var Ue=arguments.length-2;if(Ue===1)xe.children=ae;else if(1<Ue){for(var Xe=Array(Ue),Ye=0;Ye<Ue;Ye++)Xe[Ye]=arguments[Ye+2];xe.children=Xe}return k(Z.type,Oe,xe)},or.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:i,_context:Z},Z},or.createElement=function(Z,ne,ae){var xe,Oe={},Ue=null;if(ne!=null)for(xe in ne.key!==void 0&&(Ue=""+ne.key),ne)N.call(ne,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Oe[xe]=ne[xe]);var Xe=arguments.length-2;if(Xe===1)Oe.children=ae;else if(1<Xe){for(var Ye=Array(Xe),Q=0;Q<Xe;Q++)Ye[Q]=arguments[Q+2];Oe.children=Ye}if(Z&&Z.defaultProps)for(xe in Xe=Z.defaultProps,Xe)Oe[xe]===void 0&&(Oe[xe]=Xe[xe]);return k(Z,Ue,Oe)},or.createRef=function(){return{current:null}},or.forwardRef=function(Z){return{$$typeof:c,render:Z}},or.isValidElement=D,or.lazy=function(Z){return{$$typeof:p,_payload:{_status:-1,_result:Z},_init:ie}},or.memo=function(Z,ne){return{$$typeof:h,type:Z,compare:ne===void 0?null:ne}},or.startTransition=function(Z){var ne=E.T,ae={};E.T=ae;try{var xe=Z(),Oe=E.S;Oe!==null&&Oe(ae,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(P,he)}catch(Ue){he(Ue)}finally{ne!==null&&ae.types!==null&&(ne.types=ae.types),E.T=ne}},or.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},or.use=function(Z){return E.H.use(Z)},or.useActionState=function(Z,ne,ae){return E.H.useActionState(Z,ne,ae)},or.useCallback=function(Z,ne){return E.H.useCallback(Z,ne)},or.useContext=function(Z){return E.H.useContext(Z)},or.useDebugValue=function(){},or.useDeferredValue=function(Z,ne){return E.H.useDeferredValue(Z,ne)},or.useEffect=function(Z,ne){return E.H.useEffect(Z,ne)},or.useEffectEvent=function(Z){return E.H.useEffectEvent(Z)},or.useId=function(){return E.H.useId()},or.useImperativeHandle=function(Z,ne,ae){return E.H.useImperativeHandle(Z,ne,ae)},or.useInsertionEffect=function(Z,ne){return E.H.useInsertionEffect(Z,ne)},or.useLayoutEffect=function(Z,ne){return E.H.useLayoutEffect(Z,ne)},or.useMemo=function(Z,ne){return E.H.useMemo(Z,ne)},or.useOptimistic=function(Z,ne){return E.H.useOptimistic(Z,ne)},or.useReducer=function(Z,ne,ae){return E.H.useReducer(Z,ne,ae)},or.useRef=function(Z){return E.H.useRef(Z)},or.useState=function(Z){return E.H.useState(Z)},or.useSyncExternalStore=function(Z,ne,ae){return E.H.useSyncExternalStore(Z,ne,ae)},or.useTransition=function(){return E.H.useTransition()},or.version="19.2.4",or}var tO;function v8(){return tO||(tO=1,O5.exports=TZ()),O5.exports}var A=v8();const se=Xr(A);var I5={exports:{}},Pp={},R5={exports:{}},M5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rO;function NZ(){return rO||(rO=1,(function(t){function e(H,J){var ie=H.length;H.push(J);e:for(;0<ie;){var he=ie-1>>>1,pe=H[he];if(0<a(pe,J))H[he]=J,H[ie]=pe,ie=he;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],ie=H.pop();if(ie!==J){H[0]=ie;e:for(var he=0,pe=H.length,Z=pe>>>1;he<Z;){var ne=2*(he+1)-1,ae=H[ne],xe=ne+1,Oe=H[xe];if(0>a(ae,ie))xe<pe&&0>a(Oe,ae)?(H[he]=Oe,H[xe]=ie,he=xe):(H[he]=ae,H[ne]=ie,he=ne);else if(xe<pe&&0>a(Oe,ie))H[he]=Oe,H[xe]=ie,he=xe;else break e}}return J}function a(H,J){var ie=H.sortIndex-J.sortIndex;return ie!==0?ie:H.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var d=[],h=[],p=1,m=null,y=3,v=!1,_=!1,S=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var J=r(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=H)n(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=r(h)}}function C(H){if(S=!1,L(H),!_)if(r(d)!==null)_=!0,P||(P=!0,B());else{var J=r(h);J!==null&&W(C,J.startTime-H)}}var P=!1,E=-1,N=5,k=-1;function z(){return w?!0:!(t.unstable_now()-k<N)}function D(){if(w=!1,P){var H=t.unstable_now();k=H;var J=!0;try{e:{_=!1,S&&(S=!1,O(E),E=-1),v=!0;var ie=y;try{t:{for(L(H),m=r(d);m!==null&&!(m.expirationTime>H&&z());){var he=m.callback;if(typeof he=="function"){m.callback=null,y=m.priorityLevel;var pe=he(m.expirationTime<=H);if(H=t.unstable_now(),typeof pe=="function"){m.callback=pe,L(H),J=!0;break t}m===r(d)&&n(d),L(H)}else n(d);m=r(d)}if(m!==null)J=!0;else{var Z=r(h);Z!==null&&W(C,Z.startTime-H),J=!1}}break e}finally{m=null,y=ie,v=!1}J=void 0}}finally{J?B():P=!1}}}var B;if(typeof R=="function")B=function(){R(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=D,B=function(){K.postMessage(null)}}else B=function(){j(D,0)};function W(H,J){E=j(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var ie=y;y=J;try{return H()}finally{y=ie}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=y;y=H;try{return J()}finally{y=ie}},t.unstable_scheduleCallback=function(H,J,ie){var he=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ie+pe,H={id:p++,callback:J,priorityLevel:H,startTime:ie,expirationTime:pe,sortIndex:-1},ie>he?(H.sortIndex=ie,e(h,H),r(d)===null&&H===r(h)&&(S?(O(E),E=-1):S=!0,W(C,ie-he))):(H.sortIndex=pe,e(d,H),_||v||(_=!0,P||(P=!0,B()))),H},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(H){var J=y;return function(){var ie=y;y=J;try{return H.apply(this,arguments)}finally{y=ie}}}})(M5)),M5}var nO;function AZ(){return nO||(nO=1,R5.exports=NZ()),R5.exports}var P5={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO;function EZ(){if(aO)return xi;aO=1;var t=v8();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xi.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},xi.flushSync=function(d){var h=o.T,p=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=h,n.p=p,n.d.f()}},xi.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},xi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},xi.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xi.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},xi.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xi.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},xi.requestFormReset=function(d){n.d.r(d)},xi.unstable_batchedUpdates=function(d,h){return d(h)},xi.useFormState=function(d,h,p){return o.H.useFormState(d,h,p)},xi.useFormStatus=function(){return o.H.useHostTransitionStatus()},xi.version="19.2.4",xi}var iO;function Kz(){if(iO)return P5.exports;iO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),P5.exports=EZ(),P5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sO;function jZ(){if(sO)return Pp;sO=1;var t=AZ(),e=v8(),r=Kz();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var T=b.alternate;if(T===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===f)return d(b),l;if(T===g)return d(b),u;T=T.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=T;else{for(var V=!1,X=b.child;X;){if(X===f){V=!0,f=b,g=T;break}if(X===g){V=!0,g=b,f=T;break}X=X.sibling}if(!V){for(X=T.child;X;){if(X===f){V=!0,f=T,g=b;break}if(X===g){V=!0,g=T,f=b;break}X=X.sibling}if(!V)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),R=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function B(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var $=Symbol.for("react.client.reference");function K(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===$?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList";case k:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case R:return l.displayName||"Context";case O:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case E:return u=l.displayName||null,u!==null?u:K(l.type)||"Memo";case N:u=l._payload,l=l._init;try{return K(l(u))}catch{}}return null}var W=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},he=[],pe=-1;function Z(l){return{current:l}}function ne(l){0>pe||(l.current=he[pe],he[pe]=null,pe--)}function ae(l,u){pe++,he[pe]=l.current,l.current=u}var xe=Z(null),Oe=Z(null),Ue=Z(null),Xe=Z(null);function Ye(l,u){switch(ae(Ue,u),ae(Oe,l),ae(xe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?b9(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=b9(u),l=w9(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(xe),ae(xe,l)}function Q(){ne(xe),ne(Oe),ne(Ue)}function me(l){l.memoizedState!==null&&ae(Xe,l);var u=xe.current,f=w9(u,l.type);u!==f&&(ae(Oe,l),ae(xe,f))}function te(l){Oe.current===l&&(ne(xe),ne(Oe)),Xe.current===l&&(ne(Xe),Cp._currentValue=ie)}var re,Pe;function Ge(l){if(re===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);re=u&&u[1]||"",Pe=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+l+Pe}var it=!1;function et(l,u){if(!l||it)return"";it=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Le){var Ie=Le}Reflect.construct(l,[],Qe)}else{try{Qe.call()}catch(Le){Ie=Le}l.call(Qe.prototype)}}else{try{throw Error()}catch(Le){Ie=Le}(Qe=l())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Le){if(Le&&Ie&&typeof Le.stack=="string")return[Le.stack,Ie.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),V=T[0],X=T[1];if(V&&X){var de=V.split(`
`),je=X.split(`
`);for(b=g=0;g<de.length&&!de[g].includes("DetermineComponentFrameRoot");)g++;for(;b<je.length&&!je[b].includes("DetermineComponentFrameRoot");)b++;if(g===de.length||b===je.length)for(g=de.length-1,b=je.length-1;1<=g&&0<=b&&de[g]!==je[b];)b--;for(;1<=g&&0<=b;g--,b--)if(de[g]!==je[b]){if(g!==1||b!==1)do if(g--,b--,0>b||de[g]!==je[b]){var qe=`
`+de[g].replace(" at new "," at ");return l.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",l.displayName)),qe}while(1<=g&&0<=b);break}}}finally{it=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Ge(f):""}function Pt(l,u){switch(l.tag){case 26:case 27:case 5:return Ge(l.type);case 16:return Ge("Lazy");case 13:return l.child!==u&&u!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return et(l.type,!1);case 11:return et(l.type.render,!1);case 1:return et(l.type,!0);case 31:return Ge("Activity");default:return""}}function Me(l){try{var u="",f=null;do u+=Pt(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var tt=Object.prototype.hasOwnProperty,bt=t.unstable_scheduleCallback,St=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,ce=t.unstable_requestPaint,We=t.unstable_now,nt=t.unstable_getCurrentPriorityLevel,ut=t.unstable_ImmediatePriority,dt=t.unstable_UserBlockingPriority,Ft=t.unstable_NormalPriority,tr=t.unstable_LowPriority,kr=t.unstable_IdlePriority,be=t.log,st=t.unstable_setDisableYieldValue,Et=null,Dt=null;function $t(l){if(typeof be=="function"&&st(l),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Et,l)}catch{}}var Ze=Math.clz32?Math.clz32:Lr,ir=Math.log,br=Math.LN2;function Lr(l){return l>>>=0,l===0?32:31-(ir(l)/br|0)|0}var hn=256,xr=262144,Gt=4194304;function Ut(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function _t(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,T=l.suspendedLanes,V=l.pingedLanes;l=l.warmLanes;var X=g&134217727;return X!==0?(g=X&~T,g!==0?b=Ut(g):(V&=X,V!==0?b=Ut(V):f||(f=X&~l,f!==0&&(b=Ut(f))))):(X=g&~T,X!==0?b=Ut(X):V!==0?b=Ut(V):f||(f=g&~l,f!==0&&(b=Ut(f)))),b===0?0:u!==0&&u!==b&&(u&T)===0&&(T=b&-b,f=u&-u,T>=f||T===32&&(f&4194048)!==0)?u:b}function Br(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function sn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wr(){var l=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),l}function $r(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function fn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function cr(l,u,f,g,b,T){var V=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var X=l.entanglements,de=l.expirationTimes,je=l.hiddenUpdates;for(f=V&~f;0<f;){var qe=31-Ze(f),Qe=1<<qe;X[qe]=0,de[qe]=-1;var Ie=je[qe];if(Ie!==null)for(je[qe]=null,qe=0;qe<Ie.length;qe++){var Le=Ie[qe];Le!==null&&(Le.lane&=-536870913)}f&=~Qe}g!==0&&ga(l,g,0),T!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=T&~(V&~u))}function ga(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-Ze(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function pn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-Ze(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function Rn(l,u){var f=u&-u;return f=(f&42)!==0?1:ti(f),(f&(l.suspendedLanes|u))!==0?0:f}function ti(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Tr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function mn(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:q9(l.type))}function ri(l,u){var f=J.p;try{return J.p=l,u()}finally{J.p=f}}var Wn=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Wn,gn="__reactProps$"+Wn,An="__reactContainer$"+Wn,ni="__reactEvents$"+Wn,qa="__reactListeners$"+Wn,Ai="__reactHandles$"+Wn,ls="__reactResources$"+Wn,gi="__reactMarker$"+Wn;function Tt(l){delete l[Jr],delete l[gn],delete l[ni],delete l[qa],delete l[Ai]}function fe(l){var u=l[Jr];if(u)return u;for(var f=l.parentNode;f;){if(u=f[An]||f[Jr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=j9(l);l!==null;){if(f=l[Jr])return f;l=j9(l)}return u}l=f,f=l.parentNode}return null}function Je(l){if(l=l[Jr]||l[An]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ht(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Xt(l){var u=l[ls];return u||(u=l[ls]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function hr(l){l[gi]=!0}var on=new Set,Kr={};function yn(l,u){Cr(l,u),Cr(l+"Capture",u)}function Cr(l,u){for(Kr[l]=u,l=0;l<u.length;l++)on.add(u[l])}var Rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cs={},oo={};function dl(l){return tt.call(oo,l)?!0:tt.call(cs,l)?!1:Rs.test(l)?oo[l]=!0:(cs[l]=!0,!1)}function us(l,u,f){if(dl(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function ds(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function Oa(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function ya(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function we(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,T=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(V){f=""+V,T.call(this,V)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(V){f=""+V},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Te(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=we(l,u,""+l[u])}}function Ne(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function mt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ot=/[\n"\\]/g;function At(l){return l.replace(Ot,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Yt(l,u,f,g,b,T,V,X){l.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?l.type=V:l.removeAttribute("type"),u!=null?V==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+ya(u)):l.value!==""+ya(u)&&(l.value=""+ya(u)):V!=="submit"&&V!=="reset"||l.removeAttribute("value"),u!=null?en(l,V,ya(u)):f!=null?en(l,V,ya(f)):g!=null&&l.removeAttribute("value"),b==null&&T!=null&&(l.defaultChecked=!!T),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?l.name=""+ya(X):l.removeAttribute("name")}function wr(l,u,f,g,b,T,V,X){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.type=T),u!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||u!=null)){Te(l);return}f=f!=null?""+ya(f):"",u=u!=null?""+ya(u):f,X||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=X?l.checked:!!g,l.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(l.name=V),Te(l)}function en(l,u,f){u==="number"&&mt(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function oe(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+ya(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function ve(l,u,f){if(u!=null&&(u=""+ya(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+ya(f):""}function $e(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(W(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=ya(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Te(l)}function De(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var ft=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rr(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||ft.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Qt(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&rr(l,b,g)}else for(var T in u)u.hasOwnProperty(T)&&rr(l,T,u[T])}function En(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ia=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jn(l){return Ms.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function vn(){}var Co=null;function Or(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var hs=null,yi=null;function R1(l){var u=Je(l);if(u&&(l=u.stateNode)){var f=l[gn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Yt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+At(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[gn]||null;if(!b)throw Error(n(90));Yt(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ne(g)}break e;case"textarea":ve(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&oe(l,!!f.multiple,u,!1)}}}var Gf=!1;function M1(l,u,f){if(Gf)return l(u,f);Gf=!0;try{var g=l(u);return g}finally{if(Gf=!1,(hs!==null||yi!==null)&&(Cy(),hs&&(u=hs,l=yi,yi=hs=null,R1(u),l)))for(u=0;u<l.length;u++)R1(l[u])}}function zi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[gn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=!1;if(lo)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Wf=!1}var fs=null,S0=null,Io=null;function vc(){if(Io)return Io;var l,u=S0,f=u.length,g,b="value"in fs?fs.value:fs.textContent,T=b.length;for(l=0;l<f&&u[l]===b[l];l++);var V=f-l;for(g=1;g<=V&&u[f-g]===b[T-g];g++);return Io=b.slice(l,1<g?1-g:void 0)}function Hu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function xc(){return!0}function Ln(){return!1}function vi(l){function u(f,g,b,T,V){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=T,this.target=V,this.currentTarget=null;for(var X in l)l.hasOwnProperty(X)&&(f=l[X],this[X]=f?f(T):T[X]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?xc:Ln,this.isPropagationStopped=Ln,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),u}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gu=vi(hl),bc=m({},hl,{view:0,detail:0}),P1=vi(bc),wc,_0,Ei,Wu=m({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_c,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ei&&(Ei&&l.type==="mousemove"?(wc=l.screenX-Ei.screenX,_0=l.screenY-Ei.screenY):_0=wc=0,Ei=l),wc)},movementY:function(l){return"movementY"in l?l.movementY:_0}}),D1=vi(Wu),Ku=m({},Wu,{dataTransfer:0}),L1=vi(Ku),Kf=m({},bc,{relatedTarget:0}),Sc=vi(Kf),B1=m({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),T0=vi(B1),Dw=m({},hl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),$1=vi(Dw),Qu=m({},hl,{data:0}),Qf=vi(Qu),U1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Yf[l])?!!u[l]:!1}function _c(){return z1}var V1=m({},bc,{key:function(l){if(l.key){var u=U1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Hu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Xf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_c,charCode:function(l){return l.type==="keypress"?Hu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Hu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),F1=vi(V1),fl=m({},Wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zf=vi(fl),q1=m({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_c}),H1=vi(q1),G1=m({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=vi(G1),ji=m({},Wu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),W1=vi(ji),K1=m({},hl,{newState:0,oldState:0}),Tc=vi(K1),x=[9,13,27,32],M=lo&&"CompositionEvent"in window,F=null;lo&&"documentMode"in document&&(F=document.documentMode);var ee=lo&&"TextEvent"in window&&!F,_e=lo&&(!M||F&&8<F&&11>=F),Be=" ",gt=!1;function tn(l,u){switch(l){case"keyup":return x.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function va(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var yr=!1;function Ha(l,u){switch(l){case"compositionend":return va(u);case"keypress":return u.which!==32?null:(gt=!0,Be);case"textInput":return l=u.data,l===Be&&gt?null:l;default:return null}}function Ga(l,u){if(yr)return l==="compositionend"||!M&&tn(l,u)?(l=vc(),Io=S0=fs=null,yr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _e&&u.locale!=="ko"?null:u.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Nc[l.type]:u==="textarea"}function Xu(l,u,f,g){hs?yi?yi.push(g):yi=[g]:hs=g,u=Ly(u,"onChange"),0<u.length&&(f=new Gu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var pl=null,Jf=null;function GX(l){p9(l,0)}function Q1(l){var u=ht(l);if(Ne(u))return l}function Rj(l,u){if(l==="change")return u}var Mj=!1;if(lo){var Lw;if(lo){var Bw="oninput"in document;if(!Bw){var Pj=document.createElement("div");Pj.setAttribute("oninput","return;"),Bw=typeof Pj.oninput=="function"}Lw=Bw}else Lw=!1;Mj=Lw&&(!document.documentMode||9<document.documentMode)}function Dj(){pl&&(pl.detachEvent("onpropertychange",Lj),Jf=pl=null)}function Lj(l){if(l.propertyName==="value"&&Q1(Jf)){var u=[];Xu(u,Jf,l,Or(l)),M1(GX,u)}}function WX(l,u,f){l==="focusin"?(Dj(),pl=u,Jf=f,pl.attachEvent("onpropertychange",Lj)):l==="focusout"&&Dj()}function KX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Q1(Jf)}function QX(l,u){if(l==="click")return Q1(u)}function XX(l,u){if(l==="input"||l==="change")return Q1(u)}function YX(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ps=typeof Object.is=="function"?Object.is:YX;function ep(l,u){if(ps(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!tt.call(u,b)||!ps(l[b],u[b]))return!1}return!0}function Bj(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function $j(l,u){var f=Bj(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Bj(f)}}function Uj(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Uj(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function zj(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=mt(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=mt(l.document)}return u}function $w(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var ZX=lo&&"documentMode"in document&&11>=document.documentMode,A0=null,Uw=null,tp=null,zw=!1;function Vj(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;zw||A0==null||A0!==mt(g)||(g=A0,"selectionStart"in g&&$w(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),tp&&ep(tp,g)||(tp=g,g=Ly(Uw,"onSelect"),0<g.length&&(u=new Gu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=A0)))}function Yu(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var E0={animationend:Yu("Animation","AnimationEnd"),animationiteration:Yu("Animation","AnimationIteration"),animationstart:Yu("Animation","AnimationStart"),transitionrun:Yu("Transition","TransitionRun"),transitionstart:Yu("Transition","TransitionStart"),transitioncancel:Yu("Transition","TransitionCancel"),transitionend:Yu("Transition","TransitionEnd")},Vw={},Fj={};lo&&(Fj=document.createElement("div").style,"AnimationEvent"in window||(delete E0.animationend.animation,delete E0.animationiteration.animation,delete E0.animationstart.animation),"TransitionEvent"in window||delete E0.transitionend.transition);function Zu(l){if(Vw[l])return Vw[l];if(!E0[l])return l;var u=E0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in Fj)return Vw[l]=u[f];return l}var qj=Zu("animationend"),Hj=Zu("animationiteration"),Gj=Zu("animationstart"),JX=Zu("transitionrun"),eY=Zu("transitionstart"),tY=Zu("transitioncancel"),Wj=Zu("transitionend"),Kj=new Map,Fw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fw.push("scrollEnd");function co(l,u){Kj.set(l,u),yn(u,[l])}var X1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ps=[],j0=0,qw=0;function Y1(){for(var l=j0,u=qw=j0=0;u<l;){var f=Ps[u];Ps[u++]=null;var g=Ps[u];Ps[u++]=null;var b=Ps[u];Ps[u++]=null;var T=Ps[u];if(Ps[u++]=null,g!==null&&b!==null){var V=g.pending;V===null?b.next=b:(b.next=V.next,V.next=b),g.pending=b}T!==0&&Qj(f,b,T)}}function Z1(l,u,f,g){Ps[j0++]=l,Ps[j0++]=u,Ps[j0++]=f,Ps[j0++]=g,qw|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Hw(l,u,f,g){return Z1(l,u,f,g),J1(l)}function Ju(l,u){return Z1(l,null,null,u),J1(l)}function Qj(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,T=l.return;T!==null;)T.childLanes|=f,g=T.alternate,g!==null&&(g.childLanes|=f),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(b=!0)),l=T,T=T.return;return l.tag===3?(T=l.stateNode,b&&u!==null&&(b=31-Ze(f),l=T.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),T):null}function J1(l){if(50<_p)throw _p=0,e5=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var k0={};function rY(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(l,u,f,g){return new rY(l,u,f,g)}function Gw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ml(l,u){var f=l.alternate;return f===null?(f=ms(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Xj(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function ey(l,u,f,g,b,T){var V=0;if(g=l,typeof l=="function")Gw(l)&&(V=1);else if(typeof l=="string")V=oZ(l,f,xe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case k:return l=ms(31,f,u,b),l.elementType=k,l.lanes=T,l;case S:return ed(f.children,b,T,u);case w:V=8,b|=24;break;case j:return l=ms(12,f,u,b|2),l.elementType=j,l.lanes=T,l;case C:return l=ms(13,f,u,b),l.elementType=C,l.lanes=T,l;case P:return l=ms(19,f,u,b),l.elementType=P,l.lanes=T,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:V=10;break e;case O:V=9;break e;case L:V=11;break e;case E:V=14;break e;case N:V=16,g=null;break e}V=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=ms(V,f,u,b),u.elementType=l,u.type=g,u.lanes=T,u}function ed(l,u,f,g){return l=ms(7,l,g,u),l.lanes=f,l}function Ww(l,u,f){return l=ms(6,l,null,u),l.lanes=f,l}function Yj(l){var u=ms(18,null,null,0);return u.stateNode=l,u}function Kw(l,u,f){return u=ms(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Zj=new WeakMap;function Ds(l,u){if(typeof l=="object"&&l!==null){var f=Zj.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Me(u)},Zj.set(l,u),u)}return{value:l,source:u,stack:Me(u)}}var C0=[],O0=0,ty=null,rp=0,Ls=[],Bs=0,Ac=null,Ro=1,Mo="";function gl(l,u){C0[O0++]=rp,C0[O0++]=ty,ty=l,rp=u}function Jj(l,u,f){Ls[Bs++]=Ro,Ls[Bs++]=Mo,Ls[Bs++]=Ac,Ac=l;var g=Ro;l=Mo;var b=32-Ze(g)-1;g&=~(1<<b),f+=1;var T=32-Ze(u)+b;if(30<T){var V=b-b%5;T=(g&(1<<V)-1).toString(32),g>>=V,b-=V,Ro=1<<32-Ze(u)+b|f<<b|g,Mo=T+l}else Ro=1<<T|f<<b|g,Mo=l}function Qw(l){l.return!==null&&(gl(l,1),Jj(l,1,0))}function Xw(l){for(;l===ty;)ty=C0[--O0],C0[O0]=null,rp=C0[--O0],C0[O0]=null;for(;l===Ac;)Ac=Ls[--Bs],Ls[Bs]=null,Mo=Ls[--Bs],Ls[Bs]=null,Ro=Ls[--Bs],Ls[Bs]=null}function ek(l,u){Ls[Bs++]=Ro,Ls[Bs++]=Mo,Ls[Bs++]=Ac,Ro=u.id,Mo=u.overflow,Ac=l}var ai=null,Bn=null,Ir=!1,Ec=null,$s=!1,Yw=Error(n(519));function jc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw np(Ds(u,l)),Yw}function tk(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Jr]=l,u[gn]=g,f){case"dialog":_r("cancel",u),_r("close",u);break;case"iframe":case"object":case"embed":_r("load",u);break;case"video":case"audio":for(f=0;f<Np.length;f++)_r(Np[f],u);break;case"source":_r("error",u);break;case"img":case"image":case"link":_r("error",u),_r("load",u);break;case"details":_r("toggle",u);break;case"input":_r("invalid",u),wr(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":_r("invalid",u);break;case"textarea":_r("invalid",u),$e(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||v9(u.textContent,f)?(g.popover!=null&&(_r("beforetoggle",u),_r("toggle",u)),g.onScroll!=null&&_r("scroll",u),g.onScrollEnd!=null&&_r("scrollend",u),g.onClick!=null&&(u.onclick=vn),u=!0):u=!1,u||jc(l,!0)}function rk(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 31:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:ai=ai.return}}function I0(l){if(l!==ai)return!1;if(!Ir)return rk(l),Ir=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||m5(l.type,l.memoizedProps)),f=!f),f&&Bn&&jc(l),rk(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Bn=E9(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Bn=E9(l)}else u===27?(u=Bn,Vc(l.type)?(l=b5,b5=null,Bn=l):Bn=u):Bn=ai?zs(l.stateNode.nextSibling):null;return!0}function td(){Bn=ai=null,Ir=!1}function Zw(){var l=Ec;return l!==null&&(Gi===null?Gi=l:Gi.push.apply(Gi,l),Ec=null),l}function np(l){Ec===null?Ec=[l]:Ec.push(l)}var Jw=Z(null),rd=null,yl=null;function kc(l,u,f){ae(Jw,u._currentValue),u._currentValue=f}function vl(l){l._currentValue=Jw.current,ne(Jw)}function e4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function t4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var T=b.dependencies;if(T!==null){var V=b.child;T=T.firstContext;e:for(;T!==null;){var X=T;T=b;for(var de=0;de<u.length;de++)if(X.context===u[de]){T.lanes|=f,X=T.alternate,X!==null&&(X.lanes|=f),e4(T.return,f,l),g||(V=null);break e}T=X.next}}else if(b.tag===18){if(V=b.return,V===null)throw Error(n(341));V.lanes|=f,T=V.alternate,T!==null&&(T.lanes|=f),e4(V,f,l),V=null}else V=b.child;if(V!==null)V.return=b;else for(V=b;V!==null;){if(V===l){V=null;break}if(b=V.sibling,b!==null){b.return=V.return,V=b;break}V=V.return}b=V}}function R0(l,u,f,g){l=null;for(var b=u,T=!1;b!==null;){if(!T){if((b.flags&524288)!==0)T=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var V=b.alternate;if(V===null)throw Error(n(387));if(V=V.memoizedProps,V!==null){var X=b.type;ps(b.pendingProps.value,V.value)||(l!==null?l.push(X):l=[X])}}else if(b===Xe.current){if(V=b.alternate,V===null)throw Error(n(387));V.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Cp):l=[Cp])}b=b.return}l!==null&&t4(u,l,f,g),u.flags|=262144}function ry(l){for(l=l.firstContext;l!==null;){if(!ps(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function nd(l){rd=l,yl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ii(l){return nk(rd,l)}function ny(l,u){return rd===null&&nd(l),nk(l,u)}function nk(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},yl===null){if(l===null)throw Error(n(308));yl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else yl=yl.next=u;return f}var nY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},aY=t.unstable_scheduleCallback,iY=t.unstable_NormalPriority,xa={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r4(){return{controller:new nY,data:new Map,refCount:0}}function ap(l){l.refCount--,l.refCount===0&&aY(iY,function(){l.controller.abort()})}var ip=null,n4=0,M0=0,P0=null;function sY(l,u){if(ip===null){var f=ip=[];n4=0,M0=s5(),P0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return n4++,u.then(ak,ak),u}function ak(){if(--n4===0&&ip!==null){P0!==null&&(P0.status="fulfilled");var l=ip;ip=null,M0=0,P0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function oY(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var ik=H.S;H.S=function(l,u){VC=We(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&sY(l,u),ik!==null&&ik(l,u)};var ad=Z(null);function a4(){var l=ad.current;return l!==null?l:kn.pooledCache}function ay(l,u){u===null?ae(ad,ad.current):ae(ad,u.pool)}function sk(){var l=a4();return l===null?null:{parent:xa._currentValue,pool:l}}var D0=Error(n(460)),i4=Error(n(474)),iy=Error(n(542)),sy={then:function(){}};function ok(l){return l=l.status,l==="fulfilled"||l==="rejected"}function lk(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(vn,vn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,uk(l),l;default:if(typeof u.status=="string")u.then(vn,vn);else{if(l=kn,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,uk(l),l}throw sd=u,D0}}function id(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(sd=f,D0):f}}var sd=null;function ck(){if(sd===null)throw Error(n(459));var l=sd;return sd=null,l}function uk(l){if(l===D0||l===iy)throw Error(n(483))}var L0=null,sp=0;function oy(l){var u=sp;return sp+=1,L0===null&&(L0=[]),lk(L0,l,u)}function op(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function ly(l,u){throw u.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function dk(l){function u(Se,ge){if(l){var Ae=Se.deletions;Ae===null?(Se.deletions=[ge],Se.flags|=16):Ae.push(ge)}}function f(Se,ge){if(!l)return null;for(;ge!==null;)u(Se,ge),ge=ge.sibling;return null}function g(Se){for(var ge=new Map;Se!==null;)Se.key!==null?ge.set(Se.key,Se):ge.set(Se.index,Se),Se=Se.sibling;return ge}function b(Se,ge){return Se=ml(Se,ge),Se.index=0,Se.sibling=null,Se}function T(Se,ge,Ae){return Se.index=Ae,l?(Ae=Se.alternate,Ae!==null?(Ae=Ae.index,Ae<ge?(Se.flags|=67108866,ge):Ae):(Se.flags|=67108866,ge)):(Se.flags|=1048576,ge)}function V(Se){return l&&Se.alternate===null&&(Se.flags|=67108866),Se}function X(Se,ge,Ae,Ke){return ge===null||ge.tag!==6?(ge=Ww(Ae,Se.mode,Ke),ge.return=Se,ge):(ge=b(ge,Ae),ge.return=Se,ge)}function de(Se,ge,Ae,Ke){var zt=Ae.type;return zt===S?qe(Se,ge,Ae.props.children,Ke,Ae.key):ge!==null&&(ge.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===N&&id(zt)===ge.type)?(ge=b(ge,Ae.props),op(ge,Ae),ge.return=Se,ge):(ge=ey(Ae.type,Ae.key,Ae.props,null,Se.mode,Ke),op(ge,Ae),ge.return=Se,ge)}function je(Se,ge,Ae,Ke){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ae.containerInfo||ge.stateNode.implementation!==Ae.implementation?(ge=Kw(Ae,Se.mode,Ke),ge.return=Se,ge):(ge=b(ge,Ae.children||[]),ge.return=Se,ge)}function qe(Se,ge,Ae,Ke,zt){return ge===null||ge.tag!==7?(ge=ed(Ae,Se.mode,Ke,zt),ge.return=Se,ge):(ge=b(ge,Ae),ge.return=Se,ge)}function Qe(Se,ge,Ae){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=Ww(""+ge,Se.mode,Ae),ge.return=Se,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return Ae=ey(ge.type,ge.key,ge.props,null,Se.mode,Ae),op(Ae,ge),Ae.return=Se,Ae;case _:return ge=Kw(ge,Se.mode,Ae),ge.return=Se,ge;case N:return ge=id(ge),Qe(Se,ge,Ae)}if(W(ge)||B(ge))return ge=ed(ge,Se.mode,Ae,null),ge.return=Se,ge;if(typeof ge.then=="function")return Qe(Se,oy(ge),Ae);if(ge.$$typeof===R)return Qe(Se,ny(Se,ge),Ae);ly(Se,ge)}return null}function Ie(Se,ge,Ae,Ke){var zt=ge!==null?ge.key:null;if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return zt!==null?null:X(Se,ge,""+Ae,Ke);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case v:return Ae.key===zt?de(Se,ge,Ae,Ke):null;case _:return Ae.key===zt?je(Se,ge,Ae,Ke):null;case N:return Ae=id(Ae),Ie(Se,ge,Ae,Ke)}if(W(Ae)||B(Ae))return zt!==null?null:qe(Se,ge,Ae,Ke,null);if(typeof Ae.then=="function")return Ie(Se,ge,oy(Ae),Ke);if(Ae.$$typeof===R)return Ie(Se,ge,ny(Se,Ae),Ke);ly(Se,Ae)}return null}function Le(Se,ge,Ae,Ke,zt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Se=Se.get(Ae)||null,X(ge,Se,""+Ke,zt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:return Se=Se.get(Ke.key===null?Ae:Ke.key)||null,de(ge,Se,Ke,zt);case _:return Se=Se.get(Ke.key===null?Ae:Ke.key)||null,je(ge,Se,Ke,zt);case N:return Ke=id(Ke),Le(Se,ge,Ae,Ke,zt)}if(W(Ke)||B(Ke))return Se=Se.get(Ae)||null,qe(ge,Se,Ke,zt,null);if(typeof Ke.then=="function")return Le(Se,ge,Ae,oy(Ke),zt);if(Ke.$$typeof===R)return Le(Se,ge,Ae,ny(ge,Ke),zt);ly(ge,Ke)}return null}function Ct(Se,ge,Ae,Ke){for(var zt=null,Ur=null,Mt=ge,fr=ge=0,Ar=null;Mt!==null&&fr<Ae.length;fr++){Mt.index>fr?(Ar=Mt,Mt=null):Ar=Mt.sibling;var zr=Ie(Se,Mt,Ae[fr],Ke);if(zr===null){Mt===null&&(Mt=Ar);break}l&&Mt&&zr.alternate===null&&u(Se,Mt),ge=T(zr,ge,fr),Ur===null?zt=zr:Ur.sibling=zr,Ur=zr,Mt=Ar}if(fr===Ae.length)return f(Se,Mt),Ir&&gl(Se,fr),zt;if(Mt===null){for(;fr<Ae.length;fr++)Mt=Qe(Se,Ae[fr],Ke),Mt!==null&&(ge=T(Mt,ge,fr),Ur===null?zt=Mt:Ur.sibling=Mt,Ur=Mt);return Ir&&gl(Se,fr),zt}for(Mt=g(Mt);fr<Ae.length;fr++)Ar=Le(Mt,Se,fr,Ae[fr],Ke),Ar!==null&&(l&&Ar.alternate!==null&&Mt.delete(Ar.key===null?fr:Ar.key),ge=T(Ar,ge,fr),Ur===null?zt=Ar:Ur.sibling=Ar,Ur=Ar);return l&&Mt.forEach(function(Wc){return u(Se,Wc)}),Ir&&gl(Se,fr),zt}function Wt(Se,ge,Ae,Ke){if(Ae==null)throw Error(n(151));for(var zt=null,Ur=null,Mt=ge,fr=ge=0,Ar=null,zr=Ae.next();Mt!==null&&!zr.done;fr++,zr=Ae.next()){Mt.index>fr?(Ar=Mt,Mt=null):Ar=Mt.sibling;var Wc=Ie(Se,Mt,zr.value,Ke);if(Wc===null){Mt===null&&(Mt=Ar);break}l&&Mt&&Wc.alternate===null&&u(Se,Mt),ge=T(Wc,ge,fr),Ur===null?zt=Wc:Ur.sibling=Wc,Ur=Wc,Mt=Ar}if(zr.done)return f(Se,Mt),Ir&&gl(Se,fr),zt;if(Mt===null){for(;!zr.done;fr++,zr=Ae.next())zr=Qe(Se,zr.value,Ke),zr!==null&&(ge=T(zr,ge,fr),Ur===null?zt=zr:Ur.sibling=zr,Ur=zr);return Ir&&gl(Se,fr),zt}for(Mt=g(Mt);!zr.done;fr++,zr=Ae.next())zr=Le(Mt,Se,fr,zr.value,Ke),zr!==null&&(l&&zr.alternate!==null&&Mt.delete(zr.key===null?fr:zr.key),ge=T(zr,ge,fr),Ur===null?zt=zr:Ur.sibling=zr,Ur=zr);return l&&Mt.forEach(function(vZ){return u(Se,vZ)}),Ir&&gl(Se,fr),zt}function wn(Se,ge,Ae,Ke){if(typeof Ae=="object"&&Ae!==null&&Ae.type===S&&Ae.key===null&&(Ae=Ae.props.children),typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case v:e:{for(var zt=Ae.key;ge!==null;){if(ge.key===zt){if(zt=Ae.type,zt===S){if(ge.tag===7){f(Se,ge.sibling),Ke=b(ge,Ae.props.children),Ke.return=Se,Se=Ke;break e}}else if(ge.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===N&&id(zt)===ge.type){f(Se,ge.sibling),Ke=b(ge,Ae.props),op(Ke,Ae),Ke.return=Se,Se=Ke;break e}f(Se,ge);break}else u(Se,ge);ge=ge.sibling}Ae.type===S?(Ke=ed(Ae.props.children,Se.mode,Ke,Ae.key),Ke.return=Se,Se=Ke):(Ke=ey(Ae.type,Ae.key,Ae.props,null,Se.mode,Ke),op(Ke,Ae),Ke.return=Se,Se=Ke)}return V(Se);case _:e:{for(zt=Ae.key;ge!==null;){if(ge.key===zt)if(ge.tag===4&&ge.stateNode.containerInfo===Ae.containerInfo&&ge.stateNode.implementation===Ae.implementation){f(Se,ge.sibling),Ke=b(ge,Ae.children||[]),Ke.return=Se,Se=Ke;break e}else{f(Se,ge);break}else u(Se,ge);ge=ge.sibling}Ke=Kw(Ae,Se.mode,Ke),Ke.return=Se,Se=Ke}return V(Se);case N:return Ae=id(Ae),wn(Se,ge,Ae,Ke)}if(W(Ae))return Ct(Se,ge,Ae,Ke);if(B(Ae)){if(zt=B(Ae),typeof zt!="function")throw Error(n(150));return Ae=zt.call(Ae),Wt(Se,ge,Ae,Ke)}if(typeof Ae.then=="function")return wn(Se,ge,oy(Ae),Ke);if(Ae.$$typeof===R)return wn(Se,ge,ny(Se,Ae),Ke);ly(Se,Ae)}return typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint"?(Ae=""+Ae,ge!==null&&ge.tag===6?(f(Se,ge.sibling),Ke=b(ge,Ae),Ke.return=Se,Se=Ke):(f(Se,ge),Ke=Ww(Ae,Se.mode,Ke),Ke.return=Se,Se=Ke),V(Se)):f(Se,ge)}return function(Se,ge,Ae,Ke){try{sp=0;var zt=wn(Se,ge,Ae,Ke);return L0=null,zt}catch(Mt){if(Mt===D0||Mt===iy)throw Mt;var Ur=ms(29,Mt,null,Se.mode);return Ur.lanes=Ke,Ur.return=Se,Ur}finally{}}}var od=dk(!0),hk=dk(!1),Cc=!1;function s4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function o4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Oc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ic(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(Qr&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=J1(l),Qj(l,null,f),u}return Z1(l,g,u,f),J1(l)}function lp(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,pn(l,f)}}function l4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var V={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?b=T=V:T=T.next=V,f=f.next}while(f!==null);T===null?b=T=u:T=T.next=u}else b=T=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var c4=!1;function cp(){if(c4){var l=P0;if(l!==null)throw l}}function up(l,u,f,g){c4=!1;var b=l.updateQueue;Cc=!1;var T=b.firstBaseUpdate,V=b.lastBaseUpdate,X=b.shared.pending;if(X!==null){b.shared.pending=null;var de=X,je=de.next;de.next=null,V===null?T=je:V.next=je,V=de;var qe=l.alternate;qe!==null&&(qe=qe.updateQueue,X=qe.lastBaseUpdate,X!==V&&(X===null?qe.firstBaseUpdate=je:X.next=je,qe.lastBaseUpdate=de))}if(T!==null){var Qe=b.baseState;V=0,qe=je=de=null,X=T;do{var Ie=X.lane&-536870913,Le=Ie!==X.lane;if(Le?(Nr&Ie)===Ie:(g&Ie)===Ie){Ie!==0&&Ie===M0&&(c4=!0),qe!==null&&(qe=qe.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Ct=l,Wt=X;Ie=u;var wn=f;switch(Wt.tag){case 1:if(Ct=Wt.payload,typeof Ct=="function"){Qe=Ct.call(wn,Qe,Ie);break e}Qe=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Wt.payload,Ie=typeof Ct=="function"?Ct.call(wn,Qe,Ie):Ct,Ie==null)break e;Qe=m({},Qe,Ie);break e;case 2:Cc=!0}}Ie=X.callback,Ie!==null&&(l.flags|=64,Le&&(l.flags|=8192),Le=b.callbacks,Le===null?b.callbacks=[Ie]:Le.push(Ie))}else Le={lane:Ie,tag:X.tag,payload:X.payload,callback:X.callback,next:null},qe===null?(je=qe=Le,de=Qe):qe=qe.next=Le,V|=Ie;if(X=X.next,X===null){if(X=b.shared.pending,X===null)break;Le=X,X=Le.next,Le.next=null,b.lastBaseUpdate=Le,b.shared.pending=null}}while(!0);qe===null&&(de=Qe),b.baseState=de,b.firstBaseUpdate=je,b.lastBaseUpdate=qe,T===null&&(b.shared.lanes=0),Lc|=V,l.lanes=V,l.memoizedState=Qe}}function fk(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function pk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)fk(f[l],u)}var B0=Z(null),cy=Z(0);function mk(l,u){l=El,ae(cy,l),ae(B0,u),El=l|u.baseLanes}function u4(){ae(cy,El),ae(B0,B0.current)}function d4(){El=cy.current,ne(B0),ne(cy)}var gs=Z(null),Us=null;function Rc(l){var u=l.alternate;ae(oa,oa.current&1),ae(gs,l),Us===null&&(u===null||B0.current!==null||u.memoizedState!==null)&&(Us=l)}function h4(l){ae(oa,oa.current),ae(gs,l),Us===null&&(Us=l)}function gk(l){l.tag===22?(ae(oa,oa.current),ae(gs,l),Us===null&&(Us=l)):Mc()}function Mc(){ae(oa,oa.current),ae(gs,gs.current)}function ys(l){ne(gs),Us===l&&(Us=null),ne(oa)}var oa=Z(0);function uy(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||v5(f)||x5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var xl=0,dr=null,xn=null,ba=null,dy=!1,$0=!1,ld=!1,hy=0,dp=0,U0=null,lY=0;function Jn(){throw Error(n(321))}function f4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!ps(l[f],u[f]))return!1;return!0}function p4(l,u,f,g,b,T){return xl=T,dr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?Jk:k4,ld=!1,T=f(g,b),ld=!1,$0&&(T=vk(u,f,g,b)),yk(l),T}function yk(l){H.H=pp;var u=xn!==null&&xn.next!==null;if(xl=0,ba=xn=dr=null,dy=!1,dp=0,U0=null,u)throw Error(n(300));l===null||wa||(l=l.dependencies,l!==null&&ry(l)&&(wa=!0))}function vk(l,u,f,g){dr=l;var b=0;do{if($0&&(U0=null),dp=0,$0=!1,25<=b)throw Error(n(301));if(b+=1,ba=xn=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}H.H=eC,T=u(f,g)}while($0);return T}function cY(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?hp(u):u,l=l.useState()[0],(xn!==null?xn.memoizedState:null)!==l&&(dr.flags|=1024),u}function m4(){var l=hy!==0;return hy=0,l}function g4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function y4(l){if(dy){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}dy=!1}xl=0,ba=xn=dr=null,$0=!1,dp=hy=0,U0=null}function ki(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?dr.memoizedState=ba=l:ba=ba.next=l,ba}function la(){if(xn===null){var l=dr.alternate;l=l!==null?l.memoizedState:null}else l=xn.next;var u=ba===null?dr.memoizedState:ba.next;if(u!==null)ba=u,xn=l;else{if(l===null)throw dr.alternate===null?Error(n(467)):Error(n(310));xn=l,l={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},ba===null?dr.memoizedState=ba=l:ba=ba.next=l}return ba}function fy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hp(l){var u=dp;return dp+=1,U0===null&&(U0=[]),l=lk(U0,l,u),u=dr,(ba===null?u.memoizedState:ba.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?Jk:k4),l}function py(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return hp(l);if(l.$$typeof===R)return ii(l)}throw Error(n(438,String(l)))}function v4(l){var u=null,f=dr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=dr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=fy(),dr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=z;return u.index++,f}function bl(l,u){return typeof u=="function"?u(l):u}function my(l){var u=la();return x4(u,xn,l)}function x4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,T=g.pending;if(T!==null){if(b!==null){var V=b.next;b.next=T.next,T.next=V}u.baseQueue=b=T,g.pending=null}if(T=l.baseState,b===null)l.memoizedState=T;else{u=b.next;var X=V=null,de=null,je=u,qe=!1;do{var Qe=je.lane&-536870913;if(Qe!==je.lane?(Nr&Qe)===Qe:(xl&Qe)===Qe){var Ie=je.revertLane;if(Ie===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),Qe===M0&&(qe=!0);else if((xl&Ie)===Ie){je=je.next,Ie===M0&&(qe=!0);continue}else Qe={lane:0,revertLane:je.revertLane,gesture:null,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},de===null?(X=de=Qe,V=T):de=de.next=Qe,dr.lanes|=Ie,Lc|=Ie;Qe=je.action,ld&&f(T,Qe),T=je.hasEagerState?je.eagerState:f(T,Qe)}else Ie={lane:Qe,revertLane:je.revertLane,gesture:je.gesture,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},de===null?(X=de=Ie,V=T):de=de.next=Ie,dr.lanes|=Qe,Lc|=Qe;je=je.next}while(je!==null&&je!==u);if(de===null?V=T:de.next=X,!ps(T,l.memoizedState)&&(wa=!0,qe&&(f=P0,f!==null)))throw f;l.memoizedState=T,l.baseState=V,l.baseQueue=de,g.lastRenderedState=T}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function b4(l){var u=la(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,T=u.memoizedState;if(b!==null){f.pending=null;var V=b=b.next;do T=l(T,V.action),V=V.next;while(V!==b);ps(T,u.memoizedState)||(wa=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),f.lastRenderedState=T}return[T,g]}function xk(l,u,f){var g=dr,b=la(),T=Ir;if(T){if(f===void 0)throw Error(n(407));f=f()}else f=u();var V=!ps((xn||b).memoizedState,f);if(V&&(b.memoizedState=f,wa=!0),b=b.queue,_4(Sk.bind(null,g,b,l),[l]),b.getSnapshot!==u||V||ba!==null&&ba.memoizedState.tag&1){if(g.flags|=2048,z0(9,{destroy:void 0},wk.bind(null,g,b,f,u),null),kn===null)throw Error(n(349));T||(xl&127)!==0||bk(g,u,f)}return f}function bk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=dr.updateQueue,u===null?(u=fy(),dr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function wk(l,u,f,g){u.value=f,u.getSnapshot=g,_k(u)&&Tk(l)}function Sk(l,u,f){return f(function(){_k(u)&&Tk(l)})}function _k(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!ps(l,f)}catch{return!0}}function Tk(l){var u=Ju(l,2);u!==null&&Wi(u,l,2)}function w4(l){var u=ki();if(typeof l=="function"){var f=l;if(l=f(),ld){$t(!0);try{f()}finally{$t(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:l},u}function Nk(l,u,f,g){return l.baseState=f,x4(l,xn,typeof g=="function"?g:bl)}function uY(l,u,f,g,b){if(vy(l))throw Error(n(485));if(l=u.action,l!==null){var T={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){T.listeners.push(V)}};H.T!==null?f(!0):T.isTransition=!1,g(T),f=u.pending,f===null?(T.next=u.pending=T,Ak(u,T)):(T.next=f.next,u.pending=f.next=T)}}function Ak(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var T=H.T,V={};H.T=V;try{var X=f(b,g),de=H.S;de!==null&&de(V,X),Ek(l,u,X)}catch(je){S4(l,u,je)}finally{T!==null&&V.types!==null&&(T.types=V.types),H.T=T}}else try{T=f(b,g),Ek(l,u,T)}catch(je){S4(l,u,je)}}function Ek(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){jk(l,u,g)},function(g){return S4(l,u,g)}):jk(l,u,f)}function jk(l,u,f){u.status="fulfilled",u.value=f,kk(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,Ak(l,f)))}function S4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,kk(u),u=u.next;while(u!==g)}l.action=null}function kk(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Ck(l,u){return u}function Ok(l,u){if(Ir){var f=kn.formState;if(f!==null){e:{var g=dr;if(Ir){if(Bn){t:{for(var b=Bn,T=$s;b.nodeType!==8;){if(!T){b=null;break t}if(b=zs(b.nextSibling),b===null){b=null;break t}}T=b.data,b=T==="F!"||T==="F"?b:null}if(b){Bn=zs(b.nextSibling),g=b.data==="F!";break e}}jc(g)}g=!1}g&&(u=f[0])}}return f=ki(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ck,lastRenderedState:u},f.queue=g,f=Xk.bind(null,dr,g),g.dispatch=f,g=w4(!1),T=j4.bind(null,dr,!1,g.queue),g=ki(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=uY.bind(null,dr,b,T,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function Ik(l){var u=la();return Rk(u,xn,l)}function Rk(l,u,f){if(u=x4(l,u,Ck)[0],l=my(bl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=hp(u)}catch(V){throw V===D0?iy:V}else g=u;u=la();var b=u.queue,T=b.dispatch;return f!==u.memoizedState&&(dr.flags|=2048,z0(9,{destroy:void 0},dY.bind(null,b,f),null)),[g,T,l]}function dY(l,u){l.action=u}function Mk(l){var u=la(),f=xn;if(f!==null)return Rk(u,f,l);la(),u=u.memoizedState,f=la();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function z0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=dr.updateQueue,u===null&&(u=fy(),dr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function Pk(){return la().memoizedState}function gy(l,u,f,g){var b=ki();dr.flags|=l,b.memoizedState=z0(1|u,{destroy:void 0},f,g===void 0?null:g)}function yy(l,u,f,g){var b=la();g=g===void 0?null:g;var T=b.memoizedState.inst;xn!==null&&g!==null&&f4(g,xn.memoizedState.deps)?b.memoizedState=z0(u,T,f,g):(dr.flags|=l,b.memoizedState=z0(1|u,T,f,g))}function Dk(l,u){gy(8390656,8,l,u)}function _4(l,u){yy(2048,8,l,u)}function hY(l){dr.flags|=4;var u=dr.updateQueue;if(u===null)u=fy(),dr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function Lk(l){var u=la().memoizedState;return hY({ref:u,nextImpl:l}),function(){if((Qr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Bk(l,u){return yy(4,2,l,u)}function $k(l,u){return yy(4,4,l,u)}function Uk(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function zk(l,u,f){f=f!=null?f.concat([l]):null,yy(4,4,Uk.bind(null,u,l),f)}function T4(){}function Vk(l,u){var f=la();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&f4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function Fk(l,u){var f=la();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&f4(u,g[1]))return g[0];if(g=l(),ld){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g}function N4(l,u,f){return f===void 0||(xl&1073741824)!==0&&(Nr&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=qC(),dr.lanes|=l,Lc|=l,f)}function qk(l,u,f,g){return ps(f,u)?f:B0.current!==null?(l=N4(l,f,g),ps(l,u)||(wa=!0),l):(xl&42)===0||(xl&1073741824)!==0&&(Nr&261930)===0?(wa=!0,l.memoizedState=f):(l=qC(),dr.lanes|=l,Lc|=l,u)}function Hk(l,u,f,g,b){var T=J.p;J.p=T!==0&&8>T?T:8;var V=H.T,X={};H.T=X,j4(l,!1,u,f);try{var de=b(),je=H.S;if(je!==null&&je(X,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var qe=oY(de,g);fp(l,u,qe,bs(l))}else fp(l,u,g,bs(l))}catch(Qe){fp(l,u,{then:function(){},status:"rejected",reason:Qe},bs())}finally{J.p=T,V!==null&&X.types!==null&&(V.types=X.types),H.T=V}}function fY(){}function A4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=Gk(l).queue;Hk(l,b,u,ie,f===null?fY:function(){return Wk(l),f(g)})}function Gk(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:ie},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Wk(l){var u=Gk(l);u.next===null&&(u=l.alternate.memoizedState),fp(l,u.next.queue,{},bs())}function E4(){return ii(Cp)}function Kk(){return la().memoizedState}function Qk(){return la().memoizedState}function pY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=bs();l=Oc(f);var g=Ic(u,l,f);g!==null&&(Wi(g,u,f),lp(g,u,f)),u={cache:r4()},l.payload=u;return}u=u.return}}function mY(l,u,f){var g=bs();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},vy(l)?Yk(u,f):(f=Hw(l,u,f,g),f!==null&&(Wi(f,l,g),Zk(f,u,g)))}function Xk(l,u,f){var g=bs();fp(l,u,f,g)}function fp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(vy(l))Yk(u,b);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer,T!==null))try{var V=u.lastRenderedState,X=T(V,f);if(b.hasEagerState=!0,b.eagerState=X,ps(X,V))return Z1(l,u,b,0),kn===null&&Y1(),!1}catch{}finally{}if(f=Hw(l,u,b,g),f!==null)return Wi(f,l,g),Zk(f,u,g),!0}return!1}function j4(l,u,f,g){if(g={lane:2,revertLane:s5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},vy(l)){if(u)throw Error(n(479))}else u=Hw(l,f,g,2),u!==null&&Wi(u,l,2)}function vy(l){var u=l.alternate;return l===dr||u!==null&&u===dr}function Yk(l,u){$0=dy=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function Zk(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,pn(l,f)}}var pp={readContext:ii,use:py,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};pp.useEffectEvent=Jn;var Jk={readContext:ii,use:py,useCallback:function(l,u){return ki().memoizedState=[l,u===void 0?null:u],l},useContext:ii,useEffect:Dk,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,gy(4194308,4,Uk.bind(null,u,l),f)},useLayoutEffect:function(l,u){return gy(4194308,4,l,u)},useInsertionEffect:function(l,u){gy(4,2,l,u)},useMemo:function(l,u){var f=ki();u=u===void 0?null:u;var g=l();if(ld){$t(!0);try{l()}finally{$t(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=ki();if(f!==void 0){var b=f(u);if(ld){$t(!0);try{f(u)}finally{$t(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=mY.bind(null,dr,l),[g.memoizedState,l]},useRef:function(l){var u=ki();return l={current:l},u.memoizedState=l},useState:function(l){l=w4(l);var u=l.queue,f=Xk.bind(null,dr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:T4,useDeferredValue:function(l,u){var f=ki();return N4(f,l,u)},useTransition:function(){var l=w4(!1);return l=Hk.bind(null,dr,l.queue,!0,!1),ki().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=dr,b=ki();if(Ir){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),kn===null)throw Error(n(349));(Nr&127)!==0||bk(g,u,f)}b.memoizedState=f;var T={value:f,getSnapshot:u};return b.queue=T,Dk(Sk.bind(null,g,T,l),[l]),g.flags|=2048,z0(9,{destroy:void 0},wk.bind(null,g,T,f,u),null),f},useId:function(){var l=ki(),u=kn.identifierPrefix;if(Ir){var f=Mo,g=Ro;f=(g&~(1<<32-Ze(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=hy++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=lY++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:E4,useFormState:Ok,useActionState:Ok,useOptimistic:function(l){var u=ki();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=j4.bind(null,dr,!0,f),f.dispatch=u,[l,u]},useMemoCache:v4,useCacheRefresh:function(){return ki().memoizedState=pY.bind(null,dr)},useEffectEvent:function(l){var u=ki(),f={impl:l};return u.memoizedState=f,function(){if((Qr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},k4={readContext:ii,use:py,useCallback:Vk,useContext:ii,useEffect:_4,useImperativeHandle:zk,useInsertionEffect:Bk,useLayoutEffect:$k,useMemo:Fk,useReducer:my,useRef:Pk,useState:function(){return my(bl)},useDebugValue:T4,useDeferredValue:function(l,u){var f=la();return qk(f,xn.memoizedState,l,u)},useTransition:function(){var l=my(bl)[0],u=la().memoizedState;return[typeof l=="boolean"?l:hp(l),u]},useSyncExternalStore:xk,useId:Kk,useHostTransitionStatus:E4,useFormState:Ik,useActionState:Ik,useOptimistic:function(l,u){var f=la();return Nk(f,xn,l,u)},useMemoCache:v4,useCacheRefresh:Qk};k4.useEffectEvent=Lk;var eC={readContext:ii,use:py,useCallback:Vk,useContext:ii,useEffect:_4,useImperativeHandle:zk,useInsertionEffect:Bk,useLayoutEffect:$k,useMemo:Fk,useReducer:b4,useRef:Pk,useState:function(){return b4(bl)},useDebugValue:T4,useDeferredValue:function(l,u){var f=la();return xn===null?N4(f,l,u):qk(f,xn.memoizedState,l,u)},useTransition:function(){var l=b4(bl)[0],u=la().memoizedState;return[typeof l=="boolean"?l:hp(l),u]},useSyncExternalStore:xk,useId:Kk,useHostTransitionStatus:E4,useFormState:Mk,useActionState:Mk,useOptimistic:function(l,u){var f=la();return xn!==null?Nk(f,xn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:v4,useCacheRefresh:Qk};eC.useEffectEvent=Lk;function C4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var O4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=bs(),b=Oc(g);b.payload=u,f!=null&&(b.callback=f),u=Ic(l,b,g),u!==null&&(Wi(u,l,g),lp(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=bs(),b=Oc(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=Ic(l,b,g),u!==null&&(Wi(u,l,g),lp(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=bs(),g=Oc(f);g.tag=2,u!=null&&(g.callback=u),u=Ic(l,g,f),u!==null&&(Wi(u,l,f),lp(u,l,f))}};function tC(l,u,f,g,b,T,V){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,T,V):u.prototype&&u.prototype.isPureReactComponent?!ep(f,g)||!ep(b,T):!0}function rC(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&O4.enqueueReplaceState(u,u.state,null)}function cd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function nC(l){X1(l)}function aC(l){console.error(l)}function iC(l){X1(l)}function xy(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function sC(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function I4(l,u,f){return f=Oc(f),f.tag=3,f.payload={element:null},f.callback=function(){xy(l,u)},f}function oC(l){return l=Oc(l),l.tag=3,l}function lC(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var T=g.value;l.payload=function(){return b(T)},l.callback=function(){sC(u,f,g)}}var V=f.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(l.callback=function(){sC(u,f,g),typeof b!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})})}function gY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&R0(u,f,b,!0),f=gs.current,f!==null){switch(f.tag){case 31:case 13:return Us===null?Oy():f.alternate===null&&ea===0&&(ea=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===sy?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),n5(l,g,b)),!1;case 22:return f.flags|=65536,g===sy?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),n5(l,g,b)),!1}throw Error(n(435,f.tag))}return n5(l,g,b),Oy(),!1}if(Ir)return u=gs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==Yw&&(l=Error(n(422),{cause:g}),np(Ds(l,f)))):(g!==Yw&&(u=Error(n(423),{cause:g}),np(Ds(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Ds(g,f),b=I4(l.stateNode,g,b),l4(l,b),ea!==4&&(ea=2)),!1;var T=Error(n(520),{cause:g});if(T=Ds(T,f),Sp===null?Sp=[T]:Sp.push(T),ea!==4&&(ea=2),u===null)return!0;g=Ds(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=I4(f.stateNode,g,l),l4(f,l),!1;case 1:if(u=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Bc===null||!Bc.has(T))))return f.flags|=65536,b&=-b,f.lanes|=b,b=oC(b),lC(b,l,f,g),l4(f,b),!1}f=f.return}while(f!==null);return!1}var R4=Error(n(461)),wa=!1;function si(l,u,f,g){u.child=l===null?hk(u,null,f,g):od(u,l.child,f,g)}function cC(l,u,f,g,b){f=f.render;var T=u.ref;if("ref"in g){var V={};for(var X in g)X!=="ref"&&(V[X]=g[X])}else V=g;return nd(u),g=p4(l,u,f,V,T,b),X=m4(),l!==null&&!wa?(g4(l,u,b),wl(l,u,b)):(Ir&&X&&Qw(u),u.flags|=1,si(l,u,g,b),u.child)}function uC(l,u,f,g,b){if(l===null){var T=f.type;return typeof T=="function"&&!Gw(T)&&T.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=T,dC(l,u,T,g,b)):(l=ey(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(T=l.child,!z4(l,b)){var V=T.memoizedProps;if(f=f.compare,f=f!==null?f:ep,f(V,g)&&l.ref===u.ref)return wl(l,u,b)}return u.flags|=1,l=ml(T,g),l.ref=u.ref,l.return=u,u.child=l}function dC(l,u,f,g,b){if(l!==null){var T=l.memoizedProps;if(ep(T,g)&&l.ref===u.ref)if(wa=!1,u.pendingProps=g=T,z4(l,b))(l.flags&131072)!==0&&(wa=!0);else return u.lanes=l.lanes,wl(l,u,b)}return M4(l,u,f,g,b)}function hC(l,u,f,g){var b=g.children,T=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(T=T!==null?T.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~T}else g=0,u.child=null;return fC(l,u,T,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&ay(u,T!==null?T.cachePool:null),T!==null?mk(u,T):u4(),gk(u);else return g=u.lanes=536870912,fC(l,u,T!==null?T.baseLanes|f:f,f,g)}else T!==null?(ay(u,T.cachePool),mk(u,T),Mc(),u.memoizedState=null):(l!==null&&ay(u,null),u4(),Mc());return si(l,u,b,f),u.child}function mp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function fC(l,u,f,g,b){var T=a4();return T=T===null?null:{parent:xa._currentValue,pool:T},u.memoizedState={baseLanes:f,cachePool:T},l!==null&&ay(u,null),u4(),gk(u),l!==null&&R0(l,u,g,!0),u.childLanes=b,null}function by(l,u){return u=Sy({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function pC(l,u,f){return od(u,l.child,null,f),l=by(u,u.pendingProps),l.flags|=2,ys(u),u.memoizedState=null,l}function yY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Ir){if(g.mode==="hidden")return l=by(u,g),u.lanes=536870912,mp(null,l);if(h4(u),(l=Bn)?(l=A9(l,$s),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Ac!==null?{id:Ro,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},f=Yj(l),f.return=u,u.child=f,ai=u,Bn=null)):l=null,l===null)throw jc(u);return u.lanes=536870912,null}return by(u,g)}var T=l.memoizedState;if(T!==null){var V=T.dehydrated;if(h4(u),b)if(u.flags&256)u.flags&=-257,u=pC(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(wa||R0(l,u,f,!1),b=(f&l.childLanes)!==0,wa||b){if(g=kn,g!==null&&(V=Rn(g,f),V!==0&&V!==T.retryLane))throw T.retryLane=V,Ju(l,V),Wi(g,l,V),R4;Oy(),u=pC(l,u,f)}else l=T.treeContext,Bn=zs(V.nextSibling),ai=u,Ir=!0,Ec=null,$s=!1,l!==null&&ek(u,l),u=by(u,g),u.flags|=4096;return u}return l=ml(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function wy(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function M4(l,u,f,g,b){return nd(u),f=p4(l,u,f,g,void 0,b),g=m4(),l!==null&&!wa?(g4(l,u,b),wl(l,u,b)):(Ir&&g&&Qw(u),u.flags|=1,si(l,u,f,b),u.child)}function mC(l,u,f,g,b,T){return nd(u),u.updateQueue=null,f=vk(u,g,f,b),yk(l),g=m4(),l!==null&&!wa?(g4(l,u,T),wl(l,u,T)):(Ir&&g&&Qw(u),u.flags|=1,si(l,u,f,T),u.child)}function gC(l,u,f,g,b){if(nd(u),u.stateNode===null){var T=k0,V=f.contextType;typeof V=="object"&&V!==null&&(T=ii(V)),T=new f(g,T),u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=O4,u.stateNode=T,T._reactInternals=u,T=u.stateNode,T.props=g,T.state=u.memoizedState,T.refs={},s4(u),V=f.contextType,T.context=typeof V=="object"&&V!==null?ii(V):k0,T.state=u.memoizedState,V=f.getDerivedStateFromProps,typeof V=="function"&&(C4(u,f,V,g),T.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(V=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),V!==T.state&&O4.enqueueReplaceState(T,T.state,null),up(u,g,T,b),cp(),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){T=u.stateNode;var X=u.memoizedProps,de=cd(f,X);T.props=de;var je=T.context,qe=f.contextType;V=k0,typeof qe=="object"&&qe!==null&&(V=ii(qe));var Qe=f.getDerivedStateFromProps;qe=typeof Qe=="function"||typeof T.getSnapshotBeforeUpdate=="function",X=u.pendingProps!==X,qe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(X||je!==V)&&rC(u,T,g,V),Cc=!1;var Ie=u.memoizedState;T.state=Ie,up(u,g,T,b),cp(),je=u.memoizedState,X||Ie!==je||Cc?(typeof Qe=="function"&&(C4(u,f,Qe,g),je=u.memoizedState),(de=Cc||tC(u,f,de,g,Ie,je,V))?(qe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(u.flags|=4194308)):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=je),T.props=g,T.state=je,T.context=V,g=de):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{T=u.stateNode,o4(l,u),V=u.memoizedProps,qe=cd(f,V),T.props=qe,Qe=u.pendingProps,Ie=T.context,je=f.contextType,de=k0,typeof je=="object"&&je!==null&&(de=ii(je)),X=f.getDerivedStateFromProps,(je=typeof X=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(V!==Qe||Ie!==de)&&rC(u,T,g,de),Cc=!1,Ie=u.memoizedState,T.state=Ie,up(u,g,T,b),cp();var Le=u.memoizedState;V!==Qe||Ie!==Le||Cc||l!==null&&l.dependencies!==null&&ry(l.dependencies)?(typeof X=="function"&&(C4(u,f,X,g),Le=u.memoizedState),(qe=Cc||tC(u,f,qe,g,Ie,Le,de)||l!==null&&l.dependencies!==null&&ry(l.dependencies))?(je||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Le,de),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Le,de)),typeof T.componentDidUpdate=="function"&&(u.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof T.componentDidUpdate!="function"||V===l.memoizedProps&&Ie===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Ie===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Le),T.props=g,T.state=Le,T.context=de,g=qe):(typeof T.componentDidUpdate!="function"||V===l.memoizedProps&&Ie===l.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||V===l.memoizedProps&&Ie===l.memoizedState||(u.flags|=1024),g=!1)}return T=g,wy(l,u),g=(u.flags&128)!==0,T||g?(T=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:T.render(),u.flags|=1,l!==null&&g?(u.child=od(u,l.child,null,b),u.child=od(u,null,f,b)):si(l,u,f,b),u.memoizedState=T.state,l=u.child):l=wl(l,u,b),l}function yC(l,u,f,g){return td(),u.flags|=256,si(l,u,f,g),u.child}var P4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function D4(l){return{baseLanes:l,cachePool:sk()}}function L4(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=xs),l}function vC(l,u,f){var g=u.pendingProps,b=!1,T=(u.flags&128)!==0,V;if((V=T)||(V=l!==null&&l.memoizedState===null?!1:(oa.current&2)!==0),V&&(b=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,l===null){if(Ir){if(b?Rc(u):Mc(),(l=Bn)?(l=A9(l,$s),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Ac!==null?{id:Ro,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},f=Yj(l),f.return=u,u.child=f,ai=u,Bn=null)):l=null,l===null)throw jc(u);return x5(l)?u.lanes=32:u.lanes=536870912,null}var X=g.children;return g=g.fallback,b?(Mc(),b=u.mode,X=Sy({mode:"hidden",children:X},b),g=ed(g,b,f,null),X.return=u,g.return=u,X.sibling=g,u.child=X,g=u.child,g.memoizedState=D4(f),g.childLanes=L4(l,V,f),u.memoizedState=P4,mp(null,g)):(Rc(u),B4(u,X))}var de=l.memoizedState;if(de!==null&&(X=de.dehydrated,X!==null)){if(T)u.flags&256?(Rc(u),u.flags&=-257,u=$4(l,u,f)):u.memoizedState!==null?(Mc(),u.child=l.child,u.flags|=128,u=null):(Mc(),X=g.fallback,b=u.mode,g=Sy({mode:"visible",children:g.children},b),X=ed(X,b,f,null),X.flags|=2,g.return=u,X.return=u,g.sibling=X,u.child=g,od(u,l.child,null,f),g=u.child,g.memoizedState=D4(f),g.childLanes=L4(l,V,f),u.memoizedState=P4,u=mp(null,g));else if(Rc(u),x5(X)){if(V=X.nextSibling&&X.nextSibling.dataset,V)var je=V.dgst;V=je,g=Error(n(419)),g.stack="",g.digest=V,np({value:g,source:null,stack:null}),u=$4(l,u,f)}else if(wa||R0(l,u,f,!1),V=(f&l.childLanes)!==0,wa||V){if(V=kn,V!==null&&(g=Rn(V,f),g!==0&&g!==de.retryLane))throw de.retryLane=g,Ju(l,g),Wi(V,l,g),R4;v5(X)||Oy(),u=$4(l,u,f)}else v5(X)?(u.flags|=192,u.child=l.child,u=null):(l=de.treeContext,Bn=zs(X.nextSibling),ai=u,Ir=!0,Ec=null,$s=!1,l!==null&&ek(u,l),u=B4(u,g.children),u.flags|=4096);return u}return b?(Mc(),X=g.fallback,b=u.mode,de=l.child,je=de.sibling,g=ml(de,{mode:"hidden",children:g.children}),g.subtreeFlags=de.subtreeFlags&65011712,je!==null?X=ml(je,X):(X=ed(X,b,f,null),X.flags|=2),X.return=u,g.return=u,g.sibling=X,u.child=g,mp(null,g),g=u.child,X=l.child.memoizedState,X===null?X=D4(f):(b=X.cachePool,b!==null?(de=xa._currentValue,b=b.parent!==de?{parent:de,pool:de}:b):b=sk(),X={baseLanes:X.baseLanes|f,cachePool:b}),g.memoizedState=X,g.childLanes=L4(l,V,f),u.memoizedState=P4,mp(l.child,g)):(Rc(u),f=l.child,l=f.sibling,f=ml(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(V=u.deletions,V===null?(u.deletions=[l],u.flags|=16):V.push(l)),u.child=f,u.memoizedState=null,f)}function B4(l,u){return u=Sy({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Sy(l,u){return l=ms(22,l,null,u),l.lanes=0,l}function $4(l,u,f){return od(u,l.child,null,f),l=B4(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function xC(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),e4(l.return,u,f)}function U4(l,u,f,g,b,T){var V=l.memoizedState;V===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:T}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=g,V.tail=f,V.tailMode=b,V.treeForkCount=T)}function bC(l,u,f){var g=u.pendingProps,b=g.revealOrder,T=g.tail;g=g.children;var V=oa.current,X=(V&2)!==0;if(X?(V=V&1|2,u.flags|=128):V&=1,ae(oa,V),si(l,u,g,f),g=Ir?rp:0,!X&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&xC(l,f,u);else if(l.tag===19)xC(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&uy(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),U4(u,!1,b,f,T,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&uy(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}U4(u,!0,f,null,T,g);break;case"together":U4(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function wl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Lc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(R0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=ml(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=ml(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function z4(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&ry(l)))}function vY(l,u,f){switch(u.tag){case 3:Ye(u,u.stateNode.containerInfo),kc(u,xa,l.memoizedState.cache),td();break;case 27:case 5:me(u);break;case 4:Ye(u,u.stateNode.containerInfo);break;case 10:kc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,h4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Rc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?vC(l,u,f):(Rc(u),l=wl(l,u,f),l!==null?l.sibling:null);Rc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(R0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return bC(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ae(oa,oa.current),g)break;return null;case 22:return u.lanes=0,hC(l,u,f,u.pendingProps);case 24:kc(u,xa,l.memoizedState.cache)}return wl(l,u,f)}function wC(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)wa=!0;else{if(!z4(l,f)&&(u.flags&128)===0)return wa=!1,vY(l,u,f);wa=(l.flags&131072)!==0}else wa=!1,Ir&&(u.flags&1048576)!==0&&Jj(u,rp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=id(u.elementType),u.type=l,typeof l=="function")Gw(l)?(g=cd(l,g),u.tag=1,u=gC(null,u,l,g,f)):(u.tag=0,u=M4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=cC(null,u,l,g,f);break e}else if(b===E){u.tag=14,u=uC(null,u,l,g,f);break e}}throw u=K(l)||l,Error(n(306,u,""))}}return u;case 0:return M4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=cd(g,u.pendingProps),gC(l,u,g,b,f);case 3:e:{if(Ye(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var T=u.memoizedState;b=T.element,o4(l,u),up(u,g,null,f);var V=u.memoizedState;if(g=V.cache,kc(u,xa,g),g!==T.cache&&t4(u,[xa],f,!0),cp(),g=V.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=T,u.memoizedState=T,u.flags&256){u=yC(l,u,g,f);break e}else if(g!==b){b=Ds(Error(n(424)),u),np(b),u=yC(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Bn=zs(l.firstChild),ai=u,Ir=!0,Ec=null,$s=!0,f=hk(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(td(),g===b){u=wl(l,u,f);break e}si(l,u,g,f)}u=u.child}return u;case 26:return wy(l,u),l===null?(f=I9(u.type,null,u.pendingProps,null))?u.memoizedState=f:Ir||(f=u.type,l=u.pendingProps,g=By(Ue.current).createElement(f),g[Jr]=u,g[gn]=l,oi(g,f,l),hr(g),u.stateNode=g):u.memoizedState=I9(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return me(u),l===null&&Ir&&(g=u.stateNode=k9(u.type,u.pendingProps,Ue.current),ai=u,$s=!0,b=Bn,Vc(u.type)?(b5=b,Bn=zs(g.firstChild)):Bn=b),si(l,u,u.pendingProps.children,f),wy(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Ir&&((b=g=Bn)&&(g=KY(g,u.type,u.pendingProps,$s),g!==null?(u.stateNode=g,ai=u,Bn=zs(g.firstChild),$s=!1,b=!0):b=!1),b||jc(u)),me(u),b=u.type,T=u.pendingProps,V=l!==null?l.memoizedProps:null,g=T.children,m5(b,T)?g=null:V!==null&&m5(b,V)&&(u.flags|=32),u.memoizedState!==null&&(b=p4(l,u,cY,null,null,f),Cp._currentValue=b),wy(l,u),si(l,u,g,f),u.child;case 6:return l===null&&Ir&&((l=f=Bn)&&(f=QY(f,u.pendingProps,$s),f!==null?(u.stateNode=f,ai=u,Bn=null,l=!0):l=!1),l||jc(u)),null;case 13:return vC(l,u,f);case 4:return Ye(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=od(u,null,g,f):si(l,u,g,f),u.child;case 11:return cC(l,u,u.type,u.pendingProps,f);case 7:return si(l,u,u.pendingProps,f),u.child;case 8:return si(l,u,u.pendingProps.children,f),u.child;case 12:return si(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,kc(u,u.type,g.value),si(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,nd(u),b=ii(b),g=g(b),u.flags|=1,si(l,u,g,f),u.child;case 14:return uC(l,u,u.type,u.pendingProps,f);case 15:return dC(l,u,u.type,u.pendingProps,f);case 19:return bC(l,u,f);case 31:return yY(l,u,f);case 22:return hC(l,u,f,u.pendingProps);case 24:return nd(u),g=ii(xa),l===null?(b=a4(),b===null&&(b=kn,T=r4(),b.pooledCache=T,T.refCount++,T!==null&&(b.pooledCacheLanes|=f),b=T),u.memoizedState={parent:g,cache:b},s4(u),kc(u,xa,b)):((l.lanes&f)!==0&&(o4(l,u),up(u,null,null,f),cp()),b=l.memoizedState,T=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),kc(u,xa,g)):(g=T.cache,kc(u,xa,g),g!==b.cache&&t4(u,[xa],f,!0))),si(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Sl(l){l.flags|=4}function V4(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(KC())l.flags|=8192;else throw sd=sy,i4}else l.flags&=-16777217}function SC(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!L9(u))if(KC())l.flags|=8192;else throw sd=sy,i4}function _y(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Wr():536870912,l.lanes|=u,H0|=u)}function gp(l,u){if(!Ir)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function $n(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function xY(l,u,f){var g=u.pendingProps;switch(Xw(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(u),null;case 1:return $n(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),vl(xa),Q(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(I0(u)?Sl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Zw())),$n(u),null;case 26:var b=u.type,T=u.memoizedState;return l===null?(Sl(u),T!==null?($n(u),SC(u,T)):($n(u),V4(u,b,null,g,f))):T?T!==l.memoizedState?(Sl(u),$n(u),SC(u,T)):($n(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&Sl(u),$n(u),V4(u,b,l,g,f)),null;case 27:if(te(u),f=Ue.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Sl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return $n(u),null}l=xe.current,I0(u)?tk(u):(l=k9(b,g,f),u.stateNode=l,Sl(u))}return $n(u),null;case 5:if(te(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Sl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return $n(u),null}if(T=xe.current,I0(u))tk(u);else{var V=By(Ue.current);switch(T){case 1:T=V.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:T=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":T=V.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":T=V.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":T=V.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?V.createElement("select",{is:g.is}):V.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?V.createElement(b,{is:g.is}):V.createElement(b)}}T[Jr]=u,T[gn]=g;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)T.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=T;e:switch(oi(T,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Sl(u)}}return $n(u),V4(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Sl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=Ue.current,I0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=ai,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Jr]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||v9(l.nodeValue,f)),l||jc(u,!0)}else l=By(l).createTextNode(g),l[Jr]=u,u.stateNode=l}return $n(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=I0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Jr]=u}else td(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$n(u),l=!1}else f=Zw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(ys(u),u):(ys(u),null);if((u.flags&128)!==0)throw Error(n(558))}return $n(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=I0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Jr]=u}else td(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$n(u),b=!1}else b=Zw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(ys(u),u):(ys(u),null)}return ys(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),_y(u,u.updateQueue),$n(u),null);case 4:return Q(),l===null&&u5(u.stateNode.containerInfo),$n(u),null;case 10:return vl(u.type),$n(u),null;case 19:if(ne(oa),g=u.memoizedState,g===null)return $n(u),null;if(b=(u.flags&128)!==0,T=g.rendering,T===null)if(b)gp(g,!1);else{if(ea!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(T=uy(l),T!==null){for(u.flags|=128,gp(g,!1),l=T.updateQueue,u.updateQueue=l,_y(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)Xj(f,l),f=f.sibling;return ae(oa,oa.current&1|2),Ir&&gl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&We()>jy&&(u.flags|=128,b=!0,gp(g,!1),u.lanes=4194304)}else{if(!b)if(l=uy(T),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,_y(u,l),gp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!Ir)return $n(u),null}else 2*We()-g.renderingStartTime>jy&&f!==536870912&&(u.flags|=128,b=!0,gp(g,!1),u.lanes=4194304);g.isBackwards?(T.sibling=u.child,u.child=T):(l=g.last,l!==null?l.sibling=T:u.child=T,g.last=T)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=We(),l.sibling=null,f=oa.current,ae(oa,b?f&1|2:f&1),Ir&&gl(u,g.treeForkCount),l):($n(u),null);case 22:case 23:return ys(u),d4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&($n(u),u.subtreeFlags&6&&(u.flags|=8192)):$n(u),f=u.updateQueue,f!==null&&_y(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ne(ad),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),vl(xa),$n(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function bY(l,u){switch(Xw(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return vl(xa),Q(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return te(u),null;case 31:if(u.memoizedState!==null){if(ys(u),u.alternate===null)throw Error(n(340));td()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ys(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));td()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ne(oa),null;case 4:return Q(),null;case 10:return vl(u.type),null;case 22:case 23:return ys(u),d4(),l!==null&&ne(ad),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return vl(xa),null;case 25:return null;default:return null}}function _C(l,u){switch(Xw(u),u.tag){case 3:vl(xa),Q();break;case 26:case 27:case 5:te(u);break;case 4:Q();break;case 31:u.memoizedState!==null&&ys(u);break;case 13:ys(u);break;case 19:ne(oa);break;case 10:vl(u.type);break;case 22:case 23:ys(u),d4(),l!==null&&ne(ad);break;case 24:vl(xa)}}function yp(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var T=f.create,V=f.inst;g=T(),V.destroy=g}f=f.next}while(f!==b)}}catch(X){cn(u,u.return,X)}}function Pc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var T=b.next;g=T;do{if((g.tag&l)===l){var V=g.inst,X=V.destroy;if(X!==void 0){V.destroy=void 0,b=u;var de=f,je=X;try{je()}catch(qe){cn(b,de,qe)}}}g=g.next}while(g!==T)}}catch(qe){cn(u,u.return,qe)}}function TC(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{pk(u,f)}catch(g){cn(l,l.return,g)}}}function NC(l,u,f){f.props=cd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){cn(l,u,g)}}function vp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){cn(l,u,b)}}function Po(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){cn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){cn(l,u,b)}else f.current=null}function AC(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){cn(l,l.return,b)}}function F4(l,u,f){try{var g=l.stateNode;VY(g,l.type,f,u),g[gn]=u}catch(b){cn(l,l.return,b)}}function EC(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Vc(l.type)||l.tag===4}function q4(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||EC(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Vc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function H4(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=vn));else if(g!==4&&(g===27&&Vc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(H4(l,u,f),l=l.sibling;l!==null;)H4(l,u,f),l=l.sibling}function Ty(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Vc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Ty(l,u,f),l=l.sibling;l!==null;)Ty(l,u,f),l=l.sibling}function jC(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);oi(u,g,f),u[Jr]=l,u[gn]=f}catch(T){cn(l,l.return,T)}}var _l=!1,Sa=!1,G4=!1,kC=typeof WeakSet=="function"?WeakSet:Set,Wa=null;function wY(l,u){if(l=l.containerInfo,f5=Hy,l=zj(l),$w(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var V=0,X=-1,de=-1,je=0,qe=0,Qe=l,Ie=null;t:for(;;){for(var Le;Qe!==f||b!==0&&Qe.nodeType!==3||(X=V+b),Qe!==T||g!==0&&Qe.nodeType!==3||(de=V+g),Qe.nodeType===3&&(V+=Qe.nodeValue.length),(Le=Qe.firstChild)!==null;)Ie=Qe,Qe=Le;for(;;){if(Qe===l)break t;if(Ie===f&&++je===b&&(X=V),Ie===T&&++qe===g&&(de=V),(Le=Qe.nextSibling)!==null)break;Qe=Ie,Ie=Qe.parentNode}Qe=Le}f=X===-1||de===-1?null:{start:X,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(p5={focusedElem:l,selectionRange:f},Hy=!1,Wa=u;Wa!==null;)if(u=Wa,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Wa=l;else for(;Wa!==null;){switch(u=Wa,T=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&T!==null){l=void 0,f=u,b=T.memoizedProps,T=T.memoizedState,g=f.stateNode;try{var Ct=cd(f.type,b);l=g.getSnapshotBeforeUpdate(Ct,T),g.__reactInternalSnapshotBeforeUpdate=l}catch(Wt){cn(f,f.return,Wt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)y5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":y5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Wa=l;break}Wa=u.return}}function CC(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Nl(l,f),g&4&&yp(5,f);break;case 1:if(Nl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(V){cn(f,f.return,V)}else{var b=cd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(V){cn(f,f.return,V)}}g&64&&TC(f),g&512&&vp(f,f.return);break;case 3:if(Nl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{pk(l,u)}catch(V){cn(f,f.return,V)}}break;case 27:u===null&&g&4&&jC(f);case 26:case 5:Nl(l,f),u===null&&g&4&&AC(f),g&512&&vp(f,f.return);break;case 12:Nl(l,f);break;case 31:Nl(l,f),g&4&&RC(l,f);break;case 13:Nl(l,f),g&4&&MC(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=CY.bind(null,f),XY(l,f))));break;case 22:if(g=f.memoizedState!==null||_l,!g){u=u!==null&&u.memoizedState!==null||Sa,b=_l;var T=Sa;_l=g,(Sa=u)&&!T?Al(l,f,(f.subtreeFlags&8772)!==0):Nl(l,f),_l=b,Sa=T}break;case 30:break;default:Nl(l,f)}}function OC(l){var u=l.alternate;u!==null&&(l.alternate=null,OC(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Tt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Vn=null,Fi=!1;function Tl(l,u,f){for(f=f.child;f!==null;)IC(l,u,f),f=f.sibling}function IC(l,u,f){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Et,f)}catch{}switch(f.tag){case 26:Sa||Po(f,u),Tl(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Sa||Po(f,u);var g=Vn,b=Fi;Vc(f.type)&&(Vn=f.stateNode,Fi=!1),Tl(l,u,f),Ep(f.stateNode),Vn=g,Fi=b;break;case 5:Sa||Po(f,u);case 6:if(g=Vn,b=Fi,Vn=null,Tl(l,u,f),Vn=g,Fi=b,Vn!==null)if(Fi)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(f.stateNode)}catch(T){cn(f,u,T)}else try{Vn.removeChild(f.stateNode)}catch(T){cn(f,u,T)}break;case 18:Vn!==null&&(Fi?(l=Vn,T9(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),J0(l)):T9(Vn,f.stateNode));break;case 4:g=Vn,b=Fi,Vn=f.stateNode.containerInfo,Fi=!0,Tl(l,u,f),Vn=g,Fi=b;break;case 0:case 11:case 14:case 15:Pc(2,f,u),Sa||Pc(4,f,u),Tl(l,u,f);break;case 1:Sa||(Po(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&NC(f,u,g)),Tl(l,u,f);break;case 21:Tl(l,u,f);break;case 22:Sa=(g=Sa)||f.memoizedState!==null,Tl(l,u,f),Sa=g;break;default:Tl(l,u,f)}}function RC(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{J0(l)}catch(f){cn(u,u.return,f)}}}function MC(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{J0(l)}catch(f){cn(u,u.return,f)}}function SY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new kC),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new kC),u;default:throw Error(n(435,l.tag))}}function Ny(l,u){var f=SY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=OY.bind(null,l,g);g.then(b,b)}})}function qi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],T=l,V=u,X=V;e:for(;X!==null;){switch(X.tag){case 27:if(Vc(X.type)){Vn=X.stateNode,Fi=!1;break e}break;case 5:Vn=X.stateNode,Fi=!1;break e;case 3:case 4:Vn=X.stateNode.containerInfo,Fi=!0;break e}X=X.return}if(Vn===null)throw Error(n(160));IC(T,V,b),Vn=null,Fi=!1,T=b.alternate,T!==null&&(T.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)PC(u,l),u=u.sibling}var uo=null;function PC(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:qi(u,l),Hi(l),g&4&&(Pc(3,l,l.return),yp(3,l),Pc(5,l,l.return));break;case 1:qi(u,l),Hi(l),g&512&&(Sa||f===null||Po(f,f.return)),g&64&&_l&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=uo;if(qi(u,l),Hi(l),g&512&&(Sa||f===null||Po(f,f.return)),g&4){var T=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":T=b.getElementsByTagName("title")[0],(!T||T[gi]||T[Jr]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=b.createElement(g),b.head.insertBefore(T,b.querySelector("head > title"))),oi(T,g,f),T[Jr]=l,hr(T),g=T;break e;case"link":var V=P9("link","href",b).get(g+(f.href||""));if(V){for(var X=0;X<V.length;X++)if(T=V[X],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){V.splice(X,1);break t}}T=b.createElement(g),oi(T,g,f),b.head.appendChild(T);break;case"meta":if(V=P9("meta","content",b).get(g+(f.content||""))){for(X=0;X<V.length;X++)if(T=V[X],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){V.splice(X,1);break t}}T=b.createElement(g),oi(T,g,f),b.head.appendChild(T);break;default:throw Error(n(468,g))}T[Jr]=l,hr(T),g=T}l.stateNode=g}else D9(b,l.type,l.stateNode);else l.stateNode=M9(b,g,l.memoizedProps);else T!==g?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,g===null?D9(b,l.type,l.stateNode):M9(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&F4(l,l.memoizedProps,f.memoizedProps)}break;case 27:qi(u,l),Hi(l),g&512&&(Sa||f===null||Po(f,f.return)),f!==null&&g&4&&F4(l,l.memoizedProps,f.memoizedProps);break;case 5:if(qi(u,l),Hi(l),g&512&&(Sa||f===null||Po(f,f.return)),l.flags&32){b=l.stateNode;try{De(b,"")}catch(Ct){cn(l,l.return,Ct)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,F4(l,b,f!==null?f.memoizedProps:b)),g&1024&&(G4=!0);break;case 6:if(qi(u,l),Hi(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ct){cn(l,l.return,Ct)}}break;case 3:if(zy=null,b=uo,uo=$y(u.containerInfo),qi(u,l),uo=b,Hi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{J0(u.containerInfo)}catch(Ct){cn(l,l.return,Ct)}G4&&(G4=!1,DC(l));break;case 4:g=uo,uo=$y(l.stateNode.containerInfo),qi(u,l),Hi(l),uo=g;break;case 12:qi(u,l),Hi(l);break;case 31:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ny(l,g)));break;case 13:qi(u,l),Hi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ey=We()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ny(l,g)));break;case 22:b=l.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,je=_l,qe=Sa;if(_l=je||b,Sa=qe||de,qi(u,l),Sa=qe,_l=je,Hi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||de||_l||Sa||ud(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){de=f=u;try{if(T=de.stateNode,b)V=T.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{X=de.stateNode;var Qe=de.memoizedProps.style,Ie=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;X.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch(Ct){cn(de,de.return,Ct)}}}else if(u.tag===6){if(f===null){de=u;try{de.stateNode.nodeValue=b?"":de.memoizedProps}catch(Ct){cn(de,de.return,Ct)}}}else if(u.tag===18){if(f===null){de=u;try{var Le=de.stateNode;b?N9(Le,!0):N9(de.stateNode,!1)}catch(Ct){cn(de,de.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Ny(l,f))));break;case 19:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Ny(l,g)));break;case 30:break;case 21:break;default:qi(u,l),Hi(l)}}function Hi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(EC(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,T=q4(l);Ty(l,T,b);break;case 5:var V=f.stateNode;f.flags&32&&(De(V,""),f.flags&=-33);var X=q4(l);Ty(l,X,V);break;case 3:case 4:var de=f.stateNode.containerInfo,je=q4(l);H4(l,je,de);break;default:throw Error(n(161))}}catch(qe){cn(l,l.return,qe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function DC(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;DC(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Nl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)CC(l,u.alternate,u),u=u.sibling}function ud(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Pc(4,u,u.return),ud(u);break;case 1:Po(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&NC(u,u.return,f),ud(u);break;case 27:Ep(u.stateNode);case 26:case 5:Po(u,u.return),ud(u);break;case 22:u.memoizedState===null&&ud(u);break;case 30:ud(u);break;default:ud(u)}l=l.sibling}}function Al(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,T=u,V=T.flags;switch(T.tag){case 0:case 11:case 15:Al(b,T,f),yp(4,T);break;case 1:if(Al(b,T,f),g=T,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(je){cn(g,g.return,je)}if(g=T,b=g.updateQueue,b!==null){var X=g.stateNode;try{var de=b.shared.hiddenCallbacks;if(de!==null)for(b.shared.hiddenCallbacks=null,b=0;b<de.length;b++)fk(de[b],X)}catch(je){cn(g,g.return,je)}}f&&V&64&&TC(T),vp(T,T.return);break;case 27:jC(T);case 26:case 5:Al(b,T,f),f&&g===null&&V&4&&AC(T),vp(T,T.return);break;case 12:Al(b,T,f);break;case 31:Al(b,T,f),f&&V&4&&RC(b,T);break;case 13:Al(b,T,f),f&&V&4&&MC(b,T);break;case 22:T.memoizedState===null&&Al(b,T,f),vp(T,T.return);break;case 30:break;default:Al(b,T,f)}u=u.sibling}}function W4(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&ap(f))}function K4(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ap(l))}function ho(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)LC(l,u,f,g),u=u.sibling}function LC(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:ho(l,u,f,g),b&2048&&yp(9,u);break;case 1:ho(l,u,f,g);break;case 3:ho(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ap(l)));break;case 12:if(b&2048){ho(l,u,f,g),l=u.stateNode;try{var T=u.memoizedProps,V=T.id,X=T.onPostCommit;typeof X=="function"&&X(V,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(de){cn(u,u.return,de)}}else ho(l,u,f,g);break;case 31:ho(l,u,f,g);break;case 13:ho(l,u,f,g);break;case 23:break;case 22:T=u.stateNode,V=u.alternate,u.memoizedState!==null?T._visibility&2?ho(l,u,f,g):xp(l,u):T._visibility&2?ho(l,u,f,g):(T._visibility|=2,V0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&W4(V,u);break;case 24:ho(l,u,f,g),b&2048&&K4(u.alternate,u);break;default:ho(l,u,f,g)}}function V0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var T=l,V=u,X=f,de=g,je=V.flags;switch(V.tag){case 0:case 11:case 15:V0(T,V,X,de,b),yp(8,V);break;case 23:break;case 22:var qe=V.stateNode;V.memoizedState!==null?qe._visibility&2?V0(T,V,X,de,b):xp(T,V):(qe._visibility|=2,V0(T,V,X,de,b)),b&&je&2048&&W4(V.alternate,V);break;case 24:V0(T,V,X,de,b),b&&je&2048&&K4(V.alternate,V);break;default:V0(T,V,X,de,b)}u=u.sibling}}function xp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:xp(f,g),b&2048&&W4(g.alternate,g);break;case 24:xp(f,g),b&2048&&K4(g.alternate,g);break;default:xp(f,g)}u=u.sibling}}var bp=8192;function F0(l,u,f){if(l.subtreeFlags&bp)for(l=l.child;l!==null;)BC(l,u,f),l=l.sibling}function BC(l,u,f){switch(l.tag){case 26:F0(l,u,f),l.flags&bp&&l.memoizedState!==null&&lZ(f,uo,l.memoizedState,l.memoizedProps);break;case 5:F0(l,u,f);break;case 3:case 4:var g=uo;uo=$y(l.stateNode.containerInfo),F0(l,u,f),uo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=bp,bp=16777216,F0(l,u,f),bp=g):F0(l,u,f));break;default:F0(l,u,f)}}function $C(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function wp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Wa=g,zC(g,l)}$C(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)UC(l),l=l.sibling}function UC(l){switch(l.tag){case 0:case 11:case 15:wp(l),l.flags&2048&&Pc(9,l,l.return);break;case 3:wp(l);break;case 12:wp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Ay(l)):wp(l);break;default:wp(l)}}function Ay(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Wa=g,zC(g,l)}$C(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Pc(8,u,u.return),Ay(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,Ay(u));break;default:Ay(u)}l=l.sibling}}function zC(l,u){for(;Wa!==null;){var f=Wa;switch(f.tag){case 0:case 11:case 15:Pc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:ap(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Wa=g;else e:for(f=l;Wa!==null;){g=Wa;var b=g.sibling,T=g.return;if(OC(g),g===f){Wa=null;break e}if(b!==null){b.return=T,Wa=b;break e}Wa=T}}}var _Y={getCacheForType:function(l){var u=ii(xa),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return ii(xa).controller.signal}},TY=typeof WeakMap=="function"?WeakMap:Map,Qr=0,kn=null,Sr=null,Nr=0,ln=0,vs=null,Dc=!1,q0=!1,Q4=!1,El=0,ea=0,Lc=0,dd=0,X4=0,xs=0,H0=0,Sp=null,Gi=null,Y4=!1,Ey=0,VC=0,jy=1/0,ky=null,Bc=null,Ra=0,$c=null,G0=null,jl=0,Z4=0,J4=null,FC=null,_p=0,e5=null;function bs(){return(Qr&2)!==0&&Nr!==0?Nr&-Nr:H.T!==null?s5():mn()}function qC(){if(xs===0)if((Nr&536870912)===0||Ir){var l=xr;xr<<=1,(xr&3932160)===0&&(xr=262144),xs=l}else xs=536870912;return l=gs.current,l!==null&&(l.flags|=32),xs}function Wi(l,u,f){(l===kn&&(ln===2||ln===9)||l.cancelPendingCommit!==null)&&(W0(l,0),Uc(l,Nr,xs,!1)),fn(l,f),((Qr&2)===0||l!==kn)&&(l===kn&&((Qr&2)===0&&(dd|=f),ea===4&&Uc(l,Nr,xs,!1)),Do(l))}function HC(l,u,f){if((Qr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Br(l,u),b=g?EY(l,u):r5(l,u,!0),T=g;do{if(b===0){q0&&!g&&Uc(l,u,0,!1);break}else{if(f=l.current.alternate,T&&!NY(f)){b=r5(l,u,!1),T=!1;continue}if(b===2){if(T=u,l.errorRecoveryDisabledLanes&T)var V=0;else V=l.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var X=l;b=Sp;var de=X.current.memoizedState.isDehydrated;if(de&&(W0(X,V).flags|=256),V=r5(X,V,!1),V!==2){if(Q4&&!de){X.errorRecoveryDisabledLanes|=T,dd|=T,b=4;break e}T=Gi,Gi=b,T!==null&&(Gi===null?Gi=T:Gi.push.apply(Gi,T))}b=V}if(T=!1,b!==2)continue}}if(b===1){W0(l,0),Uc(l,u,0,!0);break}e:{switch(g=l,T=b,T){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Uc(g,u,xs,!Dc);break e;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=Ey+300-We(),10<b)){if(Uc(g,u,xs,!Dc),_t(g,0,!0)!==0)break e;jl=u,g.timeoutHandle=S9(GC.bind(null,g,f,Gi,ky,Y4,u,xs,dd,H0,Dc,T,"Throttled",-0,0),b);break e}GC(g,f,Gi,ky,Y4,u,xs,dd,H0,Dc,T,null,-0,0)}}break}while(!0);Do(l)}function GC(l,u,f,g,b,T,V,X,de,je,qe,Qe,Ie,Le){if(l.timeoutHandle=-1,Qe=u.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vn},BC(u,T,Qe);var Ct=(T&62914560)===T?Ey-We():(T&4194048)===T?VC-We():0;if(Ct=cZ(Qe,Ct),Ct!==null){jl=T,l.cancelPendingCommit=Ct(e9.bind(null,l,u,T,f,g,b,V,X,de,qe,Qe,null,Ie,Le)),Uc(l,T,V,!je);return}}e9(l,u,T,f,g,b,V,X,de)}function NY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],T=b.getSnapshot;b=b.value;try{if(!ps(T(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Uc(l,u,f,g){u&=~X4,u&=~dd,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var T=31-Ze(b),V=1<<T;g[T]=-1,b&=~V}f!==0&&ga(l,f,u)}function Cy(){return(Qr&6)===0?(Tp(0),!1):!0}function t5(){if(Sr!==null){if(ln===0)var l=Sr.return;else l=Sr,yl=rd=null,y4(l),L0=null,sp=0,l=Sr;for(;l!==null;)_C(l.alternate,l),l=l.return;Sr=null}}function W0(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,HY(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),jl=0,t5(),kn=l,Sr=f=ml(l.current,null),Nr=u,ln=0,vs=null,Dc=!1,q0=Br(l,u),Q4=!1,H0=xs=X4=dd=Lc=ea=0,Gi=Sp=null,Y4=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-Ze(g),T=1<<b;u|=l[b],g&=~T}return El=u,Y1(),f}function WC(l,u){dr=null,H.H=pp,u===D0||u===iy?(u=ck(),ln=3):u===i4?(u=ck(),ln=4):ln=u===R4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,vs=u,Sr===null&&(ea=1,xy(l,Ds(u,l.current)))}function KC(){var l=gs.current;return l===null?!0:(Nr&4194048)===Nr?Us===null:(Nr&62914560)===Nr||(Nr&536870912)!==0?l===Us:!1}function QC(){var l=H.H;return H.H=pp,l===null?pp:l}function XC(){var l=H.A;return H.A=_Y,l}function Oy(){ea=4,Dc||(Nr&4194048)!==Nr&&gs.current!==null||(q0=!0),(Lc&134217727)===0&&(dd&134217727)===0||kn===null||Uc(kn,Nr,xs,!1)}function r5(l,u,f){var g=Qr;Qr|=2;var b=QC(),T=XC();(kn!==l||Nr!==u)&&(ky=null,W0(l,u)),u=!1;var V=ea;e:do try{if(ln!==0&&Sr!==null){var X=Sr,de=vs;switch(ln){case 8:t5(),V=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(u=!0);var je=ln;if(ln=0,vs=null,K0(l,X,de,je),f&&q0){V=0;break e}break;default:je=ln,ln=0,vs=null,K0(l,X,de,je)}}AY(),V=ea;break}catch(qe){WC(l,qe)}while(!0);return u&&l.shellSuspendCounter++,yl=rd=null,Qr=g,H.H=b,H.A=T,Sr===null&&(kn=null,Nr=0,Y1()),V}function AY(){for(;Sr!==null;)YC(Sr)}function EY(l,u){var f=Qr;Qr|=2;var g=QC(),b=XC();kn!==l||Nr!==u?(ky=null,jy=We()+500,W0(l,u)):q0=Br(l,u);e:do try{if(ln!==0&&Sr!==null){u=Sr;var T=vs;t:switch(ln){case 1:ln=0,vs=null,K0(l,u,T,1);break;case 2:case 9:if(ok(T)){ln=0,vs=null,ZC(u);break}u=function(){ln!==2&&ln!==9||kn!==l||(ln=7),Do(l)},T.then(u,u);break e;case 3:ln=7;break e;case 4:ln=5;break e;case 7:ok(T)?(ln=0,vs=null,ZC(u)):(ln=0,vs=null,K0(l,u,T,7));break;case 5:var V=null;switch(Sr.tag){case 26:V=Sr.memoizedState;case 5:case 27:var X=Sr;if(V?L9(V):X.stateNode.complete){ln=0,vs=null;var de=X.sibling;if(de!==null)Sr=de;else{var je=X.return;je!==null?(Sr=je,Iy(je)):Sr=null}break t}}ln=0,vs=null,K0(l,u,T,5);break;case 6:ln=0,vs=null,K0(l,u,T,6);break;case 8:t5(),ea=6;break e;default:throw Error(n(462))}}jY();break}catch(qe){WC(l,qe)}while(!0);return yl=rd=null,H.H=g,H.A=b,Qr=f,Sr!==null?0:(kn=null,Nr=0,Y1(),ea)}function jY(){for(;Sr!==null&&!Fe();)YC(Sr)}function YC(l){var u=wC(l.alternate,l,El);l.memoizedProps=l.pendingProps,u===null?Iy(l):Sr=u}function ZC(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=mC(f,u,u.pendingProps,u.type,void 0,Nr);break;case 11:u=mC(f,u,u.pendingProps,u.type.render,u.ref,Nr);break;case 5:y4(u);default:_C(f,u),u=Sr=Xj(u,El),u=wC(f,u,El)}l.memoizedProps=l.pendingProps,u===null?Iy(l):Sr=u}function K0(l,u,f,g){yl=rd=null,y4(u),L0=null,sp=0;var b=u.return;try{if(gY(l,b,u,f,Nr)){ea=1,xy(l,Ds(f,l.current)),Sr=null;return}}catch(T){if(b!==null)throw Sr=b,T;ea=1,xy(l,Ds(f,l.current)),Sr=null;return}u.flags&32768?(Ir||g===1?l=!0:q0||(Nr&536870912)!==0?l=!1:(Dc=l=!0,(g===2||g===9||g===3||g===6)&&(g=gs.current,g!==null&&g.tag===13&&(g.flags|=16384))),JC(u,l)):Iy(u)}function Iy(l){var u=l;do{if((u.flags&32768)!==0){JC(u,Dc);return}l=u.return;var f=xY(u.alternate,u,El);if(f!==null){Sr=f;return}if(u=u.sibling,u!==null){Sr=u;return}Sr=u=l}while(u!==null);ea===0&&(ea=5)}function JC(l,u){do{var f=bY(l.alternate,l);if(f!==null){f.flags&=32767,Sr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Sr=l;return}Sr=l=f}while(l!==null);ea=6,Sr=null}function e9(l,u,f,g,b,T,V,X,de){l.cancelPendingCommit=null;do Ry();while(Ra!==0);if((Qr&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(T=u.lanes|u.childLanes,T|=qw,cr(l,f,T,V,X,de),l===kn&&(Sr=kn=null,Nr=0),G0=u,$c=l,jl=f,Z4=T,J4=b,FC=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,IY(Ft,function(){return i9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=J.p,J.p=2,V=Qr,Qr|=4;try{wY(l,u,f)}finally{Qr=V,J.p=b,H.T=g}}Ra=1,t9(),r9(),n9()}}function t9(){if(Ra===1){Ra=0;var l=$c,u=G0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=J.p;J.p=2;var b=Qr;Qr|=4;try{PC(u,l);var T=p5,V=zj(l.containerInfo),X=T.focusedElem,de=T.selectionRange;if(V!==X&&X&&X.ownerDocument&&Uj(X.ownerDocument.documentElement,X)){if(de!==null&&$w(X)){var je=de.start,qe=de.end;if(qe===void 0&&(qe=je),"selectionStart"in X)X.selectionStart=je,X.selectionEnd=Math.min(qe,X.value.length);else{var Qe=X.ownerDocument||document,Ie=Qe&&Qe.defaultView||window;if(Ie.getSelection){var Le=Ie.getSelection(),Ct=X.textContent.length,Wt=Math.min(de.start,Ct),wn=de.end===void 0?Wt:Math.min(de.end,Ct);!Le.extend&&Wt>wn&&(V=wn,wn=Wt,Wt=V);var Se=$j(X,Wt),ge=$j(X,wn);if(Se&&ge&&(Le.rangeCount!==1||Le.anchorNode!==Se.node||Le.anchorOffset!==Se.offset||Le.focusNode!==ge.node||Le.focusOffset!==ge.offset)){var Ae=Qe.createRange();Ae.setStart(Se.node,Se.offset),Le.removeAllRanges(),Wt>wn?(Le.addRange(Ae),Le.extend(ge.node,ge.offset)):(Ae.setEnd(ge.node,ge.offset),Le.addRange(Ae))}}}}for(Qe=[],Le=X;Le=Le.parentNode;)Le.nodeType===1&&Qe.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<Qe.length;X++){var Ke=Qe[X];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}Hy=!!f5,p5=f5=null}finally{Qr=b,J.p=g,H.T=f}}l.current=u,Ra=2}}function r9(){if(Ra===2){Ra=0;var l=$c,u=G0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=J.p;J.p=2;var b=Qr;Qr|=4;try{CC(l,u.alternate,u)}finally{Qr=b,J.p=g,H.T=f}}Ra=3}}function n9(){if(Ra===4||Ra===3){Ra=0,ce();var l=$c,u=G0,f=jl,g=FC;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ra=5:(Ra=0,G0=$c=null,a9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Bc=null),Tr(f),u=u.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Et,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=J.p,J.p=2,H.T=null;try{for(var T=l.onRecoverableError,V=0;V<g.length;V++){var X=g[V];T(X.value,{componentStack:X.stack})}}finally{H.T=u,J.p=b}}(jl&3)!==0&&Ry(),Do(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===e5?_p++:(_p=0,e5=l):_p=0,Tp(0)}}function a9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,ap(u)))}function Ry(){return t9(),r9(),n9(),i9()}function i9(){if(Ra!==5)return!1;var l=$c,u=Z4;Z4=0;var f=Tr(jl),g=H.T,b=J.p;try{J.p=32>f?32:f,H.T=null,f=J4,J4=null;var T=$c,V=jl;if(Ra=0,G0=$c=null,jl=0,(Qr&6)!==0)throw Error(n(331));var X=Qr;if(Qr|=4,UC(T.current),LC(T,T.current,V,f),Qr=X,Tp(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Et,T)}catch{}return!0}finally{J.p=b,H.T=g,a9(l,u)}}function s9(l,u,f){u=Ds(f,u),u=I4(l.stateNode,u,2),l=Ic(l,u,2),l!==null&&(fn(l,2),Do(l))}function cn(l,u,f){if(l.tag===3)s9(l,l,f);else for(;u!==null;){if(u.tag===3){s9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Bc===null||!Bc.has(g))){l=Ds(f,l),f=oC(2),g=Ic(u,f,2),g!==null&&(lC(f,g,u,l),fn(g,2),Do(g));break}}u=u.return}}function n5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new TY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(Q4=!0,b.add(f),l=kY.bind(null,l,u,f),u.then(l,l))}function kY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,kn===l&&(Nr&f)===f&&(ea===4||ea===3&&(Nr&62914560)===Nr&&300>We()-Ey?(Qr&2)===0&&W0(l,0):X4|=f,H0===Nr&&(H0=0)),Do(l)}function o9(l,u){u===0&&(u=Wr()),l=Ju(l,u),l!==null&&(fn(l,u),Do(l))}function CY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),o9(l,f)}function OY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),o9(l,f)}function IY(l,u){return bt(l,u)}var My=null,Q0=null,a5=!1,Py=!1,i5=!1,zc=0;function Do(l){l!==Q0&&l.next===null&&(Q0===null?My=Q0=l:Q0=Q0.next=l),Py=!0,a5||(a5=!0,MY())}function Tp(l,u){if(!i5&&Py){i5=!0;do for(var f=!1,g=My;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var T=0;else{var V=g.suspendedLanes,X=g.pingedLanes;T=(1<<31-Ze(42|l)+1)-1,T&=b&~(V&~X),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,d9(g,T))}else T=Nr,T=_t(g,g===kn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Br(g,T)||(f=!0,d9(g,T));g=g.next}while(f);i5=!1}}function RY(){l9()}function l9(){Py=a5=!1;var l=0;zc!==0&&qY()&&(l=zc);for(var u=We(),f=null,g=My;g!==null;){var b=g.next,T=c9(g,u);T===0?(g.next=null,f===null?My=b:f.next=b,b===null&&(Q0=f)):(f=g,(l!==0||(T&3)!==0)&&(Py=!0)),g=b}Ra!==0&&Ra!==5||Tp(l),zc!==0&&(zc=0)}function c9(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var V=31-Ze(T),X=1<<V,de=b[V];de===-1?((X&f)===0||(X&g)!==0)&&(b[V]=sn(X,u)):de<=u&&(l.expiredLanes|=X),T&=~X}if(u=kn,f=Nr,f=_t(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(ln===2||ln===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&St(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Br(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&St(g),Tr(f)){case 2:case 8:f=dt;break;case 32:f=Ft;break;case 268435456:f=kr;break;default:f=Ft}return g=u9.bind(null,l),f=bt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&St(g),l.callbackPriority=2,l.callbackNode=null,2}function u9(l,u){if(Ra!==0&&Ra!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Ry()&&l.callbackNode!==f)return null;var g=Nr;return g=_t(l,l===kn?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(HC(l,g,u),c9(l,We()),l.callbackNode!=null&&l.callbackNode===f?u9.bind(null,l):null)}function d9(l,u){if(Ry())return null;HC(l,u,!0)}function MY(){GY(function(){(Qr&6)!==0?bt(ut,RY):l9()})}function s5(){if(zc===0){var l=M0;l===0&&(l=hn,hn<<=1,(hn&261888)===0&&(hn=256)),zc=l}return zc}function h9(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:jn(""+l)}function f9(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function PY(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var T=h9((b[gn]||null).action),V=g.submitter;V&&(u=(u=V[gn]||null)?h9(u.formAction):V.getAttribute("formAction"),u!==null&&(T=u,V=null));var X=new Gu("action","action",null,g,b);l.push({event:X,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(zc!==0){var de=V?f9(b,V):new FormData(b);A4(f,{pending:!0,data:de,method:b.method,action:T},null,de)}}else typeof T=="function"&&(X.preventDefault(),de=V?f9(b,V):new FormData(b),A4(f,{pending:!0,data:de,method:b.method,action:T},T,de))},currentTarget:b}]})}}for(var o5=0;o5<Fw.length;o5++){var l5=Fw[o5],DY=l5.toLowerCase(),LY=l5[0].toUpperCase()+l5.slice(1);co(DY,"on"+LY)}co(qj,"onAnimationEnd"),co(Hj,"onAnimationIteration"),co(Gj,"onAnimationStart"),co("dblclick","onDoubleClick"),co("focusin","onFocus"),co("focusout","onBlur"),co(JX,"onTransitionRun"),co(eY,"onTransitionStart"),co(tY,"onTransitionCancel"),co(Wj,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Np="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Np));function p9(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var T=void 0;if(u)for(var V=g.length-1;0<=V;V--){var X=g[V],de=X.instance,je=X.currentTarget;if(X=X.listener,de!==T&&b.isPropagationStopped())break e;T=X,b.currentTarget=je;try{T(b)}catch(qe){X1(qe)}b.currentTarget=null,T=de}else for(V=0;V<g.length;V++){if(X=g[V],de=X.instance,je=X.currentTarget,X=X.listener,de!==T&&b.isPropagationStopped())break e;T=X,b.currentTarget=je;try{T(b)}catch(qe){X1(qe)}b.currentTarget=null,T=de}}}}function _r(l,u){var f=u[ni];f===void 0&&(f=u[ni]=new Set);var g=l+"__bubble";f.has(g)||(m9(u,l,2,!1),f.add(g))}function c5(l,u,f){var g=0;u&&(g|=4),m9(f,l,g,u)}var Dy="_reactListening"+Math.random().toString(36).slice(2);function u5(l){if(!l[Dy]){l[Dy]=!0,on.forEach(function(f){f!=="selectionchange"&&(BY.has(f)||c5(f,!1,l),c5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Dy]||(u[Dy]=!0,c5("selectionchange",!1,u))}}function m9(l,u,f,g){switch(q9(u)){case 2:var b=hZ;break;case 8:b=fZ;break;default:b=N5}f=b.bind(null,u,f,l),b=void 0,!Wf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function d5(l,u,f,g,b){var T=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var X=g.stateNode.containerInfo;if(X===b)break;if(V===4)for(V=g.return;V!==null;){var de=V.tag;if((de===3||de===4)&&V.stateNode.containerInfo===b)return;V=V.return}for(;X!==null;){if(V=fe(X),V===null)return;if(de=V.tag,de===5||de===6||de===26||de===27){g=T=V;continue e}X=X.parentNode}}g=g.return}M1(function(){var je=T,qe=Or(f),Qe=[];e:{var Ie=Kj.get(l);if(Ie!==void 0){var Le=Gu,Ct=l;switch(l){case"keypress":if(Hu(f)===0)break e;case"keydown":case"keyup":Le=F1;break;case"focusin":Ct="focus",Le=Sc;break;case"focusout":Ct="blur",Le=Sc;break;case"beforeblur":case"afterblur":Le=Sc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=D1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=L1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=H1;break;case qj:case Hj:case Gj:Le=T0;break;case Wj:Le=N0;break;case"scroll":case"scrollend":Le=P1;break;case"wheel":Le=W1;break;case"copy":case"cut":case"paste":Le=$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Zf;break;case"toggle":case"beforetoggle":Le=Tc}var Wt=(u&4)!==0,wn=!Wt&&(l==="scroll"||l==="scrollend"),Se=Wt?Ie!==null?Ie+"Capture":null:Ie;Wt=[];for(var ge=je,Ae;ge!==null;){var Ke=ge;if(Ae=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ae===null||Se===null||(Ke=zi(ge,Se),Ke!=null&&Wt.push(Ap(ge,Ke,Ae))),wn)break;ge=ge.return}0<Wt.length&&(Ie=new Le(Ie,Ct,null,f,qe),Qe.push({event:Ie,listeners:Wt}))}}if((u&7)===0){e:{if(Ie=l==="mouseover"||l==="pointerover",Le=l==="mouseout"||l==="pointerout",Ie&&f!==Co&&(Ct=f.relatedTarget||f.fromElement)&&(fe(Ct)||Ct[An]))break e;if((Le||Ie)&&(Ie=qe.window===qe?qe:(Ie=qe.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,Le?(Ct=f.relatedTarget||f.toElement,Le=je,Ct=Ct?fe(Ct):null,Ct!==null&&(wn=i(Ct),Wt=Ct.tag,Ct!==wn||Wt!==5&&Wt!==27&&Wt!==6)&&(Ct=null)):(Le=null,Ct=je),Le!==Ct)){if(Wt=D1,Ke="onMouseLeave",Se="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(Wt=Zf,Ke="onPointerLeave",Se="onPointerEnter",ge="pointer"),wn=Le==null?Ie:ht(Le),Ae=Ct==null?Ie:ht(Ct),Ie=new Wt(Ke,ge+"leave",Le,f,qe),Ie.target=wn,Ie.relatedTarget=Ae,Ke=null,fe(qe)===je&&(Wt=new Wt(Se,ge+"enter",Ct,f,qe),Wt.target=Ae,Wt.relatedTarget=wn,Ke=Wt),wn=Ke,Le&&Ct)t:{for(Wt=$Y,Se=Le,ge=Ct,Ae=0,Ke=Se;Ke;Ke=Wt(Ke))Ae++;Ke=0;for(var zt=ge;zt;zt=Wt(zt))Ke++;for(;0<Ae-Ke;)Se=Wt(Se),Ae--;for(;0<Ke-Ae;)ge=Wt(ge),Ke--;for(;Ae--;){if(Se===ge||ge!==null&&Se===ge.alternate){Wt=Se;break t}Se=Wt(Se),ge=Wt(ge)}Wt=null}else Wt=null;Le!==null&&g9(Qe,Ie,Le,Wt,!1),Ct!==null&&wn!==null&&g9(Qe,wn,Ct,Wt,!0)}}e:{if(Ie=je?ht(je):window,Le=Ie.nodeName&&Ie.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Ie.type==="file")var Ur=Rj;else if(Vi(Ie))if(Mj)Ur=XX;else{Ur=KX;var Mt=WX}else Le=Ie.nodeName,!Le||Le.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?je&&En(je.elementType)&&(Ur=Rj):Ur=QX;if(Ur&&(Ur=Ur(l,je))){Xu(Qe,Ur,f,qe);break e}Mt&&Mt(l,Ie,je),l==="focusout"&&je&&Ie.type==="number"&&je.memoizedProps.value!=null&&en(Ie,"number",Ie.value)}switch(Mt=je?ht(je):window,l){case"focusin":(Vi(Mt)||Mt.contentEditable==="true")&&(A0=Mt,Uw=je,tp=null);break;case"focusout":tp=Uw=A0=null;break;case"mousedown":zw=!0;break;case"contextmenu":case"mouseup":case"dragend":zw=!1,Vj(Qe,f,qe);break;case"selectionchange":if(ZX)break;case"keydown":case"keyup":Vj(Qe,f,qe)}var fr;if(M)e:{switch(l){case"compositionstart":var Ar="onCompositionStart";break e;case"compositionend":Ar="onCompositionEnd";break e;case"compositionupdate":Ar="onCompositionUpdate";break e}Ar=void 0}else yr?tn(l,f)&&(Ar="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Ar="onCompositionStart");Ar&&(_e&&f.locale!=="ko"&&(yr||Ar!=="onCompositionStart"?Ar==="onCompositionEnd"&&yr&&(fr=vc()):(fs=qe,S0="value"in fs?fs.value:fs.textContent,yr=!0)),Mt=Ly(je,Ar),0<Mt.length&&(Ar=new Qf(Ar,l,null,f,qe),Qe.push({event:Ar,listeners:Mt}),fr?Ar.data=fr:(fr=va(f),fr!==null&&(Ar.data=fr)))),(fr=ee?Ha(l,f):Ga(l,f))&&(Ar=Ly(je,"onBeforeInput"),0<Ar.length&&(Mt=new Qf("onBeforeInput","beforeinput",null,f,qe),Qe.push({event:Mt,listeners:Ar}),Mt.data=fr)),PY(Qe,l,je,f,qe)}p9(Qe,u)})}function Ap(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Ly(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,T=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||T===null||(b=zi(l,f),b!=null&&g.unshift(Ap(l,b,T)),b=zi(l,u),b!=null&&g.push(Ap(l,b,T))),l.tag===3)return g;l=l.return}return[]}function $Y(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function g9(l,u,f,g,b){for(var T=u._reactName,V=[];f!==null&&f!==g;){var X=f,de=X.alternate,je=X.stateNode;if(X=X.tag,de!==null&&de===g)break;X!==5&&X!==26&&X!==27||je===null||(de=je,b?(je=zi(f,T),je!=null&&V.unshift(Ap(f,je,de))):b||(je=zi(f,T),je!=null&&V.push(Ap(f,je,de)))),f=f.return}V.length!==0&&l.push({event:u,listeners:V})}var UY=/\r\n?/g,zY=/\u0000|\uFFFD/g;function y9(l){return(typeof l=="string"?l:""+l).replace(UY,`
`).replace(zY,"")}function v9(l,u){return u=y9(u),y9(l)===u}function bn(l,u,f,g,b,T){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||De(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&De(l,""+g);break;case"className":ds(l,"class",g);break;case"tabIndex":ds(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ds(l,f,g);break;case"style":Qt(l,g,T);break;case"data":if(u!=="object"){ds(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=jn(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(u!=="input"&&bn(l,u,"name",b.name,b,null),bn(l,u,"formEncType",b.formEncType,b,null),bn(l,u,"formMethod",b.formMethod,b,null),bn(l,u,"formTarget",b.formTarget,b,null)):(bn(l,u,"encType",b.encType,b,null),bn(l,u,"method",b.method,b,null),bn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=jn(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=vn);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=jn(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":_r("beforetoggle",l),_r("toggle",l),us(l,"popover",g);break;case"xlinkActuate":Oa(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Oa(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Oa(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Oa(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Oa(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Oa(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Oa(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Oa(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Oa(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":us(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ia.get(f)||f,us(l,f,g))}}function h5(l,u,f,g,b,T){switch(f){case"style":Qt(l,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?De(l,g):(typeof g=="number"||typeof g=="bigint")&&De(l,""+g);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"onClick":g!=null&&(l.onclick=vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),T=l[gn]||null,T=T!=null?T[f]:null,typeof T=="function"&&l.removeEventListener(u,T,b),typeof g=="function")){typeof T!="function"&&T!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):us(l,f,g)}}}function oi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_r("error",l),_r("load",l);var g=!1,b=!1,T;for(T in f)if(f.hasOwnProperty(T)){var V=f[T];if(V!=null)switch(T){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:bn(l,u,T,V,f,null)}}b&&bn(l,u,"srcSet",f.srcSet,f,null),g&&bn(l,u,"src",f.src,f,null);return;case"input":_r("invalid",l);var X=T=V=b=null,de=null,je=null;for(g in f)if(f.hasOwnProperty(g)){var qe=f[g];if(qe!=null)switch(g){case"name":b=qe;break;case"type":V=qe;break;case"checked":de=qe;break;case"defaultChecked":je=qe;break;case"value":T=qe;break;case"defaultValue":X=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,u));break;default:bn(l,u,g,qe,f,null)}}wr(l,T,X,de,je,V,b,!1);return;case"select":_r("invalid",l),g=V=T=null;for(b in f)if(f.hasOwnProperty(b)&&(X=f[b],X!=null))switch(b){case"value":T=X;break;case"defaultValue":V=X;break;case"multiple":g=X;default:bn(l,u,b,X,f,null)}u=T,f=V,l.multiple=!!g,u!=null?oe(l,!!g,u,!1):f!=null&&oe(l,!!g,f,!0);return;case"textarea":_r("invalid",l),T=b=g=null;for(V in f)if(f.hasOwnProperty(V)&&(X=f[V],X!=null))switch(V){case"value":g=X;break;case"defaultValue":b=X;break;case"children":T=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:bn(l,u,V,X,f,null)}$e(l,g,b,T);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(g=f[de],g!=null))switch(de){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:bn(l,u,de,g,f,null)}return;case"dialog":_r("beforetoggle",l),_r("toggle",l),_r("cancel",l),_r("close",l);break;case"iframe":case"object":_r("load",l);break;case"video":case"audio":for(g=0;g<Np.length;g++)_r(Np[g],l);break;case"image":_r("error",l),_r("load",l);break;case"details":_r("toggle",l);break;case"embed":case"source":case"link":_r("error",l),_r("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(je in f)if(f.hasOwnProperty(je)&&(g=f[je],g!=null))switch(je){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:bn(l,u,je,g,f,null)}return;default:if(En(u)){for(qe in f)f.hasOwnProperty(qe)&&(g=f[qe],g!==void 0&&h5(l,u,qe,g,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(g=f[X],g!=null&&bn(l,u,X,g,f,null))}function VY(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,T=null,V=null,X=null,de=null,je=null,qe=null;for(Le in f){var Qe=f[Le];if(f.hasOwnProperty(Le)&&Qe!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":de=Qe;default:g.hasOwnProperty(Le)||bn(l,u,Le,null,g,Qe)}}for(var Ie in g){var Le=g[Ie];if(Qe=f[Ie],g.hasOwnProperty(Ie)&&(Le!=null||Qe!=null))switch(Ie){case"type":T=Le;break;case"name":b=Le;break;case"checked":je=Le;break;case"defaultChecked":qe=Le;break;case"value":V=Le;break;case"defaultValue":X=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,u));break;default:Le!==Qe&&bn(l,u,Ie,Le,g,Qe)}}Yt(l,V,X,de,je,qe,T,b);return;case"select":Le=V=X=Ie=null;for(T in f)if(de=f[T],f.hasOwnProperty(T)&&de!=null)switch(T){case"value":break;case"multiple":Le=de;default:g.hasOwnProperty(T)||bn(l,u,T,null,g,de)}for(b in g)if(T=g[b],de=f[b],g.hasOwnProperty(b)&&(T!=null||de!=null))switch(b){case"value":Ie=T;break;case"defaultValue":X=T;break;case"multiple":V=T;default:T!==de&&bn(l,u,b,T,g,de)}u=X,f=V,g=Le,Ie!=null?oe(l,!!f,Ie,!1):!!g!=!!f&&(u!=null?oe(l,!!f,u,!0):oe(l,!!f,f?[]:"",!1));return;case"textarea":Le=Ie=null;for(X in f)if(b=f[X],f.hasOwnProperty(X)&&b!=null&&!g.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:bn(l,u,X,null,g,b)}for(V in g)if(b=g[V],T=f[V],g.hasOwnProperty(V)&&(b!=null||T!=null))switch(V){case"value":Ie=b;break;case"defaultValue":Le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==T&&bn(l,u,V,b,g,T)}ve(l,Ie,Le);return;case"option":for(var Ct in f)if(Ie=f[Ct],f.hasOwnProperty(Ct)&&Ie!=null&&!g.hasOwnProperty(Ct))switch(Ct){case"selected":l.selected=!1;break;default:bn(l,u,Ct,null,g,Ie)}for(de in g)if(Ie=g[de],Le=f[de],g.hasOwnProperty(de)&&Ie!==Le&&(Ie!=null||Le!=null))switch(de){case"selected":l.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol";break;default:bn(l,u,de,Ie,g,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in f)Ie=f[Wt],f.hasOwnProperty(Wt)&&Ie!=null&&!g.hasOwnProperty(Wt)&&bn(l,u,Wt,null,g,Ie);for(je in g)if(Ie=g[je],Le=f[je],g.hasOwnProperty(je)&&Ie!==Le&&(Ie!=null||Le!=null))switch(je){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,u));break;default:bn(l,u,je,Ie,g,Le)}return;default:if(En(u)){for(var wn in f)Ie=f[wn],f.hasOwnProperty(wn)&&Ie!==void 0&&!g.hasOwnProperty(wn)&&h5(l,u,wn,void 0,g,Ie);for(qe in g)Ie=g[qe],Le=f[qe],!g.hasOwnProperty(qe)||Ie===Le||Ie===void 0&&Le===void 0||h5(l,u,qe,Ie,g,Le);return}}for(var Se in f)Ie=f[Se],f.hasOwnProperty(Se)&&Ie!=null&&!g.hasOwnProperty(Se)&&bn(l,u,Se,null,g,Ie);for(Qe in g)Ie=g[Qe],Le=f[Qe],!g.hasOwnProperty(Qe)||Ie===Le||Ie==null&&Le==null||bn(l,u,Qe,Ie,g,Le)}function x9(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],T=b.transferSize,V=b.initiatorType,X=b.duration;if(T&&X&&x9(V)){for(V=0,X=b.responseEnd,g+=1;g<f.length;g++){var de=f[g],je=de.startTime;if(je>X)break;var qe=de.transferSize,Qe=de.initiatorType;qe&&x9(Qe)&&(de=de.responseEnd,V+=qe*(de<X?1:(X-je)/(de-je)))}if(--g,u+=8*(T+V)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var f5=null,p5=null;function By(l){return l.nodeType===9?l:l.ownerDocument}function b9(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w9(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function m5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var g5=null;function qY(){var l=window.event;return l&&l.type==="popstate"?l===g5?!1:(g5=l,!0):(g5=null,!1)}var S9=typeof setTimeout=="function"?setTimeout:void 0,HY=typeof clearTimeout=="function"?clearTimeout:void 0,_9=typeof Promise=="function"?Promise:void 0,GY=typeof queueMicrotask=="function"?queueMicrotask:typeof _9<"u"?function(l){return _9.resolve(null).then(l).catch(WY)}:S9;function WY(l){setTimeout(function(){throw l})}function Vc(l){return l==="head"}function T9(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),J0(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Ep(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Ep(f);for(var T=f.firstChild;T;){var V=T.nextSibling,X=T.nodeName;T[gi]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&T.rel.toLowerCase()==="stylesheet"||f.removeChild(T),T=V}}else f==="body"&&Ep(l.ownerDocument.body);f=b}while(f);J0(u)}function N9(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function y5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":y5(f),Tt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function KY(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[gi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(T=l.getAttribute("rel"),T==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(T!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(T=l.getAttribute("src"),(T!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&T&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var T=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===T)return l}else return l;if(l=zs(l.nextSibling),l===null)break}return null}function QY(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=zs(l.nextSibling),l===null))return null;return l}function A9(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=zs(l.nextSibling),l===null))return null;return l}function v5(l){return l.data==="$?"||l.data==="$~"}function x5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function XY(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function zs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var b5=null;function E9(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return zs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function j9(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function k9(l,u,f){switch(u=By(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Ep(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Tt(l)}var Vs=new Map,C9=new Set;function $y(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var kl=J.d;J.d={f:YY,r:ZY,D:JY,C:eZ,L:tZ,m:rZ,X:aZ,S:nZ,M:iZ};function YY(){var l=kl.f(),u=Cy();return l||u}function ZY(l){var u=Je(l);u!==null&&u.tag===5&&u.type==="form"?Wk(u):kl.r(l)}var X0=typeof document>"u"?null:document;function O9(l,u,f){var g=X0;if(g&&typeof u=="string"&&u){var b=At(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),C9.has(b)||(C9.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),oi(u,"link",l),hr(u),g.head.appendChild(u)))}}function JY(l){kl.D(l),O9("dns-prefetch",l,null)}function eZ(l,u){kl.C(l,u),O9("preconnect",l,u)}function tZ(l,u,f){kl.L(l,u,f);var g=X0;if(g&&l&&u){var b='link[rel="preload"][as="'+At(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+At(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+At(f.imageSizes)+'"]')):b+='[href="'+At(l)+'"]';var T=b;switch(u){case"style":T=Y0(l);break;case"script":T=Z0(l)}Vs.has(T)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Vs.set(T,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(jp(T))||u==="script"&&g.querySelector(kp(T))||(u=g.createElement("link"),oi(u,"link",l),hr(u),g.head.appendChild(u)))}}function rZ(l,u){kl.m(l,u);var f=X0;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+At(g)+'"][href="'+At(l)+'"]',T=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Z0(l)}if(!Vs.has(T)&&(l=m({rel:"modulepreload",href:l},u),Vs.set(T,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(kp(T)))return}g=f.createElement("link"),oi(g,"link",l),hr(g),f.head.appendChild(g)}}}function nZ(l,u,f){kl.S(l,u,f);var g=X0;if(g&&l){var b=Xt(g).hoistableStyles,T=Y0(l);u=u||"default";var V=b.get(T);if(!V){var X={loading:0,preload:null};if(V=g.querySelector(jp(T)))X.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Vs.get(T))&&w5(l,f);var de=V=g.createElement("link");hr(de),oi(de,"link",l),de._p=new Promise(function(je,qe){de.onload=je,de.onerror=qe}),de.addEventListener("load",function(){X.loading|=1}),de.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Uy(V,u,g)}V={type:"stylesheet",instance:V,count:1,state:X},b.set(T,V)}}}function aZ(l,u){kl.X(l,u);var f=X0;if(f&&l){var g=Xt(f).hoistableScripts,b=Z0(l),T=g.get(b);T||(T=f.querySelector(kp(b)),T||(l=m({src:l,async:!0},u),(u=Vs.get(b))&&S5(l,u),T=f.createElement("script"),hr(T),oi(T,"link",l),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(b,T))}}function iZ(l,u){kl.M(l,u);var f=X0;if(f&&l){var g=Xt(f).hoistableScripts,b=Z0(l),T=g.get(b);T||(T=f.querySelector(kp(b)),T||(l=m({src:l,async:!0,type:"module"},u),(u=Vs.get(b))&&S5(l,u),T=f.createElement("script"),hr(T),oi(T,"link",l),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(b,T))}}function I9(l,u,f,g){var b=(b=Ue.current)?$y(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=Y0(f.href),f=Xt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=Y0(f.href);var T=Xt(b).hoistableStyles,V=T.get(l);if(V||(b=b.ownerDocument||b,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(l,V),(T=b.querySelector(jp(l)))&&!T._p&&(V.instance=T,V.state.loading=5),Vs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Vs.set(l,f),T||sZ(b,l,f,V.state))),u&&g===null)throw Error(n(528,""));return V}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Z0(f),f=Xt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function Y0(l){return'href="'+At(l)+'"'}function jp(l){return'link[rel="stylesheet"]['+l+"]"}function R9(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function sZ(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),oi(u,"link",f),hr(u),l.head.appendChild(u))}function Z0(l){return'[src="'+At(l)+'"]'}function kp(l){return"script[async]"+l}function M9(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+At(f.href)+'"]');if(g)return u.instance=g,hr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),hr(g),oi(g,"style",b),Uy(g,f.precedence,l),u.instance=g;case"stylesheet":b=Y0(f.href);var T=l.querySelector(jp(b));if(T)return u.state.loading|=4,u.instance=T,hr(T),T;g=R9(f),(b=Vs.get(b))&&w5(g,b),T=(l.ownerDocument||l).createElement("link"),hr(T);var V=T;return V._p=new Promise(function(X,de){V.onload=X,V.onerror=de}),oi(T,"link",g),u.state.loading|=4,Uy(T,f.precedence,l),u.instance=T;case"script":return T=Z0(f.src),(b=l.querySelector(kp(T)))?(u.instance=b,hr(b),b):(g=f,(b=Vs.get(T))&&(g=m({},f),S5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),hr(b),oi(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Uy(g,f.precedence,l));return u.instance}function Uy(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,T=b,V=0;V<g.length;V++){var X=g[V];if(X.dataset.precedence===u)T=X;else if(T!==b)break}T?T.parentNode.insertBefore(l,T.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function w5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function S5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var zy=null;function P9(l,u,f){if(zy===null){var g=new Map,b=zy=new Map;b.set(f,g)}else b=zy,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var T=f[b];if(!(T[gi]||T[Jr]||l==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var V=T.getAttribute(u)||"";V=l+V;var X=g.get(V);X?X.push(T):g.set(V,[T])}}return g}function D9(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function oZ(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function L9(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function lZ(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=Y0(g.href),T=u.querySelector(jp(b));if(T){u=T._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=Vy.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=T,hr(T);return}T=u.ownerDocument||u,g=R9(g),(b=Vs.get(b))&&w5(g,b),T=T.createElement("link"),hr(T);var V=T;V._p=new Promise(function(X,de){V.onload=X,V.onerror=de}),oi(T,"link",g),f.instance=T}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=Vy.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var _5=0;function cZ(l,u){return l.stylesheets&&l.count===0&&qy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&qy(l,l.stylesheets),l.unsuspend){var T=l.unsuspend;l.unsuspend=null,T()}},6e4+u);0<l.imgBytes&&_5===0&&(_5=62500*FY());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&qy(l,l.stylesheets),l.unsuspend)){var T=l.unsuspend;l.unsuspend=null,T()}},(l.imgBytes>_5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function Vy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Fy=null;function qy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Fy=new Map,u.forEach(uZ,l),Fy=null,Vy.call(l))}function uZ(l,u){if(!(u.state.loading&4)){var f=Fy.get(l);if(f)var g=f.get(null);else{f=new Map,Fy.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<b.length;T++){var V=b[T];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(f.set(V.dataset.precedence,V),g=V)}g&&f.set(null,g)}b=u.instance,V=b.getAttribute("data-precedence"),T=f.get(V)||g,T===g&&f.set(null,b),f.set(V,b),this.count++,g=Vy.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),T?T.parentNode.insertBefore(b,T.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Cp={$$typeof:R,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function dZ(l,u,f,g,b,T,V,X,de){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$r(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$r(0),this.hiddenUpdates=$r(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=T,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function B9(l,u,f,g,b,T,V,X,de,je,qe,Qe){return l=new dZ(l,u,f,V,de,je,qe,Qe,X),u=1,T===!0&&(u|=24),T=ms(3,null,null,u),l.current=T,T.stateNode=l,u=r4(),u.refCount++,l.pooledCache=u,u.refCount++,T.memoizedState={element:g,isDehydrated:f,cache:u},s4(T),l}function $9(l){return l?(l=k0,l):k0}function U9(l,u,f,g,b,T){b=$9(b),g.context===null?g.context=b:g.pendingContext=b,g=Oc(u),g.payload={element:f},T=T===void 0?null:T,T!==null&&(g.callback=T),f=Ic(l,g,u),f!==null&&(Wi(f,l,u),lp(f,l,u))}function z9(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function T5(l,u){z9(l,u),(l=l.alternate)&&z9(l,u)}function V9(l){if(l.tag===13||l.tag===31){var u=Ju(l,67108864);u!==null&&Wi(u,l,67108864),T5(l,67108864)}}function F9(l){if(l.tag===13||l.tag===31){var u=bs();u=ti(u);var f=Ju(l,u);f!==null&&Wi(f,l,u),T5(l,u)}}var Hy=!0;function hZ(l,u,f,g){var b=H.T;H.T=null;var T=J.p;try{J.p=2,N5(l,u,f,g)}finally{J.p=T,H.T=b}}function fZ(l,u,f,g){var b=H.T;H.T=null;var T=J.p;try{J.p=8,N5(l,u,f,g)}finally{J.p=T,H.T=b}}function N5(l,u,f,g){if(Hy){var b=A5(g);if(b===null)d5(l,u,g,Gy,f),H9(l,g);else if(mZ(b,l,u,f,g))g.stopPropagation();else if(H9(l,g),u&4&&-1<pZ.indexOf(l)){for(;b!==null;){var T=Je(b);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var V=Ut(T.pendingLanes);if(V!==0){var X=T;for(X.pendingLanes|=2,X.entangledLanes|=2;V;){var de=1<<31-Ze(V);X.entanglements[1]|=de,V&=~de}Do(T),(Qr&6)===0&&(jy=We()+500,Tp(0))}}break;case 31:case 13:X=Ju(T,2),X!==null&&Wi(X,T,2),Cy(),T5(T,2)}if(T=A5(g),T===null&&d5(l,u,g,Gy,f),T===b)break;b=T}b!==null&&g.stopPropagation()}else d5(l,u,g,null,f)}}function A5(l){return l=Or(l),E5(l)}var Gy=null;function E5(l){if(Gy=null,l=fe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Gy=l,null}function q9(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case ut:return 2;case dt:return 8;case Ft:case tr:return 32;case kr:return 268435456;default:return 32}default:return 32}}var j5=!1,Fc=null,qc=null,Hc=null,Op=new Map,Ip=new Map,Gc=[],pZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function H9(l,u){switch(l){case"focusin":case"focusout":Fc=null;break;case"dragenter":case"dragleave":qc=null;break;case"mouseover":case"mouseout":Hc=null;break;case"pointerover":case"pointerout":Op.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ip.delete(u.pointerId)}}function Rp(l,u,f,g,b,T){return l===null||l.nativeEvent!==T?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[b]},u!==null&&(u=Je(u),u!==null&&V9(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function mZ(l,u,f,g,b){switch(u){case"focusin":return Fc=Rp(Fc,l,u,f,g,b),!0;case"dragenter":return qc=Rp(qc,l,u,f,g,b),!0;case"mouseover":return Hc=Rp(Hc,l,u,f,g,b),!0;case"pointerover":var T=b.pointerId;return Op.set(T,Rp(Op.get(T)||null,l,u,f,g,b)),!0;case"gotpointercapture":return T=b.pointerId,Ip.set(T,Rp(Ip.get(T)||null,l,u,f,g,b)),!0}return!1}function G9(l){var u=fe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,ri(l.priority,function(){F9(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,ri(l.priority,function(){F9(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Wy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=A5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Co=g,f.target.dispatchEvent(g),Co=null}else return u=Je(f),u!==null&&V9(u),l.blockedOn=f,!1;u.shift()}return!0}function W9(l,u,f){Wy(l)&&f.delete(u)}function gZ(){j5=!1,Fc!==null&&Wy(Fc)&&(Fc=null),qc!==null&&Wy(qc)&&(qc=null),Hc!==null&&Wy(Hc)&&(Hc=null),Op.forEach(W9),Ip.forEach(W9)}function Ky(l,u){l.blockedOn===u&&(l.blockedOn=null,j5||(j5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gZ)))}var Qy=null;function K9(l){Qy!==l&&(Qy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qy===l&&(Qy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(E5(g||f)===null)continue;break}var T=Je(f);T!==null&&(l.splice(u,3),u-=3,A4(T,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function J0(l){function u(de){return Ky(de,l)}Fc!==null&&Ky(Fc,l),qc!==null&&Ky(qc,l),Hc!==null&&Ky(Hc,l),Op.forEach(u),Ip.forEach(u);for(var f=0;f<Gc.length;f++){var g=Gc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Gc.length&&(f=Gc[0],f.blockedOn===null);)G9(f),f.blockedOn===null&&Gc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],T=f[g+1],V=b[gn]||null;if(typeof T=="function")V||K9(f);else if(V){var X=null;if(T&&T.hasAttribute("formAction")){if(b=T,V=T[gn]||null)X=V.formAction;else if(E5(b)!==null)continue}else X=V.action;typeof X=="function"?f[g+1]=X:(f.splice(g,3),g-=3),K9(f)}}}function Q9(){function l(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(V){return b=V})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function k5(l){this._internalRoot=l}Xy.prototype.render=k5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=bs();U9(f,g,l,u,null,null)},Xy.prototype.unmount=k5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;U9(l.current,2,null,l,null,null),Cy(),u[An]=null}};function Xy(l){this._internalRoot=l}Xy.prototype.unstable_scheduleHydration=function(l){if(l){var u=mn();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Gc.length&&u!==0&&u<Gc[f].priority;f++);Gc.splice(f,0,l),f===0&&G9(l)}};var X9=e.version;if(X9!=="19.2.4")throw Error(n(527,X9,"19.2.4"));J.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var yZ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yy.isDisabled&&Yy.supportsFiber)try{Et=Yy.inject(yZ),Dt=Yy}catch{}}return Pp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=nC,T=aC,V=iC;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=B9(l,1,!1,null,null,f,g,null,b,T,V,Q9),l[An]=u.current,u5(l),new k5(u)},Pp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",T=nC,V=aC,X=iC,de=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(V=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),u=B9(l,1,!0,u,f??null,g,b,de,T,V,X,Q9),u.context=$9(null),f=u.current,g=bs(),g=ti(g),b=Oc(g),b.callback=null,Ic(f,b,g),f=g,u.current.lanes=f,fn(u,f),Do(u),l[An]=u.current,u5(l),new Xy(u)},Pp.version="19.2.4",Pp}var oO;function kZ(){if(oO)return I5.exports;oO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),I5.exports=jZ(),I5.exports}var CZ=kZ();const OZ=Xr(CZ);var La=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(La||{});const Mr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Pa=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Pa||{});const HT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},lO=[1.5,1.4,1.3,1.2,1.1],Mm=5,Pm=1;function IZ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function Bv(t,e){const r=new Set;return t.forEach(n=>{const a=IZ(n,e);a&&r.add(a)}),Array.from(r).sort()}var cO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},RZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],o=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Xz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],o=a+1<t.length,c=o?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,v=h&63;d||(v=64,o||(y=64)),n.push(r[p],r[m],r[y],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new MZ;const y=i<<2|c>>4;if(n.push(y),h!==64){const v=c<<4&240|h>>2;if(n.push(v),m!==64){const _=h<<6&192|m;n.push(_)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PZ=function(t){const e=Qz(t);return Xz.encodeByteArray(e,!0)},ox=function(t){return PZ(t).replace(/\./g,"")},Yz=function(t){try{return Xz.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ=()=>DZ().__FIREBASE_DEFAULTS__,BZ=()=>{if(typeof process>"u"||typeof cO>"u")return;const t=cO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$Z=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yz(t[1]);return e&&JSON.parse(e)},n2=()=>{try{return LZ()||BZ()||$Z()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Zz=t=>{var e,r;return(r=(e=n2())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Jz=t=>{const e=Zz(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},eV=()=>{var t;return(t=n2())===null||t===void 0?void 0:t.config},tV=t=>{var e;return(e=n2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ox(JSON.stringify(r)),ox(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ua())}function FZ(){var t;const e=(t=n2())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WZ(){const t=Ua();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rV(){return!FZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nV(){try{return typeof indexedDB=="object"}catch{return!1}}function KZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZ="FirebaseError";class Eo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=QZ,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wg.prototype.create)}}class Wg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],o=i?XZ(i,n):"Error",c=`${this.serviceName}: ${o} (${a}).`;return new Eo(a,c,n)}}function XZ(t,e){return t.replace(YZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const YZ=/\{\$([^}]+)}/g;function ZZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],o=e[a];if(uO(i)&&uO(o)){if(!Rh(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function uO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function JZ(t,e){const r=new eJ(t,e);return r.subscribe.bind(r)}class eJ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");tJ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=D5),a.error===void 0&&(a.error=D5),a.complete===void 0&&(a.complete=D5);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tJ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function D5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t){return t&&t._delegate?t._delegate:t}class ec{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new UZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aJ(e))try{this.getOrInitializeService({instanceIdentifier:bd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=bd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bd){return this.instances.has(e)}getOptions(e=bd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&o.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const o=this.instances.get(a);return o&&e(o,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:nJ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=bd){return this.component?this.component.multipleInstances?e:bd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nJ(t){return t===bd?void 0:t}function aJ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new rJ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Er||(Er={}));const sJ={debug:Er.DEBUG,verbose:Er.VERBOSE,info:Er.INFO,warn:Er.WARN,error:Er.ERROR,silent:Er.SILENT},oJ=Er.INFO,lJ={[Er.DEBUG]:"log",[Er.VERBOSE]:"log",[Er.INFO]:"info",[Er.WARN]:"warn",[Er.ERROR]:"error"},cJ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=lJ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x8{constructor(e){this.name=e,this._logLevel=oJ,this._logHandler=cJ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sJ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Er.DEBUG,...e),this._logHandler(this,Er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Er.VERBOSE,...e),this._logHandler(this,Er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Er.INFO,...e),this._logHandler(this,Er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Er.WARN,...e),this._logHandler(this,Er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Er.ERROR,...e),this._logHandler(this,Er.ERROR,...e)}}const uJ=(t,e)=>e.some(r=>t instanceof r);let dO,hO;function dJ(){return dO||(dO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hJ(){return hO||(hO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const aV=new WeakMap,GT=new WeakMap,iV=new WeakMap,L5=new WeakMap,b8=new WeakMap;function fJ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(xu(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&aV.set(r,t)}).catch(()=>{}),b8.set(e,t),e}function pJ(t){if(GT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});GT.set(t,e)}let WT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return GT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iV.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return xu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mJ(t){WT=t(WT)}function gJ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(B5(this),e,...r);return iV.set(n,e.sort?e.sort():[e]),xu(n)}:hJ().includes(t)?function(...e){return t.apply(B5(this),e),xu(aV.get(this))}:function(...e){return xu(t.apply(B5(this),e))}}function yJ(t){return typeof t=="function"?gJ(t):(t instanceof IDBTransaction&&pJ(t),uJ(t,dJ())?new Proxy(t,WT):t)}function xu(t){if(t instanceof IDBRequest)return fJ(t);if(L5.has(t))return L5.get(t);const e=yJ(t);return e!==t&&(L5.set(t,e),b8.set(e,t)),e}const B5=t=>b8.get(t);function vJ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(t,e),c=xu(o);return n&&o.addEventListener("upgradeneeded",d=>{n(xu(o.result),d.oldVersion,d.newVersion,xu(o.transaction),d)}),r&&o.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const xJ=["get","getKey","getAll","getAllKeys","count"],bJ=["put","add","delete","clear"],$5=new Map;function fO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($5.get(e))return $5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=bJ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||xJ.includes(r)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return $5.set(e,i),i}mJ(t=>({...t,get:(e,r,n)=>fO(e,r)||t.get(e,r,n),has:(e,r)=>!!fO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(SJ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function SJ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const KT="@firebase/app",pO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new x8("@firebase/app"),_J="@firebase/app-compat",TJ="@firebase/analytics-compat",NJ="@firebase/analytics",AJ="@firebase/app-check-compat",EJ="@firebase/app-check",jJ="@firebase/auth",kJ="@firebase/auth-compat",CJ="@firebase/database",OJ="@firebase/data-connect",IJ="@firebase/database-compat",RJ="@firebase/functions",MJ="@firebase/functions-compat",PJ="@firebase/installations",DJ="@firebase/installations-compat",LJ="@firebase/messaging",BJ="@firebase/messaging-compat",$J="@firebase/performance",UJ="@firebase/performance-compat",zJ="@firebase/remote-config",VJ="@firebase/remote-config-compat",FJ="@firebase/storage",qJ="@firebase/storage-compat",HJ="@firebase/firestore",GJ="@firebase/vertexai-preview",WJ="@firebase/firestore-compat",KJ="firebase",QJ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="[DEFAULT]",XJ={[KT]:"fire-core",[_J]:"fire-core-compat",[NJ]:"fire-analytics",[TJ]:"fire-analytics-compat",[EJ]:"fire-app-check",[AJ]:"fire-app-check-compat",[jJ]:"fire-auth",[kJ]:"fire-auth-compat",[CJ]:"fire-rtdb",[OJ]:"fire-data-connect",[IJ]:"fire-rtdb-compat",[RJ]:"fire-fn",[MJ]:"fire-fn-compat",[PJ]:"fire-iid",[DJ]:"fire-iid-compat",[LJ]:"fire-fcm",[BJ]:"fire-fcm-compat",[$J]:"fire-perf",[UJ]:"fire-perf-compat",[zJ]:"fire-rc",[VJ]:"fire-rc-compat",[FJ]:"fire-gcs",[qJ]:"fire-gcs-compat",[HJ]:"fire-fst",[WJ]:"fire-fst-compat",[GJ]:"fire-vertex","fire-js":"fire-js",[KJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Map,YJ=new Map,XT=new Map;function mO(t,e){try{t.container.addComponent(e)}catch(r){tc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Au(t){const e=t.name;if(XT.has(e))return tc.debug(`There were multiple attempts to register component ${e}.`),!1;XT.set(e,t);for(const r of lx.values())mO(r,t);for(const r of YJ.values())mO(r,t);return!0}function Qg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function $l(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bu=new Wg("app","Firebase",ZJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ec("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=QJ;function sV(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:QT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw bu.create("bad-app-name",{appName:String(a)});if(r||(r=eV()),!r)throw bu.create("no-options");const i=lx.get(a);if(i){if(Rh(r,i.options)&&Rh(n,i.config))return i;throw bu.create("duplicate-app",{appName:a})}const o=new iJ(a);for(const d of XT.values())o.addComponent(d);const c=new JJ(r,n,o);return lx.set(a,c),c}function w8(t=QT){const e=lx.get(t);if(!e&&t===QT&&eV())return sV();if(!e)throw bu.create("no-app",{appName:t});return e}function Ys(t,e,r){var n;let a=(n=XJ[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tc.warn(c.join(" "));return}Au(new ec(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eee="firebase-heartbeat-database",tee=1,Dm="firebase-heartbeat-store";let U5=null;function oV(){return U5||(U5=vJ(eee,tee,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dm)}catch(r){console.warn(r)}}}}).catch(t=>{throw bu.create("idb-open",{originalErrorMessage:t.message})})),U5}async function ree(t){try{const r=(await oV()).transaction(Dm),n=await r.objectStore(Dm).get(lV(t));return await r.done,n}catch(e){if(e instanceof Eo)tc.warn(e.message);else{const r=bu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tc.warn(r.message)}}}async function gO(t,e){try{const n=(await oV()).transaction(Dm,"readwrite");await n.objectStore(Dm).put(e,lV(t)),await n.done}catch(r){if(r instanceof Eo)tc.warn(r.message);else{const n=bu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});tc.warn(n.message)}}}function lV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nee=1024,aee=720*60*60*1e3;class iee{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new oee(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=aee}),this._storage.overwrite(this._heartbeatsCache))}catch(n){tc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=yO(),{heartbeatsToSend:n,unsentEntries:a}=see(this._heartbeatsCache.heartbeats),i=ox(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return tc.warn(r),""}}}function yO(){return new Date().toISOString().substring(0,10)}function see(t,e=nee){const r=[];let n=t.slice();for(const a of t){const i=r.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),vO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),vO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class oee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nV()?KZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await ree(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return gO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return gO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function vO(t){return ox(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lee(t){Au(new ec("platform-logger",e=>new wJ(e),"PRIVATE")),Au(new ec("heartbeat",e=>new iee(e),"PRIVATE")),Ys(KT,pO,t),Ys(KT,pO,"esm2017"),Ys("fire-js","")}lee("");var cee="firebase",uee="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(cee,uee,"app");function S8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function cV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dee=cV,uV=new Wg("auth","Firebase",cV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new x8("@firebase/auth");function hee(t,...e){cx.logLevel<=Er.WARN&&cx.warn(`Auth (${h0}): ${t}`,...e)}function $v(t,...e){cx.logLevel<=Er.ERROR&&cx.error(`Auth (${h0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t,...e){throw T8(t,...e)}function _o(t,...e){return T8(t,...e)}function _8(t,e,r){const n=Object.assign(Object.assign({},dee()),{[e]:r});return new Wg("auth","Firebase",n).create(e,{appName:t.name})}function Ld(t){return _8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Xo(t,"argument-error"),_8(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function T8(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return uV.create(t,...e)}function ar(t,e,...r){if(!t)throw T8(e,...r)}function Ul(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $v(e),new Error(e)}function rc(t,e){t||Ul(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pee(){return xO()==="http:"||xO()==="https:"}function xO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mee(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pee()||HZ()||"connection"in navigator)?navigator.onLine:!0}function gee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,r){this.shortDelay=e,this.longDelay=r,rc(r>e,"Short delay should be less than long delay!"),this.isMobile=VZ()||GZ()}get(){return mee()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t,e){rc(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ul("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ul("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ul("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee=new Xg(3e4,6e4);function A8(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nf(t,e,r,n,a={}){return hV(t,a,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const c=Kg(Object.assign({key:t.config.apiKey},o)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return qZ()||(h.referrerPolicy="no-referrer"),dV.fetch()(fV(t,t.config.apiHost,r,c),h)})}async function hV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},yee),e);try{const a=new bee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jy(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jy(t,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Jy(t,"email-already-in-use",o);if(d==="USER_DISABLED")throw Jy(t,"user-disabled",o);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _8(t,p,h);Xo(t,p)}}catch(a){if(a instanceof Eo)throw a;Xo(t,"network-request-failed",{message:String(a)})}}async function xee(t,e,r,n,a={}){const i=await Nf(t,e,r,n,a);return"mfaPendingCredential"in i&&Xo(t,"multi-factor-auth-required",{_serverResponse:i}),i}function fV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?N8(t.config,a):`${t.config.apiScheme}://${a}`}class bee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(_o(this.auth,"network-request-failed")),vee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=_o(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wee(t,e){return Nf(t,"POST","/v1/accounts:delete",e)}async function pV(t,e){return Nf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function See(t,e=!1){const r=Nn(t),n=await r.getIdToken(e),a=E8(n);ar(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:dm(z5(a.auth_time)),issuedAtTime:dm(z5(a.iat)),expirationTime:dm(z5(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function z5(t){return Number(t)*1e3}function E8(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return $v("JWT malformed, contained fewer than 3 sections"),null;try{const a=Yz(r);return a?JSON.parse(a):($v("Failed to decode base64 JWT payload"),null)}catch(a){return $v("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function bO(t){const e=E8(t);return ar(e,"internal-error"),ar(typeof e.exp<"u","internal-error"),ar(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Eo&&_ee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function _ee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=dm(this.lastLoginAt),this.creationTime=dm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Lm(t,pV(r,{idToken:n}));ar(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?mV(i.providerUserInfo):[],c=Aee(t.providerData,o),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new ZT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Nee(t){const e=Nn(t);await ux(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Aee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function mV(t){return t.map(e=>{var{providerId:r}=e,n=S8(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eee(t,e){const r=await hV(t,{},async()=>{const n=Kg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,o=fV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",dV.fetch()(o,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function jee(t,e){return Nf(t,"POST","/v2/accounts:revokeToken",A8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ar(e.idToken,"internal-error"),ar(typeof e.idToken<"u","internal-error"),ar(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ar(e.length!==0,"internal-error");const r=bO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ar(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await Eee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,o=new bh;return n&&(ar(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(ar(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),i&&(ar(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bh,this.toJSON())}_performRefresh(){return Ul("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t,e){ar(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=S8(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ZT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Lm(this,this.stsTokenManager.getToken(this.auth,e));return ar(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return See(this,e)}reload(){return Nee(this)}_assign(e){this!==e&&(ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new zl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ux(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($l(this.auth.app))return Promise.reject(Ld(this.auth));const e=await this.getIdToken();return await Lm(this,wee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,o,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,v=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=r.photoURL)!==null&&o!==void 0?o:void 0,S=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=r.createdAt)!==null&&h!==void 0?h:void 0,O=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:R,emailVerified:L,isAnonymous:C,providerData:P,stsTokenManager:E}=r;ar(R&&E,e,"internal-error");const N=bh.fromJSON(this.name,E);ar(typeof R=="string",e,"internal-error"),Kc(m,e.name),Kc(y,e.name),ar(typeof L=="boolean",e,"internal-error"),ar(typeof C=="boolean",e,"internal-error"),Kc(v,e.name),Kc(_,e.name),Kc(S,e.name),Kc(w,e.name),Kc(j,e.name),Kc(O,e.name);const k=new zl({uid:R,auth:e,email:y,emailVerified:L,displayName:m,isAnonymous:C,photoURL:_,phoneNumber:v,tenantId:S,stsTokenManager:N,createdAt:j,lastLoginAt:O});return P&&Array.isArray(P)&&(k.providerData=P.map(z=>Object.assign({},z))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,r,n=!1){const a=new bh;a.updateFromServerResponse(r);const i=new zl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await ux(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];ar(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?mV(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new bh;c.updateFromIdToken(n);const d=new zl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new ZT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new Map;function Vl(t){rc(t instanceof Function,"Expected a class definition");let e=wO.get(t);return e?(rc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}gV.type="NONE";const SO=gV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t,e,r){return`firebase:${t}:${e}:${r}`}class wh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=Uv(this.userKey,a.apiKey,i),this.fullPersistenceKey=Uv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new wh(Vl(SO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Vl(SO);const o=Uv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(o);if(p){const m=zl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new wh(i,e,n):(i=d[0],c&&await i._set(o,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new wh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SV(e))return"Blackberry";if(_V(e))return"Webos";if(vV(e))return"Safari";if((e.includes("chrome/")||xV(e))&&!e.includes("edge/"))return"Chrome";if(wV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function yV(t=Ua()){return/firefox\//i.test(t)}function vV(t=Ua()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xV(t=Ua()){return/crios\//i.test(t)}function bV(t=Ua()){return/iemobile/i.test(t)}function wV(t=Ua()){return/android/i.test(t)}function SV(t=Ua()){return/blackberry/i.test(t)}function _V(t=Ua()){return/webos/i.test(t)}function j8(t=Ua()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kee(t=Ua()){var e;return j8(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Cee(){return WZ()&&document.documentMode===10}function TV(t=Ua()){return j8(t)||wV(t)||_V(t)||SV(t)||/windows phone/i.test(t)||bV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t,e=[]){let r;switch(t){case"Browser":r=_O(Ua());break;case"Worker":r=`${_O(Ua())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${h0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,c)=>{try{const d=e(i);o(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iee(t,e={}){return Nf(t,"GET","/v2/passwordPolicy",A8(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ree=6;class Mee{constructor(e){var r,n,a,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:Ree,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,o,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsNumericCharacter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pee{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TO(this),this.idTokenSubscription=new TO(this),this.beforeStateQueue=new Oee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Vl(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await wh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await pV(this,{idToken:e}),n=await zl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if($l(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ar(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ux(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($l(this.app))return Promise.reject(Ld(this));const r=e?Nn(e):null;return r&&ar(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ar(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $l(this.app)?Promise.reject(Ld(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $l(this.app)?Promise.reject(Ld(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Iee(this),r=new Mee(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await jee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Vl(e)||this._popupRedirectResolver;ar(r,this,"argument-error"),this.redirectPersistenceManager=await wh.create(this,[Vl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ar(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{o=!0,d()}}else{const d=e.addObserver(r);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&hee(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function a2(t){return Nn(t)}class TO{constructor(e){this.auth=e,this.observer=null,this.addObserver=JZ(r=>this.observer=r)}get next(){return ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dee(t){k8=t}function Lee(t){return k8.loadJS(t)}function Bee(){return k8.gapiScript}function $ee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uee(t,e){const r=Qg(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Rh(i,e??{}))return a;Xo(a,"already-initialized")}return r.initialize({options:e})}function zee(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Vl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Vee(t,e,r){const n=a2(t);ar(n._canInitEmulator,n,"emulator-config-failed"),ar(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=AV(e),{host:o,port:c}=Fee(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${o}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),qee()}function AV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Fee(t){const e=AV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:NO(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:NO(o)}}}function NO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ul("not implemented")}_getIdTokenResponse(e){return Ul("not implemented")}_linkToIdToken(e,r){return Ul("not implemented")}_getReauthenticationResolver(e){return Ul("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t,e){return xee(t,"POST","/v1/accounts:signInWithIdp",A8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hee="http://localhost";class qd extends EV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Xo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=S8(r,["providerId","signInMethod"]);if(!n||!a)return null;const o=new qd(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Sh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Sh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Sh(e,r)}buildRequest(){const e={requestUri:Hee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Kg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg extends C8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Yg{constructor(){super("facebook.com")}static credential(e){return qd._fromParams({providerId:ru.PROVIDER_ID,signInMethod:ru.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ru.credentialFromTaggedObject(e)}static credentialFromError(e){return ru.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ru.credential(e.oauthAccessToken)}catch{return null}}}ru.FACEBOOK_SIGN_IN_METHOD="facebook.com";ru.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends Yg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return qd._fromParams({providerId:Ll.PROVIDER_ID,signInMethod:Ll.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ll.credentialFromTaggedObject(e)}static credentialFromError(e){return Ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ll.credential(r,n)}catch{return null}}}Ll.GOOGLE_SIGN_IN_METHOD="google.com";Ll.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Yg{constructor(){super("github.com")}static credential(e){return qd._fromParams({providerId:nu.PROVIDER_ID,signInMethod:nu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nu.credentialFromTaggedObject(e)}static credentialFromError(e){return nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nu.credential(e.oauthAccessToken)}catch{return null}}}nu.GITHUB_SIGN_IN_METHOD="github.com";nu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Yg{constructor(){super("twitter.com")}static credential(e,r){return qd._fromParams({providerId:au.PROVIDER_ID,signInMethod:au.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return au.credentialFromTaggedObject(e)}static credentialFromError(e){return au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return au.credential(r,n)}catch{return null}}}au.TWITTER_SIGN_IN_METHOD="twitter.com";au.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await zl._fromIdTokenResponse(e,n,a),o=AO(n);return new Mh({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=AO(n);return new Mh({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function AO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends Eo{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,dx.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new dx(e,r,n,a)}}function jV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?dx._fromErrorAndOperation(t,i,e,n):i})}async function Gee(t,e,r=!1){const n=await Lm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Mh._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wee(t,e,r=!1){const{auth:n}=t;if($l(n.app))return Promise.reject(Ld(n));const a="reauthenticate";try{const i=await Lm(t,jV(n,a,e,t),r);ar(i.idToken,n,"internal-error");const o=E8(i.idToken);ar(o,n,"internal-error");const{sub:c}=o;return ar(t.uid===c,n,"user-mismatch"),Mh._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xo(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(t,e,r=!1){if($l(t.app))return Promise.reject(Ld(t));const n="signIn",a=await jV(t,n,e),i=await Mh._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Qee(t,e,r,n){return Nn(t).onIdTokenChanged(e,r,n)}function Xee(t,e,r){return Nn(t).beforeAuthStateChanged(e,r)}function Yee(t,e,r,n){return Nn(t).onAuthStateChanged(e,r,n)}function Zee(t){return Nn(t).signOut()}const hx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(hx,"1"),this.storage.removeItem(hx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jee=1e3,ete=10;class CV extends kV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,c,d)=>{this.notifyListeners(o,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);Cee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ete):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Jee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}CV.type="LOCAL";const tte=CV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV extends kV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}OV.type="SESSION";const IV=OV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new i2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(o).map(async h=>h(r.origin,i)),d=await rte(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nte{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((c,d)=>{const h=O8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(){return window}function ate(t){Go().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(){return typeof Go().WorkerGlobalScope<"u"&&typeof Go().importScripts=="function"}async function ite(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ste(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ote(){return RV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="firebaseLocalStorageDb",lte=1,fx="firebaseLocalStorage",PV="fbase_key";class Zg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function s2(t,e){return t.transaction([fx],e?"readwrite":"readonly").objectStore(fx)}function cte(){const t=indexedDB.deleteDatabase(MV);return new Zg(t).toPromise()}function JT(){const t=indexedDB.open(MV,lte);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(fx,{keyPath:PV})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(fx)?e(n):(n.close(),await cte(),e(await JT()))})})}async function EO(t,e,r){const n=s2(t,!0).put({[PV]:e,value:r});return new Zg(n).toPromise()}async function ute(t,e){const r=s2(t,!1).get(e),n=await new Zg(r).toPromise();return n===void 0?null:n.value}function jO(t,e){const r=s2(t,!0).delete(e);return new Zg(r).toPromise()}const dte=800,hte=3;class DV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await JT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>hte)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=i2._getInstance(ote()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await ite(),!this.activeServiceWorker)return;this.sender=new nte(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ste()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await JT();return await EO(e,hx,"1"),await jO(e,hx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>EO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>ute(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>jO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=s2(a,!1).getAll();return new Zg(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dte)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DV.type="LOCAL";const fte=DV;new Xg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t,e){return e?Vl(e):(ar(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8 extends EV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Sh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Sh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function pte(t){return Kee(t.auth,new I8(t),t.bypassAuthState)}function mte(t){const{auth:e,user:r}=t;return ar(r,e,"internal-error"),Wee(r,new I8(t),t.bypassAuthState)}async function gte(t){const{auth:e,user:r}=t;return ar(r,e,"internal-error"),Gee(r,new I8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pte;case"linkViaPopup":case"linkViaRedirect":return gte;case"reauthViaPopup":case"reauthViaRedirect":return mte;default:Xo(this.auth,"internal-error")}}resolve(e){rc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte=new Xg(2e3,1e4);async function vte(t,e,r){if($l(t.app))return Promise.reject(_o(t,"operation-not-supported-in-this-environment"));const n=a2(t);fee(t,e,C8);const a=LV(n,r);return new kd(n,"signInViaPopup",e,a).executeNotNull()}class kd extends BV{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,kd.currentPopupAction&&kd.currentPopupAction.cancel(),kd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ar(e,this.auth,"internal-error"),e}async onExecution(){rc(this.filter.length===1,"Popup operations only handle one event");const e=O8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(_o(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_o(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_o(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yte.get())};e()}}kd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xte="pendingRedirect",zv=new Map;class bte extends BV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=zv.get(this.auth._key());if(!e){try{const n=await wte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}zv.set(this.auth._key(),e)}return this.bypassAuthState||zv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wte(t,e){const r=Tte(e),n=_te(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Ste(t,e){zv.set(t._key(),e)}function _te(t){return Vl(t._redirectPersistence)}function Tte(t){return Uv(xte,t.config.apiKey,t.name)}async function Nte(t,e,r=!1){if($l(t.app))return Promise.reject(Ld(t));const n=a2(t),a=LV(n,e),o=await new bte(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate=600*1e3;class Ete{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!$V(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(_o(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ate&&this.cachedEventUids.clear(),this.cachedEventUids.has(kO(e))}saveEventToCache(e){this.cachedEventUids.add(kO(e)),this.lastProcessedEventTime=Date.now()}}function kO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $V({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $V(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kte(t,e={}){return Nf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ote=/^https?/;async function Ite(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kte(t);for(const r of e)try{if(Rte(r))return}catch{}Xo(t,"unauthorized-domain")}function Rte(t){const e=YT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Ote.test(r))return!1;if(Cte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mte=new Xg(3e4,6e4);function CO(){const t=Go().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Pte(t){return new Promise((e,r)=>{var n,a,i;function o(){CO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CO(),r(_o(t,"network-request-failed"))},timeout:Mte.get()})}if(!((a=(n=Go().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Go().gapi)===null||i===void 0)&&i.load)o();else{const c=$ee("iframefcb");return Go()[c]=()=>{gapi.load?o():r(_o(t,"network-request-failed"))},Lee(`${Bee()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw Vv=null,e})}let Vv=null;function Dte(t){return Vv=Vv||Pte(t),Vv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte=new Xg(5e3,15e3),Bte="__/auth/iframe",$te="emulator/auth/iframe",Ute={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vte(t){const e=t.config;ar(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?N8(e,$te):`https://${t.config.authDomain}/${Bte}`,n={apiKey:e.apiKey,appName:t.name,v:h0},a=zte.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Kg(n).slice(1)}`}async function Fte(t){const e=await Dte(t),r=Go().gapi;return ar(r,t,"internal-error"),e.open({where:document.body,url:Vte(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ute,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=_o(t,"network-request-failed"),c=Go().setTimeout(()=>{i(o)},Lte.get());function d(){Go().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hte=500,Gte=600,Wte="_blank",Kte="http://localhost";class OO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qte(t,e,r,n=Hte,a=Gte){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},qte),{width:n.toString(),height:a.toString(),top:i,left:o}),h=Ua().toLowerCase();r&&(c=xV(h)?Wte:r),yV(h)&&(e=e||Kte,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[v,_])=>`${y}${v}=${_},`,"");if(kee(h)&&c!=="_self")return Xte(e||"",c),new OO(null);const m=window.open(e||"",c,p);ar(m,t,"popup-blocked");try{m.focus()}catch{}return new OO(m)}function Xte(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yte="__/auth/handler",Zte="emulator/auth/handler",Jte=encodeURIComponent("fac");async function IO(t,e,r,n,a,i){ar(t.config.authDomain,t,"auth-domain-config-required"),ar(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:h0,eventId:a};if(e instanceof C8){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZZ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Yg){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Jte}=${encodeURIComponent(d)}`:"";return`${ere(t)}?${Kg(c).slice(1)}${h}`}function ere({config:t}){return t.emulator?N8(t,Zte):`https://${t.authDomain}/${Yte}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="webStorageSupport";class tre{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IV,this._completeRedirectFn=Nte,this._overrideRedirectResult=Ste}async _openPopup(e,r,n,a){var i;rc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await IO(e,r,n,YT(),a);return Qte(e,o,O8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await IO(e,r,n,YT(),a);return ate(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(rc(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Fte(e),n=new Ete(e);return r.register("authEvent",a=>(ar(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(V5,{type:V5},a=>{var i;const o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[V5];o!==void 0&&r(!!o),Xo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Ite(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return TV()||vV()||j8()}}const rre=tre;var RO="@firebase/auth",MO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nre{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function are(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ire(t){Au(new ec("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;ar(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NV(t)},h=new Pee(n,a,i,d);return zee(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Au(new ec("auth-internal",e=>{const r=a2(e.getProvider("auth").getImmediate());return(n=>new nre(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(RO,MO,are(t)),Ys(RO,MO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sre=300,ore=tV("authIdTokenMaxAge")||sre;let PO=null;const lre=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>ore)return;const a=r==null?void 0:r.token;PO!==a&&(PO=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function eN(t=w8()){const e=Qg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Uee(t,{popupRedirectResolver:rre,persistence:[fte,tte,IV]}),n=tV("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=lre(i.toString());Xee(r,o,()=>o(r.currentUser)),Qee(r,c=>o(c))}}const a=Zz("auth");return a&&Vee(r,`http://${a}`),r}function cre(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Dee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=_o("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",cre().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ire("Browser");var DO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bd,UV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,N){function k(){}k.prototype=N.prototype,E.D=N.prototype,E.prototype=new k,E.prototype.constructor=E,E.C=function(z,D,B){for(var $=Array(arguments.length-2),K=2;K<arguments.length;K++)$[K-2]=arguments[K];return N.prototype[D].apply(z,$)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,N,k){k||(k=0);var z=Array(16);if(typeof N=="string")for(var D=0;16>D;++D)z[D]=N.charCodeAt(k++)|N.charCodeAt(k++)<<8|N.charCodeAt(k++)<<16|N.charCodeAt(k++)<<24;else for(D=0;16>D;++D)z[D]=N[k++]|N[k++]<<8|N[k++]<<16|N[k++]<<24;N=E.g[0],k=E.g[1],D=E.g[2];var B=E.g[3],$=N+(B^k&(D^B))+z[0]+3614090360&4294967295;N=k+($<<7&4294967295|$>>>25),$=B+(D^N&(k^D))+z[1]+3905402710&4294967295,B=N+($<<12&4294967295|$>>>20),$=D+(k^B&(N^k))+z[2]+606105819&4294967295,D=B+($<<17&4294967295|$>>>15),$=k+(N^D&(B^N))+z[3]+3250441966&4294967295,k=D+($<<22&4294967295|$>>>10),$=N+(B^k&(D^B))+z[4]+4118548399&4294967295,N=k+($<<7&4294967295|$>>>25),$=B+(D^N&(k^D))+z[5]+1200080426&4294967295,B=N+($<<12&4294967295|$>>>20),$=D+(k^B&(N^k))+z[6]+2821735955&4294967295,D=B+($<<17&4294967295|$>>>15),$=k+(N^D&(B^N))+z[7]+4249261313&4294967295,k=D+($<<22&4294967295|$>>>10),$=N+(B^k&(D^B))+z[8]+1770035416&4294967295,N=k+($<<7&4294967295|$>>>25),$=B+(D^N&(k^D))+z[9]+2336552879&4294967295,B=N+($<<12&4294967295|$>>>20),$=D+(k^B&(N^k))+z[10]+4294925233&4294967295,D=B+($<<17&4294967295|$>>>15),$=k+(N^D&(B^N))+z[11]+2304563134&4294967295,k=D+($<<22&4294967295|$>>>10),$=N+(B^k&(D^B))+z[12]+1804603682&4294967295,N=k+($<<7&4294967295|$>>>25),$=B+(D^N&(k^D))+z[13]+4254626195&4294967295,B=N+($<<12&4294967295|$>>>20),$=D+(k^B&(N^k))+z[14]+2792965006&4294967295,D=B+($<<17&4294967295|$>>>15),$=k+(N^D&(B^N))+z[15]+1236535329&4294967295,k=D+($<<22&4294967295|$>>>10),$=N+(D^B&(k^D))+z[1]+4129170786&4294967295,N=k+($<<5&4294967295|$>>>27),$=B+(k^D&(N^k))+z[6]+3225465664&4294967295,B=N+($<<9&4294967295|$>>>23),$=D+(N^k&(B^N))+z[11]+643717713&4294967295,D=B+($<<14&4294967295|$>>>18),$=k+(B^N&(D^B))+z[0]+3921069994&4294967295,k=D+($<<20&4294967295|$>>>12),$=N+(D^B&(k^D))+z[5]+3593408605&4294967295,N=k+($<<5&4294967295|$>>>27),$=B+(k^D&(N^k))+z[10]+38016083&4294967295,B=N+($<<9&4294967295|$>>>23),$=D+(N^k&(B^N))+z[15]+3634488961&4294967295,D=B+($<<14&4294967295|$>>>18),$=k+(B^N&(D^B))+z[4]+3889429448&4294967295,k=D+($<<20&4294967295|$>>>12),$=N+(D^B&(k^D))+z[9]+568446438&4294967295,N=k+($<<5&4294967295|$>>>27),$=B+(k^D&(N^k))+z[14]+3275163606&4294967295,B=N+($<<9&4294967295|$>>>23),$=D+(N^k&(B^N))+z[3]+4107603335&4294967295,D=B+($<<14&4294967295|$>>>18),$=k+(B^N&(D^B))+z[8]+1163531501&4294967295,k=D+($<<20&4294967295|$>>>12),$=N+(D^B&(k^D))+z[13]+2850285829&4294967295,N=k+($<<5&4294967295|$>>>27),$=B+(k^D&(N^k))+z[2]+4243563512&4294967295,B=N+($<<9&4294967295|$>>>23),$=D+(N^k&(B^N))+z[7]+1735328473&4294967295,D=B+($<<14&4294967295|$>>>18),$=k+(B^N&(D^B))+z[12]+2368359562&4294967295,k=D+($<<20&4294967295|$>>>12),$=N+(k^D^B)+z[5]+4294588738&4294967295,N=k+($<<4&4294967295|$>>>28),$=B+(N^k^D)+z[8]+2272392833&4294967295,B=N+($<<11&4294967295|$>>>21),$=D+(B^N^k)+z[11]+1839030562&4294967295,D=B+($<<16&4294967295|$>>>16),$=k+(D^B^N)+z[14]+4259657740&4294967295,k=D+($<<23&4294967295|$>>>9),$=N+(k^D^B)+z[1]+2763975236&4294967295,N=k+($<<4&4294967295|$>>>28),$=B+(N^k^D)+z[4]+1272893353&4294967295,B=N+($<<11&4294967295|$>>>21),$=D+(B^N^k)+z[7]+4139469664&4294967295,D=B+($<<16&4294967295|$>>>16),$=k+(D^B^N)+z[10]+3200236656&4294967295,k=D+($<<23&4294967295|$>>>9),$=N+(k^D^B)+z[13]+681279174&4294967295,N=k+($<<4&4294967295|$>>>28),$=B+(N^k^D)+z[0]+3936430074&4294967295,B=N+($<<11&4294967295|$>>>21),$=D+(B^N^k)+z[3]+3572445317&4294967295,D=B+($<<16&4294967295|$>>>16),$=k+(D^B^N)+z[6]+76029189&4294967295,k=D+($<<23&4294967295|$>>>9),$=N+(k^D^B)+z[9]+3654602809&4294967295,N=k+($<<4&4294967295|$>>>28),$=B+(N^k^D)+z[12]+3873151461&4294967295,B=N+($<<11&4294967295|$>>>21),$=D+(B^N^k)+z[15]+530742520&4294967295,D=B+($<<16&4294967295|$>>>16),$=k+(D^B^N)+z[2]+3299628645&4294967295,k=D+($<<23&4294967295|$>>>9),$=N+(D^(k|~B))+z[0]+4096336452&4294967295,N=k+($<<6&4294967295|$>>>26),$=B+(k^(N|~D))+z[7]+1126891415&4294967295,B=N+($<<10&4294967295|$>>>22),$=D+(N^(B|~k))+z[14]+2878612391&4294967295,D=B+($<<15&4294967295|$>>>17),$=k+(B^(D|~N))+z[5]+4237533241&4294967295,k=D+($<<21&4294967295|$>>>11),$=N+(D^(k|~B))+z[12]+1700485571&4294967295,N=k+($<<6&4294967295|$>>>26),$=B+(k^(N|~D))+z[3]+2399980690&4294967295,B=N+($<<10&4294967295|$>>>22),$=D+(N^(B|~k))+z[10]+4293915773&4294967295,D=B+($<<15&4294967295|$>>>17),$=k+(B^(D|~N))+z[1]+2240044497&4294967295,k=D+($<<21&4294967295|$>>>11),$=N+(D^(k|~B))+z[8]+1873313359&4294967295,N=k+($<<6&4294967295|$>>>26),$=B+(k^(N|~D))+z[15]+4264355552&4294967295,B=N+($<<10&4294967295|$>>>22),$=D+(N^(B|~k))+z[6]+2734768916&4294967295,D=B+($<<15&4294967295|$>>>17),$=k+(B^(D|~N))+z[13]+1309151649&4294967295,k=D+($<<21&4294967295|$>>>11),$=N+(D^(k|~B))+z[4]+4149444226&4294967295,N=k+($<<6&4294967295|$>>>26),$=B+(k^(N|~D))+z[11]+3174756917&4294967295,B=N+($<<10&4294967295|$>>>22),$=D+(N^(B|~k))+z[2]+718787259&4294967295,D=B+($<<15&4294967295|$>>>17),$=k+(B^(D|~N))+z[9]+3951481745&4294967295,E.g[0]=E.g[0]+N&4294967295,E.g[1]=E.g[1]+(D+($<<21&4294967295|$>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+B&4294967295}n.prototype.u=function(E,N){N===void 0&&(N=E.length);for(var k=N-this.blockSize,z=this.B,D=this.h,B=0;B<N;){if(D==0)for(;B<=k;)a(this,E,B),B+=this.blockSize;if(typeof E=="string"){for(;B<N;)if(z[D++]=E.charCodeAt(B++),D==this.blockSize){a(this,z),D=0;break}}else for(;B<N;)if(z[D++]=E[B++],D==this.blockSize){a(this,z),D=0;break}}this.h=D,this.o+=N},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var N=1;N<E.length-8;++N)E[N]=0;var k=8*this.o;for(N=E.length-8;N<E.length;++N)E[N]=k&255,k/=256;for(this.u(E),E=Array(16),N=k=0;4>N;++N)for(var z=0;32>z;z+=8)E[k++]=this.g[N]>>>z&255;return E};function i(E,N){var k=c;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=N(E)}function o(E,N){this.h=N;for(var k=[],z=!0,D=E.length-1;0<=D;D--){var B=E[D]|0;z&&B==N||(k[D]=B,z=!1)}this.g=k}var c={};function d(E){return-128<=E&&128>E?i(E,function(N){return new o([N|0],0>N?-1:0)}):new o([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return w(h(-E));for(var N=[],k=1,z=0;E>=k;z++)N[z]=E/k|0,k*=4294967296;return new o(N,0)}function p(E,N){if(E.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E.charAt(0)=="-")return w(p(E.substring(1),N));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(N,8)),z=m,D=0;D<E.length;D+=8){var B=Math.min(8,E.length-D),$=parseInt(E.substring(D,D+B),N);8>B?(B=h(Math.pow(N,B)),z=z.j(B).add(h($))):(z=z.j(k),z=z.add(h($)))}return z}var m=d(0),y=d(1),v=d(16777216);t=o.prototype,t.m=function(){if(S(this))return-w(this).m();for(var E=0,N=1,k=0;k<this.g.length;k++){var z=this.i(k);E+=(0<=z?z:4294967296+z)*N,N*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_(this))return"0";if(S(this))return"-"+w(this).toString(E);for(var N=h(Math.pow(E,6)),k=this,z="";;){var D=L(k,N).g;k=j(k,D.j(N));var B=((0<k.g.length?k.g[0]:k.h)>>>0).toString(E);if(k=D,_(k))return B+z;for(;6>B.length;)B="0"+B;z=B+z}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function _(E){if(E.h!=0)return!1;for(var N=0;N<E.g.length;N++)if(E.g[N]!=0)return!1;return!0}function S(E){return E.h==-1}t.l=function(E){return E=j(this,E),S(E)?-1:_(E)?0:1};function w(E){for(var N=E.g.length,k=[],z=0;z<N;z++)k[z]=~E.g[z];return new o(k,~E.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(E){for(var N=Math.max(this.g.length,E.g.length),k=[],z=0,D=0;D<=N;D++){var B=z+(this.i(D)&65535)+(E.i(D)&65535),$=(B>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);z=$>>>16,B&=65535,$&=65535,k[D]=$<<16|B}return new o(k,k[k.length-1]&-2147483648?-1:0)};function j(E,N){return E.add(w(N))}t.j=function(E){if(_(this)||_(E))return m;if(S(this))return S(E)?w(this).j(w(E)):w(w(this).j(E));if(S(E))return w(this.j(w(E)));if(0>this.l(v)&&0>E.l(v))return h(this.m()*E.m());for(var N=this.g.length+E.g.length,k=[],z=0;z<2*N;z++)k[z]=0;for(z=0;z<this.g.length;z++)for(var D=0;D<E.g.length;D++){var B=this.i(z)>>>16,$=this.i(z)&65535,K=E.i(D)>>>16,W=E.i(D)&65535;k[2*z+2*D]+=$*W,O(k,2*z+2*D),k[2*z+2*D+1]+=B*W,O(k,2*z+2*D+1),k[2*z+2*D+1]+=$*K,O(k,2*z+2*D+1),k[2*z+2*D+2]+=B*K,O(k,2*z+2*D+2)}for(z=0;z<N;z++)k[z]=k[2*z+1]<<16|k[2*z];for(z=N;z<2*N;z++)k[z]=0;return new o(k,0)};function O(E,N){for(;(E[N]&65535)!=E[N];)E[N+1]+=E[N]>>>16,E[N]&=65535,N++}function R(E,N){this.g=E,this.h=N}function L(E,N){if(_(N))throw Error("division by zero");if(_(E))return new R(m,m);if(S(E))return N=L(w(E),N),new R(w(N.g),w(N.h));if(S(N))return N=L(E,w(N)),new R(w(N.g),N.h);if(30<E.g.length){if(S(E)||S(N))throw Error("slowDivide_ only works with positive integers.");for(var k=y,z=N;0>=z.l(E);)k=C(k),z=C(z);var D=P(k,1),B=P(z,1);for(z=P(z,2),k=P(k,2);!_(z);){var $=B.add(z);0>=$.l(E)&&(D=D.add(k),B=$),z=P(z,1),k=P(k,1)}return N=j(E,D.j(N)),new R(D,N)}for(D=m;0<=E.l(N);){for(k=Math.max(1,Math.floor(E.m()/N.m())),z=Math.ceil(Math.log(k)/Math.LN2),z=48>=z?1:Math.pow(2,z-48),B=h(k),$=B.j(N);S($)||0<$.l(E);)k-=z,B=h(k),$=B.j(N);_(B)&&(B=y),D=D.add(B),E=j(E,$)}return new R(D,E)}t.A=function(E){return L(this,E).h},t.and=function(E){for(var N=Math.max(this.g.length,E.g.length),k=[],z=0;z<N;z++)k[z]=this.i(z)&E.i(z);return new o(k,this.h&E.h)},t.or=function(E){for(var N=Math.max(this.g.length,E.g.length),k=[],z=0;z<N;z++)k[z]=this.i(z)|E.i(z);return new o(k,this.h|E.h)},t.xor=function(E){for(var N=Math.max(this.g.length,E.g.length),k=[],z=0;z<N;z++)k[z]=this.i(z)^E.i(z);return new o(k,this.h^E.h)};function C(E){for(var N=E.g.length+1,k=[],z=0;z<N;z++)k[z]=E.i(z)<<1|E.i(z-1)>>>31;return new o(k,E.h)}function P(E,N){var k=N>>5;N%=32;for(var z=E.g.length-k,D=[],B=0;B<z;B++)D[B]=0<N?E.i(B+k)>>>N|E.i(B+k+1)<<32-N:E.i(B+k);return new o(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,UV=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Bd=o}).apply(typeof DO<"u"?DO:typeof self<"u"?self:typeof window<"u"?window:{});var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zV,nm,VV,Fv,tN,FV,qV,HV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,M,F){return x==Array.prototype||x==Object.prototype||(x[M]=F.value),x};function r(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof ev=="object"&&ev];for(var M=0;M<x.length;++M){var F=x[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(x,M){if(M)e:{var F=n;x=x.split(".");for(var ee=0;ee<x.length-1;ee++){var _e=x[ee];if(!(_e in F))break e;F=F[_e]}x=x[x.length-1],ee=F[x],M=M(ee),M!=ee&&M!=null&&e(F,x,{configurable:!0,writable:!0,value:M})}}function i(x,M){x instanceof String&&(x+="");var F=0,ee=!1,_e={next:function(){if(!ee&&F<x.length){var Be=F++;return{value:M(Be,x[Be]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}a("Array.prototype.values",function(x){return x||function(){return i(this,function(M,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function d(x){var M=typeof x;return M=M!="object"?M:x?Array.isArray(x)?"array":M:"null",M=="array"||M=="object"&&typeof x.length=="number"}function h(x){var M=typeof x;return M=="object"&&x!=null||M=="function"}function p(x,M,F){return x.call.apply(x.bind,arguments)}function m(x,M,F){if(!x)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,ee),x.apply(M,_e)}}return function(){return x.apply(M,arguments)}}function y(x,M,F){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function v(x,M){var F=Array.prototype.slice.call(arguments,1);return function(){var ee=F.slice();return ee.push.apply(ee,arguments),x.apply(this,ee)}}function _(x,M){function F(){}F.prototype=M.prototype,x.aa=M.prototype,x.prototype=new F,x.prototype.constructor=x,x.Qb=function(ee,_e,Be){for(var gt=Array(arguments.length-2),tn=2;tn<arguments.length;tn++)gt[tn-2]=arguments[tn];return M.prototype[_e].apply(ee,gt)}}function S(x){const M=x.length;if(0<M){const F=Array(M);for(let ee=0;ee<M;ee++)F[ee]=x[ee];return F}return[]}function w(x,M){for(let F=1;F<arguments.length;F++){const ee=arguments[F];if(d(ee)){const _e=x.length||0,Be=ee.length||0;x.length=_e+Be;for(let gt=0;gt<Be;gt++)x[_e+gt]=ee[gt]}else x.push(ee)}}class j{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function O(x){return/^[\s\xa0]*$/.test(x)}function R(){var x=c.navigator;return x&&(x=x.userAgent)?x:""}function L(x){return L[" "](x),x}L[" "]=function(){};var C=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function P(x,M,F){for(const ee in x)M.call(F,x[ee],ee,x)}function E(x,M){for(const F in x)M.call(void 0,x[F],F,x)}function N(x){const M={};for(const F in x)M[F]=x[F];return M}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(x,M){let F,ee;for(let _e=1;_e<arguments.length;_e++){ee=arguments[_e];for(F in ee)x[F]=ee[F];for(let Be=0;Be<k.length;Be++)F=k[Be],Object.prototype.hasOwnProperty.call(ee,F)&&(x[F]=ee[F])}}function D(x){var M=1;x=x.split(":");const F=[];for(;0<M&&x.length;)F.push(x.shift()),M--;return x.length&&F.push(x.join(":")),F}function B(x){c.setTimeout(()=>{throw x},0)}function $(){var x=he;let M=null;return x.g&&(M=x.g,x.g=x.g.next,x.g||(x.h=null),M.next=null),M}class K{constructor(){this.h=this.g=null}add(M,F){const ee=W.get();ee.set(M,F),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var W=new j(()=>new H,x=>x.reset());class H{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ie=!1,he=new K,pe=()=>{const x=c.Promise.resolve(void 0);J=()=>{x.then(Z)}};var Z=()=>{for(var x;x=$();){try{x.h.call(x.g)}catch(F){B(F)}var M=W;M.j(x),100>M.h&&(M.h++,x.next=M.g,M.g=x)}ie=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(x,M){this.type=x,this.g=this.target=M,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var xe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var x=!1,M=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const F=()=>{};c.addEventListener("test",F,M),c.removeEventListener("test",F,M)}catch{}return x})();function Oe(x,M){if(ae.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var F=this.type=x.type,ee=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=M,M=x.relatedTarget){if(C){e:{try{L(M.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(M=null)}}else F=="mouseover"?M=x.fromElement:F=="mouseout"&&(M=x.toElement);this.relatedTarget=M,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Ue[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&Oe.aa.h.call(this)}}_(Oe,ae);var Ue={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Q(x,M,F,ee,_e){this.listener=x,this.proxy=null,this.src=M,this.type=F,this.capture=!!ee,this.ha=_e,this.key=++Ye,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function te(x){this.src=x,this.g={},this.h=0}te.prototype.add=function(x,M,F,ee,_e){var Be=x.toString();x=this.g[Be],x||(x=this.g[Be]=[],this.h++);var gt=Pe(x,M,ee,_e);return-1<gt?(M=x[gt],F||(M.fa=!1)):(M=new Q(M,this.src,Be,!!ee,_e),M.fa=F,x.push(M)),M};function re(x,M){var F=M.type;if(F in x.g){var ee=x.g[F],_e=Array.prototype.indexOf.call(ee,M,void 0),Be;(Be=0<=_e)&&Array.prototype.splice.call(ee,_e,1),Be&&(me(M),x.g[F].length==0&&(delete x.g[F],x.h--))}}function Pe(x,M,F,ee){for(var _e=0;_e<x.length;++_e){var Be=x[_e];if(!Be.da&&Be.listener==M&&Be.capture==!!F&&Be.ha==ee)return _e}return-1}var Ge="closure_lm_"+(1e6*Math.random()|0),it={};function et(x,M,F,ee,_e){if(Array.isArray(M)){for(var Be=0;Be<M.length;Be++)et(x,M[Be],F,ee,_e);return null}return F=nt(F),x&&x[Xe]?x.K(M,F,h(ee)?!!ee.capture:!1,_e):Pt(x,M,F,!1,ee,_e)}function Pt(x,M,F,ee,_e,Be){if(!M)throw Error("Invalid event type");var gt=h(_e)?!!_e.capture:!!_e,tn=ce(x);if(tn||(x[Ge]=tn=new te(x)),F=tn.add(M,F,ee,gt,Be),F.proxy)return F;if(ee=Me(),F.proxy=ee,ee.src=x,ee.listener=F,x.addEventListener)xe||(_e=gt),_e===void 0&&(_e=!1),x.addEventListener(M.toString(),ee,_e);else if(x.attachEvent)x.attachEvent(St(M.toString()),ee);else if(x.addListener&&x.removeListener)x.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Me(){function x(F){return M.call(x.src,x.listener,F)}const M=Fe;return x}function tt(x,M,F,ee,_e){if(Array.isArray(M))for(var Be=0;Be<M.length;Be++)tt(x,M[Be],F,ee,_e);else ee=h(ee)?!!ee.capture:!!ee,F=nt(F),x&&x[Xe]?(x=x.i,M=String(M).toString(),M in x.g&&(Be=x.g[M],F=Pe(Be,F,ee,_e),-1<F&&(me(Be[F]),Array.prototype.splice.call(Be,F,1),Be.length==0&&(delete x.g[M],x.h--)))):x&&(x=ce(x))&&(M=x.g[M.toString()],x=-1,M&&(x=Pe(M,F,ee,_e)),(F=-1<x?M[x]:null)&&bt(F))}function bt(x){if(typeof x!="number"&&x&&!x.da){var M=x.src;if(M&&M[Xe])re(M.i,x);else{var F=x.type,ee=x.proxy;M.removeEventListener?M.removeEventListener(F,ee,x.capture):M.detachEvent?M.detachEvent(St(F),ee):M.addListener&&M.removeListener&&M.removeListener(ee),(F=ce(M))?(re(F,x),F.h==0&&(F.src=null,M[Ge]=null)):me(x)}}}function St(x){return x in it?it[x]:it[x]="on"+x}function Fe(x,M){if(x.da)x=!0;else{M=new Oe(M,this);var F=x.listener,ee=x.ha||x.src;x.fa&&bt(x),x=F.call(ee,M)}return x}function ce(x){return x=x[Ge],x instanceof te?x:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(x){return typeof x=="function"?x:(x[We]||(x[We]=function(M){return x.handleEvent(M)}),x[We])}function ut(){ne.call(this),this.i=new te(this),this.M=this,this.F=null}_(ut,ne),ut.prototype[Xe]=!0,ut.prototype.removeEventListener=function(x,M,F,ee){tt(this,x,M,F,ee)};function dt(x,M){var F,ee=x.F;if(ee)for(F=[];ee;ee=ee.F)F.push(ee);if(x=x.M,ee=M.type||M,typeof M=="string")M=new ae(M,x);else if(M instanceof ae)M.target=M.target||x;else{var _e=M;M=new ae(ee,x),z(M,_e)}if(_e=!0,F)for(var Be=F.length-1;0<=Be;Be--){var gt=M.g=F[Be];_e=Ft(gt,ee,!0,M)&&_e}if(gt=M.g=x,_e=Ft(gt,ee,!0,M)&&_e,_e=Ft(gt,ee,!1,M)&&_e,F)for(Be=0;Be<F.length;Be++)gt=M.g=F[Be],_e=Ft(gt,ee,!1,M)&&_e}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var x=this.i,M;for(M in x.g){for(var F=x.g[M],ee=0;ee<F.length;ee++)me(F[ee]);delete x.g[M],x.h--}}this.F=null},ut.prototype.K=function(x,M,F,ee){return this.i.add(String(x),M,!1,F,ee)},ut.prototype.L=function(x,M,F,ee){return this.i.add(String(x),M,!0,F,ee)};function Ft(x,M,F,ee){if(M=x.i.g[String(M)],!M)return!0;M=M.concat();for(var _e=!0,Be=0;Be<M.length;++Be){var gt=M[Be];if(gt&&!gt.da&&gt.capture==F){var tn=gt.listener,va=gt.ha||gt.src;gt.fa&&re(x.i,gt),_e=tn.call(va,ee)!==!1&&_e}}return _e&&!ee.defaultPrevented}function tr(x,M,F){if(typeof x=="function")F&&(x=y(x,F));else if(x&&typeof x.handleEvent=="function")x=y(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:c.setTimeout(x,M||0)}function kr(x){x.g=tr(()=>{x.g=null,x.i&&(x.i=!1,kr(x))},x.l);const M=x.h;x.h=null,x.m.apply(null,M)}class be extends ne{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:kr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(x){ne.call(this),this.h=x,this.g={}}_(st,ne);var Et=[];function Dt(x){P(x.g,function(M,F){this.g.hasOwnProperty(F)&&bt(M)},x),x.g={}}st.prototype.N=function(){st.aa.N.call(this),Dt(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=c.JSON.stringify,Ze=c.JSON.parse,ir=class{stringify(x){return c.JSON.stringify(x,void 0)}parse(x){return c.JSON.parse(x,void 0)}};function br(){}br.prototype.h=null;function Lr(x){return x.h||(x.h=x.i())}function hn(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gt(){ae.call(this,"d")}_(Gt,ae);function Ut(){ae.call(this,"c")}_(Ut,ae);var _t={},Br=null;function sn(){return Br=Br||new ut}_t.La="serverreachability";function Wr(x){ae.call(this,_t.La,x)}_(Wr,ae);function $r(x){const M=sn();dt(M,new Wr(M))}_t.STAT_EVENT="statevent";function fn(x,M){ae.call(this,_t.STAT_EVENT,x),this.stat=M}_(fn,ae);function cr(x){const M=sn();dt(M,new fn(M,x))}_t.Ma="timingevent";function ga(x,M){ae.call(this,_t.Ma,x),this.size=M}_(ga,ae);function pn(x,M){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){x()},M)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function ti(x,M,F,ee,_e,Be){x.info(function(){if(x.g)if(Be)for(var gt="",tn=Be.split("&"),va=0;va<tn.length;va++){var yr=tn[va].split("=");if(1<yr.length){var Ha=yr[0];yr=yr[1];var Ga=Ha.split("_");gt=2<=Ga.length&&Ga[1]=="type"?gt+(Ha+"="+yr+"&"):gt+(Ha+"=redacted&")}}else gt=null;else gt=Be;return"XMLHTTP REQ ("+ee+") [attempt "+_e+"]: "+M+`
`+F+`
`+gt})}function Tr(x,M,F,ee,_e,Be,gt){x.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+_e+"]: "+M+`
`+F+`
`+Be+" "+gt})}function mn(x,M,F,ee){x.info(function(){return"XMLHTTP TEXT ("+M+"): "+Wn(x,F)+(ee?" "+ee:"")})}function ri(x,M){x.info(function(){return"TIMEOUT: "+M})}Rn.prototype.info=function(){};function Wn(x,M){if(!x.g)return M;if(!M)return null;try{var F=JSON.parse(M);if(F){for(x=0;x<F.length;x++)if(Array.isArray(F[x])){var ee=F[x];if(!(2>ee.length)){var _e=ee[1];if(Array.isArray(_e)&&!(1>_e.length)){var Be=_e[0];if(Be!="noop"&&Be!="stop"&&Be!="close")for(var gt=1;gt<_e.length;gt++)_e[gt]=""}}}}return $t(F)}catch{return M}}var Jr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},An;function ni(){}_(ni,br),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},An=new ni;function qa(x,M,F,ee){this.j=x,this.i=M,this.l=F,this.R=ee||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var ls={},gi={};function Tt(x,M,F){x.L=1,x.v=ve(At(M)),x.m=F,x.P=!0,fe(x,null)}function fe(x,M){x.F=Date.now(),Xt(x),x.A=At(x.v);var F=x.A,ee=x.R;Array.isArray(ee)||(ee=[String(ee)]),hs(F.i,"t",ee),x.C=0,F=x.j.J,x.h=new Ai,x.g=H1(x.j,F?M:null,!x.m),0<x.O&&(x.M=new be(y(x.Y,x,x.g),x.O)),M=x.U,F=x.g,ee=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Et[0]=_e.toString()),_e=Et);for(var Be=0;Be<_e.length;Be++){var gt=et(F,_e[Be],ee||M.handleEvent,!1,M.h||M);if(!gt)break;M.g[gt.key]=gt}M=x.H?N(x.H):{},x.m?(x.u||(x.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,M)):(x.u="GET",x.g.ea(x.A,x.u,null,M)),$r(),ti(x.i,x.u,x.A,x.l,x.R,x.m)}qa.prototype.ca=function(x){x=x.target;const M=this.M;M&&Ei(x)==3?M.j():this.Y(x)},qa.prototype.Y=function(x){try{if(x==this.g)e:{const Ga=Ei(this.g);var M=this.g.Ba();const Nc=this.g.Z();if(!(3>Ga)&&(Ga!=3||this.g&&(this.h.h||this.g.oa()||Wu(this.g)))){this.J||Ga!=4||M==7||(M==8||0>=Nc?$r(3):$r(2)),on(this);var F=this.g.Z();this.X=F;t:if(Je(this)){var ee=Wu(this.g);x="";var _e=ee.length,Be=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),Kr(this);var gt="";break t}this.h.i=new c.TextDecoder}for(M=0;M<_e;M++)this.h.h=!0,x+=this.h.i.decode(ee[M],{stream:!(Be&&M==_e-1)});ee.length=0,this.h.g+=x,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=F==200,Tr(this.i,this.u,this.A,this.l,this.R,Ga,F),this.o){if(this.T&&!this.K){t:{if(this.g){var tn,va=this.g;if((tn=va.g?va.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(tn)){var yr=tn;break t}}yr=null}if(F=yr)mn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,F);else{this.o=!1,this.s=3,cr(12),yn(this),Kr(this);break e}}if(this.P){F=!0;let Vi;for(;!this.J&&this.C<gt.length;)if(Vi=ht(this,gt),Vi==gi){Ga==4&&(this.s=4,cr(14),F=!1),mn(this.i,this.l,null,"[Incomplete Response]");break}else if(Vi==ls){this.s=4,cr(15),mn(this.i,this.l,gt,"[Invalid Chunk]"),F=!1;break}else mn(this.i,this.l,Vi,null),Cr(this,Vi);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ga!=4||gt.length!=0||this.h.h||(this.s=1,cr(16),F=!1),this.o=this.o&&F,!F)mn(this.i,this.l,gt,"[Invalid Chunked Response]"),yn(this),Kr(this);else if(0<gt.length&&!this.W){this.W=!0;var Ha=this.j;Ha.g==this&&Ha.ba&&!Ha.M&&(Ha.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),Yf(Ha),Ha.M=!0,cr(11))}}else mn(this.i,this.l,gt,null),Cr(this,gt);Ga==4&&yn(this),this.o&&!this.J&&(Ga==4?V1(this.j,this):(this.o=!1,Xt(this)))}else D1(this.g),F==400&&0<gt.indexOf("Unknown SID")?(this.s=3,cr(12)):(this.s=0,cr(13)),yn(this),Kr(this)}}}catch{}finally{}};function Je(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function ht(x,M){var F=x.C,ee=M.indexOf(`
`,F);return ee==-1?gi:(F=Number(M.substring(F,ee)),isNaN(F)?ls:(ee+=1,ee+F>M.length?gi:(M=M.slice(ee,ee+F),x.C=ee+F,M)))}qa.prototype.cancel=function(){this.J=!0,yn(this)};function Xt(x){x.S=Date.now()+x.I,hr(x,x.I)}function hr(x,M){if(x.B!=null)throw Error("WatchDog timer not null");x.B=pn(y(x.ba,x),M)}function on(x){x.B&&(c.clearTimeout(x.B),x.B=null)}qa.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(ri(this.i,this.A),this.L!=2&&($r(),cr(17)),yn(this),this.s=2,Kr(this)):hr(this,this.S-x)};function Kr(x){x.j.G==0||x.J||V1(x.j,x)}function yn(x){on(x);var M=x.M;M&&typeof M.ma=="function"&&M.ma(),x.M=null,Dt(x.U),x.g&&(M=x.g,x.g=null,M.abort(),M.ma())}function Cr(x,M){try{var F=x.j;if(F.G!=0&&(F.g==x||us(F.h,x))){if(!x.K&&us(F.h,x)&&F.G==3){try{var ee=F.Da.g.parse(M)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var _e=ee;if(_e[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<x.F)_c(F),Sc(F);else break e;Xf(F),cr(18)}}else F.za=_e[1],0<F.za-F.T&&37500>_e[2]&&F.F&&F.v==0&&!F.C&&(F.C=pn(y(F.Za,F),6e3));if(1>=dl(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else fl(F,11)}else if((x.K||F.g==x)&&_c(F),!O(M))for(_e=F.Da.g.parse(M),M=0;M<_e.length;M++){let yr=_e[M];if(F.T=yr[0],yr=yr[1],F.G==2)if(yr[0]=="c"){F.K=yr[1],F.ia=yr[2];const Ha=yr[3];Ha!=null&&(F.la=Ha,F.j.info("VER="+F.la));const Ga=yr[4];Ga!=null&&(F.Aa=Ga,F.j.info("SVER="+F.Aa));const Nc=yr[5];Nc!=null&&typeof Nc=="number"&&0<Nc&&(ee=1.5*Nc,F.L=ee,F.j.info("backChannelRequestTimeoutMs_="+ee)),ee=F;const Vi=x.g;if(Vi){const Xu=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xu){var Be=ee.h;Be.g||Xu.indexOf("spdy")==-1&&Xu.indexOf("quic")==-1&&Xu.indexOf("h2")==-1||(Be.j=Be.l,Be.g=new Set,Be.h&&(ds(Be,Be.h),Be.h=null))}if(ee.D){const pl=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;pl&&(ee.ya=pl,oe(ee.I,ee.D,pl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-x.F,F.j.info("Handshake RTT: "+F.R+"ms")),ee=F;var gt=x;if(ee.qa=q1(ee,ee.J?ee.ia:null,ee.W),gt.K){Oa(ee.h,gt);var tn=gt,va=ee.L;va&&(tn.I=va),tn.B&&(on(tn),Xt(tn)),ee.g=gt}else U1(ee);0<F.i.length&&T0(F)}else yr[0]!="stop"&&yr[0]!="close"||fl(F,7);else F.G==3&&(yr[0]=="stop"||yr[0]=="close"?yr[0]=="stop"?fl(F,7):Kf(F):yr[0]!="noop"&&F.l&&F.l.ta(yr),F.v=0)}}$r(4)}catch{}}var Rs=class{constructor(x,M){this.g=x,this.map=M}};function cs(x){this.l=x||10,c.PerformanceNavigationTiming?(x=c.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oo(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function dl(x){return x.h?1:x.g?x.g.size:0}function us(x,M){return x.h?x.h==M:x.g?x.g.has(M):!1}function ds(x,M){x.g?x.g.add(M):x.h=M}function Oa(x,M){x.h&&x.h==M?x.h=null:x.g&&x.g.has(M)&&x.g.delete(M)}cs.prototype.cancel=function(){if(this.i=ya(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function ya(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let M=x.i;for(const F of x.g.values())M=M.concat(F.D);return M}return S(x.i)}function q(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(d(x)){for(var M=[],F=x.length,ee=0;ee<F;ee++)M.push(x[ee]);return M}M=[],F=0;for(ee in x)M[F++]=x[ee];return M}function we(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(d(x)||typeof x=="string"){var M=[];x=x.length;for(var F=0;F<x;F++)M.push(F);return M}M=[],F=0;for(const ee in x)M[F++]=ee;return M}}}function Te(x,M){if(x.forEach&&typeof x.forEach=="function")x.forEach(M,void 0);else if(d(x)||typeof x=="string")Array.prototype.forEach.call(x,M,void 0);else for(var F=we(x),ee=q(x),_e=ee.length,Be=0;Be<_e;Be++)M.call(void 0,ee[Be],F&&F[Be],x)}var Ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(x,M){if(x){x=x.split("&");for(var F=0;F<x.length;F++){var ee=x[F].indexOf("="),_e=null;if(0<=ee){var Be=x[F].substring(0,ee);_e=x[F].substring(ee+1)}else Be=x[F];M(Be,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Ot(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Ot){this.h=x.h,Yt(this,x.j),this.o=x.o,this.g=x.g,wr(this,x.s),this.l=x.l;var M=x.i,F=new jn;F.i=M.i,M.g&&(F.g=new Map(M.g),F.h=M.h),en(this,F),this.m=x.m}else x&&(M=String(x).match(Ne))?(this.h=!1,Yt(this,M[1]||"",!0),this.o=$e(M[2]||""),this.g=$e(M[3]||"",!0),wr(this,M[4]),this.l=$e(M[5]||"",!0),en(this,M[6]||"",!0),this.m=$e(M[7]||"")):(this.h=!1,this.i=new jn(null,this.h))}Ot.prototype.toString=function(){var x=[],M=this.j;M&&x.push(De(M,rr,!0),":");var F=this.g;return(F||M=="file")&&(x.push("//"),(M=this.o)&&x.push(De(M,rr,!0),"@"),x.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&x.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&x.push("/"),x.push(De(F,F.charAt(0)=="/"?En:Qt,!0))),(F=this.i.toString())&&x.push("?",F),(F=this.m)&&x.push("#",De(F,Ms)),x.join("")};function At(x){return new Ot(x)}function Yt(x,M,F){x.j=F?$e(M,!0):M,x.j&&(x.j=x.j.replace(/:$/,""))}function wr(x,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);x.s=M}else x.s=null}function en(x,M,F){M instanceof jn?(x.i=M,R1(x.i,x.h)):(F||(M=De(M,Ia)),x.i=new jn(M,x.h))}function oe(x,M,F){x.i.set(M,F)}function ve(x){return oe(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function $e(x,M){return x?M?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function De(x,M,F){return typeof x=="string"?(x=encodeURI(x).replace(M,ft),F&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function ft(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var rr=/[#\/\?@]/g,Qt=/[#\?:]/g,En=/[#\?]/g,Ia=/[#\?@]/g,Ms=/#/g;function jn(x,M){this.h=this.g=null,this.i=x||null,this.j=!!M}function vn(x){x.g||(x.g=new Map,x.h=0,x.i&&mt(x.i,function(M,F){x.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=jn.prototype,t.add=function(x,M){vn(this),this.i=null,x=yi(this,x);var F=this.g.get(x);return F||this.g.set(x,F=[]),F.push(M),this.h+=1,this};function Co(x,M){vn(x),M=yi(x,M),x.g.has(M)&&(x.i=null,x.h-=x.g.get(M).length,x.g.delete(M))}function Or(x,M){return vn(x),M=yi(x,M),x.g.has(M)}t.forEach=function(x,M){vn(this),this.g.forEach(function(F,ee){F.forEach(function(_e){x.call(M,_e,ee,this)},this)},this)},t.na=function(){vn(this);const x=Array.from(this.g.values()),M=Array.from(this.g.keys()),F=[];for(let ee=0;ee<M.length;ee++){const _e=x[ee];for(let Be=0;Be<_e.length;Be++)F.push(M[ee])}return F},t.V=function(x){vn(this);let M=[];if(typeof x=="string")Or(this,x)&&(M=M.concat(this.g.get(yi(this,x))));else{x=Array.from(this.g.values());for(let F=0;F<x.length;F++)M=M.concat(x[F])}return M},t.set=function(x,M){return vn(this),this.i=null,x=yi(this,x),Or(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[M]),this.h+=1,this},t.get=function(x,M){return x?(x=this.V(x),0<x.length?String(x[0]):M):M};function hs(x,M,F){Co(x,M),0<F.length&&(x.i=null,x.g.set(yi(x,M),S(F)),x.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],M=Array.from(this.g.keys());for(var F=0;F<M.length;F++){var ee=M[F];const Be=encodeURIComponent(String(ee)),gt=this.V(ee);for(ee=0;ee<gt.length;ee++){var _e=Be;gt[ee]!==""&&(_e+="="+encodeURIComponent(String(gt[ee]))),x.push(_e)}}return this.i=x.join("&")};function yi(x,M){return M=String(M),x.j&&(M=M.toLowerCase()),M}function R1(x,M){M&&!x.j&&(vn(x),x.i=null,x.g.forEach(function(F,ee){var _e=ee.toLowerCase();ee!=_e&&(Co(this,ee),hs(this,_e,F))},x)),x.j=M}function Gf(x,M){const F=new Rn;if(c.Image){const ee=new Image;ee.onload=v(zi,F,"TestLoadImage: loaded",!0,M,ee),ee.onerror=v(zi,F,"TestLoadImage: error",!1,M,ee),ee.onabort=v(zi,F,"TestLoadImage: abort",!1,M,ee),ee.ontimeout=v(zi,F,"TestLoadImage: timeout",!1,M,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=x}else M(!1)}function M1(x,M){const F=new Rn,ee=new AbortController,_e=setTimeout(()=>{ee.abort(),zi(F,"TestPingServer: timeout",!1,M)},1e4);fetch(x,{signal:ee.signal}).then(Be=>{clearTimeout(_e),Be.ok?zi(F,"TestPingServer: ok",!0,M):zi(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(_e),zi(F,"TestPingServer: error",!1,M)})}function zi(x,M,F,ee,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),ee(F)}catch{}}function lo(){this.g=new ir}function Wf(x,M,F){const ee=F||"";try{Te(x,function(_e,Be){let gt=_e;h(_e)&&(gt=$t(_e)),M.push(ee+Be+"="+encodeURIComponent(gt))})}catch(_e){throw M.push(ee+"type="+encodeURIComponent("_badmap")),_e}}function Oo(x){this.l=x.Ub||null,this.j=x.eb||!1}_(Oo,br),Oo.prototype.g=function(){return new fs(this.l,this.j)},Oo.prototype.i=(function(x){return function(){return x}})({});function fs(x,M){ut.call(this),this.D=x,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(fs,ut),t=fs.prototype,t.open=function(x,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=M,this.readyState=1,vc(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(M.body=x),(this.D||c).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,vc(this)),this.g&&(this.readyState=3,vc(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;S0(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function S0(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}t.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var M=x.value?x.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!x.done}))&&(this.response=this.responseText+=M)}x.done?Io(this):vc(this),this.readyState==3&&S0(this)}},t.Ra=function(x){this.g&&(this.response=this.responseText=x,Io(this))},t.Qa=function(x){this.g&&(this.response=x,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(x){x.readyState=4,x.l=null,x.j=null,x.v=null,vc(x)}t.setRequestHeader=function(x,M){this.u.append(x,M)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,x.push(F[0]+": "+F[1]),F=M.next();return x.join(`\r
`)};function vc(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Hu(x){let M="";return P(x,function(F,ee){M+=ee,M+=":",M+=F,M+=`\r
`}),M}function xc(x,M,F){e:{for(ee in F){var ee=!1;break e}ee=!0}ee||(F=Hu(F),typeof x=="string"?F!=null&&encodeURIComponent(String(F)):oe(x,M,F))}function Ln(x){ut.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ln,ut);var vi=/^https?$/i,hl=["POST","PUT"];t=Ln.prototype,t.Ha=function(x){this.J=x},t.ea=function(x,M,F,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);M=M?M.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():An.g(),this.v=this.o?Lr(this.o):Lr(An),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(M,String(x),!0),this.B=!1}catch(Be){Gu(this,Be);return}if(x=F||"",F=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var _e in ee)F.set(_e,ee[_e]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Be of ee.keys())F.set(Be,ee.get(Be));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(F.keys()).find(Be=>Be.toLowerCase()=="content-type"),_e=c.FormData&&x instanceof c.FormData,!(0<=Array.prototype.indexOf.call(hl,M,void 0))||ee||_e||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Be,gt]of F)this.g.setRequestHeader(Be,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_0(this),this.u=!0,this.g.send(x),this.u=!1}catch(Be){Gu(this,Be)}};function Gu(x,M){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=M,x.m=5,bc(x),wc(x)}function bc(x){x.A||(x.A=!0,dt(x,"complete"),dt(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,dt(this,"complete"),dt(this,"abort"),wc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wc(this,!0)),Ln.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?P1(this):this.bb())},t.bb=function(){P1(this)};function P1(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Ei(x)!=4||x.Z()!=2)){if(x.u&&Ei(x)==4)tr(x.Ea,0,x);else if(dt(x,"readystatechange"),Ei(x)==4){x.h=!1;try{const gt=x.Z();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var ee;if(ee=gt===0){var _e=String(x.D).match(Ne)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),ee=!vi.test(_e?_e.toLowerCase():"")}F=ee}if(F)dt(x,"complete"),dt(x,"success");else{x.m=6;try{var Be=2<Ei(x)?x.g.statusText:""}catch{Be=""}x.l=Be+" ["+x.Z()+"]",bc(x)}}finally{wc(x)}}}}function wc(x,M){if(x.g){_0(x);const F=x.g,ee=x.v[0]?()=>{}:null;x.g=null,x.v=null,M||dt(x,"ready");try{F.onreadystatechange=ee}catch{}}}function _0(x){x.I&&(c.clearTimeout(x.I),x.I=null)}t.isActive=function(){return!!this.g};function Ei(x){return x.g?x.g.readyState:0}t.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(x){if(this.g){var M=this.g.responseText;return x&&M.indexOf(x)==0&&(M=M.substring(x.length)),Ze(M)}};function Wu(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function D1(x){const M={};x=(x.g&&2<=Ei(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<x.length;ee++){if(O(x[ee]))continue;var F=D(x[ee]);const _e=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const Be=M[_e]||[];M[_e]=Be,Be.push(F)}E(M,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ku(x,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[x]||M}function L1(x){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ku("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ku("baseRetryDelayMs",5e3,x),this.cb=Ku("retryDelaySeedMs",1e4,x),this.Wa=Ku("forwardChannelMaxRetries",2,x),this.wa=Ku("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(x&&x.concurrentRequestLimit),this.Da=new lo,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=L1.prototype,t.la=8,t.G=1,t.connect=function(x,M,F,ee){cr(0),this.W=x,this.H=M||{},F&&ee!==void 0&&(this.H.OSID=F,this.H.OAID=ee),this.F=this.X,this.I=q1(this,null,this.W),T0(this)};function Kf(x){if(B1(x),x.G==3){var M=x.U++,F=At(x.I);if(oe(F,"SID",x.K),oe(F,"RID",M),oe(F,"TYPE","terminate"),Qu(x,F),M=new qa(x,x.j,M),M.L=2,M.v=ve(At(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(M.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=M.v,F=!0),F||(M.g=H1(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Xt(M)}Zf(x)}function Sc(x){x.g&&(Yf(x),x.g.cancel(),x.g=null)}function B1(x){Sc(x),x.u&&(c.clearTimeout(x.u),x.u=null),_c(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&c.clearTimeout(x.s),x.s=null)}function T0(x){if(!oo(x.h)&&!x.s){x.s=!0;var M=x.Ga;J||pe(),ie||(J(),ie=!0),he.add(M,x),x.B=0}}function Dw(x,M){return dl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=M.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=pn(y(x.Ga,x,M),F1(x,x.B)),x.B++,!0)}t.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new qa(this,this.j,x);let Be=this.o;if(this.S&&(Be?(Be=N(Be),z(Be,this.S)):Be=this.S),this.m!==null||this.O||(_e.H=Be,Be=null),this.P)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var ee=this.i[F];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(M+=ee,4096<M){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=Qf(this,_e,M),F=At(this.I),oe(F,"RID",x),oe(F,"CVER",22),this.D&&oe(F,"X-HTTP-Session-Id",this.D),Qu(this,F),Be&&(this.O?M="headers="+encodeURIComponent(String(Hu(Be)))+"&"+M:this.m&&xc(F,this.m,Be)),ds(this.h,_e),this.Ua&&oe(F,"TYPE","init"),this.P?(oe(F,"$req",M),oe(F,"SID","null"),_e.T=!0,Tt(_e,F,null)):Tt(_e,F,M),this.G=2}}else this.G==3&&(x?$1(this,x):this.i.length==0||oo(this.h)||$1(this))};function $1(x,M){var F;M?F=M.l:F=x.U++;const ee=At(x.I);oe(ee,"SID",x.K),oe(ee,"RID",F),oe(ee,"AID",x.T),Qu(x,ee),x.m&&x.o&&xc(ee,x.m,x.o),F=new qa(x,x.j,F,x.B+1),x.m===null&&(F.H=x.o),M&&(x.i=M.D.concat(x.i)),M=Qf(x,F,1e3),F.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),ds(x.h,F),Tt(F,ee,M)}function Qu(x,M){x.H&&P(x.H,function(F,ee){oe(M,ee,F)}),x.l&&Te({},function(F,ee){oe(M,ee,F)})}function Qf(x,M,F){F=Math.min(x.i.length,F);var ee=x.l?y(x.l.Na,x.l,x):null;e:{var _e=x.i;let Be=-1;for(;;){const gt=["count="+F];Be==-1?0<F?(Be=_e[0].g,gt.push("ofs="+Be)):Be=0:gt.push("ofs="+Be);let tn=!0;for(let va=0;va<F;va++){let yr=_e[va].g;const Ha=_e[va].map;if(yr-=Be,0>yr)Be=Math.max(0,_e[va].g-100),tn=!1;else try{Wf(Ha,gt,"req"+yr+"_")}catch{ee&&ee(Ha)}}if(tn){ee=gt.join("&");break e}}}return x=x.i.splice(0,F),M.D=x,ee}function U1(x){if(!x.g&&!x.u){x.Y=1;var M=x.Fa;J||pe(),ie||(J(),ie=!0),he.add(M,x),x.v=0}}function Xf(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=pn(y(x.Fa,x),F1(x,x.v)),x.v++,!0)}t.Fa=function(){if(this.u=null,z1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=pn(y(this.ab,this),x)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cr(10),Sc(this),z1(this))};function Yf(x){x.A!=null&&(c.clearTimeout(x.A),x.A=null)}function z1(x){x.g=new qa(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var M=At(x.qa);oe(M,"RID","rpc"),oe(M,"SID",x.K),oe(M,"AID",x.T),oe(M,"CI",x.F?"0":"1"),!x.F&&x.ja&&oe(M,"TO",x.ja),oe(M,"TYPE","xmlhttp"),Qu(x,M),x.m&&x.o&&xc(M,x.m,x.o),x.L&&(x.g.I=x.L);var F=x.g;x=x.ia,F.L=1,F.v=ve(At(M)),F.m=null,F.P=!0,fe(F,x)}t.Za=function(){this.C!=null&&(this.C=null,Sc(this),Xf(this),cr(19))};function _c(x){x.C!=null&&(c.clearTimeout(x.C),x.C=null)}function V1(x,M){var F=null;if(x.g==M){_c(x),Yf(x),x.g=null;var ee=2}else if(us(x.h,M))F=M.D,Oa(x.h,M),ee=1;else return;if(x.G!=0){if(M.o)if(ee==1){F=M.m?M.m.length:0,M=Date.now()-M.F;var _e=x.B;ee=sn(),dt(ee,new ga(ee,F)),T0(x)}else U1(x);else if(_e=M.s,_e==3||_e==0&&0<M.X||!(ee==1&&Dw(x,M)||ee==2&&Xf(x)))switch(F&&0<F.length&&(M=x.h,M.i=M.i.concat(F)),_e){case 1:fl(x,5);break;case 4:fl(x,10);break;case 3:fl(x,6);break;default:fl(x,2)}}}function F1(x,M){let F=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(F*=2),F*M}function fl(x,M){if(x.j.info("Error code "+M),M==2){var F=y(x.fb,x),ee=x.Xa;const _e=!ee;ee=new Ot(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(ee,"https"),ve(ee),_e?Gf(ee.toString(),F):M1(ee.toString(),F)}else cr(2);x.G=0,x.l&&x.l.sa(M),Zf(x),B1(x)}t.fb=function(x){x?(this.j.info("Successfully pinged google.com"),cr(2)):(this.j.info("Failed to ping google.com"),cr(1))};function Zf(x){if(x.G=0,x.ka=[],x.l){const M=ya(x.h);(M.length!=0||x.i.length!=0)&&(w(x.ka,M),w(x.ka,x.i),x.h.i.length=0,S(x.i),x.i.length=0),x.l.ra()}}function q1(x,M,F){var ee=F instanceof Ot?At(F):new Ot(F);if(ee.g!="")M&&(ee.g=M+"."+ee.g),wr(ee,ee.s);else{var _e=c.location;ee=_e.protocol,M=M?M+"."+_e.hostname:_e.hostname,_e=+_e.port;var Be=new Ot(null);ee&&Yt(Be,ee),M&&(Be.g=M),_e&&wr(Be,_e),F&&(Be.l=F),ee=Be}return F=x.D,M=x.ya,F&&M&&oe(ee,F,M),oe(ee,"VER",x.la),Qu(x,ee),ee}function H1(x,M,F){if(M&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=x.Ca&&!x.pa?new Ln(new Oo({eb:F})):new Ln(x.pa),M.Ha(x.J),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function G1(){}t=G1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function N0(){}N0.prototype.g=function(x,M){return new ji(x,M)};function ji(x,M){ut.call(this),this.g=new L1(M),this.l=x,this.h=M&&M.messageUrlParams||null,x=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(x?x["X-WebChannel-Content-Type"]=M.messageContentType:x={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(x?x["X-WebChannel-Client-Profile"]=M.va:x={"X-WebChannel-Client-Profile":M.va}),this.g.S=x,(x=M&&M.Sb)&&!O(x)&&(this.g.m=x),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!O(M)&&(this.g.D=M,x=this.h,x!==null&&M in x&&(x=this.h,M in x&&delete x[M])),this.j=new Tc(this)}_(ji,ut),ji.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ji.prototype.close=function(){Kf(this.g)},ji.prototype.o=function(x){var M=this.g;if(typeof x=="string"){var F={};F.__data__=x,x=F}else this.u&&(F={},F.__data__=$t(x),x=F);M.i.push(new Rs(M.Ya++,x)),M.G==3&&T0(M)},ji.prototype.N=function(){this.g.l=null,delete this.j,Kf(this.g),delete this.g,ji.aa.N.call(this)};function W1(x){Gt.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var M=x.__sm__;if(M){e:{for(const F in M){x=F;break e}x=void 0}(this.i=x)&&(x=this.i,M=M!==null&&x in M?M[x]:void 0),this.data=M}else this.data=x}_(W1,Gt);function K1(){Ut.call(this),this.status=1}_(K1,Ut);function Tc(x){this.g=x}_(Tc,G1),Tc.prototype.ua=function(){dt(this.g,"a")},Tc.prototype.ta=function(x){dt(this.g,new W1(x))},Tc.prototype.sa=function(x){dt(this.g,new K1)},Tc.prototype.ra=function(){dt(this.g,"b")},N0.prototype.createWebChannel=N0.prototype.g,ji.prototype.send=ji.prototype.o,ji.prototype.open=ji.prototype.m,ji.prototype.close=ji.prototype.close,HV=function(){return new N0},qV=function(){return sn()},FV=_t,tN={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jr.NO_ERROR=0,Jr.TIMEOUT=8,Jr.HTTP_ERROR=6,Fv=Jr,gn.COMPLETE="complete",VV=gn,hn.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,nm=hn,Ln.prototype.listenOnce=Ln.prototype.L,Ln.prototype.getLastError=Ln.prototype.Ka,Ln.prototype.getLastErrorCode=Ln.prototype.Ba,Ln.prototype.getStatus=Ln.prototype.Z,Ln.prototype.getResponseJson=Ln.prototype.Oa,Ln.prototype.getResponseText=Ln.prototype.oa,Ln.prototype.send=Ln.prototype.ea,Ln.prototype.setWithCredentials=Ln.prototype.Ha,zV=Ln}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});const LO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Si=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new x8("@firebase/firestore");function uh(){return Hd.logLevel}function at(t,...e){if(Hd.logLevel<=Er.DEBUG){const r=e.map(R8);Hd.debug(`Firestore (${Af}): ${t}`,...r)}}function da(t,...e){if(Hd.logLevel<=Er.ERROR){const r=e.map(R8);Hd.error(`Firestore (${Af}): ${t}`,...r)}}function Bm(t,...e){if(Hd.logLevel<=Er.WARN){const r=e.map(R8);Hd.warn(`Firestore (${Af}): ${t}`,...r)}}function R8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t="Unexpected state"){const e=`FIRESTORE (${Af}) INTERNAL ASSERTION FAILED: `+t;throw da(e),new Error(e)}function Rt(t,e){t||jt()}function It(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Eo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ure{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Si.UNAUTHENTICATED)))}shutdown(){}}class hre{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Rt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new To;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new To,e.enqueueRetryable((()=>a(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new To)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Rt(typeof n.accessToken=="string"),new ure(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string"),new Si(e)}}class fre{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new fre(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Si.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Rt(this.o===void 0);const n=i=>{i.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Rt(typeof r.token=="string"),this.R=r.token,new mre(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yre(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=yre(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function lr(t,e){return t<e?-1:t>e?1:0}function Ph(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function WV(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new pt(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new pt(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new pt(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pt(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zn.fromMillis(Date.now())}static fromDate(e){return Zn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Zn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Zn(0,0))}static max(){return new Lt(new Zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,r,n){r===void 0?r=0:r>e.length&&jt(),n===void 0?n=e.length-r:n>e.length-r&&jt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return $m.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof $m?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),o=r.get(a);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Fr extends $m{construct(e,r,n){return new Fr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new pt(Ve.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Fr(r)}static emptyPath(){return new Fr([])}}const vre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends $m{construct(e,r,n){return new Yn(e,r,n)}static isValidIdentifier(e){return vre.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yn(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new pt(Ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new pt(Ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new pt(Ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(o=!o,a++):c!=="."||o?(n+=c,a++):(i(),a++)}if(i(),o)throw new pt(Ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(r)}static emptyPath(){return new Yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.path=e}static fromPath(e){return new xt(Fr.fromString(e))}static fromName(e){return new xt(Fr.fromString(e).popFirst(5))}static empty(){return new xt(Fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Fr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new Fr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function rN(t){return t.fields.find((e=>e.kind===2))}function wd(t){return t.fields.filter((e=>e.kind!==2))}px.UNKNOWN_ID=-1;class qv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Um{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Um(0,Cs.min())}}function KV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Lt.fromTimestamp(n===1e9?new Zn(r+1,0):new Zn(r,n));return new Cs(a,xt.empty(),e)}function QV(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Cs(Lt.min(),xt.empty(),-1)}static max(){return new Cs(Lt.max(),xt.empty(),-1)}}function M8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=xt.comparator(t.documentKey,e.documentKey),r!==0?r:lr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(t){if(t.code!==Ve.FAILED_PRECONDITION||t.message!==XV)throw t;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ke(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof ke?r:ke.resolve(r)}catch(r){return ke.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):ke.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):ke.reject(r)}static resolve(e){return new ke(((r,n)=>{r(e)}))}static reject(e){return new ke(((r,n)=>{n(e)}))}static waitFor(e){return new ke(((r,n)=>{let a=0,i=0,o=!1;e.forEach((c=>{++a,c.next((()=>{++i,o&&i===a&&r()}),(d=>n(d)))})),o=!0,i===a&&r()}))}static or(e){let r=ke.resolve(!1);for(const n of e)r=r.next((a=>a?ke.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new ke(((n,a)=>{const i=e.length,o=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{o[h]=p,++c,c===i&&n(o)}),(p=>a(p)))}}))}static doWhile(e,r){return new ke(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new To,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new hm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=P8(n.target.error);this.V.reject(new hm(e,a))}}static open(e,r,n,a){try{return new o2(r,e.transaction(a,n))}catch(i){throw new hm(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new bre(r)}}class wu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,wu.S(Ua())===12.2&&da("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),Td(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nV())return!1;if(wu.v())return!0;const e=Ua(),r=wu.S(e),n=0<r&&r<10,a=ZV(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(at("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const o=i.target.result;r(o)},a.onblocked=()=>{n(new hm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const o=i.target.error;o.name==="VersionError"?n(new pt(Ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new pt(Ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new hm(e,o))},a.onupgradeneeded=i=>{at("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,a.transaction,i.oldVersion,this.version).next((()=>{at("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const c=o2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),ke.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&o<3;if(at("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class xre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Td(this.B.delete())}}class hm extends pt{constructor(e,r){super(Ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Du(t){return t.name==="IndexedDbTransactionError"}class bre{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(at("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Td(n)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),Td(this.store.add(e))}get(e){return Td(this.store.get(e)).next((r=>(r===void 0&&(r=null),at("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),Td(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),Td(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new ke(((o,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(n),o=[];return this.W(i,((c,d)=>{o.push(d)})).next((()=>o))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new ke(((a,i)=>{n.onerror=o=>{i(o.target.error)},n.onsuccess=o=>{a(o.target.result)}}))}j(e,r){at("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,o,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new ke(((n,a)=>{r.onerror=i=>{const o=P8(i.target.error);a(o)},r.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():n()})):n()}}))}W(e,r){const n=[];return new ke(((a,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void a();const d=new xre(c),h=r(c.primaryKey,c.value,d);if(h instanceof ke){const p=h.catch((m=>(d.done(),ke.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>ke.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Td(t){return new ke(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=P8(n.target.error);r(a)}}))}let BO=!1;function P8(t){const e=wu.S(Ua());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BO||(BO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class wre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){at("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{at("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Du(r)?at("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Pu(r)}await this.X(6e4)}))}}class Sre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return ke.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!n.has(o))return at("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,a).next((c=>{a-=c,n.add(o)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this.re(a,i))).next((c=>(at("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>o.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const o=QV(i);M8(o,n)>0&&(n=o)})),new Cs(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}es.oe=-1;function Jg(t){return t==null}function zm(t){return t===0&&1/t==-1/0}function JV(t){return typeof t=="number"&&Number.isInteger(t)&&!zm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=$O(e)),e=_re(t.get(r),e);return $O(e)}function _re(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function $O(t){return t+""}function Uo(t){const e=t.length;if(Rt(e>=2),e===2)return Rt(t.charAt(0)===""&&t.charAt(1)===""),Fr.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>r)&&jt(),t.charAt(o+1)){case"":const c=t.substring(i,o);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,o),a+="\0";break;case"":a+=t.substring(i,o+1);break;default:jt()}i=o+2}return new Fr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e){return[t,Li(e)]}function eF(t,e,r){return[t,Li(e),r]}const Tre={},Nre=["prefixPath","collectionGroup","readTime","documentId"],Are=["prefixPath","collectionGroup","documentId"],Ere=["collectionGroup","readTime","prefixPath","documentId"],jre=["canonicalId","targetId"],kre=["targetId","path"],Cre=["path","targetId"],Ore=["collectionId","parent"],Ire=["indexId","uid"],Rre=["uid","sequenceNumber"],Mre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pre=["indexId","uid","orderedDocumentKey"],Dre=["userId","collectionPath","documentId"],Lre=["userId","collectionPath","largestBatchId"],Bre=["userId","collectionGroup","largestBatchId"],tF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$re=[...tF,"documentOverlays"],rF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nF=rF,D8=[...nF,"indexConfiguration","indexState","indexEntries"],Ure=D8,zre=[...D8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN extends YV{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Va(t,e){const r=It(t);return wu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function f0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function aF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,r){this.comparator=e,this.root=r||ui.EMPTY}insert(e,r){return new Dn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tv(this.root,e,this.comparator,!1)}getReverseIterator(){return new tv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tv(this.root,e,this.comparator,!0)}}class tv{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??ui.RED,this.left=a??ui.EMPTY,this.right=i??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new ui(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ui.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(e,r,n,a,i){return this}insert(e,r,n){return new ui(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new VO(this.data.getIterator())}getIteratorFrom(e){return new VO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Tn(this.comparator);return r.data=e,r}}class VO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function eh(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new ts([])}unionWith(e){let r=new Tn(Yn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ts(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ph(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iF("Invalid base64 string: "+i):i}})(e);return new ma(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let o=0;o<a.length;++o)i+=String.fromCharCode(a[o]);return i})(e);return new ma(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ma.EMPTY_BYTE_STRING=new ma("");const Vre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(t){if(Rt(!!t),typeof t=="string"){let e=0;const r=Vre.exec(t);if(Rt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Fn(t.seconds),nanos:Fn(t.nanos)}}function Fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Eu(t){return typeof t=="string"?ma.fromBase64String(t):ma.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function B8(t){const e=t.mapValue.fields.__previous_value__;return L8(e)?B8(e):e}function Vm(t){const e=nc(t.mapValue.fields.__local_write_time__.timestampValue);return new Zn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fre{constructor(e,r,n,a,i,o,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Gd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Gd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Gd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gv={nullValue:"NULL_VALUE"};function Wd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?L8(t)?4:sF(t)?9007199254740991:l2(t)?10:11:jt()}function Yo(t,e){if(t===e)return!0;const r=Wd(t);if(r!==Wd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vm(t).isEqual(Vm(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const o=nc(a.timestampValue),c=nc(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Eu(a.bytesValue).isEqual(Eu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Fn(a.geoPointValue.latitude)===Fn(i.geoPointValue.latitude)&&Fn(a.geoPointValue.longitude)===Fn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Fn(a.integerValue)===Fn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const o=Fn(a.doubleValue),c=Fn(i.doubleValue);return o===c?zm(o)===zm(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Ph(t.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:case 11:return(function(a,i){const o=a.mapValue.fields||{},c=i.mapValue.fields||{};if(zO(o)!==zO(c))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(c[d]===void 0||!Yo(o[d],c[d])))return!1;return!0})(t,e);default:return jt()}}function Fm(t,e){return(t.values||[]).find((r=>Yo(r,e)))!==void 0}function ju(t,e){if(t===e)return 0;const r=Wd(t),n=Wd(e);if(r!==n)return lr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return lr(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Fn(i.integerValue||i.doubleValue),d=Fn(o.integerValue||o.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return FO(t.timestampValue,e.timestampValue);case 4:return FO(Vm(t),Vm(e));case 5:return lr(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Eu(i),d=Eu(o);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),d=o.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=lr(c[h],d[h]);if(p!==0)return p}return lr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=lr(Fn(i.latitude),Fn(o.latitude));return c!==0?c:lr(Fn(i.longitude),Fn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return qO(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var c,d,h,p;const m=i.fields||{},y=o.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,_=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=lr(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((p=_==null?void 0:_.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:qO(v,_)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===cu.mapValue&&o===cu.mapValue)return 0;if(i===cu.mapValue)return 1;if(o===cu.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=lr(d[m],p[m]);if(y!==0)return y;const v=ju(c[d[m]],h[p[m]]);if(v!==0)return v}return lr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw jt()}}function FO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lr(t,e);const r=nc(t),n=nc(e),a=lr(r.seconds,n.seconds);return a!==0?a:lr(r.nanos,n.nanos)}function qO(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=ju(r[a],n[a]);if(i)return i}return lr(r.length,n.length)}function Dh(t){return aN(t)}function aN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=nc(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Eu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return xt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=aN(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const o of n)i?i=!1:a+=",",a+=`${o}:${aN(r.fields[o])}`;return a+"}"})(t.mapValue):jt()}function qm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iN(t){return!!t&&"integerValue"in t}function Hm(t){return!!t&&"arrayValue"in t}function HO(t){return!!t&&"nullValue"in t}function GO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wv(t){return!!t&&"mapValue"in t}function l2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function fm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return f0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=fm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=fm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function sF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const oF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qre(t){return"nullValue"in t?Gv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qm(Gd.empty(),xt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?l2(t)?oF:{mapValue:{}}:jt()}function Hre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qm(Gd.empty(),xt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?oF:"mapValue"in t?l2(t)?{mapValue:{}}:cu:jt()}function WO(t,e){const r=ju(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function KO(t,e){const r=ju(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Wv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=fm(r)}setAll(e){let r=Yn.emptyPath(),n={},a=[];e.forEach(((o,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}o?n[c.lastSegment()]=fm(o):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());Wv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Wv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){f0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new hi(fm(this.value))}}function lF(t){const e=[];return f0(t.fields,((r,n)=>{const a=new Yn([r]);if(Wv(n)){const i=lF(n.mapValue).fields;if(i.length===0)e.push(a);else for(const o of i)e.push(a.child(o))}else e.push(a)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,r,n,a,i,o,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new qn(e,0,Lt.min(),Lt.min(),Lt.min(),hi.empty(),0)}static newFoundDocument(e,r,n,a){return new qn(e,1,r,Lt.min(),n,a,0)}static newNoDocument(e,r){return new qn(e,2,r,Lt.min(),Lt.min(),hi.empty(),0)}static newUnknownDocument(e,r){return new qn(e,3,r,Lt.min(),Lt.min(),hi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,r){this.position=e,this.inclusive=r}}function QO(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],o=t.position[a];if(i.field.isKeyField()?n=xt.comparator(xt.fromName(o.referenceValue),r.key):n=ju(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function XO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Yo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,r="asc"){this.field=e,this.dir=r}}function Gre(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cF=class{};class jr extends cF{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Wre(e,r,n):r==="array-contains"?new Xre(e,n):r==="in"?new mF(e,n):r==="not-in"?new Yre(e,n):r==="array-contains-any"?new Zre(e,n):new jr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Kre(e,n):new Qre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(ju(r,this.value)):r!==null&&Wd(this.value)===Wd(r)&&this.matchesComparison(ju(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends cF{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new dn(e,r)}matches(e){return Bh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Bh(t){return t.op==="and"}function sN(t){return t.op==="or"}function $8(t){return uF(t)&&Bh(t)}function uF(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function oN(t){if(t instanceof jr)return t.field.canonicalString()+t.op.toString()+Dh(t.value);if($8(t))return t.filters.map((e=>oN(e))).join(",");{const e=t.filters.map((r=>oN(r))).join(",");return`${t.op}(${e})`}}function dF(t,e){return t instanceof jr?(function(n,a){return a instanceof jr&&n.op===a.op&&n.field.isEqual(a.field)&&Yo(n.value,a.value)})(t,e):t instanceof dn?(function(n,a){return a instanceof dn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,o,c)=>i&&dF(o,a.filters[c])),!0):!1})(t,e):void jt()}function hF(t,e){const r=t.filters.concat(e);return dn.create(r,t.op)}function fF(t){return t instanceof jr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Dh(r.value)}`})(t):t instanceof dn?(function(r){return r.op.toString()+" {"+r.getFilters().map(fF).join(" ,")+"}"})(t):"Filter"}class Wre extends jr{constructor(e,r,n){super(e,r,n),this.key=xt.fromName(n.referenceValue)}matches(e){const r=xt.comparator(e.key,this.key);return this.matchesComparison(r)}}class Kre extends jr{constructor(e,r){super(e,"in",r),this.keys=pF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Qre extends jr{constructor(e,r){super(e,"not-in",r),this.keys=pF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function pF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>xt.fromName(n.referenceValue)))}class Xre extends jr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Hm(r)&&Fm(r.arrayValue,this.value)}}class mF extends jr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Fm(this.value.arrayValue,r)}}class Yre extends jr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Fm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Fm(this.value.arrayValue,r)}}class Zre extends jr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Hm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Fm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jre{constructor(e,r=null,n=[],a=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function lN(t,e=null,r=[],n=[],a=null,i=null,o=null){return new Jre(t,e,r,n,a,i,o)}function Kd(t){const e=It(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>oN(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),Jg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Dh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Dh(n))).join(",")),e.ue=r}return e.ue}function e1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Gre(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!dF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XO(t.startAt,e.startAt)&&XO(t.endAt,e.endAt)}function mx(t){return xt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function gx(t,e){return t.filters.filter((r=>r instanceof jr&&r.field.isEqual(e)))}function YO(t,e,r){let n=Gv,a=!0;for(const i of gx(t,e)){let o=Gv,c=!0;switch(i.op){case"<":case"<=":o=qre(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,c=!1;break;case"!=":case"not-in":o=Gv}WO({value:n,inclusive:a},{value:o,inclusive:c})<0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];WO({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function ZO(t,e,r){let n=cu,a=!0;for(const i of gx(t,e)){let o=cu,c=!0;switch(i.op){case">=":case">":o=Hre(i.value),c=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,c=!1;break;case"!=":case"not-in":o=cu}KO({value:n,inclusive:a},{value:o,inclusive:c})>0&&(n=o,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=r.position[i];KO({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,r=null,n=[],a=[],i=null,o="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gF(t,e,r,n,a,i,o,c){return new Ef(t,e,r,n,a,i,o,c)}function t1(t){return new Ef(t)}function JO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yF(t){return t.collectionGroup!==null}function pm(t){const e=It(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Tn(Yn.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Gm(i,n))})),r.has(Yn.keyField().canonicalString())||e.ce.push(new Gm(Yn.keyField(),n))}return e.ce}function Es(t){const e=It(t);return e.le||(e.le=ene(e,pm(t))),e.le}function ene(t,e){if(t.limitType==="F")return lN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new Gm(a.field,i)}));const r=t.endAt?new Lh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Lh(t.startAt.position,t.startAt.inclusive):null;return lN(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function cN(t,e){const r=t.filters.concat([e]);return new Ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function yx(t,e,r){return new Ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function c2(t,e){return e1(Es(t),Es(e))&&t.limitType===e.limitType}function vF(t){return`${Kd(Es(t))}|lt:${t.limitType}`}function dh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>fF(a))).join(", ")}]`),Jg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Dh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Dh(a))).join(",")),`Target(${n})`})(Es(t))}; limitType=${t.limitType})`}function r1(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):xt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of pm(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(o,c,d){const h=QO(o,c,d);return o.inclusive?h<=0:h<0})(n.startAt,pm(n),a)||n.endAt&&!(function(o,c,d){const h=QO(o,c,d);return o.inclusive?h>=0:h>0})(n.endAt,pm(n),a))})(t,e)}function xF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bF(t){return(e,r)=>{let n=!1;for(const a of pm(t)){const i=tne(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function tne(t,e,r){const n=t.field.isKeyField()?xt.comparator(e.key,r.key):(function(i,o,c){const d=o.data.field(i),h=c.data.field(i);return d!==null&&h!==null?ju(d,h):jt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return jt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){f0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return aF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rne=new Dn(xt.comparator);function Ns(){return rne}const wF=new Dn(xt.comparator);function am(...t){let e=wF;for(const r of t)e=e.insert(r.key,r);return e}function SF(t){let e=wF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function zo(){return mm()}function _F(){return mm()}function mm(){return new Lu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const nne=new Dn(xt.comparator),ane=new Tn(xt.comparator);function vr(...t){let e=ane;for(const r of t)e=e.add(r);return e}const ine=new Tn(lr);function U8(){return ine}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zm(e)?"-0":e}}function TF(t){return{integerValue:""+t}}function NF(t,e){return JV(e)?TF(e):z8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this._=void 0}}function sne(t,e,r){return t instanceof Wm?(function(a,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&L8(i)&&(i=B8(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}})(r,e):t instanceof Qd?EF(t,e):t instanceof $h?jF(t,e):(function(a,i){const o=AF(a,i),c=eI(o)+eI(a.Pe);return iN(o)&&iN(a.Pe)?TF(c):z8(a.serializer,c)})(t,e)}function one(t,e,r){return t instanceof Qd?EF(t,e):t instanceof $h?jF(t,e):r}function AF(t,e){return t instanceof Uh?(function(n){return iN(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Wm extends u2{}class Qd extends u2{constructor(e){super(),this.elements=e}}function EF(t,e){const r=kF(e);for(const n of t.elements)r.some((a=>Yo(a,n)))||r.push(n);return{arrayValue:{values:r}}}class $h extends u2{constructor(e){super(),this.elements=e}}function jF(t,e){let r=kF(e);for(const n of t.elements)r=r.filter((a=>!Yo(a,n)));return{arrayValue:{values:r}}}class Uh extends u2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function eI(t){return Fn(t.integerValue||t.doubleValue)}function kF(t){return Hm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,r){this.field=e,this.transform=r}}function lne(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Qd&&a instanceof Qd||n instanceof $h&&a instanceof $h?Ph(n.elements,a.elements,Yo):n instanceof Uh&&a instanceof Uh?Yo(n.Pe,a.Pe):n instanceof Wm&&a instanceof Wm})(t.transform,e.transform)}class cne{constructor(e,r){this.version=e,this.transformResults=r}}class ha{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ha}static exists(e){return new ha(void 0,e)}static updateTime(e){return new ha(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class d2{}function CF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new n1(t.key,ha.none()):new jf(t.key,t.data,ha.none());{const r=t.data,n=hi.empty();let a=new Tn(Yn.comparator);for(let i of e.fields)if(!a.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),a=a.add(i)}return new hc(t.key,n,new ts(a.toArray()),ha.none())}}function une(t,e,r){t instanceof jf?(function(a,i,o){const c=a.value.clone(),d=rI(a.fieldTransforms,i,o.transformResults);c.setAll(d),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):t instanceof hc?(function(a,i,o){if(!Kv(a.precondition,i))return void i.convertToUnknownDocument(o.version);const c=rI(a.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(OF(a)),d.setAll(c),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function gm(t,e,r,n){return t instanceof jf?(function(i,o,c,d){if(!Kv(i.precondition,o))return c;const h=i.value.clone(),p=nI(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof hc?(function(i,o,c,d){if(!Kv(i.precondition,o))return c;const h=nI(i.fieldTransforms,d,o),p=o.data;return p.setAll(OF(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,o,c){return Kv(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,r)}function dne(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=AF(n.transform,a||null);i!=null&&(r===null&&(r=hi.empty()),r.set(n.field,i))}return r||null}function tI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Ph(n,a,((i,o)=>lne(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jf extends d2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class hc extends d2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function OF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function rI(t,e,r){const n=new Map;Rt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],o=i.transform,c=e.data.field(i.field);n.set(i.field,one(o,c,r[a]))}return n}function nI(t,e,r){const n=new Map;for(const a of t){const i=a.transform,o=r.data.field(a.field);n.set(a.field,sne(i,o,e))}return n}class n1 extends d2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F8 extends d2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&une(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=gm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=gm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=_F();return this.mutations.forEach((a=>{const i=e.get(a.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=r.has(a.key)?null:c;const d=CF(o,c);d!==null&&n.set(a.key,d),o.isValidDocument()||o.convertToNoDocument(Lt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),vr())}isEqual(e){return this.batchId===e.batchId&&Ph(this.mutations,e.mutations,((r,n)=>tI(r,n)))&&Ph(this.baseMutations,e.baseMutations,((r,n)=>tI(r,n)))}}class H8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Rt(e.mutations.length===n.length);let a=(function(){return nne})();const i=e.mutations;for(let o=0;o<i.length;o++)a=a.insert(i[o].key,n[o].version);return new H8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hne{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a,Rr;function IF(t){switch(t){default:return jt();case Ve.CANCELLED:case Ve.UNKNOWN:case Ve.DEADLINE_EXCEEDED:case Ve.RESOURCE_EXHAUSTED:case Ve.INTERNAL:case Ve.UNAVAILABLE:case Ve.UNAUTHENTICATED:return!1;case Ve.INVALID_ARGUMENT:case Ve.NOT_FOUND:case Ve.ALREADY_EXISTS:case Ve.PERMISSION_DENIED:case Ve.FAILED_PRECONDITION:case Ve.ABORTED:case Ve.OUT_OF_RANGE:case Ve.UNIMPLEMENTED:case Ve.DATA_LOSS:return!0}}function RF(t){if(t===void 0)return da("GRPC error has no .code"),Ve.UNKNOWN;switch(t){case _a.OK:return Ve.OK;case _a.CANCELLED:return Ve.CANCELLED;case _a.UNKNOWN:return Ve.UNKNOWN;case _a.DEADLINE_EXCEEDED:return Ve.DEADLINE_EXCEEDED;case _a.RESOURCE_EXHAUSTED:return Ve.RESOURCE_EXHAUSTED;case _a.INTERNAL:return Ve.INTERNAL;case _a.UNAVAILABLE:return Ve.UNAVAILABLE;case _a.UNAUTHENTICATED:return Ve.UNAUTHENTICATED;case _a.INVALID_ARGUMENT:return Ve.INVALID_ARGUMENT;case _a.NOT_FOUND:return Ve.NOT_FOUND;case _a.ALREADY_EXISTS:return Ve.ALREADY_EXISTS;case _a.PERMISSION_DENIED:return Ve.PERMISSION_DENIED;case _a.FAILED_PRECONDITION:return Ve.FAILED_PRECONDITION;case _a.ABORTED:return Ve.ABORTED;case _a.OUT_OF_RANGE:return Ve.OUT_OF_RANGE;case _a.UNIMPLEMENTED:return Ve.UNIMPLEMENTED;case _a.DATA_LOSS:return Ve.DATA_LOSS;default:return jt()}}(Rr=_a||(_a={}))[Rr.OK=0]="OK",Rr[Rr.CANCELLED=1]="CANCELLED",Rr[Rr.UNKNOWN=2]="UNKNOWN",Rr[Rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rr[Rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rr[Rr.NOT_FOUND=5]="NOT_FOUND",Rr[Rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rr[Rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rr[Rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rr[Rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rr[Rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rr[Rr.ABORTED=10]="ABORTED",Rr[Rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rr[Rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rr[Rr.INTERNAL=13]="INTERNAL",Rr[Rr.UNAVAILABLE=14]="UNAVAILABLE",Rr[Rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pne=new Bd([4294967295,4294967295],0);function aI(t){const e=fne().encode(t),r=new UV;return r.update(e),new Uint8Array(r.digest())}function iI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bd([r,n],0),new Bd([a,i],0)]}class W8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new im(`Invalid padding: ${r}`);if(n<0)throw new im(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new im(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new im(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Bd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Bd.fromNumber(n)));return a.compare(pne)===1&&(a=new Bd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=aI(e),[n,a]=iI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new W8(i,a,r);return n.forEach((c=>o.insert(c))),o}insert(e){if(this.Ie===0)return;const r=aI(e),[n,a]=iI(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,a,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class im extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,i1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new a1(Lt.min(),a,new Dn(lr),Ns(),vr())}}class i1{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new i1(n,r,vr(),vr(),vr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class MF{constructor(e,r){this.targetId=e,this.me=r}}class PF{constructor(e,r,n=ma.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class sI{constructor(){this.fe=0,this.ge=lI(),this.pe=ma.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=vr(),r=vr(),n=vr();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:jt()}})),new i1(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=lI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class mne{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ns(),this.qe=oI(),this.Qe=new Dn(lr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:jt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(mx(i))if(n===0){const o=new xt(i.path);this.Ue(r,o,qn.newNoDocument(o,Lt.min()))}else Rt(n===1);else{const o=this.Ye(r);if(o!==n){const c=this.Ze(e),d=c?this.Xe(c,e,o):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let o,c;try{o=Eu(n).toUint8Array()}catch(d){if(d instanceof iF)return Bm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new W8(o,a,i)}catch(d){return Bm(d instanceof im?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,o)=>{const c=this.Je(o);if(c){if(i.current&&mx(c.target)){const d=new xt(c.target.path);this.ke.get(d)!==null||this.it(o,d)||this.Ue(o,d,qn.newNoDocument(d,e))}i.be&&(r.set(o,i.ve()),i.Ce())}}));let n=vr();this.qe.forEach(((i,o)=>{let c=!0;o.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,o)=>o.setReadTime(e)));const a=new a1(e,r,this.Qe,this.ke,n);return this.ke=Ns(),this.qe=oI(),this.Qe=new Dn(lr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new sI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Tn(lr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||at("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function oI(){return new Dn(xt.comparator)}function lI(){return new Dn(xt.comparator)}const gne={asc:"ASCENDING",desc:"DESCENDING"},yne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vne={and:"AND",or:"OR"};class xne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function uN(t,e){return t.useProto3Json||Jg(e)?e:{value:e}}function zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bne(t,e){return zh(t,e.toTimestamp())}function Za(t){return Rt(!!t),Lt.fromTimestamp((function(r){const n=nc(r);return new Zn(n.seconds,n.nanos)})(t))}function K8(t,e){return dN(t,e).canonicalString()}function dN(t,e){const r=(function(a){return new Fr(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function LF(t){const e=Fr.fromString(t);return Rt(GF(e)),e}function Km(t,e){return K8(t.databaseId,e.path)}function Wl(t,e){const r=LF(e);if(r.get(1)!==t.databaseId.projectId)throw new pt(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new pt(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new xt(UF(r))}function BF(t,e){return K8(t.databaseId,e)}function $F(t){const e=LF(t);return e.length===4?Fr.emptyPath():UF(e)}function hN(t){return new Fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UF(t){return Rt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cI(t,e,r){return{name:Km(t,e),fields:r.value.mapValue.fields}}function wne(t,e,r){const n=Wl(t,e.name),a=Za(e.updateTime),i=e.createTime?Za(e.createTime):Lt.min(),o=new hi({mapValue:{fields:e.fields}}),c=qn.newFoundDocument(n,a,i,o);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Sne(t,e){return"found"in e?(function(n,a){Rt(!!a.found),a.found.name,a.found.updateTime;const i=Wl(n,a.found.name),o=Za(a.found.updateTime),c=a.found.createTime?Za(a.found.createTime):Lt.min(),d=new hi({mapValue:{fields:a.found.fields}});return qn.newFoundDocument(i,o,c,d)})(t,e):"missing"in e?(function(n,a){Rt(!!a.missing),Rt(!!a.readTime);const i=Wl(n,a.missing),o=Za(a.readTime);return qn.newNoDocument(i,o)})(t,e):jt()}function _ne(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:jt()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Rt(p===void 0||typeof p=="string"),ma.fromBase64String(p||"")):(Rt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ma.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const p=h.code===void 0?Ve.UNKNOWN:RF(h.code);return new pt(p,h.message||"")})(o);r=new PF(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Wl(t,n.document.name),i=Za(n.document.updateTime),o=n.document.createTime?Za(n.document.createTime):Lt.min(),c=new hi({mapValue:{fields:n.document.fields}}),d=qn.newFoundDocument(a,i,o,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new Qv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Wl(t,n.document),i=n.readTime?Za(n.readTime):Lt.min(),o=qn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new Qv([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Wl(t,n.document),i=n.removedTargetIds||[];r=new Qv([],i,a,null)}else{if(!("filter"in e))return jt();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,o=new hne(a,i),c=n.targetId;r=new MF(c,o)}}return r}function Qm(t,e){let r;if(e instanceof jf)r={update:cI(t,e.key,e.value)};else if(e instanceof n1)r={delete:Km(t,e.key)};else if(e instanceof hc)r={update:cI(t,e.key,e.data),updateMask:kne(e.fieldMask)};else{if(!(e instanceof F8))return jt();r={verify:Km(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,o){const c=o.transform;if(c instanceof Wm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Qd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $h)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Uh)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw jt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:bne(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:jt()})(t,e.precondition)),r}function fN(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ha.updateTime(Za(i.updateTime)):i.exists!==void 0?ha.exists(i.exists):ha.none()})(e.currentDocument):ha.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(o,c){let d=null;if("setToServerValue"in c)Rt(c.setToServerValue==="REQUEST_TIME"),d=new Wm;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new Qd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new $h(p)}else"increment"in c?d=new Uh(o,c.increment):jt();const h=Yn.fromServerFormat(c.fieldPath);return new V8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=Wl(t,e.update.name),i=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const h=d.fieldPaths||[];return new ts(h.map((p=>Yn.fromServerFormat(p))))})(e.updateMask);return new hc(a,i,o,r,n)}return new jf(a,i,r,n)}if(e.delete){const a=Wl(t,e.delete);return new n1(a,r)}if(e.verify){const a=Wl(t,e.verify);return new F8(a,r)}return jt()}function Tne(t,e){return t&&t.length>0?(Rt(e!==void 0),t.map((r=>(function(a,i){let o=a.updateTime?Za(a.updateTime):Za(i);return o.isEqual(Lt.min())&&(o=Za(i)),new cne(o,a.transformResults||[])})(r,e)))):[]}function zF(t,e){return{documents:[BF(t,e.path)]}}function VF(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=BF(t,a);const i=(function(h){if(h.length!==0)return HF(dn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:hh(y.field),direction:Ane(y.dir)}})(p)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const c=uN(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function FF(t){let e=$F(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Rt(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const y=qF(m);return y instanceof dn&&$8(y)?y.getFilters():[y]})(r.where));let o=[];r.orderBy&&(o=(function(m){return m.map((y=>(function(_){return new Gm(fh(_.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,Jg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,v=m.values||[];return new Lh(v,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,v=m.values||[];return new Lh(v,y)})(r.endAt)),gF(e,a,o,i,c,"F",d,h)}function Nne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function qF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=fh(r.unaryFilter.field);return jr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=fh(r.unaryFilter.field);return jr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fh(r.unaryFilter.field);return jr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fh(r.unaryFilter.field);return jr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return jt()}})(t):t.fieldFilter!==void 0?(function(r){return jr.create(fh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return dn.create(r.compositeFilter.filters.map((n=>qF(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return jt()}})(r.compositeFilter.op))})(t):jt()}function Ane(t){return gne[t]}function Ene(t){return yne[t]}function jne(t){return vne[t]}function hh(t){return{fieldPath:t.canonicalString()}}function fh(t){return Yn.fromServerFormat(t.fieldPath)}function HF(t){return t instanceof jr?(function(r){if(r.op==="=="){if(GO(r.value))return{unaryFilter:{field:hh(r.field),op:"IS_NAN"}};if(HO(r.value))return{unaryFilter:{field:hh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(GO(r.value))return{unaryFilter:{field:hh(r.field),op:"IS_NOT_NAN"}};if(HO(r.value))return{unaryFilter:{field:hh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hh(r.field),op:Ene(r.op),value:r.value}}})(t):t instanceof dn?(function(r){const n=r.getFilters().map((a=>HF(a)));return n.length===1?n[0]:{compositeFilter:{op:jne(r.op),filters:n}}})(t):jt()}function kne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function GF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,r,n,a,i=Lt.min(),o=Lt.min(),c=ma.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.ct=e}}function Cne(t,e){let r;if(e.document)r=wne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=xt.fromSegments(e.noDocument.path),a=Yd(e.noDocument.readTime);r=qn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const n=xt.fromSegments(e.unknownDocument.path),a=Yd(e.unknownDocument.version);r=qn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new Zn(a[0],a[1]);return Lt.fromTimestamp(i)})(e.readTime)),r}function uI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:vx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,o){return{name:Km(i,o.key),fields:o.data.value.mapValue.fields,updateTime:zh(i,o.version.toTimestamp()),createTime:zh(i,o.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Xd(e.version)};else{if(!e.isUnknownDocument())return jt();n.unknownDocument={path:r.path.toArray(),version:Xd(e.version)}}return n}function vx(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yd(t){const e=new Zn(t.seconds,t.nanoseconds);return Lt.fromTimestamp(e)}function Nd(t,e){const r=(e.baseMutations||[]).map((i=>fN(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>fN(t.ct,i))),a=Zn.fromMillis(e.localWriteTimeMs);return new q8(e.batchId,a,r,n)}function sm(t){const e=Yd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Yd(t.lastLimboFreeSnapshotVersion):Lt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Rt(i.documents.length===1),Es(t1($F(i.documents[0])))})(t.query):(function(i){return Es(FF(i))})(t.query),new Fl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ma.fromBase64String(t.resumeToken))}function KF(t,e){const r=Xd(e.snapshotVersion),n=Xd(e.lastLimboFreeSnapshotVersion);let a;a=mx(e.target)?zF(t.ct,e.target):VF(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Kd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function QF(t){const e=FF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yx(e,e.limit,"L"):e}function F5(t,e){return new G8(e.largestBatchId,fN(t.ct,e.overlayMutation))}function dI(t,e){const r=e.path.lastSegment();return[t,Li(e.path.popLast()),r]}function hI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Xd(n.readTime),documentKey:Li(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{getBundleMetadata(e,r){return fI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:Yd(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return fI(e).put((function(a){return{bundleId:a.id,createTime:Xd(Za(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return pI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:QF(i.bundledQuery),readTime:Yd(i.readTime)}})(n)}))}saveNamedQuery(e,r){return pI(e).put((function(a){return{name:a.name,readTime:Xd(Za(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function fI(t){return Va(t,"bundles")}function pI(t){return Va(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new h2(e,n)}getOverlay(e,r){return Dp(e).get(dI(this.userId,r)).next((n=>n?F5(this.serializer,n):null))}getOverlays(e,r){const n=zo();return ke.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,o)=>{const c=new G8(r,o);a.push(this.ht(e,c))})),ke.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((o=>a.add(Li(o.getCollectionPath()))));const i=[];return a.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);i.push(Dp(e).j("collectionPathOverlayIndex",c))})),ke.waitFor(i)}getOverlaysForCollection(e,r,n){const a=zo(),i=Li(r),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Dp(e).U("collectionPathOverlayIndex",o).next((c=>{for(const d of c){const h=F5(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=zo();let o;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Dp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=F5(this.serializer,h);i.size()<a||m.largestBatchId===o?(i.set(m.getKey(),m),o=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Dp(e).put((function(a,i,o){const[c,d,h]=dI(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Qm(a.ct,o.mutation)}})(this.serializer,this.userId,r))}}function Dp(t){return Va(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ine{Pt(e){return Va(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?ma.fromUint8Array(n):ma.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Fn(e.integerValue));else if("doubleValue"in e){const n=Fn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),zm(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=nc(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Eu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?sF(e)?this.dt(r,Number.MAX_SAFE_INTEGER):l2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):jt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const o="value",c=((a=(n=i[o].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Fn(c)),this.Vt(o,r),this.Tt(i[o],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),xt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ad.vt=new Ad;function Rne(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function mI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const o=Rne(255&n[i]);if(a+=o,o!==8)break}return a})(t);return Math.ceil(e/8)}class Mne{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=mI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=mI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Pne{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Dne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Lp{constructor(){this.jt=new Mne,this.Ht=new Pne(this.jt),this.Jt=new Dne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ed(this.indexId,this.documentKey,this.arrayValue,n)}}function Qc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=gI(t.arrayValue,e.arrayValue),r!==0?r:(r=gI(t.directionalValue,e.directionalValue),r!==0?r:xt.comparator(t.documentKey,e.documentKey)))}function gI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.Xt=new Tn(((r,n)=>Yn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Rt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=rN(e);if(r!==void 0&&!this.sn(r))return!1;const n=wd(e);let a=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[o++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(o>=this.en.length||!this._n(this.en[o++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Tn(Yn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new qv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new qv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new qv(n.field,n.dir==="asc"?0:1)));return new px(px.UNKNOWN_ID,this.collectionId,r,Um.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){var e,r;if(Rt(t instanceof jr||t instanceof dn),t instanceof jr){if(t instanceof mF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>jr.create(t.field,"==",i))))||[];return dn.create(a,"or")}return t}const n=t.filters.map((a=>XF(a)));return dn.create(n,t.op)}function Lne(t){if(t.getFilters().length===0)return[];const e=gN(XF(t));return Rt(YF(e)),pN(e)||mN(e)?[e]:e.getFilters()}function pN(t){return t instanceof jr}function mN(t){return t instanceof dn&&$8(t)}function YF(t){return pN(t)||mN(t)||(function(r){if(r instanceof dn&&sN(r)){for(const n of r.getFilters())if(!pN(n)&&!mN(n))return!1;return!0}return!1})(t)}function gN(t){if(Rt(t instanceof jr||t instanceof dn),t instanceof jr)return t;if(t.filters.length===1)return gN(t.filters[0]);const e=t.filters.map((n=>gN(n)));let r=dn.create(e,t.op);return r=xx(r),YF(r)?r:(Rt(r instanceof dn),Rt(Bh(r)),Rt(r.filters.length>1),r.filters.reduce(((n,a)=>Q8(n,a))))}function Q8(t,e){let r;return Rt(t instanceof jr||t instanceof dn),Rt(e instanceof jr||e instanceof dn),r=t instanceof jr?e instanceof jr?(function(a,i){return dn.create([a,i],"and")})(t,e):vI(t,e):e instanceof jr?vI(e,t):(function(a,i){if(Rt(a.filters.length>0&&i.filters.length>0),Bh(a)&&Bh(i))return hF(a,i.getFilters());const o=sN(a)?a:i,c=sN(a)?i:a,d=o.filters.map((h=>Q8(h,c)));return dn.create(d,"or")})(t,e),xx(r)}function vI(t,e){if(Bh(e))return hF(e,t.getFilters());{const r=e.filters.map((n=>Q8(t,n)));return dn.create(r,"or")}}function xx(t){if(Rt(t instanceof jr||t instanceof dn),t instanceof jr)return t;const e=t.getFilters();if(e.length===1)return xx(e[0]);if(uF(t))return t;const r=e.map((a=>xx(a))),n=[];return r.forEach((a=>{a instanceof jr?n.push(a):a instanceof dn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:dn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(){this.un=new X8}addToCollectionParentIndex(e,r){return this.un.add(r),ke.resolve()}getCollectionParents(e,r){return ke.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ke.resolve()}deleteFieldIndex(e,r){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,r){return ke.resolve()}getDocumentsMatchingTarget(e,r){return ke.resolve(null)}getIndexType(e,r){return ke.resolve(0)}getFieldIndexes(e,r){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,r){return ke.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,r){return ke.resolve(Cs.min())}updateCollectionGroup(e,r,n){return ke.resolve()}updateIndexEntries(e,r){return ke.resolve()}}class X8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Tn(Fr.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Tn(Fr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=new Uint8Array(0);class $ne{constructor(e,r){this.databaseId=r,this.cn=new X8,this.ln=new Lu((n=>Kd(n)),((n,a)=>e1(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Li(a)};return xI(e).put(i)}return ke.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[WV(r),""],!1,!0);return xI(e).U(a).next((i=>{for(const o of i){if(o.collectionId!==r)break;n.push(Uo(o.parent))}return n}))}addFieldIndex(e,r){const n=Bp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const o=rh(e);return i.next((c=>{o.put(hI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Bp(e),a=rh(e),i=th(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Bp(e),n=th(e),a=rh(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return ke.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new yI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=th(e);let a=!0;const i=new Map;return ke.forEach(this.hn(r),(o=>this.Pn(e,o).next((c=>{a&&(a=!!c),i.set(o,c)})))).next((()=>{if(a){let o=vr();const c=[];return ke.forEach(i,((d,h)=>{at("IndexedDbIndexManager",`Using index ${(function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Kd(r)}`);const p=(function(R,L){const C=rN(L);if(C===void 0)return null;for(const P of gx(R,C.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null})(h,d),m=(function(R,L){const C=new Map;for(const P of wd(L))for(const E of gx(R,P.fieldPath))switch(E.op){case"==":case"in":C.set(P.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return C.set(P.fieldPath.canonicalString(),E.value),Array.from(C.values())}return null})(h,d),y=(function(R,L){const C=[];let P=!0;for(const E of wd(L)){const N=E.kind===0?YO(R,E.fieldPath,R.startAt):ZO(R,E.fieldPath,R.startAt);C.push(N.value),P&&(P=N.inclusive)}return new Lh(C,P)})(h,d),v=(function(R,L){const C=[];let P=!0;for(const E of wd(L)){const N=E.kind===0?ZO(R,E.fieldPath,R.endAt):YO(R,E.fieldPath,R.endAt);C.push(N.value),P&&(P=N.inclusive)}return new Lh(C,P)})(h,d),_=this.In(d,h,y),S=this.In(d,h,v),w=this.Tn(d,h,m),j=this.En(d.indexId,p,_,y.inclusive,S,v.inclusive,w);return ke.forEach(j,(O=>n.G(O,r.limit).next((R=>{R.forEach((L=>{const C=xt.fromSegments(L.documentKey);o.has(C)||(o=o.add(C),c.push(C))}))}))))})).next((()=>c))}return ke.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Lne(dn.create(e.filters,"and")).map((n=>lN(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,o,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):rv,v=this.An(e,y,n[m%h],a),_=this.Rn(e,y,i[m%h],o),S=c.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(v,_,S))}return p}An(e,r,n,a){const i=new Ed(e,xt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Ed(e,xt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new yI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let o=null;for(const c of i)n.rn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,r){let n=2;const a=this.hn(r);return ke.forEach(a,(i=>this.Pn(e,i).next((o=>{o?n!==0&&o.fields.length<(function(d){let h=new Tn(Yn.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(o){return o.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Lp;for(const a of wd(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const o=n.Yt(a.kind);Ad.vt.It(i,o)}return n.zt()}dn(e){const r=new Lp;return Ad.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Lp;return Ad.vt.It(qm(this.databaseId,r),n.Yt((function(i){const o=wd(i);return o.length===0?0:o[o.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Lp);let i=0;for(const o of wd(e)){const c=n[i++];for(const d of a)if(this.fn(r,o.fieldPath)&&Hm(c))a=this.gn(a,o,c);else{const h=d.Yt(o.kind);Ad.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const o of n.arrayValue.values||[])for(const c of a){const d=new Lp;d.seed(c.zt()),Ad.vt.It(o,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof jr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Bp(e),a=rh(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const o=[];return ke.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{o.push((function(p,m){const y=m?new Um(m.sequenceNumber,new Cs(Yd(m.readTime),new xt(Uo(m.documentKey)),m.largestBatchId)):Um.empty(),v=p.fields.map((([_,S])=>new qv(Yn.fromServerFormat(_),S)));return new px(p.indexId,p.collectionGroup,v,y)})(c,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:lr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Bp(e),i=rh(e);return this.yn(e).next((o=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>ke.forEach(c,(d=>i.put(hI(d.indexId,this.uid,o,n))))))))}updateIndexEntries(e,r){const n=new Map;return ke.forEach(r,((a,i)=>{const o=n.get(a.collectionGroup);return(o?ke.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),ke.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?ke.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return th(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return th(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=th(e);let i=new Tn(Qc);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((o,c)=>{i=i.add(new Ed(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new Tn(Qc);const a=this.Vn(r,e);if(a==null)return n;const i=rN(r);if(i!=null){const o=e.data.field(i.fieldPath);if(Hm(o))for(const c of o.arrayValue.values||[])n=n.add(new Ed(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Ed(r.indexId,e.key,rv,a));return n}bn(e,r,n,a,i){at("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const o=[];return(function(d,h,p,m,y){const v=d.getIterator(),_=h.getIterator();let S=eh(v),w=eh(_);for(;S||w;){let j=!1,O=!1;if(S&&w){const R=p(S,w);R<0?O=!0:R>0&&(j=!0)}else S!=null?O=!0:j=!0;j?(m(w),w=eh(_)):O?(y(S),S=eh(v)):(S=eh(v),w=eh(_))}})(a,i,Qc,(c=>{o.push(this.Dn(e,r,n,c))}),(c=>{o.push(this.vn(e,r,n,c))})),ke.waitFor(o)}yn(e){let r=1;return rh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((o,c)=>Qc(o,c))).filter(((o,c,d)=>!c||Qc(o,d[c-1])!==0));const a=[];a.push(e);for(const o of n){const c=Qc(o,e),d=Qc(o,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(o),a.push(o.Zt());else if(d>0)break}a.push(r);const i=[];for(let o=0;o<a.length;o+=2){if(this.Cn(a[o],a[o+1]))return[];const c=[a[o].indexId,this.uid,a[o].arrayValue,a[o].directionalValue,rv,[]],d=[a[o+1].indexId,this.uid,a[o+1].arrayValue,a[o+1].directionalValue,rv,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return Qc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(bI)}getMinOffset(e,r){return ke.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||jt())))).next(bI)}}function xI(t){return Va(t,"collectionParents")}function th(t){return Va(t,"indexEntries")}function Bp(t){return Va(t,"indexConfiguration")}function rh(t){return Va(t,"indexState")}function bI(t){Rt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;M8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Cs(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],o=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:o},((p,m,y)=>(c++,y.delete())));i.push(d.next((()=>{Rt(c===1)})));const h=[];for(const p of r.mutations){const m=eF(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return ke.waitFor(i).next((()=>h))}function bx(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw jt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class f2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Rt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new f2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).J({index:"userMutationsIndex",range:n},((a,i,o)=>{r=!1,o.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=ph(e),o=Xc(e);return o.add({}).next((c=>{Rt(typeof c=="number");const d=new q8(c,r,n,a),h=(function(v,_,S){const w=S.baseMutations.map((O=>Qm(v.ct,O))),j=S.mutations.map((O=>Qm(v.ct,O)));return{userId:_,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:j}})(this.serializer,this.userId,d),p=[];let m=new Tn(((y,v)=>lr(y.canonicalString(),v.canonicalString())));for(const y of a){const v=eF(this.userId,y.key.path,c);m=m.add(y.key.path.popLast()),p.push(o.put(h)),p.push(i.put(v,Tre))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),ke.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Xc(e).get(r).next((n=>n?(Rt(n.userId===this.userId),Nd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?ke.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Xc(e).J({index:"userMutationsIndex",range:a},((o,c,d)=>{c.userId===this.userId&&(Rt(c.batchId>=n),i=Nd(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Xc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,o)=>{n=i.batchId,o.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xc(e).U("userMutationsIndex",r).next((n=>n.map((a=>Nd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Hv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return ph(e).J({range:a},((o,c,d)=>{const[h,p,m]=o,y=Uo(p);if(h===this.userId&&r.path.isEqual(y))return Xc(e).get(m).next((v=>{if(!v)throw jt();Rt(v.userId===this.userId),i.push(Nd(this.serializer,v))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tn(lr);const a=[];return r.forEach((i=>{const o=Hv(this.userId,i.path),c=IDBKeyRange.lowerBound(o),d=ph(e).J({range:c},((h,p,m)=>{const[y,v,_]=h,S=Uo(v);y===this.userId&&i.path.isEqual(S)?n=n.add(_):m.done()}));a.push(d)})),ke.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=Hv(this.userId,n),o=IDBKeyRange.lowerBound(i);let c=new Tn(lr);return ph(e).J({range:o},((d,h,p)=>{const[m,y,v]=d,_=Uo(y);m===this.userId&&n.isPrefixOf(_)?_.length===a&&(c=c.add(v)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(Xc(e).get(i).next((o=>{if(o===null)throw jt();Rt(o.userId===this.userId),n.push(Nd(this.serializer,o))})))})),ke.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return ZF(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),ke.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return ke.resolve();const n=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),a=[];return ph(e).J({range:n},((i,o,c)=>{if(i[0]===this.userId){const d=Uo(i[1]);a.push(d)}else c.done()})).next((()=>{Rt(a.length===0)}))}))}containsKey(e,r){return JF(e,this.userId,r)}Nn(e){return eq(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function JF(t,e,r){const n=Hv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let o=!1;return ph(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,y]=c;p===e&&m===a&&(o=!0),h.done()})).next((()=>o))}function Xc(t){return Va(t,"mutations")}function ph(t){return Va(t,"documentMutations")}function eq(t){return Va(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zd(0)}static kn(){return new Zd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Zd(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Lt.fromTimestamp(new Zn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>nh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Rt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return nh(e).J(((o,c)=>{const d=sm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>ke.waitFor(i))).next((()=>a))}forEachTarget(e,r){return nh(e).J(((n,a)=>{const i=sm(a);r(i)}))}qn(e){return SI(e).get("targetGlobalKey").next((r=>(Rt(r!==null),r)))}Qn(e,r){return SI(e).put("targetGlobalKey",r)}Kn(e,r){return nh(e).put(KF(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Kd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return nh(e).J({range:a,index:"queryTargetsIndex"},((o,c,d)=>{const h=sm(c);e1(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=iu(e);return r.forEach((o=>{const c=Li(o.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,o))})),ke.waitFor(a)}removeMatchingKeys(e,r,n){const a=iu(e);return ke.forEach(r,(i=>{const o=Li(i.path);return ke.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=iu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=iu(e);let i=vr();return a.J({range:n,H:!0},((o,c,d)=>{const h=Uo(o[1]),p=new xt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Li(r.path),a=IDBKeyRange.bound([n],[WV(n)],!1,!0);let i=0;return iu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([o,c],d,h)=>{o!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return nh(e).get(r).next((n=>n?sm(n):null))}}function nh(t){return Va(t,"targets")}function SI(t){return Va(t,"targetGlobal")}function iu(t){return Va(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I([t,e],[r,n]){const a=lr(t,r);return a===0?lr(e,n):a}class zne{constructor(e){this.Un=e,this.buffer=new Tn(_I),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();_I(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Vne{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){at("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Du(r)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Pu(r)}await this.Hn(3e5)}))}}class Fne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return ke.resolve(es.oe);const n=new zne(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(wI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,o,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,o=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),uh()<=Er.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${a} in `+(c-o)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function qne(t,e){return new Fne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hne{constructor(e,r){this.db=e,this.garbageCollector=qne(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return nv(e,n)}removeReference(e,r,n){return nv(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return nv(e,r)}nr(e,r){return(function(a,i){let o=!1;return eq(a).Y((c=>JF(a,c,i).next((d=>(d&&(o=!0),ke.resolve(!d)))))).next((()=>o))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((o,c)=>{if(c<=r){const d=this.nr(e,o).next((h=>{if(!h)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Lt.min()),iu(e).delete((function(m){return[0,Li(m.path)]})(o)))))}));a.push(d)}})).next((()=>ke.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return nv(e,r)}tr(e,r){const n=iu(e);let a,i=es.oe;return n.J({index:"documentTargetsIndex"},(([o,c],{path:d,sequenceNumber:h})=>{o===0?(i!==es.oe&&r(new xt(Uo(a)),i),i=h,a=d):i=es.oe})).next((()=>{i!==es.oe&&r(new xt(Uo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nv(t,e){return iu(t).put((function(n,a){return{targetId:0,path:Li(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(){this.changes=new Lu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ke.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return hd(e).put(n)}removeEntry(e,r,n){return hd(e).delete((function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],vx(o),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=qn.newInvalidDocument(r);return hd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($p(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:qn.newInvalidDocument(r)};return hd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only($p(r))},((a,i)=>{n={document:this.ir(r,i),size:bx(i)}})).next((()=>n))}getEntries(e,r){let n=Ns();return this._r(e,r,((a,i)=>{const o=this.ir(a,i);n=n.insert(a,o)})).next((()=>n))}ar(e,r){let n=Ns(),a=new Dn(xt.comparator);return this._r(e,r,((i,o)=>{const c=this.ir(i,o);n=n.insert(i,c),a=a.insert(i,bx(o))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return ke.resolve();let a=new Tn(AI);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound($p(a.first()),$p(a.last())),o=a.getIterator();let c=o.getNext();return hd(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=xt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&AI(c,m)<0;)n(c,null),c=o.getNext();c&&c.isEqual(m)&&(n(c,h),c=o.hasNext()?o.getNext():null),c?p.$($p(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const o=r.path,c=[o.popLast().toArray(),o.lastSegment(),vx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Ns();for(const m of h){const y=this.ir(xt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(r1(r,y)||a.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=Ns();const o=NI(r,n),c=NI(r,Cs.max());return hd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,c,!0)},((d,h,p)=>{const m=this.ir(xt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new Wne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return TI(e).get("remoteDocumentGlobalKey").next((r=>(Rt(!!r),r)))}rr(e,r){return TI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Cne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Lt.min())))return n}return qn.newInvalidDocument(e)}}function rq(t){return new Gne(t)}class Wne extends tq{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Lu((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new Tn(((i,o)=>lr(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),o.isValidDocument()){const d=uI(this.cr.serializer,o);a=a.add(i.path.popLast());const h=bx(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=uI(this.cr.serializer,o.convertToNoDocument(Lt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),ke.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,o)=>{this.lr.set(i,{size:o,readTime:n.get(i).readTime})})),n)))}}function TI(t){return Va(t,"remoteDocumentGlobal")}function hd(t){return Va(t,"remoteDocumentsV14")}function $p(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NI(t,e){const r=e.documentKey.path.toArray();return[t,vx(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function AI(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=lr(r[i],n[i]),a)return a;return a=lr(r.length,n.length),a||(a=lr(r[r.length-2],n[n.length-2]),a||lr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&gm(n.mutation,a,ts.empty(),Zn.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,vr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=vr()){const a=zo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let o=am();return i.forEach(((c,d)=>{o=o.insert(c,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=zo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,vr())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((o,c)=>{r.set(o,c)}))}))}computeViews(e,r,n,a){let i=Ns();const o=mm(),c=(function(){return mm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof hc)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),gm(p.mutation,h,p.mutation.getFieldMask(),Zn.now())):o.set(h.key,ts.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>o.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new Kne(p,(m=o.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=mm();let a=new Dn(((o,c)=>o-c)),i=vr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const c of o)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||ts.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||vr()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const o=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=_F();p.forEach((y=>{if(!i.has(y)){const v=CF(r.get(y),n.get(y));v!==null&&m.set(y,v),i=i.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return ke.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(o){return xt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):yF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const o=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):ke.resolve(zo());let c=-1,d=i;return o.next((h=>ke.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?ke.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,vr()))).next((p=>({batchId:c,changes:SF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new xt(r)).next((n=>{let a=am();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let o=am();return this.indexManager.getCollectionParents(e,i).next((c=>ke.forEach(c,(d=>{const h=(function(m,y){return new Ef(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,y)=>{o=o.insert(m,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((o=>{i.forEach(((d,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,qn.newInvalidDocument(p)))}));let c=am();return o.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&gm(p.mutation,h,ts.empty(),Zn.now()),r1(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ke.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Za(a.createTime)}})(r)),ke.resolve()}getNamedQuery(e,r){return ke.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:QF(a.bundledQuery),readTime:Za(a.readTime)}})(r)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xne{constructor(){this.overlays=new Dn(xt.comparator),this.Ir=new Map}getOverlay(e,r){return ke.resolve(this.overlays.get(r))}getOverlays(e,r){const n=zo();return ke.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),ke.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),ke.resolve()}getOverlaysForCollection(e,r,n){const a=zo(),i=r.length+1,o=new xt(r.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return ke.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Dn(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=zo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=zo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return ke.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new G8(r,n));let i=this.Ir.get(r);i===void 0&&(i=vr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{constructor(){this.sessionToken=ma.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.Tr=new Tn(Qa.Er),this.dr=new Tn(Qa.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Qa(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Qa(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new xt(new Fr([])),n=new Qa(r,e),a=new Qa(r,e+1),i=[];return this.dr.forEachInRange([n,a],(o=>{this.Vr(o),i.push(o.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new xt(new Fr([])),n=new Qa(r,e),a=new Qa(r,e+1);let i=vr();return this.dr.forEachInRange([n,a],(o=>{i=i.add(o.key)})),i}containsKey(e){const r=new Qa(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Qa{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return xt.comparator(e.key,r.key)||lr(e.wr,r.wr)}static Ar(e,r){return lr(e.wr,r.wr)||xt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Tn(Qa.Er)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q8(i,r,n,a);this.mutationQueue.push(o);for(const c of a)this.br=this.br.add(new Qa(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ke.resolve(o)}lookupMutationBatch(e,r){return ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Qa(r,0),a=new Qa(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(o=>{const c=this.Dr(o.wr);i.push(c)})),ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Tn(lr);return r.forEach((a=>{const i=new Qa(a,0),o=new Qa(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],(c=>{n=n.add(c.wr)}))})),ke.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;xt.isDocumentKey(i)||(i=i.child(""));const o=new Qa(new xt(i),0);let c=new Tn(lr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),o),ke.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Rt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ke.forEach(r.mutations,(a=>{const i=new Qa(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Qa(r,0),a=this.br.firstAfterOrEqual(n);return ke.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{constructor(e){this.Mr=e,this.docs=(function(){return new Dn(xt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ke.resolve(n?n.document.mutableCopy():qn.newInvalidDocument(r))}getEntries(e,r){let n=Ns();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():qn.newInvalidDocument(a))})),ke.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=Ns();const o=r.path,c=new xt(o.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||M8(QV(p),n)<=0||(a.has(p.key)||r1(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ke.resolve(i)}getAllFromCollectionGroup(e,r,n,a){jt()}Or(e,r){return ke.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new eae(this)}getSize(e){return ke.resolve(this.size)}}class eae extends tq{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),ke.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tae{constructor(e){this.persistence=e,this.Nr=new Lu((r=>Kd(r)),e1),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Y8,this.targetCount=0,this.kr=Zd.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ke.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Zd(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ke.resolve()}updateTargetData(e,r){return this.Kn(r),ke.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((o,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),ke.waitFor(i).next((()=>a))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ke.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ke.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((o=>{i.push(a.markPotentiallyOrphaned(e,o))})),ke.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ke.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ke.resolve(n)}containsKey(e,r){return ke.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e,r){this.qr={},this.overlays={},this.Qr=new es(0),this.Kr=!1,this.Kr=!0,this.$r=new Yne,this.referenceDelegate=e(this),this.Ur=new tae(this),this.indexManager=new Bne,this.remoteDocumentCache=(function(a){return new Jne(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new WF(r),this.Gr=new Qne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Xne,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Zne(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){at("MemoryPersistence","Starting transaction:",e);const a=new rae(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return ke.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class rae extends YV{constructor(e){super(),this.currentSequenceNumber=e}}class p2{constructor(e){this.persistence=e,this.Jr=new Y8,this.Yr=null}static Zr(e){return new p2(e)}get Xr(){if(this.Yr)return this.Yr;throw jt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ke.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ke.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ke.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Xr,(n=>{const a=xt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Lt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return ke.or([()=>ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae{constructor(e){this.serializer=e}O(e,r,n,a){const i=new o2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UO,{unique:!0}),d.createObjectStore("documentMutations")})(e),EI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let o=ke.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),EI(e)),o=o.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(o=o.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UO,{unique:!0});const m=h.store("mutations"),y=p.map((v=>m.put(v)));return ke.waitFor(y)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(o=o.next((()=>this.ni(i)))),n<6&&a>=6&&(o=o.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(o=o.next((()=>this.ii(i)))),n<8&&a>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&a>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(o=o.next((()=>this.oi(i)))),n<11&&a>=11&&(o=o.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(o=o.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:Dre});h.createIndex("collectionPathOverlayIndex",Lre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",Bre,{unique:!1})})(e)}))),n<13&&a>=13&&(o=o.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Nre});h.createIndex("documentKeyIndex",Are),h.createIndex("collectionGroupIndex",Ere)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&a>=15&&(o=o.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Ire}).createIndex("sequenceNumberIndex",Rre,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Mre}).createIndex("documentKeyIndex",Pre,{unique:!1})})(e)))),n<16&&a>=16&&(o=o.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(o=o.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),o}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=bx(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>ke.forEach(a,(i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",o).next((c=>ke.forEach(c,(d=>{Rt(d.userId===i.userId);const h=Nd(this.serializer,d);return ZF(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((o,c)=>{const d=new Fr(o),h=(function(m){return[0,Li(m)]})(d);i.push(r.get(h).next((p=>p?ke.resolve():(m=>r.put({targetId:0,path:Li(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>ke.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:Ore});const n=r.store("collectionParents"),a=new X8,i=o=>{if(a.add(o)){const c=o.lastSegment(),d=o.popLast();return n.put({collectionId:c,parent:Li(d)})}};return r.store("remoteDocuments").J({H:!0},((o,c)=>{const d=new Fr(o);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([o,c,d],h)=>{const p=Uo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=sm(a),o=KF(this.serializer,i);return r.put(o)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,o)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new xt(Fr.fromString(m.document.name).popFirst(5)):m.noDocument?xt.fromSegments(m.noDocument.path):m.unknownDocument?xt.fromSegments(m.unknownDocument.path):jt()})(o).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(c.put(h))})).next((()=>ke.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=rq(this.serializer),i=new aq(p2.Zr,this.serializer.ct);return n.U().next((o=>{const c=new Map;return o.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:vr();Nd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),ke.forEach(c,((d,h)=>{const p=new Si(h),m=h2.lt(this.serializer,p),y=i.getIndexManager(p),v=f2.lt(p,this.serializer,y,i.referenceDelegate);return new nq(a,v,m,y).recalculateAndSaveOverlaysForDocumentKeys(new nN(r,es.oe),d).next()}))}))}}function EI(t){t.createObjectStore("targetDocuments",{keyPath:kre}).createIndex("documentTargetsIndex",Cre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jre,{unique:!0}),t.createObjectStore("targetGlobal")}const q5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Z8{constructor(e,r,n,a,i,o,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=o,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!Z8.D())throw new pt(Ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hne(this,a),this.Ai=r+"main",this.serializer=new WF(d),this.Ri=new wu(this.Ai,this.hi,new nae(this.serializer)),this.$r=new Ine,this.Ur=new Une(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rq(this.serializer),this.Gr=new One,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&da("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pt(Ve.FAILED_PRECONDITION,q5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new es(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>av(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Du(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Up(e).get("owner").next((r=>ke.resolve(this.vi(r))))}Ci(e){return av(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Va(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),o=a.filter((c=>i.indexOf(c)===-1));return ke.forEach(o,(c=>n.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?ke.resolve(!0):Up(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new pt(Ve.FAILED_PRECONDITION,q5);return!1}}return!(!this.networkEnabled||!this.inForeground)||av(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||o&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&at("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new nN(e,es.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>av(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return f2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $ne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return h2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){at("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?zre:d===16?Ure:d===15?D8:d===14?nF:d===13?rF:d===12?$re:d===11?tF:void jt()})(this.hi);let o;return this.Ri.runTransaction(e,a,i,(c=>(o=new nN(c,this.Qr?this.Qr.next():es.oe),r==="readwrite-primary"?this.wi(o).next((d=>!!d||this.Si(o))).next((d=>{if(!d)throw da(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new pt(Ve.FAILED_PRECONDITION,XV);return n(o)})).next((d=>this.Di(o).next((()=>d)))):this.Ki(o).next((()=>n(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Ki(e){return Up(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new pt(Ve.FAILED_PRECONDITION,q5)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Up(e).put("owner",r)}static D(){return wu.D()}bi(e){const r=Up(e);return r.get("owner").next((n=>this.vi(n)?(at("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ke.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(da(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;rV()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return at("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return da("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){da("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Up(t){return Va(t,"owner")}function av(t){return Va(t,"clientMetadata")}function iq(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=vr(),a=vr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new J8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return rV()?8:ZV(Ua())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new aae;return this.Xi(e,r,o).next((c=>{if(i.result=c,this.zi)return this.es(e,r,o,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(uh()<=Er.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",dh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ke.resolve()):(uh()<=Er.DEBUG&&at("QueryEngine","Query:",dh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(uh()<=Er.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",dh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(r))):ke.resolve())}Yi(e,r){if(JO(r))return ke.resolve(null);let n=Es(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=yx(r,null,"F"),n=Es(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const o=vr(...i);return this.Ji.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,o,d.readTime)?this.Yi(e,yx(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return JO(r)||a.isEqual(Lt.min())?ke.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(r,i);return this.ns(r,o,n,a)?ke.resolve(null):(uh()<=Er.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),dh(r)),this.rs(e,o,r,KV(a,-1)).next((c=>c)))}))}ts(e,r){let n=new Tn(bF(e));return r.forEach(((a,i)=>{r1(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return uh()<=Er.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",dh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Cs.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Dn(lr),this._s=new Lu((i=>Kd(i)),e1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function oq(t,e,r,n){return new iae(t,e,r,n)}async function lq(t,e){const r=It(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const o=[],c=[];let d=vr();for(const h of a){o.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function sae(t,e){const r=It(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,y=m.keys();let v=ke.resolve();return y.forEach((_=>{v=v.next((()=>p.getEntry(d,_))).next((S=>{const w=h.docVersions.get(_);Rt(w!==null),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=vr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function cq(t){const e=It(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function oae(t,e){const r=It(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const y=a.get(m);if(!y)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let v=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(ma.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,n)),a=a.insert(m,v),(function(S,w,j){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(y,v,p)&&c.push(r.Ur.updateTargetData(i,v))}));let d=Ns(),h=vr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(lae(i,o,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Lt.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return ke.waitFor(c).next((()=>o.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function lae(t,e,r){let n=vr(),a=vr();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let o=Ns();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Lt.min())?(e.removeEntry(c,d.readTime),o=o.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),o=o.insert(c,d)):at("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:o,Is:a}}))}function cae(t,e){const r=It(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function wx(t,e){const r=It(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,ke.resolve(a)):r.Ur.allocateTargetId(n).next((o=>(a=new Fl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Vh(t,e,r){const n=It(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(o=>n.persistence.referenceDelegate.removeTarget(o,a)))}catch(o){if(!Du(o))throw o;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function yN(t,e,r){const n=It(t);let a=Lt.min(),i=vr();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,h,p){const m=It(d),y=m._s.get(p);return y!==void 0?ke.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,o,Es(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(o,e,r?a:Lt.min(),r?i:vr()))).next((c=>(hq(n,xF(e),c),{documents:c,Ts:i})))))}function uq(t,e){const r=It(t),n=It(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((o=>o?o.target:null))))}function dq(t,e){const r=It(t),n=r.us.get(e)||Lt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,KV(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(hq(r,e,a),a)))}function hq(t,e,r){let n=t.us.get(e)||Lt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function jI(t,e){return`firestore_clients_${t}_${e}`}function kI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function H5(t,e){return`firestore_targets_${t}_${e}`}class Sx{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,o=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return o&&a.error&&(o=typeof a.error.message=="string"&&typeof a.error.code=="string",o&&(i=new pt(a.error.code,a.error.message))),o?new Sx(e,r,a.state,i):(da("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ym{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new pt(n.error.code,n.error.message))),i?new ym(e,n.state,a):(da("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _x{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=U8();for(let o=0;a&&o<n.activeTargetIds.length;++o)a=JV(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return a?new _x(e,i):(da("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class e7{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new e7(r.clientId,r.onlineState):(da("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vN{constructor(){this.activeTargetIds=U8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G5{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Dn(lr),this.started=!1,this.bs=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=jI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new vN),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(jI(this.persistenceKey,n));if(a){const i=_x.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(H5(this.persistenceKey,e));if(a){const i=ym.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(H5(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return at("SharedClientState","READ",e,r),r}setItem(e,r){at("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(at("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void da("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let o=es.oe;if(i!=null)try{const c=JSON.parse(i);Rt(typeof c=="number"),o=c}catch(c){da("SharedClientState","Failed to read sequence number from WebStorage",c)}return o})(r.newValue);n!==es.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new Sx(this.currentUser,e,r,n),i=kI(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=kI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=H5(this.persistenceKey,e),i=new ym(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return _x.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return Sx.Rs(new Si(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return ym.Rs(a,r)}Ls(e){return e7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),o=[],c=[];return i.forEach((d=>{a.has(d)||o.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(o,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=U8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class fq{constructor(){this.so=new vN,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vN,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iv=null;function W5(){return iv===null?iv=(function(){return 268435456+Math.round(2147483648*Math.random())})():iv++,"0x"+iv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="WebChannelConnection";class fae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,o){const c=W5(),d=this.xo(r,n.toUriEncodedString());at("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(r,d,h,a).then((p=>(at("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Bm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,o,c){return this.Mo(r,n,a,i,o)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Af})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>r[o]=i)),a&&a.headers.forEach(((i,o)=>r[o]=i))}xo(r,n){const a=dae[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=W5();return new Promise(((o,c)=>{const d=new zV;d.setWithCredentials(!0),d.listenOnce(VV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Fv.NO_ERROR:const p=d.getResponseJson();at(bi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Fv.TIMEOUT:at(bi,`RPC '${e}' ${i} timed out`),c(new pt(Ve.DEADLINE_EXCEEDED,"Request time out"));break;case Fv.HTTP_ERROR:const m=d.getStatus();if(at(bi,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const _=(function(w){const j=w.toLowerCase().replace(/_/g,"-");return Object.values(Ve).indexOf(j)>=0?j:Ve.UNKNOWN})(v.status);c(new pt(_,v.message))}else c(new pt(Ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new pt(Ve.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{at(bi,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);at(bi,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=W5(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HV(),c=qV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");at(bi,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=o.createWebChannel(p,d);let y=!1,v=!1;const _=new hae({Io:w=>{v?at(bi,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(y||(at(bi,`Opening RPC '${e}' stream ${a} transport.`),m.open(),y=!0),at(bi,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),S=(w,j,O)=>{w.listen(j,(R=>{try{O(R)}catch(L){setTimeout((()=>{throw L}),0)}}))};return S(m,nm.EventType.OPEN,(()=>{v||(at(bi,`RPC '${e}' stream ${a} transport opened.`),_.yo())})),S(m,nm.EventType.CLOSE,(()=>{v||(v=!0,at(bi,`RPC '${e}' stream ${a} transport closed`),_.So())})),S(m,nm.EventType.ERROR,(w=>{v||(v=!0,Bm(bi,`RPC '${e}' stream ${a} transport errored:`,w),_.So(new pt(Ve.UNAVAILABLE,"The operation could not be completed")))})),S(m,nm.EventType.MESSAGE,(w=>{var j;if(!v){const O=w.data[0];Rt(!!O);const R=O,L=R.error||((j=R[0])===null||j===void 0?void 0:j.error);if(L){at(bi,`RPC '${e}' stream ${a} received error:`,L);const C=L.status;let P=(function(k){const z=_a[k];if(z!==void 0)return RF(z)})(C),E=L.message;P===void 0&&(P=Ve.INTERNAL,E="Unknown error status: "+C+" with message "+L.message),v=!0,_.So(new pt(P,E)),m.close()}else at(bi,`RPC '${e}' stream ${a} received:`,O),_.bo(O)}})),S(c,FV.STAT_EVENT,(w=>{w.stat===tN.PROXY?at(bi,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===tN.NOPROXY&&at(bi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{_.wo()}),0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(){return typeof window<"u"?window:null}function Xv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){return new xne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&at("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,r,n,a,i,o,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new t7(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ve.RESOURCE_EXHAUSTED?(da(r.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new pt(Ve.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pae extends mq{constructor(e,r,n,a,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=_ne(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Lt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Lt.min():o.readTime?Za(o.readTime):Lt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=hN(this.serializer),r.addTarget=(function(i,o){let c;const d=o.target;if(c=mx(d)?{documents:zF(i,d)}:{query:VF(i,d)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=DF(i,o.resumeToken);const h=uN(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(Lt.min())>0){c.readTime=zh(i,o.snapshotVersion.toTimestamp());const h=uN(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=Nne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=hN(this.serializer),r.removeTarget=e,this.a_(r)}}class mae extends mq{constructor(e,r,n,a,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Tne(e.writeResults,e.commitTime),n=Za(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=hN(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Qm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new pt(Ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,dN(r,n),a,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new pt(Ve.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Lo(e,dN(r,n),a,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pt(Ve.UNKNOWN,o.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class yae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(da(r),this.D_=!1):at("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((o=>{n.enqueueAndForget((async()=>{p0(this)&&(at("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=It(d);h.L_.add(4),await s1(h),h.q_.set("Unknown"),h.L_.delete(4),await g2(h)})(this))}))})),this.q_=new yae(n,a)}}async function g2(t){if(p0(t))for(const e of t.B_)await e(!0)}async function s1(t){for(const e of t.B_)await e(!1)}function y2(t,e){const r=It(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),a7(r)?n7(r):Cf(r).r_()&&r7(r,e))}function Fh(t,e){const r=It(t),n=Cf(r);r.N_.delete(e),n.r_()&&gq(r,e),r.N_.size===0&&(n.r_()?n.o_():p0(r)&&r.q_.set("Unknown"))}function r7(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Cf(t).A_(e)}function gq(t,e){t.Q_.xe(e),Cf(t).R_(e)}function n7(t){t.Q_=new mne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Cf(t).start(),t.q_.v_()}function a7(t){return p0(t)&&!Cf(t).n_()&&t.N_.size>0}function p0(t){return It(t).L_.size===0}function yq(t){t.Q_=void 0}async function xae(t){t.q_.set("Online")}async function bae(t){t.N_.forEach(((e,r)=>{r7(t,e)}))}async function wae(t,e){yq(t),a7(t)?(t.q_.M_(e),n7(t)):t.q_.set("Unknown")}async function Sae(t,e,r){if(t.q_.set("Online"),e instanceof PF&&e.state===2&&e.cause)try{await(async function(a,i){const o=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,o),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Tx(t,n)}else if(e instanceof Qv?t.Q_.Ke(e):e instanceof MF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Lt.min()))try{const n=await cq(t.localStore);r.compareTo(n)>=0&&await(function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,o))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(ma.EMPTY_BYTE_STRING,p.snapshotVersion)),gq(i,d);const m=new Fl(p.target,d,h,p.sequenceNumber);r7(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){at("RemoteStore","Failed to raise snapshot:",n),await Tx(t,n)}}async function Tx(t,e,r){if(!Du(e))throw e;t.L_.add(1),await s1(t),t.q_.set("Offline"),r||(r=()=>cq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{at("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await g2(t)}))}function vq(t,e){return e().catch((r=>Tx(t,r,e)))}async function kf(t){const e=It(t),r=ku(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_ae(e);)try{const a=await cae(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,Tae(e,a)}catch(a){await Tx(e,a)}xq(e)&&bq(e)}function _ae(t){return p0(t)&&t.O_.length<10}function Tae(t,e){t.O_.push(e);const r=ku(t);r.r_()&&r.V_&&r.m_(e.mutations)}function xq(t){return p0(t)&&!ku(t).n_()&&t.O_.length>0}function bq(t){ku(t).start()}async function Nae(t){ku(t).p_()}async function Aae(t){const e=ku(t);for(const r of t.O_)e.m_(r.mutations)}async function Eae(t,e,r){const n=t.O_.shift(),a=H8.from(n,e,r);await vq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await kf(t)}async function jae(t,e){e&&ku(t).V_&&await(async function(n,a){if((function(o){return IF(o)&&o!==Ve.ABORTED})(a.code)){const i=n.O_.shift();ku(n).s_(),await vq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await kf(n)}})(t,e),xq(t)&&bq(t)}async function OI(t,e){const r=It(t);r.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const n=p0(r);r.L_.add(3),await s1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await g2(r)}async function xN(t,e){const r=It(t);e?(r.L_.delete(2),await g2(r)):e||(r.L_.add(2),await s1(r),r.q_.set("Unknown"))}function Cf(t){return t.K_||(t.K_=(function(r,n,a){const i=It(r);return i.w_(),new pae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:xae.bind(null,t),Ro:bae.bind(null,t),mo:wae.bind(null,t),d_:Sae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),a7(t)?n7(t):t.q_.set("Unknown")):(await t.K_.stop(),yq(t))}))),t.K_}function ku(t){return t.U_||(t.U_=(function(r,n,a){const i=It(r);return i.w_(),new mae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Nae.bind(null,t),mo:jae.bind(null,t),f_:Aae.bind(null,t),g_:Eae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await kf(t)):(await t.U_.stop(),t.O_.length>0&&(at("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const o=Date.now()+n,c=new i7(e,r,o,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(Ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function s7(t,e){if(da("AsyncQueue",`${e}: ${t}`),Du(t))return new pt(Ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.comparator=e?(r,n)=>e(r,n)||xt.comparator(r.key,n.key):(r,n)=>xt.comparator(r.key,n.key),this.keyedMap=am(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new _h(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _h)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _h;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.W_=new Dn(xt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):jt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class qh{constructor(e,r,n,a,i,o,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const o=[];return r.forEach((c=>{o.push({type:0,doc:c})})),new qh(e,r,_h.emptySet(r),o,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Cae{constructor(){this.queries=RI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=It(r),i=a.queries;a.queries=RI(),i.forEach(((o,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new pt(Ve.ABORTED,"Firestore shutting down"))}}function RI(){return new Lu((t=>vF(t)),c2)}async function o7(t,e){const r=It(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new kae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const c=s7(o,`Initialization of query '${dh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&c7(r)}async function l7(t,e){const r=It(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Oae(t,e){const r=It(t);let n=!1;for(const a of e){const i=a.query,o=r.queries.get(i);if(o){for(const c of o.j_)c.X_(a)&&(n=!0);o.z_=a}}n&&c7(r)}function Iae(t,e,r){const n=It(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function c7(t){t.Y_.forEach((e=>{e.next()}))}var bN,MI;(MI=bN||(bN={})).ea="default",MI.Cache="cache";class u7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new qh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=qh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e){this.key=e}}class Sq{constructor(e){this.key=e}}class Rae{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=vr(),this.mutatedKeys=vr(),this.Aa=bF(e),this.Ra=new _h(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new II,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const y=a.get(p),v=r1(this.query,m)?m:null,_=!!y&&this.mutatedKeys.has(y.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;y&&v?y.data.isEqual(v.data)?_!==S&&(n.track({type:3,doc:v}),w=!0):this.ga(y,v)||(n.track({type:2,doc:v}),w=!0,(d&&this.Aa(v,d)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!y&&v?(n.track({type:0,doc:v}),w=!0):y&&!v&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(c=!0)),w&&(v?(o=o.add(v),i=S?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:o,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((p,m)=>(function(v,_){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return S(v)-S(_)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,o.length!==0||h?{snapshot:new qh(this.query,e.Ra,i,o,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new II,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=vr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new Sq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new wq(n))})),r}ba(e){this.Ta=e.Ts,this.da=vr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return qh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Mae{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Pae{constructor(e){this.key=e,this.va=!1}}class Dae{constructor(e,r,n,a,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Lu((c=>vF(c)),c2),this.Ma=new Map,this.xa=new Set,this.Oa=new Dn(xt.comparator),this.Na=new Map,this.La=new Y8,this.Ba={},this.ka=new Map,this.qa=Zd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Lae(t,e,r=!0){const n=v2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await _q(n,e,r,!0),a}async function Bae(t,e){const r=v2(t);await _q(r,e,!0,!1)}async function _q(t,e,r,n){const a=await wx(t.localStore,Es(e)),i=a.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await d7(t,e,i,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&y2(t.remoteStore,a),c}async function d7(t,e,r,n,a){t.Ka=(m,y,v)=>(async function(S,w,j,O){let R=w.view.ma(j);R.ns&&(R=await yN(S.localStore,w.query,!1).then((({documents:E})=>w.view.ma(E,R))));const L=O&&O.targetChanges.get(w.targetId),C=O&&O.targetMismatches.get(w.targetId)!=null,P=w.view.applyChanges(R,S.isPrimaryClient,L,C);return wN(S,w.targetId,P.wa),P.snapshot})(t,m,y,v);const i=await yN(t.localStore,e,!0),o=new Rae(e,i.Ts),c=o.ma(i.documents),d=i1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=o.applyChanges(c,t.isPrimaryClient,d);wN(t,r,h.wa);const p=new Mae(e,r,o);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function $ae(t,e,r){const n=It(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((o=>!c2(o,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Vh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&Fh(n.remoteStore,a.targetId),Hh(n,a.targetId)})).catch(Pu)):(Hh(n,a.targetId),await Vh(n.localStore,a.targetId,!0))}async function Uae(t,e){const r=It(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Fh(r.remoteStore,n.targetId))}async function zae(t,e,r){const n=m7(t);try{const a=await(function(o,c){const d=It(o),h=Zn.now(),p=c.reduce(((v,_)=>v.add(_.key)),vr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let _=Ns(),S=vr();return d.cs.getEntries(v,p).next((w=>{_=w,_.forEach(((j,O)=>{O.isValidDocument()||(S=S.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,_))).next((w=>{m=w;const j=[];for(const O of c){const R=dne(O,m.get(O.key).overlayedDocument);R!=null&&j.push(new hc(O.key,R,lF(R.value.mapValue),ha.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,j,c)})).next((w=>{y=w;const j=w.applyToLocalDocumentSet(m,S);return d.documentOverlayCache.saveOverlays(v,w.batchId,j)}))})).then((()=>({batchId:y.batchId,changes:SF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(o,c,d){let h=o.Ba[o.currentUser.toKey()];h||(h=new Dn(lr)),h=h.insert(c,d),o.Ba[o.currentUser.toKey()]=h})(n,a.batchId,r),await Bu(n,a.changes),await kf(n.remoteStore)}catch(a){const i=s7(a,"Failed to persist write");r.reject(i)}}async function Tq(t,e){const r=It(t);try{const n=await oae(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const o=r.Na.get(i);o&&(Rt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?o.va=!0:a.modifiedDocuments.size>0?Rt(o.va):a.removedDocuments.size>0&&(Rt(o.va),o.va=!1))})),await Bu(r,n,e)}catch(n){await Pu(n)}}function PI(t,e,r){const n=It(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,o)=>{const c=o.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(o,c){const d=It(o);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)})),h&&c7(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Vae(t,e,r){const n=It(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let o=new Dn(xt.comparator);o=o.insert(i,qn.newNoDocument(i,Lt.min()));const c=vr().add(i),d=new a1(Lt.min(),new Map,new Dn(lr),o,c);await Tq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),p7(n)}else await Vh(n.localStore,e,!1).then((()=>Hh(n,e,r))).catch(Pu)}async function Fae(t,e){const r=It(t),n=e.batch.batchId;try{const a=await sae(r.localStore,e);f7(r,n,null),h7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Bu(r,a)}catch(a){await Pu(a)}}async function qae(t,e,r){const n=It(t);try{const a=await(function(o,c){const d=It(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Rt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);f7(n,e,r),h7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Bu(n,a)}catch(a){await Pu(a)}}function h7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function f7(t,e,r){const n=It(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Hh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||Nq(t,n)}))}function Nq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Fh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),p7(t))}function wN(t,e,r){for(const n of r)n instanceof wq?(t.La.addReference(n.key,e),Hae(t,n)):n instanceof Sq?(at("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Nq(t,n.key)):jt()}function Hae(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(at("SyncEngine","New document in limbo: "+r),t.xa.add(n),p7(t))}function p7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new xt(Fr.fromString(e)),n=t.qa.next();t.Na.set(n,new Pae(r)),t.Oa=t.Oa.insert(r,n),y2(t.remoteStore,new Fl(Es(t1(r.path)),n,"TargetPurposeLimboResolution",es.oe))}}async function Bu(t,e,r){const n=It(t),a=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{o.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=J8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(o),n.Ca.d_(a),await(async function(d,h){const p=It(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>ke.forEach(h,(y=>ke.forEach(y.$i,(v=>p.persistence.referenceDelegate.addReference(m,y.targetId,v))).next((()=>ke.forEach(y.Ui,(v=>p.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))))))}catch(m){if(!Du(m))throw m;at("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const v=p.os.get(y),_=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(_);p.os=p.os.insert(y,S)}}})(n.localStore,i))}async function Gae(t,e){const r=It(t);if(!r.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const n=await lq(r.localStore,e);r.currentUser=e,(function(i,o){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new pt(Ve.CANCELLED,o))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Bu(r,n.hs)}}function Wae(t,e){const r=It(t),n=r.Na.get(e);if(n&&n.va)return vr().add(n.key);{let a=vr();const i=r.Ma.get(e);if(!i)return a;for(const o of i){const c=r.Fa.get(o);a=a.unionWith(c.view.Va)}return a}}async function Kae(t,e){const r=It(t),n=await yN(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&wN(r,e.targetId,a.wa),a}async function Qae(t,e){const r=It(t);return dq(r.localStore,e).then((n=>Bu(r,n)))}async function Xae(t,e,r,n){const a=It(t),i=await(function(c,d){const h=It(c),p=It(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):ke.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await kf(a.remoteStore):r==="acknowledged"||r==="rejected"?(f7(a,e,n||null),h7(a,e),(function(c,d){It(It(c).mutationQueue).On(d)})(a.localStore,e)):jt(),await Bu(a,i)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Yae(t,e){const r=It(t);if(v2(r),m7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await DI(r,n.toArray());r.Qa=!0,await xN(r.remoteStore,!0);for(const i of a)y2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,o)=>{r.sharedClientState.isLocalQueryTarget(o)?n.push(o):a=a.then((()=>(Hh(r,o),Vh(r.localStore,o,!0)))),Fh(r.remoteStore,o)})),await a,await DI(r,n),(function(o){const c=It(o);c.Na.forEach(((d,h)=>{Fh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Dn(xt.comparator)})(r),r.Qa=!1,await xN(r.remoteStore,!1)}}async function DI(t,e,r){const n=It(t),a=[],i=[];for(const o of e){let c;const d=n.Ma.get(o);if(d&&d.length!==0){c=await wx(n.localStore,Es(d[0]));for(const h of d){const p=n.Fa.get(h),m=await Kae(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await uq(n.localStore,o);c=await wx(n.localStore,h),await d7(n,Aq(h),o,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function Aq(t){return gF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Zae(t){return(function(r){return It(It(r).persistence).Qi()})(It(t).localStore)}async function Jae(t,e,r,n){const a=It(t);if(a.Qa)return void at("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const o=await dq(a.localStore,xF(i[0])),c=a1.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ma.EMPTY_BYTE_STRING);await Bu(a,o,c);break}case"rejected":await Vh(a.localStore,e,!0),Hh(a,e,n);break;default:jt()}}async function eie(t,e,r){const n=v2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){at("SyncEngine","Adding an already active target "+a);continue}const i=await uq(n.localStore,a),o=await wx(n.localStore,i);await d7(n,Aq(i),o.targetId,!1,o.resumeToken),y2(n.remoteStore,o)}for(const a of r)n.Ma.has(a)&&await Vh(n.localStore,a,!1).then((()=>{Fh(n.remoteStore,a),Hh(n,a)})).catch(Pu)}}function v2(t){const e=It(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vae.bind(null,e),e.Ca.d_=Oae.bind(null,e.eventManager),e.Ca.$a=Iae.bind(null,e.eventManager),e}function m7(t){const e=It(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qae.bind(null,e),e}class Xm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=m2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return oq(this.persistence,new sq,e.initialUser,this.serializer)}Ga(e){return new aq(p2.Zr,this.serializer)}Wa(e){return new fq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xm.provider={build:()=>new Xm};class Eq extends Xm{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await m7(this.Ja.syncEngine),await kf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return oq(this.persistence,new sq,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Vne(n,e.asyncQueue,r)}Ha(e,r){const n=new Sre(r,this.persistence);return new wre(e.asyncQueue,n)}Ga(e){const r=iq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new Z8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,pq(),Xv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new fq}}class tie extends Eq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof G5&&(this.sharedClientState.syncEngine={no:Xae.bind(null,r),ro:Jae.bind(null,r),io:eie.bind(null,r),Qi:Zae.bind(null,r),eo:Qae.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Yae(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=pq();if(!G5.D(r))throw new pt(Ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=iq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new G5(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Ym{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>PI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gae.bind(null,this.syncEngine),await xN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Cae})()}createDatastore(e){const r=m2(e.databaseInfo.databaseId),n=(function(i){return new fae(i)})(e.databaseInfo);return(function(i,o,c,d){return new gae(i,o,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,o,c){return new vae(n,a,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>PI(this.syncEngine,r,0)),(function(){return CI.D()?new CI:new uae})())}createSyncEngine(e,r){return(function(a,i,o,c,d,h,p){const m=new Dae(a,i,o,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=It(a);at("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await s1(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Ym.provider={build:()=>new Ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pt(Ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const o=It(a),c={documents:i.map((m=>Km(o.serializer,m)))},d=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Fr.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const y=Sne(o.serializer,m);h.set(y.key.toString(),y)}));const p=[];return i.forEach((m=>{const y=h.get(m.toString());Rt(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new n1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=xt.fromPath(n);this.mutations.push(new F8(a,this.precondition(a)))})),await(async function(n,a){const i=It(n),o={writes:a.map((c=>Qm(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Fr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw jt();r=Lt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new pt(Ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Lt.min())?ha.exists(!1):ha.updateTime(r):ha.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Lt.min()))throw new pt(Ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ha.updateTime(r)}return ha.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new t7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new rie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Jg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!IF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aie{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Si.UNAUTHENTICATED,this.clientId=GV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async o=>{at("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(at("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=s7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function K5(t,e){t.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await lq(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function LI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await iie(t);at("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>OI(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>OI(e.remoteStore,a))),t._onlineComponents=e}async function iie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){at("FirestoreClient","Using user provided OfflineComponentProvider");try{await K5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ve.FAILED_PRECONDITION||a.code===Ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Bm("Error using user provided cache. Falling back to memory cache: "+r),await K5(t,new Xm)}}else at("FirestoreClient","Using default OfflineComponentProvider"),await K5(t,new Xm);return t._offlineComponents}async function y7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(at("FirestoreClient","Using user provided OnlineComponentProvider"),await LI(t,t._uninitializedComponentsProvider._online)):(at("FirestoreClient","Using default OnlineComponentProvider"),await LI(t,new Ym))),t._onlineComponents}function sie(t){return y7(t).then((e=>e.syncEngine))}function oie(t){return y7(t).then((e=>e.datastore))}async function Nx(t){const e=await y7(t),r=e.eventManager;return r.onListen=Lae.bind(null,e.syncEngine),r.onUnlisten=$ae.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Bae.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Uae.bind(null,e.syncEngine),r}function lie(t,e,r={}){const n=new To;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new g7({next:y=>{p.Za(),o.enqueueAndForget((()=>l7(i,m)));const v=y.docs.has(c);!v&&y.fromCache?h.reject(new pt(Ve.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&d&&d.source==="server"?h.reject(new pt(Ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new u7(t1(c.path),p,{includeMetadataChanges:!0,_a:!0});return o7(i,m)})(await Nx(t),t.asyncQueue,e,r,n))),n.promise}function cie(t,e,r={}){const n=new To;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,d,h){const p=new g7({next:y=>{p.Za(),o.enqueueAndForget((()=>l7(i,m))),y.fromCache&&d.source==="server"?h.reject(new pt(Ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new u7(c,p,{includeMetadataChanges:!0,_a:!0});return o7(i,m)})(await Nx(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(t,e,r){if(!r)throw new pt(Ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uie(t,e,r,n){if(e===!0&&n===!0)throw new pt(Ve.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function $I(t){if(!xt.isDocumentKey(t))throw new pt(Ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UI(t){if(xt.isDocumentKey(t))throw new pt(Ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function x2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":jt()}function as(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pt(Ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=x2(t);throw new pt(Ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function die(t,e){if(e<=0)throw new pt(Ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new pt(Ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pt(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v7{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(Ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pt(Ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zI(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new dre;switch(n.type){case"firstParty":return new pre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pt(Ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=BI.get(r);n&&(at("ComponentProvider","Removing Datastore"),BI.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fc(this.firestore,e,this._query)}}class fi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}}class Su extends fc{constructor(e,r,n){super(e,r,t1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new xt(e))}withConverter(e){return new Su(this.firestore,e,this._path)}}function Bt(t,e,...r){if(t=Nn(t),kq("collection","path",e),t instanceof v7){const n=Fr.fromString(e,...r);return UI(n),new Su(t,null,n)}{if(!(t instanceof fi||t instanceof Su))throw new pt(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fr.fromString(e,...r));return UI(n),new Su(t.firestore,null,n)}}function ot(t,e,...r){if(t=Nn(t),arguments.length===1&&(e=GV.newId()),kq("doc","path",e),t instanceof v7){const n=Fr.fromString(e,...r);return $I(n),new fi(t,null,new xt(n))}{if(!(t instanceof fi||t instanceof Su))throw new pt(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Fr.fromString(e,...r));return $I(n),new fi(t.firestore,t instanceof Su?t.converter:null,new xt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new t7(this,"async_queue_retry"),this.Vu=()=>{const n=Xv();n&&at("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Xv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Xv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new To;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Du(e))throw e;at("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c})(n);throw da("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=i7.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&jt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function FI(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Zo extends v7{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new VI,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VI(e),this._firestoreClient=void 0,await e}}}function hie(t,e,r){r||(r="(default)");const n=Qg(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Rh(i,e))return a;throw new pt(Ve.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new pt(Ve.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pt(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function o1(t){if(t._terminated)throw new pt(Ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fie(t),t._firestoreClient}function fie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new Fre(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,jq(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new aie(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jd(ma.fromBase64String(e))}catch(r){throw new pt(Ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Jd(ma.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new pt(Ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new pt(Ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new pt(Ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pie=/^__.*__$/;class mie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new hc(e,this.data,this.fieldMask,r,this.fieldTransforms):new jf(e,this.data,r,this.fieldTransforms)}}class Cq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new hc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Oq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class b2{constructor(e,r,n,a,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new b2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ax(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Oq(this.Cu)&&pie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||m2(e)}Qu(e,r,n,a=!1){return new b2({Cu:e,methodName:r,qu:n,path:Yn.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u1(t){const e=t._freezeSettings(),r=m2(t._databaseId);return new gie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function w7(t,e,r,n,a,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);T7("Data must be an object, but it was:",o,n);const c=Mq(n,o);let d,h;if(i.merge)d=new ts(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=SN(e,m,r);if(!o.contains(y))throw new pt(Ve.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Dq(p,y)||p.push(y)}d=new ts(p),h=o.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=o.fieldTransforms;return new mie(new hi(c),d,h)}class w2 extends c1{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof w2}}function yie(t,e,r){return new b2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S7 extends c1{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=yie(this,e,!0),n=this.Ku.map((i=>Of(i,r))),a=new Qd(n);return new V8(e.path,a)}isEqual(e){return e instanceof S7&&Rh(this.Ku,e.Ku)}}class _7 extends c1{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Uh(e.serializer,NF(e.serializer,this.$u));return new V8(e.path,r)}isEqual(e){return e instanceof _7&&this.$u===e.$u}}function Iq(t,e,r,n){const a=t.Qu(1,e,r);T7("Data must be an object, but it was:",a,n);const i=[],o=hi.empty();f0(n,((d,h)=>{const p=N7(e,d,r);h=Nn(h);const m=a.Nu(p);if(h instanceof w2)i.push(p);else{const y=Of(h,m);y!=null&&(i.push(p),o.set(p,y))}}));const c=new ts(i);return new Cq(o,c,a.fieldTransforms)}function Rq(t,e,r,n,a,i){const o=t.Qu(1,e,r),c=[SN(e,n,r)],d=[a];if(i.length%2!=0)throw new pt(Ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)c.push(SN(e,i[y])),d.push(i[y+1]);const h=[],p=hi.empty();for(let y=c.length-1;y>=0;--y)if(!Dq(h,c[y])){const v=c[y];let _=d[y];_=Nn(_);const S=o.Nu(v);if(_ instanceof w2)h.push(v);else{const w=Of(_,S);w!=null&&(h.push(v),p.set(v,w))}}const m=new ts(h);return new Cq(p,m,o.fieldTransforms)}function vie(t,e,r,n=!1){return Of(r,t.Qu(n?4:3,e))}function Of(t,e){if(Pq(t=Nn(t)))return T7("Unsupported field value:",e,t),Mq(t,e);if(t instanceof c1)return(function(n,a){if(!Oq(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let o=0;for(const c of n){let d=Of(c,a.Lu(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=Nn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return NF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Zn.fromDate(n);return{timestampValue:zh(a.serializer,i)}}if(n instanceof Zn){const i=new Zn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zh(a.serializer,i)}}if(n instanceof x7)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Jd)return{bytesValue:DF(a.serializer,n._byteString)};if(n instanceof fi){const i=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw a.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:K8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof b7)return(function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return z8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${x2(n)}`)})(t,e)}function Mq(t,e){const r={};return aF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):f0(t,((n,a)=>{const i=Of(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function Pq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zn||t instanceof x7||t instanceof Jd||t instanceof fi||t instanceof c1||t instanceof b7)}function T7(t,e,r){if(!Pq(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=x2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function SN(t,e,r){if((e=Nn(e))instanceof l1)return e._internalPath;if(typeof e=="string")return N7(t,e);throw Ax("Field path arguments must be of type string or ",t,!1,void 0,r)}const xie=new RegExp("[~\\*/\\[\\]]");function N7(t,e,r){if(e.search(xie)>=0)throw Ax(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new l1(...e.split("."))._internalPath}catch{throw Ax(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Ax(t,e,r,n,a){const i=n&&!n.isEmpty(),o=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${n}`),o&&(d+=` in document ${a}`),d+=")"),new pt(Ve.INVALID_ARGUMENT,c+t+d)}function Dq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(S2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class bie extends Ex{data(){return super.data()}}function S2(t,e){return typeof e=="string"?N7(t,e):e instanceof l1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pt(Ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A7{}class E7 extends A7{}function Pr(t,e,...r){let n=[];e instanceof A7&&n.push(e),n=n.concat(r),(function(i){const o=i.filter((d=>d instanceof j7)).length,c=i.filter((d=>d instanceof _2)).length;if(o>1||o>0&&c>0)throw new pt(Ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class _2 extends E7{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new _2(e,r,n)}_apply(e){const r=this._parse(e);return Bq(e._query,r),new fc(e.firestore,e.converter,cN(e._query,r))}_parse(e){const r=u1(e.firestore);return(function(i,o,c,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new pt(Ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){HI(m,p);const v=[];for(const _ of m)v.push(qI(d,i,_));y={arrayValue:{values:v}}}else y=qI(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||HI(m,p),y=vie(c,o,m,p==="in"||p==="not-in");return jr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function un(t,e,r){const n=e,a=S2("where",t);return _2._create(a,n,r)}class j7 extends A7{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new j7(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:dn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let o=a;const c=i.getFlattenedFilters();for(const d of c)Bq(o,d),o=cN(o,d)})(e._query,r),new fc(e.firestore,e.converter,cN(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k7 extends E7{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new k7(e,r)}_apply(e){const r=(function(a,i,o){if(a.startAt!==null)throw new pt(Ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pt(Ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gm(i,o)})(e._query,this._field,this._direction);return new fc(e.firestore,e.converter,(function(a,i){const o=a.explicitOrderBy.concat([i]);return new Ef(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function Lo(t,e="asc"){const r=e,n=S2("orderBy",t);return k7._create(n,r)}class C7 extends E7{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new C7(e,r,n)}_apply(e){return new fc(e.firestore,e.converter,yx(e._query,this._limit,this._limitType))}}function fo(t){return die("limit",t),C7._create("limit",t,"F")}function qI(t,e,r){if(typeof(r=Nn(r))=="string"){if(r==="")throw new pt(Ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yF(e)&&r.indexOf("/")!==-1)throw new pt(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Fr.fromString(r));if(!xt.isDocumentKey(n))throw new pt(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return qm(t,new xt(n))}if(r instanceof fi)return qm(t,r._key);throw new pt(Ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${x2(r)}.`)}function HI(t,e){if(!Array.isArray(t)||t.length===0)throw new pt(Ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bq(t,e){const r=(function(a,i){for(const o of a)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new pt(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pt(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class $q{convertValue(e,r="none"){switch(Wd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw jt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return f0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((o=>Fn(o.doubleValue)));return new b7(i)}convertGeoPoint(e){return new x7(Fn(e.latitude),Fn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=B8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Vm(e));default:return null}}convertTimestamp(e){const r=nc(e);return new Zn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Fr.fromString(e);Rt(GF(n));const a=new Gd(n.get(1),n.get(3)),i=new xt(n.popFirst(5));return a.isEqual(r)||da(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O7(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class wie extends $q{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I7 extends Ex{constructor(e,r,n,a,i,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Yv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(S2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Yv extends I7{data(e={}){return super.data(e)}}class Uq{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new mh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Yv(this._firestore,this._userDataWriter,n.key,n,new mh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pt(Ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map((c=>{const d=new Yv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new mh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new Yv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new mh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),p=o.indexOf(c.doc.key)),{type:Sie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Sie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){t=as(t,fi);const e=as(t.firestore,Zo);return lie(o1(e),t._key).then((r=>zq(e,t,r)))}class T2 extends $q{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,r)}}function fd(t){t=as(t,fc);const e=as(t.firestore,Zo),r=o1(e),n=new T2(e);return Lq(t._query),cie(r,t._query).then((a=>new Uq(e,n,t,a)))}function Qn(t,e,r){t=as(t,fi);const n=as(t.firestore,Zo),a=O7(t.converter,e,r);return N2(n,[w7(u1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ha.none())])}function sr(t,e,r,...n){t=as(t,fi);const a=as(t.firestore,Zo),i=u1(a);let o;return o=typeof(e=Nn(e))=="string"||e instanceof l1?Rq(i,"updateDoc",t._key,e,r,n):Iq(i,"updateDoc",t._key,e),N2(a,[o.toMutation(t._key,ha.exists(!0))])}function Ka(t){return N2(as(t.firestore,Zo),[new n1(t._key,ha.none())])}function Cl(t,e){const r=as(t.firestore,Zo),n=ot(t),a=O7(t.converter,e);return N2(r,[w7(u1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ha.exists(!1))]).then((()=>n))}function Vr(t,...e){var r,n,a;t=Nn(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||FI(e[o])||(i=e[o],o++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(FI(e[o])){const m=e[o];e[o]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof fi)h=as(t.firestore,Zo),p=t1(t._key.path),d={next:m=>{e[o]&&e[o](zq(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=as(t,fc);h=as(m.firestore,Zo),p=m._query;const y=new T2(h);d={next:v=>{e[o]&&e[o](new Uq(h,y,m,v))},error:e[o+1],complete:e[o+2]},Lq(t._query)}return(function(y,v,_,S){const w=new g7(S),j=new u7(v,w,_);return y.asyncQueue.enqueueAndForget((async()=>o7(await Nx(y),j))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>l7(await Nx(y),j)))}})(o1(h),p,c,d)}function N2(t,e){return(function(n,a){const i=new To;return n.asyncQueue.enqueueAndForget((async()=>zae(await sie(n),a,i))),i.promise})(o1(t),e)}function zq(t,e,r){const n=r.docs.get(e._key),a=new T2(t);return new I7(t,a,e._key,n,new mh(r.hasPendingWrites,r.fromCache),e.converter)}class _ie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Eie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Tie(t){return new _ie(t)}class Nie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ym.provider,this._offlineComponentProvider={build:r=>new Eq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Aie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Ym.provider,this._offlineComponentProvider={build:r=>new tie(r,e==null?void 0:e.cacheSizeBytes)}}}function Eie(t){return new Nie(void 0)}function jie(){return new Aie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kie={maxAttempts:5};function zp(t,e){if((t=Nn(t)).firestore!==e)throw new pt(Ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=u1(r)}get(r){const n=zp(r,this._firestore),a=new wie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return jt();const o=i[0];if(o.isFoundDocument())return new Ex(this._firestore,a,o.key,o,n.converter);if(o.isNoDocument())return new Ex(this._firestore,a,n._key,null,n.converter);throw jt()}))}set(r,n,a){const i=zp(r,this._firestore),o=O7(i.converter,n,a),c=w7(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const o=zp(r,this._firestore);let c;return c=typeof(n=Nn(n))=="string"||n instanceof l1?Rq(this._dataReader,"Transaction.update",o._key,n,a,i):Iq(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,c),this}delete(r){const n=zp(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=zp(e,this._firestore),n=new T2(this._firestore);return super.get(e).then((a=>new I7(this._firestore,n,r._key,a._document,new mh(!1,!1),r.converter)))}}function Q5(t,e,r){t=as(t,Zo);const n=Object.assign(Object.assign({},kie),r);return(function(i){if(i.maxAttempts<1)throw new pt(Ve.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,o,c){const d=new To;return i.asyncQueue.enqueueAndForget((async()=>{const h=await oie(i);new nie(i.asyncQueue,h,c,o,d).au()})),d.promise})(o1(t),(a=>e(new Cie(t,a))),n)}function GI(...t){return new S7("arrayUnion",t)}function Vp(t){return new _7("increment",t)}(function(e,r=!0){(function(a){Af=a})(h0),Au(new ec("firestore",((n,{instanceIdentifier:a,options:i})=>{const o=n.getProvider("app").getImmediate(),c=new Zo(new hre(n.getProvider("auth-internal")),new gre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pt(Ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gd(h.options.projectId,p)})(o,a),o);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Ys(LO,"4.7.3",e),Ys(LO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq="firebasestorage.googleapis.com",Fq="storageBucket",Oie=120*1e3,Iie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Eo{constructor(e,r,n=0){super(X5(e),`Firebase Storage: ${r} (${X5(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,sa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return X5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ia;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ia||(ia={}));function X5(t){return"storage/"+t}function R7(){const t="An unknown error occurred, please check the error payload for server response.";return new sa(ia.UNKNOWN,t)}function Rie(t){return new sa(ia.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Mie(t){return new sa(ia.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Pie(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new sa(ia.UNAUTHENTICATED,t)}function Die(){return new sa(ia.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Lie(t){return new sa(ia.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Bie(){return new sa(ia.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $ie(){return new sa(ia.CANCELED,"User canceled the upload/download.")}function Uie(t){return new sa(ia.INVALID_URL,"Invalid URL '"+t+"'.")}function zie(t){return new sa(ia.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Vie(){return new sa(ia.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fq+"' property when initializing the app?")}function Fie(){return new sa(ia.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qie(){return new sa(ia.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Hie(t){return new sa(ia.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _N(t){return new sa(ia.INVALID_ARGUMENT,t)}function qq(){return new sa(ia.APP_DELETED,"The Firebase app was deleted.")}function Gie(t){return new sa(ia.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vm(t,e){return new sa(ia.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fp(t){throw new sa(ia.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=As.makeFromUrl(e,r)}catch{return new As(e,"")}if(n.path==="")return n;throw zie(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+a+o,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${p}/b/${a}/o${y}`,"i"),_={bucket:1,path:3},S=r===Vq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",j=new RegExp(`^https?://${S}/${a}/${w}`,"i"),R=[{regex:c,indices:d,postModify:i},{regex:v,indices:_,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<R.length;L++){const C=R[L],P=C.regex.exec(e);if(P){const E=P[C.indices.bucket];let N=P[C.indices.path];N||(N=""),n=new As(E,N),C.postModify(n);break}}if(n==null)throw Uie(e);return n}}class Wie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kie(t,e,r){let n=1,a=null,i=null,o=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(v,d())},w)}function y(){i&&clearTimeout(i)}function v(w,...j){if(h){y();return}if(w){y(),p.call(null,w,...j);return}if(d()||o){y(),p.call(null,w,...j);return}n<64&&(n*=2);let R;c===1?(c=2,R=0):R=(n+Math.random())*1e3,m(R)}let _=!1;function S(w){_||(_=!0,y(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{o=!0,S(!0)},r),S}function Qie(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xie(t){return t!==void 0}function Yie(t){return typeof t=="object"&&!Array.isArray(t)}function M7(t){return typeof t=="string"||t instanceof String}function WI(t){return P7()&&t instanceof Blob}function P7(){return typeof Blob<"u"}function KI(t,e,r,n){if(n<e)throw _N(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw _N(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Hq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var $d;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($d||($d={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zie(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jie{constructor(e,r,n,a,i,o,c,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new sv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===$d.NO_ERROR,d=i.getStatus();if(!c||Zie(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===$d.ABORT;n(!1,new sv(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new sv(h,i))})},r=(n,a)=>{const i=this.resolve_,o=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Xie(d)?i(d):i()}catch(d){o(d)}else if(c!==null){const d=R7();d.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,d)):o(d)}else if(a.canceled){const d=this.appDelete_?qq():$ie();o(d)}else{const d=Bie();o(d)}};this.canceled_?r(!1,new sv(!1,null,!0)):this.backoffId_=Kie(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Qie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function ese(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function tse(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rse(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nse(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ase(t,e,r,n,a,i,o=!0){const c=Hq(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return rse(h,e),ese(h,r),tse(h,i),nse(h,n),new Jie(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ise(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sse(...t){const e=ise();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(P7())return new Blob(t);throw new sa(ia.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ose(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lse(t){if(typeof atob>"u")throw Hie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Y5{constructor(e,r){this.data=e,this.contentType=r||null}}function cse(t,e){switch(t){case Vo.RAW:return new Y5(Gq(e));case Vo.BASE64:case Vo.BASE64URL:return new Y5(Wq(t,e));case Vo.DATA_URL:return new Y5(dse(e),hse(e))}throw R7()}function Gq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,o=t.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function use(t){let e;try{e=decodeURIComponent(t)}catch{throw vm(Vo.DATA_URL,"Malformed data URL.")}return Gq(e)}function Wq(t,e){switch(t){case Vo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw vm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw vm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=lse(e)}catch(a){throw a.message.includes("polyfill")?a:vm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Kq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw vm(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=fse(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function dse(t){const e=new Kq(t);return e.base64?Wq(Vo.BASE64,e.rest):use(e.rest)}function hse(t){return new Kq(t).contentType}function fse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,r){let n=0,a="";WI(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(WI(this.data_)){const n=this.data_,a=ose(n,e,r);return a===null?null:new su(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new su(n,!0)}}static getBlob(...e){if(P7()){const r=e.map(n=>n instanceof su?n.data_:n);return new su(sse.apply(null,r))}else{const r=e.map(o=>M7(o)?cse(Vo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let c=0;c<o.length;c++)a[i++]=o[c]}),new su(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(t){let e;try{e=JSON.parse(t)}catch{return null}return Yie(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function mse(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Xq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gse(t,e){return e}class Ci{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||gse}}let ov=null;function yse(t){return!M7(t)||t.length<2?t:Xq(t)}function Yq(){if(ov)return ov;const t=[];t.push(new Ci("bucket")),t.push(new Ci("generation")),t.push(new Ci("metageneration")),t.push(new Ci("name","fullPath",!0));function e(i,o){return yse(o)}const r=new Ci("name");r.xform=e,t.push(r);function n(i,o){return o!==void 0?Number(o):o}const a=new Ci("size");return a.xform=n,t.push(a),t.push(new Ci("timeCreated")),t.push(new Ci("updated")),t.push(new Ci("md5Hash",null,!0)),t.push(new Ci("cacheControl",null,!0)),t.push(new Ci("contentDisposition",null,!0)),t.push(new Ci("contentEncoding",null,!0)),t.push(new Ci("contentLanguage",null,!0)),t.push(new Ci("contentType",null,!0)),t.push(new Ci("metadata","customMetadata",!0)),ov=t,ov}function vse(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new As(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function xse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const o=r[i];n[o.local]=o.xform(n,e[o.server])}return vse(n,t),n}function Zq(t,e,r){const n=Qq(e);return n===null?null:xse(t,n,r)}function bse(t,e,r,n){const a=Qq(e);if(a===null||!M7(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+o(p)+"/o/"+o(m),v=A2(y,r,n),_=Hq({alt:"media",token:h});return v+_})[0]}function wse(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class D7{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jq(t){if(!t)throw R7()}function Sse(t,e){function r(n,a){const i=Zq(t,a,e);return Jq(i!==null),i}return r}function _se(t,e){function r(n,a){const i=Zq(t,a,e);return Jq(i!==null),bse(i,a,t.host,t._protocol)}return r}function eH(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Die():a=Pie():r.getStatus()===402?a=Mie(t.bucket):r.getStatus()===403?a=Lie(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function tH(t){const e=eH(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=Rie(t.path)),i.serverResponse=a.serverResponse,i}return r}function Tse(t,e,r){const n=e.fullServerUrl(),a=A2(n,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new D7(a,i,_se(t,r),o);return c.errorHandler=tH(e),c}function Nse(t,e){const r=e.fullServerUrl(),n=A2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function o(d,h){}const c=new D7(n,a,o,i);return c.successCodes=[200,204],c.errorHandler=tH(e),c}function Ase(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Ese(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Ase(null,e)),n}function jse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let R="";for(let L=0;L<2;L++)R=R+Math.random().toString().slice(2);return R}const d=c();o["Content-Type"]="multipart/related; boundary="+d;const h=Ese(e,n,a),p=wse(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",v=su.getBlob(m,n,y);if(v===null)throw Fie();const _={name:h.fullPath},S=A2(i,t.host,t._protocol),w="POST",j=t.maxUploadRetryTime,O=new D7(S,w,Sse(t,r),j);return O.urlParams=_,O.headers=o,O.body=v.uploadData(),O.errorHandler=eH(e),O}class kse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$d.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$d.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$d.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw Fp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Cse extends kse{initXhr(){this.xhr_.responseType="text"}}function L7(){return new Cse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,r){this._service=e,r instanceof As?this._location=r:this._location=As.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new e0(e,r)}get root(){const e=new As(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xq(this._location.path)}get storage(){return this._service}get parent(){const e=pse(this._location.path);if(e===null)return null;const r=new As(this._location.bucket,e);return new e0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Gie(e)}}function Ose(t,e,r){t._throwIfRoot("uploadBytes");const n=jse(t.storage,t._location,Yq(),new su(e,!0),r);return t.storage.makeRequestWithTokens(n,L7).then(a=>({metadata:a,ref:t}))}function Ise(t){t._throwIfRoot("getDownloadURL");const e=Tse(t.storage,t._location,Yq());return t.storage.makeRequestWithTokens(e,L7).then(r=>{if(r===null)throw qie();return r})}function Rse(t){t._throwIfRoot("deleteObject");const e=Nse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,L7)}function Mse(t,e){const r=mse(t._location.path,e),n=new As(t._location.bucket,r);return new e0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pse(t){return/^[A-Za-z]+:\/\//.test(t)}function Dse(t,e){return new e0(t,e)}function rH(t,e){if(t instanceof B7){const r=t;if(r._bucket==null)throw Vie();const n=new e0(r,r._bucket);return e!=null?rH(n,e):n}else return e!==void 0?Mse(t,e):t}function Lse(t,e){if(e&&Pse(e)){if(t instanceof B7)return Dse(t,e);throw _N("To use ref(service, url), the first argument must be a Storage instance.")}else return rH(t,e)}function QI(t,e){const r=e==null?void 0:e[Fq];return r==null?null:As.makeFromBucketSpec(r,t)}function Bse(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:zZ(a,t.app.options.projectId))}class B7{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=Vq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Oie,this._maxUploadRetryTime=Iie,this._requests=new Set,a!=null?this._bucket=As.makeFromBucketSpec(a,this._host):this._bucket=QI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=As.makeFromBucketSpec(this._url,e):this._bucket=QI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new e0(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new Wie(qq());{const o=ase(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const XI="@firebase/storage",YI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH="storage";function TN(t,e,r){return t=Nn(t),Ose(t,e,r)}function jx(t){return t=Nn(t),Ise(t)}function $se(t){return t=Nn(t),Rse(t)}function xm(t,e){return t=Nn(t),Lse(t,e)}function Use(t=w8(),e){t=Nn(t);const n=Qg(t,nH).getImmediate({identifier:e}),a=Jz("storage");return a&&zse(n,...a),n}function zse(t,e,r,n={}){Bse(t,e,r,n)}function Vse(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new B7(r,n,a,e,h0)}function Fse(){Au(new ec(nH,Vse,"PUBLIC").setMultipleInstances(!0)),Ys(XI,YI,""),Ys(XI,YI,"esm2017")}Fse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qse="type.googleapis.com/google.protobuf.Int64Value",Hse="type.googleapis.com/google.protobuf.UInt64Value";function aH(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function NN(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>NN(e));if(typeof t=="function"||typeof t=="object")return aH(t,e=>NN(e));throw new Error("Data cannot be encoded in JSON: "+t)}function kx(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case qse:case Hse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>kx(e)):typeof t=="function"||typeof t=="object"?aH(t,e=>kx(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Th extends Eo{constructor(e,r,n){super(`${$7}/${e}`,r||""),this.details=n}}function Gse(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Wse(t,e){let r=Gse(t),n=r,a;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!ZI[o])return new Th("internal","internal");r=ZI[o],n=o}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=kx(a))}}catch{}return r==="ok"?null:new Th(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="us-central1";function Qse(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Th("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Xse{constructor(e,r,n,a,i=AN,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Kse(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=AN}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Yse(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Zse(t,e,r){return(n=>eoe(t,e,n,{}))}async function Jse(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function eoe(t,e,r,n){const a=t._url(e);return toe(t,a,r,n)}async function toe(t,e,r,n){r=NN(r);const a={data:r},i={},o=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);o.authToken&&(i.Authorization="Bearer "+o.authToken),o.messagingToken&&(i["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=o.appCheckToken);const c=n.timeout||7e4,d=Qse(c),h=await Promise.race([Jse(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Th("cancelled","Firebase Functions instance was deleted.");const p=Wse(h.status,h.json);if(p)throw p;if(!h.json)throw new Th("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Th("internal","Response is missing data field.");return{data:kx(m)}}const JI="@firebase/functions",eR="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const roe="auth-internal",noe="app-check-internal",aoe="messaging-internal";function ioe(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),o=n.getProvider(roe),c=n.getProvider(aoe),d=n.getProvider(noe);return new Xse(i,o,c,d,a,t)};Au(new ec($7,r,"PUBLIC").setMultipleInstances(!0)),Ys(JI,eR,e),Ys(JI,eR,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function soe(t=w8(),e=AN){const n=Qg(Nn(t),$7).getImmediate({identifier:e}),a=Jz("functions");return a&&ooe(n,...a),n}function ooe(t,e,r){Yse(Nn(t),e,r)}function Yr(t,e,r){return Zse(Nn(t),e)}ioe(fetch.bind(self));const iH={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},loe=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of loe)if(!iH[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const E2=sV(iH),EN=eN(E2),coe=new Ll,Ce=hie(E2,{localCache:Tie({tabManager:jie()})}),bm=Use(E2),Zr=soe(E2),uoe=Yr(Zr,"awardXP"),doe=Yr(Zr,"acceptQuest"),hoe=Yr(Zr,"deployMission"),foe=Yr(Zr,"resolveQuest"),poe=Yr(Zr,"equipItem"),moe=Yr(Zr,"unequipItem"),goe=Yr(Zr,"disenchantItem"),yoe=Yr(Zr,"craftItem"),voe=Yr(Zr,"adminUpdateInventory"),xoe=Yr(Zr,"adminUpdateEquipped"),boe=Yr(Zr,"submitEngagement"),woe=Yr(Zr,"sendClassMessage");Yr(Zr,"uploadQuestionBank");const sH=Yr(Zr,"awardQuestionXP"),Soe=Yr(Zr,"penalizeWrongAnswer"),_oe=Yr(Zr,"updateStreak"),Toe=Yr(Zr,"claimDailyLogin"),Noe=Yr(Zr,"spinFortuneWheel"),Aoe=Yr(Zr,"unlockSkill"),Eoe=Yr(Zr,"addSocket"),joe=Yr(Zr,"socketGem"),koe=Yr(Zr,"unsocketGem"),Coe=Yr(Zr,"dealBossDamage"),Ooe=Yr(Zr,"answerBossQuiz"),Ioe=Yr(Zr,"createParty"),Roe=Yr(Zr,"joinParty"),Moe=Yr(Zr,"completeTutoring"),Poe=Yr(Zr,"claimKnowledgeLoot"),Doe=Yr(Zr,"purchaseCosmetic"),Loe=Yr(Zr,"claimDailyChallenge"),Boe=Yr(Zr,"dismissAlert"),Cx=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),Ml={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oH=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>A.createElement("svg",{ref:d,...Uoe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:oH("lucide",a),...c},[...o.map(([h,p])=>A.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const r=A.forwardRef(({className:n,...a},i)=>A.createElement(zoe,{ref:i,iconNode:e,className:oH(`lucide-${$oe(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=ze("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=ze("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=ze("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=ze("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ze("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=ze("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=ze("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ze("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=ze("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=ze("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=ze("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=ze("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=ze("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=ze("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=ze("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ze("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ze("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=ze("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=ze("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=ze("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=ze("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=ze("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=ze("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=ze("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ze("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ze("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=ze("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=ze("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=ze("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=ze("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=ze("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ze("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ze("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=ze("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=ze("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ze("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=ze("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=ze("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=ze("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=ze("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=ze("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=ze("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=ze("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sle=ze("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=ze("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=ze("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=ze("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=ze("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=ze("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=ze("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=ze("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=ze("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=ze("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tle=ze("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nle=ze("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=ze("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=ze("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ale=ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ele=ze("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=ze("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=ze("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jle=ze("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=ze("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ze("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kle=ze("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=ze("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cle=ze("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ole=ze("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ile=ze("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rle=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=ze("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mle=ze("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ple=ze("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dle=ze("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Lle="kellporter2@paps.net",NH="Mr. Porter",dR=[{name:"Dashboard",icon:s.jsx(ule,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:s.jsx(O2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:s.jsx(is,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:s.jsx(is,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:s.jsx(Jo,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:s.jsx(No,{className:"w-4 h-4"})},{name:"XP Protocols",icon:s.jsx(ka,{className:"w-4 h-4"})},{name:"Missions",icon:s.jsx(lH,{className:"w-4 h-4"})},{name:"Mission Control",icon:s.jsx(Ox,{className:"w-4 h-4"})},{name:"Boss Ops",icon:s.jsx(Wo,{className:"w-4 h-4"})},{name:"Tutoring",icon:s.jsx(Ou,{className:"w-4 h-4"})}]},{name:"Resources",icon:s.jsx(z7,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:s.jsx(Ox,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:s.jsx(Jo,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:s.jsx(el,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:s.jsx(ile,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:s.jsx(Yoe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:s.jsx(el,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:s.jsx(Ou,{className:"w-5 h-5"}),role:"STUDENT"}],hR=new Set,Fs=(t,e,r)=>hR.has(t)?()=>{}:Vr(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&hR.add(t)}),Re={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Fs("xp_events",Bt(Ce,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Qn(ot(Ce,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Ka(ot(Ce,"xp_events",t))},subscribeToQuests:t=>Fs("quests",Bt(Ce,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Qn(ot(Ce,"quests",t.id),t)},deleteQuest:async t=>{await Ka(ot(Ce,"quests",t))},acceptQuest:async(t,e)=>{await doe({questId:e})},deployMission:async(t,e)=>{await hoe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await foe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Re.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await poe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await moe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await goe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await yoe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await voe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await xoe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ot(Ce,"users",t);r?await sr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await sr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await woe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=ot(Ce,"class_messages",t);await Q5(Ce,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ot(Ce,"class_messages",t);await Q5(Ce,async n=>{const a=await n.get(r);if(!a.exists())return;const o=[...a.data().pinnedBy||[]];o.includes(e)?n.update(r,{pinnedBy:o.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...o,e]})})},toggleGlobalPin:async(t,e)=>{const r=ot(Ce,"class_messages",t);await sr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Ka(ot(Ce,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=Pr(Bt(Ce,"class_messages"),un("isFlagged","==",!0),fo(50));return Vr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ot(Ce,"class_messages",t);await sr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Re.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await sr(ot(Ce,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await Cl(Bt(Ce,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await sr(ot(Ce,"student_groups",t),r)},deleteStudentGroup:async t=>{await Ka(ot(Ce,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=Pr(Bt(Ce,"student_groups"),un("classType","==",t));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>Vr(Bt(Ce,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=Pr(Bt(Ce,"student_groups"),un("memberIds","array-contains",t));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=Pr(Bt(Ce,"class_messages"),un("channelId","==",t),fo(100));return Vr(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(i.timestamp).getTime()-new Date(o.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=Pr(Bt(Ce,"class_messages"),Lo("timestamp","desc"),fo(20));return Fs("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=Pr(Bt(Ce,"conversations"),Lo("lastMessageAt","desc"));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=Pr(Bt(Ce,`conversations/${t}/messages`),Lo("timestamp","asc"));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===La.ADMIN?NH:e.name,content:r,timestamp:new Date().toISOString()};await Cl(Bt(Ce,`conversations/${t}/messages`),n),await sr(ot(Ce,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await sr(ot(Ce,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=Pr(Bt(Ce,"chat_flags"),un("isResolved","==",!1));return Vr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await sr(ot(Ce,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=Pr(Bt(Ce,"chat_flags"),un("messageId","==",t),un("isResolved","==",!1)),n=(await fd(e)).docs.map(a=>sr(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=Pr(Bt(Ce,"evidence"),un("studentId","==",t),un("weekId","==",e));return Vr(n,a=>{const i=a.docs.map(o=>({id:o.id,...o.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await Qn(ot(Ce,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=xm(bm,n.imageUrl);return $se(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Ka(ot(Ce,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Qn(ot(Ce,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ot(Ce,"users",t);await sr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await sr(ot(Ce,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await sr(ot(Ce,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Bt(Ce,"users");return Vr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Bt(Ce,"assignments");return Vr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=Pr(Bt(Ce,"submissions"),Lo("submittedAt","desc"),fo(200));return Vr(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Cx(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=Pr(Bt(Ce,"submissions"),un("userId","==",t),fo(50));return Vr(r,n=>{const a=n.docs.map(i=>{const o=i.data();return{id:i.id,userId:o.userId,userName:o.userName,assignmentId:o.assignmentId,assignmentTitle:o.assignmentTitle,metrics:o.metrics||Cx(),submittedAt:o.submittedAt,status:o.status,score:o.score,hasUnreadAdmin:o.hasUnreadAdmin||!1,hasUnreadStudent:o.hasUnreadStudent||!1,isPinned:o.isPinned||!1,isArchived:o.isArchived||!1,privateComments:(o.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,o)=>new Date(o.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Bt(Ce,"allowed_emails");return Vr(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Bt(Ce,"class_configs");return Vr(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null};t.id?await Qn(ot(Ce,"assignments",t.id),e,{merge:!0}):await Cl(Bt(Ce,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await sr(ot(Ce,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Ka(ot(Ce,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ot(Ce,"allowed_emails",t),n=await ua(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await Qn(r,{classType:e,classTypes:i});const o=Pr(Bt(Ce,"users"),un("email","==",t)),c=await fd(o);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await sr(ot(Ce,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await sr(ot(Ce,"allowed_emails",t),{section:e});const r=Pr(Bt(Ce,"users"),un("email","==",t)),n=await fd(r);await Promise.all(n.docs.map(async a=>{await sr(ot(Ce,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await sr(ot(Ce,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await sr(ot(Ce,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Ka(ot(Ce,"allowed_emails",t));const e=Pr(Bt(Ce,"users"),un("email","==",t)),r=await fd(e);await Promise.all(r.docs.map(async n=>{await sr(ot(Ce,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ot(Ce,"users",t),n=await ua(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),o=Array.from(new Set([...i,e]));await sr(r,{isWhitelisted:!0,classType:e,enrolledClasses:o});const c=a.email;if(c){const d=await ua(ot(Ce,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await Qn(ot(Ce,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await ua(ot(Ce,"users",t));if(e.exists()){const r=e.data().email;await Ka(ot(Ce,"allowed_emails",r))}await Ka(ot(Ce,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Qn(ot(Ce,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,o=ot(Ce,"submissions",i);(await ua(o)).exists()?await sr(o,{"metrics.engagementTime":Vp(a),"metrics.lastActive":Date.now()}):await Qn(o,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ot(Ce,"users",t),n=await ua(r);if(!n.exists())return;const i=n.data().email,o={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(o.isWhitelisted=!1,i&&await Ka(ot(Ce,"allowed_emails",i))):(o.isWhitelisted=!0,i&&await Qn(ot(Ce,"allowed_emails",i),{classType:e[0],classTypes:e})),await sr(r,o)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ot(Ce,"users",t),n=await ua(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await sr(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const o=n.data().email;o&&await Qn(ot(Ce,"allowed_emails",o),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await sr(ot(Ce,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await uoe({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await boe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=Pr(Bt(Ce,"users"),un("role","==","STUDENT"));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Qn(ot(Ce,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Ka(ot(Ce,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=xm(bm,`resources/${e}_${t.name}`);return await TN(r,t),await jx(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=xm(bm,`resources/html/${e}_${t.name}`);return await TN(r,t),await jx(r)},subscribeToAnnouncements:t=>{const e=Pr(Bt(Ce,"announcements"),Lo("createdAt","desc"),fo(20));return Fs("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await Cl(Bt(Ce,"announcements"),t)},deleteAnnouncement:async t=>{await Ka(ot(Ce,"announcements",t))},dismissAnnouncement:async(t,e)=>{await sr(ot(Ce,"users",t),{"gamification.dismissedAnnouncements":GI(e)})},subscribeToNotifications:(t,e)=>{const r=Pr(Bt(Ce,"notifications"),un("userId","==",t),Lo("timestamp","desc"),fo(50));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await sr(ot(Ce,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=Pr(Bt(Ce,"notifications"),un("userId","==",t),un("isRead","==",!1)),n=(await fd(e)).docs.map(a=>sr(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Cl(Bt(Ce,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(o=>Cl(Bt(Ce,"notifications"),{userId:o,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await sr(ot(Ce,"users",t),n)},toggleCodenameLock:async(t,e)=>{await sr(ot(Ce,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await _oe({})).data,claimDailyLogin:async()=>(await Toe({})).data,spinFortuneWheel:async t=>(await Noe({classType:t})).data,unlockSkill:async(t,e)=>(await Aoe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Eoe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await joe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await koe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=Pr(Bt(Ce,"boss_encounters"),un("isActive","==",!0));return Fs("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Bt(Ce,"boss_encounters");return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ot(Ce,"boss_encounters",t.id);await Qn(e,t)},toggleBossActive:async(t,e)=>{const r=ot(Ce,"boss_encounters",t);await sr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ot(Ce,"boss_encounters",t);await Ka(e)},subscribeToBossShards:(t,e)=>{const r=Bt(Ce,`boss_encounters/${t}/shards`);return Vr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Bt(Ce,`boss_encounters/${t}/damage_log`);return Vr(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await Coe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=Pr(Bt(Ce,"boss_quizzes"),un("isActive","==",!0));return Fs("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Bt(Ce,`boss_quizzes/${t}/shards`);return Vr(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await Ooe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Bt(Ce,"boss_quizzes");return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=ot(Ce,"boss_quizzes",t.id);await Qn(e,t)},toggleBossQuizActive:async(t,e)=>{const r=ot(Ce,"boss_quizzes",t);await sr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=ot(Ce,"boss_quizzes",t);await Ka(e)},subscribeToBossQuestionBanks:t=>Vr(Bt(Ce,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=ot(Ce,"boss_question_banks",t.id);await Qn(e,t)},deleteBossQuestionBank:async t=>{await Ka(ot(Ce,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=Pr(Bt(Ce,"boss_quiz_progress"),un("quizId","==",t));return(await fd(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=ot(Ce,"boss_quiz_progress",`${t}_${e}`);return Vr(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await Ioe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await Roe({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Vr(ot(Ce,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Cl(Bt(Ce,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await sr(ot(Ce,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await sr(ot(Ce,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await sr(ot(Ce,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=ot(Ce,"tutoring_sessions",t),a=await ua(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),o=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[o]:r};i[c]&&(d.status="COMPLETED"),await sr(n,d)},subscribeToAllTutoringSessions:t=>{const e=Pr(Bt(Ce,"tutoring_sessions"),Lo("createdAt","desc"),fo(100));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Ka(ot(Ce,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=Pr(Bt(Ce,"tutoring_sessions"),un("classType","==",t),fo(50));return Fs("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,o)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await Moe({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=Pr(Bt(Ce,"knowledge_gates"),un("isActive","==",!0));return Fs("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await Poe({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=Pr(Bt(Ce,"seasonal_cosmetics"),un("isAvailable","==",!0));return Fs("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await Doe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await sr(ot(Ce,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=Pr(Bt(Ce,"daily_challenges"),un("date","==",e));return Fs("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await Loe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=ot(Ce,"users",t);await Q5(Ce,async i=>{var h;const o=await i.get(a);if(!o.exists())return;const c=((h=o.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await ua(ot(Ce,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=Pr(Bt(Ce,"student_alerts"),un("isDismissed","==",!1));return Fs("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const o={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(o[i.riskLevel]||0)-(o[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await Boe({alertId:t})},subscribeToStudentBuckets:t=>Fs("student_buckets",Bt(Ce,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=Pr(Bt(Ce,"practice_progress"),un("userId","==",t));return Vr(r,n=>{const a={};n.forEach(i=>{const o=i.data();o.assignmentId&&o.completed&&(a[o.assignmentId]={completed:o.completed||!1,totalCompletions:o.totalCompletions||0,bestScore:o.bestScore??null,completedAt:o.completedAt??null})}),e(a)},()=>{})},submitBugReport:async t=>{await Cl(Bt(Ce,"bug_reports"),{...t,resolved:!1})},subscribeToBugReports:t=>{const e=Pr(Bt(Ce,"bug_reports"),Lo("timestamp","desc"),fo(100));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},resolveBugReport:async t=>{await sr(ot(Ce,"bug_reports",t),{resolved:!0})},createEnrollmentCode:async(t,e,r)=>{const n=[Math.random().toString(36).substring(2,6),Math.random().toString(36).substring(2,6)].join("-").toUpperCase(),a=ot(Bt(Ce,"enrollment_codes"));return await Qn(a,{code:n,classType:t,section:e||null,createdAt:new Date().toISOString(),createdBy:"admin",usedCount:0,maxUses:r||null,isActive:!0}),n},subscribeToEnrollmentCodes:t=>{const e=Pr(Bt(Ce,"enrollment_codes"),Lo("createdAt","desc"));return Vr(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},()=>{})},deactivateEnrollmentCode:async t=>{await sr(ot(Ce,"enrollment_codes",t),{isActive:!1})},redeemEnrollmentCode:async(t,e)=>{const r=Pr(Bt(Ce,"enrollment_codes"),un("code","==",t.toUpperCase()),un("isActive","==",!0)),n=await fd(r);if(n.empty)return{success:!1,error:"Invalid or expired code."};const a=n.docs[0],i=a.data();if(i.maxUses&&i.usedCount>=i.maxUses)return{success:!1,error:"This code has reached its usage limit."};const o=ot(Ce,"users",e),c=await ua(o);return c.exists()?(c.data().enrolledClasses||[]).includes(i.classType)?{success:!1,error:"Already enrolled in this class."}:(await sr(o,{enrolledClasses:GI(i.classType),isWhitelisted:!0}),i.section&&await sr(o,{[`classSections.${i.classType}`]:i.section}),await sr(a.ref,{usedCount:Vp(1)}),{success:!0,classType:i.classType}):{success:!1,error:"User not found."}},awardBehavior:async t=>{await Cl(Bt(Ce,"behavior_awards"),t);const e=ot(Ce,"users",t.studentId);await sr(e,{"gamification.xp":Vp(t.xpAmount),[`gamification.classXp.${t.classType}`]:Vp(t.xpAmount),"gamification.currency":Vp(t.fluxAmount)})},subscribeToBehaviorAwards:(t,e)=>{const r=Pr(Bt(Ce,"behavior_awards"),un("classType","==",t),Lo("timestamp","desc"),fo(50));return Vr(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},()=>{})},updateDailyStreak:async t=>{const e=ot(Ce,"users",t),r=await ua(e);if(!r.exists())return{currentStreak:0,freezeUsed:!1};const a=r.data().streakData||{currentStreak:0,longestStreak:0,lastActiveDate:"",freezeTokens:0,maxFreezeTokens:3,streakHistory:[],milestones:[]},i=new Date().toISOString().split("T")[0];if(a.lastActiveDate===i)return{currentStreak:a.currentStreak,freezeUsed:!1};const o=new Date(Date.now()-864e5).toISOString().split("T")[0];let c=a.currentStreak,d=!1;a.lastActiveDate===o?c+=1:a.lastActiveDate&&Math.floor((new Date(i).getTime()-new Date(a.lastActiveDate).getTime())/864e5)===2&&a.freezeTokens>0?(c+=1,d=!0):c=1;const h=Math.max(a.longestStreak,c),p=[3,7,14,21,30,50,100],m=a.milestones||[],y=p.find(w=>c>=w&&!m.includes(w)),v=y?[...m,y]:m;let _=d?a.freezeTokens-1:a.freezeTokens;c>0&&c%7===0&&(_=Math.min(_+1,a.maxFreezeTokens));const S=[...a.streakHistory||[],i].slice(-30);return await sr(e,{streakData:{currentStreak:c,longestStreak:h,lastActiveDate:i,freezeTokens:_,maxFreezeTokens:3,streakHistory:S,milestones:v}}),{currentStreak:c,freezeUsed:d,newMilestone:y}}},AH=A.createContext(null),mi=()=>{const t=A.useContext(AH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Ble={success:s.jsx(an,{className:"w-5 h-5 text-green-400 shrink-0"}),error:s.jsx(Os,{className:"w-5 h-5 text-red-400 shrink-0"}),info:s.jsx(pH,{className:"w-5 h-5 text-blue-400 shrink-0"})},$le={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},Ule=({children:t})=>{const[e,r]=A.useState([]),n=A.useCallback((o,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:o,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=A.useCallback(o=>{r(c=>c.filter(d=>d.id!==o))},[]),i={success:o=>n(o,"success"),error:o=>n(o,"error"),info:o=>n(o,"info")};return s.jsxs(AH.Provider,{value:i,children:[t,s.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(o=>s.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${$le[o.type]}`,children:[Ble[o.type],s.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:o.message}),s.jsx("button",{onClick:()=>a(o.id),className:"text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Na,{className:"w-4 h-4"})})]},o.id))})]})},zle=()=>{const[t,e]=A.useState(navigator.onLine),[r,n]=A.useState(!1);return A.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:s.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?s.jsxs(s.Fragment,{children:[s.jsx(Dle,{className:"w-4 h-4"}),"Connection restored"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ple,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var du=Kz();const Ti=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(A.useEffect(()=>{const i=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?du.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[s.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:s.jsx(Na,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),Vle="/favicon.svg";function If(){return typeof window<"u"&&"Notification"in window}function ex(){return If()?Notification.permission:"unsupported"}async function EH(){return If()?await Notification.requestPermission():"unsupported"}function Fle(t,e,r){if(!(!If()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:Vle,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function qle(t,e){const r=A.useRef(new Set),n=A.useRef(!0),a=A.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const o=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of o.slice(0,3))Fle(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);A.useEffect(()=>{if(!t||!e||!If())return;n.current=!0,r.current=new Set;const i=Re.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const Hle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var _;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[o,c]=se.useState(((_=r.gamification)==null?void 0:_.codename)||""),[d,h]=se.useState(!1),p=mi(),m=S=>{i(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;h(!0);try{await n(a),o!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Re.updateCodename(r.id,o.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},v=({icon:S,title:w,description:j,value:O,onToggle:R})=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${O?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(S,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:w}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:j})]})]}),s.jsx("button",{onClick:R,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${O?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${O?"translate-x-5":"translate-x-0"}`})})]});return s.jsx(Ti,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(v,{icon:vle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),s.jsx(v,{icon:Qoe,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(v,{icon:No,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&s.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),s.jsx("input",{type:"text",value:o,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[o.length,"/24 characters"]})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(v,{icon:wle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),s.jsx(v,{icon:TH,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),s.jsx("div",{className:"space-y-2",children:If()?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:s.jsx(cH,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:ex()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),s.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(S=>({...S,pushNotifications:!1}));else{const S=await EH();S==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):S==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:ex()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${ex()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:s.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):s.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),s.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?s.jsx(rs,{className:"w-5 h-5 animate-spin"}):s.jsx(SH,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let r3=null,jH=!0;function Gle(t){jH=t}function Wle(){if(!r3){const t=window.AudioContext||window.webkitAudioContext;r3=new t}return r3}function er(t,e,r="sine",n=.15){if(jH)try{const a=Wle(),i=a.createOscillator(),o=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),o.gain.setValueAtTime(n,a.currentTime),o.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(o),o.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Un={xpGain:()=>{er(600,.1,"sine",.1),setTimeout(()=>er(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{er(1200,.15,"sine",.08),setTimeout(()=>er(1500,.12,"sine",.06),100),setTimeout(()=>er(1800,.2,"triangle",.05),180)},questAccept:()=>{er(440,.15,"square",.06),setTimeout(()=>er(660,.2,"square",.06),120)},questDeploy:()=>{er(880,.12,"sawtooth",.05),setTimeout(()=>er(660,.12,"sawtooth",.05),100),setTimeout(()=>er(550,.2,"sawtooth",.04),200)},equip:()=>{er(200,.05,"square",.1),setTimeout(()=>er(400,.08,"sine",.08),50)},salvage:()=>{er(300,.15,"sawtooth",.06),setTimeout(()=>er(200,.2,"sawtooth",.04),100),setTimeout(()=>er(100,.3,"sawtooth",.03),200)},craft:()=>{er(150,.08,"square",.1),setTimeout(()=>er(800,.2,"triangle",.08),60)},error:()=>{er(200,.15,"square",.08),setTimeout(()=>er(150,.2,"square",.06),120)},messageSend:()=>{er(500,.06,"sine",.05)},notification:()=>{er(800,.1,"sine",.06),setTimeout(()=>er(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>er(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{er(523,.12,"sine",.08),setTimeout(()=>er(659,.12,"sine",.07),100),setTimeout(()=>er(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>er(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{er(523,.15,"triangle",.1),setTimeout(()=>er(784,.15,"triangle",.1),120),setTimeout(()=>er(1047,.3,"sine",.12),240)},skillUnlock:()=>{er(300,.1,"sawtooth",.06),setTimeout(()=>er(600,.1,"sawtooth",.06),80),setTimeout(()=>er(900,.15,"sine",.08),160)},bossHit:()=>{er(100,.1,"square",.12),setTimeout(()=>er(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{er(1200,.08,"sine",.08),setTimeout(()=>er(1600,.1,"sine",.06),60),setTimeout(()=>er(2e3,.15,"triangle",.04),120)},partyJoin:()=>{er(440,.1,"sine",.06),setTimeout(()=>er(554,.1,"sine",.06),80),setTimeout(()=>er(659,.15,"sine",.05),160)},chestOpen:()=>{er(200,.15,"square",.06),setTimeout(()=>er(300,.1,"square",.05),100),setTimeout(()=>er(500,.1,"triangle",.06),200),setTimeout(()=>er(800,.2,"sine",.08),350)}},Kle={QUEST_APPROVED:s.jsx(Ud,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:s.jsx(Ud,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:s.jsx(jN,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:s.jsx(Ud,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:s.jsx(bH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:s.jsx(Hoe,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:s.jsx(Mx,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:s.jsx(ka,{className:"w-4 h-4 text-cyan-400"})},fR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=A.useState([]),[o,c]=A.useState(!1),[d,h]=A.useState(!1),[p,m]=A.useState({}),y=A.useRef(null),v=A.useRef(null),_=A.useRef(0),S=A.useCallback(()=>{if(!y.current)return;const C=y.current.getBoundingClientRect(),P=320;if(n){const E=Math.max(8,C.left),N=E+P>window.innerWidth-8?void 0:E,k=N==null?8:void 0;m({bottom:window.innerHeight-C.top+8,left:N,right:k})}else m({top:C.bottom+8,right:Math.max(8,window.innerWidth-C.right)})},[n]);A.useEffect(()=>{o&&If()&&ex()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[o,e==null?void 0:e.pushNotifications]),A.useEffect(()=>{const C=Re.subscribeToNotifications(t,P=>{const E=P.filter(N=>!N.isRead).length;E>_.current&&_.current>=0&&Un.notification(),_.current=E,i(P)});return()=>C()},[t]),A.useEffect(()=>{const C=P=>{var N,k;const E=P.target;(N=y.current)!=null&&N.contains(E)||(k=v.current)!=null&&k.contains(E)||c(!1)};return o&&document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[o]),A.useEffect(()=>{if(o)return S(),window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[o,S]);const w=a.filter(C=>!C.isRead).length,j=async()=>{await Re.markAllNotificationsRead(t)},O=async C=>{C.isRead||await Re.markNotificationRead(C.id)},R=C=>{const P=Date.now()-new Date(C).getTime();return P<6e4?"just now":P<36e5?`${Math.floor(P/6e4)}m ago`:P<864e5?`${Math.floor(P/36e5)}h ago`:`${Math.floor(P/864e5)}d ago`},L=()=>{o||S(),c(!o)};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:y,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[s.jsx(Z5,{className:"w-5 h-5"}),w>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),o&&du.createPortal(s.jsxs("div",{ref:v,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[s.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&s.jsxs("button",{onClick:j,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[s.jsx(Woe,{className:"w-3 h-3"})," Mark all read"]})]}),d&&s.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(cH,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("button",{onClick:async()=>{await EH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),s.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),s.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Z5,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(C=>s.jsxs("div",{onClick:()=>O(C),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${C.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:Kle[C.type]||s.jsx(Z5,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-bold text-white truncate",children:C.title}),s.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:C.message}),s.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:R(C.timestamp)})]}),!C.isRead&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},C.id))})]}),document.body)]})},Qle=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var w,j;const[i,o]=A.useState(""),[c,d]=A.useState(!1),[h,p]=A.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};A.useEffect(()=>{if(!m.liveBackground){o("");return}(async()=>{try{const R=xm(bm,"public/background.mp4"),L=await jx(R);o(L)}catch{console.warn("Firebase background not found, using local fallback."),o("/background.mp4")}})()},[m.liveBackground]);const y=async O=>{await Re.updateUserSettings(t.id,O)},[v,_]=A.useState(null);A.useEffect(()=>{const O=dR.find(R=>{var L;return(L=R.children)==null?void 0:L.some(C=>r===`${R.name}:${C.name}`)});O&&_(O.name)},[r]);const S=()=>{const O=dR.filter(L=>!(L.role==="ADMIN"&&t.role!==La.ADMIN||L.role==="STUDENT"&&t.role!==La.STUDENT)),R=L=>{var C;return(C=L.children)==null?void 0:C.some(P=>r===`${L.name}:${P.name}`)};return s.jsx(s.Fragment,{children:O.map(L=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>{L.children?v===L.name?_(null):(_(L.name),R(L)||(n(`${L.name}:${L.children[0].name}`),p(!1))):(n(L.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===L.name||R(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[s.jsx("span",{className:`${r===L.name||R(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),s.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&s.jsx(Ni,{className:`w-3.5 h-3.5 transition-transform ${v===L.name?"rotate-180":""} ${R(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&v===L.name&&s.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(C=>{const P=`${L.name}:${C.name}`;return s.jsxs("button",{onClick:()=>{n(P),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===P?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[s.jsx("span",{className:r===P?"text-white":"text-gray-600",children:C.icon}),C.name]},C.name)})})]},L.name))})};return s.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[s.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:s.jsx("source",{src:i,type:"video/mp4"})},i)}),s.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),s.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:s.jsx(Ou,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(fR,{userId:t.id,settings:m,onUpdateSettings:y}),s.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:s.jsx(ple,{className:"w-6 h-6"})})]})]}),h&&s.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),s.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((w=t.gamification)==null?void 0:w.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Na,{className:"w-6 h-6"})})]}),s.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:s.jsx(S,{})}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[s.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[s.jsx(eg,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Settings"})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[s.jsx(sR,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),s.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:s.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[s.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[s.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:s.jsx(Ou,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),s.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===La.ADMIN?"Admin System":"Operative Terminal"})]})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:s.jsx(S,{})}),s.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((j=t.gamification)==null?void 0:j.codename)||"Agent":t.name}),s.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(fR,{userId:t.id,settings:m,onUpdateSettings:y,dropUp:!0}),s.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:s.jsx(eg,{className:"w-4 h-4"})})]})]}),s.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[s.jsx(sR,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),s.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:s.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),s.jsx(Hle,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})},pR=[{code:"en",label:"English",nativeLabel:"English"},{code:"es",label:"Spanish",nativeLabel:"Espanol"},{code:"fr",label:"French",nativeLabel:"Francais"},{code:"de",label:"German",nativeLabel:"Deutsch"},{code:"pt",label:"Portuguese",nativeLabel:"Portugues"},{code:"zh-CN",label:"Chinese (Simplified)",nativeLabel:""},{code:"zh-TW",label:"Chinese (Traditional)",nativeLabel:""},{code:"ja",label:"Japanese",nativeLabel:""},{code:"ko",label:"Korean",nativeLabel:""},{code:"hi",label:"Hindi",nativeLabel:""},{code:"ar",label:"Arabic",nativeLabel:"",rtl:!0},{code:"ru",label:"Russian",nativeLabel:""}],mR={en:{"nav.dashboard":"Dashboard","nav.resources":"Resources","nav.missions":"Missions","nav.badges":"Badges","nav.skills":"Skills","nav.fortune":"Fortune","nav.leaderboard":"Leaderboard","nav.tutoring":"Tutoring","nav.loadout":"Agent Loadout","common.search":"Search","common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.submit":"Submit","common.close":"Close","common.loading":"Loading...","common.noResults":"No results found.","streak.current":"Current Streak","streak.best":"Best","streak.days":"Days","streak.freezes":"Streak Freezes","proctor.active":"Active Session","proctor.away":"Away (Paused)","proctor.fullscreen":"Full Screen","proctor.exitFullscreen":"Exit Full Screen","proctor.replay":"Replay","proctor.tts.play":"Read Aloud","proctor.tts.stop":"Stop Reading","proctor.annotate":"Annotate","proctor.annotate.clear":"Clear Annotations","xp.earned":"XP Earned","xp.level":"Level","xp.flux":"Cyber-Flux","chat.send":"Send Message","chat.muted":"You are muted."},es:{"nav.dashboard":"Tablero","nav.resources":"Recursos","nav.missions":"Misiones","nav.badges":"Insignias","nav.skills":"Habilidades","nav.fortune":"Fortuna","nav.leaderboard":"Clasificacion","nav.tutoring":"Tutoria","nav.loadout":"Equipamiento","common.search":"Buscar","common.save":"Guardar","common.cancel":"Cancelar","common.delete":"Eliminar","common.submit":"Enviar","common.close":"Cerrar","common.loading":"Cargando...","common.noResults":"No se encontraron resultados.","streak.current":"Racha actual","streak.best":"Mejor","streak.days":"Dias","streak.freezes":"Congelaciones","proctor.active":"Sesion activa","proctor.away":"Ausente (Pausado)","proctor.fullscreen":"Pantalla completa","proctor.exitFullscreen":"Salir de pantalla completa","proctor.replay":"Repetir","proctor.tts.play":"Leer en voz alta","proctor.tts.stop":"Dejar de leer","proctor.annotate":"Anotar","proctor.annotate.clear":"Borrar anotaciones","xp.earned":"XP ganado","xp.level":"Nivel","xp.flux":"Cyber-Flux","chat.send":"Enviar mensaje","chat.muted":"Estas silenciado."},fr:{"nav.dashboard":"Tableau de bord","nav.resources":"Ressources","nav.missions":"Missions","nav.badges":"Badges","nav.skills":"Competences","nav.fortune":"Fortune","nav.leaderboard":"Classement","nav.tutoring":"Tutorat","nav.loadout":"Equipement","common.search":"Rechercher","common.save":"Enregistrer","common.cancel":"Annuler","common.delete":"Supprimer","common.submit":"Soumettre","common.close":"Fermer","common.loading":"Chargement...","common.noResults":"Aucun resultat.","streak.current":"Serie actuelle","streak.best":"Meilleur","streak.days":"Jours","streak.freezes":"Gels de serie","proctor.active":"Session active","proctor.away":"Absent (Pause)","proctor.fullscreen":"Plein ecran","proctor.exitFullscreen":"Quitter le plein ecran","proctor.replay":"Rejouer","proctor.tts.play":"Lire a voix haute","proctor.tts.stop":"Arreter la lecture","proctor.annotate":"Annoter","proctor.annotate.clear":"Effacer les annotations","xp.earned":"XP gagne","xp.level":"Niveau","xp.flux":"Cyber-Flux","chat.send":"Envoyer","chat.muted":"Vous etes en sourdine."},de:{"nav.dashboard":"Ubersicht","nav.resources":"Ressourcen","nav.missions":"Missionen","common.search":"Suchen","common.save":"Speichern","common.cancel":"Abbrechen","common.delete":"Loschen","common.submit":"Absenden","common.close":"Schliessen","common.loading":"Laden...","proctor.tts.play":"Vorlesen","proctor.tts.stop":"Vorlesen beenden","proctor.annotate":"Anmerken"},pt:{"nav.dashboard":"Painel","nav.resources":"Recursos","nav.missions":"Missoes","common.search":"Pesquisar","common.save":"Salvar","common.cancel":"Cancelar","common.submit":"Enviar","common.close":"Fechar","proctor.tts.play":"Ler em voz alta","proctor.tts.stop":"Parar leitura","proctor.annotate":"Anotar"},"zh-CN":{"nav.dashboard":"","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":"","common.submit":"","common.close":"","common.loading":"...","proctor.tts.play":"","proctor.tts.stop":"","proctor.annotate":""},"zh-TW":{"nav.dashboard":"","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":"","common.submit":"","common.close":"","proctor.tts.play":"","proctor.tts.stop":"","proctor.annotate":""},ja:{"nav.dashboard":"","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":"","common.submit":"","common.close":"","proctor.tts.play":"","proctor.tts.stop":"","proctor.annotate":""},ko:{"nav.dashboard":"","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":"","common.submit":"","common.close":"","proctor.tts.play":"","proctor.tts.stop":"","proctor.annotate":""},hi:{"nav.dashboard":"","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":" ","common.submit":" ","common.close":" ","proctor.tts.play":" ","proctor.tts.stop":"","proctor.annotate":""},ar:{"nav.dashboard":" ","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":"","common.submit":"","common.close":"","proctor.tts.play":"  ","proctor.tts.stop":" ","proctor.annotate":""},ru:{"nav.dashboard":"","nav.resources":"","nav.missions":"","common.search":"","common.save":"","common.cancel":"","common.submit":"","common.close":"","proctor.tts.play":" ","proctor.tts.stop":"","proctor.annotate":""}},kH=A.createContext({language:"en",setLanguage:()=>{},t:t=>t,isRTL:!1}),CH=()=>A.useContext(kH),Xle=({children:t})=>{var o;const[e,r]=A.useState(()=>localStorage.getItem("porterPortalLanguage")||"en"),n=A.useCallback(c=>{var d;r(c),localStorage.setItem("porterPortalLanguage",c),document.documentElement.dir=(d=pR.find(h=>h.code===c))!=null&&d.rtl?"rtl":"ltr"},[]),a=A.useCallback(c=>{var d;return((d=mR[e])==null?void 0:d[c])||mR.en[c]||c},[e]),i=((o=pR.find(c=>c.code===e))==null?void 0:o.rtl)||!1;return s.jsx(kH.Provider,{value:{language:e,setLanguage:n,t:a,isRTL:i},children:t})},Yle=[.75,1,1.25,1.5,2],gR=({textContent:t,compact:e})=>{const{t:r}=CH(),[n,a]=A.useState(!1),[i,o]=A.useState(1),[c,d]=A.useState(0),[h,p]=A.useState(!1),m=A.useRef(null),y=A.useRef([]);A.useEffect(()=>{if(!t){y.current=[];return}const C=t.replace(/\n+/g,". ").split(new RegExp("(?<=[.!?])\\s+")).map(P=>P.trim()).filter(P=>P.length>2);y.current=C,d(0)},[t]);const v=A.useCallback(()=>{window.speechSynthesis.cancel(),a(!1)},[]),_=A.useCallback(C=>{const P=y.current;if(C<0||C>=P.length){a(!1);return}window.speechSynthesis.cancel();const E=new SpeechSynthesisUtterance(P[C]);E.rate=i,E.onend=()=>{const N=C+1;N<P.length?(d(N),_(N)):a(!1)},E.onerror=()=>{a(!1)},m.current=E,d(C),window.speechSynthesis.speak(E)},[i]),S=A.useCallback(()=>{n?v():(a(!0),_(c))},[n,c,_,v]),w=A.useCallback(()=>{const C=Math.max(0,c-1);d(C),n&&_(C)},[c,n,_]),j=A.useCallback(()=>{const C=Math.min(y.current.length-1,c+1);d(C),n&&_(C)},[c,n,_]),O=A.useCallback(C=>{if(o(C),p(!1),n){window.speechSynthesis.cancel();const P=new SpeechSynthesisUtterance(y.current[c]);P.rate=C,P.onend=()=>{const E=c+1;E<y.current.length?(d(E),_(E)):a(!1)},m.current=P,window.speechSynthesis.speak(P)}},[n,c,_]);if(A.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),!t||y.current.length===0)return null;if(e)return s.jsxs("button",{onClick:S,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${n?"text-amber-300 bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r(n?"proctor.tts.stop":"proctor.tts.play"),children:[n?s.jsx(Mle,{className:"w-3 h-3"}):s.jsx(TH,{className:"w-3 h-3"}),r(n?"proctor.tts.stop":"proctor.tts.play")]});const R=y.current.length,L=R>0?(c+1)/R*100:0;return s.jsxs("div",{className:"flex items-center gap-2 bg-black/40 rounded-xl px-3 py-2 border border-white/10",children:[s.jsx("button",{onClick:S,className:`p-1.5 rounded-lg transition ${n?"bg-amber-500/20 text-amber-400":"bg-purple-500/10 text-purple-400 hover:bg-purple-500/20"}`,children:n?s.jsx(Sle,{className:"w-4 h-4"}):s.jsx(V7,{className:"w-4 h-4"})}),s.jsx("button",{onClick:w,disabled:c===0,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Tle,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:j,disabled:c>=R-1,className:"p-1 text-gray-500 hover:text-white disabled:opacity-30 transition",children:s.jsx(Nle,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-300",style:{width:`${L}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-500 font-mono min-w-[3rem] text-center",children:[c+1,"/",R]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>p(!h),className:"flex items-center gap-1 text-[10px] text-gray-400 hover:text-white bg-white/5 px-2 py-1 rounded-lg border border-white/10 transition",children:[s.jsx(nle,{className:"w-3 h-3"}),i,"x"]}),h&&s.jsx("div",{className:"absolute bottom-full right-0 mb-1 bg-[#1a1b26] border border-white/10 rounded-lg shadow-lg overflow-hidden z-50",children:Yle.map(C=>s.jsxs("button",{onClick:()=>O(C),className:`block w-full text-left px-3 py-1.5 text-xs transition ${i===C?"bg-purple-600/30 text-purple-300":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[C,"x"]},C))})]})]})},Zle=["#ef4444","#f59e0b","#22c55e","#3b82f6","#a855f7","#ffffff"],Jle=[2,4,6,8],ece=({containerRef:t,onAnnotationsChange:e})=>{const{t:r}=CH(),n=A.useRef(null),[a,i]=A.useState(!1),[o,c]=A.useState("pen"),[d,h]=A.useState("#ef4444"),[p,m]=A.useState(4),[y,v]=A.useState(!1),[_,S]=A.useState(!1),w=A.useRef([]),j=A.useRef(!1),O=A.useRef([]),R=A.useCallback(()=>{const B=n.current,$=t.current;if(!B||!$)return;const K=$.getBoundingClientRect();B.width=K.width,B.height=K.height,B.style.width=`${K.width}px`,B.style.height=`${K.height}px`,L()},[t]);A.useEffect(()=>{if(!a)return;R();const B=new ResizeObserver(R);return t.current&&B.observe(t.current),()=>B.disconnect()},[a,R,t]);const L=A.useCallback(()=>{const B=n.current;if(!B)return;const $=B.getContext("2d");if($){$.clearRect(0,0,B.width,B.height);for(const K of w.current)if(!(K.points.length<2)){$.beginPath(),$.strokeStyle=K.tool==="eraser"?"rgba(0,0,0,0)":K.color,$.lineWidth=K.width,$.lineCap="round",$.lineJoin="round",K.tool==="eraser"?$.globalCompositeOperation="destination-out":$.globalCompositeOperation="source-over",$.moveTo(K.points[0].x,K.points[0].y);for(let W=1;W<K.points.length;W++)$.lineTo(K.points[W].x,K.points[W].y);$.stroke()}$.globalCompositeOperation="source-over"}},[]),C=A.useCallback(B=>{const $=n.current;if(!$)return null;const K=$.getBoundingClientRect();if("touches"in B){const W=B.touches[0];return{x:W.clientX-K.left,y:W.clientY-K.top}}return{x:B.clientX-K.left,y:B.clientY-K.top}},[]),P=A.useCallback(B=>{if(!a)return;B.preventDefault();const $=C(B);$&&(j.current=!0,O.current=[$])},[a,C]),E=A.useCallback(B=>{if(!j.current||!a)return;B.preventDefault();const $=C(B);if(!$)return;O.current.push($);const K=n.current;if(!K)return;const W=K.getContext("2d");if(!W)return;const H=O.current;if(H.length<2)return;W.beginPath(),o==="eraser"?(W.globalCompositeOperation="destination-out",W.strokeStyle="rgba(0,0,0,1)"):(W.globalCompositeOperation="source-over",W.strokeStyle=d),W.lineWidth=o==="eraser"?p*4:p,W.lineCap="round",W.lineJoin="round";const J=H[H.length-2],ie=H[H.length-1];W.moveTo(J.x,J.y),W.lineTo(ie.x,ie.y),W.stroke(),W.globalCompositeOperation="source-over"},[a,C,o,d,p]),N=A.useCallback(()=>{j.current&&(j.current=!1,O.current.length>1&&(w.current.push({points:[...O.current],color:d,width:o==="eraser"?p*4:p,tool:o}),e==null||e(w.current.length>0)),O.current=[])},[d,p,o,e]),k=A.useCallback(()=>{w.current.pop(),L(),e==null||e(w.current.length>0)},[L,e]),z=A.useCallback(()=>{w.current=[],L(),e==null||e(!1)},[L,e]),D=A.useCallback(()=>{i(B=>!B),v(!1),S(!1)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:D,className:`flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-full border uppercase font-bold tracking-widest transition-colors cursor-pointer ${a?"text-red-300 bg-red-500/20 border-red-500/30 hover:bg-red-500/30":"text-purple-300 bg-purple-500/10 border-purple-500/20 hover:bg-purple-500/20"}`,title:r("proctor.annotate"),children:[s.jsx(kN,{className:"w-3 h-3"}),r(a?"proctor.annotate.clear":"proctor.annotate")]}),a&&s.jsx("canvas",{ref:n,className:"absolute inset-0 z-30",style:{cursor:"crosshair",touchAction:"none"},onMouseDown:P,onMouseMove:E,onMouseUp:N,onMouseLeave:N,onTouchStart:P,onTouchMove:E,onTouchEnd:N}),a&&s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 z-40 flex items-center gap-2 bg-[#1a1b26]/95 backdrop-blur-md px-4 py-2 rounded-xl border border-white/10 shadow-2xl",children:[s.jsx("button",{onClick:()=>c("pen"),className:`p-2 rounded-lg transition ${o==="pen"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Pen",children:s.jsx(kN,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>c("eraser"),className:`p-2 rounded-lg transition ${o==="eraser"?"bg-purple-600/40 text-purple-300":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Eraser",children:s.jsx(Joe,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>{v(!y),S(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Color",children:[s.jsx(ble,{className:"w-4 h-4"}),s.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2 h-2 rounded-full",style:{backgroundColor:d}})]}),y&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-1.5 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:Zle.map(B=>s.jsx("button",{onClick:()=>{h(B),v(!1)},className:`w-6 h-6 rounded-full border-2 transition ${d===B?"border-white scale-110":"border-transparent hover:scale-110"}`,style:{backgroundColor:B}},B))})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>{S(!_),v(!1)},className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 transition",title:"Line width",children:s.jsx(yH,{className:"w-4 h-4"})}),_&&s.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 flex gap-2 bg-[#1a1b26] border border-white/10 rounded-lg p-2 shadow-lg",children:Jle.map(B=>s.jsx("button",{onClick:()=>{m(B),S(!1)},className:`flex items-center justify-center w-8 h-8 rounded-lg transition ${p===B?"bg-purple-600/30 border border-purple-500/30":"hover:bg-white/5"}`,children:s.jsx("div",{className:"rounded-full bg-white",style:{width:B*2,height:B*2}})},B))})]}),s.jsx("div",{className:"w-px h-5 bg-white/10"}),s.jsx("button",{onClick:k,disabled:w.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-white hover:bg-white/10 disabled:opacity-30 transition",title:"Undo",children:s.jsx(Cle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:z,disabled:w.current.length===0,className:"p-2 rounded-lg text-gray-500 hover:text-red-400 hover:bg-red-500/10 disabled:opacity-30 transition",title:"Clear all",children:s.jsx(aa,{className:"w-4 h-4"})})]})]})},tce=({block:t})=>s.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-line",children:t.content}),rce=({block:t})=>{const r={tip:"border-green-500/30 bg-green-500/5 text-green-400",warning:"border-amber-500/30 bg-amber-500/5 text-amber-400",note:"border-blue-500/30 bg-blue-500/5 text-blue-400"}[t.variant||"note"];return s.jsxs("div",{className:`border rounded-xl p-4 text-sm ${r}`,children:[s.jsx("div",{className:"font-bold text-xs uppercase tracking-widest mb-1",children:t.variant==="tip"?"Tip":t.variant==="warning"?"Warning":"Note"}),s.jsx("div",{className:"text-gray-300",children:t.content})]})},nce=({block:t,onComplete:e})=>{const[r,n]=A.useState(null),[a,i]=A.useState(!1),o=r===t.correctAnswer,c=()=>{r!==null&&(i(!0),e(r===t.correctAnswer))};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(hH,{className:"w-4 h-4 text-purple-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.options||[]).map((d,h)=>s.jsx("button",{onClick:()=>!a&&n(h),disabled:a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a&&h===t.correctAnswer?"border-green-500/50 bg-green-500/10 text-green-400":a&&h===r&&!o?"border-red-500/50 bg-red-500/10 text-red-400":r===h?"border-purple-500/30 bg-purple-500/10 text-white":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+h),"."]}),s.jsx("span",{children:d}),a&&h===t.correctAnswer&&s.jsx(an,{className:"w-4 h-4 text-green-400 ml-auto"}),a&&h===r&&!o&&s.jsx(Cu,{className:"w-4 h-4 text-red-400 ml-auto"})]})},h))}),!a&&s.jsx("button",{onClick:c,disabled:r===null,className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Check Answer"}),a&&s.jsx("div",{className:`text-xs font-bold ${o?"text-green-400":"text-red-400"}`,children:o?"Correct!":"Incorrect  review the material above."})]})},ace=({block:t,onComplete:e})=>{const[r,n]=A.useState(""),[a,i]=A.useState(!1),[o,c]=A.useState(!1),d=()=>{if(!r.trim())return;const p=(t.acceptedAnswers||[]).map(m=>m.toLowerCase().trim()).includes(r.toLowerCase().trim());c(p),i(!0),e(p)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(Px,{className:"w-4 h-4 text-cyan-400 shrink-0"}),t.content]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:r,onChange:h=>n(h.target.value),disabled:a,placeholder:"Type your answer...",className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-2 text-sm text-white placeholder-gray-600 focus:outline-none focus:border-purple-500/50 transition",onKeyDown:h=>h.key==="Enter"&&d()}),!a&&s.jsx("button",{onClick:d,disabled:!r.trim(),className:"px-4 py-2 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl text-xs font-bold transition",children:"Submit"})]}),a&&s.jsx("div",{className:`text-xs font-bold flex items-center gap-1 ${o?"text-green-400":"text-amber-400"}`,children:o?s.jsxs(s.Fragment,{children:[s.jsx(an,{className:"w-3 h-3"})," Correct!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Cu,{className:"w-3 h-3"})," Accepted answers: ",(t.acceptedAnswers||[]).join(", ")]})})]})},ice=({block:t})=>{const[e,r]=A.useState(!1);return s.jsx("button",{onClick:()=>r(!e),className:"w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition cursor-pointer",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Zs,{className:"w-4 h-4 text-amber-400 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:t.term}),e?s.jsx("div",{className:"text-sm text-gray-300 mt-1 animate-in fade-in duration-200",children:t.definition}):s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Tap to reveal definition"})]})]})})},sce=({block:t,onComplete:e})=>{const[r,n]=A.useState(new Set),a=(t.items||[]).length>0&&r.size===(t.items||[]).length,i=o=>{const c=new Set(r);c.has(o)?c.delete(o):c.add(o),n(c),c.size===(t.items||[]).length&&e(!0)};return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-sm text-white font-medium flex items-center gap-2",children:[s.jsx(dle,{className:"w-4 h-4 text-green-400 shrink-0"}),t.content]}),s.jsx("div",{className:"space-y-2",children:(t.items||[]).map((o,c)=>s.jsxs("button",{onClick:()=>i(c),className:`w-full text-left flex items-center gap-3 p-3 rounded-xl border text-sm transition ${r.has(c)?"border-green-500/30 bg-green-500/5 text-green-400 line-through":"border-white/10 bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition ${r.has(c)?"border-green-500 bg-green-500":"border-gray-600"}`,children:r.has(c)&&s.jsx(an,{className:"w-3 h-3 text-white"})}),o]},c))}),a&&s.jsxs("div",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[s.jsx(an,{className:"w-3 h-3"})," All items completed!"]})]})},oce=({blocks:t,onBlockComplete:e,onAllComplete:r})=>{const[n,a]=A.useState(new Set),[i,o]=A.useState(0),c=A.useCallback((v,_)=>{e==null||e(v,_),a(S=>{const w=new Set(S);return w.add(v),t.filter(O=>["MC","SHORT_ANSWER","CHECKLIST"].includes(O.type)).every(O=>w.has(O.id))&&(r==null||r()),w})},[t,e,r]),d=()=>{i<t.length-1&&o(v=>v+1)},h=()=>{i>0&&o(v=>v-1)};if(t.length===0)return null;const p=t[i],m=["MC","SHORT_ANSWER","CHECKLIST"].includes(p.type),y=n.has(p.id);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5 overflow-hidden",children:s.jsx("div",{className:"h-1.5 rounded-full bg-purple-500 transition-all duration-500",style:{width:`${(i+1)/t.length*100}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:[i+1,"/",t.length]})]}),s.jsxs("div",{className:"animate-in fade-in slide-in-from-right-2 duration-200",children:[p.type==="TEXT"&&s.jsx(tce,{block:p}),p.type==="INFO_BOX"&&s.jsx(rce,{block:p}),p.type==="MC"&&s.jsx(nce,{block:p,onComplete:v=>c(p.id,v)}),p.type==="SHORT_ANSWER"&&s.jsx(ace,{block:p,onComplete:v=>c(p.id,v)}),p.type==="VOCABULARY"&&s.jsx(ice,{block:p}),p.type==="CHECKLIST"&&s.jsx(sce,{block:p,onComplete:v=>c(p.id,v)})]},p.id),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/5",children:[s.jsx("button",{onClick:h,disabled:i===0,className:"text-xs text-gray-500 hover:text-white disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-white/5",children:"Previous"}),s.jsx("div",{className:"flex gap-1",children:t.map((v,_)=>s.jsx("button",{onClick:()=>o(_),className:`w-2 h-2 rounded-full transition ${_===i?"bg-purple-500 scale-125":n.has(v.id)?"bg-green-500":"bg-white/10 hover:bg-white/20"}`},v.id))}),s.jsxs("button",{onClick:d,disabled:i>=t.length-1||m&&!y,className:"flex items-center gap-1 text-xs text-purple-400 hover:text-purple-300 disabled:opacity-30 transition px-3 py-1.5 rounded-lg hover:bg-purple-500/10",children:["Next ",s.jsx(_u,{className:"w-3 h-3"})]})]})]})};class Yi{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Yi(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class js{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new js(r,Yi.range(this,e))}}class ct{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,o=r&&r.loc;if(o&&o.start<=o.end){var c=o.lexer.input;a=o.start,i=o.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ct.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ct.prototype.__proto__=Error.prototype;var lce=function(e,r){return e===void 0?r:e},cce=/([A-Z])/g,uce=function(e){return e.replace(cce,"-$1").toLowerCase()},dce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},hce=/[&><"']/g;function fce(t){return String(t).replace(hce,e=>dce[e])}var OH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},pce=function(e){var r=OH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},mce=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},gce=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Hr={deflt:lce,escape:fce,hyphenate:uce,getBaseElem:OH,isCharacterBox:pce,protocolFromUrl:gce},tx={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function yce(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class H7{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in tx)if(tx.hasOwnProperty(r)){var n=tx[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:yce(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ct("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Hr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Yc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return $o[vce[this.id]]}sub(){return $o[xce[this.id]]}fracNum(){return $o[bce[this.id]]}fracDen(){return $o[wce[this.id]]}cramp(){return $o[Sce[this.id]]}text(){return $o[_ce[this.id]]}isTight(){return this.size>=2}}var G7=0,$x=1,Ah=2,Kl=3,tg=4,Qs=5,Kh=6,Pi=7,$o=[new Yc(G7,0,!1),new Yc($x,0,!0),new Yc(Ah,1,!1),new Yc(Kl,1,!0),new Yc(tg,2,!1),new Yc(Qs,2,!0),new Yc(Kh,3,!1),new Yc(Pi,3,!0)],vce=[tg,Qs,tg,Qs,Kh,Pi,Kh,Pi],xce=[Qs,Qs,Qs,Qs,Pi,Pi,Pi,Pi],bce=[Ah,Kl,tg,Qs,Kh,Pi,Kh,Pi],wce=[Kl,Kl,Qs,Qs,Pi,Pi,Pi,Pi],Sce=[$x,$x,Kl,Kl,Qs,Qs,Pi,Pi],_ce=[G7,$x,Ah,Kl,Ah,Kl,Ah,Kl],Ht={DISPLAY:$o[G7],TEXT:$o[Ah],SCRIPT:$o[tg],SCRIPTSCRIPT:$o[Kh]},CN=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Tce(t){for(var e=0;e<CN.length;e++)for(var r=CN[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var rx=[];CN.forEach(t=>t.blocks.forEach(e=>rx.push(...e)));function IH(t){for(var e=0;e<rx.length;e+=2)if(t>=rx[e]&&t<=rx[e+1])return!0;return!1}var ah=80,Nce=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Ace=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Ece=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},jce=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},kce=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Cce=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},Oce=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},Ice=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=Nce(r,ah);break;case"sqrtSize1":a=Ace(r,ah);break;case"sqrtSize2":a=Ece(r,ah);break;case"sqrtSize3":a=jce(r,ah);break;case"sqrtSize4":a=kce(r,ah);break;case"sqrtTall":a=Oce(r,ah,n)}return a},Rce=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},yR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Mce=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class d1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Fo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},cv={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},vR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Pce(t,e){Fo[t]=e}function W7(t,e,r){if(!Fo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Fo[e][n];if(!a&&t[0]in vR&&(n=vR[t[0]].charCodeAt(0),a=Fo[e][n]),!a&&r==="text"&&IH(n)&&(a=Fo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var n3={};function Dce(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!n3[e]){var r=n3[e]={cssEmPerMu:cv.quad[e]/18};for(var n in cv)cv.hasOwnProperty(n)&&(r[n]=cv[n][e])}return n3[e]}var Lce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],xR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],bR=function(e,r){return r.size<2?e:Lce[e-1][r.size-1]};class Dl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Dl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=xR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Dl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:bR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:xR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=bR(Dl.BASESIZE,e);return this.size===r&&this.textSize===Dl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Dl.BASESIZE?["sizing","reset-size"+this.size,"size"+Dl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Dce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Dl.BASESIZE=6;var ON={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Bce={ex:!0,em:!0,mu:!0},RH=function(e){return typeof e!="string"&&(e=e.unit),e in ON||e in Bce||e==="ex"},Xn=function(e,r){var n;if(e.unit in ON)n=ON[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ct("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},yt=function(e){return+e.toFixed(4)+"em"},Iu=function(e){return e.filter(r=>r).join(" ")},MH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},PH=function(e){var r=document.createElement(e);r.className=Iu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},$ce=/[\s"'>/=\x00-\x1f]/,DH=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Hr.escape(Iu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Hr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Hr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if($ce.test(i))throw new ct("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Hr.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class h1{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,MH.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return PH.call(this,"span")}toMarkup(){return DH.call(this,"span")}}class K7{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,MH.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return PH.call(this,"a")}toMarkup(){return DH.call(this,"a")}}class Uce{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Hr.escape(this.src)+'"'+(' alt="'+Hr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Hr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Hr.escape(r)+'"'),e+="'/>",e}}var zce={:"",:"",:"",:""};class to{constructor(e,r,n,a,i,o,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=o||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=Tce(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=zce[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=yt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Iu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Hr.escape(Iu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Hr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Hr.escape(n)+'"');var i=Hr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class ac{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Hr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Ru{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",yR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Hr.escape(this.alternate)+'"/>':'<path d="'+Hr.escape(yR[this.pathName])+'"/>'}}class IN{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Hr.escape(this.attributes[r])+'"');return e+="/>",e}}function wR(t){if(t instanceof to)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Vce(t){if(t instanceof h1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Fce={bin:1,close:1,inner:1,open:1,punct:1,rel:1},qce={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Pn={math:{},text:{}};function I(t,e,r,n,a,i){Pn[t][a]={font:e,group:r,replace:n},i&&n&&(Pn[t][n]=Pn[t][a])}var U="math",rt="text",G="main",le="ams",Gn="accent-token",Nt="bin",$i="close",Rf="inner",qt="mathord",Ca="op-token",Is="open",M2="punct",ue="rel",pc="spacing",ye="textord";I(U,G,ue,"","\\equiv",!0);I(U,G,ue,"","\\prec",!0);I(U,G,ue,"","\\succ",!0);I(U,G,ue,"","\\sim",!0);I(U,G,ue,"","\\perp");I(U,G,ue,"","\\preceq",!0);I(U,G,ue,"","\\succeq",!0);I(U,G,ue,"","\\simeq",!0);I(U,G,ue,"","\\mid",!0);I(U,G,ue,"","\\ll",!0);I(U,G,ue,"","\\gg",!0);I(U,G,ue,"","\\asymp",!0);I(U,G,ue,"","\\parallel");I(U,G,ue,"","\\bowtie",!0);I(U,G,ue,"","\\smile",!0);I(U,G,ue,"","\\sqsubseteq",!0);I(U,G,ue,"","\\sqsupseteq",!0);I(U,G,ue,"","\\doteq",!0);I(U,G,ue,"","\\frown",!0);I(U,G,ue,"","\\ni",!0);I(U,G,ue,"","\\propto",!0);I(U,G,ue,"","\\vdash",!0);I(U,G,ue,"","\\dashv",!0);I(U,G,ue,"","\\owns");I(U,G,M2,".","\\ldotp");I(U,G,M2,"","\\cdotp");I(U,G,ye,"#","\\#");I(rt,G,ye,"#","\\#");I(U,G,ye,"&","\\&");I(rt,G,ye,"&","\\&");I(U,G,ye,"","\\aleph",!0);I(U,G,ye,"","\\forall",!0);I(U,G,ye,"","\\hbar",!0);I(U,G,ye,"","\\exists",!0);I(U,G,ye,"","\\nabla",!0);I(U,G,ye,"","\\flat",!0);I(U,G,ye,"","\\ell",!0);I(U,G,ye,"","\\natural",!0);I(U,G,ye,"","\\clubsuit",!0);I(U,G,ye,"","\\wp",!0);I(U,G,ye,"","\\sharp",!0);I(U,G,ye,"","\\diamondsuit",!0);I(U,G,ye,"","\\Re",!0);I(U,G,ye,"","\\heartsuit",!0);I(U,G,ye,"","\\Im",!0);I(U,G,ye,"","\\spadesuit",!0);I(U,G,ye,"","\\S",!0);I(rt,G,ye,"","\\S");I(U,G,ye,"","\\P",!0);I(rt,G,ye,"","\\P");I(U,G,ye,"","\\dag");I(rt,G,ye,"","\\dag");I(rt,G,ye,"","\\textdagger");I(U,G,ye,"","\\ddag");I(rt,G,ye,"","\\ddag");I(rt,G,ye,"","\\textdaggerdbl");I(U,G,$i,"","\\rmoustache",!0);I(U,G,Is,"","\\lmoustache",!0);I(U,G,$i,"","\\rgroup",!0);I(U,G,Is,"","\\lgroup",!0);I(U,G,Nt,"","\\mp",!0);I(U,G,Nt,"","\\ominus",!0);I(U,G,Nt,"","\\uplus",!0);I(U,G,Nt,"","\\sqcap",!0);I(U,G,Nt,"","\\ast");I(U,G,Nt,"","\\sqcup",!0);I(U,G,Nt,"","\\bigcirc",!0);I(U,G,Nt,"","\\bullet",!0);I(U,G,Nt,"","\\ddagger");I(U,G,Nt,"","\\wr",!0);I(U,G,Nt,"","\\amalg");I(U,G,Nt,"&","\\And");I(U,G,ue,"","\\longleftarrow",!0);I(U,G,ue,"","\\Leftarrow",!0);I(U,G,ue,"","\\Longleftarrow",!0);I(U,G,ue,"","\\longrightarrow",!0);I(U,G,ue,"","\\Rightarrow",!0);I(U,G,ue,"","\\Longrightarrow",!0);I(U,G,ue,"","\\leftrightarrow",!0);I(U,G,ue,"","\\longleftrightarrow",!0);I(U,G,ue,"","\\Leftrightarrow",!0);I(U,G,ue,"","\\Longleftrightarrow",!0);I(U,G,ue,"","\\mapsto",!0);I(U,G,ue,"","\\longmapsto",!0);I(U,G,ue,"","\\nearrow",!0);I(U,G,ue,"","\\hookleftarrow",!0);I(U,G,ue,"","\\hookrightarrow",!0);I(U,G,ue,"","\\searrow",!0);I(U,G,ue,"","\\leftharpoonup",!0);I(U,G,ue,"","\\rightharpoonup",!0);I(U,G,ue,"","\\swarrow",!0);I(U,G,ue,"","\\leftharpoondown",!0);I(U,G,ue,"","\\rightharpoondown",!0);I(U,G,ue,"","\\nwarrow",!0);I(U,G,ue,"","\\rightleftharpoons",!0);I(U,le,ue,"","\\nless",!0);I(U,le,ue,"","\\@nleqslant");I(U,le,ue,"","\\@nleqq");I(U,le,ue,"","\\lneq",!0);I(U,le,ue,"","\\lneqq",!0);I(U,le,ue,"","\\@lvertneqq");I(U,le,ue,"","\\lnsim",!0);I(U,le,ue,"","\\lnapprox",!0);I(U,le,ue,"","\\nprec",!0);I(U,le,ue,"","\\npreceq",!0);I(U,le,ue,"","\\precnsim",!0);I(U,le,ue,"","\\precnapprox",!0);I(U,le,ue,"","\\nsim",!0);I(U,le,ue,"","\\@nshortmid");I(U,le,ue,"","\\nmid",!0);I(U,le,ue,"","\\nvdash",!0);I(U,le,ue,"","\\nvDash",!0);I(U,le,ue,"","\\ntriangleleft");I(U,le,ue,"","\\ntrianglelefteq",!0);I(U,le,ue,"","\\subsetneq",!0);I(U,le,ue,"","\\@varsubsetneq");I(U,le,ue,"","\\subsetneqq",!0);I(U,le,ue,"","\\@varsubsetneqq");I(U,le,ue,"","\\ngtr",!0);I(U,le,ue,"","\\@ngeqslant");I(U,le,ue,"","\\@ngeqq");I(U,le,ue,"","\\gneq",!0);I(U,le,ue,"","\\gneqq",!0);I(U,le,ue,"","\\@gvertneqq");I(U,le,ue,"","\\gnsim",!0);I(U,le,ue,"","\\gnapprox",!0);I(U,le,ue,"","\\nsucc",!0);I(U,le,ue,"","\\nsucceq",!0);I(U,le,ue,"","\\succnsim",!0);I(U,le,ue,"","\\succnapprox",!0);I(U,le,ue,"","\\ncong",!0);I(U,le,ue,"","\\@nshortparallel");I(U,le,ue,"","\\nparallel",!0);I(U,le,ue,"","\\nVDash",!0);I(U,le,ue,"","\\ntriangleright");I(U,le,ue,"","\\ntrianglerighteq",!0);I(U,le,ue,"","\\@nsupseteqq");I(U,le,ue,"","\\supsetneq",!0);I(U,le,ue,"","\\@varsupsetneq");I(U,le,ue,"","\\supsetneqq",!0);I(U,le,ue,"","\\@varsupsetneqq");I(U,le,ue,"","\\nVdash",!0);I(U,le,ue,"","\\precneqq",!0);I(U,le,ue,"","\\succneqq",!0);I(U,le,ue,"","\\@nsubseteqq");I(U,le,Nt,"","\\unlhd");I(U,le,Nt,"","\\unrhd");I(U,le,ue,"","\\nleftarrow",!0);I(U,le,ue,"","\\nrightarrow",!0);I(U,le,ue,"","\\nLeftarrow",!0);I(U,le,ue,"","\\nRightarrow",!0);I(U,le,ue,"","\\nleftrightarrow",!0);I(U,le,ue,"","\\nLeftrightarrow",!0);I(U,le,ue,"","\\vartriangle");I(U,le,ye,"","\\hslash");I(U,le,ye,"","\\triangledown");I(U,le,ye,"","\\lozenge");I(U,le,ye,"","\\circledS");I(U,le,ye,"","\\circledR");I(rt,le,ye,"","\\circledR");I(U,le,ye,"","\\measuredangle",!0);I(U,le,ye,"","\\nexists");I(U,le,ye,"","\\mho");I(U,le,ye,"","\\Finv",!0);I(U,le,ye,"","\\Game",!0);I(U,le,ye,"","\\backprime");I(U,le,ye,"","\\blacktriangle");I(U,le,ye,"","\\blacktriangledown");I(U,le,ye,"","\\blacksquare");I(U,le,ye,"","\\blacklozenge");I(U,le,ye,"","\\bigstar");I(U,le,ye,"","\\sphericalangle",!0);I(U,le,ye,"","\\complement",!0);I(U,le,ye,"","\\eth",!0);I(rt,G,ye,"","");I(U,le,ye,"","\\diagup");I(U,le,ye,"","\\diagdown");I(U,le,ye,"","\\square");I(U,le,ye,"","\\Box");I(U,le,ye,"","\\Diamond");I(U,le,ye,"","\\yen",!0);I(rt,le,ye,"","\\yen",!0);I(U,le,ye,"","\\checkmark",!0);I(rt,le,ye,"","\\checkmark");I(U,le,ye,"","\\beth",!0);I(U,le,ye,"","\\daleth",!0);I(U,le,ye,"","\\gimel",!0);I(U,le,ye,"","\\digamma",!0);I(U,le,ye,"","\\varkappa");I(U,le,Is,"","\\@ulcorner",!0);I(U,le,$i,"","\\@urcorner",!0);I(U,le,Is,"","\\@llcorner",!0);I(U,le,$i,"","\\@lrcorner",!0);I(U,le,ue,"","\\leqq",!0);I(U,le,ue,"","\\leqslant",!0);I(U,le,ue,"","\\eqslantless",!0);I(U,le,ue,"","\\lesssim",!0);I(U,le,ue,"","\\lessapprox",!0);I(U,le,ue,"","\\approxeq",!0);I(U,le,Nt,"","\\lessdot");I(U,le,ue,"","\\lll",!0);I(U,le,ue,"","\\lessgtr",!0);I(U,le,ue,"","\\lesseqgtr",!0);I(U,le,ue,"","\\lesseqqgtr",!0);I(U,le,ue,"","\\doteqdot");I(U,le,ue,"","\\risingdotseq",!0);I(U,le,ue,"","\\fallingdotseq",!0);I(U,le,ue,"","\\backsim",!0);I(U,le,ue,"","\\backsimeq",!0);I(U,le,ue,"","\\subseteqq",!0);I(U,le,ue,"","\\Subset",!0);I(U,le,ue,"","\\sqsubset",!0);I(U,le,ue,"","\\preccurlyeq",!0);I(U,le,ue,"","\\curlyeqprec",!0);I(U,le,ue,"","\\precsim",!0);I(U,le,ue,"","\\precapprox",!0);I(U,le,ue,"","\\vartriangleleft");I(U,le,ue,"","\\trianglelefteq");I(U,le,ue,"","\\vDash",!0);I(U,le,ue,"","\\Vvdash",!0);I(U,le,ue,"","\\smallsmile");I(U,le,ue,"","\\smallfrown");I(U,le,ue,"","\\bumpeq",!0);I(U,le,ue,"","\\Bumpeq",!0);I(U,le,ue,"","\\geqq",!0);I(U,le,ue,"","\\geqslant",!0);I(U,le,ue,"","\\eqslantgtr",!0);I(U,le,ue,"","\\gtrsim",!0);I(U,le,ue,"","\\gtrapprox",!0);I(U,le,Nt,"","\\gtrdot");I(U,le,ue,"","\\ggg",!0);I(U,le,ue,"","\\gtrless",!0);I(U,le,ue,"","\\gtreqless",!0);I(U,le,ue,"","\\gtreqqless",!0);I(U,le,ue,"","\\eqcirc",!0);I(U,le,ue,"","\\circeq",!0);I(U,le,ue,"","\\triangleq",!0);I(U,le,ue,"","\\thicksim");I(U,le,ue,"","\\thickapprox");I(U,le,ue,"","\\supseteqq",!0);I(U,le,ue,"","\\Supset",!0);I(U,le,ue,"","\\sqsupset",!0);I(U,le,ue,"","\\succcurlyeq",!0);I(U,le,ue,"","\\curlyeqsucc",!0);I(U,le,ue,"","\\succsim",!0);I(U,le,ue,"","\\succapprox",!0);I(U,le,ue,"","\\vartriangleright");I(U,le,ue,"","\\trianglerighteq");I(U,le,ue,"","\\Vdash",!0);I(U,le,ue,"","\\shortmid");I(U,le,ue,"","\\shortparallel");I(U,le,ue,"","\\between",!0);I(U,le,ue,"","\\pitchfork",!0);I(U,le,ue,"","\\varpropto");I(U,le,ue,"","\\blacktriangleleft");I(U,le,ue,"","\\therefore",!0);I(U,le,ue,"","\\backepsilon");I(U,le,ue,"","\\blacktriangleright");I(U,le,ue,"","\\because",!0);I(U,le,ue,"","\\llless");I(U,le,ue,"","\\gggtr");I(U,le,Nt,"","\\lhd");I(U,le,Nt,"","\\rhd");I(U,le,ue,"","\\eqsim",!0);I(U,G,ue,"","\\Join");I(U,le,ue,"","\\Doteq",!0);I(U,le,Nt,"","\\dotplus",!0);I(U,le,Nt,"","\\smallsetminus");I(U,le,Nt,"","\\Cap",!0);I(U,le,Nt,"","\\Cup",!0);I(U,le,Nt,"","\\doublebarwedge",!0);I(U,le,Nt,"","\\boxminus",!0);I(U,le,Nt,"","\\boxplus",!0);I(U,le,Nt,"","\\divideontimes",!0);I(U,le,Nt,"","\\ltimes",!0);I(U,le,Nt,"","\\rtimes",!0);I(U,le,Nt,"","\\leftthreetimes",!0);I(U,le,Nt,"","\\rightthreetimes",!0);I(U,le,Nt,"","\\curlywedge",!0);I(U,le,Nt,"","\\curlyvee",!0);I(U,le,Nt,"","\\circleddash",!0);I(U,le,Nt,"","\\circledast",!0);I(U,le,Nt,"","\\centerdot");I(U,le,Nt,"","\\intercal",!0);I(U,le,Nt,"","\\doublecap");I(U,le,Nt,"","\\doublecup");I(U,le,Nt,"","\\boxtimes",!0);I(U,le,ue,"","\\dashrightarrow",!0);I(U,le,ue,"","\\dashleftarrow",!0);I(U,le,ue,"","\\leftleftarrows",!0);I(U,le,ue,"","\\leftrightarrows",!0);I(U,le,ue,"","\\Lleftarrow",!0);I(U,le,ue,"","\\twoheadleftarrow",!0);I(U,le,ue,"","\\leftarrowtail",!0);I(U,le,ue,"","\\looparrowleft",!0);I(U,le,ue,"","\\leftrightharpoons",!0);I(U,le,ue,"","\\curvearrowleft",!0);I(U,le,ue,"","\\circlearrowleft",!0);I(U,le,ue,"","\\Lsh",!0);I(U,le,ue,"","\\upuparrows",!0);I(U,le,ue,"","\\upharpoonleft",!0);I(U,le,ue,"","\\downharpoonleft",!0);I(U,G,ue,"","\\origof",!0);I(U,G,ue,"","\\imageof",!0);I(U,le,ue,"","\\multimap",!0);I(U,le,ue,"","\\leftrightsquigarrow",!0);I(U,le,ue,"","\\rightrightarrows",!0);I(U,le,ue,"","\\rightleftarrows",!0);I(U,le,ue,"","\\twoheadrightarrow",!0);I(U,le,ue,"","\\rightarrowtail",!0);I(U,le,ue,"","\\looparrowright",!0);I(U,le,ue,"","\\curvearrowright",!0);I(U,le,ue,"","\\circlearrowright",!0);I(U,le,ue,"","\\Rsh",!0);I(U,le,ue,"","\\downdownarrows",!0);I(U,le,ue,"","\\upharpoonright",!0);I(U,le,ue,"","\\downharpoonright",!0);I(U,le,ue,"","\\rightsquigarrow",!0);I(U,le,ue,"","\\leadsto");I(U,le,ue,"","\\Rrightarrow",!0);I(U,le,ue,"","\\restriction");I(U,G,ye,"","`");I(U,G,ye,"$","\\$");I(rt,G,ye,"$","\\$");I(rt,G,ye,"$","\\textdollar");I(U,G,ye,"%","\\%");I(rt,G,ye,"%","\\%");I(U,G,ye,"_","\\_");I(rt,G,ye,"_","\\_");I(rt,G,ye,"_","\\textunderscore");I(U,G,ye,"","\\angle",!0);I(U,G,ye,"","\\infty",!0);I(U,G,ye,"","\\prime");I(U,G,ye,"","\\triangle");I(U,G,ye,"","\\Gamma",!0);I(U,G,ye,"","\\Delta",!0);I(U,G,ye,"","\\Theta",!0);I(U,G,ye,"","\\Lambda",!0);I(U,G,ye,"","\\Xi",!0);I(U,G,ye,"","\\Pi",!0);I(U,G,ye,"","\\Sigma",!0);I(U,G,ye,"","\\Upsilon",!0);I(U,G,ye,"","\\Phi",!0);I(U,G,ye,"","\\Psi",!0);I(U,G,ye,"","\\Omega",!0);I(U,G,ye,"A","");I(U,G,ye,"B","");I(U,G,ye,"E","");I(U,G,ye,"Z","");I(U,G,ye,"H","");I(U,G,ye,"I","");I(U,G,ye,"K","");I(U,G,ye,"M","");I(U,G,ye,"N","");I(U,G,ye,"O","");I(U,G,ye,"P","");I(U,G,ye,"T","");I(U,G,ye,"X","");I(U,G,ye,"","\\neg",!0);I(U,G,ye,"","\\lnot");I(U,G,ye,"","\\top");I(U,G,ye,"","\\bot");I(U,G,ye,"","\\emptyset");I(U,le,ye,"","\\varnothing");I(U,G,qt,"","\\alpha",!0);I(U,G,qt,"","\\beta",!0);I(U,G,qt,"","\\gamma",!0);I(U,G,qt,"","\\delta",!0);I(U,G,qt,"","\\epsilon",!0);I(U,G,qt,"","\\zeta",!0);I(U,G,qt,"","\\eta",!0);I(U,G,qt,"","\\theta",!0);I(U,G,qt,"","\\iota",!0);I(U,G,qt,"","\\kappa",!0);I(U,G,qt,"","\\lambda",!0);I(U,G,qt,"","\\mu",!0);I(U,G,qt,"","\\nu",!0);I(U,G,qt,"","\\xi",!0);I(U,G,qt,"","\\omicron",!0);I(U,G,qt,"","\\pi",!0);I(U,G,qt,"","\\rho",!0);I(U,G,qt,"","\\sigma",!0);I(U,G,qt,"","\\tau",!0);I(U,G,qt,"","\\upsilon",!0);I(U,G,qt,"","\\phi",!0);I(U,G,qt,"","\\chi",!0);I(U,G,qt,"","\\psi",!0);I(U,G,qt,"","\\omega",!0);I(U,G,qt,"","\\varepsilon",!0);I(U,G,qt,"","\\vartheta",!0);I(U,G,qt,"","\\varpi",!0);I(U,G,qt,"","\\varrho",!0);I(U,G,qt,"","\\varsigma",!0);I(U,G,qt,"","\\varphi",!0);I(U,G,Nt,"","*",!0);I(U,G,Nt,"+","+");I(U,G,Nt,"","-",!0);I(U,G,Nt,"","\\cdot",!0);I(U,G,Nt,"","\\circ",!0);I(U,G,Nt,"","\\div",!0);I(U,G,Nt,"","\\pm",!0);I(U,G,Nt,"","\\times",!0);I(U,G,Nt,"","\\cap",!0);I(U,G,Nt,"","\\cup",!0);I(U,G,Nt,"","\\setminus",!0);I(U,G,Nt,"","\\land");I(U,G,Nt,"","\\lor");I(U,G,Nt,"","\\wedge",!0);I(U,G,Nt,"","\\vee",!0);I(U,G,ye,"","\\surd");I(U,G,Is,"","\\langle",!0);I(U,G,Is,"","\\lvert");I(U,G,Is,"","\\lVert");I(U,G,$i,"?","?");I(U,G,$i,"!","!");I(U,G,$i,"","\\rangle",!0);I(U,G,$i,"","\\rvert");I(U,G,$i,"","\\rVert");I(U,G,ue,"=","=");I(U,G,ue,":",":");I(U,G,ue,"","\\approx",!0);I(U,G,ue,"","\\cong",!0);I(U,G,ue,"","\\ge");I(U,G,ue,"","\\geq",!0);I(U,G,ue,"","\\gets");I(U,G,ue,">","\\gt",!0);I(U,G,ue,"","\\in",!0);I(U,G,ue,"","\\@not");I(U,G,ue,"","\\subset",!0);I(U,G,ue,"","\\supset",!0);I(U,G,ue,"","\\subseteq",!0);I(U,G,ue,"","\\supseteq",!0);I(U,le,ue,"","\\nsubseteq",!0);I(U,le,ue,"","\\nsupseteq",!0);I(U,G,ue,"","\\models");I(U,G,ue,"","\\leftarrow",!0);I(U,G,ue,"","\\le");I(U,G,ue,"","\\leq",!0);I(U,G,ue,"<","\\lt",!0);I(U,G,ue,"","\\rightarrow",!0);I(U,G,ue,"","\\to");I(U,le,ue,"","\\ngeq",!0);I(U,le,ue,"","\\nleq",!0);I(U,G,pc,"","\\ ");I(U,G,pc,"","\\space");I(U,G,pc,"","\\nobreakspace");I(rt,G,pc,"","\\ ");I(rt,G,pc,""," ");I(rt,G,pc,"","\\space");I(rt,G,pc,"","\\nobreakspace");I(U,G,pc,null,"\\nobreak");I(U,G,pc,null,"\\allowbreak");I(U,G,M2,",",",");I(U,G,M2,";",";");I(U,le,Nt,"","\\barwedge",!0);I(U,le,Nt,"","\\veebar",!0);I(U,G,Nt,"","\\odot",!0);I(U,G,Nt,"","\\oplus",!0);I(U,G,Nt,"","\\otimes",!0);I(U,G,ye,"","\\partial",!0);I(U,G,Nt,"","\\oslash",!0);I(U,le,Nt,"","\\circledcirc",!0);I(U,le,Nt,"","\\boxdot",!0);I(U,G,Nt,"","\\bigtriangleup");I(U,G,Nt,"","\\bigtriangledown");I(U,G,Nt,"","\\dagger");I(U,G,Nt,"","\\diamond");I(U,G,Nt,"","\\star");I(U,G,Nt,"","\\triangleleft");I(U,G,Nt,"","\\triangleright");I(U,G,Is,"{","\\{");I(rt,G,ye,"{","\\{");I(rt,G,ye,"{","\\textbraceleft");I(U,G,$i,"}","\\}");I(rt,G,ye,"}","\\}");I(rt,G,ye,"}","\\textbraceright");I(U,G,Is,"{","\\lbrace");I(U,G,$i,"}","\\rbrace");I(U,G,Is,"[","\\lbrack",!0);I(rt,G,ye,"[","\\lbrack",!0);I(U,G,$i,"]","\\rbrack",!0);I(rt,G,ye,"]","\\rbrack",!0);I(U,G,Is,"(","\\lparen",!0);I(U,G,$i,")","\\rparen",!0);I(rt,G,ye,"<","\\textless",!0);I(rt,G,ye,">","\\textgreater",!0);I(U,G,Is,"","\\lfloor",!0);I(U,G,$i,"","\\rfloor",!0);I(U,G,Is,"","\\lceil",!0);I(U,G,$i,"","\\rceil",!0);I(U,G,ye,"\\","\\backslash");I(U,G,ye,"","|");I(U,G,ye,"","\\vert");I(rt,G,ye,"|","\\textbar",!0);I(U,G,ye,"","\\|");I(U,G,ye,"","\\Vert");I(rt,G,ye,"","\\textbardbl");I(rt,G,ye,"~","\\textasciitilde");I(rt,G,ye,"\\","\\textbackslash");I(rt,G,ye,"^","\\textasciicircum");I(U,G,ue,"","\\uparrow",!0);I(U,G,ue,"","\\Uparrow",!0);I(U,G,ue,"","\\downarrow",!0);I(U,G,ue,"","\\Downarrow",!0);I(U,G,ue,"","\\updownarrow",!0);I(U,G,ue,"","\\Updownarrow",!0);I(U,G,Ca,"","\\coprod");I(U,G,Ca,"","\\bigvee");I(U,G,Ca,"","\\bigwedge");I(U,G,Ca,"","\\biguplus");I(U,G,Ca,"","\\bigcap");I(U,G,Ca,"","\\bigcup");I(U,G,Ca,"","\\int");I(U,G,Ca,"","\\intop");I(U,G,Ca,"","\\iint");I(U,G,Ca,"","\\iiint");I(U,G,Ca,"","\\prod");I(U,G,Ca,"","\\sum");I(U,G,Ca,"","\\bigotimes");I(U,G,Ca,"","\\bigoplus");I(U,G,Ca,"","\\bigodot");I(U,G,Ca,"","\\oint");I(U,G,Ca,"","\\oiint");I(U,G,Ca,"","\\oiiint");I(U,G,Ca,"","\\bigsqcup");I(U,G,Ca,"","\\smallint");I(rt,G,Rf,"","\\textellipsis");I(U,G,Rf,"","\\mathellipsis");I(rt,G,Rf,"","\\ldots",!0);I(U,G,Rf,"","\\ldots",!0);I(U,G,Rf,"","\\@cdots",!0);I(U,G,Rf,"","\\ddots",!0);I(U,G,ye,"","\\varvdots");I(rt,G,ye,"","\\varvdots");I(U,G,Gn,"","\\acute");I(U,G,Gn,"","\\grave");I(U,G,Gn,"","\\ddot");I(U,G,Gn,"~","\\tilde");I(U,G,Gn,"","\\bar");I(U,G,Gn,"","\\breve");I(U,G,Gn,"","\\check");I(U,G,Gn,"^","\\hat");I(U,G,Gn,"","\\vec");I(U,G,Gn,"","\\dot");I(U,G,Gn,"","\\mathring");I(U,G,qt,"","\\@imath");I(U,G,qt,"","\\@jmath");I(U,G,ye,"","");I(U,G,ye,"","");I(rt,G,ye,"","\\i",!0);I(rt,G,ye,"","\\j",!0);I(rt,G,ye,"","\\ss",!0);I(rt,G,ye,"","\\ae",!0);I(rt,G,ye,"","\\oe",!0);I(rt,G,ye,"","\\o",!0);I(rt,G,ye,"","\\AE",!0);I(rt,G,ye,"","\\OE",!0);I(rt,G,ye,"","\\O",!0);I(rt,G,Gn,"","\\'");I(rt,G,Gn,"","\\`");I(rt,G,Gn,"","\\^");I(rt,G,Gn,"","\\~");I(rt,G,Gn,"","\\=");I(rt,G,Gn,"","\\u");I(rt,G,Gn,"","\\.");I(rt,G,Gn,"","\\c");I(rt,G,Gn,"","\\r");I(rt,G,Gn,"","\\v");I(rt,G,Gn,"",'\\"');I(rt,G,Gn,"","\\H");I(rt,G,Gn,"","\\textcircled");var LH={"--":!0,"---":!0,"``":!0,"''":!0};I(rt,G,ye,"","--",!0);I(rt,G,ye,"","\\textendash");I(rt,G,ye,"","---",!0);I(rt,G,ye,"","\\textemdash");I(rt,G,ye,"","`",!0);I(rt,G,ye,"","\\textquoteleft");I(rt,G,ye,"","'",!0);I(rt,G,ye,"","\\textquoteright");I(rt,G,ye,"","``",!0);I(rt,G,ye,"","\\textquotedblleft");I(rt,G,ye,"","''",!0);I(rt,G,ye,"","\\textquotedblright");I(U,G,ye,"","\\degree",!0);I(rt,G,ye,"","\\degree");I(rt,G,ye,"","\\textdegree",!0);I(U,G,ye,"","\\pounds");I(U,G,ye,"","\\mathsterling",!0);I(rt,G,ye,"","\\pounds");I(rt,G,ye,"","\\textsterling",!0);I(U,le,ye,"","\\maltese");I(rt,le,ye,"","\\maltese");var SR='0123456789/@."';for(var a3=0;a3<SR.length;a3++){var _R=SR.charAt(a3);I(U,G,ye,_R,_R)}var TR='0123456789!@*()-=+";:?/.,';for(var i3=0;i3<TR.length;i3++){var NR=TR.charAt(i3);I(rt,G,ye,NR,NR)}var Ux="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var s3=0;s3<Ux.length;s3++){var uv=Ux.charAt(s3);I(U,G,qt,uv,uv),I(rt,G,ye,uv,uv)}I(U,le,ye,"C","");I(rt,le,ye,"C","");I(U,le,ye,"H","");I(rt,le,ye,"H","");I(U,le,ye,"N","");I(rt,le,ye,"N","");I(U,le,ye,"P","");I(rt,le,ye,"P","");I(U,le,ye,"Q","");I(rt,le,ye,"Q","");I(U,le,ye,"R","");I(rt,le,ye,"R","");I(U,le,ye,"Z","");I(rt,le,ye,"Z","");I(U,G,qt,"h","");I(rt,G,qt,"h","");var Zt="";for(var Oi=0;Oi<Ux.length;Oi++){var ta=Ux.charAt(Oi);Zt=String.fromCharCode(55349,56320+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56372+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56424+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56580+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56684+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56736+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56788+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56840+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56944+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Oi<26&&(Zt=String.fromCharCode(55349,56632+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt),Zt=String.fromCharCode(55349,56476+Oi),I(U,G,qt,ta,Zt),I(rt,G,ye,ta,Zt))}Zt="";I(U,G,qt,"k",Zt);I(rt,G,ye,"k",Zt);for(var pd=0;pd<10;pd++){var Zc=pd.toString();Zt=String.fromCharCode(55349,57294+pd),I(U,G,qt,Zc,Zt),I(rt,G,ye,Zc,Zt),Zt=String.fromCharCode(55349,57314+pd),I(U,G,qt,Zc,Zt),I(rt,G,ye,Zc,Zt),Zt=String.fromCharCode(55349,57324+pd),I(U,G,qt,Zc,Zt),I(rt,G,ye,Zc,Zt),Zt=String.fromCharCode(55349,57334+pd),I(U,G,qt,Zc,Zt),I(rt,G,ye,Zc,Zt)}var RN="";for(var o3=0;o3<RN.length;o3++){var dv=RN.charAt(o3);I(U,G,qt,dv,dv),I(rt,G,ye,dv,dv)}var hv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],AR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Hce=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[hv[c][2],hv[c][o]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[AR[d][2],AR[d][o]]}else{if(i===120485||i===120486)return[hv[0][2],hv[0][o]];if(120486<i&&i<120782)return["",""];throw new ct("Unsupported character: "+e)}},P2=function(e,r,n){return Pn[n][e]&&Pn[n][e].replace&&(e=Pn[n][e].replace),{value:e,metrics:W7(e,r,n)}},yo=function(e,r,n,a,i){var o=P2(e,r,n),c=o.metrics;e=o.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new to(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new to(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},Gce=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&P2(e,"Main-Bold",r).metrics?yo(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Pn[r][e].font==="main"?yo(e,"Main-Regular",r,n,a):yo(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},Wce=function(e,r,n,a,i){return i!=="textord"&&P2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Kce=function(e,r,n){var a=e.mode,i=e.text,o=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=Hce(i,a)),h.length>0)return yo(i,h,a,r,o.concat(p));if(d){var m,y;if(d==="boldsymbol"){var v=Wce(i,a,r,o,n);m=v.fontName,y=[v.fontClass]}else c?(m=UH[d].fontName,y=[d]):(m=fv(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(P2(i,m,a).metrics)return yo(i,m,a,r,o.concat(y));if(LH.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var _=[],S=0;S<i.length;S++)_.push(yo(i[S],m,a,r,o.concat(y)));return $H(_)}}if(n==="mathord")return yo(i,"Math-Italic",a,r,o.concat(["mathnormal"]));if(n==="textord"){var w=Pn[a][i]&&Pn[a][i].font;if(w==="ams"){var j=fv("amsrm",r.fontWeight,r.fontShape);return yo(i,j,a,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var O=fv("textrm",r.fontWeight,r.fontShape);return yo(i,O,a,r,o.concat(r.fontWeight,r.fontShape))}else{var R=fv(w,r.fontWeight,r.fontShape);return yo(i,R,a,r,o.concat(R,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Qce=(t,e)=>{if(Iu(t.classes)!==Iu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Xce=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof to&&n instanceof to&&Qce(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},Q7=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>a&&(a=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Qi=function(e,r,n,a){var i=new h1(e,r,n,a);return Q7(i),i},BH=(t,e,r,n)=>new h1(t,e,r,n),Yce=function(e,r,n){var a=Qi([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=yt(a.height),a.maxFontSize=1,a},Zce=function(e,r,n,a){var i=new K7(e,r,n,a);return Q7(i),i},$H=function(e){var r=new d1(e);return Q7(r),r},Jce=function(e,r){return e instanceof d1?Qi([],[e],r):e},eue=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,o=1;o<r.length;o++){var c=-r[o].shift-i-r[o].elem.depth,d=c-(r[o-1].elem.height+r[o-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[o])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var v=e.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-v.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-v.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},tue=function(e,r){for(var{children:n,depth:a}=eue(e),i=0,o=0;o<n.length;o++){var c=n[o];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Qi(["pstrut"],[]);h.style.height=yt(i);for(var p=[],m=a,y=a,v=a,_=0;_<n.length;_++){var S=n[_];if(S.type==="kern")v+=S.size;else{var w=S.elem,j=S.wrapperClasses||[],O=S.wrapperStyle||{},R=Qi(j,[h,w],void 0,O);R.style.top=yt(-i-v-w.depth),S.marginLeft&&(R.style.marginLeft=S.marginLeft),S.marginRight&&(R.style.marginRight=S.marginRight),p.push(R),v+=w.height+w.depth}m=Math.min(m,v),y=Math.max(y,v)}var L=Qi(["vlist"],p);L.style.height=yt(y);var C;if(m<0){var P=Qi([],[]),E=Qi(["vlist"],[P]);E.style.height=yt(-m);var N=Qi(["vlist-s"],[new to("")]);C=[Qi(["vlist-r"],[L,N]),Qi(["vlist-r"],[E])]}else C=[Qi(["vlist-r"],[L])];var k=Qi(["vlist-t"],C);return C.length===2&&k.classes.push("vlist-t2"),k.height=y,k.depth=-m,k},rue=(t,e)=>{var r=Qi(["mspace"],[],e),n=Xn(t,e);return r.style.marginRight=yt(n),r},fv=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},UH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},zH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},nue=function(e,r){var[n,a,i]=zH[e],o=new Ru(n),c=new ac([o],{width:yt(a),height:yt(i),style:"width:"+yt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=BH(["overlay"],[c],r);return d.height=i,d.style.height=yt(i),d.style.width=yt(a),d},Ee={fontMap:UH,makeSymbol:yo,mathsym:Gce,makeSpan:Qi,makeSvgSpan:BH,makeLineSpan:Yce,makeAnchor:Zce,makeFragment:$H,wrapFragment:Jce,makeVList:tue,makeOrd:Kce,makeGlue:rue,staticSvg:nue,svgData:zH,tryCombineChars:Xce},Kn={number:3,unit:"mu"},md={number:4,unit:"mu"},Ol={number:5,unit:"mu"},aue={mord:{mop:Kn,mbin:md,mrel:Ol,minner:Kn},mop:{mord:Kn,mop:Kn,mrel:Ol,minner:Kn},mbin:{mord:md,mop:md,mopen:md,minner:md},mrel:{mord:Ol,mop:Ol,mopen:Ol,minner:Ol},mopen:{},mclose:{mop:Kn,mbin:md,mrel:Ol,minner:Kn},mpunct:{mord:Kn,mop:Kn,mrel:Ol,mopen:Kn,mclose:Kn,mpunct:Kn,minner:Kn},minner:{mord:Kn,mop:Kn,mbin:md,mrel:Ol,mopen:Kn,mpunct:Kn,minner:Kn}},iue={mord:{mop:Kn},mop:{mord:Kn,mop:Kn},mbin:{},mrel:{},mopen:{},mclose:{mop:Kn},mpunct:{},minner:{mop:Kn}},VH={},zx={},Vx={};function wt(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)VH[r[d]]=c;e&&(i&&(zx[e]=i),o&&(Vx[e]=o))}function m0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;wt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Fx=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},fa=function(e){return e.type==="ordgroup"?e.body:[e]},ic=Ee.makeSpan,sue=["leftmost","mbin","mopen","mrel","mop","mpunct"],oue=["rightmost","mrel","mclose","mpunct"],lue={display:Ht.DISPLAY,text:Ht.TEXT,script:Ht.SCRIPT,scriptscript:Ht.SCRIPTSCRIPT},cue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},za=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],o=0;o<e.length;o++){var c=Dr(e[o],r);if(c instanceof d1){var d=c.children;i.push(...d)}else i.push(c)}if(Ee.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(lue[p.style]))}var m=ic([a[0]||"leftmost"],[],r),y=ic([a[1]||"rightmost"],[],r),v=n==="root";return ER(i,(_,S)=>{var w=S.classes[0],j=_.classes[0];w==="mbin"&&oue.includes(j)?S.classes[0]="mord":j==="mbin"&&sue.includes(w)&&(_.classes[0]="mord")},{node:m},y,v),ER(i,(_,S)=>{var w=MN(S),j=MN(_),O=w&&j?_.hasClass("mtight")?iue[w][j]:aue[w][j]:null;if(O)return Ee.makeGlue(O,h)},{node:m},y,v),i},ER=function t(e,r,n,a,i){a&&e.push(a);for(var o=0;o<e.length;o++){var c=e[o],d=FH(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),o++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=ic(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),o++})(o)}a&&e.pop()},FH=function(e){return e instanceof d1||e instanceof K7||e instanceof h1&&e.hasClass("enclosing")?e:null},uue=function t(e,r){var n=FH(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},MN=function(e,r){return e?(r&&(e=uue(e,r)),cue[e.classes[0]]||null):null},rg=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return ic(r.concat(n))},Dr=function(e,r,n){if(!e)return ic();if(zx[e.type]){var a=zx[e.type](e,r);if(n&&r.size!==n.size){a=ic(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ct("Got group of unknown type: '"+e.type+"'")};function pv(t,e){var r=ic(["base"],t,e),n=ic(["strut"]);return n.style.height=yt(r.height+r.depth),r.depth&&(n.style.verticalAlign=yt(-r.depth)),r.children.unshift(n),r}function PN(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=za(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],o=[],c=0;c<n.length;c++)if(o.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,o.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(pv(o,e)),o=[])}else n[c].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(pv(o,e)),o=[]),i.push(n[c]));o.length>0&&i.push(pv(o,e));var h;r?(h=pv(za(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=ic(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=yt(p.height+p.depth),p.depth&&(m.style.verticalAlign=yt(-p.depth))}return p}function qH(t){return new d1(t)}class _s{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Iu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof qo&&this.children[n+1]instanceof qo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof qo;)a+=this.children[++n].toText();e.appendChild(new qo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Hr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Hr.escape(Iu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class qo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Hr.escape(this.toText())}toText(){return this.text}}class due{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",yt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+yt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var lt={MathNode:_s,TextNode:qo,SpaceNode:due,newDocumentFragment:qH},ro=function(e,r,n){return Pn[r][e]&&Pn[r][e].replace&&e.charCodeAt(0)!==55349&&!(LH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Pn[r][e].replace),new lt.TextNode(e)},X7=function(e){return e.length===1?e[0]:new lt.MathNode("mrow",e)},Y7=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Pn[a][i]&&Pn[a][i].replace&&(i=Pn[a][i].replace);var o=Ee.fontMap[n].fontName;return W7(i,o,a)?Ee.fontMap[n].variant:null};function l3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof qo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof qo&&r.text===","}else return!1}var ss=function(e,r,n){if(e.length===1){var a=In(e[0],r);return n&&a instanceof _s&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],o,c=0;c<e.length;c++){var d=In(e[c],r);if(d instanceof _s&&o instanceof _s){if(d.type==="mtext"&&o.type==="mtext"&&d.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...d.children);continue}else if(d.type==="mn"&&o.type==="mn"){o.children.push(...d.children);continue}else if(l3(d)&&o.type==="mn"){o.children.push(...d.children);continue}else if(d.type==="mn"&&l3(o))d.children=[...o.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(o.type==="mn"||l3(o))){var h=d.children[0];h instanceof _s&&h.type==="mn"&&(h.children=[...o.children,...h.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var p=o.children[0];if(p instanceof qo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof qo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),o=d}return i},Mu=function(e,r,n){return X7(ss(e,r,n))},In=function(e,r){if(!e)return new lt.MathNode("mrow");if(Vx[e.type]){var n=Vx[e.type](e,r);return n}else throw new ct("Got group of unknown type: '"+e.type+"'")};function jR(t,e,r,n,a){var i=ss(t,r),o;i.length===1&&i[0]instanceof _s&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new lt.MathNode("mrow",i);var c=new lt.MathNode("annotation",[new lt.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new lt.MathNode("semantics",[o,c]),h=new lt.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return Ee.makeSpan([p],[h])}var HH=function(e){return new Dl({style:e.displayMode?Ht.DISPLAY:Ht.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},GH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Ee.makeSpan(n,[e])}return e},hue=function(e,r,n){var a=HH(n),i;if(n.output==="mathml")return jR(e,r,a,n.displayMode,!0);if(n.output==="html"){var o=PN(e,a);i=Ee.makeSpan(["katex"],[o])}else{var c=jR(e,r,a,n.displayMode,!1),d=PN(e,a);i=Ee.makeSpan(["katex"],[c,d])}return GH(i,n)},fue=function(e,r,n){var a=HH(n),i=PN(e,a),o=Ee.makeSpan(["katex"],[i]);return GH(o,n)},pue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mue=function(e){var r=new lt.MathNode("mo",[new lt.TextNode(pue[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},gue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},yue=function(e){return e.type==="ordgroup"?e.body.length:1},vue=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=yue(h.base),m,y,v;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,v=.42,y=d+"4"):(m=312,c=2340,v=.34,y="tilde4");else{var _=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][_],m=[0,239,300,360,420][_],v=[0,.24,.3,.3,.36,.42][_],y=d+_):(c=[0,600,1033,2339,2340][_],m=[0,260,286,306,312][_],v=[0,.26,.286,.3,.306,.34][_],y="tilde"+_)}var S=new Ru(y),w=new ac([S],{width:"100%",height:yt(v),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Ee.makeSvgSpan([],[w],r),minWidth:0,height:v}}else{var j=[],O=gue[d],[R,L,C]=O,P=C/1e3,E=R.length,N,k;if(E===1){var z=O[3];N=["hide-tail"],k=[z]}else if(E===2)N=["halfarrow-left","halfarrow-right"],k=["xMinYMin","xMaxYMin"];else if(E===3)N=["brace-left","brace-center","brace-right"],k=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var D=0;D<E;D++){var B=new Ru(R[D]),$=new ac([B],{width:"400em",height:yt(P),viewBox:"0 0 "+c+" "+C,preserveAspectRatio:k[D]+" slice"}),K=Ee.makeSvgSpan([N[D]],[$],r);if(E===1)return{span:K,minWidth:L,height:P};K.style.height=yt(P),j.push(K)}return{span:Ee.makeSpan(["stretchy"],j,r),minWidth:L,height:P}}}var{span:a,minWidth:i,height:o}=n();return a.height=o,a.style.height=yt(o),i>0&&(a.style.minWidth=yt(i)),a},xue=function(e,r,n,a,i){var o,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(o=Ee.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(o.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new IN({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new IN({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new ac(h,{width:"100%",height:yt(c)});o=Ee.makeSvgSpan([],[p],i)}return o.height=c,o.style.height=yt(c),o},sc={encloseSpan:xue,mathMLnode:mue,svgSpan:vue};function mr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function Z7(t){var e=D2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function D2(t){return t&&(t.type==="atom"||qce.hasOwnProperty(t.type))?t:null}var J7=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=mr(t.base,"accent"),r=n.base,t.base=r,a=Vce(Dr(t,e)),t.base=n):(n=mr(t,"accent"),r=n.base);var i=Dr(r,e.havingCrampedStyle()),o=n.isShifty&&Hr.isCharacterBox(r),c=0;if(o){var d=Hr.getBaseElem(r),h=Dr(d,e.havingCrampedStyle());c=wR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=sc.svgSpan(n,e),y=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+yt(2*c)+")",marginLeft:yt(2*c)}:void 0}]},e);else{var v,_;n.label==="\\vec"?(v=Ee.staticSvg("vec",e),_=Ee.svgData.vec[1]):(v=Ee.makeOrd({mode:n.mode,text:n.label},e,"textord"),v=wR(v),v.italic=0,_=v.width,p&&(m+=v.depth)),y=Ee.makeSpan(["accent-body"],[v]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),m=i.height);var w=c;S||(w-=_/2),y.style.left=yt(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var j=Ee.makeSpan(["mord","accent"],[y],e);return a?(a.children[0]=j,a.height=Math.max(j.height,a.height),a.classes[0]="mord",a):j},WH=(t,e)=>{var r=t.isStretchy?sc.mathMLnode(t.label):new lt.MathNode("mo",[ro(t.label,t.mode)]),n=new lt.MathNode("mover",[In(t.base,e),r]);return n.setAttribute("accent","true"),n},bue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));wt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Fx(e[0]),n=!bue.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:J7,mathmlBuilder:WH});wt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:J7,mathmlBuilder:WH});wt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Dr(t.base,e),n=sc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=Ee.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Ee.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=sc.mathMLnode(t.label),n=new lt.MathNode("munder",[In(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var mv=t=>{var e=new lt.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};wt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=Ee.wrapFragment(Dr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=Ee.wrapFragment(Dr(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var c=sc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(o){var m=-e.fontMetrics().axisHeight+o.height+.5*c.height+.111;p=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:o,shift:m}]},e)}else p=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Ee.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=sc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=mv(In(t.body,e));if(t.below){var i=mv(In(t.below,e));n=new lt.MathNode("munderover",[r,i,a])}else n=new lt.MathNode("mover",[r,a])}else if(t.below){var o=mv(In(t.below,e));n=new lt.MathNode("munder",[r,o])}else n=mv(),n=new lt.MathNode("mover",[r,n]);return n}});var wue=Ee.makeSpan;function KH(t,e){var r=za(t.body,e,!0);return wue([t.mclass],r,e)}function QH(t,e){var r,n=ss(t.body,e);return t.mclass==="minner"?r=new lt.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new lt.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new lt.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}wt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:fa(a),isCharacterBox:Hr.isCharacterBox(a)}},htmlBuilder:KH,mathmlBuilder:QH});var L2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};wt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:L2(e[0]),body:fa(e[1]),isCharacterBox:Hr.isCharacterBox(e[1])}}});wt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],o;n!=="\\stackrel"?o=L2(a):o="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:fa(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[d],isCharacterBox:Hr.isCharacterBox(d)}},htmlBuilder:KH,mathmlBuilder:QH});wt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:L2(e[0]),body:fa(e[0])}},htmlBuilder(t,e){var r=za(t.body,e,!0),n=Ee.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=ss(t.body,e),n=new lt.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Sue={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},kR=()=>({type:"styling",body:[],mode:"math",style:"display"}),CR=t=>t.type==="textord"&&t.text==="@",_ue=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Tue(t,e,r){var n=Sue[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,o,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Nue(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ct("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var o=e[i],c=kR(),d=0;d<o.length;d++)if(!CR(o[d]))c.body.push(o[d]);else{n.push(c),d+=1;var h=Z7(o[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,v=d+1;v<o.length;v++){if(_ue(o[v],h)){y=!1,d=v;break}if(CR(o[v]))throw new ct("Missing a "+h+" character to complete a CD arrow.",o[v]);p[m].body.push(o[v])}if(y)throw new ct("Missing a "+h+" character to complete a CD arrow.",o[d])}else throw new ct('Expected one of "<>AV=|." after @',o[d]);var _=Tue(h,p,t),S={type:"styling",body:[_],mode:"math",style:"display"};n.push(S),c=kR()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}wt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Ee.wrapFragment(Dr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=yt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new lt.MathNode("mrow",[In(t.label,e)]);return r=new lt.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new lt.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});wt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Ee.wrapFragment(Dr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new lt.MathNode("mrow",[In(t.fragment,e)])}});wt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=mr(e[0],"ordgroup"),a=n.body,i="",o=0;o<a.length;o++){var c=mr(a[o],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ct("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ct("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var XH=(t,e)=>{var r=za(t.body,e.withColor(t.color),!1);return Ee.makeFragment(r)},YH=(t,e)=>{var r=ss(t.body,e.withColor(t.color)),n=new lt.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};wt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=mr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:fa(a)}},htmlBuilder:XH,mathmlBuilder:YH});wt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=mr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:XH,mathmlBuilder:YH});wt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&mr(a,"size").value}},htmlBuilder(t,e){var r=Ee.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=yt(Xn(t.size,e)))),r},mathmlBuilder(t,e){var r=new lt.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",yt(Xn(t.size,e)))),r}});var DN={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},ZH=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ct("Expected a control sequence",t);return e},Aue=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},JH=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};wt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(DN[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=DN[n.text]),mr(e.parseFunction(),"internal");throw new ct("Invalid token after macro prefix",n)}});wt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ct("Expected a control sequence",n);for(var i=0,o,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ct('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ct('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ct("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return o&&d.unshift(o),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===DN[r]),{type:"internal",mode:e.mode}}});wt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=ZH(e.gullet.popToken());e.gullet.consumeSpaces();var a=Aue(e);return JH(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});wt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=ZH(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return JH(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var om=function(e,r,n){var a=Pn.math[e]&&Pn.math[e].replace,i=W7(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},eE=function(e,r,n,a){var i=n.havingBaseStyle(r),o=Ee.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return o.height*=c,o.depth*=c,o.maxFontSize=i.sizeMultiplier,o},eG=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=yt(i),e.height-=i,e.depth+=i},Eue=function(e,r,n,a,i,o){var c=Ee.makeSymbol(e,"Main-Regular",i,a),d=eE(c,r,a,o);return n&&eG(d,a,r),d},jue=function(e,r,n,a){return Ee.makeSymbol(e,"Size"+r+"-Regular",n,a)},tG=function(e,r,n,a,i,o){var c=jue(e,r,i,a),d=eE(Ee.makeSpan(["delimsizing","size"+r],[c],a),Ht.TEXT,a,o);return n&&eG(d,a,Ht.TEXT),d},c3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=Ee.makeSpan(["delimsizinginner",a],[Ee.makeSpan([],[Ee.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},u3=function(e,r,n){var a=Fo["Size4-Regular"][e.charCodeAt(0)]?Fo["Size4-Regular"][e.charCodeAt(0)][4]:Fo["Size1-Regular"][e.charCodeAt(0)][4],i=new Ru("inner",Rce(e,Math.round(1e3*r))),o=new ac([i],{width:yt(a),height:yt(r),style:"width:"+yt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Ee.makeSvgSpan([],[o],n);return c.height=r,c.style.height=yt(r),c.style.width=yt(a),{type:"elem",elem:c}},LN=.008,gv={type:"kern",size:-1*LN},kue=["|","\\lvert","\\rvert","\\vert"],Cue=["\\|","\\lVert","\\rVert","\\Vert"],rG=function(e,r,n,a,i,o){var c,d,h,p,m="",y=0;c=h=p=e,d=null;var v="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):kue.includes(e)?(h="",m="vert",y=333):Cue.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",h="",p="",v="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",v="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=c="",p="",v="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(c="",h=p="",v="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=c="",p="",v="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(c="",h=p="",v="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(c="",h="",p="",v="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(c="",h="",p="",v="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",v="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",v="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",v="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",v="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",v="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",v="Size4-Regular");var _=om(c,v,i),S=_.height+_.depth,w=om(h,v,i),j=w.height+w.depth,O=om(p,v,i),R=O.height+O.depth,L=0,C=1;if(d!==null){var P=om(d,v,i);L=P.height+P.depth,C=2}var E=S+R+L,N=Math.max(0,Math.ceil((r-E)/(C*j))),k=E+N*C*j,z=a.fontMetrics().axisHeight;n&&(z*=a.sizeMultiplier);var D=k/2-z,B=[];if(m.length>0){var $=k-S-R,K=Math.round(k*1e3),W=Mce(m,Math.round($*1e3)),H=new Ru(m,W),J=(y/1e3).toFixed(3)+"em",ie=(K/1e3).toFixed(3)+"em",he=new ac([H],{width:J,height:ie,viewBox:"0 0 "+y+" "+K}),pe=Ee.makeSvgSpan([],[he],a);pe.height=K/1e3,pe.style.width=J,pe.style.height=ie,B.push({type:"elem",elem:pe})}else{if(B.push(c3(p,v,i)),B.push(gv),d===null){var Z=k-S-R+2*LN;B.push(u3(h,Z,a))}else{var ne=(k-S-R-L)/2+2*LN;B.push(u3(h,ne,a)),B.push(gv),B.push(c3(d,v,i)),B.push(gv),B.push(u3(h,ne,a))}B.push(gv),B.push(c3(c,v,i))}var ae=a.havingBaseStyle(Ht.TEXT),xe=Ee.makeVList({positionType:"bottom",positionData:D,children:B},ae);return eE(Ee.makeSpan(["delimsizing","mult"],[xe],ae),Ht.TEXT,a,o)},d3=80,h3=.08,f3=function(e,r,n,a,i){var o=Ice(e,a,n),c=new Ru(e,o),d=new ac([c],{width:"400em",height:yt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ee.makeSvgSpan(["hide-tail"],[d],i)},Oue=function(e,r){var n=r.havingBaseSizing(),a=sG("\\surd",e*n.sizeMultiplier,iG,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*o+d3,e<1?i=1:e<1.4&&(i=.7),d=(1+o+h3)/i,h=(1+o)/i,c=f3("sqrtMain",d,p,o,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+d3)*wm[a.size],h=(wm[a.size]+o)/i,d=(wm[a.size]+o+h3)/i,c=f3("sqrtSize"+a.size,d,p,o,r),c.style.minWidth="1.02em",m=1/i):(d=e+o+h3,h=e+o,p=Math.floor(1e3*e+o)+d3,c=f3("sqrtTall",d,p,o,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=yt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},nG=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Iue=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],aG=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],wm=[0,1.2,1.8,2.4,3],Rue=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),nG.includes(e)||aG.includes(e))return tG(e,r,!1,n,a,i);if(Iue.includes(e))return rG(e,wm[r],!1,n,a,i);throw new ct("Illegal delimiter: '"+e+"'")},Mue=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Pue=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"stack"}],iG=[{type:"small",style:Ht.SCRIPTSCRIPT},{type:"small",style:Ht.SCRIPT},{type:"small",style:Ht.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Due=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},sG=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var c=om(e,Due(n[o]),"math"),d=c.height+c.depth;if(n[o].type==="small"){var h=a.havingBaseStyle(n[o].style);d*=h.sizeMultiplier}if(d>r)return n[o]}return n[n.length-1]},oG=function(e,r,n,a,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;aG.includes(e)?c=Mue:nG.includes(e)?c=iG:c=Pue;var d=sG(e,r,c,a);return d.type==="small"?Eue(e,d.style,n,a,i,o):d.type==="large"?tG(e,d.size,n,a,i,o):rG(e,r,n,a,i,o)},Lue=function(e,r,n,a,i,o){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return oG(e,m,!0,a,i,o)},Ql={sqrtImage:Oue,sizedDelim:Rue,sizeToMaxHeight:wm,customSizedDelim:oG,leftRightDelim:Lue},OR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Bue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function B2(t,e){var r=D2(t);if(r&&Bue.includes(r.text))return r;throw r?new ct("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ct("Invalid delimiter type '"+t.type+"'",t)}wt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=B2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:OR[t.funcName].size,mclass:OR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Ee.makeSpan([t.mclass]):Ql.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(ro(t.delim,t.mode));var r=new lt.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=yt(Ql.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function IR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}wt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ct("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:B2(e[0],t).text,color:r}}});wt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=B2(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=mr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{IR(t);for(var r=za(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),a=Math.max(r[o].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=rg(e,["mopen"]):c=Ql.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Ql.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=rg(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=Ql.leftRightDelim(t.right,n,a,y,t.mode,["mclose"])}return r.push(m),Ee.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{IR(t);var r=ss(t.body,e);if(t.left!=="."){var n=new lt.MathNode("mo",[ro(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new lt.MathNode("mo",[ro(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return X7(r)}});wt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=B2(e[0],t);if(!t.parser.leftrightDepth)throw new ct("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=rg(e,[]);else{r=Ql.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?ro("|","text"):ro(t.delim,t.mode),n=new lt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var tE=(t,e)=>{var r=Ee.wrapFragment(Dr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,o=0,c=Hr.isCharacterBox(t.body);if(n==="sout")i=Ee.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Xn({number:.6,unit:"pt"},e),h=Xn({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=yt(m/2+d);var y=Math.floor(1e3*m*a),v=Cce(y),_=new ac([new Ru("phase",v)],{width:"400em",height:yt(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});i=Ee.makeSvgSpan(["hide-tail"],[_],e),i.style.height=yt(m),o=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,j=0;/box/.test(n)?(j=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:j),w=S):n==="angl"?(j=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*j,w=Math.max(0,.25-r.depth)):(S=c?.2:0,w=S),i=sc.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=yt(j)):n==="angl"&&j!==.049&&(i.style.borderTopWidth=yt(j),i.style.borderRightWidth=yt(j)),o=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var O;if(t.backgroundColor)O=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var R=/cancel|phase/.test(n)?["svg-align"]:[];O=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:R}]},e)}return/cancel/.test(n)&&(O.height=r.height,O.depth=r.depth),/cancel/.test(n)&&!c?Ee.makeSpan(["mord","cancel-lap"],[O],e):Ee.makeSpan(["mord"],[O],e)},rE=(t,e)=>{var r=0,n=new lt.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[In(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};wt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=mr(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:o}},htmlBuilder:tE,mathmlBuilder:rE});wt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=mr(e[0],"color-token").color,o=mr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:o,borderColor:i,body:c}},htmlBuilder:tE,mathmlBuilder:rE});wt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});wt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:tE,mathmlBuilder:rE});wt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var lG={};function al(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:o}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)lG[r[d]]=c;i&&(zx[e]=i),o&&(Vx[e]=o)}var cG={};function Y(t,e){cG[t]=e}function RR(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var $2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ct("{"+t.envName+"} can be used only in display mode.")};function nE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function $u(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:o,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var v=t.gullet.expandMacroAsText("\\arraystretch");if(v==null)o=1;else if(o=parseFloat(v),!o||o<0)throw new ct("Invalid \\arraystretch: "+v)}t.gullet.beginGroup();var _=[],S=[_],w=[],j=[],O=d!=null?[]:void 0;function R(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){O&&(t.gullet.macros.get("\\df@tag")?(O.push(t.subparse([new js("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):O.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(R(),j.push(RR(t));;){var C=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),C={type:"ordgroup",mode:t.mode,body:C},r&&(C={type:"styling",mode:t.mode,style:r,body:[C]}),_.push(C);var P=t.fetch().text;if(P==="&"){if(m&&_.length===m){if(h||c)throw new ct("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(P==="\\end"){L(),_.length===1&&C.type==="styling"&&C.body[0].body.length===0&&(S.length>1||!p)&&S.pop(),j.length<S.length+1&&j.push([]);break}else if(P==="\\\\"){t.consume();var E=void 0;t.gullet.future().text!==" "&&(E=t.parseSizeGroup(!0)),w.push(E?E.value:null),L(),j.push(RR(t)),_=[],S.push(_),R()}else throw new ct("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:o,body:S,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:j,colSeparationType:c,tags:O,leqno:y}}function aE(t){return t.slice(0,1)==="d"?"display":"text"}var il=function(e,r){var n,a,i=e.body.length,o=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var v=r.havingStyle(Ht.SCRIPT).sizeMultiplier;y=.2778*(v/r.sizeMultiplier)}var _=e.colSeparationType==="CD"?Xn({number:3,unit:"ex"},r):12*m,S=3*m,w=e.arraystretch*_,j=.7*w,O=.3*w,R=0;function L(Me){for(var tt=0;tt<Me.length;++tt)tt>0&&(R+=.25),h.push({pos:R,isDashed:Me[tt]})}for(L(o[0]),n=0;n<e.body.length;++n){var C=e.body[n],P=j,E=O;c<C.length&&(c=C.length);var N=new Array(C.length);for(a=0;a<C.length;++a){var k=Dr(C[a],r);E<k.depth&&(E=k.depth),P<k.height&&(P=k.height),N[a]=k}var z=e.rowGaps[n],D=0;z&&(D=Xn(z,r),D>0&&(D+=O,E<D&&(E=D),D=0)),e.addJot&&(E+=S),N.height=P,N.depth=E,R+=P,N.pos=R,R+=E+D,d[n]=N,L(o[n+1])}var B=R/2+r.fontMetrics().axisHeight,$=e.cols||[],K=[],W,H,J=[];if(e.tags&&e.tags.some(Me=>Me))for(n=0;n<i;++n){var ie=d[n],he=ie.pos-B,pe=e.tags[n],Z=void 0;pe===!0?Z=Ee.makeSpan(["eqn-num"],[],r):pe===!1?Z=Ee.makeSpan([],[],r):Z=Ee.makeSpan([],za(pe,r,!0),r),Z.depth=ie.depth,Z.height=ie.height,J.push({type:"elem",elem:Z,shift:he})}for(a=0,H=0;a<c||H<$.length;++a,++H){for(var ne=$[H]||{},ae=!0;ne.type==="separator";){if(ae||(W=Ee.makeSpan(["arraycolsep"],[]),W.style.width=yt(r.fontMetrics().doubleRuleSep),K.push(W)),ne.separator==="|"||ne.separator===":"){var xe=ne.separator==="|"?"solid":"dashed",Oe=Ee.makeSpan(["vertical-separator"],[],r);Oe.style.height=yt(R),Oe.style.borderRightWidth=yt(p),Oe.style.borderRightStyle=xe,Oe.style.margin="0 "+yt(-p/2);var Ue=R-B;Ue&&(Oe.style.verticalAlign=yt(-Ue)),K.push(Oe)}else throw new ct("Invalid separator type: "+ne.separator);H++,ne=$[H]||{},ae=!1}if(!(a>=c)){var Xe=void 0;(a>0||e.hskipBeforeAndAfter)&&(Xe=Hr.deflt(ne.pregap,y),Xe!==0&&(W=Ee.makeSpan(["arraycolsep"],[]),W.style.width=yt(Xe),K.push(W)));var Ye=[];for(n=0;n<i;++n){var Q=d[n],me=Q[a];if(me){var te=Q.pos-B;me.depth=Q.depth,me.height=Q.height,Ye.push({type:"elem",elem:me,shift:te})}}Ye=Ee.makeVList({positionType:"individualShift",children:Ye},r),Ye=Ee.makeSpan(["col-align-"+(ne.align||"c")],[Ye]),K.push(Ye),(a<c-1||e.hskipBeforeAndAfter)&&(Xe=Hr.deflt(ne.postgap,y),Xe!==0&&(W=Ee.makeSpan(["arraycolsep"],[]),W.style.width=yt(Xe),K.push(W)))}}if(d=Ee.makeSpan(["mtable"],K),h.length>0){for(var re=Ee.makeLineSpan("hline",r,p),Pe=Ee.makeLineSpan("hdashline",r,p),Ge=[{type:"elem",elem:d,shift:0}];h.length>0;){var it=h.pop(),et=it.pos-B;it.isDashed?Ge.push({type:"elem",elem:Pe,shift:et}):Ge.push({type:"elem",elem:re,shift:et})}d=Ee.makeVList({positionType:"individualShift",children:Ge},r)}if(J.length===0)return Ee.makeSpan(["mord"],[d],r);var Pt=Ee.makeVList({positionType:"individualShift",children:J},r);return Pt=Ee.makeSpan(["tag"],[Pt],r),Ee.makeFragment([d,Pt])},$ue={c:"center ",l:"left ",r:"right "},sl=function(e,r){for(var n=[],a=new lt.MathNode("mtd",[],["mtr-glue"]),i=new lt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var c=e.body[o],d=[],h=0;h<c.length;h++)d.push(new lt.MathNode("mtd",[In(c[h],r)]));e.tags&&e.tags[o]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new lt.MathNode("mtr",d))}var p=new lt.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",yt(m));var y="",v="";if(e.cols&&e.cols.length>0){var _=e.cols,S="",w=!1,j=0,O=_.length;_[0].type==="separator"&&(y+="top ",j=1),_[_.length-1].type==="separator"&&(y+="bottom ",O-=1);for(var R=j;R<O;R++)_[R].type==="align"?(v+=$ue[_[R].align],w&&(S+="none "),w=!0):_[R].type==="separator"&&w&&(S+=_[R].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",v.trim()),/[sd]/.test(S)&&p.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],C="",P=1;P<L.length;P++)C+=P%2?"0em ":"1em ";p.setAttribute("columnspacing",C.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var E="",N=e.hLinesBeforeRow;y+=N[0].length>0?"left ":"",y+=N[N.length-1].length>0?"right ":"";for(var k=1;k<N.length-1;k++)E+=N[k].length===0?"none ":N[k][0]?"dashed ":"solid ";return/[sd]/.test(E)&&p.setAttribute("rowlines",E.trim()),y!==""&&(p=new lt.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new lt.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},uG=function(e,r){e.envName.indexOf("ed")===-1&&$2(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=$u(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:nE(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=mr(r[0].body[m],"textord");p+=y.text}c=Number(p),d=c*2}var v=!d;o.body.forEach(function(j){for(var O=1;O<j.length;O+=2){var R=mr(j[O],"styling"),L=mr(R.body[0],"ordgroup");L.body.unshift(h)}if(v)d<j.length&&(d=j.length);else{var C=j.length/2;if(c<C)throw new ct("Too many math in a row: "+("expected "+c+", but got "+C),j[0])}});for(var _=0;_<d;++_){var S="r",w=0;_%2===1?S="l":_>0&&v&&(w=1),n[_]={type:"align",align:S,pregap:w,postgap:0}}return o.colSeparationType=v?"align":"alignat",o};al({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=D2(e[0]),n=r?[e[0]]:mr(e[0],"ordgroup").body,a=n.map(function(o){var c=Z7(o),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ct("Unknown column alignment: "+d,o)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return $u(t.parser,i,aE(t.envName))},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ct("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=$u(t.parser,n,aE(t.envName)),o=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=$u(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=D2(e[0]),n=r?[e[0]]:mr(e[0],"ordgroup").body,a=n.map(function(o){var c=Z7(o),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ct("Unknown column alignment: "+d,o)});if(a.length>1)throw new ct("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=$u(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ct("{subarray} can contain only one column");return i},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=$u(t.parser,e,aE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:uG,htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&$2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:nE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return $u(t.parser,e,"display")},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:uG,htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){$2(t);var e={autoTag:nE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return $u(t.parser,e,"display")},htmlBuilder:il,mathmlBuilder:sl});al({type:"array",names:["CD"],props:{numArgs:0},handler(t){return $2(t),Nue(t.parser)},htmlBuilder:il,mathmlBuilder:sl});Y("\\nonumber","\\gdef\\@eqnsw{0}");Y("\\notag","\\nonumber");wt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ct(t.funcName+" valid only within array environment")}});var MR=lG;wt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ct("Invalid environment name",a);for(var i="",o=0;o<a.body.length;++o)i+=mr(a.body[o],"textord").text;if(n==="\\begin"){if(!MR.hasOwnProperty(i))throw new ct("No such environment: "+i,a);var c=MR[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,v=mr(r.parseFunction(),"environment");if(v.name!==i)throw new ct("Mismatch: \\begin{"+i+"} matched by \\end{"+v.name+"}",y);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var dG=(t,e)=>{var r=t.font,n=e.withFont(r);return Dr(t.body,n)},hG=(t,e)=>{var r=t.font,n=e.withFont(r);return In(t.body,n)},PR={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};wt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=Fx(e[0]),i=n;return i in PR&&(i=PR[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:dG,mathmlBuilder:hG});wt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Hr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:L2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});wt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,o=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:dG,mathmlBuilder:hG});var fG=(t,e)=>{var r=e;return t==="display"?r=r.id>=Ht.SCRIPT.id?r.text():Ht.DISPLAY:t==="text"&&r.size===Ht.DISPLAY.size?r=Ht.TEXT:t==="script"?r=Ht.SCRIPT:t==="scriptscript"&&(r=Ht.SCRIPTSCRIPT),r},iE=(t,e)=>{var r=fG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var o=Dr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;o.height=o.height<c?c:o.height,o.depth=o.depth<d?d:o.depth}i=e.havingStyle(a);var h=Dr(t.denom,i,e),p,m,y;t.hasBarLine?(t.barSize?(m=Xn(t.barSize,e),p=Ee.makeLineSpan("frac-line",e,m)):p=Ee.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var v,_,S;r.size===Ht.DISPLAY.size||t.size==="display"?(v=e.fontMetrics().num1,m>0?_=3*y:_=7*y,S=e.fontMetrics().denom1):(m>0?(v=e.fontMetrics().num2,_=y):(v=e.fontMetrics().num3,_=3*y),S=e.fontMetrics().denom2);var w;if(p){var O=e.fontMetrics().axisHeight;v-o.depth-(O+.5*m)<_&&(v+=_-(v-o.depth-(O+.5*m))),O-.5*m-(h.height-S)<_&&(S+=_-(O-.5*m-(h.height-S)));var R=-(O-.5*m);w=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:p,shift:R},{type:"elem",elem:o,shift:-v}]},e)}else{var j=v-o.depth-(h.height-S);j<_&&(v+=.5*(_-j),S+=.5*(_-j)),w=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:o,shift:-v}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Ht.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Ht.SCRIPTSCRIPT.size?L=e.havingStyle(Ht.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var C,P;return t.leftDelim==null?C=rg(e,["mopen"]):C=Ql.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?P=Ee.makeSpan([]):t.rightDelim==null?P=rg(e,["mclose"]):P=Ql.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),Ee.makeSpan(["mord"].concat(i.sizingClasses(e)),[C,Ee.makeSpan(["mfrac"],[w]),P],e)},sE=(t,e)=>{var r=new lt.MathNode("mfrac",[In(t.numer,e),In(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Xn(t.barSize,e);r.setAttribute("linethickness",yt(n))}var a=fG(t.size,e.style);if(a.size!==e.style.size){r=new lt.MathNode("mstyle",[r]);var i=a.size===Ht.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var c=new lt.MathNode("mo",[new lt.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}if(o.push(r),t.rightDelim!=null){var d=new lt.MathNode("mo",[new lt.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),o.push(d)}return X7(o)}return r};wt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],o,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,c="(",d=")";break;case"\\\\bracefrac":o=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":o=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:o,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:iE,mathmlBuilder:sE});wt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});wt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var DR=["display","text","script","scriptscript"],LR=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};wt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=Fx(e[0]),o=i.type==="atom"&&i.family==="open"?LR(i.text):null,c=Fx(e[1]),d=c.type==="atom"&&c.family==="close"?LR(c.text):null,h=mr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",v=e[3];if(v.type==="ordgroup"){if(v.body.length>0){var _=mr(v.body[0],"textord");y=DR[Number(_.text)]}}else v=mr(v,"textord"),y=DR[Number(v.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:o,rightDelim:d,size:y}},htmlBuilder:iE,mathmlBuilder:sE});wt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:mr(e[0],"size").value,token:a}}});wt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=mce(mr(e[1],"infix").size),o=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:o,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:iE,mathmlBuilder:sE});var pG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Dr(t.sup,e.havingStyle(r.sup()),e):Dr(t.sub,e.havingStyle(r.sub()),e),a=mr(t.base,"horizBrace")):a=mr(t,"horizBrace");var i=Dr(a.base,e.havingBaseStyle(Ht.DISPLAY)),o=sc.svgSpan(a,e),c;if(a.isOver?(c=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Ee.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Ee.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Ee.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Ee.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},Uue=(t,e)=>{var r=sc.mathMLnode(t.label);return new lt.MathNode(t.isOver?"mover":"munder",[In(t.base,e),r])};wt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:pG,mathmlBuilder:Uue});wt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=mr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:fa(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=za(t.body,e,!1);return Ee.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=Mu(t.body,e);return r instanceof _s||(r=new _s("mrow",[r])),r.setAttribute("href",t.href),r}});wt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=mr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),a.push({type:"textord",mode:"text",text:o})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:fa(c)}}});wt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:fa(e[0])}},htmlBuilder(t,e){var r=za(t.body,e,!1);return Ee.makeFragment(r)},mathmlBuilder(t,e){return new lt.MathNode("mrow",ss(t.body,e))}});wt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=mr(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new ct("\\htmlData key/value '"+m+"' missing equals sign");var v=m.slice(0,y),_=m.slice(y+1);d["data-"+v.trim()]=_}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:fa(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=za(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=Ee.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>Mu(t.body,e)});wt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:fa(e[0]),mathml:fa(e[1])}},htmlBuilder:(t,e)=>{var r=za(t.html,e,!1);return Ee.makeFragment(r)},mathmlBuilder:(t,e)=>Mu(t.mathml,e)});var p3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ct("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!RH(n))throw new ct("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};wt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},c="";if(r[0])for(var d=mr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":c=y;break;case"width":a=p3(y);break;case"height":i=p3(y);break;case"totalheight":o=p3(y);break;default:throw new ct("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var v=mr(e[0],"url").url;return c===""&&(c=v,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:o,src:v}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Xn(t.height,e),n=0;t.totalheight.number>0&&(n=Xn(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=Xn(t.width,e));var i={height:yt(r+n)};a>0&&(i.width=yt(a)),n>0&&(i.verticalAlign=yt(-n));var o=new Uce(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new lt.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Xn(t.height,e),a=0;if(t.totalheight.number>0&&(a=Xn(t.totalheight,e)-n,r.setAttribute("valign",yt(-a))),r.setAttribute("height",yt(n+a)),t.width.number>0){var i=Xn(t.width,e);r.setAttribute("width",yt(i))}return r.setAttribute("src",t.src),r}});wt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=mr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=a.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return Ee.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Xn(t.dimension,e);return new lt.SpaceNode(r)}});wt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Ee.makeSpan([],[Dr(t.body,e)]),r=Ee.makeSpan(["inner"],[r],e)):r=Ee.makeSpan(["inner"],[Dr(t.body,e)]);var n=Ee.makeSpan(["fix"],[]),a=Ee.makeSpan([t.alignment],[r,n],e),i=Ee.makeSpan(["strut"]);return i.style.height=yt(a.height+a.depth),a.depth&&(i.style.verticalAlign=yt(-a.depth)),a.children.unshift(i),a=Ee.makeSpan(["thinbox"],[a],e),Ee.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new lt.MathNode("mpadded",[In(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});wt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:o}}});wt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ct("Mismatched "+t.funcName)}});var BR=(t,e)=>{switch(e.style.size){case Ht.DISPLAY.size:return t.display;case Ht.TEXT.size:return t.text;case Ht.SCRIPT.size:return t.script;case Ht.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};wt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:fa(e[0]),text:fa(e[1]),script:fa(e[2]),scriptscript:fa(e[3])}},htmlBuilder:(t,e)=>{var r=BR(t,e),n=za(r,e,!1);return Ee.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=BR(t,e);return Mu(r,e)}});var mG=(t,e,r,n,a,i,o)=>{t=Ee.makeSpan([],[t]);var c=r&&Hr.isCharacterBox(r),d,h;if(e){var p=Dr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Dr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var v=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+o;y=Ee.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:yt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:yt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var _=t.height-o;y=Ee.makeVList({positionType:"top",positionData:_,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:yt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var S=t.depth+o;y=Ee.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:yt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&i!==0&&!c){var j=Ee.makeSpan(["mspace"],[],n);j.style.marginRight=yt(i),w.unshift(j)}return Ee.makeSpan(["mop","op-limits"],w,n)},gG=["\\smallint"],Mf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=mr(t.base,"op"),a=!0):i=mr(t,"op");var o=e.style,c=!1;o.size===Ht.DISPLAY.size&&i.symbol&&!gG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=Ee.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,y=Ee.staticSvg(p+"Size"+(c?"2":"1"),e);d=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var v=za(i.body,e,!0);v.length===1&&v[0]instanceof to?(d=v[0],d.classes[0]="mop"):d=Ee.makeSpan(["mop"],v,e)}else{for(var _=[],S=1;S<i.name.length;S++)_.push(Ee.mathsym(i.name[S],i.mode,e));d=Ee.makeSpan(["mop"],_,e)}var w=0,j=0;return(d instanceof to||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,j=d.italic),a?mG(d,r,n,e,o,j,w):(w&&(d.style.position="relative",d.style.top=yt(w)),d)},f1=(t,e)=>{var r;if(t.symbol)r=new _s("mo",[ro(t.name,t.mode)]),gG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new _s("mo",ss(t.body,e));else{r=new _s("mi",[new qo(t.name.slice(1))]);var n=new _s("mo",[ro("","text")]);t.parentIsSupSub?r=new _s("mrow",[r,n]):r=qH([r,n])}return r},zue={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};wt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=zue[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Mf,mathmlBuilder:f1});wt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:fa(n)}},htmlBuilder:Mf,mathmlBuilder:f1});var Vue={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};wt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Mf,mathmlBuilder:f1});wt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Mf,mathmlBuilder:f1});wt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Vue[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Mf,mathmlBuilder:f1});var yG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=mr(t.base,"operatorname"),a=!0):i=mr(t,"operatorname");var o;if(i.body.length>0){for(var c=i.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=za(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof to&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=Ee.makeSpan(["mop"],d,e)}else o=Ee.makeSpan(["mop"],[],e);return a?mG(o,r,n,e,e.style,0,0):o},Fue=(t,e)=>{for(var r=ss(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof lt.SpaceNode))if(i instanceof lt.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof lt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new lt.TextNode(c)]}var d=new lt.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new lt.MathNode("mo",[ro("","text")]);return t.parentIsSupSub?new lt.MathNode("mrow",[d,h]):lt.newDocumentFragment([d,h])};wt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:fa(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:yG,mathmlBuilder:Fue});Y("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");m0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Ee.makeFragment(za(t.body,e,!1)):Ee.makeSpan(["mord"],za(t.body,e,!0),e)},mathmlBuilder(t,e){return Mu(t.body,e,!0)}});wt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Dr(t.body,e.havingCrampedStyle()),n=Ee.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return Ee.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new lt.MathNode("mo",[new lt.TextNode("")]);r.setAttribute("stretchy","true");var n=new lt.MathNode("mover",[In(t.body,e),r]);return n.setAttribute("accent","true"),n}});wt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:fa(n)}},htmlBuilder:(t,e)=>{var r=za(t.body,e.withPhantom(),!1);return Ee.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=ss(t.body,e);return new lt.MathNode("mphantom",r)}});wt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ee.makeSpan([],[Dr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Ee.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=ss(fa(t.body),e),n=new lt.MathNode("mphantom",r),a=new lt.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});wt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ee.makeSpan(["inner"],[Dr(t.body,e.withPhantom())]),n=Ee.makeSpan(["fix"],[]);return Ee.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=ss(fa(t.body),e),n=new lt.MathNode("mphantom",r),a=new lt.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});wt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=mr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Dr(t.body,e),n=Xn(t.dy,e);return Ee.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new lt.MathNode("mpadded",[In(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});wt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});wt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=mr(e[0],"size"),o=mr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&mr(a,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=Ee.makeSpan(["mord","rule"],[],e),n=Xn(t.width,e),a=Xn(t.height,e),i=t.shift?Xn(t.shift,e):0;return r.style.borderRightWidth=yt(n),r.style.borderTopWidth=yt(a),r.style.bottom=yt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Xn(t.width,e),n=Xn(t.height,e),a=t.shift?Xn(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new lt.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",yt(r)),o.setAttribute("height",yt(n));var c=new lt.MathNode("mpadded",[o]);return a>=0?c.setAttribute("height",yt(a)):(c.setAttribute("height",yt(a)),c.setAttribute("depth",yt(-a))),c.setAttribute("voffset",yt(a)),c}});function vG(t,e,r){for(var n=za(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Ee.makeFragment(n)}var $R=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],que=(t,e)=>{var r=e.havingSize(t.size);return vG(t.body,r,e)};wt({type:"sizing",names:$R,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:$R.indexOf(n)+1,body:i}},htmlBuilder:que,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=ss(t.body,r),a=new lt.MathNode("mstyle",n);return a.setAttribute("mathsize",yt(r.sizeMultiplier)),a}});wt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,o=r[0]&&mr(r[0],"ordgroup");if(o)for(var c="",d=0;d<o.body.length;++d){var h=o.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=Ee.makeSpan([],[Dr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Ee.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new lt.MathNode("mpadded",[In(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});wt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Dr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Ee.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Ht.TEXT.id&&(i=e.fontMetrics().xHeight);var o=a+i/4,c=r.height+r.depth+o+a,{span:d,ruleWidth:h,advanceWidth:p}=Ql.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+o&&(o=(o+m-r.height-r.depth)/2);var y=d.height-r.height-o-h;r.style.paddingLeft=yt(p);var v=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var _=e.havingStyle(Ht.SCRIPTSCRIPT),S=Dr(t.index,_,e),w=.6*(v.height-v.depth),j=Ee.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),O=Ee.makeSpan(["root"],[j]);return Ee.makeSpan(["mord","sqrt"],[O,v],e)}else return Ee.makeSpan(["mord","sqrt"],[v],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new lt.MathNode("mroot",[In(r,e),In(n,e)]):new lt.MathNode("msqrt",[In(r,e)])}});var UR={display:Ht.DISPLAY,text:Ht.TEXT,script:Ht.SCRIPT,scriptscript:Ht.SCRIPTSCRIPT};wt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:o,body:i}},htmlBuilder(t,e){var r=UR[t.style],n=e.havingStyle(r).withFont("");return vG(t.body,n,e)},mathmlBuilder(t,e){var r=UR[t.style],n=e.havingStyle(r),a=ss(t.body,n),i=new lt.MathNode("mstyle",a),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=o[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var Hue=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Ht.DISPLAY.size||n.alwaysHandleSupSub);return a?Mf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Ht.DISPLAY.size||n.limits);return i?yG:null}else{if(n.type==="accent")return Hr.isCharacterBox(n.base)?J7:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?pG:null}else return null}else return null};m0({type:"supsub",htmlBuilder(t,e){var r=Hue(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,o=Dr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,y=n&&Hr.isCharacterBox(n);if(a){var v=e.havingStyle(e.style.sup());c=Dr(a,v,e),y||(p=o.height-v.fontMetrics().supDrop*v.sizeMultiplier/e.sizeMultiplier)}if(i){var _=e.havingStyle(e.style.sub());d=Dr(i,_,e),y||(m=o.depth+_.fontMetrics().subDrop*_.sizeMultiplier/e.sizeMultiplier)}var S;e.style===Ht.DISPLAY?S=h.sup1:e.style.cramped?S=h.sup3:S=h.sup2;var w=e.sizeMultiplier,j=yt(.5/h.ptPerEm/w),O=null;if(d){var R=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof to||R)&&(O=yt(-o.italic))}var L;if(c&&d){p=Math.max(p,S,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var C=h.defaultRuleThickness,P=4*C;if(p-c.depth-(d.height-m)<P){m=P-(p-c.depth)+d.height;var E=.8*h.xHeight-(p-c.depth);E>0&&(p+=E,m-=E)}var N=[{type:"elem",elem:d,shift:m,marginRight:j,marginLeft:O},{type:"elem",elem:c,shift:-p,marginRight:j}];L=Ee.makeVList({positionType:"individualShift",children:N},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var k=[{type:"elem",elem:d,marginLeft:O,marginRight:j}];L=Ee.makeVList({positionType:"shift",positionData:m,children:k},e)}else if(c)p=Math.max(p,S,c.depth+.25*h.xHeight),L=Ee.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:j}]},e);else throw new Error("supsub must have either sup or sub.");var z=MN(o,"right")||"mord";return Ee.makeSpan([z],[o,Ee.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[In(t.base,e)];t.sub&&i.push(In(t.sub,e)),t.sup&&i.push(In(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Ht.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Ht.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Ht.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Ht.DISPLAY)?o="munder":o="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Ht.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Ht.DISPLAY)?o="mover":o="msup"}return new lt.MathNode(o,i)}});m0({type:"atom",htmlBuilder(t,e){return Ee.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new lt.MathNode("mo",[ro(t.text,t.mode)]);if(t.family==="bin"){var n=Y7(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var xG={mi:"italic",mn:"normal",mtext:"normal"};m0({type:"mathord",htmlBuilder(t,e){return Ee.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new lt.MathNode("mi",[ro(t.text,t.mode,e)]),n=Y7(t,e)||"italic";return n!==xG[r.type]&&r.setAttribute("mathvariant",n),r}});m0({type:"textord",htmlBuilder(t,e){return Ee.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=ro(t.text,t.mode,e),n=Y7(t,e)||"normal",a;return t.mode==="text"?a=new lt.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new lt.MathNode("mn",[r]):t.text==="\\prime"?a=new lt.MathNode("mo",[r]):a=new lt.MathNode("mi",[r]),n!==xG[a.type]&&a.setAttribute("mathvariant",n),a}});var m3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},g3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};m0({type:"spacing",htmlBuilder(t,e){if(g3.hasOwnProperty(t.text)){var r=g3[t.text].className||"";if(t.mode==="text"){var n=Ee.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Ee.makeSpan(["mspace",r],[Ee.mathsym(t.text,t.mode,e)],e)}else{if(m3.hasOwnProperty(t.text))return Ee.makeSpan(["mspace",m3[t.text]],[],e);throw new ct('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(g3.hasOwnProperty(t.text))r=new lt.MathNode("mtext",[new lt.TextNode("")]);else{if(m3.hasOwnProperty(t.text))return new lt.MathNode("mspace");throw new ct('Unknown type of space "'+t.text+'"')}return r}});var zR=()=>{var t=new lt.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};m0({type:"tag",mathmlBuilder(t,e){var r=new lt.MathNode("mtable",[new lt.MathNode("mtr",[zR(),new lt.MathNode("mtd",[Mu(t.body,e)]),zR(),new lt.MathNode("mtd",[Mu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var VR={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},FR={"\\textbf":"textbf","\\textmd":"textmd"},Gue={"\\textit":"textit","\\textup":"textup"},qR=(t,e)=>{var r=t.font;if(r){if(VR[r])return e.withTextFontFamily(VR[r]);if(FR[r])return e.withTextFontWeight(FR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Gue[r])};wt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:fa(a),font:n}},htmlBuilder(t,e){var r=qR(t,e),n=za(t.body,r,!0);return Ee.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=qR(t,e);return Mu(t.body,r)}});wt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Dr(t.body,e),n=Ee.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ee.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return Ee.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new lt.MathNode("mo",[new lt.TextNode("")]);r.setAttribute("stretchy","true");var n=new lt.MathNode("munder",[In(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});wt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Dr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return Ee.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new lt.MathNode("mpadded",[In(t.body,e)],["vcenter"])}});wt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ct("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=HR(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(Ee.makeSymbol(o,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Ee.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Ee.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new lt.TextNode(HR(t)),n=new lt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var HR=t=>t.body.replace(/ /g,t.star?"":""),hu=VH,bG=`[ \r
	]`,Wue="\\\\[a-zA-Z@]+",Kue="\\\\[^\uD800-\uDFFF]",Que="("+Wue+")"+bG+"*",Xue=`\\\\(
|[ \r	]+
?)[ \r	]*`,BN="[-]",Yue=new RegExp(BN+"+$"),Zue="("+bG+"+)|"+(Xue+"|")+"([!-\\[\\]---]"+(BN+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(BN+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Que)+("|"+Kue+")");class GR{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Zue,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new js("EOF",new Yi(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ct("Unexpected character: '"+e[r]+"'",new js(e[r],new Yi(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new js(a,new Yi(this,r,this.tokenRegex.lastIndex))}}class Jue{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ct("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var ede=cG;Y("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Y("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});Y("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});Y("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});Y("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Y("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Y("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var WR={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Y("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ct("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=WR[e.text],n==null||n>=r)throw new ct("Invalid base-"+r+" digit "+e.text);for(var a;(a=WR[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var oE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ct("\\newcommand's first argument must be a macro name");var i=a[0].text,o=t.isDefined(i);if(o&&!e)throw new ct("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new ct("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ct("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};Y("\\newcommand",t=>oE(t,!1,!0,!1));Y("\\renewcommand",t=>oE(t,!0,!1,!1));Y("\\providecommand",t=>oE(t,!0,!0,!0));Y("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});Y("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});Y("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),hu[r],Pn.math[r],Pn.text[r]),""});Y("\\bgroup","{");Y("\\egroup","}");Y("~","\\nobreakspace");Y("\\lq","`");Y("\\rq","'");Y("\\aa","\\r a");Y("\\AA","\\r A");Y("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Y("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Y("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Y("","\\mathscr{B}");Y("","\\mathscr{E}");Y("","\\mathscr{F}");Y("","\\mathscr{H}");Y("","\\mathscr{I}");Y("","\\mathscr{L}");Y("","\\mathscr{M}");Y("","\\mathscr{R}");Y("","\\mathfrak{C}");Y("","\\mathfrak{H}");Y("","\\mathfrak{Z}");Y("\\Bbbk","\\Bbb{k}");Y("","\\cdotp");Y("\\llap","\\mathllap{\\textrm{#1}}");Y("\\rlap","\\mathrlap{\\textrm{#1}}");Y("\\clap","\\mathclap{\\textrm{#1}}");Y("\\mathstrut","\\vphantom{(}");Y("\\underbar","\\underline{\\text{#1}}");Y("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Y("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Y("\\ne","\\neq");Y("","\\neq");Y("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Y("","\\notin");Y("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Y("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Y("","\\perp");Y("","\\mathclose{!\\mkern-0.8mu!}");Y("","\\notni");Y("","\\ulcorner");Y("","\\urcorner");Y("","\\llcorner");Y("","\\lrcorner");Y("","\\copyright");Y("","\\textregistered");Y("","\\textregistered");Y("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Y("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Y("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Y("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Y("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Y("","\\vdots");Y("\\varGamma","\\mathit{\\Gamma}");Y("\\varDelta","\\mathit{\\Delta}");Y("\\varTheta","\\mathit{\\Theta}");Y("\\varLambda","\\mathit{\\Lambda}");Y("\\varXi","\\mathit{\\Xi}");Y("\\varPi","\\mathit{\\Pi}");Y("\\varSigma","\\mathit{\\Sigma}");Y("\\varUpsilon","\\mathit{\\Upsilon}");Y("\\varPhi","\\mathit{\\Phi}");Y("\\varPsi","\\mathit{\\Psi}");Y("\\varOmega","\\mathit{\\Omega}");Y("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Y("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Y("\\boxed","\\fbox{$\\displaystyle{#1}$}");Y("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Y("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Y("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Y("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Y("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var KR={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Y("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in KR?e=KR[r]:(r.slice(0,4)==="\\not"||r in Pn.math&&["bin","rel"].includes(Pn.math[r].group))&&(e="\\dotsb"),e});var lE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Y("\\dotso",function(t){var e=t.future().text;return e in lE?"\\ldots\\,":"\\ldots"});Y("\\dotsc",function(t){var e=t.future().text;return e in lE&&e!==","?"\\ldots\\,":"\\ldots"});Y("\\cdots",function(t){var e=t.future().text;return e in lE?"\\@cdots\\,":"\\@cdots"});Y("\\dotsb","\\cdots");Y("\\dotsm","\\cdots");Y("\\dotsi","\\!\\cdots");Y("\\dotsx","\\ldots\\,");Y("\\DOTSI","\\relax");Y("\\DOTSB","\\relax");Y("\\DOTSX","\\relax");Y("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Y("\\,","\\tmspace+{3mu}{.1667em}");Y("\\thinspace","\\,");Y("\\>","\\mskip{4mu}");Y("\\:","\\tmspace+{4mu}{.2222em}");Y("\\medspace","\\:");Y("\\;","\\tmspace+{5mu}{.2777em}");Y("\\thickspace","\\;");Y("\\!","\\tmspace-{3mu}{.1667em}");Y("\\negthinspace","\\!");Y("\\negmedspace","\\tmspace-{4mu}{.2222em}");Y("\\negthickspace","\\tmspace-{5mu}{.277em}");Y("\\enspace","\\kern.5em ");Y("\\enskip","\\hskip.5em\\relax");Y("\\quad","\\hskip1em\\relax");Y("\\qquad","\\hskip2em\\relax");Y("\\tag","\\@ifstar\\tag@literal\\tag@paren");Y("\\tag@paren","\\tag@literal{({#1})}");Y("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ct("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Y("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Y("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Y("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Y("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Y("\\newline","\\\\\\relax");Y("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var wG=yt(Fo["Main-Regular"][84][1]-.7*Fo["Main-Regular"][65][1]);Y("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+wG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Y("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+wG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Y("\\hspace","\\@ifstar\\@hspacer\\@hspace");Y("\\@hspace","\\hskip #1\\relax");Y("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Y("\\ordinarycolon",":");Y("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Y("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Y("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Y("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Y("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Y("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Y("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Y("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Y("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Y("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Y("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Y("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Y("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Y("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Y("","\\dblcolon");Y("","\\eqcolon");Y("","\\coloneqq");Y("","\\eqqcolon");Y("","\\Coloneqq");Y("\\ratio","\\vcentcolon");Y("\\coloncolon","\\dblcolon");Y("\\colonequals","\\coloneqq");Y("\\coloncolonequals","\\Coloneqq");Y("\\equalscolon","\\eqqcolon");Y("\\equalscoloncolon","\\Eqqcolon");Y("\\colonminus","\\coloneq");Y("\\coloncolonminus","\\Coloneq");Y("\\minuscolon","\\eqcolon");Y("\\minuscoloncolon","\\Eqcolon");Y("\\coloncolonapprox","\\Colonapprox");Y("\\coloncolonsim","\\Colonsim");Y("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Y("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Y("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Y("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Y("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Y("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Y("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Y("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Y("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Y("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Y("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Y("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Y("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Y("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Y("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Y("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Y("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Y("\\nleqq","\\html@mathml{\\@nleqq}{}");Y("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Y("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Y("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Y("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Y("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Y("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Y("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Y("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Y("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Y("\\imath","\\html@mathml{\\@imath}{}");Y("\\jmath","\\html@mathml{\\@jmath}{}");Y("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Y("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Y("","\\llbracket");Y("","\\rrbracket");Y("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Y("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Y("","\\lBrace");Y("","\\rBrace");Y("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Y("","\\minuso");Y("\\darr","\\downarrow");Y("\\dArr","\\Downarrow");Y("\\Darr","\\Downarrow");Y("\\lang","\\langle");Y("\\rang","\\rangle");Y("\\uarr","\\uparrow");Y("\\uArr","\\Uparrow");Y("\\Uarr","\\Uparrow");Y("\\N","\\mathbb{N}");Y("\\R","\\mathbb{R}");Y("\\Z","\\mathbb{Z}");Y("\\alef","\\aleph");Y("\\alefsym","\\aleph");Y("\\Alpha","\\mathrm{A}");Y("\\Beta","\\mathrm{B}");Y("\\bull","\\bullet");Y("\\Chi","\\mathrm{X}");Y("\\clubs","\\clubsuit");Y("\\cnums","\\mathbb{C}");Y("\\Complex","\\mathbb{C}");Y("\\Dagger","\\ddagger");Y("\\diamonds","\\diamondsuit");Y("\\empty","\\emptyset");Y("\\Epsilon","\\mathrm{E}");Y("\\Eta","\\mathrm{H}");Y("\\exist","\\exists");Y("\\harr","\\leftrightarrow");Y("\\hArr","\\Leftrightarrow");Y("\\Harr","\\Leftrightarrow");Y("\\hearts","\\heartsuit");Y("\\image","\\Im");Y("\\infin","\\infty");Y("\\Iota","\\mathrm{I}");Y("\\isin","\\in");Y("\\Kappa","\\mathrm{K}");Y("\\larr","\\leftarrow");Y("\\lArr","\\Leftarrow");Y("\\Larr","\\Leftarrow");Y("\\lrarr","\\leftrightarrow");Y("\\lrArr","\\Leftrightarrow");Y("\\Lrarr","\\Leftrightarrow");Y("\\Mu","\\mathrm{M}");Y("\\natnums","\\mathbb{N}");Y("\\Nu","\\mathrm{N}");Y("\\Omicron","\\mathrm{O}");Y("\\plusmn","\\pm");Y("\\rarr","\\rightarrow");Y("\\rArr","\\Rightarrow");Y("\\Rarr","\\Rightarrow");Y("\\real","\\Re");Y("\\reals","\\mathbb{R}");Y("\\Reals","\\mathbb{R}");Y("\\Rho","\\mathrm{P}");Y("\\sdot","\\cdot");Y("\\sect","\\S");Y("\\spades","\\spadesuit");Y("\\sub","\\subset");Y("\\sube","\\subseteq");Y("\\supe","\\supseteq");Y("\\Tau","\\mathrm{T}");Y("\\thetasym","\\vartheta");Y("\\weierp","\\wp");Y("\\Zeta","\\mathrm{Z}");Y("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Y("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Y("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Y("\\bra","\\mathinner{\\langle{#1}|}");Y("\\ket","\\mathinner{|{#1}\\rangle}");Y("\\braket","\\mathinner{\\langle{#1}\\rangle}");Y("\\Bra","\\left\\langle#1\\right|");Y("\\Ket","\\left|#1\\right\\rangle");var SG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",o),a.length&&y.macros.set("\\|",c));var v=m;if(!m&&a.length){var _=y.future();_.text==="|"&&(y.popToken(),v=!0)}return{tokens:v?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};Y("\\bra@ket",SG(!1));Y("\\bra@set",SG(!0));Y("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Y("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Y("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Y("\\angln","{\\angl n}");Y("\\blue","\\textcolor{##6495ed}{#1}");Y("\\orange","\\textcolor{##ffa500}{#1}");Y("\\pink","\\textcolor{##ff00af}{#1}");Y("\\red","\\textcolor{##df0030}{#1}");Y("\\green","\\textcolor{##28ae7b}{#1}");Y("\\gray","\\textcolor{gray}{#1}");Y("\\purple","\\textcolor{##9d38bd}{#1}");Y("\\blueA","\\textcolor{##ccfaff}{#1}");Y("\\blueB","\\textcolor{##80f6ff}{#1}");Y("\\blueC","\\textcolor{##63d9ea}{#1}");Y("\\blueD","\\textcolor{##11accd}{#1}");Y("\\blueE","\\textcolor{##0c7f99}{#1}");Y("\\tealA","\\textcolor{##94fff5}{#1}");Y("\\tealB","\\textcolor{##26edd5}{#1}");Y("\\tealC","\\textcolor{##01d1c1}{#1}");Y("\\tealD","\\textcolor{##01a995}{#1}");Y("\\tealE","\\textcolor{##208170}{#1}");Y("\\greenA","\\textcolor{##b6ffb0}{#1}");Y("\\greenB","\\textcolor{##8af281}{#1}");Y("\\greenC","\\textcolor{##74cf70}{#1}");Y("\\greenD","\\textcolor{##1fab54}{#1}");Y("\\greenE","\\textcolor{##0d923f}{#1}");Y("\\goldA","\\textcolor{##ffd0a9}{#1}");Y("\\goldB","\\textcolor{##ffbb71}{#1}");Y("\\goldC","\\textcolor{##ff9c39}{#1}");Y("\\goldD","\\textcolor{##e07d10}{#1}");Y("\\goldE","\\textcolor{##a75a05}{#1}");Y("\\redA","\\textcolor{##fca9a9}{#1}");Y("\\redB","\\textcolor{##ff8482}{#1}");Y("\\redC","\\textcolor{##f9685d}{#1}");Y("\\redD","\\textcolor{##e84d39}{#1}");Y("\\redE","\\textcolor{##bc2612}{#1}");Y("\\maroonA","\\textcolor{##ffbde0}{#1}");Y("\\maroonB","\\textcolor{##ff92c6}{#1}");Y("\\maroonC","\\textcolor{##ed5fa6}{#1}");Y("\\maroonD","\\textcolor{##ca337c}{#1}");Y("\\maroonE","\\textcolor{##9e034e}{#1}");Y("\\purpleA","\\textcolor{##ddd7ff}{#1}");Y("\\purpleB","\\textcolor{##c6b9fc}{#1}");Y("\\purpleC","\\textcolor{##aa87ff}{#1}");Y("\\purpleD","\\textcolor{##7854ab}{#1}");Y("\\purpleE","\\textcolor{##543b78}{#1}");Y("\\mintA","\\textcolor{##f5f9e8}{#1}");Y("\\mintB","\\textcolor{##edf2df}{#1}");Y("\\mintC","\\textcolor{##e0e5cc}{#1}");Y("\\grayA","\\textcolor{##f6f7f7}{#1}");Y("\\grayB","\\textcolor{##f0f1f2}{#1}");Y("\\grayC","\\textcolor{##e3e5e6}{#1}");Y("\\grayD","\\textcolor{##d6d8da}{#1}");Y("\\grayE","\\textcolor{##babec2}{#1}");Y("\\grayF","\\textcolor{##888d93}{#1}");Y("\\grayG","\\textcolor{##626569}{#1}");Y("\\grayH","\\textcolor{##3b3e40}{#1}");Y("\\grayI","\\textcolor{##21242c}{#1}");Y("\\kaBlue","\\textcolor{##314453}{#1}");Y("\\kaGreen","\\textcolor{##71B307}{#1}");var _G={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class tde{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Jue(ede,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new GR(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new js("EOF",n.loc)),this.pushTokens(a),new js("",Yi.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,o=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new ct("Extra }",i)}else if(i.text==="EOF")throw new ct("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(o!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ct("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ct("Use of the macro doesn't match its definition",i)}}for(var o=[],c=0;c<e;c++)o.push(this.consumeArg(r&&r[c+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ct("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ct("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,o=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ct("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...o[+d.text-1]);else throw new ct("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new js(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var o=a.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var c=new GR(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||hu.hasOwnProperty(e)||Pn.math.hasOwnProperty(e)||Pn.text.hasOwnProperty(e)||_G.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:hu.hasOwnProperty(e)&&!hu[e].primitive}}var QR=/^[]/,yv=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),y3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},XR={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class U2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new tde(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ct("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new js("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(U2.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&hu[a.text]&&hu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ct("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,o,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?o=d[0]:o={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],o],[]):h=this.callFunction(n,[i,o],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ct("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ct("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ct("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ct("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ct("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(yv[i.text]){var h=QR.test(i.text),p=[];for(p.push(new js(yv[i.text])),this.consume();;){var m=this.fetch().text;if(!yv[m]||QR.test(m)!==h)break;p.unshift(new js(yv[m])),this.consume()}var y=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=hu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ct("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ct("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ct("Can't use function '"+a+"' in math mode",n);var{args:o,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,o,c,n,e)}callFunction(e,r,n,a,i){var o={funcName:e,parser:this,token:a,breakOnTokenText:i},c=hu[e];if(c&&c.handler)return c.handler(o,r,n);throw new ct("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],o=0;o<n;o++){var c=r.argTypes&&r.argTypes[o],d=o<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ct("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ct("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new ct("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ct("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)a=o,i+=a.text,this.consume();if(i==="")throw new ct("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ct("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ct("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!RH(i))throw new ct("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),o}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var o=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,o),d=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Yi.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!_G.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ct("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Yi.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ct(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}XR.hasOwnProperty(r[0])&&!Pn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=XR[r[0]]+r.slice(1));var i=Yue.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(Pn[this.mode][r]){this.settings.strict&&this.mode==="math"&&RN.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Pn[this.mode][r].group,d=Yi.range(e),h;if(Fce.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};o=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(IH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:Yi.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var y=i[0][m];if(!y3[y])throw new ct("Unknown accent ' "+y+"'",e);var v=y3[y][this.mode]||y3[y].text;if(!v)throw new ct("Accent "+y+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:Yi.range(e),label:v,isStretchy:!1,isShifty:!0,base:o}}return o}}U2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var cE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new U2(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ct("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new js("\\df@tag")])}]}return a},TG=function(e,r,n){r.textContent="";var a=uE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),TG=function(){throw new ct("KaTeX doesn't work in quirks mode.")});var rde=function(e,r){var n=uE(e,r).toMarkup();return n},nde=function(e,r){var n=new H7(r);return cE(e,n)},NG=function(e,r,n){if(n.throwOnError||!(e instanceof ct))throw e;var a=Ee.makeSpan(["katex-error"],[new to(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},uE=function(e,r){var n=new H7(r);try{var a=cE(e,n);return hue(a,e,n)}catch(i){return NG(i,e,n)}},ade=function(e,r){var n=new H7(r);try{var a=cE(e,n);return fue(a,e,n)}catch(i){return NG(i,e,n)}},ide="0.16.28",sde={Span:h1,Anchor:K7,SymbolNode:to,SvgNode:ac,PathNode:Ru,LineNode:IN},qx={version:ide,render:TG,renderToString:rde,ParseError:ct,SETTINGS_SCHEMA:tx,__parse:nde,__renderToDomTree:uE,__renderToHTMLTree:ade,__setFontMetrics:Pce,__defineSymbol:I,__defineFunction:wt,__defineMacro:Y,__domTree:sde};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function ou(t){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ou(t)}function $N(t,e){return $N=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},$N(t,e)}function ode(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nx(t,e,r){return ode()?nx=Reflect.construct:nx=function(a,i,o){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return o&&$N(h,o.prototype),h},nx.apply(null,arguments)}function go(t){return lde(t)||cde(t)||ude(t)||dde()}function lde(t){if(Array.isArray(t))return UN(t)}function cde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ude(t,e){if(t){if(typeof t=="string")return UN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UN(t,e)}}function UN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hde=Object.hasOwnProperty,YR=Object.setPrototypeOf,fde=Object.isFrozen,pde=Object.getPrototypeOf,mde=Object.getOwnPropertyDescriptor,Bi=Object.freeze,no=Object.seal,gde=Object.create,AG=typeof Reflect<"u"&&Reflect,Hx=AG.apply,zN=AG.construct;Hx||(Hx=function(e,r,n){return e.apply(r,n)});Bi||(Bi=function(e){return e});no||(no=function(e){return e});zN||(zN=function(e,r){return nx(e,go(r))});var yde=ao(Array.prototype.forEach),ZR=ao(Array.prototype.pop),qp=ao(Array.prototype.push),ax=ao(String.prototype.toLowerCase),v3=ao(String.prototype.toString),JR=ao(String.prototype.match),po=ao(String.prototype.replace),vde=ao(String.prototype.indexOf),xde=ao(String.prototype.trim),li=ao(RegExp.prototype.test),x3=bde(TypeError);function ao(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return Hx(t,e,n)}}function bde(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return zN(t,r)}}function gr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:ax,YR&&YR(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var o=r(i);o!==i&&(fde(e)||(e[a]=o),i=o)}t[i]=!0}return t}function gd(t){var e=gde(null),r;for(r in t)Hx(hde,t,[r])===!0&&(e[r]=t[r]);return e}function vv(t,e){for(;t!==null;){var r=mde(t,e);if(r){if(r.get)return ao(r.get);if(typeof r.value=="function")return ao(r.value)}t=pde(t)}function n(a){return console.warn("fallback value for",a),null}return n}var eM=Bi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),b3=Bi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),w3=Bi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wde=Bi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),S3=Bi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Sde=Bi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),tM=Bi(["#text"]),rM=Bi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_3=Bi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nM=Bi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xv=Bi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_de=no(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Tde=no(/<%[\w\W]*|[\w\W]*%>/gm),Nde=no(/\${[\w\W]*}/gm),Ade=no(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ede=no(/^aria-[\-\w]+$/),jde=no(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kde=no(/^(?:\w+script|data):/i),Cde=no(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ode=no(/^html$/i),Ide=no(/^[a-z][.\w]*(-[.\w]+)+$/i),Rde=function(){return typeof window>"u"?null:window},Mde=function(e,r){if(ou(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function EG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rde(),e=function(fe){return EG(fe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,o=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,v=t.trustedTypes,_=c.prototype,S=vv(_,"cloneNode"),w=vv(_,"nextSibling"),j=vv(_,"childNodes"),O=vv(_,"parentNode");if(typeof i=="function"){var R=n.createElement("template");R.content&&R.content.ownerDocument&&(n=R.content.ownerDocument)}var L=Mde(v,r),C=L?L.createHTML(""):"",P=n,E=P.implementation,N=P.createNodeIterator,k=P.createDocumentFragment,z=P.getElementsByTagName,D=r.importNode,B={};try{B=gd(n).documentMode?n.documentMode:{}}catch{}var $={};e.isSupported=typeof O=="function"&&E&&E.createHTMLDocument!==void 0&&B!==9;var K=_de,W=Tde,H=Nde,J=Ade,ie=Ede,he=kde,pe=Cde,Z=Ide,ne=jde,ae=null,xe=gr({},[].concat(go(eM),go(b3),go(w3),go(S3),go(tM))),Oe=null,Ue=gr({},[].concat(go(rM),go(_3),go(nM),go(xv))),Xe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ye=null,Q=null,me=!0,te=!0,re=!1,Pe=!0,Ge=!1,it=!0,et=!1,Pt=!1,Me=!1,tt=!1,bt=!1,St=!1,Fe=!0,ce=!1,We="user-content-",nt=!0,ut=!1,dt={},Ft=null,tr=gr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),kr=null,be=gr({},["audio","video","img","source","image","track"]),st=null,Et=gr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",ir=Ze,br=!1,Lr=null,hn=gr({},[Dt,$t,Ze],v3),xr,Gt=["application/xhtml+xml","text/html"],Ut="text/html",_t,Br=null,sn=n.createElement("form"),Wr=function(fe){return fe instanceof RegExp||fe instanceof Function},$r=function(fe){Br&&Br===fe||((!fe||ou(fe)!=="object")&&(fe={}),fe=gd(fe),xr=Gt.indexOf(fe.PARSER_MEDIA_TYPE)===-1?xr=Ut:xr=fe.PARSER_MEDIA_TYPE,_t=xr==="application/xhtml+xml"?v3:ax,ae="ALLOWED_TAGS"in fe?gr({},fe.ALLOWED_TAGS,_t):xe,Oe="ALLOWED_ATTR"in fe?gr({},fe.ALLOWED_ATTR,_t):Ue,Lr="ALLOWED_NAMESPACES"in fe?gr({},fe.ALLOWED_NAMESPACES,v3):hn,st="ADD_URI_SAFE_ATTR"in fe?gr(gd(Et),fe.ADD_URI_SAFE_ATTR,_t):Et,kr="ADD_DATA_URI_TAGS"in fe?gr(gd(be),fe.ADD_DATA_URI_TAGS,_t):be,Ft="FORBID_CONTENTS"in fe?gr({},fe.FORBID_CONTENTS,_t):tr,Ye="FORBID_TAGS"in fe?gr({},fe.FORBID_TAGS,_t):{},Q="FORBID_ATTR"in fe?gr({},fe.FORBID_ATTR,_t):{},dt="USE_PROFILES"in fe?fe.USE_PROFILES:!1,me=fe.ALLOW_ARIA_ATTR!==!1,te=fe.ALLOW_DATA_ATTR!==!1,re=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ge=fe.SAFE_FOR_TEMPLATES||!1,it=fe.SAFE_FOR_XML!==!1,et=fe.WHOLE_DOCUMENT||!1,tt=fe.RETURN_DOM||!1,bt=fe.RETURN_DOM_FRAGMENT||!1,St=fe.RETURN_TRUSTED_TYPE||!1,Me=fe.FORCE_BODY||!1,Fe=fe.SANITIZE_DOM!==!1,ce=fe.SANITIZE_NAMED_PROPS||!1,nt=fe.KEEP_CONTENT!==!1,ut=fe.IN_PLACE||!1,ne=fe.ALLOWED_URI_REGEXP||ne,ir=fe.NAMESPACE||Ze,Xe=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&Wr(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Xe.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Wr(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Xe.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Xe.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ge&&(te=!1),bt&&(tt=!0),dt&&(ae=gr({},go(tM)),Oe=[],dt.html===!0&&(gr(ae,eM),gr(Oe,rM)),dt.svg===!0&&(gr(ae,b3),gr(Oe,_3),gr(Oe,xv)),dt.svgFilters===!0&&(gr(ae,w3),gr(Oe,_3),gr(Oe,xv)),dt.mathMl===!0&&(gr(ae,S3),gr(Oe,nM),gr(Oe,xv))),fe.ADD_TAGS&&(ae===xe&&(ae=gd(ae)),gr(ae,fe.ADD_TAGS,_t)),fe.ADD_ATTR&&(Oe===Ue&&(Oe=gd(Oe)),gr(Oe,fe.ADD_ATTR,_t)),fe.ADD_URI_SAFE_ATTR&&gr(st,fe.ADD_URI_SAFE_ATTR,_t),fe.FORBID_CONTENTS&&(Ft===tr&&(Ft=gd(Ft)),gr(Ft,fe.FORBID_CONTENTS,_t)),nt&&(ae["#text"]=!0),et&&gr(ae,["html","head","body"]),ae.table&&(gr(ae,["tbody"]),delete Ye.tbody),Bi&&Bi(fe),Br=fe)},fn=gr({},["mi","mo","mn","ms","mtext"]),cr=gr({},["annotation-xml"]),ga=gr({},["title","style","font","a","script"]),pn=gr({},b3);gr(pn,w3),gr(pn,wde);var Rn=gr({},S3);gr(Rn,Sde);var ti=function(fe){var Je=O(fe);(!Je||!Je.tagName)&&(Je={namespaceURI:ir,tagName:"template"});var ht=ax(fe.tagName),Xt=ax(Je.tagName);return Lr[fe.namespaceURI]?fe.namespaceURI===$t?Je.namespaceURI===Ze?ht==="svg":Je.namespaceURI===Dt?ht==="svg"&&(Xt==="annotation-xml"||fn[Xt]):!!pn[ht]:fe.namespaceURI===Dt?Je.namespaceURI===Ze?ht==="math":Je.namespaceURI===$t?ht==="math"&&cr[Xt]:!!Rn[ht]:fe.namespaceURI===Ze?Je.namespaceURI===$t&&!cr[Xt]||Je.namespaceURI===Dt&&!fn[Xt]?!1:!Rn[ht]&&(ga[ht]||!pn[ht]):!!(xr==="application/xhtml+xml"&&Lr[fe.namespaceURI]):!1},Tr=function(fe){qp(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=C}catch{fe.remove()}}},mn=function(fe,Je){try{qp(e.removed,{attribute:Je.getAttributeNode(fe),from:Je})}catch{qp(e.removed,{attribute:null,from:Je})}if(Je.removeAttribute(fe),fe==="is"&&!Oe[fe])if(tt||bt)try{Tr(Je)}catch{}else try{Je.setAttribute(fe,"")}catch{}},ri=function(fe){var Je,ht;if(Me)fe="<remove></remove>"+fe;else{var Xt=JR(fe,/^[\r\n\t ]+/);ht=Xt&&Xt[0]}xr==="application/xhtml+xml"&&ir===Ze&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var hr=L?L.createHTML(fe):fe;if(ir===Ze)try{Je=new y().parseFromString(hr,xr)}catch{}if(!Je||!Je.documentElement){Je=E.createDocument(ir,"template",null);try{Je.documentElement.innerHTML=br?C:hr}catch{}}var on=Je.body||Je.documentElement;return fe&&ht&&on.insertBefore(n.createTextNode(ht),on.childNodes[0]||null),ir===Ze?z.call(Je,et?"html":"body")[0]:et?Je.documentElement:on},Wn=function(fe){return N.call(fe.ownerDocument||fe,fe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Jr=function(fe){return fe instanceof m&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof p)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},gn=function(fe){return ou(o)==="object"?fe instanceof o:fe&&ou(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},An=function(fe,Je,ht){$[fe]&&yde($[fe],function(Xt){Xt.call(e,Je,ht,Br)})},ni=function(fe){var Je;if(An("beforeSanitizeElements",fe,null),Jr(fe)||li(/[\u0080-\uFFFF]/,fe.nodeName))return Tr(fe),!0;var ht=_t(fe.nodeName);if(An("uponSanitizeElement",fe,{tagName:ht,allowedTags:ae}),fe.hasChildNodes()&&!gn(fe.firstElementChild)&&(!gn(fe.content)||!gn(fe.content.firstElementChild))&&li(/<[/\w]/g,fe.innerHTML)&&li(/<[/\w]/g,fe.textContent)||ht==="select"&&li(/<template/i,fe.innerHTML)||fe.nodeType===7||it&&fe.nodeType===8&&li(/<[/\w]/g,fe.data))return Tr(fe),!0;if(!ae[ht]||Ye[ht]){if(!Ye[ht]&&Ai(ht)&&(Xe.tagNameCheck instanceof RegExp&&li(Xe.tagNameCheck,ht)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(ht)))return!1;if(nt&&!Ft[ht]){var Xt=O(fe)||fe.parentNode,hr=j(fe)||fe.childNodes;if(hr&&Xt)for(var on=hr.length,Kr=on-1;Kr>=0;--Kr){var yn=S(hr[Kr],!0);yn.__removalCount=(fe.__removalCount||0)+1,Xt.insertBefore(yn,w(fe))}}return Tr(fe),!0}return fe instanceof c&&!ti(fe)||(ht==="noscript"||ht==="noembed"||ht==="noframes")&&li(/<\/no(script|embed|frames)/i,fe.innerHTML)?(Tr(fe),!0):(Ge&&fe.nodeType===3&&(Je=fe.textContent,Je=po(Je,K," "),Je=po(Je,W," "),Je=po(Je,H," "),fe.textContent!==Je&&(qp(e.removed,{element:fe.cloneNode()}),fe.textContent=Je)),An("afterSanitizeElements",fe,null),!1)},qa=function(fe,Je,ht){if(Fe&&(Je==="id"||Je==="name")&&(ht in n||ht in sn))return!1;if(!(te&&!Q[Je]&&li(J,Je))){if(!(me&&li(ie,Je))){if(!Oe[Je]||Q[Je]){if(!(Ai(fe)&&(Xe.tagNameCheck instanceof RegExp&&li(Xe.tagNameCheck,fe)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(fe))&&(Xe.attributeNameCheck instanceof RegExp&&li(Xe.attributeNameCheck,Je)||Xe.attributeNameCheck instanceof Function&&Xe.attributeNameCheck(Je))||Je==="is"&&Xe.allowCustomizedBuiltInElements&&(Xe.tagNameCheck instanceof RegExp&&li(Xe.tagNameCheck,ht)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(ht))))return!1}else if(!st[Je]){if(!li(ne,po(ht,pe,""))){if(!((Je==="src"||Je==="xlink:href"||Je==="href")&&fe!=="script"&&vde(ht,"data:")===0&&kr[fe])){if(!(re&&!li(he,po(ht,pe,"")))){if(ht)return!1}}}}}}return!0},Ai=function(fe){return fe!=="annotation-xml"&&JR(fe,Z)},ls=function(fe){var Je,ht,Xt,hr;An("beforeSanitizeAttributes",fe,null);var on=fe.attributes;if(!(!on||Jr(fe))){var Kr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Oe};for(hr=on.length;hr--;){Je=on[hr];var yn=Je,Cr=yn.name,Rs=yn.namespaceURI;if(ht=Cr==="value"?Je.value:xde(Je.value),Xt=_t(Cr),Kr.attrName=Xt,Kr.attrValue=ht,Kr.keepAttr=!0,Kr.forceKeepAttr=void 0,An("uponSanitizeAttribute",fe,Kr),ht=Kr.attrValue,!Kr.forceKeepAttr&&(mn(Cr,fe),!!Kr.keepAttr)){if(!Pe&&li(/\/>/i,ht)){mn(Cr,fe);continue}Ge&&(ht=po(ht,K," "),ht=po(ht,W," "),ht=po(ht,H," "));var cs=_t(fe.nodeName);if(qa(cs,Xt,ht)){if(ce&&(Xt==="id"||Xt==="name")&&(mn(Cr,fe),ht=We+ht),it&&li(/((--!?|])>)|<\/(style|title)/i,ht)){mn(Cr,fe);continue}if(L&&ou(v)==="object"&&typeof v.getAttributeType=="function"&&!Rs)switch(v.getAttributeType(cs,Xt)){case"TrustedHTML":{ht=L.createHTML(ht);break}case"TrustedScriptURL":{ht=L.createScriptURL(ht);break}}try{Rs?fe.setAttributeNS(Rs,Cr,ht):fe.setAttribute(Cr,ht),Jr(fe)?Tr(fe):ZR(e.removed)}catch{}}}}An("afterSanitizeAttributes",fe,null)}},gi=function Tt(fe){var Je,ht=Wn(fe);for(An("beforeSanitizeShadowDOM",fe,null);Je=ht.nextNode();)An("uponSanitizeShadowNode",Je,null),ni(Je),ls(Je),Je.content instanceof a&&Tt(Je.content);An("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(Tt){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Je,ht,Xt,hr,on;if(br=!Tt,br&&(Tt="<!-->"),typeof Tt!="string"&&!gn(Tt))if(typeof Tt.toString=="function"){if(Tt=Tt.toString(),typeof Tt!="string")throw x3("dirty is not a string, aborting")}else throw x3("toString is not a function");if(!e.isSupported){if(ou(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Tt=="string")return t.toStaticHTML(Tt);if(gn(Tt))return t.toStaticHTML(Tt.outerHTML)}return Tt}if(Pt||$r(fe),e.removed=[],typeof Tt=="string"&&(ut=!1),ut){if(Tt.nodeName){var Kr=_t(Tt.nodeName);if(!ae[Kr]||Ye[Kr])throw x3("root node is forbidden and cannot be sanitized in-place")}}else if(Tt instanceof o)Je=ri("<!---->"),ht=Je.ownerDocument.importNode(Tt,!0),ht.nodeType===1&&ht.nodeName==="BODY"||ht.nodeName==="HTML"?Je=ht:Je.appendChild(ht);else{if(!tt&&!Ge&&!et&&Tt.indexOf("<")===-1)return L&&St?L.createHTML(Tt):Tt;if(Je=ri(Tt),!Je)return tt?null:St?C:""}Je&&Me&&Tr(Je.firstChild);for(var yn=Wn(ut?Tt:Je);Xt=yn.nextNode();)Xt.nodeType===3&&Xt===hr||(ni(Xt),ls(Xt),Xt.content instanceof a&&gi(Xt.content),hr=Xt);if(hr=null,ut)return Tt;if(tt){if(bt)for(on=k.call(Je.ownerDocument);Je.firstChild;)on.appendChild(Je.firstChild);else on=Je;return(Oe.shadowroot||Oe.shadowrootmod)&&(on=D.call(r,on,!0)),on}var Cr=et?Je.outerHTML:Je.innerHTML;return et&&ae["!doctype"]&&Je.ownerDocument&&Je.ownerDocument.doctype&&Je.ownerDocument.doctype.name&&li(Ode,Je.ownerDocument.doctype.name)&&(Cr="<!DOCTYPE "+Je.ownerDocument.doctype.name+`>
`+Cr),Ge&&(Cr=po(Cr,K," "),Cr=po(Cr,W," "),Cr=po(Cr,H," ")),L&&St?L.createHTML(Cr):Cr},e.setConfig=function(Tt){$r(Tt),Pt=!0},e.clearConfig=function(){Br=null,Pt=!1},e.isValidAttribute=function(Tt,fe,Je){Br||$r({});var ht=_t(Tt),Xt=_t(fe);return qa(ht,Xt,Je)},e.addHook=function(Tt,fe){typeof fe=="function"&&($[Tt]=$[Tt]||[],qp($[Tt],fe))},e.removeHook=function(Tt){if($[Tt])return ZR($[Tt])},e.removeHooks=function(Tt){$[Tt]&&($[Tt]=[])},e.removeAllHooks=function(){$={}},e}var jG=EG();const Pde=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i,lessonBlocks:o})=>{const c=A.useRef(Cx()),d=A.useRef(Date.now()),h=A.useRef(t),[p,m]=A.useState(!0),[y,v]=A.useState(0),[_,S]=A.useState(!1),[w,j]=A.useState(null),[O,R]=A.useState(0),[L,C]=A.useState(0),[P,E]=A.useState(!1),[N,k]=A.useState(0),[z,D]=A.useState(!1),B=A.useRef(null),$=A.useRef(null),K=A.useRef(null),W=A.useRef(new Set),H=A.useRef(null),[J,ie]=A.useState(!1),[he,pe]=A.useState("");A.useEffect(()=>{h.current=t},[t]);const Z=A.useCallback(()=>{d.current=Date.now(),p||m(!0)},[p]);A.useEffect(()=>{const xe=setInterval(()=>{Date.now()-d.current<6e4?(c.current.engagementTime+=1,v(c.current.engagementTime),p||m(!0)):p&&m(!1)},1e3);return()=>clearInterval(xe)},[p]),A.useEffect(()=>{const xe=["mousemove","keydown","scroll","click"];return xe.forEach(Oe=>window.addEventListener(Oe,Z)),()=>xe.forEach(Oe=>window.removeEventListener(Oe,Z))},[Z]),A.useEffect(()=>()=>{h.current(c.current)},[]),A.useEffect(()=>{if(!n||!a)return;const xe=async Oe=>{var me,te,re,Pe,Ge,it,et,Pt,Me,tt,bt,St;const Ue=B.current;if(!Ue)return;const Xe=Ue.src?new URL(Ue.src).origin:"";if(Oe.origin!==window.location.origin&&Oe.origin!==Xe)return;const Ye=Oe.origin,Q=Oe.data;if(!(!Q||typeof Q!="object"||!((me=Q.type)!=null&&me.startsWith("portal-"))))switch(Z(),Q.type){case"portal-ready":{S(!0);try{const Fe=await ua(ot(Ce,"practice_progress",`${n}_${a}`)),ce=Fe.exists()?Fe.data():null,We=(ce==null?void 0:ce.answeredQuestions)||[];We.forEach(dt=>W.current.add(dt)),R(We.length),ce&&(H.current=ce,ce.completed&&(E(!0),k(ce.totalCompletions||1)));const nt=ce?{state:ce.state||null,currentQuestion:ce.currentQuestion??0}:null,ut=ce!=null&&ce.completed?{completed:!0,completedAt:ce.completedAt,bestScore:ce.bestScore,totalCompletions:ce.totalCompletions||0,lastCompletion:((te=ce.completionHistory)==null?void 0:te.length)>0?ce.completionHistory[ce.completionHistory.length-1]:null}:null;(re=Ue.contentWindow)==null||re.postMessage({type:"portal-init",payload:{userId:n,savedState:nt,completionInfo:ut}},Ye)}catch(Fe){console.error("Bridge: Failed to load saved state",Fe),(Pe=Ue.contentWindow)==null||Pe.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},Ye)}break}case"portal-save":{const{state:Fe,currentQuestion:ce}=Q.payload||{};if(!Fe)break;try{const We=H.current,nt={userId:n,assignmentId:a,state:Fe,currentQuestion:ce??0,answeredQuestions:Array.from(W.current),lastUpdated:new Date().toISOString()};We!=null&&We.completed&&(nt.completed=We.completed,nt.completedAt=We.completedAt,nt.bestScore=We.bestScore,nt.totalCompletions=We.totalCompletions,nt.completionHistory=We.completionHistory),await Qn(ot(Ce,"practice_progress",`${n}_${a}`),nt,{merge:!0}),H.current={...H.current,...nt},(Ge=Ue.contentWindow)==null||Ge.postMessage({type:"portal-save-ok"},Ye)}catch(We){console.error("Bridge: Save failed",We),(it=Ue.contentWindow)==null||it.postMessage({type:"portal-save-error"},Ye)}break}case"portal-complete":{const{score:Fe,totalQuestions:ce,correctAnswers:We}=Q.payload||{};try{const nt=H.current,ut=new Date().toISOString(),dt={completedAt:ut,score:Fe??0,totalQuestions:ce??0,correctAnswers:We??0,answeredQuestions:Array.from(W.current)},Ft=[...(nt==null?void 0:nt.completionHistory)||[],dt],tr=Math.max((nt==null?void 0:nt.bestScore)||0,Fe||0),kr=((nt==null?void 0:nt.totalCompletions)||0)+1,be={userId:n,assignmentId:a,completed:!0,completedAt:(nt==null?void 0:nt.completedAt)||ut,bestScore:tr,totalCompletions:kr,completionHistory:Ft,answeredQuestions:Array.from(W.current),lastUpdated:ut};nt!=null&&nt.state&&(be.state=nt.state,be.currentQuestion=nt.currentQuestion),await Qn(ot(Ce,"practice_progress",`${n}_${a}`),be,{merge:!0}),H.current={...H.current,...be},E(!0),k(kr),Un.xpGain(),j({text:"Module Complete!",type:"success"}),setTimeout(()=>j(null),3e3),(et=Ue.contentWindow)==null||et.postMessage({type:"portal-complete-ok",payload:{totalCompletions:kr,bestScore:tr}},Ye)}catch(nt){console.error("Bridge: Completion save failed",nt),(Pt=Ue.contentWindow)==null||Pt.postMessage({type:"portal-complete-error"},Ye)}break}case"portal-replay":{try{const Fe=H.current,ce={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(W.current),lastUpdated:new Date().toISOString(),completed:(Fe==null?void 0:Fe.completed)||!1,completedAt:(Fe==null?void 0:Fe.completedAt)||null,bestScore:(Fe==null?void 0:Fe.bestScore)||null,totalCompletions:(Fe==null?void 0:Fe.totalCompletions)||0,completionHistory:(Fe==null?void 0:Fe.completionHistory)||[]};await Qn(ot(Ce,"practice_progress",`${n}_${a}`),ce,{merge:!0}),H.current=ce,D(!1),(Me=Ue.contentWindow)==null||Me.postMessage({type:"portal-reset-ok"},Ye)}catch(Fe){console.error("Bridge: Replay reset failed",Fe)}break}case"portal-answer":{const{questionId:Fe,correct:ce,attempts:We}=Q.payload||{};if(!Fe)break;if(ce&&!W.current.has(Fe)){W.current.add(Fe),R(ut=>ut+1);const nt=We===1?15:10;try{const dt=(await sH({assignmentId:a,questionId:Fe,xpAmount:nt,classType:i||"Uncategorized"})).data;if(dt.awarded){const Ft=dt.serverXP||nt;C(tr=>tr+Ft),j({text:`+${Ft} XP`,type:"success"}),Un.xpGain(),setTimeout(()=>j(null),2e3)}(tt=Ue.contentWindow)==null||tt.postMessage({type:"portal-xp-result",payload:{questionId:Fe,awarded:dt.awarded,xp:dt.serverXP||nt}},Ye)}catch(ut){console.error("Bridge: XP award failed",ut),(bt=Ue.contentWindow)==null||bt.postMessage({type:"portal-xp-result",payload:{questionId:Fe,awarded:!1,xp:0}},Ye)}}else ce&&((St=Ue.contentWindow)==null||St.postMessage({type:"portal-xp-result",payload:{questionId:Fe,awarded:!1,xp:0}},Ye));break}}};return window.addEventListener("message",xe),()=>window.removeEventListener("message",xe)},[n,a,i,Z]);const ne=A.useCallback(()=>{const xe=B.current;if(!xe||!n||!a)return;const Ue=(xe.src?new URL(xe.src).origin:"")||window.location.origin;(async()=>{var Xe;try{const Ye=H.current,Q={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(W.current),lastUpdated:new Date().toISOString(),completed:(Ye==null?void 0:Ye.completed)||!1,completedAt:(Ye==null?void 0:Ye.completedAt)||null,bestScore:(Ye==null?void 0:Ye.bestScore)||null,totalCompletions:(Ye==null?void 0:Ye.totalCompletions)||0,completionHistory:(Ye==null?void 0:Ye.completionHistory)||[]};await Qn(ot(Ce,"practice_progress",`${n}_${a}`),Q,{merge:!0}),H.current=Q,D(!1),(Xe=xe.contentWindow)==null||Xe.postMessage({type:"portal-reset-ok"},Ue)}catch(Ye){console.error("Replay reset failed",Ye)}})()},[n,a]),ae=A.useCallback(()=>{const xe=K.current;xe&&(document.fullscreenElement?document.exitFullscreen():xe.requestFullscreen().catch(()=>{ie(Oe=>!Oe)}))},[]);return A.useEffect(()=>{const xe=()=>ie(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",xe),()=>document.removeEventListener("fullscreenchange",xe)},[]),A.useEffect(()=>{if($.current&&r){const xe=r.replace(/\$(.*?)\$/g,(Oe,Ue)=>{try{return qx.renderToString(Ue,{throwOnError:!1})}catch{return Ue}});$.current.innerHTML=jG.sanitize(xe,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]}),pe($.current.textContent||"")}},[r]),s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?s.jsx(U7,{className:"w-4 h-4"}):s.jsx(eo,{className:"w-4 h-4 animate-pulse"}),p?"Active Session":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(y/60),"m ",y%60,"s"]}),_&&O>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[s.jsx(an,{className:"w-3 h-3"})," ",O," answered"]}),_&&L>0&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[s.jsx(ka,{className:"w-3 h-3"})," ",L," XP"]}),P&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[s.jsx(el,{className:"w-3 h-3"}),"Completed",N>1?` (${N}x)`:""]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[(r||he)&&s.jsx(gR,{textContent:he,compact:!0}),P&&_&&(z?s.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[s.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),s.jsx("button",{onClick:ne,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),s.jsx("button",{onClick:()=>D(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[s.jsx(_le,{className:"w-3 h-3"})," Replay"]})),e&&s.jsxs("button",{onClick:ae,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:J?"Exit full screen (Esc)":"Full screen",children:[J?s.jsx(gH,{className:"w-3 h-3"}):s.jsx(Jv,{className:"w-3 h-3"}),J?"Exit Full Screen":"Full Screen"]}),_&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[s.jsx(ka,{className:"w-3 h-3"})," XP Linked"]}),!p&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Os,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),w&&s.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${w.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[w.type==="success"?s.jsx(an,{className:"w-4 h-4"}):s.jsx(Cu,{className:"w-4 h-4"}),w.text]})}),s.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?s.jsxs("div",{ref:K,className:"flex-1 flex flex-col bg-white relative",children:[s.jsx("iframe",{ref:B,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:Z}),s.jsx(ece,{containerRef:K})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Gh,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),s.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&s.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-white font-bold text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Jv,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),he&&s.jsx(gR,{textContent:he})]}),s.jsx("div",{ref:$,className:"proctor-content text-sm leading-relaxed"})]}),o&&o.length>0&&s.jsxs("div",{className:"h-2/5 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[s.jsxs("h3",{className:"text-white font-bold mb-4 text-xs uppercase tracking-widest flex items-center gap-2",children:[s.jsx(Jv,{className:"w-4 h-4 text-purple-400"})," Interactive Lesson"]}),s.jsx(oce,{blocks:o})]})]})]})},Dde=()=>{const[t,e]=A.useState(!1),[r,n]=A.useState(null),a=async()=>{e(!0),n(null);try{await vte(EN,coe)}catch(o){console.error("Login Error:",o),n(o instanceof Error?o.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return s.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),s.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:s.jsxs("div",{className:"p-10 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&s.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Os,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"break-words",children:[s.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[s.jsx(tle,{className:"w-4 h-4"}),"Action Required:"]}),s.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",s.jsx("code",{children:"lib/firebase.ts"})," and replace",s.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),s.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),s.jsx("span",{children:"Sign in with Google"})]})}),s.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),s.jsx("span",{children:""}),s.jsx("span",{children:"Firebase Auth"})]})]})})]})},kG=A.createContext(null),ol=()=>{const t=A.useContext(kG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},Lde=({children:t})=>{const[e,r]=A.useState({isOpen:!1,options:{message:""}}),n=A.useRef(null),a=A.useRef(null),i=A.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),o=A.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=A.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);A.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),A.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&o()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,o]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return s.jsxs(kG.Provider,{value:{confirm:i},children:[t,e.isOpen&&s.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),s.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:s.jsx(Os,{className:"w-5 h-5"})}),s.jsxs("div",{children:[e.options.title&&s.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),s.jsx("button",{ref:a,onClick:o,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),s.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},ng=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=o=>{e.includes(o)?r(e.filter(c=>c!==o)):r([...e,o])};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(o=>s.jsx("button",{type:"button",onClick:()=>i(o),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(o)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:o},o))]})]})},aM={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:s.jsx(pH,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:s.jsx(Os,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:s.jsx(xle,{className:"w-4 h-4"})}},Bde=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=ol(),a=mi(),[i,o]=A.useState(!1),[c,d]=A.useState(""),[h,p]=A.useState(""),[m,y]=A.useState("INFO"),[v,_]=A.useState("GLOBAL"),[S,w]=A.useState([]),j=async()=>{if(!(!c.trim()||!h.trim()))try{await Re.createAnnouncement({title:c.trim(),content:h.trim(),classType:v,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...S.length>0?{targetSections:S}:{}}),await Re.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),o(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},O=async R=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Re.deleteAnnouncement(R)};return s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Mx,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[s.jsx(Mi,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?s.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[s.jsx(Mx,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):s.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(R=>{var C;const L=aM[R.priority]||aM.INFO;return s.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-white",children:R.title}),s.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:R.content}),s.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[R.classType==="GLOBAL"?"All Classes":R.classType,(C=R.targetSections)!=null&&C.length?`  ${R.targetSections.join(", ")}`:"","  ",new Date(R.createdAt).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>O(R.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:s.jsx(aa,{className:"w-3.5 h-3.5"})})]},R.id)})}),s.jsx(Ti,{isOpen:i,onClose:()=>o(!1),title:"New Announcement",maxWidth:"max-w-md",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:R=>d(R.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),s.jsx("textarea",{value:h,onChange:R=>p(R.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),s.jsxs("select",{value:m,onChange:R=>y(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"INFO",children:"Info"}),s.jsx("option",{value:"WARNING",children:"Warning"}),s.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),s.jsxs("select",{value:v,onChange:R=>_(R.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Mr).filter(R=>R!=="Uncategorized").map(R=>s.jsx("option",{value:R,children:R},R))]})]})]}),s.jsx(ng,{availableSections:r,selectedSections:S,onChange:w}),s.jsx("button",{onClick:j,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},CG=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],iM=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],$de=["I","II","III","IV","V"],Ude=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},Qh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,iM.length-1),a=iM[n]||"Unknownium",i=$de[r],o=n+1,c=Ude(o);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Ki={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},zde={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},sM=(t,e,r)=>{const n=Ki.UNSOCKET_BASE,a=zde[t],i=Math.max(1,e),o=1+r;return Math.ceil(n*a*i*o)},oM=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},OG=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},dE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([o,c])=>{e[o]+=c})}),e},Xh=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let o=0;switch(n.rarity){case"COMMON":o=0;break;case"UNCOMMON":o=10;break;case"RARE":o=30;break;case"UNIQUE":o=60;break}e+=i*10+o}),Math.floor(e))},lM=t=>t.runewordActive&&CG.find(e=>e.id===t.runewordActive)||null,ca=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function r0(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const Vde=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var C,P,E,N,k,z,D,B,$,K;const[i,o]=A.useState(!1),c=((C=t.gamification)==null?void 0:C.level)||1,d=((P=t.gamification)==null?void 0:P.xp)||0,h=((E=t.gamification)==null?void 0:E.currency)||0,p=Qh(c),m=dE(t),y=t.enrolledClasses||(t.classType?[t.classType]:[]),v=((k=(N=t.gamification)==null?void 0:N.completedQuests)==null?void 0:k.length)||0,_=((D=(z=t.gamification)==null?void 0:z.activeQuests)==null?void 0:D.filter(W=>W.status==="ACCEPTED"||W.status==="DEPLOYED").length)||0,S=A.useMemo(()=>y.map(W=>{var ne,ae;const H=((ae=(ne=t.gamification)==null?void 0:ne.classXp)==null?void 0:ae[W])||0,J=r0(t,W),ie=Xh(J.equipped),he=J.inventory.length,pe=e.filter(xe=>{const Oe=r.find(Ue=>Ue.id===xe.assignmentId);return(Oe==null?void 0:Oe.classType)===W}),Z=Math.round(pe.reduce((xe,Oe)=>{var Ue;return xe+(((Ue=Oe.metrics)==null?void 0:Ue.engagementTime)||0)},0)/60);return{cls:W,classXp:H,gearScore:ie,inventoryCount:he,resourcesViewed:pe.length,totalTime:Z}}),[t,e,r,y]),w=A.useMemo(()=>{const W=new Map;return e.forEach(H=>{var Z,ne,ae,xe,Oe,Ue,Xe;const J=r.find(Ye=>Ye.id===H.assignmentId),ie=H.assignmentId,he=W.get(ie),pe=((Z=H.metrics)==null?void 0:Z.engagementTime)||0;he?(he.visits++,he.totalTime+=pe,he.totalKeystrokes+=((ne=H.metrics)==null?void 0:ne.keystrokes)||0,he.totalClicks+=((ae=H.metrics)==null?void 0:ae.clickCount)||0,he.totalPastes+=((xe=H.metrics)==null?void 0:xe.pasteCount)||0,he.statuses.push(H.status),H.submittedAt&&(!he.lastVisit||H.submittedAt>he.lastVisit)&&(he.lastVisit=H.submittedAt)):W.set(ie,{title:(J==null?void 0:J.title)||H.assignmentTitle,classType:(J==null?void 0:J.classType)||"Unknown",category:(J==null?void 0:J.category)||"Supplemental",visits:1,totalTime:pe,totalKeystrokes:((Oe=H.metrics)==null?void 0:Oe.keystrokes)||0,totalClicks:((Ue=H.metrics)==null?void 0:Ue.clickCount)||0,totalPastes:((Xe=H.metrics)==null?void 0:Xe.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(W.values()).sort((H,J)=>J.totalTime-H.totalTime)},[e,r]),j=A.useMemo(()=>e.filter(W=>W.submittedAt).sort((W,H)=>new Date(H.submittedAt).getTime()-new Date(W.submittedAt).getTime()).slice(0,10).map(W=>{var H,J;return{...W,assignmentTitle:((H=r.find(ie=>ie.id===W.assignmentId))==null?void 0:H.title)||W.assignmentTitle,classType:((J=r.find(ie=>ie.id===W.assignmentId))==null?void 0:J.classType)||"Unknown"}}),[e,r]),O=Math.round(e.reduce((W,H)=>{var J;return W+(((J=H.metrics)==null?void 0:J.engagementTime)||0)},0)/60),R=A.useMemo(()=>{const W=new Set;e.forEach(Z=>{if(Z.submittedAt){const ne=new Date(Z.submittedAt),ae=ne.getFullYear(),xe=new Date(ae,0,1),Oe=Math.ceil(((ne.getTime()-xe.getTime())/864e5+xe.getDay()+1)/7);W.add(`${ae}-W${Oe}`)}});const H=new Date,J=H.getFullYear(),ie=new Date(J,0,1),he=Math.ceil(((H.getTime()-ie.getTime())/864e5+ie.getDay()+1)/7);let pe=0;for(let Z=he;Z>0&&W.has(`${J}-W${Z}`);Z--)pe++;return pe},[e]),L=A.useMemo(()=>{const W=[],H=new Date;for(let ae=6;ae>=0;ae--){const xe=new Date(H);xe.setDate(xe.getDate()-ae);const Oe=xe.toISOString().split("T")[0],Ue=e.filter(Ye=>{var Q;return(Q=Ye.submittedAt)==null?void 0:Q.startsWith(Oe)}),Xe=Ue.reduce((Ye,Q)=>{var me;return Ye+(((me=Q.metrics)==null?void 0:me.engagementTime)||0)},0);W.push({label:xe.toLocaleDateString([],{weekday:"short"}),time:Math.round(Xe/60),subs:Ue.length})}const J=W.slice(4).reduce((ae,xe)=>ae+xe.time,0),ie=W.slice(0,4).reduce((ae,xe)=>ae+xe.time,0),he=J/3,pe=ie/4,Z=he>pe*1.2?"up":he<pe*.6?"down":"flat",ne=Math.max(1,...W.map(ae=>ae.time));return{days:W,trend:Z,maxTime:ne}},[e]);return du.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),s.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:s.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?s.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):s.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),((B=t.gamification)==null?void 0:B.codename)&&s.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),s.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:s.jsx(Na,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(ka,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(eo,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[O,"m"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Zs,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(Ud,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:v}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(jN,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:h}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[s.jsx(zd,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),s.jsxs("div",{className:"text-lg font-bold text-white",children:[R,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),s.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([W,H])=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:W}),s.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),s.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},W))})]}),n.length>0&&(()=>{const W=n[0],H=Ml[W.bucket];return H?s.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[s.jsxs("span",{children:["ES: ",W.engagementScore]}),s.jsxs("span",{children:["Subs: ",W.metrics.submissionCount]}),s.jsxs("span",{children:["Days Active: ",W.metrics.activityDays,"/7"]}),s.jsxs("span",{children:["Paste Ratio: ",Math.round(W.metrics.avgPasteRatio*100),"%"]}),s.jsxs("span",{children:["Time: ",Math.round(W.metrics.totalTime/60),"m"]})]}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[s.jsx(mH,{className:"w-3.5 h-3.5 text-amber-400"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),s.jsx("p",{className:"text-xs text-gray-300 mb-2",children:W.recommendation.action}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:W.recommendation.categories.map(J=>s.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:J},J))})]}),(()=>{const J=r.filter(ie=>ie.classType===W.classType&&ie.status==="ACTIVE"&&W.recommendation.categories.includes(ie.category||"Supplemental")).slice(0,3);return J.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),s.jsx("div",{className:"space-y-1",children:J.map(ie=>s.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ie.category}),s.jsx("span",{className:"text-white truncate",children:ie.title})]},ie.id))})]})})()]}):null})(),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),s.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&s.jsx(R2,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&s.jsx(kle,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&s.jsx(yH,{className:"w-3.5 h-3.5 text-gray-400"}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),s.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((W,H)=>{const J=L.maxTime>0?Math.max(2,W.time/L.maxTime*100):2,ie=H===L.days.length-1;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[s.jsx("div",{className:`w-full rounded-t transition-all ${W.time>0?ie?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${J}%`}}),s.jsx("span",{className:"text-[8px] text-gray-500",children:W.label}),s.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[W.time,"m  ",W.subs," sub",W.subs!==1?"s":""]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),s.jsx("div",{className:"space-y-3",children:S.map(W=>s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:W.cls}),s.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[W.classXp.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[s.jsxs("span",{children:[s.jsx(No,{className:"w-3 h-3 inline mr-0.5"}),W.gearScore," GS"]}),s.jsxs("span",{children:[s.jsx(jN,{className:"w-3 h-3 inline mr-0.5"}),W.inventoryCount," items"]}),s.jsxs("span",{children:[s.jsx(Zs,{className:"w-3 h-3 inline mr-0.5"}),W.resourcesViewed," viewed"]}),s.jsxs("span",{children:[s.jsx(eo,{className:"w-3 h-3 inline mr-0.5"}),W.totalTime,"m"]})]})]},W.cls))})]}),w.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center justify-between w-full mb-1",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[s.jsx(uH,{className:"w-3.5 h-3.5"})," Resource Performance",s.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?s.jsx(j2,{className:"w-4 h-4 text-gray-500"}):s.jsx(Ni,{className:"w-4 h-4 text-gray-500"})]}),i&&s.jsx("div",{className:"space-y-2 mt-3",children:w.map((W,H)=>{const J=Math.round(W.totalTime/60),ie=W.totalKeystrokes>20&&W.totalClicks>5?"high":W.totalClicks>2?"medium":"low",he=ie==="high"?"text-green-400":ie==="medium"?"text-yellow-400":"text-red-400",pe=ie==="high"?"bg-green-500":ie==="medium"?"bg-yellow-500":"bg-red-500";return s.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:W.title}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[W.classType,"  ",W.category]})]}),s.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${pe}`,title:`${ie} engagement`})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Time"}),s.jsxs("div",{className:"text-white font-bold",children:[J,"m"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Visits"}),s.jsx("div",{className:"text-white font-bold",children:W.visits})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Keys"}),s.jsx("div",{className:"text-white font-bold",children:W.totalKeystrokes})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-500",children:"Quality"}),s.jsx("div",{className:`font-bold capitalize ${he}`,children:ie})]})]}),W.lastVisit&&s.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(W.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),j.length===0?s.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):s.jsx("div",{className:"space-y-2",children:j.map(W=>{var J;const H=Math.round((((J=W.metrics)==null?void 0:J.engagementTime)||0)/60);return s.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-white font-bold truncate",children:W.assignmentTitle}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[W.classType,"  ",H,"m engaged"]})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:W.submittedAt?new Date(W.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},W.id)})})]}),_>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),s.jsx("div",{className:"space-y-2",children:(K=($=t.gamification)==null?void 0:$.activeQuests)==null?void 0:K.filter(W=>W.status==="ACCEPTED"||W.status==="DEPLOYED").map(W=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ud,{className:`w-3.5 h-3.5 ${W.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),s.jsx("span",{className:"text-xs text-white",children:W.questId})]}),s.jsx("span",{className:`text-[10px] font-bold uppercase ${W.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:W.status})]},W.questId))})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[s.jsxs("div",{children:["Email: ",t.email]}),s.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),s.jsxs("div",{children:["Enrolled: ",y.join(", ")||"None"]}),s.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),s.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&s.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},Fde=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=ol(),[a,i]=A.useState(null),[o,c]=A.useState([]),[d,h]=A.useState([]),[p,m]=A.useState([]),[y,v]=A.useState([]),[_,S]=A.useState(Date.now()),[w,j]=A.useState(null),[O,R]=A.useState("xp"),[L,C]=A.useState("desc"),[P,E]=A.useState(""),[N,k]=A.useState(""),z=Q=>{O===Q?C(me=>me==="asc"?"desc":"asc"):(R(Q),C("asc"))},D=({label:Q,col:me,className:te})=>s.jsx("th",{className:`cursor-pointer select-none group p-3 ${te??""}`,onClick:()=>z(me),children:s.jsxs("div",{className:`flex items-center gap-1 ${te!=null&&te.includes("text-center")?"justify-center":te!=null&&te.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:Q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(j2,{className:`w-2.5 h-2.5 -mb-0.5 ${O===me&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Ni,{className:`w-2.5 h-2.5 -mt-0.5 ${O===me&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});A.useEffect(()=>{const Q=Re.subscribeToChatFlags(c),me=Re.subscribeToAnnouncements(h),te=Re.subscribeToStudentAlerts(m),re=Re.subscribeToStudentBuckets(v),Pe=setInterval(()=>S(Date.now()),6e4);return()=>{Q(),me(),te(),re(),clearInterval(Pe)}},[]);const B=t.filter(Q=>Q.role==="STUDENT"),$=A.useMemo(()=>{const Q=new Set;return B.forEach(me=>{me.section&&Q.add(me.section)}),Array.from(Q).sort()},[B]),K=A.useMemo(()=>{const Q=new Map;for(const me of p){const te=Q.get(me.studentId),re={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!te||(re[me.riskLevel]||0)>(re[te.riskLevel]||0))&&Q.set(me.studentId,me)}return Q},[p]),W=A.useMemo(()=>{const Q=new Map;for(const me of y)Q.has(me.studentId)||Q.set(me.studentId,me);return Q},[y]),H=A.useMemo(()=>{const Q={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},me=new Set;for(const te of y)me.has(te.studentId)||(me.add(te.studentId),Q[te.bucket]!==void 0&&Q[te.bucket]++);return Q},[y]),J=B.length,ie=Math.round(B.reduce((Q,me)=>{var te;return Q+(((te=me.stats)==null?void 0:te.totalTime)||0)},0)/(J||1)),he=B.reduce((Q,me)=>{var te;return Q+(((te=me.stats)==null?void 0:te.problemsCompleted)||0)},0),pe=B.reduce((Q,me)=>{var te;return Q+(((te=me.gamification)==null?void 0:te.xp)||0)},0),Z=B.filter(Q=>Q.mutedUntil&&new Date(Q.mutedUntil).getTime()>_),ne=async Q=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Re.muteUser(Q,0)},ae=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],xe=async(Q,me)=>{await Re.muteUser(Q,me),j(null)},Oe=async(Q,me)=>{const te=new Date(me).getTime(),re=new Date(Math.max(te,Date.now())+3600*1e3),Pe=Math.ceil((re.getTime()-Date.now())/6e4);await Re.muteUser(Q,Pe)},Ue=({label:Q,value:me,icon:te,color:re})=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[s.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${re}`,children:te}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:me}),s.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:Q})]}),s.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${re}`})]}),Xe=Q=>{const te=new Date(Q).getTime()-_;if(te<=0)return"Expired";const re=Math.ceil(te/6e4);return re>60?`${Math.ceil(re/60)} hrs`:`${re} mins`},Ye=Q=>{if(!Q)return"Never";const me=new Date(Q),te=Date.now()-me.getTime(),re=Math.floor(te/6e4);if(re<1)return"Just now";if(re<60)return`${re}m ago`;const Pe=Math.floor(re/60);return Pe<24?`${Pe}h ago`:me.toLocaleDateString()};return s.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[s.jsx("div",{className:"flex justify-between items-end",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),s.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Ue,{label:"Total Students",value:J,icon:s.jsx(is,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),s.jsx(Ue,{label:"Total XP Awarded",value:pe.toLocaleString(),icon:s.jsx(ka,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),s.jsx(Ue,{label:"Resources Viewed",value:he,icon:s.jsx(Jm,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),s.jsx(Ue,{label:"Avg Active Time",value:`${ie}m`,icon:s.jsx(eo,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${o.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${o.length>0?"text-red-400":"text-white"}`,children:[o.length>0?s.jsx(Os,{className:"w-5 h-5"}):s.jsx(O2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${o.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:o.length>0?`${o.length} Issues`:"Secure"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(Zm,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:o.map(Q=>s.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-bold text-white",children:[Q.senderName," ",s.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",Q.classType]})]}),s.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',Q.content,'"']})]}),s.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(Q.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:async()=>{await Re.resolveFlag(Q.id),Q.messageId&&await Re.unflagMessage(Q.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(uu,{className:"w-3 h-3"})," Dismiss"]}),s.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Re.resolveFlag(Q.id),Q.messageId&&await Re.deleteMessage(Q.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[s.jsx(aa,{className:"w-3 h-3"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>j(w===Q.id?null:Q.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:s.jsx(Dx,{className:"w-3 h-3"})}),w===Q.id&&s.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",Q.senderName]}),ae.map(me=>s.jsx("button",{onClick:()=>xe(Q.senderId,me.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:me.label},me.minutes))]})]})]})]},Q.id))})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Dx,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),Z.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[s.jsx(is,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[s.jsx("th",{className:"pb-2",children:"Operative"}),s.jsx("th",{className:"pb-2",children:"Remaining"}),s.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Z.map(Q=>s.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("div",{className:"text-sm font-bold text-white",children:Q.name}),s.jsx("div",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("td",{className:"py-3",children:s.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:Xe(Q.mutedUntil)})}),s.jsx("td",{className:"py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Oe(Q.id,Q.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:s.jsx(Lx,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>ne(Q.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:s.jsx(Zm,{className:"w-3.5 h-3.5"})})]})})]},Q.id))})]})})]})]}),p.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(tR,{className:"w-5 h-5"}),"Early Warning System"]}),s.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),s.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(Q=>{const me={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},te={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},re=Q.bucket?Ml[Q.bucket]:null;return s.jsx("div",{className:`border p-4 rounded-xl ${me[Q.riskLevel]||me.LOW}`,children:s.jsxs("div",{className:"flex justify-between items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${te[Q.riskLevel]||te.LOW}`,children:Q.riskLevel}),re&&s.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${re.bgColor} ${re.color} ${re.borderColor} border`,children:re.label}),s.jsx("span",{className:"text-sm font-bold text-white truncate",children:Q.studentName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:Q.classType})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:Q.message}),re&&s.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:re.description}),s.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["ES: ",Q.engagementScore]}),s.jsxs("span",{children:["Class Avg: ",Q.classMean]}),s.jsx("span",{children:new Date(Q.createdAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{onClick:()=>i(Q.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),s.jsx("button",{onClick:async()=>{await Re.dismissAlert(Q.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},Q.id)})})]}),y.length>0&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(tR,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),s.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Ml).map(Q=>{const me=Ml[Q],te=H[Q];return s.jsxs("div",{className:`border rounded-xl p-3 ${me.borderColor} ${me.bgColor} transition hover:scale-[1.02]`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:`text-xs font-bold ${me.color}`,children:me.label}),s.jsx("span",{className:"text-lg font-bold text-white",children:te})]}),s.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:me.description})]},Q)})}),(()=>{const Q=Object.values(H).reduce((me,te)=>me+te,0);return Q===0?null:s.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Ml).map(me=>{const te=H[me]/Q*100;if(te===0)return null;const re={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return s.jsx("div",{className:`${re[me]||"bg-gray-500"} transition-all`,style:{width:`${te}%`},title:`${Ml[me].label}: ${H[me]} (${Math.round(te)}%)`},me)})})})()]}),s.jsx("div",{className:"mt-8",children:s.jsx(Bde,{announcements:d,studentIds:B.map(Q=>Q.id),availableSections:$})}),s.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Student Engagement Ranking"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(C2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:P,onChange:Q=>E(Q.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),s.jsxs("select",{value:N,onChange:Q=>k(Q.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Ml).map(Q=>s.jsx("option",{value:Q,children:Ml[Q].label},Q))]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[s.jsx(D,{label:"Student",col:"name"}),s.jsx(D,{label:"Class",col:"class"}),s.jsx(D,{label:"Last Seen",col:"lastSeen",className:"text-center"}),s.jsx(D,{label:"Total Time",col:"time",className:"text-center"}),s.jsx(D,{label:"Resources",col:"resources",className:"text-center"}),s.jsx(D,{label:"XP",col:"xp",className:"text-right"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const me=[...B.filter(re=>{var it;const Pe=!P||re.name.toLowerCase().includes(P.toLowerCase())||re.email.toLowerCase().includes(P.toLowerCase()),Ge=!N||((it=W.get(re.id))==null?void 0:it.bucket)===N;return Pe&&Ge})].sort((re,Pe)=>{var Ge,it,et,Pt,Me,tt,bt,St;switch(O){case"name":return L==="asc"?re.name.localeCompare(Pe.name):Pe.name.localeCompare(re.name);case"class":return L==="asc"?(re.classType||"").localeCompare(Pe.classType||""):(Pe.classType||"").localeCompare(re.classType||"");case"lastSeen":{const Fe=re.lastLoginAt?new Date(re.lastLoginAt).getTime():0,ce=Pe.lastLoginAt?new Date(Pe.lastLoginAt).getTime():0;return L==="asc"?Fe-ce:ce-Fe}case"time":{const Fe=((Ge=re.stats)==null?void 0:Ge.totalTime)||0,ce=((it=Pe.stats)==null?void 0:it.totalTime)||0;return L==="asc"?Fe-ce:ce-Fe}case"resources":{const Fe=((et=re.stats)==null?void 0:et.problemsCompleted)||0,ce=((Pt=Pe.stats)==null?void 0:Pt.problemsCompleted)||0;return L==="asc"?Fe-ce:ce-Fe}case"xp":default:{const Fe=((tt=(Me=re.gamification)==null?void 0:Me.classXp)==null?void 0:tt[re.classType||""])||0,ce=((St=(bt=Pe.gamification)==null?void 0:bt.classXp)==null?void 0:St[Pe.classType||""])||0;return L==="asc"?Fe-ce:ce-Fe}}}),te=Math.max(1,...B.map(re=>{var Pe,Ge;return((Ge=(Pe=re.gamification)==null?void 0:Pe.classXp)==null?void 0:Ge[re.classType||""])||0}));return me.map(re=>{var ce,We,nt,ut;const Pe=((We=(ce=re.gamification)==null?void 0:ce.classXp)==null?void 0:We[re.classType||""])||0,Ge=Math.round(Pe/te*100),it=re.lastLoginAt,et=it?Date.now()-new Date(it).getTime():1/0,Pt=et<36e5?"text-green-400":et<864e5?"text-yellow-400":et<1/0?"text-red-400":"text-gray-600",Me=et<36e5?"bg-green-500":et<864e5?"bg-yellow-500":et<1/0?"bg-red-500":"bg-gray-600",tt=K.get(re.id),bt={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},St=W.get(re.id),Fe=St?Ml[St.bucket]:null;return s.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(tt==null?void 0:tt.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(re.id),children:[s.jsx("td",{className:"p-3 font-bold text-white",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[re.avatarUrl?s.jsx("img",{src:re.avatarUrl,alt:re.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:re.name.charAt(0)}),s.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Me}`})]}),s.jsx("span",{className:"truncate max-w-[120px]",children:re.name}),tt&&bt[tt.riskLevel]&&s.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${bt[tt.riskLevel]}`,title:`${tt.riskLevel} risk: ${tt.reason}`}),Fe&&s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${Fe.bgColor} ${Fe.color} border ${Fe.borderColor}`,title:Fe.description,children:Fe.label})]})}),s.jsx("td",{className:"p-3 text-sm text-gray-400",children:re.classType}),s.jsx("td",{className:`p-3 text-center text-xs font-mono ${Pt}`,children:Ye(re.lastLoginAt)}),s.jsxs("td",{className:"p-3 text-center text-white",children:[((nt=re.stats)==null?void 0:nt.totalTime)||0,"m"]}),s.jsx("td",{className:"p-3 text-center text-white",children:((ut=re.stats)==null?void 0:ut.problemsCompleted)||0}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Ge}%`}})}),s.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Pe})]})})]},re.id)})})()})]})})]}),a&&(()=>{const Q=B.find(me=>me.id===a);return Q?s.jsx(Vde,{student:Q,submissions:r.filter(me=>me.userId===a),assignments:e,bucketProfiles:y.filter(me=>me.studentId===a),onClose:()=>i(null)}):null})()]})},qde=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=mi(),{confirm:i}=ol(),[o,c]=A.useState(new Set),[d,h]=A.useState(Mr.AP_PHYSICS),[p,m]=A.useState(!1),[y,v]=A.useState(!1),[_,S]=A.useState({}),w=(be,st)=>{S(Et=>{const Dt=Et[be]||{col:"name",dir:"asc"};return{...Et,[be]:{col:st,dir:Dt.col===st&&Dt.dir==="asc"?"desc":"asc"}}})},j=({label:be,col:st,type:Et,className:Dt})=>{const $t=_[Et]||{col:"name",dir:"asc"},Ze=$t.col===st;return s.jsx("th",{className:`cursor-pointer select-none group p-4 ${Dt??""}`,onClick:()=>w(Et,st),children:s.jsxs("div",{className:`flex items-center gap-1 ${Dt!=null&&Dt.includes("text-center")?"justify-center":"justify-start"}`,children:[s.jsx("span",{children:be}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(j2,{className:`w-2.5 h-2.5 -mb-0.5 ${Ze&&$t.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Ni,{className:`w-2.5 h-2.5 -mt-0.5 ${Ze&&$t.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[O,R]=A.useState(""),[L,C]=A.useState(Mr.AP_PHYSICS),[P,E]=A.useState(""),[N,k]=A.useState(""),[z,D]=A.useState(!1),[B,$]=A.useState(!1),[K,W]=A.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,J]=A.useState(10),[ie,he]=A.useState("single"),[pe,Z]=A.useState([]),[ne,ae]=A.useState(!1),xe=A.useRef(null),[Oe,Ue]=A.useState(null),[Xe,Ye]=A.useState(""),[Q,me]=A.useState(""),te=t.filter(be=>be.role==="STUDENT"),re=A.useMemo(()=>{const be=new Set;return te.forEach(st=>{st.classSections&&Object.values(st.classSections).forEach(Et=>{Et&&be.add(Et)}),st.section&&be.add(st.section)}),Array.from(be).sort()},[te]),Pe=async(be,st,Et)=>{try{Et?await Re.updateUserClassSection(be,Et,st):await Re.updateUserSection(be,st),Ue(null),Ye(""),me(""),a.success(`Section updated to ${st||"none"}${Et?` for ${Et}`:""}`)}catch{a.error("Failed to update section")}},Ge=async be=>{if(o.size!==0)try{await Promise.all(Array.from(o).map(st=>Re.updateUserSection(st,be))),c(new Set),a.success(`Set ${o.size} students to ${be}`)}catch{a.error("Failed to bulk update sections")}},it=A.useMemo(()=>e.filter(be=>!t.some(st=>st.email.toLowerCase()===be.email.toLowerCase())),[e,t]),et=A.useMemo(()=>[...Array.from(new Set([...Object.values(Mr).filter(st=>st!==Mr.UNCATEGORIZED),...r.map(st=>st.className)])).sort(),Mr.UNCATEGORIZED],[r]),Pt=be=>{const st=te.filter($t=>{var Ze,ir;return((Ze=$t.enrolledClasses)==null?void 0:Ze.includes(be))||be===Mr.UNCATEGORIZED&&(((ir=$t.enrolledClasses)==null?void 0:ir.length)===0||!$t.enrolledClasses)}),Et=st.every($t=>o.has($t.id)),Dt=new Set(o);st.forEach($t=>{Et?Dt.delete($t.id):Dt.add($t.id)}),c(Dt)},Me=be=>{const st=new Set(o);st.has(be)?st.delete(be):st.add(be),c(st)},tt=async()=>{if(o.size>0){const be=Array.from(o).map(async st=>{const Et=t.find(Dt=>Dt.id===st);if(Et){const Dt=Et.enrolledClasses||[],$t=Array.from(new Set([...Dt.filter(Ze=>Ze!==Mr.UNCATEGORIZED),d]));await Re.updateUserEnrolledClasses(st,$t)}});await Promise.all(be),c(new Set)}},bt=async be=>{if(o.size>0){if(!await i({message:`Remove ${o.size} students from ${be}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const st=Array.from(o).map(async Et=>{const Dt=t.find($t=>$t.id===Et);if(Dt){const Ze=(Dt.enrolledClasses||[]).filter(ir=>ir!==be);await Re.updateUserEnrolledClasses(Et,Ze)}});await Promise.all(st),c(new Set)}},St=async(be,st)=>{if(await i({message:`Remove ${be.name} from ${st}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Dt=(be.enrolledClasses||[]).filter($t=>$t!==st);await Re.updateUserEnrolledClasses(be.id,Dt)}},Fe=async(be,st)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${st}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Re.removeUser(be)},ce=async be=>{be!==Mr.UNCATEGORIZED&&await i({message:`Delete group config ${be}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Re.deleteClassConfig(be)},We=async be=>{await i({message:`Cancel invite for ${be}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Re.removeFromWhitelist(be)},nt=(be,st)=>{be!==Mr.UNCATEGORIZED&&(k(be),D(!0),st?(W(st.features),J(st.xpPerMinute||10)):(W({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),J(10)),v(!0))},ut=be=>{be.preventDefault(),n(O,L),P.trim()&&Re.updateWhitelistSection(O,P.trim()),R(""),E(""),m(!1)},dt=be=>{var Dt;const st=(Dt=be.target.files)==null?void 0:Dt[0];if(!st)return;const Et=new FileReader;Et.onload=$t=>{var Gt,Ut;const Ze=(Gt=$t.target)==null?void 0:Gt.result;if(!Ze)return;const ir=Ze.split(/\r?\n/).filter(_t=>_t.trim()),br=(Ut=ir[0])!=null&&Ut.toLowerCase().includes("email")?1:0,Lr=new Set(e.map(_t=>_t.email.toLowerCase())),hn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,xr=ir.slice(br).map(_t=>{const Br=_t.includes("	")?_t.split("	"):_t.split(","),sn=(Br[0]||"").trim().toLowerCase(),Wr=(Br[1]||"").trim()||Mr.AP_PHYSICS,$r=(Br[2]||"").trim();let fn="pending";return hn.test(sn)?Lr.has(sn)&&(fn="duplicate"):fn="invalid",{email:sn,classType:Wr,section:$r,status:fn}}).filter(_t=>_t.email.length>0);Z(xr)},Et.readAsText(st),be.target.value=""},Ft=async()=>{const be=pe.filter(Et=>Et.status==="pending");if(be.length===0)return;ae(!0);let st=0;for(const Et of be)try{await Re.addToWhitelist(Et.email,Et.classType),Et.section&&await Re.updateWhitelistSection(Et.email,Et.section),Et.status="success",st++}catch{Et.status="invalid"}Z([...pe]),ae(!1),a.success(`${st} operative${st!==1?"s":""} imported successfully.`),pe.every(Et=>Et.status==="success"||Et.status==="duplicate")&&setTimeout(()=>{m(!1),Z([]),he("single")},1500)},tr=async be=>{if(be.preventDefault(),!!N){$(!0);try{await Re.saveClassConfig({id:N,className:N,features:K,xpPerMinute:H}),k(""),v(!1),D(!1)}catch(st){console.error("Failed to save config:",st),a.error("Failed to save class configuration.")}finally{$(!1)}}},kr=be=>{const st=be===Mr.UNCATEGORIZED,Et=_[be]||{col:"name",dir:"asc"},Dt=[...te.filter(Ze=>{var ir;return((ir=Ze.enrolledClasses)==null?void 0:ir.includes(be))||st&&(!Ze.enrolledClasses||Ze.enrolledClasses.length===0)})].sort((Ze,ir)=>{var br,Lr,hn,xr;switch(Et.col){case"section":{const Gt=Ze.section||"",Ut=ir.section||"";return Et.dir==="asc"?Gt.localeCompare(Ut):Ut.localeCompare(Gt)}case"status":{const Gt=Ze.isWhitelisted?1:0,Ut=ir.isWhitelisted?1:0;return Et.dir==="asc"?Gt-Ut:Ut-Gt}case"lastSeen":{const Gt=Ze.lastLoginAt?new Date(Ze.lastLoginAt).getTime():0,Ut=ir.lastLoginAt?new Date(ir.lastLoginAt).getTime():0;return Et.dir==="asc"?Gt-Ut:Ut-Gt}case"xp":{const Gt=((Lr=(br=Ze.gamification)==null?void 0:br.classXp)==null?void 0:Lr[be])||0,Ut=((xr=(hn=ir.gamification)==null?void 0:hn.classXp)==null?void 0:xr[be])||0;return Et.dir==="asc"?Gt-Ut:Ut-Gt}case"name":default:return Et.dir==="asc"?Ze.name.localeCompare(ir.name):ir.name.localeCompare(Ze.name)}}),$t=r.find(Ze=>Ze.className===be);return s.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${st?"opacity-90":""}`,children:[s.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${st?"bg-orange-500/10":"bg-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:`font-bold text-lg tracking-wide ${st?"text-orange-300":"text-white"}`,children:[st&&s.jsx(hH,{className:"w-5 h-5 inline mr-2 mb-1"}),be]}),s.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${st?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Dt.length," Registered"]}),!st&&s.jsx("button",{onClick:()=>nt(be,$t),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:s.jsx(eg,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[o.size>0&&Array.from(o).some(Ze=>Dt.find(ir=>ir.id===Ze))&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("select",{onChange:Ze=>{Ze.target.value&&Ge(Ze.target.value),Ze.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),s.jsx("option",{value:"",children:"No Section"}),re.map(Ze=>s.jsx("option",{value:Ze,children:Ze},Ze))]})}),s.jsxs("button",{onClick:()=>bt(be),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[s.jsx(Ile,{className:"w-3 h-3"})," Remove Selected"]})]}),!st&&s.jsxs("button",{onClick:()=>ce(be),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[s.jsx(aa,{className:"w-3 h-3"}),"Config"]})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[s.jsx("th",{className:"w-12 p-4 text-center",children:Dt.length>0&&s.jsx("button",{onClick:()=>Pt(be),className:"hover:text-purple-400 transition",children:s.jsx(uR,{className:"w-4 h-4"})})}),s.jsx(j,{label:"Operative",col:"name",type:be}),s.jsx(j,{label:"Section",col:"section",type:be,className:"text-center"}),s.jsx(j,{label:"System Status",col:"status",type:be,className:"text-center"}),s.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:Dt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:st?"No restricted operatives found.":"No students registered in this roster yet."})}):Dt.map(Ze=>{var ir;return s.jsxs("tr",{className:`hover:bg-white/5 transition group ${o.has(Ze.id)?"bg-purple-500/10":""}`,children:[s.jsx("td",{className:"p-4 text-center",children:s.jsx("button",{onClick:()=>Me(Ze.id),className:"text-gray-500 hover:text-purple-400 transition",children:o.has(Ze.id)?s.jsx(Ele,{className:"w-4 h-4 text-purple-500"}):s.jsx(uR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:Ze.avatarUrl,alt:Ze.name,className:"w-8 h-8 rounded-full border border-white/10"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:Ze.name}),s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:Ze.email})]})]})}),s.jsx("td",{className:"p-4 text-center",children:Oe===Ze.id?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((ir=Ze.enrolledClasses)!=null&&ir.length?Ze.enrolledClasses:[Ze.classType].filter(Boolean)).map(br=>{var hn;if(!br)return null;const Lr=((hn=Ze.classSections)==null?void 0:hn[br])||(Ze.section&&Ze.classType===br?Ze.section:"");return s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[s.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:br,children:br}),s.jsxs("select",{value:Lr,onChange:xr=>{const Gt=xr.target.value;Gt==="__custom__"?(Ye("__custom__"),me("")):Pe(Ze.id,Gt,br)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[s.jsx("option",{value:"",children:"None"}),re.map(xr=>s.jsx("option",{value:xr,children:xr},xr)),s.jsx("option",{value:"__custom__",children:"+ New"})]})]},br)}),Xe==="__custom__"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{value:Q,onChange:br=>me(br.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:br=>{var Lr;if(br.key==="Enter"&&Q.trim()){const hn=(Lr=Ze.enrolledClasses)!=null&&Lr.length?Ze.enrolledClasses:[Ze.classType].filter(Boolean);hn[0]&&Pe(Ze.id,Q.trim(),hn[0])}},autoFocus:!0}),s.jsx("button",{onClick:()=>{var br;if(Q.trim()){const Lr=(br=Ze.enrolledClasses)!=null&&br.length?Ze.enrolledClasses:[Ze.classType].filter(Boolean);Lr[0]&&Pe(Ze.id,Q.trim(),Lr[0])}},className:"text-green-400 hover:text-green-300 p-1",children:s.jsx(Mi,{className:"w-3 h-3"})})]}),s.jsx("button",{onClick:()=>{Ue(null),Ye(""),me("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):s.jsx("button",{onClick:()=>{Ue(Ze.id),Ye(""),me("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${Ze.classSections&&Object.keys(Ze.classSections).length>0||Ze.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:Ze.classSections&&Object.keys(Ze.classSections).length>0?Object.values(Ze.classSections).filter(Boolean).join(", ")||"Assign":Ze.section||"Assign"})}),s.jsx("td",{className:"p-4 text-center",children:s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${Ze.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[Ze.isWhitelisted?s.jsx(lR,{className:"w-3 h-3"}):s.jsx(O2,{className:"w-3 h-3"}),Ze.isWhitelisted?"Authorized":"Restricted"]})}),s.jsx("td",{className:"p-4 text-center",children:s.jsx("div",{className:"flex items-center justify-center gap-2",children:s.jsx("button",{onClick:()=>st?Fe(Ze.id,Ze.name):St(Ze,be),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:st?"Permanently Delete":"Remove from this Class",children:s.jsx(Na,{className:"w-4 h-4"})})})})]},Ze.id)})})]})})]},be)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),s.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>{k(""),W({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),D(!1),v(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[s.jsx(eg,{className:"w-4 h-4"}),"Class Config"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[s.jsx(Bx,{className:"w-4 h-4"}),"Invite Student"]})]})]}),it.length>0&&s.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[s.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[s.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[s.jsx(fle,{className:"w-4 h-4"})," Pending Class Invitations (",it.length,")"]}),s.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),s.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:it.map(be=>s.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:be.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(lR,{className:"w-3 h-3 text-amber-500"}),s.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(be.classTypes||[be.classType]).join(", ")," Access"]})]})]}),s.jsx("button",{onClick:()=>We(be.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:s.jsx(aa,{className:"w-3.5 h-3.5"})})]},be.email))})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx("select",{value:d,onChange:be=>h(be.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:et.filter(be=>be!==Mr.UNCATEGORIZED).map(be=>s.jsxs("option",{value:be,children:["Apply ",be," Access"]},be))}),s.jsx(Ni,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),s.jsxs("button",{onClick:tt,disabled:o.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[s.jsx(Mi,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),s.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[o.size," SELECTION ACTIVE"]})]}),s.jsx("div",{className:"pb-12",children:et.map(be=>kr(be))}),s.jsxs(Ti,{isOpen:p,onClose:()=>{m(!1),Z([]),he("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[s.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[s.jsxs("button",{onClick:()=>{he("single"),Z([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ie==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(Bx,{className:"w-3.5 h-3.5"})," Single"]}),s.jsxs("button",{onClick:()=>he("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ie==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[s.jsx(t0,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ie==="single"?s.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),s.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:O,onChange:be=>R(be.target.value),placeholder:"student@gmail.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),s.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:be=>C(be.target.value),children:et.filter(be=>be!==Mr.UNCATEGORIZED).map(be=>s.jsx("option",{value:be,children:be},be))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),s.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:P,onChange:be=>E(be.target.value),placeholder:"e.g. Period 3, Block A"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[s.jsx("input",{type:"file",ref:xe,accept:".csv,.tsv,.txt",onChange:dt,className:"hidden"}),pe.length===0?s.jsxs(s.Fragment,{children:[s.jsx(t0,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),s.jsx("button",{onClick:()=>{var be;return(be=xe.current)==null?void 0:be.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",s.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),s.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:s.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",s.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",s.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",s.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(Jm,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm font-bold text-white",children:[pe.length," records parsed"]}),s.jsx("button",{onClick:()=>{Z([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),pe.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:s.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[s.jsx("th",{className:"p-2 pl-3",children:"Email"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Section"}),s.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:pe.map((be,st)=>s.jsxs("tr",{className:be.status==="invalid"?"bg-red-500/5":be.status==="duplicate"?"bg-yellow-500/5":be.status==="success"?"bg-green-500/5":"",children:[s.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:be.email}),s.jsx("td",{className:"p-2 text-gray-400",children:be.classType}),s.jsx("td",{className:"p-2 text-gray-500",children:be.section||""}),s.jsx("td",{className:"p-2 pr-3 text-right",children:s.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${be.status==="pending"?"bg-blue-500/20 text-blue-400":be.status==="success"?"bg-green-500/20 text-green-400":be.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:be.status})})]},st))})]})}),s.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{className:"text-blue-400",children:[pe.filter(be=>be.status==="pending").length," ready"]}),s.jsxs("span",{className:"text-yellow-400",children:[pe.filter(be=>be.status==="duplicate").length," duplicates"]}),s.jsxs("span",{className:"text-red-400",children:[pe.filter(be=>be.status==="invalid").length," invalid"]}),pe.some(be=>be.status==="success")&&s.jsxs("span",{className:"text-green-400",children:[pe.filter(be=>be.status==="success").length," imported"]})]})}),pe.filter(be=>be.status==="duplicate").length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[s.jsx(Os,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),s.jsx("button",{onClick:Ft,disabled:ne||pe.filter(be=>be.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(rs,{className:"w-4 h-4 animate-spin"})," Importing..."]}):s.jsxs(s.Fragment,{children:["Import ",pe.filter(be=>be.status==="pending").length," Operatives"]})})]})]})]}),s.jsx(Ti,{isOpen:y,onClose:()=>v(!1),title:z?"Edit Class Node Config":"Initialize New Class Node",children:s.jsxs("form",{onSubmit:tr,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),s.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:N,onChange:be=>k(be.target.value),placeholder:"e.g. AP Physics Period 4"}),z&&s.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.physicsLab,onChange:be=>W({...K,physicsLab:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.evidenceLocker,onChange:be=>W({...K,evidenceLocker:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.leaderboard,onChange:be=>W({...K,leaderboard:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.physicsTools,onChange:be=>W({...K,physicsTools:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.communications,onChange:be=>W({...K,communications:be.target.checked})}),s.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",min:1,max:100,value:H,onChange:be=>J(Math.max(1,Math.min(100,parseInt(be.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),s.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),s.jsx("button",{type:"submit",disabled:B,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${B?"opacity-70 cursor-not-allowed":""}`,children:B?s.jsxs(s.Fragment,{children:[s.jsx(rs,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):z?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},Jc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},cM={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},Hde=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,Gde=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,Wde=({assignment:t,isOpen:e,onClose:r})=>{const n=mi(),a=A.useRef(null),[i,o]=A.useState([]),[c,d]=A.useState(!0),[h,p]=A.useState(!1),[m,y]=A.useState(t.category==="Practice Set"?"reading":"manage"),[v,_]=A.useState(null),[S,w]=A.useState(null),[j,O]=A.useState(""),[R,L]=A.useState(null),[C,P]=A.useState(!1),[E,N]=A.useState(null),[k,z]=A.useState({}),[D,B]=A.useState(null),[$,K]=A.useState(!0),[W,H]=A.useState(null),[J,ie]=A.useState(null),[he,pe]=A.useState(null),[Z,ne]=A.useState(!1),ae=A.useRef(null),xe=t.category==="Practice Set";A.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const tt=await ua(ot(Ce,"question_banks",t.id));tt.exists()?o(tt.data().questions||[]):o([]);const bt=await ua(ot(Ce,"reading_materials",t.id));bt.exists()?H(bt.data()):H(null)}catch(tt){console.error("Failed to load bank:",tt),o([])}finally{d(!1)}})()},[e,t.id]);const Oe=async Me=>{p(!0);try{await Qn(ot(Ce,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Me,questionCount:Me.length,updatedAt:new Date().toISOString()}),o(Me)}catch(tt){n.error("Failed to save: "+(tt instanceof Error?tt.message:"Unknown error"))}finally{p(!1)}},Ue=async Me=>{const tt=i.filter(bt=>bt.id!==Me);await Oe(tt),n.success("Question removed."),R===Me&&L(null)},Xe=async()=>{try{await Ka(ot(Ce,"question_banks",t.id)),o([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Ye=()=>{navigator.clipboard.writeText(Hde(t.title,t.classType,t.description)),P(!0),setTimeout(()=>P(!1),2e3),n.success("Prompt copied!")},Q=()=>{navigator.clipboard.writeText(Gde(t.title,t.classType,t.description)),ne(!0),setTimeout(()=>ne(!1),2e3),n.success("Reading prompt copied!")},me=async Me=>{var bt;const tt=(bt=Me.target.files)==null?void 0:bt[0];if(tt){pe(null),ie(null);try{let Fe=(await tt.text()).replace(/```json\s*|```\s*/g,"").trim();Fe=Fe.replace(/[\x00-\x1F\x7F]/g,nt=>nt===`
`||nt==="\r"||nt==="	"?" ":"");let ce;try{ce=JSON.parse(Fe)}catch{const nt=Fe.match(/\{[\s\S]*\}/);if(nt)ce=JSON.parse(nt[0]);else throw new Error("No JSON object found.")}if(!ce.title||!ce.sections||!Array.isArray(ce.sections))throw new Error("Missing required fields: title and sections array.");const We=ce.sections.filter(nt=>!nt.title||!nt.content);if(We.length>0)throw new Error(`${We.length} section(s) missing title or content.`);ie(ce)}catch(St){pe(St instanceof Error?St.message:"Parse failed.")}ae.current&&(ae.current.value="")}},te=async()=>{if(J){p(!0);try{await Qn(ot(Ce,"reading_materials",t.id),{...J,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(J),ie(null),n.success(`Study material uploaded: ${J.sections.length} sections!`)}catch(Me){n.error("Failed to save: "+(Me instanceof Error?Me.message:"Unknown error"))}finally{p(!1)}}},re=async()=>{p(!0);try{await Ka(ot(Ce,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},Pe=async Me=>{var bt;const tt=(bt=Me.target.files)==null?void 0:bt[0];if(tt){B(null),N(null);try{let Fe=(await tt.text()).replace(/```json\s*|```\s*/g,"").trim();Fe=Fe.replace(/[\x00-\x1F\x7F]/g,dt=>dt===`
`||dt==="\r"||dt==="	"?" ":"");let ce;try{ce=JSON.parse(Fe)}catch{const dt=Fe.match(/\[[\s\S]*\]/);if(dt)try{ce=JSON.parse(dt[0])}catch{const Ft=dt[0];let tr=null;for(let kr=Ft.length-1;kr>0;kr--)if(Ft[kr]==="}")try{tr=JSON.parse(Ft.slice(0,kr+1)+"]");break}catch{}if(tr)ce=tr;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Ft=null;const tr="["+Fe;for(let kr=tr.length-1;kr>0;kr--)if(tr[kr]==="}")try{Ft=JSON.parse(tr.slice(0,kr+1)+"]");break}catch{}if(Ft)ce=Ft;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(ce)||ce.length===0)throw new Error("Must be a non-empty JSON array.");const We=ce.filter(dt=>dt.id&&dt.tier&&dt.type&&dt.stem&&dt.options&&dt.correctAnswer),nt=ce.length-We.length;if(We.length===0){B("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const ut={};We.forEach(dt=>{const Ft=dt.tier;ut[Ft]=(ut[Ft]||0)+1}),N(We),z(ut),nt>0&&n.success(`Parsed ${We.length} questions (${nt} skipped  missing fields).`)}catch(St){B(St instanceof Error?St.message:"Parse failed.")}a.current&&(a.current.value="")}},Ge=async()=>{if(!E)return;let Me;if($&&i.length>0){const tt=new Set(i.map(St=>St.id)),bt=E.map((St,Fe)=>({...St,id:tt.has(St.id)?`${St.id}_${Date.now()}_${Fe}`:St.id}));Me=[...i,...bt]}else Me=E;await Oe(Me),n.success(`${$?"Added":"Replaced with"} ${E.length} questions. Total: ${Me.length}`),N(null),y("manage")},it=A.useMemo(()=>{let Me=i;if(v&&(Me=Me.filter(tt=>tt.tier===v)),S&&(Me=Me.filter(tt=>tt.type===S)),j){const tt=j.toLowerCase();Me=Me.filter(bt=>bt.stem.toLowerCase().includes(tt)||bt.id.toLowerCase().includes(tt))}return Me},[i,v,S,j]),et=A.useMemo(()=>{const Me={1:0,2:0,3:0};return i.forEach(tt=>{Me[tt.tier]=(Me[tt.tier]||0)+1}),Me},[i]),Pt=A.useMemo(()=>{const Me={};return i.forEach(tt=>{Me[tt.type]=(Me[tt.type]||0)+1}),Me},[i]);return e?s.jsx(Ti,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:s.jsxs("div",{className:"text-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[s.jsx(Nh,{className:"w-5 h-5 text-purple-400 shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),s.jsx("div",{className:"text-xs mt-1",children:c?s.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?s.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):s.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&s.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Me=>s.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${Jc[Me].bg} ${Jc[Me].border} border`,children:[s.jsx("div",{className:`text-sm font-bold ${Jc[Me].text}`,children:et[Me]}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Me]})]},Me))})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[!xe&&s.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Nh,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!xe&&s.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Mi,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),s.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Zs,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",W?`(${W.sections.length})`:""]})]}),m==="manage"&&s.jsx("div",{className:"space-y-3",children:c?s.jsx("div",{className:"py-12 text-center",children:s.jsx(rs,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?s.jsxs("div",{className:"py-12 text-center",children:[s.jsx(Nh,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[s.jsx(C2,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{value:j,onChange:Me=>O(Me.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>_(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${v?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Me=>s.jsxs("button",{onClick:()=>_(v===Me?null:Me),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${v===Me?`${Jc[Me].bg} ${Jc[Me].text} ${Jc[Me].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Me," (",et[Me],")"]},Me))]})]}),Object.keys(Pt).length>1&&s.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Pt).sort((Me,tt)=>tt[1]-Me[1]).map(([Me,tt])=>s.jsxs("button",{onClick:()=>w(S===Me?null:Me),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Me?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[cM[Me]||Me," (",tt,")"]},Me))}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:it.length===0?s.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):it.map(Me=>{const tt=Jc[Me.tier]||Jc[1],bt=R===Me.id;return s.jsxs("div",{className:`rounded-xl border transition ${bt?`${tt.border} ${tt.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[s.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(bt?null:Me.id),children:[s.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${tt.bg} ${tt.text}`,children:["T",Me.tier]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[s.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Me.id}),s.jsx("span",{className:"text-[8px] text-gray-600",children:""}),s.jsx("span",{className:"text-[8px] text-gray-500",children:cM[Me.type]||Me.type}),s.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(ka,{className:"w-2.5 h-2.5"}),Me.xp]})]}),s.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Me.stem})]}),s.jsx(_u,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${bt?"rotate-90":""}`})]}),bt&&s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Me.context&&s.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Me.context}),s.jsx("div",{className:"space-y-1",children:Me.options.map(St=>{const Fe=Array.isArray(Me.correctAnswer)?Me.correctAnswer.includes(St.id):Me.correctAnswer===St.id;return s.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${Fe?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[s.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[St.id.toUpperCase(),"."]}),s.jsx("span",{children:St.text}),Fe&&s.jsx(an,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},St.id)})}),s.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Me.explanation]}),Me.linkedFollowUp&&s.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[s.jsx("span",{className:"font-bold",children:"Follow-up: "}),Me.linkedFollowUp.stem]}),s.jsxs("button",{onClick:()=>Ue(Me.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[s.jsx(aa,{className:"w-3 h-3"})," Delete Question"]})]})]},Me.id)})}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[s.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",it.length," of ",i.length]}),s.jsxs("button",{onClick:Xe,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(aa,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),s.jsx("button",{onClick:Ye,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${C?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:C?s.jsxs(s.Fragment,{children:[s.jsx(an,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ix,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),s.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",s.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[s.jsx(Rx,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:Pe,className:"hidden"})]})]}),D&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Os,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:D})]}),E&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[E.length," questions parsed"]})]}),s.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Me=>s.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[s.jsx("div",{className:"text-base font-bold text-white",children:k[Me]||0}),s.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Me]})]},Me))}),i.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>K(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${$?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[s.jsx(Mi,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",E.length,")"]}),s.jsxs("button",{onClick:()=>K(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${$?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[s.jsx(Cu,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Ge,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(rs,{className:"w-4 h-4 animate-spin"}):s.jsx(t0,{className:"w-4 h-4"}),h?"Saving...":`Upload ${E.length} Questions`]}),s.jsx("button",{onClick:()=>N(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&s.jsxs("div",{className:"space-y-5",children:[W?s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zs,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:W.title})]}),s.jsxs("button",{onClick:re,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[s.jsx(aa,{className:"w-3 h-3"})," Remove"]})]}),W.description&&s.jsx("p",{className:"text-xs text-gray-400",children:W.description}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{children:[W.sections.length," sections"]}),W.estimatedMinutes&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["~",W.estimatedMinutes," min read"]})]})]}),s.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:W.sections.map((Me,tt)=>s.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:tt+1}),s.jsx("span",{className:"truncate",children:Me.title})]},tt))})]}):s.jsxs("div",{className:"py-6 text-center",children:[s.jsx(Zs,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),s.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),s.jsx("button",{onClick:Q,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${Z?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:Z?s.jsxs(s.Fragment,{children:[s.jsx(an,{className:"w-4 h-4"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ix,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),s.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[s.jsx(Rx,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),s.jsx("input",{ref:ae,type:"file",accept:".json,.txt",onChange:me,className:"hidden"})]})]}),he&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[s.jsx(Os,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-red-300/70 text-xs",children:he})]}),J&&s.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(an,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:J.title})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[J.sections.length," sections  ~",J.estimatedMinutes||"?"," min read"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:te,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?s.jsx(rs,{className:"w-4 h-4 animate-spin"}):s.jsx(t0,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),s.jsx("button",{onClick:()=>ie(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[s.jsx(rs,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},uM=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],Kde={Textbook:s.jsx(Zs,{className:"w-4 h-4"}),Simulation:s.jsx(U7,{className:"w-4 h-4"}),"Lab Guide":s.jsx(k2,{className:"w-4 h-4"}),"Practice Set":s.jsx(Jo,{className:"w-4 h-4"}),Article:s.jsx(vH,{className:"w-4 h-4"}),"Video Lesson":s.jsx(_H,{className:"w-4 h-4"}),Supplemental:s.jsx(z7,{className:"w-4 h-4"})},Qde=({assignments:t,submissions:e,classConfigs:r,users:n,onCreateAssignment:a,onPreviewAssignment:i,availableSections:o=[]})=>{const c=mi(),{confirm:d}=ol(),[h,p]=A.useState(!1),[m,y]=A.useState(!1),[v,_]=A.useState(!1),[S,w]=A.useState("All Classes"),[j,O]=A.useState("All Categories"),[R,L]=A.useState(new Set),[C,P]=A.useState(null),[E,N]=A.useState({title:"",description:"",status:Pa.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[k,z]=A.useState(new Set([Mr.AP_PHYSICS])),[D,B]=A.useState([]),[$,K]=A.useState(""),[W,H]=A.useState(!1),J=A.useMemo(()=>n.filter(Q=>Q.role==="STUDENT"),[n]),ie=A.useMemo(()=>{const Q=Object.values(Mr).filter(te=>te!==Mr.UNCATEGORIZED),me=(r||[]).map(te=>te.className);return Array.from(new Set(["All Classes",...Q,...me]))},[r]),he=A.useMemo(()=>{const Q=Array.from(k)[0];if(!Q)return o;const me=Bv(J,Q);return me.length>0?me:o},[k,J,o]),pe=A.useMemo(()=>t.filter(Q=>{const me=S==="All Classes"||Q.classType===S,te=j==="All Categories"||Q.category===j;return me&&te}),[t,S,j]),Z=A.useMemo(()=>{const Q={};return pe.forEach(me=>{const te=S==="All Classes"?`${me.classType.toUpperCase()}  ${me.unit||"Unassigned"}`:me.unit||"Unassigned";Q[te]||(Q[te]=[]),Q[te].push(me)}),Object.keys(Q).sort().reduce((me,te)=>(me[te]=Q[te],me),{})},[pe,S]),ne=async(Q,me)=>{if(k.size===0){c.error("Select a target class.");return}_(!0);try{const te=D.length>0?{targetSections:D}:{},re=me?{scheduledAt:new Date(me).toISOString()}:{},Pe={...E,status:Q,...te,...re};m&&E.id?await a({...Pe,classType:Array.from(k)[0]}):await Promise.all(Array.from(k).map(Ge=>a({...Pe,classType:Ge}))),p(!1),y(!1),K(""),c.success(Q===Pa.DRAFT?"Draft saved.":me?"Deployment scheduled.":"Resource deployed.")}catch(te){console.error(te)}finally{_(!1)}},ae=async Q=>{Q.preventDefault(),await ne(Pa.ACTIVE)},xe=async Q=>{await Re.updateAssignmentStatus(Q.id,Pa.ACTIVE),c.success(`"${Q.title}" deployed.`)},Oe=Q=>{N(Q),z(new Set([Q.classType])),B(Q.targetSections||[]),K(Q.scheduledAt?Q.scheduledAt.slice(0,16):""),y(!0),p(!0)},Ue=async Q=>{const me=Q.status===Pa.ACTIVE?Pa.ARCHIVED:Pa.ACTIVE;await Re.updateAssignmentStatus(Q.id,me)},Xe=A.useMemo(()=>[...Array.isArray(e)?e:[]].sort((me,te)=>{const re=new Date(me.submittedAt||0).getTime();return new Date(te.submittedAt||0).getTime()-re}),[e]),Ye=Q=>Q.status===Pa.DRAFT?s.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):Q.scheduledAt&&new Date(Q.scheduledAt)>new Date?s.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[s.jsx(aR,{className:"w-3 h-3"}),new Date(Q.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),s.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),s.jsxs("button",{onClick:()=>{N({title:"",description:"",status:Pa.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),B([]),K(""),y(!1),p(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[s.jsx(Mi,{className:"w-5 h-5"})," Deploy Resource"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:S,onChange:Q=>w(Q.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:ie.map(Q=>s.jsx("option",{value:Q,children:Q},Q))}),s.jsx(Ni,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:j,onChange:Q=>O(Q.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[s.jsx("option",{value:"All Categories",children:"All Categories"}),uM.map(Q=>s.jsx("option",{value:Q,children:Q},Q))]}),s.jsx(Ni,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(Z).map(([Q,me])=>s.jsxs("div",{className:"mb-6 last:mb-0",children:[s.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[s.jsx("button",{onClick:()=>{const te=new Set(R);te.has(Q)?te.delete(Q):te.add(Q),L(te)},className:"text-gray-400 hover:text-white transition",children:R.has(Q)?s.jsx(Ni,{className:"w-4 h-4"}):s.jsx(_u,{className:"w-4 h-4"})}),s.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:Q}),s.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!R.has(Q)&&s.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:me.map(te=>{const re=Ye(te);return s.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${te.status===Pa.ARCHIVED?"bg-white/2 border-white/5 opacity-60":te.status===Pa.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${te.status===Pa.DRAFT?"bg-blue-500/20 text-blue-400":te.status===Pa.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:te.status===Pa.DRAFT?s.jsx(Jm,{className:"w-4 h-4"}):Kde[te.category||"Supplemental"]}),s.jsxs("div",{className:"truncate flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:te.title}),re,s.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:te.classType})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:te.description})]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[te.status===Pa.DRAFT&&s.jsx("button",{onClick:()=>xe(te),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:s.jsx(wH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>P(te),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:s.jsx(Wo,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>i==null?void 0:i(te.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:s.jsx(yle,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Oe(te),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:s.jsx(kN,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Ue(te),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:te.status===Pa.ACTIVE?s.jsx(Voe,{className:"w-4 h-4"}):s.jsx(Gh,{className:"w-4 h-4"})}),s.jsx("button",{onClick:async()=>{await d({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Re.deleteAssignment(te.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:s.jsx(aa,{className:"w-4 h-4"})})]})]},te.id)})})]},Q))})]}),s.jsx("div",{className:"lg:col-span-4",children:s.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[s.jsx(eo,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),s.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[Xe.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[s.jsx(eo,{className:"w-10 h-10 text-gray-700 mb-3"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),s.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),Xe.map(Q=>s.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:Q.userName}),s.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:Q.assignmentTitle})]}),s.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(Q.score)," XP"]})]}),s.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[s.jsxs("span",{children:[Math.round(Q.metrics.engagementTime/60),"m active"]}),s.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(Q.submittedAt||"").toLocaleDateString()})]})]},Q.id))]})]})})]}),s.jsx(Ti,{isOpen:h,onClose:()=>p(!1),title:m?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:s.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:E.title,onChange:Q=>N({...E,title:Q.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),s.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:E.unit,onChange:Q=>N({...E,unit:Q.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),s.jsx("select",{value:E.category,onChange:Q=>N({...E,category:Q.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:uM.map(Q=>s.jsx("option",{value:Q,children:Q},Q))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ie.filter(Q=>Q!=="All Classes").map(Q=>s.jsx("button",{type:"button",onClick:()=>{const me=new Set(k);me.has(Q)?me.size>1&&me.delete(Q):me.add(Q),z(me),B([])},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${k.has(Q)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Q},Q))})]}),s.jsx(ng,{availableSections:he,selectedSections:D,onChange:B}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[s.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),s.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async Q=>{var me;if((me=Q.target.files)!=null&&me[0]){H(!0);try{const te=await Re.uploadHtmlResource(Q.target.files[0]);N({...E,contentUrl:te}),c.success("File uploaded!")}catch(te){c.error("Upload failed: "+(te instanceof Error?te.message:"Unknown error"))}finally{H(!1)}}}}),W&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[s.jsx(rs,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!W&&E.contentUrl&&s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[s.jsx(Zm,{className:"w-4 h-4"})," Resource uploaded"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",s.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),s.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:E.description,onChange:Q=>N({...E,description:Q.target.value})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Schedule Deployment ",s.jsx("span",{className:"text-gray-600",children:"(optional  leave blank for immediate)"})]}),s.jsx("input",{type:"datetime-local",value:$,onChange:Q=>K(Q.target.value),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",disabled:v,onClick:()=>ne(Pa.DRAFT),className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:[s.jsx(Jm,{className:"w-4 h-4"})," Save Draft"]}),$?s.jsx("button",{type:"button",disabled:v,onClick:()=>ne(Pa.ACTIVE,$),className:"flex-[2] bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:v?s.jsx(rs,{className:"w-5 h-5 animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(aR,{className:"w-4 h-4"})," Schedule Deployment"]})}):s.jsx("button",{type:"submit",disabled:v,className:"flex-[2] bg-purple-600 hover:bg-purple-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:v?s.jsx(rs,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})]})}),C&&s.jsx(Wde,{assignment:C,isOpen:!!C,onClose:()=>P(null)})]})},IG=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),s.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),s.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),s.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:s.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),s.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),s.jsxs("g",{filter:"url(#b-glow)",children:[s.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),s.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),s.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),s.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),s.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),s.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>s.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),Xde=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),s.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:s.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),s.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>s.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[s.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),s.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),s.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),s.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),s.jsxs("g",{filter:"url(#p-glow)",children:[s.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),s.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[s.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),s.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),s.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),s.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return s.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[s.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),Yde=({hue:t})=>s.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[s.jsxs("defs",{children:[s.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),s.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),s.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),s.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[s.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),s.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),s.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),s.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),s.jsxs("g",{filter:"url(#s-glow)",children:[s.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:s.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),s.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),s.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),s.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),s.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),s.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),s.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),s.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),s.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>s.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),s.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),s.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),s.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>s.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[s.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),Zde={BRUTE:IG,PHANTOM:Xde,SERPENT:Yde},RG=({bossType:t,hue:e,size:r})=>{const n=Zde[t]||IG;return s.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:s.jsx(n,{hue:e})})},Jde=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],e0e=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,o]=A.useState(null),c=A.useMemo(()=>{var v;if(!t)return[];const y=Object.keys(((v=t.gamification)==null?void 0:v.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=A.useMemo(()=>{var v,_;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((v=t.gamification)==null?void 0:v.inventory)||[],equipped:((_=t.gamification)==null?void 0:_.equipped)||{}};const y=r0(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?s.jsx(Ti,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:s.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:s.jsx(Mi,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:s.jsx(Na,{className:"w-4 h-4"})})]})]})]}),c.length>1&&s.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>s.jsx("button",{onClick:()=>o(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),s.jsxs("div",{className:"border-b border-white/5 pb-6",children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&s.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:Jde.map(y=>{var _;const v=(_=h.equipped)==null?void 0:_[y];return s.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${v?ca(v.rarity).border+" "+ca(v.rarity).bg:"border-white/10 bg-black/20"}`,children:v?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:v.name}),s.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:s.jsx(Na,{className:"w-3 h-3"})})]}):s.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),s.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,v)=>s.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${ca(y.rarity).border}`,children:[s.jsx("div",{className:`text-[8px] font-bold ${ca(y.rarity).text} text-center truncate w-full`,children:y.name}),s.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),s.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:s.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:s.jsx(aa,{className:"w-4 h-4"})})})]},v)),h.inventory.length===0&&s.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},t0e=[10,50,100,-10,-50,-100],r0e=({user:t,onClose:e,onAdjust:r})=>{var o;const[n,a]=A.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return s.jsx(Ti,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[s.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email}),s.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((o=t.gamification)==null?void 0:o.xp)||0," XP"]})]})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:t0e.map(c=>s.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),s.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},n0e=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&s.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return s.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),s.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[s.jsx(Jo,{className:"w-3 h-3"}),n.quest.title]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[s.jsxs("div",{className:"text-center md:text-right",children:[s.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),s.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[s.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),s.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&s.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:s.jsx(Xoe,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),s.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:s.jsx(uu,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:s.jsx(Na,{className:"w-5 h-5"})})]})]})]})]},a)})]}),T3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},a0e=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:o,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return s.jsx(Ti,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:s.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),s.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),s.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),s.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),s.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),s.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),s.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),s.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Classes"}),Object.values(Mr).filter(h=>h!=="Uncategorized").map(h=>s.jsx("option",{value:h,children:h},h))]})]})]}),s.jsx(ng,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),s.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",s.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),s.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),s.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),s.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),s.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"COMMON",children:"Common"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&s.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[s.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),s.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),s.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),s.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),s.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),s.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),s.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[i&&s.jsx("button",{type:"button",disabled:o,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),s.jsx("button",{type:"submit",disabled:o,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:o?"Transmitting...":"Broadcast Mission"})]})]})})},i0e={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},s0e=({users:t,initialTab:e})=>{const r=mi(),{confirm:n}=ol(),a=e&&i0e[e]||"OPERATIVES",[i,o]=A.useState(""),[c,d]=A.useState("All Classes"),[h,p]=A.useState("All Sections"),[m,y]=A.useState("xp"),[v,_]=A.useState("desc"),S=q=>{m===q?_(we=>we==="asc"?"desc":"asc"):(y(q),_("asc"))},w=({label:q,col:we,className:Te})=>s.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Te??""}`,onClick:()=>S(we),children:s.jsxs("div",{className:`flex items-center gap-1 ${Te!=null&&Te.includes("text-center")?"justify-center":Te!=null&&Te.includes("text-right")?"justify-end":"justify-start"}`,children:[s.jsx("span",{children:q}),s.jsxs("span",{className:"flex flex-col gap-px",children:[s.jsx(j2,{className:`w-2.5 h-2.5 -mb-0.5 ${m===we&&v==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),s.jsx(Ni,{className:`w-2.5 h-2.5 -mt-0.5 ${m===we&&v==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[j,O]=A.useState([]),[R,L]=A.useState([]),[C,P]=A.useState(null),[E,N]=A.useState(null),[k,z]=A.useState(!1),[D,B]=A.useState(!1),[$,K]=A.useState(T3),[W,H]=A.useState(!1),[J,ie]=A.useState([]),[he,pe]=A.useState(null),[Z,ne]=A.useState(""),[ae,xe]=A.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Mr.AP_PHYSICS,targetSections:[]}),[Oe,Ue]=A.useState([]),[Xe,Ye]=A.useState(!1),[Q,me]=A.useState(null),[te,re]=A.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[Pe,Ge]=A.useState(!1),it=A.useRef(null),[et,Pt]=A.useState(null),[Me,tt]=A.useState([]),[bt,St]=A.useState("bosses"),[Fe,ce]=A.useState(!1),[We,nt]=A.useState(null),[ut,dt]=A.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Ft=A.useRef(null),[tr,kr]=A.useState(null),[be,st]=A.useState([]),[Et,Dt]=A.useState(null),[$t,Ze]=A.useState([]),[ir,br]=A.useState(!1),[Lr,hn]=A.useState("pending"),[xr,Gt]=A.useState([]);A.useEffect(()=>{const q=Re.subscribeToXPEvents(O),we=Re.subscribeToQuests(L),Te=Re.subscribeToAllBossQuizzes(Ue),Ne=Re.subscribeToAllTutoringSessions(Gt),mt=Re.subscribeToBossQuestionBanks(tt);return()=>{q(),we(),Te(),Ne(),mt()}},[]),A.useEffect(()=>{const q=[];t.forEach(we=>{var Te,Ne;(Ne=(Te=we.gamification)==null?void 0:Te.activeQuests)==null||Ne.forEach(mt=>{const Ot=R.find(At=>At.id===mt.questId);Ot&&(mt.status==="DEPLOYED"||mt.status==="ACCEPTED")&&q.push({user:we,quest:Ot,status:mt.status,roll:mt.deploymentRoll,acceptedAt:mt.acceptedAt})})}),ie(q)},[t,R,a]);const Ut=A.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),_t=A.useMemo(()=>{const q=new Set;return Ut.forEach(we=>{we.classSections?Object.values(we.classSections).forEach(Te=>{Te&&q.add(Te)}):we.section&&q.add(we.section)}),Array.from(q).sort()},[Ut]),Br=A.useMemo(()=>{if(ae.type!=="CLASS_SPECIFIC"||!ae.targetClass)return _t;const q=Bv(Ut,ae.targetClass);return q.length>0?q:_t},[ae.type,ae.targetClass,Ut,_t]),sn=A.useMemo(()=>{if(!$.targetClass)return _t;const q=Bv(Ut,$.targetClass);return q.length>0?q:_t},[$.targetClass,Ut,_t]),Wr=A.useMemo(()=>{if(te.classType==="GLOBAL"||!te.classType)return _t;const q=Bv(Ut,te.classType);return q.length>0?q:_t},[te.classType,Ut,_t]),$r=q=>{var Te,Ne;const we=(Te=q.gamification)==null?void 0:Te.classProfiles;return we&&Object.keys(we).length>0?Object.values(we).reduce((mt,Ot)=>mt+Xh(Ot.equipped),0):Xh((Ne=q.gamification)==null?void 0:Ne.equipped)},fn=A.useMemo(()=>Ut.filter(q=>{var Ot;const we=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Te=c==="All Classes"||q.classType===c||((Ot=q.enrolledClasses)==null?void 0:Ot.includes(c)),Ne=q.classSections?Object.values(q.classSections):[],mt=h==="All Sections"||q.section===h||Ne.includes(h);return we&&Te&&mt}).sort((q,we)=>{var Te,Ne,mt,Ot,At,Yt,wr,en,oe,ve;switch(m){case"name":return v==="asc"?q.name.localeCompare(we.name):we.name.localeCompare(q.name);case"class":return v==="asc"?(q.classType||"").localeCompare(we.classType||""):(we.classType||"").localeCompare(q.classType||"");case"level":{const $e=((Te=q.gamification)==null?void 0:Te.level)||1,De=((Ne=we.gamification)==null?void 0:Ne.level)||1;return v==="asc"?$e-De:De-$e}case"flux":{const $e=((mt=q.gamification)==null?void 0:mt.currency)||0,De=((Ot=we.gamification)==null?void 0:Ot.currency)||0;return v==="asc"?$e-De:De-$e}case"gear":{const $e=$r(q),De=$r(we);return v==="asc"?$e-De:De-$e}case"xp":default:{const $e=c!=="All Classes"?((Yt=(At=q.gamification)==null?void 0:At.classXp)==null?void 0:Yt[c])||0:((wr=q.gamification)==null?void 0:wr.xp)||0,De=c!=="All Classes"?((oe=(en=we.gamification)==null?void 0:en.classXp)==null?void 0:oe[c])||0:((ve=we.gamification)==null?void 0:ve.xp)||0;return v==="asc"?$e-De:De-$e}}}),[Ut,i,c,h,m,v]),cr=async(q,we)=>{try{await Re.adjustUserXP(q.id,we,q.classType||Mr.UNCATEGORIZED),r.success(`${we>0?"+":""}${we} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}P(null)},ga=async q=>{q.preventDefault();const we={id:Math.random().toString(36).substring(2,9),title:ae.title,multiplier:ae.multiplier,isActive:!0,type:ae.type};ae.type==="CLASS_SPECIFIC"&&(we.targetClass=ae.targetClass),ae.targetSections.length>0&&(we.targetSections=ae.targetSections),await Re.saveXPEvent(we),z(!1),xe({title:"",multiplier:2,type:"GLOBAL",targetClass:Mr.AP_PHYSICS,targetSections:[]})},pn=async q=>{q.preventDefault(),H(!0);try{const we={};$.techReq>0&&(we.tech=$.techReq),$.focusReq>0&&(we.focus=$.focusReq),$.analysisReq>0&&(we.analysis=$.analysisReq),$.charismaReq>0&&(we.charisma=$.charismaReq);const Te=new Date;Te.setHours(Te.getHours()+($.durationHours||0));const Ne={id:Math.random().toString(36).substring(2,9),title:$.title,description:$.description,xpReward:$.xpReward,fluxReward:$.fluxReward,isActive:!0,type:$.type,statRequirements:we,startsAt:$.startsAt?new Date($.startsAt).toISOString():null,expiresAt:$.durationHours>0?Te.toISOString():null,itemRewardRarity:$.lootRarity||null,rollDieSides:$.dieSides||20,consequenceText:$.consequence||null,isGroupQuest:$.isGroup,targetClass:$.targetClass||void 0,targetSections:$.targetSections.length>0?$.targetSections:void 0};await Re.saveQuest(Ne),r.success(`Mission "${Ne.title}" deployed.`),K(T3),B(!1)}catch(we){console.error("Failed to issue mission:",we),r.error("Failed to issue mission.")}finally{H(!1)}},Rn=async q=>{await Re.saveXPEvent({...q,isActive:!q.isActive})},ti=async q=>{const we={...q,isActive:!q.isActive};we.isActive&&(we.expiresAt=null),await Re.saveQuest(we)},Tr=async(q,we,Te)=>{var Ot,At;if(!await n({message:`Confiscate ${we.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const mt=(Te?r0(q,Te):{inventory:((Ot=q.gamification)==null?void 0:Ot.inventory)||[]}).inventory.filter(Yt=>Yt.id!==we.id);await Re.adminUpdateInventory(q.id,mt,((At=q.gamification)==null?void 0:At.currency)||0,Te),N(Yt=>{var wr,en;return Yt?Te&&((en=(wr=Yt.gamification)==null?void 0:wr.classProfiles)!=null&&en[Te])?{...Yt,gamification:{...Yt.gamification,classProfiles:{...Yt.gamification.classProfiles,[Te]:{...Yt.gamification.classProfiles[Te],inventory:mt}}}}:{...Yt,gamification:{...Yt.gamification,inventory:mt}}:null})},mn=async(q,we,Te)=>{var Ot;if(!await n({message:`Force unequip ${we} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const mt={...(Te?r0(q,Te):{equipped:{...(Ot=q.gamification)==null?void 0:Ot.equipped}}).equipped};delete mt[we],await Re.adminUpdateEquipped(q.id,mt,Te),N(At=>{var Yt,wr;return At?Te&&((wr=(Yt=At.gamification)==null?void 0:Yt.classProfiles)!=null&&wr[Te])?{...At,gamification:{...At.gamification,classProfiles:{...At.gamification.classProfiles,[Te]:{...At.gamification.classProfiles[Te],equipped:mt}}}}:{...At,gamification:{...At.gamification,equipped:mt}}:null})},ri=async(q,we)=>{var Ne,mt;const Te=Math.max(0,(((Ne=q.gamification)==null?void 0:Ne.currency)||0)+we);await Re.adminUpdateInventory(q.id,((mt=q.gamification)==null?void 0:mt.inventory)||[],Te),N(Ot=>Ot?{...Ot,gamification:{...Ot.gamification,currency:Te}}:null)},Wn=async(q,we,Te,Ne)=>{try{await Re.resolveQuest(q,we,Te,Ne),r.success(Te?`Mission "${we.title}" approved.`:`Mission "${we.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},Jr=async q=>{const we=q.quest.rollDieSides||20,Te=Math.floor(Math.random()*we)+1;r.info(`Rolled a ${Te} on a D${we}. ${Te===we?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Wn(q.user.id,q.quest,Te===we,q.user.classType)},gn=async q=>{try{await Re.updateCodename(q,Z.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}pe(null)},An=async(q,we)=>{try{await Re.toggleCodenameLock(q,we),r.success(we?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},ni=q=>{var we,Te,Ne,mt,Ot;if(q)me(q),re({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((we=q.rewards)==null?void 0:we.xp)||500,rewardFlux:((Te=q.rewards)==null?void 0:Te.flux)||100,rewardItemRarity:((Ne=q.rewards)==null?void 0:Ne.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(At=>({...At,damageBonus:At.damageBonus||0})),targetSections:q.targetSections||[],bossType:((mt=q.bossAppearance)==null?void 0:mt.bossType)||"BRUTE",bossHue:((Ot=q.bossAppearance)==null?void 0:Ot.hue)??0}),st(q.modifiers||[]);else{me(null);const At=new Date;At.setDate(At.getDate()+7),re({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:At.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),st([])}Ye(!0)},qa=()=>{re(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},Ai=(q,we,Te)=>{re(Ne=>{const mt=[...Ne.questions];return mt[q]={...mt[q],[we]:Te},{...Ne,questions:mt}})},ls=(q,we,Te)=>{re(Ne=>{const mt=[...Ne.questions],Ot=[...mt[q].options];return Ot[we]=Te,mt[q]={...mt[q],options:Ot},{...Ne,questions:mt}})},gi=q=>{re(we=>({...we,questions:we.questions.filter((Te,Ne)=>Ne!==q)}))},Tt=async q=>{if(q.preventDefault(),te.questions.length===0){r.error("Add at least one question.");return}try{const we=[...new Set(te.questions.map(Ne=>Ne.bankId).filter(Boolean))],Te={id:(Q==null?void 0:Q.id)||Math.random().toString(36).substring(2,12),bossName:te.bossName,description:te.description,maxHp:te.maxHp,currentHp:(Q==null?void 0:Q.currentHp)??te.maxHp,classType:te.classType,isActive:(Q==null?void 0:Q.isActive)??!0,deadline:new Date(te.deadline).toISOString(),damagePerCorrect:te.damagePerCorrect,questions:te.questions.map(Ne=>({id:Ne.id,stem:Ne.stem,options:Ne.options.filter(mt=>mt.trim()),correctAnswer:Ne.correctAnswer,difficulty:Ne.difficulty,...Ne.damageBonus>0?{damageBonus:Ne.damageBonus}:{},...Ne.bankId?{bankId:Ne.bankId}:{}})),rewards:{xp:te.rewardXp,flux:te.rewardFlux,...te.rewardItemRarity?{itemRarity:te.rewardItemRarity}:{}},...te.targetSections.length>0?{targetSections:te.targetSections}:{},bossAppearance:{bossType:te.bossType,hue:te.bossHue},...be.length>0?{modifiers:be}:{},...we.length>0?{questionBankIds:we}:{}};await Re.saveBossQuiz(Te),r.success(Q?"Quiz boss updated.":"Quiz boss deployed!"),Ye(!1)}catch{r.error("Failed to save quiz boss.")}},fe=async q=>{await Re.toggleBossQuizActive(q.id,!q.isActive)},Je=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},ht=q=>{q?(nt(q),dt({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(we=>({...we,damageBonus:we.damageBonus||0}))})):(nt(null),dt({name:"",classType:"GLOBAL",description:"",questions:[]})),kr(null),ce(!0)},Xt=async q=>{if(q.preventDefault(),ut.questions.length===0){r.error("Add at least one question.");return}try{const we=new Date().toISOString(),Te={id:(We==null?void 0:We.id)||Math.random().toString(36).substring(2,12),name:ut.name,classType:ut.classType,description:ut.description,questions:ut.questions.map(Ne=>({id:Ne.id,stem:Ne.stem,options:Ne.options.filter(mt=>mt.trim()),correctAnswer:Ne.correctAnswer,difficulty:Ne.difficulty,...Ne.damageBonus>0?{damageBonus:Ne.damageBonus}:{}})),createdAt:(We==null?void 0:We.createdAt)||we,updatedAt:we};await Re.saveBossQuestionBank(Te),r.success(We?"Question bank updated.":"Question bank created!"),ce(!1)}catch{r.error("Failed to save question bank.")}},hr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},on=async(q,we)=>{var mt;const Te=(mt=q.target.files)==null?void 0:mt[0];if(!Te)return;const Ne=we==="bank"?kr:Pt;Ne(null);try{let At=(await Te.text()).replace(/```json\s*|```\s*/g,"").trim();At=At.replace(/[\x00-\x1F\x7F]/g,ve=>ve===`
`||ve==="\r"||ve==="	"?" ":"");let Yt;try{Yt=JSON.parse(At)}catch{const ve=At.match(/\[[\s\S]*\]/);if(ve)try{Yt=JSON.parse(ve[0])}catch{let $e=null;for(let De=ve[0].length-1;De>0;De--)if(ve[0][De]==="}")try{$e=JSON.parse(ve[0].slice(0,De+1)+"]");break}catch{}if($e)Yt=$e;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(Yt)||Yt.length===0)throw new Error("Must be a non-empty JSON array.");const wr=Yt.filter(ve=>ve.stem&&ve.options&&ve.correctAnswer!==void 0);if(wr.length===0)throw new Error("No valid questions found.");const en=wr.map(ve=>({id:ve.id||Math.random().toString(36).substring(2,10),stem:ve.stem,options:ve.options.slice(0,4),correctAnswer:typeof ve.correctAnswer=="number"?ve.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(ve.difficulty)?ve.difficulty:"MEDIUM",damageBonus:typeof ve.damageBonus=="number"?ve.damageBonus:0})),oe=Yt.length-wr.length;we==="bank"?dt(ve=>({...ve,questions:[...ve.questions,...en]})):re(ve=>({...ve,questions:[...ve.questions,...en]})),r.success(`Imported ${en.length} questions${oe>0?` (${oe} skipped)`:""}`)}catch(Ot){Ne(Ot instanceof Error?Ot.message:"Import failed."),r.error("Failed to import questions.")}we==="bank"&&Ft.current&&(Ft.current.value=""),we==="boss"&&it.current&&(it.current.value="")},Kr=q=>{const we=q.questions.map(Te=>({...Te,damageBonus:Te.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));re(Te=>({...Te,questions:[...Te.questions,...we]})),r.success(`Imported ${we.length} questions from "${q.name}"`)},yn=q=>{st(we=>{if(we.find(mt=>mt.type===q))return we.filter(mt=>mt.type!==q);const Ne=HT[q];return[...we,{type:q,...Ne.hasValue?{value:Ne.defaultValue}:{}}]})},Cr=(q,we)=>{st(Te=>Te.map(Ne=>Ne.type===q?{...Ne,value:we}:Ne))},Rs=async q=>{Dt(q),br(!0);try{const we=await Re.getBossQuizAllProgress(q.id);Ze(we)}catch{r.error("Failed to load endgame data.")}br(!1)},cs=(q,we)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${we||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,oo=()=>{const q=cs(te.bossName,te.classType);navigator.clipboard.writeText(q),Ge(!0),setTimeout(()=>Ge(!1),2500),r.success("Prompt copied to clipboard!")},dl=q=>on(q,"boss"),us=async(q,we)=>{try{const Te=await Re.completeTutoring(q,we);r.success(`Verified! Tutor earned ${Te.xpAwarded} XP and ${Te.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},ds=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Re.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},Oa=xr.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),ya={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:ya[a]}),s.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),s.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&s.jsxs("button",{onClick:()=>z(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[s.jsx(wH,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&s.jsxs("button",{onClick:()=>B(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[s.jsx(lH,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&s.jsxs("button",{onClick:()=>ni(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[s.jsx(Wo,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:s.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(C2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>o(q.target.value)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[fn.length," operatives"]}),s.jsxs("div",{className:"relative",children:[s.jsx(rle,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Classes"}),Object.values(Mr).map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(Ni,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),_t.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[s.jsx("option",{children:"All Sections"}),_t.map(q=>s.jsx("option",{value:q,children:q},q))]}),s.jsx(Ni,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[s.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),s.jsx(w,{label:"Class",col:"class"}),s.jsx(w,{label:"Level",col:"level",className:"text-center"}),s.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),s.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),s.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),s.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:fn.map(q=>{var mt,Ot,At,Yt,wr,en,oe,ve,$e;const we=((mt=q.gamification)==null?void 0:mt.level)||1,Te=((Ot=q.gamification)==null?void 0:Ot.currency)||0,Ne=q.enrolledClasses||(q.classType?[q.classType]:[]);return s.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"py-3 pl-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),he===q.id?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{autoFocus:!0,value:Z,onChange:De=>ne(De.target.value),maxLength:24,onKeyDown:De=>{De.key==="Enter"&&gn(q.id),De.key==="Escape"&&pe(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),s.jsx("button",{onClick:()=>gn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:s.jsx(uu,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>pe(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:s.jsx(Na,{className:"w-3 h-3"})})]}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:()=>{var De;pe(q.id),ne(((De=q.gamification)==null?void 0:De.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((At=q.gamification)==null?void 0:At.codename)||"UNASSIGNED",s.jsx(e3,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),s.jsx("button",{onClick:()=>{var De;return An(q.id,!((De=q.gamification)!=null&&De.codenameLocked))},className:`transition ${(Yt=q.gamification)!=null&&Yt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(wr=q.gamification)!=null&&wr.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(en=q.gamification)!=null&&en.codenameLocked?s.jsx(Wh,{className:"w-2.5 h-2.5"}):s.jsx(hle,{className:"w-2.5 h-2.5"})})]})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Ne.map(De=>s.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:De},De))})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-lg font-black text-white",children:we})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((ve=(oe=q.gamification)==null?void 0:oe.classXp)==null?void 0:ve[c])||0:(($e=q.gamification)==null?void 0:$e.xp)||0).toLocaleString()})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Te})}),s.jsx("td",{className:"py-3 text-center",children:s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:$r(q)})}),s.jsx("td",{className:"py-3 text-right pr-4",children:s.jsxs("div",{className:"flex justify-end gap-1.5",children:[s.jsxs("button",{onClick:()=>N(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Ox,{className:"w-3 h-3"})," Inventory"]}),s.jsxs("button",{onClick:()=>P(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Mi,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[j.map(q=>s.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&s.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(ka,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>Re.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(aa,{className:"w-4 h-4"})})]}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),s.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),s.jsx("button",{onClick:()=>Rn(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),s.jsxs("button",{onClick:()=>z(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx(Mi,{className:"w-6 h-6"})}),s.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&s.jsx("div",{className:"space-y-4",children:R.map(q=>s.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(el,{className:"w-7 h-7"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),s.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&s.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([we,Te])=>s.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Te," ",we]},we))}),s.jsxs("div",{className:"flex gap-3 mt-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("button",{onClick:()=>ti(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),s.jsx("button",{onClick:()=>Re.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&s.jsx(n0e,{deployments:J,onResolveQuest:Wn,onRollForSalvation:Jr}),a==="BOSS_OPS"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>St("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${bt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(q7,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",Oe.length,")"]}),s.jsxs("button",{onClick:()=>St("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${bt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[s.jsx(Nh,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Me.length,")"]})]}),bt==="bosses"&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),Oe.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Wo,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),s.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),Oe.map(q=>{var mt,Ot;const we=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Te=new Date(q.deadline)<new Date,Ne=(q.currentHp??q.maxHp)<=0||!q.isActive;return s.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Te?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Te?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:s.jsx(Wo,{className:"w-7 h-7"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),s.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),s.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),s.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(mt=q.modifiers)!=null&&mt.length?s.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(Ot=q.targetSections)!=null&&Ot.length?s.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Te&&s.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ne&&s.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),s.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:s.jsx("div",{className:`h-full rounded-full transition-all ${we>50?"bg-amber-500":we>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${we}%`}})})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ne&&s.jsxs("button",{onClick:()=>Rs(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(uH,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),s.jsxs("button",{onClick:()=>ni(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[s.jsx(e3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>fe(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:s.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),s.jsx("button",{onClick:()=>Je(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]},q.id)})]}),bt==="banks"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),s.jsxs("button",{onClick:()=>ht(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[s.jsx(Mi,{className:"w-3 h-3"})," New Bank"]})]}),Me.length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Nh,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:"No question banks yet."}),s.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Me.map(q=>s.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:s.jsx(Nh,{className:"w-5 h-5 text-purple-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&s.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),s.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>ht(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[s.jsx(e3,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),s.jsx("button",{onClick:()=>hr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:s.jsx(aa,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>hn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Lr==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",Oa.length,")"]}),s.jsxs("button",{onClick:()=>hn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Lr==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",xr.length,")"]})]}),(Lr==="pending"?Oa:xr).length===0&&s.jsxs("div",{className:"text-center py-14 text-gray-500",children:[s.jsx(Ou,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),s.jsx("p",{className:"font-bold",children:Lr==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(Lr==="pending"?Oa:xr).map(q=>s.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(mle,{className:"w-4 h-4 text-gray-500"}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),s.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{children:["Requester: ",s.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&s.jsxs("span",{children:["Tutor: ",s.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),s.jsxs("span",{children:["Class: ",s.jsx("span",{className:"text-purple-400",children:q.classType})]}),s.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&s.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&s.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),s.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),s.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&s.jsxs("button",{onClick:()=>us(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(an,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>ds(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Na,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&s.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[s.jsx(an,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),s.jsx(e0e,{user:E,onClose:()=>N(null),onDeleteItem:Tr,onUnequipItem:mn,onGrantFlux:ri}),s.jsx(a0e,{isOpen:D,onClose:()=>B(!1),form:$,setForm:K,onSubmit:pn,onSaveDraft:async()=>{const q={};$.techReq>0&&(q.tech=$.techReq),$.focusReq>0&&(q.focus=$.focusReq),$.analysisReq>0&&(q.analysis=$.analysisReq),$.charismaReq>0&&(q.charisma=$.charismaReq);const we={id:Math.random().toString(36).substring(2,9),title:$.title,description:$.description,xpReward:$.xpReward,fluxReward:$.fluxReward,isActive:!1,type:$.type,statRequirements:q,startsAt:$.startsAt?new Date($.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:$.lootRarity||null,rollDieSides:$.dieSides||20,consequenceText:$.consequence||null,isGroupQuest:$.isGroup,targetClass:$.targetClass||void 0,targetSections:$.targetSections.length>0?$.targetSections:void 0};await Re.saveQuest(we),r.success("Mission saved as draft (standby)."),K(T3),B(!1)},isSubmitting:W,availableSections:sn}),s.jsx(Ti,{isOpen:k,onClose:()=>z(!1),title:"New XP Protocol Deployment",children:s.jsxs("form",{onSubmit:ga,className:"space-y-4 text-gray-100 p-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),s.jsx("input",{value:ae.title,onChange:q=>xe({...ae,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),s.jsx("input",{type:"number",step:"0.5",value:ae.multiplier,onChange:q=>xe({...ae,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),s.jsxs("select",{value:ae.type,onChange:q=>xe({...ae,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[s.jsx("option",{value:"GLOBAL",children:"Global Node"}),s.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),ae.type==="CLASS_SPECIFIC"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),s.jsx("select",{value:ae.targetClass,onChange:q=>xe({...ae,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Mr).map(q=>s.jsx("option",{value:q,children:q},q))})]}),s.jsx(ng,{availableSections:Br,selectedSections:ae.targetSections,onChange:q=>xe({...ae,targetSections:q})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:ae.title,multiplier:ae.multiplier,isActive:!1,type:ae.type,...ae.type==="CLASS_SPECIFIC"?{targetClass:ae.targetClass}:{},...ae.targetSections.length>0?{targetSections:ae.targetSections}:{}};await Re.saveXPEvent(q),z(!1),xe({title:"",multiplier:2,type:"GLOBAL",targetClass:Mr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),s.jsx(r0e,{user:C,onClose:()=>P(null),onAdjust:cr}),s.jsx(Ti,{isOpen:Xe,onClose:()=>Ye(!1),title:Q?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Tt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),s.jsx("input",{value:te.bossName,onChange:q=>re({...te,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("textarea",{value:te.description,onChange:q=>re({...te,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:s.jsx(RG,{bossType:te.bossType,hue:te.bossHue})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),s.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>s.jsx("button",{type:"button",onClick:()=>re({...te,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${te.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",te.bossHue,""]}),s.jsx("input",{type:"range",min:"0",max:"360",value:te.bossHue,onChange:q=>re({...te,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),s.jsx("input",{type:"number",value:te.maxHp,onChange:q=>re({...te,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),s.jsx("input",{type:"number",value:te.damagePerCorrect,onChange:q=>re({...te,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),s.jsxs("select",{value:te.classType,onChange:q=>re({...te,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Mr).map(q=>s.jsx("option",{value:q,children:q},q))]})]})]}),s.jsx(ng,{availableSections:Wr,selectedSections:te.targetSections,onChange:q=>re({...te,targetSections:q})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),s.jsx("input",{type:"datetime-local",value:te.deadline,onChange:q=>re({...te,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),s.jsx("input",{type:"number",value:te.rewardXp,onChange:q=>re({...te,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),s.jsx("input",{type:"number",value:te.rewardFlux,onChange:q=>re({...te,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),s.jsxs("select",{value:te.rewardItemRarity,onChange:q=>re({...te,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),s.jsx("option",{value:"RARE",children:"Rare"}),s.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",be.length," active)"]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(HT).map(([q,we])=>{const Te=be.find(Ne=>Ne.type===q);return s.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Te?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[s.jsxs("button",{type:"button",onClick:()=>yn(q),className:"w-full text-left",children:[s.jsx("div",{className:"text-[10px] font-bold text-white",children:we.name}),s.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:we.description})]}),Te&&we.hasValue&&s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("input",{type:"number",value:Te.value??we.defaultValue,onChange:Ne=>Cr(q,parseInt(Ne.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),s.jsx("span",{className:"text-[9px] text-gray-500",children:we.unit})]})]},q)})})]}),Me.length>0&&s.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[s.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),s.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Me.filter(q=>q.classType===te.classType||q.classType==="GLOBAL"||te.classType==="GLOBAL").map(q=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),s.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),s.jsxs("button",{type:"button",onClick:()=>Kr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[s.jsx(Mi,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",te.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:oo,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${Pe?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:Pe?s.jsxs(s.Fragment,{children:[s.jsx(uu,{className:"w-3 h-3"})," Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ix,{className:"w-3 h-3"})," Copy AI Prompt"]})}),s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(t0,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:it,type:"file",accept:".json,.txt",onChange:dl,className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:qa,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Mi,{className:"w-3 h-3"})," Add Manual"]})]})]}),et&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[s.jsx(Na,{className:"w-4 h-4 flex-shrink-0"}),et,s.jsx("button",{type:"button",onClick:()=>Pt(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Na,{className:"w-3 h-3"})})]}),te.questions.length===0&&s.jsxs("div",{className:"text-center py-6 space-y-2",children:[s.jsx(Rx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),s.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",s.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",s.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),te.questions.map((q,we)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",we+1]}),s.jsx("textarea",{value:q.stem,onChange:Te=>Ai(we,"stem",Te.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),s.jsx("button",{type:"button",onClick:()=>gi(we),className:"text-gray-600 hover:text-red-400 mt-4",children:s.jsx(aa,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Te,Ne)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Ai(we,"correctAnswer",Ne),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ne?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:s.jsx(uu,{className:"w-3 h-3"})}),s.jsx("input",{value:Te,onChange:mt=>ls(we,Ne,mt.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ne)}`,required:!0})]},Ne))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:q.difficulty,onChange:Te=>Ai(we,"difficulty",Te.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>Ai(we,"damageBonus",parseInt(Te.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),s.jsxs("div",{className:"flex gap-3",children:[!Q&&s.jsx("button",{type:"button",onClick:async()=>{if(te.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(te.questions.map(Te=>Te.bankId).filter(Boolean))],we={id:Math.random().toString(36).substring(2,12),bossName:te.bossName,description:te.description,maxHp:te.maxHp,currentHp:te.maxHp,classType:te.classType,isActive:!1,deadline:te.deadline?new Date(te.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:te.damagePerCorrect,questions:te.questions.map(Te=>({id:Te.id,stem:Te.stem,options:Te.options.filter(Ne=>Ne.trim()),correctAnswer:Te.correctAnswer,difficulty:Te.difficulty,...Te.damageBonus>0?{damageBonus:Te.damageBonus}:{},...Te.bankId?{bankId:Te.bankId}:{}})),rewards:{xp:te.rewardXp,flux:te.rewardFlux,...te.rewardItemRarity?{itemRarity:te.rewardItemRarity}:{}},...te.targetSections.length>0?{targetSections:te.targetSections}:{},bossAppearance:{bossType:te.bossType,hue:te.bossHue},...be.length>0?{modifiers:be}:{},...q.length>0?{questionBankIds:q}:{}};await Re.saveBossQuiz(we),r.success("Quiz boss saved as draft (inactive)."),Ye(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),s.jsx("button",{type:"submit",className:`${Q?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:Q?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),s.jsx(Ti,{isOpen:Fe,onClose:()=>ce(!1),title:We?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:s.jsxs("form",{onSubmit:Xt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),s.jsx("input",{value:ut.name,onChange:q=>dt({...ut,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),s.jsxs("select",{value:ut.classType,onChange:q=>dt({...ut,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[s.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Mr).map(q=>s.jsx("option",{value:q,children:q},q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),s.jsx("input",{value:ut.description,onChange:q=>dt({...ut,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),s.jsxs("div",{className:"border-t border-white/10 pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[s.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",ut.questions.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[s.jsx(t0,{className:"w-3 h-3"})," Import JSON",s.jsx("input",{ref:Ft,type:"file",accept:".json,.txt",onChange:q=>on(q,"bank"),className:"hidden"})]}),s.jsxs("button",{type:"button",onClick:()=>dt(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[s.jsx(Mi,{className:"w-3 h-3"})," Add Manual"]})]})]}),tr&&s.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[s.jsx(Na,{className:"w-4 h-4 flex-shrink-0"})," ",tr,s.jsx("button",{type:"button",onClick:()=>kr(null),className:"ml-auto text-red-500 hover:text-red-300",children:s.jsx(Na,{className:"w-3 h-3"})})]}),ut.questions.length===0&&s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Rx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),ut.questions.map((q,we)=>s.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:q.stem,onChange:Te=>{const Ne=[...ut.questions];Ne[we]={...Ne[we],stem:Te.target.value},dt({...ut,questions:Ne})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${we+1}`,required:!0})}),s.jsx("button",{type:"button",onClick:()=>dt(Te=>({...Te,questions:Te.questions.filter((Ne,mt)=>mt!==we)})),className:"text-gray-600 hover:text-red-400 mt-2",children:s.jsx(aa,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Te,Ne)=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{type:"button",onClick:()=>{const mt=[...ut.questions];mt[we]={...mt[we],correctAnswer:Ne},dt({...ut,questions:mt})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ne?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:s.jsx(uu,{className:"w-2.5 h-2.5"})}),s.jsx("input",{value:Te,onChange:mt=>{const Ot=[...ut.questions],At=[...Ot[we].options];At[Ne]=mt.target.value,Ot[we]={...Ot[we],options:At},dt({...ut,questions:Ot})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ne)}`,required:!0})]},Ne))}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:q.difficulty,onChange:Te=>{const Ne=[...ut.questions];Ne[we]={...Ne[we],difficulty:Te.target.value},dt({...ut,questions:Ne})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[s.jsx("option",{value:"EASY",children:"Easy"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HARD",children:"Hard"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),s.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>{const Ne=[...ut.questions];Ne[we]={...Ne[we],damageBonus:parseInt(Te.target.value)||0},dt({...ut,questions:Ne})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),s.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:We?"Update Question Bank":"Create Question Bank"})]})}),s.jsx(Ti,{isOpen:!!Et,onClose:()=>{Dt(null),Ze([])},title:Et?`Endgame: ${Et.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:ir?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):Et&&s.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-white",children:$t.length}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-amber-400",children:$t.reduce((q,we)=>{var Te;return q+(((Te=we.combatStats)==null?void 0:Te.totalDamageDealt)||0)},0).toLocaleString()}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-green-400",children:$t.reduce((q,we)=>{var Te;return q+(((Te=we.combatStats)==null?void 0:Te.questionsCorrect)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[s.jsx("div",{className:"text-2xl font-black text-red-400",children:$t.reduce((q,we)=>{var Te;return q+(((Te=we.combatStats)==null?void 0:Te.criticalHits)||0)},0)}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[s.jsx(fH,{className:"w-4 h-4"})," Top Damage Dealers"]}),s.jsx("div",{className:"space-y-2",children:[...$t].sort((q,we)=>{var Te,Ne;return(((Te=we.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((Ne=q.combatStats)==null?void 0:Ne.totalDamageDealt)||0)}).slice(0,5).map((q,we)=>{var wr;const Te=t.find(en=>en.id===q.userId),Ne=q.combatStats,mt=we,Ot=mt<lO.length?lO[mt]:1,At=((Ne==null?void 0:Ne.questionsAttempted)||0)>=Mm&&((Ne==null?void 0:Ne.questionsCorrect)||0)>=Pm,Yt=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${we===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[s.jsxs("div",{className:`text-xl font-black w-8 text-center ${Yt[we]||"text-gray-500"}`,children:["#",we+1]}),(Te==null?void 0:Te.avatarUrl)&&s.jsx("img",{src:Te.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Te==null?void 0:Te.name)||q.userId}),s.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"text-amber-400 font-bold",children:[((wr=Ne==null?void 0:Ne.totalDamageDealt)==null?void 0:wr.toLocaleString())||0," dmg"]}),s.jsxs("span",{children:[(Ne==null?void 0:Ne.questionsCorrect)||0,"/",(Ne==null?void 0:Ne.questionsAttempted)||0," correct"]}),s.jsxs("span",{children:[(Ne==null?void 0:Ne.criticalHits)||0," crits"]}),s.jsxs("span",{children:["Streak: ",(Ne==null?void 0:Ne.longestStreak)||0]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:At?s.jsxs("span",{className:`text-xs font-bold ${we<5?Yt[we]:"text-gray-400"}`,children:[Ot,"x"]}):s.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[s.jsx(Gh,{className:"w-4 h-4"})," All Participants"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[s.jsx("th",{className:"pb-2 pl-2",children:"#"}),s.jsx("th",{className:"pb-2",children:"Student"}),s.jsx("th",{className:"pb-2 text-center",children:"Damage"}),s.jsx("th",{className:"pb-2 text-center",children:"Correct"}),s.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),s.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),s.jsx("th",{className:"pb-2 text-center",children:"Crits"}),s.jsx("th",{className:"pb-2 text-center",children:"Streak"}),s.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),s.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5",children:[...$t].sort((q,we)=>{var Te,Ne;return(((Te=we.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((Ne=q.combatStats)==null?void 0:Ne.totalDamageDealt)||0)}).map((q,we)=>{const Te=t.find(wr=>wr.id===q.userId),Ne=q.combatStats,mt=(Ne==null?void 0:Ne.questionsAttempted)||0,Ot=(Ne==null?void 0:Ne.questionsCorrect)||0,At=mt>0?Math.round(Ot/mt*100):0,Yt=mt>=Mm&&Ot>=Pm;return s.jsxs("tr",{className:"hover:bg-white/5",children:[s.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:we+1}),s.jsx("td",{className:"py-2 font-bold text-white",children:(Te==null?void 0:Te.name)||q.userId.slice(0,8)}),s.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ne==null?void 0:Ne.totalDamageDealt)||0).toLocaleString()}),s.jsx("td",{className:"py-2 text-center text-green-400",children:Ot}),s.jsx("td",{className:"py-2 text-center text-gray-400",children:mt}),s.jsxs("td",{className:"py-2 text-center text-gray-300",children:[At,"%"]}),s.jsx("td",{className:"py-2 text-center text-red-400",children:(Ne==null?void 0:Ne.criticalHits)||0}),s.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ne==null?void 0:Ne.longestStreak)||0}),s.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ne==null?void 0:Ne.damageReduced)||0}),s.jsx("td",{className:"py-2 text-center",children:Yt?s.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):s.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const we=$t.reduce((At,Yt)=>{var wr,en;return At+(((en=(wr=Yt.combatStats)==null?void 0:wr.correctByDifficulty)==null?void 0:en[q])||0)},0),Te=$t.reduce((At,Yt)=>{var wr,en;return At+(((en=(wr=Yt.combatStats)==null?void 0:wr.incorrectByDifficulty)==null?void 0:en[q])||0)},0),Ne=we+Te,mt=Ne>0?Math.round(we/Ne*100):0,Ot=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return s.jsxs("div",{className:`bg-${Ot}-500/5 border border-${Ot}-500/20 rounded-xl p-3 text-center`,children:[s.jsx("div",{className:`text-[10px] font-bold text-${Ot}-400 uppercase mb-1`,children:q}),s.jsxs("div",{className:"text-lg font-black text-white",children:[mt,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[we,"/",Ne," correct"]})]},q)})})]})]})})]})},o0e=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=ol(),a=mi(),[i,o]=A.useState({}),[c,d]=A.useState(Mr.AP_PHYSICS),[h,p]=A.useState(!1),[m,y]=A.useState(""),[v,_]=A.useState(null),[S,w]=A.useState(""),[j,O]=A.useState(""),R=A.useMemo(()=>Object.values(Mr).filter(D=>D!=="Uncategorized"),[]);A.useEffect(()=>{const D=Re.subscribeToStudentGroups(c,B=>{o($=>({...$,[c]:B}))});return()=>D()},[c]);const L=i[c]||[],C=A.useMemo(()=>t.filter(D=>{var B;return D.role==="STUDENT"&&((B=D.enrolledClasses)==null?void 0:B.includes(c))}).filter(D=>!S||D.section===S),[t,c,S]),P=async()=>{if(m.trim())try{await Re.createStudentGroup(m.trim(),c,[]),y(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},E=async D=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Re.deleteStudentGroup(D)},N=async(D,B)=>{if(D.members.some(K=>K.userId===B.id))return;const $=[...D.members,{userId:B.id,userName:B.name}];await Re.updateStudentGroup(D.id,{members:$})},k=async(D,B)=>{const $=D.members.filter(K=>K.userId!==B);await Re.updateStudentGroup(D.id,{members:$})},z=A.useMemo(()=>{var B;const D={};for(const $ of R)D[$]=((B=i[$])==null?void 0:B.length)||0;return D},[R,i]);return r?s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),s.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[s.jsx(Mi,{className:"w-4 h-4"})," New Group"]})]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:R.map(D=>s.jsxs("button",{onClick:()=>d(D),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===D?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[D,z[D]>0&&s.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===D?"bg-white/20":"bg-white/10"}`,children:z[D]})]},D))}),h&&s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",value:m,onChange:D=>y(D.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:D=>D.key==="Enter"&&P(),autoFocus:!0}),s.jsx("button",{onClick:P,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),s.jsx("button",{onClick:()=>{p(!1),y("")},className:"p-3 text-gray-400 hover:text-white transition",children:s.jsx(Na,{className:"w-5 h-5"})})]})]}),L.length===0?s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[s.jsx(is,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),s.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),s.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(D=>s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[s.jsx("div",{className:"p-5 border-b border-white/5",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:D.name}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[D.members.length," member",D.members.length!==1?"s":"",s.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>_(v===D.id?null:D.id),className:`p-2 rounded-lg transition ${v===D.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:s.jsx(Bx,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E(D.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:s.jsx(aa,{className:"w-4 h-4"})})]})]})}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.members.map(B=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:B.userName.charAt(0)}),B.userName,s.jsx("button",{onClick:()=>k(D,B.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:s.jsx(Ole,{className:"w-3 h-3"})})]},B.userId)),D.members.length===0&&s.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",s.jsx(Bx,{className:"w-3 h-3 inline"})," button to assign students."]})]}),v===D.id&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(C2,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Search students...",value:j,onChange:B=>O(B.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&s.jsxs("select",{value:S,onChange:B=>w(B.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[s.jsx("option",{value:"",children:"All Sections"}),e.map(B=>s.jsx("option",{value:B,children:B},B))]})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:C.filter(B=>!D.members.some($=>$.userId===B.id)).filter(B=>!j||B.name.toLowerCase().includes(j.toLowerCase())).map(B=>s.jsxs("button",{onClick:()=>N(D,B),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",B.name]},B.id))})]})]})]},D.id))})]}):s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(is,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},l0e={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:s.jsx(xH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:s.jsx(dH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:s.jsx(R2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},c0e=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=A.useState(null),[a,i]=A.useState(!1),o=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return s.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[s.jsxs("button",{onClick:()=>o("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[s.jsx(R2,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),s.jsxs("button",{onClick:()=>o("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[s.jsx(dH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),s.jsxs("button",{onClick:()=>o("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[s.jsx(xH,{className:"w-6 h-6"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&s.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[s.jsx(Px,{className:"w-6 h-6"}),e&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),s.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=l0e[r];return s.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[s.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),s.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?s.jsx(Jv,{className:"w-4 h-4"}):s.jsx(gH,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:s.jsx(Na,{className:"w-4 h-4"})})]})]}),!a&&s.jsx("div",{className:"flex-1 bg-white relative",children:s.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},u0e=["","","","","","","",""],d0e=["","","","","","","","","","","","","","","","","","","","","","","","","",""],h0e=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:o,onOpenResource:c})=>{var St,Fe;const{confirm:d}=ol(),[h,p]=A.useState([]),[m,y]=A.useState(""),[v,_]=A.useState("Main"),[S,w]=A.useState(!1),[j,O]=A.useState(!1),[R,L]=A.useState(null),[C,P]=A.useState(null),[E,N]=A.useState([]),[k,z]=A.useState([]),[D,B]=A.useState(null),[$,K]=A.useState([]),[W,H]=A.useState(null),J=A.useRef(null),ie=A.useRef(null),he=A.useRef(null),pe=A.useMemo(()=>Object.values(Mr).filter(ce=>{var dt;if(ce===Mr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const We=a.find(Ft=>Ft.className===ce),nt=(dt=t.enrolledClasses)==null?void 0:dt.includes(ce),ut=We?We.features.communications:!0;return nt&&ut}),[a,t.role,t.enrolledClasses]),[Z,ne]=A.useState(pe[0]||"");A.useEffect(()=>{(!Z||!pe.includes(Z))&&pe.length>0&&ne(pe[0])},[pe]);const ae=A.useMemo(()=>v==="Resources"&&C?`res_${C}`:v==="Resources"&&!C?"":v==="Groups"&&D?`group_${D}`:v==="Groups"&&!D||!Z?"":`class_${Z.replace(/\s+/g,"_").toLowerCase()}`,[Z,v,C,D]),xe=A.useRef(null),Oe=A.useMemo(()=>n.filter(ce=>!(ce.classType!==Z||ce.status==="DRAFT"||ce.status==="ARCHIVED"||ce.scheduledAt&&new Date(ce.scheduledAt)>new Date)),[n,Z]),Ue=A.useMemo(()=>h.filter(ce=>{var We;return ce.isGlobalPinned||((We=ce.pinnedBy)==null?void 0:We.includes(t.id))}),[h,t.id]),Xe=A.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),Ye=A.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("class_")),[i]),Q=A.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("res_")),[i]),me=A.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ce=>ce.startsWith("group_")),[i]),te=A.useRef(!1);A.useEffect(()=>{if(!e){te.current=!1;return}if(te.current||!i||i.size===0)return;te.current=!0;const ce=Array.from(i)[0];if(ce.startsWith("class_")){_("Main");const We=pe.find(nt=>`class_${nt.replace(/\s+/g,"_").toLowerCase()}`===ce);We&&ne(We)}else ce.startsWith("res_")?(_("Resources"),P(ce.replace("res_",""))):ce.startsWith("group_")&&(_("Groups"),B(ce.replace("group_","")))},[e,i,pe]),A.useEffect(()=>{!e||!ae||o==null||o(ae)},[e,ae,o]),A.useEffect(()=>{if(!e)return;const ce=t.role==="ADMIN"?Re.subscribeToStudentGroups(Z,N):Re.subscribeToMyGroups(t.id,N);return()=>ce()},[e,t.id,t.role,Z]),A.useEffect(()=>{if(!e)return;let ce="";if(v==="Resources"&&C?ce=`res_${C}`:v==="Groups"&&D?ce=`group_${D}`:(v==="Main"||v==="Bookmarks")&&(ce=`class_${Z.replace(/\s+/g,"_").toLowerCase()}`),!ce)return;w(!0);const We=Re.subscribeToChannelMessages(ce,nt=>{p(nt),w(!1)});return()=>{We()}},[e,Z,v,C,D]),A.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const ce=Re.subscribeToFlaggedMessages(nt=>{K(nt)}),We=Re.subscribeToAllGroups(z);return()=>{ce(),We()}},[e,t.role]),A.useEffect(()=>{xe.current&&(xe.current.scrollTop=xe.current.scrollHeight)},[h,S,v,C]),A.useEffect(()=>{const ce=We=>{J.current&&!J.current.contains(We.target)&&O(!1),ie.current&&!ie.current.contains(We.target)&&L(null)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]),A.useEffect(()=>{if(!e)return;const ce=We=>{We.key==="Escape"&&r()};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[e,r]);const re=A.useCallback(async ce=>{if(ce.preventDefault(),!(!m.trim()||!ae)&&!Xe)try{await Re.sendMessage(t,m,ae,Z),y(""),O(!1)}catch(We){console.error("Failed to send message:",We)}},[m,ae,Xe,t,Z]),Pe=A.useCallback(async(ce,We)=>{try{await Re.toggleReaction(ce,We,t.id),L(null)}catch(nt){console.error(nt)}},[t.id]),Ge=A.useCallback(async ce=>{try{await Re.togglePersonalPin(ce,t.id)}catch(We){console.error(We)}},[t.id]),it=A.useCallback(async(ce,We)=>{try{await Re.toggleGlobalPin(ce,!We)}catch(nt){console.error(nt)}},[]),et=async ce=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Re.deleteMessage(ce)}catch(We){console.error(We)}},Pt=async ce=>{try{await Re.unflagMessage(ce),await Re.resolveFlagByMessageId(ce)}catch(We){console.error(We)}},Me=async ce=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Re.resolveFlagByMessageId(ce),await Re.deleteMessage(ce)}catch(We){console.error(We)}},tt=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],bt=async ce=>{if(W){try{await Re.muteUser(W.senderId,ce)}catch(We){console.error(We)}H(null)}};return A.useEffect(()=>{const ce=We=>{he.current&&!he.current.contains(We.target)&&H(null)};return W&&document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[W]),e?s.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[v==="Resources"&&C||v==="Groups"&&D?s.jsx("button",{onClick:()=>{P(null),B(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:s.jsx(Koe,{className:"w-5 h-5"})}):s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:s.jsx(Px,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:v==="Moderation"?"Moderation Queue":v==="Groups"?D?(St=E.find(ce=>ce.id===D))==null?void 0:St.name:"My Groups":v==="Resources"?C?(Fe=Oe.find(ce=>ce.id===C))==null?void 0:Fe.title:"Class Resources":Z}),v!=="Resources"&&v!=="Moderation"&&v!=="Groups"&&pe.length>1&&s.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:Z}),s.jsx(Ni,{className:"w-3 h-3 text-gray-500 ml-1"}),s.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:Z,onChange:ce=>ne(ce.target.value),children:pe.map(ce=>s.jsx("option",{value:ce,children:ce},ce))})]})]})]}),s.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:s.jsx(Na,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[s.jsxs("button",{onClick:()=>_("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${v==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(Px,{className:"w-5 h-5"}),Ye&&v!=="Main"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("button",{onClick:()=>_("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${v==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(Zs,{className:"w-5 h-5"}),Q&&v!=="Resources"&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(E.length>0||t.role==="ADMIN")&&s.jsxs("button",{onClick:()=>{_("Groups"),B(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${v==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(is,{className:"w-5 h-5"}),me&&v!=="Groups"?s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):E.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:E.length})]}),s.jsx("button",{onClick:()=>_("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${v==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:s.jsx(rR,{className:"w-5 h-5"})}),t.role==="ADMIN"&&s.jsxs("button",{onClick:()=>_("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${v==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[s.jsx(No,{className:"w-5 h-5"}),$.length>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:$.length})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col relative",children:[v==="Resources"&&!C&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:Oe.map(ce=>s.jsxs("div",{onClick:()=>P(ce.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${ce.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[s.jsx(lle,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${ce.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.title}),s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:ce.unit})]})]}),s.jsx("button",{onClick:We=>{We.stopPropagation(),c==null||c(ce.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:s.jsx(ele,{className:"w-4 h-4"})})]},ce.id))})}),v==="Groups"&&!D&&s.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:s.jsx("div",{className:"space-y-2",children:E.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(is,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No groups yet"}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):E.map(ce=>s.jsx("div",{onClick:()=>B(ce.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${ce.id}`)?"border-cyan-500/40":"border-white/5"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[s.jsx(is,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${ce.id}`))&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.name}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:[ce.members.length," member",ce.members.length!==1?"s":"","  ",ce.classType]})]})]})},ce.id))})}),v==="Moderation"&&t.role==="ADMIN"&&s.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Os,{className:"w-4 h-4 text-red-400"}),s.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),s.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[$.length," item",$.length!==1?"s":""]})]}),$.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[s.jsx(No,{className:"w-10 h-10 mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):s.jsx("div",{className:"space-y-3",children:$.map(ce=>{var We,nt,ut;return s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300",children:ce.senderName}),s.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(ce.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsx("p",{className:"text-sm text-gray-200 mb-1",children:ce.content}),ce.systemNote&&s.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:ce.systemNote}),s.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(We=ce.channelId)!=null&&We.startsWith("group_")?`Group: ${((nt=k.find(dt=>dt.id===ce.channelId.replace("group_","")))==null?void 0:nt.name)||ce.channelId.replace("group_","")}`:((ut=ce.channelId)==null?void 0:ut.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>Pt(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[s.jsx(uu,{className:"w-3.5 h-3.5"})," Approve"]}),s.jsxs("button",{onClick:()=>Me(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[s.jsx(aa,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((W==null?void 0:W.id)===`flag-${ce.id}`?null:{id:`flag-${ce.id}`,senderId:ce.senderId,senderName:ce.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:s.jsx(Dx,{className:"w-3.5 h-3.5"})}),(W==null?void 0:W.id)===`flag-${ce.id}`&&s.jsxs("div",{ref:he,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),tt.map(dt=>s.jsx("button",{onClick:()=>bt(dt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:dt.label},dt.minutes))]})]})]})]},ce.id)})})]}),(v==="Main"||v==="Bookmarks"||v==="Resources"&&C||v==="Groups"&&D)&&s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:xe,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(v==="Bookmarks"?Ue:h).map((ce,We,nt)=>{var Ft;const ut=ce.senderId===t.id,dt=We>0&&nt[We-1].senderId===ce.senderId&&new Date(ce.timestamp).getTime()-new Date(nt[We-1].timestamp).getTime()<3e5;return s.jsxs("div",{className:`group flex flex-col ${ut?"items-end":"items-start"} ${dt?"mt-1":"mt-4"}`,children:[!dt&&s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:`text-xs font-bold ${ut?"text-indigo-400":"text-gray-300"}`,children:ce.senderName}),s.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),ce.isGlobalPinned&&s.jsx(oR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),s.jsxs("div",{className:"relative max-w-[85%]",children:[s.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${ut?"right-0":"left-0"} z-30`,children:[s.jsx("button",{onClick:()=>L(ce.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:s.jsx(cR,{className:"w-3.5 h-3.5 text-yellow-400"})}),s.jsx("button",{onClick:()=>Ge(ce.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Ft=ce.pinnedBy)!=null&&Ft.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:s.jsx(rR,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>it(ce.id,!!ce.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${ce.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:s.jsx(oR,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>et(ce.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:s.jsx(aa,{className:"w-3.5 h-3.5"})}),ce.senderId!==t.id&&s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H((W==null?void 0:W.id)===ce.id?null:{id:ce.id,senderId:ce.senderId,senderName:ce.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:s.jsx(Dx,{className:"w-3.5 h-3.5"})}),(W==null?void 0:W.id)===ce.id&&s.jsxs("div",{ref:he,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[s.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),tt.map(tr=>s.jsx("button",{onClick:()=>bt(tr.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:tr.label},tr.minutes))]})]})]})]}),R===ce.id&&s.jsx("div",{ref:ie,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${ut?"right-0":"left-0"}`,children:u0e.map(tr=>s.jsx("button",{onClick:()=>Pe(ce.id,tr),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:tr},tr))}),s.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${ut?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${ce.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${ce.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:ce.content}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:ce.reactions&&Object.entries(ce.reactions).map(([tr,kr])=>{const be=kr;return be.length>0&&s.jsxs("button",{onClick:()=>Pe(ce.id,tr),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${be.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[tr," ",be.length]},tr)})})]})]},ce.id)})}),s.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:s.jsxs("form",{onSubmit:re,className:"relative flex items-center gap-2",children:[j&&s.jsx("div",{ref:J,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:d0e.map(ce=>s.jsx("button",{type:"button",onClick:()=>y(We=>We+ce),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:ce},ce))}),s.jsx("button",{type:"button",onClick:()=>O(!j),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:s.jsx(cR,{className:"w-5 h-5"})}),s.jsx("input",{type:"text",value:m,onChange:ce=>y(ce.target.value),placeholder:Xe?"Transmission Disabled":"Type message...",disabled:!ae||Xe,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),s.jsx("button",{type:"submit",disabled:!ae||Xe||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:s.jsx(F7,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function MG(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=MG(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function pr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=MG(t))&&(n&&(n+=" "),n+=e);return n}var N3,dM;function os(){if(dM)return N3;dM=1;var t=Array.isArray;return N3=t,N3}var A3,hM;function PG(){if(hM)return A3;hM=1;var t=typeof Zy=="object"&&Zy&&Zy.Object===Object&&Zy;return A3=t,A3}var E3,fM;function ll(){if(fM)return E3;fM=1;var t=PG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return E3=r,E3}var j3,pM;function p1(){if(pM)return j3;pM=1;var t=ll(),e=t.Symbol;return j3=e,j3}var k3,mM;function f0e(){if(mM)return k3;mM=1;var t=p1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(o){var c=r.call(o,a),d=o[a];try{o[a]=void 0;var h=!0}catch{}var p=n.call(o);return h&&(c?o[a]=d:delete o[a]),p}return k3=i,k3}var C3,gM;function p0e(){if(gM)return C3;gM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return C3=r,C3}var O3,yM;function mc(){if(yM)return O3;yM=1;var t=p1(),e=f0e(),r=p0e(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function o(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return O3=o,O3}var I3,vM;function gc(){if(vM)return I3;vM=1;function t(e){return e!=null&&typeof e=="object"}return I3=t,I3}var R3,xM;function Pf(){if(xM)return R3;xM=1;var t=mc(),e=gc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return R3=n,R3}var M3,bM;function hE(){if(bM)return M3;bM=1;var t=os(),e=Pf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return M3=a,M3}var P3,wM;function Uu(){if(wM)return P3;wM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return P3=t,P3}var D3,SM;function fE(){if(SM)return D3;SM=1;var t=mc(),e=Uu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return D3=o,D3}var L3,_M;function m0e(){if(_M)return L3;_M=1;var t=ll(),e=t["__core-js_shared__"];return L3=e,L3}var B3,TM;function g0e(){if(TM)return B3;TM=1;var t=m0e(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return B3=r,B3}var $3,NM;function DG(){if(NM)return $3;NM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return $3=r,$3}var U3,AM;function y0e(){if(AM)return U3;AM=1;var t=fE(),e=g0e(),r=Uu(),n=DG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,d=o.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var v=t(y)?p:i;return v.test(n(y))}return U3=m,U3}var z3,EM;function v0e(){if(EM)return z3;EM=1;function t(e,r){return e==null?void 0:e[r]}return z3=t,z3}var V3,jM;function g0(){if(jM)return V3;jM=1;var t=y0e(),e=v0e();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return V3=r,V3}var F3,kM;function z2(){if(kM)return F3;kM=1;var t=g0(),e=t(Object,"create");return F3=e,F3}var q3,CM;function x0e(){if(CM)return q3;CM=1;var t=z2();function e(){this.__data__=t?t(null):{},this.size=0}return q3=e,q3}var H3,OM;function b0e(){if(OM)return H3;OM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return H3=t,H3}var G3,IM;function w0e(){if(IM)return G3;IM=1;var t=z2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var o=this.__data__;if(t){var c=o[i];return c===e?void 0:c}return n.call(o,i)?o[i]:void 0}return G3=a,G3}var W3,RM;function S0e(){if(RM)return W3;RM=1;var t=z2(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return W3=n,W3}var K3,MM;function _0e(){if(MM)return K3;MM=1;var t=z2(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return K3=r,K3}var Q3,PM;function T0e(){if(PM)return Q3;PM=1;var t=x0e(),e=b0e(),r=w0e(),n=S0e(),a=_0e();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Q3=i,Q3}var X3,DM;function N0e(){if(DM)return X3;DM=1;function t(){this.__data__=[],this.size=0}return X3=t,X3}var Y3,LM;function pE(){if(LM)return Y3;LM=1;function t(e,r){return e===r||e!==e&&r!==r}return Y3=t,Y3}var Z3,BM;function V2(){if(BM)return Z3;BM=1;var t=pE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Z3=e,Z3}var J3,$M;function A0e(){if($M)return J3;$M=1;var t=V2(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,o=t(i,a);if(o<0)return!1;var c=i.length-1;return o==c?i.pop():r.call(i,o,1),--this.size,!0}return J3=n,J3}var eS,UM;function E0e(){if(UM)return eS;UM=1;var t=V2();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return eS=e,eS}var tS,zM;function j0e(){if(zM)return tS;zM=1;var t=V2();function e(r){return t(this.__data__,r)>-1}return tS=e,tS}var rS,VM;function k0e(){if(VM)return rS;VM=1;var t=V2();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return rS=e,rS}var nS,FM;function F2(){if(FM)return nS;FM=1;var t=N0e(),e=A0e(),r=E0e(),n=j0e(),a=k0e();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,nS=i,nS}var aS,qM;function mE(){if(qM)return aS;qM=1;var t=g0(),e=ll(),r=t(e,"Map");return aS=r,aS}var iS,HM;function C0e(){if(HM)return iS;HM=1;var t=T0e(),e=F2(),r=mE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return iS=n,iS}var sS,GM;function O0e(){if(GM)return sS;GM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return sS=t,sS}var oS,WM;function q2(){if(WM)return oS;WM=1;var t=O0e();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return oS=e,oS}var lS,KM;function I0e(){if(KM)return lS;KM=1;var t=q2();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return lS=e,lS}var cS,QM;function R0e(){if(QM)return cS;QM=1;var t=q2();function e(r){return t(this,r).get(r)}return cS=e,cS}var uS,XM;function M0e(){if(XM)return uS;XM=1;var t=q2();function e(r){return t(this,r).has(r)}return uS=e,uS}var dS,YM;function P0e(){if(YM)return dS;YM=1;var t=q2();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return dS=e,dS}var hS,ZM;function gE(){if(ZM)return hS;ZM=1;var t=C0e(),e=I0e(),r=R0e(),n=M0e(),a=P0e();function i(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var h=o[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,hS=i,hS}var fS,JM;function LG(){if(JM)return fS;JM=1;var t=gE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,o);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,fS=r,fS}var pS,eP;function D0e(){if(eP)return pS;eP=1;var t=LG(),e=500;function r(n){var a=t(n,function(o){return i.size===e&&i.clear(),o}),i=a.cache;return a}return pS=r,pS}var mS,tP;function L0e(){if(tP)return mS;tP=1;var t=D0e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(o,c,d,h){i.push(d?h.replace(r,"$1"):c||o)}),i});return mS=n,mS}var gS,rP;function yE(){if(rP)return gS;rP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return gS=t,gS}var yS,nP;function B0e(){if(nP)return yS;nP=1;var t=p1(),e=yE(),r=os(),n=Pf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function o(c){if(typeof c=="string")return c;if(r(c))return e(c,o)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return yS=o,yS}var vS,aP;function BG(){if(aP)return vS;aP=1;var t=B0e();function e(r){return r==null?"":t(r)}return vS=e,vS}var xS,iP;function $G(){if(iP)return xS;iP=1;var t=os(),e=hE(),r=L0e(),n=BG();function a(i,o){return t(i)?i:e(i,o)?[i]:r(n(i))}return xS=a,xS}var bS,sP;function H2(){if(sP)return bS;sP=1;var t=Pf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return bS=e,bS}var wS,oP;function vE(){if(oP)return wS;oP=1;var t=$G(),e=H2();function r(n,a){a=t(a,n);for(var i=0,o=a.length;n!=null&&i<o;)n=n[e(a[i++])];return i&&i==o?n:void 0}return wS=r,wS}var SS,lP;function UG(){if(lP)return SS;lP=1;var t=vE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return SS=e,SS}var $0e=UG();const Js=Xr($0e);var _S,cP;function U0e(){if(cP)return _S;cP=1;function t(e){return e==null}return _S=t,_S}var z0e=U0e();const ur=Xr(z0e);var TS,uP;function V0e(){if(uP)return TS;uP=1;var t=mc(),e=os(),r=gc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return TS=a,TS}var F0e=V0e();const n0=Xr(F0e);var q0e=fE();const nr=Xr(q0e);var H0e=Uu();const Df=Xr(H0e);var NS={exports:{}},rn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dP;function G0e(){if(dP)return rn;dP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),_;_=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var j=w.$$typeof;switch(j){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case o:case d:case y:case m:case i:return w;default:return j}}case e:return j}}}return rn.ContextConsumer=o,rn.ContextProvider=i,rn.Element=t,rn.ForwardRef=d,rn.Fragment=r,rn.Lazy=y,rn.Memo=m,rn.Portal=e,rn.Profiler=a,rn.StrictMode=n,rn.Suspense=h,rn.SuspenseList=p,rn.isAsyncMode=function(){return!1},rn.isConcurrentMode=function(){return!1},rn.isContextConsumer=function(w){return S(w)===o},rn.isContextProvider=function(w){return S(w)===i},rn.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},rn.isForwardRef=function(w){return S(w)===d},rn.isFragment=function(w){return S(w)===r},rn.isLazy=function(w){return S(w)===y},rn.isMemo=function(w){return S(w)===m},rn.isPortal=function(w){return S(w)===e},rn.isProfiler=function(w){return S(w)===a},rn.isStrictMode=function(w){return S(w)===n},rn.isSuspense=function(w){return S(w)===h},rn.isSuspenseList=function(w){return S(w)===p},rn.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===v||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===i||w.$$typeof===o||w.$$typeof===d||w.$$typeof===_||w.getModuleId!==void 0)},rn.typeOf=S,rn}var hP;function W0e(){return hP||(hP=1,NS.exports=G0e()),NS.exports}var K0e=W0e(),AS,fP;function zG(){if(fP)return AS;fP=1;var t=mc(),e=gc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return AS=n,AS}var ES,pP;function Q0e(){if(pP)return ES;pP=1;var t=zG();function e(r){return t(r)&&r!=+r}return ES=e,ES}var X0e=Q0e();const m1=Xr(X0e);var Y0e=zG();const Z0e=Xr(Y0e);var bo=function(e){return e===0?0:e>0?1:-1},Cd=function(e){return n0(e)&&e.indexOf("%")===e.length-1},vt=function(e){return Z0e(e)&&!m1(e)},J0e=function(e){return ur(e)},$a=function(e){return vt(e)||n0(e)},ehe=0,g1=function(e){var r=++ehe;return"".concat(e||"").concat(r)},wo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(e)&&!n0(e))return n;var i;if(Cd(e)){var o=e.indexOf("%");i=r*parseFloat(e.slice(0,o))/100}else i=+e;return m1(i)&&(i=n),a&&i>r&&(i=r),i},lu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},the=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Zi=function(e,r){return vt(e)&&vt(r)?function(n){return e+n*(r-e)}:function(){return r}};function Gx(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Js(n,e))===r})}var rhe=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,o=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,o+=h*h,c=Math.min(c,h),d=Math.max(d,h);var y=r*o!==n*n?(r*i-n*a)/(r*o-n*n):0;return{xmin:c,xmax:d,a:y,b:(a-y*n)/r}},nhe=function(e,r){return vt(e)&&vt(r)?e-r:n0(e)&&n0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Eh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function VN(t){"@babel/helpers - typeof";return VN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VN(t)}var ahe=["viewBox","children"],ihe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],mP=["points","pathLength"],jS={svg:ahe,polygon:mP,polyline:mP},xE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Wx=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(A.isValidElement(e)&&(n=e.props),!Df(n))return null;var a={};return Object.keys(n).forEach(function(i){xE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},she=function(e,r,n){return function(a){return e(r,n,a),null}},a0=function(e,r,n){if(!Df(e)||VN(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var o=e[i];xE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=she(o,r,n))}),a},ohe=["children"],lhe=["children"];function gP(t,e){if(t==null)return{};var r=che(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function che(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var yP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Xl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},vP=null,kS=null,bE=function t(e){if(e===vP&&Array.isArray(kS))return kS;var r=[];return A.Children.forEach(e,function(n){ur(n)||(K0e.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),kS=r,vP=e,r};function ks(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Xl(a)}):n=[Xl(e)],bE(t).forEach(function(a){var i=Js(a,"type.displayName")||Js(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Ss(t,e){var r=ks(t,e);return r&&r[0]}var xP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!vt(n)||n<=0||!vt(a)||a<=0)},uhe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],dhe=function(e){return e&&e.type&&n0(e.type)&&uhe.indexOf(e.type)>=0},hhe=function(e,r,n,a){var i,o=(i=jS==null?void 0:jS[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!nr(e)&&(a&&o.includes(r)||ihe.includes(r))||n&&xE.includes(r)},Vt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(A.isValidElement(e)&&(a=e.props),!Df(a))return null;var i={};return Object.keys(a).forEach(function(o){var c;hhe((c=a)===null||c===void 0?void 0:c[o],o,r,n)&&(i[o]=a[o])}),i},FN=function t(e,r){if(e===r)return!0;var n=A.Children.count(e);if(n!==A.Children.count(r))return!1;if(n===0)return!0;if(n===1)return bP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!bP(i,o))return!1}return!0},bP=function(e,r){if(ur(e)&&ur(r))return!0;if(!ur(e)&&!ur(r)){var n=e.props||{},a=n.children,i=gP(n,ohe),o=r.props||{},c=o.children,d=gP(o,lhe);return a&&c?Eh(i,d)&&FN(a,c):!a&&!c?Eh(i,d):!1}return!1},wP=function(e,r){var n=[],a={};return bE(e).forEach(function(i,o){if(dhe(i))n.push(i);else if(i){var c=Xl(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,o);n.push(m),a[c]=!0}}}),n},fhe=function(e){var r=e&&e.type;return r&&yP[r]?yP[r]:null},phe=function(e,r){return bE(r).indexOf(e)},mhe=["children","width","height","viewBox","className","style","title","desc"];function qN(){return qN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qN.apply(this,arguments)}function ghe(t,e){if(t==null)return{};var r=yhe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function HN(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,o=t.style,c=t.title,d=t.desc,h=ghe(t,mhe),p=a||{width:r,height:n,x:0,y:0},m=pr("recharts-surface",i);return se.createElement("svg",qN({},Vt(h,!0,"svg"),{className:m,width:r,height:n,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var vhe=["children","className"];function GN(){return GN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GN.apply(this,arguments)}function xhe(t,e){if(t==null)return{};var r=bhe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=xhe(t,vhe),i=pr("recharts-layer",n);return se.createElement("g",GN({className:i},Vt(a,!0),{ref:e}),r)}),Yl=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},CS,SP;function whe(){if(SP)return CS;SP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++a<i;)o[a]=e[a+r];return o}return CS=t,CS}var OS,_P;function She(){if(_P)return OS;_P=1;var t=whe();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return OS=e,OS}var IS,TP;function VG(){if(TP)return IS;TP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",c=RegExp("["+o+t+a+i+"]");function d(h){return c.test(h)}return IS=d,IS}var RS,NP;function _he(){if(NP)return RS;NP=1;function t(e){return e.split("")}return RS=t,RS}var MS,AP;function The(){if(AP)return MS;AP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",o="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",_=h+"?",S="["+i+"]?",w="(?:"+v+"(?:"+[p,m,y].join("|")+")"+S+_+")*",j=S+_+w,O="(?:"+[p+c+"?",c,m,y,o].join("|")+")",R=RegExp(d+"(?="+d+")|"+O+j,"g");function L(C){return C.match(R)||[]}return MS=L,MS}var PS,EP;function Nhe(){if(EP)return PS;EP=1;var t=_he(),e=VG(),r=The();function n(a){return e(a)?r(a):t(a)}return PS=n,PS}var DS,jP;function Ahe(){if(jP)return DS;jP=1;var t=She(),e=VG(),r=Nhe(),n=BG();function a(i){return function(o){o=n(o);var c=e(o)?r(o):void 0,d=c?c[0]:o.charAt(0),h=c?t(c,1).join(""):o.slice(1);return d[i]()+h}}return DS=a,DS}var LS,kP;function Ehe(){if(kP)return LS;kP=1;var t=Ahe(),e=t("toUpperCase");return LS=e,LS}var jhe=Ehe();const G2=Xr(jhe);function Mn(t){return function(){return t}}const FG=Math.cos,Kx=Math.sin,jo=Math.sqrt,Qx=Math.PI,W2=2*Qx,WN=Math.PI,KN=2*WN,Sd=1e-6,khe=KN-Sd;function qG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Che(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qG;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Ohe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?qG:Che(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-e,h=a-r,p=o-e,m=c-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>Sd)if(!(Math.abs(m*d-h*p)>Sd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let v=n-o,_=a-c,S=d*d+h*h,w=v*v+_*_,j=Math.sqrt(S),O=Math.sqrt(y),R=i*Math.tan((WN-Math.acos((S+y-w)/(2*j*O)))/2),L=R/O,C=R/j;Math.abs(L-1)>Sd&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*v>p*_)},${this._x1=e+C*d},${this._y1=r+C*h}`}}arc(e,r,n,a,i,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^o,y=o?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>Sd||Math.abs(this._y1-p)>Sd)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%KN+KN),y>khe?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>Sd&&this._append`A${n},${n},0,${+(y>=WN)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function wE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Ohe(e)}function SE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HG(t){this._context=t}HG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function K2(t){return new HG(t)}function GG(t){return t[0]}function WG(t){return t[1]}function KG(t,e){var r=Mn(!0),n=null,a=K2,i=null,o=wE(c);t=typeof t=="function"?t:t===void 0?GG:Mn(t),e=typeof e=="function"?e:e===void 0?WG:Mn(e);function c(d){var h,p=(d=SE(d)).length,m,y=!1,v;for(n==null&&(i=a(v=o())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+t(m,h,d),+e(m,h,d));if(v)return i=null,v+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Mn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Mn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Mn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function bv(t,e,r){var n=null,a=Mn(!0),i=null,o=K2,c=null,d=wE(h);t=typeof t=="function"?t:t===void 0?GG:Mn(+t),e=typeof e=="function"?e:Mn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?WG:Mn(+r);function h(m){var y,v,_,S=(m=SE(m)).length,w,j=!1,O,R=new Array(S),L=new Array(S);for(i==null&&(c=o(O=d())),y=0;y<=S;++y){if(!(y<S&&a(w=m[y],y,m))===j)if(j=!j)v=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),_=y-1;_>=v;--_)c.point(R[_],L[_]);c.lineEnd(),c.areaEnd()}j&&(R[y]=+t(w,y,m),L[y]=+e(w,y,m),c.point(n?+n(w,y,m):R[y],r?+r(w,y,m):L[y]))}if(O)return c=null,O+""||null}function p(){return KG().defined(a).curve(o).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Mn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Mn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Mn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Mn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Mn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Mn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Mn(!!m),h):a},h.curve=function(m){return arguments.length?(o=m,i!=null&&(c=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=c=null:c=o(i=m),h):i},h}class QG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ihe(t){return new QG(t,!0)}function Rhe(t){return new QG(t,!1)}const _E={draw(t,e){const r=jo(e/Qx);t.moveTo(r,0),t.arc(0,0,r,0,W2)}},Mhe={draw(t,e){const r=jo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},XG=jo(1/3),Phe=XG*2,Dhe={draw(t,e){const r=jo(e/Phe),n=r*XG;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Lhe={draw(t,e){const r=jo(e),n=-r/2;t.rect(n,n,r,r)}},Bhe=.8908130915292852,YG=Kx(Qx/10)/Kx(7*Qx/10),$he=Kx(W2/10)*YG,Uhe=-FG(W2/10)*YG,zhe={draw(t,e){const r=jo(e*Bhe),n=$he*r,a=Uhe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const o=W2*i/5,c=FG(o),d=Kx(o);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},BS=jo(3),Vhe={draw(t,e){const r=-jo(e/(BS*3));t.moveTo(0,r*2),t.lineTo(-BS*r,-r),t.lineTo(BS*r,-r),t.closePath()}},qs=-.5,Hs=jo(3)/2,QN=1/jo(12),Fhe=(QN/2+1)*3,qhe={draw(t,e){const r=jo(e/Fhe),n=r/2,a=r*QN,i=n,o=r*QN+r,c=-i,d=o;t.moveTo(n,a),t.lineTo(i,o),t.lineTo(c,d),t.lineTo(qs*n-Hs*a,Hs*n+qs*a),t.lineTo(qs*i-Hs*o,Hs*i+qs*o),t.lineTo(qs*c-Hs*d,Hs*c+qs*d),t.lineTo(qs*n+Hs*a,qs*a-Hs*n),t.lineTo(qs*i+Hs*o,qs*o-Hs*i),t.lineTo(qs*c+Hs*d,qs*d-Hs*c),t.closePath()}};function Hhe(t,e){let r=null,n=wE(a);t=typeof t=="function"?t:Mn(t||_E),e=typeof e=="function"?e:Mn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Mn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Xx(){}function Yx(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function ZG(t){this._context=t}ZG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ghe(t){return new ZG(t)}function JG(t){this._context=t}JG.prototype={areaStart:Xx,areaEnd:Xx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Yx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Whe(t){return new JG(t)}function eW(t){this._context=t}eW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Yx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Khe(t){return new eW(t)}function tW(t){this._context=t}tW.prototype={areaStart:Xx,areaEnd:Xx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Qhe(t){return new tW(t)}function CP(t){return t<0?-1:1}function OP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(CP(i)+CP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function IP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function $S(t,e,r){var n=t._x0,a=t._y0,i=t._x1,o=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,o-c*r,i,o)}function Zx(t){this._context=t}Zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$S(this,this._t0,IP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,$S(this,IP(this,r=OP(this,t,e)),r);break;default:$S(this,this._t0,r=OP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function rW(t){this._context=new nW(t)}(rW.prototype=Object.create(Zx.prototype)).point=function(t,e){Zx.prototype.point.call(this,e,t)};function nW(t){this._context=t}nW.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function Xhe(t){return new Zx(t)}function Yhe(t){return new rW(t)}function aW(t){this._context=t}aW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=RP(t),a=RP(e),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function RP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function Zhe(t){return new aW(t)}function Q2(t,e){this._context=t,this._t=e}Q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Jhe(t){return new Q2(t,.5)}function efe(t){return new Q2(t,0)}function tfe(t){return new Q2(t,1)}function Yh(t,e){if((o=t.length)>1)for(var r=1,n,a,i=t[e[0]],o,c=i.length;r<o;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function XN(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function rfe(t,e){return t[e]}function nfe(t){const e=[];return e.key=t,e}function afe(){var t=Mn([]),e=XN,r=Yh,n=rfe;function a(i){var o=Array.from(t.apply(this,arguments),nfe),c,d=o.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(o[c][h]=[0,+n(m,o[c].key,h,i)]).data=m;for(c=0,p=SE(e(o));c<d;++c)o[p[c]].index=c;return r(o,p),o}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Mn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Mn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?XN:typeof i=="function"?i:Mn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??Yh,a):r},a}function ife(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Yh(t,e)}}function sfe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=t[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}Yh(t,e)}}function ofe(t,e){if(!(!((o=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,h=0;c<o;++c){for(var p=t[e[c]],m=p[n][1]||0,y=p[n-1][1]||0,v=(m-y)/2,_=0;_<c;++_){var S=t[e[_]],w=S[n][1]||0,j=S[n-1][1]||0;v+=w-j}d+=m,h+=v*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,Yh(t,e)}}function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}var lfe=["type","size","sizeType"];function YN(){return YN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YN.apply(this,arguments)}function MP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function PP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MP(Object(r),!0).forEach(function(n){cfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cfe(t,e,r){return e=ufe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ufe(t){var e=dfe(t,"string");return ag(e)=="symbol"?e:e+""}function dfe(t,e){if(ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hfe(t,e){if(t==null)return{};var r=ffe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ffe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var iW={symbolCircle:_E,symbolCross:Mhe,symbolDiamond:Dhe,symbolSquare:Lhe,symbolStar:zhe,symbolTriangle:Vhe,symbolWye:qhe},pfe=Math.PI/180,mfe=function(e){var r="symbol".concat(G2(e));return iW[r]||_E},gfe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*pfe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},yfe=function(e,r){iW["symbol".concat(G2(e))]=r},X2=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,o=e.sizeType,c=o===void 0?"area":o,d=hfe(e,lfe),h=PP(PP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=mfe(n),j=Hhe().type(w).size(gfe(i,c,n));return j()},m=h.className,y=h.cx,v=h.cy,_=Vt(h,!0);return y===+y&&v===+v&&i===+i?se.createElement("path",YN({},_,{className:pr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(v,")"),d:p()})):null};X2.registerSymbol=yfe;function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}function ZN(){return ZN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZN.apply(this,arguments)}function DP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vfe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(r),!0).forEach(function(n){ig(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bfe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oW(n.key),n)}}function wfe(t,e,r){return e&&bfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sfe(t,e,r){return e=Jx(e),_fe(t,sW()?Reflect.construct(e,r||[],Jx(t).constructor):e.apply(t,r))}function _fe(t,e){if(e&&(Zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tfe(t)}function Tfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sW=function(){return!!t})()}function Jx(t){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jx(t)}function Nfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JN(t,e)}function JN(t,e){return JN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JN(t,e)}function ig(t,e,r){return e=oW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oW(t){var e=Afe(t,"string");return Zh(e)=="symbol"?e:e+""}function Afe(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gs=32,TE=(function(t){function e(){return xfe(this,e),Sfe(this,e,arguments)}return Nfe(e,t),wfe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Gs/2,o=Gs/6,c=Gs/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Gs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Gs,"M").concat(2*c,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Gs/8,"h").concat(Gs,"v").concat(Gs*3/4,"h").concat(-Gs,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=vfe({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(X2,{fill:d,cx:i,cy:i,size:Gs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Gs,height:Gs},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(v,_){var S=v.formatter||d,w=pr(ig(ig({"recharts-legend-item":!0},"legend-item-".concat(_),!0),"inactive",v.inactive));if(v.type==="none")return null;var j=nr(v.value)?null:v.value;Yl(!nr(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var O=v.inactive?h:v.color;return se.createElement("li",ZN({className:w,style:m,key:"legend-item-".concat(_)},a0(n.props,v,_)),se.createElement(HN,{width:o,height:o,viewBox:p,style:y},n.renderIcon(v)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:O}},S?S(j,v,_):j))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(A.PureComponent);ig(TE,"displayName","Legend");ig(TE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var US,LP;function Efe(){if(LP)return US;LP=1;var t=F2();function e(){this.__data__=new t,this.size=0}return US=e,US}var zS,BP;function jfe(){if(BP)return zS;BP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return zS=t,zS}var VS,$P;function kfe(){if($P)return VS;$P=1;function t(e){return this.__data__.get(e)}return VS=t,VS}var FS,UP;function Cfe(){if(UP)return FS;UP=1;function t(e){return this.__data__.has(e)}return FS=t,FS}var qS,zP;function Ofe(){if(zP)return qS;zP=1;var t=F2(),e=mE(),r=gE(),n=200;function a(i,o){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,o]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,o),this.size=c.size,this}return qS=a,qS}var HS,VP;function lW(){if(VP)return HS;VP=1;var t=F2(),e=Efe(),r=jfe(),n=kfe(),a=Cfe(),i=Ofe();function o(c){var d=this.__data__=new t(c);this.size=d.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=a,o.prototype.set=i,HS=o,HS}var GS,FP;function Ife(){if(FP)return GS;FP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return GS=e,GS}var WS,qP;function Rfe(){if(qP)return WS;qP=1;function t(e){return this.__data__.has(e)}return WS=t,WS}var KS,HP;function cW(){if(HP)return KS;HP=1;var t=gE(),e=Ife(),r=Rfe();function n(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new t;++i<o;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,KS=n,KS}var QS,GP;function uW(){if(GP)return QS;GP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return QS=t,QS}var XS,WP;function dW(){if(WP)return XS;WP=1;function t(e,r){return e.has(r)}return XS=t,XS}var YS,KP;function hW(){if(KP)return YS;KP=1;var t=cW(),e=uW(),r=dW(),n=1,a=2;function i(o,c,d,h,p,m){var y=d&n,v=o.length,_=c.length;if(v!=_&&!(y&&_>v))return!1;var S=m.get(o),w=m.get(c);if(S&&w)return S==c&&w==o;var j=-1,O=!0,R=d&a?new t:void 0;for(m.set(o,c),m.set(c,o);++j<v;){var L=o[j],C=c[j];if(h)var P=y?h(C,L,j,c,o,m):h(L,C,j,o,c,m);if(P!==void 0){if(P)continue;O=!1;break}if(R){if(!e(c,function(E,N){if(!r(R,N)&&(L===E||p(L,E,d,h,m)))return R.push(N)})){O=!1;break}}else if(!(L===C||p(L,C,d,h,m))){O=!1;break}}return m.delete(o),m.delete(c),O}return YS=i,YS}var ZS,QP;function Mfe(){if(QP)return ZS;QP=1;var t=ll(),e=t.Uint8Array;return ZS=e,ZS}var JS,XP;function Pfe(){if(XP)return JS;XP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return JS=t,JS}var e6,YP;function NE(){if(YP)return e6;YP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return e6=t,e6}var t6,ZP;function Dfe(){if(ZP)return t6;ZP=1;var t=p1(),e=Mfe(),r=pE(),n=hW(),a=Pfe(),i=NE(),o=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",v="[object RegExp]",_="[object Set]",S="[object String]",w="[object Symbol]",j="[object ArrayBuffer]",O="[object DataView]",R=t?t.prototype:void 0,L=R?R.valueOf:void 0;function C(P,E,N,k,z,D,B){switch(N){case O:if(P.byteLength!=E.byteLength||P.byteOffset!=E.byteOffset)return!1;P=P.buffer,E=E.buffer;case j:return!(P.byteLength!=E.byteLength||!D(new e(P),new e(E)));case d:case h:case y:return r(+P,+E);case p:return P.name==E.name&&P.message==E.message;case v:case S:return P==E+"";case m:var $=a;case _:var K=k&o;if($||($=i),P.size!=E.size&&!K)return!1;var W=B.get(P);if(W)return W==E;k|=c,B.set(P,E);var H=n($(P),$(E),k,z,D,B);return B.delete(P),H;case w:if(L)return L.call(P)==L.call(E)}return!1}return t6=C,t6}var r6,JP;function fW(){if(JP)return r6;JP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return r6=t,r6}var n6,eD;function Lfe(){if(eD)return n6;eD=1;var t=fW(),e=os();function r(n,a,i){var o=a(n);return e(n)?o:t(o,i(n))}return n6=r,n6}var a6,tD;function Bfe(){if(tD)return a6;tD=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,o=[];++n<a;){var c=e[n];r(c,n,e)&&(o[i++]=c)}return o}return a6=t,a6}var i6,rD;function $fe(){if(rD)return i6;rD=1;function t(){return[]}return i6=t,i6}var s6,nD;function Ufe(){if(nD)return s6;nD=1;var t=Bfe(),e=$fe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),t(a(o),function(c){return n.call(o,c)}))}:e;return s6=i,s6}var o6,aD;function zfe(){if(aD)return o6;aD=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return o6=t,o6}var l6,iD;function Vfe(){if(iD)return l6;iD=1;var t=mc(),e=gc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return l6=n,l6}var c6,sD;function AE(){if(sD)return c6;sD=1;var t=Vfe(),e=gc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(o){return e(o)&&n.call(o,"callee")&&!a.call(o,"callee")};return c6=i,c6}var lm={exports:{}},u6,oD;function Ffe(){if(oD)return u6;oD=1;function t(){return!1}return u6=t,u6}lm.exports;var lD;function pW(){return lD||(lD=1,(function(t,e){var r=ll(),n=Ffe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===a,c=o?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(lm,lm.exports)),lm.exports}var d6,cD;function EE(){if(cD)return d6;cD=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return d6=r,d6}var h6,uD;function jE(){if(uD)return h6;uD=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return h6=e,h6}var f6,dD;function qfe(){if(dD)return f6;dD=1;var t=mc(),e=jE(),r=gc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",v="[object Set]",_="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",j="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",L="[object Int8Array]",C="[object Int16Array]",P="[object Int32Array]",E="[object Uint8Array]",N="[object Uint8ClampedArray]",k="[object Uint16Array]",z="[object Uint32Array]",D={};D[O]=D[R]=D[L]=D[C]=D[P]=D[E]=D[N]=D[k]=D[z]=!0,D[n]=D[a]=D[w]=D[i]=D[j]=D[o]=D[c]=D[d]=D[h]=D[p]=D[m]=D[y]=D[v]=D[_]=D[S]=!1;function B($){return r($)&&e($.length)&&!!D[t($)]}return f6=B,f6}var p6,hD;function mW(){if(hD)return p6;hD=1;function t(e){return function(r){return e(r)}}return p6=t,p6}var cm={exports:{}};cm.exports;var fD;function Hfe(){return fD||(fD=1,(function(t,e){var r=PG(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,o=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}})();t.exports=c})(cm,cm.exports)),cm.exports}var m6,pD;function gW(){if(pD)return m6;pD=1;var t=qfe(),e=mW(),r=Hfe(),n=r&&r.isTypedArray,a=n?e(n):t;return m6=a,m6}var g6,mD;function Gfe(){if(mD)return g6;mD=1;var t=zfe(),e=AE(),r=os(),n=pW(),a=EE(),i=gW(),o=Object.prototype,c=o.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),v=!m&&!y&&n(h),_=!m&&!y&&!v&&i(h),S=m||y||v||_,w=S?t(h.length,String):[],j=w.length;for(var O in h)(p||c.call(h,O))&&!(S&&(O=="length"||v&&(O=="offset"||O=="parent")||_&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||a(O,j)))&&w.push(O);return w}return g6=d,g6}var y6,gD;function Wfe(){if(gD)return y6;gD=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return y6=e,y6}var v6,yD;function yW(){if(yD)return v6;yD=1;function t(e,r){return function(n){return e(r(n))}}return v6=t,v6}var x6,vD;function Kfe(){if(vD)return x6;vD=1;var t=yW(),e=t(Object.keys,Object);return x6=e,x6}var b6,xD;function Qfe(){if(xD)return b6;xD=1;var t=Wfe(),e=Kfe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var o=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&o.push(c);return o}return b6=a,b6}var w6,bD;function y1(){if(bD)return w6;bD=1;var t=fE(),e=jE();function r(n){return n!=null&&e(n.length)&&!t(n)}return w6=r,w6}var S6,wD;function Y2(){if(wD)return S6;wD=1;var t=Gfe(),e=Qfe(),r=y1();function n(a){return r(a)?t(a):e(a)}return S6=n,S6}var _6,SD;function Xfe(){if(SD)return _6;SD=1;var t=Lfe(),e=Ufe(),r=Y2();function n(a){return t(a,r,e)}return _6=n,_6}var T6,_D;function Yfe(){if(_D)return T6;_D=1;var t=Xfe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,o,c,d,h,p){var m=c&e,y=t(i),v=y.length,_=t(o),S=_.length;if(v!=S&&!m)return!1;for(var w=v;w--;){var j=y[w];if(!(m?j in o:n.call(o,j)))return!1}var O=p.get(i),R=p.get(o);if(O&&R)return O==o&&R==i;var L=!0;p.set(i,o),p.set(o,i);for(var C=m;++w<v;){j=y[w];var P=i[j],E=o[j];if(d)var N=m?d(E,P,j,o,i,p):d(P,E,j,i,o,p);if(!(N===void 0?P===E||h(P,E,c,d,p):N)){L=!1;break}C||(C=j=="constructor")}if(L&&!C){var k=i.constructor,z=o.constructor;k!=z&&"constructor"in i&&"constructor"in o&&!(typeof k=="function"&&k instanceof k&&typeof z=="function"&&z instanceof z)&&(L=!1)}return p.delete(i),p.delete(o),L}return T6=a,T6}var N6,TD;function Zfe(){if(TD)return N6;TD=1;var t=g0(),e=ll(),r=t(e,"DataView");return N6=r,N6}var A6,ND;function Jfe(){if(ND)return A6;ND=1;var t=g0(),e=ll(),r=t(e,"Promise");return A6=r,A6}var E6,AD;function vW(){if(AD)return E6;AD=1;var t=g0(),e=ll(),r=t(e,"Set");return E6=r,E6}var j6,ED;function epe(){if(ED)return j6;ED=1;var t=g0(),e=ll(),r=t(e,"WeakMap");return j6=r,j6}var k6,jD;function tpe(){if(jD)return k6;jD=1;var t=Zfe(),e=mE(),r=Jfe(),n=vW(),a=epe(),i=mc(),o=DG(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",v=o(t),_=o(e),S=o(r),w=o(n),j=o(a),O=i;return(t&&O(new t(new ArrayBuffer(1)))!=y||e&&O(new e)!=c||r&&O(r.resolve())!=h||n&&O(new n)!=p||a&&O(new a)!=m)&&(O=function(R){var L=i(R),C=L==d?R.constructor:void 0,P=C?o(C):"";if(P)switch(P){case v:return y;case _:return c;case S:return h;case w:return p;case j:return m}return L}),k6=O,k6}var C6,kD;function rpe(){if(kD)return C6;kD=1;var t=lW(),e=hW(),r=Dfe(),n=Yfe(),a=tpe(),i=os(),o=pW(),c=gW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function _(S,w,j,O,R,L){var C=i(S),P=i(w),E=C?p:a(S),N=P?p:a(w);E=E==h?m:E,N=N==h?m:N;var k=E==m,z=N==m,D=E==N;if(D&&o(S)){if(!o(w))return!1;C=!0,k=!1}if(D&&!k)return L||(L=new t),C||c(S)?e(S,w,j,O,R,L):r(S,w,E,j,O,R,L);if(!(j&d)){var B=k&&v.call(S,"__wrapped__"),$=z&&v.call(w,"__wrapped__");if(B||$){var K=B?S.value():S,W=$?w.value():w;return L||(L=new t),R(K,W,j,O,L)}}return D?(L||(L=new t),n(S,w,j,O,R,L)):!1}return C6=_,C6}var O6,CD;function kE(){if(CD)return O6;CD=1;var t=rpe(),e=gc();function r(n,a,i,o,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,o,r,c)}return O6=r,O6}var I6,OD;function npe(){if(OD)return I6;OD=1;var t=lW(),e=kE(),r=1,n=2;function a(i,o,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var y=c[h];if(m&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++h<p;){y=c[h];var v=y[0],_=i[v],S=y[1];if(m&&y[2]){if(_===void 0&&!(v in i))return!1}else{var w=new t;if(d)var j=d(_,S,v,i,o,w);if(!(j===void 0?e(S,_,r|n,d,w):j))return!1}}return!0}return I6=a,I6}var R6,ID;function xW(){if(ID)return R6;ID=1;var t=Uu();function e(r){return r===r&&!t(r)}return R6=e,R6}var M6,RD;function ape(){if(RD)return M6;RD=1;var t=xW(),e=Y2();function r(n){for(var a=e(n),i=a.length;i--;){var o=a[i],c=n[o];a[i]=[o,c,t(c)]}return a}return M6=r,M6}var P6,MD;function bW(){if(MD)return P6;MD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return P6=t,P6}var D6,PD;function ipe(){if(PD)return D6;PD=1;var t=npe(),e=ape(),r=bW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===a||t(o,a,i)}}return D6=n,D6}var L6,DD;function spe(){if(DD)return L6;DD=1;function t(e,r){return e!=null&&r in Object(e)}return L6=t,L6}var B6,LD;function ope(){if(LD)return B6;LD=1;var t=$G(),e=AE(),r=os(),n=EE(),a=jE(),i=H2();function o(c,d,h){d=t(d,c);for(var p=-1,m=d.length,y=!1;++p<m;){var v=i(d[p]);if(!(y=c!=null&&h(c,v)))break;c=c[v]}return y||++p!=m?y:(m=c==null?0:c.length,!!m&&a(m)&&n(v,m)&&(r(c)||e(c)))}return B6=o,B6}var $6,BD;function lpe(){if(BD)return $6;BD=1;var t=spe(),e=ope();function r(n,a){return n!=null&&e(n,a,t)}return $6=r,$6}var U6,$D;function cpe(){if($D)return U6;$D=1;var t=kE(),e=UG(),r=lpe(),n=hE(),a=xW(),i=bW(),o=H2(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(o(p),m):function(y){var v=e(y,p);return v===void 0&&v===m?r(y,p):t(m,v,c|d)}}return U6=h,U6}var z6,UD;function Lf(){if(UD)return z6;UD=1;function t(e){return e}return z6=t,z6}var V6,zD;function upe(){if(zD)return V6;zD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return V6=t,V6}var F6,VD;function dpe(){if(VD)return F6;VD=1;var t=vE();function e(r){return function(n){return t(n,r)}}return F6=e,F6}var q6,FD;function hpe(){if(FD)return q6;FD=1;var t=upe(),e=dpe(),r=hE(),n=H2();function a(i){return r(i)?t(n(i)):e(i)}return q6=a,q6}var H6,qD;function cl(){if(qD)return H6;qD=1;var t=ipe(),e=cpe(),r=Lf(),n=os(),a=hpe();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):a(o)}return H6=i,H6}var G6,HD;function wW(){if(HD)return G6;HD=1;function t(e,r,n,a){for(var i=e.length,o=n+(a?1:-1);a?o--:++o<i;)if(r(e[o],o,e))return o;return-1}return G6=t,G6}var W6,GD;function fpe(){if(GD)return W6;GD=1;function t(e){return e!==e}return W6=t,W6}var K6,WD;function ppe(){if(WD)return K6;WD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return K6=t,K6}var Q6,KD;function mpe(){if(KD)return Q6;KD=1;var t=wW(),e=fpe(),r=ppe();function n(a,i,o){return i===i?r(a,i,o):t(a,e,o)}return Q6=n,Q6}var X6,QD;function gpe(){if(QD)return X6;QD=1;var t=mpe();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return X6=e,X6}var Y6,XD;function ype(){if(XD)return Y6;XD=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return Y6=t,Y6}var Z6,YD;function vpe(){if(YD)return Z6;YD=1;function t(){}return Z6=t,Z6}var J6,ZD;function xpe(){if(ZD)return J6;ZD=1;var t=vW(),e=vpe(),r=NE(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return J6=a,J6}var e_,JD;function bpe(){if(JD)return e_;JD=1;var t=cW(),e=gpe(),r=ype(),n=dW(),a=xpe(),i=NE(),o=200;function c(d,h,p){var m=-1,y=e,v=d.length,_=!0,S=[],w=S;if(p)_=!1,y=r;else if(v>=o){var j=h?null:a(d);if(j)return i(j);_=!1,y=n,w=new t}else w=h?[]:S;e:for(;++m<v;){var O=d[m],R=h?h(O):O;if(O=p||O!==0?O:0,_&&R===R){for(var L=w.length;L--;)if(w[L]===R)continue e;h&&w.push(R),S.push(O)}else y(w,R,p)||(w!==S&&w.push(R),S.push(O))}return S}return e_=c,e_}var t_,eL;function wpe(){if(eL)return t_;eL=1;var t=cl(),e=bpe();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return t_=r,t_}var Spe=wpe();const tL=Xr(Spe);function SW(t,e,r){return e===!0?tL(t,r):nr(e)?tL(t,e):t}function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}var _pe=["ref"];function rL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Il(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(r),!0).forEach(function(n){Z2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TW(n.key),n)}}function Npe(t,e,r){return e&&nL(t.prototype,e),r&&nL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ape(t,e,r){return e=eb(e),Epe(t,_W()?Reflect.construct(e,r||[],eb(t).constructor):e.apply(t,r))}function Epe(t,e){if(e&&(Jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jpe(t)}function jpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_W=function(){return!!t})()}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eb(t)}function kpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eA(t,e)}function eA(t,e){return eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eA(t,e)}function Z2(t,e,r){return e=TW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TW(t){var e=Cpe(t,"string");return Jh(e)=="symbol"?e:e+""}function Cpe(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ope(t,e){if(t==null)return{};var r=Ipe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ipe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Rpe(t){return t.value}function Mpe(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=Ope(e,_pe);return se.createElement(TE,r)}var aL=1,jh=(function(t){function e(){var r;Tpe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Ape(this,e,[].concat(a)),Z2(r,"lastBoundingBox",{width:-1,height:-1}),r}return kpe(e,t),Npe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>aL||Math.abs(a.height-this.lastBoundingBox.height)>aL)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Il({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var v=this.getBBoxSnapshot();m={left:((h||0)-v.width)/2}}else m=o==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var _=this.getBBoxSnapshot();y={top:((p||0)-_.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Il(Il({},m),y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=Il(Il({position:"absolute",width:o||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(v){n.wrapperNode=v}},Mpe(i,Il(Il({},this.props),{},{payload:SW(p,h,Rpe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Il(Il({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&vt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])})(A.PureComponent);Z2(jh,"displayName","Legend");Z2(jh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var r_,iL;function Ppe(){if(iL)return r_;iL=1;var t=p1(),e=AE(),r=os(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return r_=a,r_}var n_,sL;function NW(){if(sL)return n_;sL=1;var t=fW(),e=Ppe();function r(n,a,i,o,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,o,c):t(c,p):o||(c[c.length]=p)}return c}return n_=r,n_}var a_,oL;function Dpe(){if(oL)return a_;oL=1;function t(e){return function(r,n,a){for(var i=-1,o=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(o[h],h,o)===!1)break}return r}}return a_=t,a_}var i_,lL;function Lpe(){if(lL)return i_;lL=1;var t=Dpe(),e=t();return i_=e,i_}var s_,cL;function AW(){if(cL)return s_;cL=1;var t=Lpe(),e=Y2();function r(n,a){return n&&t(n,a,e)}return s_=r,s_}var o_,uL;function Bpe(){if(uL)return o_;uL=1;var t=y1();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var o=a.length,c=n?o:-1,d=Object(a);(n?c--:++c<o)&&i(d[c],c,d)!==!1;);return a}}return o_=e,o_}var l_,dL;function CE(){if(dL)return l_;dL=1;var t=AW(),e=Bpe(),r=e(t);return l_=r,l_}var c_,hL;function EW(){if(hL)return c_;hL=1;var t=CE(),e=y1();function r(n,a){var i=-1,o=e(n)?Array(n.length):[];return t(n,function(c,d,h){o[++i]=a(c,d,h)}),o}return c_=r,c_}var u_,fL;function $pe(){if(fL)return u_;fL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return u_=t,u_}var d_,pL;function Upe(){if(pL)return d_;pL=1;var t=Pf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,o=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!o)return 1;if(!i&&!c&&!m&&r<n||m&&a&&o&&!i&&!c||h&&a&&o||!d&&o||!p)return-1}return 0}return d_=e,d_}var h_,mL;function zpe(){if(mL)return h_;mL=1;var t=Upe();function e(r,n,a){for(var i=-1,o=r.criteria,c=n.criteria,d=o.length,h=a.length;++i<d;){var p=t(o[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return h_=e,h_}var f_,gL;function Vpe(){if(gL)return f_;gL=1;var t=yE(),e=vE(),r=cl(),n=EW(),a=$pe(),i=mW(),o=zpe(),c=Lf(),d=os();function h(p,m,y){m.length?m=t(m,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):m=[c];var v=-1;m=t(m,i(r));var _=n(p,function(S,w,j){var O=t(m,function(R){return R(S)});return{criteria:O,index:++v,value:S}});return a(_,function(S,w){return o(S,w,y)})}return f_=h,f_}var p_,yL;function Fpe(){if(yL)return p_;yL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return p_=t,p_}var m_,vL;function qpe(){if(vL)return m_;vL=1;var t=Fpe(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var o=arguments,c=-1,d=e(o.length-a,0),h=Array(d);++c<d;)h[c]=o[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=o[c];return p[a]=i(h),t(n,this,p)}}return m_=r,m_}var g_,xL;function Hpe(){if(xL)return g_;xL=1;function t(e){return function(){return e}}return g_=t,g_}var y_,bL;function jW(){if(bL)return y_;bL=1;var t=g0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return y_=e,y_}var v_,wL;function Gpe(){if(wL)return v_;wL=1;var t=Hpe(),e=jW(),r=Lf(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return v_=n,v_}var x_,SL;function Wpe(){if(SL)return x_;SL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,o=0;return function(){var c=r(),d=e-(c-o);if(o=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return x_=n,x_}var b_,_L;function Kpe(){if(_L)return b_;_L=1;var t=Gpe(),e=Wpe(),r=e(t);return b_=r,b_}var w_,TL;function Qpe(){if(TL)return w_;TL=1;var t=Lf(),e=qpe(),r=Kpe();function n(a,i){return r(e(a,i,t),a+"")}return w_=n,w_}var S_,NL;function J2(){if(NL)return S_;NL=1;var t=pE(),e=y1(),r=EE(),n=Uu();function a(i,o,c){if(!n(c))return!1;var d=typeof o;return(d=="number"?e(c)&&r(o,c.length):d=="string"&&o in c)?t(c[o],i):!1}return S_=a,S_}var __,AL;function Xpe(){if(AL)return __;AL=1;var t=NW(),e=Vpe(),r=Qpe(),n=J2(),a=r(function(i,o){if(i==null)return[];var c=o.length;return c>1&&n(i,o[0],o[1])?o=[]:c>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),e(i,t(o,1),[])});return __=a,__}var Ype=Xpe();const OE=Xr(Ype);function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function tA(){return tA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tA.apply(this,arguments)}function Zpe(t,e){return rme(t)||tme(t,e)||eme(t,e)||Jpe()}function Jpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eme(t,e){if(t){if(typeof t=="string")return EL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EL(t,e)}}function EL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function rme(t){if(Array.isArray(t))return t}function jL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jL(Object(r),!0).forEach(function(n){nme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nme(t,e,r){return e=ame(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ame(t){var e=ime(t,"string");return sg(e)=="symbol"?e:e+""}function ime(t,e){if(sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sme(t){return Array.isArray(t)&&$a(t[0])&&$a(t[1])?t.join(" ~ "):t}var ome=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,o=e.itemStyle,c=o===void 0?{}:o,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,v=e.wrapperClassName,_=e.labelClassName,S=e.label,w=e.labelFormatter,j=e.accessibilityLayer,O=j===void 0?!1:j,R=function(){if(p&&p.length){var B={padding:0,margin:0},$=(y?OE(p,y):p).map(function(K,W){if(K.type==="none")return null;var H=T_({display:"block",paddingTop:4,paddingBottom:4,color:K.color||"#000"},c),J=K.formatter||m||sme,ie=K.value,he=K.name,pe=ie,Z=he;if(J&&pe!=null&&Z!=null){var ne=J(ie,he,K,W,p);if(Array.isArray(ne)){var ae=Zpe(ne,2);pe=ae[0],Z=ae[1]}else pe=ne}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:H},$a(Z)?se.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,$a(Z)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},pe),se.createElement("span",{className:"recharts-tooltip-item-unit"},K.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:B},$)}return null},L=T_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=T_({margin:0},h),P=!ur(S),E=P?S:"",N=pr("recharts-default-tooltip",v),k=pr("recharts-tooltip-label",_);P&&w&&p!==void 0&&p!==null&&(E=w(S,p));var z=O?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",tA({className:N,style:L},z),se.createElement("p",{className:k,style:C},se.isValidElement(E)?E:"".concat(E)),R())};function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function wv(t,e,r){return e=lme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lme(t){var e=cme(t,"string");return og(e)=="symbol"?e:e+""}function cme(t,e){if(og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hp="recharts-tooltip-wrapper",ume={visibility:"hidden"};function dme(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return pr(Hp,wv(wv(wv(wv({},"".concat(Hp,"-right"),vt(r)&&e&&vt(e.x)&&r>=e.x),"".concat(Hp,"-left"),vt(r)&&e&&vt(e.x)&&r<e.x),"".concat(Hp,"-bottom"),vt(n)&&e&&vt(e.y)&&n>=e.y),"".concat(Hp,"-top"),vt(n)&&e&&vt(e.y)&&n<e.y))}function kL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,o=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&vt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return o[n]?p:m;if(o[n]){var y=p,v=d[n];return y<v?Math.max(m,d[n]):Math.max(p,d[n])}var _=m+c,S=d[n]+h;return _>S?Math.max(p,d[n]):Math.max(m,d[n])}function hme(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function fme(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return o.height>0&&o.width>0&&r?(p=kL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=kL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),h=hme({translateX:p,translateY:m,useTranslate3d:c})):h=ume,{cssProperties:h,cssClasses:dme({translateX:p,translateY:m,coordinate:r})}}function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function CL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(r),!0).forEach(function(n){nA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CW(n.key),n)}}function gme(t,e,r){return e&&mme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yme(t,e,r){return e=tb(e),vme(t,kW()?Reflect.construct(e,r||[],tb(t).constructor):e.apply(t,r))}function vme(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xme(t)}function xme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!t})()}function tb(t){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tb(t)}function bme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rA(t,e)}function rA(t,e){return rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rA(t,e)}function nA(t,e,r){return e=CW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CW(t){var e=wme(t,"string");return ef(e)=="symbol"?e:e+""}function wme(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var IL=1,Sme=(function(t){function e(){var r;pme(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=yme(this,e,[].concat(a)),nA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),nA(r,"handleKeyDown",function(o){if(o.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return bme(e,t),gme(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>IL||Math.abs(n.height-this.state.lastBoundingBox.height)>IL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,y=a.isAnimationActive,v=a.offset,_=a.position,S=a.reverseDirection,w=a.useTranslate3d,j=a.viewBox,O=a.wrapperStyle,R=fme({allowEscapeViewBox:o,coordinate:p,offsetTopLeft:v,position:_,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:j}),L=R.cssClasses,C=R.cssProperties,P=OL(OL({transition:y&&i?"transform ".concat(c,"ms ").concat(d):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},O);return se.createElement("div",{tabIndex:-1,className:L,style:P,ref:function(N){n.wrapperNode=N}},h)}}])})(A.PureComponent),_me=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},y0={isSsr:_me()};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function RL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ML(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(r),!0).forEach(function(n){IE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IW(n.key),n)}}function Ame(t,e,r){return e&&Nme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eme(t,e,r){return e=rb(e),jme(t,OW()?Reflect.construct(e,r||[],rb(t).constructor):e.apply(t,r))}function jme(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kme(t)}function kme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OW=function(){return!!t})()}function rb(t){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(t)}function Cme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aA(t,e)}function aA(t,e){return aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aA(t,e)}function IE(t,e,r){return e=IW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IW(t){var e=Ome(t,"string");return tf(e)=="symbol"?e:e+""}function Ome(t,e){if(tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ime(t){return t.dataKey}function Rme(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(ome,e)}var Bo=(function(t){function e(){return Tme(this,e),Eme(this,e,arguments)}return Cme(e,t),Ame(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,y=a.isAnimationActive,v=a.offset,_=a.payload,S=a.payloadUniqBy,w=a.position,j=a.reverseDirection,O=a.useTranslate3d,R=a.viewBox,L=a.wrapperStyle,C=_??[];m&&C.length&&(C=SW(_.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),S,Ime));var P=C.length>0;return se.createElement(Sme,{allowEscapeViewBox:o,animationDuration:c,animationEasing:d,isAnimationActive:y,active:i,coordinate:p,hasPayload:P,offset:v,position:w,reverseDirection:j,useTranslate3d:O,viewBox:R,wrapperStyle:L},Rme(h,ML(ML({},this.props),{},{payload:C})))}}])})(A.PureComponent);IE(Bo,"displayName","Tooltip");IE(Bo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!y0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var N_,PL;function Mme(){if(PL)return N_;PL=1;var t=ll(),e=function(){return t.Date.now()};return N_=e,N_}var A_,DL;function Pme(){if(DL)return A_;DL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return A_=e,A_}var E_,LL;function Dme(){if(LL)return E_;LL=1;var t=Pme(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return E_=r,E_}var j_,BL;function RW(){if(BL)return j_;BL=1;var t=Dme(),e=Uu(),r=Pf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||o.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return j_=d,j_}var k_,$L;function Lme(){if($L)return k_;$L=1;var t=Uu(),e=Mme(),r=RW(),n="Expected a function",a=Math.max,i=Math.min;function o(c,d,h){var p,m,y,v,_,S,w=0,j=!1,O=!1,R=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(j=!!h.leading,O="maxWait"in h,y=O?a(r(h.maxWait)||0,d):y,R="trailing"in h?!!h.trailing:R);function L($){var K=p,W=m;return p=m=void 0,w=$,v=c.apply(W,K),v}function C($){return w=$,_=setTimeout(N,d),j?L($):v}function P($){var K=$-S,W=$-w,H=d-K;return O?i(H,y-W):H}function E($){var K=$-S,W=$-w;return S===void 0||K>=d||K<0||O&&W>=y}function N(){var $=e();if(E($))return k($);_=setTimeout(N,P($))}function k($){return _=void 0,R&&p?L($):(p=m=void 0,v)}function z(){_!==void 0&&clearTimeout(_),w=0,p=S=m=_=void 0}function D(){return _===void 0?v:k(e())}function B(){var $=e(),K=E($);if(p=arguments,m=this,S=$,K){if(_===void 0)return C(S);if(O)return clearTimeout(_),_=setTimeout(N,d),L(S)}return _===void 0&&(_=setTimeout(N,d)),v}return B.cancel=z,B.flush=D,B}return k_=o,k_}var C_,UL;function Bme(){if(UL)return C_;UL=1;var t=Lme(),e=Uu(),r="Expected a function";function n(a,i,o){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(o)&&(c="leading"in o?!!o.leading:c,d="trailing"in o?!!o.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return C_=n,C_}var $me=Bme();const MW=Xr($me);function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function zL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(r),!0).forEach(function(n){Ume(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ume(t,e,r){return e=zme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zme(t){var e=Vme(t,"string");return lg(e)=="symbol"?e:e+""}function Vme(t,e){if(lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fme(t,e){return Wme(t)||Gme(t,e)||Hme(t,e)||qme()}function qme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hme(t,e){if(t){if(typeof t=="string")return VL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VL(t,e)}}function VL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Wme(t){if(Array.isArray(t))return t}var PW=A.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,o=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,v=t.children,_=t.debounce,S=_===void 0?0:_,w=t.id,j=t.className,O=t.onResize,R=t.style,L=R===void 0?{}:R,C=A.useRef(null),P=A.useRef();P.current=O,A.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var E=A.useState({containerWidth:a.width,containerHeight:a.height}),N=Fme(E,2),k=N[0],z=N[1],D=A.useCallback(function($,K){z(function(W){var H=Math.round($),J=Math.round(K);return W.containerWidth===H&&W.containerHeight===J?W:{containerWidth:H,containerHeight:J}})},[]);A.useEffect(function(){var $=function(he){var pe,Z=he[0].contentRect,ne=Z.width,ae=Z.height;D(ne,ae),(pe=P.current)===null||pe===void 0||pe.call(P,ne,ae)};S>0&&($=MW($,S,{trailing:!0,leading:!1}));var K=new ResizeObserver($),W=C.current.getBoundingClientRect(),H=W.width,J=W.height;return D(H,J),K.observe(C.current),function(){K.disconnect()}},[D,S]);var B=A.useMemo(function(){var $=k.containerWidth,K=k.containerHeight;if($<0||K<0)return null;Yl(Cd(o)||Cd(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,d),Yl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var W=Cd(o)?$:o,H=Cd(d)?K:d;r&&r>0&&(W?H=W/r:H&&(W=H*r),y&&H>y&&(H=y)),Yl(W>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,H,o,d,p,m,r);var J=!Array.isArray(v)&&Xl(v.type).endsWith("Chart");return se.Children.map(v,function(ie){return se.isValidElement(ie)?A.cloneElement(ie,Sv({width:W,height:H},J?{style:Sv({height:"100%",width:"100%",maxHeight:H,maxWidth:W},ie.props.style)}:{})):ie})},[r,v,d,y,m,p,k,o]);return se.createElement("div",{id:w?"".concat(w):void 0,className:pr("recharts-responsive-container",j),style:Sv(Sv({},L),{},{width:o,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:C},B)}),RE=function(e){return null};RE.displayName="Cell";function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function FL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FL(Object(r),!0).forEach(function(n){Kme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kme(t,e,r){return e=Qme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qme(t){var e=Xme(t,"string");return cg(e)=="symbol"?e:e+""}function Xme(t,e){if(cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ih={widthCache:{},cacheCount:0},Yme=2e3,Zme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},qL="recharts_measurement_span";function Jme(t){var e=iA({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Sm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||y0.isSsr)return{width:0,height:0};var n=Jme(r),a=JSON.stringify({text:e,copyStyle:n});if(ih.widthCache[a])return ih.widthCache[a];try{var i=document.getElementById(qL);i||(i=document.createElement("span"),i.setAttribute("id",qL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=iA(iA({},Zme),n);Object.assign(i.style,o),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return ih.widthCache[a]=d,++ih.cacheCount>Yme&&(ih.cacheCount=0,ih.widthCache={}),d}catch{return{width:0,height:0}}},ege=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function nb(t,e){return age(t)||nge(t,e)||rge(t,e)||tge()}function tge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rge(t,e){if(t){if(typeof t=="string")return HL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HL(t,e)}}function HL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function age(t){if(Array.isArray(t))return t}function ige(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oge(n.key),n)}}function sge(t,e,r){return e&&GL(t.prototype,e),r&&GL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function oge(t){var e=lge(t,"string");return ug(e)=="symbol"?e:e+""}function lge(t,e){if(ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,DW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dge=Object.keys(DW),gh="NaN";function hge(t,e){return t*DW[e]}var _v=(function(){function t(e,r){ige(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!cge.test(r)&&(this.num=NaN,this.unit=""),dge.includes(r)&&(this.num=hge(e,r),this.unit="px")}return sge(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=uge.exec(r))!==null&&n!==void 0?n:[],i=nb(a,3),o=i[1],c=i[2];return new t(parseFloat(o),c??"")}}])})();function LW(t){if(t.includes(gh))return gh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=WL.exec(e))!==null&&r!==void 0?r:[],a=nb(n,4),i=a[1],o=a[2],c=a[3],d=_v.parse(i??""),h=_v.parse(c??""),p=o==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return gh;e=e.replace(WL,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=KL.exec(e))!==null&&m!==void 0?m:[],v=nb(y,4),_=v[1],S=v[2],w=v[3],j=_v.parse(_??""),O=_v.parse(w??""),R=S==="+"?j.add(O):j.subtract(O);if(R.isNaN())return gh;e=e.replace(KL,R.toString())}return e}var QL=/\(([^()]*)\)/;function fge(t){for(var e=t;e.includes("(");){var r=QL.exec(e),n=nb(r,2),a=n[1];e=e.replace(QL,LW(a))}return e}function pge(t){var e=t.replace(/\s+/g,"");return e=fge(e),e=LW(e),e}function mge(t){try{return pge(t)}catch{return gh}}function O_(t){var e=mge(t.slice(5,-1));return e===gh?"":e}var gge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],yge=["dx","dy","angle","className","breakAll"];function sA(){return sA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sA.apply(this,arguments)}function XL(t,e){if(t==null)return{};var r=vge(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vge(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function YL(t,e){return Sge(t)||wge(t,e)||bge(t,e)||xge()}function xge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(t,e){if(t){if(typeof t=="string")return ZL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZL(t,e)}}function ZL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Sge(t){if(Array.isArray(t))return t}var BW=/[ \f\n\r\t\v\u2028\u2029]+/,$W=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];ur(r)||(n?i=r.toString().split(""):i=r.toString().split(BW));var o=i.map(function(d){return{word:d,width:Sm(d,a).width}}),c=n?0:Sm("",a).width;return{wordsWithComputedWidth:o,spaceWidth:c}}catch{return null}},_ge=function(e,r,n,a,i){var o=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=vt(o),m=c,y=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(H,J){var ie=J.word,he=J.width,pe=H[H.length-1];if(pe&&(a==null||i||pe.width+he+n<Number(a)))pe.words.push(ie),pe.width+=he+n;else{var Z={words:[ie],width:he};H.push(Z)}return H},[])},v=y(r),_=function(W){return W.reduce(function(H,J){return H.width>J.width?H:J})};if(!p)return v;for(var S="",w=function(W){var H=m.slice(0,W),J=$W({breakAll:h,style:d,children:H+S}).wordsWithComputedWidth,ie=y(J),he=ie.length>o||_(ie).width>Number(a);return[he,ie]},j=0,O=m.length-1,R=0,L;j<=O&&R<=m.length-1;){var C=Math.floor((j+O)/2),P=C-1,E=w(P),N=YL(E,2),k=N[0],z=N[1],D=w(C),B=YL(D,1),$=B[0];if(!k&&!$&&(j=C+1),k&&$&&(O=C-1),!k&&$){L=z;break}R++}return L||v},JL=function(e){var r=ur(e)?[]:e.toString().split(BW);return[{words:r}]},Tge=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,o=e.breakAll,c=e.maxLines;if((r||n)&&!y0.isSsr){var d,h,p=$W({breakAll:o,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return JL(a);return _ge({breakAll:o,children:a,maxLines:c,style:i},d,h,r,n)}return JL(a)},eB="#808080",rf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.lineHeight,c=o===void 0?"1em":o,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,v=y===void 0?"start":y,_=e.verticalAnchor,S=_===void 0?"end":_,w=e.fill,j=w===void 0?eB:w,O=XL(e,gge),R=A.useMemo(function(){return Tge({breakAll:O.breakAll,children:O.children,maxLines:O.maxLines,scaleToFit:m,style:O.style,width:O.width})},[O.breakAll,O.children,O.maxLines,m,O.style,O.width]),L=O.dx,C=O.dy,P=O.angle,E=O.className,N=O.breakAll,k=XL(O,yge);if(!$a(n)||!$a(i))return null;var z=n+(vt(L)?L:0),D=i+(vt(C)?C:0),B;switch(S){case"start":B=O_("calc(".concat(h,")"));break;case"middle":B=O_("calc(".concat((R.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:B=O_("calc(".concat(R.length-1," * -").concat(c,")"));break}var $=[];if(m){var K=R[0].width,W=O.width;$.push("scale(".concat((vt(W)?W/K:1)/K,")"))}return P&&$.push("rotate(".concat(P,", ").concat(z,", ").concat(D,")")),$.length&&(k.transform=$.join(" ")),se.createElement("text",sA({},Vt(k,!0),{x:z,y:D,className:pr("recharts-text",E),textAnchor:v,fill:j.includes("url")?eB:j}),R.map(function(H,J){var ie=H.words.join(N?"":" ");return se.createElement("tspan",{x:z,dy:J===0?B:c,key:"".concat(ie,"-").concat(J)},ie)}))};function Tu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nge(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ME(t){let e,r,n;t.length!==2?(e=Tu,r=(c,d)=>Tu(t(c),d),n=(c,d)=>t(c)-d):(e=t===Tu||t===Nge?t:Age,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function o(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:o,right:i}}function Age(){return 0}function UW(t){return t===null?NaN:+t}function*Ege(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const jge=ME(Tu),v1=jge.right;ME(UW).center;class tB extends Map{constructor(e,r=Oge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(rB(this,e))}has(e){return super.has(rB(this,e))}set(e,r){return super.set(kge(this,e),r)}delete(e){return super.delete(Cge(this,e))}}function rB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function kge({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Cge({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Oge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ige(t=Tu){if(t===Tu)return zW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function zW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Rge=Math.sqrt(50),Mge=Math.sqrt(10),Pge=Math.sqrt(2);function ab(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Rge?10:i>=Mge?5:i>=Pge?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/o,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*o,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?ab(t,e,r*2):[c,d,h]}function oA(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,o]=n?ab(e,t,r):ab(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let h=0;h<c;++h)d[h]=(i-h)/-o;else for(let h=0;h<c;++h)d[h]=(i-h)*o;else if(o<0)for(let h=0;h<c;++h)d[h]=(a+h)/-o;else for(let h=0;h<c;++h)d[h]=(a+h)*o;return d}function lA(t,e,r){return e=+e,t=+t,r=+r,ab(t,e,r)[2]}function cA(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?lA(e,t,r):lA(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function nB(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function aB(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function VW(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?zW:Ige(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),v=Math.max(r,Math.floor(e-h*m/d+y)),_=Math.min(n,Math.floor(e+(d-h)*m/d+y));VW(t,e,v,_,a)}const i=t[e];let o=r,c=n;for(Gp(t,r,e),a(t[n],i)>0&&Gp(t,r,n);o<c;){for(Gp(t,o,c),++o,--c;a(t[o],i)<0;)++o;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?Gp(t,r,c):(++c,Gp(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function Gp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Dge(t,e,r){if(t=Float64Array.from(Ege(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return aB(t);if(e>=1)return nB(t);var n,a=(n-1)*e,i=Math.floor(a),o=nB(VW(t,i).subarray(0,i+1)),c=aB(t.subarray(i+1));return o+(c-o)*(a-i)}}function Lge(t,e,r=UW){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),o=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return o+(c-o)*(a-i)}}function Bge(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function so(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function yc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const uA=Symbol("implicit");function PE(){var t=new tB,e=[],r=[],n=uA;function a(i){let o=t.get(i);if(o===void 0){if(n!==uA)return n;t.set(i,o=e.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new tB;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return PE(e,r).unknown(n)},so.apply(a,arguments),a}function dg(){var t=PE().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,o,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,v=a<n,_=v?a:n,S=v?n:a;i=(S-_)/Math.max(1,y-d+h*2),c&&(i=Math.floor(i)),_+=(S-_-i*(y-d))*p,o=i*(1-d),c&&(_=Math.round(_),o=Math.round(o));var w=Bge(y).map(function(j){return _+i*j});return r(v?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(y){return arguments.length?(c=!!y,m()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return dg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},so.apply(m(),arguments)}function FW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return FW(e())},t}function _m(){return FW(dg.apply(null,arguments).paddingInner(1))}function DE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function qW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function x1(){}var hg=.7,ib=1/hg,kh="\\s*([+-]?\\d+)\\s*",fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$ge=/^#([0-9a-f]{3,8})$/,Uge=new RegExp(`^rgb\\(${kh},${kh},${kh}\\)$`),zge=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),Vge=new RegExp(`^rgba\\(${kh},${kh},${kh},${fg}\\)$`),Fge=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${fg}\\)$`),qge=new RegExp(`^hsl\\(${fg},${Ko},${Ko}\\)$`),Hge=new RegExp(`^hsla\\(${fg},${Ko},${Ko},${fg}\\)$`),iB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DE(x1,pg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sB,formatHex:sB,formatHex8:Gge,formatHsl:Wge,formatRgb:oB,toString:oB});function sB(){return this.rgb().formatHex()}function Gge(){return this.rgb().formatHex8()}function Wge(){return HW(this).formatHsl()}function oB(){return this.rgb().formatRgb()}function pg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=$ge.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?lB(e):r===3?new ns(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Tv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Tv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Uge.exec(t))?new ns(e[1],e[2],e[3],1):(e=zge.exec(t))?new ns(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Vge.exec(t))?Tv(e[1],e[2],e[3],e[4]):(e=Fge.exec(t))?Tv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=qge.exec(t))?dB(e[1],e[2]/100,e[3]/100,1):(e=Hge.exec(t))?dB(e[1],e[2]/100,e[3]/100,e[4]):iB.hasOwnProperty(t)?lB(iB[t]):t==="transparent"?new ns(NaN,NaN,NaN,0):null}function lB(t){return new ns(t>>16&255,t>>8&255,t&255,1)}function Tv(t,e,r,n){return n<=0&&(t=e=r=NaN),new ns(t,e,r,n)}function Kge(t){return t instanceof x1||(t=pg(t)),t?(t=t.rgb(),new ns(t.r,t.g,t.b,t.opacity)):new ns}function dA(t,e,r,n){return arguments.length===1?Kge(t):new ns(t,e,r,n??1)}function ns(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}DE(ns,dA,qW(x1,{brighter(t){return t=t==null?ib:Math.pow(ib,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?hg:Math.pow(hg,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ns(Vd(this.r),Vd(this.g),Vd(this.b),sb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cB,formatHex:cB,formatHex8:Qge,formatRgb:uB,toString:uB}));function cB(){return`#${Od(this.r)}${Od(this.g)}${Od(this.b)}`}function Qge(){return`#${Od(this.r)}${Od(this.g)}${Od(this.b)}${Od((isNaN(this.opacity)?1:this.opacity)*255)}`}function uB(){const t=sb(this.opacity);return`${t===1?"rgb(":"rgba("}${Vd(this.r)}, ${Vd(this.g)}, ${Vd(this.b)}${t===1?")":`, ${t})`}`}function sb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Od(t){return t=Vd(t),(t<16?"0":"")+t.toString(16)}function dB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new xo(t,e,r,n)}function HW(t){if(t instanceof xo)return new xo(t.h,t.s,t.l,t.opacity);if(t instanceof x1||(t=pg(t)),!t)return new xo;if(t instanceof xo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(e===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-e)/c+2:o=(e-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new xo(o,c,d,t.opacity)}function Xge(t,e,r,n){return arguments.length===1?HW(t):new xo(t,e,r,n??1)}function xo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}DE(xo,Xge,qW(x1,{brighter(t){return t=t==null?ib:Math.pow(ib,t),new xo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?hg:Math.pow(hg,t),new xo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ns(I_(t>=240?t-240:t+120,a,n),I_(t,a,n),I_(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new xo(hB(this.h),Nv(this.s),Nv(this.l),sb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=sb(this.opacity);return`${t===1?"hsl(":"hsla("}${hB(this.h)}, ${Nv(this.s)*100}%, ${Nv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hB(t){return t=(t||0)%360,t<0?t+360:t}function Nv(t){return Math.max(0,Math.min(1,t||0))}function I_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const LE=t=>()=>t;function Yge(t,e){return function(r){return t+r*e}}function Zge(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Jge(t){return(t=+t)==1?GW:function(e,r){return r-e?Zge(e,r,t):LE(isNaN(e)?r:e)}}function GW(t,e){var r=e-t;return r?Yge(t,r):LE(isNaN(t)?e:t)}const fB=(function t(e){var r=Jge(e);function n(a,i){var o=r((a=dA(a)).r,(i=dA(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=GW(a.opacity,i.opacity);return function(p){return a.r=o(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function e1e(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function t1e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function r1e(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Bf(t[o],e[o]);for(;o<r;++o)i[o]=e[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function n1e(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function ob(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function a1e(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Bf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var hA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R_=new RegExp(hA.source,"g");function i1e(t){return function(){return t}}function s1e(t){return function(e){return t(e)+""}}function o1e(t,e){var r=hA.lastIndex=R_.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(t=t+"",e=e+"";(n=hA.exec(t))&&(a=R_.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:ob(n,a)})),r=R_.lastIndex;return r<e.length&&(i=e.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?s1e(d[0].x):i1e(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Bf(t,e){var r=typeof e,n;return e==null||r==="boolean"?LE(e):(r==="number"?ob:r==="string"?(n=pg(e))?(e=n,fB):o1e:e instanceof pg?fB:e instanceof Date?n1e:t1e(e)?e1e:Array.isArray(e)?r1e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?a1e:ob)(t,e)}function BE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function l1e(t,e){e===void 0&&(e=t,t=Bf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function c1e(t){return function(){return t}}function lb(t){return+t}var pB=[0,1];function Di(t){return t}function fA(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:c1e(isNaN(e)?NaN:.5)}function u1e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function d1e(t,e,r){var n=t[0],a=t[1],i=e[0],o=e[1];return a<n?(n=fA(a,n),i=r(o,i)):(n=fA(n,a),i=r(i,o)),function(c){return i(n(c))}}function h1e(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=fA(t[o],t[o+1]),i[o]=r(e[o],e[o+1]);return function(c){var d=v1(t,c,1,n)-1;return i[d](a[d](c))}}function b1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ew(){var t=pB,e=pB,r=Bf,n,a,i,o=Di,c,d,h;function p(){var y=Math.min(t.length,e.length);return o!==Di&&(o=u1e(t[0],t[y-1])),c=y>2?h1e:d1e,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?i:(d||(d=c(t.map(n),e,r)))(n(o(y)))}return m.invert=function(y){return o(a((h||(h=c(e,t.map(n),ob)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,lb),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=BE,p()},m.clamp=function(y){return arguments.length?(o=y?!0:Di,p()):o!==Di},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(i=y,m):i},function(y,v){return n=y,a=v,p()}}function $E(){return ew()(Di,Di)}function f1e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function nf(t){return t=cb(Math.abs(t)),t?t[1]:NaN}function p1e(t,e){return function(r,n){for(var a=r.length,i=[],o=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[o=(o+1)%t.length];return i.reverse().join(e)}}function m1e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var g1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mg(t){if(!(e=g1e.exec(t)))throw new Error("invalid format: "+t);var e;return new UE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mg.prototype=UE.prototype;function UE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}UE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y1e(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var ub;function v1e(t,e){var r=cb(t,e);if(!r)return ub=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(ub=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+cb(t,Math.max(0,e+i-1))[0]}function mB(t,e){var r=cb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const gB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:f1e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>mB(t*100,e),r:mB,s:v1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yB(t){return t}var vB=Array.prototype.map,xB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function x1e(t){var e=t.grouping===void 0||t.thousands===void 0?yB:p1e(vB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?yB:m1e(vB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=mg(m);var v=m.fill,_=m.align,S=m.sign,w=m.symbol,j=m.zero,O=m.width,R=m.comma,L=m.precision,C=m.trim,P=m.type;P==="n"?(R=!0,P="g"):gB[P]||(L===void 0&&(L=12),C=!0,P="g"),(j||v==="0"&&_==="=")&&(j=!0,v="0",_="=");var E=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),N=(w==="$"?n:/[%p]/.test(P)?o:"")+(y&&y.suffix!==void 0?y.suffix:""),k=gB[P],z=/[defgprs%]/.test(P);L=L===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function D(B){var $=E,K=N,W,H,J;if(P==="c")K=k(B)+K,B="";else{B=+B;var ie=B<0||1/B<0;if(B=isNaN(B)?d:k(Math.abs(B),L),C&&(B=y1e(B)),ie&&+B==0&&S!=="+"&&(ie=!1),$=(ie?S==="("?S:c:S==="-"||S==="("?"":S)+$,K=(P==="s"&&!isNaN(B)&&ub!==void 0?xB[8+ub/3]:"")+K+(ie&&S==="("?")":""),z){for(W=-1,H=B.length;++W<H;)if(J=B.charCodeAt(W),48>J||J>57){K=(J===46?a+B.slice(W+1):B.slice(W))+K,B=B.slice(0,W);break}}}R&&!j&&(B=e(B,1/0));var he=$.length+B.length+K.length,pe=he<O?new Array(O-he+1).join(v):"";switch(R&&j&&(B=e(pe+B,pe.length?O-K.length:1/0),pe=""),_){case"<":B=$+B+K+pe;break;case"=":B=$+pe+B+K;break;case"^":B=pe.slice(0,he=pe.length>>1)+$+B+K+pe.slice(he);break;default:B=pe+$+B+K;break}return i(B)}return D.toString=function(){return m+""},D}function p(m,y){var v=Math.max(-8,Math.min(8,Math.floor(nf(y)/3)))*3,_=Math.pow(10,-v),S=h((m=mg(m),m.type="f",m),{suffix:xB[8+v/3]});return function(w){return S(_*w)}}return{format:h,formatPrefix:p}}var Av,zE,WW;b1e({thousands:",",grouping:[3],currency:["$",""]});function b1e(t){return Av=x1e(t),zE=Av.format,WW=Av.formatPrefix,Av}function w1e(t){return Math.max(0,-nf(Math.abs(t)))}function S1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nf(e)/3)))*3-nf(Math.abs(t)))}function _1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nf(e)-nf(t))+1}function KW(t,e,r,n){var a=cA(t,e,r),i;switch(n=mg(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=S1e(a,o))&&(n.precision=i),WW(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=_1e(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=w1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return zE(n)}function zu(t){var e=t.domain;return t.ticks=function(r){var n=e();return oA(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return KW(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,o=n[a],c=n[i],d,h,p=10;for(c<o&&(h=o,o=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=lA(o,c,r),h===d)return n[a]=o,n[i]=c,e(n);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function db(){var t=$E();return t.copy=function(){return b1(t,db())},so.apply(t,arguments),zu(t)}function QW(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,lb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return QW(t).unknown(e)},t=arguments.length?Array.from(t,lb):[0,1],zu(r)}function XW(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),t[r]=e.floor(a),t[n]=e.ceil(i),t}function bB(t){return Math.log(t)}function wB(t){return Math.exp(t)}function T1e(t){return-Math.log(-t)}function N1e(t){return-Math.exp(-t)}function A1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function E1e(t){return t===10?A1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function j1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function SB(t){return(e,r)=>-t(-e,r)}function VE(t){const e=t(bB,wB),r=e.domain;let n=10,a,i;function o(){return a=j1e(n),i=E1e(n),r()[0]<0?(a=SB(a),i=SB(i),t(T1e,N1e)):t(bB,wB),e}return e.base=function(c){return arguments.length?(n=+c,o()):n},e.domain=function(c){return arguments.length?(r(c),o()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=a(h),v=a(p),_,S;const w=c==null?10:+c;let j=[];if(!(n%1)&&v-y<w){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(_=1;_<n;++_)if(S=y<0?_/i(-y):_*i(y),!(S<h)){if(S>p)break;j.push(S)}}else for(;y<=v;++y)for(_=n-1;_>=1;--_)if(S=y>0?_/i(-y):_*i(y),!(S<h)){if(S>p)break;j.push(S)}j.length*2<w&&(j=oA(h,p,w))}else j=oA(y,v,Math.min(v-y,w)).map(i);return m?j.reverse():j},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=mg(d)).precision==null&&(d.trim=!0),d=zE(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(XW(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function YW(){const t=VE(ew()).domain([1,10]);return t.copy=()=>b1(t,YW()).base(t.base()),so.apply(t,arguments),t}function _B(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function TB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function FE(t){var e=1,r=t(_B(e),TB(e));return r.constant=function(n){return arguments.length?t(_B(e=+n),TB(e)):e},zu(r)}function ZW(){var t=FE(ew());return t.copy=function(){return b1(t,ZW()).constant(t.constant())},so.apply(t,arguments)}function NB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function k1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function C1e(t){return t<0?-t*t:t*t}function qE(t){var e=t(Di,Di),r=1;function n(){return r===1?t(Di,Di):r===.5?t(k1e,C1e):t(NB(r),NB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},zu(e)}function HE(){var t=qE(ew());return t.copy=function(){return b1(t,HE()).exponent(t.exponent())},so.apply(t,arguments),t}function O1e(){return HE.apply(null,arguments).exponent(.5)}function AB(t){return Math.sign(t)*t*t}function I1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function JW(){var t=$E(),e=[0,1],r=!1,n;function a(i){var o=I1e(t(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return t.invert(AB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,lb)).map(AB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return JW(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},so.apply(a,arguments),zu(a)}function eK(){var t=[],e=[],r=[],n;function a(){var o=0,c=Math.max(1,e.length);for(r=new Array(c-1);++o<c;)r[o-1]=Lge(t,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:e[v1(r,o)]}return i.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Tu),a()},i.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return eK().domain(t).range(e).unknown(n)},so.apply(i,arguments)}function tK(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[v1(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return o}return o.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return tK().domain([t,e]).range(a).unknown(i)},so.apply(zu(o),arguments)}function rK(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[v1(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return rK().domain(t).range(e).unknown(r)},so.apply(a,arguments)}const M_=new Date,P_=new Date;function Fa(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<o);return d},a.filter=i=>Fa(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!i(o););else for(;--c>=0;)for(;e(o,1),!i(o););}),r&&(a.count=(i,o)=>(M_.setTime(+i),P_.setTime(+o),t(M_),t(P_),Math.floor(r(M_,P_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const hb=Fa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);hb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Fa(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):hb);hb.range;const ql=1e3,Xs=ql*60,Hl=Xs*60,oc=Hl*24,GE=oc*7,EB=oc*30,D_=oc*365,Id=Fa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ql)},(t,e)=>(e-t)/ql,t=>t.getUTCSeconds());Id.range;const WE=Fa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ql)},(t,e)=>{t.setTime(+t+e*Xs)},(t,e)=>(e-t)/Xs,t=>t.getMinutes());WE.range;const KE=Fa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xs)},(t,e)=>(e-t)/Xs,t=>t.getUTCMinutes());KE.range;const QE=Fa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ql-t.getMinutes()*Xs)},(t,e)=>{t.setTime(+t+e*Hl)},(t,e)=>(e-t)/Hl,t=>t.getHours());QE.range;const XE=Fa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Hl)},(t,e)=>(e-t)/Hl,t=>t.getUTCHours());XE.range;const w1=Fa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xs)/oc,t=>t.getDate()-1);w1.range;const tw=Fa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/oc,t=>t.getUTCDate()-1);tw.range;const nK=Fa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/oc,t=>Math.floor(t/oc));nK.range;function v0(t){return Fa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Xs)/GE)}const rw=v0(0),fb=v0(1),R1e=v0(2),M1e=v0(3),af=v0(4),P1e=v0(5),D1e=v0(6);rw.range;fb.range;R1e.range;M1e.range;af.range;P1e.range;D1e.range;function x0(t){return Fa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/GE)}const nw=x0(0),pb=x0(1),L1e=x0(2),B1e=x0(3),sf=x0(4),$1e=x0(5),U1e=x0(6);nw.range;pb.range;L1e.range;B1e.range;sf.range;$1e.range;U1e.range;const YE=Fa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());YE.range;const ZE=Fa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ZE.range;const lc=Fa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());lc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});lc.range;const cc=Fa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());cc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});cc.range;function aK(t,e,r,n,a,i){const o=[[Id,1,ql],[Id,5,5*ql],[Id,15,15*ql],[Id,30,30*ql],[i,1,Xs],[i,5,5*Xs],[i,15,15*Xs],[i,30,30*Xs],[a,1,Hl],[a,3,3*Hl],[a,6,6*Hl],[a,12,12*Hl],[n,1,oc],[n,2,2*oc],[r,1,GE],[e,1,EB],[e,3,3*EB],[t,1,D_]];function c(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const v=m&&typeof m.range=="function"?m:d(h,p,m),_=v?v.range(h,+p+1):[];return y?_.reverse():_}function d(h,p,m){const y=Math.abs(p-h)/m,v=ME(([,,w])=>w).right(o,y);if(v===o.length)return t.every(cA(h/D_,p/D_,m));if(v===0)return hb.every(Math.max(cA(h,p,m),1));const[_,S]=o[y/o[v-1][2]<o[v][2]/y?v-1:v];return _.every(S)}return[c,d]}const[z1e,V1e]=aK(cc,ZE,nw,nK,XE,KE),[F1e,q1e]=aK(lc,YE,rw,w1,QE,WE);function L_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function B_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wp(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function H1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,o=t.shortDays,c=t.months,d=t.shortMonths,h=Kp(a),p=Qp(a),m=Kp(i),y=Qp(i),v=Kp(o),_=Qp(o),S=Kp(c),w=Qp(c),j=Kp(d),O=Qp(d),R={a:J,A:ie,b:he,B:pe,c:null,d:RB,e:RB,f:pye,g:Tye,G:Aye,H:dye,I:hye,j:fye,L:iK,m:mye,M:gye,p:Z,q:ne,Q:DB,s:LB,S:yye,u:vye,U:xye,V:bye,w:wye,W:Sye,x:null,X:null,y:_ye,Y:Nye,Z:Eye,"%":PB},L={a:ae,A:xe,b:Oe,B:Ue,c:null,d:MB,e:MB,f:Oye,g:zye,G:Fye,H:jye,I:kye,j:Cye,L:oK,m:Iye,M:Rye,p:Xe,q:Ye,Q:DB,s:LB,S:Mye,u:Pye,U:Dye,V:Lye,w:Bye,W:$ye,x:null,X:null,y:Uye,Y:Vye,Z:qye,"%":PB},C={a:z,A:D,b:B,B:$,c:K,d:OB,e:OB,f:oye,g:CB,G:kB,H:IB,I:IB,j:nye,L:sye,m:rye,M:aye,p:k,q:tye,Q:cye,s:uye,S:iye,u:X1e,U:Y1e,V:Z1e,w:Q1e,W:J1e,x:W,X:H,y:CB,Y:kB,Z:eye,"%":lye};R.x=P(r,R),R.X=P(n,R),R.c=P(e,R),L.x=P(r,L),L.X=P(n,L),L.c=P(e,L);function P(Q,me){return function(te){var re=[],Pe=-1,Ge=0,it=Q.length,et,Pt,Me;for(te instanceof Date||(te=new Date(+te));++Pe<it;)Q.charCodeAt(Pe)===37&&(re.push(Q.slice(Ge,Pe)),(Pt=jB[et=Q.charAt(++Pe)])!=null?et=Q.charAt(++Pe):Pt=et==="e"?" ":"0",(Me=me[et])&&(et=Me(te,Pt)),re.push(et),Ge=Pe+1);return re.push(Q.slice(Ge,Pe)),re.join("")}}function E(Q,me){return function(te){var re=Wp(1900,void 0,1),Pe=N(re,Q,te+="",0),Ge,it;if(Pe!=te.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(me&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Ge=B_(Wp(re.y,0,1)),it=Ge.getUTCDay(),Ge=it>4||it===0?pb.ceil(Ge):pb(Ge),Ge=tw.offset(Ge,(re.V-1)*7),re.y=Ge.getUTCFullYear(),re.m=Ge.getUTCMonth(),re.d=Ge.getUTCDate()+(re.w+6)%7):(Ge=L_(Wp(re.y,0,1)),it=Ge.getDay(),Ge=it>4||it===0?fb.ceil(Ge):fb(Ge),Ge=w1.offset(Ge,(re.V-1)*7),re.y=Ge.getFullYear(),re.m=Ge.getMonth(),re.d=Ge.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),it="Z"in re?B_(Wp(re.y,0,1)).getUTCDay():L_(Wp(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(it+5)%7:re.w+re.U*7-(it+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,B_(re)):L_(re)}}function N(Q,me,te,re){for(var Pe=0,Ge=me.length,it=te.length,et,Pt;Pe<Ge;){if(re>=it)return-1;if(et=me.charCodeAt(Pe++),et===37){if(et=me.charAt(Pe++),Pt=C[et in jB?me.charAt(Pe++):et],!Pt||(re=Pt(Q,te,re))<0)return-1}else if(et!=te.charCodeAt(re++))return-1}return re}function k(Q,me,te){var re=h.exec(me.slice(te));return re?(Q.p=p.get(re[0].toLowerCase()),te+re[0].length):-1}function z(Q,me,te){var re=v.exec(me.slice(te));return re?(Q.w=_.get(re[0].toLowerCase()),te+re[0].length):-1}function D(Q,me,te){var re=m.exec(me.slice(te));return re?(Q.w=y.get(re[0].toLowerCase()),te+re[0].length):-1}function B(Q,me,te){var re=j.exec(me.slice(te));return re?(Q.m=O.get(re[0].toLowerCase()),te+re[0].length):-1}function $(Q,me,te){var re=S.exec(me.slice(te));return re?(Q.m=w.get(re[0].toLowerCase()),te+re[0].length):-1}function K(Q,me,te){return N(Q,e,me,te)}function W(Q,me,te){return N(Q,r,me,te)}function H(Q,me,te){return N(Q,n,me,te)}function J(Q){return o[Q.getDay()]}function ie(Q){return i[Q.getDay()]}function he(Q){return d[Q.getMonth()]}function pe(Q){return c[Q.getMonth()]}function Z(Q){return a[+(Q.getHours()>=12)]}function ne(Q){return 1+~~(Q.getMonth()/3)}function ae(Q){return o[Q.getUTCDay()]}function xe(Q){return i[Q.getUTCDay()]}function Oe(Q){return d[Q.getUTCMonth()]}function Ue(Q){return c[Q.getUTCMonth()]}function Xe(Q){return a[+(Q.getUTCHours()>=12)]}function Ye(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var me=P(Q+="",R);return me.toString=function(){return Q},me},parse:function(Q){var me=E(Q+="",!1);return me.toString=function(){return Q},me},utcFormat:function(Q){var me=P(Q+="",L);return me.toString=function(){return Q},me},utcParse:function(Q){var me=E(Q+="",!0);return me.toString=function(){return Q},me}}}var jB={"-":"",_:" ",0:"0"},ei=/^\s*\d+/,G1e=/^%/,W1e=/[\\^$*+?|[\]().{}]/g;function Gr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function K1e(t){return t.replace(W1e,"\\$&")}function Kp(t){return new RegExp("^(?:"+t.map(K1e).join("|")+")","i")}function Qp(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Q1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function X1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Y1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Z1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function J1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function kB(t,e,r){var n=ei.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function CB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function eye(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function tye(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function rye(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function OB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function nye(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function IB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function aye(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function iye(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function sye(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function oye(t,e,r){var n=ei.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function lye(t,e,r){var n=G1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function cye(t,e,r){var n=ei.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function uye(t,e,r){var n=ei.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function RB(t,e){return Gr(t.getDate(),e,2)}function dye(t,e){return Gr(t.getHours(),e,2)}function hye(t,e){return Gr(t.getHours()%12||12,e,2)}function fye(t,e){return Gr(1+w1.count(lc(t),t),e,3)}function iK(t,e){return Gr(t.getMilliseconds(),e,3)}function pye(t,e){return iK(t,e)+"000"}function mye(t,e){return Gr(t.getMonth()+1,e,2)}function gye(t,e){return Gr(t.getMinutes(),e,2)}function yye(t,e){return Gr(t.getSeconds(),e,2)}function vye(t){var e=t.getDay();return e===0?7:e}function xye(t,e){return Gr(rw.count(lc(t)-1,t),e,2)}function sK(t){var e=t.getDay();return e>=4||e===0?af(t):af.ceil(t)}function bye(t,e){return t=sK(t),Gr(af.count(lc(t),t)+(lc(t).getDay()===4),e,2)}function wye(t){return t.getDay()}function Sye(t,e){return Gr(fb.count(lc(t)-1,t),e,2)}function _ye(t,e){return Gr(t.getFullYear()%100,e,2)}function Tye(t,e){return t=sK(t),Gr(t.getFullYear()%100,e,2)}function Nye(t,e){return Gr(t.getFullYear()%1e4,e,4)}function Aye(t,e){var r=t.getDay();return t=r>=4||r===0?af(t):af.ceil(t),Gr(t.getFullYear()%1e4,e,4)}function Eye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Gr(e/60|0,"0",2)+Gr(e%60,"0",2)}function MB(t,e){return Gr(t.getUTCDate(),e,2)}function jye(t,e){return Gr(t.getUTCHours(),e,2)}function kye(t,e){return Gr(t.getUTCHours()%12||12,e,2)}function Cye(t,e){return Gr(1+tw.count(cc(t),t),e,3)}function oK(t,e){return Gr(t.getUTCMilliseconds(),e,3)}function Oye(t,e){return oK(t,e)+"000"}function Iye(t,e){return Gr(t.getUTCMonth()+1,e,2)}function Rye(t,e){return Gr(t.getUTCMinutes(),e,2)}function Mye(t,e){return Gr(t.getUTCSeconds(),e,2)}function Pye(t){var e=t.getUTCDay();return e===0?7:e}function Dye(t,e){return Gr(nw.count(cc(t)-1,t),e,2)}function lK(t){var e=t.getUTCDay();return e>=4||e===0?sf(t):sf.ceil(t)}function Lye(t,e){return t=lK(t),Gr(sf.count(cc(t),t)+(cc(t).getUTCDay()===4),e,2)}function Bye(t){return t.getUTCDay()}function $ye(t,e){return Gr(pb.count(cc(t)-1,t),e,2)}function Uye(t,e){return Gr(t.getUTCFullYear()%100,e,2)}function zye(t,e){return t=lK(t),Gr(t.getUTCFullYear()%100,e,2)}function Vye(t,e){return Gr(t.getUTCFullYear()%1e4,e,4)}function Fye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?sf(t):sf.ceil(t),Gr(t.getUTCFullYear()%1e4,e,4)}function qye(){return"+0000"}function PB(){return"%"}function DB(t){return+t}function LB(t){return Math.floor(+t/1e3)}var sh,cK,uK;Hye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Hye(t){return sh=H1e(t),cK=sh.format,sh.parse,uK=sh.utcFormat,sh.utcParse,sh}function Gye(t){return new Date(t)}function Wye(t){return t instanceof Date?+t:+new Date(+t)}function JE(t,e,r,n,a,i,o,c,d,h){var p=$E(),m=p.invert,y=p.domain,v=h(".%L"),_=h(":%S"),S=h("%I:%M"),w=h("%I %p"),j=h("%a %d"),O=h("%b %d"),R=h("%B"),L=h("%Y");function C(P){return(d(P)<P?v:c(P)<P?_:o(P)<P?S:i(P)<P?w:n(P)<P?a(P)<P?j:O:r(P)<P?R:L)(P)}return p.invert=function(P){return new Date(m(P))},p.domain=function(P){return arguments.length?y(Array.from(P,Wye)):y().map(Gye)},p.ticks=function(P){var E=y();return t(E[0],E[E.length-1],P??10)},p.tickFormat=function(P,E){return E==null?C:h(E)},p.nice=function(P){var E=y();return(!P||typeof P.range!="function")&&(P=e(E[0],E[E.length-1],P??10)),P?y(XW(E,P)):p},p.copy=function(){return b1(p,JE(t,e,r,n,a,i,o,c,d,h))},p}function Kye(){return so.apply(JE(F1e,q1e,lc,YE,rw,w1,QE,WE,Id,cK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Qye(){return so.apply(JE(z1e,V1e,cc,ZE,nw,tw,XE,KE,Id,uK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function aw(){var t=0,e=1,r,n,a,i,o=Di,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:o(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(o=m,h):o};function p(m){return function(y){var v,_;return arguments.length?([v,_]=y,o=m(v,_),h):[o(0),o(1)]}}return h.range=p(Bf),h.rangeRound=p(BE),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Vu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dK(){var t=zu(aw()(Di));return t.copy=function(){return Vu(t,dK())},yc.apply(t,arguments)}function hK(){var t=VE(aw()).domain([1,10]);return t.copy=function(){return Vu(t,hK()).base(t.base())},yc.apply(t,arguments)}function fK(){var t=FE(aw());return t.copy=function(){return Vu(t,fK()).constant(t.constant())},yc.apply(t,arguments)}function ej(){var t=qE(aw());return t.copy=function(){return Vu(t,ej()).exponent(t.exponent())},yc.apply(t,arguments)}function Xye(){return ej.apply(null,arguments).exponent(.5)}function pK(){var t=[],e=Di;function r(n){if(n!=null&&!isNaN(n=+n))return e((v1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Tu),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Dge(t,i/n))},r.copy=function(){return pK(e).domain(t)},yc.apply(r,arguments)}function iw(){var t=0,e=.5,r=1,n=1,a,i,o,c,d,h=Di,p,m=!1,y;function v(S){return isNaN(S=+S)?y:(S=.5+((S=+p(S))-i)*(n*S<n*i?c:d),h(m?Math.max(0,Math.min(1,S)):S))}v.domain=function(S){return arguments.length?([t,e,r]=S,a=p(t=+t),i=p(e=+e),o=p(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,v):[t,e,r]},v.clamp=function(S){return arguments.length?(m=!!S,v):m},v.interpolator=function(S){return arguments.length?(h=S,v):h};function _(S){return function(w){var j,O,R;return arguments.length?([j,O,R]=w,h=l1e(S,[j,O,R]),v):[h(0),h(.5),h(1)]}}return v.range=_(Bf),v.rangeRound=_(BE),v.unknown=function(S){return arguments.length?(y=S,v):y},function(S){return p=S,a=S(t),i=S(e),o=S(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,v}}function mK(){var t=zu(iw()(Di));return t.copy=function(){return Vu(t,mK())},yc.apply(t,arguments)}function gK(){var t=VE(iw()).domain([.1,1,10]);return t.copy=function(){return Vu(t,gK()).base(t.base())},yc.apply(t,arguments)}function yK(){var t=FE(iw());return t.copy=function(){return Vu(t,yK()).constant(t.constant())},yc.apply(t,arguments)}function tj(){var t=qE(iw());return t.copy=function(){return Vu(t,tj()).exponent(t.exponent())},yc.apply(t,arguments)}function Yye(){return tj.apply(null,arguments).exponent(.5)}const BB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dg,scaleDiverging:mK,scaleDivergingLog:gK,scaleDivergingPow:tj,scaleDivergingSqrt:Yye,scaleDivergingSymlog:yK,scaleIdentity:QW,scaleImplicit:uA,scaleLinear:db,scaleLog:YW,scaleOrdinal:PE,scalePoint:_m,scalePow:HE,scaleQuantile:eK,scaleQuantize:tK,scaleRadial:JW,scaleSequential:dK,scaleSequentialLog:hK,scaleSequentialPow:ej,scaleSequentialQuantile:pK,scaleSequentialSqrt:Xye,scaleSequentialSymlog:fK,scaleSqrt:O1e,scaleSymlog:ZW,scaleThreshold:rK,scaleTime:Kye,scaleUtc:Qye,tickFormat:KW},Symbol.toStringTag,{value:"Module"}));var $_,$B;function sw(){if($B)return $_;$B=1;var t=Pf();function e(r,n,a){for(var i=-1,o=r.length;++i<o;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return $_=e,$_}var U_,UB;function vK(){if(UB)return U_;UB=1;function t(e,r){return e>r}return U_=t,U_}var z_,zB;function Zye(){if(zB)return z_;zB=1;var t=sw(),e=vK(),r=Lf();function n(a){return a&&a.length?t(a,r,e):void 0}return z_=n,z_}var Jye=Zye();const ow=Xr(Jye);var V_,VB;function xK(){if(VB)return V_;VB=1;function t(e,r){return e<r}return V_=t,V_}var F_,FB;function eve(){if(FB)return F_;FB=1;var t=sw(),e=xK(),r=Lf();function n(a){return a&&a.length?t(a,r,e):void 0}return F_=n,F_}var tve=eve();const lw=Xr(tve);var q_,qB;function rve(){if(qB)return q_;qB=1;var t=yE(),e=cl(),r=EW(),n=os();function a(i,o){var c=n(i)?t:r;return c(i,e(o,3))}return q_=a,q_}var H_,HB;function nve(){if(HB)return H_;HB=1;var t=NW(),e=rve();function r(n,a){return t(e(n,a),1)}return H_=r,H_}var ave=nve();const ive=Xr(ave);var G_,GB;function sve(){if(GB)return G_;GB=1;var t=kE();function e(r,n){return t(r,n)}return G_=e,G_}var ove=sve();const S1=Xr(ove);var $f=1e9,lve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},nj,Hn=!0,io="[DecimalError] ",Fd=io+"Invalid argument: ",rj=io+"Exponent out of range: ",Uf=Math.floor,_d=Math.pow,cve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ts,Xa=1e7,zn=7,bK=9007199254740991,mb=Uf(bK/zn),kt={};kt.absoluteValue=kt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kt.comparedTo=kt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*zn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(t){return Zl(this,new this.constructor(t))};kt.dividedToIntegerBy=kt.idiv=function(t){var e=this,r=e.constructor;return On(Zl(e,new r(t),0,1),r.precision)};kt.equals=kt.eq=function(t){return!this.cmp(t)};kt.exponent=function(){return Ea(this)};kt.greaterThan=kt.gt=function(t){return this.cmp(t)>0};kt.greaterThanOrEqualTo=kt.gte=function(t){return this.cmp(t)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(t){return this.cmp(t)<0};kt.lessThanOrEqualTo=kt.lte=function(t){return this.cmp(t)<1};kt.logarithm=kt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ts))throw Error(io+"NaN");if(r.s<1)throw Error(io+(r.s?"NaN":"-Infinity"));return r.eq(Ts)?new n(0):(Hn=!1,e=Zl(gg(r,i),gg(t,i),i),Hn=!0,On(e,a))};kt.minus=kt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_K(e,t):wK(e,(t.s=-t.s,t))};kt.modulo=kt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(io+"NaN");return r.s?(Hn=!1,e=Zl(r,t,0,1).times(t),Hn=!0,r.minus(e)):On(new n(r),a)};kt.naturalExponential=kt.exp=function(){return SK(this)};kt.naturalLogarithm=kt.ln=function(){return gg(this)};kt.negated=kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kt.plus=kt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wK(e,t):_K(e,(t.s=-t.s,t))};kt.precision=kt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Fd+t);if(e=Ea(a)+1,n=a.d.length-1,r=n*zn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kt.squareRoot=kt.sqrt=function(){var t,e,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(io+"NaN")}for(t=Ea(c),Hn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Ho(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Uf((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(Zl(c,i,o+2)).times(.5),Ho(i.d).slice(0,o)===(e=Ho(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(On(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;o+=4}return Hn=!0,On(n,r)};kt.times=kt.mul=function(t){var e,r,n,a,i,o,c,d,h,p=this,m=p.constructor,y=p.d,v=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=v.length,d<h&&(i=y,y=v,v=i,o=d,d=h,h=o),i=[],o=d+h,n=o;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+v[n]*y[a-n-1]+e,i[a--]=c%Xa|0,e=c/Xa|0;i[a]=(i[a]+e)%Xa|0}for(;!i[--o];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Hn?On(t,m.precision):t};kt.toDecimalPlaces=kt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(tl(t,0,$f),e===void 0?e=n.rounding:tl(e,0,8),On(r,t+Ea(r)+1,e))};kt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=i0(n,!0):(tl(t,0,$f),e===void 0?e=a.rounding:tl(e,0,8),n=On(new a(n),t+1,e),r=i0(n,!0,t+1)),r};kt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?i0(a):(tl(t,0,$f),e===void 0?e=i.rounding:tl(e,0,8),n=On(new i(a),t+Ea(a)+1,e),r=i0(n.abs(),!1,t+Ea(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var t=this,e=t.constructor;return On(new e(t),Ea(t)+1,e.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(t){var e,r,n,a,i,o,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(Ts);if(c=new d(c),!c.s){if(t.s<1)throw Error(io+"Infinity");return c}if(c.eq(Ts))return c;if(n=d.precision,t.eq(Ts))return On(c,n);if(e=t.e,r=t.d.length-1,o=e>=r,i=c.s,o){if((r=p<0?-p:p)<=bK){for(a=new d(Ts),e=Math.ceil(n/zn+4),Hn=!1;r%2&&(a=a.times(c),KB(a.d,e)),r=Uf(r/2),r!==0;)c=c.times(c),KB(c.d,e);return Hn=!0,t.s<0?new d(Ts).div(a):On(a,n)}}else if(i<0)throw Error(io+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Hn=!1,a=t.times(gg(c,n+h)),Hn=!0,a=SK(a),a.s=i,a};kt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Ea(a),n=i0(a,r<=i.toExpNeg||r>=i.toExpPos)):(tl(t,1,$f),e===void 0?e=i.rounding:tl(e,0,8),a=On(new i(a),t,e),r=Ea(a),n=i0(a,t<=r||r<=i.toExpNeg,t)),n};kt.toSignificantDigits=kt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(tl(t,1,$f),e===void 0?e=n.rounding:tl(e,0,8)),On(new n(r),t,e)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ea(t),r=t.constructor;return i0(t,e<=r.toExpNeg||e>=r.toExpPos)};function wK(t,e){var r,n,a,i,o,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Hn?On(e,m):e;if(d=t.d,h=e.d,o=t.e,a=e.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=o,c=d.length),o=Math.ceil(m/zn),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/Xa|0,d[i]%=Xa;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Hn?On(e,m):e}function tl(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Fd+t)}function Ho(t){var e,r,n,a=t.length-1,i="",o=t[0];if(a>0){for(i+=o,e=1;e<a;e++)n=t[e]+"",r=zn-n.length,r&&(i+=eu(r)),i+=n;o=t[e],n=o+"",r=zn-n.length,r&&(i+=eu(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Zl=(function(){function t(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%Xa|0,o=i/Xa|0;return o&&n.unshift(o),n}function e(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Xa+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,h,p,m,y,v,_,S,w,j,O,R,L,C,P,E,N,k=n.constructor,z=n.s==a.s?1:-1,D=n.d,B=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(io+"Division by zero");for(d=n.e-a.e,E=B.length,C=D.length,v=new k(z),_=v.d=[],h=0;B[h]==(D[h]||0);)++h;if(B[h]>(D[h]||0)&&--d,i==null?O=i=k.precision:o?O=i+(Ea(n)-Ea(a))+1:O=i,O<0)return new k(0);if(O=O/zn+2|0,h=0,E==1)for(p=0,B=B[0],O++;(h<C||p)&&O--;h++)R=p*Xa+(D[h]||0),_[h]=R/B|0,p=R%B|0;else{for(p=Xa/(B[0]+1)|0,p>1&&(B=t(B,p),D=t(D,p),E=B.length,C=D.length),L=E,S=D.slice(0,E),w=S.length;w<E;)S[w++]=0;N=B.slice(),N.unshift(0),P=B[0],B[1]>=Xa/2&&++P;do p=0,c=e(B,S,E,w),c<0?(j=S[0],E!=w&&(j=j*Xa+(S[1]||0)),p=j/P|0,p>1?(p>=Xa&&(p=Xa-1),m=t(B,p),y=m.length,w=S.length,c=e(m,S,y,w),c==1&&(p--,r(m,E<y?N:B,y))):(p==0&&(c=p=1),m=B.slice()),y=m.length,y<w&&m.unshift(0),r(S,m,w),c==-1&&(w=S.length,c=e(B,S,E,w),c<1&&(p++,r(S,E<w?N:B,w))),w=S.length):c===0&&(p++,S=[0]),_[h++]=p,c&&S[0]?S[w++]=D[L]||0:(S=[D[L]],w=1);while((L++<C||S[0]!==void 0)&&O--)}return _[0]||_.shift(),v.e=d,On(v,o?i+Ea(v)+1:i)}})();function SK(t,e){var r,n,a,i,o,c,d=0,h=0,p=t.constructor,m=p.precision;if(Ea(t)>16)throw Error(rj+Ea(t));if(!t.s)return new p(Ts);for(Hn=!1,c=m,o=new p(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(n=Math.log(_d(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(Ts),p.precision=c;;){if(a=On(a.times(t),c),r=r.times(++d),o=i.plus(Zl(a,r,c)),Ho(o.d).slice(0,c)===Ho(i.d).slice(0,c)){for(;h--;)i=On(i.times(i),c);return p.precision=m,e==null?(Hn=!0,On(i,m)):i}i=o}}function Ea(t){for(var e=t.e*zn,r=t.d[0];r>=10;r/=10)e++;return e}function W_(t,e,r){if(e>t.LN10.sd())throw Hn=!0,r&&(t.precision=r),Error(io+"LN10 precision limit exceeded");return On(new t(t.LN10),e)}function eu(t){for(var e="";t--;)e+="0";return e}function gg(t,e){var r,n,a,i,o,c,d,h,p,m=1,y=10,v=t,_=v.d,S=v.constructor,w=S.precision;if(v.s<1)throw Error(io+(v.s?"NaN":"-Infinity"));if(v.eq(Ts))return new S(0);if(e==null?(Hn=!1,h=w):h=e,v.eq(10))return e==null&&(Hn=!0),W_(S,h);if(h+=y,S.precision=h,r=Ho(_),n=r.charAt(0),i=Ea(v),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Ho(v.d),n=r.charAt(0),m++;i=Ea(v),n>1?(v=new S("0."+r),i++):v=new S(n+"."+r.slice(1))}else return d=W_(S,h+2,w).times(i+""),v=gg(new S(n+"."+r.slice(1)),h-y).plus(d),S.precision=w,e==null?(Hn=!0,On(v,w)):v;for(c=o=v=Zl(v.minus(Ts),v.plus(Ts),h),p=On(v.times(v),h),a=3;;){if(o=On(o.times(p),h),d=c.plus(Zl(o,new S(a),h)),Ho(d.d).slice(0,h)===Ho(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(W_(S,h+2,w).times(i+""))),c=Zl(c,new S(m),h),S.precision=w,e==null?(Hn=!0,On(c,w)):c;c=d,a+=2}}function WB(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Uf(r/zn),t.d=[],n=(r+1)%zn,r<0&&(n+=zn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=zn;n<a;)t.d.push(+e.slice(n,n+=zn));e=e.slice(n),n=zn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Hn&&(t.e>mb||t.e<-mb))throw Error(rj+r)}else t.s=0,t.e=0,t.d=[0];return t}function On(t,e,r){var n,a,i,o,c,d,h,p,m=t.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=e-o,n<0)n+=zn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/zn),i=m.length,p>=i)return t;for(h=i=m[p],o=1;i>=10;i/=10)o++;n%=zn,a=n-zn+o}if(r!==void 0&&(i=_d(10,o-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/_d(10,o-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Ea(t),m.length=1,e=e-i-1,m[0]=_d(10,(zn-e%zn)%zn),t.e=Uf(-e/zn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=_d(10,zn-n),m[p]=a>0?(h/_d(10,o-a)%_d(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==Xa&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=Xa)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Hn&&(t.e>mb||t.e<-mb))throw Error(rj+Ea(t));return t}function _K(t,e){var r,n,a,i,o,c,d,h,p,m,y=t.constructor,v=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Hn?On(e,v):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),o=h-n,o){for(p=o<0,p?(r=d,o=-o,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(v/zn),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}o=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>o;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=Xa-1;--d[i],d[a]+=Xa}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Hn?On(e,v):e):new y(0)}function i0(t,e,r){var n,a=Ea(t),i=Ho(t.d),o=i.length;return e?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+eu(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+eu(-a-1)+i,r&&(n=r-o)>0&&(i+=eu(n))):a>=o?(i+=eu(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+eu(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=eu(n))),t.s<0?"-"+i:i}function KB(t,e){if(t.length>e)return t.length=e,!0}function TK(t){var e,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Fd+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return WB(o,i.toString())}else if(typeof i!="string")throw Error(Fd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,cve.test(i))WB(o,i);else throw Error(Fd+i)}if(a.prototype=kt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=TK,a.config=a.set=uve,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function uve(t){if(!t||typeof t!="object")throw Error(io+"Object expected");var e,r,n,a=["precision",1,$f,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Uf(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Fd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Fd+r+": "+n);return this}var nj=TK(lve);Ts=new nj(1);const Sn=nj;function dve(t){return mve(t)||pve(t)||fve(t)||hve()}function hve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fve(t,e){if(t){if(typeof t=="string")return pA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pA(t,e)}}function pve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function mve(t){if(Array.isArray(t))return pA(t)}function pA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gve=function(e){return e},NK={},AK=function(e){return e===NK},QB=function(e){return function r(){return arguments.length===0||arguments.length===1&&AK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},yve=function t(e,r){return e===1?r:QB(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(c){return c!==NK}).length;return o>=e?r.apply(void 0,a):t(e-o,QB(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return AK(m)?d.shift():m});return r.apply(void 0,dve(p).concat(d))}))})},cw=function(e){return yve(e.length,e)},mA=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},vve=cw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),xve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return gve;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},gA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},EK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function bve(t){var e;return t===0?e=1:e=Math.floor(new Sn(t).abs().log(10).toNumber())+1,e}function wve(t,e,r){for(var n=new Sn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Sve=cw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),_ve=cw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Tve=cw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const uw={rangeStep:wve,getDigitCount:bve,interpolateNumber:Sve,uninterpolateNumber:_ve,uninterpolateTruncation:Tve};function yA(t){return Eve(t)||Ave(t)||jK(t)||Nve()}function Nve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Eve(t){if(Array.isArray(t))return vA(t)}function yg(t,e){return Cve(t)||kve(t,e)||jK(t,e)||jve()}function jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jK(t,e){if(t){if(typeof t=="string")return vA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vA(t,e)}}function vA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=t[Symbol.iterator](),c;!(n=(c=o.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Cve(t){if(Array.isArray(t))return t}function kK(t){var e=yg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function CK(t,e,r){if(t.lte(0))return new Sn(0);var n=uw.getDigitCount(t.toNumber()),a=new Sn(10).pow(n),i=t.div(a),o=n!==1?.05:.1,c=new Sn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return e?d:new Sn(Math.ceil(d))}function Ove(t,e,r){var n=1,a=new Sn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new Sn(10).pow(uw.getDigitCount(t)-1),a=new Sn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Sn(Math.floor(t)))}else t===0?a=new Sn(Math.floor((e-1)/2)):r||(a=new Sn(Math.floor(t)));var o=Math.floor((e-1)/2),c=xve(vve(function(d){return a.add(new Sn(d-o).mul(n)).toNumber()}),mA);return c(0,e)}function OK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Sn(0),tickMin:new Sn(0),tickMax:new Sn(0)};var i=CK(new Sn(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new Sn(0):(o=new Sn(t).add(e).div(2),o=o.sub(new Sn(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),d=Math.ceil(new Sn(e).sub(o).div(i).toNumber()),h=c+d+1;return h>r?OK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:o.sub(new Sn(c).mul(i)),tickMax:o.add(new Sn(d).mul(i))})}function Ive(t){var e=yg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),c=kK([r,n]),d=yg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(yA(mA(0,a-1).map(function(){return 1/0}))):[].concat(yA(mA(0,a-1).map(function(){return-1/0})),[p]);return r>n?gA(m):m}if(h===p)return Ove(h,a,i);var y=OK(h,p,o,i),v=y.step,_=y.tickMin,S=y.tickMax,w=uw.rangeStep(_,S.add(new Sn(.1).mul(v)),v);return r>n?gA(w):w}function Rve(t,e){var r=yg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=kK([n,a]),c=yg(o,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=CK(new Sn(h).sub(d).div(p-1),i,0),y=[].concat(yA(uw.rangeStep(new Sn(d),new Sn(h).sub(new Sn(.99).mul(m)),m)),[h]);return n>a?gA(y):y}var Mve=EK(Ive),Pve=EK(Rve),Dve="Invariant failed";function s0(t,e){throw new Error(Dve)}var Lve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function gb(){return gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gb.apply(this,arguments)}function Bve(t,e){return Vve(t)||zve(t,e)||Uve(t,e)||$ve()}function $ve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uve(t,e){if(t){if(typeof t=="string")return XB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XB(t,e)}}function XB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Vve(t){if(Array.isArray(t))return t}function Fve(t,e){if(t==null)return{};var r=qve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Hve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MK(n.key),n)}}function Wve(t,e,r){return e&&Gve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kve(t,e,r){return e=yb(e),Qve(t,IK()?Reflect.construct(e,r||[],yb(t).constructor):e.apply(t,r))}function Qve(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xve(t)}function Xve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IK=function(){return!!t})()}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yb(t)}function Yve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}function xA(t,e){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xA(t,e)}function RK(t,e,r){return e=MK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MK(t){var e=Zve(t,"string");return of(e)=="symbol"?e:e+""}function Zve(t,e){if(of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _1=(function(t){function e(){return Hve(this,e),Kve(this,e,arguments)}return Yve(e,t),Wve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=Fve(n,Lve),v=Vt(y,!1);this.props.direction==="x"&&p.type!=="number"&&s0();var _=d.map(function(S){var w=h(S,c),j=w.x,O=w.y,R=w.value,L=w.errorVal;if(!L)return null;var C=[],P,E;if(Array.isArray(L)){var N=Bve(L,2);P=N[0],E=N[1]}else P=E=L;if(i==="vertical"){var k=p.scale,z=O+a,D=z+o,B=z-o,$=k(R-P),K=k(R+E);C.push({x1:K,y1:D,x2:K,y2:B}),C.push({x1:$,y1:z,x2:K,y2:z}),C.push({x1:$,y1:D,x2:$,y2:B})}else if(i==="horizontal"){var W=m.scale,H=j+a,J=H-o,ie=H+o,he=W(R-P),pe=W(R+E);C.push({x1:J,y1:pe,x2:ie,y2:pe}),C.push({x1:H,y1:he,x2:H,y2:pe}),C.push({x1:J,y1:he,x2:ie,y2:he})}return se.createElement(qr,gb({className:"recharts-errorBar",key:"bar-".concat(C.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},v),C.map(function(Z){return se.createElement("line",gb({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return se.createElement(qr,{className:"recharts-errorBars"},_)}}])})(se.Component);RK(_1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});RK(_1,"displayName","ErrorBar");function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function YB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(r),!0).forEach(function(n){Jve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jve(t,e,r){return e=exe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function exe(t){var e=txe(t,"string");return vg(e)=="symbol"?e:e+""}function txe(t,e){if(vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PK=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,o=Ss(r,jh);if(!o)return null;var c=jh.defaultProps,d=c!==void 0?yd(yd({},c),o.props):{},h;return o.props&&o.props.payload?h=o.props&&o.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,v=m.props,_=v.sectors||v.data||[];return p.concat(_.map(function(S){return{type:o.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,v=y!==void 0?yd(yd({},y),m.props):{},_=v.dataKey,S=v.name,w=v.legendType,j=v.hide;return{inactive:j,dataKey:_,type:d.iconType||w||"square",color:aj(m),value:S||_,payload:v}}),yd(yd(yd({},d),jh.getWithHeight(o,a)),{},{payload:h,item:o})};function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function ZB(t){return ixe(t)||axe(t)||nxe(t)||rxe()}function rxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nxe(t,e){if(t){if(typeof t=="string")return bA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bA(t,e)}}function axe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ixe(t){if(Array.isArray(t))return bA(t)}function bA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function JB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function na(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(r),!0).forEach(function(n){Ch(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ch(t,e,r){return e=sxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sxe(t){var e=oxe(t,"string");return xg(e)=="symbol"?e:e+""}function oxe(t,e){if(xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pi(t,e,r){return ur(t)||ur(e)?r:$a(e)?Js(t,e,r):nr(e)?e(t):r}function Tm(t,e,r,n){var a=ive(t,function(c){return pi(c,e)});if(r==="number"){var i=a.filter(function(c){return vt(c)||parseFloat(c)});return i.length?[lw(i),ow(i)]:[1/0,-1/0]}var o=n?a.filter(function(c){return!ur(c)}):a;return o.map(function(c){return $a(c)||c instanceof Date?c:""})}var lxe=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,v=void 0;if(bo(m-p)!==bo(y-m)){var _=[];if(bo(y-m)===bo(d[1]-d[0])){v=y;var S=m+d[1]-d[0];_[0]=Math.min(S,(S+p)/2),_[1]=Math.max(S,(S+p)/2)}else{v=p;var w=y+d[1]-d[0];_[0]=Math.min(m,(w+m)/2),_[1]=Math.max(m,(w+m)/2)}var j=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>j[0]&&e<=j[1]||e>=_[0]&&e<=_[1]){o=a[h].index;break}}else{var O=Math.min(p,y),R=Math.max(p,y);if(e>(O+m)/2&&e<=(R+m)/2){o=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){o=n[L].index;break}return o},aj=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,o=i.stroke,c=i.fill,d;switch(a){case"Line":d=o;break;case"Area":case"Radar":d=o&&o!=="none"?o:c;break;default:d=c;break}return d},cxe=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),y=0,v=m.length;y<v;y++){var _=p[m[y]],S=_.items,w=_.cateAxisId,j=S.filter(function(E){return Xl(E.type).indexOf("Bar")>=0});if(j&&j.length){var O=j[0].type.defaultProps,R=O!==void 0?na(na({},O),j[0].props):j[0].props,L=R.barSize,C=R[w];o[C]||(o[C]=[]);var P=ur(L)?r:L;o[C].push({item:j[0],stackList:j.slice(1),barSize:ur(P)?void 0:wo(P,n,0)})}}return o},uxe=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,c=e.maxBarSize,d=o.length;if(d<1)return null;var h=wo(r,a,0,!0),p,m=[];if(o[0].barSize===+o[0].barSize){var y=!1,v=a/d,_=o.reduce(function(L,C){return L+C.barSize||0},0);_+=(d-1)*h,_>=a&&(_-=(d-1)*h,h=0),_>=a&&v>0&&(y=!0,v*=.9,_=d*v);var S=(a-_)/2>>0,w={offset:S-h,size:0};p=o.reduce(function(L,C){var P={item:C.item,position:{offset:w.offset+w.size+h,size:y?v:C.barSize}},E=[].concat(ZB(L),[P]);return w=E[E.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(N){E.push({item:N,position:w})}),E},m)}else{var j=wo(n,a,0,!0);a-2*j-(d-1)*h<=0&&(h=0);var O=(a-2*j-(d-1)*h)/d;O>1&&(O>>=0);var R=c===+c?Math.min(O,c):O;p=o.reduce(function(L,C,P){var E=[].concat(ZB(L),[{item:C.item,position:{offset:j+(O+h)*P+(O-R)/2,size:R}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(N){E.push({item:N,position:E[E.length-1].position})}),E},m)}return p},dxe=function(e,r,n,a){var i=n.children,o=n.width,c=n.margin,d=o-(c.left||0)-(c.right||0),h=PK({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,y=p.height,v=h.align,_=h.verticalAlign,S=h.layout;if((S==="vertical"||S==="horizontal"&&_==="middle")&&v!=="center"&&vt(e[v]))return na(na({},e),{},Ch({},v,e[v]+(m||0)));if((S==="horizontal"||S==="vertical"&&v==="center")&&_!=="middle"&&vt(e[_]))return na(na({},e),{},Ch({},_,e[_]+(y||0)))}return e},hxe=function(e,r,n){return ur(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},DK=function(e,r,n,a,i){var o=r.props.children,c=ks(o,_1).filter(function(h){return hxe(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=pi(p,n);if(ur(m))return h;var y=Array.isArray(m)?[lw(m),ow(m)]:[m,m],v=d.reduce(function(_,S){var w=pi(p,S,0),j=y[0]-Math.abs(Array.isArray(w)?w[0]:w),O=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(j,_[0]),Math.max(O,_[1])]},[1/0,-1/0]);return[Math.min(v[0],h[0]),Math.max(v[1],h[1])]},[1/0,-1/0])}return null},fxe=function(e,r,n,a,i){var o=r.map(function(c){return DK(e,c,n,i,a)}).filter(function(c){return!ur(c)});return o&&o.length?o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},LK=function(e,r,n,a,i){var o=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&DK(e,d,h,a)||Tm(e,h,n,i)});if(n==="number")return o.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return o.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},BK=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},$K=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,o,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(o=!0),d.coordinate});return i||c.push(r),o||c.push(n),c},Gl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,o=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?bo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=i?i.indexOf(m):m;return{coordinate:a(y)+h,value:m,offset:h}});return p.filter(function(m){return!m1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:a(m)+h,value:m,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,y){return{coordinate:a(m)+h,value:i?i[m]:m,index:y,offset:h}})},K_=new WeakMap,Ev=function(e,r){if(typeof r!="function")return e;K_.has(e)||K_.set(e,new WeakMap);var n=K_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},UK=function(e,r,n){var a=e.scale,i=e.type,o=e.layout,c=e.axisType;if(a==="auto")return o==="radial"&&c==="radiusAxis"?{scale:dg(),realScaleType:"band"}:o==="radial"&&c==="angleAxis"?{scale:db(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:_m(),realScaleType:"point"}:i==="category"?{scale:dg(),realScaleType:"band"}:{scale:db(),realScaleType:"linear"};if(n0(a)){var d="scale".concat(G2(a));return{scale:(BB[d]||_m)(),realScaleType:BB[d]?d:"point"}}return nr(a)?{scale:a}:{scale:_m(),realScaleType:"point"}},e$=1e-4,zK=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-e$,o=Math.max(a[0],a[1])+e$,c=e(r[0]),d=e(r[n-1]);(c<i||c>o||d<i||d>o)&&e.domain([r[0],r[n-1]])}},pxe=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},mxe=function(e,r){if(!r||r.length!==2||!vt(r[0])||!vt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!vt(e[0])||e[0]<n)&&(i[0]=n),(!vt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},gxe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0,c=0;c<r;++c){var d=m1(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=o,e[c][n][1]=o+d,o=e[c][n][1])}},yxe=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var c=m1(e[o][n][1])?e[o][n][0]:e[o][n][1];c>=0?(e[o][n][0]=i,e[o][n][1]=i+c,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},vxe={sign:gxe,expand:ife,none:Yh,silhouette:sfe,wiggle:ofe,positive:yxe},xxe=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=vxe[n],o=afe().keys(a).value(function(c,d){return+pi(c,d,0)}).order(XN).offset(i);return o(e)},bxe=function(e,r,n,a,i,o){if(!e)return null;var c=o?r.reverse():r,d={},h=c.reduce(function(m,y){var v,_=(v=y.type)!==null&&v!==void 0&&v.defaultProps?na(na({},y.type.defaultProps),y.props):y.props,S=_.stackId,w=_.hide;if(w)return m;var j=_[n],O=m[j]||{hasStack:!1,stackGroups:{}};if($a(S)){var R=O.stackGroups[S]||{numericAxisId:n,cateAxisId:a,items:[]};R.items.push(y),O.hasStack=!0,O.stackGroups[S]=R}else O.stackGroups[g1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return na(na({},m),{},Ch({},j,O))},d),p={};return Object.keys(h).reduce(function(m,y){var v=h[y];if(v.hasStack){var _={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(S,w){var j=v.stackGroups[w];return na(na({},S),{},Ch({},w,{numericAxisId:n,cateAxisId:a,items:j.items,stackedData:xxe(e,j.items,i)}))},_)}return na(na({},m),{},Ch({},y,v))},p)},VK=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=Mve(h,i,c);return e.domain([lw(p),ow(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),y=Pve(m,i,c);return{niceTicks:y}}return null};function t$(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ur(a[e.dataKey])){var c=Gx(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=pi(a,ur(o)?e.dataKey:o);return ur(d)?null:e.scale(d)}var r$=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,o=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=pi(o,r.dataKey,r.domain[c]);return ur(d)?null:r.scale(d)-i/2+a},wxe=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Sxe=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,i=a.stackId;if($a(i)){var o=r[i];if(o){var c=o.items.indexOf(e);return c>=0?o.stackedData[c]:null}}return null},_xe=function(e){return e.reduce(function(r,n){return[lw(n.concat([r[0]]).filter(vt)),ow(n.concat([r[1]]).filter(vt))]},[1/0,-1/0])},FK=function(e,r,n){return Object.keys(e).reduce(function(a,i){var o=e[i],c=o.stackedData,d=c.reduce(function(h,p){var m=_xe(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},n$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wA=function(e,r,n){if(nr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(vt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(n$.test(e[0])){var i=+n$.exec(e[0])[1];a[0]=r[0]-i}else nr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(vt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(a$.test(e[1])){var o=+a$.exec(e[1])[1];a[1]=r[1]+o}else nr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},vb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=OE(r,function(m){return m.coordinate}),o=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];o=Math.min((h.coordinate||0)-(p.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},i$=function(e,r,n){return!e||!e.length||S1(e,Js(n,"type.defaultProps.domain"))?r:e},qK=function(e,r){var n=e.type.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,o=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return na(na({},Vt(e,!1)),{},{dataKey:a,unit:o,formatter:c,name:i||a,color:aj(e),value:pi(r,a),type:d,payload:r,chartType:h,hide:p})};function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function s$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(r),!0).forEach(function(n){HK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HK(t,e,r){return e=Txe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Txe(t){var e=Nxe(t,"string");return bg(e)=="symbol"?e:e+""}function Nxe(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Axe(t,e){return Cxe(t)||kxe(t,e)||jxe(t,e)||Exe()}function Exe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jxe(t,e){if(t){if(typeof t=="string")return o$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o$(t,e)}}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function Cxe(t){if(Array.isArray(t))return t}var xb=Math.PI/180,Oxe=function(e){return e*180/Math.PI},_n=function(e,r,n,a){return{x:e+Math.cos(-xb*a)*n,y:r+Math.sin(-xb*a)*n}},Ixe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Rxe=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=wo(e.cx,o,o/2),m=wo(e.cy,c,c/2),y=Ixe(o,c,n),v=wo(e.innerRadius,y,0),_=wo(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,j){var O=r[j],R=O.domain,L=O.reversed,C;if(ur(O.range))a==="angleAxis"?C=[d,h]:a==="radiusAxis"&&(C=[v,_]),L&&(C=[C[1],C[0]]);else{C=O.range;var P=C,E=Axe(P,2);d=E[0],h=E[1]}var N=UK(O,i),k=N.realScaleType,z=N.scale;z.domain(R).range(C),zK(z);var D=VK(z,Pl(Pl({},O),{},{realScaleType:k})),B=Pl(Pl(Pl({},O),D),{},{range:C,radius:_,realScaleType:k,scale:z,cx:p,cy:m,innerRadius:v,outerRadius:_,startAngle:d,endAngle:h});return Pl(Pl({},w),{},HK({},j,B))},{})},Mxe=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Pxe=function(e,r){var n=e.x,a=e.y,i=r.cx,o=r.cy,c=Mxe({x:n,y:a},{x:i,y:o});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>o&&(h=2*Math.PI-h),{radius:c,angle:Oxe(h),angleInRadian:h}},Dxe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},Lxe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),c=Math.min(i,o);return e+c*360},l$=function(e,r){var n=e.x,a=e.y,i=Pxe({x:n,y:a},r),o=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(o<d||o>h)return!1;if(o===0)return!0;var p=Dxe(r),m=p.startAngle,y=p.endAngle,v=c,_;if(m<=y){for(;v>y;)v-=360;for(;v<m;)v+=360;_=v>=m&&v<=y}else{for(;v>m;)v-=360;for(;v<y;)v+=360;_=v>=y&&v<=m}return _?Pl(Pl({},r),{},{radius:o,angle:Lxe(v,r)}):null},GK=function(e){return!A.isValidElement(e)&&!nr(e)&&typeof e!="boolean"?e.className:""};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}var Bxe=["offset"];function $xe(t){return Fxe(t)||Vxe(t)||zxe(t)||Uxe()}function Uxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zxe(t,e){if(t){if(typeof t=="string")return SA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SA(t,e)}}function Vxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fxe(t){if(Array.isArray(t))return SA(t)}function SA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qxe(t,e){if(t==null)return{};var r=Hxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function c$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Da(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c$(Object(r),!0).forEach(function(n){Gxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gxe(t,e,r){return e=Wxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wxe(t){var e=Kxe(t,"string");return wg(e)=="symbol"?e:e+""}function Kxe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sg.apply(this,arguments)}var Qxe=function(e){var r=e.value,n=e.formatter,a=ur(e.children)?r:e.children;return nr(n)?n(a):a},Xxe=function(e,r){var n=bo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Yxe=function(e,r,n){var a=e.position,i=e.viewBox,o=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,v=d.startAngle,_=d.endAngle,S=d.clockWise,w=(m+y)/2,j=Xxe(v,_),O=j>=0?1:-1,R,L;a==="insideStart"?(R=v+O*o,L=S):a==="insideEnd"?(R=_-O*o,L=!S):a==="end"&&(R=_+O*o,L=S),L=j<=0?L:!L;var C=_n(h,p,w,R),P=_n(h,p,w,R+(L?1:-1)*359),E="M".concat(C.x,",").concat(C.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(P.x,",").concat(P.y),N=ur(e.id)?g1("recharts-radial-line-"):e.id;return se.createElement("text",Sg({},n,{dominantBaseline:"central",className:pr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:N,d:E})),se.createElement("textPath",{xlinkHref:"#".concat(N)},r))},Zxe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,o=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,y=(p+m)/2;if(a==="outside"){var v=_n(o,c,h+n,y),_=v.x,S=v.y;return{x:_,y:S,textAnchor:_>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,j=_n(o,c,w,y),O=j.x,R=j.y;return{x:O,y:R,textAnchor:"middle",verticalAnchor:"middle"}},Jxe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,o=r,c=o.x,d=o.y,h=o.width,p=o.height,m=p>=0?1:-1,y=m*a,v=m>0?"end":"start",_=m>0?"start":"end",S=h>=0?1:-1,w=S*a,j=S>0?"end":"start",O=S>0?"start":"end";if(i==="top"){var R={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:v};return Da(Da({},R),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:_};return Da(Da({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var C={x:c-w,y:d+p/2,textAnchor:j,verticalAnchor:"middle"};return Da(Da({},C),n?{width:Math.max(C.x-n.x,0),height:p}:{})}if(i==="right"){var P={x:c+h+w,y:d+p/2,textAnchor:O,verticalAnchor:"middle"};return Da(Da({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:p}:{})}var E=n?{width:h,height:p}:{};return i==="insideLeft"?Da({x:c+w,y:d+p/2,textAnchor:O,verticalAnchor:"middle"},E):i==="insideRight"?Da({x:c+h-w,y:d+p/2,textAnchor:j,verticalAnchor:"middle"},E):i==="insideTop"?Da({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:_},E):i==="insideBottom"?Da({x:c+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:v},E):i==="insideTopLeft"?Da({x:c+w,y:d+y,textAnchor:O,verticalAnchor:_},E):i==="insideTopRight"?Da({x:c+h-w,y:d+y,textAnchor:j,verticalAnchor:_},E):i==="insideBottomLeft"?Da({x:c+w,y:d+p-y,textAnchor:O,verticalAnchor:v},E):i==="insideBottomRight"?Da({x:c+h-w,y:d+p-y,textAnchor:j,verticalAnchor:v},E):Df(i)&&(vt(i.x)||Cd(i.x))&&(vt(i.y)||Cd(i.y))?Da({x:c+wo(i.x,h),y:d+wo(i.y,p),textAnchor:"end",verticalAnchor:"end"},E):Da({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},E)},ebe=function(e){return"cx"in e&&vt(e.cx)};function di(t){var e=t.offset,r=e===void 0?5:e,n=qxe(t,Bxe),a=Da({offset:r},n),i=a.viewBox,o=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,y=a.textBreakAll;if(!i||ur(c)&&ur(d)&&!A.isValidElement(h)&&!nr(h))return null;if(A.isValidElement(h))return A.cloneElement(h,a);var v;if(nr(h)){if(v=A.createElement(h,a),A.isValidElement(v))return v}else v=Qxe(a);var _=ebe(i),S=Vt(a,!0);if(_&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Yxe(a,v,S);var w=_?Zxe(a):Jxe(a);return se.createElement(rf,Sg({className:pr("recharts-label",m)},S,w,{breakAll:y}),v)}di.displayName="Label";var WK=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,o=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,v=e.top,_=e.left,S=e.width,w=e.height,j=e.clockWise,O=e.labelViewBox;if(O)return O;if(vt(S)&&vt(w)){if(vt(m)&&vt(y))return{x:m,y,width:S,height:w};if(vt(v)&&vt(_))return{x:v,y:_,width:S,height:w}}return vt(m)&&vt(y)?{x:m,y,width:0,height:0}:vt(r)&&vt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:j}:e.viewBox?e.viewBox:{}},tbe=function(e,r){return e?e===!0?se.createElement(di,{key:"label-implicit",viewBox:r}):$a(e)?se.createElement(di,{key:"label-implicit",viewBox:r,value:e}):A.isValidElement(e)?e.type===di?A.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(di,{key:"label-implicit",content:e,viewBox:r}):nr(e)?se.createElement(di,{key:"label-implicit",content:e,viewBox:r}):Df(e)?se.createElement(di,Sg({viewBox:r},e,{key:"label-implicit"})):null:null},rbe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=WK(e),o=ks(a,di).map(function(d,h){return A.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return o;var c=tbe(e.label,r||i);return[c].concat($xe(o))};di.parseViewBox=WK;di.renderCallByParent=rbe;var Q_,u$;function nbe(){if(u$)return Q_;u$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Q_=t,Q_}var abe=nbe();const KK=Xr(abe);function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}var ibe=["valueAccessor"],sbe=["data","dataKey","clockWise","id","textBreakAll"];function obe(t){return dbe(t)||ube(t)||cbe(t)||lbe()}function lbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cbe(t,e){if(t){if(typeof t=="string")return _A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _A(t,e)}}function ube(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dbe(t){if(Array.isArray(t))return _A(t)}function _A(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bb(){return bb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bb.apply(this,arguments)}function d$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function h$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d$(Object(r),!0).forEach(function(n){hbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hbe(t,e,r){return e=fbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fbe(t){var e=pbe(t,"string");return _g(e)=="symbol"?e:e+""}function pbe(t,e){if(_g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function f$(t,e){if(t==null)return{};var r=mbe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var gbe=function(e){return Array.isArray(e.value)?KK(e.value):e.value};function Jl(t){var e=t.valueAccessor,r=e===void 0?gbe:e,n=f$(t,ibe),a=n.data,i=n.dataKey,o=n.clockWise,c=n.id,d=n.textBreakAll,h=f$(n,sbe);return!a||!a.length?null:se.createElement(qr,{className:"recharts-label-list"},a.map(function(p,m){var y=ur(i)?r(p,m):pi(p&&p.payload,i),v=ur(c)?{}:{id:"".concat(c,"-").concat(m)};return se.createElement(di,bb({},Vt(p,!0),h,v,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:di.parseViewBox(ur(o)?p:h$(h$({},p),{},{clockWise:o})),key:"label-".concat(m),index:m}))}))}Jl.displayName="LabelList";function ybe(t,e){return t?t===!0?se.createElement(Jl,{key:"labelList-implicit",data:e}):se.isValidElement(t)||nr(t)?se.createElement(Jl,{key:"labelList-implicit",data:e,content:t}):Df(t)?se.createElement(Jl,bb({data:e},t,{key:"labelList-implicit"})):null:null}function vbe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=ks(n,Jl).map(function(o,c){return A.cloneElement(o,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=ybe(t.label,e);return[i].concat(obe(a))}Jl.renderCallByParent=vbe;function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function TA(){return TA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TA.apply(this,arguments)}function p$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function m$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(r),!0).forEach(function(n){xbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xbe(t,e,r){return e=bbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bbe(t){var e=wbe(t,"string");return Tg(e)=="symbol"?e:e+""}function wbe(t,e){if(Tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sbe=function(e,r){var n=bo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},jv=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,o=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/xb,y=h?i:i+o*m,v=_n(r,n,p,y),_=_n(r,n,a,y),S=h?i-o*m:i,w=_n(r,n,p*Math.cos(m*xb),S);return{center:v,circleTangency:_,lineTangency:w,theta:m}},QK=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.startAngle,c=e.endAngle,d=Sbe(o,c),h=o+d,p=_n(r,n,i,o),m=_n(r,n,i,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(o>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var v=_n(r,n,a,o),_=_n(r,n,a,h);y+="L ".concat(_.x,",").concat(_.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(o<=h),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},_be=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=bo(p-h),y=jv({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:o,cornerIsExternal:d}),v=y.circleTangency,_=y.lineTangency,S=y.theta,w=jv({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:o,cornerIsExternal:d}),j=w.circleTangency,O=w.lineTangency,R=w.theta,L=d?Math.abs(h-p):Math.abs(h-p)-S-R;if(L<0)return c?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):QK({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var C="M ".concat(_.x,",").concat(_.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,`
  `);if(a>0){var P=jv({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),E=P.circleTangency,N=P.lineTangency,k=P.theta,z=jv({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:o,cornerIsExternal:d}),D=z.circleTangency,B=z.lineTangency,$=z.theta,K=d?Math.abs(h-p):Math.abs(h-p)-k-$;if(K<0&&o===0)return"".concat(C,"L").concat(r,",").concat(n,"Z");C+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(K>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(m<0),",").concat(N.x,",").concat(N.y,"Z")}else C+="L".concat(r,",").concat(n,"Z");return C},Tbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XK=function(e){var r=m$(m$({},Tbe),e),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(o<i||p===m)return null;var v=pr("recharts-sector",y),_=o-i,S=wo(c,_,0,!0),w;return S>0&&Math.abs(p-m)<360?w=_be({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(S,_/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=QK({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:p,endAngle:m}),se.createElement("path",TA({},Vt(r,!0),{className:v,d:w,role:"img"}))};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NA.apply(this,arguments)}function g$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function y$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g$(Object(r),!0).forEach(function(n){Nbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nbe(t,e,r){return e=Abe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Abe(t){var e=Ebe(t,"string");return Ng(e)=="symbol"?e:e+""}function Ebe(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var v$={curveBasisClosed:Whe,curveBasisOpen:Khe,curveBasis:Ghe,curveBumpX:Ihe,curveBumpY:Rhe,curveLinearClosed:Qhe,curveLinear:K2,curveMonotoneX:Xhe,curveMonotoneY:Yhe,curveNatural:Zhe,curveStep:Jhe,curveStepAfter:tfe,curveStepBefore:efe},kv=function(e){return e.x===+e.x&&e.y===+e.y},Xp=function(e){return e.x},Yp=function(e){return e.y},jbe=function(e,r){if(nr(e))return e;var n="curve".concat(G2(e));return(n==="curveMonotone"||n==="curveBump")&&r?v$["".concat(n).concat(r==="vertical"?"Y":"X")]:v$[n]||K2},kbe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,o=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=jbe(n,c),m=h?i.filter(function(S){return kv(S)}):i,y;if(Array.isArray(o)){var v=h?o.filter(function(S){return kv(S)}):o,_=m.map(function(S,w){return y$(y$({},S),{},{base:v[w]})});return c==="vertical"?y=bv().y(Yp).x1(Xp).x0(function(S){return S.base.x}):y=bv().x(Xp).y1(Yp).y0(function(S){return S.base.y}),y.defined(kv).curve(p),y(_)}return c==="vertical"&&vt(o)?y=bv().y(Yp).x1(Xp).x0(o):vt(o)?y=bv().x(Xp).y1(Yp).y0(o):y=KG().x(Xp).y(Yp),y.defined(kv).curve(p),y(m)},AA=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?kbe(e):a;return A.createElement("path",NA({},Vt(e,!1),Wx(e),{className:pr("recharts-curve",r),d:o,ref:i}))},X_={exports:{}},Y_,x$;function Cbe(){if(x$)return Y_;x$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Y_=t,Y_}var Z_,b$;function Obe(){if(b$)return Z_;b$=1;var t=Cbe();function e(){}function r(){}return r.resetWarningCache=e,Z_=function(){function n(o,c,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},Z_}var w$;function Ibe(){return w$||(w$=1,X_.exports=Obe()()),X_.exports}var Rbe=Ibe();const nn=Xr(Rbe),{getOwnPropertyNames:Mbe,getOwnPropertySymbols:Pbe}=Object,{hasOwnProperty:Dbe}=Object.prototype;function J_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Cv(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,o=i.get(r),c=i.get(n);if(o&&c)return o===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function Lbe(t){return t!=null?t[Symbol.toStringTag]:void 0}function S$(t){return Mbe(t).concat(Pbe(t))}const Bbe=Object.hasOwn||((t,e)=>Dbe.call(t,e));function b0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const $be="__v",Ube="__o",zbe="_owner",{getOwnPropertyDescriptor:_$,keys:T$}=Object;function Vbe(t,e){return t.byteLength===e.byteLength&&wb(new Uint8Array(t),new Uint8Array(e))}function Fbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function qbe(t,e){return t.byteLength===e.byteLength&&wb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Hbe(t,e){return b0(t.getTime(),e.getTime())}function Gbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Wbe(t,e){return t===e}function N$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let o,c,d=0;for(;(o=i.next())&&!o.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const y=o.value,v=c.value;if(r.equals(y[0],v[0],d,m,t,e,r)&&r.equals(y[1],v[1],y[0],v[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const Kbe=b0;function Qbe(t,e,r){const n=T$(t);let a=n.length;if(T$(e).length!==a)return!1;for(;a-- >0;)if(!YK(t,e,r,n[a]))return!1;return!0}function Zp(t,e,r){const n=S$(t);let a=n.length;if(S$(e).length!==a)return!1;let i,o,c;for(;a-- >0;)if(i=n[a],!YK(t,e,r,i)||(o=_$(t,i),c=_$(e,i),(o||c)&&(!o||!c||o.configurable!==c.configurable||o.enumerable!==c.enumerable||o.writable!==c.writable)))return!1;return!0}function Xbe(t,e){return b0(t.valueOf(),e.valueOf())}function Ybe(t,e){return t.source===e.source&&t.flags===e.flags}function A$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let o,c;for(;(o=i.next())&&!o.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(o.value,c.value,o.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function wb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Zbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function YK(t,e,r,n){return(n===zbe||n===Ube||n===$be)&&(t.$$typeof||e.$$typeof)?!0:Bbe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Jbe="[object ArrayBuffer]",e2e="[object Arguments]",t2e="[object Boolean]",r2e="[object DataView]",n2e="[object Date]",a2e="[object Error]",i2e="[object Map]",s2e="[object Number]",o2e="[object Object]",l2e="[object RegExp]",c2e="[object Set]",u2e="[object String]",d2e={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},h2e="[object URL]",f2e=Object.prototype.toString;function p2e({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:v,unknownTagComparators:_}){return function(w,j,O){if(w===j)return!0;if(w==null||j==null)return!1;const R=typeof w;if(R!==typeof j)return!1;if(R!=="object")return R==="number"?c(w,j,O):R==="function"?i(w,j,O):!1;const L=w.constructor;if(L!==j.constructor)return!1;if(L===Object)return d(w,j,O);if(Array.isArray(w))return e(w,j,O);if(L===Date)return n(w,j,O);if(L===RegExp)return p(w,j,O);if(L===Map)return o(w,j,O);if(L===Set)return m(w,j,O);const C=f2e.call(w);if(C===n2e)return n(w,j,O);if(C===l2e)return p(w,j,O);if(C===i2e)return o(w,j,O);if(C===c2e)return m(w,j,O);if(C===o2e)return typeof w.then!="function"&&typeof j.then!="function"&&d(w,j,O);if(C===h2e)return v(w,j,O);if(C===a2e)return a(w,j,O);if(C===e2e)return d(w,j,O);if(d2e[C])return y(w,j,O);if(C===Jbe)return t(w,j,O);if(C===r2e)return r(w,j,O);if(C===t2e||C===s2e||C===u2e)return h(w,j,O);if(_){let P=_[C];if(!P){const E=Lbe(w);E&&(P=_[E])}if(P)return P(w,j,O)}return!1}}function m2e({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Vbe,areArraysEqual:r?Zp:Fbe,areDataViewsEqual:qbe,areDatesEqual:Hbe,areErrorsEqual:Gbe,areFunctionsEqual:Wbe,areMapsEqual:r?J_(N$,Zp):N$,areNumbersEqual:Kbe,areObjectsEqual:r?Zp:Qbe,arePrimitiveWrappersEqual:Xbe,areRegExpsEqual:Ybe,areSetsEqual:r?J_(A$,Zp):A$,areTypedArraysEqual:r?J_(wb,Zp):wb,areUrlsEqual:Zbe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Cv(n.areArraysEqual),i=Cv(n.areMapsEqual),o=Cv(n.areObjectsEqual),c=Cv(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:c})}return n}function g2e(t){return function(e,r,n,a,i,o,c){return t(e,r,c)}}function y2e({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const v2e=Fu();Fu({strict:!0});Fu({circular:!0});Fu({circular:!0,strict:!0});Fu({createInternalComparator:()=>b0});Fu({strict:!0,createInternalComparator:()=>b0});Fu({circular:!0,createInternalComparator:()=>b0});Fu({circular:!0,createInternalComparator:()=>b0,strict:!0});function Fu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=m2e(t),o=p2e(i),c=r?r(o):g2e(o);return y2e({circular:e,comparator:o,createState:n,equals:c,strict:a})}function x2e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function E$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):x2e(a)};requestAnimationFrame(n)}function EA(t){"@babel/helpers - typeof";return EA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EA(t)}function b2e(t){return T2e(t)||_2e(t)||S2e(t)||w2e()}function w2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S2e(t,e){if(t){if(typeof t=="string")return j$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j$(t,e)}}function j$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T2e(t){if(Array.isArray(t))return t}function N2e(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,c=b2e(o),d=c[0],h=c.slice(1);if(typeof d=="number"){E$(a.bind(null,h),d);return}a(d),E$(a.bind(null,h));return}EA(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function k$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function C$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(r),!0).forEach(function(n){ZK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZK(t,e,r){return e=A2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A2e(t){var e=E2e(t,"string");return Ag(e)==="symbol"?e:String(e)}function E2e(t,e){if(Ag(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j2e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},k2e=function(e){return e},C2e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Nm=function(e,r){return Object.keys(r).reduce(function(n,a){return C$(C$({},n),{},ZK({},a,e(a,r[a])))},{})},O$=function(e,r,n){return e.map(function(a){return"".concat(C2e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function O2e(t,e){return M2e(t)||R2e(t,e)||JK(t,e)||I2e()}function I2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function M2e(t){if(Array.isArray(t))return t}function P2e(t){return B2e(t)||L2e(t)||JK(t)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JK(t,e){if(t){if(typeof t=="string")return jA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jA(t,e)}}function L2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function B2e(t){if(Array.isArray(t))return jA(t)}function jA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Sb=1e-4,eQ=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},tQ=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},I$=function(e,r){return function(n){var a=eQ(e,r);return tQ(a,n)}},$2e=function(e,r){return function(n){var a=eQ(e,r),i=[].concat(P2e(a.map(function(o,c){return o*c}).slice(1)),[0]);return tQ(i,n)}},R$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,c=1;break;case"ease":a=.25,i=.1,o=.25,c=1;break;case"ease-in":a=.42,i=0,o=1,c=1;break;case"ease-out":a=.42,i=0,o=.58,c=1;break;case"ease-in-out":a=0,i=0,o=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=O2e(h,4);a=p[0],i=p[1],o=p[2],c=p[3]}}}var m=I$(a,o),y=I$(i,c),v=$2e(a,o),_=function(j){return j>1?1:j<0?0:j},S=function(j){for(var O=j>1?1:j,R=O,L=0;L<8;++L){var C=m(R)-O,P=v(R);if(Math.abs(C-O)<Sb||P<Sb)return y(R);R=_(R-C/P)}return y(R)};return S.isStepper=!1,S},U2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,o=e.dt,c=o===void 0?17:o,d=function(p,m,y){var v=-(p-m)*n,_=y*i,S=y+(v-_)*c/1e3,w=y*c/1e3+p;return Math.abs(w-m)<Sb&&Math.abs(S)<Sb?[m,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},z2e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return R$(a);case"spring":return U2e();default:if(a.split("(")[0]==="cubic-bezier")return R$(a)}return typeof a=="function"?a:null};function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function M$(t){return q2e(t)||F2e(t)||rQ(t)||V2e()}function V2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q2e(t){if(Array.isArray(t))return CA(t)}function P$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P$(Object(r),!0).forEach(function(n){kA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kA(t,e,r){return e=H2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H2e(t){var e=G2e(t,"string");return Eg(e)==="symbol"?e:String(e)}function G2e(t,e){if(Eg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W2e(t,e){return X2e(t)||Q2e(t,e)||rQ(t,e)||K2e()}function K2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(t,e){if(t){if(typeof t=="string")return CA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CA(t,e)}}function CA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Q2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function X2e(t){if(Array.isArray(t))return t}var _b=function(e,r,n){return e+(r-e)*n},OA=function(e){var r=e.from,n=e.to;return r!==n},Y2e=function t(e,r,n){var a=Nm(function(i,o){if(OA(o)){var c=e(o.from,o.to,o.velocity),d=W2e(c,2),h=d[0],p=d[1];return ci(ci({},o),{},{from:h,velocity:p})}return o},r);return n<1?Nm(function(i,o){return OA(o)?ci(ci({},o),{},{velocity:_b(o.velocity,a[i].velocity,n),from:_b(o.from,a[i].from,n)}):o},r):t(e,a,n-1)};const Z2e=(function(t,e,r,n,a){var i=j2e(t,e),o=i.reduce(function(w,j){return ci(ci({},w),{},kA({},j,[t[j],e[j]]))},{}),c=i.reduce(function(w,j){return ci(ci({},w),{},kA({},j,{from:t[j],velocity:0,to:e[j]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return Nm(function(j,O){return O.from},c)},v=function(){return!Object.values(c).filter(OA).length},_=function(j){h||(h=j);var O=j-h,R=O/r.dt;c=Y2e(r,c,R),a(ci(ci(ci({},t),e),y())),h=j,v()||(d=requestAnimationFrame(m))},S=function(j){p||(p=j);var O=(j-p)/n,R=Nm(function(C,P){return _b.apply(void 0,M$(P).concat([r(O)]))},o);if(a(ci(ci(ci({},t),e),R)),O<1)d=requestAnimationFrame(m);else{var L=Nm(function(C,P){return _b.apply(void 0,M$(P).concat([r(1)]))},o);a(ci(ci(ci({},t),e),L))}};return m=r.isStepper?_:S,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}var J2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ewe(t,e){if(t==null)return{};var r=twe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function twe(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function eT(t){return iwe(t)||awe(t)||nwe(t)||rwe()}function rwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nwe(t,e){if(t){if(typeof t=="string")return IA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IA(t,e)}}function awe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iwe(t){if(Array.isArray(t))return IA(t)}function IA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(r),!0).forEach(function(n){um(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function um(t,e,r){return e=nQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function swe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function owe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nQ(n.key),n)}}function lwe(t,e,r){return e&&owe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nQ(t){var e=cwe(t,"string");return lf(e)==="symbol"?e:String(e)}function cwe(t,e){if(lf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RA(t,e)}function RA(t,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},RA(t,e)}function dwe(t){var e=hwe();return function(){var n=Tb(t),a;if(e){var i=Tb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return MA(this,a)}}function MA(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PA(t)}function PA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tb(t)}var rl=(function(t){uwe(r,t);var e=dwe(r);function r(n,a){var i;swe(this,r),i=e.call(this,n,a);var o=i.props,c=o.isActive,d=o.attributeName,h=o.from,p=o.to,m=o.steps,y=o.children,v=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(PA(i)),i.changeStyle=i.changeStyle.bind(PA(i)),!c||v<=0)return i.state={style:{}},typeof y=="function"&&(i.state={style:p}),MA(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof y=="function")return i.state={style:h},MA(i);i.state={style:d?um({},d,h):h}}else i.state={style:{}};return i}return lwe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,y=this.state.style;if(c){if(!o){var v={style:d?um({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(v);return}if(!(v2e(a.to,p)&&a.canBegin&&a.isActive)){var _=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=_||h?m:a.to;if(this.state&&y){var w={style:d?um({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(mo(mo({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,y=a.onAnimationStart,v=Z2e(o,c,z2e(h),d,this.changeStyle),_=function(){i.stopJSAnimation=v()};this.manager.start([y,p,_,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,c=a.begin,d=a.onAnimationStart,h=o[0],p=h.style,m=h.duration,y=m===void 0?0:m,v=function(S,w,j){if(j===0)return S;var O=w.duration,R=w.easing,L=R===void 0?"ease":R,C=w.style,P=w.properties,E=w.onAnimationEnd,N=j>0?o[j-1]:w,k=P||Object.keys(C);if(typeof L=="function"||L==="spring")return[].concat(eT(S),[i.runJSAnimation.bind(i,{from:N.style,to:C,duration:O,easing:L}),O]);var z=O$(k,O,L),D=mo(mo(mo({},N.style),C),{},{transition:z});return[].concat(eT(S),[D,O,E]).filter(k2e)};return this.manager.start([d].concat(eT(o.reduce(v,[p,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=N2e());var i=a.begin,o=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,y=a.steps,v=a.children,_=this.manager;if(this.unSubscribe=_.subscribe(this.handleStyleChange),typeof h=="function"||typeof v=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var S=c?um({},c,d):d,w=O$(Object.keys(S),o,h);_.start([p,i,mo(mo({},S),{},{transition:w}),o,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=ewe(a,J2e),h=A.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||o<=0)return i;var m=function(v){var _=v.props,S=_.style,w=S===void 0?{}:S,j=_.className,O=A.cloneElement(v,mo(mo({},d),{},{style:mo(mo({},w),p),className:j}));return O};return h===1?m(A.Children.only(i)):se.createElement("div",null,A.Children.map(i,function(y){return m(y)}))}}]),r})(A.PureComponent);rl.displayName="Animate";rl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};rl.propTypes={from:nn.oneOfType([nn.object,nn.string]),to:nn.oneOfType([nn.object,nn.string]),attributeName:nn.string,duration:nn.number,begin:nn.number,easing:nn.oneOfType([nn.string,nn.func]),steps:nn.arrayOf(nn.shape({duration:nn.number.isRequired,style:nn.object.isRequired,easing:nn.oneOfType([nn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nn.func]),properties:nn.arrayOf("string"),onAnimationEnd:nn.func})),children:nn.oneOfType([nn.node,nn.func]),isActive:nn.bool,canBegin:nn.bool,onAnimationEnd:nn.func,shouldReAnimate:nn.bool,onAnimationStart:nn.func,onAnimationReStart:nn.func};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nb.apply(this,arguments)}function fwe(t,e){return ywe(t)||gwe(t,e)||mwe(t,e)||pwe()}function pwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mwe(t,e){if(t){if(typeof t=="string")return L$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L$(t,e)}}function L$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gwe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function ywe(t){if(Array.isArray(t))return t}function B$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B$(Object(r),!0).forEach(function(n){vwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vwe(t,e,r){return e=xwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xwe(t){var e=bwe(t,"string");return jg(e)=="symbol"?e:e+""}function bwe(t,e){if(jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U$=function(e,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(o>0&&i instanceof Array){for(var m=[0,0,0,0],y=0,v=4;y<v;y++)m[y]=i[y]>o?o:i[y];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(o>0&&i===+i&&i>0){var _=Math.min(o,i);p="M ".concat(e,",").concat(r+c*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+d*_,",").concat(r,`
            L `).concat(e+n-d*_,",").concat(r,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*_,`
            L `).concat(e+n,",").concat(r+a-c*_,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e+n-d*_,",").concat(r+a,`
            L `).concat(e+d*_,",").concat(r+a,`
            A `).concat(_,",").concat(_,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*_," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},wwe=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,o=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(o,o+d),y=Math.max(o,o+d);return n>=h&&n<=p&&a>=m&&a<=y}return!1},Swe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ij=function(e){var r=$$($$({},Swe),e),n=A.useRef(),a=A.useState(-1),i=fwe(a,2),o=i[0],c=i[1];A.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,v=r.className,_=r.animationEasing,S=r.animationDuration,w=r.animationBegin,j=r.isAnimationActive,O=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var R=pr("recharts-rectangle",v);return O?se.createElement(rl,{canBegin:o>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:S,animationEasing:_,isActive:O},function(L){var C=L.width,P=L.height,E=L.x,N=L.y;return se.createElement(rl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:j,easing:_},se.createElement("path",Nb({},Vt(r,!0),{className:R,d:U$(E,N,C,P,y),ref:n})))}):se.createElement("path",Nb({},Vt(r,!0),{className:R,d:U$(d,h,p,m,y)}))},_we=["points","className","baseLinePoints","connectNulls"];function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yh.apply(this,arguments)}function Twe(t,e){if(t==null)return{};var r=Nwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Nwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function z$(t){return kwe(t)||jwe(t)||Ewe(t)||Awe()}function Awe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ewe(t,e){if(t){if(typeof t=="string")return DA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DA(t,e)}}function jwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kwe(t){if(Array.isArray(t))return DA(t)}function DA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var V$=function(e){return e&&e.x===+e.x&&e.y===+e.y},Cwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){V$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),V$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Am=function(e,r){var n=Cwe(e);r&&(n=[n.reduce(function(i,o){return[].concat(z$(i),z$(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,c,d){return"".concat(o).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Owe=function(e,r,n){var a=Am(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Am(r.reverse(),n).slice(1))},aQ=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,o=Twe(e,_we);if(!r||!r.length)return null;var c=pr("recharts-polygon",n);if(a&&a.length){var d=o.stroke&&o.stroke!=="none",h=Owe(r,a,i);return se.createElement("g",{className:c},se.createElement("path",yh({},Vt(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:h})),d?se.createElement("path",yh({},Vt(o,!0),{fill:"none",d:Am(r,i)})):null,d?se.createElement("path",yh({},Vt(o,!0),{fill:"none",d:Am(a,i)})):null)}var p=Am(r,i);return se.createElement("path",yh({},Vt(o,!0),{fill:p.slice(-1)==="Z"?o.fill:"none",className:c,d:p}))};function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LA.apply(this,arguments)}var dw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,o=pr("recharts-dot",i);return r===+r&&n===+n&&a===+a?A.createElement("circle",LA({},Vt(e,!1),Wx(e),{className:o,cx:r,cy:n,r:a})):null};function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}var Iwe=["x","y","top","left","width","height","className"];function BA(){return BA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BA.apply(this,arguments)}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rwe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){Mwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mwe(t,e,r){return e=Pwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pwe(t){var e=Dwe(t,"string");return kg(e)=="symbol"?e:e+""}function Dwe(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lwe(t,e){if(t==null)return{};var r=Bwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var $we=function(e,r,n,a,i,o){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},Uwe=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,o=e.top,c=o===void 0?0:o,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,v=y===void 0?0:y,_=e.className,S=Lwe(e,Iwe),w=Rwe({x:n,y:i,top:c,left:h,width:m,height:v},S);return!vt(n)||!vt(i)||!vt(m)||!vt(v)||!vt(c)||!vt(h)?null:se.createElement("path",BA({},Vt(w,!0),{className:pr("recharts-cross",_),d:$we(n,i,m,v,c,h)}))},zwe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function Vwe(t,e){if(t==null)return{};var r=Fwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uc.apply(this,arguments)}function q$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Og(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q$(Object(r),!0).forEach(function(n){qwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qwe(t,e,r){return e=Hwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hwe(t){var e=Gwe(t,"string");return Cg(e)=="symbol"?e:e+""}function Gwe(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wwe=function(e,r,n,a){var i="";return a.forEach(function(o,c){var d=_n(r,n,e,o);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},Kwe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,o=e.polarAngles,c=e.radialLines;if(!o||!o.length||!c)return null;var d=Og({stroke:"#ccc"},Vt(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},o.map(function(h){var p=_n(r,n,a,h),m=_n(r,n,i,h);return se.createElement("line",uc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},Qwe=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,o=Og(Og({stroke:"#ccc"},Vt(e,!1)),{},{fill:"none"});return se.createElement("circle",uc({},o,{className:pr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},Xwe=function(e){var r=e.radius,n=e.index,a=Og(Og({stroke:"#ccc"},Vt(e,!1)),{},{fill:"none"});return se.createElement("path",uc({},a,{className:pr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:Wwe(r,e.cx,e.cy,e.polarAngles)}))},Ywe=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var o=i;return n==="circle"?se.createElement(Qwe,uc({key:o},e,{radius:a,index:i})):se.createElement(Xwe,uc({key:o},e,{radius:a,index:i}))}))},iQ=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,o=e.innerRadius,c=o===void 0?0:o,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,v=y===void 0?!0:y,_=Vwe(e,zwe);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(Kwe,uc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:v},_)),se.createElement(Ywe,uc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:v},_)))};iQ.displayName="PolarGrid";var tT,H$;function Zwe(){if(H$)return tT;H$=1;var t=sw(),e=vK(),r=cl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return tT=n,tT}var Jwe=Zwe();const e4e=Xr(Jwe);var rT,G$;function t4e(){if(G$)return rT;G$=1;var t=sw(),e=cl(),r=xK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return rT=n,rT}var r4e=t4e();const n4e=Xr(r4e);var a4e=["cx","cy","angle","ticks","axisLine"],i4e=["ticks","tick","angle","tickFormatter","stroke"];function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Em.apply(this,arguments)}function W$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(r),!0).forEach(function(n){hw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K$(t,e){if(t==null)return{};var r=s4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function o4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oQ(n.key),n)}}function l4e(t,e,r){return e&&Q$(t.prototype,e),r&&Q$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c4e(t,e,r){return e=Ab(e),u4e(t,sQ()?Reflect.construct(e,r||[],Ab(t).constructor):e.apply(t,r))}function u4e(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d4e(t)}function d4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sQ=function(){return!!t})()}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ab(t)}function h4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$A(t,e)}function $A(t,e){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$A(t,e)}function hw(t,e,r){return e=oQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oQ(t){var e=f4e(t,"string");return cf(e)=="symbol"?e:e+""}function f4e(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T1=(function(t){function e(){return o4e(this,e),c4e(this,e,arguments)}return h4e(e,t),l4e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,c=i.cx,d=i.cy;return _n(c,d,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=e4e(c,function(p){return p.coordinate||0}),h=n4e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,c=n.ticks,d=n.axisLine,h=K$(n,a4e),p=c.reduce(function(_,S){return[Math.min(_[0],S.coordinate),Math.max(_[1],S.coordinate)]},[1/0,-1/0]),m=_n(a,i,p[0],o),y=_n(a,i,p[1],o),v=vd(vd(vd({},Vt(h,!1)),{},{fill:"none"},Vt(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return se.createElement("line",Em({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=K$(a,i4e),m=this.getTickTextAnchor(),y=Vt(p,!1),v=Vt(o,!1),_=i.map(function(S,w){var j=n.getTickValueCoord(S),O=vd(vd(vd(vd({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(j.x,", ").concat(j.y,")")},y),{},{stroke:"none",fill:h},v),{},{index:w},j),{},{payload:S});return se.createElement(qr,Em({className:pr("recharts-polar-radius-axis-tick",GK(o)),key:"tick-".concat(S.coordinate)},a0(n.props,S,w)),e.renderTickItem(o,O,d?d(S.value,w):S.value))});return se.createElement(qr,{className:"recharts-polar-radius-axis-ticks"},_)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:se.createElement(qr,{className:pr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),di.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):nr(n)?o=n(a):o=se.createElement(rf,Em({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])})(A.PureComponent);hw(T1,"displayName","PolarRadiusAxis");hw(T1,"axisType","radiusAxis");hw(T1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function jd(){return jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jd.apply(this,arguments)}function X$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(r),!0).forEach(function(n){fw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cQ(n.key),n)}}function m4e(t,e,r){return e&&Y$(t.prototype,e),r&&Y$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g4e(t,e,r){return e=Eb(e),y4e(t,lQ()?Reflect.construct(e,r||[],Eb(t).constructor):e.apply(t,r))}function y4e(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v4e(t)}function v4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lQ=function(){return!!t})()}function Eb(t){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eb(t)}function x4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UA(t,e)}function UA(t,e){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},UA(t,e)}function fw(t,e,r){return e=cQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cQ(t){var e=b4e(t,"string");return uf(e)=="symbol"?e:e+""}function b4e(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w4e=Math.PI/180,Z$=1e-5,N1=(function(t){function e(){return p4e(this,e),g4e(this,e,arguments)}return x4e(e,t),m4e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=_n(i,o,c,n.coordinate),y=_n(i,o,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*w4e),o;return i>Z$?o=a==="outer"?"start":"end":i<-Z$?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,c=n.axisLine,d=n.axisLineType,h=xd(xd({},Vt(this.props,!1)),{},{fill:"none"},Vt(c,!1));if(d==="circle")return se.createElement(dw,jd({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:o}));var p=this.props.ticks,m=p.map(function(y){return _n(a,i,o,y.coordinate)});return se.createElement(aQ,jd({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=Vt(this.props,!1),m=Vt(o,!1),y=xd(xd({},p),{},{fill:"none"},Vt(c,!1)),v=i.map(function(_,S){var w=n.getTickLineCoord(_),j=n.getTickTextAnchor(_),O=xd(xd(xd({textAnchor:j},p),{},{stroke:"none",fill:h},m),{},{index:S,payload:_,x:w.x2,y:w.y2});return se.createElement(qr,jd({className:pr("recharts-polar-angle-axis-tick",GK(o)),key:"tick-".concat(_.coordinate)},a0(n.props,_,S)),c&&se.createElement("line",jd({className:"recharts-polar-angle-axis-tick-line"},y,w)),o&&e.renderTickItem(o,O,d?d(_.value,S):_.value))});return se.createElement(qr,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(qr,{className:pr("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return se.isValidElement(n)?o=se.cloneElement(n,a):nr(n)?o=n(a):o=se.createElement(rf,jd({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])})(A.PureComponent);fw(N1,"displayName","PolarAngleAxis");fw(N1,"axisType","angleAxis");fw(N1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var nT,J$;function S4e(){if(J$)return nT;J$=1;var t=yW(),e=t(Object.getPrototypeOf,Object);return nT=e,nT}var aT,eU;function _4e(){if(eU)return aT;eU=1;var t=mc(),e=S4e(),r=gc(),n="[object Object]",a=Function.prototype,i=Object.prototype,o=a.toString,c=i.hasOwnProperty,d=o.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=c.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==d}return aT=h,aT}var T4e=_4e();const N4e=Xr(T4e);var iT,tU;function A4e(){if(tU)return iT;tU=1;var t=mc(),e=gc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return iT=n,iT}var E4e=A4e();const j4e=Xr(E4e);function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function jb(){return jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jb.apply(this,arguments)}function k4e(t,e){return R4e(t)||I4e(t,e)||O4e(t,e)||C4e()}function C4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O4e(t,e){if(t){if(typeof t=="string")return rU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rU(t,e)}}function rU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function R4e(t){if(Array.isArray(t))return t}function nU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(r),!0).forEach(function(n){M4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M4e(t,e,r){return e=P4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P4e(t){var e=D4e(t,"string");return Ig(e)=="symbol"?e:e+""}function D4e(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iU=function(e,r,n,a,i){var o=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-o/2,",").concat(r+i),c+="L ".concat(e+n-o/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},L4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B4e=function(e){var r=aU(aU({},L4e),e),n=A.useRef(),a=A.useState(-1),i=k4e(a,2),o=i[0],c=i[1];A.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var R=n.current.getTotalLength();R&&c(R)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,v=r.className,_=r.animationEasing,S=r.animationDuration,w=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var O=pr("recharts-trapezoid",v);return j?se.createElement(rl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:S,animationEasing:_,isActive:j},function(R){var L=R.upperWidth,C=R.lowerWidth,P=R.height,E=R.x,N=R.y;return se.createElement(rl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:_},se.createElement("path",jb({},Vt(r,!0),{className:O,d:iU(E,N,L,C,P),ref:n})))}):se.createElement("g",null,se.createElement("path",jb({},Vt(r,!0),{className:O,d:iU(d,h,p,m,y)})))},$4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function U4e(t,e){if(t==null)return{};var r=z4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(r),!0).forEach(function(n){V4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function V4e(t,e,r){return e=F4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F4e(t){var e=q4e(t,"string");return Rg(e)=="symbol"?e:e+""}function q4e(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H4e(t,e){return kb(kb({},e),t)}function G4e(t,e){return t==="symbols"}function oU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(ij,r);case"trapezoid":return se.createElement(B4e,r);case"sector":return se.createElement(XK,r);case"symbols":if(G4e(e))return se.createElement(X2,r);break;default:return null}}function W4e(t){return A.isValidElement(t)?t.props:t}function zA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?H4e:n,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,c=t.isActive,d=U4e(t,$4e),h;if(A.isValidElement(e))h=A.cloneElement(e,kb(kb({},d),W4e(e)));else if(nr(e))h=e(d);else if(N4e(e)&&!j4e(e)){var p=a(e,d);h=se.createElement(oU,{shapeType:r,elementProps:p})}else{var m=d;h=se.createElement(oU,{shapeType:r,elementProps:m})}return c?se.createElement(qr,{className:o},h):h}function pw(t,e){return e!=null&&"trapezoids"in t.props}function mw(t,e){return e!=null&&"sectors"in t.props}function Mg(t,e){return e!=null&&"points"in t.props}function K4e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function Q4e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function X4e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function Y4e(t,e){var r;return pw(t,e)?r=K4e:mw(t,e)?r=Q4e:Mg(t,e)&&(r=X4e),r}function Z4e(t,e){var r;return pw(t,e)?r="trapezoids":mw(t,e)?r="sectors":Mg(t,e)&&(r="points"),r}function J4e(t,e){if(pw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(mw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Mg(t,e)?e.payload:{}}function e5e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=Z4e(r,e),i=J4e(r,e),o=n.filter(function(d,h){var p=S1(i,d),m=r.props[a].filter(function(_){var S=Y4e(r,e);return S(_,e)}),y=r.props[a].indexOf(m[m.length-1]),v=h===y;return p&&v}),c=n.indexOf(o[o.length-1]);return c}var sT,lU;function t5e(){if(lU)return sT;lU=1;function t(e){return e&&e.length?e[0]:void 0}return sT=t,sT}var oT,cU;function r5e(){return cU||(cU=1,oT=t5e()),oT}var n5e=r5e();const a5e=Xr(n5e);var i5e=["key"];function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function s5e(t,e){if(t==null)return{};var r=o5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function o5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cb.apply(this,arguments)}function uU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ri(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(r),!0).forEach(function(n){Bl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dQ(n.key),n)}}function c5e(t,e,r){return e&&dU(t.prototype,e),r&&dU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u5e(t,e,r){return e=Ob(e),d5e(t,uQ()?Reflect.construct(e,r||[],Ob(t).constructor):e.apply(t,r))}function d5e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h5e(t)}function h5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uQ=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(t)}function f5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VA(t,e)}function VA(t,e){return VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VA(t,e)}function Bl(t,e,r){return e=dQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dQ(t){var e=p5e(t,"string");return df(e)=="symbol"?e:e+""}function p5e(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var A1=(function(t){function e(){var r;l5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=u5e(this,e,[].concat(a)),Bl(r,"state",{isAnimationFinished:!1}),Bl(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),nr(o)&&o()}),Bl(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),nr(o)&&o()}),Bl(r,"handleMouseEnter",function(o){var c=r.props.onMouseEnter;c&&c(r.props,o)}),Bl(r,"handleMouseLeave",function(o){var c=r.props.onMouseLeave;c&&c(r.props,o)}),r}return f5e(e,t),c5e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,o=a.dataKey,c=Vt(this.props,!1),d=Vt(i,!0),h=n.map(function(p,m){var y=Ri(Ri(Ri({key:"dot-".concat(m),r:3},c),d),{},{dataKey:o,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,y)});return se.createElement(qr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,o=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return se.isValidElement(i)?p=se.cloneElement(i,Ri(Ri({},this.props),{},{points:n})):nr(i)?p=i(Ri(Ri({},this.props),{},{points:n})):p=se.createElement(aQ,Cb({},Vt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(qr,{className:"recharts-radar-polygon"},p,o?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(rl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,_=m&&m.length/i.length,S=i.map(function(w,j){var O=m&&m[Math.floor(j*_)];if(O){var R=Zi(O.x,w.x),L=Zi(O.y,w.y);return Ri(Ri({},w),{},{x:R(v),y:L(v)})}var C=Zi(w.cx,w.x),P=Zi(w.cy,w.y);return Ri(Ri({},w),{},{x:C(v),y:P(v)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!o&&(!c||!S1(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,o=n.points,c=n.isAnimationActive;if(a||!o||!o.length)return null;var d=this.state.isAnimationFinished,h=pr("recharts-radar",i);return se.createElement(qr,{className:h},this.renderPolygon(),(!c||d)&&Jl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(nr(n))i=n(a);else{var o=a.key,c=s5e(a,i5e);i=se.createElement(dw,Cb({},c,{key:o,className:pr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(A.PureComponent);Bl(A1,"displayName","Radar");Bl(A1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!y0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Bl(A1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,o=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(y,v){var _=pi(y,r.dataKey,v),S=pi(y,a),w=r.scale(_)+p,j=Array.isArray(S)?KK(S):S,O=ur(j)?void 0:e.scale(j);Array.isArray(S)&&S.length>=2&&(d=!0),h.push(Ri(Ri({},_n(o,c,O,w)),{},{name:_,value:S,cx:o,cy:c,radius:O,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var v=a5e(y.value),_=ur(v)?void 0:e.scale(v);m.push(Ri(Ri({},y),{},{radius:_},_n(o,c,_,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var lT,hU;function m5e(){if(hU)return lT;hU=1;var t=Math.ceil,e=Math.max;function r(n,a,i,o){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[o?d:++c]=n,n+=i;return h}return lT=r,lT}var cT,fU;function hQ(){if(fU)return cT;fU=1;var t=RW(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return cT=n,cT}var uT,pU;function g5e(){if(pU)return uT;pU=1;var t=m5e(),e=J2(),r=hQ();function n(a){return function(i,o,c){return c&&typeof c!="number"&&e(i,o,c)&&(o=c=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),c=c===void 0?i<o?1:-1:r(c),t(i,o,c,a)}}return uT=n,uT}var dT,mU;function y5e(){if(mU)return dT;mU=1;var t=g5e(),e=t();return dT=e,dT}var v5e=y5e();const Ib=Xr(v5e);function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){fQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fQ(t,e,r){return e=x5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x5e(t){var e=b5e(t,"string");return Pg(e)=="symbol"?e:e+""}function b5e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w5e=["Webkit","Moz","O","ms"],S5e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=w5e.reduce(function(i,o){return yU(yU({},i),{},fQ({},o+n,r))},{});return a[e]=r,a};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rb.apply(this,arguments)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){ws(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mQ(n.key),n)}}function T5e(t,e,r){return e&&xU(t.prototype,e),r&&xU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N5e(t,e,r){return e=Mb(e),A5e(t,pQ()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function A5e(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E5e(t)}function E5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pQ=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function j5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FA(t,e)}function FA(t,e){return FA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FA(t,e)}function ws(t,e,r){return e=mQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mQ(t){var e=k5e(t,"string");return hf(e)=="symbol"?e:e+""}function k5e(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C5e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,o=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=_m().domain(Ib(0,d)).range([i,i+o-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},bU=function(e){return e.changedTouches&&!!e.changedTouches.length},ff=(function(t){function e(r){var n;return _5e(this,e),n=N5e(this,e,[r]),ws(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),ws(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),ws(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,c=a.startIndex;o==null||o({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),ws(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ws(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ws(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ws(n,"handleSlideDragStart",function(a){var i=bU(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return j5e(e,t),T5e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),y=Math.max(a,i),v=e.getIndexInRange(o,m),_=e.getIndexInRange(o,y);return{startIndex:v-v%d,endIndex:_===p?p:_-_%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,c=a.dataKey,d=pi(i[n],c,n);return nr(o)?o(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,v=d.endIndex,_=d.onChange,S=n.pageX-i;S>0?S=Math.min(S,h+p-m-c,h+p-m-o):S<0&&(S=Math.max(S,h-o,h-c));var w=this.getIndex({startX:o+S,endX:c+S});(w.startIndex!==y||w.endIndex!==v)&&_&&_(w),this.setState({startX:o+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=bU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[o],p=this.props,m=p.x,y=p.width,v=p.travellerWidth,_=p.onChange,S=p.gap,w=p.data,j={startX:this.state.startX,endX:this.state.endX},O=n.pageX-i;O>0?O=Math.min(O,m+y-v-h):O<0&&(O=Math.max(O,m-h)),j[o]=h+O;var R=this.getIndex(j),L=R.startIndex,C=R.endIndex,P=function(){var N=w.length-1;return o==="startX"&&(c>d?L%S===0:C%S===0)||c<d&&C===N||o==="endX"&&(c>d?C%S===0:L%S===0)||c>d&&C===N};this.setState(ws(ws({},o,h+O),"brushMoveStartX",n.pageX),function(){_&&P()&&_(R)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,c=o.scaleValues,d=o.startX,h=o.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=c.length)){var v=c[y];a==="startX"&&v>=h||a==="endX"&&v<=d||this.setState(ws({},a,v),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:o,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=A.Children.only(h);return m?se.cloneElement(m,{x:a,y:i,width:o,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,v=d.ariaLabel,_=d.data,S=d.startIndex,w=d.endIndex,j=Math.max(n,this.props.x),O=hT(hT({},Vt(this.props,!1)),{},{x:j,y:h,width:p,height:m}),R=v||"Min value: ".concat((i=_[S])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=_[w])===null||o===void 0?void 0:o.name);return se.createElement(qr,{tabIndex:0,role:"slider","aria-label":R,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),c.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,O))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:o,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,v=5,_={pointerEvents:"none",fill:h};return se.createElement(qr,{className:"recharts-brush-texts"},se.createElement(rf,Rb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-v,y:o+c/2},_),this.getTextOfTick(a)),se.createElement(rf,Rb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+v,y:o+c/2},_),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,v=y.startX,_=y.endX,S=y.isTextActive,w=y.isSlideMoving,j=y.isTravellerMoving,O=y.isTravellerFocused;if(!a||!a.length||!vt(c)||!vt(d)||!vt(h)||!vt(p)||h<=0||p<=0)return null;var R=pr("recharts-brush",i),L=se.Children.count(o)===1,C=S5e("userSelect","none");return se.createElement(qr,{className:R,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(v,_),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(_,"endX"),(S||w||j||O||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:o,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+o-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+o-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):nr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return hT({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o},i&&i.length?C5e({data:i,width:o,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+o-d]);var y=a.scale.domain().map(function(v){return a.scale(v)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,c=i-1;c-o>1;){var d=Math.floor((o+c)/2);n[d]>a?c=d:o=d}return a>=n[c]?c:o}}])})(A.PureComponent);ws(ff,"displayName","Brush");ws(ff,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var fT,wU;function O5e(){if(wU)return fT;wU=1;var t=CE();function e(r,n){var a;return t(r,function(i,o,c){return a=n(i,o,c),!a}),!!a}return fT=e,fT}var pT,SU;function I5e(){if(SU)return pT;SU=1;var t=uW(),e=cl(),r=O5e(),n=os(),a=J2();function i(o,c,d){var h=n(o)?t:r;return d&&a(o,c,d)&&(c=void 0),h(o,e(c,3))}return pT=i,pT}var R5e=I5e();const M5e=Xr(R5e);var Qo=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},mT,_U;function P5e(){if(_U)return mT;_U=1;var t=jW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return mT=e,mT}var gT,TU;function D5e(){if(TU)return gT;TU=1;var t=P5e(),e=AW(),r=cl();function n(a,i){var o={};return i=r(i,3),e(a,function(c,d,h){t(o,d,i(c,d,h))}),o}return gT=n,gT}var L5e=D5e();const B5e=Xr(L5e);var yT,NU;function $5e(){if(NU)return yT;NU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return yT=t,yT}var vT,AU;function U5e(){if(AU)return vT;AU=1;var t=CE();function e(r,n){var a=!0;return t(r,function(i,o,c){return a=!!n(i,o,c),a}),a}return vT=e,vT}var xT,EU;function z5e(){if(EU)return xT;EU=1;var t=$5e(),e=U5e(),r=cl(),n=os(),a=J2();function i(o,c,d){var h=n(o)?t:e;return d&&a(o,c,d)&&(c=void 0),h(o,r(c,3))}return xT=i,xT}var V5e=z5e();const gQ=Xr(V5e);var F5e=["x","y"];function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function qA(){return qA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qA.apply(this,arguments)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){q5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q5e(t,e,r){return e=H5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H5e(t){var e=G5e(t,"string");return Dg(e)=="symbol"?e:e+""}function G5e(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W5e(t,e){if(t==null)return{};var r=K5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Q5e(t,e){var r=t.x,n=t.y,a=W5e(t,F5e),i="".concat(r),o=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),y=parseInt(m,10);return Jp(Jp(Jp(Jp(Jp({},e),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function kU(t){return se.createElement(zA,qA({shapeType:"rectangle",propTransformer:Q5e,activeClassName:"recharts-active-bar"},t))}var X5e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=vt(n)||J0e(n);return i?e(n,a):(i||s0(),r)}},Y5e=["value","background"],yQ;function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function Z5e(t,e){if(t==null)return{};var r=J5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function J5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Pb(){return Pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pb.apply(this,arguments)}function CU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ta(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(r),!0).forEach(function(n){fu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function e3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xQ(n.key),n)}}function t3e(t,e,r){return e&&OU(t.prototype,e),r&&OU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r3e(t,e,r){return e=Db(e),n3e(t,vQ()?Reflect.construct(e,r||[],Db(t).constructor):e.apply(t,r))}function n3e(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a3e(t)}function a3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vQ=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Db(t)}function i3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HA(t,e)}function HA(t,e){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HA(t,e)}function fu(t,e,r){return e=xQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xQ(t){var e=s3e(t,"string");return pf(e)=="symbol"?e:e+""}function s3e(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E1=(function(t){function e(){var r;e3e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=r3e(this,e,[].concat(a)),fu(r,"state",{isAnimationFinished:!1}),fu(r,"id",g1("recharts-bar-")),fu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),fu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return i3e(e,t),t3e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=Vt(this.props,!1);return n&&n.map(function(m,y){var v=y===d,_=v?h:o,S=Ta(Ta(Ta({},p),m),{},{isActive:v,option:_,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(qr,Pb({className:"recharts-bar-rectangle"},a0(a.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),se.createElement(kU,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=this.state.prevData;return se.createElement(rl,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var _=v.t,S=i.map(function(w,j){var O=y&&y[j];if(O){var R=Zi(O.x,w.x),L=Zi(O.y,w.y),C=Zi(O.width,w.width),P=Zi(O.height,w.height);return Ta(Ta({},w),{},{x:R(_),y:L(_),width:C(_),height:P(_)})}if(o==="horizontal"){var E=Zi(0,w.height),N=E(_);return Ta(Ta({},w),{},{y:w.y+w.height-N,height:N})}var k=Zi(0,w.width),z=k(_);return Ta(Ta({},w),{},{width:z})});return se.createElement(qr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!S1(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,c=a.activeIndex,d=Vt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,y=Z5e(h,Y5e);if(!m)return null;var v=Ta(Ta(Ta(Ta(Ta({},y),{},{fill:"#eee"},m),d),a0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:p,className:"recharts-bar-background-rectangle"});return se.createElement(kU,Pb({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},v))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=ks(p,_1);if(!m)return null;var y=h==="vertical"?o[0].height/2:o[0].width/2,v=function(w,j){var O=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:O,errorVal:pi(w,j)}},_={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(qr,_,m.map(function(S){return se.cloneElement(S,{key:"error-bar-".concat(a,"-").concat(S.props.dataKey),data:o,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:v})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,v=n.isAnimationActive,_=n.background,S=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=pr("recharts-bar",o),O=c&&c.allowDataOverflow,R=d&&d.allowDataOverflow,L=O||R,C=ur(S)?this.id:S;return se.createElement(qr,{className:j},O||R?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(C)},se.createElement("rect",{x:O?h:h-m/2,y:R?p:p-y/2,width:O?m:m*2,height:R?y:y*2}))):null,se.createElement(qr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(C,")"):null},_?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,C),(!v||w)&&Jl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(A.PureComponent);yQ=E1;fu(E1,"displayName","Bar");fu(E1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!y0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});fu(E1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,o=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,v=pxe(n,r);if(!v)return null;var _=e.layout,S=r.type.defaultProps,w=S!==void 0?Ta(Ta({},S),r.props):r.props,j=w.dataKey,O=w.children,R=w.minPointSize,L=_==="horizontal"?o:i,C=h?L.scale.domain():null,P=wxe({numericAxis:L}),E=ks(O,RE),N=m.map(function(k,z){var D,B,$,K,W,H;h?D=mxe(h[p+z],C):(D=pi(k,j),Array.isArray(D)||(D=[P,D]));var J=X5e(R,yQ.defaultProps.minPointSize)(D[1],z);if(_==="horizontal"){var ie,he=[o.scale(D[0]),o.scale(D[1])],pe=he[0],Z=he[1];B=r$({axis:i,ticks:c,bandSize:a,offset:v.offset,entry:k,index:z}),$=(ie=Z??pe)!==null&&ie!==void 0?ie:void 0,K=v.size;var ne=pe-Z;if(W=Number.isNaN(ne)?0:ne,H={x:B,y:o.y,width:K,height:o.height},Math.abs(J)>0&&Math.abs(W)<Math.abs(J)){var ae=bo(W||J)*(Math.abs(J)-Math.abs(W));$-=ae,W+=ae}}else{var xe=[i.scale(D[0]),i.scale(D[1])],Oe=xe[0],Ue=xe[1];if(B=Oe,$=r$({axis:o,ticks:d,bandSize:a,offset:v.offset,entry:k,index:z}),K=Ue-Oe,W=v.size,H={x:i.x,y:$,width:i.width,height:W},Math.abs(J)>0&&Math.abs(K)<Math.abs(J)){var Xe=bo(K||J)*(Math.abs(J)-Math.abs(K));K+=Xe}}return Ta(Ta(Ta({},k),{},{x:B,y:$,width:K,height:W,value:h?D:D[1],payload:k,background:H},E&&E[z]&&E[z].props),{},{tooltipPayload:[qK(r,k)],tooltipPosition:{x:B+K/2,y:$+W/2}})});return Ta({data:N,layout:_},y)});function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function o3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bQ(n.key),n)}}function l3e(t,e,r){return e&&IU(t.prototype,e),r&&IU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function RU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(r),!0).forEach(function(n){gw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gw(t,e,r){return e=bQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bQ(t){var e=c3e(t,"string");return Lg(e)=="symbol"?e:e+""}function c3e(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u3e=function(e,r,n,a,i){var o=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!Ss(h,E1);return p.reduce(function(v,_){var S=r[_],w=S.orientation,j=S.domain,O=S.padding,R=O===void 0?{}:O,L=S.mirror,C=S.reversed,P="".concat(w).concat(L?"Mirror":""),E,N,k,z,D;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var B=j[1]-j[0],$=1/0,K=S.categoricalDomain.sort(nhe);if(K.forEach(function(xe,Oe){Oe>0&&($=Math.min((xe||0)-(K[Oe-1]||0),$))}),Number.isFinite($)){var W=$/B,H=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(E=W*H/2),S.padding==="no-gap"){var J=wo(e.barCategoryGap,W*H),ie=W*H/2;E=ie-J-(ie-J)/H*J}}}a==="xAxis"?N=[n.left+(R.left||0)+(E||0),n.left+n.width-(R.right||0)-(E||0)]:a==="yAxis"?N=d==="horizontal"?[n.top+n.height-(R.bottom||0),n.top+(R.top||0)]:[n.top+(R.top||0)+(E||0),n.top+n.height-(R.bottom||0)-(E||0)]:N=S.range,C&&(N=[N[1],N[0]]);var he=UK(S,i,y),pe=he.scale,Z=he.realScaleType;pe.domain(j).range(N),zK(pe);var ne=VK(pe,vo(vo({},S),{},{realScaleType:Z}));a==="xAxis"?(D=w==="top"&&!L||w==="bottom"&&L,k=n.left,z=m[P]-D*S.height):a==="yAxis"&&(D=w==="left"&&!L||w==="right"&&L,k=m[P]-D*S.width,z=n.top);var ae=vo(vo(vo({},S),ne),{},{realScaleType:Z,x:k,y:z,scale:pe,width:a==="xAxis"?n.width:S.width,height:a==="yAxis"?n.height:S.height});return ae.bandSize=vb(ae,ne),!S.hide&&a==="xAxis"?m[P]+=(D?-1:1)*ae.height:S.hide||(m[P]+=(D?-1:1)*ae.width),vo(vo({},v),{},gw({},_,ae))},{})},wQ=function(e,r){var n=e.x,a=e.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},d3e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return wQ({x:r,y:n},{x:a,y:i})},SQ=(function(){function t(e){o3e(this,t),this.scale=e}return l3e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();gw(SQ,"EPS",1e-4);var sj=function(e){var r=Object.keys(e).reduce(function(n,a){return vo(vo({},n),{},gw({},a,SQ.create(e[a])))},{});return vo(vo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,c=i.position;return B5e(a,function(d,h){return r[h].apply(d,{bandAware:o,position:c})})},isInRange:function(a){return gQ(a,function(i,o){return r[o].isInRange(i)})}})};function h3e(t){return(t%180+180)%180}var f3e=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=h3e(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},bT,MU;function p3e(){if(MU)return bT;MU=1;var t=cl(),e=y1(),r=Y2();function n(a){return function(i,o,c){var d=Object(i);if(!e(i)){var h=t(o,3);i=r(i),o=function(m){return h(d[m],m,d)}}var p=a(i,o,c);return p>-1?d[h?i[p]:p]:void 0}}return bT=n,bT}var wT,PU;function m3e(){if(PU)return wT;PU=1;var t=hQ();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return wT=e,wT}var ST,DU;function g3e(){if(DU)return ST;DU=1;var t=wW(),e=cl(),r=m3e(),n=Math.max;function a(i,o,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(o,3),h)}return ST=a,ST}var _T,LU;function y3e(){if(LU)return _T;LU=1;var t=p3e(),e=g3e(),r=t(e);return _T=r,_T}var v3e=y3e();const x3e=Xr(v3e);var b3e=LG();const w3e=Xr(b3e);var S3e=w3e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),oj=A.createContext(void 0),lj=A.createContext(void 0),_Q=A.createContext(void 0),TQ=A.createContext({}),NQ=A.createContext(void 0),AQ=A.createContext(0),EQ=A.createContext(0),BU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=e.clipPathId,c=e.children,d=e.width,h=e.height,p=S3e(i);return se.createElement(oj.Provider,{value:n},se.createElement(lj.Provider,{value:a},se.createElement(TQ.Provider,{value:i},se.createElement(_Q.Provider,{value:p},se.createElement(NQ.Provider,{value:o},se.createElement(AQ.Provider,{value:h},se.createElement(EQ.Provider,{value:d},c)))))))},_3e=function(){return A.useContext(NQ)},jQ=function(e){var r=A.useContext(oj);r==null&&s0();var n=r[e];return n==null&&s0(),n},T3e=function(){var e=A.useContext(oj);return lu(e)},N3e=function(){var e=A.useContext(lj),r=x3e(e,function(n){return gQ(n.domain,Number.isFinite)});return r||lu(e)},kQ=function(e){var r=A.useContext(lj);r==null&&s0();var n=r[e];return n==null&&s0(),n},A3e=function(){var e=A.useContext(_Q);return e},E3e=function(){return A.useContext(TQ)},cj=function(){return A.useContext(EQ)},uj=function(){return A.useContext(AQ)};function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function j3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OQ(n.key),n)}}function C3e(t,e,r){return e&&k3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O3e(t,e,r){return e=Lb(e),I3e(t,CQ()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function I3e(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R3e(t)}function R3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CQ=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function M3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GA(t,e)}function GA(t,e){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GA(t,e)}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(n){dj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dj(t,e,r){return e=OQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OQ(t){var e=P3e(t,"string");return mf(e)=="symbol"?e:e+""}function P3e(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function D3e(t,e){return U3e(t)||$3e(t,e)||B3e(t,e)||L3e()}function L3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B3e(t,e){if(t){if(typeof t=="string")return zU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zU(t,e)}}function zU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function U3e(t){if(Array.isArray(t))return t}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WA.apply(this,arguments)}var z3e=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):nr(e)?n=e(r):n=se.createElement("line",WA({},r,{className:"recharts-reference-line-line"})),n},V3e=function(e,r,n,a,i,o,c,d,h){var p=i.x,m=i.y,y=i.width,v=i.height;if(n){var _=h.y,S=e.y.apply(_,{position:o});if(Qo(h,"discard")&&!e.y.isInRange(S))return null;var w=[{x:p+y,y:S},{x:p,y:S}];return d==="left"?w.reverse():w}if(r){var j=h.x,O=e.x.apply(j,{position:o});if(Qo(h,"discard")&&!e.x.isInRange(O))return null;var R=[{x:O,y:m+v},{x:O,y:m}];return c==="top"?R.reverse():R}if(a){var L=h.segment,C=L.map(function(P){return e.apply(P,{position:o})});return Qo(h,"discard")&&M5e(C,function(P){return!e.isInRange(P)})?null:C}return null};function F3e(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,o=t.shape,c=t.className,d=t.alwaysShow,h=_3e(),p=jQ(a),m=kQ(i),y=A3e();if(!h||!y)return null;Yl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=sj({x:p.scale,y:m.scale}),_=$a(e),S=$a(r),w=n&&n.length===2,j=V3e(v,_,S,w,y,t.position,p.orientation,m.orientation,t);if(!j)return null;var O=D3e(j,2),R=O[0],L=R.x,C=R.y,P=O[1],E=P.x,N=P.y,k=Qo(t,"hidden")?"url(#".concat(h,")"):void 0,z=UU(UU({clipPath:k},Vt(t,!0)),{},{x1:L,y1:C,x2:E,y2:N});return se.createElement(qr,{className:pr("recharts-reference-line",c)},z3e(o,z),di.renderCallByParent(t,d3e({x1:L,y1:C,x2:E,y2:N})))}var hj=(function(t){function e(){return j3e(this,e),O3e(this,e,arguments)}return M3e(e,t),C3e(e,[{key:"render",value:function(){return se.createElement(F3e,this.props)}}])})(se.Component);dj(hj,"displayName","ReferenceLine");dj(hj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function VU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(r),!0).forEach(function(n){yw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RQ(n.key),n)}}function G3e(t,e,r){return e&&H3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function W3e(t,e,r){return e=Bb(e),K3e(t,IQ()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function K3e(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q3e(t)}function Q3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IQ=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function X3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QA(t,e)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QA(t,e)}function yw(t,e,r){return e=RQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RQ(t){var e=Y3e(t,"string");return gf(e)=="symbol"?e:e+""}function Y3e(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Z3e=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,o=sj({x:a.scale,y:i.scale}),c=o.apply({x:r,y:n},{bandAware:!0});return Qo(e,"discard")&&!o.isInRange(c)?null:c},vw=(function(t){function e(){return q3e(this,e),W3e(this,e,arguments)}return X3e(e,t),G3e(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,c=n.alwaysShow,d=n.clipPathId,h=$a(a),p=$a(i);if(Yl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=Z3e(this.props);if(!m)return null;var y=m.x,v=m.y,_=this.props,S=_.shape,w=_.className,j=Qo(this.props,"hidden")?"url(#".concat(d,")"):void 0,O=FU(FU({clipPath:j},Vt(this.props,!0)),{},{cx:y,cy:v});return se.createElement(qr,{className:pr("recharts-reference-dot",w)},e.renderDot(S,O),di.renderCallByParent(this.props,{x:y-o,y:v-o,width:2*o,height:2*o}))}}])})(se.Component);yw(vw,"displayName","ReferenceDot");yw(vw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});yw(vw,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):nr(t)?r=t(e):r=se.createElement(dw,KA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function XA(){return XA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XA.apply(this,arguments)}function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){xw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function J3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PQ(n.key),n)}}function tSe(t,e,r){return e&&eSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rSe(t,e,r){return e=$b(e),nSe(t,MQ()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function nSe(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aSe(t)}function aSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MQ=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function iSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}function YA(t,e){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YA(t,e)}function xw(t,e,r){return e=PQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PQ(t){var e=sSe(t,"string");return yf(e)=="symbol"?e:e+""}function sSe(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oSe=function(e,r,n,a,i){var o=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var y=sj({x:p.scale,y:m.scale}),v={x:e?y.x.apply(o,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},_={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Qo(i,"discard")&&(!y.isInRange(v)||!y.isInRange(_))?null:wQ(v,_)},bw=(function(t){function e(){return J3e(this,e),rSe(this,e,arguments)}return iSe(e,t),tSe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Yl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=$a(a),y=$a(i),v=$a(o),_=$a(c),S=this.props.shape;if(!m&&!y&&!v&&!_&&!S)return null;var w=oSe(m,y,v,_,this.props);if(!w&&!S)return null;var j=Qo(this.props,"hidden")?"url(#".concat(p,")"):void 0;return se.createElement(qr,{className:pr("recharts-reference-area",d)},e.renderRect(S,HU(HU({clipPath:j},Vt(this.props,!0)),w)),di.renderCallByParent(this.props,w))}}])})(se.Component);xw(bw,"displayName","ReferenceArea");xw(bw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});xw(bw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):nr(t)?r=t(e):r=se.createElement(ij,XA({},e,{className:"recharts-reference-area-rect"})),r});function DQ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function lSe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return f3e(n,r)}function cSe(t,e,r){var n=r==="width",a=t.x,i=t.y,o=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function Ub(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function uSe(t,e){return DQ(t,e+1)}function dSe(t,e,r,n,a){for(var i=(n||[]).slice(),o=e.start,c=e.end,d=0,h=1,p=o,m=function(){var _=n==null?void 0:n[d];if(_===void 0)return{v:DQ(n,h)};var S=d,w,j=function(){return w===void 0&&(w=r(_,S)),w},O=_.coordinate,R=d===0||Ub(t,O,j,p,c);R||(d=0,p=o,h+=1),R&&(p=O+t*(j()/2+a),d+=h)},y;h<=i.length;)if(y=m(),y)return y.v;return[]}function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function GU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(r),!0).forEach(function(n){hSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hSe(t,e,r){return e=fSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fSe(t){var e=pSe(t,"string");return Bg(e)=="symbol"?e:e+""}function pSe(t,e){if(Bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mSe(t,e,r,n,a){for(var i=(n||[]).slice(),o=i.length,c=e.start,d=e.end,h=function(y){var v=i[y],_,S=function(){return _===void 0&&(_=r(v,y)),_};if(y===o-1){var w=t*(v.coordinate+t*S()/2-d);i[y]=v=wi(wi({},v),{},{tickCoord:w>0?v.coordinate-w*t:v.coordinate})}else i[y]=v=wi(wi({},v),{},{tickCoord:v.coordinate});var j=Ub(t,v.tickCoord,S,c,d);j&&(d=v.tickCoord-t*(S()/2+a),i[y]=wi(wi({},v),{},{isShow:!0}))},p=o-1;p>=0;p--)h(p);return i}function gSe(t,e,r,n,a,i){var o=(n||[]).slice(),c=o.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),y=t*(p.coordinate+t*m/2-h);o[c-1]=p=wi(wi({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var v=Ub(t,p.tickCoord,function(){return m},d,h);v&&(h=p.tickCoord-t*(m/2+a),o[c-1]=wi(wi({},p),{},{isShow:!0}))}for(var _=i?c-1:c,S=function(O){var R=o[O],L,C=function(){return L===void 0&&(L=r(R,O)),L};if(O===0){var P=t*(R.coordinate-t*C()/2-d);o[O]=R=wi(wi({},R),{},{tickCoord:P<0?R.coordinate-P*t:R.coordinate})}else o[O]=R=wi(wi({},R),{},{tickCoord:R.coordinate});var E=Ub(t,R.tickCoord,C,d,h);E&&(d=R.tickCoord+t*(C()/2+a),o[O]=wi(wi({},R),{},{isShow:!0}))},w=0;w<_;w++)S(w);return o}function fj(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,o=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(vt(d)||y0.isSsr)return uSe(a,typeof d=="number"&&vt(d)?d:0);var y=[],v=c==="top"||c==="bottom"?"width":"height",_=p&&v==="width"?Sm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(R,L){var C=nr(h)?h(R.value,L):R.value;return v==="width"?lSe(Sm(C,{fontSize:e,letterSpacing:r}),_,m):Sm(C,{fontSize:e,letterSpacing:r})[v]},w=a.length>=2?bo(a[1].coordinate-a[0].coordinate):1,j=cSe(i,w,v);return d==="equidistantPreserveStart"?dSe(w,j,S,a,o):(d==="preserveStart"||d==="preserveStartEnd"?y=gSe(w,j,S,a,o,d==="preserveStartEnd"):y=mSe(w,j,S,a,o),y.filter(function(O){return O.isShow}))}var ySe=["viewBox"],vSe=["viewBox"],xSe=["ticks"];function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vh.apply(this,arguments)}function WU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WU(Object(r),!0).forEach(function(n){pj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function TT(t,e){if(t==null)return{};var r=bSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BQ(n.key),n)}}function SSe(t,e,r){return e&&KU(t.prototype,e),r&&KU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Se(t,e,r){return e=zb(e),TSe(t,LQ()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function TSe(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NSe(t)}function NSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LQ=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function ASe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZA(t,e)}function ZA(t,e){return ZA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ZA(t,e)}function pj(t,e,r){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BQ(t){var e=ESe(t,"string");return vf(e)=="symbol"?e:e+""}function ESe(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zf=(function(t){function e(r){var n;return wSe(this,e),n=_Se(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return ASe(e,t),SSe(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=TT(n,ySe),c=this.props,d=c.viewBox,h=TT(c,vSe);return!Eh(i,d)||!Eh(o,h)||!Eh(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,y=a.tickMargin,v,_,S,w,j,O,R=m?-1:1,L=n.tickSize||p,C=vt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":v=_=n.coordinate,w=o+ +!m*d,S=w-R*L,O=S-R*y,j=C;break;case"left":S=w=n.coordinate,_=i+ +!m*c,v=_-R*L,j=v-R*y,O=C;break;case"right":S=w=n.coordinate,_=i+ +m*c,v=_+R*L,j=v+R*y,O=C;break;default:v=_=n.coordinate,w=o+ +m*d,S=w+R*L,O=S+R*y,j=C;break}return{line:{x1:v,y1:S,x2:_,y2:w},tick:{x:j,y:O}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Ma(Ma(Ma({},Vt(this.props,!1)),Vt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=Ma(Ma({},m),{},{x1:a,y1:i+y*c,x2:a+o,y2:i+y*c})}else{var v=+(d==="left"&&!h||d==="right"&&h);m=Ma(Ma({},m),{},{x1:a+v*o,y1:i,x2:a+v*o,y2:i+c})}return se.createElement("line",vh({},m,{className:pr("recharts-cartesian-axis-line",Js(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,y=c.unit,v=fj(Ma(Ma({},this.props),{},{ticks:n}),a,i),_=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=Vt(this.props,!1),j=Vt(p,!1),O=Ma(Ma({},w),{},{fill:"none"},Vt(d,!1)),R=v.map(function(L,C){var P=o.getTickLineCoord(L),E=P.line,N=P.tick,k=Ma(Ma(Ma(Ma({textAnchor:_,verticalAnchor:S},w),{},{stroke:"none",fill:h},j),N),{},{index:C,payload:L,visibleTicksCount:v.length,tickFormatter:m});return se.createElement(qr,vh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},a0(o.props,L,C)),d&&se.createElement("line",vh({},O,E,{className:pr("recharts-cartesian-axis-tick-line",Js(d,"className"))})),p&&e.renderTickItem(p,k,"".concat(nr(m)?m(L.value,C):L.value).concat(y||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},R)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,y=m.ticks,v=TT(m,xSe),_=y;return nr(d)&&(_=y&&y.length>0?d(this.props):d(v)),o<=0||c<=0||!_||!_.length?null:se.createElement(qr,{className:pr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(_,this.state.fontSize,this.state.letterSpacing),di.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,c=pr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?o=se.cloneElement(n,Ma(Ma({},a),{},{className:c})):nr(n)?o=n(Ma(Ma({},a),{},{className:c})):o=se.createElement(rf,vh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(A.Component);pj(zf,"displayName","CartesianAxis");pj(zf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jSe=["x1","y1","x2","y2","key"],kSe=["offset"];function o0(t){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o0(t)}function QU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(r),!0).forEach(function(n){CSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CSe(t,e,r){return e=OSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OSe(t){var e=ISe(t,"string");return o0(e)=="symbol"?e:e+""}function ISe(t,e){if(o0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(o0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rd.apply(this,arguments)}function XU(t,e){if(t==null)return{};var r=RSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function RSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var MSe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,o=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:o,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function $Q(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(nr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,o=e.y2,c=e.key,d=XU(e,jSe),h=Vt(d,!1);h.offset;var p=XU(h,kSe);r=se.createElement("line",Rd({},p,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:c}))}return r}function PSe(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=_i(_i({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return $Q(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function DSe(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(c,d){var h=_i(_i({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return $Q(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function LSe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,o=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,v){return y-v});a!==p[0]&&p.unshift(0);var m=p.map(function(y,v){var _=!p[v+1],S=_?a+o-y:p[v+1]-y;if(S<=0)return null;var w=v%e.length;return se.createElement("rect",{key:"react-".concat(v),y,x:n,height:S,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function BSe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,o=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+i-i)}).sort(function(y,v){return y-v});i!==p[0]&&p.unshift(0);var m=p.map(function(y,v){var _=!p[v+1],S=_?i+c-y:p[v+1]-y;if(S<=0)return null;var w=v%n.length;return se.createElement("rect",{key:"react-".concat(v),x:y,y:o,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var $Se=function(e,r){var n=e.xAxis,a=e.width,i=e.height,o=e.offset;return $K(fj(_i(_i(_i({},zf.defaultProps),n),{},{ticks:Gl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},USe=function(e,r){var n=e.yAxis,a=e.width,i=e.height,o=e.offset;return $K(fj(_i(_i(_i({},zf.defaultProps),n),{},{ticks:Gl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},oh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function UQ(t){var e,r,n,a,i,o,c=cj(),d=uj(),h=E3e(),p=_i(_i({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:oh.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:oh.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:oh.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:oh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:oh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:oh.verticalFill,x:vt(t.x)?t.x:h.left,y:vt(t.y)?t.y:h.top,width:vt(t.width)?t.width:h.width,height:vt(t.height)?t.height:h.height}),m=p.x,y=p.y,v=p.width,_=p.height,S=p.syncWithTicks,w=p.horizontalValues,j=p.verticalValues,O=T3e(),R=N3e();if(!vt(v)||v<=0||!vt(_)||_<=0||!vt(m)||m!==+m||!vt(y)||y!==+y)return null;var L=p.verticalCoordinatesGenerator||$Se,C=p.horizontalCoordinatesGenerator||USe,P=p.horizontalPoints,E=p.verticalPoints;if((!P||!P.length)&&nr(C)){var N=w&&w.length,k=C({yAxis:R?_i(_i({},R),{},{ticks:N?w:R.ticks}):void 0,width:c,height:d,offset:h},N?!0:S);Yl(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(o0(k),"]")),Array.isArray(k)&&(P=k)}if((!E||!E.length)&&nr(L)){var z=j&&j.length,D=L({xAxis:O?_i(_i({},O),{},{ticks:z?j:O.ticks}):void 0,width:c,height:d,offset:h},z?!0:S);Yl(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(o0(D),"]")),Array.isArray(D)&&(E=D)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(MSe,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),se.createElement(PSe,Rd({},p,{offset:h,horizontalPoints:P,xAxis:O,yAxis:R})),se.createElement(DSe,Rd({},p,{offset:h,verticalPoints:E,xAxis:O,yAxis:R})),se.createElement(LSe,Rd({},p,{horizontalPoints:P})),se.createElement(BSe,Rd({},p,{verticalPoints:E})))}UQ.displayName="CartesianGrid";function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function zSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FQ(n.key),n)}}function FSe(t,e,r){return e&&VSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qSe(t,e,r){return e=Vb(e),HSe(t,zQ()?Reflect.construct(e,r||[],Vb(t).constructor):e.apply(t,r))}function HSe(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GSe(t)}function GSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zQ=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(t)}function WSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JA(t,e)}function JA(t,e){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JA(t,e)}function VQ(t,e,r){return e=FQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FQ(t){var e=KSe(t,"string");return xf(e)=="symbol"?e:e+""}function KSe(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ww=(function(t){function e(){return zSe(this,e),qSe(this,e,arguments)}return WSe(e,t),FSe(e,[{key:"render",value:function(){return null}}])})(A.Component);VQ(ww,"displayName","ZAxis");VQ(ww,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var QSe=["option","isActive"];function jm(){return jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jm.apply(this,arguments)}function XSe(t,e){if(t==null)return{};var r=YSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ZSe(t){var e=t.option,r=t.isActive,n=XSe(t,QSe);return typeof e=="string"?A.createElement(zA,jm({option:A.createElement(X2,jm({type:e},n)),isActive:r,shapeType:"symbols"},n)):A.createElement(zA,jm({option:e,isActive:r,shapeType:"symbols"},n))}function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function km(){return km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},km.apply(this,arguments)}function YU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(r),!0).forEach(function(n){pu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HQ(n.key),n)}}function e6e(t,e,r){return e&&ZU(t.prototype,e),r&&ZU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function t6e(t,e,r){return e=Fb(e),r6e(t,qQ()?Reflect.construct(e,r||[],Fb(t).constructor):e.apply(t,r))}function r6e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n6e(t)}function n6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qQ=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(t)}function a6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e8(t,e)}function e8(t,e){return e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},e8(t,e)}function pu(t,e,r){return e=HQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HQ(t){var e=i6e(t,"string");return bf(e)=="symbol"?e:e+""}function i6e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var j1=(function(t){function e(){var r;JSe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=t6e(this,e,[].concat(a)),pu(r,"state",{isAnimationFinished:!1}),pu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),pu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),pu(r,"id",g1("recharts-scatter-")),r}return a6e(e,t),e6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,o=i.shape,c=i.activeShape,d=i.activeIndex,h=Vt(this.props,!1);return n.map(function(p,m){var y=d===m,v=y?c:o,_=Ws(Ws({},h),p);return se.createElement(qr,km({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},a0(a.props,p,m),{role:"img"}),se.createElement(ZSe,km({option:v,isActive:y,key:"symbol-".concat(m)},_)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(rl,{begin:c,duration:d,isActive:o,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,_=i.map(function(S,w){var j=m&&m[w];if(j){var O=Zi(j.cx,S.cx),R=Zi(j.cy,S.cy),L=Zi(j.size,S.size);return Ws(Ws({},S),{},{cx:O(v),cy:R(v),size:L(v)})}var C=Zi(0,S.size);return Ws(Ws({},S),{},{size:C(v)})});return se.createElement(qr,null,n.renderSymbolsStatically(_))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,o=this.state.prevPoints;return i&&a&&a.length&&(!o||!S1(o,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,c=a.yAxis,d=a.children,h=ks(d,_1);return h?h.map(function(p,m){var y=p.props,v=y.direction,_=y.dataKey;return se.cloneElement(p,{key:"".concat(v,"-").concat(_,"-").concat(i[m]),data:i,xAxis:o,yAxis:c,layout:v==="x"?"vertical":"horizontal",dataPointFormatter:function(w,j){return{x:w.cx,y:w.cy,value:v==="x"?+w.node.x:+w.node.y,errorVal:pi(w,j)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,o=n.lineType,c=n.lineJointType,d=Vt(this.props,!1),h=Vt(i,!1),p,m;if(o==="joint")p=a.map(function(R){return{x:R.cx,y:R.cy}});else if(o==="fitting"){var y=rhe(a),v=y.xmin,_=y.xmax,S=y.a,w=y.b,j=function(L){return S*L+w};p=[{x:v,y:j(v)},{x:_,y:j(_)}]}var O=Ws(Ws(Ws({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return se.isValidElement(i)?m=se.cloneElement(i,O):nr(i)?m=i(O):m=se.createElement(AA,km({},O,{type:c})),se.createElement(qr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,o=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,v=n.height,_=n.id,S=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=pr("recharts-scatter",c),O=d&&d.allowDataOverflow,R=h&&h.allowDataOverflow,L=O||R,C=ur(_)?this.id:_;return se.createElement(qr,{className:j,clipPath:L?"url(#clipPath-".concat(C,")"):null},O||R?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(C)},se.createElement("rect",{x:O?p:p-y/2,y:R?m:m-v/2,width:O?y:y*2,height:R?v:v*2}))):null,o&&this.renderLine(),this.renderErrorBar(),se.createElement(qr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&Jl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(A.PureComponent);pu(j1,"displayName","Scatter");pu(j1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!y0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});pu(j1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=ks(a.props.children,RE),m=ur(e.dataKey)?a.props.dataKey:e.dataKey,y=ur(r.dataKey)?a.props.dataKey:r.dataKey,v=n&&n.dataKey,_=n?n.range:ww.defaultProps.range,S=_&&_[0],w=e.scale.bandwidth?e.scale.bandwidth():0,j=r.scale.bandwidth?r.scale.bandwidth():0,O=i.map(function(R,L){var C=pi(R,m),P=pi(R,y),E=!ur(v)&&pi(R,v)||"-",N=[{name:ur(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:C,payload:R,dataKey:m,type:h},{name:ur(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:P,payload:R,dataKey:y,type:h}];E!=="-"&&N.push({name:n.name||n.dataKey,unit:n.unit||"",value:E,payload:R,dataKey:v,type:h});var k=t$({axis:e,ticks:o,bandSize:w,entry:R,index:L,dataKey:m}),z=t$({axis:r,ticks:c,bandSize:j,entry:R,index:L,dataKey:y}),D=E!=="-"?n.scale(E):S,B=Math.sqrt(Math.max(D,0)/Math.PI);return Ws(Ws({},R),{},{cx:k,cy:z,x:k-B,y:z-B,xAxis:e,yAxis:r,zAxis:n,width:2*B,height:2*B,size:D,node:{x:C,y:P,z:E},tooltipPayload:N,tooltipPosition:{x:k,y:z},payload:R},p&&p[L]&&p[L].props)});return Ws({points:O},d)});function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function s6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KQ(n.key),n)}}function l6e(t,e,r){return e&&o6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c6e(t,e,r){return e=qb(e),u6e(t,GQ()?Reflect.construct(e,r||[],qb(t).constructor):e.apply(t,r))}function u6e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d6e(t)}function d6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GQ=function(){return!!t})()}function qb(t){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(t)}function h6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&t8(t,e)}function t8(t,e){return t8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},t8(t,e)}function WQ(t,e,r){return e=KQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KQ(t){var e=f6e(t,"string");return wf(e)=="symbol"?e:e+""}function f6e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function r8(){return r8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r8.apply(this,arguments)}function p6e(t){var e=t.xAxisId,r=cj(),n=uj(),a=jQ(e);return a==null?null:A.createElement(zf,r8({},a,{className:pr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Gl(o,!0)}}))}var Sw=(function(t){function e(){return s6e(this,e),c6e(this,e,arguments)}return h6e(e,t),l6e(e,[{key:"render",value:function(){return A.createElement(p6e,this.props)}}])})(A.Component);WQ(Sw,"displayName","XAxis");WQ(Sw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function m6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YQ(n.key),n)}}function y6e(t,e,r){return e&&g6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v6e(t,e,r){return e=Hb(e),x6e(t,QQ()?Reflect.construct(e,r||[],Hb(t).constructor):e.apply(t,r))}function x6e(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b6e(t)}function b6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QQ=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(t)}function w6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n8(t,e)}function n8(t,e){return n8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},n8(t,e)}function XQ(t,e,r){return e=YQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YQ(t){var e=S6e(t,"string");return Sf(e)=="symbol"?e:e+""}function S6e(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function a8(){return a8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a8.apply(this,arguments)}var _6e=function(e){var r=e.yAxisId,n=cj(),a=uj(),i=kQ(r);return i==null?null:A.createElement(zf,a8({},i,{className:pr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Gl(c,!0)}}))},_w=(function(t){function e(){return m6e(this,e),v6e(this,e,arguments)}return w6e(e,t),y6e(e,[{key:"render",value:function(){return A.createElement(_6e,this.props)}}])})(A.Component);XQ(_w,"displayName","YAxis");XQ(_w,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JU(t){return E6e(t)||A6e(t)||N6e(t)||T6e()}function T6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N6e(t,e){if(t){if(typeof t=="string")return i8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i8(t,e)}}function A6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E6e(t){if(Array.isArray(t))return i8(t)}function i8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s8=function(e,r,n,a,i){var o=ks(e,hj),c=ks(e,vw),d=[].concat(JU(o),JU(c)),h=ks(e,bw),p="".concat(a,"Id"),m=a[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[p]===n&&Qo(w.props,"extendDomain")&&vt(w.props[m])){var j=w.props[m];return[Math.min(S[0],j),Math.max(S[1],j)]}return S},y)),h.length){var v="".concat(m,"1"),_="".concat(m,"2");y=h.reduce(function(S,w){if(w.props[p]===n&&Qo(w.props,"extendDomain")&&vt(w.props[v])&&vt(w.props[_])){var j=w.props[v],O=w.props[_];return[Math.min(S[0],j,O),Math.max(S[1],j,O)]}return S},y)}return i&&i.length&&(y=i.reduce(function(S,w){return vt(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},NT={exports:{}},ez;function j6e(){return ez||(ez=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,m||d,y),_=r?r+h:h;return d._events[_]?d._events[_].fn?d._events[_]=[d._events[_],v]:d._events[_].push(v):(d._events[_]=v,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,v=m.length,_=new Array(v);y<v;y++)_[y]=m[y].fn;return _},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,y,v,_){var S=r?r+h:h;if(!this._events[S])return!1;var w=this._events[S],j=arguments.length,O,R;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,v),!0;case 6:return w.fn.call(w.context,p,m,y,v,_),!0}for(R=1,O=new Array(j-1);R<j;R++)O[R-1]=arguments[R];w.fn.apply(w.context,O)}else{var L=w.length,C;for(R=0;R<L;R++)switch(w[R].once&&this.removeListener(h,w[R].fn,void 0,!0),j){case 1:w[R].fn.call(w[R].context);break;case 2:w[R].fn.call(w[R].context,p);break;case 3:w[R].fn.call(w[R].context,p,m);break;case 4:w[R].fn.call(w[R].context,p,m,y);break;default:if(!O)for(C=1,O=new Array(j-1);C<j;C++)O[C-1]=arguments[C];w[R].fn.apply(w[R].context,O)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,y){var v=r?r+h:h;if(!this._events[v])return this;if(!p)return o(this,v),this;var _=this._events[v];if(_.fn)_.fn===p&&(!y||_.once)&&(!m||_.context===m)&&o(this,v);else{for(var S=0,w=[],j=_.length;S<j;S++)(_[S].fn!==p||y&&!_[S].once||m&&_[S].context!==m)&&w.push(_[S]);w.length?this._events[v]=w.length===1?w[0]:w:o(this,v)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(NT)),NT.exports}var k6e=j6e();const C6e=Xr(k6e);var AT=new C6e,ET="recharts.syncMouseEvents";function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function O6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZQ(n.key),n)}}function R6e(t,e,r){return e&&I6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jT(t,e,r){return e=ZQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZQ(t){var e=M6e(t,"string");return $g(e)=="symbol"?e:e+""}function M6e(t,e){if($g(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($g(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var P6e=(function(){function t(){O6e(this,t),jT(this,"activeIndex",0),jT(this,"coordinateList",[]),jT(this,"layout","horizontal")}return R6e(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,c=o===void 0?null:o,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,v=y===void 0?null:y;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,y=o+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function D6e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&vt(n)&&vt(a))return!0}return!1}function L6e(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function JQ(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,o=_n(e,r,n,a),c=_n(e,r,n,i);return{points:[o,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function B6e(t,e,r){var n,a,i,o;if(t==="horizontal")n=e.x,i=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=_n(c,d,h,m),v=_n(c,d,p,m);n=y.x,a=y.y,i=v.x,o=v.y}else return JQ(e);return[{x:n,y:a},{x:i,y:o}]}function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ov(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(r),!0).forEach(function(n){$6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $6e(t,e,r){return e=U6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U6e(t){var e=z6e(t,"string");return Ug(e)=="symbol"?e:e+""}function z6e(t,e){if(Ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V6e(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,v=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!v||!i||!o||y!=="ScatterChart"&&a!=="axis")return null;var _,S=AA;if(y==="ScatterChart")_=o,S=Uwe;else if(y==="BarChart")_=L6e(m,o,d,p),S=ij;else if(m==="radial"){var w=JQ(o),j=w.cx,O=w.cy,R=w.radius,L=w.startAngle,C=w.endAngle;_={cx:j,cy:O,startAngle:L,endAngle:C,innerRadius:R,outerRadius:R},S=XK}else _={points:B6e(m,o,d)},S=AA;var P=Ov(Ov(Ov(Ov({stroke:"#ccc",pointerEvents:"none"},d),_),Vt(v,!1)),{},{payload:c,payloadIndex:h,className:pr("recharts-tooltip-cursor",v.className)});return A.isValidElement(v)?A.cloneElement(v,P):A.createElement(S,P)}var F6e=["item"],q6e=["children","className","width","height","style","compact","title","desc"];function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xh.apply(this,arguments)}function rz(t,e){return W6e(t)||G6e(t,e)||tX(t,e)||H6e()}function H6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G6e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw a}}return c}}function W6e(t){if(Array.isArray(t))return t}function nz(t,e){if(t==null)return{};var r=K6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function K6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Q6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rX(n.key),n)}}function Y6e(t,e,r){return e&&X6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z6e(t,e,r){return e=Gb(e),J6e(t,eX()?Reflect.construct(e,r||[],Gb(t).constructor):e.apply(t,r))}function J6e(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e_e(t)}function e_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eX=function(){return!!t})()}function Gb(t){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(t)}function t_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o8(t,e)}function o8(t,e){return o8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},o8(t,e)}function Tf(t){return a_e(t)||n_e(t)||tX(t)||r_e()}function r_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tX(t,e){if(t){if(typeof t=="string")return l8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l8(t,e)}}function n_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a_e(t){if(Array.isArray(t))return l8(t)}function l8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?az(Object(r),!0).forEach(function(n){Kt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kt(t,e,r){return e=rX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rX(t){var e=i_e(t,"string");return _f(e)=="symbol"?e:e+""}function i_e(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s_e={xAxis:["bottom","top"],yAxis:["left","right"]},o_e={width:"100%",height:"100%"},nX={x:0,y:0};function Iv(t){return t}var l_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},c_e=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,c=a.radius;return He(He(He({},a),_n(a.cx,a.cy,c,o)),{},{angle:o,radius:c})}var d=i.coordinate,h=a.angle;return He(He(He({},a),_n(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return nX},Tw=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(Tf(c),Tf(h)):c},[]);return o.length>0?o:e&&e.length&&vt(a)&&vt(i)?e.slice(a,i+1):[]};function aX(t){return t==="number"?[0,"auto"]:void 0}var c8=function(e,r,n,a){var i=e.graphicalItems,o=e.tooltipAxis,c=Tw(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(o.dataKey&&!o.allowDuplicatedCategory){var v=m===void 0?c:m;y=Gx(v,o.dataKey,a)}else y=m&&m[n]||c[n];return y?[].concat(Tf(d),[qK(h,y)]):d},[])},iz=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},o=l_e(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=lxe(o,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=c8(e,r,p,m),v=c_e(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:v}}return null},u_e=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,v=BK(p,i);return n.reduce(function(_,S){var w,j=S.type.defaultProps!==void 0?He(He({},S.type.defaultProps),S.props):S.props,O=j.type,R=j.dataKey,L=j.allowDataOverflow,C=j.allowDuplicatedCategory,P=j.scale,E=j.ticks,N=j.includeHidden,k=j[o];if(_[k])return _;var z=Tw(e.data,{graphicalItems:a.filter(function(ne){var ae,xe=o in ne.props?ne.props[o]:(ae=ne.type.defaultProps)===null||ae===void 0?void 0:ae[o];return xe===k}),dataStartIndex:d,dataEndIndex:h}),D=z.length,B,$,K;D6e(j.domain,L,O)&&(B=wA(j.domain,null,L),v&&(O==="number"||P!=="auto")&&(K=Tm(z,R,"category")));var W=aX(O);if(!B||B.length===0){var H,J=(H=j.domain)!==null&&H!==void 0?H:W;if(R){if(B=Tm(z,R,O),O==="category"&&v){var ie=the(B);C&&ie?($=B,B=Ib(0,D)):C||(B=i$(J,B,S).reduce(function(ne,ae){return ne.indexOf(ae)>=0?ne:[].concat(Tf(ne),[ae])},[]))}else if(O==="category")C?B=B.filter(function(ne){return ne!==""&&!ur(ne)}):B=i$(J,B,S).reduce(function(ne,ae){return ne.indexOf(ae)>=0||ae===""||ur(ae)?ne:[].concat(Tf(ne),[ae])},[]);else if(O==="number"){var he=fxe(z,a.filter(function(ne){var ae,xe,Oe=o in ne.props?ne.props[o]:(ae=ne.type.defaultProps)===null||ae===void 0?void 0:ae[o],Ue="hide"in ne.props?ne.props.hide:(xe=ne.type.defaultProps)===null||xe===void 0?void 0:xe.hide;return Oe===k&&(N||!Ue)}),R,i,p);he&&(B=he)}v&&(O==="number"||P!=="auto")&&(K=Tm(z,R,"category"))}else v?B=Ib(0,D):c&&c[k]&&c[k].hasStack&&O==="number"?B=y==="expand"?[0,1]:FK(c[k].stackGroups,d,h):B=LK(z,a.filter(function(ne){var ae=o in ne.props?ne.props[o]:ne.type.defaultProps[o],xe="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return ae===k&&(N||!xe)}),O,p,!0);if(O==="number")B=s8(m,B,k,i,E),J&&(B=wA(J,B,L));else if(O==="category"&&J){var pe=J,Z=B.every(function(ne){return pe.indexOf(ne)>=0});Z&&(B=pe)}}return He(He({},_),{},Kt({},k,He(He({},j),{},{axisType:i,domain:B,categoricalDomain:K,duplicateDomain:$,originalDomain:(w=j.domain)!==null&&w!==void 0?w:W,isCategorical:v,layout:p})))},{})},d_e=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=Tw(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),v=y.length,_=BK(p,i),S=-1;return n.reduce(function(w,j){var O=j.type.defaultProps!==void 0?He(He({},j.type.defaultProps),j.props):j.props,R=O[o],L=aX("number");if(!w[R]){S++;var C;return _?C=Ib(0,v):c&&c[R]&&c[R].hasStack?(C=FK(c[R].stackGroups,d,h),C=s8(m,C,R,i)):(C=wA(L,LK(y,n.filter(function(P){var E,N,k=o in P.props?P.props[o]:(E=P.type.defaultProps)===null||E===void 0?void 0:E[o],z="hide"in P.props?P.props.hide:(N=P.type.defaultProps)===null||N===void 0?void 0:N.hide;return k===R&&!z}),"number",p),a.defaultProps.allowDataOverflow),C=s8(m,C,R,i)),He(He({},w),{},Kt({},R,He(He({axisType:i},a.defaultProps),{},{hide:!0,orientation:Js(s_e,"".concat(i,".").concat(S%2),null),domain:C,originalDomain:L,isCategorical:_,layout:p})))}return w},{})},h_e=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),y=ks(p,i),v={};return y&&y.length?v=u_e(e,{axes:y,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):o&&o.length&&(v=d_e(e,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),v},f_e=function(e){var r=lu(e),n=Gl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:OE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:vb(r,n)}},sz=function(e){var r=e.children,n=e.defaultShowTooltip,a=Ss(r,ff),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},p_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=Xl(r&&r.type);return n&&n.indexOf("Bar")>=0})},oz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},m_e=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,y=n.margin||{},v=Ss(m,ff),_=Ss(m,jh),S=Object.keys(d).reduce(function(C,P){var E=d[P],N=E.orientation;return!E.mirror&&!E.hide?He(He({},C),{},Kt({},N,C[N]+E.width)):C},{left:y.left||0,right:y.right||0}),w=Object.keys(o).reduce(function(C,P){var E=o[P],N=E.orientation;return!E.mirror&&!E.hide?He(He({},C),{},Kt({},N,Js(C,"".concat(N))+E.height)):C},{top:y.top||0,bottom:y.bottom||0}),j=He(He({},w),S),O=j.bottom;v&&(j.bottom+=v.props.height||ff.defaultProps.height),_&&r&&(j=dxe(j,a,n,r));var R=h-j.left-j.right,L=p-j.top-j.bottom;return He(He({brushBottom:O},j),{},{width:Math.max(R,0),height:Math.max(L,0)})},g_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},iX=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,o=e.validateTooltipEventTypes,c=o===void 0?["axis"]:o,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(j,O){var R=O.graphicalItems,L=O.stackGroups,C=O.offset,P=O.updateId,E=O.dataStartIndex,N=O.dataEndIndex,k=j.barSize,z=j.layout,D=j.barGap,B=j.barCategoryGap,$=j.maxBarSize,K=oz(z),W=K.numericAxisName,H=K.cateAxisName,J=p_e(R),ie=[];return R.forEach(function(he,pe){var Z=Tw(j.data,{graphicalItems:[he],dataStartIndex:E,dataEndIndex:N}),ne=he.type.defaultProps!==void 0?He(He({},he.type.defaultProps),he.props):he.props,ae=ne.dataKey,xe=ne.maxBarSize,Oe=ne["".concat(W,"Id")],Ue=ne["".concat(H,"Id")],Xe={},Ye=d.reduce(function(St,Fe){var ce=O["".concat(Fe.axisType,"Map")],We=ne["".concat(Fe.axisType,"Id")];ce&&ce[We]||Fe.axisType==="zAxis"||s0();var nt=ce[We];return He(He({},St),{},Kt(Kt({},Fe.axisType,nt),"".concat(Fe.axisType,"Ticks"),Gl(nt)))},Xe),Q=Ye[H],me=Ye["".concat(H,"Ticks")],te=L&&L[Oe]&&L[Oe].hasStack&&Sxe(he,L[Oe].stackGroups),re=Xl(he.type).indexOf("Bar")>=0,Pe=vb(Q,me),Ge=[],it=J&&cxe({barSize:k,stackGroups:L,totalSize:g_e(Ye,H)});if(re){var et,Pt,Me=ur(xe)?$:xe,tt=(et=(Pt=vb(Q,me,!0))!==null&&Pt!==void 0?Pt:Me)!==null&&et!==void 0?et:0;Ge=uxe({barGap:D,barCategoryGap:B,bandSize:tt!==Pe?tt:Pe,sizeList:it[Ue],maxBarSize:Me}),tt!==Pe&&(Ge=Ge.map(function(St){return He(He({},St),{},{position:He(He({},St.position),{},{offset:St.position.offset-tt/2})})}))}var bt=he&&he.type&&he.type.getComposedData;bt&&ie.push({props:He(He({},bt(He(He({},Ye),{},{displayedData:Z,props:j,dataKey:ae,item:he,bandSize:Pe,barPosition:Ge,offset:C,stackedData:te,layout:z,dataStartIndex:E,dataEndIndex:N}))),{},Kt(Kt(Kt({key:he.key||"item-".concat(pe)},W,Ye[W]),H,Ye[H]),"animationId",P)),childIndex:phe(he,j.children),item:he})}),ie},v=function(j,O){var R=j.props,L=j.dataStartIndex,C=j.dataEndIndex,P=j.updateId;if(!xP({props:R}))return null;var E=R.children,N=R.layout,k=R.stackOffset,z=R.data,D=R.reverseStackOrder,B=oz(N),$=B.numericAxisName,K=B.cateAxisName,W=ks(E,n),H=bxe(z,W,"".concat($,"Id"),"".concat(K,"Id"),k,D),J=d.reduce(function(ne,ae){var xe="".concat(ae.axisType,"Map");return He(He({},ne),{},Kt({},xe,h_e(R,He(He({},ae),{},{graphicalItems:W,stackGroups:ae.axisType===$&&H,dataStartIndex:L,dataEndIndex:C}))))},{}),ie=m_e(He(He({},J),{},{props:R,graphicalItems:W}),O==null?void 0:O.legendBBox);Object.keys(J).forEach(function(ne){J[ne]=p(R,J[ne],ie,ne.replace("Map",""),r)});var he=J["".concat(K,"Map")],pe=f_e(he),Z=y(R,He(He({},J),{},{dataStartIndex:L,dataEndIndex:C,updateId:P,graphicalItems:W,stackGroups:H,offset:ie}));return He(He({formattedGraphicalItems:Z,graphicalItems:W,offset:ie,stackGroups:H},pe),J)},_=(function(w){function j(O){var R,L,C;return Q6e(this,j),C=Z6e(this,j,[O]),Kt(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kt(C,"accessibilityManager",new P6e),Kt(C,"handleLegendBBoxUpdate",function(P){if(P){var E=C.state,N=E.dataStartIndex,k=E.dataEndIndex,z=E.updateId;C.setState(He({legendBBox:P},v({props:C.props,dataStartIndex:N,dataEndIndex:k,updateId:z},He(He({},C.state),{},{legendBBox:P}))))}}),Kt(C,"handleReceiveSyncEvent",function(P,E,N){if(C.props.syncId===P){if(N===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(E)}}),Kt(C,"handleBrushChange",function(P){var E=P.startIndex,N=P.endIndex;if(E!==C.state.dataStartIndex||N!==C.state.dataEndIndex){var k=C.state.updateId;C.setState(function(){return He({dataStartIndex:E,dataEndIndex:N},v({props:C.props,dataStartIndex:E,dataEndIndex:N,updateId:k},C.state))}),C.triggerSyncEvent({dataStartIndex:E,dataEndIndex:N})}}),Kt(C,"handleMouseEnter",function(P){var E=C.getMouseInfo(P);if(E){var N=He(He({},E),{},{isTooltipActive:!0});C.setState(N),C.triggerSyncEvent(N);var k=C.props.onMouseEnter;nr(k)&&k(N,P)}}),Kt(C,"triggeredAfterMouseMove",function(P){var E=C.getMouseInfo(P),N=E?He(He({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(N),C.triggerSyncEvent(N);var k=C.props.onMouseMove;nr(k)&&k(N,P)}),Kt(C,"handleItemMouseEnter",function(P){C.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Kt(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Kt(C,"handleMouseMove",function(P){P.persist(),C.throttleTriggeredAfterMouseMove(P)}),Kt(C,"handleMouseLeave",function(P){C.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};C.setState(E),C.triggerSyncEvent(E);var N=C.props.onMouseLeave;nr(N)&&N(E,P)}),Kt(C,"handleOuterEvent",function(P){var E=fhe(P),N=Js(C.props,"".concat(E));if(E&&nr(N)){var k,z;/.*touch.*/i.test(E)?z=C.getMouseInfo(P.changedTouches[0]):z=C.getMouseInfo(P),N((k=z)!==null&&k!==void 0?k:{},P)}}),Kt(C,"handleClick",function(P){var E=C.getMouseInfo(P);if(E){var N=He(He({},E),{},{isTooltipActive:!0});C.setState(N),C.triggerSyncEvent(N);var k=C.props.onClick;nr(k)&&k(N,P)}}),Kt(C,"handleMouseDown",function(P){var E=C.props.onMouseDown;if(nr(E)){var N=C.getMouseInfo(P);E(N,P)}}),Kt(C,"handleMouseUp",function(P){var E=C.props.onMouseUp;if(nr(E)){var N=C.getMouseInfo(P);E(N,P)}}),Kt(C,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Kt(C,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseDown(P.changedTouches[0])}),Kt(C,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseUp(P.changedTouches[0])}),Kt(C,"handleDoubleClick",function(P){var E=C.props.onDoubleClick;if(nr(E)){var N=C.getMouseInfo(P);E(N,P)}}),Kt(C,"handleContextMenu",function(P){var E=C.props.onContextMenu;if(nr(E)){var N=C.getMouseInfo(P);E(N,P)}}),Kt(C,"triggerSyncEvent",function(P){C.props.syncId!==void 0&&AT.emit(ET,C.props.syncId,P,C.eventEmitterSymbol)}),Kt(C,"applySyncEvent",function(P){var E=C.props,N=E.layout,k=E.syncMethod,z=C.state.updateId,D=P.dataStartIndex,B=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)C.setState(He({dataStartIndex:D,dataEndIndex:B},v({props:C.props,dataStartIndex:D,dataEndIndex:B,updateId:z},C.state)));else if(P.activeTooltipIndex!==void 0){var $=P.chartX,K=P.chartY,W=P.activeTooltipIndex,H=C.state,J=H.offset,ie=H.tooltipTicks;if(!J)return;if(typeof k=="function")W=k(ie,P);else if(k==="value"){W=-1;for(var he=0;he<ie.length;he++)if(ie[he].value===P.activeLabel){W=he;break}}var pe=He(He({},J),{},{x:J.left,y:J.top}),Z=Math.min($,pe.x+pe.width),ne=Math.min(K,pe.y+pe.height),ae=ie[W]&&ie[W].value,xe=c8(C.state,C.props.data,W),Oe=ie[W]?{x:N==="horizontal"?ie[W].coordinate:Z,y:N==="horizontal"?ne:ie[W].coordinate}:nX;C.setState(He(He({},P),{},{activeLabel:ae,activeCoordinate:Oe,activePayload:xe,activeTooltipIndex:W}))}else C.setState(P)}),Kt(C,"renderCursor",function(P){var E,N=C.state,k=N.isTooltipActive,z=N.activeCoordinate,D=N.activePayload,B=N.offset,$=N.activeTooltipIndex,K=N.tooltipAxisBandSize,W=C.getTooltipEventType(),H=(E=P.props.active)!==null&&E!==void 0?E:k,J=C.props.layout,ie=P.key||"_recharts-cursor";return se.createElement(V6e,{key:ie,activeCoordinate:z,activePayload:D,activeTooltipIndex:$,chartName:r,element:P,isActive:H,layout:J,offset:B,tooltipAxisBandSize:K,tooltipEventType:W})}),Kt(C,"renderPolarAxis",function(P,E,N){var k=Js(P,"type.axisType"),z=Js(C.state,"".concat(k,"Map")),D=P.type.defaultProps,B=D!==void 0?He(He({},D),P.props):P.props,$=z&&z[B["".concat(k,"Id")]];return A.cloneElement(P,He(He({},$),{},{className:pr(k,$.className),key:P.key||"".concat(E,"-").concat(N),ticks:Gl($,!0)}))}),Kt(C,"renderPolarGrid",function(P){var E=P.props,N=E.radialLines,k=E.polarAngles,z=E.polarRadius,D=C.state,B=D.radiusAxisMap,$=D.angleAxisMap,K=lu(B),W=lu($),H=W.cx,J=W.cy,ie=W.innerRadius,he=W.outerRadius;return A.cloneElement(P,{polarAngles:Array.isArray(k)?k:Gl(W,!0).map(function(pe){return pe.coordinate}),polarRadius:Array.isArray(z)?z:Gl(K,!0).map(function(pe){return pe.coordinate}),cx:H,cy:J,innerRadius:ie,outerRadius:he,key:P.key||"polar-grid",radialLines:N})}),Kt(C,"renderLegend",function(){var P=C.state.formattedGraphicalItems,E=C.props,N=E.children,k=E.width,z=E.height,D=C.props.margin||{},B=k-(D.left||0)-(D.right||0),$=PK({children:N,formattedGraphicalItems:P,legendWidth:B,legendContent:h});if(!$)return null;var K=$.item,W=nz($,F6e);return A.cloneElement(K,He(He({},W),{},{chartWidth:k,chartHeight:z,margin:D,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Kt(C,"renderTooltip",function(){var P,E=C.props,N=E.children,k=E.accessibilityLayer,z=Ss(N,Bo);if(!z)return null;var D=C.state,B=D.isTooltipActive,$=D.activeCoordinate,K=D.activePayload,W=D.activeLabel,H=D.offset,J=(P=z.props.active)!==null&&P!==void 0?P:B;return A.cloneElement(z,{viewBox:He(He({},H),{},{x:H.left,y:H.top}),active:J,label:W,payload:J?K:[],coordinate:$,accessibilityLayer:k})}),Kt(C,"renderBrush",function(P){var E=C.props,N=E.margin,k=E.data,z=C.state,D=z.offset,B=z.dataStartIndex,$=z.dataEndIndex,K=z.updateId;return A.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Ev(C.handleBrushChange,P.props.onChange),data:k,x:vt(P.props.x)?P.props.x:D.left,y:vt(P.props.y)?P.props.y:D.top+D.height+D.brushBottom-(N.bottom||0),width:vt(P.props.width)?P.props.width:D.width,startIndex:B,endIndex:$,updateId:"brush-".concat(K)})}),Kt(C,"renderReferenceElement",function(P,E,N){if(!P)return null;var k=C,z=k.clipPathId,D=C.state,B=D.xAxisMap,$=D.yAxisMap,K=D.offset,W=P.type.defaultProps||{},H=P.props,J=H.xAxisId,ie=J===void 0?W.xAxisId:J,he=H.yAxisId,pe=he===void 0?W.yAxisId:he;return A.cloneElement(P,{key:P.key||"".concat(E,"-").concat(N),xAxis:B[ie],yAxis:$[pe],viewBox:{x:K.left,y:K.top,width:K.width,height:K.height},clipPathId:z})}),Kt(C,"renderActivePoints",function(P){var E=P.item,N=P.activePoint,k=P.basePoint,z=P.childIndex,D=P.isRange,B=[],$=E.props.key,K=E.item.type.defaultProps!==void 0?He(He({},E.item.type.defaultProps),E.item.props):E.item.props,W=K.activeDot,H=K.dataKey,J=He(He({index:z,dataKey:H,cx:N.x,cy:N.y,r:4,fill:aj(E.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},Vt(W,!1)),Wx(W));return B.push(j.renderActiveDot(W,J,"".concat($,"-activePoint-").concat(z))),k?B.push(j.renderActiveDot(W,He(He({},J),{},{cx:k.x,cy:k.y}),"".concat($,"-basePoint-").concat(z))):D&&B.push(null),B}),Kt(C,"renderGraphicChild",function(P,E,N){var k=C.filterFormatItem(P,E,N);if(!k)return null;var z=C.getTooltipEventType(),D=C.state,B=D.isTooltipActive,$=D.tooltipAxis,K=D.activeTooltipIndex,W=D.activeLabel,H=C.props.children,J=Ss(H,Bo),ie=k.props,he=ie.points,pe=ie.isRange,Z=ie.baseLine,ne=k.item.type.defaultProps!==void 0?He(He({},k.item.type.defaultProps),k.item.props):k.item.props,ae=ne.activeDot,xe=ne.hide,Oe=ne.activeBar,Ue=ne.activeShape,Xe=!!(!xe&&B&&J&&(ae||Oe||Ue)),Ye={};z!=="axis"&&J&&J.props.trigger==="click"?Ye={onClick:Ev(C.handleItemMouseEnter,P.props.onClick)}:z!=="axis"&&(Ye={onMouseLeave:Ev(C.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Ev(C.handleItemMouseEnter,P.props.onMouseEnter)});var Q=A.cloneElement(P,He(He({},k.props),Ye));function me(Fe){return typeof $.dataKey=="function"?$.dataKey(Fe.payload):null}if(Xe)if(K>=0){var te,re;if($.dataKey&&!$.allowDuplicatedCategory){var Pe=typeof $.dataKey=="function"?me:"payload.".concat($.dataKey.toString());te=Gx(he,Pe,W),re=pe&&Z&&Gx(Z,Pe,W)}else te=he==null?void 0:he[K],re=pe&&Z&&Z[K];if(Ue||Oe){var Ge=P.props.activeIndex!==void 0?P.props.activeIndex:K;return[A.cloneElement(P,He(He(He({},k.props),Ye),{},{activeIndex:Ge})),null,null]}if(!ur(te))return[Q].concat(Tf(C.renderActivePoints({item:k,activePoint:te,basePoint:re,childIndex:K,isRange:pe})))}else{var it,et=(it=C.getItemByXY(C.state.activeCoordinate))!==null&&it!==void 0?it:{graphicalItem:Q},Pt=et.graphicalItem,Me=Pt.item,tt=Me===void 0?P:Me,bt=Pt.childIndex,St=He(He(He({},k.props),Ye),{},{activeIndex:bt});return[A.cloneElement(tt,St),null,null]}return pe?[Q,null,null]:[Q,null]}),Kt(C,"renderCustomized",function(P,E,N){return A.cloneElement(P,He(He({key:"recharts-customized-".concat(N)},C.props),C.state))}),Kt(C,"renderMap",{CartesianGrid:{handler:Iv,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:Iv},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:Iv},YAxis:{handler:Iv},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((R=O.id)!==null&&R!==void 0?R:g1("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=MW(C.triggeredAfterMouseMove,(L=O.throttleDelay)!==null&&L!==void 0?L:1e3/60),C.state={},C}return t_e(j,w),Y6e(j,[{key:"componentDidMount",value:function(){var R,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var R=this.props,L=R.children,C=R.data,P=R.height,E=R.layout,N=Ss(L,Bo);if(N){var k=N.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var z=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,D=c8(this.state,C,k,z),B=this.state.tooltipTicks[k].coordinate,$=(this.state.offset.top+P)/2,K=E==="horizontal",W=K?{x:B,y:$}:{y:B,x:$},H=this.state.formattedGraphicalItems.find(function(ie){var he=ie.item;return he.type.name==="Scatter"});H&&(W=He(He({},W),H.props.points[k].tooltipPosition),D=H.props.points[k].tooltipPayload);var J={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:z,activePayload:D,activeCoordinate:W};this.setState(J),this.renderCursor(N),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(R,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var C,P;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(R){FN([Ss(R.children,Bo)],[Ss(this.props.children,Bo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=Ss(this.props.children,Bo);if(R&&typeof R.props.shared=="boolean"){var L=R.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(R){if(!this.container)return null;var L=this.container,C=L.getBoundingClientRect(),P=ege(C),E={chartX:Math.round(R.pageX-P.left),chartY:Math.round(R.pageY-P.top)},N=C.width/L.offsetWidth||1,k=this.inRange(E.chartX,E.chartY,N);if(!k)return null;var z=this.state,D=z.xAxisMap,B=z.yAxisMap,$=this.getTooltipEventType(),K=iz(this.state,this.props.data,this.props.layout,k);if($!=="axis"&&D&&B){var W=lu(D).scale,H=lu(B).scale,J=W&&W.invert?W.invert(E.chartX):null,ie=H&&H.invert?H.invert(E.chartY):null;return He(He({},E),{},{xValue:J,yValue:ie},K)}return K?He(He({},E),K):null}},{key:"inRange",value:function(R,L){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,E=R/C,N=L/C;if(P==="horizontal"||P==="vertical"){var k=this.state.offset,z=E>=k.left&&E<=k.left+k.width&&N>=k.top&&N<=k.top+k.height;return z?{x:E,y:N}:null}var D=this.state,B=D.angleAxisMap,$=D.radiusAxisMap;if(B&&$){var K=lu(B);return l$({x:E,y:N},K)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,L=this.getTooltipEventType(),C=Ss(R,Bo),P={};C&&L==="axis"&&(C.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Wx(this.props,this.handleOuterEvent);return He(He({},E),P)}},{key:"addListener",value:function(){AT.on(ET,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){AT.removeListener(ET,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(R,L,C){for(var P=this.state.formattedGraphicalItems,E=0,N=P.length;E<N;E++){var k=P[E];if(k.item===R||k.props.key===R.key||L===Xl(k.item.type)&&C===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var R=this.clipPathId,L=this.state.offset,C=L.left,P=L.top,E=L.height,N=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:R},se.createElement("rect",{x:C,y:P,height:E,width:N})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(L,C){var P=rz(C,2),E=P[0],N=P[1];return He(He({},L),{},Kt({},E,N.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(L,C){var P=rz(C,2),E=P[0],N=P[1];return He(He({},L),{},Kt({},E,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[R])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(R){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[R])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(R){var L=this.state,C=L.formattedGraphicalItems,P=L.activeItem;if(C&&C.length)for(var E=0,N=C.length;E<N;E++){var k=C[E],z=k.props,D=k.item,B=D.type.defaultProps!==void 0?He(He({},D.type.defaultProps),D.props):D.props,$=Xl(D.type);if($==="Bar"){var K=(z.data||[]).find(function(ie){return wwe(R,ie)});if(K)return{graphicalItem:k,payload:K}}else if($==="RadialBar"){var W=(z.data||[]).find(function(ie){return l$(R,ie)});if(W)return{graphicalItem:k,payload:W}}else if(pw(k,P)||mw(k,P)||Mg(k,P)){var H=e5e({graphicalItem:k,activeTooltipItem:P,itemData:B.data}),J=B.activeIndex===void 0?H:B.activeIndex;return{graphicalItem:He(He({},k),{},{childIndex:J}),payload:Mg(k,P)?B.data[H]:k.props.data[H]}}}return null}},{key:"render",value:function(){var R=this;if(!xP(this))return null;var L=this.props,C=L.children,P=L.className,E=L.width,N=L.height,k=L.style,z=L.compact,D=L.title,B=L.desc,$=nz(L,q6e),K=Vt($,!1);if(z)return se.createElement(BU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(HN,xh({},K,{width:E,height:N,title:D,desc:B}),this.renderClipPath(),wP(C,this.renderMap)));if(this.props.accessibilityLayer){var W,H;K.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,K.role=(H=this.props.role)!==null&&H!==void 0?H:"application",K.onKeyDown=function(ie){R.accessibilityManager.keyboardEvent(ie)},K.onFocus=function(){R.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return se.createElement(BU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",xh({className:pr("recharts-wrapper",P),style:He({position:"relative",cursor:"default",width:E,height:N},k)},J,{ref:function(he){R.container=he}}),se.createElement(HN,xh({},K,{width:E,height:N,title:D,desc:B,style:o_e}),this.renderClipPath(),wP(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(A.Component);Kt(_,"displayName",r),Kt(_,"defaultProps",He({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Kt(_,"getDerivedStateFromProps",function(w,j){var O=w.dataKey,R=w.data,L=w.children,C=w.width,P=w.height,E=w.layout,N=w.stackOffset,k=w.margin,z=j.dataStartIndex,D=j.dataEndIndex;if(j.updateId===void 0){var B=sz(w);return He(He(He({},B),{},{updateId:0},v(He(He({props:w},B),{},{updateId:0}),j)),{},{prevDataKey:O,prevData:R,prevWidth:C,prevHeight:P,prevLayout:E,prevStackOffset:N,prevMargin:k,prevChildren:L})}if(O!==j.prevDataKey||R!==j.prevData||C!==j.prevWidth||P!==j.prevHeight||E!==j.prevLayout||N!==j.prevStackOffset||!Eh(k,j.prevMargin)){var $=sz(w),K={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},W=He(He({},iz(j,R,E)),{},{updateId:j.updateId+1}),H=He(He(He({},$),K),W);return He(He(He({},H),v(He({props:w},H),j)),{},{prevDataKey:O,prevData:R,prevWidth:C,prevHeight:P,prevLayout:E,prevStackOffset:N,prevMargin:k,prevChildren:L})}if(!FN(L,j.prevChildren)){var J,ie,he,pe,Z=Ss(L,ff),ne=Z&&(J=(ie=Z.props)===null||ie===void 0?void 0:ie.startIndex)!==null&&J!==void 0?J:z,ae=Z&&(he=(pe=Z.props)===null||pe===void 0?void 0:pe.endIndex)!==null&&he!==void 0?he:D,xe=ne!==z||ae!==D,Oe=!ur(R),Ue=Oe&&!xe?j.updateId:j.updateId+1;return He(He({updateId:Ue},v(He(He({props:w},j),{},{updateId:Ue,dataStartIndex:ne,dataEndIndex:ae}),j)),{},{prevChildren:L,dataStartIndex:ne,dataEndIndex:ae})}return null}),Kt(_,"renderActiveDot",function(w,j,O){var R;return A.isValidElement(w)?R=A.cloneElement(w,j):nr(w)?R=w(j):R=se.createElement(dw,j),se.createElement(qr,{className:"recharts-active-dot",key:O},R)});var S=A.forwardRef(function(j,O){return se.createElement(_,xh({},j,{ref:O}))});return S.displayName=_.displayName,S},y_e=iX({chartName:"RadarChart",GraphicalChild:A1,axisComponents:[{axisType:"angleAxis",AxisComp:N1},{axisType:"radiusAxis",AxisComp:T1}],formatAxisMap:Rxe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),v_e=iX({chartName:"ScatterChart",GraphicalChild:j1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Sw},{axisType:"yAxis",AxisComp:_w},{axisType:"zAxis",AxisComp:ww}],formatAxisMap:u3e});const Nw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function mj(t){return"nodeType"in t}function Ui(t){var e,r;return t?Vf(t)?t:mj(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function gj(t){const{Document:e}=Ui(t);return t instanceof e}function k1(t){return Vf(t)?!1:t instanceof Ui(t).HTMLElement}function sX(t){return t instanceof Ui(t).SVGElement}function Ff(t){return t?Vf(t)?t.document:mj(t)?gj(t)?t:k1(t)||sX(t)?t.ownerDocument:document:document:document}const dc=Nw?A.useLayoutEffect:A.useEffect;function Aw(t){const e=A.useRef(t);return dc(()=>{e.current=t}),A.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function x_e(){const t=A.useRef(null),e=A.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=A.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function zg(t,e){e===void 0&&(e=[t]);const r=A.useRef(t);return dc(()=>{r.current!==t&&(r.current=t)},e),r}function C1(t,e){const r=A.useRef();return A.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Wb(t){const e=Aw(t),r=A.useRef(null),n=A.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function Kb(t){const e=A.useRef();return A.useEffect(()=>{e.current=t},[t]),e.current}let kT={};function Ew(t,e){return A.useMemo(()=>{if(e)return e;const r=kT[t]==null?0:kT[t]+1;return kT[t]=r,t+"-"+r},[t,e])}function oX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const Oh=oX(1),Qb=oX(-1);function b_e(t){return"clientX"in t&&"clientY"in t}function yj(t){if(!t)return!1;const{KeyboardEvent:e}=Ui(t.target);return e&&t instanceof e}function w_e(t){if(!t)return!1;const{TouchEvent:e}=Ui(t.target);return e&&t instanceof e}function Vg(t){if(w_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return b_e(t)?{x:t.clientX,y:t.clientY}:null}const Fg=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Fg.Translate.toString(t),Fg.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),lz="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function S_e(t){return t.matches(lz)?t:t.querySelector(lz)}const __e={display:"none"};function T_e(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:__e},r)}function N_e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function A_e(){const[t,e]=A.useState("");return{announce:A.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const lX=A.createContext(null);function E_e(t){const e=A.useContext(lX);A.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function j_e(){const[t]=A.useState(()=>new Set),e=A.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[A.useCallback(n=>{let{type:a,event:i}=n;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[t]),e]}const k_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},C_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function O_e(t){let{announcements:e=C_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=k_e}=t;const{announce:i,announcement:o}=A_e(),c=Ew("DndLiveRegion"),[d,h]=A.useState(!1);if(A.useEffect(()=>{h(!0)},[]),E_e(A.useMemo(()=>({onDragStart(m){let{active:y}=m;i(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:v}=m;e.onDragMove&&i(e.onDragMove({active:y,over:v}))},onDragOver(m){let{active:y,over:v}=m;i(e.onDragOver({active:y,over:v}))},onDragEnd(m){let{active:y,over:v}=m;i(e.onDragEnd({active:y,over:v}))},onDragCancel(m){let{active:y,over:v}=m;i(e.onDragCancel({active:y,over:v}))}}),[i,e])),!d)return null;const p=se.createElement(se.Fragment,null,se.createElement(T_e,{id:n,value:a.draggable}),se.createElement(N_e,{id:c,announcement:o}));return r?du.createPortal(p,r):p}var Ba;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ba||(Ba={}));function Xb(){}function cz(t,e){return A.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function I_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return A.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Ao=Object.freeze({x:0,y:0});function R_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function M_e(t,e){const r=Vg(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function P_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function D_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function L_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function uz(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const B_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=uz(e,e.left,e.top),i=[];for(const o of n){const{id:c}=o,d=r.get(c);if(d){const h=R_e(uz(d),a);i.push({id:c,data:{droppableContainer:o,value:h}})}}return i.sort(P_e)};function $_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=o*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const U_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const d=$_e(c,e);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(D_e)};function z_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function cX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Ao}function V_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...r})}}const F_e=V_e(1);function uX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function q_e(t,e,r){const n=uX(e);if(!n)return t;const{scaleX:a,scaleY:i,x:o,y:c}=n,d=t.left-o-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const H_e={ignoreTransform:!1};function O1(t,e){e===void 0&&(e=H_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Ui(t).getComputedStyle(t);h&&(r=q_e(r,h,p))}const{top:n,left:a,width:i,height:o,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:d}}function dz(t){return O1(t,{ignoreTransform:!0})}function G_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function W_e(t,e){return e===void 0&&(e=Ui(t).getComputedStyle(t)),e.position==="fixed"}function K_e(t,e){e===void 0&&(e=Ui(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function vj(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(gj(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!k1(a)||sX(a)||r.includes(a))return r;const i=Ui(t).getComputedStyle(a);return a!==t&&K_e(a,i)&&r.push(a),W_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function dX(t){const[e]=vj(t,1);return e??null}function CT(t){return!Nw||!t?null:Vf(t)?t:mj(t)?gj(t)||t===Ff(t).scrollingElement?window:k1(t)?t:null:null}function hX(t){return Vf(t)?t.scrollX:t.scrollLeft}function fX(t){return Vf(t)?t.scrollY:t.scrollTop}function u8(t){return{x:hX(t),y:fX(t)}}var Ya;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ya||(Ya={}));function pX(t){return!Nw||!t?!1:t===document.scrollingElement}function mX(t){const e={x:0,y:0},r=pX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:e}}const Q_e={x:.2,y:.2};function X_e(t,e,r,n,a){let{top:i,left:o,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=Q_e);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=mX(t),v={x:0,y:0},_={x:0,y:0},S={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+S.height?(v.y=Ya.Backward,_.y=n*Math.abs((e.top+S.height-i)/S.height)):!p&&d>=e.bottom-S.height&&(v.y=Ya.Forward,_.y=n*Math.abs((e.bottom-S.height-d)/S.height)),!y&&c>=e.right-S.width?(v.x=Ya.Forward,_.x=n*Math.abs((e.right-S.width-c)/S.width)):!m&&o<=e.left+S.width&&(v.x=Ya.Backward,_.x=n*Math.abs((e.left+S.width-o)/S.width)),{direction:v,speed:_}}function Y_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function gX(t){return t.reduce((e,r)=>Oh(e,u8(r)),Ao)}function Z_e(t){return t.reduce((e,r)=>e+hX(r),0)}function J_e(t){return t.reduce((e,r)=>e+fX(r),0)}function yX(t,e){if(e===void 0&&(e=O1),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);dX(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const eTe=[["x",["left","right"],Z_e],["y",["top","bottom"],J_e]];class xj{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=vj(r),a=gX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,c]of eTe)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Cm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function tTe(t){const{EventTarget:e}=Ui(t);return t instanceof e?t:Ff(t)}function OT(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ks;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ks||(Ks={}));function hz(t){t.preventDefault()}function rTe(t){t.stopPropagation()}var Cn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Cn||(Cn={}));const vX={start:[Cn.Space,Cn.Enter],cancel:[Cn.Esc],end:[Cn.Space,Cn.Enter,Cn.Tab]},nTe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Cn.Right:return{...r,x:r.x+25};case Cn.Left:return{...r,x:r.x-25};case Cn.Down:return{...r,y:r.y+25};case Cn.Up:return{...r,y:r.y-25}}};class xX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Cm(Ff(r)),this.windowListeners=new Cm(Ui(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ks.Resize,this.handleCancel),this.windowListeners.add(Ks.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ks.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&yX(n),r(Ao)}handleKeyDown(e){if(yj(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=vX,coordinateGetter:o=nTe,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:Ao;this.referenceCoordinates||(this.referenceCoordinates=p);const m=o(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=Qb(m,p),v={x:0,y:0},{scrollableAncestors:_}=n.current;for(const S of _){const w=e.code,{isTop:j,isRight:O,isLeft:R,isBottom:L,maxScroll:C,minScroll:P}=mX(S),E=Y_e(S),N={x:Math.min(w===Cn.Right?E.right-E.width/2:E.right,Math.max(w===Cn.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(w===Cn.Down?E.bottom-E.height/2:E.bottom,Math.max(w===Cn.Down?E.top:E.top+E.height/2,m.y))},k=w===Cn.Right&&!O||w===Cn.Left&&!R,z=w===Cn.Down&&!L||w===Cn.Up&&!j;if(k&&N.x!==m.x){const D=S.scrollLeft+y.x,B=w===Cn.Right&&D<=C.x||w===Cn.Left&&D>=P.x;if(B&&!y.y){S.scrollTo({left:D,behavior:c});return}B?v.x=S.scrollLeft-D:v.x=w===Cn.Right?S.scrollLeft-C.x:S.scrollLeft-P.x,v.x&&S.scrollBy({left:-v.x,behavior:c});break}else if(z&&N.y!==m.y){const D=S.scrollTop+y.y,B=w===Cn.Down&&D<=C.y||w===Cn.Up&&D>=P.y;if(B&&!y.x){S.scrollTo({top:D,behavior:c});return}B?v.y=S.scrollTop-D:v.y=w===Cn.Down?S.scrollTop-C.y:S.scrollTop-P.y,v.y&&S.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(e,Oh(Qb(m,this.referenceCoordinates),v))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=vX,onActivation:a}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function fz(t){return!!(t&&"distance"in t)}function pz(t){return!!(t&&"delay"in t)}class bj{constructor(e,r,n){var a;n===void 0&&(n=tTe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=Ff(o),this.documentListeners=new Cm(this.document),this.listeners=new Cm(n),this.windowListeners=new Cm(Ui(o)),this.initialCoordinates=(a=Vg(i))!=null?a:Ao,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ks.Resize,this.handleCancel),this.windowListeners.add(Ks.DragStart,hz),this.windowListeners.add(Ks.VisibilityChange,this.handleCancel),this.windowListeners.add(Ks.ContextMenu,hz),this.documentListeners.add(Ks.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(fz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ks.Click,rTe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ks.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=Vg(e))!=null?r:Ao,h=Qb(a,d);if(!n&&c){if(fz(c)){if(c.tolerance!=null&&OT(h,c.tolerance))return this.handleCancel();if(OT(h,c.distance))return this.handleStart()}if(pz(c)&&OT(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Cn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const aTe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class wj extends bj{constructor(e){const{event:r}=e,n=Ff(r.target);super(e,aTe,n)}}wj.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const iTe={move:{name:"mousemove"},end:{name:"mouseup"}};var d8;(function(t){t[t.RightClick=2]="RightClick"})(d8||(d8={}));class sTe extends bj{constructor(e){super(e,iTe,Ff(e.event.target))}}sTe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===d8.RightClick?!1:(n==null||n({event:r}),!0)}}];const IT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class bX extends bj{constructor(e){super(e,IT)}static setup(){return window.addEventListener(IT.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(IT.move.name,e)};function e(){}}}bX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Om;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Om||(Om={}));var Yb;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yb||(Yb={}));function oTe(t){let{acceleration:e,activator:r=Om.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=Yb.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const v=cTe({delta:m,disabled:!i}),[_,S]=x_e(),w=A.useRef({x:0,y:0}),j=A.useRef({x:0,y:0}),O=A.useMemo(()=>{switch(r){case Om.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Om.DraggableRect:return a}},[r,a,d]),R=A.useRef(null),L=A.useCallback(()=>{const P=R.current;if(!P)return;const E=w.current.x*j.current.x,N=w.current.y*j.current.y;P.scrollBy(E,N)},[]),C=A.useMemo(()=>c===Yb.TreeOrder?[...h].reverse():h,[c,h]);A.useEffect(()=>{if(!i||!h.length||!O){S();return}for(const P of C){if((n==null?void 0:n(P))===!1)continue;const E=h.indexOf(P),N=p[E];if(!N)continue;const{direction:k,speed:z}=X_e(P,N,O,e,y);for(const D of["x","y"])v[D][k[D]]||(z[D]=0,k[D]=0);if(z.x>0||z.y>0){S(),R.current=P,_(L,o),w.current=z,j.current=k;return}}w.current={x:0,y:0},j.current={x:0,y:0},S()},[e,L,n,S,i,o,JSON.stringify(O),JSON.stringify(v),_,h,C,p,JSON.stringify(y)])}const lTe={x:{[Ya.Backward]:!1,[Ya.Forward]:!1},y:{[Ya.Backward]:!1,[Ya.Forward]:!1}};function cTe(t){let{delta:e,disabled:r}=t;const n=Kb(e);return C1(a=>{if(r||!n||!a)return lTe;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ya.Backward]:a.x[Ya.Backward]||i.x===-1,[Ya.Forward]:a.x[Ya.Forward]||i.x===1},y:{[Ya.Backward]:a.y[Ya.Backward]||i.y===-1,[Ya.Forward]:a.y[Ya.Forward]||i.y===1}}},[r,e,n])}function uTe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return C1(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function dTe(t,e){return A.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var qg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(qg||(qg={}));var h8;(function(t){t.Optimized="optimized"})(h8||(h8={}));const mz=new Map;function hTe(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,o]=A.useState(null),{frequency:c,measure:d,strategy:h}=a,p=A.useRef(t),m=w(),y=zg(m),v=A.useCallback(function(j){j===void 0&&(j=[]),!y.current&&o(O=>O===null?j:O.concat(j.filter(R=>!O.includes(R))))},[y]),_=A.useRef(null),S=C1(j=>{if(m&&!r)return mz;if(!j||j===mz||p.current!==t||i!=null){const O=new Map;for(let R of t){if(!R)continue;if(i&&i.length>0&&!i.includes(R.id)&&R.rect.current){O.set(R.id,R.rect.current);continue}const L=R.node.current,C=L?new xj(d(L),L):null;R.rect.current=C,C&&O.set(R.id,C)}return O}return j},[t,i,r,m,d]);return A.useEffect(()=>{p.current=t},[t]),A.useEffect(()=>{m||v()},[r,m]),A.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),A.useEffect(()=>{m||typeof c!="number"||_.current!==null||(_.current=setTimeout(()=>{v(),_.current=null},c))},[c,m,v,...n]),{droppableRects:S,measureDroppableContainers:v,measuringScheduled:i!=null};function w(){switch(h){case qg.Always:return!1;case qg.BeforeDragging:return r;default:return!r}}}function Sj(t,e){return C1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function fTe(t,e){return Sj(t,e)}function pTe(t){let{callback:e,disabled:r}=t;const n=Aw(e),a=A.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return A.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function jw(t){let{callback:e,disabled:r}=t;const n=Aw(e),a=A.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return A.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function mTe(t){return new xj(O1(t),t)}function gz(t,e,r){e===void 0&&(e=mTe);const[n,a]=A.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const o=pTe({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=jw({callback:i});return dc(()=>{i(),t?(c==null||c.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[t]),n}function gTe(t){const e=Sj(t);return cX(t,e)}const yz=[];function yTe(t){const e=A.useRef(t),r=C1(n=>t?n&&n!==yz&&t&&e.current&&t.parentNode===e.current.parentNode?n:vj(t):yz,[t]);return A.useEffect(()=>{e.current=t},[t]),r}function vTe(t){const[e,r]=A.useState(null),n=A.useRef(t),a=A.useCallback(i=>{const o=CT(i.target);o&&r(c=>c?(c.set(o,u8(o)),new Map(c)):null)},[]);return A.useEffect(()=>{const i=n.current;if(t!==i){o(i);const c=t.map(d=>{const h=CT(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,u8(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{o(t),o(i)};function o(c){c.forEach(d=>{const h=CT(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),A.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Oh(i,o),Ao):gX(t):Ao,[t,e])}function vz(t,e){e===void 0&&(e=[]);const r=A.useRef(null);return A.useEffect(()=>{r.current=null},e),A.useEffect(()=>{const n=t!==Ao;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Qb(t,r.current):Ao}function xTe(t){A.useEffect(()=>{if(!Nw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function bTe(t,e){return A.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,e)},r},{}),[t,e])}function wX(t){return A.useMemo(()=>t?G_e(t):null,[t])}const xz=[];function wTe(t,e){e===void 0&&(e=O1);const[r]=t,n=wX(r?Ui(r):null),[a,i]=A.useState(xz);function o(){i(()=>t.length?t.map(d=>pX(d)?n:new xj(e(d),d)):xz)}const c=jw({callback:o});return dc(()=>{c==null||c.disconnect(),o(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function SX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return k1(e)?e:t}function STe(t){let{measure:e}=t;const[r,n]=A.useState(null),a=A.useCallback(h=>{for(const{target:p}of h)if(k1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),i=jw({callback:a}),o=A.useCallback(h=>{const p=SX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=Wb(o);return A.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const _Te=[{sensor:wj,options:{}},{sensor:xX,options:{}}],TTe={current:{}},ix={draggable:{measure:dz},droppable:{measure:dz,strategy:qg.WhileDragging,frequency:h8.Optimized},dragOverlay:{measure:O1}};class Im extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const NTe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Im,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ix,measureDroppableContainers:Xb,windowRect:null,measuringScheduled:!1},_X={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xb,draggableNodes:new Map,over:null,measureDroppableContainers:Xb},I1=A.createContext(_X),TX=A.createContext(NTe);function ATe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Im}}}function ETe(t,e){switch(e.type){case Ba.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ba.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ba.DragEnd:case Ba.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ba.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Im(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Ba.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Im(t.droppable.containers);return o.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case Ba.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Im(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function jTe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=A.useContext(I1),i=Kb(n),o=Kb(r==null?void 0:r.id);return A.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!yj(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=S_e(p);if(m){m.focus();break}}})}},[n,e,a,o,i]),null}function NX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function kTe(t){return A.useMemo(()=>({draggable:{...ix.draggable,...t==null?void 0:t.draggable},droppable:{...ix.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ix.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function CTe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=A.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;dc(()=>{if(!o&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=cX(p,n);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=dX(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,o,c,n,r])}const kw=A.createContext({...Ao,scaleX:1,scaleY:1});var tu;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(tu||(tu={}));const OTe=A.memo(function(e){var r,n,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:p=_Te,collisionDetection:m=U_e,measuring:y,modifiers:v,..._}=e;const S=A.useReducer(ETe,void 0,ATe),[w,j]=S,[O,R]=j_e(),[L,C]=A.useState(tu.Uninitialized),P=L===tu.Initialized,{draggable:{active:E,nodes:N,translate:k},droppable:{containers:z}}=w,D=E!=null?N.get(E):null,B=A.useRef({initial:null,translated:null}),$=A.useMemo(()=>{var Gt;return E!=null?{id:E,data:(Gt=D==null?void 0:D.data)!=null?Gt:TTe,rect:B}:null},[E,D]),K=A.useRef(null),[W,H]=A.useState(null),[J,ie]=A.useState(null),he=zg(_,Object.values(_)),pe=Ew("DndDescribedBy",o),Z=A.useMemo(()=>z.getEnabled(),[z]),ne=kTe(y),{droppableRects:ae,measureDroppableContainers:xe,measuringScheduled:Oe}=hTe(Z,{dragging:P,dependencies:[k.x,k.y],config:ne.droppable}),Ue=uTe(N,E),Xe=A.useMemo(()=>J?Vg(J):null,[J]),Ye=xr(),Q=fTe(Ue,ne.draggable.measure);CTe({activeNode:E!=null?N.get(E):null,config:Ye.layoutShiftCompensation,initialRect:Q,measure:ne.draggable.measure});const me=gz(Ue,ne.draggable.measure,Q),te=gz(Ue?Ue.parentElement:null),re=A.useRef({activatorEvent:null,active:null,activeNode:Ue,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=z.getNodeFor((r=re.current.over)==null?void 0:r.id),Ge=STe({measure:ne.dragOverlay.measure}),it=(n=Ge.nodeRef.current)!=null?n:Ue,et=P?(a=Ge.rect)!=null?a:me:null,Pt=!!(Ge.nodeRef.current&&Ge.rect),Me=gTe(Pt?null:me),tt=wX(it?Ui(it):null),bt=yTe(P?Pe??Ue:null),St=wTe(bt),Fe=NX(v,{transform:{x:k.x-Me.x,y:k.y-Me.y,scaleX:1,scaleY:1},activatorEvent:J,active:$,activeNodeRect:me,containerNodeRect:te,draggingNodeRect:et,over:re.current.over,overlayNodeRect:Ge.rect,scrollableAncestors:bt,scrollableAncestorRects:St,windowRect:tt}),ce=Xe?Oh(Xe,k):null,We=vTe(bt),nt=vz(We),ut=vz(We,[me]),dt=Oh(Fe,nt),Ft=et?F_e(et,Fe):null,tr=$&&Ft?m({active:$,collisionRect:Ft,droppableRects:ae,droppableContainers:Z,pointerCoordinates:ce}):null,kr=L_e(tr,"id"),[be,st]=A.useState(null),Et=Pt?Fe:Oh(Fe,ut),Dt=z_e(Et,(i=be==null?void 0:be.rect)!=null?i:null,me),$t=A.useRef(null),Ze=A.useCallback((Gt,Ut)=>{let{sensor:_t,options:Br}=Ut;if(K.current==null)return;const sn=N.get(K.current);if(!sn)return;const Wr=Gt.nativeEvent,$r=new _t({active:K.current,activeNode:sn,event:Wr,options:Br,context:re,onAbort(cr){if(!N.get(cr))return;const{onDragAbort:pn}=he.current,Rn={id:cr};pn==null||pn(Rn),O({type:"onDragAbort",event:Rn})},onPending(cr,ga,pn,Rn){if(!N.get(cr))return;const{onDragPending:Tr}=he.current,mn={id:cr,constraint:ga,initialCoordinates:pn,offset:Rn};Tr==null||Tr(mn),O({type:"onDragPending",event:mn})},onStart(cr){const ga=K.current;if(ga==null)return;const pn=N.get(ga);if(!pn)return;const{onDragStart:Rn}=he.current,ti={activatorEvent:Wr,active:{id:ga,data:pn.data,rect:B}};du.unstable_batchedUpdates(()=>{Rn==null||Rn(ti),C(tu.Initializing),j({type:Ba.DragStart,initialCoordinates:cr,active:ga}),O({type:"onDragStart",event:ti}),H($t.current),ie(Wr)})},onMove(cr){j({type:Ba.DragMove,coordinates:cr})},onEnd:fn(Ba.DragEnd),onCancel:fn(Ba.DragCancel)});$t.current=$r;function fn(cr){return async function(){const{active:pn,collisions:Rn,over:ti,scrollAdjustedTranslate:Tr}=re.current;let mn=null;if(pn&&Tr){const{cancelDrop:ri}=he.current;mn={activatorEvent:Wr,active:pn,collisions:Rn,delta:Tr,over:ti},cr===Ba.DragEnd&&typeof ri=="function"&&await Promise.resolve(ri(mn))&&(cr=Ba.DragCancel)}K.current=null,du.unstable_batchedUpdates(()=>{j({type:cr}),C(tu.Uninitialized),st(null),H(null),ie(null),$t.current=null;const ri=cr===Ba.DragEnd?"onDragEnd":"onDragCancel";if(mn){const Wn=he.current[ri];Wn==null||Wn(mn),O({type:ri,event:mn})}})}}},[N]),ir=A.useCallback((Gt,Ut)=>(_t,Br)=>{const sn=_t.nativeEvent,Wr=N.get(Br);if(K.current!==null||!Wr||sn.dndKit||sn.defaultPrevented)return;const $r={active:Wr};Gt(_t,Ut.options,$r)===!0&&(sn.dndKit={capturedBy:Ut.sensor},K.current=Br,Ze(_t,Ut))},[N,Ze]),br=dTe(p,ir);xTe(p),dc(()=>{me&&L===tu.Initializing&&C(tu.Initialized)},[me,L]),A.useEffect(()=>{const{onDragMove:Gt}=he.current,{active:Ut,activatorEvent:_t,collisions:Br,over:sn}=re.current;if(!Ut||!_t)return;const Wr={active:Ut,activatorEvent:_t,collisions:Br,delta:{x:dt.x,y:dt.y},over:sn};du.unstable_batchedUpdates(()=>{Gt==null||Gt(Wr),O({type:"onDragMove",event:Wr})})},[dt.x,dt.y]),A.useEffect(()=>{const{active:Gt,activatorEvent:Ut,collisions:_t,droppableContainers:Br,scrollAdjustedTranslate:sn}=re.current;if(!Gt||K.current==null||!Ut||!sn)return;const{onDragOver:Wr}=he.current,$r=Br.get(kr),fn=$r&&$r.rect.current?{id:$r.id,rect:$r.rect.current,data:$r.data,disabled:$r.disabled}:null,cr={active:Gt,activatorEvent:Ut,collisions:_t,delta:{x:sn.x,y:sn.y},over:fn};du.unstable_batchedUpdates(()=>{st(fn),Wr==null||Wr(cr),O({type:"onDragOver",event:cr})})},[kr]),dc(()=>{re.current={activatorEvent:J,active:$,activeNode:Ue,collisionRect:Ft,collisions:tr,droppableRects:ae,draggableNodes:N,draggingNode:it,draggingNodeRect:et,droppableContainers:z,over:be,scrollableAncestors:bt,scrollAdjustedTranslate:dt},B.current={initial:et,translated:Ft}},[$,Ue,tr,Ft,N,it,et,ae,z,be,bt,dt]),oTe({...Ye,delta:k,draggingRect:Ft,pointerCoordinates:ce,scrollableAncestors:bt,scrollableAncestorRects:St});const Lr=A.useMemo(()=>({active:$,activeNode:Ue,activeNodeRect:me,activatorEvent:J,collisions:tr,containerNodeRect:te,dragOverlay:Ge,draggableNodes:N,droppableContainers:z,droppableRects:ae,over:be,measureDroppableContainers:xe,scrollableAncestors:bt,scrollableAncestorRects:St,measuringConfiguration:ne,measuringScheduled:Oe,windowRect:tt}),[$,Ue,me,J,tr,te,Ge,N,z,ae,be,xe,bt,St,ne,Oe,tt]),hn=A.useMemo(()=>({activatorEvent:J,activators:br,active:$,activeNodeRect:me,ariaDescribedById:{draggable:pe},dispatch:j,draggableNodes:N,over:be,measureDroppableContainers:xe}),[J,br,$,me,j,pe,N,be,xe]);return se.createElement(lX.Provider,{value:R},se.createElement(I1.Provider,{value:hn},se.createElement(TX.Provider,{value:Lr},se.createElement(kw.Provider,{value:Dt},h)),se.createElement(jTe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement(O_e,{...c,hiddenTextDescribedById:pe}));function xr(){const Gt=(W==null?void 0:W.autoScrollEnabled)===!1,Ut=typeof d=="object"?d.enabled===!1:d===!1,_t=P&&!Gt&&!Ut;return typeof d=="object"?{...d,enabled:_t}:{enabled:_t}}}),ITe=A.createContext(null),bz="button",RTe="Draggable";function AX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Ew(RTe),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=A.useContext(I1),{role:v=bz,roleDescription:_="draggable",tabIndex:S=0}=a??{},w=(d==null?void 0:d.id)===e,j=A.useContext(w?kw:ITe),[O,R]=Wb(),[L,C]=Wb(),P=bTe(o,e),E=zg(r);dc(()=>(m.set(e,{id:e,key:i,node:O,activatorNode:L,data:E}),()=>{const k=m.get(e);k&&k.key===i&&m.delete(e)}),[m,e]);const N=A.useMemo(()=>({role:v,tabIndex:S,"aria-disabled":n,"aria-pressed":w&&v===bz?!0:void 0,"aria-roledescription":_,"aria-describedby":p.draggable}),[n,v,S,w,_,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:N,isDragging:w,listeners:n?void 0:P,node:O,over:y,setNodeRef:R,setActivatorNodeRef:C,transform:j}}function MTe(){return A.useContext(TX)}const PTe="Droppable",DTe={timeout:25};function _j(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Ew(PTe),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=A.useContext(I1),p=A.useRef({disabled:r}),m=A.useRef(!1),y=A.useRef(null),v=A.useRef(null),{disabled:_,updateMeasurementsFor:S,timeout:w}={...DTe,...a},j=zg(S??n),O=A.useCallback(()=>{if(!m.current){m.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{h(Array.isArray(j.current)?j.current:[j.current]),v.current=null},w)},[w]),R=jw({callback:O,disabled:_||!o}),L=A.useCallback((N,k)=>{R&&(k&&(R.unobserve(k),m.current=!1),N&&R.observe(N))},[R]),[C,P]=Wb(L),E=zg(e);return A.useEffect(()=>{!R||!C.current||(R.disconnect(),m.current=!1,R.observe(C.current))},[C,R]),A.useEffect(()=>(c({type:Ba.RegisterDroppable,element:{id:n,key:i,disabled:r,node:C,rect:y,data:E}}),()=>c({type:Ba.UnregisterDroppable,key:i,id:n})),[n]),A.useEffect(()=>{r!==p.current.disabled&&(c({type:Ba.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:o,rect:y,isOver:(d==null?void 0:d.id)===n,node:C,over:d,setNodeRef:P}}function LTe(t){let{animation:e,children:r}=t;const[n,a]=A.useState(null),[i,o]=A.useState(null),c=Kb(r);return!r&&!n&&c&&a(c),dc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?A.cloneElement(n,{ref:o}):null)}const BTe={x:0,y:0,scaleX:1,scaleY:1};function $Te(t){let{children:e}=t;return se.createElement(I1.Provider,{value:_X},se.createElement(kw.Provider,{value:BTe},e))}const UTe={position:"fixed",touchAction:"none"},zTe=t=>yj(t)?"transform 250ms ease":void 0,VTe=A.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:d,transform:h,transition:p=zTe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},y={...UTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:Fg.Transform.toString(m),transformOrigin:a&&n?M_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return se.createElement(r,{className:o,style:y,ref:e},i)}),FTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);o!=null&&o.active&&r.node.classList.remove(o.active)}},qTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Fg.Transform.toString(e)},{transform:Fg.Transform.toString(r)}]},HTe={duration:250,easing:"ease",keyframes:qTe,sideEffects:FTe({styles:{active:{opacity:"0"}}})};function GTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return Aw((i,o)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=SX(o);if(!h)return;const{transform:p}=Ui(o).getComputedStyle(o),m=uX(p);if(!m)return;const y=typeof e=="function"?e:WTe(e);return yX(d,a.draggable.measure),y({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function WTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...HTe,...t};return i=>{let{active:o,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},m={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},v=a({...h,active:o,dragOverlay:c,transform:{initial:d,final:y}}),[_]=v,S=v[v.length-1];if(JSON.stringify(_)===JSON.stringify(S))return;const w=n==null?void 0:n({active:o,dragOverlay:c,...h}),j=c.node.animate(v,{duration:e,easing:r,fill:"forwards"});return new Promise(O=>{j.onfinish=()=>{w==null||w(),O()}})}}let wz=0;function KTe(t){return A.useMemo(()=>{if(t!=null)return wz++,wz},[t])}const QTe=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:v,draggableNodes:_,droppableContainers:S,dragOverlay:w,over:j,measuringConfiguration:O,scrollableAncestors:R,scrollableAncestorRects:L,windowRect:C}=MTe(),P=A.useContext(kw),E=KTe(m==null?void 0:m.id),N=NX(o,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:v,draggingNodeRect:w.rect,over:j,overlayNodeRect:w.rect,scrollableAncestors:R,scrollableAncestorRects:L,transform:P,windowRect:C}),k=Sj(y),z=GTe({config:n,draggableNodes:_,droppableContainers:S,measuringConfiguration:O}),D=k?w.setRef:void 0;return se.createElement($Te,null,se.createElement(LTe,{animation:z},m&&E?se.createElement(VTe,{key:E,id:m.id,ref:D,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:k,style:{zIndex:h,...a},transform:N},r):null))});function Sz(t,e=800){const[r,n]=A.useState(t),a=A.useRef(t),i=A.useRef(0);return A.useEffect(()=>{const o=a.current,c=t;if(a.current=t,o===c)return;const d=performance.now(),h=c-o,p=m=>{const y=m-d,v=Math.min(y/e,1),_=1-Math.pow(1-v,3);n(Math.round(o+h*_)),v<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const EX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],jX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],XTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],_z={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},lh=t=>t?_z[t.rarity]||_z.COMMON:null,YTe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Hg=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,o=(e==null?void 0:e.bodyType)||"A",c=o==="B",d=o==="C",h=EX[(e==null?void 0:e.skinTone)??0],p=jX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",v=t==null?void 0:t.HEAD,_=t==null?void 0:t.CHEST,S=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,j=t==null?void 0:t.BELT,O=t==null?void 0:t.AMULET,R=A.useMemo(()=>[v,_,S,w,j,O].filter(Boolean).length,[v,_,S,w,j,O]),L=A.useMemo(()=>[v,_,S,w,j,O].some(N=>(N==null?void 0:N.rarity)==="UNIQUE"),[v,_,S,w,j,O]),C=Math.min(1,.2+R*.13),P=c?23:21,E=A.useMemo(()=>YTe(m,P),[m,P]);return s.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[s.jsxs("defs",{children:[s.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[s.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),s.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),s.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),s.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),s.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),s.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),s.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),s.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[s.jsx("stop",{offset:"0%",stopColor:h}),s.jsx("stop",{offset:"100%",stopColor:y})]}),s.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[s.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:C}),s.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:C*.3}),s.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:p}),s.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),s.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:s.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),s.jsxs("g",{children:[s.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&s.jsxs("g",{filter:"url(#av-bloom)",children:[s.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),s.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),s.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const N=lh(w);return s.jsxs("g",{filter:N.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:N.primary,stroke:N.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:N.primary,stroke:N.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),s.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:N.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),s.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:N.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),N.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:N.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:N.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),s.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),s.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),s.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),s.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),s.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),s.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),_&&(()=>{const N=lh(_);return s.jsxs("g",{filter:N.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:N.primary,fillOpacity:"0.3",stroke:N.primary,strokeWidth:"1",strokeOpacity:"0.6"}),s.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:N.primary,fillOpacity:"0.5",stroke:N.particle,strokeWidth:"0.5"}),s.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:N.primary,fillOpacity:"0.5",stroke:N.particle,strokeWidth:"0.5"}),s.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:N.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),s.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:N.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),s.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:N.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),s.jsx("circle",{cx:"100",cy:"120",r:"2",fill:N.particle,fillOpacity:"0.7",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),N.intensity>=.7&&s.jsxs("g",{children:[s.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:N.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:N.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),j?(()=>{const N=lh(j);return s.jsxs("g",{children:[s.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:N.primary,fillOpacity:"0.55",stroke:N.primary,strokeWidth:"0.8"}),s.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:N.particle,fillOpacity:"0.4"}),s.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:N.primary,fillOpacity:"0.3",stroke:N.particle,strokeWidth:"0.3"}),s.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:N.primary,fillOpacity:"0.3",stroke:N.particle,strokeWidth:"0.3"})]})})():s.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),s.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),s.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),S?(()=>{const N=lh(S);return s.jsxs("g",{filter:N.intensity>.5?"url(#av-soft)":void 0,children:[s.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:N.primary,fillOpacity:"0.5",stroke:N.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:N.primary,fillOpacity:"0.5",stroke:N.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),s.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:N.particle,strokeWidth:"1",strokeOpacity:"0.5"}),s.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:N.particle,strokeWidth:"1",strokeOpacity:"0.5"}),N.intensity>=.7&&s.jsxs(s.Fragment,{children:[s.jsx("circle",{cx:"50",cy:"168",r:"2",fill:N.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"150",cy:"168",r:"2",fill:N.particle,fillOpacity:"0.5",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():s.jsxs("g",{children:[s.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),s.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),R>0&&s.jsxs(s.Fragment,{children:[s.jsx("g",{filter:"url(#av-bloom)",children:s.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:s.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),s.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:C*.7,children:s.jsx("animate",{attributeName:"fillOpacity",values:`${C*.7};${C*.3};${C*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),R>=3&&s.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),s.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),O&&(()=>{const N=lh(O);return s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:N.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),s.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:N.primary,stroke:N.particle,strokeWidth:"0.8",children:s.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"100",cy:"97",r:"2",fill:N.particle,children:s.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),s.jsxs("g",{children:[E.back&&s.jsx("path",{d:E.back,fill:"url(#av-hair)",opacity:"0.8"}),s.jsx("ellipse",{cx:"100",cy:"50",rx:P,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),s.jsx("ellipse",{cx:100-P-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),s.jsx("ellipse",{cx:100+P+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),s.jsxs("g",{children:[s.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),s.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),s.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),s.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),s.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:s.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),s.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),s.jsx("path",{d:E.main,fill:"url(#av-hair)"}),E.accent&&s.jsx("path",{d:E.accent,fill:"url(#av-hair)",opacity:"0.9"}),v&&(()=>{const N=lh(v),k=v.visualId||"";return s.jsx("g",{filter:N.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:k.includes("helm")?s.jsxs(s.Fragment,{children:[s.jsx("path",{d:`M${100-P-2} 28 Q100 10 ${100+P+2} 28 L${100+P+4} 62 Q100 72 ${100-P-4} 62 Z`,fill:N.primary,fillOpacity:"0.55",stroke:N.primary,strokeWidth:"1.2"}),s.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):k.includes("visor")?s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:N.primary,strokeWidth:"1",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:N.primary,strokeWidth:"1.5"}),s.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:N.primary,strokeWidth:"1.5"})]}):s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:N.primary,fillOpacity:"0.7",stroke:N.particle,strokeWidth:"0.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:N.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:N.primary,strokeWidth:"1.5"}),s.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:N.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),s.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:N.particle,fillOpacity:"0.3",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),s.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:N.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&s.jsxs("g",{filter:"url(#av-glow)",children:[s.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:s.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&s.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:s.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((N,k)=>s.jsx("polygon",{points:`${100+N},16 ${97+N},22 ${103+N},22`,fill:"#fbbf24",fillOpacity:"0.6",children:s.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+k*.2}s`,repeatCount:"indefinite"})},k))]}),L&&s.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((N,k)=>{const z=N*Math.PI/180,D=100+Math.cos(z)*50,B=145+Math.sin(z)*75;return s.jsxs("circle",{cx:D,cy:B,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[s.jsx("animate",{attributeName:"cy",values:`${B};${B-18};${B}`,dur:`${2+k*.3}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+k*.3}s`,repeatCount:"indefinite"})]},k)})}),r>=5&&s.jsxs(s.Fragment,{children:[s.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),s.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((N,k)=>{const z=k*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),D=100+Math.cos(z)*(38+k*3),B=140+Math.sin(z)*(55+k*2),$=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return s.jsxs("circle",{cx:D,cy:B,r:"1",fill:$,fillOpacity:"0.35",children:[s.jsx("animate",{attributeName:"cy",values:`${B};${B-12};${B}`,dur:`${2+k*.4}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+k*.4}s`,repeatCount:"indefinite"})]},k)})}),n&&a&&s.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((N,k)=>{const z=60+Math.random()*80,D=20+Math.random()*260;return s.jsxs("circle",{cx:z,cy:D,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[s.jsx("animate",{attributeName:"cy",values:`${D};${D-25};${D}`,dur:`${3+k*.5}s`,repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+k*.5}s`,repeatCount:"indefinite"})]},`c-${k}`)})})]})]})},Tj=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],ZTe=t=>Tj.filter(e=>!e.isSecret||t.includes(e.id)),Rv={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},kX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],Tz=(t,e)=>{const r=kX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},JTe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],CX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of JTe){const a=n.itemIds.filter(o=>r.includes(o)).length,i=n.bonuses.filter(o=>a>=o.count).sort((o,c)=>c.count-o.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},eNe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],Nz=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],OX=t=>[...Nz].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||Nz[0],tNe=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,rNe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},nNe=({unlockedAchievements:t,achievementProgress:e})=>{const r=A.useMemo(()=>ZTe(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=Tj.filter(o=>!o.isSecret).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(el,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),s.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:s.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(o=>{const c=r.filter(h=>h.category===o);if(c.length===0)return null;const d=rNe[o];return s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[s.jsx("span",{children:d.icon})," ",d.label]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[s.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&s.jsx(Wh,{className:"w-3 h-3 text-gray-600"})]}),s.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&s.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&s.jsxs("div",{className:"text-right shrink-0",children:[s.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&s.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},o)})]})},aNe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},iNe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=A.useState(t||null),[i,o]=A.useState(null),c=mi(),{confirm:d}=ol(),h=!!t,p=n||"THEORIST",m=kX.filter(_=>_.specialization===p),y=[1,2,3,4],v=async _=>{if(!i){if(!h){const S=Rv[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${S} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${S}`,cancelLabel:"Go Back",variant:"warning"}))return}o(_);try{await Re.unlockSkill(_,p),Un.skillUnlock(),c.success("Skill unlocked!")}catch(S){c.error(S instanceof Error?S.message:"Failed to unlock")}o(null)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),s.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[s.jsx(ka,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[s.jsx(Os,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),s.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",s.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[s.jsx(an,{className:"w-4 h-4 text-green-400"}),s.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",s.jsxs("span",{className:"font-bold text-white",children:[Rv[t].icon," ",Rv[t].name]})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Rv).map(([_,S])=>{const w=p===_,j=h&&t!==_;return s.jsxs("button",{onClick:()=>!j&&a(_),disabled:j,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${aNe[_]} bg-opacity-10`:j?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:S.icon}),s.jsx("span",{className:"font-bold text-sm text-white",children:S.name}),j&&s.jsx(Wh,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:S.description}),!h&&w&&s.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},_)})}),s.jsx("div",{className:"space-y-4",children:y.map(_=>{const S=m.filter(w=>w.tier===_);return s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",_]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(w=>{const j=r.includes(w.id),O=!j&&Tz(w.id,r)&&e>=w.cost,R=Tz(w.id,r);return s.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${j?"border-green-500/30 bg-green-500/10":O?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>O&&v(w.id),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-sm",children:w.icon}),s.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),j&&s.jsx(an,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!j&&!R&&s.jsx(Wh,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),s.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!j&&s.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&s.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},_)})})]})},RT=25,Mv=eNe,sNe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=A.useState(!1),[i,o]=A.useState(0),[c,d]=A.useState(null),h=A.useRef(null),p=mi(),m=new Date().toISOString().split("T")[0],y=e===m,v=!y&&t>=RT&&!n,_=async()=>{if(v){a(!0),d(null),Un.wheelSpin();try{const j=await Re.spinFortuneWheel(r),O=Mv.findIndex(C=>C.id===j.prizeId),R=360/Mv.length,L=360*5+(360-O*R-R/2);o(C=>C+L),setTimeout(()=>{Un.wheelPrize(),d(j.rewardDescription),a(!1),j.prizeType!=="NOTHING"?p.success(`You won: ${j.rewardDescription}!`):p.info(j.rewardDescription)},4e3)}catch(j){a(!1),p.error(j instanceof Error?j.message:"Spin failed")}}},S=360/Mv.length,w=140;return s.jsxs("div",{className:"flex flex-col items-center gap-6",children:[s.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",RT," Flux for a daily spin"]}),s.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[s.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),s.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:s.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Mv.map((j,O)=>{const R=(O*S-90)*(Math.PI/180),L=((O+1)*S-90)*(Math.PI/180),C=w*Math.cos(R),P=w*Math.sin(R),E=w*Math.cos(L),N=w*Math.sin(L),k=S>180?1:0,z=((O+.5)*S-90)*(Math.PI/180),D=w*.65*Math.cos(z),B=w*.65*Math.sin(z),$=(O+.5)*S;return s.jsxs("g",{children:[s.jsx("path",{d:`M0,0 L${C},${P} A${w},${w} 0 ${k},1 ${E},${N} Z`,fill:j.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),s.jsx("text",{x:D,y:B,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${$}, ${D}, ${B})`,children:j.label})]},j.id)}),s.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),s.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&s.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[s.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),s.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),s.jsx("button",{onClick:_,disabled:!v,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${v?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${RT} Flux)`})]})};function oNe(t,e){const[r,n]=A.useState(e);return A.useEffect(()=>{const a=Re.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function lNe(t){const[e,r]=A.useState([]);return A.useEffect(()=>{const n=Re.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const cNe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var _;const i=oNe(t.id,t.maxHp),o=lNe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=o.reduce((S,w)=>(S[w.userId]||(S[w.userId]={name:w.userName,total:0}),S[w.userId].total+=w.damage,S),{}),m=Object.entries(p).sort(([,S],[,w])=>w.total-S.total).slice(0,5),y=((_=p[e])==null?void 0:_.total)||0,v=(a==null?void 0:a.bossId)===t.id;return s.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[v&&s.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[s.jsx(eo,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),v&&a&&s.jsx("div",{className:"text-center animate-bounce",children:s.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),y>0&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[s.jsx(No,{className:"w-3 h-3"}),"Your total damage: ",s.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[s.jsx(is,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([S,w],j)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:`${S===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",j+1," ",w.name]}),s.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},S))]}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ka,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),s.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[s.jsx(Ud,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),s.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},uNe=({userId:t,userName:e,classType:r})=>{const[n,a]=A.useState([]),[i,o]=A.useState(null),[c,d]=A.useState(null),h=mi();A.useEffect(()=>{let m;try{m=Re.subscribeToBossEncounters(y=>{const v=y.filter(_=>!_.classType||_.classType===r||_.classType==="GLOBAL");a(v)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){o(m);try{const y=await Re.dealBossDamage(m,e,r||"");if(Un.bossHit(),d({bossId:m,damage:y.damageDealt,isCrit:y.isCrit}),setTimeout(()=>d(null),2e3),y.bossDefeated)Un.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const v=y.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${y.damageDealt} damage!${v} (+${y.xpEarned} XP)`)}}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}o(null)}};return n.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[s.jsx(jle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>s.jsx(cNe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},dNe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:o,bossHpPercent:c,isCrit:d,healAmount:h,shieldBlocked:p})=>{const[m,y]=A.useState(!1),[v,_]=A.useState(!1),[S,w]=A.useState(null),[j,O]=A.useState(!1),[R,L]=A.useState(null),[C,P]=A.useState(!1),[E,N]=A.useState([]),[k,z]=A.useState(!1),D=(n==null?void 0:n.bossType)||"BRUTE",B=(n==null?void 0:n.hue)??0,$=(K,W,H)=>{const J=K==="right"?75:25,ie=Array.from({length:H},(he,pe)=>({id:Date.now()+pe,x:J+(Math.random()-.5)*30,y:30+(Math.random()-.5)*20,color:W}));N(he=>[...he,...ie]),setTimeout(()=>N(he=>he.filter(pe=>!ie.find(Z=>Z.id===pe.id))),1e3)};return A.useEffect(()=>{if(a==="player-attack"&&i){y(!0),w({value:i,side:"right",isCrit:d}),$("right",d?"#fbbf24":"#f59e0b",d?12:6),d&&(O(!0),z(!0),setTimeout(()=>O(!1),400),setTimeout(()=>z(!1),400));const K=setTimeout(()=>y(!1),500),W=setTimeout(()=>w(null),1200);return h&&h>0&&setTimeout(()=>{L(h),setTimeout(()=>L(null),1200)},400),()=>{clearTimeout(K),clearTimeout(W)}}else if(a==="boss-attack"&&i){p?(P(!0),setTimeout(()=>P(!1),800)):(_(!0),z(!0),$("left","#ef4444",8),setTimeout(()=>z(!1),300)),w({value:i,side:"left"});const K=setTimeout(()=>_(!1),500),W=setTimeout(()=>w(null),1200);return()=>{clearTimeout(K),clearTimeout(W)}}},[a,i,d,h,p]),s.jsxs("div",{className:`relative w-full h-32 flex items-end justify-between px-2 overflow-hidden select-none ${k?"animate-[battleShake_0.3s_ease-in-out]":""}`,children:[j&&s.jsx("div",{className:"absolute inset-0 bg-amber-400/20 animate-[critFlash_0.4s_ease-out_forwards] z-10 pointer-events-none"}),C&&s.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 z-10 pointer-events-none",children:s.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-cyan-400/60 bg-cyan-400/10 animate-[shieldPulse_0.8s_ease-out_forwards] flex items-center justify-center",children:s.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-cyan-400 fill-current",children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})})}),E.map(K=>s.jsx("div",{className:"absolute w-1.5 h-1.5 rounded-full pointer-events-none animate-[particleBurst_1s_ease-out_forwards]",style:{left:`${K.x}%`,top:`${K.y}%`,backgroundColor:K.color}},K.id)),R!==null&&s.jsxs("div",{className:"absolute left-6 bottom-8 text-sm font-black text-emerald-400 animate-[floatUp_1.2s_ease-out_forwards] z-10 pointer-events-none",children:["+",R," HP"]}),s.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),s.jsxs("div",{className:`relative w-16 h-24 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-8 scale-110":""} ${v?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2rem) scale(1.1)":void 0},children:[s.jsx(Hg,{equipped:e,appearance:t,evolutionLevel:r}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o>50?"bg-emerald-500":o>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o}%`}})})]}),s.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[s.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),m&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[s.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),s.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),s.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),v&&s.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[s.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),s.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),S&&s.jsxs("div",{className:`absolute font-black animate-[floatUp_1.2s_ease-out_forwards] ${S.isCrit?"text-xl":"text-lg"} ${S.side==="right"?`right-4 ${S.isCrit?"text-yellow-300":"text-amber-400"}`:"left-4 text-red-400"}`,style:{top:"10%"},children:[S.isCrit&&s.jsx("span",{className:"text-[10px] block text-center text-yellow-300 font-black tracking-widest animate-pulse",children:"CRIT!"}),"-",S.value]})]}),s.jsxs("div",{className:`relative w-20 h-28 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-8 scale-110":""} ${m?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2rem) scale(1.1)":m?void 0:"scaleX(-1)",...m?{}:{filter:void 0}},children:[s.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:s.jsx(RG,{bossType:D,hue:B})}),s.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),s.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes battleShake {
                    0%, 100% { transform: translate(0, 0); }
                    10% { transform: translate(-3px, -2px); }
                    20% { transform: translate(4px, 1px); }
                    30% { transform: translate(-2px, 3px); }
                    40% { transform: translate(3px, -1px); }
                    50% { transform: translate(-4px, 2px); }
                    60% { transform: translate(2px, -3px); }
                    70% { transform: translate(-1px, 2px); }
                    80% { transform: translate(3px, -2px); }
                    90% { transform: translate(-2px, 1px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
                @keyframes critFlash {
                    0% { opacity: 0.3; }
                    50% { opacity: 0.15; }
                    100% { opacity: 0; }
                }
                @keyframes shieldPulse {
                    0% { transform: scale(0.5); opacity: 0.9; }
                    50% { transform: scale(1.2); opacity: 0.6; }
                    100% { transform: scale(1.5); opacity: 0; }
                }
                @keyframes particleBurst {
                    0% { opacity: 1; transform: translate(0, 0) scale(1); }
                    100% { opacity: 0; transform: translate(var(--px, 20px), var(--py, -30px)) scale(0); }
                }
            `})]})},hNe=({bossId:t,maxEntries:e=5})=>{const[r,n]=A.useState([]),a=A.useRef(null);return A.useEffect(()=>{const i=Re.subscribeToBossDamageLog(t,o=>{const c=[...o].sort((d,h)=>new Date(h.timestamp).getTime()-new Date(d.timestamp).getTime());n(c.slice(0,e))});return()=>i()},[t,e]),A.useEffect(()=>{a.current&&(a.current.scrollTop=0)},[r.length]),r.length===0?null:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-[9px] text-gray-600 uppercase font-bold tracking-widest flex items-center gap-1",children:[s.jsx(ka,{className:"w-2.5 h-2.5"})," Live Battle Feed"]}),s.jsx("div",{ref:a,className:"max-h-24 overflow-y-auto custom-scrollbar space-y-0.5",children:r.map((i,o)=>s.jsxs("div",{className:`flex items-center gap-2 text-[10px] py-0.5 px-2 rounded-lg ${o===0?"bg-amber-500/5 animate-in fade-in slide-in-from-top-1 duration-300":"opacity-60"}`,children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-purple-500/20 flex items-center justify-center text-[8px] font-bold text-purple-400 shrink-0",children:i.userName.charAt(0)}),s.jsx("span",{className:"text-gray-400 truncate flex-1",children:i.userName}),s.jsxs("span",{className:"text-amber-400 font-bold",children:["-",i.damage]})]},`${i.userId}-${i.timestamp}`))})]})};function fNe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function pNe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function mNe(t,e){const r=[...t],n=fNe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function gNe(t,e){const[r,n]=A.useState(e);return A.useEffect(()=>{const a=Re.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const yNe=({modifier:t})=>{const e=HT[t.type];return e?s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[s.jsx(zd,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&s.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},vNe=({quiz:t,progress:e})=>{var m,y;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,o=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=o>0?Math.round(c/o*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return s.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[s.jsxs("div",{className:"text-center py-4",children:[s.jsx(fH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),s.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),s.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&s.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[s.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),s.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((y=t.rewards)==null?void 0:y.flux)||0)*(a||1))," Flux"]}),a&&a>1&&s.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?s.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[s.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Mm," attempts and ",Pm," correct answer"]})]}):null,r&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(q7,{className:"w-3 h-3"})," Damage Dealt"]}),s.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Jo,{className:"w-3 h-3"})," Accuracy"]}),s.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),s.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",o]})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(ka,{className:"w-3 h-3"})," Critical Hits"]}),s.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(No,{className:"w-3 h-3"})," Damage Mitigated"]}),s.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(R2,{className:"w-3 h-3"})," Longest Streak"]}),s.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),s.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[s.jsx(Zv,{className:"w-3 h-3"})," Healing Received"]}),s.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(v=>{const _=r.correctByDifficulty[v]||0,S=r.incorrectByDifficulty[v]||0,w=_+S,j=w>0?Math.round(_/w*100):0;return s.jsxs("div",{className:`rounded-lg p-2 border text-center ${v==="EASY"?"border-green-500/20 bg-green-500/5":v==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[s.jsx("div",{className:`text-[9px] font-bold uppercase ${v==="EASY"?"text-green-400":v==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:v}),s.jsxs("div",{className:"text-sm font-black text-white",children:[j,"%"]}),s.jsxs("div",{className:"text-[9px] text-gray-500",children:[_,"/",w]})]},v)})})]})},xNe=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o})=>{var Ye,Q,me,te;const c=gNe(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>mNe(t.questions,pNe(e+t.id)),[t.questions,e,t.id]),[p,m]=A.useState(null),[y,v]=A.useState(!1);A.useEffect(()=>{const re=Re.subscribeToBossQuizProgress(e,t.id,Pe=>{m(Pe),v(!0)});return()=>re()},[e,t.id]);const _=se.useMemo(()=>n?OG(n).maxHp:100,[n]),[S,w]=A.useState(-1),[j,O]=A.useState(-1),[R,L]=A.useState(_),[C,P]=A.useState(!1),[E,N]=A.useState(null),[k,z]=A.useState(null),[D,B]=A.useState(!1),[$,K]=A.useState("idle"),[W,H]=A.useState(void 0),[J,ie]=A.useState(!1),[he,pe]=A.useState(void 0),[Z,ne]=A.useState(!1);A.useEffect(()=>{if(y&&S===-1)if(p){const re=new Set(p.answeredQuestions||[]),Pe=h.findIndex(et=>!re.has(et.id));w(Pe===-1?h.length:Pe);const Ge=p.currentHp,it=p.maxHp>0?p.maxHp:_;L(it),Ge>=0?(O(Ge),Ge===0&&P(!0)):O(it)}else w(0),O(_),L(_)},[y]),A.useEffect(()=>{L(_)},[_]);const ae=R>0?(j===-1?R:j)/R*100:100,xe=S>=0?h[S%h.length]:void 0,Oe=S>=h.length,Ue=c<=0,Xe=async(re,Pe,Ge)=>{D||C||(B(!0),N(Ge),r(re,Pe,Ge,{onResult:it=>{it.playerHp!==void 0&&O(it.playerHp),it.playerMaxHp!==void 0&&L(it.playerMaxHp),it.knockedOut&&P(!0),it.correct?(H(it.damage),ie(!!it.isCrit),pe(it.healAmount),ne(!1),K("player-attack"),setTimeout(()=>K("idle"),800)):it.shieldBlocked?(H(0),ne(!0),ie(!1),K("boss-attack"),setTimeout(()=>K("idle"),800)):it.playerDamage&&it.playerDamage>0&&(H(it.playerDamage),ne(!1),ie(!1),K("boss-attack"),setTimeout(()=>K("idle"),800)),z(it),it.knockedOut||setTimeout(()=>{w(et=>et+1),N(null),z(null)},2e3),B(!1)}}))};return s.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-base font-black text-amber-400",children:t.bossName}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!Ue&&s.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((re,Pe)=>s.jsx(yNe,{modifier:re},Pe))}),Ue?s.jsx(vNe,{quiz:t,progress:p}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:s.jsx(dNe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:o,bossAppearance:t.bossAppearance,attackState:$,damage:W,playerHpPercent:ae,bossHpPercent:d,isCrit:J,healAmount:he,shieldBlocked:Z})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),s.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[s.jsx(Zv,{className:"w-3 h-3"})," Your HP: ",j===-1?R:j]}),s.jsx("span",{className:"text-gray-600",children:R})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:s.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${ae>50?"bg-gradient-to-r from-emerald-600 to-green-500":ae>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${ae}%`}})})]}),C?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Cu,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):Oe?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(an,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):xe?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Question ",S+1," / ",h.length]}),s.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${xe.difficulty==="HARD"?"bg-red-500/20 text-red-400":xe.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[xe.difficulty,xe.damageBonus?` (+${xe.damageBonus} dmg)`:""]})]}),s.jsx("p",{className:"text-sm text-white font-medium",children:xe.stem}),s.jsx("div",{className:"space-y-2",children:xe.options.map((re,Pe)=>{const Ge=E===Pe,it=k&&Ge,et=k==null?void 0:k.correct;return s.jsx("button",{onClick:()=>Xe(t.id,xe.id,Pe),disabled:D||!!k||C,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${it&&et?"border-green-500/50 bg-green-500/10 text-green-400":it&&!et?"border-red-500/50 bg-red-500/10 text-red-400":Ge?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+Pe),"."]}),s.jsx("span",{children:re}),it&&et&&s.jsx(an,{className:"w-4 h-4 text-green-400 ml-auto"}),it&&!et&&s.jsx(Cu,{className:"w-4 h-4 text-red-400 ml-auto"})]})},Pe)})}),k&&k.correct&&s.jsxs("div",{className:"text-center space-y-1",children:[s.jsxs("div",{className:"text-sm text-amber-400 font-bold animate-bounce",children:[s.jsx(ka,{className:"w-4 h-4 inline mr-1"}),k.isCrit?"CRITICAL HIT! ":"","-",k.damage," HP to boss!"]}),k.healAmount&&k.healAmount>0&&s.jsxs("div",{className:"text-xs text-emerald-400 font-bold",children:[s.jsx(Zv,{className:"w-3 h-3 inline mr-1"})," +",k.healAmount," HP healed"]})]}),k&&!k.correct&&k.shieldBlocked&&s.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[s.jsx(No,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),k&&!k.correct&&!k.shieldBlocked&&k.playerDamage&&k.playerDamage>0&&s.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[s.jsx(Zv,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",k.playerDamage," damage!"]})]}):null,p&&!Ue&&!C&&!Oe&&s.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((Ye=p.combatStats)==null?void 0:Ye.questionsAttempted)||0)<Mm||(((Q=p.combatStats)==null?void 0:Q.questionsCorrect)||0)<Pm?s.jsxs("span",{children:["Rewards: ",((me=p.combatStats)==null?void 0:me.questionsAttempted)||0,"/",Mm," attempts"," ",""," ",((te=p.combatStats)==null?void 0:te.questionsCorrect)||0,"/",Pm," correct needed"]}):s.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),s.jsx(hNe,{bossId:t.id,maxEntries:5}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[s.jsx("span",{children:"Defeat rewards:"}),s.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),s.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&s.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},bNe=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:o,playerEvolutionLevel:c})=>{const[d,h]=A.useState([]),p=mi();A.useEffect(()=>{let v;try{v=Re.subscribeToBossQuizzes(e,h)}catch{}return()=>v==null?void 0:v()},[e]);const m=d.filter(v=>{var _;if(v.scheduledAt&&new Date(v.scheduledAt)>new Date)return!1;if((_=v.targetSections)!=null&&_.length){const S=v.classType!=="GLOBAL"?v.classType:e,w=(n==null?void 0:n[S])||(n==null?void 0:n[e])||r||"";if(!v.targetSections.includes(w))return!1}return!0}),y=async(v,_,S,w)=>{try{const j=await Re.answerBossQuiz(v,_,S);j.alreadyAnswered?p.info("Already answered this question!"):j.correct?(Un.bossHit(),j.bossDefeated?(Un.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):j.isCrit?p.success(`CRITICAL HIT! Dealt ${j.damage} damage!`):p.success(`Correct! Dealt ${j.damage} damage!`)):j.shieldBlocked?p.info("Shield blocked the attack!"):j.playerDamage&&j.playerDamage>0?p.error(`Wrong! The boss hits you for ${j.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),j.knockedOut&&Un.bossHit(),w.onResult(j)}catch(j){p.error(j instanceof Error?j.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return m.length===0?null:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[s.jsx(Wo,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(v=>s.jsx(xNe,{quiz:v,userId:t,onAnswer:y,playerStats:a,playerAppearance:i,playerEquipped:o||{},playerEvolutionLevel:c||1},v.id))]})},wNe=({activeChallenges:t,classType:e})=>{const[r,n]=A.useState([]),[a,i]=A.useState(null),o=mi();A.useEffect(()=>{let y;try{y=Re.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(v=>v.challengeId===y),d=async y=>{if(!a){i(y);try{const v=await Re.claimDailyChallenge(y,e);Un.dailyReward(),o.success(`Claimed! +${v.xpReward} XP${v.fluxReward?` +${v.fluxReward} Flux`:""}`)}catch(v){o.error(v instanceof Error?v.message:"Claim failed")}i(null)}};if(r.length===0)return null;const h=r.filter(y=>!y.isWeekly),p=r.filter(y=>y.isWeekly),m=y=>{const v=c(y.id),_=(v==null?void 0:v.progress)||0,S=(v==null?void 0:v.completed)||!1,w=!!(v!=null&&v.claimedAt),j=Math.min(100,_/y.target*100);return s.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?s.jsx(an,{className:"w-4 h-4 text-green-400"}):S?s.jsx(ale,{className:"w-4 h-4 text-yellow-400"}):s.jsx(Jo,{className:"w-4 h-4 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&s.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),s.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${j}%`}})}),s.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[_,"/",y.target]})]}),S&&!w&&s.jsx("button",{onClick:()=>d(y.id),disabled:!!a,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:a===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Goe,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),s.jsx("div",{className:"space-y-2",children:h.map(m)}),p.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[s.jsx(ka,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),s.jsx("div",{className:"space-y-2",children:p.map(m)})]})]})},MT={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},Az=({value:t,onChange:e,label:r})=>s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>s.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:s.jsx(I2,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),SNe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=A.useState(0),[i,o]=A.useState(0),[c,d]=A.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return s.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[s.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),s.jsx(Az,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),s.jsx(Az,{value:i,onChange:o,label:h?"Tutor communication":"Student engagement"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),s.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),s.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[s.jsx(F7,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},_Ne=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=A.useState([]),[o,c]=A.useState(!1),[d,h]=A.useState(""),[p,m]=A.useState(!1),[y,v]=A.useState(null),[_,S]=A.useState(!1),w=mi();A.useEffect(()=>{let k;try{k=Re.subscribeToTutoringSessions(r,i)}catch{}return()=>k==null?void 0:k()},[r]);const j=async()=>{if(!(!d.trim()||p)){m(!0);try{await Re.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},O=async k=>{try{await Re.claimTutorRole(k,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},R=async k=>{try{await Re.startTutoringSession(k),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(k,z)=>{S(!0);try{const D=a.find($=>$.id===k);if(!D)throw new Error("Session not found");const B=D.requesterId===t?"requester":"tutor";await Re.submitTutoringFeedback(k,B,z),w.success("Feedback submitted! "+(B==="requester"?D.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":D.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),v(null)}catch{w.error("Failed to submit feedback")}S(!1)},C=async(k,z)=>{try{const D=await Re.completeTutoring(k,z);w.success(`Verified! Tutor earned ${D.xpAwarded} XP and ${D.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},P=a.filter(k=>k.status==="OPEN"),E=a.filter(k=>["MATCHED","IN_PROGRESS"].includes(k.status)),N=a.filter(k=>k.status==="VERIFIED");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(Ou,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),s.jsxs("button",{onClick:()=>c(!o),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(Mi,{className:"w-3 h-3"})," Request Help"]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),o&&s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[s.jsx("input",{value:d,onChange:k=>h(k.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:j,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),P.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(ole,{className:"w-3 h-3"})," Open Requests"]}),P.map(k=>s.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",k.requesterName," - ",new Date(k.createdAt).toLocaleDateString()]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${MT[k.status]}`,children:k.status})]}),k.requesterId!==t&&s.jsxs("button",{onClick:()=>O(k.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[s.jsx(is,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},k.id))]}),E.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(eo,{className:"w-3 h-3"})," Active Sessions"]}),E.map(k=>{const z=k.requesterId===t||k.tutorId===t,D=k.requesterId===t,B=k.tutorId===t,$=D?k.requesterFeedback:k.tutorFeedback,K=D?k.tutorFeedback:k.requesterFeedback;return s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName||"Finding tutor..."]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${MT[k.status]}`,children:k.status}),k.status==="MATCHED"&&z&&s.jsx("button",{onClick:()=>R(k.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),k.status==="IN_PROGRESS"&&z&&!$&&s.jsxs("button",{onClick:()=>v(k.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(an,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),k.status==="IN_PROGRESS"&&z&&$&&!K&&s.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",D?"tutor":"student"]}),n&&k.tutorId&&k.status!=="VERIFIED"&&s.jsxs("button",{onClick:()=>C(k.id,k.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[s.jsx(an,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),y===k.id&&k.status==="IN_PROGRESS"&&(B||D)&&s.jsx(SNe,{role:D?"requester":"tutor",onSubmit:W=>L(k.id,W),submitting:_})]},k.id)})]}),a.filter(k=>k.status==="COMPLETED").length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[s.jsx(eo,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(k=>k.status==="COMPLETED").map(k=>s.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[s.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),s.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),k.requesterFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),k.tutorFeedback&&s.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&k.tutorId&&s.jsxs("button",{onClick:()=>C(k.id,k.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[s.jsx(an,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},k.id))]}),N.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[s.jsx(an,{className:"w-3 h-3 text-green-400"})," Completed (",N.length,")"]}),N.slice(0,3).map(k=>s.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 truncate",children:k.topic}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${MT[k.status]}`,children:k.status})]},k.id))]}),a.length===0&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx(Ou,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),s.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},TNe=({item:t,onClose:e})=>{const[r,n]=A.useState("chest"),a=ca(t.rarity);A.useEffect(()=>{Un.chestOpen();const o=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(o),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:s.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&s.jsxs("div",{className:"animate-in zoom-in duration-500",children:[s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),s.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),s.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[s.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),s.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),s.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&s.jsx("div",{className:"animate-in zoom-in duration-300",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[s.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),s.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),s.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[s.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((o,c)=>s.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[s.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(o*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&s.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[s.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[s.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),s.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),s.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,o])=>o&&o>0).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:o}),s.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},o))}),t.affixes.length>0&&s.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((o,c)=>s.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.name,": +",o.value," ",o.stat," (T",o.tier,")"]},c))}),t.setId&&s.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&s.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((o,c)=>s.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),s.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},NNe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],ANe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],ENe=({user:t,classType:e,onClose:r})=>{var P,E,N;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},o=i.level||1,c=Qh(o),d=OX(o),{equipped:h,appearance:p}=r0(t,e),m=dE({gamification:{...i,equipped:h}}),y=Xh(h),v=((P=i.classXp)==null?void 0:P[e])||0,_=(E=t.settings)==null?void 0:E.privacyMode,S=_?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),j=CX(w),O=i.unlockedAchievements||[],R=A.useMemo(()=>Tj.filter(k=>O.includes(k.id)),[O]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),C=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),s.jsxs("div",{className:"relative flex items-center gap-6",children:[s.jsx("div",{className:"w-32 h-44 shrink-0",children:s.jsx(Hg,{equipped:h,appearance:p})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:`text-2xl font-black ${_?"text-purple-300 italic":"text-white"}`,children:S}),s.jsx("button",{onClick:C,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?s.jsx(uu,{className:"w-4 h-4 text-green-400"}):s.jsx(Ix,{className:"w-4 h-4"})})]}),s.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",o]}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:v.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-black text-purple-400",children:O.length}),s.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&s.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:s.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Jo,{className:"w-3 h-3"})," Combat Stats"]}),s.jsx("div",{className:"space-y-2",children:NNe.map(({key:k,label:z,color:D,bg:B})=>{const $=m[k]||0,K=$/L*100;return s.jsxs("div",{className:"space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-xs text-gray-400",children:z}),s.jsx("span",{className:`text-xs font-bold ${D}`,children:$})]}),s.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:s.jsx("div",{className:`h-1.5 rounded-full ${B} transition-all`,style:{width:`${K}%`}})})]},k)})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(No,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"space-y-1.5",children:ANe.map(k=>{const z=h[k];if(!z)return s.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[s.jsx("span",{className:"font-mono w-12 text-[10px]",children:k}),s.jsx("span",{className:"italic",children:"Empty"})]},k);const D=ca(z.rarity);return s.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${D.border} ${D.bg}`,children:[s.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:k}),s.jsx("span",{className:`text-xs font-bold truncate ${D.text}`,children:z.name})]},k)})})]}),j.length>0&&s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[s.jsx(I2,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),j.map(({set:k,activeBonus:z})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[s.jsx("span",{className:"text-purple-400 font-bold",children:k.name}),s.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",z.label]})]},k.id))]})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(el,{className:"w-3 h-3 text-yellow-400"})," Achievements (",O.length,")"]}),R.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:R.slice(0,12).map(k=>s.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[s.jsx("div",{className:"text-xl",children:k.icon}),s.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:k.title})]},k.id))}):s.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(zd,{className:"w-3.5 h-3.5 text-orange-400"}),s.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),s.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(q7,{className:"w-3.5 h-3.5 text-red-400"}),s.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),s.jsx("span",{className:"text-red-400 font-bold",children:((N=i.completedQuests)==null?void 0:N.length)||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ou,{className:"w-3.5 h-3.5 text-green-400"}),s.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),s.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(ka,{className:"w-3.5 h-3.5 text-cyan-400"}),s.jsx("span",{className:"text-gray-400",children:"Total XP:"}),s.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})};function jNe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=Vg(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const kNe={Textbook:s.jsx(Zs,{className:"w-5 h-5"}),Simulation:s.jsx(V7,{className:"w-5 h-5 fill-current"}),"Lab Guide":s.jsx(k2,{className:"w-5 h-5"}),"Practice Set":s.jsx(Jo,{className:"w-5 h-5"}),Article:s.jsx(vH,{className:"w-5 h-5"}),"Video Lesson":s.jsx(_H,{className:"w-5 h-5"}),Supplemental:s.jsx(z7,{className:"w-5 h-5"})};let ch=0,PT=!1,DT=!1,Ez="";const CNe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:o="RESOURCES"})=>{var qa,Ai,ls,gi,Tt,fe,Je,ht,Xt,hr,on,Kr,yn,Cr,Rs,cs,oo,dl,us,ds,Oa,ya,q,we,Te,Ne,mt,Ot,At,Yt,wr,en;const c=mi(),{confirm:d}=ol(),[h,p]=A.useState(new Set),[m,y]=A.useState(t.classType||((qa=t.enrolledClasses)==null?void 0:qa[0])||"Unassigned"),[v,_]=A.useState(null),[S,w]=A.useState([]),[j,O]=A.useState({}),[R,L]=A.useState(!1),[C,P]=A.useState(null);Ez!==t.id&&(Ez=t.id,ch=((Ai=t.gamification)==null?void 0:Ai.lastLevelSeen)||1,PT=!1,DT=!1),ch===0&&(ch=((ls=t.gamification)==null?void 0:ls.lastLevelSeen)||1);const E=o,[N,k]=A.useState(!1),[z,D]=A.useState(null),[B,$]=A.useState(!1),[K,W]=A.useState(null),[H,J]=A.useState(null),[ie,he]=A.useState(null),[pe,Z]=A.useState(null),[ne,ae]=A.useState(null),[xe,Oe]=A.useState(null),[Ue,Xe]=A.useState(!1),[Ye,Q]=A.useState(null),[me,te]=A.useState(!1);A.useEffect(()=>{var $e,De,ft;const oe=(($e=t.gamification)==null?void 0:$e.level)||1,ve=Math.max(((De=t.gamification)==null?void 0:De.lastLevelSeen)||1,ch);if(oe>ve){ch=oe;const rr=((ft=t.gamification)==null?void 0:ft.inventory)||[],Qt=rr.length>0?rr[rr.length-1]:null;P(Qt),L(!0),Un.levelUp()}},[(gi=t.gamification)==null?void 0:gi.level,(Tt=t.gamification)==null?void 0:Tt.lastLevelSeen,(fe=t.gamification)==null?void 0:fe.inventory]),A.useEffect(()=>{const oe=[];try{oe.push(Re.subscribeToXPEvents(ve=>{const $e=ve.find(De=>{var ft,rr,Qt;if(!De.isActive||De.type!=="GLOBAL"&&De.targetClass!==m||De.scheduledAt&&new Date(De.scheduledAt)>new Date)return!1;if((ft=De.targetSections)!=null&&ft.length){const En=De.type!=="GLOBAL"&&De.targetClass?De.targetClass:m,Ia=((rr=t.classSections)==null?void 0:rr[En])||((Qt=t.classSections)==null?void 0:Qt[m])||t.section||"";if(!De.targetSections.includes(Ia))return!1}return!0});_($e||null)}))}catch{}try{oe.push(Re.subscribeToQuests(ve=>{const $e=t.enrolledClasses||(t.classType?[t.classType]:[]);w(ve.filter(De=>{var rr,Qt;if(!De.isActive)return!1;const ft=new Date;if(De.startsAt&&new Date(De.startsAt)>ft||De.expiresAt&&new Date(De.expiresAt)<ft||De.targetClass&&!$e.includes(De.targetClass))return!1;if((rr=De.targetSections)!=null&&rr.length){const En=((Qt=t.classSections)==null?void 0:Qt[De.targetClass||m])||t.section||"";if(!De.targetSections.includes(En))return!1}return!0}))}))}catch{}try{oe.push(Re.subscribeToStudentPracticeProgress(t.id,O))}catch{}return()=>oe.forEach(ve=>ve())},[m]);const re=((ht=(Je=t.gamification)==null?void 0:Je.classXp)==null?void 0:ht[m])||0,Pe=se.useRef(re),Ge=se.useRef(m);A.useEffect(()=>{if(Ge.current!==m){Ge.current=m,Pe.current=re;return}if(re>Pe.current&&Pe.current>=0){const oe=re-Pe.current;if(oe>0&&oe<500){Oe(oe),Un.xpGain();const ve=setTimeout(()=>Oe(null),2e3);return()=>clearTimeout(ve)}}Pe.current=re},[re]),A.useEffect(()=>{var $e;if(PT)return;PT=!0;const oe=new Date().toISOString().split("T")[0];(($e=t.gamification)==null?void 0:$e.lastLoginRewardDate)!==oe&&!me&&Re.claimDailyLogin().then(De=>{De.alreadyClaimed||(te(!0),Un.dailyReward(),c.success(`Daily login: +${De.xpReward} XP, +${De.fluxReward} Flux (${De.streak}-day streak!)`))}).catch(()=>{})},[]),A.useEffect(()=>{DT||(DT=!0,Re.updateEngagementStreak().catch(()=>{}))},[]);const[it,et]=A.useState([]);A.useEffect(()=>{let oe;try{oe=Re.subscribeToAnnouncements(et)}catch{}return()=>oe==null?void 0:oe()},[]);const Pt=A.useMemo(()=>{var ve;const oe=((ve=t.gamification)==null?void 0:ve.dismissedAnnouncements)||[];return it.filter($e=>{var De,ft,rr;if(oe.includes($e.id)||$e.classType!=="GLOBAL"&&$e.classType!==m)return!1;if((De=$e.targetSections)!=null&&De.length){const Qt=$e.classType!=="GLOBAL"?$e.classType:m,En=((ft=t.classSections)==null?void 0:ft[Qt])||((rr=t.classSections)==null?void 0:rr[m])||t.section||"";if(!$e.targetSections.includes(En))return!1}return!0})},[it,(Xt=t.gamification)==null?void 0:Xt.dismissedAnnouncements,m,t.classSections,t.section]),Me=async oe=>{await Re.dismissAnnouncement(t.id,oe)},tt=()=>{var ve;const oe=((ve=t.gamification)==null?void 0:ve.level)||1;ch=oe,L(!1),P(null),Re.updateUserLastLevelSeen(t.id,oe).catch(()=>{})},bt=async oe=>{try{await Re.updateUserAppearance(t.id,oe,m),c.success("Profile updated!"),k(!1),W(null),J(null),he(null),Z(null),ae(null)}catch{c.error("Failed to save  try again")}},St=t.enrolledClasses||(t.classType?[t.classType]:[]),Fe=A.useMemo(()=>r0(t,m),[t,m]),ce=Fe.equipped,We=Fe.inventory,nt=A.useMemo(()=>{const oe={tech:10,focus:10,analysis:10,charisma:10};return Object.values(ce).filter(Boolean).forEach($e=>{$e.stats&&Object.entries($e.stats).forEach(([De,ft])=>{oe[De]+=ft})}),oe},[ce]),ut=A.useMemo(()=>Xh(ce),[ce]),dt=A.useMemo(()=>{const oe=t.gamification||{},$e={...oe.achievementProgress||{}},De=oe.xp||0,ft=oe.level||1,rr=oe.inventory||[],Qt=oe.completedQuests||[],En=oe.engagementStreak||0,Ia=oe.loginStreak||0,Ms=oe.tutoringSessionsCompleted||0,jn=oe.bossesDefeated||0,vn=oe.challengesCompleted||0,Co=oe.itemsCrafted||0,Or=(hs,yi)=>{(!$e[hs]||yi>$e[hs])&&($e[hs]=yi)};return Or("first_steps",De),Or("xp_5k",De),Or("xp_25k",De),Or("rising_star",ft),Or("veteran",ft),Or("elite",ft),Or("legend",ft),Or("collector_10",rr.length),Or("collector_50",rr.length),Or("gear_score_100",ut),Or("gear_score_500",ut),Or("first_mission",Qt.length),Or("mission_5",Qt.length),Or("mission_20",Qt.length),Or("boss_slayer",jn),Or("streak_3",En),Or("streak_8",En),Or("streak_16",En),Or("login_7",Ia),Or("login_30",Ia),Or("challenges_10",vn),Or("tutor_1",Ms),Or("tutor_10",Ms),Or("tech_50",nt.tech),Or("focus_50",nt.focus),Or("analysis_50",nt.analysis),Or("charisma_50",nt.charisma),Or("craft_10",Co),$e},[t,ut,nt]),Ft=[{subject:"Tech",A:nt.tech,fullMark:100},{subject:"Focus",A:nt.focus,fullMark:100},{subject:"Analysis",A:nt.analysis,fullMark:100},{subject:"Charisma",A:nt.charisma,fullMark:100}],tr=A.useMemo(()=>{const oe={};return e.filter(ve=>{var $e,De;if(ve.classType!==m||ve.status==="DRAFT"||ve.status==="ARCHIVED"||ve.scheduledAt&&new Date(ve.scheduledAt)>new Date)return!1;if(($e=ve.targetSections)!=null&&$e.length){const ft=((De=t.classSections)==null?void 0:De[m])||t.section||"";if(!ve.targetSections.includes(ft))return!1}return!0}).forEach(ve=>{var ft;const $e=r.find(rr=>rr.assignmentId===ve.id),De=ve.unit||"General Resources";oe[De]||(oe[De]=[]),oe[De].push({...ve,lastEngagement:$e&&$e.submittedAt||null,engagementTime:((ft=$e==null?void 0:$e.metrics)==null?void 0:ft.engagementTime)||0})}),oe},[e,r,m]),kr=oe=>{const ve=new Set(h);ve.has(oe)?ve.delete(oe):ve.add(oe),p(ve)},be=((hr=t.gamification)==null?void 0:hr.level)||1,st=((on=t.gamification)==null?void 0:on.currency)||0,Et=re,Dt=Et%1e3/1e3*100,$t=Sz(Et),Ze=Sz(st),ir=Qh(be),br=async oe=>{const ve=oe.target.value;y(ve),await Re.switchUserView(t.id,ve)},Lr=async oe=>{if(!B){$(!0);try{await Re.equipItem(t.id,oe,m),D(null),Un.equip(),c.success(`${oe.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{$(!1)}}},hn=async oe=>{$(!0);try{await Re.unequipItem(t.id,oe,m),D(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{$(!1)}},xr=async()=>{if(!z)return;if(Object.values(ce).some($e=>$e&&$e.id===z.id)){c.error("Unequip this item before salvaging.");return}const ve=oM(z);if(await d({message:`Salvage ${z.name} for ${ve} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){$(!0);try{await Re.disenchantItem(t.id,z,m),D(null),Un.salvage(),c.success(`Salvaged for ${ve} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{$(!1)}}},Gt=async oe=>{if(!z)return;const ve=Ki[oe];if(st<ve)return c.error("Insufficient Cyber-Flux.");$(!0);try{await Re.craftItem(t.id,z,oe,m),D(null),Un.craft(),c.success(`${oe.charAt(0)+oe.slice(1).toLowerCase()} complete.`)}catch($e){const De=($e==null?void 0:$e.message)||($e==null?void 0:$e.code)||"Unknown error";c.error(`Fabrication failed: ${De}`)}finally{$(!1)}},Ut=((Kr=t.gamification)==null?void 0:Kr.gemsInventory)||[],_t=async()=>{if(!(!z||B)){if(st<Ki.SOCKET)return c.error("Insufficient Cyber-Flux.");if((z.sockets||0)>=3)return c.error("Maximum sockets reached.");$(!0);try{const oe=await Re.addSocket(z.id,m);D(oe.item),Un.craft(),c.success("Socket added!")}catch(oe){c.error((oe==null?void 0:oe.message)||"Failed to add socket.")}finally{$(!1)}}},Br=async oe=>{if(!(!z||B)){if(st<Ki.ENCHANT)return c.error("Insufficient Cyber-Flux.");$(!0);try{const ve=await Re.socketGem(z.id,oe,m);D(ve.item),Un.craft(),ve.runewordActivated?(Un.levelUp(),c.success(`RUNEWORD ACTIVATED: ${ve.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(ve){c.error((ve==null?void 0:ve.message)||"Failed to socket gem.")}finally{$(!1)}}},sn=async oe=>{var De;if(!z||B)return;const ve=(De=z.gems)==null?void 0:De[oe];if(!ve)return;const $e=sM(z.rarity,ve.tier,z.unsocketCount||0);if(st<$e)return c.error(`Insufficient Cyber-Flux. Need ${$e}.`);$(!0);try{const ft=await Re.unsocketGem(z.id,oe,m);D(ft.item),Un.craft(),c.success(`Gem removed! -${ft.cost} Flux`)}catch(ft){c.error((ft==null?void 0:ft.message)||"Failed to unsocket gem.")}finally{$(!1)}},Wr=((yn=t.gamification)==null?void 0:yn.activeQuests)||[],$r=((Cr=t.gamification)==null?void 0:Cr.completedQuests)||[],fn=S.filter(oe=>Wr.some(ve=>ve.questId===oe.id)),cr=S.filter(oe=>!Wr.some(ve=>ve.questId===oe.id)&&!$r.includes(oe.id)),ga=async oe=>{try{await Re.acceptQuest(t.id,oe.id),Un.questAccept(),c.success(`Contract accepted: ${oe.title}`)}catch{c.error("Failed to accept contract.")}},pn=async oe=>{const ve=oe.type==="CUSTOM";if(await d({message:ve?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:ve?"Submit":"Deploy",variant:"info"}))try{await Re.deployMission(t.id,oe),Un.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},Rn=["HEAD","HANDS","RING1","AMULET"],ti=["CHEST","BELT","FEET","RING2"],[Tr,mn]=A.useState(null),ri=I_e(cz(wj,{activationConstraint:{distance:8}}),cz(bX,{activationConstraint:{delay:150,tolerance:5}})),Wn=oe=>oe==="RING1"||oe==="RING2"?["RING"]:[oe],Jr=oe=>{const{active:ve}=oe,$e=We.find(De=>De.id===ve.id)||Object.values(ce).find(De=>De&&De.id===ve.id);mn($e||null)},gn=oe=>{const{active:ve,over:$e}=oe;if(mn(null),!$e)return;const De=ve.id,ft=$e.id;if(ft.startsWith("slot-")){const rr=ft.replace("slot-",""),Qt=We.find(Ia=>Ia.id===De);if(!Qt||!Wn(rr).includes(Qt.slot))return;Lr(Qt)}if(De.startsWith("equipped-")&&(ft==="inventory-zone"||ft.startsWith("storage-cell-"))){const rr=De.replace("equipped-","");hn(rr)}},An=(oe,ve,$e="w-5 h-5")=>{const De=`${$e} ${ve}`,ft={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(oe){case"HEAD":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),s.jsx("path",{d:"M5 11v2h14v-2"}),s.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),s.jsx("path",{d:"M6 4h12"}),s.jsx("path",{d:"M12 4v5"}),s.jsx("path",{d:"M9 9h6"})]});case"HANDS":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),s.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),s.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),s.jsx("path",{d:"M4 19h16"}),s.jsx("path",{d:"M11 3v4"})]});case"BELT":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),s.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),s.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),s.jsx("path",{d:"M12 7v3"}),s.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return s.jsxs("svg",{className:De,...ft,children:[s.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),s.jsx("path",{d:"M12 9V6"}),s.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return s.jsx(Ox,{className:De})}},ni=({slot:oe})=>{const ve=ce[oe],$e=ve?ca(ve.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:De,isOver:ft}=_j({id:`slot-${oe}`}),{attributes:rr,listeners:Qt,setNodeRef:En,isDragging:Ia}=AX({id:ve?`equipped-${oe}`:`empty-slot-${oe}`,disabled:!ve}),Ms=Tr&&Wn(oe).includes(Tr.slot),jn=ft&&Ms?"ring-2 ring-purple-500 scale-110":Tr&&Ms?"ring-1 ring-purple-500/40 animate-pulse":"";return s.jsx("div",{ref:De,className:"relative",children:s.jsx("div",{ref:En,...rr,...Qt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${Ia?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${$e.border} ${$e.bg} ${$e.shimmer} ${$e.glow} ${jn}`,onClick:()=>!Ia&&ve&&D(ve),children:ve?s.jsxs(s.Fragment,{children:[An(oe.replace(/\d/,""),$e.text),s.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${$e.text}`,children:ve.baseName||ve.name.split(" ").slice(-1)[0]}),!Ia&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${$e.text}`,children:ve.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ve.rarity," ",oe]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ve.stats).map(([vn,Co])=>`+${Co} ${vn.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):s.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:oe.slice(0,4)})})})};return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[Pt.length>0&&s.jsx("div",{className:"lg:col-span-12 space-y-2",children:Pt.map(oe=>{const ve={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return s.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${ve[oe.priority]}`,children:[s.jsx(Mx,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white",children:oe.title}),s.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:oe.content})]}),s.jsx("button",{onClick:()=>Me(oe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:s.jsx(Na,{className:"w-4 h-4"})})]},oe.id)})}),v&&s.jsx("div",{className:"lg:col-span-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:s.jsx(ka,{className:"w-5 h-5 fill-current"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[v.title," ACTIVE"]}),s.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",v.multiplier,"x XP on all tasks."]})]})]}),s.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[v.multiplier,"x"]})]})}),s.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[s.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${ir.tierColor.split(" ")[0]} border-opacity-30`,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[s.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${ir.tierGlow} shadow-xl`,children:s.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${ir.tierColor.split(" ")[0]}`})}),s.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Rs=t.gamification)==null?void 0:Rs.codename)||t.name}),s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${ir.tierColor.split(" ")[1]}`,children:[ir.rankName," (Lvl ",be,")"]}),s.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",ut]})]}),St.length>1&&s.jsxs("div",{className:"mt-4 relative w-full",children:[s.jsx("select",{value:m,onChange:br,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:St.map(oe=>s.jsx("option",{value:oe,children:oe},oe))}),s.jsx(Ni,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),s.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Dt}%`}})}),s.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[s.jsxs("span",{children:[$t.toLocaleString()," XP (",m,")"]}),s.jsx("span",{children:"Next Rank"}),xe&&s.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",xe," XP"]})]})]})]}),s.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:s.jsx(J5,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),s.jsx("div",{className:"text-xl font-black text-white leading-none",children:Ze})]})]})}),(((cs=t.gamification)==null?void 0:cs.engagementStreak)||0)>0&&(()=>{var $e;const oe=(($e=t.gamification)==null?void 0:$e.engagementStreak)||0,ve=tNe(oe);return s.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:s.jsx(zd,{className:"w-6 h-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),s.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[oe,"w"]})]}),ve>1&&s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),s.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((ve-1)*100),"%"]})]})]})})})(),(((oo=t.gamification)==null?void 0:oo.loginStreak)||0)>1&&s.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(Ale,{className:"w-5 h-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),s.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((dl=t.gamification)==null?void 0:dl.loginStreak)||0," day streak"]})]})]}),s.jsxs("button",{onClick:()=>Xe(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[s.jsx(Gh,{className:"w-4 h-4"})," View Profile"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&s.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:s.jsx(k2,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),s.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),s.jsx(_u,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&s.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:s.jsx(gle,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),s.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),s.jsx(_u,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),s.jsx("div",{className:"lg:col-span-9 space-y-6",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[E==="MISSIONS"&&s.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[cr.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),cr.map(oe=>s.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"text-lg font-bold text-white",children:oe.title}),s.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:oe.type.replace("_"," ")})]}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:oe.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[oe.statRequirements&&s.jsx("div",{className:"flex gap-2",children:Object.entries(oe.statRequirements).map(([ve,$e])=>s.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[$e," ",ve]},ve))}),oe.expiresAt&&s.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[s.jsx(Os,{className:"w-3 h-3"})," Expires: ",new Date(oe.expiresAt).toLocaleDateString()]})]}),s.jsxs("button",{onClick:()=>ga(oe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[s.jsx(Ud,{className:"w-4 h-4"})," Accept Contract"]})]},oe.id))]}),s.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[fn.length===0&&s.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),fn.map(oe=>{var ft,rr;const ve=((ft=Wr.find(Qt=>Qt.questId===oe.id))==null?void 0:ft.status)||"ACCEPTED",$e=(rr=Wr.find(Qt=>Qt.questId===oe.id))==null?void 0:rr.deploymentRoll,De=oe.type==="CUSTOM";return s.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:s.jsx(Jo,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:oe.title}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[oe.type," MISSION"]})]})]}),s.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${ve==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":ve==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":ve==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:ve})]}),ve==="ACCEPTED"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:oe.description}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>pn(oe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[s.jsx(bH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),De?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),oe.isGroupQuest&&s.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:s.jsx(is,{className:"w-5 h-5"})})]})]}):ve==="DEPLOYED"?s.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),s.jsx(ka,{className:"w-6 h-6 text-purple-400"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),s.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:De?"AWAITING_HQ_SIG_VERIFICATION":$e===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),s.jsx("div",{className:"h-10 w-px bg-white/5"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),s.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),s.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),s.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:De?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},oe.id)})]})]},"missions"),E==="RESOURCES"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(tr).length===0?s.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):s.jsx("div",{className:"space-y-4",children:Object.entries(tr).sort().map(([oe,ve])=>s.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>kr(oe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h.has(oe)?s.jsx(Ni,{className:"w-4 h-4 text-purple-400"}):s.jsx(_u,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:oe})]}),s.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[ve.length," Files"]})]}),h.has(oe)&&s.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:ve.map($e=>{const De=!!$e.dueDate,ft=$e.dueDate?new Date($e.dueDate):null,rr=new Date,Qt=ft?Math.ceil((ft.getTime()-rr.getTime())/864e5):1/0,En=Qt<=0?"text-red-400":Qt<=2?"text-yellow-400":"text-gray-500",Ia=Math.floor($e.engagementTime/60),Ms=Ia>=5,jn=j[$e.id],vn=jn==null?void 0:jn.completed;return s.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${vn?"border-green-500/20":"border-white/5"}`,onClick:()=>i&&i($e.id),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${vn||Ms?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":$e.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:vn?s.jsx(an,{className:"w-6 h-6"}):Ms?s.jsx(an,{className:"w-6 h-6"}):$e.lastEngagement?s.jsx(an,{className:"w-5 h-5 opacity-60"}):kNe[$e.category||"Supplemental"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:$e.category}),s.jsx("h4",{className:"font-bold text-white text-sm truncate",children:$e.title}),vn&&s.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[s.jsx(an,{className:"w-2.5 h-2.5"}),"COMPLETED",((jn==null?void 0:jn.totalCompletions)||0)>1?` (${jn.totalCompletions}x)`:""]})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsx("p",{className:"text-xs text-gray-500 truncate",children:$e.description})}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[$e.lastEngagement&&s.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[Ia,"m engaged"]}),vn&&(jn==null?void 0:jn.bestScore)!=null&&jn.bestScore>0&&s.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",jn.bestScore,"%"]}),De&&s.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${En}`,children:[s.jsx(eo,{className:"w-3 h-3"}),Qt<=0?"Overdue":Qt===1?"Due tomorrow":`Due in ${Qt}d`]})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:s.jsx(V7,{className:"w-4 h-4 text-purple-400 fill-current"})})]},$e.id)})})]},oe))})},"resources"),E==="LOADOUT"&&s.jsxs(OTe,{sensors:ri,collisionDetection:B_e,modifiers:[jNe],onDragStart:Jr,onDragEnd:gn,children:[s.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[s.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((us=Fe.appearance)==null?void 0:us.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),s.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[s.jsx("div",{className:"flex flex-col gap-4",children:Rn.map(oe=>s.jsx(ni,{slot:oe},oe))}),s.jsx("div",{className:"w-40 h-full relative",children:s.jsx(Hg,{equipped:ce,appearance:Fe.appearance,evolutionLevel:be})}),s.jsx("div",{className:"flex flex-col gap-4",children:ti.map(oe=>s.jsx(ni,{slot:oe},oe))})]}),s.jsxs("button",{onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),k(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[s.jsx(Rle,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),s.jsx("div",{className:"h-[200px]",children:s.jsx(PW,{width:"100%",height:"100%",children:s.jsxs(y_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:Ft,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),s.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),s.jsx(iQ,{stroke:"rgba(255,255,255,0.08)"}),s.jsx(N1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),s.jsx(T1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),s.jsx(A1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const oe=OG(nt);return s.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),s.jsx("span",{className:"text-gray-500",children:"Tech"}),s.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:nt.tech}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),s.jsx("br",{}),"Increases damage dealt to bosses."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),s.jsx("span",{className:"text-gray-500",children:"Focus"}),s.jsx("span",{className:"text-green-400 font-bold ml-auto",children:nt.focus}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),s.jsx("br",{}),"Crit chance: ",(oe.critChance*100).toFixed(0),"%  Crit damage: ",oe.critMultiplier.toFixed(2),"x"]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),s.jsx("span",{className:"text-gray-500",children:"Analysis"}),s.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:nt.analysis}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),s.jsx("br",{}),"Reduces boss damage by ",oe.armorPercent.toFixed(0),"%."]})]}),s.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),s.jsx("span",{className:"text-gray-500",children:"Charisma"}),s.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:nt.charisma}),s.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[s.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),s.jsx("br",{}),"Max HP: ",oe.maxHp]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"HP"}),s.jsx("span",{className:"text-emerald-400 font-bold",children:oe.maxHp})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Armor"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:[oe.armorPercent.toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-gray-600 block",children:"Crit"}),s.jsxs("span",{className:"text-green-400 font-bold",children:[(oe.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),s.jsx(ONe,{inventory:We,equipped:ce,draggedItem:Tr,onInspect:D,getSlotIcon:An})]},"loadout"),s.jsx(QTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Tr&&(()=>{const oe=ca(Tr.rarity);return s.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:s.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${oe.bg} ${oe.border} ${oe.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[An(Tr.slot,oe.text,"w-7 h-7"),s.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${oe.text} drop-shadow-lg`,children:Tr.baseName||Tr.name.split(" ").slice(-1)[0]})]})})})()})]}),E==="ACHIEVEMENTS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(nNe,{unlockedAchievements:((ds=t.gamification)==null?void 0:ds.unlockedAchievements)||[],achievementProgress:dt})},"achievements"),E==="SKILLS"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(iNe,{specialization:(Oa=t.gamification)==null?void 0:Oa.specialization,skillPoints:((ya=t.gamification)==null?void 0:ya.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),E==="FORTUNE"&&s.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(sNe,{currency:st,lastSpin:(we=t.gamification)==null?void 0:we.lastWheelSpin,classType:m})},"fortune"),E==="TUTORING"&&s.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(_Ne,{userId:t.id,userName:t.name,classType:m})},"tutoring")]})}),s.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:s.jsx(wNe,{userId:t.id,activeChallenges:((Te=t.gamification)==null?void 0:Te.activeDailyChallenges)||[],classType:m})}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[s.jsx(uNe,{userId:t.id,userName:t.name,classType:m}),s.jsx(bNe,{userId:t.id,classType:m,userSection:((Ne=t.classSections)==null?void 0:Ne[m])||t.section,userClassSections:t.classSections,playerStats:nt,playerAppearance:Fe.appearance,playerEquipped:ce,playerEvolutionLevel:be})]})]}),s.jsx(Ti,{isOpen:N,onClose:()=>{k(!1),W(null),J(null),he(null),Z(null),ae(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:s.jsx(Hg,{equipped:ce,appearance:{...Fe.appearance,hue:K??((mt=Fe.appearance)==null?void 0:mt.hue)??0,bodyType:H??((Ot=Fe.appearance)==null?void 0:Ot.bodyType)??"A",skinTone:ie??((At=Fe.appearance)==null?void 0:At.skinTone)??0,hairStyle:pe??((Yt=Fe.appearance)==null?void 0:Yt.hairStyle)??1,hairColor:ne??((wr=Fe.appearance)==null?void 0:wr.hairColor)??0}})})}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),s.jsx("div",{className:"flex justify-center gap-2",children:EX.map((oe,ve)=>{var De;const $e=(ie??((De=Fe.appearance)==null?void 0:De.skinTone)??0)===ve;return s.jsx("button",{onClick:()=>he(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},ve)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:XTe.map((oe,ve)=>{var De;const $e=(pe??((De=Fe.appearance)==null?void 0:De.hairStyle)??1)===ve;return s.jsx("button",{onClick:()=>Z(ve),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${$e?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:oe},ve)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),s.jsx("div",{className:"flex justify-center gap-2",children:jX.map((oe,ve)=>{var De;const $e=(ne??((De=Fe.appearance)==null?void 0:De.hairColor)??0)===ve;return s.jsx("button",{onClick:()=>ae(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},ve)})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),s.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(oe=>{var $e;const ve=(H??(($e=Fe.appearance)==null?void 0:$e.bodyType)??"A")===oe;return s.jsx("button",{onClick:()=>J(oe),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${ve?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:oe==="A"?"Alpha":oe==="B"?"Beta":"Femme"},oe)})})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[s.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(oe=>{var $e;const ve=(K??(($e=Fe.appearance)==null?void 0:$e.hue)??0)===oe;return s.jsx("button",{onClick:()=>W(oe),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${ve?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${oe}, 60%, 45%)`}},oe)})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{k(!1),W(null),J(null),he(null),Z(null),ae(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),s.jsx("button",{onClick:()=>{var oe,ve,$e,De,ft;return bt({hue:K??((oe=Fe.appearance)==null?void 0:oe.hue)??0,bodyType:H??((ve=Fe.appearance)==null?void 0:ve.bodyType)??"A",skinTone:ie??(($e=Fe.appearance)==null?void 0:$e.skinTone)??0,hairStyle:pe??((De=Fe.appearance)==null?void 0:De.hairStyle)??1,hairColor:ne??((ft=Fe.appearance)==null?void 0:ft.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),s.jsx(Ti,{isOpen:!!z,onClose:()=>D(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:z&&s.jsxs("div",{className:"space-y-6 text-gray-100",children:[s.jsxs("div",{className:`p-5 rounded-xl border ${z.runewordActive?"border-amber-500/40 runeword-active":ca(z.rarity).border} ${ca(z.rarity).bg} ${ca(z.rarity).shimmer} relative overflow-hidden`,children:[s.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[s.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${z.runewordActive?"border-amber-500/50":ca(z.rarity).border} ${ca(z.rarity).bg}`,style:{boxShadow:z.runewordActive?"0 0 20px rgba(245,158,11,0.3)":z.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":z.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:An(z.slot,z.runewordActive?"text-amber-400":ca(z.rarity).text,"w-7 h-7")}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`text-lg font-bold ${z.runewordActive?"text-amber-300":ca(z.rarity).text}`,children:z.name}),s.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[z.rarity," ",z.slot]}),z.runewordActive&&s.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(en=lM(z))==null?void 0:en.name})]})]}),s.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(z.stats).map(([oe,ve])=>s.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[s.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:oe}),s.jsxs("span",{className:"font-mono font-bold",children:["+",ve]})]},oe))}),s.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:z.affixes.map((oe,ve)=>s.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[oe.name," (T",oe.tier,")"]},ve))})]}),(z.sockets||0)>0&&(()=>{const oe=z.sockets||0,ve=z.gems||[],$e=oe-ve.length,De=lM(z);return s.jsxs("div",{className:`p-4 rounded-xl border ${De?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[De&&s.jsxs("div",{className:"mb-3 text-center",children:[s.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),s.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:De.name}),s.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:De.lore}),s.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(De.bonusStats).map(([ft,rr])=>s.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",rr," ",ft.slice(0,3).toUpperCase()]},ft))}),De.bonusEffects&&De.bonusEffects.length>0&&s.jsx("div",{className:"mt-1",children:De.bonusEffects.map(ft=>s.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:ft.description},ft.id))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[s.jsx(J5,{className:"w-3 h-3"})," Gem Sockets (",ve.length,"/",oe,")"]}),s.jsxs("div",{className:"flex gap-2",children:[ve.map((ft,rr)=>{const Qt=sM(z.rarity,ft.tier,z.unsocketCount||0);return s.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:ft.color,backgroundColor:`${ft.color}20`,boxShadow:`0 0 8px ${ft.color}40`},children:s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ft.color}})}),s.jsx("span",{className:"text-[9px] text-gray-400",children:ft.name}),s.jsxs("button",{onClick:()=>sn(rr),disabled:B||st<Qt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Qt} Flux`,children:["Remove (",Qt," F)"]})]},rr)}),Array.from({length:$e}).map((ft,rr)=>s.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${rr}`))]}),$e>0&&Ut.length>0&&s.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[s.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Ki.ENCHANT," Flux)"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Ut.map(ft=>s.jsxs("button",{onClick:()=>Br(ft.id),disabled:B||st<Ki.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ft.color}}),s.jsx("span",{className:"text-gray-300",children:ft.name}),s.jsxs("span",{className:"text-gray-600 font-mono",children:["+",ft.value]})]},ft.id))}),ve.length>0&&!De&&(()=>{const ft=ve.map(Qt=>Qt.name),rr=CG.filter(Qt=>Qt.requiredSockets===oe&&Qt.pattern.slice(0,ft.length).every((En,Ia)=>En===ft[Ia]));return rr.length===0?null:s.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:rr.map(Qt=>s.jsxs("div",{children:["Possible: ",s.jsx("span",{className:"font-bold text-amber-400/80",children:Qt.name}),"  needs [",Qt.pattern.join("  "),"]"]},Qt.id))})})()]})]})})(),(z.sockets||0)<3&&s.jsxs("button",{onClick:_t,disabled:B||st<Ki.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(J5,{className:"w-4 h-4"}),"Add Socket (",Ki.SOCKET," Flux)  ",z.sockets||0,"/3"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const oe=z.slot==="RING"?"RING1":z.slot,ve=ce[oe]||(z.slot==="RING"?ce.RING2:null);if(!ve||ve.id===z.id)return null;const $e=ca(ve.rarity),De=new Set([...Object.keys(z.stats),...Object.keys(ve.stats)]);return s.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[s.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-xs font-bold ${$e.text}`,children:ve.name}),s.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:ve.rarity})]}),s.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(De).map(ft=>{const rr=z.stats[ft]||0,Qt=ve.stats[ft]||0,En=rr-Qt;return En===0?s.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[ft.slice(0,3).toUpperCase(),": 0"]},ft):s.jsxs("span",{className:`text-[10px] font-mono font-bold ${En>0?"text-green-400":"text-red-400"}`,children:[ft.slice(0,3).toUpperCase(),": ",En>0?"":"",Math.abs(En)]},ft)})})]})})(),(()=>{var ve;const oe=(ve=Object.entries(ce).find(([,$e])=>$e&&$e.id===z.id))==null?void 0:ve[0];return oe?s.jsx("button",{onClick:()=>hn(oe),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:B,children:"Unequip Gear"}):s.jsx("button",{onClick:()=>Lr(z),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:B,children:"Equip Gear"})})(),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),s.jsxs("button",{onClick:()=>Gt("RECALIBRATE"),disabled:B||st<Ki.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.RECALIBRATE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),s.jsxs("button",{onClick:()=>Gt("REFORGE"),disabled:B||st<Ki.REFORGE||z.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.REFORGE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),s.jsxs("button",{onClick:()=>Gt("OPTIMIZE"),disabled:B||st<Ki.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),s.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.OPTIMIZE," Flux"]})]}),s.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),s.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),s.jsxs("button",{onClick:xr,disabled:B,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[s.jsx(aa,{className:"w-4 h-4"}),"Salvage for ",oM(z)," Flux"]})]})]})}),Ue&&s.jsx(ENe,{user:t,classType:m,onClose:()=>Xe(!1)}),Ye&&s.jsx(TNe,{item:Ye,onClose:()=>Q(null)}),s.jsx(Ti,{isOpen:R,onClose:tt,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:s.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((oe,ve)=>s.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][ve%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},ve))}),s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),s.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),s.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:s.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:be})})]}),s.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:s.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:ir.rankName})}),s.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&s.jsxs("div",{className:`${ca(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${ca(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),s.jsx("div",{className:`text-xl font-bold ${ca(C.rarity).text}`,children:C.name}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),s.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([oe,ve])=>s.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",ve," ",oe.toUpperCase()]},oe))})]})]}),s.jsx("button",{onClick:tt,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},ONe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:o}=_j({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return s.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":o?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[s.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[s.jsxs("span",{children:["Gear Storage (",t.length,")"]}),s.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[s.jsx(sle,{className:"w-3 h-3"})," Drag to equip"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>s.jsx(RNe,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>s.jsx(INe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},INe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=_j({id:`storage-cell-${t}`});return s.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},RNe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:o,isDragging:c}=AX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=ca(t.rarity);return s.jsxs("div",{ref:o,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&s.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[s.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),s.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Cw=typeof self<"u"?self:global;const Gg=typeof navigator<"u",MNe=Gg&&typeof HTMLImageElement>"u",Zb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),Ow=Cw.Buffer,Pv=Cw.BigInt,Iw=!!Ow,PNe=t=>t;function Jb(t,e=PNe){if(Zb)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let Nj=Cw.fetch;const DNe=t=>Nj=t;if(!Cw.fetch){const t=Jb("http",(n=>n)),e=Jb("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,o)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(y.port=Number(c));const v=(p==="https:"?await e:await t).request(y,(_=>{if(_.statusCode===301||_.statusCode===302){let S=new URL(_.headers.location,n).toString();return r(S,{headers:a}).then(i).catch(o)}i({status:_.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];_.on("data",(j=>w.push(j))),_.on("end",(()=>S(Buffer.concat(w))))}))})}));v.on("error",o),v.end()}));DNe(r)}function Jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const e2=t=>IX(t)?void 0:t,LNe=t=>t!==void 0;function IX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(LNe).length===0)}function ja(t){let e=new Error(t);throw delete e.stack,e}function Md(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function f8(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const p8=t=>String.fromCharCode.apply(null,t),jz=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function RX(t){return jz?jz.decode(t):Iw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(p8(t)))}class Ji{static from(e,r){return e instanceof this&&e.le===r?e:new Ji(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ji){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&ja("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else ja("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=Ji){return e instanceof DataView||e instanceof Ji?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||ja("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new Ji(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return RX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return p8(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return p8(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function m8(t,e){ja(`${t} '${e}' was not loaded, try using full build of exifr.`)}class Aj extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||m8(this.kind,e),r&&(e in r||(function(n,a){ja(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||m8(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var nl=new Aj("file parser"),Aa=new Aj("segment parser"),ul=new Aj("file reader");function BNe(t,e){return typeof t=="string"?kz(t,e):Gg&&!MNe&&t instanceof HTMLImageElement?kz(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Ji(t):Gg&&t instanceof Blob?g8(t,e,"blob",c0):void ja("Invalid input argument")}function kz(t,e){return(r=t).startsWith("data:")||r.length>1e4?y8(t,e,"base64"):Zb&&t.includes("://")?g8(t,e,"url",l0):Zb?y8(t,e,"fs"):Gg?g8(t,e,"url",l0):void ja("Invalid input argument");var r}async function g8(t,e,r,n){return ul.has(r)?y8(t,e,r):n?(async function(a,i){let o=await i(a);return new Ji(o)})(t,n):void ja(`Parser ${r} is not loaded`)}async function y8(t,e,r){let n=new(ul.get(r))(t,e);return await n.read(),n}const l0=t=>Nj(t).then((e=>e.arrayBuffer())),c0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class $Ne extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function pa(t,e,r){let n=new $Ne;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function u0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const Ja=new Map,ko=new Map,Nu=new Map,mu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],qf=["jfif","xmp","icc","iptc","ihdr"],d0=["tiff",...qf],ra=["ifd0","ifd1","exif","gps","interop"],gu=[...d0,...ra],yu=["makerNote","userComment"],Hf=["translateKeys","translateValues","reviveValues","multiSegment"],vu=[...Hf,"sanitize","mergeOutput","silentErrors"];class MX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class em extends MX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),Jt(this,"enabled",!1),Jt(this,"skip",new Set),Jt(this,"pick",new Set),Jt(this,"deps",new Set),Jt(this,"translateKeys",!1),Jt(this,"translateValues",!1),Jt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=ra.includes(e),this.canBeFiltered&&(this.dict=Ja.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:o}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:ja(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of Hf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:o}=this.dict;for(n of e)typeof n=="string"?(a=o.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,t2(this.pick,this.deps)):this.enabled&&this.pick.size>0&&t2(this.pick,this.deps)}}var Ii={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Cz=new Map;class w0 extends MX{static useCached(e){let r=Cz.get(e);return r!==void 0||(r=new this(e),Cz.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):ja(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Gg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of mu)this[e]=Ii[e];for(e of vu)this[e]=Ii[e];for(e of yu)this[e]=Ii[e];for(e of gu)this[e]=new em(e,Ii[e],void 0,this)}setupFromTrue(){let e;for(e of mu)this[e]=Ii[e];for(e of vu)this[e]=Ii[e];for(e of yu)this[e]=!0;for(e of gu)this[e]=new em(e,!0,void 0,this)}setupFromArray(e){let r;for(r of mu)this[r]=Ii[r];for(r of vu)this[r]=Ii[r];for(r of yu)this[r]=Ii[r];for(r of gu)this[r]=new em(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,ra)}setupFromObject(e){let r;for(r of(ra.ifd0=ra.ifd0||ra.image,ra.ifd1=ra.ifd1||ra.thumbnail,Object.assign(this,e),mu))this[r]=LT(e[r],Ii[r]);for(r of vu)this[r]=LT(e[r],Ii[r]);for(r of yu)this[r]=LT(e[r],Ii[r]);for(r of d0)this[r]=new em(r,Ii[r],e[r],this);for(r of ra)this[r]=new em(r,Ii[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ra,gu),e.tiff===!0?this.batchEnableWithBool(ra,!0):e.tiff===!1?this.batchEnableWithUserValue(ra,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ra):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ra)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let o of a)this[o].enabled=!1;let i=Oz(e,n);for(let[o,c]of i)t2(this[o].pick,c),this[o].enabled=!0}else if(r&&r.length){let i=Oz(r,n);for(let[o,c]of i)t2(this[o].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ra.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of ra)this[i].finalizeFilters()}get onlyTiff(){return!qf.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of d0)this[e].enabled&&!Aa.has(e)&&m8("segment parser",e)}}function Oz(t,e){let r,n,a,i,o=[];for(a of e){for(i of(r=Ja.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&o.push([a,n])}return o}function LT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function t2(t,e){for(let r of e)t.add(r)}Jt(w0,"default",Ii);class qu{constructor(e){Jt(this,"parsers",{}),Jt(this,"output",{}),Jt(this,"errors",[]),Jt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=w0.useCached(e)}async read(e){this.file=await BNe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of nl)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),ja("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),e2(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Aa.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),o=this.parsers.tiff=new n(i,e,r),c=await o.extractThumbnail();return r.close&&r.close(),c}}async function Rw(t,e){let r=new qu(e);return await r.read(t),r.parse()}var UNe=Object.freeze({__proto__:null,parse:Rw,Exifr:qu,fileParsers:nl,segmentParsers:Aa,fileReaders:ul,tagKeys:Ja,tagValues:ko,tagRevivers:Nu,createDictionary:pa,extendDictionary:u0,fetchUrlAsArrayBuffer:l0,readBlobAsArrayBuffer:c0,chunkedProps:mu,otherSegments:qf,segments:d0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Hf,allFormatters:vu,Options:w0});class Mw{constructor(e,r,n){Jt(this,"errors",[]),Jt(this,"ensureSegmentChunk",(async a=>{let i=a.start,o=a.size||65536;if(this.file.chunked)if(this.file.available(i,o))a.chunk=this.file.subarray(i,o);else try{a.chunk=await this.file.readChunk(i,o)}catch(c){ja(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+o?a.chunk=this.file.subarray(i,o):a.size===void 0?a.chunk=this.file.subarray(i):ja("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Aa.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class So{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,o=n-a;return{offset:r,length:n,headerLength:a,start:i,size:o,end:i+o}}static parse(e,r={}){return new this(e,new w0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof Ji?e:new Ji(e)}constructor(e,r={},n){Jt(this,"errors",[]),Jt(this,"raw",new Map),Jt(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Nu.get(r),a=ko.get(r),i=Ja.get(r),o=this.options[r],c=o.reviveValues&&!!n,d=o.translateValues&&!!a,h=o.translateKeys&&!!i,p={};for(let[m,y]of e)c&&n.has(m)?y=n.get(m)(y):d&&a.has(m)&&(y=this.translateValue(y,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Jt(So,"headerLength",4),Jt(So,"type",void 0),Jt(So,"multiSegment",!1),Jt(So,"canHandle",(()=>!1));function zNe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function VNe(t){return t>=224&&t<=239}function FNe(t,e,r){for(let[n,a]of Aa)if(a.canHandle(t,e,r))return n}class Iz extends Mw{constructor(...e){super(...e),Jt(this,"appSegments",[]),Jt(this,"jpegSegments",[]),Jt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Aa.keyList())):(e=e===void 0?Aa.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Aa.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:o}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Aa.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;o.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,o,c,d,{file:h,findAll:p,wanted:m,remaining:y,options:v}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),VNe(n)){if(a=h.getUint16(e+2),i=FNe(h,e,a),i&&m.has(i)&&(o=Aa.get(i),c=o.findPosition(h,e),d=v[i],c.type=i,this.appSegments.push(c),!p&&(o.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(i)):y.delete(i),y.size===0)))break;v.recordUnknownSegments&&(c=So.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(zNe(n)){if(a=h.getUint16(e+2),n===218&&v.stopAfterSos!==!1)return;v.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,o,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?o=c.get(i):c.set(i,o=[]),o.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Aa.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Jt(Iz,"type","jpeg"),nl.set("jpeg",Iz);const qNe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class HNe extends So{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let o=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(o){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),o=a.getUint32(e+4),c=qNe[i];if(c*o<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&ja(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&ja(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,o);if(i===2)return Md(a.getString(e,o));if(i===7)return a.getUint8Array(e,o);if(o===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(o),h=c;for(let p=0;p<o;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:ja(`Invalid tiff type ${e}`)}}}class BT extends HNe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&ja("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&ja(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,f8(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,f8(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Rz(...e.get(2),e.get(1))),e.set("longitude",Rz(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of ra)if(e=this[r],!IX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function Rz(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Jt(BT,"type","tiff"),Jt(BT,"headerLength",10),Aa.set("tiff",BT);var GNe=Object.freeze({__proto__:null,default:UNe,Exifr:qu,fileParsers:nl,segmentParsers:Aa,fileReaders:ul,tagKeys:Ja,tagValues:ko,tagRevivers:Nu,createDictionary:pa,extendDictionary:u0,fetchUrlAsArrayBuffer:l0,readBlobAsArrayBuffer:c0,chunkedProps:mu,otherSegments:qf,segments:d0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Hf,allFormatters:vu,Options:w0,parse:Rw});const Ej={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},jj=Object.assign({},Ej,{firstChunkSize:4e4,gps:[1,2,3,4]});async function PX(t){let e=new qu(jj);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const kj=Object.assign({},Ej,{tiff:!1,ifd1:!0,mergeOutput:!1});async function DX(t){let e=new qu(kj);await e.read(t);let r=await e.extractThumbnail();return r&&Iw?Ow.from(r):r}async function LX(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const Cj=Object.assign({},Ej,{firstChunkSize:4e4,ifd0:[274]});async function Oj(t){let e=new qu(Cj);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const Ij=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Pd=!0,Dd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Pd=Number(r)+.1*Number(n)<13.4,Dd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Pd=Dd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Pd=Dd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Pd=Dd=Number(e)<77}}async function BX(t){let e=await Oj(t);return Object.assign({canvas:Pd,css:Dd},Ij[e])}class WNe extends Ji{constructor(...e){super(...e),Jt(this,"ranges",new KNe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=Iw?Ow.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class KNe{constructor(){Jt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((o=>Mz(e,o.offset,a)||Mz(e,o.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let o=i.shift();o.offset=e,o.length=r,o.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function Mz(t,e,r){return t<=e&&e<=r}class Pw extends WNe{constructor(e,r){super(0),Jt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ul.set("blob",class extends Pw{async readWhole(){this.chunked=!1;let t=await c0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await c0(n);return this.set(a,t,!0)}});var QNe=Object.freeze({__proto__:null,default:GNe,Exifr:qu,fileParsers:nl,segmentParsers:Aa,fileReaders:ul,tagKeys:Ja,tagValues:ko,tagRevivers:Nu,createDictionary:pa,extendDictionary:u0,fetchUrlAsArrayBuffer:l0,readBlobAsArrayBuffer:c0,chunkedProps:mu,otherSegments:qf,segments:d0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Hf,allFormatters:vu,Options:w0,parse:Rw,gpsOnlyOptions:jj,gps:PX,thumbnailOnlyOptions:kj,thumbnail:DX,thumbnailUrl:LX,orientationOnlyOptions:Cj,orientation:Oj,rotations:Ij,get rotateCanvas(){return Pd},get rotateCss(){return Dd},rotation:BX});ul.set("url",class extends Pw{async readWhole(){this.chunked=!1;let t=await l0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await Nj(this.input,{headers:n}),i=await a.arrayBuffer(),o=i.byteLength;if(a.status!==416)return o!==e&&(this.size=t+o),this.set(i,t,!0)}});Ji.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Pv!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Pv(e)<<Pv(32)|Pv(r)):void ja("Trying to read 64b value but JS can only handle 53b numbers.")};class XNe extends Mw{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class $X extends XNe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[o,c]=i;await this.file.ensureChunk(o,c);let d=4+this.file.getUint32(o);o+=d,c-=d,await this.registerSegment("tiff",o,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,o=e.start,c=this.file.getUint16(o);for(o+=2;c--;){if(r=this.parseBoxHead(o),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);o+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[o,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let v=this.file.getUintBytes(n,d);n+=d+h+2+o;let _=this.file.getUint16(n);if(n+=2,v===r)return _>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=_*p}}}class UX extends $X{}Jt(UX,"type","heic");class Pz extends $X{}Jt(Pz,"type","avif"),nl.set("heic",UX),nl.set("avif",Pz),pa(Ja,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),pa(Ja,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),pa(Ja,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),pa(ko,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Rm=pa(ko,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Dz={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Rm.set(37392,Dz),Rm.set(41488,Dz);const $T={0:"Normal",1:"Low",2:"High"};function Lz(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function Bz(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function UT(t){if(typeof t=="string"){var[e,r,n,a,i,o]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(o)||(c.setHours(a),c.setMinutes(i),c.setSeconds(o)),Number.isNaN(+c)?t:c}}function tm(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push($z(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push($z(t[r],t[r+1]));return Md(String.fromCodePoint(...e))}function $z(t,e){return t<<8|e}Rm.set(41992,$T),Rm.set(41993,$T),Rm.set(41994,$T),pa(Nu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?RX(t):t}],[306,UT],[40091,tm],[40092,tm],[40093,tm],[40094,tm],[40095,tm]]),pa(Nu,"exif",[[40960,Bz],[36864,Bz],[36867,UT],[36868,UT],[40962,Lz],[40963,Lz]]),pa(Nu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class zT extends So{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:Ji.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let o={},c={};for(let d of qX)o[d]=[],c[d]=0;return i.replace(eAe,((d,h,p)=>{if(h==="<"){let m=++c[p];return o[p].push(m),`${d}#${m}`}return`${d}#${o[p].pop()}`}))})(e);let r=Ih.findAll(e,"rdf","Description");r.length===0&&r.push(new Ih("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let o of i.properties)n=JNe(o.ns,a),zX(o,n);return(function(i){let o;for(let c in i)o=i[c]=e2(i[c]),o===void 0&&delete i[c];return e2(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}Jt(zT,"type","xmp"),Jt(zT,"multiSegment",!0),Aa.set("xmp",zT);class r2{static findAll(e){return VX(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(r2.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=FX(a),new r2(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Ih{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return VX(e,a).map(Ih.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Ih(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=r2.findAll(n),this.children=Ih.findAll(a),this.value=this.children.length===0?FX(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return ZNe(this.children.map(YNe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)zX(r,e);return this.value!==void 0&&(e.value=this.value),e2(e)}}function zX(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var YNe=t=>t.serialize(),ZNe=t=>t.length===1?t[0]:t,JNe=(t,e)=>e[t]?e[t]:e[t]={};function VX(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function FX(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const qX=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],eAe=new RegExp(`(<|\\/)(${qX.join("|")})`,"g");var tAe=Object.freeze({__proto__:null,default:QNe,Exifr:qu,fileParsers:nl,segmentParsers:Aa,fileReaders:ul,tagKeys:Ja,tagValues:ko,tagRevivers:Nu,createDictionary:pa,extendDictionary:u0,fetchUrlAsArrayBuffer:l0,readBlobAsArrayBuffer:c0,chunkedProps:mu,otherSegments:qf,segments:d0,tiffBlocks:ra,segmentsAndBlocks:gu,tiffExtractables:yu,inheritables:Hf,allFormatters:vu,Options:w0,parse:Rw,gpsOnlyOptions:jj,gps:PX,thumbnailOnlyOptions:kj,thumbnail:DX,thumbnailUrl:LX,orientationOnlyOptions:Cj,orientation:Oj,rotations:Ij,get rotateCanvas(){return Pd},get rotateCss(){return Dd},rotation:BX});let Uz=Jb("fs",(t=>t.promises));ul.set("fs",class extends Pw{async readWhole(){this.chunked=!1,this.fs=await Uz;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Uz,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});ul.set("base64",class extends Pw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,o=r+4*Math.ceil(i/3);a=a.slice(r,o);let c=Math.min(e,this.size-t);if(Iw){let d=Ow.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class zz extends Mw{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(f8(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Jt(zz,"type","tiff"),nl.set("tiff",zz);let rAe=Jb("zlib");const nAe=["ihdr","iccp","text","itxt","exif"];class Vz extends Mw{constructor(...e){super(...e),Jt(this,"catchError",(r=>this.errors.push(r))),Jt(this,"metaChunks",[]),Jt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),o=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:o,offset:e,length:c,start:e+4+4,size:a,marker:i};nAe.includes(o)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,o=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",o),Zb){let c=await rAe,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Jt(Vz,"type","png"),nl.set("png",Vz),pa(Ja,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),u0(Ja,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Fz=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];u0(Ja,"ifd0",Fz),u0(Ja,"exif",Fz),pa(ko,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class VT extends So{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Jt(VT,"type","jfif"),Jt(VT,"headerLength",9),Aa.set("jfif",VT),pa(Ja,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class qz extends So{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Jt(qz,"type","ihdr"),Aa.set("ihdr",qz),pa(Ja,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),pa(ko,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class sx extends So{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,o=0;for(let h of a)o+=h.length;let c=new i(o),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new Ji(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&ja("ICC header is too short");for(let[r,n]of Object.entries(aAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:o}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&o.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Md(this.chunk.getString(e+12,r))}parseText(e,r){return Md(this.chunk.getString(e+8,r-8))}parseSig(e){return Md(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,o=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,y=Md(r.getUnicodeString(m,p));o.push({lang:d,country:h,text:y}),i+=a}return n===1?o[0].text:o}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Jt(sx,"type","icc"),Jt(sx,"multiSegment",!0),Jt(sx,"headerLength",18);const aAe={4:Rl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Rl,16:Rl,20:Rl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),o=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,o,c))},36:Rl,40:Rl,48:Rl,52:Rl,64:(t,e)=>t.getUint32(e),80:Rl};function Rl(t,e){return Md(t.getString(e,4))}Aa.set("icc",sx),pa(Ja,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Dv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Hz={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};pa(ko,"icc",[[4,Dv],[12,Hz],[40,Object.assign({},Dv,Hz)],[48,Dv],[80,Dv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Lv extends So{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),o=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(o,this.pluralizeValue(e.get(o),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Jt(Lv,"type","iptc"),Jt(Lv,"translateValues",!1),Jt(Lv,"reviveValues",!1),Aa.set("iptc",Lv),pa(Ja,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),pa(ko,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const rm=["Monday","Tuesday","Wednesday","Thursday","Friday"],iAe=({user:t})=>{const e=mi(),{confirm:r}=ol(),n=A.useMemo(()=>Re.getWeekId(),[]),[a,i]=A.useState([]),[o,c]=A.useState("Monday"),[d,h]=A.useState(!1),p=A.useRef(null),[m,y]=A.useState(!1),v=t.enrolledClasses||(t.classType?[t.classType]:[]),[_,S]=A.useState(t.classType||v[0]||"Uncategorized");A.useEffect(()=>{const E=new Date().toLocaleDateString("en-US",{weekday:"long"});rm.includes(E)&&c(E)},[]),A.useEffect(()=>{const E=Re.subscribeToEvidence(t.id,n,i);return()=>E()},[t.id,n]);const w=A.useMemo(()=>{const E=v[0]||"Uncategorized";return a.filter(N=>N.classType?N.classType===_:_===E)},[a,_,v]),j=E=>w.find(N=>N.dayOfWeek===E),O=E=>E?new Date(E).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,R=async E=>{var k;const N=(k=E.target.files)==null?void 0:k[0];if(N){h(!0);try{let z=null;if(N.type.startsWith("image/"))try{const ie=await tAe.parse(N,["DateTimeOriginal"])||{};ie.DateTimeOriginal&&(z=ie.DateTimeOriginal.toISOString())}catch(ie){console.warn("EXIF extraction failed",ie)}const D=_.replace(/[^a-zA-Z0-9]/g,"_"),B=Math.random().toString(36).substring(2,9),$=xm(bm,`evidence/${t.id}/${n}/${D}_${o}_${B}`);await TN($,N);const K=await jx($),W=j(o),J={id:`${t.id}_${n}_${o}_${D}`,studentId:t.id,weekId:n,classType:_,dayOfWeek:o,imageUrl:K,timestamp:new Date().toISOString(),exifDate:z,reflection:(W==null?void 0:W.reflection)||""};await Re.uploadEvidence(J)}catch(z){e.error("Upload failed: "+(z instanceof Error?z.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(E,N)=>{const k=j(E);k&&k.reflection!==N&&await Re.uploadEvidence({...k,reflection:N})},C=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${_} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const N=new wZ,k=N.internal.pageSize.getWidth(),z=N.internal.pageSize.getHeight(),D=20,B=k-D*2,$=z-D;N.setFillColor(15,7,32),N.rect(0,0,k,40,"F"),N.setTextColor(255,255,255),N.setFontSize(22),N.setFont("helvetica","bold"),N.text("WEEKLY PROGRESS REPORT",D,18),N.setFontSize(10),N.setFont("helvetica","normal"),N.text(`Operative: ${t.name.toUpperCase()}`,D,28),N.text(`Class: ${_}`,D,33),N.text(`Cycle ID: ${n}`,D,38),N.text(`Generated: ${new Date().toLocaleDateString()}`,k-D,33,{align:"right"});let K=55;const W=[...w].sort((H,J)=>rm.indexOf(H.dayOfWeek)-rm.indexOf(J.dayOfWeek));for(const H of W){let J=null,ie="JPEG",he=0,pe=0,Z=!1;try{const Q=await fetch(H.imageUrl);if(!Q.ok)throw new Error(`Image fetch failed: ${Q.statusText}`);const me=await Q.blob();J=await new Promise((Ge,it)=>{const et=new FileReader;et.onloadend=()=>Ge(et.result),et.onerror=it,et.readAsDataURL(me)}),me.type==="image/png"&&(ie="PNG"),me.type==="image/webp"&&(ie="WEBP");const te=N.getImageProperties(J),re=te.width/te.height,Pe=100;he=B,pe=he/re,pe>Pe&&(pe=Pe,he=pe*re)}catch(Q){console.warn("Image processing error for PDF",Q),Z=!0,pe=15}const xe=20+pe+12;K+xe>$&&(N.addPage(),K=D),N.setDrawColor(200,200,200),N.setLineWidth(.5),N.line(D,K,k-D,K),K+=6,N.setTextColor(15,7,32),N.setFontSize(16),N.setFont("helvetica","bold"),N.text(H.dayOfWeek.toUpperCase(),D,K);const Oe=O(H.exifDate)||O(H.timestamp);if(N.setFontSize(9),N.setFont("helvetica","italic"),N.setTextColor(100,100,100),N.text(`Captured: ${Oe}`,k-D,K,{align:"right"}),K+=10,!Z&&J){const Q=(k-he)/2;N.addImage(J,ie,Q,K,he,pe),K+=pe+12}else N.setTextColor(255,0,0),N.setFontSize(8),N.text("[Image Error]",D,K),K+=15;N.setFont("helvetica","normal"),N.setFontSize(10);const Ue=H.reflection||"No reflection logged for this cycle.",Xe=N.splitTextToSize(Ue,B),Ye=Xe.length*5+15;K+Ye>$&&(N.addPage(),K=D),N.setTextColor(15,7,32),N.setFontSize(11),N.setFont("helvetica","bold"),N.text("DAILY REFLECTION:",D,K),K+=6,N.setFont("helvetica","normal"),N.setFontSize(10),N.setTextColor(60,60,60),N.text(Xe,D,K),K+=Xe.length*5+25}N.save(`Report_${_.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Re.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(N){console.error("PDF generation failed:",N),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},P=j(o);return s.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[s.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[s.jsx(iR,{className:"w-7 h-7"})," Weekly Evidence Log"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.length>1?s.jsxs("div",{className:"relative group",children:[s.jsx("select",{value:_,onChange:E=>S(E.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:v.map(E=>s.jsx("option",{value:E,children:E},E))}),s.jsx(Ni,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):s.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:_}),s.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[s.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),s.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),s.jsxs("button",{onClick:C,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?s.jsx(rs,{className:"w-5 h-5 animate-spin"}):s.jsx(Zoe,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),s.jsx("input",{type:"file",ref:p,onChange:R,className:"hidden",accept:"image/*"}),s.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:rm.map(E=>{const N=j(E),k=o===E;return s.jsxs("button",{onClick:()=>c(E),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${k?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[s.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${k?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",rm.indexOf(E)+1]}),s.jsx("span",{className:"font-bold text-sm",children:E}),N&&s.jsx("div",{className:`absolute top-2 right-2 ${k?"text-emerald-200":"text-emerald-500"}`,children:s.jsx(Zm,{className:"w-3 h-3"})})]},E)})}),s.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(cle,{className:"w-4 h-4"})," Evidence Capture (",_,")"]}),P&&s.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[s.jsx(eo,{className:"w-3 h-3"}),O(P.exifDate)||O(P.timestamp)]})]}),s.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:P?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:P.imageUrl,alt:o,className:"w-full h-full object-contain bg-black/20"}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},children:[s.jsx(t0,{className:"w-8 h-8 text-emerald-400"}),s.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):s.jsxs("button",{onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?s.jsx(rs,{className:"w-10 h-10 animate-spin text-emerald-500"}):s.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:s.jsx(iR,{className:"w-8 h-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),s.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),s.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[s.jsx("div",{className:"mb-2",children:s.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[s.jsx(Jm,{className:"w-4 h-4"})," Daily Reflection"]})}),P?s.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${o} in ${_}...`,defaultValue:P.reflection,onBlur:E=>L(o,E.target.value)},o):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[s.jsx("div",{className:"mb-2 opacity-30",children:s.jsx(_u,{className:"w-6 h-6"})}),s.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),s.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},sAe=({user:t})=>{const e=mi(),[r,n]=A.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=A.useState(""),[o,c]=A.useState(""),[d,h]=A.useState("");A.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(v,_)=>{try{return qx.renderToString(_,{throwOnError:!1})}catch{return _}}).replace(/\n/g,"<br/>");i(y)},[r.content]);const p=async()=>{await Re.saveLabReport(r),await Re.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(o),v=parseFloat(d);!isNaN(y)&&!isNaN(v)&&(n(_=>({..._,dataPoints:[..._.dataPoints,{x:y,y:v}].sort((S,w)=>S.x-w.x)})),c(""),h(""))};return s.jsxs("div",{className:"h-full flex flex-col gap-6",children:[s.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[s.jsx(k2,{className:"w-6 h-6"})," Physics Laboratory"]}),s.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[s.jsx(SH,{className:"w-4 h-4"})," Save Report"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:s.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),s.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[s.jsxs("div",{className:"w-1/3",children:[s.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("input",{type:"number",placeholder:"X",value:o,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),s.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),s.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(PW,{width:"100%",height:"100%",children:s.jsxs(v_e,{children:[s.jsx(UQ,{strokeDasharray:"3 3",stroke:"#333"}),s.jsx(Sw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),s.jsx(_w,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),s.jsx(Bo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),s.jsx(j1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),s.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:s.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[s.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(v=>({...v,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),s.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:jG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},oAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],lAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],cAe=({userId:t,classType:e,onClose:r})=>{var L,C,P,E,N;const[n,a]=A.useState(null),[i,o]=A.useState(!0);if(A.useEffect(()=>{(async()=>{const z=await Re.getPublicProfile(t);a(z),o(!1)})()},[t]),i)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:s.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=Qh(p),y=OX(p),{equipped:v,appearance:_}=r0(n,e),S=dE({gamification:{...c,equipped:v}}),w=Xh(v),j=((C=c.classXp)==null?void 0:C[e])||0,O=Object.values(v).filter(Boolean),R=CX(O);return s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:s.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[s.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:s.jsx(Na,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-32 shrink-0",children:s.jsx(Hg,{equipped:v,appearance:_})}),s.jsxs("div",{children:[s.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),s.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),s.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ka,{className:"w-3 h-3 text-cyan-400"}),s.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[j.toLocaleString()," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(No,{className:"w-3 h-3 text-yellow-400"}),s.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(Jo,{className:"w-3 h-3"})," Stats"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:oAe.map(({key:k,label:z,color:D,icon:B})=>{const $=S[k]||0;return s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[s.jsx("span",{className:"text-sm",children:B}),s.jsx("span",{className:"text-xs text-gray-400",children:z}),s.jsx("span",{className:`text-sm font-bold ${D} ml-auto`,children:$})]},k)})})]}),s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(No,{className:"w-3 h-3"})," Equipment"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:lAe.map(k=>{const z=v[k];if(!z)return s.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[s.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:k}),s.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},k);const D=ca(z.rarity);return s.jsxs("div",{className:`p-2 rounded-lg border ${D.border} ${D.bg}`,children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:k}),s.jsx("div",{className:`text-xs font-bold truncate ${D.text}`,children:z.name}),s.jsx("div",{className:"text-[9px] text-gray-500",children:z.rarity})]},k)})})]}),R.length>0&&s.jsxs("div",{className:"p-6 border-b border-white/5",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(I2,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),R.map(({set:k,activeBonus:z})=>s.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[s.jsx("div",{className:"text-xs font-bold text-purple-400",children:k.name}),s.jsxs("div",{className:"text-[10px] text-gray-400",children:[z.label,": ",z.effects.map(D=>`+${D.value} ${D.stat}`).join(", ")]})]},k.id))]}),(((P=c.unlockedAchievements)==null?void 0:P.length)||0)>0&&s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[s.jsx(el,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(E=c.unlockedAchievements)==null?void 0:E.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(N=c.unlockedAchievements)==null?void 0:N.slice(0,12).map(k=>s.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:k.replace(/_/g," ")},k))})]})]})})},uAe=()=>s.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>s.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[s.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),s.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),s.jsxs("div",{className:"space-y-2 text-right",children:[s.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),s.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),dAe=({user:t})=>{var m;const[e,r]=A.useState([]),[n,a]=A.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Mr.AP_PHYSICS),[i,o]=A.useState(!0),[c,d]=A.useState(null);A.useEffect(()=>{const y=Re.subscribeToLeaderboard(v=>{r(v),o(!1)});return()=>y()},[]);const h=A.useMemo(()=>{const y=t.enrolledClasses||[];if(y.length>0)return y.sort();const v=new Set;return e.forEach(_=>{var S;return(S=_.enrolledClasses)==null?void 0:S.forEach(w=>v.add(w))}),Array.from(v).sort()},[t.enrolledClasses,e]),p=A.useMemo(()=>e.filter(y=>{var v;return(v=y.enrolledClasses)==null?void 0:v.includes(n)}).sort((y,v)=>{var w,j,O,R;const _=((j=(w=y.gamification)==null?void 0:w.classXp)==null?void 0:j[n])||0;return(((R=(O=v.gamification)==null?void 0:O.classXp)==null?void 0:R[n])||0)-_}).slice(0,10),[e,n]);return s.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[s.jsxs("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),s.jsxs("div",{className:"inline-block relative",children:[s.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(y=>s.jsx("option",{value:y,children:y},y)),h.length===0&&s.jsx("option",{children:n})]}),s.jsx(Ni,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),s.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?s.jsx(uAe,{}):s.jsxs(s.Fragment,{children:[p.length>=3&&s.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(y=>{var E,N,k,z;const v=p[y];if(!v)return null;const _=(E=v.settings)==null?void 0:E.privacyMode,S=_?((N=v.gamification)==null?void 0:N.codename)||"Unknown Agent":v.name,w=((z=(k=v.gamification)==null?void 0:k.classXp)==null?void 0:z[n])||0,j=Math.floor(w/1e3)+1,O=Qh(j),R=y===0,L=["h-28","h-20","h-16"],C=["w-20 h-20","w-14 h-14","w-14 h-14"],P=[{icon:s.jsx(el,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:s.jsx(lv,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:s.jsx(lv,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return s.jsxs("div",{className:`flex flex-col items-center ${R?"order-2":y===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+y*.15}s both`},children:[s.jsxs("div",{className:`relative mb-2 ${R?"mb-3":""}`,children:[s.jsx("div",{className:`${C[y]} rounded-full p-0.5 bg-white/10 ring-2 ${P[y].ring} relative ${R?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:s.jsx("img",{src:v.avatarUrl,alt:S,className:`w-full h-full rounded-full border-2 ${O.tierColor.split(" ")[0]} object-cover`})}),s.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${P[y].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:P[y].icon})]}),s.jsxs("div",{className:`text-center ${R?"mt-2":"mt-1"}`,children:[s.jsx("div",{className:`font-bold truncate max-w-[100px] ${R?"text-sm text-white":"text-xs text-gray-300"} ${_?"italic":""}`,children:S}),s.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${R?"text-xl":"text-base"}`,children:w.toLocaleString()}),s.jsx("div",{className:`text-[9px] font-mono uppercase ${O.tierColor.split(" ")[1]}`,children:O.rankName}),s.jsxs("button",{onClick:()=>d(v.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[s.jsx(Gh,{className:"w-3 h-3"})," Inspect"]})]}),s.jsx("div",{className:`${L[y]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${y===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":y===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},v.id)})}),s.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((y,v)=>{var L,C,P,E;const _=p.length>=3?v+3:v,S=(L=y.settings)==null?void 0:L.privacyMode,w=S?((C=y.gamification)==null?void 0:C.codename)||"Unknown Agent":y.name,j=((E=(P=y.gamification)==null?void 0:P.classXp)==null?void 0:E[n])||0,O=Math.floor(j/1e3)+1,R=Qh(O);return s.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*_}s both`},children:[s.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[_<3&&_===0&&s.jsx(el,{className:"w-6 h-6 text-yellow-400 mx-auto"}),_<3&&_===1&&s.jsx(lv,{className:"w-6 h-6 text-gray-300 mx-auto"}),_<3&&_===2&&s.jsx(lv,{className:"w-6 h-6 text-amber-600 mx-auto"}),_>=3&&`#${_+1}`]}),s.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[s.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${R.tierColor.split(" ")[0]}`}),s.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:O})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h3",{className:`text-base font-bold truncate ${S?"text-purple-300 italic":"text-white"}`,children:[w,S&&s.jsx(Wh,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),s.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${R.tierColor.split(" ")[1]}`,children:R.rankName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:j.toLocaleString()}),s.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),s.jsx("button",{onClick:()=>d(y.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:s.jsx(Gh,{className:"w-4 h-4"})})]},y.id)}),p.length===0&&s.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[s.jsx(is,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&s.jsx(cAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class hAe extends se.Component{constructor(r){super(r);Y9(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:""})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),s.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&s.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),s.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[s.jsx(Lx,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const Gz={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:s.jsx(Wo,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:s.jsx(mH,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:s.jsx(I2,{className:"w-4 h-4"})}},fAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},FT=3;function qT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const pAe=({assignment:t})=>{const e=mi(),[r,n]=A.useState([]),[a,i]=A.useState([]),[o,c]=A.useState(!0),[d,h]=A.useState(!1),[p,m]=A.useState({}),[y,v]=A.useState(1),[_,S]=A.useState(null),[w,j]=A.useState(new Set),O=A.useRef({engagementTime:0}),R=A.useRef(Date.now());A.useEffect(()=>{const K=setInterval(()=>{Date.now()-R.current<6e4&&(O.current.engagementTime+=1)},1e3);return()=>clearInterval(K)},[]),A.useEffect(()=>{const K=()=>{R.current=Date.now()},W=["mousemove","keydown","scroll","click"];return W.forEach(H=>window.addEventListener(H,K)),()=>W.forEach(H=>window.removeEventListener(H,K))},[]),A.useEffect(()=>()=>{var W;const K=O.current.engagementTime;if(K>=5){const H=(W=eN().currentUser)==null?void 0:W.uid;H&&Re.submitReviewEngagement(H,t.id,t.title,t.classType,K).catch(()=>{})}},[t.id,t.title,t.classType]);const L=A.useCallback(K=>{const W=qT(K.filter(ie=>ie.tier===1),FT),H=qT(K.filter(ie=>ie.tier===2),FT),J=qT(K.filter(ie=>ie.tier===3),FT);i([...W,...H,...J]),m({}),S(null)},[]);A.useEffect(()=>{(async()=>{var W;c(!0),h(!1);try{const H=await ua(ot(Ce,"question_banks",t.id));if(!H.exists()){h(!0);return}const J=H.data().questions||[];n(J),L(J)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(W=eN().currentUser)==null?void 0:W.uid;if(H){const J=await ua(ot(Ce,"review_progress",`${H}_${t.id}`));J.exists()&&j(new Set(J.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const C=()=>{r.length>0&&L(r)},P=(K,W,H)=>{const J=p[K];if(!(J!=null&&J.submitted))if(H==="multiple_select"||H==="ranking"){const ie=(J==null?void 0:J.selected)||[],he=ie.includes(W)?ie.filter(pe=>pe!==W):[...ie,W];m(pe=>({...pe,[K]:{...pe[K],selected:he,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ie=>({...ie,[K]:{selected:W,submitted:!1,correct:!1,xpAwarded:!1}}))},E=(K,W)=>{var H;(H=p[K])!=null&&H.submitted||m(J=>({...J,[K]:{...J[K],linkedSelected:W}}))},N=async K=>{const W=p[K.id];if(!(W!=null&&W.selected))return;let H=!1;if(K.type==="multiple_select"||K.type==="ranking"){const J=W.selected,ie=K.correctAnswer;H=J.length===ie.length&&J.every((he,pe)=>he===ie[pe])}else K.type==="linked_mc"?H=W.selected===K.correctAnswer&&(!K.linkedFollowUp||W.linkedSelected===K.linkedFollowUp.correctAnswer):H=W.selected===K.correctAnswer;if(H)if(w.has(K.id))m(J=>({...J,[K.id]:{...J[K.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(J=>({...J,[K.id]:{...J[K.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await sH({assignmentId:t.id,questionId:K.id,xpAmount:K.xp,classType:t.classType})).data.awarded?(e.success(`+${K.xp} XP earned!`),m(he=>({...he,[K.id]:{...he[K.id],submitted:!0,correct:!0,xpAwarded:!0}})),j(he=>new Set([...he,K.id]))):e.success("Correct! (XP already claimed)")}catch(J){console.error("XP award error:",J)}}else{const J=Math.ceil(K.xp/2);m(ie=>({...ie,[K.id]:{...ie[K.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:J}})),e.error(`-${J} XP penalty`);try{await Soe({assignmentId:t.id,questionId:K.id,classType:t.classType})}catch(ie){console.error("Penalty error:",ie)}}},k=A.useMemo(()=>a.filter(K=>K.tier===y),[a,y]),z=A.useMemo(()=>Object.entries(p).filter(([,K])=>K.correct&&K.xpAwarded).reduce((K,[W])=>{var H;return K+(((H=a.find(J=>J.id===W))==null?void 0:H.xp)||0)},0),[p,a]),D=A.useMemo(()=>Object.values(p).reduce((K,W)=>K+(W.penalty||0),0),[p]),B=A.useMemo(()=>a.reduce((K,W)=>K+W.xp,0),[a]),$=A.useMemo(()=>a.length>0&&a.every(K=>{var W;return(W=p[K.id])==null?void 0:W.submitted}),[a,p]);return o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(rs,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[s.jsx(Wo,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):s.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Wo,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),s.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ka,{className:"w-4 h-4 text-yellow-400"}),s.jsx("span",{className:"text-sm font-bold text-yellow-400",children:z}),D>0&&s.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",D]}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",B," XP"]})]}),s.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[s.jsx(Lx,{className:"w-3 h-3"})," New Set"]})]})]}),s.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(K=>{const W=Gz[K],H=a.filter(he=>he.tier===K),J=H.filter(he=>{var pe;return(pe=p[he.id])==null?void 0:pe.submitted}).length,ie=H.filter(he=>{var pe;return(pe=p[he.id])==null?void 0:pe.correct}).length;return s.jsxs("button",{onClick:()=>v(K),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===K?`${W.bg} ${W.color} ${W.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[W.icon,s.jsx("span",{className:"hidden sm:inline",children:W.name}),s.jsxs("span",{className:"sm:hidden",children:["Tier ",K]}),J>0&&s.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ie===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ie,"/",H.length]})]},K)})}),$&&s.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),s.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[s.jsx(Lx,{className:"w-3 h-3"})," New Questions"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[k.map((K,W)=>{const H=p[K.id],J=_===K.id,ie=H==null?void 0:H.submitted,he=H==null?void 0:H.correct,pe=Gz[K.tier];return s.jsxs("div",{className:`rounded-2xl border transition-all ${ie?he?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":J?`${pe.border} ${pe.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[s.jsxs("button",{onClick:()=>S(J?null:K.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ie?he?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${pe.bg} ${pe.color}`}`,children:ie?he?s.jsx(an,{className:"w-4 h-4"}):s.jsx(Cu,{className:"w-4 h-4"}):W+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${pe.color}`,children:K.bloomsLevel}),s.jsx("span",{className:"text-[9px] text-gray-600",children:""}),s.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:fAe[K.type]||K.type}),s.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[s.jsx(ka,{className:"w-3 h-3"}),K.xp," XP"]}),s.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(K.xp/2)," if wrong"]})]}),s.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:K.stem})]}),s.jsx(_u,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${J?"rotate-90":""}`})]}),J&&s.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[K.context&&s.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:K.context}),K.type==="ranking"?s.jsx(yAe,{question:K,answer:H,onSelect:P}):K.type==="multiple_select"?s.jsx(gAe,{question:K,answer:H,onSelect:P}):s.jsx(mAe,{question:K,answer:H,onSelect:P}),K.type==="linked_mc"&&K.linkedFollowUp&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[s.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),s.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:K.linkedFollowUp.stem}),s.jsx("div",{className:"space-y-2",children:K.linkedFollowUp.options.map(Z=>{const ne=(H==null?void 0:H.linkedSelected)===Z.id,ae=ie,xe=Z.id===K.linkedFollowUp.correctAnswer;return s.jsxs("button",{onClick:()=>E(K.id,Z.id),disabled:ie,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ae?xe?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ne?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ne?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Z.id.toUpperCase(),"."]})," ",Z.text]},Z.id)})})]}),ie?s.jsxs("div",{className:`p-4 rounded-xl border ${he?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[he?s.jsx(an,{className:"w-5 h-5 text-emerald-400"}):s.jsx(Cu,{className:"w-5 h-5 text-red-400"}),s.jsx("span",{className:`font-bold text-sm ${he?"text-emerald-400":"text-red-400"}`,children:he?`Correct! +${K.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(K.xp/2)} XP penalty`})]}),s.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:K.explanation})]}):s.jsx("button",{onClick:()=>N(K),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},K.id)}),k.length===0&&s.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[s.jsx(Wh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},mAe=({question:t,answer:e,onSelect:r})=>s.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,o=n.id===t.correctAnswer;return s.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?o?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),gAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const o=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return s.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":o?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":o?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${o?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:o&&s.jsx(an,{className:"w-3 h-3 text-white"})}),s.jsxs("span",{children:[s.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},yAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[s.jsx(qoe,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&s.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((o,c)=>{const d=t.options.find(p=>p.id===o),h=a&&i[c]===o;return s.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},o)})}),t.options.map(o=>{const c=n.includes(o.id),d=n.indexOf(o.id);return s.jsxs("button",{onClick:()=>r(t.id,o.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?s.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):s.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),o.text]},o.id)})]})};function vAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${qx.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return qx.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const xAe=({assignment:t,onComplete:e})=>{const[r,n]=A.useState(null),[a,i]=A.useState(!0),[o,c]=A.useState(!1),d=A.useRef(Cx()),h=A.useRef(Date.now()),p=A.useRef(e),[m,y]=A.useState(!0),[v,_]=A.useState(0);A.useEffect(()=>{p.current=e},[e]);const S=A.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);A.useEffect(()=>{const j=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,_(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(j)},[m]),A.useEffect(()=>{const j=["mousemove","keydown","scroll","click"];return j.forEach(O=>window.addEventListener(O,S)),()=>{j.forEach(O=>window.removeEventListener(O,S))}},[S]),A.useEffect(()=>()=>{p.current(d.current)},[]),A.useEffect(()=>{(async()=>{i(!0);try{const O=await ua(ot(Ce,"reading_materials",t.id));O.exists()?n(O.data()):c(!0)}catch(O){console.error("Failed to load reading material:",O),c(!0)}finally{i(!1)}})()},[t.id]);const w=A.useMemo(()=>r?r.sections.map(j=>({title:j.title,html:vAe(j.content)})):[],[r]);return a?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(rs,{className:"w-8 h-8 text-purple-400 animate-spin"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):o||!r?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[s.jsx(Zs,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),s.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):s.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[s.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?s.jsx(U7,{className:"w-4 h-4"}):s.jsx(eo,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(v/60),"m ",v%60,"s"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&s.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[s.jsx(Os,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:s.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&s.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),s.jsx("div",{className:"space-y-10",children:w.map((j,O)=>s.jsxs("div",{className:"group",children:[s.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[s.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:O+1}),j.title]}),s.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:j.html}})]},O))}),s.jsx("div",{className:"mt-12 mb-4 text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[s.jsx(Zs,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},bAe=({user:t})=>{const[e,r]=A.useState(!1),[n,a]=A.useState(""),[i,o]=A.useState("bug"),[c,d]=A.useState(!1),[h,p]=A.useState(!1),m=async()=>{if(n.trim()){d(!0);try{await Re.submitBugReport({userId:t.id,userName:t.name,userEmail:t.email,category:i,description:n.trim(),page:window.location.pathname,userAgent:navigator.userAgent,timestamp:new Date().toISOString()}),p(!0),setTimeout(()=>{p(!1),r(!1),a("")},2e3)}catch{}finally{d(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 left-4 z-40 p-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-full text-gray-400 hover:text-white transition-all shadow-lg backdrop-blur-md group",title:"Report a bug",children:s.jsx(nR,{className:"w-4 h-4 group-hover:text-amber-400 transition"})}),e&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:()=>r(!1),children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsx("div",{className:"relative bg-[#1a1b26] border border-white/10 rounded-2xl w-full max-w-md shadow-2xl animate-in fade-in slide-in-from-bottom-4 duration-300",onClick:y=>y.stopPropagation(),children:h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Zm,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Report Submitted"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Thanks for helping improve Porter Portal!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/10",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(nR,{className:"w-5 h-5 text-amber-400"})," Report an Issue"]}),s.jsx("button",{onClick:()=>r(!1),className:"p-1 text-gray-400 hover:text-white transition",children:s.jsx(Na,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsx("div",{className:"flex gap-2",children:["bug","feature","other"].map(y=>s.jsx("button",{onClick:()=>o(y),className:`flex-1 px-3 py-2 rounded-xl text-xs font-bold transition border ${i===y?"bg-purple-600/60 text-white border-purple-500/50":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10"}`,children:y==="bug"?"Bug":y==="feature"?"Feature Request":"Other"},y))}),s.jsx("textarea",{value:n,onChange:y=>a(y.target.value),placeholder:"Describe what happened or what you'd like to see...",rows:4,maxLength:1e3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition resize-none",autoFocus:!0}),s.jsxs("p",{className:"text-[10px] text-gray-600 text-right",children:[n.length,"/1000"]}),s.jsxs("button",{onClick:m,disabled:!n.trim()||c,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-500 disabled:opacity-40 text-white rounded-xl font-bold transition",children:[s.jsx(F7,{className:"w-4 h-4"}),c?"Submitting...":"Submit Report"]})]})]})})]})]})},wAe={3:"text-blue-400",7:"text-green-400",14:"text-purple-400",21:"text-amber-400",30:"text-red-400",50:"text-pink-400",100:"text-cyan-400"},SAe=({userId:t,streakData:e,compact:r})=>{var h,p;const[n,a]=A.useState(e||null),[i,o]=A.useState(null);if(A.useEffect(()=>{(async()=>{try{const y=await Re.updateDailyStreak(t);y.freezeUsed?(o({message:"Streak Freeze used! Streak saved.",type:"freeze"}),setTimeout(()=>o(null),3e3)):y.newMilestone&&(o({message:`${y.newMilestone}-day streak milestone!`,type:"milestone"}),setTimeout(()=>o(null),3e3))}catch{}})()},[t]),A.useEffect(()=>{e&&a(e)},[e]),!n)return null;const c=n.currentStreak>=30?"text-red-400 animate-pulse":n.currentStreak>=14?"text-orange-400":n.currentStreak>=7?"text-amber-400":n.currentStreak>=3?"text-yellow-400":"text-gray-500";if(r)return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(zd,{className:`w-4 h-4 ${c}`}),s.jsx("span",{className:`text-sm font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-500"}`,children:n.currentStreak}),n.freezeTokens>0&&s.jsx("div",{className:"flex items-center gap-0.5 ml-1",title:`${n.freezeTokens} streak freeze${n.freezeTokens!==1?"s":""}`,children:Array.from({length:n.freezeTokens}).map((m,y)=>s.jsx(t3,{className:"w-3 h-3 text-cyan-400"},y))})]});const d=Array.from({length:7}).map((m,y)=>{var j;const v=new Date(Date.now()-(6-y)*864e5).toISOString().split("T")[0],_=(j=n.streakHistory)==null?void 0:j.includes(v),S=v===new Date().toISOString().split("T")[0],w=new Date(v).toLocaleDateString("en-US",{weekday:"narrow"});return{date:v,isActive:_,isToday:S,dayLabel:w}});return s.jsxs("div",{className:"relative",children:[i&&s.jsxs("div",{className:`absolute -top-12 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-xl text-xs font-bold animate-in slide-in-from-bottom-2 fade-in duration-300 whitespace-nowrap ${i.type==="freeze"?"bg-cyan-600/90 text-white":i.type==="milestone"?"bg-amber-600/90 text-white":"bg-orange-600/90 text-white"}`,children:[i.type==="freeze"&&s.jsx(t3,{className:"w-3 h-3 inline mr-1"}),i.type==="milestone"&&s.jsx(el,{className:"w-3 h-3 inline mr-1"}),i.message]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(zd,{className:`w-7 h-7 ${c}`}),s.jsxs("div",{children:[s.jsxs("div",{className:`text-2xl font-bold ${n.currentStreak>0?"text-amber-300":"text-gray-400"}`,children:[n.currentStreak," Day",n.currentStreak!==1?"s":""]}),s.jsxs("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest font-bold",children:["Current Streak | Best: ",n.longestStreak]})]})]}),s.jsx("div",{className:"flex items-center gap-1",title:`${n.freezeTokens} / ${n.maxFreezeTokens} freeze tokens`,children:Array.from({length:n.maxFreezeTokens}).map((m,y)=>s.jsx(t3,{className:`w-5 h-5 ${y<n.freezeTokens?"text-cyan-400":"text-gray-700"}`},y))})]}),s.jsx("div",{className:"flex gap-1.5",children:d.map(m=>s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("div",{className:"text-[9px] text-gray-500 mb-1",children:m.dayLabel}),s.jsx("div",{className:`w-full aspect-square rounded-lg flex items-center justify-center text-xs font-bold transition ${m.isActive?"bg-gradient-to-br from-amber-500 to-orange-600 text-white shadow-lg shadow-amber-500/20":m.isToday?"border-2 border-dashed border-amber-500/40 text-amber-500/40":"bg-white/5 text-gray-700"}`,children:m.isActive?s.jsx(zd,{className:"w-3.5 h-3.5"}):""})]},m.date))}),(((h=n.milestones)==null?void 0:h.length)||0)>0&&s.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-white/5",children:(p=n.milestones)==null?void 0:p.map(m=>s.jsxs("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full bg-white/5 border border-white/10 ${wAe[m]||"text-white"}`,children:[m,"d"]},m))})]})]})},Wz={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},_Ae=()=>{var Q,me;const[t,e]=A.useState(null),[r,n]=A.useState("Dashboard"),[a,i]=A.useState([]),[o,c]=A.useState([]),[d,h]=A.useState([]),[p,m]=A.useState([]),[y,v]=A.useState([]),[_,S]=A.useState(null),[w,j]=A.useState("STUDENT"),[O,R]=A.useState("WORK"),[L,C]=A.useState(!1),[P,E]=A.useState(!1),[N,k]=A.useState(!0),[z,D]=A.useState(!1),[B,$]=A.useState(new Set),K=A.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),W=A.useRef(new Set);A.useEffect(()=>{if(!(t!=null&&t.id)||t.role===La.ADMIN)return;const te=Re.subscribeToMyGroups(t.id,re=>{W.current=new Set(re.map(Pe=>Pe.id))});return()=>te()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=A.useCallback(te=>{const re=Date.now();K.current[te]=re,localStorage.setItem("chatChannelLastSeen",JSON.stringify(K.current)),$(Pe=>{if(!Pe.has(te))return Pe;const Ge=new Set(Pe);return Ge.delete(te),Ge})},[]);A.useEffect(()=>{const te=Re.subscribeToRecentMessages(re=>{const Pe=new Set,Ge=K.current,it=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(et=>`class_${et.replace(/\s+/g,"_").toLowerCase()}`));for(const et of re){if(!et.channelId||et.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==La.ADMIN){if(et.channelId.startsWith("group_")){const tt=et.channelId.slice(6);if(!W.current.has(tt))continue}else if(et.channelId.startsWith("class_")&&!it.has(et.channelId))continue}const Pt=new Date(et.timestamp).getTime(),Me=Ge[et.channelId]||0;Pt>Me&&Pe.add(et.channelId)}$(Pe)});return()=>te()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const J=A.useMemo(()=>{const te=new Map;return o.forEach(re=>{const Pe=te.get(re.userId)||[];Pe.push(re),te.set(re.userId,Pe)}),d.map(re=>{const Pe=te.get(re.id)||[],Ge=Pe.length,it=Math.round(Pe.reduce((et,Pt)=>{var Me;return et+(((Me=Pt.metrics)==null?void 0:Me.engagementTime)||0)},0)/60);return{...re,stats:{problemsCompleted:Ge,avgScore:0,rawAccuracy:0,totalTime:it}}})},[d,o]),ie=A.useMemo(()=>{const te=new Set;return d.forEach(re=>{re.section&&te.add(re.section)}),Array.from(te).sort()},[d]),he=A.useMemo(()=>a.find(te=>te.id===_)||null,[a,_]);A.useEffect(()=>{if(C(!1),E(!1),!_)return;const te=ua(ot(Ce,"question_banks",_)).then(Pe=>{Pe.exists()&&(Pe.data().questions||[]).length>0&&C(!0)}).catch(()=>{}),re=ua(ot(Ce,"reading_materials",_)).then(Pe=>{Pe.exists()&&E(!0)}).catch(()=>{});Promise.all([te,re]).then(()=>{})},[_]),A.useEffect(()=>{let te=null;const re=Yee(EN,async Pe=>{Pe?(await pe(Pe),te=Vr(ot(Ce,"users",Pe.uid),Ge=>{Ge.exists()&&e(it=>({...it||{},...Ge.data(),id:Pe.uid}))})):(e(null),te&&te(),k(!1))});return()=>{re(),te&&te()}},[]),A.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===La.ADMIN)){const te=Re.subscribeToAssignments(i),re=Re.subscribeToClassConfigs(v),Pe=[te,re];return t.role===La.ADMIN?(Pe.push(Re.subscribeToSubmissions(c)),Pe.push(Re.subscribeToUsers(h)),Pe.push(Re.subscribeToWhitelist(m))):Pe.push(Re.subscribeToUserSubmissions(t.id,c)),()=>Pe.forEach(Ge=>Ge())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),A.useEffect(()=>{(t==null?void 0:t.role)===La.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),A.useEffect(()=>{var te;Gle(((te=t==null?void 0:t.settings)==null?void 0:te.soundEffects)!==!1)},[(Q=t==null?void 0:t.settings)==null?void 0:Q.soundEffects]),qle((t==null?void 0:t.id)||null,((me=t==null?void 0:t.settings)==null?void 0:me.pushNotifications)===!0);const pe=async te=>{try{const re=ot(Ce,"users",te.uid),Pe=await ua(re),Ge=await ua(ot(Ce,"allowed_emails",te.email||"")),et=(await te.getIdTokenResult()).claims.admin===!0||te.email===Lle,Pt=Ge.exists()||et,Me=Ge.exists()?Ge.data():null,tt=(Me==null?void 0:Me.classType)||Mr.UNCATEGORIZED,bt=(Me==null?void 0:Me.classTypes)||(tt!==Mr.UNCATEGORIZED?[tt]:[]);if(Pe.exists()){const St=Pe.data(),Fe={lastLoginAt:new Date().toISOString(),isWhitelisted:Pt};if(et&&(Fe.role="ADMIN"),!Pt&&!et&&(Fe.enrolledClasses=[]),Pt&&bt.length>0){const ce=St.enrolledClasses||[],We=Array.from(new Set([...ce,...bt]));We.length!==ce.length&&(Fe.enrolledClasses=We,(!St.classType||St.classType===Mr.UNCATEGORIZED)&&(Fe.classType=bt[0]))}await sr(re,Fe)}else{const St={email:te.email,name:te.displayName||"Student",avatarUrl:te.photoURL||"",role:et?"ADMIN":"STUDENT",classType:tt,enrolledClasses:Pt?bt:[],isWhitelisted:Pt,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Qn(re,St)}}catch(re){console.error(re)}finally{k(!1)}},Z=async()=>{await Zee(EN),e(null),S(null)},ne=te=>{R("WORK"),S(te)},ae=A.useRef(he),xe=A.useRef(t);A.useEffect(()=>{ae.current=he},[he]),A.useEffect(()=>{xe.current=t},[t]);const Oe=async te=>{const re=xe.current,Pe=ae.current;if(!(!re||!Pe||re.role===La.ADMIN)&&!(te.engagementTime<10))try{await Re.submitEngagement(re.id,re.name,Pe.id,Pe.title,te,Pe.classType)}catch(Ge){console.error("Engagement submission failed:",Ge)}},Ue=A.useMemo(()=>{const te={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const re=y.find(Pe=>Pe.className===t.classType);if(re)return re.features}return te},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(N)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return s.jsx(Dde,{});if(!t.isWhitelisted&&t.role!==La.ADMIN)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:s.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[s.jsx(O2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),s.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",NH," for authorization."]}),s.jsx("button",{onClick:Z,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const Xe=t.role===La.ADMIN||Ue.physicsTools,Ye=t.role===La.ADMIN||Ue.communications;return s.jsx(hAe,{children:s.jsx(Xle,{children:s.jsx(Lde,{children:s.jsx(Ule,{children:s.jsxs(s.Fragment,{children:[s.jsx(zle,{}),Xe&&s.jsx(c0e,{onToggleChat:Ye?()=>D(!z):void 0,hasUnreadChat:B.size>0}),Ye&&s.jsx(h0e,{user:t,isOpen:z,onClose:()=>D(!1),assignments:a,classConfigs:y,unreadChannels:B,onMarkChannelRead:H,onOpenResource:te=>{ne(te)}}),s.jsx(Qle,{user:t,onLogout:Z,activeTab:r,setActiveTab:n,children:he?s.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[he.title,t.role===La.ADMIN&&s.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),s.jsxs("div",{className:"flex gap-4 mt-2",children:[s.jsx("button",{onClick:()=>R("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${O==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&s.jsxs("button",{onClick:()=>R("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${O==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Wo,{className:"w-3.5 h-3.5"})," Review"]}),P&&s.jsxs("button",{onClick:()=>R("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${O==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[s.jsx(Zs,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&s.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[s.jsx("button",{onClick:()=>j("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),s.jsx("button",{onClick:()=>j("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),s.jsxs("button",{onClick:()=>{S(null),R("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[s.jsx(Foe,{className:"w-4 h-4"})," Exit"]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[O==="WORK"&&s.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Pde,{onComplete:Oe,contentUrl:he.contentUrl,htmlContent:he.htmlContent,userId:t.id,assignmentId:he.id,classType:he.classType})}),w==="ADMIN"&&t.role===La.ADMIN&&s.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(eg,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:s.jsx(is,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o.filter(te=>te.assignmentId===he.id&&!te.isArchived).length}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),s.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[s.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),s.jsx("button",{onClick:()=>D(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),O==="REVIEW"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(pAe,{assignment:he})}),O==="STUDY"&&s.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:s.jsx(xAe,{assignment:he,onComplete:Oe})})]})]}):s.jsx("div",{className:"h-full",children:s.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===La.ADMIN&&s.jsxs(s.Fragment,{children:[r==="Dashboard"&&s.jsx(Fde,{users:J,assignments:a,submissions:o}),r==="User Management"&&s.jsx(qde,{users:J,whitelistedEmails:p,classConfigs:y,onWhitelist:async(te,re)=>Re.addToWhitelist(te,re)}),r==="Admin Panel"&&s.jsx(Qde,{assignments:a,submissions:o,users:d,onCreateAssignment:async te=>{te.title&&await Re.addAssignment(te)},classConfigs:y,availableSections:ie,onPreviewAssignment:te=>{j("STUDENT"),ne(te)}}),r==="Student Groups"&&s.jsx(o0e,{students:J.filter(te=>te.role==="STUDENT"),availableSections:ie,fullPage:!0}),r.startsWith("XP Command:")&&s.jsx(s0e,{users:d,initialTab:r.split(":")[1]})]}),t.role===La.STUDENT&&s.jsxs(s.Fragment,{children:[r in Wz&&s.jsx(CNe,{user:t,assignments:a,submissions:o,enabledFeatures:Ue,onNavigate:n,onStartAssignment:ne,studentTab:Wz[r]}),r==="Forensics"&&Ue.evidenceLocker&&s.jsx(iAe,{user:t}),r==="Physics Lab"&&Ue.physicsLab&&s.jsx(sAe,{user:t}),r==="Leaderboard"&&Ue.leaderboard&&s.jsx(dAe,{user:t})]})]},r)})}),s.jsx(bAe,{user:t}),t.role===La.STUDENT&&s.jsx("div",{className:"fixed top-3 right-48 z-30",children:s.jsx(SAe,{userId:t.id,compact:!0})})]})})})})})},HX=document.getElementById("root");if(!HX)throw new Error("Could not find root element to mount to");const TAe=OZ.createRoot(HX);TAe.render(s.jsx(se.StrictMode,{children:s.jsx(_Ae,{})}));
