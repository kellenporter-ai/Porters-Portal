var tZ=Object.defineProperty;var rZ=(t,e,r)=>e in t?tZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var FC=(t,e,r)=>rZ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as nZ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _5={exports:{}},Rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function aZ(){if(qC)return Rp;qC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:s,ref:a!==void 0?a:null,props:i}}return Rp.Fragment=e,Rp.jsx=r,Rp.jsxs=r,Rp}var HC;function iZ(){return HC||(HC=1,_5.exports=aZ()),_5.exports}var o=iZ(),T5={exports:{}},ar={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function sZ(){if(GC)return ar;GC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function E(H,ee,te){this.props=H,this.context=ee,this.refs=w,this.updater=te||T}E.prototype.isReactComponent={},E.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},E.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function I(){}I.prototype=E.prototype;function C(H,ee,te){this.props=H,this.context=ee,this.refs=w,this.updater=te||T}var L=C.prototype=new I;L.constructor=C,_(L,E.prototype),L.isPureReactComponent=!0;var P=Array.isArray;function R(){}var N={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function j(H,ee,te){var Oe=te.ref;return{$$typeof:t,type:H,key:ee,ref:Oe!==void 0?Oe:null,props:te}}function $(H,ee){return j(H.type,ee,H.props)}function B(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function F(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(te){return ee[te]})}var z=/\/+/g;function K(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):ee.toString(36)}function Q(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(R,R):(H.status="pending",H.then(function(ee){H.status==="pending"&&(H.status="fulfilled",H.value=ee)},function(ee){H.status==="pending"&&(H.status="rejected",H.reason=ee)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function G(H,ee,te,Oe,re){var ce=typeof H;(ce==="undefined"||ce==="boolean")&&(H=null);var he=!1;if(H===null)he=!0;else switch(ce){case"bigint":case"string":case"number":he=!0;break;case"object":switch(H.$$typeof){case t:case e:he=!0;break;case p:return he=H._init,G(he(H._payload),ee,te,Oe,re)}}if(he)return re=re(H),he=Oe===""?"."+K(H,0):Oe,P(re)?(te="",he!=null&&(te=he.replace(z,"$&/")+"/"),G(re,ee,te,"",function(We){return We})):re!=null&&(B(re)&&(re=$(re,te+(re.key==null||H&&H.key===re.key?"":(""+re.key).replace(z,"$&/")+"/")+he)),ee.push(re)),1;he=0;var Ie=Oe===""?".":Oe+":";if(P(H))for(var Se=0;Se<H.length;Se++)Oe=H[Se],ce=Ie+K(Oe,Se),he+=G(Oe,ee,te,ce,re);else if(Se=x(H),typeof Se=="function")for(H=Se.call(H),Se=0;!(Oe=H.next()).done;)Oe=Oe.value,ce=Ie+K(Oe,Se++),he+=G(Oe,ee,te,ce,re);else if(ce==="object"){if(typeof H.then=="function")return G(Q(H),ee,te,Oe,re);throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return he}function X(H,ee,te){if(H==null)return H;var Oe=[],re=0;return G(H,Oe,"","",function(ce){return ee.call(te,ce,re++)}),Oe}function ne(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(te){(H._status===0||H._status===-1)&&(H._status=1,H._result=te)},function(te){(H._status===0||H._status===-1)&&(H._status=2,H._result=te)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var de=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},me={map:X,forEach:function(H,ee,te){X(H,function(){ee.apply(this,arguments)},te)},count:function(H){var ee=0;return X(H,function(){ee++}),ee},toArray:function(H){return X(H,function(ee){return ee})||[]},only:function(H){if(!B(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ar.Activity=m,ar.Children=me,ar.Component=E,ar.Fragment=r,ar.Profiler=a,ar.PureComponent=C,ar.StrictMode=n,ar.Suspense=d,ar.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ar.__COMPILER_RUNTIME={__proto__:null,c:function(H){return N.H.useMemoCache(H)}},ar.cache=function(H){return function(){return H.apply(null,arguments)}},ar.cacheSignal=function(){return null},ar.cloneElement=function(H,ee,te){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var Oe=_({},H.props),re=H.key;if(ee!=null)for(ce in ee.key!==void 0&&(re=""+ee.key),ee)!A.call(ee,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ee.ref===void 0||(Oe[ce]=ee[ce]);var ce=arguments.length-2;if(ce===1)Oe.children=te;else if(1<ce){for(var he=Array(ce),Ie=0;Ie<ce;Ie++)he[Ie]=arguments[Ie+2];Oe.children=he}return j(H.type,re,Oe)},ar.createContext=function(H){return H={$$typeof:s,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:i,_context:H},H},ar.createElement=function(H,ee,te){var Oe,re={},ce=null;if(ee!=null)for(Oe in ee.key!==void 0&&(ce=""+ee.key),ee)A.call(ee,Oe)&&Oe!=="key"&&Oe!=="__self"&&Oe!=="__source"&&(re[Oe]=ee[Oe]);var he=arguments.length-2;if(he===1)re.children=te;else if(1<he){for(var Ie=Array(he),Se=0;Se<he;Se++)Ie[Se]=arguments[Se+2];re.children=Ie}if(H&&H.defaultProps)for(Oe in he=H.defaultProps,he)re[Oe]===void 0&&(re[Oe]=he[Oe]);return j(H,ce,re)},ar.createRef=function(){return{current:null}},ar.forwardRef=function(H){return{$$typeof:c,render:H}},ar.isValidElement=B,ar.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:ne}},ar.memo=function(H,ee){return{$$typeof:h,type:H,compare:ee===void 0?null:ee}},ar.startTransition=function(H){var ee=N.T,te={};N.T=te;try{var Oe=H(),re=N.S;re!==null&&re(te,Oe),typeof Oe=="object"&&Oe!==null&&typeof Oe.then=="function"&&Oe.then(R,de)}catch(ce){de(ce)}finally{ee!==null&&te.types!==null&&(ee.types=te.types),N.T=ee}},ar.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ar.use=function(H){return N.H.use(H)},ar.useActionState=function(H,ee,te){return N.H.useActionState(H,ee,te)},ar.useCallback=function(H,ee){return N.H.useCallback(H,ee)},ar.useContext=function(H){return N.H.useContext(H)},ar.useDebugValue=function(){},ar.useDeferredValue=function(H,ee){return N.H.useDeferredValue(H,ee)},ar.useEffect=function(H,ee){return N.H.useEffect(H,ee)},ar.useEffectEvent=function(H){return N.H.useEffectEvent(H)},ar.useId=function(){return N.H.useId()},ar.useImperativeHandle=function(H,ee,te){return N.H.useImperativeHandle(H,ee,te)},ar.useInsertionEffect=function(H,ee){return N.H.useInsertionEffect(H,ee)},ar.useLayoutEffect=function(H,ee){return N.H.useLayoutEffect(H,ee)},ar.useMemo=function(H,ee){return N.H.useMemo(H,ee)},ar.useOptimistic=function(H,ee){return N.H.useOptimistic(H,ee)},ar.useReducer=function(H,ee,te){return N.H.useReducer(H,ee,te)},ar.useRef=function(H){return N.H.useRef(H)},ar.useState=function(H){return N.H.useState(H)},ar.useSyncExternalStore=function(H,ee,te){return N.H.useSyncExternalStore(H,ee,te)},ar.useTransition=function(){return N.H.useTransition()},ar.version="19.2.4",ar}var WC;function d8(){return WC||(WC=1,T5.exports=sZ()),T5.exports}var O=d8();const ae=Gr(O);var A5={exports:{}},Mp={},N5={exports:{}},E5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function oZ(){return KC||(KC=1,(function(t){function e(G,X){var ne=G.length;G.push(X);e:for(;0<ne;){var de=ne-1>>>1,me=G[de];if(0<a(me,X))G[de]=X,G[ne]=me,ne=de;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var X=G[0],ne=G.pop();if(ne!==X){G[0]=ne;e:for(var de=0,me=G.length,H=me>>>1;de<H;){var ee=2*(de+1)-1,te=G[ee],Oe=ee+1,re=G[Oe];if(0>a(te,ne))Oe<me&&0>a(re,te)?(G[de]=re,G[Oe]=ne,de=Oe):(G[de]=te,G[ee]=ne,de=ee);else if(Oe<me&&0>a(re,ne))G[de]=re,G[Oe]=ne,de=Oe;else break e}}return X}function a(G,X){var ne=G.sortIndex-X.sortIndex;return ne!==0?ne:G.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var d=[],h=[],p=1,m=null,y=3,x=!1,T=!1,_=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(G){for(var X=r(h);X!==null;){if(X.callback===null)n(h);else if(X.startTime<=G)n(h),X.sortIndex=X.expirationTime,e(d,X);else break;X=r(h)}}function P(G){if(_=!1,L(G),!T)if(r(d)!==null)T=!0,R||(R=!0,F());else{var X=r(h);X!==null&&Q(P,X.startTime-G)}}var R=!1,N=-1,A=5,j=-1;function $(){return w?!0:!(t.unstable_now()-j<A)}function B(){if(w=!1,R){var G=t.unstable_now();j=G;var X=!0;try{e:{T=!1,_&&(_=!1,I(N),N=-1),x=!0;var ne=y;try{t:{for(L(G),m=r(d);m!==null&&!(m.expirationTime>G&&$());){var de=m.callback;if(typeof de=="function"){m.callback=null,y=m.priorityLevel;var me=de(m.expirationTime<=G);if(G=t.unstable_now(),typeof me=="function"){m.callback=me,L(G),X=!0;break t}m===r(d)&&n(d),L(G)}else n(d);m=r(d)}if(m!==null)X=!0;else{var H=r(h);H!==null&&Q(P,H.startTime-G),X=!1}}break e}finally{m=null,y=ne,x=!1}X=void 0}}finally{X?F():R=!1}}}var F;if(typeof C=="function")F=function(){C(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,K=z.port2;z.port1.onmessage=B,F=function(){K.postMessage(null)}}else F=function(){E(B,0)};function Q(G,X){N=E(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var ne=y;y=X;try{return G()}finally{y=ne}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ne=y;y=G;try{return X()}finally{y=ne}},t.unstable_scheduleCallback=function(G,X,ne){var de=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,G){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ne+me,G={id:p++,callback:X,priorityLevel:G,startTime:ne,expirationTime:me,sortIndex:-1},ne>de?(G.sortIndex=ne,e(h,G),r(d)===null&&G===r(h)&&(_?(I(N),N=-1):_=!0,Q(P,ne-de))):(G.sortIndex=me,e(d,G),T||x||(T=!0,R||(R=!0,F()))),G},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(G){var X=y;return function(){var ne=y;y=X;try{return G.apply(this,arguments)}finally{y=ne}}}})(E5)),E5}var QC;function lZ(){return QC||(QC=1,N5.exports=oZ()),N5.exports}var j5={exports:{}},vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC;function cZ(){if(XC)return vi;XC=1;var t=d8();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,vi.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},vi.flushSync=function(d){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=h,n.p=p,n.d.f()}},vi.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},vi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},vi.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vi.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},vi.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vi.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},vi.requestFormReset=function(d){n.d.r(d)},vi.unstable_batchedUpdates=function(d,h){return d(h)},vi.useFormState=function(d,h,p){return s.H.useFormState(d,h,p)},vi.useFormStatus=function(){return s.H.useHostTransitionStatus()},vi.version="19.2.4",vi}var YC;function Mz(){if(YC)return j5.exports;YC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),j5.exports=cZ(),j5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function uZ(){if(ZC)return Mp;ZC=1;var t=lZ(),e=d8(),r=Mz();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var S=b.alternate;if(S===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===S.child){for(S=b.child;S;){if(S===f)return d(b),l;if(S===g)return d(b),u;S=S.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=S;else{for(var U=!1,Y=b.child;Y;){if(Y===f){U=!0,f=b,g=S;break}if(Y===g){U=!0,g=b,f=S;break}Y=Y.sibling}if(!U){for(Y=S.child;Y;){if(Y===f){U=!0,f=S,g=b;break}if(Y===g){U=!0,g=S,f=b;break}Y=Y.sibling}if(!U)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=B&&l[B]||l["@@iterator"],typeof l=="function"?l:null)}var z=Symbol.for("react.client.reference");function K(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList";case j:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case T:return"Portal";case C:return l.displayName||"Context";case I:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return u=l.displayName||null,u!==null?u:K(l.type)||"Memo";case A:u=l._payload,l=l._init;try{return K(l(u))}catch{}}return null}var Q=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},de=[],me=-1;function H(l){return{current:l}}function ee(l){0>me||(l.current=de[me],de[me]=null,me--)}function te(l,u){me++,de[me]=l.current,l.current=u}var Oe=H(null),re=H(null),ce=H(null),he=H(null);function Ie(l,u){switch(te(ce,u),te(re,l),te(Oe,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?hC(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=hC(u),l=fC(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ee(Oe),te(Oe,l)}function Se(){ee(Oe),ee(re),ee(ce)}function We(l){l.memoizedState!==null&&te(he,l);var u=Oe.current,f=fC(u,l.type);u!==f&&(te(re,l),te(Oe,f))}function Me(l){re.current===l&&(ee(Oe),ee(re)),he.current===l&&(ee(he),kp._currentValue=ne)}var _e,gt;function et(l){if(_e===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);_e=u&&u[1]||"",gt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+l+gt}var pt=!1;function st(l,u){if(!l||pt)return"";pt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(Le){var Re=Le}Reflect.construct(l,[],Ge)}else{try{Ge.call()}catch(Le){Re=Le}l.call(Ge.prototype)}}else{try{throw Error()}catch(Le){Re=Le}(Ge=l())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(Le){if(Le&&Re&&typeof Le.stack=="string")return[Le.stack,Re.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),U=S[0],Y=S[1];if(U&&Y){var le=U.split(`
`),je=Y.split(`
`);for(b=g=0;g<le.length&&!le[g].includes("DetermineComponentFrameRoot");)g++;for(;b<je.length&&!je[b].includes("DetermineComponentFrameRoot");)b++;if(g===le.length||b===je.length)for(g=le.length-1,b=je.length-1;1<=g&&0<=b&&le[g]!==je[b];)b--;for(;1<=g&&0<=b;g--,b--)if(le[g]!==je[b]){if(g!==1||b!==1)do if(g--,b--,0>b||le[g]!==je[b]){var ze=`
`+le[g].replace(" at new "," at ");return l.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",l.displayName)),ze}while(1<=g&&0<=b);break}}}finally{pt=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?et(f):""}function xe(l,u){switch(l.tag){case 26:case 27:case 5:return et(l.type);case 16:return et("Lazy");case 13:return l.child!==u&&u!==null?et("Suspense Fallback"):et("Suspense");case 19:return et("SuspenseList");case 0:case 15:return st(l.type,!1);case 11:return st(l.type.render,!1);case 1:return st(l.type,!0);case 31:return et("Activity");default:return""}}function be(l){try{var u="",f=null;do u+=xe(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Be=Object.prototype.hasOwnProperty,Ye=t.unstable_scheduleCallback,ht=t.unstable_cancelCallback,Ze=t.unstable_shouldYield,yt=t.unstable_requestPaint,Rt=t.unstable_now,Bt=t.unstable_getCurrentPriorityLevel,Tt=t.unstable_ImmediatePriority,bt=t.unstable_UserBlockingPriority,Zt=t.unstable_NormalPriority,tn=t.unstable_LowPriority,rn=t.unstable_IdlePriority,ln=t.log,ye=t.unstable_setDisableYieldValue,it=null,At=null;function jt(l){if(typeof ln=="function"&&ye(l),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(it,l)}catch{}}var Pt=Math.clz32?Math.clz32:wn,ct=Math.log,gr=Math.LN2;function wn(l){return l>>>=0,l===0?32:31-(ct(l)/gr|0)|0}var Rn=256,kr=262144,dr=4194304;function Nt(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function wt(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,S=l.suspendedLanes,U=l.pingedLanes;l=l.warmLanes;var Y=g&134217727;return Y!==0?(g=Y&~S,g!==0?b=Nt(g):(U&=Y,U!==0?b=Nt(U):f||(f=Y&~l,f!==0&&(b=Nt(f))))):(Y=g&~S,Y!==0?b=Nt(Y):U!==0?b=Nt(U):f||(f=g&~l,f!==0&&(b=Nt(f)))),b===0?0:u!==0&&u!==b&&(u&S)===0&&(S=b&-b,f=u&-u,S>=f||S===32&&(f&4194048)!==0)?u:b}function sr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Qr(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(){var l=dr;return dr<<=1,(dr&62914560)===0&&(dr=4194304),l}function Xr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function Mn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Jt(l,u,f,g,b,S){var U=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Y=l.entanglements,le=l.expirationTimes,je=l.hiddenUpdates;for(f=U&~f;0<f;){var ze=31-Pt(f),Ge=1<<ze;Y[ze]=0,le[ze]=-1;var Re=je[ze];if(Re!==null)for(je[ze]=null,ze=0;ze<Re.length;ze++){var Le=Re[ze];Le!==null&&(Le.lane&=-536870913)}f&=~Ge}g!==0&&pa(l,g,0),S!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=S&~(U&~u))}function pa(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-Pt(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function cn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-Pt(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function En(l,u){var f=u&-u;return f=(f&42)!==0?1:ti(f),(f&(l.suspendedLanes|u))!==0?0:f}function ti(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function wr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function un(){var l=X.p;return l!==0?l:(l=window.event,l===void 0?32:DC(l.type))}function Va(l,u){var f=X.p;try{return X.p=l,u()}finally{X.p=f}}var Qn=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Qn,Sn="__reactProps$"+Qn,Yr="__reactContainer$"+Qn,mi="__reactEvents$"+Qn,Fa="__reactListeners$"+Qn,Os="__reactHandles$"+Qn,is="__reactResources$"+Qn,gi="__reactMarker$"+Qn;function St(l){delete l[Fr],delete l[Sn],delete l[mi],delete l[Fa],delete l[Os]}function ue(l){var u=l[Fr];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Yr]||f[Fr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=bC(l);l!==null;){if(f=l[Fr])return f;l=bC(l)}return u}l=f,f=l.parentNode}return null}function Ke(l){if(l=l[Fr]||l[Yr]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ot(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Kt(l){var u=l[is];return u||(u=l[is]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function hr(l){l[gi]=!0}var dn=new Set,qr={};function hn(l,u){Cr(l,u),Cr(l+"Capture",u)}function Cr(l,u){for(qr[l]=u,l=0;l<u.length;l++)dn.add(u[l])}var Is=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ss={},ao={};function io(l){return Be.call(ao,l)?!0:Be.call(ss,l)?!1:Is.test(l)?ao[l]=!0:(ss[l]=!0,!1)}function qa(l,u,f){if(io(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function q(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function ge(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function Ae(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ce(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function ut(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,S=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(U){f=""+U,S.call(this,U)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(U){f=""+U},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Dt(l){if(!l._valueTracker){var u=Ce(l)?"checked":"value";l._valueTracker=ut(l,u,""+l[u])}}function qt(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=Ce(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function tr(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Qt=/[\n"\\]/g;function $t(l){return l.replace(Qt,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ri(l,u,f,g,b,S,U,Y){l.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.type=U:l.removeAttribute("type"),u!=null?U==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Ae(u)):l.value!==""+Ae(u)&&(l.value=""+Ae(u)):U!=="submit"&&U!=="reset"||l.removeAttribute("value"),u!=null?oe(l,U,Ae(u)):f!=null?oe(l,U,Ae(f)):g!=null&&l.removeAttribute("value"),b==null&&S!=null&&(l.defaultChecked=!!S),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?l.name=""+Ae(Y):l.removeAttribute("name")}function or(l,u,f,g,b,S,U,Y){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||u!=null)){Dt(l);return}f=f!=null?""+Ae(f):"",u=u!=null?""+Ae(u):f,Y||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=Y?l.checked:!!g,l.defaultChecked=!!g,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(l.name=U),Dt(l)}function oe(l,u,f){u==="number"&&tr(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function ve(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+Ae(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function He(l,u,f){if(u!=null&&(u=""+Ae(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+Ae(f):""}function Je(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(Q(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Ae(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Dt(l)}function nt(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cr(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||br.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function ma(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&cr(l,b,g)}else for(var S in u)u.hasOwnProperty(S)&&cr(l,S,u[S])}function ka(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ga=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ya(l){return ga.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Xn(){}var Or=null;function Co(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ms=null,os=null;function k1(l){var u=Ke(l);if(u&&(l=u.stateNode)){var f=l[Sn]||null;e:switch(l=u.stateNode,u.type){case"input":if(ri(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+$t(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[Sn]||null;if(!b)throw Error(n(90));ri(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&qt(g)}break e;case"textarea":He(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&ve(l,!!f.multiple,u,!1)}}}var Hf=!1;function C1(l,u,f){if(Hf)return l(u,f);Hf=!0;try{var g=l(u);return g}finally{if(Hf=!1,(Ms!==null||os!==null)&&(Ny(),Ms&&(u=Ms,l=os,os=Ms=null,k1(u),l)))for(u=0;u<l.length;u++)k1(l[u])}}function Ui(l,u){var f=l.stateNode;if(f===null)return null;var g=f[Sn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=!1;if(so)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){Gf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{Gf=!1}var ls=null,y0=null,Io=null;function pc(){if(Io)return Io;var l,u=y0,f=u.length,g,b="value"in ls?ls.value:ls.textContent,S=b.length;for(l=0;l<f&&u[l]===b[l];l++);var U=f-l;for(g=1;g<=U&&u[f-g]===b[S-g];g++);return Io=b.slice(l,1<g?1-g:void 0)}function $u(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function mc(){return!0}function Pn(){return!1}function yi(l){function u(f,g,b,S,U){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=S,this.target=U,this.currentTarget=null;for(var Y in l)l.hasOwnProperty(Y)&&(f=l[Y],this[Y]=f?f(S):S[Y]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?mc:Pn,this.isPropagationStopped=Pn,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=mc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=mc)},persist:function(){},isPersistent:mc}),u}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uu=yi(ll),gc=m({},ll,{view:0,detail:0}),O1=yi(gc),yc,v0,Ai,zu=m({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ai&&(Ai&&l.type==="mousemove"?(yc=l.screenX-Ai.screenX,v0=l.screenY-Ai.screenY):v0=yc=0,Ai=l),yc)},movementY:function(l){return"movementY"in l?l.movementY:v0}}),I1=yi(zu),Vu=m({},zu,{dataTransfer:0}),R1=yi(Vu),Wf=m({},gc,{relatedTarget:0}),vc=yi(Wf),M1=m({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),x0=yi(M1),k4=m({},ll,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),P1=yi(k4),Fu=m({},ll,{data:0}),Kf=yi(Fu),D1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function L1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Xf[l])?!!u[l]:!1}function xc(){return L1}var B1=m({},gc,{key:function(l){if(l.key){var u=D1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=$u(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Qf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(l){return l.type==="keypress"?$u(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?$u(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),$1=yi(B1),cl=m({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=yi(cl),U1=m({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),z1=yi(U1),V1=m({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),b0=yi(V1),Ni=m({},zu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),F1=yi(Ni),q1=m({},ll,{newState:0,oldState:0}),bc=yi(q1),v=[9,13,27,32],M=so&&"CompositionEvent"in window,V=null;so&&"documentMode"in document&&(V=document.documentMode);var J=so&&"TextEvent"in window&&!V,Te=so&&(!M||V&&8<V&&11>=V),$e=" ",dt=!1;function Zr(l,u){switch(l){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function va(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var vr=!1;function Ha(l,u){switch(l){case"compositionend":return va(u);case"keypress":return u.which!==32?null:(dt=!0,$e);case"textInput":return l=u.data,l===$e&&dt?null:l;default:return null}}function Ga(l,u){if(vr)return l==="compositionend"||!M&&Zr(l,u)?(l=pc(),Io=y0=ls=null,vr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Te&&u.locale!=="ko"?null:u.data;default:return null}}var wc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!wc[l.type]:u==="textarea"}function qu(l,u,f,g){Ms?os?os.push(g):os=[g]:Ms=g,u=Ry(u,"onChange"),0<u.length&&(f=new Uu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var ul=null,Zf=null;function jX(l){sC(l,0)}function H1(l){var u=ot(l);if(qt(u))return l}function Aj(l,u){if(l==="change")return u}var Nj=!1;if(so){var C4;if(so){var O4="oninput"in document;if(!O4){var Ej=document.createElement("div");Ej.setAttribute("oninput","return;"),O4=typeof Ej.oninput=="function"}C4=O4}else C4=!1;Nj=C4&&(!document.documentMode||9<document.documentMode)}function jj(){ul&&(ul.detachEvent("onpropertychange",kj),Zf=ul=null)}function kj(l){if(l.propertyName==="value"&&H1(Zf)){var u=[];qu(u,Zf,l,Co(l)),C1(jX,u)}}function kX(l,u,f){l==="focusin"?(jj(),ul=u,Zf=f,ul.attachEvent("onpropertychange",kj)):l==="focusout"&&jj()}function CX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return H1(Zf)}function OX(l,u){if(l==="click")return H1(u)}function IX(l,u){if(l==="input"||l==="change")return H1(u)}function RX(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var cs=typeof Object.is=="function"?Object.is:RX;function Jf(l,u){if(cs(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!Be.call(u,b)||!cs(l[b],u[b]))return!1}return!0}function Cj(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Oj(l,u){var f=Cj(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Cj(f)}}function Ij(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Ij(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Rj(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=tr(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=tr(l.document)}return u}function I4(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var MX=so&&"documentMode"in document&&11>=document.documentMode,w0=null,R4=null,ep=null,M4=!1;function Mj(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;M4||w0==null||w0!==tr(g)||(g=w0,"selectionStart"in g&&I4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ep&&Jf(ep,g)||(ep=g,g=Ry(R4,"onSelect"),0<g.length&&(u=new Uu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=w0)))}function Hu(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var S0={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionrun:Hu("Transition","TransitionRun"),transitionstart:Hu("Transition","TransitionStart"),transitioncancel:Hu("Transition","TransitionCancel"),transitionend:Hu("Transition","TransitionEnd")},P4={},Pj={};so&&(Pj=document.createElement("div").style,"AnimationEvent"in window||(delete S0.animationend.animation,delete S0.animationiteration.animation,delete S0.animationstart.animation),"TransitionEvent"in window||delete S0.transitionend.transition);function Gu(l){if(P4[l])return P4[l];if(!S0[l])return l;var u=S0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in Pj)return P4[l]=u[f];return l}var Dj=Gu("animationend"),Lj=Gu("animationiteration"),Bj=Gu("animationstart"),PX=Gu("transitionrun"),DX=Gu("transitionstart"),LX=Gu("transitioncancel"),$j=Gu("transitionend"),Uj=new Map,D4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");D4.push("scrollEnd");function oo(l,u){Uj.set(l,u),hn(u,[l])}var G1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ps=[],_0=0,L4=0;function W1(){for(var l=_0,u=L4=_0=0;u<l;){var f=Ps[u];Ps[u++]=null;var g=Ps[u];Ps[u++]=null;var b=Ps[u];Ps[u++]=null;var S=Ps[u];if(Ps[u++]=null,g!==null&&b!==null){var U=g.pending;U===null?b.next=b:(b.next=U.next,U.next=b),g.pending=b}S!==0&&zj(f,b,S)}}function K1(l,u,f,g){Ps[_0++]=l,Ps[_0++]=u,Ps[_0++]=f,Ps[_0++]=g,L4|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function B4(l,u,f,g){return K1(l,u,f,g),Q1(l)}function Wu(l,u){return K1(l,null,null,u),Q1(l)}function zj(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,S=l.return;S!==null;)S.childLanes|=f,g=S.alternate,g!==null&&(g.childLanes|=f),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(b=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,b&&u!==null&&(b=31-Pt(f),l=S.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),S):null}function Q1(l){if(50<Sp)throw Sp=0,Ww=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var T0={};function BX(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(l,u,f,g){return new BX(l,u,f,g)}function $4(l){return l=l.prototype,!(!l||!l.isReactComponent)}function dl(l,u){var f=l.alternate;return f===null?(f=us(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Vj(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function X1(l,u,f,g,b,S){var U=0;if(g=l,typeof l=="function")$4(l)&&(U=1);else if(typeof l=="string")U=FY(l,f,Oe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case j:return l=us(31,f,u,b),l.elementType=j,l.lanes=S,l;case _:return Ku(f.children,b,S,u);case w:U=8,b|=24;break;case E:return l=us(12,f,u,b|2),l.elementType=E,l.lanes=S,l;case P:return l=us(13,f,u,b),l.elementType=P,l.lanes=S,l;case R:return l=us(19,f,u,b),l.elementType=R,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case C:U=10;break e;case I:U=9;break e;case L:U=11;break e;case N:U=14;break e;case A:U=16,g=null;break e}U=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=us(U,f,u,b),u.elementType=l,u.type=g,u.lanes=S,u}function Ku(l,u,f,g){return l=us(7,l,g,u),l.lanes=f,l}function U4(l,u,f){return l=us(6,l,null,u),l.lanes=f,l}function Fj(l){var u=us(18,null,null,0);return u.stateNode=l,u}function z4(l,u,f){return u=us(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var qj=new WeakMap;function Ds(l,u){if(typeof l=="object"&&l!==null){var f=qj.get(l);return f!==void 0?f:(u={value:l,source:u,stack:be(u)},qj.set(l,u),u)}return{value:l,source:u,stack:be(u)}}var A0=[],N0=0,Y1=null,tp=0,Ls=[],Bs=0,Sc=null,Ro=1,Mo="";function hl(l,u){A0[N0++]=tp,A0[N0++]=Y1,Y1=l,tp=u}function Hj(l,u,f){Ls[Bs++]=Ro,Ls[Bs++]=Mo,Ls[Bs++]=Sc,Sc=l;var g=Ro;l=Mo;var b=32-Pt(g)-1;g&=~(1<<b),f+=1;var S=32-Pt(u)+b;if(30<S){var U=b-b%5;S=(g&(1<<U)-1).toString(32),g>>=U,b-=U,Ro=1<<32-Pt(u)+b|f<<b|g,Mo=S+l}else Ro=1<<S|f<<b|g,Mo=l}function V4(l){l.return!==null&&(hl(l,1),Hj(l,1,0))}function F4(l){for(;l===Y1;)Y1=A0[--N0],A0[N0]=null,tp=A0[--N0],A0[N0]=null;for(;l===Sc;)Sc=Ls[--Bs],Ls[Bs]=null,Mo=Ls[--Bs],Ls[Bs]=null,Ro=Ls[--Bs],Ls[Bs]=null}function Gj(l,u){Ls[Bs++]=Ro,Ls[Bs++]=Mo,Ls[Bs++]=Sc,Ro=u.id,Mo=u.overflow,Sc=l}var ni=null,Dn=null,Ir=!1,_c=null,$s=!1,q4=Error(n(519));function Tc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rp(Ds(u,l)),q4}function Wj(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Fr]=l,u[Sn]=g,f){case"dialog":_r("cancel",u),_r("close",u);break;case"iframe":case"object":case"embed":_r("load",u);break;case"video":case"audio":for(f=0;f<Tp.length;f++)_r(Tp[f],u);break;case"source":_r("error",u);break;case"img":case"image":case"link":_r("error",u),_r("load",u);break;case"details":_r("toggle",u);break;case"input":_r("invalid",u),or(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":_r("invalid",u);break;case"textarea":_r("invalid",u),Je(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||uC(u.textContent,f)?(g.popover!=null&&(_r("beforetoggle",u),_r("toggle",u)),g.onScroll!=null&&_r("scroll",u),g.onScrollEnd!=null&&_r("scrollend",u),g.onClick!=null&&(u.onclick=Xn),u=!0):u=!1,u||Tc(l,!0)}function Kj(l){for(ni=l.return;ni;)switch(ni.tag){case 5:case 31:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:ni=ni.return}}function E0(l){if(l!==ni)return!1;if(!Ir)return Kj(l),Ir=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||l5(l.type,l.memoizedProps)),f=!f),f&&Dn&&Tc(l),Kj(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Dn=xC(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Dn=xC(l)}else u===27?(u=Dn,Bc(l.type)?(l=f5,f5=null,Dn=l):Dn=u):Dn=ni?zs(l.stateNode.nextSibling):null;return!0}function Qu(){Dn=ni=null,Ir=!1}function H4(){var l=_c;return l!==null&&(Hi===null?Hi=l:Hi.push.apply(Hi,l),_c=null),l}function rp(l){_c===null?_c=[l]:_c.push(l)}var G4=H(null),Xu=null,fl=null;function Ac(l,u,f){te(G4,u._currentValue),u._currentValue=f}function pl(l){l._currentValue=G4.current,ee(G4)}function W4(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function K4(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var S=b.dependencies;if(S!==null){var U=b.child;S=S.firstContext;e:for(;S!==null;){var Y=S;S=b;for(var le=0;le<u.length;le++)if(Y.context===u[le]){S.lanes|=f,Y=S.alternate,Y!==null&&(Y.lanes|=f),W4(S.return,f,l),g||(U=null);break e}S=Y.next}}else if(b.tag===18){if(U=b.return,U===null)throw Error(n(341));U.lanes|=f,S=U.alternate,S!==null&&(S.lanes|=f),W4(U,f,l),U=null}else U=b.child;if(U!==null)U.return=b;else for(U=b;U!==null;){if(U===l){U=null;break}if(b=U.sibling,b!==null){b.return=U.return,U=b;break}U=U.return}b=U}}function j0(l,u,f,g){l=null;for(var b=u,S=!1;b!==null;){if(!S){if((b.flags&524288)!==0)S=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var U=b.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var Y=b.type;cs(b.pendingProps.value,U.value)||(l!==null?l.push(Y):l=[Y])}}else if(b===he.current){if(U=b.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(kp):l=[kp])}b=b.return}l!==null&&K4(u,l,f,g),u.flags|=262144}function Z1(l){for(l=l.firstContext;l!==null;){if(!cs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Yu(l){Xu=l,fl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ai(l){return Qj(Xu,l)}function J1(l,u){return Xu===null&&Yu(l),Qj(l,u)}function Qj(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},fl===null){if(l===null)throw Error(n(308));fl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else fl=fl.next=u;return f}var $X=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},UX=t.unstable_scheduleCallback,zX=t.unstable_NormalPriority,xa={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Q4(){return{controller:new $X,data:new Map,refCount:0}}function np(l){l.refCount--,l.refCount===0&&UX(zX,function(){l.controller.abort()})}var ap=null,X4=0,k0=0,C0=null;function VX(l,u){if(ap===null){var f=ap=[];X4=0,k0=Jw(),C0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return X4++,u.then(Xj,Xj),u}function Xj(){if(--X4===0&&ap!==null){C0!==null&&(C0.status="fulfilled");var l=ap;ap=null,k0=0,C0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function FX(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var Yj=G.S;G.S=function(l,u){M9=Rt(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&VX(l,u),Yj!==null&&Yj(l,u)};var Zu=H(null);function Y4(){var l=Zu.current;return l!==null?l:_n.pooledCache}function ey(l,u){u===null?te(Zu,Zu.current):te(Zu,u.pool)}function Zj(){var l=Y4();return l===null?null:{parent:xa._currentValue,pool:l}}var O0=Error(n(460)),Z4=Error(n(474)),ty=Error(n(542)),ry={then:function(){}};function Jj(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ek(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(Xn,Xn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,rk(l),l;default:if(typeof u.status=="string")u.then(Xn,Xn);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,rk(l),l}throw ed=u,O0}}function Ju(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(ed=f,O0):f}}var ed=null;function tk(){if(ed===null)throw Error(n(459));var l=ed;return ed=null,l}function rk(l){if(l===O0||l===ty)throw Error(n(483))}var I0=null,ip=0;function ny(l){var u=ip;return ip+=1,I0===null&&(I0=[]),ek(I0,l,u)}function sp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function ay(l,u){throw u.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function nk(l){function u(we,fe){if(l){var Ne=we.deletions;Ne===null?(we.deletions=[fe],we.flags|=16):Ne.push(fe)}}function f(we,fe){if(!l)return null;for(;fe!==null;)u(we,fe),fe=fe.sibling;return null}function g(we){for(var fe=new Map;we!==null;)we.key!==null?fe.set(we.key,we):fe.set(we.index,we),we=we.sibling;return fe}function b(we,fe){return we=dl(we,fe),we.index=0,we.sibling=null,we}function S(we,fe,Ne){return we.index=Ne,l?(Ne=we.alternate,Ne!==null?(Ne=Ne.index,Ne<fe?(we.flags|=67108866,fe):Ne):(we.flags|=67108866,fe)):(we.flags|=1048576,fe)}function U(we){return l&&we.alternate===null&&(we.flags|=67108866),we}function Y(we,fe,Ne,qe){return fe===null||fe.tag!==6?(fe=U4(Ne,we.mode,qe),fe.return=we,fe):(fe=b(fe,Ne),fe.return=we,fe)}function le(we,fe,Ne,qe){var Ut=Ne.type;return Ut===_?ze(we,fe,Ne.props.children,qe,Ne.key):fe!==null&&(fe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===A&&Ju(Ut)===fe.type)?(fe=b(fe,Ne.props),sp(fe,Ne),fe.return=we,fe):(fe=X1(Ne.type,Ne.key,Ne.props,null,we.mode,qe),sp(fe,Ne),fe.return=we,fe)}function je(we,fe,Ne,qe){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ne.containerInfo||fe.stateNode.implementation!==Ne.implementation?(fe=z4(Ne,we.mode,qe),fe.return=we,fe):(fe=b(fe,Ne.children||[]),fe.return=we,fe)}function ze(we,fe,Ne,qe,Ut){return fe===null||fe.tag!==7?(fe=Ku(Ne,we.mode,qe,Ut),fe.return=we,fe):(fe=b(fe,Ne),fe.return=we,fe)}function Ge(we,fe,Ne){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=U4(""+fe,we.mode,Ne),fe.return=we,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:return Ne=X1(fe.type,fe.key,fe.props,null,we.mode,Ne),sp(Ne,fe),Ne.return=we,Ne;case T:return fe=z4(fe,we.mode,Ne),fe.return=we,fe;case A:return fe=Ju(fe),Ge(we,fe,Ne)}if(Q(fe)||F(fe))return fe=Ku(fe,we.mode,Ne,null),fe.return=we,fe;if(typeof fe.then=="function")return Ge(we,ny(fe),Ne);if(fe.$$typeof===C)return Ge(we,J1(we,fe),Ne);ay(we,fe)}return null}function Re(we,fe,Ne,qe){var Ut=fe!==null?fe.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ut!==null?null:Y(we,fe,""+Ne,qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case x:return Ne.key===Ut?le(we,fe,Ne,qe):null;case T:return Ne.key===Ut?je(we,fe,Ne,qe):null;case A:return Ne=Ju(Ne),Re(we,fe,Ne,qe)}if(Q(Ne)||F(Ne))return Ut!==null?null:ze(we,fe,Ne,qe,null);if(typeof Ne.then=="function")return Re(we,fe,ny(Ne),qe);if(Ne.$$typeof===C)return Re(we,fe,J1(we,Ne),qe);ay(we,Ne)}return null}function Le(we,fe,Ne,qe,Ut){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return we=we.get(Ne)||null,Y(fe,we,""+qe,Ut);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case x:return we=we.get(qe.key===null?Ne:qe.key)||null,le(fe,we,qe,Ut);case T:return we=we.get(qe.key===null?Ne:qe.key)||null,je(fe,we,qe,Ut);case A:return qe=Ju(qe),Le(we,fe,Ne,qe,Ut)}if(Q(qe)||F(qe))return we=we.get(Ne)||null,ze(fe,we,qe,Ut,null);if(typeof qe.then=="function")return Le(we,fe,Ne,ny(qe),Ut);if(qe.$$typeof===C)return Le(we,fe,Ne,J1(fe,qe),Ut);ay(fe,qe)}return null}function Ct(we,fe,Ne,qe){for(var Ut=null,Lr=null,Mt=fe,fr=fe=0,Nr=null;Mt!==null&&fr<Ne.length;fr++){Mt.index>fr?(Nr=Mt,Mt=null):Nr=Mt.sibling;var Br=Re(we,Mt,Ne[fr],qe);if(Br===null){Mt===null&&(Mt=Nr);break}l&&Mt&&Br.alternate===null&&u(we,Mt),fe=S(Br,fe,fr),Lr===null?Ut=Br:Lr.sibling=Br,Lr=Br,Mt=Nr}if(fr===Ne.length)return f(we,Mt),Ir&&hl(we,fr),Ut;if(Mt===null){for(;fr<Ne.length;fr++)Mt=Ge(we,Ne[fr],qe),Mt!==null&&(fe=S(Mt,fe,fr),Lr===null?Ut=Mt:Lr.sibling=Mt,Lr=Mt);return Ir&&hl(we,fr),Ut}for(Mt=g(Mt);fr<Ne.length;fr++)Nr=Le(Mt,we,fr,Ne[fr],qe),Nr!==null&&(l&&Nr.alternate!==null&&Mt.delete(Nr.key===null?fr:Nr.key),fe=S(Nr,fe,fr),Lr===null?Ut=Nr:Lr.sibling=Nr,Lr=Nr);return l&&Mt.forEach(function(Fc){return u(we,Fc)}),Ir&&hl(we,fr),Ut}function Ht(we,fe,Ne,qe){if(Ne==null)throw Error(n(151));for(var Ut=null,Lr=null,Mt=fe,fr=fe=0,Nr=null,Br=Ne.next();Mt!==null&&!Br.done;fr++,Br=Ne.next()){Mt.index>fr?(Nr=Mt,Mt=null):Nr=Mt.sibling;var Fc=Re(we,Mt,Br.value,qe);if(Fc===null){Mt===null&&(Mt=Nr);break}l&&Mt&&Fc.alternate===null&&u(we,Mt),fe=S(Fc,fe,fr),Lr===null?Ut=Fc:Lr.sibling=Fc,Lr=Fc,Mt=Nr}if(Br.done)return f(we,Mt),Ir&&hl(we,fr),Ut;if(Mt===null){for(;!Br.done;fr++,Br=Ne.next())Br=Ge(we,Br.value,qe),Br!==null&&(fe=S(Br,fe,fr),Lr===null?Ut=Br:Lr.sibling=Br,Lr=Br);return Ir&&hl(we,fr),Ut}for(Mt=g(Mt);!Br.done;fr++,Br=Ne.next())Br=Le(Mt,we,fr,Br.value,qe),Br!==null&&(l&&Br.alternate!==null&&Mt.delete(Br.key===null?fr:Br.key),fe=S(Br,fe,fr),Lr===null?Ut=Br:Lr.sibling=Br,Lr=Br);return l&&Mt.forEach(function(eZ){return u(we,eZ)}),Ir&&hl(we,fr),Ut}function mn(we,fe,Ne,qe){if(typeof Ne=="object"&&Ne!==null&&Ne.type===_&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case x:e:{for(var Ut=Ne.key;fe!==null;){if(fe.key===Ut){if(Ut=Ne.type,Ut===_){if(fe.tag===7){f(we,fe.sibling),qe=b(fe,Ne.props.children),qe.return=we,we=qe;break e}}else if(fe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===A&&Ju(Ut)===fe.type){f(we,fe.sibling),qe=b(fe,Ne.props),sp(qe,Ne),qe.return=we,we=qe;break e}f(we,fe);break}else u(we,fe);fe=fe.sibling}Ne.type===_?(qe=Ku(Ne.props.children,we.mode,qe,Ne.key),qe.return=we,we=qe):(qe=X1(Ne.type,Ne.key,Ne.props,null,we.mode,qe),sp(qe,Ne),qe.return=we,we=qe)}return U(we);case T:e:{for(Ut=Ne.key;fe!==null;){if(fe.key===Ut)if(fe.tag===4&&fe.stateNode.containerInfo===Ne.containerInfo&&fe.stateNode.implementation===Ne.implementation){f(we,fe.sibling),qe=b(fe,Ne.children||[]),qe.return=we,we=qe;break e}else{f(we,fe);break}else u(we,fe);fe=fe.sibling}qe=z4(Ne,we.mode,qe),qe.return=we,we=qe}return U(we);case A:return Ne=Ju(Ne),mn(we,fe,Ne,qe)}if(Q(Ne))return Ct(we,fe,Ne,qe);if(F(Ne)){if(Ut=F(Ne),typeof Ut!="function")throw Error(n(150));return Ne=Ut.call(Ne),Ht(we,fe,Ne,qe)}if(typeof Ne.then=="function")return mn(we,fe,ny(Ne),qe);if(Ne.$$typeof===C)return mn(we,fe,J1(we,Ne),qe);ay(we,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,fe!==null&&fe.tag===6?(f(we,fe.sibling),qe=b(fe,Ne),qe.return=we,we=qe):(f(we,fe),qe=U4(Ne,we.mode,qe),qe.return=we,we=qe),U(we)):f(we,fe)}return function(we,fe,Ne,qe){try{ip=0;var Ut=mn(we,fe,Ne,qe);return I0=null,Ut}catch(Mt){if(Mt===O0||Mt===ty)throw Mt;var Lr=us(29,Mt,null,we.mode);return Lr.lanes=qe,Lr.return=we,Lr}finally{}}}var td=nk(!0),ak=nk(!1),Nc=!1;function J4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ew(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ec(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function jc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(Hr&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=Q1(l),zj(l,null,f),u}return K1(l,g,u,f),Q1(l)}function op(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,cn(l,f)}}function tw(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var U={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?b=S=U:S=S.next=U,f=f.next}while(f!==null);S===null?b=S=u:S=S.next=u}else b=S=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var rw=!1;function lp(){if(rw){var l=C0;if(l!==null)throw l}}function cp(l,u,f,g){rw=!1;var b=l.updateQueue;Nc=!1;var S=b.firstBaseUpdate,U=b.lastBaseUpdate,Y=b.shared.pending;if(Y!==null){b.shared.pending=null;var le=Y,je=le.next;le.next=null,U===null?S=je:U.next=je,U=le;var ze=l.alternate;ze!==null&&(ze=ze.updateQueue,Y=ze.lastBaseUpdate,Y!==U&&(Y===null?ze.firstBaseUpdate=je:Y.next=je,ze.lastBaseUpdate=le))}if(S!==null){var Ge=b.baseState;U=0,ze=je=le=null,Y=S;do{var Re=Y.lane&-536870913,Le=Re!==Y.lane;if(Le?(Ar&Re)===Re:(g&Re)===Re){Re!==0&&Re===k0&&(rw=!0),ze!==null&&(ze=ze.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Ct=l,Ht=Y;Re=u;var mn=f;switch(Ht.tag){case 1:if(Ct=Ht.payload,typeof Ct=="function"){Ge=Ct.call(mn,Ge,Re);break e}Ge=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Ht.payload,Re=typeof Ct=="function"?Ct.call(mn,Ge,Re):Ct,Re==null)break e;Ge=m({},Ge,Re);break e;case 2:Nc=!0}}Re=Y.callback,Re!==null&&(l.flags|=64,Le&&(l.flags|=8192),Le=b.callbacks,Le===null?b.callbacks=[Re]:Le.push(Re))}else Le={lane:Re,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},ze===null?(je=ze=Le,le=Ge):ze=ze.next=Le,U|=Re;if(Y=Y.next,Y===null){if(Y=b.shared.pending,Y===null)break;Le=Y,Y=Le.next,Le.next=null,b.lastBaseUpdate=Le,b.shared.pending=null}}while(!0);ze===null&&(le=Ge),b.baseState=le,b.firstBaseUpdate=je,b.lastBaseUpdate=ze,S===null&&(b.shared.lanes=0),Rc|=U,l.lanes=U,l.memoizedState=Ge}}function ik(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function sk(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)ik(f[l],u)}var R0=H(null),iy=H(0);function ok(l,u){l=_l,te(iy,l),te(R0,u),_l=l|u.baseLanes}function nw(){te(iy,_l),te(R0,R0.current)}function aw(){_l=iy.current,ee(R0),ee(iy)}var ds=H(null),Us=null;function kc(l){var u=l.alternate;te(ia,ia.current&1),te(ds,l),Us===null&&(u===null||R0.current!==null||u.memoizedState!==null)&&(Us=l)}function iw(l){te(ia,ia.current),te(ds,l),Us===null&&(Us=l)}function lk(l){l.tag===22?(te(ia,ia.current),te(ds,l),Us===null&&(Us=l)):Cc()}function Cc(){te(ia,ia.current),te(ds,ds.current)}function hs(l){ee(ds),Us===l&&(Us=null),ee(ia)}var ia=H(0);function sy(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||d5(f)||h5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ml=0,ur=null,fn=null,ba=null,oy=!1,M0=!1,rd=!1,ly=0,up=0,P0=null,qX=0;function Yn(){throw Error(n(321))}function sw(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!cs(l[f],u[f]))return!1;return!0}function ow(l,u,f,g,b,S){return ml=S,ur=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,G.H=l===null||l.memoizedState===null?Hk:Sw,rd=!1,S=f(g,b),rd=!1,M0&&(S=uk(u,f,g,b)),ck(l),S}function ck(l){G.H=fp;var u=fn!==null&&fn.next!==null;if(ml=0,ba=fn=ur=null,oy=!1,up=0,P0=null,u)throw Error(n(300));l===null||wa||(l=l.dependencies,l!==null&&Z1(l)&&(wa=!0))}function uk(l,u,f,g){ur=l;var b=0;do{if(M0&&(P0=null),up=0,M0=!1,25<=b)throw Error(n(301));if(b+=1,ba=fn=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}G.H=Gk,S=u(f,g)}while(M0);return S}function HX(){var l=G.H,u=l.useState()[0];return u=typeof u.then=="function"?dp(u):u,l=l.useState()[0],(fn!==null?fn.memoizedState:null)!==l&&(ur.flags|=1024),u}function lw(){var l=ly!==0;return ly=0,l}function cw(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function uw(l){if(oy){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}oy=!1}ml=0,ba=fn=ur=null,M0=!1,up=ly=0,P0=null}function Ei(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?ur.memoizedState=ba=l:ba=ba.next=l,ba}function sa(){if(fn===null){var l=ur.alternate;l=l!==null?l.memoizedState:null}else l=fn.next;var u=ba===null?ur.memoizedState:ba.next;if(u!==null)ba=u,fn=l;else{if(l===null)throw ur.alternate===null?Error(n(467)):Error(n(310));fn=l,l={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},ba===null?ur.memoizedState=ba=l:ba=ba.next=l}return ba}function cy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dp(l){var u=up;return up+=1,P0===null&&(P0=[]),l=ek(P0,l,u),u=ur,(ba===null?u.memoizedState:ba.next)===null&&(u=u.alternate,G.H=u===null||u.memoizedState===null?Hk:Sw),l}function uy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return dp(l);if(l.$$typeof===C)return ai(l)}throw Error(n(438,String(l)))}function dw(l){var u=null,f=ur.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=ur.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=cy(),ur.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=$;return u.index++,f}function gl(l,u){return typeof u=="function"?u(l):u}function dy(l){var u=sa();return hw(u,fn,l)}function hw(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,S=g.pending;if(S!==null){if(b!==null){var U=b.next;b.next=S.next,S.next=U}u.baseQueue=b=S,g.pending=null}if(S=l.baseState,b===null)l.memoizedState=S;else{u=b.next;var Y=U=null,le=null,je=u,ze=!1;do{var Ge=je.lane&-536870913;if(Ge!==je.lane?(Ar&Ge)===Ge:(ml&Ge)===Ge){var Re=je.revertLane;if(Re===0)le!==null&&(le=le.next={lane:0,revertLane:0,gesture:null,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),Ge===k0&&(ze=!0);else if((ml&Re)===Re){je=je.next,Re===k0&&(ze=!0);continue}else Ge={lane:0,revertLane:je.revertLane,gesture:null,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},le===null?(Y=le=Ge,U=S):le=le.next=Ge,ur.lanes|=Re,Rc|=Re;Ge=je.action,rd&&f(S,Ge),S=je.hasEagerState?je.eagerState:f(S,Ge)}else Re={lane:Ge,revertLane:je.revertLane,gesture:je.gesture,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null},le===null?(Y=le=Re,U=S):le=le.next=Re,ur.lanes|=Ge,Rc|=Ge;je=je.next}while(je!==null&&je!==u);if(le===null?U=S:le.next=Y,!cs(S,l.memoizedState)&&(wa=!0,ze&&(f=C0,f!==null)))throw f;l.memoizedState=S,l.baseState=U,l.baseQueue=le,g.lastRenderedState=S}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function fw(l){var u=sa(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,S=u.memoizedState;if(b!==null){f.pending=null;var U=b=b.next;do S=l(S,U.action),U=U.next;while(U!==b);cs(S,u.memoizedState)||(wa=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),f.lastRenderedState=S}return[S,g]}function dk(l,u,f){var g=ur,b=sa(),S=Ir;if(S){if(f===void 0)throw Error(n(407));f=f()}else f=u();var U=!cs((fn||b).memoizedState,f);if(U&&(b.memoizedState=f,wa=!0),b=b.queue,gw(pk.bind(null,g,b,l),[l]),b.getSnapshot!==u||U||ba!==null&&ba.memoizedState.tag&1){if(g.flags|=2048,D0(9,{destroy:void 0},fk.bind(null,g,b,f,u),null),_n===null)throw Error(n(349));S||(ml&127)!==0||hk(g,u,f)}return f}function hk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=ur.updateQueue,u===null?(u=cy(),ur.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function fk(l,u,f,g){u.value=f,u.getSnapshot=g,mk(u)&&gk(l)}function pk(l,u,f){return f(function(){mk(u)&&gk(l)})}function mk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!cs(l,f)}catch{return!0}}function gk(l){var u=Wu(l,2);u!==null&&Gi(u,l,2)}function pw(l){var u=Ei();if(typeof l=="function"){var f=l;if(l=f(),rd){jt(!0);try{f()}finally{jt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:l},u}function yk(l,u,f,g){return l.baseState=f,hw(l,fn,typeof g=="function"?g:gl)}function GX(l,u,f,g,b){if(py(l))throw Error(n(485));if(l=u.action,l!==null){var S={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){S.listeners.push(U)}};G.T!==null?f(!0):S.isTransition=!1,g(S),f=u.pending,f===null?(S.next=u.pending=S,vk(u,S)):(S.next=f.next,u.pending=f.next=S)}}function vk(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var S=G.T,U={};G.T=U;try{var Y=f(b,g),le=G.S;le!==null&&le(U,Y),xk(l,u,Y)}catch(je){mw(l,u,je)}finally{S!==null&&U.types!==null&&(S.types=U.types),G.T=S}}else try{S=f(b,g),xk(l,u,S)}catch(je){mw(l,u,je)}}function xk(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){bk(l,u,g)},function(g){return mw(l,u,g)}):bk(l,u,f)}function bk(l,u,f){u.status="fulfilled",u.value=f,wk(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,vk(l,f)))}function mw(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,wk(u),u=u.next;while(u!==g)}l.action=null}function wk(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Sk(l,u){return u}function _k(l,u){if(Ir){var f=_n.formState;if(f!==null){e:{var g=ur;if(Ir){if(Dn){t:{for(var b=Dn,S=$s;b.nodeType!==8;){if(!S){b=null;break t}if(b=zs(b.nextSibling),b===null){b=null;break t}}S=b.data,b=S==="F!"||S==="F"?b:null}if(b){Dn=zs(b.nextSibling),g=b.data==="F!";break e}}Tc(g)}g=!1}g&&(u=f[0])}}return f=Ei(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sk,lastRenderedState:u},f.queue=g,f=Vk.bind(null,ur,g),g.dispatch=f,g=pw(!1),S=ww.bind(null,ur,!1,g.queue),g=Ei(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=GX.bind(null,ur,b,S,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function Tk(l){var u=sa();return Ak(u,fn,l)}function Ak(l,u,f){if(u=hw(l,u,Sk)[0],l=dy(gl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=dp(u)}catch(U){throw U===O0?ty:U}else g=u;u=sa();var b=u.queue,S=b.dispatch;return f!==u.memoizedState&&(ur.flags|=2048,D0(9,{destroy:void 0},WX.bind(null,b,f),null)),[g,S,l]}function WX(l,u){l.action=u}function Nk(l){var u=sa(),f=fn;if(f!==null)return Ak(u,f,l);sa(),u=u.memoizedState,f=sa();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function D0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=ur.updateQueue,u===null&&(u=cy(),ur.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function Ek(){return sa().memoizedState}function hy(l,u,f,g){var b=Ei();ur.flags|=l,b.memoizedState=D0(1|u,{destroy:void 0},f,g===void 0?null:g)}function fy(l,u,f,g){var b=sa();g=g===void 0?null:g;var S=b.memoizedState.inst;fn!==null&&g!==null&&sw(g,fn.memoizedState.deps)?b.memoizedState=D0(u,S,f,g):(ur.flags|=l,b.memoizedState=D0(1|u,S,f,g))}function jk(l,u){hy(8390656,8,l,u)}function gw(l,u){fy(2048,8,l,u)}function KX(l){ur.flags|=4;var u=ur.updateQueue;if(u===null)u=cy(),ur.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function kk(l){var u=sa().memoizedState;return KX({ref:u,nextImpl:l}),function(){if((Hr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Ck(l,u){return fy(4,2,l,u)}function Ok(l,u){return fy(4,4,l,u)}function Ik(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Rk(l,u,f){f=f!=null?f.concat([l]):null,fy(4,4,Ik.bind(null,u,l),f)}function yw(){}function Mk(l,u){var f=sa();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&sw(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function Pk(l,u){var f=sa();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&sw(u,g[1]))return g[0];if(g=l(),rd){jt(!0);try{l()}finally{jt(!1)}}return f.memoizedState=[g,u],g}function vw(l,u,f){return f===void 0||(ml&1073741824)!==0&&(Ar&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=D9(),ur.lanes|=l,Rc|=l,f)}function Dk(l,u,f,g){return cs(f,u)?f:R0.current!==null?(l=vw(l,f,g),cs(l,u)||(wa=!0),l):(ml&42)===0||(ml&1073741824)!==0&&(Ar&261930)===0?(wa=!0,l.memoizedState=f):(l=D9(),ur.lanes|=l,Rc|=l,u)}function Lk(l,u,f,g,b){var S=X.p;X.p=S!==0&&8>S?S:8;var U=G.T,Y={};G.T=Y,ww(l,!1,u,f);try{var le=b(),je=G.S;if(je!==null&&je(Y,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var ze=FX(le,g);hp(l,u,ze,ms(l))}else hp(l,u,g,ms(l))}catch(Ge){hp(l,u,{then:function(){},status:"rejected",reason:Ge},ms())}finally{X.p=S,U!==null&&Y.types!==null&&(U.types=Y.types),G.T=U}}function QX(){}function xw(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=Bk(l).queue;Lk(l,b,u,ne,f===null?QX:function(){return $k(l),f(g)})}function Bk(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:ne},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function $k(l){var u=Bk(l);u.next===null&&(u=l.alternate.memoizedState),hp(l,u.next.queue,{},ms())}function bw(){return ai(kp)}function Uk(){return sa().memoizedState}function zk(){return sa().memoizedState}function XX(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=ms();l=Ec(f);var g=jc(u,l,f);g!==null&&(Gi(g,u,f),op(g,u,f)),u={cache:Q4()},l.payload=u;return}u=u.return}}function YX(l,u,f){var g=ms();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},py(l)?Fk(u,f):(f=B4(l,u,f,g),f!==null&&(Gi(f,l,g),qk(f,u,g)))}function Vk(l,u,f){var g=ms();hp(l,u,f,g)}function hp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(py(l))Fk(u,b);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var U=u.lastRenderedState,Y=S(U,f);if(b.hasEagerState=!0,b.eagerState=Y,cs(Y,U))return K1(l,u,b,0),_n===null&&W1(),!1}catch{}finally{}if(f=B4(l,u,b,g),f!==null)return Gi(f,l,g),qk(f,u,g),!0}return!1}function ww(l,u,f,g){if(g={lane:2,revertLane:Jw(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},py(l)){if(u)throw Error(n(479))}else u=B4(l,f,g,2),u!==null&&Gi(u,l,2)}function py(l){var u=l.alternate;return l===ur||u!==null&&u===ur}function Fk(l,u){M0=oy=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function qk(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,cn(l,f)}}var fp={readContext:ai,use:uy,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn};fp.useEffectEvent=Yn;var Hk={readContext:ai,use:uy,useCallback:function(l,u){return Ei().memoizedState=[l,u===void 0?null:u],l},useContext:ai,useEffect:jk,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,hy(4194308,4,Ik.bind(null,u,l),f)},useLayoutEffect:function(l,u){return hy(4194308,4,l,u)},useInsertionEffect:function(l,u){hy(4,2,l,u)},useMemo:function(l,u){var f=Ei();u=u===void 0?null:u;var g=l();if(rd){jt(!0);try{l()}finally{jt(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ei();if(f!==void 0){var b=f(u);if(rd){jt(!0);try{f(u)}finally{jt(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=YX.bind(null,ur,l),[g.memoizedState,l]},useRef:function(l){var u=Ei();return l={current:l},u.memoizedState=l},useState:function(l){l=pw(l);var u=l.queue,f=Vk.bind(null,ur,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:yw,useDeferredValue:function(l,u){var f=Ei();return vw(f,l,u)},useTransition:function(){var l=pw(!1);return l=Lk.bind(null,ur,l.queue,!0,!1),Ei().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=ur,b=Ei();if(Ir){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),_n===null)throw Error(n(349));(Ar&127)!==0||hk(g,u,f)}b.memoizedState=f;var S={value:f,getSnapshot:u};return b.queue=S,jk(pk.bind(null,g,S,l),[l]),g.flags|=2048,D0(9,{destroy:void 0},fk.bind(null,g,S,f,u),null),f},useId:function(){var l=Ei(),u=_n.identifierPrefix;if(Ir){var f=Mo,g=Ro;f=(g&~(1<<32-Pt(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=ly++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=qX++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:bw,useFormState:_k,useActionState:_k,useOptimistic:function(l){var u=Ei();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=ww.bind(null,ur,!0,f),f.dispatch=u,[l,u]},useMemoCache:dw,useCacheRefresh:function(){return Ei().memoizedState=XX.bind(null,ur)},useEffectEvent:function(l){var u=Ei(),f={impl:l};return u.memoizedState=f,function(){if((Hr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},Sw={readContext:ai,use:uy,useCallback:Mk,useContext:ai,useEffect:gw,useImperativeHandle:Rk,useInsertionEffect:Ck,useLayoutEffect:Ok,useMemo:Pk,useReducer:dy,useRef:Ek,useState:function(){return dy(gl)},useDebugValue:yw,useDeferredValue:function(l,u){var f=sa();return Dk(f,fn.memoizedState,l,u)},useTransition:function(){var l=dy(gl)[0],u=sa().memoizedState;return[typeof l=="boolean"?l:dp(l),u]},useSyncExternalStore:dk,useId:Uk,useHostTransitionStatus:bw,useFormState:Tk,useActionState:Tk,useOptimistic:function(l,u){var f=sa();return yk(f,fn,l,u)},useMemoCache:dw,useCacheRefresh:zk};Sw.useEffectEvent=kk;var Gk={readContext:ai,use:uy,useCallback:Mk,useContext:ai,useEffect:gw,useImperativeHandle:Rk,useInsertionEffect:Ck,useLayoutEffect:Ok,useMemo:Pk,useReducer:fw,useRef:Ek,useState:function(){return fw(gl)},useDebugValue:yw,useDeferredValue:function(l,u){var f=sa();return fn===null?vw(f,l,u):Dk(f,fn.memoizedState,l,u)},useTransition:function(){var l=fw(gl)[0],u=sa().memoizedState;return[typeof l=="boolean"?l:dp(l),u]},useSyncExternalStore:dk,useId:Uk,useHostTransitionStatus:bw,useFormState:Nk,useActionState:Nk,useOptimistic:function(l,u){var f=sa();return fn!==null?yk(f,fn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:dw,useCacheRefresh:zk};Gk.useEffectEvent=kk;function _w(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var Tw={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=ms(),b=Ec(g);b.payload=u,f!=null&&(b.callback=f),u=jc(l,b,g),u!==null&&(Gi(u,l,g),op(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=ms(),b=Ec(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=jc(l,b,g),u!==null&&(Gi(u,l,g),op(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=ms(),g=Ec(f);g.tag=2,u!=null&&(g.callback=u),u=jc(l,g,f),u!==null&&(Gi(u,l,f),op(u,l,f))}};function Wk(l,u,f,g,b,S,U){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,S,U):u.prototype&&u.prototype.isPureReactComponent?!Jf(f,g)||!Jf(b,S):!0}function Kk(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&Tw.enqueueReplaceState(u,u.state,null)}function nd(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function Qk(l){G1(l)}function Xk(l){console.error(l)}function Yk(l){G1(l)}function my(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function Zk(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Aw(l,u,f){return f=Ec(f),f.tag=3,f.payload={element:null},f.callback=function(){my(l,u)},f}function Jk(l){return l=Ec(l),l.tag=3,l}function e9(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var S=g.value;l.payload=function(){return b(S)},l.callback=function(){Zk(u,f,g)}}var U=f.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(l.callback=function(){Zk(u,f,g),typeof b!="function"&&(Mc===null?Mc=new Set([this]):Mc.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})})}function ZX(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&j0(u,f,b,!0),f=ds.current,f!==null){switch(f.tag){case 31:case 13:return Us===null?Ey():f.alternate===null&&Zn===0&&(Zn=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===ry?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),Xw(l,g,b)),!1;case 22:return f.flags|=65536,g===ry?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),Xw(l,g,b)),!1}throw Error(n(435,f.tag))}return Xw(l,g,b),Ey(),!1}if(Ir)return u=ds.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==q4&&(l=Error(n(422),{cause:g}),rp(Ds(l,f)))):(g!==q4&&(u=Error(n(423),{cause:g}),rp(Ds(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Ds(g,f),b=Aw(l.stateNode,g,b),tw(l,b),Zn!==4&&(Zn=2)),!1;var S=Error(n(520),{cause:g});if(S=Ds(S,f),wp===null?wp=[S]:wp.push(S),Zn!==4&&(Zn=2),u===null)return!0;g=Ds(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=Aw(f.stateNode,g,l),tw(f,l),!1;case 1:if(u=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Mc===null||!Mc.has(S))))return f.flags|=65536,b&=-b,f.lanes|=b,b=Jk(b),e9(b,l,f,g),tw(f,b),!1}f=f.return}while(f!==null);return!1}var Nw=Error(n(461)),wa=!1;function ii(l,u,f,g){u.child=l===null?ak(u,null,f,g):td(u,l.child,f,g)}function t9(l,u,f,g,b){f=f.render;var S=u.ref;if("ref"in g){var U={};for(var Y in g)Y!=="ref"&&(U[Y]=g[Y])}else U=g;return Yu(u),g=ow(l,u,f,U,S,b),Y=lw(),l!==null&&!wa?(cw(l,u,b),yl(l,u,b)):(Ir&&Y&&V4(u),u.flags|=1,ii(l,u,g,b),u.child)}function r9(l,u,f,g,b){if(l===null){var S=f.type;return typeof S=="function"&&!$4(S)&&S.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=S,n9(l,u,S,g,b)):(l=X1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!Mw(l,b)){var U=S.memoizedProps;if(f=f.compare,f=f!==null?f:Jf,f(U,g)&&l.ref===u.ref)return yl(l,u,b)}return u.flags|=1,l=dl(S,g),l.ref=u.ref,l.return=u,u.child=l}function n9(l,u,f,g,b){if(l!==null){var S=l.memoizedProps;if(Jf(S,g)&&l.ref===u.ref)if(wa=!1,u.pendingProps=g=S,Mw(l,b))(l.flags&131072)!==0&&(wa=!0);else return u.lanes=l.lanes,yl(l,u,b)}return Ew(l,u,f,g,b)}function a9(l,u,f,g){var b=g.children,S=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~S}else g=0,u.child=null;return i9(l,u,S,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&ey(u,S!==null?S.cachePool:null),S!==null?ok(u,S):nw(),lk(u);else return g=u.lanes=536870912,i9(l,u,S!==null?S.baseLanes|f:f,f,g)}else S!==null?(ey(u,S.cachePool),ok(u,S),Cc(),u.memoizedState=null):(l!==null&&ey(u,null),nw(),Cc());return ii(l,u,b,f),u.child}function pp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function i9(l,u,f,g,b){var S=Y4();return S=S===null?null:{parent:xa._currentValue,pool:S},u.memoizedState={baseLanes:f,cachePool:S},l!==null&&ey(u,null),nw(),lk(u),l!==null&&j0(l,u,g,!0),u.childLanes=b,null}function gy(l,u){return u=vy({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function s9(l,u,f){return td(u,l.child,null,f),l=gy(u,u.pendingProps),l.flags|=2,hs(u),u.memoizedState=null,l}function JX(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Ir){if(g.mode==="hidden")return l=gy(u,g),u.lanes=536870912,pp(null,l);if(iw(u),(l=Dn)?(l=vC(l,$s),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Sc!==null?{id:Ro,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},f=Fj(l),f.return=u,u.child=f,ni=u,Dn=null)):l=null,l===null)throw Tc(u);return u.lanes=536870912,null}return gy(u,g)}var S=l.memoizedState;if(S!==null){var U=S.dehydrated;if(iw(u),b)if(u.flags&256)u.flags&=-257,u=s9(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(wa||j0(l,u,f,!1),b=(f&l.childLanes)!==0,wa||b){if(g=_n,g!==null&&(U=En(g,f),U!==0&&U!==S.retryLane))throw S.retryLane=U,Wu(l,U),Gi(g,l,U),Nw;Ey(),u=s9(l,u,f)}else l=S.treeContext,Dn=zs(U.nextSibling),ni=u,Ir=!0,_c=null,$s=!1,l!==null&&Gj(u,l),u=gy(u,g),u.flags|=4096;return u}return l=dl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function yy(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function Ew(l,u,f,g,b){return Yu(u),f=ow(l,u,f,g,void 0,b),g=lw(),l!==null&&!wa?(cw(l,u,b),yl(l,u,b)):(Ir&&g&&V4(u),u.flags|=1,ii(l,u,f,b),u.child)}function o9(l,u,f,g,b,S){return Yu(u),u.updateQueue=null,f=uk(u,g,f,b),ck(l),g=lw(),l!==null&&!wa?(cw(l,u,S),yl(l,u,S)):(Ir&&g&&V4(u),u.flags|=1,ii(l,u,f,S),u.child)}function l9(l,u,f,g,b){if(Yu(u),u.stateNode===null){var S=T0,U=f.contextType;typeof U=="object"&&U!==null&&(S=ai(U)),S=new f(g,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Tw,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=g,S.state=u.memoizedState,S.refs={},J4(u),U=f.contextType,S.context=typeof U=="object"&&U!==null?ai(U):T0,S.state=u.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(_w(u,f,U,g),S.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(U=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),U!==S.state&&Tw.enqueueReplaceState(S,S.state,null),cp(u,g,S,b),lp(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){S=u.stateNode;var Y=u.memoizedProps,le=nd(f,Y);S.props=le;var je=S.context,ze=f.contextType;U=T0,typeof ze=="object"&&ze!==null&&(U=ai(ze));var Ge=f.getDerivedStateFromProps;ze=typeof Ge=="function"||typeof S.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,ze||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Y||je!==U)&&Kk(u,S,g,U),Nc=!1;var Re=u.memoizedState;S.state=Re,cp(u,g,S,b),lp(),je=u.memoizedState,Y||Re!==je||Nc?(typeof Ge=="function"&&(_w(u,f,Ge,g),je=u.memoizedState),(le=Nc||Wk(u,f,le,g,Re,je,U))?(ze||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=je),S.props=g,S.state=je,S.context=U,g=le):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{S=u.stateNode,ew(l,u),U=u.memoizedProps,ze=nd(f,U),S.props=ze,Ge=u.pendingProps,Re=S.context,je=f.contextType,le=T0,typeof je=="object"&&je!==null&&(le=ai(je)),Y=f.getDerivedStateFromProps,(je=typeof Y=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(U!==Ge||Re!==le)&&Kk(u,S,g,le),Nc=!1,Re=u.memoizedState,S.state=Re,cp(u,g,S,b),lp();var Le=u.memoizedState;U!==Ge||Re!==Le||Nc||l!==null&&l.dependencies!==null&&Z1(l.dependencies)?(typeof Y=="function"&&(_w(u,f,Y,g),Le=u.memoizedState),(ze=Nc||Wk(u,f,ze,g,Re,Le,le)||l!==null&&l.dependencies!==null&&Z1(l.dependencies))?(je||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,Le,le),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,Le,le)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&Re===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&Re===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Le),S.props=g,S.state=Le,S.context=le,g=ze):(typeof S.componentDidUpdate!="function"||U===l.memoizedProps&&Re===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||U===l.memoizedProps&&Re===l.memoizedState||(u.flags|=1024),g=!1)}return S=g,yy(l,u),g=(u.flags&128)!==0,S||g?(S=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&g?(u.child=td(u,l.child,null,b),u.child=td(u,null,f,b)):ii(l,u,f,b),u.memoizedState=S.state,l=u.child):l=yl(l,u,b),l}function c9(l,u,f,g){return Qu(),u.flags|=256,ii(l,u,f,g),u.child}var jw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kw(l){return{baseLanes:l,cachePool:Zj()}}function Cw(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=ps),l}function u9(l,u,f){var g=u.pendingProps,b=!1,S=(u.flags&128)!==0,U;if((U=S)||(U=l!==null&&l.memoizedState===null?!1:(ia.current&2)!==0),U&&(b=!0,u.flags&=-129),U=(u.flags&32)!==0,u.flags&=-33,l===null){if(Ir){if(b?kc(u):Cc(),(l=Dn)?(l=vC(l,$s),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Sc!==null?{id:Ro,overflow:Mo}:null,retryLane:536870912,hydrationErrors:null},f=Fj(l),f.return=u,u.child=f,ni=u,Dn=null)):l=null,l===null)throw Tc(u);return h5(l)?u.lanes=32:u.lanes=536870912,null}var Y=g.children;return g=g.fallback,b?(Cc(),b=u.mode,Y=vy({mode:"hidden",children:Y},b),g=Ku(g,b,f,null),Y.return=u,g.return=u,Y.sibling=g,u.child=Y,g=u.child,g.memoizedState=kw(f),g.childLanes=Cw(l,U,f),u.memoizedState=jw,pp(null,g)):(kc(u),Ow(u,Y))}var le=l.memoizedState;if(le!==null&&(Y=le.dehydrated,Y!==null)){if(S)u.flags&256?(kc(u),u.flags&=-257,u=Iw(l,u,f)):u.memoizedState!==null?(Cc(),u.child=l.child,u.flags|=128,u=null):(Cc(),Y=g.fallback,b=u.mode,g=vy({mode:"visible",children:g.children},b),Y=Ku(Y,b,f,null),Y.flags|=2,g.return=u,Y.return=u,g.sibling=Y,u.child=g,td(u,l.child,null,f),g=u.child,g.memoizedState=kw(f),g.childLanes=Cw(l,U,f),u.memoizedState=jw,u=pp(null,g));else if(kc(u),h5(Y)){if(U=Y.nextSibling&&Y.nextSibling.dataset,U)var je=U.dgst;U=je,g=Error(n(419)),g.stack="",g.digest=U,rp({value:g,source:null,stack:null}),u=Iw(l,u,f)}else if(wa||j0(l,u,f,!1),U=(f&l.childLanes)!==0,wa||U){if(U=_n,U!==null&&(g=En(U,f),g!==0&&g!==le.retryLane))throw le.retryLane=g,Wu(l,g),Gi(U,l,g),Nw;d5(Y)||Ey(),u=Iw(l,u,f)}else d5(Y)?(u.flags|=192,u.child=l.child,u=null):(l=le.treeContext,Dn=zs(Y.nextSibling),ni=u,Ir=!0,_c=null,$s=!1,l!==null&&Gj(u,l),u=Ow(u,g.children),u.flags|=4096);return u}return b?(Cc(),Y=g.fallback,b=u.mode,le=l.child,je=le.sibling,g=dl(le,{mode:"hidden",children:g.children}),g.subtreeFlags=le.subtreeFlags&65011712,je!==null?Y=dl(je,Y):(Y=Ku(Y,b,f,null),Y.flags|=2),Y.return=u,g.return=u,g.sibling=Y,u.child=g,pp(null,g),g=u.child,Y=l.child.memoizedState,Y===null?Y=kw(f):(b=Y.cachePool,b!==null?(le=xa._currentValue,b=b.parent!==le?{parent:le,pool:le}:b):b=Zj(),Y={baseLanes:Y.baseLanes|f,cachePool:b}),g.memoizedState=Y,g.childLanes=Cw(l,U,f),u.memoizedState=jw,pp(l.child,g)):(kc(u),f=l.child,l=f.sibling,f=dl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(U=u.deletions,U===null?(u.deletions=[l],u.flags|=16):U.push(l)),u.child=f,u.memoizedState=null,f)}function Ow(l,u){return u=vy({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function vy(l,u){return l=us(22,l,null,u),l.lanes=0,l}function Iw(l,u,f){return td(u,l.child,null,f),l=Ow(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function d9(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),W4(l.return,u,f)}function Rw(l,u,f,g,b,S){var U=l.memoizedState;U===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:S}:(U.isBackwards=u,U.rendering=null,U.renderingStartTime=0,U.last=g,U.tail=f,U.tailMode=b,U.treeForkCount=S)}function h9(l,u,f){var g=u.pendingProps,b=g.revealOrder,S=g.tail;g=g.children;var U=ia.current,Y=(U&2)!==0;if(Y?(U=U&1|2,u.flags|=128):U&=1,te(ia,U),ii(l,u,g,f),g=Ir?tp:0,!Y&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&d9(l,f,u);else if(l.tag===19)d9(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&sy(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),Rw(u,!1,b,f,S,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&sy(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}Rw(u,!0,f,null,S,g);break;case"together":Rw(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function yl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Rc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(j0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=dl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=dl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function Mw(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Z1(l)))}function eY(l,u,f){switch(u.tag){case 3:Ie(u,u.stateNode.containerInfo),Ac(u,xa,l.memoizedState.cache),Qu();break;case 27:case 5:We(u);break;case 4:Ie(u,u.stateNode.containerInfo);break;case 10:Ac(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,iw(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(kc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?u9(l,u,f):(kc(u),l=yl(l,u,f),l!==null?l.sibling:null);kc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(j0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return h9(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),te(ia,ia.current),g)break;return null;case 22:return u.lanes=0,a9(l,u,f,u.pendingProps);case 24:Ac(u,xa,l.memoizedState.cache)}return yl(l,u,f)}function f9(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)wa=!0;else{if(!Mw(l,f)&&(u.flags&128)===0)return wa=!1,eY(l,u,f);wa=(l.flags&131072)!==0}else wa=!1,Ir&&(u.flags&1048576)!==0&&Hj(u,tp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=Ju(u.elementType),u.type=l,typeof l=="function")$4(l)?(g=nd(l,g),u.tag=1,u=l9(null,u,l,g,f)):(u.tag=0,u=Ew(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=t9(null,u,l,g,f);break e}else if(b===N){u.tag=14,u=r9(null,u,l,g,f);break e}}throw u=K(l)||l,Error(n(306,u,""))}}return u;case 0:return Ew(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=nd(g,u.pendingProps),l9(l,u,g,b,f);case 3:e:{if(Ie(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var S=u.memoizedState;b=S.element,ew(l,u),cp(u,g,null,f);var U=u.memoizedState;if(g=U.cache,Ac(u,xa,g),g!==S.cache&&K4(u,[xa],f,!0),lp(),g=U.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:U.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=c9(l,u,g,f);break e}else if(g!==b){b=Ds(Error(n(424)),u),rp(b),u=c9(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Dn=zs(l.firstChild),ni=u,Ir=!0,_c=null,$s=!0,f=ak(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Qu(),g===b){u=yl(l,u,f);break e}ii(l,u,g,f)}u=u.child}return u;case 26:return yy(l,u),l===null?(f=TC(u.type,null,u.pendingProps,null))?u.memoizedState=f:Ir||(f=u.type,l=u.pendingProps,g=My(ce.current).createElement(f),g[Fr]=u,g[Sn]=l,si(g,f,l),hr(g),u.stateNode=g):u.memoizedState=TC(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return We(u),l===null&&Ir&&(g=u.stateNode=wC(u.type,u.pendingProps,ce.current),ni=u,$s=!0,b=Dn,Bc(u.type)?(f5=b,Dn=zs(g.firstChild)):Dn=b),ii(l,u,u.pendingProps.children,f),yy(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Ir&&((b=g=Dn)&&(g=CY(g,u.type,u.pendingProps,$s),g!==null?(u.stateNode=g,ni=u,Dn=zs(g.firstChild),$s=!1,b=!0):b=!1),b||Tc(u)),We(u),b=u.type,S=u.pendingProps,U=l!==null?l.memoizedProps:null,g=S.children,l5(b,S)?g=null:U!==null&&l5(b,U)&&(u.flags|=32),u.memoizedState!==null&&(b=ow(l,u,HX,null,null,f),kp._currentValue=b),yy(l,u),ii(l,u,g,f),u.child;case 6:return l===null&&Ir&&((l=f=Dn)&&(f=OY(f,u.pendingProps,$s),f!==null?(u.stateNode=f,ni=u,Dn=null,l=!0):l=!1),l||Tc(u)),null;case 13:return u9(l,u,f);case 4:return Ie(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=td(u,null,g,f):ii(l,u,g,f),u.child;case 11:return t9(l,u,u.type,u.pendingProps,f);case 7:return ii(l,u,u.pendingProps,f),u.child;case 8:return ii(l,u,u.pendingProps.children,f),u.child;case 12:return ii(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Ac(u,u.type,g.value),ii(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,Yu(u),b=ai(b),g=g(b),u.flags|=1,ii(l,u,g,f),u.child;case 14:return r9(l,u,u.type,u.pendingProps,f);case 15:return n9(l,u,u.type,u.pendingProps,f);case 19:return h9(l,u,f);case 31:return JX(l,u,f);case 22:return a9(l,u,f,u.pendingProps);case 24:return Yu(u),g=ai(xa),l===null?(b=Y4(),b===null&&(b=_n,S=Q4(),b.pooledCache=S,S.refCount++,S!==null&&(b.pooledCacheLanes|=f),b=S),u.memoizedState={parent:g,cache:b},J4(u),Ac(u,xa,b)):((l.lanes&f)!==0&&(ew(l,u),cp(u,null,null,f),lp()),b=l.memoizedState,S=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Ac(u,xa,g)):(g=S.cache,Ac(u,xa,g),g!==b.cache&&K4(u,[xa],f,!0))),ii(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function vl(l){l.flags|=4}function Pw(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(U9())l.flags|=8192;else throw ed=ry,Z4}else l.flags&=-16777217}function p9(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!kC(u))if(U9())l.flags|=8192;else throw ed=ry,Z4}function xy(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Mr():536870912,l.lanes|=u,U0|=u)}function mp(l,u){if(!Ir)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Ln(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function tY(l,u,f){var g=u.pendingProps;switch(F4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(u),null;case 1:return Ln(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),pl(xa),Se(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(E0(u)?vl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,H4())),Ln(u),null;case 26:var b=u.type,S=u.memoizedState;return l===null?(vl(u),S!==null?(Ln(u),p9(u,S)):(Ln(u),Pw(u,b,null,g,f))):S?S!==l.memoizedState?(vl(u),Ln(u),p9(u,S)):(Ln(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&vl(u),Ln(u),Pw(u,b,l,g,f)),null;case 27:if(Me(u),f=ce.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&vl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Ln(u),null}l=Oe.current,E0(u)?Wj(u):(l=wC(b,g,f),u.stateNode=l,vl(u))}return Ln(u),null;case 5:if(Me(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&vl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return Ln(u),null}if(S=Oe.current,E0(u))Wj(u);else{var U=My(ce.current);switch(S){case 1:S=U.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:S=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":S=U.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":S=U.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":S=U.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof g.is=="string"?U.createElement("select",{is:g.is}):U.createElement("select"),g.multiple?S.multiple=!0:g.size&&(S.size=g.size);break;default:S=typeof g.is=="string"?U.createElement(b,{is:g.is}):U.createElement(b)}}S[Fr]=u,S[Sn]=g;e:for(U=u.child;U!==null;){if(U.tag===5||U.tag===6)S.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===u)break e;for(;U.sibling===null;){if(U.return===null||U.return===u)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}u.stateNode=S;e:switch(si(S,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&vl(u)}}return Ln(u),Pw(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&vl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=ce.current,E0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=ni,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Fr]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||uC(l.nodeValue,f)),l||Tc(u,!0)}else l=My(l).createTextNode(g),l[Fr]=u,u.stateNode=l}return Ln(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=E0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Fr]=u}else Qu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ln(u),l=!1}else f=H4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(hs(u),u):(hs(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Ln(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=E0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Fr]=u}else Qu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ln(u),b=!1}else b=H4(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(hs(u),u):(hs(u),null)}return hs(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),xy(u,u.updateQueue),Ln(u),null);case 4:return Se(),l===null&&n5(u.stateNode.containerInfo),Ln(u),null;case 10:return pl(u.type),Ln(u),null;case 19:if(ee(ia),g=u.memoizedState,g===null)return Ln(u),null;if(b=(u.flags&128)!==0,S=g.rendering,S===null)if(b)mp(g,!1);else{if(Zn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=sy(l),S!==null){for(u.flags|=128,mp(g,!1),l=S.updateQueue,u.updateQueue=l,xy(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)Vj(f,l),f=f.sibling;return te(ia,ia.current&1|2),Ir&&hl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Rt()>Ty&&(u.flags|=128,b=!0,mp(g,!1),u.lanes=4194304)}else{if(!b)if(l=sy(S),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,xy(u,l),mp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!Ir)return Ln(u),null}else 2*Rt()-g.renderingStartTime>Ty&&f!==536870912&&(u.flags|=128,b=!0,mp(g,!1),u.lanes=4194304);g.isBackwards?(S.sibling=u.child,u.child=S):(l=g.last,l!==null?l.sibling=S:u.child=S,g.last=S)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Rt(),l.sibling=null,f=ia.current,te(ia,b?f&1|2:f&1),Ir&&hl(u,g.treeForkCount),l):(Ln(u),null);case 22:case 23:return hs(u),aw(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Ln(u),u.subtreeFlags&6&&(u.flags|=8192)):Ln(u),f=u.updateQueue,f!==null&&xy(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ee(Zu),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),pl(xa),Ln(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function rY(l,u){switch(F4(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return pl(xa),Se(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Me(u),null;case 31:if(u.memoizedState!==null){if(hs(u),u.alternate===null)throw Error(n(340));Qu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(hs(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Qu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ee(ia),null;case 4:return Se(),null;case 10:return pl(u.type),null;case 22:case 23:return hs(u),aw(),l!==null&&ee(Zu),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return pl(xa),null;case 25:return null;default:return null}}function m9(l,u){switch(F4(u),u.tag){case 3:pl(xa),Se();break;case 26:case 27:case 5:Me(u);break;case 4:Se();break;case 31:u.memoizedState!==null&&hs(u);break;case 13:hs(u);break;case 19:ee(ia);break;case 10:pl(u.type);break;case 22:case 23:hs(u),aw(),l!==null&&ee(Zu);break;case 24:pl(xa)}}function gp(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var S=f.create,U=f.inst;g=S(),U.destroy=g}f=f.next}while(f!==b)}}catch(Y){an(u,u.return,Y)}}function Oc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var S=b.next;g=S;do{if((g.tag&l)===l){var U=g.inst,Y=U.destroy;if(Y!==void 0){U.destroy=void 0,b=u;var le=f,je=Y;try{je()}catch(ze){an(b,le,ze)}}}g=g.next}while(g!==S)}}catch(ze){an(u,u.return,ze)}}function g9(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{sk(u,f)}catch(g){an(l,l.return,g)}}}function y9(l,u,f){f.props=nd(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){an(l,u,g)}}function yp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){an(l,u,b)}}function Po(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){an(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){an(l,u,b)}else f.current=null}function v9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){an(l,l.return,b)}}function Dw(l,u,f){try{var g=l.stateNode;TY(g,l.type,f,u),g[Sn]=u}catch(b){an(l,l.return,b)}}function x9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Bc(l.type)||l.tag===4}function Lw(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||x9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Bc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Bw(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Xn));else if(g!==4&&(g===27&&Bc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(Bw(l,u,f),l=l.sibling;l!==null;)Bw(l,u,f),l=l.sibling}function by(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Bc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(by(l,u,f),l=l.sibling;l!==null;)by(l,u,f),l=l.sibling}function b9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);si(u,g,f),u[Fr]=l,u[Sn]=f}catch(S){an(l,l.return,S)}}var xl=!1,Sa=!1,$w=!1,w9=typeof WeakSet=="function"?WeakSet:Set,Wa=null;function nY(l,u){if(l=l.containerInfo,s5=zy,l=Rj(l),I4(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var U=0,Y=-1,le=-1,je=0,ze=0,Ge=l,Re=null;t:for(;;){for(var Le;Ge!==f||b!==0&&Ge.nodeType!==3||(Y=U+b),Ge!==S||g!==0&&Ge.nodeType!==3||(le=U+g),Ge.nodeType===3&&(U+=Ge.nodeValue.length),(Le=Ge.firstChild)!==null;)Re=Ge,Ge=Le;for(;;){if(Ge===l)break t;if(Re===f&&++je===b&&(Y=U),Re===S&&++ze===g&&(le=U),(Le=Ge.nextSibling)!==null)break;Ge=Re,Re=Ge.parentNode}Ge=Le}f=Y===-1||le===-1?null:{start:Y,end:le}}else f=null}f=f||{start:0,end:0}}else f=null;for(o5={focusedElem:l,selectionRange:f},zy=!1,Wa=u;Wa!==null;)if(u=Wa,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Wa=l;else for(;Wa!==null;){switch(u=Wa,S=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,f=u,b=S.memoizedProps,S=S.memoizedState,g=f.stateNode;try{var Ct=nd(f.type,b);l=g.getSnapshotBeforeUpdate(Ct,S),g.__reactInternalSnapshotBeforeUpdate=l}catch(Ht){an(f,f.return,Ht)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)u5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":u5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Wa=l;break}Wa=u.return}}function S9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:wl(l,f),g&4&&gp(5,f);break;case 1:if(wl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(U){an(f,f.return,U)}else{var b=nd(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(U){an(f,f.return,U)}}g&64&&g9(f),g&512&&yp(f,f.return);break;case 3:if(wl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{sk(l,u)}catch(U){an(f,f.return,U)}}break;case 27:u===null&&g&4&&b9(f);case 26:case 5:wl(l,f),u===null&&g&4&&v9(f),g&512&&yp(f,f.return);break;case 12:wl(l,f);break;case 31:wl(l,f),g&4&&A9(l,f);break;case 13:wl(l,f),g&4&&N9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=hY.bind(null,f),IY(l,f))));break;case 22:if(g=f.memoizedState!==null||xl,!g){u=u!==null&&u.memoizedState!==null||Sa,b=xl;var S=Sa;xl=g,(Sa=u)&&!S?Sl(l,f,(f.subtreeFlags&8772)!==0):wl(l,f),xl=b,Sa=S}break;case 30:break;default:wl(l,f)}}function _9(l){var u=l.alternate;u!==null&&(l.alternate=null,_9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&St(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Un=null,Vi=!1;function bl(l,u,f){for(f=f.child;f!==null;)T9(l,u,f),f=f.sibling}function T9(l,u,f){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(it,f)}catch{}switch(f.tag){case 26:Sa||Po(f,u),bl(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Sa||Po(f,u);var g=Un,b=Vi;Bc(f.type)&&(Un=f.stateNode,Vi=!1),bl(l,u,f),Np(f.stateNode),Un=g,Vi=b;break;case 5:Sa||Po(f,u);case 6:if(g=Un,b=Vi,Un=null,bl(l,u,f),Un=g,Vi=b,Un!==null)if(Vi)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(f.stateNode)}catch(S){an(f,u,S)}else try{Un.removeChild(f.stateNode)}catch(S){an(f,u,S)}break;case 18:Un!==null&&(Vi?(l=Un,gC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),K0(l)):gC(Un,f.stateNode));break;case 4:g=Un,b=Vi,Un=f.stateNode.containerInfo,Vi=!0,bl(l,u,f),Un=g,Vi=b;break;case 0:case 11:case 14:case 15:Oc(2,f,u),Sa||Oc(4,f,u),bl(l,u,f);break;case 1:Sa||(Po(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&y9(f,u,g)),bl(l,u,f);break;case 21:bl(l,u,f);break;case 22:Sa=(g=Sa)||f.memoizedState!==null,bl(l,u,f),Sa=g;break;default:bl(l,u,f)}}function A9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{K0(l)}catch(f){an(u,u.return,f)}}}function N9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{K0(l)}catch(f){an(u,u.return,f)}}function aY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new w9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new w9),u;default:throw Error(n(435,l.tag))}}function wy(l,u){var f=aY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=fY.bind(null,l,g);g.then(b,b)}})}function Fi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],S=l,U=u,Y=U;e:for(;Y!==null;){switch(Y.tag){case 27:if(Bc(Y.type)){Un=Y.stateNode,Vi=!1;break e}break;case 5:Un=Y.stateNode,Vi=!1;break e;case 3:case 4:Un=Y.stateNode.containerInfo,Vi=!0;break e}Y=Y.return}if(Un===null)throw Error(n(160));T9(S,U,b),Un=null,Vi=!1,S=b.alternate,S!==null&&(S.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)E9(u,l),u=u.sibling}var lo=null;function E9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Fi(u,l),qi(l),g&4&&(Oc(3,l,l.return),gp(3,l),Oc(5,l,l.return));break;case 1:Fi(u,l),qi(l),g&512&&(Sa||f===null||Po(f,f.return)),g&64&&xl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=lo;if(Fi(u,l),qi(l),g&512&&(Sa||f===null||Po(f,f.return)),g&4){var S=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":S=b.getElementsByTagName("title")[0],(!S||S[gi]||S[Fr]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=b.createElement(g),b.head.insertBefore(S,b.querySelector("head > title"))),si(S,g,f),S[Fr]=l,hr(S),g=S;break e;case"link":var U=EC("link","href",b).get(g+(f.href||""));if(U){for(var Y=0;Y<U.length;Y++)if(S=U[Y],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){U.splice(Y,1);break t}}S=b.createElement(g),si(S,g,f),b.head.appendChild(S);break;case"meta":if(U=EC("meta","content",b).get(g+(f.content||""))){for(Y=0;Y<U.length;Y++)if(S=U[Y],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){U.splice(Y,1);break t}}S=b.createElement(g),si(S,g,f),b.head.appendChild(S);break;default:throw Error(n(468,g))}S[Fr]=l,hr(S),g=S}l.stateNode=g}else jC(b,l.type,l.stateNode);else l.stateNode=NC(b,g,l.memoizedProps);else S!==g?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,g===null?jC(b,l.type,l.stateNode):NC(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&Dw(l,l.memoizedProps,f.memoizedProps)}break;case 27:Fi(u,l),qi(l),g&512&&(Sa||f===null||Po(f,f.return)),f!==null&&g&4&&Dw(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Fi(u,l),qi(l),g&512&&(Sa||f===null||Po(f,f.return)),l.flags&32){b=l.stateNode;try{nt(b,"")}catch(Ct){an(l,l.return,Ct)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,Dw(l,b,f!==null?f.memoizedProps:b)),g&1024&&($w=!0);break;case 6:if(Fi(u,l),qi(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ct){an(l,l.return,Ct)}}break;case 3:if(Ly=null,b=lo,lo=Py(u.containerInfo),Fi(u,l),lo=b,qi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{K0(u.containerInfo)}catch(Ct){an(l,l.return,Ct)}$w&&($w=!1,j9(l));break;case 4:g=lo,lo=Py(l.stateNode.containerInfo),Fi(u,l),qi(l),lo=g;break;case 12:Fi(u,l),qi(l);break;case 31:Fi(u,l),qi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,wy(l,g)));break;case 13:Fi(u,l),qi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(_y=Rt()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,wy(l,g)));break;case 22:b=l.memoizedState!==null;var le=f!==null&&f.memoizedState!==null,je=xl,ze=Sa;if(xl=je||b,Sa=ze||le,Fi(u,l),Sa=ze,xl=je,qi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||le||xl||Sa||ad(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){le=f=u;try{if(S=le.stateNode,b)U=S.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{Y=le.stateNode;var Ge=le.memoizedProps.style,Re=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null;Y.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(Ct){an(le,le.return,Ct)}}}else if(u.tag===6){if(f===null){le=u;try{le.stateNode.nodeValue=b?"":le.memoizedProps}catch(Ct){an(le,le.return,Ct)}}}else if(u.tag===18){if(f===null){le=u;try{var Le=le.stateNode;b?yC(Le,!0):yC(le.stateNode,!1)}catch(Ct){an(le,le.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,wy(l,f))));break;case 19:Fi(u,l),qi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,wy(l,g)));break;case 30:break;case 21:break;default:Fi(u,l),qi(l)}}function qi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(x9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,S=Lw(l);by(l,S,b);break;case 5:var U=f.stateNode;f.flags&32&&(nt(U,""),f.flags&=-33);var Y=Lw(l);by(l,Y,U);break;case 3:case 4:var le=f.stateNode.containerInfo,je=Lw(l);Bw(l,je,le);break;default:throw Error(n(161))}}catch(ze){an(l,l.return,ze)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function j9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;j9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function wl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)S9(l,u.alternate,u),u=u.sibling}function ad(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Oc(4,u,u.return),ad(u);break;case 1:Po(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&y9(u,u.return,f),ad(u);break;case 27:Np(u.stateNode);case 26:case 5:Po(u,u.return),ad(u);break;case 22:u.memoizedState===null&&ad(u);break;case 30:ad(u);break;default:ad(u)}l=l.sibling}}function Sl(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,S=u,U=S.flags;switch(S.tag){case 0:case 11:case 15:Sl(b,S,f),gp(4,S);break;case 1:if(Sl(b,S,f),g=S,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(je){an(g,g.return,je)}if(g=S,b=g.updateQueue,b!==null){var Y=g.stateNode;try{var le=b.shared.hiddenCallbacks;if(le!==null)for(b.shared.hiddenCallbacks=null,b=0;b<le.length;b++)ik(le[b],Y)}catch(je){an(g,g.return,je)}}f&&U&64&&g9(S),yp(S,S.return);break;case 27:b9(S);case 26:case 5:Sl(b,S,f),f&&g===null&&U&4&&v9(S),yp(S,S.return);break;case 12:Sl(b,S,f);break;case 31:Sl(b,S,f),f&&U&4&&A9(b,S);break;case 13:Sl(b,S,f),f&&U&4&&N9(b,S);break;case 22:S.memoizedState===null&&Sl(b,S,f),yp(S,S.return);break;case 30:break;default:Sl(b,S,f)}u=u.sibling}}function Uw(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&np(f))}function zw(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&np(l))}function co(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)k9(l,u,f,g),u=u.sibling}function k9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:co(l,u,f,g),b&2048&&gp(9,u);break;case 1:co(l,u,f,g);break;case 3:co(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&np(l)));break;case 12:if(b&2048){co(l,u,f,g),l=u.stateNode;try{var S=u.memoizedProps,U=S.id,Y=S.onPostCommit;typeof Y=="function"&&Y(U,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(le){an(u,u.return,le)}}else co(l,u,f,g);break;case 31:co(l,u,f,g);break;case 13:co(l,u,f,g);break;case 23:break;case 22:S=u.stateNode,U=u.alternate,u.memoizedState!==null?S._visibility&2?co(l,u,f,g):vp(l,u):S._visibility&2?co(l,u,f,g):(S._visibility|=2,L0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&Uw(U,u);break;case 24:co(l,u,f,g),b&2048&&zw(u.alternate,u);break;default:co(l,u,f,g)}}function L0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var S=l,U=u,Y=f,le=g,je=U.flags;switch(U.tag){case 0:case 11:case 15:L0(S,U,Y,le,b),gp(8,U);break;case 23:break;case 22:var ze=U.stateNode;U.memoizedState!==null?ze._visibility&2?L0(S,U,Y,le,b):vp(S,U):(ze._visibility|=2,L0(S,U,Y,le,b)),b&&je&2048&&Uw(U.alternate,U);break;case 24:L0(S,U,Y,le,b),b&&je&2048&&zw(U.alternate,U);break;default:L0(S,U,Y,le,b)}u=u.sibling}}function vp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:vp(f,g),b&2048&&Uw(g.alternate,g);break;case 24:vp(f,g),b&2048&&zw(g.alternate,g);break;default:vp(f,g)}u=u.sibling}}var xp=8192;function B0(l,u,f){if(l.subtreeFlags&xp)for(l=l.child;l!==null;)C9(l,u,f),l=l.sibling}function C9(l,u,f){switch(l.tag){case 26:B0(l,u,f),l.flags&xp&&l.memoizedState!==null&&qY(f,lo,l.memoizedState,l.memoizedProps);break;case 5:B0(l,u,f);break;case 3:case 4:var g=lo;lo=Py(l.stateNode.containerInfo),B0(l,u,f),lo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=xp,xp=16777216,B0(l,u,f),xp=g):B0(l,u,f));break;default:B0(l,u,f)}}function O9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function bp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Wa=g,R9(g,l)}O9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)I9(l),l=l.sibling}function I9(l){switch(l.tag){case 0:case 11:case 15:bp(l),l.flags&2048&&Oc(9,l,l.return);break;case 3:bp(l);break;case 12:bp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Sy(l)):bp(l);break;default:bp(l)}}function Sy(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Wa=g,R9(g,l)}O9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Oc(8,u,u.return),Sy(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,Sy(u));break;default:Sy(u)}l=l.sibling}}function R9(l,u){for(;Wa!==null;){var f=Wa;switch(f.tag){case 0:case 11:case 15:Oc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:np(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Wa=g;else e:for(f=l;Wa!==null;){g=Wa;var b=g.sibling,S=g.return;if(_9(g),g===f){Wa=null;break e}if(b!==null){b.return=S,Wa=b;break e}Wa=S}}}var iY={getCacheForType:function(l){var u=ai(xa),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return ai(xa).controller.signal}},sY=typeof WeakMap=="function"?WeakMap:Map,Hr=0,_n=null,Sr=null,Ar=0,nn=0,fs=null,Ic=!1,$0=!1,Vw=!1,_l=0,Zn=0,Rc=0,id=0,Fw=0,ps=0,U0=0,wp=null,Hi=null,qw=!1,_y=0,M9=0,Ty=1/0,Ay=null,Mc=null,Ca=0,Pc=null,z0=null,Tl=0,Hw=0,Gw=null,P9=null,Sp=0,Ww=null;function ms(){return(Hr&2)!==0&&Ar!==0?Ar&-Ar:G.T!==null?Jw():un()}function D9(){if(ps===0)if((Ar&536870912)===0||Ir){var l=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),ps=l}else ps=536870912;return l=ds.current,l!==null&&(l.flags|=32),ps}function Gi(l,u,f){(l===_n&&(nn===2||nn===9)||l.cancelPendingCommit!==null)&&(V0(l,0),Dc(l,Ar,ps,!1)),Mn(l,f),((Hr&2)===0||l!==_n)&&(l===_n&&((Hr&2)===0&&(id|=f),Zn===4&&Dc(l,Ar,ps,!1)),Do(l))}function L9(l,u,f){if((Hr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||sr(l,u),b=g?cY(l,u):Qw(l,u,!0),S=g;do{if(b===0){$0&&!g&&Dc(l,u,0,!1);break}else{if(f=l.current.alternate,S&&!oY(f)){b=Qw(l,u,!1),S=!1;continue}if(b===2){if(S=u,l.errorRecoveryDisabledLanes&S)var U=0;else U=l.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){u=U;e:{var Y=l;b=wp;var le=Y.current.memoizedState.isDehydrated;if(le&&(V0(Y,U).flags|=256),U=Qw(Y,U,!1),U!==2){if(Vw&&!le){Y.errorRecoveryDisabledLanes|=S,id|=S,b=4;break e}S=Hi,Hi=b,S!==null&&(Hi===null?Hi=S:Hi.push.apply(Hi,S))}b=U}if(S=!1,b!==2)continue}}if(b===1){V0(l,0),Dc(l,u,0,!0);break}e:{switch(g=l,S=b,S){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Dc(g,u,ps,!Ic);break e;case 2:Hi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=_y+300-Rt(),10<b)){if(Dc(g,u,ps,!Ic),wt(g,0,!0)!==0)break e;Tl=u,g.timeoutHandle=pC(B9.bind(null,g,f,Hi,Ay,qw,u,ps,id,U0,Ic,S,"Throttled",-0,0),b);break e}B9(g,f,Hi,Ay,qw,u,ps,id,U0,Ic,S,null,-0,0)}}break}while(!0);Do(l)}function B9(l,u,f,g,b,S,U,Y,le,je,ze,Ge,Re,Le){if(l.timeoutHandle=-1,Ge=u.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},C9(u,S,Ge);var Ct=(S&62914560)===S?_y-Rt():(S&4194048)===S?M9-Rt():0;if(Ct=HY(Ge,Ct),Ct!==null){Tl=S,l.cancelPendingCommit=Ct(G9.bind(null,l,u,S,f,g,b,U,Y,le,ze,Ge,null,Re,Le)),Dc(l,S,U,!je);return}}G9(l,u,S,f,g,b,U,Y,le)}function oY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],S=b.getSnapshot;b=b.value;try{if(!cs(S(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Dc(l,u,f,g){u&=~Fw,u&=~id,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var S=31-Pt(b),U=1<<S;g[S]=-1,b&=~U}f!==0&&pa(l,f,u)}function Ny(){return(Hr&6)===0?(_p(0),!1):!0}function Kw(){if(Sr!==null){if(nn===0)var l=Sr.return;else l=Sr,fl=Xu=null,uw(l),I0=null,ip=0,l=Sr;for(;l!==null;)m9(l.alternate,l),l=l.return;Sr=null}}function V0(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,EY(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Tl=0,Kw(),_n=l,Sr=f=dl(l.current,null),Ar=u,nn=0,fs=null,Ic=!1,$0=sr(l,u),Vw=!1,U0=ps=Fw=id=Rc=Zn=0,Hi=wp=null,qw=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-Pt(g),S=1<<b;u|=l[b],g&=~S}return _l=u,W1(),f}function $9(l,u){ur=null,G.H=fp,u===O0||u===ty?(u=tk(),nn=3):u===Z4?(u=tk(),nn=4):nn=u===Nw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,fs=u,Sr===null&&(Zn=1,my(l,Ds(u,l.current)))}function U9(){var l=ds.current;return l===null?!0:(Ar&4194048)===Ar?Us===null:(Ar&62914560)===Ar||(Ar&536870912)!==0?l===Us:!1}function z9(){var l=G.H;return G.H=fp,l===null?fp:l}function V9(){var l=G.A;return G.A=iY,l}function Ey(){Zn=4,Ic||(Ar&4194048)!==Ar&&ds.current!==null||($0=!0),(Rc&134217727)===0&&(id&134217727)===0||_n===null||Dc(_n,Ar,ps,!1)}function Qw(l,u,f){var g=Hr;Hr|=2;var b=z9(),S=V9();(_n!==l||Ar!==u)&&(Ay=null,V0(l,u)),u=!1;var U=Zn;e:do try{if(nn!==0&&Sr!==null){var Y=Sr,le=fs;switch(nn){case 8:Kw(),U=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(u=!0);var je=nn;if(nn=0,fs=null,F0(l,Y,le,je),f&&$0){U=0;break e}break;default:je=nn,nn=0,fs=null,F0(l,Y,le,je)}}lY(),U=Zn;break}catch(ze){$9(l,ze)}while(!0);return u&&l.shellSuspendCounter++,fl=Xu=null,Hr=g,G.H=b,G.A=S,Sr===null&&(_n=null,Ar=0,W1()),U}function lY(){for(;Sr!==null;)F9(Sr)}function cY(l,u){var f=Hr;Hr|=2;var g=z9(),b=V9();_n!==l||Ar!==u?(Ay=null,Ty=Rt()+500,V0(l,u)):$0=sr(l,u);e:do try{if(nn!==0&&Sr!==null){u=Sr;var S=fs;t:switch(nn){case 1:nn=0,fs=null,F0(l,u,S,1);break;case 2:case 9:if(Jj(S)){nn=0,fs=null,q9(u);break}u=function(){nn!==2&&nn!==9||_n!==l||(nn=7),Do(l)},S.then(u,u);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:Jj(S)?(nn=0,fs=null,q9(u)):(nn=0,fs=null,F0(l,u,S,7));break;case 5:var U=null;switch(Sr.tag){case 26:U=Sr.memoizedState;case 5:case 27:var Y=Sr;if(U?kC(U):Y.stateNode.complete){nn=0,fs=null;var le=Y.sibling;if(le!==null)Sr=le;else{var je=Y.return;je!==null?(Sr=je,jy(je)):Sr=null}break t}}nn=0,fs=null,F0(l,u,S,5);break;case 6:nn=0,fs=null,F0(l,u,S,6);break;case 8:Kw(),Zn=6;break e;default:throw Error(n(462))}}uY();break}catch(ze){$9(l,ze)}while(!0);return fl=Xu=null,G.H=g,G.A=b,Hr=f,Sr!==null?0:(_n=null,Ar=0,W1(),Zn)}function uY(){for(;Sr!==null&&!Ze();)F9(Sr)}function F9(l){var u=f9(l.alternate,l,_l);l.memoizedProps=l.pendingProps,u===null?jy(l):Sr=u}function q9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=o9(f,u,u.pendingProps,u.type,void 0,Ar);break;case 11:u=o9(f,u,u.pendingProps,u.type.render,u.ref,Ar);break;case 5:uw(u);default:m9(f,u),u=Sr=Vj(u,_l),u=f9(f,u,_l)}l.memoizedProps=l.pendingProps,u===null?jy(l):Sr=u}function F0(l,u,f,g){fl=Xu=null,uw(u),I0=null,ip=0;var b=u.return;try{if(ZX(l,b,u,f,Ar)){Zn=1,my(l,Ds(f,l.current)),Sr=null;return}}catch(S){if(b!==null)throw Sr=b,S;Zn=1,my(l,Ds(f,l.current)),Sr=null;return}u.flags&32768?(Ir||g===1?l=!0:$0||(Ar&536870912)!==0?l=!1:(Ic=l=!0,(g===2||g===9||g===3||g===6)&&(g=ds.current,g!==null&&g.tag===13&&(g.flags|=16384))),H9(u,l)):jy(u)}function jy(l){var u=l;do{if((u.flags&32768)!==0){H9(u,Ic);return}l=u.return;var f=tY(u.alternate,u,_l);if(f!==null){Sr=f;return}if(u=u.sibling,u!==null){Sr=u;return}Sr=u=l}while(u!==null);Zn===0&&(Zn=5)}function H9(l,u){do{var f=rY(l.alternate,l);if(f!==null){f.flags&=32767,Sr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Sr=l;return}Sr=l=f}while(l!==null);Zn=6,Sr=null}function G9(l,u,f,g,b,S,U,Y,le){l.cancelPendingCommit=null;do ky();while(Ca!==0);if((Hr&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(S=u.lanes|u.childLanes,S|=L4,Jt(l,f,S,U,Y,le),l===_n&&(Sr=_n=null,Ar=0),z0=u,Pc=l,Tl=f,Hw=S,Gw=b,P9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,pY(Zt,function(){return Y9(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=G.T,G.T=null,b=X.p,X.p=2,U=Hr,Hr|=4;try{nY(l,u,f)}finally{Hr=U,X.p=b,G.T=g}}Ca=1,W9(),K9(),Q9()}}function W9(){if(Ca===1){Ca=0;var l=Pc,u=z0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=G.T,G.T=null;var g=X.p;X.p=2;var b=Hr;Hr|=4;try{E9(u,l);var S=o5,U=Rj(l.containerInfo),Y=S.focusedElem,le=S.selectionRange;if(U!==Y&&Y&&Y.ownerDocument&&Ij(Y.ownerDocument.documentElement,Y)){if(le!==null&&I4(Y)){var je=le.start,ze=le.end;if(ze===void 0&&(ze=je),"selectionStart"in Y)Y.selectionStart=je,Y.selectionEnd=Math.min(ze,Y.value.length);else{var Ge=Y.ownerDocument||document,Re=Ge&&Ge.defaultView||window;if(Re.getSelection){var Le=Re.getSelection(),Ct=Y.textContent.length,Ht=Math.min(le.start,Ct),mn=le.end===void 0?Ht:Math.min(le.end,Ct);!Le.extend&&Ht>mn&&(U=mn,mn=Ht,Ht=U);var we=Oj(Y,Ht),fe=Oj(Y,mn);if(we&&fe&&(Le.rangeCount!==1||Le.anchorNode!==we.node||Le.anchorOffset!==we.offset||Le.focusNode!==fe.node||Le.focusOffset!==fe.offset)){var Ne=Ge.createRange();Ne.setStart(we.node,we.offset),Le.removeAllRanges(),Ht>mn?(Le.addRange(Ne),Le.extend(fe.node,fe.offset)):(Ne.setEnd(fe.node,fe.offset),Le.addRange(Ne))}}}}for(Ge=[],Le=Y;Le=Le.parentNode;)Le.nodeType===1&&Ge.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ge.length;Y++){var qe=Ge[Y];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}zy=!!s5,o5=s5=null}finally{Hr=b,X.p=g,G.T=f}}l.current=u,Ca=2}}function K9(){if(Ca===2){Ca=0;var l=Pc,u=z0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=G.T,G.T=null;var g=X.p;X.p=2;var b=Hr;Hr|=4;try{S9(l,u.alternate,u)}finally{Hr=b,X.p=g,G.T=f}}Ca=3}}function Q9(){if(Ca===4||Ca===3){Ca=0,yt();var l=Pc,u=z0,f=Tl,g=P9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ca=5:(Ca=0,z0=Pc=null,X9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Mc=null),wr(f),u=u.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(it,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=G.T,b=X.p,X.p=2,G.T=null;try{for(var S=l.onRecoverableError,U=0;U<g.length;U++){var Y=g[U];S(Y.value,{componentStack:Y.stack})}}finally{G.T=u,X.p=b}}(Tl&3)!==0&&ky(),Do(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===Ww?Sp++:(Sp=0,Ww=l):Sp=0,_p(0)}}function X9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,np(u)))}function ky(){return W9(),K9(),Q9(),Y9()}function Y9(){if(Ca!==5)return!1;var l=Pc,u=Hw;Hw=0;var f=wr(Tl),g=G.T,b=X.p;try{X.p=32>f?32:f,G.T=null,f=Gw,Gw=null;var S=Pc,U=Tl;if(Ca=0,z0=Pc=null,Tl=0,(Hr&6)!==0)throw Error(n(331));var Y=Hr;if(Hr|=4,I9(S.current),k9(S,S.current,U,f),Hr=Y,_p(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(it,S)}catch{}return!0}finally{X.p=b,G.T=g,X9(l,u)}}function Z9(l,u,f){u=Ds(f,u),u=Aw(l.stateNode,u,2),l=jc(l,u,2),l!==null&&(Mn(l,2),Do(l))}function an(l,u,f){if(l.tag===3)Z9(l,l,f);else for(;u!==null;){if(u.tag===3){Z9(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Mc===null||!Mc.has(g))){l=Ds(f,l),f=Jk(2),g=jc(u,f,2),g!==null&&(e9(f,g,u,l),Mn(g,2),Do(g));break}}u=u.return}}function Xw(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new sY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(Vw=!0,b.add(f),l=dY.bind(null,l,u,f),u.then(l,l))}function dY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,_n===l&&(Ar&f)===f&&(Zn===4||Zn===3&&(Ar&62914560)===Ar&&300>Rt()-_y?(Hr&2)===0&&V0(l,0):Fw|=f,U0===Ar&&(U0=0)),Do(l)}function J9(l,u){u===0&&(u=Mr()),l=Wu(l,u),l!==null&&(Mn(l,u),Do(l))}function hY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),J9(l,f)}function fY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),J9(l,f)}function pY(l,u){return Ye(l,u)}var Cy=null,q0=null,Yw=!1,Oy=!1,Zw=!1,Lc=0;function Do(l){l!==q0&&l.next===null&&(q0===null?Cy=q0=l:q0=q0.next=l),Oy=!0,Yw||(Yw=!0,gY())}function _p(l,u){if(!Zw&&Oy){Zw=!0;do for(var f=!1,g=Cy;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var S=0;else{var U=g.suspendedLanes,Y=g.pingedLanes;S=(1<<31-Pt(42|l)+1)-1,S&=b&~(U&~Y),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,nC(g,S))}else S=Ar,S=wt(g,g===_n?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||sr(g,S)||(f=!0,nC(g,S));g=g.next}while(f);Zw=!1}}function mY(){eC()}function eC(){Oy=Yw=!1;var l=0;Lc!==0&&NY()&&(l=Lc);for(var u=Rt(),f=null,g=Cy;g!==null;){var b=g.next,S=tC(g,u);S===0?(g.next=null,f===null?Cy=b:f.next=b,b===null&&(q0=f)):(f=g,(l!==0||(S&3)!==0)&&(Oy=!0)),g=b}Ca!==0&&Ca!==5||_p(l),Lc!==0&&(Lc=0)}function tC(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var U=31-Pt(S),Y=1<<U,le=b[U];le===-1?((Y&f)===0||(Y&g)!==0)&&(b[U]=Qr(Y,u)):le<=u&&(l.expiredLanes|=Y),S&=~Y}if(u=_n,f=Ar,f=wt(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(nn===2||nn===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&ht(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||sr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&ht(g),wr(f)){case 2:case 8:f=bt;break;case 32:f=Zt;break;case 268435456:f=rn;break;default:f=Zt}return g=rC.bind(null,l),f=Ye(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&ht(g),l.callbackPriority=2,l.callbackNode=null,2}function rC(l,u){if(Ca!==0&&Ca!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(ky()&&l.callbackNode!==f)return null;var g=Ar;return g=wt(l,l===_n?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(L9(l,g,u),tC(l,Rt()),l.callbackNode!=null&&l.callbackNode===f?rC.bind(null,l):null)}function nC(l,u){if(ky())return null;L9(l,u,!0)}function gY(){jY(function(){(Hr&6)!==0?Ye(Tt,mY):eC()})}function Jw(){if(Lc===0){var l=k0;l===0&&(l=Rn,Rn<<=1,(Rn&261888)===0&&(Rn=256)),Lc=l}return Lc}function aC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ya(""+l)}function iC(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function yY(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var S=aC((b[Sn]||null).action),U=g.submitter;U&&(u=(u=U[Sn]||null)?aC(u.formAction):U.getAttribute("formAction"),u!==null&&(S=u,U=null));var Y=new Uu("action","action",null,g,b);l.push({event:Y,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Lc!==0){var le=U?iC(b,U):new FormData(b);xw(f,{pending:!0,data:le,method:b.method,action:S},null,le)}}else typeof S=="function"&&(Y.preventDefault(),le=U?iC(b,U):new FormData(b),xw(f,{pending:!0,data:le,method:b.method,action:S},S,le))},currentTarget:b}]})}}for(var e5=0;e5<D4.length;e5++){var t5=D4[e5],vY=t5.toLowerCase(),xY=t5[0].toUpperCase()+t5.slice(1);oo(vY,"on"+xY)}oo(Dj,"onAnimationEnd"),oo(Lj,"onAnimationIteration"),oo(Bj,"onAnimationStart"),oo("dblclick","onDoubleClick"),oo("focusin","onFocus"),oo("focusout","onBlur"),oo(PX,"onTransitionRun"),oo(DX,"onTransitionStart"),oo(LX,"onTransitionCancel"),oo($j,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tp));function sC(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var S=void 0;if(u)for(var U=g.length-1;0<=U;U--){var Y=g[U],le=Y.instance,je=Y.currentTarget;if(Y=Y.listener,le!==S&&b.isPropagationStopped())break e;S=Y,b.currentTarget=je;try{S(b)}catch(ze){G1(ze)}b.currentTarget=null,S=le}else for(U=0;U<g.length;U++){if(Y=g[U],le=Y.instance,je=Y.currentTarget,Y=Y.listener,le!==S&&b.isPropagationStopped())break e;S=Y,b.currentTarget=je;try{S(b)}catch(ze){G1(ze)}b.currentTarget=null,S=le}}}}function _r(l,u){var f=u[mi];f===void 0&&(f=u[mi]=new Set);var g=l+"__bubble";f.has(g)||(oC(u,l,2,!1),f.add(g))}function r5(l,u,f){var g=0;u&&(g|=4),oC(f,l,g,u)}var Iy="_reactListening"+Math.random().toString(36).slice(2);function n5(l){if(!l[Iy]){l[Iy]=!0,dn.forEach(function(f){f!=="selectionchange"&&(bY.has(f)||r5(f,!1,l),r5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Iy]||(u[Iy]=!0,r5("selectionchange",!1,u))}}function oC(l,u,f,g){switch(DC(u)){case 2:var b=KY;break;case 8:b=QY;break;default:b=v5}f=b.bind(null,u,f,l),b=void 0,!Gf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function a5(l,u,f,g,b){var S=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var U=g.tag;if(U===3||U===4){var Y=g.stateNode.containerInfo;if(Y===b)break;if(U===4)for(U=g.return;U!==null;){var le=U.tag;if((le===3||le===4)&&U.stateNode.containerInfo===b)return;U=U.return}for(;Y!==null;){if(U=ue(Y),U===null)return;if(le=U.tag,le===5||le===6||le===26||le===27){g=S=U;continue e}Y=Y.parentNode}}g=g.return}C1(function(){var je=S,ze=Co(f),Ge=[];e:{var Re=Uj.get(l);if(Re!==void 0){var Le=Uu,Ct=l;switch(l){case"keypress":if($u(f)===0)break e;case"keydown":case"keyup":Le=$1;break;case"focusin":Ct="focus",Le=vc;break;case"focusout":Ct="blur",Le=vc;break;case"beforeblur":case"afterblur":Le=vc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=I1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=R1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=z1;break;case Dj:case Lj:case Bj:Le=x0;break;case $j:Le=b0;break;case"scroll":case"scrollend":Le=O1;break;case"wheel":Le=F1;break;case"copy":case"cut":case"paste":Le=P1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Yf;break;case"toggle":case"beforetoggle":Le=bc}var Ht=(u&4)!==0,mn=!Ht&&(l==="scroll"||l==="scrollend"),we=Ht?Re!==null?Re+"Capture":null:Re;Ht=[];for(var fe=je,Ne;fe!==null;){var qe=fe;if(Ne=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ne===null||we===null||(qe=Ui(fe,we),qe!=null&&Ht.push(Ap(fe,qe,Ne))),mn)break;fe=fe.return}0<Ht.length&&(Re=new Le(Re,Ct,null,f,ze),Ge.push({event:Re,listeners:Ht}))}}if((u&7)===0){e:{if(Re=l==="mouseover"||l==="pointerover",Le=l==="mouseout"||l==="pointerout",Re&&f!==Or&&(Ct=f.relatedTarget||f.fromElement)&&(ue(Ct)||Ct[Yr]))break e;if((Le||Re)&&(Re=ze.window===ze?ze:(Re=ze.ownerDocument)?Re.defaultView||Re.parentWindow:window,Le?(Ct=f.relatedTarget||f.toElement,Le=je,Ct=Ct?ue(Ct):null,Ct!==null&&(mn=i(Ct),Ht=Ct.tag,Ct!==mn||Ht!==5&&Ht!==27&&Ht!==6)&&(Ct=null)):(Le=null,Ct=je),Le!==Ct)){if(Ht=I1,qe="onMouseLeave",we="onMouseEnter",fe="mouse",(l==="pointerout"||l==="pointerover")&&(Ht=Yf,qe="onPointerLeave",we="onPointerEnter",fe="pointer"),mn=Le==null?Re:ot(Le),Ne=Ct==null?Re:ot(Ct),Re=new Ht(qe,fe+"leave",Le,f,ze),Re.target=mn,Re.relatedTarget=Ne,qe=null,ue(ze)===je&&(Ht=new Ht(we,fe+"enter",Ct,f,ze),Ht.target=Ne,Ht.relatedTarget=mn,qe=Ht),mn=qe,Le&&Ct)t:{for(Ht=wY,we=Le,fe=Ct,Ne=0,qe=we;qe;qe=Ht(qe))Ne++;qe=0;for(var Ut=fe;Ut;Ut=Ht(Ut))qe++;for(;0<Ne-qe;)we=Ht(we),Ne--;for(;0<qe-Ne;)fe=Ht(fe),qe--;for(;Ne--;){if(we===fe||fe!==null&&we===fe.alternate){Ht=we;break t}we=Ht(we),fe=Ht(fe)}Ht=null}else Ht=null;Le!==null&&lC(Ge,Re,Le,Ht,!1),Ct!==null&&mn!==null&&lC(Ge,mn,Ct,Ht,!0)}}e:{if(Re=je?ot(je):window,Le=Re.nodeName&&Re.nodeName.toLowerCase(),Le==="select"||Le==="input"&&Re.type==="file")var Lr=Aj;else if(zi(Re))if(Nj)Lr=IX;else{Lr=CX;var Mt=kX}else Le=Re.nodeName,!Le||Le.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?je&&ka(je.elementType)&&(Lr=Aj):Lr=OX;if(Lr&&(Lr=Lr(l,je))){qu(Ge,Lr,f,ze);break e}Mt&&Mt(l,Re,je),l==="focusout"&&je&&Re.type==="number"&&je.memoizedProps.value!=null&&oe(Re,"number",Re.value)}switch(Mt=je?ot(je):window,l){case"focusin":(zi(Mt)||Mt.contentEditable==="true")&&(w0=Mt,R4=je,ep=null);break;case"focusout":ep=R4=w0=null;break;case"mousedown":M4=!0;break;case"contextmenu":case"mouseup":case"dragend":M4=!1,Mj(Ge,f,ze);break;case"selectionchange":if(MX)break;case"keydown":case"keyup":Mj(Ge,f,ze)}var fr;if(M)e:{switch(l){case"compositionstart":var Nr="onCompositionStart";break e;case"compositionend":Nr="onCompositionEnd";break e;case"compositionupdate":Nr="onCompositionUpdate";break e}Nr=void 0}else vr?Zr(l,f)&&(Nr="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Nr="onCompositionStart");Nr&&(Te&&f.locale!=="ko"&&(vr||Nr!=="onCompositionStart"?Nr==="onCompositionEnd"&&vr&&(fr=pc()):(ls=ze,y0="value"in ls?ls.value:ls.textContent,vr=!0)),Mt=Ry(je,Nr),0<Mt.length&&(Nr=new Kf(Nr,l,null,f,ze),Ge.push({event:Nr,listeners:Mt}),fr?Nr.data=fr:(fr=va(f),fr!==null&&(Nr.data=fr)))),(fr=J?Ha(l,f):Ga(l,f))&&(Nr=Ry(je,"onBeforeInput"),0<Nr.length&&(Mt=new Kf("onBeforeInput","beforeinput",null,f,ze),Ge.push({event:Mt,listeners:Nr}),Mt.data=fr)),yY(Ge,l,je,f,ze)}sC(Ge,u)})}function Ap(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Ry(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,S=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||S===null||(b=Ui(l,f),b!=null&&g.unshift(Ap(l,b,S)),b=Ui(l,u),b!=null&&g.push(Ap(l,b,S))),l.tag===3)return g;l=l.return}return[]}function wY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function lC(l,u,f,g,b){for(var S=u._reactName,U=[];f!==null&&f!==g;){var Y=f,le=Y.alternate,je=Y.stateNode;if(Y=Y.tag,le!==null&&le===g)break;Y!==5&&Y!==26&&Y!==27||je===null||(le=je,b?(je=Ui(f,S),je!=null&&U.unshift(Ap(f,je,le))):b||(je=Ui(f,S),je!=null&&U.push(Ap(f,je,le)))),f=f.return}U.length!==0&&l.push({event:u,listeners:U})}var SY=/\r\n?/g,_Y=/\u0000|\uFFFD/g;function cC(l){return(typeof l=="string"?l:""+l).replace(SY,`
`).replace(_Y,"")}function uC(l,u){return u=cC(u),cC(l)===u}function pn(l,u,f,g,b,S){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||nt(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&nt(l,""+g);break;case"className":q(l,"class",g);break;case"tabIndex":q(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":q(l,f,g);break;case"style":ma(l,g,S);break;case"data":if(u!=="object"){q(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=ya(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(u!=="input"&&pn(l,u,"name",b.name,b,null),pn(l,u,"formEncType",b.formEncType,b,null),pn(l,u,"formMethod",b.formMethod,b,null),pn(l,u,"formTarget",b.formTarget,b,null)):(pn(l,u,"encType",b.encType,b,null),pn(l,u,"method",b.method,b,null),pn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=ya(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=Xn);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=ya(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":_r("beforetoggle",l),_r("toggle",l),qa(l,"popover",g);break;case"xlinkActuate":ge(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ge(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ge(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ge(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ge(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ge(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ge(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ge(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ge(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":qa(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Rs.get(f)||f,qa(l,f,g))}}function i5(l,u,f,g,b,S){switch(f){case"style":ma(l,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?nt(l,g):(typeof g=="number"||typeof g=="bigint")&&nt(l,""+g);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"onClick":g!=null&&(l.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),S=l[Sn]||null,S=S!=null?S[f]:null,typeof S=="function"&&l.removeEventListener(u,S,b),typeof g=="function")){typeof S!="function"&&S!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):qa(l,f,g)}}}function si(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_r("error",l),_r("load",l);var g=!1,b=!1,S;for(S in f)if(f.hasOwnProperty(S)){var U=f[S];if(U!=null)switch(S){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:pn(l,u,S,U,f,null)}}b&&pn(l,u,"srcSet",f.srcSet,f,null),g&&pn(l,u,"src",f.src,f,null);return;case"input":_r("invalid",l);var Y=S=U=b=null,le=null,je=null;for(g in f)if(f.hasOwnProperty(g)){var ze=f[g];if(ze!=null)switch(g){case"name":b=ze;break;case"type":U=ze;break;case"checked":le=ze;break;case"defaultChecked":je=ze;break;case"value":S=ze;break;case"defaultValue":Y=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(n(137,u));break;default:pn(l,u,g,ze,f,null)}}or(l,S,Y,le,je,U,b,!1);return;case"select":_r("invalid",l),g=U=S=null;for(b in f)if(f.hasOwnProperty(b)&&(Y=f[b],Y!=null))switch(b){case"value":S=Y;break;case"defaultValue":U=Y;break;case"multiple":g=Y;default:pn(l,u,b,Y,f,null)}u=S,f=U,l.multiple=!!g,u!=null?ve(l,!!g,u,!1):f!=null&&ve(l,!!g,f,!0);return;case"textarea":_r("invalid",l),S=b=g=null;for(U in f)if(f.hasOwnProperty(U)&&(Y=f[U],Y!=null))switch(U){case"value":g=Y;break;case"defaultValue":b=Y;break;case"children":S=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:pn(l,u,U,Y,f,null)}Je(l,g,b,S);return;case"option":for(le in f)if(f.hasOwnProperty(le)&&(g=f[le],g!=null))switch(le){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:pn(l,u,le,g,f,null)}return;case"dialog":_r("beforetoggle",l),_r("toggle",l),_r("cancel",l),_r("close",l);break;case"iframe":case"object":_r("load",l);break;case"video":case"audio":for(g=0;g<Tp.length;g++)_r(Tp[g],l);break;case"image":_r("error",l),_r("load",l);break;case"details":_r("toggle",l);break;case"embed":case"source":case"link":_r("error",l),_r("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(je in f)if(f.hasOwnProperty(je)&&(g=f[je],g!=null))switch(je){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:pn(l,u,je,g,f,null)}return;default:if(ka(u)){for(ze in f)f.hasOwnProperty(ze)&&(g=f[ze],g!==void 0&&i5(l,u,ze,g,f,void 0));return}}for(Y in f)f.hasOwnProperty(Y)&&(g=f[Y],g!=null&&pn(l,u,Y,g,f,null))}function TY(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,S=null,U=null,Y=null,le=null,je=null,ze=null;for(Le in f){var Ge=f[Le];if(f.hasOwnProperty(Le)&&Ge!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":le=Ge;default:g.hasOwnProperty(Le)||pn(l,u,Le,null,g,Ge)}}for(var Re in g){var Le=g[Re];if(Ge=f[Re],g.hasOwnProperty(Re)&&(Le!=null||Ge!=null))switch(Re){case"type":S=Le;break;case"name":b=Le;break;case"checked":je=Le;break;case"defaultChecked":ze=Le;break;case"value":U=Le;break;case"defaultValue":Y=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(n(137,u));break;default:Le!==Ge&&pn(l,u,Re,Le,g,Ge)}}ri(l,U,Y,le,je,ze,S,b);return;case"select":Le=U=Y=Re=null;for(S in f)if(le=f[S],f.hasOwnProperty(S)&&le!=null)switch(S){case"value":break;case"multiple":Le=le;default:g.hasOwnProperty(S)||pn(l,u,S,null,g,le)}for(b in g)if(S=g[b],le=f[b],g.hasOwnProperty(b)&&(S!=null||le!=null))switch(b){case"value":Re=S;break;case"defaultValue":Y=S;break;case"multiple":U=S;default:S!==le&&pn(l,u,b,S,g,le)}u=Y,f=U,g=Le,Re!=null?ve(l,!!f,Re,!1):!!g!=!!f&&(u!=null?ve(l,!!f,u,!0):ve(l,!!f,f?[]:"",!1));return;case"textarea":Le=Re=null;for(Y in f)if(b=f[Y],f.hasOwnProperty(Y)&&b!=null&&!g.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:pn(l,u,Y,null,g,b)}for(U in g)if(b=g[U],S=f[U],g.hasOwnProperty(U)&&(b!=null||S!=null))switch(U){case"value":Re=b;break;case"defaultValue":Le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==S&&pn(l,u,U,b,g,S)}He(l,Re,Le);return;case"option":for(var Ct in f)if(Re=f[Ct],f.hasOwnProperty(Ct)&&Re!=null&&!g.hasOwnProperty(Ct))switch(Ct){case"selected":l.selected=!1;break;default:pn(l,u,Ct,null,g,Re)}for(le in g)if(Re=g[le],Le=f[le],g.hasOwnProperty(le)&&Re!==Le&&(Re!=null||Le!=null))switch(le){case"selected":l.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:pn(l,u,le,Re,g,Le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in f)Re=f[Ht],f.hasOwnProperty(Ht)&&Re!=null&&!g.hasOwnProperty(Ht)&&pn(l,u,Ht,null,g,Re);for(je in g)if(Re=g[je],Le=f[je],g.hasOwnProperty(je)&&Re!==Le&&(Re!=null||Le!=null))switch(je){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,u));break;default:pn(l,u,je,Re,g,Le)}return;default:if(ka(u)){for(var mn in f)Re=f[mn],f.hasOwnProperty(mn)&&Re!==void 0&&!g.hasOwnProperty(mn)&&i5(l,u,mn,void 0,g,Re);for(ze in g)Re=g[ze],Le=f[ze],!g.hasOwnProperty(ze)||Re===Le||Re===void 0&&Le===void 0||i5(l,u,ze,Re,g,Le);return}}for(var we in f)Re=f[we],f.hasOwnProperty(we)&&Re!=null&&!g.hasOwnProperty(we)&&pn(l,u,we,null,g,Re);for(Ge in g)Re=g[Ge],Le=f[Ge],!g.hasOwnProperty(Ge)||Re===Le||Re==null&&Le==null||pn(l,u,Ge,Re,g,Le)}function dC(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],S=b.transferSize,U=b.initiatorType,Y=b.duration;if(S&&Y&&dC(U)){for(U=0,Y=b.responseEnd,g+=1;g<f.length;g++){var le=f[g],je=le.startTime;if(je>Y)break;var ze=le.transferSize,Ge=le.initiatorType;ze&&dC(Ge)&&(le=le.responseEnd,U+=ze*(le<Y?1:(Y-je)/(le-je)))}if(--g,u+=8*(S+U)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var s5=null,o5=null;function My(l){return l.nodeType===9?l:l.ownerDocument}function hC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fC(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function l5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var c5=null;function NY(){var l=window.event;return l&&l.type==="popstate"?l===c5?!1:(c5=l,!0):(c5=null,!1)}var pC=typeof setTimeout=="function"?setTimeout:void 0,EY=typeof clearTimeout=="function"?clearTimeout:void 0,mC=typeof Promise=="function"?Promise:void 0,jY=typeof queueMicrotask=="function"?queueMicrotask:typeof mC<"u"?function(l){return mC.resolve(null).then(l).catch(kY)}:pC;function kY(l){setTimeout(function(){throw l})}function Bc(l){return l==="head"}function gC(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),K0(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Np(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Np(f);for(var S=f.firstChild;S;){var U=S.nextSibling,Y=S.nodeName;S[gi]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=U}}else f==="body"&&Np(l.ownerDocument.body);f=b}while(f);K0(u)}function yC(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function u5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":u5(f),St(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function CY(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[gi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=zs(l.nextSibling),l===null)break}return null}function OY(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=zs(l.nextSibling),l===null))return null;return l}function vC(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=zs(l.nextSibling),l===null))return null;return l}function d5(l){return l.data==="$?"||l.data==="$~"}function h5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function IY(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function zs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var f5=null;function xC(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return zs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function bC(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function wC(l,u,f){switch(u=My(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Np(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);St(l)}var Vs=new Map,SC=new Set;function Py(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Al=X.d;X.d={f:RY,r:MY,D:PY,C:DY,L:LY,m:BY,X:UY,S:$Y,M:zY};function RY(){var l=Al.f(),u=Ny();return l||u}function MY(l){var u=Ke(l);u!==null&&u.tag===5&&u.type==="form"?$k(u):Al.r(l)}var H0=typeof document>"u"?null:document;function _C(l,u,f){var g=H0;if(g&&typeof u=="string"&&u){var b=$t(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),SC.has(b)||(SC.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),si(u,"link",l),hr(u),g.head.appendChild(u)))}}function PY(l){Al.D(l),_C("dns-prefetch",l,null)}function DY(l,u){Al.C(l,u),_C("preconnect",l,u)}function LY(l,u,f){Al.L(l,u,f);var g=H0;if(g&&l&&u){var b='link[rel="preload"][as="'+$t(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+$t(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+$t(f.imageSizes)+'"]')):b+='[href="'+$t(l)+'"]';var S=b;switch(u){case"style":S=G0(l);break;case"script":S=W0(l)}Vs.has(S)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Vs.set(S,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Ep(S))||u==="script"&&g.querySelector(jp(S))||(u=g.createElement("link"),si(u,"link",l),hr(u),g.head.appendChild(u)))}}function BY(l,u){Al.m(l,u);var f=H0;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+$t(g)+'"][href="'+$t(l)+'"]',S=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=W0(l)}if(!Vs.has(S)&&(l=m({rel:"modulepreload",href:l},u),Vs.set(S,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(jp(S)))return}g=f.createElement("link"),si(g,"link",l),hr(g),f.head.appendChild(g)}}}function $Y(l,u,f){Al.S(l,u,f);var g=H0;if(g&&l){var b=Kt(g).hoistableStyles,S=G0(l);u=u||"default";var U=b.get(S);if(!U){var Y={loading:0,preload:null};if(U=g.querySelector(Ep(S)))Y.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Vs.get(S))&&p5(l,f);var le=U=g.createElement("link");hr(le),si(le,"link",l),le._p=new Promise(function(je,ze){le.onload=je,le.onerror=ze}),le.addEventListener("load",function(){Y.loading|=1}),le.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Dy(U,u,g)}U={type:"stylesheet",instance:U,count:1,state:Y},b.set(S,U)}}}function UY(l,u){Al.X(l,u);var f=H0;if(f&&l){var g=Kt(f).hoistableScripts,b=W0(l),S=g.get(b);S||(S=f.querySelector(jp(b)),S||(l=m({src:l,async:!0},u),(u=Vs.get(b))&&m5(l,u),S=f.createElement("script"),hr(S),si(S,"link",l),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(b,S))}}function zY(l,u){Al.M(l,u);var f=H0;if(f&&l){var g=Kt(f).hoistableScripts,b=W0(l),S=g.get(b);S||(S=f.querySelector(jp(b)),S||(l=m({src:l,async:!0,type:"module"},u),(u=Vs.get(b))&&m5(l,u),S=f.createElement("script"),hr(S),si(S,"link",l),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(b,S))}}function TC(l,u,f,g){var b=(b=ce.current)?Py(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=G0(f.href),f=Kt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=G0(f.href);var S=Kt(b).hoistableStyles,U=S.get(l);if(U||(b=b.ownerDocument||b,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,U),(S=b.querySelector(Ep(l)))&&!S._p&&(U.instance=S,U.state.loading=5),Vs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Vs.set(l,f),S||VY(b,l,f,U.state))),u&&g===null)throw Error(n(528,""));return U}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=W0(f),f=Kt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function G0(l){return'href="'+$t(l)+'"'}function Ep(l){return'link[rel="stylesheet"]['+l+"]"}function AC(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function VY(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),si(u,"link",f),hr(u),l.head.appendChild(u))}function W0(l){return'[src="'+$t(l)+'"]'}function jp(l){return"script[async]"+l}function NC(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+$t(f.href)+'"]');if(g)return u.instance=g,hr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),hr(g),si(g,"style",b),Dy(g,f.precedence,l),u.instance=g;case"stylesheet":b=G0(f.href);var S=l.querySelector(Ep(b));if(S)return u.state.loading|=4,u.instance=S,hr(S),S;g=AC(f),(b=Vs.get(b))&&p5(g,b),S=(l.ownerDocument||l).createElement("link"),hr(S);var U=S;return U._p=new Promise(function(Y,le){U.onload=Y,U.onerror=le}),si(S,"link",g),u.state.loading|=4,Dy(S,f.precedence,l),u.instance=S;case"script":return S=W0(f.src),(b=l.querySelector(jp(S)))?(u.instance=b,hr(b),b):(g=f,(b=Vs.get(S))&&(g=m({},f),m5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),hr(b),si(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Dy(g,f.precedence,l));return u.instance}function Dy(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,S=b,U=0;U<g.length;U++){var Y=g[U];if(Y.dataset.precedence===u)S=Y;else if(S!==b)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function p5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function m5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Ly=null;function EC(l,u,f){if(Ly===null){var g=new Map,b=Ly=new Map;b.set(f,g)}else b=Ly,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var S=f[b];if(!(S[gi]||S[Fr]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var U=S.getAttribute(u)||"";U=l+U;var Y=g.get(U);Y?Y.push(S):g.set(U,[S])}}return g}function jC(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function FY(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function kC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function qY(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=G0(g.href),S=u.querySelector(Ep(b));if(S){u=S._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=By.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=S,hr(S);return}S=u.ownerDocument||u,g=AC(g),(b=Vs.get(b))&&p5(g,b),S=S.createElement("link"),hr(S);var U=S;U._p=new Promise(function(Y,le){U.onload=Y,U.onerror=le}),si(S,"link",g),f.instance=S}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=By.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var g5=0;function HY(l,u){return l.stylesheets&&l.count===0&&Uy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&Uy(l,l.stylesheets),l.unsuspend){var S=l.unsuspend;l.unsuspend=null,S()}},6e4+u);0<l.imgBytes&&g5===0&&(g5=62500*AY());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Uy(l,l.stylesheets),l.unsuspend)){var S=l.unsuspend;l.unsuspend=null,S()}},(l.imgBytes>g5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function By(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var $y=null;function Uy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,$y=new Map,u.forEach(GY,l),$y=null,By.call(l))}function GY(l,u){if(!(u.state.loading&4)){var f=$y.get(l);if(f)var g=f.get(null);else{f=new Map,$y.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<b.length;S++){var U=b[S];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(f.set(U.dataset.precedence,U),g=U)}g&&f.set(null,g)}b=u.instance,U=b.getAttribute("data-precedence"),S=f.get(U)||g,S===g&&f.set(null,b),f.set(U,b),this.count++,g=By.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),S?S.parentNode.insertBefore(b,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var kp={$$typeof:C,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function WY(l,u,f,g,b,S,U,Y,le){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.hiddenUpdates=Xr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=S,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function CC(l,u,f,g,b,S,U,Y,le,je,ze,Ge){return l=new WY(l,u,f,U,le,je,ze,Ge,Y),u=1,S===!0&&(u|=24),S=us(3,null,null,u),l.current=S,S.stateNode=l,u=Q4(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:g,isDehydrated:f,cache:u},J4(S),l}function OC(l){return l?(l=T0,l):T0}function IC(l,u,f,g,b,S){b=OC(b),g.context===null?g.context=b:g.pendingContext=b,g=Ec(u),g.payload={element:f},S=S===void 0?null:S,S!==null&&(g.callback=S),f=jc(l,g,u),f!==null&&(Gi(f,l,u),op(f,l,u))}function RC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function y5(l,u){RC(l,u),(l=l.alternate)&&RC(l,u)}function MC(l){if(l.tag===13||l.tag===31){var u=Wu(l,67108864);u!==null&&Gi(u,l,67108864),y5(l,67108864)}}function PC(l){if(l.tag===13||l.tag===31){var u=ms();u=ti(u);var f=Wu(l,u);f!==null&&Gi(f,l,u),y5(l,u)}}var zy=!0;function KY(l,u,f,g){var b=G.T;G.T=null;var S=X.p;try{X.p=2,v5(l,u,f,g)}finally{X.p=S,G.T=b}}function QY(l,u,f,g){var b=G.T;G.T=null;var S=X.p;try{X.p=8,v5(l,u,f,g)}finally{X.p=S,G.T=b}}function v5(l,u,f,g){if(zy){var b=x5(g);if(b===null)a5(l,u,g,Vy,f),LC(l,g);else if(YY(b,l,u,f,g))g.stopPropagation();else if(LC(l,g),u&4&&-1<XY.indexOf(l)){for(;b!==null;){var S=Ke(b);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var U=Nt(S.pendingLanes);if(U!==0){var Y=S;for(Y.pendingLanes|=2,Y.entangledLanes|=2;U;){var le=1<<31-Pt(U);Y.entanglements[1]|=le,U&=~le}Do(S),(Hr&6)===0&&(Ty=Rt()+500,_p(0))}}break;case 31:case 13:Y=Wu(S,2),Y!==null&&Gi(Y,S,2),Ny(),y5(S,2)}if(S=x5(g),S===null&&a5(l,u,g,Vy,f),S===b)break;b=S}b!==null&&g.stopPropagation()}else a5(l,u,g,null,f)}}function x5(l){return l=Co(l),b5(l)}var Vy=null;function b5(l){if(Vy=null,l=ue(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=s(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Vy=l,null}function DC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bt()){case Tt:return 2;case bt:return 8;case Zt:case tn:return 32;case rn:return 268435456;default:return 32}default:return 32}}var w5=!1,$c=null,Uc=null,zc=null,Cp=new Map,Op=new Map,Vc=[],XY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LC(l,u){switch(l){case"focusin":case"focusout":$c=null;break;case"dragenter":case"dragleave":Uc=null;break;case"mouseover":case"mouseout":zc=null;break;case"pointerover":case"pointerout":Cp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(u.pointerId)}}function Ip(l,u,f,g,b,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:S,targetContainers:[b]},u!==null&&(u=Ke(u),u!==null&&MC(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function YY(l,u,f,g,b){switch(u){case"focusin":return $c=Ip($c,l,u,f,g,b),!0;case"dragenter":return Uc=Ip(Uc,l,u,f,g,b),!0;case"mouseover":return zc=Ip(zc,l,u,f,g,b),!0;case"pointerover":var S=b.pointerId;return Cp.set(S,Ip(Cp.get(S)||null,l,u,f,g,b)),!0;case"gotpointercapture":return S=b.pointerId,Op.set(S,Ip(Op.get(S)||null,l,u,f,g,b)),!0}return!1}function BC(l){var u=ue(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=s(f),u!==null){l.blockedOn=u,Va(l.priority,function(){PC(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,Va(l.priority,function(){PC(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Fy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=x5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Or=g,f.target.dispatchEvent(g),Or=null}else return u=Ke(f),u!==null&&MC(u),l.blockedOn=f,!1;u.shift()}return!0}function $C(l,u,f){Fy(l)&&f.delete(u)}function ZY(){w5=!1,$c!==null&&Fy($c)&&($c=null),Uc!==null&&Fy(Uc)&&(Uc=null),zc!==null&&Fy(zc)&&(zc=null),Cp.forEach($C),Op.forEach($C)}function qy(l,u){l.blockedOn===u&&(l.blockedOn=null,w5||(w5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ZY)))}var Hy=null;function UC(l){Hy!==l&&(Hy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hy===l&&(Hy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(b5(g||f)===null)continue;break}var S=Ke(f);S!==null&&(l.splice(u,3),u-=3,xw(S,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function K0(l){function u(le){return qy(le,l)}$c!==null&&qy($c,l),Uc!==null&&qy(Uc,l),zc!==null&&qy(zc,l),Cp.forEach(u),Op.forEach(u);for(var f=0;f<Vc.length;f++){var g=Vc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<Vc.length&&(f=Vc[0],f.blockedOn===null);)BC(f),f.blockedOn===null&&Vc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],S=f[g+1],U=b[Sn]||null;if(typeof S=="function")U||UC(f);else if(U){var Y=null;if(S&&S.hasAttribute("formAction")){if(b=S,U=S[Sn]||null)Y=U.formAction;else if(b5(b)!==null)continue}else Y=U.action;typeof Y=="function"?f[g+1]=Y:(f.splice(g,3),g-=3),UC(f)}}}function zC(){function l(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(U){return b=U})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function S5(l){this._internalRoot=l}Gy.prototype.render=S5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=ms();IC(f,g,l,u,null,null)},Gy.prototype.unmount=S5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;IC(l.current,2,null,l,null,null),Ny(),u[Yr]=null}};function Gy(l){this._internalRoot=l}Gy.prototype.unstable_scheduleHydration=function(l){if(l){var u=un();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Vc.length&&u!==0&&u<Vc[f].priority;f++);Vc.splice(f,0,l),f===0&&BC(l)}};var VC=e.version;if(VC!=="19.2.4")throw Error(n(527,VC,"19.2.4"));X.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var JY={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wy.isDisabled&&Wy.supportsFiber)try{it=Wy.inject(JY),At=Wy}catch{}}return Mp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=Qk,S=Xk,U=Yk;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError)),u=CC(l,1,!1,null,null,f,g,null,b,S,U,zC),l[Yr]=u.current,n5(l),new S5(u)},Mp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",S=Qk,U=Xk,Y=Yk,le=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(Y=f.onRecoverableError),f.formState!==void 0&&(le=f.formState)),u=CC(l,1,!0,u,f??null,g,b,le,S,U,Y,zC),u.context=OC(null),f=u.current,g=ms(),g=ti(g),b=Ec(g),b.callback=null,jc(f,b,g),f=g,u.current.lanes=f,Mn(u,f),Do(u),l[Yr]=u.current,n5(l),new Gy(u)},Mp.version="19.2.4",Mp}var JC;function dZ(){if(JC)return A5.exports;JC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),A5.exports=uZ(),A5.exports}var hZ=dZ();const fZ=Gr(hZ);var bi=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(bi||{});const Pr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var kl=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(kl||{});const DT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},eO=[1.5,1.4,1.3,1.2,1.1],Im=5,Rm=1;var tO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},pZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},Dz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,c=s?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,x=h&63;d||(x=64,s||(y=64)),n.push(r[p],r[m],r[y],r[x])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Pz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new mZ;const y=i<<2|c>>4;if(n.push(y),h!==64){const x=c<<4&240|h>>2;if(n.push(x),m!==64){const T=h<<6&192|m;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gZ=function(t){const e=Pz(t);return Dz.encodeByteArray(e,!0)},tx=function(t){return gZ(t).replace(/\./g,"")},Lz=function(t){try{return Dz.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZ=()=>yZ().__FIREBASE_DEFAULTS__,xZ=()=>{if(typeof process>"u"||typeof tO>"u")return;const t=tO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Lz(t[1]);return e&&JSON.parse(e)},Xb=()=>{try{return vZ()||xZ()||bZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bz=t=>{var e,r;return(r=(e=Xb())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},$z=t=>{const e=Bz(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Uz=()=>{var t;return(t=Xb())===null||t===void 0?void 0:t.config},zz=t=>{var e;return(e=Xb())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tx(JSON.stringify(r)),tx(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _Z(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(La())}function TZ(){var t;const e=(t=Xb())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jZ(){const t=La();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vz(){return!TZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fz(){try{return typeof indexedDB=="object"}catch{return!1}}function kZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ="FirebaseError";class Eo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=CZ,Object.setPrototypeOf(this,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fg.prototype.create)}}class Fg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?OZ(i,n):"Error",c=`${this.serviceName}: ${s} (${a}).`;return new Eo(a,c,n)}}function OZ(t,e){return t.replace(IZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const IZ=/\{\$([^}]+)}/g;function RZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(rO(i)&&rO(s)){if(!Oh(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function rO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function MZ(t,e){const r=new PZ(t,e);return r.subscribe.bind(r)}class PZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");DZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=k5),a.error===void 0&&(a.error=k5),a.complete===void 0&&(a.complete=k5);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function k5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t){return t&&t._delegate?t._delegate:t}class Ql{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new wZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($Z(e))try{this.getOrInitializeService({instanceIdentifier:pd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=pd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pd){return this.instances.has(e)}getOptions(e=pd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&s.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const s=this.instances.get(a);return s&&e(s,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pd){return this.component?this.component.multipleInstances?e:pd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BZ(t){return t===pd?void 0:t}function $Z(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new LZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Er||(Er={}));const zZ={debug:Er.DEBUG,verbose:Er.VERBOSE,info:Er.INFO,warn:Er.WARN,error:Er.ERROR,silent:Er.SILENT},VZ=Er.INFO,FZ={[Er.DEBUG]:"log",[Er.VERBOSE]:"log",[Er.INFO]:"info",[Er.WARN]:"warn",[Er.ERROR]:"error"},qZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=FZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h8{constructor(e){this.name=e,this._logLevel=VZ,this._logHandler=qZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Er.DEBUG,...e),this._logHandler(this,Er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Er.VERBOSE,...e),this._logHandler(this,Er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Er.INFO,...e),this._logHandler(this,Er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Er.WARN,...e),this._logHandler(this,Er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Er.ERROR,...e),this._logHandler(this,Er.ERROR,...e)}}const HZ=(t,e)=>e.some(r=>t instanceof r);let nO,aO;function GZ(){return nO||(nO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WZ(){return aO||(aO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qz=new WeakMap,LT=new WeakMap,Hz=new WeakMap,C5=new WeakMap,f8=new WeakMap;function KZ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(mu(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&qz.set(r,t)}).catch(()=>{}),f8.set(e,t),e}function QZ(t){if(LT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});LT.set(t,e)}let BT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return LT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hz.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return mu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XZ(t){BT=t(BT)}function YZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(O5(this),e,...r);return Hz.set(n,e.sort?e.sort():[e]),mu(n)}:WZ().includes(t)?function(...e){return t.apply(O5(this),e),mu(qz.get(this))}:function(...e){return mu(t.apply(O5(this),e))}}function ZZ(t){return typeof t=="function"?YZ(t):(t instanceof IDBTransaction&&QZ(t),HZ(t,GZ())?new Proxy(t,BT):t)}function mu(t){if(t instanceof IDBRequest)return KZ(t);if(C5.has(t))return C5.get(t);const e=ZZ(t);return e!==t&&(C5.set(t,e),f8.set(e,t)),e}const O5=t=>f8.get(t);function JZ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),c=mu(s);return n&&s.addEventListener("upgradeneeded",d=>{n(mu(s.result),d.oldVersion,d.newVersion,mu(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const eJ=["get","getKey","getAll","getAllKeys","count"],tJ=["put","add","delete","clear"],I5=new Map;function iO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(I5.get(e))return I5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=tJ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||eJ.includes(r)))return;const i=async function(s,...c){const d=this.transaction(s,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return I5.set(e,i),i}XZ(t=>({...t,get:(e,r,n)=>iO(e,r)||t.get(e,r,n),has:(e,r)=>!!iO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(nJ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function nJ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $T="@firebase/app",sO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new h8("@firebase/app"),aJ="@firebase/app-compat",iJ="@firebase/analytics-compat",sJ="@firebase/analytics",oJ="@firebase/app-check-compat",lJ="@firebase/app-check",cJ="@firebase/auth",uJ="@firebase/auth-compat",dJ="@firebase/database",hJ="@firebase/data-connect",fJ="@firebase/database-compat",pJ="@firebase/functions",mJ="@firebase/functions-compat",gJ="@firebase/installations",yJ="@firebase/installations-compat",vJ="@firebase/messaging",xJ="@firebase/messaging-compat",bJ="@firebase/performance",wJ="@firebase/performance-compat",SJ="@firebase/remote-config",_J="@firebase/remote-config-compat",TJ="@firebase/storage",AJ="@firebase/storage-compat",NJ="@firebase/firestore",EJ="@firebase/vertexai-preview",jJ="@firebase/firestore-compat",kJ="firebase",CJ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="[DEFAULT]",OJ={[$T]:"fire-core",[aJ]:"fire-core-compat",[sJ]:"fire-analytics",[iJ]:"fire-analytics-compat",[lJ]:"fire-app-check",[oJ]:"fire-app-check-compat",[cJ]:"fire-auth",[uJ]:"fire-auth-compat",[dJ]:"fire-rtdb",[hJ]:"fire-data-connect",[fJ]:"fire-rtdb-compat",[pJ]:"fire-fn",[mJ]:"fire-fn-compat",[gJ]:"fire-iid",[yJ]:"fire-iid-compat",[vJ]:"fire-fcm",[xJ]:"fire-fcm-compat",[bJ]:"fire-perf",[wJ]:"fire-perf-compat",[SJ]:"fire-rc",[_J]:"fire-rc-compat",[TJ]:"fire-gcs",[AJ]:"fire-gcs-compat",[NJ]:"fire-fst",[jJ]:"fire-fst-compat",[EJ]:"fire-vertex","fire-js":"fire-js",[kJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map,IJ=new Map,zT=new Map;function oO(t,e){try{t.container.addComponent(e)}catch(r){Xl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function wu(t){const e=t.name;if(zT.has(e))return Xl.debug(`There were multiple attempts to register component ${e}.`),!1;zT.set(e,t);for(const r of rx.values())oO(r,t);for(const r of IJ.values())oO(r,t);return!0}function Hg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ml(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gu=new Fg("app","Firebase",RJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ql("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=CJ;function Gz(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:UT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw gu.create("bad-app-name",{appName:String(a)});if(r||(r=Uz()),!r)throw gu.create("no-options");const i=rx.get(a);if(i){if(Oh(r,i.options)&&Oh(n,i.config))return i;throw gu.create("duplicate-app",{appName:a})}const s=new UZ(a);for(const d of zT.values())s.addComponent(d);const c=new MJ(r,n,s);return rx.set(a,c),c}function p8(t=UT){const e=rx.get(t);if(!e&&t===UT&&Uz())return Gz();if(!e)throw gu.create("no-app",{appName:t});return e}function Xs(t,e,r){var n;let a=(n=OJ[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xl.warn(c.join(" "));return}wu(new Ql(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ="firebase-heartbeat-database",DJ=1,Mm="firebase-heartbeat-store";let R5=null;function Wz(){return R5||(R5=JZ(PJ,DJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mm)}catch(r){console.warn(r)}}}}).catch(t=>{throw gu.create("idb-open",{originalErrorMessage:t.message})})),R5}async function LJ(t){try{const r=(await Wz()).transaction(Mm),n=await r.objectStore(Mm).get(Kz(t));return await r.done,n}catch(e){if(e instanceof Eo)Xl.warn(e.message);else{const r=gu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xl.warn(r.message)}}}async function lO(t,e){try{const n=(await Wz()).transaction(Mm,"readwrite");await n.objectStore(Mm).put(e,Kz(t)),await n.done}catch(r){if(r instanceof Eo)Xl.warn(r.message);else{const n=gu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Xl.warn(n.message)}}}function Kz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ=1024,$J=720*60*60*1e3;class UJ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new VJ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=$J}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Xl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=cO(),{heartbeatsToSend:n,unsentEntries:a}=zJ(this._heartbeatsCache.heartbeats),i=tx(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Xl.warn(r),""}}}function cO(){return new Date().toISOString().substring(0,10)}function zJ(t,e=BJ){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),uO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),uO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class VJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fz()?kZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await LJ(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return lO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return lO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function uO(t){return tx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FJ(t){wu(new Ql("platform-logger",e=>new rJ(e),"PRIVATE")),wu(new Ql("heartbeat",e=>new UJ(e),"PRIVATE")),Xs($T,sO,t),Xs($T,sO,"esm2017"),Xs("fire-js","")}FJ("");var qJ="firebase",HJ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs(qJ,HJ,"app");function m8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Qz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GJ=Qz,Xz=new Fg("auth","Firebase",Qz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new h8("@firebase/auth");function WJ(t,...e){nx.logLevel<=Er.WARN&&nx.warn(`Auth (${o0}): ${t}`,...e)}function Mv(t,...e){nx.logLevel<=Er.ERROR&&nx.error(`Auth (${o0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t,...e){throw y8(t,...e)}function wo(t,...e){return y8(t,...e)}function g8(t,e,r){const n=Object.assign(Object.assign({},GJ()),{[e]:r});return new Fg("auth","Firebase",n).create(e,{appName:t.name})}function Id(t){return g8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KJ(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Qo(t,"argument-error"),g8(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function y8(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Xz.create(t,...e)}function nr(t,e,...r){if(!t)throw y8(e,...r)}function Pl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mv(e),new Error(e)}function Yl(t,e){t||Pl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function QJ(){return dO()==="http:"||dO()==="https:"}function dO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QJ()||NZ()||"connection"in navigator)?navigator.onLine:!0}function YJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,r){this.shortDelay=e,this.longDelay=r,Yl(r>e,"Short delay should be less than long delay!"),this.isMobile=_Z()||EZ()}get(){return XJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e){Yl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=new Gg(3e4,6e4);function x8(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tf(t,e,r,n,a={}){return Zz(t,a,async()=>{let i={},s={};n&&(e==="GET"?s=n:i={body:JSON.stringify(n)});const c=qg(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return AZ()||(h.referrerPolicy="no-referrer"),Yz.fetch()(Jz(t,t.config.apiHost,r,c),h)})}async function Zz(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},ZJ),e);try{const a=new tee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Qy(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const c=i.ok?s.errorMessage:s.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw Qy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw Qy(t,"user-disabled",s);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw g8(t,p,h);Qo(t,p)}}catch(a){if(a instanceof Eo)throw a;Qo(t,"network-request-failed",{message:String(a)})}}async function eee(t,e,r,n,a={}){const i=await Tf(t,e,r,n,a);return"mfaPendingCredential"in i&&Qo(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Jz(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?v8(t.config,a):`${t.config.apiScheme}://${a}`}class tee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(wo(this.auth,"network-request-failed")),JJ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=wo(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ree(t,e){return Tf(t,"POST","/v1/accounts:delete",e)}async function eV(t,e){return Tf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nee(t,e=!1){const r=bn(t),n=await r.getIdToken(e),a=b8(n);nr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:cm(M5(a.auth_time)),issuedAtTime:cm(M5(a.iat)),expirationTime:cm(M5(a.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function M5(t){return Number(t)*1e3}function b8(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Mv("JWT malformed, contained fewer than 3 sections"),null;try{const a=Lz(r);return a?JSON.parse(a):(Mv("Failed to decode base64 JWT payload"),null)}catch(a){return Mv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function hO(t){const e=b8(t);return nr(e,"internal-error"),nr(typeof e.exp<"u","internal-error"),nr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Eo&&aee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function aee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=cm(this.lastLoginAt),this.creationTime=cm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ax(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Pm(t,eV(r,{idToken:n}));nr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const s=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tV(i.providerUserInfo):[],c=oee(t.providerData,s),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new FT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function see(t){const e=bn(t);await ax(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function tV(t){return t.map(e=>{var{providerId:r}=e,n=m8(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lee(t,e){const r=await Zz(t,{},async()=>{const n=qg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,s=Jz(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Yz.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function cee(t,e){return Tf(t,"POST","/v2/accounts:revokeToken",x8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr(typeof e.idToken<"u","internal-error"),nr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nr(e.length!==0,"internal-error");const r=hO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await lee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,s=new vh;return n&&(nr(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),a&&(nr(typeof a=="string","internal-error",{appName:e}),s.accessToken=a),i&&(nr(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vh,this.toJSON())}_performRefresh(){return Pl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e){nr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=m8(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new FT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Pm(this,this.stsTokenManager.getToken(this.auth,e));return nr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return nee(this,e)}reload(){return see(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Dl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ax(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ml(this.auth.app))return Promise.reject(Id(this.auth));const e=await this.getIdToken();return await Pm(this,ree(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,s,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,x=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,_=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,E=(h=r.createdAt)!==null&&h!==void 0?h:void 0,I=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:C,emailVerified:L,isAnonymous:P,providerData:R,stsTokenManager:N}=r;nr(C&&N,e,"internal-error");const A=vh.fromJSON(this.name,N);nr(typeof C=="string",e,"internal-error"),qc(m,e.name),qc(y,e.name),nr(typeof L=="boolean",e,"internal-error"),nr(typeof P=="boolean",e,"internal-error"),qc(x,e.name),qc(T,e.name),qc(_,e.name),qc(w,e.name),qc(E,e.name),qc(I,e.name);const j=new Dl({uid:C,auth:e,email:y,emailVerified:L,displayName:m,isAnonymous:P,photoURL:T,phoneNumber:x,tenantId:_,stsTokenManager:A,createdAt:E,lastLoginAt:I});return R&&Array.isArray(R)&&(j.providerData=R.map($=>Object.assign({},$))),w&&(j._redirectEventId=w),j}static async _fromIdTokenResponse(e,r,n=!1){const a=new vh;a.updateFromServerResponse(r);const i=new Dl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await ax(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];nr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?tV(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new vh;c.updateFromIdToken(n);const d=new Dl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:s}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new FT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new Map;function Ll(t){Yl(t instanceof Function,"Expected a class definition");let e=fO.get(t);return e?(Yl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}rV.type="NONE";const pO=rV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e,r){return`firebase:${t}:${e}:${r}`}class xh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=Pv(this.userKey,a.apiKey,i),this.fullPersistenceKey=Pv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new xh(Ll(pO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||Ll(pO);const s=Pv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(s);if(p){const m=Dl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new xh(i,e,n):(i=d[0],c&&await i._set(s,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(s)}catch{}})),new xh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lV(e))return"Blackberry";if(cV(e))return"Webos";if(aV(e))return"Safari";if((e.includes("chrome/")||iV(e))&&!e.includes("edge/"))return"Chrome";if(oV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function nV(t=La()){return/firefox\//i.test(t)}function aV(t=La()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iV(t=La()){return/crios\//i.test(t)}function sV(t=La()){return/iemobile/i.test(t)}function oV(t=La()){return/android/i.test(t)}function lV(t=La()){return/blackberry/i.test(t)}function cV(t=La()){return/webos/i.test(t)}function w8(t=La()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uee(t=La()){var e;return w8(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dee(){return jZ()&&document.documentMode===10}function uV(t=La()){return w8(t)||oV(t)||cV(t)||lV(t)||/windows phone/i.test(t)||sV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t,e=[]){let r;switch(t){case"Browser":r=mO(La());break;case"Worker":r=`${mO(La())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${o0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((s,c)=>{try{const d=e(i);s(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fee(t,e={}){return Tf(t,"GET","/v2/passwordPolicy",x8(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pee=6;class mee{constructor(e){var r,n,a,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:pee,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gee{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gO(this),this.idTokenSubscription=new gO(this),this.beforeStateQueue=new hee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ll(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await xh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await eV(this,{idToken:e}),n=await Dl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ml(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(s){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ax(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ml(this.app))return Promise.reject(Id(this));const r=e?bn(e):null;return r&&nr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ml(this.app)?Promise.reject(Id(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ml(this.app)?Promise.reject(Id(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ll(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fee(this),r=new mee(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await cee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ll(e)||this._popupRedirectResolver;nr(r,this,"argument-error"),this.redirectPersistenceManager=await xh.create(this,[Ll(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(c,this,"internal-error"),c.then(()=>{s||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&WJ(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Yb(t){return bn(t)}class gO{constructor(e){this.auth=e,this.observer=null,this.addObserver=MZ(r=>this.observer=r)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yee(t){S8=t}function vee(t){return S8.loadJS(t)}function xee(){return S8.gapiScript}function bee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wee(t,e){const r=Hg(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Oh(i,e??{}))return a;Qo(a,"already-initialized")}return r.initialize({options:e})}function See(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ll);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function _ee(t,e,r){const n=Yb(t);nr(n._canInitEmulator,n,"emulator-config-failed"),nr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=hV(e),{host:s,port:c}=Tee(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),Aee()}function hV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Tee(t){const e=hV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:yO(n.substr(i.length+1))}}else{const[i,s]=n.split(":");return{host:i,port:yO(s)}}}function yO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Aee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Pl("not implemented")}_getIdTokenResponse(e){return Pl("not implemented")}_linkToIdToken(e,r){return Pl("not implemented")}_getReauthenticationResolver(e){return Pl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t,e){return eee(t,"POST","/v1/accounts:signInWithIdp",x8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee="http://localhost";class $d extends fV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new $d(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Qo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=m8(r,["providerId","signInMethod"]);if(!n||!a)return null;const s=new $d(n,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return bh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,bh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,bh(e,r)}buildRequest(){const e={requestUri:Nee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=qg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends _8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Wg{constructor(){super("facebook.com")}static credential(e){return $d._fromParams({providerId:Jc.PROVIDER_ID,signInMethod:Jc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jc.credentialFromTaggedObject(e)}static credentialFromError(e){return Jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jc.credential(e.oauthAccessToken)}catch{return null}}}Jc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends Wg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return $d._fromParams({providerId:Il.PROVIDER_ID,signInMethod:Il.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Il.credentialFromTaggedObject(e)}static credentialFromError(e){return Il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Il.credential(r,n)}catch{return null}}}Il.GOOGLE_SIGN_IN_METHOD="google.com";Il.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Wg{constructor(){super("github.com")}static credential(e){return $d._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eu.credential(e.oauthAccessToken)}catch{return null}}}eu.GITHUB_SIGN_IN_METHOD="github.com";eu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Wg{constructor(){super("twitter.com")}static credential(e,r){return $d._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return tu.credential(r,n)}catch{return null}}}tu.TWITTER_SIGN_IN_METHOD="twitter.com";tu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Dl._fromIdTokenResponse(e,n,a),s=vO(n);return new Ih({user:i,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=vO(n);return new Ih({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function vO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix extends Eo{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,ix.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new ix(e,r,n,a)}}function pV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ix._fromErrorAndOperation(t,i,e,n):i})}async function Eee(t,e,r=!1){const n=await Pm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ih._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jee(t,e,r=!1){const{auth:n}=t;if(Ml(n.app))return Promise.reject(Id(n));const a="reauthenticate";try{const i=await Pm(t,pV(n,a,e,t),r);nr(i.idToken,n,"internal-error");const s=b8(i.idToken);nr(s,n,"internal-error");const{sub:c}=s;return nr(t.uid===c,n,"user-mismatch"),Ih._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qo(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kee(t,e,r=!1){if(Ml(t.app))return Promise.reject(Id(t));const n="signIn",a=await pV(t,n,e),i=await Ih._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Cee(t,e,r,n){return bn(t).onIdTokenChanged(e,r,n)}function Oee(t,e,r){return bn(t).beforeAuthStateChanged(e,r)}function Iee(t,e,r,n){return bn(t).onAuthStateChanged(e,r,n)}function Ree(t){return bn(t).signOut()}const sx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(sx,"1"),this.storage.removeItem(sx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=1e3,Pee=10;class gV extends mV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},i=this.storage.getItem(n);dee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Pee):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Mee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}gV.type="LOCAL";const Dee=gV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV extends mV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}yV.type="SESSION";const vV=yV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new Zb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,s=this.handlersMap[a];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(s).map(async h=>h(r.origin,i)),d=await Lee(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,s;return new Promise((c,d)=>{const h=T8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(){return window}function $ee(t){Go().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){return typeof Go().WorkerGlobalScope<"u"&&typeof Go().importScripts=="function"}async function Uee(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zee(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Vee(){return xV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="firebaseLocalStorageDb",Fee=1,ox="firebaseLocalStorage",wV="fbase_key";class Kg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Jb(t,e){return t.transaction([ox],e?"readwrite":"readonly").objectStore(ox)}function qee(){const t=indexedDB.deleteDatabase(bV);return new Kg(t).toPromise()}function qT(){const t=indexedDB.open(bV,Fee);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(ox,{keyPath:wV})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(ox)?e(n):(n.close(),await qee(),e(await qT()))})})}async function xO(t,e,r){const n=Jb(t,!0).put({[wV]:e,value:r});return new Kg(n).toPromise()}async function Hee(t,e){const r=Jb(t,!1).get(e),n=await new Kg(r).toPromise();return n===void 0?null:n.value}function bO(t,e){const r=Jb(t,!0).delete(e);return new Kg(r).toPromise()}const Gee=800,Wee=3;class SV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Wee)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zb._getInstance(Vee()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Uee(),!this.activeServiceWorker)return;this.sender=new Bee(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qT();return await xO(e,sx,"1"),await bO(e,sx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>xO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Hee(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>bO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=Jb(a,!1).getAll();return new Kg(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SV.type="LOCAL";const Kee=SV;new Gg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t,e){return e?Ll(e):(nr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8 extends fV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return bh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return bh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Qee(t){return kee(t.auth,new A8(t),t.bypassAuthState)}function Xee(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),jee(r,new A8(t),t.bypassAuthState)}async function Yee(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),Eee(r,new A8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qee;case"linkViaPopup":case"linkViaRedirect":return Yee;case"reauthViaPopup":case"reauthViaRedirect":return Xee;default:Qo(this.auth,"internal-error")}}resolve(e){Yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee=new Gg(2e3,1e4);async function Jee(t,e,r){if(Ml(t.app))return Promise.reject(wo(t,"operation-not-supported-in-this-environment"));const n=Yb(t);KJ(t,e,_8);const a=_V(n,r);return new Td(n,"signInViaPopup",e,a).executeNotNull()}class Td extends TV{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Td.currentPopupAction&&Td.currentPopupAction.cancel(),Td.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){Yl(this.filter.length===1,"Popup operations only handle one event");const e=T8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(wo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Td.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zee.get())};e()}}Td.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ete="pendingRedirect",Dv=new Map;class tte extends TV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Dv.get(this.auth._key());if(!e){try{const n=await rte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Dv.set(this.auth._key(),e)}return this.bypassAuthState||Dv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rte(t,e){const r=ite(e),n=ate(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function nte(t,e){Dv.set(t._key(),e)}function ate(t){return Ll(t._redirectPersistence)}function ite(t){return Pv(ete,t.config.apiKey,t.name)}async function ste(t,e,r=!1){if(Ml(t.app))return Promise.reject(Id(t));const n=Yb(t),a=_V(n,e),s=await new tte(n,a,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote=600*1e3;class lte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!AV(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(wo(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ote&&this.cachedEventUids.clear(),this.cachedEventUids.has(wO(e))}saveEventToCache(e){this.cachedEventUids.add(wO(e)),this.lastProcessedEventTime=Date.now()}}function wO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ute(t,e={}){return Tf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hte=/^https?/;async function fte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ute(t);for(const r of e)try{if(pte(r))return}catch{}Qo(t,"unauthorized-domain")}function pte(t){const e=VT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!hte.test(r))return!1;if(dte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mte=new Gg(3e4,6e4);function SO(){const t=Go().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function gte(t){return new Promise((e,r)=>{var n,a,i;function s(){SO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SO(),r(wo(t,"network-request-failed"))},timeout:mte.get()})}if(!((a=(n=Go().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=Go().gapi)===null||i===void 0)&&i.load)s();else{const c=bee("iframefcb");return Go()[c]=()=>{gapi.load?s():r(wo(t,"network-request-failed"))},vee(`${xee()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw Lv=null,e})}let Lv=null;function yte(t){return Lv=Lv||gte(t),Lv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte=new Gg(5e3,15e3),xte="__/auth/iframe",bte="emulator/auth/iframe",wte={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ste=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _te(t){const e=t.config;nr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?v8(e,bte):`https://${t.config.authDomain}/${xte}`,n={apiKey:e.apiKey,appName:t.name,v:o0},a=Ste.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${qg(n).slice(1)}`}async function Tte(t){const e=await yte(t),r=Go().gapi;return nr(r,t,"internal-error"),e.open({where:document.body,url:_te(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wte,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const s=wo(t,"network-request-failed"),c=Go().setTimeout(()=>{i(s)},vte.get());function d(){Go().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nte=500,Ete=600,jte="_blank",kte="http://localhost";class _O{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cte(t,e,r,n=Nte,a=Ete){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Ate),{width:n.toString(),height:a.toString(),top:i,left:s}),h=La().toLowerCase();r&&(c=iV(h)?jte:r),nV(h)&&(e=e||kte,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[x,T])=>`${y}${x}=${T},`,"");if(uee(h)&&c!=="_self")return Ote(e||"",c),new _O(null);const m=window.open(e||"",c,p);nr(m,t,"popup-blocked");try{m.focus()}catch{}return new _O(m)}function Ote(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ite="__/auth/handler",Rte="emulator/auth/handler",Mte=encodeURIComponent("fac");async function TO(t,e,r,n,a,i){nr(t.config.authDomain,t,"auth-domain-config-required"),nr(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:o0,eventId:a};if(e instanceof _8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",RZ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof Wg){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const c=s;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Mte}=${encodeURIComponent(d)}`:"";return`${Pte(t)}?${qg(c).slice(1)}${h}`}function Pte({config:t}){return t.emulator?v8(t,Rte):`https://${t.authDomain}/${Ite}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="webStorageSupport";class Dte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vV,this._completeRedirectFn=ste,this._overrideRedirectResult=nte}async _openPopup(e,r,n,a){var i;Yl((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await TO(e,r,n,VT(),a);return Cte(e,s,T8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await TO(e,r,n,VT(),a);return $ee(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(Yl(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Tte(e),n=new lte(e);return r.register("authEvent",a=>(nr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(P5,{type:P5},a=>{var i;const s=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[P5];s!==void 0&&r(!!s),Qo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=fte(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return uV()||aV()||w8()}}const Lte=Dte;var AO="@firebase/auth",NO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $te(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ute(t){wu(new Ql("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;nr(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dV(t)},h=new gee(n,a,i,d);return See(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),wu(new Ql("auth-internal",e=>{const r=Yb(e.getProvider("auth").getImmediate());return(n=>new Bte(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xs(AO,NO,$te(t)),Xs(AO,NO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zte=300,Vte=zz("authIdTokenMaxAge")||zte;let EO=null;const Fte=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Vte)return;const a=r==null?void 0:r.token;EO!==a&&(EO=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function HT(t=p8()){const e=Hg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=wee(t,{popupRedirectResolver:Lte,persistence:[Kee,Dee,vV]}),n=zz("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const s=Fte(i.toString());Oee(r,s,()=>s(r.currentUser)),Cee(r,c=>s(c))}}const a=Bz("auth");return a&&_ee(r,`http://${a}`),r}function qte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=wo("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",qte().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ute("Browser");var jO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rd,NV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function j(){}j.prototype=A.prototype,N.D=A.prototype,N.prototype=new j,N.prototype.constructor=N,N.C=function($,B,F){for(var z=Array(arguments.length-2),K=2;K<arguments.length;K++)z[K-2]=arguments[K];return A.prototype[B].apply($,z)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,j){j||(j=0);var $=Array(16);if(typeof A=="string")for(var B=0;16>B;++B)$[B]=A.charCodeAt(j++)|A.charCodeAt(j++)<<8|A.charCodeAt(j++)<<16|A.charCodeAt(j++)<<24;else for(B=0;16>B;++B)$[B]=A[j++]|A[j++]<<8|A[j++]<<16|A[j++]<<24;A=N.g[0],j=N.g[1],B=N.g[2];var F=N.g[3],z=A+(F^j&(B^F))+$[0]+3614090360&4294967295;A=j+(z<<7&4294967295|z>>>25),z=F+(B^A&(j^B))+$[1]+3905402710&4294967295,F=A+(z<<12&4294967295|z>>>20),z=B+(j^F&(A^j))+$[2]+606105819&4294967295,B=F+(z<<17&4294967295|z>>>15),z=j+(A^B&(F^A))+$[3]+3250441966&4294967295,j=B+(z<<22&4294967295|z>>>10),z=A+(F^j&(B^F))+$[4]+4118548399&4294967295,A=j+(z<<7&4294967295|z>>>25),z=F+(B^A&(j^B))+$[5]+1200080426&4294967295,F=A+(z<<12&4294967295|z>>>20),z=B+(j^F&(A^j))+$[6]+2821735955&4294967295,B=F+(z<<17&4294967295|z>>>15),z=j+(A^B&(F^A))+$[7]+4249261313&4294967295,j=B+(z<<22&4294967295|z>>>10),z=A+(F^j&(B^F))+$[8]+1770035416&4294967295,A=j+(z<<7&4294967295|z>>>25),z=F+(B^A&(j^B))+$[9]+2336552879&4294967295,F=A+(z<<12&4294967295|z>>>20),z=B+(j^F&(A^j))+$[10]+4294925233&4294967295,B=F+(z<<17&4294967295|z>>>15),z=j+(A^B&(F^A))+$[11]+2304563134&4294967295,j=B+(z<<22&4294967295|z>>>10),z=A+(F^j&(B^F))+$[12]+1804603682&4294967295,A=j+(z<<7&4294967295|z>>>25),z=F+(B^A&(j^B))+$[13]+4254626195&4294967295,F=A+(z<<12&4294967295|z>>>20),z=B+(j^F&(A^j))+$[14]+2792965006&4294967295,B=F+(z<<17&4294967295|z>>>15),z=j+(A^B&(F^A))+$[15]+1236535329&4294967295,j=B+(z<<22&4294967295|z>>>10),z=A+(B^F&(j^B))+$[1]+4129170786&4294967295,A=j+(z<<5&4294967295|z>>>27),z=F+(j^B&(A^j))+$[6]+3225465664&4294967295,F=A+(z<<9&4294967295|z>>>23),z=B+(A^j&(F^A))+$[11]+643717713&4294967295,B=F+(z<<14&4294967295|z>>>18),z=j+(F^A&(B^F))+$[0]+3921069994&4294967295,j=B+(z<<20&4294967295|z>>>12),z=A+(B^F&(j^B))+$[5]+3593408605&4294967295,A=j+(z<<5&4294967295|z>>>27),z=F+(j^B&(A^j))+$[10]+38016083&4294967295,F=A+(z<<9&4294967295|z>>>23),z=B+(A^j&(F^A))+$[15]+3634488961&4294967295,B=F+(z<<14&4294967295|z>>>18),z=j+(F^A&(B^F))+$[4]+3889429448&4294967295,j=B+(z<<20&4294967295|z>>>12),z=A+(B^F&(j^B))+$[9]+568446438&4294967295,A=j+(z<<5&4294967295|z>>>27),z=F+(j^B&(A^j))+$[14]+3275163606&4294967295,F=A+(z<<9&4294967295|z>>>23),z=B+(A^j&(F^A))+$[3]+4107603335&4294967295,B=F+(z<<14&4294967295|z>>>18),z=j+(F^A&(B^F))+$[8]+1163531501&4294967295,j=B+(z<<20&4294967295|z>>>12),z=A+(B^F&(j^B))+$[13]+2850285829&4294967295,A=j+(z<<5&4294967295|z>>>27),z=F+(j^B&(A^j))+$[2]+4243563512&4294967295,F=A+(z<<9&4294967295|z>>>23),z=B+(A^j&(F^A))+$[7]+1735328473&4294967295,B=F+(z<<14&4294967295|z>>>18),z=j+(F^A&(B^F))+$[12]+2368359562&4294967295,j=B+(z<<20&4294967295|z>>>12),z=A+(j^B^F)+$[5]+4294588738&4294967295,A=j+(z<<4&4294967295|z>>>28),z=F+(A^j^B)+$[8]+2272392833&4294967295,F=A+(z<<11&4294967295|z>>>21),z=B+(F^A^j)+$[11]+1839030562&4294967295,B=F+(z<<16&4294967295|z>>>16),z=j+(B^F^A)+$[14]+4259657740&4294967295,j=B+(z<<23&4294967295|z>>>9),z=A+(j^B^F)+$[1]+2763975236&4294967295,A=j+(z<<4&4294967295|z>>>28),z=F+(A^j^B)+$[4]+1272893353&4294967295,F=A+(z<<11&4294967295|z>>>21),z=B+(F^A^j)+$[7]+4139469664&4294967295,B=F+(z<<16&4294967295|z>>>16),z=j+(B^F^A)+$[10]+3200236656&4294967295,j=B+(z<<23&4294967295|z>>>9),z=A+(j^B^F)+$[13]+681279174&4294967295,A=j+(z<<4&4294967295|z>>>28),z=F+(A^j^B)+$[0]+3936430074&4294967295,F=A+(z<<11&4294967295|z>>>21),z=B+(F^A^j)+$[3]+3572445317&4294967295,B=F+(z<<16&4294967295|z>>>16),z=j+(B^F^A)+$[6]+76029189&4294967295,j=B+(z<<23&4294967295|z>>>9),z=A+(j^B^F)+$[9]+3654602809&4294967295,A=j+(z<<4&4294967295|z>>>28),z=F+(A^j^B)+$[12]+3873151461&4294967295,F=A+(z<<11&4294967295|z>>>21),z=B+(F^A^j)+$[15]+530742520&4294967295,B=F+(z<<16&4294967295|z>>>16),z=j+(B^F^A)+$[2]+3299628645&4294967295,j=B+(z<<23&4294967295|z>>>9),z=A+(B^(j|~F))+$[0]+4096336452&4294967295,A=j+(z<<6&4294967295|z>>>26),z=F+(j^(A|~B))+$[7]+1126891415&4294967295,F=A+(z<<10&4294967295|z>>>22),z=B+(A^(F|~j))+$[14]+2878612391&4294967295,B=F+(z<<15&4294967295|z>>>17),z=j+(F^(B|~A))+$[5]+4237533241&4294967295,j=B+(z<<21&4294967295|z>>>11),z=A+(B^(j|~F))+$[12]+1700485571&4294967295,A=j+(z<<6&4294967295|z>>>26),z=F+(j^(A|~B))+$[3]+2399980690&4294967295,F=A+(z<<10&4294967295|z>>>22),z=B+(A^(F|~j))+$[10]+4293915773&4294967295,B=F+(z<<15&4294967295|z>>>17),z=j+(F^(B|~A))+$[1]+2240044497&4294967295,j=B+(z<<21&4294967295|z>>>11),z=A+(B^(j|~F))+$[8]+1873313359&4294967295,A=j+(z<<6&4294967295|z>>>26),z=F+(j^(A|~B))+$[15]+4264355552&4294967295,F=A+(z<<10&4294967295|z>>>22),z=B+(A^(F|~j))+$[6]+2734768916&4294967295,B=F+(z<<15&4294967295|z>>>17),z=j+(F^(B|~A))+$[13]+1309151649&4294967295,j=B+(z<<21&4294967295|z>>>11),z=A+(B^(j|~F))+$[4]+4149444226&4294967295,A=j+(z<<6&4294967295|z>>>26),z=F+(j^(A|~B))+$[11]+3174756917&4294967295,F=A+(z<<10&4294967295|z>>>22),z=B+(A^(F|~j))+$[2]+718787259&4294967295,B=F+(z<<15&4294967295|z>>>17),z=j+(F^(B|~A))+$[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(B+(z<<21&4294967295|z>>>11))&4294967295,N.g[2]=N.g[2]+B&4294967295,N.g[3]=N.g[3]+F&4294967295}n.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var j=A-this.blockSize,$=this.B,B=this.h,F=0;F<A;){if(B==0)for(;F<=j;)a(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<A;)if($[B++]=N.charCodeAt(F++),B==this.blockSize){a(this,$),B=0;break}}else for(;F<A;)if($[B++]=N[F++],B==this.blockSize){a(this,$),B=0;break}}this.h=B,this.o+=A},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var j=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=j&255,j/=256;for(this.u(N),N=Array(16),A=j=0;4>A;++A)for(var $=0;32>$;$+=8)N[j++]=this.g[A]>>>$&255;return N};function i(N,A){var j=c;return Object.prototype.hasOwnProperty.call(j,N)?j[N]:j[N]=A(N)}function s(N,A){this.h=A;for(var j=[],$=!0,B=N.length-1;0<=B;B--){var F=N[B]|0;$&&F==A||(j[B]=F,$=!1)}this.g=j}var c={};function d(N){return-128<=N&&128>N?i(N,function(A){return new s([A|0],0>A?-1:0)}):new s([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return w(h(-N));for(var A=[],j=1,$=0;N>=j;$++)A[$]=N/j|0,j*=4294967296;return new s(A,0)}function p(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return w(p(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=h(Math.pow(A,8)),$=m,B=0;B<N.length;B+=8){var F=Math.min(8,N.length-B),z=parseInt(N.substring(B,B+F),A);8>F?(F=h(Math.pow(A,F)),$=$.j(F).add(h(z))):($=$.j(j),$=$.add(h(z)))}return $}var m=d(0),y=d(1),x=d(16777216);t=s.prototype,t.m=function(){if(_(this))return-w(this).m();for(var N=0,A=1,j=0;j<this.g.length;j++){var $=this.i(j);N+=(0<=$?$:4294967296+$)*A,A*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(_(this))return"-"+w(this).toString(N);for(var A=h(Math.pow(N,6)),j=this,$="";;){var B=L(j,A).g;j=E(j,B.j(A));var F=((0<j.g.length?j.g[0]:j.h)>>>0).toString(N);if(j=B,T(j))return F+$;for(;6>F.length;)F="0"+F;$=F+$}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function _(N){return N.h==-1}t.l=function(N){return N=E(this,N),_(N)?-1:T(N)?0:1};function w(N){for(var A=N.g.length,j=[],$=0;$<A;$++)j[$]=~N.g[$];return new s(j,~N.h).add(y)}t.abs=function(){return _(this)?w(this):this},t.add=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],$=0,B=0;B<=A;B++){var F=$+(this.i(B)&65535)+(N.i(B)&65535),z=(F>>>16)+(this.i(B)>>>16)+(N.i(B)>>>16);$=z>>>16,F&=65535,z&=65535,j[B]=z<<16|F}return new s(j,j[j.length-1]&-2147483648?-1:0)};function E(N,A){return N.add(w(A))}t.j=function(N){if(T(this)||T(N))return m;if(_(this))return _(N)?w(this).j(w(N)):w(w(this).j(N));if(_(N))return w(this.j(w(N)));if(0>this.l(x)&&0>N.l(x))return h(this.m()*N.m());for(var A=this.g.length+N.g.length,j=[],$=0;$<2*A;$++)j[$]=0;for($=0;$<this.g.length;$++)for(var B=0;B<N.g.length;B++){var F=this.i($)>>>16,z=this.i($)&65535,K=N.i(B)>>>16,Q=N.i(B)&65535;j[2*$+2*B]+=z*Q,I(j,2*$+2*B),j[2*$+2*B+1]+=F*Q,I(j,2*$+2*B+1),j[2*$+2*B+1]+=z*K,I(j,2*$+2*B+1),j[2*$+2*B+2]+=F*K,I(j,2*$+2*B+2)}for($=0;$<A;$++)j[$]=j[2*$+1]<<16|j[2*$];for($=A;$<2*A;$++)j[$]=0;return new s(j,0)};function I(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function C(N,A){this.g=N,this.h=A}function L(N,A){if(T(A))throw Error("division by zero");if(T(N))return new C(m,m);if(_(N))return A=L(w(N),A),new C(w(A.g),w(A.h));if(_(A))return A=L(N,w(A)),new C(w(A.g),A.h);if(30<N.g.length){if(_(N)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var j=y,$=A;0>=$.l(N);)j=P(j),$=P($);var B=R(j,1),F=R($,1);for($=R($,2),j=R(j,2);!T($);){var z=F.add($);0>=z.l(N)&&(B=B.add(j),F=z),$=R($,1),j=R(j,1)}return A=E(N,B.j(A)),new C(B,A)}for(B=m;0<=N.l(A);){for(j=Math.max(1,Math.floor(N.m()/A.m())),$=Math.ceil(Math.log(j)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),F=h(j),z=F.j(A);_(z)||0<z.l(N);)j-=$,F=h(j),z=F.j(A);T(F)&&(F=y),B=B.add(F),N=E(N,z)}return new C(B,N)}t.A=function(N){return L(this,N).h},t.and=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],$=0;$<A;$++)j[$]=this.i($)&N.i($);return new s(j,this.h&N.h)},t.or=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],$=0;$<A;$++)j[$]=this.i($)|N.i($);return new s(j,this.h|N.h)},t.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),j=[],$=0;$<A;$++)j[$]=this.i($)^N.i($);return new s(j,this.h^N.h)};function P(N){for(var A=N.g.length+1,j=[],$=0;$<A;$++)j[$]=N.i($)<<1|N.i($-1)>>>31;return new s(j,N.h)}function R(N,A){var j=A>>5;A%=32;for(var $=N.g.length-j,B=[],F=0;F<$;F++)B[F]=0<A?N.i(F+j)>>>A|N.i(F+j+1)<<32-A:N.i(F+j);return new s(B,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,NV=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Rd=s}).apply(typeof jO<"u"?jO:typeof self<"u"?self:typeof window<"u"?window:{});var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EV,tm,jV,Bv,GT,kV,CV,OV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,M,V){return v==Array.prototype||v==Object.prototype||(v[M]=V.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xy=="object"&&Xy];for(var M=0;M<v.length;++M){var V=v[M];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function a(v,M){if(M)e:{var V=n;v=v.split(".");for(var J=0;J<v.length-1;J++){var Te=v[J];if(!(Te in V))break e;V=V[Te]}v=v[v.length-1],J=V[v],M=M(J),M!=J&&M!=null&&e(V,v,{configurable:!0,writable:!0,value:M})}}function i(v,M){v instanceof String&&(v+="");var V=0,J=!1,Te={next:function(){if(!J&&V<v.length){var $e=V++;return{value:M($e,v[$e]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}a("Array.prototype.values",function(v){return v||function(){return i(this,function(M,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(v){var M=typeof v;return M=M!="object"?M:v?Array.isArray(v)?"array":M:"null",M=="array"||M=="object"&&typeof v.length=="number"}function h(v){var M=typeof v;return M=="object"&&v!=null||M=="function"}function p(v,M,V){return v.call.apply(v.bind,arguments)}function m(v,M,V){if(!v)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,J),v.apply(M,Te)}}return function(){return v.apply(M,arguments)}}function y(v,M,V){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function x(v,M){var V=Array.prototype.slice.call(arguments,1);return function(){var J=V.slice();return J.push.apply(J,arguments),v.apply(this,J)}}function T(v,M){function V(){}V.prototype=M.prototype,v.aa=M.prototype,v.prototype=new V,v.prototype.constructor=v,v.Qb=function(J,Te,$e){for(var dt=Array(arguments.length-2),Zr=2;Zr<arguments.length;Zr++)dt[Zr-2]=arguments[Zr];return M.prototype[Te].apply(J,dt)}}function _(v){const M=v.length;if(0<M){const V=Array(M);for(let J=0;J<M;J++)V[J]=v[J];return V}return[]}function w(v,M){for(let V=1;V<arguments.length;V++){const J=arguments[V];if(d(J)){const Te=v.length||0,$e=J.length||0;v.length=Te+$e;for(let dt=0;dt<$e;dt++)v[Te+dt]=J[dt]}else v.push(J)}}class E{constructor(M,V){this.i=M,this.j=V,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function I(v){return/^[\s\xa0]*$/.test(v)}function C(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var P=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function R(v,M,V){for(const J in v)M.call(V,v[J],J,v)}function N(v,M){for(const V in v)M.call(void 0,v[V],V,v)}function A(v){const M={};for(const V in v)M[V]=v[V];return M}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(v,M){let V,J;for(let Te=1;Te<arguments.length;Te++){J=arguments[Te];for(V in J)v[V]=J[V];for(let $e=0;$e<j.length;$e++)V=j[$e],Object.prototype.hasOwnProperty.call(J,V)&&(v[V]=J[V])}}function B(v){var M=1;v=v.split(":");const V=[];for(;0<M&&v.length;)V.push(v.shift()),M--;return v.length&&V.push(v.join(":")),V}function F(v){c.setTimeout(()=>{throw v},0)}function z(){var v=de;let M=null;return v.g&&(M=v.g,v.g=v.g.next,v.g||(v.h=null),M.next=null),M}class K{constructor(){this.h=this.g=null}add(M,V){const J=Q.get();J.set(M,V),this.h?this.h.next=J:this.g=J,this.h=J}}var Q=new E(()=>new G,v=>v.reset());class G{constructor(){this.next=this.g=this.h=null}set(M,V){this.h=M,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let X,ne=!1,de=new K,me=()=>{const v=c.Promise.resolve(void 0);X=()=>{v.then(H)}};var H=()=>{for(var v;v=z();){try{v.h.call(v.g)}catch(V){F(V)}var M=Q;M.j(v),100>M.h&&(M.h++,v.next=M.g,M.g=v)}ne=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(v,M){this.type=v,this.g=this.target=M,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var Oe=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,M=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};c.addEventListener("test",V,M),c.removeEventListener("test",V,M)}catch{}return v})();function re(v,M){if(te.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var V=this.type=v.type,J=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=M,M=v.relatedTarget){if(P){e:{try{L(M.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(M=null)}}else V=="mouseover"?M=v.fromElement:V=="mouseout"&&(M=v.toElement);this.relatedTarget=M,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:ce[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&re.aa.h.call(this)}}T(re,te);var ce={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),Ie=0;function Se(v,M,V,J,Te){this.listener=v,this.proxy=null,this.src=M,this.type=V,this.capture=!!J,this.ha=Te,this.key=++Ie,this.da=this.fa=!1}function We(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Me(v){this.src=v,this.g={},this.h=0}Me.prototype.add=function(v,M,V,J,Te){var $e=v.toString();v=this.g[$e],v||(v=this.g[$e]=[],this.h++);var dt=gt(v,M,J,Te);return-1<dt?(M=v[dt],V||(M.fa=!1)):(M=new Se(M,this.src,$e,!!J,Te),M.fa=V,v.push(M)),M};function _e(v,M){var V=M.type;if(V in v.g){var J=v.g[V],Te=Array.prototype.indexOf.call(J,M,void 0),$e;($e=0<=Te)&&Array.prototype.splice.call(J,Te,1),$e&&(We(M),v.g[V].length==0&&(delete v.g[V],v.h--))}}function gt(v,M,V,J){for(var Te=0;Te<v.length;++Te){var $e=v[Te];if(!$e.da&&$e.listener==M&&$e.capture==!!V&&$e.ha==J)return Te}return-1}var et="closure_lm_"+(1e6*Math.random()|0),pt={};function st(v,M,V,J,Te){if(Array.isArray(M)){for(var $e=0;$e<M.length;$e++)st(v,M[$e],V,J,Te);return null}return V=Bt(V),v&&v[he]?v.K(M,V,h(J)?!!J.capture:!1,Te):xe(v,M,V,!1,J,Te)}function xe(v,M,V,J,Te,$e){if(!M)throw Error("Invalid event type");var dt=h(Te)?!!Te.capture:!!Te,Zr=yt(v);if(Zr||(v[et]=Zr=new Me(v)),V=Zr.add(M,V,J,dt,$e),V.proxy)return V;if(J=be(),V.proxy=J,J.src=v,J.listener=V,v.addEventListener)Oe||(Te=dt),Te===void 0&&(Te=!1),v.addEventListener(M.toString(),J,Te);else if(v.attachEvent)v.attachEvent(ht(M.toString()),J);else if(v.addListener&&v.removeListener)v.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return V}function be(){function v(V){return M.call(v.src,v.listener,V)}const M=Ze;return v}function Be(v,M,V,J,Te){if(Array.isArray(M))for(var $e=0;$e<M.length;$e++)Be(v,M[$e],V,J,Te);else J=h(J)?!!J.capture:!!J,V=Bt(V),v&&v[he]?(v=v.i,M=String(M).toString(),M in v.g&&($e=v.g[M],V=gt($e,V,J,Te),-1<V&&(We($e[V]),Array.prototype.splice.call($e,V,1),$e.length==0&&(delete v.g[M],v.h--)))):v&&(v=yt(v))&&(M=v.g[M.toString()],v=-1,M&&(v=gt(M,V,J,Te)),(V=-1<v?M[v]:null)&&Ye(V))}function Ye(v){if(typeof v!="number"&&v&&!v.da){var M=v.src;if(M&&M[he])_e(M.i,v);else{var V=v.type,J=v.proxy;M.removeEventListener?M.removeEventListener(V,J,v.capture):M.detachEvent?M.detachEvent(ht(V),J):M.addListener&&M.removeListener&&M.removeListener(J),(V=yt(M))?(_e(V,v),V.h==0&&(V.src=null,M[et]=null)):We(v)}}}function ht(v){return v in pt?pt[v]:pt[v]="on"+v}function Ze(v,M){if(v.da)v=!0;else{M=new re(M,this);var V=v.listener,J=v.ha||v.src;v.fa&&Ye(v),v=V.call(J,M)}return v}function yt(v){return v=v[et],v instanceof Me?v:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bt(v){return typeof v=="function"?v:(v[Rt]||(v[Rt]=function(M){return v.handleEvent(M)}),v[Rt])}function Tt(){ee.call(this),this.i=new Me(this),this.M=this,this.F=null}T(Tt,ee),Tt.prototype[he]=!0,Tt.prototype.removeEventListener=function(v,M,V,J){Be(this,v,M,V,J)};function bt(v,M){var V,J=v.F;if(J)for(V=[];J;J=J.F)V.push(J);if(v=v.M,J=M.type||M,typeof M=="string")M=new te(M,v);else if(M instanceof te)M.target=M.target||v;else{var Te=M;M=new te(J,v),$(M,Te)}if(Te=!0,V)for(var $e=V.length-1;0<=$e;$e--){var dt=M.g=V[$e];Te=Zt(dt,J,!0,M)&&Te}if(dt=M.g=v,Te=Zt(dt,J,!0,M)&&Te,Te=Zt(dt,J,!1,M)&&Te,V)for($e=0;$e<V.length;$e++)dt=M.g=V[$e],Te=Zt(dt,J,!1,M)&&Te}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var v=this.i,M;for(M in v.g){for(var V=v.g[M],J=0;J<V.length;J++)We(V[J]);delete v.g[M],v.h--}}this.F=null},Tt.prototype.K=function(v,M,V,J){return this.i.add(String(v),M,!1,V,J)},Tt.prototype.L=function(v,M,V,J){return this.i.add(String(v),M,!0,V,J)};function Zt(v,M,V,J){if(M=v.i.g[String(M)],!M)return!0;M=M.concat();for(var Te=!0,$e=0;$e<M.length;++$e){var dt=M[$e];if(dt&&!dt.da&&dt.capture==V){var Zr=dt.listener,va=dt.ha||dt.src;dt.fa&&_e(v.i,dt),Te=Zr.call(va,J)!==!1&&Te}}return Te&&!J.defaultPrevented}function tn(v,M,V){if(typeof v=="function")V&&(v=y(v,V));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:c.setTimeout(v,M||0)}function rn(v){v.g=tn(()=>{v.g=null,v.i&&(v.i=!1,rn(v))},v.l);const M=v.h;v.h=null,v.m.apply(null,M)}class ln extends ee{constructor(M,V){super(),this.m=M,this.l=V,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(v){ee.call(this),this.h=v,this.g={}}T(ye,ee);var it=[];function At(v){R(v.g,function(M,V){this.g.hasOwnProperty(V)&&Ye(M)},v),v.g={}}ye.prototype.N=function(){ye.aa.N.call(this),At(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=c.JSON.stringify,Pt=c.JSON.parse,ct=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function gr(){}gr.prototype.h=null;function wn(v){return v.h||(v.h=v.i())}function Rn(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){te.call(this,"d")}T(dr,te);function Nt(){te.call(this,"c")}T(Nt,te);var wt={},sr=null;function Qr(){return sr=sr||new Tt}wt.La="serverreachability";function Mr(v){te.call(this,wt.La,v)}T(Mr,te);function Xr(v){const M=Qr();bt(M,new Mr(M))}wt.STAT_EVENT="statevent";function Mn(v,M){te.call(this,wt.STAT_EVENT,v),this.stat=M}T(Mn,te);function Jt(v){const M=Qr();bt(M,new Mn(M,v))}wt.Ma="timingevent";function pa(v,M){te.call(this,wt.Ma,v),this.size=M}T(pa,te);function cn(v,M){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},M)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function ti(v,M,V,J,Te,$e){v.info(function(){if(v.g)if($e)for(var dt="",Zr=$e.split("&"),va=0;va<Zr.length;va++){var vr=Zr[va].split("=");if(1<vr.length){var Ha=vr[0];vr=vr[1];var Ga=Ha.split("_");dt=2<=Ga.length&&Ga[1]=="type"?dt+(Ha+"="+vr+"&"):dt+(Ha+"=redacted&")}}else dt=null;else dt=$e;return"XMLHTTP REQ ("+J+") [attempt "+Te+"]: "+M+`
`+V+`
`+dt})}function wr(v,M,V,J,Te,$e,dt){v.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Te+"]: "+M+`
`+V+`
`+$e+" "+dt})}function un(v,M,V,J){v.info(function(){return"XMLHTTP TEXT ("+M+"): "+Qn(v,V)+(J?" "+J:"")})}function Va(v,M){v.info(function(){return"TIMEOUT: "+M})}En.prototype.info=function(){};function Qn(v,M){if(!v.g)return M;if(!M)return null;try{var V=JSON.parse(M);if(V){for(v=0;v<V.length;v++)if(Array.isArray(V[v])){var J=V[v];if(!(2>J.length)){var Te=J[1];if(Array.isArray(Te)&&!(1>Te.length)){var $e=Te[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var dt=1;dt<Te.length;dt++)Te[dt]=""}}}}return jt(V)}catch{return M}}var Fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function mi(){}T(mi,gr),mi.prototype.g=function(){return new XMLHttpRequest},mi.prototype.i=function(){return{}},Yr=new mi;function Fa(v,M,V,J){this.j=v,this.i=M,this.l=V,this.R=J||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Os}function Os(){this.i=null,this.g="",this.h=!1}var is={},gi={};function St(v,M,V){v.L=1,v.v=He($t(M)),v.m=V,v.P=!0,ue(v,null)}function ue(v,M){v.F=Date.now(),Kt(v),v.A=$t(v.v);var V=v.A,J=v.R;Array.isArray(J)||(J=[String(J)]),Ms(V.i,"t",J),v.C=0,V=v.j.J,v.h=new Os,v.g=z1(v.j,V?M:null,!v.m),0<v.O&&(v.M=new ln(y(v.Y,v,v.g),v.O)),M=v.U,V=v.g,J=v.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(it[0]=Te.toString()),Te=it);for(var $e=0;$e<Te.length;$e++){var dt=st(V,Te[$e],J||M.handleEvent,!1,M.h||M);if(!dt)break;M.g[dt.key]=dt}M=v.H?A(v.H):{},v.m?(v.u||(v.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,M)):(v.u="GET",v.g.ea(v.A,v.u,null,M)),Xr(),ti(v.i,v.u,v.A,v.l,v.R,v.m)}Fa.prototype.ca=function(v){v=v.target;const M=this.M;M&&Ai(v)==3?M.j():this.Y(v)},Fa.prototype.Y=function(v){try{if(v==this.g)e:{const Ga=Ai(this.g);var M=this.g.Ba();const wc=this.g.Z();if(!(3>Ga)&&(Ga!=3||this.g&&(this.h.h||this.g.oa()||zu(this.g)))){this.J||Ga!=4||M==7||(M==8||0>=wc?Xr(3):Xr(2)),dn(this);var V=this.g.Z();this.X=V;t:if(Ke(this)){var J=zu(this.g);v="";var Te=J.length,$e=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),qr(this);var dt="";break t}this.h.i=new c.TextDecoder}for(M=0;M<Te;M++)this.h.h=!0,v+=this.h.i.decode(J[M],{stream:!($e&&M==Te-1)});J.length=0,this.h.g+=v,this.C=0,dt=this.h.g}else dt=this.g.oa();if(this.o=V==200,wr(this.i,this.u,this.A,this.l,this.R,Ga,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Zr,va=this.g;if((Zr=va.g?va.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Zr)){var vr=Zr;break t}}vr=null}if(V=vr)un(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cr(this,V);else{this.o=!1,this.s=3,Jt(12),hn(this),qr(this);break e}}if(this.P){V=!0;let zi;for(;!this.J&&this.C<dt.length;)if(zi=ot(this,dt),zi==gi){Ga==4&&(this.s=4,Jt(14),V=!1),un(this.i,this.l,null,"[Incomplete Response]");break}else if(zi==is){this.s=4,Jt(15),un(this.i,this.l,dt,"[Invalid Chunk]"),V=!1;break}else un(this.i,this.l,zi,null),Cr(this,zi);if(Ke(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ga!=4||dt.length!=0||this.h.h||(this.s=1,Jt(16),V=!1),this.o=this.o&&V,!V)un(this.i,this.l,dt,"[Invalid Chunked Response]"),hn(this),qr(this);else if(0<dt.length&&!this.W){this.W=!0;var Ha=this.j;Ha.g==this&&Ha.ba&&!Ha.M&&(Ha.j.info("Great, no buffering proxy detected. Bytes received: "+dt.length),Xf(Ha),Ha.M=!0,Jt(11))}}else un(this.i,this.l,dt,null),Cr(this,dt);Ga==4&&hn(this),this.o&&!this.J&&(Ga==4?B1(this.j,this):(this.o=!1,Kt(this)))}else I1(this.g),V==400&&0<dt.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),hn(this),qr(this)}}}catch{}finally{}};function Ke(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function ot(v,M){var V=v.C,J=M.indexOf(`
`,V);return J==-1?gi:(V=Number(M.substring(V,J)),isNaN(V)?is:(J+=1,J+V>M.length?gi:(M=M.slice(J,J+V),v.C=J+V,M)))}Fa.prototype.cancel=function(){this.J=!0,hn(this)};function Kt(v){v.S=Date.now()+v.I,hr(v,v.I)}function hr(v,M){if(v.B!=null)throw Error("WatchDog timer not null");v.B=cn(y(v.ba,v),M)}function dn(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Fa.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Va(this.i,this.A),this.L!=2&&(Xr(),Jt(17)),hn(this),this.s=2,qr(this)):hr(this,this.S-v)};function qr(v){v.j.G==0||v.J||B1(v.j,v)}function hn(v){dn(v);var M=v.M;M&&typeof M.ma=="function"&&M.ma(),v.M=null,At(v.U),v.g&&(M=v.g,v.g=null,M.abort(),M.ma())}function Cr(v,M){try{var V=v.j;if(V.G!=0&&(V.g==v||qa(V.h,v))){if(!v.K&&qa(V.h,v)&&V.G==3){try{var J=V.Da.g.parse(M)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Te=J;if(Te[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<v.F)xc(V),vc(V);else break e;Qf(V),Jt(18)}}else V.za=Te[1],0<V.za-V.T&&37500>Te[2]&&V.F&&V.v==0&&!V.C&&(V.C=cn(y(V.Za,V),6e3));if(1>=io(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else cl(V,11)}else if((v.K||V.g==v)&&xc(V),!I(M))for(Te=V.Da.g.parse(M),M=0;M<Te.length;M++){let vr=Te[M];if(V.T=vr[0],vr=vr[1],V.G==2)if(vr[0]=="c"){V.K=vr[1],V.ia=vr[2];const Ha=vr[3];Ha!=null&&(V.la=Ha,V.j.info("VER="+V.la));const Ga=vr[4];Ga!=null&&(V.Aa=Ga,V.j.info("SVER="+V.Aa));const wc=vr[5];wc!=null&&typeof wc=="number"&&0<wc&&(J=1.5*wc,V.L=J,V.j.info("backChannelRequestTimeoutMs_="+J)),J=V;const zi=v.g;if(zi){const qu=zi.g?zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qu){var $e=J.h;$e.g||qu.indexOf("spdy")==-1&&qu.indexOf("quic")==-1&&qu.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(q($e,$e.h),$e.h=null))}if(J.D){const ul=zi.g?zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ul&&(J.ya=ul,ve(J.I,J.D,ul))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-v.F,V.j.info("Handshake RTT: "+V.R+"ms")),J=V;var dt=v;if(J.qa=U1(J,J.J?J.ia:null,J.W),dt.K){ge(J.h,dt);var Zr=dt,va=J.L;va&&(Zr.I=va),Zr.B&&(dn(Zr),Kt(Zr)),J.g=dt}else D1(J);0<V.i.length&&x0(V)}else vr[0]!="stop"&&vr[0]!="close"||cl(V,7);else V.G==3&&(vr[0]=="stop"||vr[0]=="close"?vr[0]=="stop"?cl(V,7):Wf(V):vr[0]!="noop"&&V.l&&V.l.ta(vr),V.v=0)}}Xr(4)}catch{}}var Is=class{constructor(v,M){this.g=v,this.map=M}};function ss(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ao(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function io(v){return v.h?1:v.g?v.g.size:0}function qa(v,M){return v.h?v.h==M:v.g?v.g.has(M):!1}function q(v,M){v.g?v.g.add(M):v.h=M}function ge(v,M){v.h&&v.h==M?v.h=null:v.g&&v.g.has(M)&&v.g.delete(M)}ss.prototype.cancel=function(){if(this.i=Ae(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Ae(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let M=v.i;for(const V of v.g.values())M=M.concat(V.D);return M}return _(v.i)}function Ce(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var M=[],V=v.length,J=0;J<V;J++)M.push(v[J]);return M}M=[],V=0;for(J in v)M[V++]=v[J];return M}function ut(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var M=[];v=v.length;for(var V=0;V<v;V++)M.push(V);return M}M=[],V=0;for(const J in v)M[V++]=J;return M}}}function Dt(v,M){if(v.forEach&&typeof v.forEach=="function")v.forEach(M,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,M,void 0);else for(var V=ut(v),J=Ce(v),Te=J.length,$e=0;$e<Te;$e++)M.call(void 0,J[$e],V&&V[$e],v)}var qt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tr(v,M){if(v){v=v.split("&");for(var V=0;V<v.length;V++){var J=v[V].indexOf("="),Te=null;if(0<=J){var $e=v[V].substring(0,J);Te=v[V].substring(J+1)}else $e=v[V];M($e,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Qt(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Qt){this.h=v.h,ri(this,v.j),this.o=v.o,this.g=v.g,or(this,v.s),this.l=v.l;var M=v.i,V=new ya;V.i=M.i,M.g&&(V.g=new Map(M.g),V.h=M.h),oe(this,V),this.m=v.m}else v&&(M=String(v).match(qt))?(this.h=!1,ri(this,M[1]||"",!0),this.o=Je(M[2]||""),this.g=Je(M[3]||"",!0),or(this,M[4]),this.l=Je(M[5]||"",!0),oe(this,M[6]||"",!0),this.m=Je(M[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}Qt.prototype.toString=function(){var v=[],M=this.j;M&&v.push(nt(M,cr,!0),":");var V=this.g;return(V||M=="file")&&(v.push("//"),(M=this.o)&&v.push(nt(M,cr,!0),"@"),v.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&v.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(nt(V,V.charAt(0)=="/"?ka:ma,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",nt(V,ga)),v.join("")};function $t(v){return new Qt(v)}function ri(v,M,V){v.j=V?Je(M,!0):M,v.j&&(v.j=v.j.replace(/:$/,""))}function or(v,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);v.s=M}else v.s=null}function oe(v,M,V){M instanceof ya?(v.i=M,k1(v.i,v.h)):(V||(M=nt(M,Rs)),v.i=new ya(M,v.h))}function ve(v,M,V){v.i.set(M,V)}function He(v){return ve(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Je(v,M){return v?M?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function nt(v,M,V){return typeof v=="string"?(v=encodeURI(v).replace(M,br),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function br(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var cr=/[#\/\?@]/g,ma=/[#\?:]/g,ka=/[#\?]/g,Rs=/[#\?@]/g,ga=/#/g;function ya(v,M){this.h=this.g=null,this.i=v||null,this.j=!!M}function Xn(v){v.g||(v.g=new Map,v.h=0,v.i&&tr(v.i,function(M,V){v.add(decodeURIComponent(M.replace(/\+/g," ")),V)}))}t=ya.prototype,t.add=function(v,M){Xn(this),this.i=null,v=os(this,v);var V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(M),this.h+=1,this};function Or(v,M){Xn(v),M=os(v,M),v.g.has(M)&&(v.i=null,v.h-=v.g.get(M).length,v.g.delete(M))}function Co(v,M){return Xn(v),M=os(v,M),v.g.has(M)}t.forEach=function(v,M){Xn(this),this.g.forEach(function(V,J){V.forEach(function(Te){v.call(M,Te,J,this)},this)},this)},t.na=function(){Xn(this);const v=Array.from(this.g.values()),M=Array.from(this.g.keys()),V=[];for(let J=0;J<M.length;J++){const Te=v[J];for(let $e=0;$e<Te.length;$e++)V.push(M[J])}return V},t.V=function(v){Xn(this);let M=[];if(typeof v=="string")Co(this,v)&&(M=M.concat(this.g.get(os(this,v))));else{v=Array.from(this.g.values());for(let V=0;V<v.length;V++)M=M.concat(v[V])}return M},t.set=function(v,M){return Xn(this),this.i=null,v=os(this,v),Co(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[M]),this.h+=1,this},t.get=function(v,M){return v?(v=this.V(v),0<v.length?String(v[0]):M):M};function Ms(v,M,V){Or(v,M),0<V.length&&(v.i=null,v.g.set(os(v,M),_(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],M=Array.from(this.g.keys());for(var V=0;V<M.length;V++){var J=M[V];const $e=encodeURIComponent(String(J)),dt=this.V(J);for(J=0;J<dt.length;J++){var Te=$e;dt[J]!==""&&(Te+="="+encodeURIComponent(String(dt[J]))),v.push(Te)}}return this.i=v.join("&")};function os(v,M){return M=String(M),v.j&&(M=M.toLowerCase()),M}function k1(v,M){M&&!v.j&&(Xn(v),v.i=null,v.g.forEach(function(V,J){var Te=J.toLowerCase();J!=Te&&(Or(this,J),Ms(this,Te,V))},v)),v.j=M}function Hf(v,M){const V=new En;if(c.Image){const J=new Image;J.onload=x(Ui,V,"TestLoadImage: loaded",!0,M,J),J.onerror=x(Ui,V,"TestLoadImage: error",!1,M,J),J.onabort=x(Ui,V,"TestLoadImage: abort",!1,M,J),J.ontimeout=x(Ui,V,"TestLoadImage: timeout",!1,M,J),c.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=v}else M(!1)}function C1(v,M){const V=new En,J=new AbortController,Te=setTimeout(()=>{J.abort(),Ui(V,"TestPingServer: timeout",!1,M)},1e4);fetch(v,{signal:J.signal}).then($e=>{clearTimeout(Te),$e.ok?Ui(V,"TestPingServer: ok",!0,M):Ui(V,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Te),Ui(V,"TestPingServer: error",!1,M)})}function Ui(v,M,V,J,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),J(V)}catch{}}function so(){this.g=new ct}function Gf(v,M,V){const J=V||"";try{Dt(v,function(Te,$e){let dt=Te;h(Te)&&(dt=jt(Te)),M.push(J+$e+"="+encodeURIComponent(dt))})}catch(Te){throw M.push(J+"type="+encodeURIComponent("_badmap")),Te}}function Oo(v){this.l=v.Ub||null,this.j=v.eb||!1}T(Oo,gr),Oo.prototype.g=function(){return new ls(this.l,this.j)},Oo.prototype.i=(function(v){return function(){return v}})({});function ls(v,M){Tt.call(this),this.D=v,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ls,Tt),t=ls.prototype,t.open=function(v,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=M,this.readyState=1,pc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(M.body=v),(this.D||c).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,pc(this)),this.g&&(this.readyState=3,pc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;y0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function y0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var M=v.value?v.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!v.done}))&&(this.response=this.responseText+=M)}v.done?Io(this):pc(this),this.readyState==3&&y0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Io(this))},t.Qa=function(v){this.g&&(this.response=v,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(v){v.readyState=4,v.l=null,v.j=null,v.v=null,pc(v)}t.setRequestHeader=function(v,M){this.u.append(v,M)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],M=this.h.entries();for(var V=M.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=M.next();return v.join(`\r
`)};function pc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function $u(v){let M="";return R(v,function(V,J){M+=J,M+=":",M+=V,M+=`\r
`}),M}function mc(v,M,V){e:{for(J in V){var J=!1;break e}J=!0}J||(V=$u(V),typeof v=="string"?V!=null&&encodeURIComponent(String(V)):ve(v,M,V))}function Pn(v){Tt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Pn,Tt);var yi=/^https?$/i,ll=["POST","PUT"];t=Pn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,M,V,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);M=M?M.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?wn(this.o):wn(Yr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(M,String(v),!0),this.B=!1}catch($e){Uu(this,$e);return}if(v=V||"",V=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Te in J)V.set(Te,J[Te]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const $e of J.keys())V.set($e,J.get($e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(V.keys()).find($e=>$e.toLowerCase()=="content-type"),Te=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ll,M,void 0))||J||Te||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,dt]of V)this.g.setRequestHeader($e,dt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{v0(this),this.u=!0,this.g.send(v),this.u=!1}catch($e){Uu(this,$e)}};function Uu(v,M){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=M,v.m=5,gc(v),yc(v)}function gc(v){v.A||(v.A=!0,bt(v,"complete"),bt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,bt(this,"complete"),bt(this,"abort"),yc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yc(this,!0)),Pn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?O1(this):this.bb())},t.bb=function(){O1(this)};function O1(v){if(v.h&&typeof s<"u"&&(!v.v[1]||Ai(v)!=4||v.Z()!=2)){if(v.u&&Ai(v)==4)tn(v.Ea,0,v);else if(bt(v,"readystatechange"),Ai(v)==4){v.h=!1;try{const dt=v.Z();e:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var V;if(!(V=M)){var J;if(J=dt===0){var Te=String(v.D).match(qt)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),J=!yi.test(Te?Te.toLowerCase():"")}V=J}if(V)bt(v,"complete"),bt(v,"success");else{v.m=6;try{var $e=2<Ai(v)?v.g.statusText:""}catch{$e=""}v.l=$e+" ["+v.Z()+"]",gc(v)}}finally{yc(v)}}}}function yc(v,M){if(v.g){v0(v);const V=v.g,J=v.v[0]?()=>{}:null;v.g=null,v.v=null,M||bt(v,"ready");try{V.onreadystatechange=J}catch{}}}function v0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ai(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var M=this.g.responseText;return v&&M.indexOf(v)==0&&(M=M.substring(v.length)),Pt(M)}};function zu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function I1(v){const M={};v=(v.g&&2<=Ai(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<v.length;J++){if(I(v[J]))continue;var V=B(v[J]);const Te=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const $e=M[Te]||[];M[Te]=$e,$e.push(V)}N(M,function(J){return J.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vu(v,M,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||M}function R1(v){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vu("baseRetryDelayMs",5e3,v),this.cb=Vu("retryDelaySeedMs",1e4,v),this.Wa=Vu("forwardChannelMaxRetries",2,v),this.wa=Vu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ss(v&&v.concurrentRequestLimit),this.Da=new so,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=R1.prototype,t.la=8,t.G=1,t.connect=function(v,M,V,J){Jt(0),this.W=v,this.H=M||{},V&&J!==void 0&&(this.H.OSID=V,this.H.OAID=J),this.F=this.X,this.I=U1(this,null,this.W),x0(this)};function Wf(v){if(M1(v),v.G==3){var M=v.U++,V=$t(v.I);if(ve(V,"SID",v.K),ve(V,"RID",M),ve(V,"TYPE","terminate"),Fu(v,V),M=new Fa(v,v.j,M),M.L=2,M.v=He($t(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(M.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=M.v,V=!0),V||(M.g=z1(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Kt(M)}Yf(v)}function vc(v){v.g&&(Xf(v),v.g.cancel(),v.g=null)}function M1(v){vc(v),v.u&&(c.clearTimeout(v.u),v.u=null),xc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function x0(v){if(!ao(v.h)&&!v.s){v.s=!0;var M=v.Ga;X||me(),ne||(X(),ne=!0),de.add(M,v),v.B=0}}function k4(v,M){return io(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=M.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=cn(y(v.Ga,v,M),$1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const Te=new Fa(this,this.j,v);let $e=this.o;if(this.S&&($e?($e=A($e),$($e,this.S)):$e=this.S),this.m!==null||this.O||(Te.H=$e,$e=null),this.P)e:{for(var M=0,V=0;V<this.i.length;V++){t:{var J=this.i[V];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(M+=J,4096<M){M=V;break e}if(M===4096||V===this.i.length-1){M=V+1;break e}}M=1e3}else M=1e3;M=Kf(this,Te,M),V=$t(this.I),ve(V,"RID",v),ve(V,"CVER",22),this.D&&ve(V,"X-HTTP-Session-Id",this.D),Fu(this,V),$e&&(this.O?M="headers="+encodeURIComponent(String($u($e)))+"&"+M:this.m&&mc(V,this.m,$e)),q(this.h,Te),this.Ua&&ve(V,"TYPE","init"),this.P?(ve(V,"$req",M),ve(V,"SID","null"),Te.T=!0,St(Te,V,null)):St(Te,V,M),this.G=2}}else this.G==3&&(v?P1(this,v):this.i.length==0||ao(this.h)||P1(this))};function P1(v,M){var V;M?V=M.l:V=v.U++;const J=$t(v.I);ve(J,"SID",v.K),ve(J,"RID",V),ve(J,"AID",v.T),Fu(v,J),v.m&&v.o&&mc(J,v.m,v.o),V=new Fa(v,v.j,V,v.B+1),v.m===null&&(V.H=v.o),M&&(v.i=M.D.concat(v.i)),M=Kf(v,V,1e3),V.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),q(v.h,V),St(V,J,M)}function Fu(v,M){v.H&&R(v.H,function(V,J){ve(M,J,V)}),v.l&&Dt({},function(V,J){ve(M,J,V)})}function Kf(v,M,V){V=Math.min(v.i.length,V);var J=v.l?y(v.l.Na,v.l,v):null;e:{var Te=v.i;let $e=-1;for(;;){const dt=["count="+V];$e==-1?0<V?($e=Te[0].g,dt.push("ofs="+$e)):$e=0:dt.push("ofs="+$e);let Zr=!0;for(let va=0;va<V;va++){let vr=Te[va].g;const Ha=Te[va].map;if(vr-=$e,0>vr)$e=Math.max(0,Te[va].g-100),Zr=!1;else try{Gf(Ha,dt,"req"+vr+"_")}catch{J&&J(Ha)}}if(Zr){J=dt.join("&");break e}}}return v=v.i.splice(0,V),M.D=v,J}function D1(v){if(!v.g&&!v.u){v.Y=1;var M=v.Fa;X||me(),ne||(X(),ne=!0),de.add(M,v),v.v=0}}function Qf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=cn(y(v.Fa,v),$1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,L1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=cn(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),vc(this),L1(this))};function Xf(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function L1(v){v.g=new Fa(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var M=$t(v.qa);ve(M,"RID","rpc"),ve(M,"SID",v.K),ve(M,"AID",v.T),ve(M,"CI",v.F?"0":"1"),!v.F&&v.ja&&ve(M,"TO",v.ja),ve(M,"TYPE","xmlhttp"),Fu(v,M),v.m&&v.o&&mc(M,v.m,v.o),v.L&&(v.g.I=v.L);var V=v.g;v=v.ia,V.L=1,V.v=He($t(M)),V.m=null,V.P=!0,ue(V,v)}t.Za=function(){this.C!=null&&(this.C=null,vc(this),Qf(this),Jt(19))};function xc(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function B1(v,M){var V=null;if(v.g==M){xc(v),Xf(v),v.g=null;var J=2}else if(qa(v.h,M))V=M.D,ge(v.h,M),J=1;else return;if(v.G!=0){if(M.o)if(J==1){V=M.m?M.m.length:0,M=Date.now()-M.F;var Te=v.B;J=Qr(),bt(J,new pa(J,V)),x0(v)}else D1(v);else if(Te=M.s,Te==3||Te==0&&0<M.X||!(J==1&&k4(v,M)||J==2&&Qf(v)))switch(V&&0<V.length&&(M=v.h,M.i=M.i.concat(V)),Te){case 1:cl(v,5);break;case 4:cl(v,10);break;case 3:cl(v,6);break;default:cl(v,2)}}}function $1(v,M){let V=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(V*=2),V*M}function cl(v,M){if(v.j.info("Error code "+M),M==2){var V=y(v.fb,v),J=v.Xa;const Te=!J;J=new Qt(J||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ri(J,"https"),He(J),Te?Hf(J.toString(),V):C1(J.toString(),V)}else Jt(2);v.G=0,v.l&&v.l.sa(M),Yf(v),M1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function Yf(v){if(v.G=0,v.ka=[],v.l){const M=Ae(v.h);(M.length!=0||v.i.length!=0)&&(w(v.ka,M),w(v.ka,v.i),v.h.i.length=0,_(v.i),v.i.length=0),v.l.ra()}}function U1(v,M,V){var J=V instanceof Qt?$t(V):new Qt(V);if(J.g!="")M&&(J.g=M+"."+J.g),or(J,J.s);else{var Te=c.location;J=Te.protocol,M=M?M+"."+Te.hostname:Te.hostname,Te=+Te.port;var $e=new Qt(null);J&&ri($e,J),M&&($e.g=M),Te&&or($e,Te),V&&($e.l=V),J=$e}return V=v.D,M=v.ya,V&&M&&ve(J,V,M),ve(J,"VER",v.la),Fu(v,J),J}function z1(v,M,V){if(M&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=v.Ca&&!v.pa?new Pn(new Oo({eb:V})):new Pn(v.pa),M.Ha(v.J),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function V1(){}t=V1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function b0(){}b0.prototype.g=function(v,M){return new Ni(v,M)};function Ni(v,M){Tt.call(this),this.g=new R1(M),this.l=v,this.h=M&&M.messageUrlParams||null,v=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(v?v["X-WebChannel-Content-Type"]=M.messageContentType:v={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(v?v["X-WebChannel-Client-Profile"]=M.va:v={"X-WebChannel-Client-Profile":M.va}),this.g.S=v,(v=M&&M.Sb)&&!I(v)&&(this.g.m=v),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!I(M)&&(this.g.D=M,v=this.h,v!==null&&M in v&&(v=this.h,M in v&&delete v[M])),this.j=new bc(this)}T(Ni,Tt),Ni.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ni.prototype.close=function(){Wf(this.g)},Ni.prototype.o=function(v){var M=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.u&&(V={},V.__data__=jt(v),v=V);M.i.push(new Is(M.Ya++,v)),M.G==3&&x0(M)},Ni.prototype.N=function(){this.g.l=null,delete this.j,Wf(this.g),delete this.g,Ni.aa.N.call(this)};function F1(v){dr.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var M=v.__sm__;if(M){e:{for(const V in M){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,M=M!==null&&v in M?M[v]:void 0),this.data=M}else this.data=v}T(F1,dr);function q1(){Nt.call(this),this.status=1}T(q1,Nt);function bc(v){this.g=v}T(bc,V1),bc.prototype.ua=function(){bt(this.g,"a")},bc.prototype.ta=function(v){bt(this.g,new F1(v))},bc.prototype.sa=function(v){bt(this.g,new q1)},bc.prototype.ra=function(){bt(this.g,"b")},b0.prototype.createWebChannel=b0.prototype.g,Ni.prototype.send=Ni.prototype.o,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,OV=function(){return new b0},CV=function(){return Qr()},kV=wt,GT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Bv=Fr,Sn.COMPLETE="complete",jV=Sn,Rn.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,tm=Rn,Pn.prototype.listenOnce=Pn.prototype.L,Pn.prototype.getLastError=Pn.prototype.Ka,Pn.prototype.getLastErrorCode=Pn.prototype.Ba,Pn.prototype.getStatus=Pn.prototype.Z,Pn.prototype.getResponseJson=Pn.prototype.Oa,Pn.prototype.getResponseText=Pn.prototype.oa,Pn.prototype.send=Pn.prototype.ea,Pn.prototype.setWithCredentials=Pn.prototype.Ha,EV=Pn}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});const kO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Si=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new h8("@firebase/firestore");function oh(){return Ud.logLevel}function Xe(t,...e){if(Ud.logLevel<=Er.DEBUG){const r=e.map(N8);Ud.debug(`Firestore (${Af}): ${t}`,...r)}}function ca(t,...e){if(Ud.logLevel<=Er.ERROR){const r=e.map(N8);Ud.error(`Firestore (${Af}): ${t}`,...r)}}function Dm(t,...e){if(Ud.logLevel<=Er.WARN){const r=e.map(N8);Ud.warn(`Firestore (${Af}): ${t}`,...r)}}function N8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t="Unexpected state"){const e=`FIRESTORE (${Af}) INTERNAL ASSERTION FAILED: `+t;throw ca(e),new Error(e)}function It(t,e){t||Et()}function Ot(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Eo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hte{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Si.UNAUTHENTICATED)))}shutdown(){}}class Wte{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){It(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new So;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new So,e.enqueueRetryable((()=>a(this.currentUser)))};const s=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new So)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(It(typeof n.accessToken=="string"),new Hte(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string"),new Si(e)}}class Kte{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qte{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Kte(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Si.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Xte{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){It(this.o===void 0);const n=i=>{i.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.R;return this.R=i.token,Xe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(It(typeof r.token=="string"),this.R=r.token,new Xte(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zte(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=Zte(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function ir(t,e){return t<e?-1:t>e?1:0}function Rh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function RV(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new lt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new lt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new lt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Kn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ir(this.nanoseconds,e.nanoseconds):ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Kn(0,0))}static max(){return new Lt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,r,n){r===void 0?r=0:r>e.length&&Et(),n===void 0?n=e.length-r:n>e.length-r&&Et(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Lm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Lm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),s=r.get(a);if(i<s)return-1;if(i>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class $r extends Lm{construct(e,r,n){return new $r(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new lt(Ue.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new $r(r)}static emptyPath(){return new $r([])}}const Jte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends Lm{construct(e,r,n){return new Wn(e,r,n)}static isValidIdentifier(e){return Jte.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wn(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new lt(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new lt(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new lt(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(s=!s,a++):c!=="."||s?(n+=c,a++):(i(),a++)}if(i(),s)throw new lt(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wn(r)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.path=e}static fromPath(e){return new vt($r.fromString(e))}static fromName(e){return new vt($r.fromString(e).popFirst(5))}static empty(){return new vt($r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$r.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return $r.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new $r(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function WT(t){return t.fields.find((e=>e.kind===2))}function md(t){return t.fields.filter((e=>e.kind!==2))}lx.UNKNOWN_ID=-1;class $v{constructor(e,r){this.fieldPath=e,this.kind=r}}class Bm{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Bm(0,Es.min())}}function MV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Lt.fromTimestamp(n===1e9?new Kn(r+1,0):new Kn(r,n));return new Es(a,vt.empty(),e)}function PV(t){return new Es(t.readTime,t.key,-1)}class Es{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Es(Lt.min(),vt.empty(),-1)}static max(){return new Es(Lt.max(),vt.empty(),-1)}}function E8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=vt.comparator(t.documentKey,e.documentKey),r!==0?r:ir(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t){if(t.code!==Ue.FAILED_PRECONDITION||t.message!==DV)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ke(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof ke?r:ke.resolve(r)}catch(r){return ke.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):ke.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):ke.reject(r)}static resolve(e){return new ke(((r,n)=>{r(e)}))}static reject(e){return new ke(((r,n)=>{n(e)}))}static waitFor(e){return new ke(((r,n)=>{let a=0,i=0,s=!1;e.forEach((c=>{++a,c.next((()=>{++i,s&&i===a&&r()}),(d=>n(d)))})),s=!0,i===a&&r()}))}static or(e){let r=ke.resolve(!1);for(const n of e)r=r.next((a=>a?ke.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new ke(((n,a)=>{const i=e.length,s=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{s[h]=p,++c,c===i&&n(s)}),(p=>a(p)))}}))}static doWhile(e,r){return new ke(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new So,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new um(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=j8(n.target.error);this.V.reject(new um(e,a))}}static open(e,r,n,a){try{return new e2(r,e.transaction(a,n))}catch(i){throw new um(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new tre(r)}}class yu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,yu.S(La())===12.2&&ca("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),xd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Fz())return!1;if(yu.v())return!0;const e=La(),r=yu.S(e),n=0<r&&r<10,a=BV(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Xe("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const s=i.target.result;r(s)},a.onblocked=()=>{n(new um(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const s=i.target.error;s.name==="VersionError"?n(new lt(Ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new lt(Ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new um(e,s))},a.onupgradeneeded=i=>{Xe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const s=i.target.result;this.p.O(s,a.transaction,i.oldVersion,this.version).next((()=>{Xe("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=e2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),ke.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&s<3;if(Xe("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ere{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xd(this.B.delete())}}class um extends lt{constructor(e,r){super(Ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Cu(t){return t.name==="IndexedDbTransactionError"}class tre{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Xe("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xd(n)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),xd(this.store.add(e))}get(e){return xd(this.store.get(e)).next((r=>(r===void 0&&(r=null),Xe("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),xd(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),xd(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new ke(((s,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{s(d.target.result)}}))}{const i=this.cursor(n),s=[];return this.W(i,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new ke(((a,i)=>{n.onerror=s=>{i(s.target.error)},n.onsuccess=s=>{a(s.target.result)}}))}j(e,r){Xe("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,s,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new ke(((n,a)=>{r.onerror=i=>{const s=j8(i.target.error);a(s)},r.onsuccess=i=>{const s=i.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,r){const n=[];return new ke(((a,i)=>{e.onerror=s=>{i(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void a();const d=new ere(c),h=r(c.primaryKey,c.value,d);if(h instanceof ke){const p=h.catch((m=>(d.done(),ke.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>ke.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function xd(t){return new ke(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=j8(n.target.error);r(a)}}))}let CO=!1;function j8(t){const e=yu.S(La());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CO||(CO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class rre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Xe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Xe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Cu(r)?Xe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ku(r)}await this.X(6e4)}))}}class nre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return ke.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return Xe("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,a).next((c=>{a-=c,n.add(s)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const s=i.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(a,i))).next((c=>(Xe("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const s=PV(i);E8(s,n)>0&&(n=s)})),new Es(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ji.oe=-1;function Qg(t){return t==null}function $m(t){return t===0&&1/t==-1/0}function $V(t){return typeof t=="number"&&Number.isInteger(t)&&!$m(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=OO(e)),e=are(t.get(r),e);return OO(e)}function are(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function OO(t){return t+""}function $o(t){const e=t.length;if(It(e>=2),e===2)return It(t.charAt(0)===""&&t.charAt(1)===""),$r.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const s=t.indexOf("",i);switch((s<0||s>r)&&Et(),t.charAt(s+1)){case"":const c=t.substring(i,s);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,s),a+="\0";break;case"":a+=t.substring(i,s+1);break;default:Et()}i=s+2}return new $r(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t,e){return[t,Pi(e)]}function UV(t,e,r){return[t,Pi(e),r]}const ire={},sre=["prefixPath","collectionGroup","readTime","documentId"],ore=["prefixPath","collectionGroup","documentId"],lre=["collectionGroup","readTime","prefixPath","documentId"],cre=["canonicalId","targetId"],ure=["targetId","path"],dre=["path","targetId"],hre=["collectionId","parent"],fre=["indexId","uid"],pre=["uid","sequenceNumber"],mre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gre=["indexId","uid","orderedDocumentKey"],yre=["userId","collectionPath","documentId"],vre=["userId","collectionPath","largestBatchId"],xre=["userId","collectionGroup","largestBatchId"],zV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bre=[...zV,"documentOverlays"],VV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],FV=VV,k8=[...FV,"indexConfiguration","indexState","indexEntries"],wre=k8,Sre=[...k8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends LV{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Ua(t,e){const r=Ot(t);return yu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function l0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function qV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,r){this.comparator=e,this.root=r||ci.EMPTY}insert(e,r){return new In(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new In(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yy(this.root,e,this.comparator,!0)}}class Yy{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??ci.RED,this.left=a??ci.EMPTY,this.right=i??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new ci(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ci.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(e,r,n,a,i){return this}insert(e,r,n){return new ci(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.comparator=e,this.data=new In(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new MO(this.data.getIterator())}getIteratorFrom(e){return new MO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new xn(this.comparator);return r.data=e,r}}class MO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Q0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(Wn.comparator)}static empty(){return new es([])}unionWith(e){let r=new xn(Wn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new es(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Rh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new HV("Invalid base64 string: "+i):i}})(e);return new fa(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i})(e);return new fa(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fa.EMPTY_BYTE_STRING=new fa("");const _re=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zl(t){if(It(!!t),typeof t=="string"){let e=0;const r=_re.exec(t);if(It(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zn(t.seconds),nanos:zn(t.nanos)}}function zn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Su(t){return typeof t=="string"?fa.fromBase64String(t):fa.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function O8(t){const e=t.mapValue.fields.__previous_value__;return C8(e)?O8(e):e}function Um(t){const e=Zl(t.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tre{constructor(e,r,n,a,i,s,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class zd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new zd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zv={nullValue:"NULL_VALUE"};function Vd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?C8(t)?4:GV(t)?9007199254740991:t2(t)?10:11:Et()}function Xo(t,e){if(t===e)return!0;const r=Vd(t);if(r!==Vd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Um(t).isEqual(Um(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=Zl(a.timestampValue),c=Zl(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Su(a.bytesValue).isEqual(Su(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return zn(a.geoPointValue.latitude)===zn(i.geoPointValue.latitude)&&zn(a.geoPointValue.longitude)===zn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return zn(a.integerValue)===zn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=zn(a.doubleValue),c=zn(i.doubleValue);return s===c?$m(s)===$m(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Rh(t.arrayValue.values||[],e.arrayValue.values||[],Xo);case 10:case 11:return(function(a,i){const s=a.mapValue.fields||{},c=i.mapValue.fields||{};if(RO(s)!==RO(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!Xo(s[d],c[d])))return!1;return!0})(t,e);default:return Et()}}function zm(t,e){return(t.values||[]).find((r=>Xo(r,e)))!==void 0}function _u(t,e){if(t===e)return 0;const r=Vd(t),n=Vd(e);if(r!==n)return ir(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ir(t.booleanValue,e.booleanValue);case 2:return(function(i,s){const c=zn(i.integerValue||i.doubleValue),d=zn(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return PO(t.timestampValue,e.timestampValue);case 4:return PO(Um(t),Um(e));case 5:return ir(t.stringValue,e.stringValue);case 6:return(function(i,s){const c=Su(i),d=Su(s);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,s){const c=i.split("/"),d=s.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=ir(c[h],d[h]);if(p!==0)return p}return ir(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,s){const c=ir(zn(i.latitude),zn(s.latitude));return c!==0?c:ir(zn(i.longitude),zn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return DO(t.arrayValue,e.arrayValue);case 10:return(function(i,s){var c,d,h,p;const m=i.fields||{},y=s.fields||{},x=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,_=ir(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return _!==0?_:DO(x,T)})(t.mapValue,e.mapValue);case 11:return(function(i,s){if(i===su.mapValue&&s===su.mapValue)return 0;if(i===su.mapValue)return 1;if(s===su.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=s.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=ir(d[m],p[m]);if(y!==0)return y;const x=_u(c[d[m]],h[p[m]]);if(x!==0)return x}return ir(d.length,p.length)})(t.mapValue,e.mapValue);default:throw Et()}}function PO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ir(t,e);const r=Zl(t),n=Zl(e),a=ir(r.seconds,n.seconds);return a!==0?a:ir(r.nanos,n.nanos)}function DO(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=_u(r[a],n[a]);if(i)return i}return ir(r.length,n.length)}function Mh(t){return QT(t)}function QT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Zl(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Su(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return vt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=QT(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${QT(r.fields[s])}`;return a+"}"})(t.mapValue):Et()}function Vm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function XT(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function LO(t){return!!t&&"nullValue"in t}function BO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vv(t){return!!t&&"mapValue"in t}function t2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function dm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return l0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=dm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=dm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function GV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const WV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Are(t){return"nullValue"in t?zv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vm(zd.empty(),vt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?t2(t)?WV:{mapValue:{}}:Et()}function Nre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vm(zd.empty(),vt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?WV:"mapValue"in t?t2(t)?{mapValue:{}}:su:Et()}function $O(t,e){const r=_u(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function UO(t,e){const r=_u(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Vv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=dm(r)}setAll(e){let r=Wn.emptyPath(),n={},a=[];e.forEach(((s,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}s?n[c.lastSegment()]=dm(s):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());Vv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];Vv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){l0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new di(dm(this.value))}}function KV(t){const e=[];return l0(t.fields,((r,n)=>{const a=new Wn([r]);if(Vv(n)){const i=KV(n.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)})),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,r,n,a,i,s,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Vn(e,0,Lt.min(),Lt.min(),Lt.min(),di.empty(),0)}static newFoundDocument(e,r,n,a){return new Vn(e,1,r,Lt.min(),n,a,0)}static newNoDocument(e,r){return new Vn(e,2,r,Lt.min(),Lt.min(),di.empty(),0)}static newUnknownDocument(e,r){return new Vn(e,3,r,Lt.min(),Lt.min(),di.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r){this.position=e,this.inclusive=r}}function zO(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?n=vt.comparator(vt.fromName(s.referenceValue),r.key):n=_u(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function VO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Xo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ere(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QV=class{};class jr extends QV{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new jre(e,r,n):r==="array-contains"?new Ore(e,n):r==="in"?new tF(e,n):r==="not-in"?new Ire(e,n):r==="array-contains-any"?new Rre(e,n):new jr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new kre(e,n):new Cre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(_u(r,this.value)):r!==null&&Vd(this.value)===Vd(r)&&this.matchesComparison(_u(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends QV{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new on(e,r)}matches(e){return Dh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dh(t){return t.op==="and"}function YT(t){return t.op==="or"}function I8(t){return XV(t)&&Dh(t)}function XV(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function ZT(t){if(t instanceof jr)return t.field.canonicalString()+t.op.toString()+Mh(t.value);if(I8(t))return t.filters.map((e=>ZT(e))).join(",");{const e=t.filters.map((r=>ZT(r))).join(",");return`${t.op}(${e})`}}function YV(t,e){return t instanceof jr?(function(n,a){return a instanceof jr&&n.op===a.op&&n.field.isEqual(a.field)&&Xo(n.value,a.value)})(t,e):t instanceof on?(function(n,a){return a instanceof on&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,s,c)=>i&&YV(s,a.filters[c])),!0):!1})(t,e):void Et()}function ZV(t,e){const r=t.filters.concat(e);return on.create(r,t.op)}function JV(t){return t instanceof jr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Mh(r.value)}`})(t):t instanceof on?(function(r){return r.op.toString()+" {"+r.getFilters().map(JV).join(" ,")+"}"})(t):"Filter"}class jre extends jr{constructor(e,r,n){super(e,r,n),this.key=vt.fromName(n.referenceValue)}matches(e){const r=vt.comparator(e.key,this.key);return this.matchesComparison(r)}}class kre extends jr{constructor(e,r){super(e,"in",r),this.keys=eF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Cre extends jr{constructor(e,r){super(e,"not-in",r),this.keys=eF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function eF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>vt.fromName(n.referenceValue)))}class Ore extends jr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Fm(r)&&zm(r.arrayValue,this.value)}}class tF extends jr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&zm(this.value.arrayValue,r)}}class Ire extends jr{constructor(e,r){super(e,"not-in",r)}matches(e){if(zm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!zm(this.value.arrayValue,r)}}class Rre extends jr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Fm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>zm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mre{constructor(e,r=null,n=[],a=[],i=null,s=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=c,this.ue=null}}function JT(t,e=null,r=[],n=[],a=null,i=null,s=null){return new Mre(t,e,r,n,a,i,s)}function Fd(t){const e=Ot(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>ZT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),Qg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Mh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Mh(n))).join(",")),e.ue=r}return e.ue}function Xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Ere(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!YV(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VO(t.startAt,e.startAt)&&VO(t.endAt,e.endAt)}function cx(t){return vt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ux(t,e){return t.filters.filter((r=>r instanceof jr&&r.field.isEqual(e)))}function FO(t,e,r){let n=zv,a=!0;for(const i of ux(t,e)){let s=zv,c=!0;switch(i.op){case"<":case"<=":s=Are(i.value);break;case"==":case"in":case">=":s=i.value;break;case">":s=i.value,c=!1;break;case"!=":case"not-in":s=zv}$O({value:n,inclusive:a},{value:s,inclusive:c})<0&&(n=s,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const s=r.position[i];$O({value:n,inclusive:a},{value:s,inclusive:r.inclusive})<0&&(n=s,a=r.inclusive);break}}return{value:n,inclusive:a}}function qO(t,e,r){let n=su,a=!0;for(const i of ux(t,e)){let s=su,c=!0;switch(i.op){case">=":case">":s=Nre(i.value),c=!1;break;case"==":case"in":case"<=":s=i.value;break;case"<":s=i.value,c=!1;break;case"!=":case"not-in":s=su}UO({value:n,inclusive:a},{value:s,inclusive:c})>0&&(n=s,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const s=r.position[i];UO({value:n,inclusive:a},{value:s,inclusive:r.inclusive})>0&&(n=s,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,r=null,n=[],a=[],i=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rF(t,e,r,n,a,i,s,c){return new Nf(t,e,r,n,a,i,s,c)}function Yg(t){return new Nf(t)}function HO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nF(t){return t.collectionGroup!==null}function hm(t){const e=Ot(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new xn(Wn.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qm(i,n))})),r.has(Wn.keyField().canonicalString())||e.ce.push(new qm(Wn.keyField(),n))}return e.ce}function _s(t){const e=Ot(t);return e.le||(e.le=Pre(e,hm(t))),e.le}function Pre(t,e){if(t.limitType==="F")return JT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new qm(a.field,i)}));const r=t.endAt?new Ph(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ph(t.startAt.position,t.startAt.inclusive):null;return JT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function eA(t,e){const r=t.filters.concat([e]);return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function dx(t,e,r){return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function r2(t,e){return Xg(_s(t),_s(e))&&t.limitType===e.limitType}function aF(t){return`${Fd(_s(t))}|lt:${t.limitType}`}function lh(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>JV(a))).join(", ")}]`),Qg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Mh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Mh(a))).join(",")),`Target(${n})`})(_s(t))}; limitType=${t.limitType})`}function Zg(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):vt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of hm(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(s,c,d){const h=zO(s,c,d);return s.inclusive?h<=0:h<0})(n.startAt,hm(n),a)||n.endAt&&!(function(s,c,d){const h=zO(s,c,d);return s.inclusive?h>=0:h>0})(n.endAt,hm(n),a))})(t,e)}function iF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sF(t){return(e,r)=>{let n=!1;for(const a of hm(t)){const i=Dre(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Dre(t,e,r){const n=t.field.isKeyField()?vt.comparator(e.key,r.key):(function(i,s,c){const d=s.data.field(i),h=c.data.field(i);return d!==null&&h!==null?_u(d,h):Et()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Et()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){l0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return qV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lre=new In(vt.comparator);function bs(){return Lre}const oF=new In(vt.comparator);function rm(...t){let e=oF;for(const r of t)e=e.insert(r.key,r);return e}function lF(t){let e=oF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Uo(){return fm()}function cF(){return fm()}function fm(){return new Ou((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Bre=new In(vt.comparator),$re=new xn(vt.comparator);function xr(...t){let e=$re;for(const r of t)e=e.add(r);return e}const Ure=new xn(ir);function R8(){return Ure}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$m(e)?"-0":e}}function uF(t){return{integerValue:""+t}}function dF(t,e){return $V(e)?uF(e):M8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this._=void 0}}function zre(t,e,r){return t instanceof Hm?(function(a,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&C8(i)&&(i=O8(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}})(r,e):t instanceof qd?fF(t,e):t instanceof Lh?pF(t,e):(function(a,i){const s=hF(a,i),c=GO(s)+GO(a.Pe);return XT(s)&&XT(a.Pe)?uF(c):M8(a.serializer,c)})(t,e)}function Vre(t,e,r){return t instanceof qd?fF(t,e):t instanceof Lh?pF(t,e):r}function hF(t,e){return t instanceof Bh?(function(n){return XT(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Hm extends n2{}class qd extends n2{constructor(e){super(),this.elements=e}}function fF(t,e){const r=mF(e);for(const n of t.elements)r.some((a=>Xo(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Lh extends n2{constructor(e){super(),this.elements=e}}function pF(t,e){let r=mF(e);for(const n of t.elements)r=r.filter((a=>!Xo(a,n)));return{arrayValue:{values:r}}}class Bh extends n2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function GO(t){return zn(t.integerValue||t.doubleValue)}function mF(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,r){this.field=e,this.transform=r}}function Fre(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof qd&&a instanceof qd||n instanceof Lh&&a instanceof Lh?Rh(n.elements,a.elements,Xo):n instanceof Bh&&a instanceof Bh?Xo(n.Pe,a.Pe):n instanceof Hm&&a instanceof Hm})(t.transform,e.transform)}class qre{constructor(e,r){this.version=e,this.transformResults=r}}class ua{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ua}static exists(e){return new ua(void 0,e)}static updateTime(e){return new ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class a2{}function gF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jg(t.key,ua.none()):new Ef(t.key,t.data,ua.none());{const r=t.data,n=di.empty();let a=new xn(Wn.comparator);for(let i of e.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new lc(t.key,n,new es(a.toArray()),ua.none())}}function Hre(t,e,r){t instanceof Ef?(function(a,i,s){const c=a.value.clone(),d=KO(a.fieldTransforms,i,s.transformResults);c.setAll(d),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,r):t instanceof lc?(function(a,i,s){if(!Fv(a.precondition,i))return void i.convertToUnknownDocument(s.version);const c=KO(a.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(yF(a)),d.setAll(c),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function pm(t,e,r,n){return t instanceof Ef?(function(i,s,c,d){if(!Fv(i.precondition,s))return c;const h=i.value.clone(),p=QO(i.fieldTransforms,d,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof lc?(function(i,s,c,d){if(!Fv(i.precondition,s))return c;const h=QO(i.fieldTransforms,d,s),p=s.data;return p.setAll(yF(i)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,s,c){return Fv(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,r)}function Gre(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=hF(n.transform,a||null);i!=null&&(r===null&&(r=di.empty()),r.set(n.field,i))}return r||null}function WO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Rh(n,a,((i,s)=>Fre(i,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ef extends a2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class lc extends a2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function KO(t,e,r){const n=new Map;It(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],s=i.transform,c=e.data.field(i.field);n.set(i.field,Vre(s,c,r[a]))}return n}function QO(t,e,r){const n=new Map;for(const a of t){const i=a.transform,s=r.data.field(a.field);n.set(a.field,zre(i,s,e))}return n}class Jg extends a2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D8 extends a2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Hre(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=pm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=pm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=cF();return this.mutations.forEach((a=>{const i=e.get(a.key),s=i.overlayedDocument;let c=this.applyToLocalView(s,i.mutatedFields);c=r.has(a.key)?null:c;const d=gF(s,c);d!==null&&n.set(a.key,d),s.isValidDocument()||s.convertToNoDocument(Lt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),xr())}isEqual(e){return this.batchId===e.batchId&&Rh(this.mutations,e.mutations,((r,n)=>WO(r,n)))&&Rh(this.baseMutations,e.baseMutations,((r,n)=>WO(r,n)))}}class B8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){It(e.mutations.length===n.length);let a=(function(){return Bre})();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new B8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wre{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a,Rr;function vF(t){switch(t){default:return Et();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function xF(t){if(t===void 0)return ca("GRPC error has no .code"),Ue.UNKNOWN;switch(t){case _a.OK:return Ue.OK;case _a.CANCELLED:return Ue.CANCELLED;case _a.UNKNOWN:return Ue.UNKNOWN;case _a.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case _a.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case _a.INTERNAL:return Ue.INTERNAL;case _a.UNAVAILABLE:return Ue.UNAVAILABLE;case _a.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case _a.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case _a.NOT_FOUND:return Ue.NOT_FOUND;case _a.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case _a.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case _a.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case _a.ABORTED:return Ue.ABORTED;case _a.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case _a.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case _a.DATA_LOSS:return Ue.DATA_LOSS;default:return Et()}}(Rr=_a||(_a={}))[Rr.OK=0]="OK",Rr[Rr.CANCELLED=1]="CANCELLED",Rr[Rr.UNKNOWN=2]="UNKNOWN",Rr[Rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rr[Rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rr[Rr.NOT_FOUND=5]="NOT_FOUND",Rr[Rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rr[Rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rr[Rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rr[Rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rr[Rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rr[Rr.ABORTED=10]="ABORTED",Rr[Rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rr[Rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rr[Rr.INTERNAL=13]="INTERNAL",Rr[Rr.UNAVAILABLE=14]="UNAVAILABLE",Rr[Rr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kre(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qre=new Rd([4294967295,4294967295],0);function XO(t){const e=Kre().encode(t),r=new NV;return r.update(e),new Uint8Array(r.digest())}function YO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rd([r,n],0),new Rd([a,i],0)]}class U8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new nm(`Invalid padding: ${r}`);if(n<0)throw new nm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new nm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new nm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Rd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Rd.fromNumber(n)));return a.compare(Qre)===1&&(a=new Rd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=XO(e),[n,a]=YO(r);for(let i=0;i<this.hashCount;i++){const s=this.Ee(n,a,i);if(!this.de(s))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new U8(i,a,r);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const r=XO(e),[n,a]=YO(r);for(let i=0;i<this.hashCount;i++){const s=this.Ee(n,a,i);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,t1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new e1(Lt.min(),a,new In(ir),bs(),xr())}}class t1{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new t1(n,r,xr(),xr(),xr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class bF{constructor(e,r){this.targetId=e,this.me=r}}class wF{constructor(e,r,n=fa.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class ZO{constructor(){this.fe=0,this.ge=eI(),this.pe=fa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xr(),r=xr(),n=xr();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Et()}})),new t1(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=eI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,It(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xre{constructor(e){this.Le=e,this.Be=new Map,this.ke=bs(),this.qe=JO(),this.Qe=new In(ir)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Et()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(cx(i))if(n===0){const s=new vt(i.path);this.Ue(r,s,Vn.newNoDocument(s,Lt.min()))}else It(n===1);else{const s=this.Ye(r);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,c;try{s=Su(n).toUint8Array()}catch(d){if(d instanceof HV)return Dm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new U8(s,a,i)}catch(d){return Dm(d instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,s)=>{const c=this.Je(s);if(c){if(i.current&&cx(c.target)){const d=new vt(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,Vn.newNoDocument(d,e))}i.be&&(r.set(s,i.ve()),i.Ce())}}));let n=xr();this.qe.forEach(((i,s)=>{let c=!0;s.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,s)=>s.setReadTime(e)));const a=new e1(e,r,this.Qe,this.ke,n);return this.ke=bs(),this.qe=JO(),this.Qe=new In(ir),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new ZO,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new xn(ir),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Xe("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ZO),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function JO(){return new In(vt.comparator)}function eI(){return new In(vt.comparator)}const Yre={asc:"ASCENDING",desc:"DESCENDING"},Zre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jre={and:"AND",or:"OR"};class ene{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function tA(t,e){return t.useProto3Json||Qg(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tne(t,e){return $h(t,e.toTimestamp())}function Za(t){return It(!!t),Lt.fromTimestamp((function(r){const n=Zl(r);return new Kn(n.seconds,n.nanos)})(t))}function z8(t,e){return rA(t,e).canonicalString()}function rA(t,e){const r=(function(a){return new $r(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function _F(t){const e=$r.fromString(t);return It(IF(e)),e}function Gm(t,e){return z8(t.databaseId,e.path)}function Vl(t,e){const r=_F(e);if(r.get(1)!==t.databaseId.projectId)throw new lt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new lt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new vt(NF(r))}function TF(t,e){return z8(t.databaseId,e)}function AF(t){const e=_F(t);return e.length===4?$r.emptyPath():NF(e)}function nA(t){return new $r(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NF(t){return It(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tI(t,e,r){return{name:Gm(t,e),fields:r.value.mapValue.fields}}function rne(t,e,r){const n=Vl(t,e.name),a=Za(e.updateTime),i=e.createTime?Za(e.createTime):Lt.min(),s=new di({mapValue:{fields:e.fields}}),c=Vn.newFoundDocument(n,a,i,s);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function nne(t,e){return"found"in e?(function(n,a){It(!!a.found),a.found.name,a.found.updateTime;const i=Vl(n,a.found.name),s=Za(a.found.updateTime),c=a.found.createTime?Za(a.found.createTime):Lt.min(),d=new di({mapValue:{fields:a.found.fields}});return Vn.newFoundDocument(i,s,c,d)})(t,e):"missing"in e?(function(n,a){It(!!a.missing),It(!!a.readTime);const i=Vl(n,a.missing),s=Za(a.readTime);return Vn.newNoDocument(i,s)})(t,e):Et()}function ane(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Et()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(It(p===void 0||typeof p=="string"),fa.fromBase64String(p||"")):(It(p===void 0||p instanceof Buffer||p instanceof Uint8Array),fa.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(h){const p=h.code===void 0?Ue.UNKNOWN:xF(h.code);return new lt(p,h.message||"")})(s);r=new wF(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Vl(t,n.document.name),i=Za(n.document.updateTime),s=n.document.createTime?Za(n.document.createTime):Lt.min(),c=new di({mapValue:{fields:n.document.fields}}),d=Vn.newFoundDocument(a,i,s,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new qv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Vl(t,n.document),i=n.readTime?Za(n.readTime):Lt.min(),s=Vn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new qv([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Vl(t,n.document),i=n.removedTargetIds||[];r=new qv([],i,a,null)}else{if(!("filter"in e))return Et();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new Wre(a,i),c=n.targetId;r=new bF(c,s)}}return r}function Wm(t,e){let r;if(e instanceof Ef)r={update:tI(t,e.key,e.value)};else if(e instanceof Jg)r={delete:Gm(t,e.key)};else if(e instanceof lc)r={update:tI(t,e.key,e.data),updateMask:une(e.fieldMask)};else{if(!(e instanceof D8))return Et();r={verify:Gm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,s){const c=s.transform;if(c instanceof Hm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof qd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bh)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw Et()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:tne(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Et()})(t,e.precondition)),r}function aA(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?ua.updateTime(Za(i.updateTime)):i.exists!==void 0?ua.exists(i.exists):ua.none()})(e.currentDocument):ua.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(s,c){let d=null;if("setToServerValue"in c)It(c.setToServerValue==="REQUEST_TIME"),d=new Hm;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new qd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Lh(p)}else"increment"in c?d=new Bh(s,c.increment):Et();const h=Wn.fromServerFormat(c.fieldPath);return new P8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=Vl(t,e.update.name),i=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const h=d.fieldPaths||[];return new es(h.map((p=>Wn.fromServerFormat(p))))})(e.updateMask);return new lc(a,i,s,r,n)}return new Ef(a,i,r,n)}if(e.delete){const a=Vl(t,e.delete);return new Jg(a,r)}if(e.verify){const a=Vl(t,e.verify);return new D8(a,r)}return Et()}function ine(t,e){return t&&t.length>0?(It(e!==void 0),t.map((r=>(function(a,i){let s=a.updateTime?Za(a.updateTime):Za(i);return s.isEqual(Lt.min())&&(s=Za(i)),new qre(s,a.transformResults||[])})(r,e)))):[]}function EF(t,e){return{documents:[TF(t,e.path)]}}function jF(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=TF(t,a);const i=(function(h){if(h.length!==0)return OF(on.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const s=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:ch(y.field),direction:one(y.dir)}})(p)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const c=tA(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function kF(t){let e=AF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){It(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const y=CF(m);return y instanceof on&&I8(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(m){return m.map((y=>(function(T){return new qm(uh(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,Qg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,x=m.values||[];return new Ph(x,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,x=m.values||[];return new Ph(x,y)})(r.endAt)),rF(e,a,s,i,c,"F",d,h)}function sne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function CF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=uh(r.unaryFilter.field);return jr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=uh(r.unaryFilter.field);return jr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=uh(r.unaryFilter.field);return jr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=uh(r.unaryFilter.field);return jr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Et()}})(t):t.fieldFilter!==void 0?(function(r){return jr.create(uh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return on.create(r.compositeFilter.filters.map((n=>CF(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Et()}})(r.compositeFilter.op))})(t):Et()}function one(t){return Yre[t]}function lne(t){return Zre[t]}function cne(t){return Jre[t]}function ch(t){return{fieldPath:t.canonicalString()}}function uh(t){return Wn.fromServerFormat(t.fieldPath)}function OF(t){return t instanceof jr?(function(r){if(r.op==="=="){if(BO(r.value))return{unaryFilter:{field:ch(r.field),op:"IS_NAN"}};if(LO(r.value))return{unaryFilter:{field:ch(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(BO(r.value))return{unaryFilter:{field:ch(r.field),op:"IS_NOT_NAN"}};if(LO(r.value))return{unaryFilter:{field:ch(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ch(r.field),op:lne(r.op),value:r.value}}})(t):t instanceof on?(function(r){const n=r.getFilters().map((a=>OF(a)));return n.length===1?n[0]:{compositeFilter:{op:cne(r.op),filters:n}}})(t):Et()}function une(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function IF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,r,n,a,i=Lt.min(),s=Lt.min(),c=fa.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Bl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.ct=e}}function dne(t,e){let r;if(e.document)r=rne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=vt.fromSegments(e.noDocument.path),a=Gd(e.noDocument.readTime);r=Vn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et();{const n=vt.fromSegments(e.unknownDocument.path),a=Gd(e.unknownDocument.version);r=Vn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new Kn(a[0],a[1]);return Lt.fromTimestamp(i)})(e.readTime)),r}function rI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:hx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,s){return{name:Gm(i,s.key),fields:s.data.value.mapValue.fields,updateTime:$h(i,s.version.toTimestamp()),createTime:$h(i,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Hd(e.version)};else{if(!e.isUnknownDocument())return Et();n.unknownDocument={path:r.path.toArray(),version:Hd(e.version)}}return n}function hx(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Hd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Gd(t){const e=new Kn(t.seconds,t.nanoseconds);return Lt.fromTimestamp(e)}function bd(t,e){const r=(e.baseMutations||[]).map((i=>aA(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const s=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>aA(t.ct,i))),a=Kn.fromMillis(e.localWriteTimeMs);return new L8(e.batchId,a,r,n)}function am(t){const e=Gd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Gd(t.lastLimboFreeSnapshotVersion):Lt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return It(i.documents.length===1),_s(Yg(AF(i.documents[0])))})(t.query):(function(i){return _s(kF(i))})(t.query),new Bl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,fa.fromBase64String(t.resumeToken))}function MF(t,e){const r=Hd(e.snapshotVersion),n=Hd(e.lastLimboFreeSnapshotVersion);let a;a=cx(e.target)?EF(t.ct,e.target):jF(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function PF(t){const e=kF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dx(e,e.limit,"L"):e}function D5(t,e){return new $8(e.largestBatchId,aA(t.ct,e.overlayMutation))}function nI(t,e){const r=e.path.lastSegment();return[t,Pi(e.path.popLast()),r]}function aI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Hd(n.readTime),documentKey:Pi(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hne{getBundleMetadata(e,r){return iI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:Gd(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return iI(e).put((function(a){return{bundleId:a.id,createTime:Hd(Za(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return sI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:PF(i.bundledQuery),readTime:Gd(i.readTime)}})(n)}))}saveNamedQuery(e,r){return sI(e).put((function(a){return{name:a.name,readTime:Hd(Za(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function iI(t){return Ua(t,"bundles")}function sI(t){return Ua(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new i2(e,n)}getOverlay(e,r){return Pp(e).get(nI(this.userId,r)).next((n=>n?D5(this.serializer,n):null))}getOverlays(e,r){const n=Uo();return ke.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,s)=>{const c=new $8(r,s);a.push(this.ht(e,c))})),ke.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((s=>a.add(Pi(s.getCollectionPath()))));const i=[];return a.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);i.push(Pp(e).j("collectionPathOverlayIndex",c))})),ke.waitFor(i)}getOverlaysForCollection(e,r,n){const a=Uo(),i=Pi(r),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Pp(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const h=D5(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=Uo();let s;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Pp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=D5(this.serializer,h);i.size()<a||m.largestBatchId===s?(i.set(m.getKey(),m),s=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Pp(e).put((function(a,i,s){const[c,d,h]=nI(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Wm(a.ct,s.mutation)}})(this.serializer,this.userId,r))}}function Pp(t){return Ua(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fne{Pt(e){return Ua(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?fa.fromUint8Array(n):fa.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(zn(e.integerValue));else if("doubleValue"in e){const n=zn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),$m(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Zl(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Su(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?GV(e)?this.dt(r,Number.MAX_SAFE_INTEGER):t2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Et()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const s="value",c=((a=(n=i[s].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(zn(c)),this.Vt(s,r),this.Tt(i[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),vt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}wd.vt=new wd;function pne(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function oI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const s=pne(255&n[i]);if(a+=s,s!==8)break}return a})(t);return Math.ceil(e/8)}class mne{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=oI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=oI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class gne{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class yne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Dp{constructor(){this.jt=new mne,this.Ht=new gne(this.jt),this.Jt=new yne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Sd(this.indexId,this.documentKey,this.arrayValue,n)}}function Hc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=lI(t.arrayValue,e.arrayValue),r!==0?r:(r=lI(t.directionalValue,e.directionalValue),r!==0?r:vt.comparator(t.documentKey,e.documentKey)))}function lI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.Xt=new xn(((r,n)=>Wn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(It(e.collectionGroup===this.collectionId),this.nn)return!1;const r=WT(e);if(r!==void 0&&!this.sn(r))return!1;const n=md(e);let a=new Set,i=0,s=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new xn(Wn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new $v(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new $v(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new $v(n.field,n.dir==="asc"?0:1)));return new lx(lx.UNKNOWN_ID,this.collectionId,r,Bm.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){var e,r;if(It(t instanceof jr||t instanceof on),t instanceof jr){if(t instanceof tF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>jr.create(t.field,"==",i))))||[];return on.create(a,"or")}return t}const n=t.filters.map((a=>DF(a)));return on.create(n,t.op)}function vne(t){if(t.getFilters().length===0)return[];const e=oA(DF(t));return It(LF(e)),iA(e)||sA(e)?[e]:e.getFilters()}function iA(t){return t instanceof jr}function sA(t){return t instanceof on&&I8(t)}function LF(t){return iA(t)||sA(t)||(function(r){if(r instanceof on&&YT(r)){for(const n of r.getFilters())if(!iA(n)&&!sA(n))return!1;return!0}return!1})(t)}function oA(t){if(It(t instanceof jr||t instanceof on),t instanceof jr)return t;if(t.filters.length===1)return oA(t.filters[0]);const e=t.filters.map((n=>oA(n)));let r=on.create(e,t.op);return r=fx(r),LF(r)?r:(It(r instanceof on),It(Dh(r)),It(r.filters.length>1),r.filters.reduce(((n,a)=>V8(n,a))))}function V8(t,e){let r;return It(t instanceof jr||t instanceof on),It(e instanceof jr||e instanceof on),r=t instanceof jr?e instanceof jr?(function(a,i){return on.create([a,i],"and")})(t,e):uI(t,e):e instanceof jr?uI(e,t):(function(a,i){if(It(a.filters.length>0&&i.filters.length>0),Dh(a)&&Dh(i))return ZV(a,i.getFilters());const s=YT(a)?a:i,c=YT(a)?i:a,d=s.filters.map((h=>V8(h,c)));return on.create(d,"or")})(t,e),fx(r)}function uI(t,e){if(Dh(e))return ZV(e,t.getFilters());{const r=e.filters.map((n=>V8(t,n)));return on.create(r,"or")}}function fx(t){if(It(t instanceof jr||t instanceof on),t instanceof jr)return t;const e=t.getFilters();if(e.length===1)return fx(e[0]);if(XV(t))return t;const r=e.map((a=>fx(a))),n=[];return r.forEach((a=>{a instanceof jr?n.push(a):a instanceof on&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:on.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(){this.un=new F8}addToCollectionParentIndex(e,r){return this.un.add(r),ke.resolve()}getCollectionParents(e,r){return ke.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ke.resolve()}deleteFieldIndex(e,r){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,r){return ke.resolve()}getDocumentsMatchingTarget(e,r){return ke.resolve(null)}getIndexType(e,r){return ke.resolve(0)}getFieldIndexes(e,r){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,r){return ke.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,r){return ke.resolve(Es.min())}updateCollectionGroup(e,r,n){return ke.resolve()}updateIndexEntries(e,r){return ke.resolve()}}class F8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new xn($r.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new xn($r.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new Uint8Array(0);class bne{constructor(e,r){this.databaseId=r,this.cn=new F8,this.ln=new Ou((n=>Fd(n)),((n,a)=>Xg(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Pi(a)};return dI(e).put(i)}return ke.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[RV(r),""],!1,!0);return dI(e).U(a).next((i=>{for(const s of i){if(s.collectionId!==r)break;n.push($o(s.parent))}return n}))}addFieldIndex(e,r){const n=Lp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const s=Y0(e);return i.next((c=>{s.put(aI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Lp(e),a=Y0(e),i=X0(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Lp(e),n=X0(e),a=Y0(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return ke.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new cI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=X0(e);let a=!0;const i=new Map;return ke.forEach(this.hn(r),(s=>this.Pn(e,s).next((c=>{a&&(a=!!c),i.set(s,c)})))).next((()=>{if(a){let s=xr();const c=[];return ke.forEach(i,((d,h)=>{Xe("IndexedDbIndexManager",`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Fd(r)}`);const p=(function(C,L){const P=WT(L);if(P===void 0)return null;for(const R of ux(C,P.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null})(h,d),m=(function(C,L){const P=new Map;for(const R of md(L))for(const N of ux(C,R.fieldPath))switch(N.op){case"==":case"in":P.set(R.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return P.set(R.fieldPath.canonicalString(),N.value),Array.from(P.values())}return null})(h,d),y=(function(C,L){const P=[];let R=!0;for(const N of md(L)){const A=N.kind===0?FO(C,N.fieldPath,C.startAt):qO(C,N.fieldPath,C.startAt);P.push(A.value),R&&(R=A.inclusive)}return new Ph(P,R)})(h,d),x=(function(C,L){const P=[];let R=!0;for(const N of md(L)){const A=N.kind===0?qO(C,N.fieldPath,C.endAt):FO(C,N.fieldPath,C.endAt);P.push(A.value),R&&(R=A.inclusive)}return new Ph(P,R)})(h,d),T=this.In(d,h,y),_=this.In(d,h,x),w=this.Tn(d,h,m),E=this.En(d.indexId,p,T,y.inclusive,_,x.inclusive,w);return ke.forEach(E,(I=>n.G(I,r.limit).next((C=>{C.forEach((L=>{const P=vt.fromSegments(L.documentKey);s.has(P)||(s=s.add(P),c.push(P))}))}))))})).next((()=>c))}return ke.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=vne(on.create(e.filters,"and")).map((n=>JT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,s,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):Zy,x=this.An(e,y,n[m%h],a),T=this.Rn(e,y,i[m%h],s),_=c.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(x,T,_))}return p}An(e,r,n,a){const i=new Sd(e,vt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Sd(e,vt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new cI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let s=null;for(const c of i)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,r){let n=2;const a=this.hn(r);return ke.forEach(a,(i=>this.Pn(e,i).next((s=>{s?n!==0&&s.fields.length<(function(d){let h=new xn(Wn.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Dp;for(const a of md(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const s=n.Yt(a.kind);wd.vt.It(i,s)}return n.zt()}dn(e){const r=new Dp;return wd.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Dp;return wd.vt.It(Vm(this.databaseId,r),n.Yt((function(i){const s=md(i);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Dp);let i=0;for(const s of md(e)){const c=n[i++];for(const d of a)if(this.fn(r,s.fieldPath)&&Fm(c))a=this.gn(a,s,c);else{const h=d.Yt(s.kind);wd.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const s of n.arrayValue.values||[])for(const c of a){const d=new Dp;d.seed(c.zt()),wd.vt.It(s,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof jr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Lp(e),a=Y0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const s=[];return ke.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{s.push((function(p,m){const y=m?new Bm(m.sequenceNumber,new Es(Gd(m.readTime),new vt($o(m.documentKey)),m.largestBatchId)):Bm.empty(),x=p.fields.map((([T,_])=>new $v(Wn.fromServerFormat(T),_)));return new lx(p.indexId,p.collectionGroup,x,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:ir(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Lp(e),i=Y0(e);return this.yn(e).next((s=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>ke.forEach(c,(d=>i.put(aI(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return ke.forEach(r,((a,i)=>{const s=n.get(a.collectionGroup);return(s?ke.resolve(s):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),ke.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?ke.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return X0(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return X0(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=X0(e);let i=new xn(Hc);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,c)=>{i=i.add(new Sd(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new xn(Hc);const a=this.Vn(r,e);if(a==null)return n;const i=WT(r);if(i!=null){const s=e.data.field(i.fieldPath);if(Fm(s))for(const c of s.arrayValue.values||[])n=n.add(new Sd(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Sd(r.indexId,e.key,Zy,a));return n}bn(e,r,n,a,i){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,h,p,m,y){const x=d.getIterator(),T=h.getIterator();let _=Q0(x),w=Q0(T);for(;_||w;){let E=!1,I=!1;if(_&&w){const C=p(_,w);C<0?I=!0:C>0&&(E=!0)}else _!=null?I=!0:E=!0;E?(m(w),w=Q0(T)):I?(y(_),_=Q0(x)):(_=Q0(x),w=Q0(T))}})(a,i,Hc,(c=>{s.push(this.Dn(e,r,n,c))}),(c=>{s.push(this.vn(e,r,n,c))})),ke.waitFor(s)}yn(e){let r=1;return Y0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,c)=>Hc(s,c))).filter(((s,c,d)=>!c||Hc(s,d[c-1])!==0));const a=[];a.push(e);for(const s of n){const c=Hc(s,e),d=Hc(s,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(s),a.push(s.Zt());else if(d>0)break}a.push(r);const i=[];for(let s=0;s<a.length;s+=2){if(this.Cn(a[s],a[s+1]))return[];const c=[a[s].indexId,this.uid,a[s].arrayValue,a[s].directionalValue,Zy,[]],d=[a[s+1].indexId,this.uid,a[s+1].arrayValue,a[s+1].directionalValue,Zy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return Hc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(hI)}getMinOffset(e,r){return ke.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||Et())))).next(hI)}}function dI(t){return Ua(t,"collectionParents")}function X0(t){return Ua(t,"indexEntries")}function Lp(t){return Ua(t,"indexConfiguration")}function Y0(t){return Ua(t,"indexState")}function hI(t){It(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;E8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Es(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qi(e,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],s=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:s},((p,m,y)=>(c++,y.delete())));i.push(d.next((()=>{It(c===1)})));const h=[];for(const p of r.mutations){const m=UV(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return ke.waitFor(i).next((()=>h))}function px(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Et();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(41943040,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);class s2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){It(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new s2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gc(e).J({index:"userMutationsIndex",range:n},((a,i,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=dh(e),s=Gc(e);return s.add({}).next((c=>{It(typeof c=="number");const d=new L8(c,r,n,a),h=(function(x,T,_){const w=_.baseMutations.map((I=>Wm(x.ct,I))),E=_.mutations.map((I=>Wm(x.ct,I)));return{userId:T,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:w,mutations:E}})(this.serializer,this.userId,d),p=[];let m=new xn(((y,x)=>ir(y.canonicalString(),x.canonicalString())));for(const y of a){const x=UV(this.userId,y.key.path,c);m=m.add(y.key.path.popLast()),p.push(s.put(h)),p.push(i.put(x,ire))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),ke.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Gc(e).get(r).next((n=>n?(It(n.userId===this.userId),bd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?ke.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Gc(e).J({index:"userMutationsIndex",range:a},((s,c,d)=>{c.userId===this.userId&&(It(c.batchId>=n),i=bd(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Gc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,s)=>{n=i.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gc(e).U("userMutationsIndex",r).next((n=>n.map((a=>bd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Uv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return dh(e).J({range:a},((s,c,d)=>{const[h,p,m]=s,y=$o(p);if(h===this.userId&&r.path.isEqual(y))return Gc(e).get(m).next((x=>{if(!x)throw Et();It(x.userId===this.userId),i.push(bd(this.serializer,x))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new xn(ir);const a=[];return r.forEach((i=>{const s=Uv(this.userId,i.path),c=IDBKeyRange.lowerBound(s),d=dh(e).J({range:c},((h,p,m)=>{const[y,x,T]=h,_=$o(x);y===this.userId&&i.path.isEqual(_)?n=n.add(T):m.done()}));a.push(d)})),ke.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=Uv(this.userId,n),s=IDBKeyRange.lowerBound(i);let c=new xn(ir);return dh(e).J({range:s},((d,h,p)=>{const[m,y,x]=d,T=$o(y);m===this.userId&&n.isPrefixOf(T)?T.length===a&&(c=c.add(x)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(Gc(e).get(i).next((s=>{if(s===null)throw Et();It(s.userId===this.userId),n.push(bd(this.serializer,s))})))})),ke.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return BF(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),ke.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return ke.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),a=[];return dh(e).J({range:n},((i,s,c)=>{if(i[0]===this.userId){const d=$o(i[1]);a.push(d)}else c.done()})).next((()=>{It(a.length===0)}))}))}containsKey(e,r){return $F(e,this.userId,r)}Nn(e){return UF(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function $F(t,e,r){const n=Uv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let s=!1;return dh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,y]=c;p===e&&m===a&&(s=!0),h.done()})).next((()=>s))}function Gc(t){return Ua(t,"mutations")}function dh(t){return Ua(t,"documentMutations")}function UF(t){return Ua(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wd(0)}static kn(){return new Wd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Wd(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Lt.fromTimestamp(new Kn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>Z0(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(It(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return Z0(e).J(((s,c)=>{const d=am(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>ke.waitFor(i))).next((()=>a))}forEachTarget(e,r){return Z0(e).J(((n,a)=>{const i=am(a);r(i)}))}qn(e){return pI(e).get("targetGlobalKey").next((r=>(It(r!==null),r)))}Qn(e,r){return pI(e).put("targetGlobalKey",r)}Kn(e,r){return Z0(e).put(MF(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Fd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Z0(e).J({range:a,index:"queryTargetsIndex"},((s,c,d)=>{const h=am(c);Xg(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=ru(e);return r.forEach((s=>{const c=Pi(s.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,s))})),ke.waitFor(a)}removeMatchingKeys(e,r,n){const a=ru(e);return ke.forEach(r,(i=>{const s=Pi(i.path);return ke.waitFor([a.delete([n,s]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=ru(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=ru(e);let i=xr();return a.J({range:n,H:!0},((s,c,d)=>{const h=$o(s[1]),p=new vt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Pi(r.path),a=IDBKeyRange.bound([n],[RV(n)],!1,!0);let i=0;return ru(e).J({index:"documentTargetsIndex",H:!0,range:a},(([s,c],d,h)=>{s!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return Z0(e).get(r).next((n=>n?am(n):null))}}function Z0(t){return Ua(t,"targets")}function pI(t){return Ua(t,"targetGlobal")}function ru(t){return Ua(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI([t,e],[r,n]){const a=ir(t,r);return a===0?ir(e,n):a}class Sne{constructor(e){this.Un=e,this.buffer=new xn(mI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();mI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class _ne{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Cu(r)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ku(r)}await this.Hn(3e5)}))}}class Tne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return ke.resolve(Ji.oe);const n=new Sne(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(fI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,s,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,s=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),oh()<=Er.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${a} in `+(c-s)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function Ane(t,e){return new Tne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nne{constructor(e,r){this.db=e,this.garbageCollector=Ane(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return Jy(e,n)}removeReference(e,r,n){return Jy(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Jy(e,r)}nr(e,r){return(function(a,i){let s=!1;return UF(a).Y((c=>$F(a,c,i).next((d=>(d&&(s=!0),ke.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((s,c)=>{if(c<=r){const d=this.nr(e,s).next((h=>{if(!h)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Lt.min()),ru(e).delete((function(m){return[0,Pi(m.path)]})(s)))))}));a.push(d)}})).next((()=>ke.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Jy(e,r)}tr(e,r){const n=ru(e);let a,i=Ji.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:h})=>{s===0?(i!==Ji.oe&&r(new vt($o(a)),i),i=h,a=d):i=Ji.oe})).next((()=>{i!==Ji.oe&&r(new vt($o(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jy(t,e){return ru(t).put((function(n,a){return{targetId:0,path:Pi(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this.changes=new Ou((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ke.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return sd(e).put(n)}removeEntry(e,r,n){return sd(e).delete((function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],hx(s),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=Vn.newInvalidDocument(r);return sd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bp(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:Vn.newInvalidDocument(r)};return sd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bp(r))},((a,i)=>{n={document:this.ir(r,i),size:px(i)}})).next((()=>n))}getEntries(e,r){let n=bs();return this._r(e,r,((a,i)=>{const s=this.ir(a,i);n=n.insert(a,s)})).next((()=>n))}ar(e,r){let n=bs(),a=new In(vt.comparator);return this._r(e,r,((i,s)=>{const c=this.ir(i,s);n=n.insert(i,c),a=a.insert(i,px(s))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return ke.resolve();let a=new xn(vI);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Bp(a.first()),Bp(a.last())),s=a.getIterator();let c=s.getNext();return sd(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=vt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&vI(c,m)<0;)n(c,null),c=s.getNext();c&&c.isEqual(m)&&(n(c,h),c=s.hasNext()?s.getNext():null),c?p.$(Bp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const s=r.path,c=[s.popLast().toArray(),s.lastSegment(),hx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sd(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=bs();for(const m of h){const y=this.ir(vt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Zg(r,y)||a.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=bs();const s=yI(r,n),c=yI(r,Es.max());return sd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,h,p)=>{const m=this.ir(vt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new jne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return gI(e).get("remoteDocumentGlobalKey").next((r=>(It(!!r),r)))}rr(e,r){return gI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=dne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Lt.min())))return n}return Vn.newInvalidDocument(e)}}function VF(t){return new Ene(t)}class jne extends zF{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Ou((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new xn(((i,s)=>ir(i.canonicalString(),s.canonicalString())));return this.changes.forEach(((i,s)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),s.isValidDocument()){const d=rI(this.cr.serializer,s);a=a.add(i.path.popLast());const h=px(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=rI(this.cr.serializer,s.convertToNoDocument(Lt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),ke.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,s)=>{this.lr.set(i,{size:s,readTime:n.get(i).readTime})})),n)))}}function gI(t){return Ua(t,"remoteDocumentGlobal")}function sd(t){return Ua(t,"remoteDocumentsV14")}function Bp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yI(t,e){const r=e.documentKey.path.toArray();return[t,hx(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function vI(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=ir(r[i],n[i]),a)return a;return a=ir(r.length,n.length),a||(a=ir(r[r.length-2],n[n.length-2]),a||ir(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&pm(n.mutation,a,es.empty(),Kn.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,xr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=xr()){const a=Uo();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let s=rm();return i.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=Uo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,xr())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((s,c)=>{r.set(s,c)}))}))}computeViews(e,r,n,a){let i=bs();const s=fm(),c=(function(){return fm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof lc)?i=i.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),pm(p.mutation,h,p.mutation.getFieldMask(),Kn.now())):s.set(h.key,es.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>s.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new kne(p,(m=s.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=fm();let a=new In(((s,c)=>s-c)),i=xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const c of s)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||es.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||xr()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const s=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=cF();p.forEach((y=>{if(!i.has(y)){const x=gF(r.get(y),n.get(y));x!==null&&m.set(y,x),i=i.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return ke.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(s){return vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):ke.resolve(Uo());let c=-1,d=i;return s.next((h=>ke.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?ke.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,xr()))).next((p=>({batchId:c,changes:lF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new vt(r)).next((n=>{let a=rm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let s=rm();return this.indexManager.getCollectionParents(e,i).next((c=>ke.forEach(c,(d=>{const h=(function(m,y){return new Nf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,y)=>{s=s.insert(m,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((s=>{i.forEach(((d,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,Vn.newInvalidDocument(p)))}));let c=rm();return s.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&pm(p.mutation,h,es.empty(),Kn.now()),Zg(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cne{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ke.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Za(a.createTime)}})(r)),ke.resolve()}getNamedQuery(e,r){return ke.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:PF(a.bundledQuery),readTime:Za(a.readTime)}})(r)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(){this.overlays=new In(vt.comparator),this.Ir=new Map}getOverlay(e,r){return ke.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uo();return ke.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),ke.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),ke.resolve()}getOverlaysForCollection(e,r,n){const a=Uo(),i=r.length+1,s=new vt(r.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return ke.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new In(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=Uo(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Uo(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return ke.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new $8(r,n));let i=this.Ir.get(r);i===void 0&&(i=xr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ine{constructor(){this.sessionToken=fa.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.Tr=new xn(Qa.Er),this.dr=new xn(Qa.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Qa(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Qa(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new vt(new $r([])),n=new Qa(r,e),a=new Qa(r,e+1),i=[];return this.dr.forEachInRange([n,a],(s=>{this.Vr(s),i.push(s.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new vt(new $r([])),n=new Qa(r,e),a=new Qa(r,e+1);let i=xr();return this.dr.forEachInRange([n,a],(s=>{i=i.add(s.key)})),i}containsKey(e){const r=new Qa(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Qa{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return vt.comparator(e.key,r.key)||ir(e.wr,r.wr)}static Ar(e,r){return ir(e.wr,r.wr)||vt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new xn(Qa.Er)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new L8(i,r,n,a);this.mutationQueue.push(s);for(const c of a)this.br=this.br.add(new Qa(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ke.resolve(s)}lookupMutationBatch(e,r){return ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Qa(r,0),a=new Qa(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(s=>{const c=this.Dr(s.wr);i.push(c)})),ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new xn(ir);return r.forEach((a=>{const i=new Qa(a,0),s=new Qa(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,s],(c=>{n=n.add(c.wr)}))})),ke.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;vt.isDocumentKey(i)||(i=i.child(""));const s=new Qa(new vt(i),0);let c=new xn(ir);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),s),ke.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){It(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ke.forEach(r.mutations,(a=>{const i=new Qa(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Qa(r,0),a=this.br.firstAfterOrEqual(n);return ke.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mne{constructor(e){this.Mr=e,this.docs=(function(){return new In(vt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ke.resolve(n?n.document.mutableCopy():Vn.newInvalidDocument(r))}getEntries(e,r){let n=bs();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():Vn.newInvalidDocument(a))})),ke.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=bs();const s=r.path,c=new vt(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||E8(PV(p),n)<=0||(a.has(p.key)||Zg(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return ke.resolve(i)}getAllFromCollectionGroup(e,r,n,a){Et()}Or(e,r){return ke.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new Pne(this)}getSize(e){return ke.resolve(this.size)}}class Pne extends zF{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),ke.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dne{constructor(e){this.persistence=e,this.Nr=new Ou((r=>Fd(r)),Xg),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new q8,this.targetCount=0,this.kr=Wd.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ke.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Wd(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ke.resolve()}updateTargetData(e,r){return this.Kn(r),ke.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),ke.waitFor(i).next((()=>a))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ke.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ke.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((s=>{i.push(a.markPotentiallyOrphaned(e,s))})),ke.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ke.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ke.resolve(n)}containsKey(e,r){return ke.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Ji(0),this.Kr=!1,this.Kr=!0,this.$r=new Ine,this.referenceDelegate=e(this),this.Ur=new Dne(this),this.indexManager=new xne,this.remoteDocumentCache=(function(a){return new Mne(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new RF(r),this.Gr=new Cne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new One,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Rne(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("MemoryPersistence","Starting transaction:",e);const a=new Lne(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return ke.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class Lne extends LV{constructor(e){super(),this.currentSequenceNumber=e}}class o2{constructor(e){this.persistence=e,this.Jr=new q8,this.Yr=null}static Zr(e){return new o2(e)}get Xr(){if(this.Yr)return this.Yr;throw Et()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ke.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ke.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ke.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Xr,(n=>{const a=vt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Lt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return ke.or([()=>ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(e){this.serializer=e}O(e,r,n,a){const i=new e2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IO,{unique:!0}),d.createObjectStore("documentMutations")})(e),xI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=ke.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),xI(e)),s=s.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(s=s.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",IO,{unique:!0});const m=h.store("mutations"),y=p.map((x=>m.put(x)));return ke.waitFor(y)}))})(e,i)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(s=s.next((()=>this.ni(i)))),n<6&&a>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(s=s.next((()=>this.ii(i)))),n<8&&a>=8&&(s=s.next((()=>this.si(e,i)))),n<9&&a>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(s=s.next((()=>this.oi(i)))),n<11&&a>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(s=s.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:yre});h.createIndex("collectionPathOverlayIndex",vre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",xre,{unique:!1})})(e)}))),n<13&&a>=13&&(s=s.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:sre});h.createIndex("documentKeyIndex",ore),h.createIndex("collectionGroupIndex",lre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(s=s.next((()=>this.ai(e,i)))),n<15&&a>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:fre}).createIndex("sequenceNumberIndex",pre,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:mre}).createIndex("documentKeyIndex",gre,{unique:!1})})(e)))),n<16&&a>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=px(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>ke.forEach(a,(i=>{const s=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>ke.forEach(c,(d=>{It(d.userId===i.userId);const h=bd(this.serializer,d);return BF(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((s,c)=>{const d=new $r(s),h=(function(m){return[0,Pi(m)]})(d);i.push(r.get(h).next((p=>p?ke.resolve():(m=>r.put({targetId:0,path:Pi(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>ke.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:hre});const n=r.store("collectionParents"),a=new F8,i=s=>{if(a.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:Pi(d)})}};return r.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new $r(s);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,c,d],h)=>{const p=$o(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=am(a),s=MF(this.serializer,i);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,s)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new vt($r.fromString(m.document.name).popFirst(5)):m.noDocument?vt.fromSegments(m.noDocument.path):m.unknownDocument?vt.fromSegments(m.unknownDocument.path):Et()})(s).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};a.push(c.put(h))})).next((()=>ke.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=VF(this.serializer),i=new qF(o2.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:xr();bd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),ke.forEach(c,((d,h)=>{const p=new Si(h),m=i2.lt(this.serializer,p),y=i.getIndexManager(p),x=s2.lt(p,this.serializer,y,i.referenceDelegate);return new FF(a,x,m,y).recalculateAndSaveOverlaysForDocumentKeys(new KT(r,Ji.oe),d).next()}))}))}}function xI(t){t.createObjectStore("targetDocuments",{keyPath:ure}).createIndex("documentTargetsIndex",dre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cre,{unique:!0}),t.createObjectStore("targetGlobal")}const L5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class H8{constructor(e,r,n,a,i,s,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=s,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!H8.D())throw new lt(Ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nne(this,a),this.Ai=r+"main",this.serializer=new RF(d),this.Ri=new yu(this.Ai,this.hi,new Bne(this.serializer)),this.$r=new fne,this.Ur=new wne(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VF(this.serializer),this.Gr=new hne,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&ca("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new lt(Ue.FAILED_PRECONDITION,L5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new Ji(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ev(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Cu(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return $p(e).get("owner").next((r=>ke.resolve(this.vi(r))))}Ci(e){return ev(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=Ua(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),s=a.filter((c=>i.indexOf(c)===-1));return ke.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?ke.resolve(!0):$p(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new lt(Ue.FAILED_PRECONDITION,L5);return!1}}return!(!this.networkEnabled||!this.inForeground)||ev(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,s=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||s&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Xe("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new KT(e,Ji.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>ev(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return s2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return i2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Xe("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?Sre:d===16?wre:d===15?k8:d===14?FV:d===13?VV:d===12?bre:d===11?zV:void Et()})(this.hi);let s;return this.Ri.runTransaction(e,a,i,(c=>(s=new KT(c,this.Qr?this.Qr.next():Ji.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw ca(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new lt(Ue.FAILED_PRECONDITION,DV);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return $p(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new lt(Ue.FAILED_PRECONDITION,L5)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $p(e).put("owner",r)}static D(){return yu.D()}bi(e){const r=$p(e);return r.get("owner").next((n=>this.vi(n)?(Xe("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ke.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ca(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;Vz()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Xe("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ca("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ca("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $p(t){return Ua(t,"owner")}function ev(t){return Ua(t,"clientMetadata")}function HF(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=xr(),a=xr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new G8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Vz()?8:BV(La())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((s=>{i.result=s})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((s=>{i.result=s}))})).next((()=>{if(i.result)return;const s=new $ne;return this.Xi(e,r,s).next((c=>{if(i.result=c,this.zi)return this.es(e,r,s,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(oh()<=Er.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",lh(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ke.resolve()):(oh()<=Er.DEBUG&&Xe("QueryEngine","Query:",lh(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(oh()<=Er.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",lh(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(r))):ke.resolve())}Yi(e,r){if(HO(r))return ke.resolve(null);let n=_s(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=dx(r,null,"F"),n=_s(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const s=xr(...i);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,s,d.readTime)?this.Yi(e,dx(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return HO(r)||a.isEqual(Lt.min())?ke.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(r,i);return this.ns(r,s,n,a)?ke.resolve(null):(oh()<=Er.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),lh(r)),this.rs(e,s,r,MV(a,-1)).next((c=>c)))}))}ts(e,r){let n=new xn(sF(e));return r.forEach(((a,i)=>{Zg(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return oh()<=Er.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",lh(r)),this.Ji.getDocumentsMatchingQuery(e,r,Es.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((s=>{i=i.insert(s.key,s)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new In(ir),this._s=new Ou((i=>Fd(i)),Xg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function WF(t,e,r,n){return new Une(t,e,r,n)}async function KF(t,e){const r=Ot(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const s=[],c=[];let d=xr();for(const h of a){s.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:s,addedBatchIds:c})))}))}))}function zne(t,e){const r=Ot(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,y=m.keys();let x=ke.resolve();return y.forEach((T=>{x=x.next((()=>p.getEntry(d,T))).next((_=>{const w=h.docVersions.get(T);It(w!==null),_.version.compareTo(w)<0&&(m.applyToRemoteDocument(_,h),_.isValidDocument()&&(_.setReadTime(h.commitVersion),p.addEntry(_)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=xr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function QF(t){const e=Ot(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Vne(t,e){const r=Ot(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const y=a.get(m);if(!y)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let x=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(fa.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,n)),a=a.insert(m,x),(function(_,w,E){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(y,x,p)&&c.push(r.Ur.updateTargetData(i,x))}));let d=bs(),h=xr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(Fne(i,s,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Lt.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return ke.waitFor(c).next((()=>s.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Fne(t,e,r){let n=xr(),a=xr();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let s=bs();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Lt.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):Xe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:s,Is:a}}))}function qne(t,e){const r=Ot(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function mx(t,e){const r=Ot(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,ke.resolve(a)):r.Ur.allocateTargetId(n).next((s=>(a=new Bl(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Uh(t,e,r){const n=Ot(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(s=>n.persistence.referenceDelegate.removeTarget(s,a)))}catch(s){if(!Cu(s))throw s;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function lA(t,e,r){const n=Ot(t);let a=Lt.min(),i=xr();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,h,p){const m=Ot(d),y=m._s.get(p);return y!==void 0?ke.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,s,_s(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?a:Lt.min(),r?i:xr()))).next((c=>(ZF(n,iF(e),c),{documents:c,Ts:i})))))}function XF(t,e){const r=Ot(t),n=Ot(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((s=>s?s.target:null))))}function YF(t,e){const r=Ot(t),n=r.us.get(e)||Lt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,MV(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(ZF(r,e,a),a)))}function ZF(t,e,r){let n=t.us.get(e)||Lt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function bI(t,e){return`firestore_clients_${t}_${e}`}function wI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function B5(t,e){return`firestore_targets_${t}_${e}`}class gx{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,s=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return s&&a.error&&(s=typeof a.error.message=="string"&&typeof a.error.code=="string",s&&(i=new lt(a.error.code,a.error.message))),s?new gx(e,r,a.state,i):(ca("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new lt(n.error.code,n.error.message))),i?new mm(e,n.state,a):(ca("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yx{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=R8();for(let s=0;a&&s<n.activeTargetIds.length;++s)a=$V(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return a?new yx(e,i):(ca("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class W8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new W8(r.clientId,r.onlineState):(ca("SharedClientState",`Failed to parse online state: ${e}`),null)}}class cA{constructor(){this.activeTargetIds=R8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $5{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new In(ir),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=bI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new cA),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(bI(this.persistenceKey,n));if(a){const i=yx.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(B5(this.persistenceKey,e));if(a){const i=mm.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(B5(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Xe("SharedClientState","READ",e,r),r}setItem(e,r){Xe("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ca("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let s=Ji.oe;if(i!=null)try{const c=JSON.parse(i);It(typeof c=="number"),s=c}catch(c){ca("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(r.newValue);n!==Ji.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new gx(this.currentUser,e,r,n),i=wI(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=wI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=B5(this.persistenceKey,e),i=new mm(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return yx.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return gx.Rs(new Si(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return mm.Rs(a,r)}Ls(e){return W8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),s=[],c=[];return i.forEach((d=>{a.has(d)||s.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=R8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class JF{constructor(){this.so=new cA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cA,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hne{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv=null;function U5(){return tv===null?tv=(function(){return 268435456+Math.round(2147483648*Math.random())})():tv++,"0x"+tv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="WebChannelConnection";class Kne extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,s){const c=U5(),d=this.xo(r,n.toUriEncodedString());Xe("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,s),this.No(r,d,h,a).then((p=>(Xe("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Dm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,s,c){return this.Mo(r,n,a,i,s)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Af})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>r[s]=i)),a&&a.headers.forEach(((i,s)=>r[s]=i))}xo(r,n){const a=Gne[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=U5();return new Promise(((s,c)=>{const d=new EV;d.setWithCredentials(!0),d.listenOnce(jV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Bv.NO_ERROR:const p=d.getResponseJson();Xe(xi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),s(p);break;case Bv.TIMEOUT:Xe(xi,`RPC '${e}' ${i} timed out`),c(new lt(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case Bv.HTTP_ERROR:const m=d.getStatus();if(Xe(xi,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const T=(function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(E)>=0?E:Ue.UNKNOWN})(x.status);c(new lt(T,x.message))}else c(new lt(Ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new lt(Ue.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{Xe(xi,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);Xe(xi,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=U5(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=OV(),c=CV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");Xe(xi,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=s.createWebChannel(p,d);let y=!1,x=!1;const T=new Wne({Io:w=>{x?Xe(xi,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(y||(Xe(xi,`Opening RPC '${e}' stream ${a} transport.`),m.open(),y=!0),Xe(xi,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),_=(w,E,I)=>{w.listen(E,(C=>{try{I(C)}catch(L){setTimeout((()=>{throw L}),0)}}))};return _(m,tm.EventType.OPEN,(()=>{x||(Xe(xi,`RPC '${e}' stream ${a} transport opened.`),T.yo())})),_(m,tm.EventType.CLOSE,(()=>{x||(x=!0,Xe(xi,`RPC '${e}' stream ${a} transport closed`),T.So())})),_(m,tm.EventType.ERROR,(w=>{x||(x=!0,Dm(xi,`RPC '${e}' stream ${a} transport errored:`,w),T.So(new lt(Ue.UNAVAILABLE,"The operation could not be completed")))})),_(m,tm.EventType.MESSAGE,(w=>{var E;if(!x){const I=w.data[0];It(!!I);const C=I,L=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(L){Xe(xi,`RPC '${e}' stream ${a} received error:`,L);const P=L.status;let R=(function(j){const $=_a[j];if($!==void 0)return xF($)})(P),N=L.message;R===void 0&&(R=Ue.INTERNAL,N="Unknown error status: "+P+" with message "+L.message),x=!0,T.So(new lt(R,N)),m.close()}else Xe(xi,`RPC '${e}' stream ${a} received:`,I),T.bo(I)}})),_(c,kV.STAT_EVENT,(w=>{w.stat===GT.PROXY?Xe(xi,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===GT.NOPROXY&&Xe(xi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(){return typeof window<"u"?window:null}function Hv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){return new ene(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&Xe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e,r,n,a,i,s,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new K8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ue.RESOURCE_EXHAUSTED?(ca(r.toString()),ca("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new lt(Ue.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qne extends tq{constructor(e,r,n,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=ane(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Lt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Lt.min():s.readTime?Za(s.readTime):Lt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=nA(this.serializer),r.addTarget=(function(i,s){let c;const d=s.target;if(c=cx(d)?{documents:EF(i,d)}:{query:jF(i,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=SF(i,s.resumeToken);const h=tA(i,s.expectedCount);h!==null&&(c.expectedCount=h)}else if(s.snapshotVersion.compareTo(Lt.min())>0){c.readTime=$h(i,s.snapshotVersion.toTimestamp());const h=tA(i,s.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=sne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=nA(this.serializer),r.removeTarget=e,this.a_(r)}}class Xne extends tq{constructor(e,r,n,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return It(!!e.streamToken),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=ine(e.writeResults,e.commitTime),n=Za(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=nA(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Wm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new lt(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Mo(e,rA(r,n),a,i,s))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new lt(Ue.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,rA(r,n),a,s,c,i))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new lt(Ue.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Zne{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ca(r),this.D_=!1):Xe("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((s=>{n.enqueueAndForget((async()=>{c0(this)&&(Xe("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=Ot(d);h.L_.add(4),await r1(h),h.q_.set("Unknown"),h.L_.delete(4),await c2(h)})(this))}))})),this.q_=new Zne(n,a)}}async function c2(t){if(c0(t))for(const e of t.B_)await e(!0)}async function r1(t){for(const e of t.B_)await e(!1)}function u2(t,e){const r=Ot(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Y8(r)?X8(r):kf(r).r_()&&Q8(r,e))}function zh(t,e){const r=Ot(t),n=kf(r);r.N_.delete(e),n.r_()&&rq(r,e),r.N_.size===0&&(n.r_()?n.o_():c0(r)&&r.q_.set("Unknown"))}function Q8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}kf(t).A_(e)}function rq(t,e){t.Q_.xe(e),kf(t).R_(e)}function X8(t){t.Q_=new Xre({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),kf(t).start(),t.q_.v_()}function Y8(t){return c0(t)&&!kf(t).n_()&&t.N_.size>0}function c0(t){return Ot(t).L_.size===0}function nq(t){t.Q_=void 0}async function eae(t){t.q_.set("Online")}async function tae(t){t.N_.forEach(((e,r)=>{Q8(t,e)}))}async function rae(t,e){nq(t),Y8(t)?(t.q_.M_(e),X8(t)):t.q_.set("Unknown")}async function nae(t,e,r){if(t.q_.set("Online"),e instanceof wF&&e.state===2&&e.cause)try{await(async function(a,i){const s=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,s),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await vx(t,n)}else if(e instanceof qv?t.Q_.Ke(e):e instanceof bF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Lt.min()))try{const n=await QF(t.localStore);r.compareTo(n)>=0&&await(function(i,s){const c=i.Q_.rt(s);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(fa.EMPTY_BYTE_STRING,p.snapshotVersion)),rq(i,d);const m=new Bl(p.target,d,h,p.sequenceNumber);Q8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){Xe("RemoteStore","Failed to raise snapshot:",n),await vx(t,n)}}async function vx(t,e,r){if(!Cu(e))throw e;t.L_.add(1),await r1(t),t.q_.set("Offline"),r||(r=()=>QF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Xe("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await c2(t)}))}function aq(t,e){return e().catch((r=>vx(t,r,e)))}async function jf(t){const e=Ot(t),r=Tu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aae(e);)try{const a=await qne(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,iae(e,a)}catch(a){await vx(e,a)}iq(e)&&sq(e)}function aae(t){return c0(t)&&t.O_.length<10}function iae(t,e){t.O_.push(e);const r=Tu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function iq(t){return c0(t)&&!Tu(t).n_()&&t.O_.length>0}function sq(t){Tu(t).start()}async function sae(t){Tu(t).p_()}async function oae(t){const e=Tu(t);for(const r of t.O_)e.m_(r.mutations)}async function lae(t,e,r){const n=t.O_.shift(),a=B8.from(n,e,r);await aq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await jf(t)}async function cae(t,e){e&&Tu(t).V_&&await(async function(n,a){if((function(s){return vF(s)&&s!==Ue.ABORTED})(a.code)){const i=n.O_.shift();Tu(n).s_(),await aq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await jf(n)}})(t,e),iq(t)&&sq(t)}async function _I(t,e){const r=Ot(t);r.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const n=c0(r);r.L_.add(3),await r1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await c2(r)}async function uA(t,e){const r=Ot(t);e?(r.L_.delete(2),await c2(r)):e||(r.L_.add(2),await r1(r),r.q_.set("Unknown"))}function kf(t){return t.K_||(t.K_=(function(r,n,a){const i=Ot(r);return i.w_(),new Qne(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:eae.bind(null,t),Ro:tae.bind(null,t),mo:rae.bind(null,t),d_:nae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),Y8(t)?X8(t):t.q_.set("Unknown")):(await t.K_.stop(),nq(t))}))),t.K_}function Tu(t){return t.U_||(t.U_=(function(r,n,a){const i=Ot(r);return i.w_(),new Xne(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sae.bind(null,t),mo:cae.bind(null,t),f_:oae.bind(null,t),g_:lae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await jf(t)):(await t.U_.stop(),t.O_.length>0&&(Xe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const s=Date.now()+n,c=new Z8(e,r,s,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function J8(t,e){if(ca("AsyncQueue",`${e}: ${t}`),Cu(t))return new lt(Ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||vt.comparator(r.key,n.key):(r,n)=>vt.comparator(r.key,n.key),this.keyedMap=rm(),this.sortedSet=new In(this.comparator)}static emptySet(e){return new wh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof wh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new wh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.W_=new In(vt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Et():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Vh{constructor(e,r,n,a,i,s,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const s=[];return r.forEach((c=>{s.push({type:0,doc:c})})),new Vh(e,r,wh.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&r2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class dae{constructor(){this.queries=AI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=Ot(r),i=a.queries;a.queries=AI(),i.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new lt(Ue.ABORTED,"Firestore shutting down"))}}function AI(){return new Ou((t=>aF(t)),r2)}async function e7(t,e){const r=Ot(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new uae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const c=J8(s,`Initialization of query '${lh(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&r7(r)}async function t7(t,e){const r=Ot(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const s=i.j_.indexOf(e);s>=0&&(i.j_.splice(s,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function hae(t,e){const r=Ot(t);let n=!1;for(const a of e){const i=a.query,s=r.queries.get(i);if(s){for(const c of s.j_)c.X_(a)&&(n=!0);s.z_=a}}n&&r7(r)}function fae(t,e,r){const n=Ot(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function r7(t){t.Y_.forEach((e=>{e.next()}))}var dA,NI;(NI=dA||(dA={})).ea="default",NI.Cache="cache";class n7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Vh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Vh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e){this.key=e}}class lq{constructor(e){this.key=e}}class pae{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xr(),this.mutatedKeys=xr(),this.Aa=sF(e),this.Ra=new wh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new TI,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const y=a.get(p),x=Zg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),_=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let w=!1;y&&x?y.data.isEqual(x.data)?T!==_&&(n.track({type:3,doc:x}),w=!0):this.ga(y,x)||(n.track({type:2,doc:x}),w=!0,(d&&this.Aa(x,d)>0||h&&this.Aa(x,h)<0)&&(c=!0)):!y&&x?(n.track({type:0,doc:x}),w=!0):y&&!x&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(c=!0)),w&&(x?(s=s.add(x),i=_?i.add(p):i.delete(p)):(s=s.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:s,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((p,m)=>(function(x,T){const _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return _(x)-_(T)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,s.length!==0||h?{snapshot:new Vh(this.query,e.Ra,i,s,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new TI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new lq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new oq(n))})),r}ba(e){this.Ta=e.Ts,this.da=xr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Vh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mae{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class gae{constructor(e){this.key=e,this.va=!1}}class yae{constructor(e,r,n,a,i,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ou((c=>aF(c)),r2),this.Ma=new Map,this.xa=new Set,this.Oa=new In(vt.comparator),this.Na=new Map,this.La=new q8,this.Ba={},this.ka=new Map,this.qa=Wd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vae(t,e,r=!0){const n=d2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await cq(n,e,r,!0),a}async function xae(t,e){const r=d2(t);await cq(r,e,!0,!1)}async function cq(t,e,r,n){const a=await mx(t.localStore,_s(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await a7(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&r&&u2(t.remoteStore,a),c}async function a7(t,e,r,n,a){t.Ka=(m,y,x)=>(async function(_,w,E,I){let C=w.view.ma(E);C.ns&&(C=await lA(_.localStore,w.query,!1).then((({documents:N})=>w.view.ma(N,C))));const L=I&&I.targetChanges.get(w.targetId),P=I&&I.targetMismatches.get(w.targetId)!=null,R=w.view.applyChanges(C,_.isPrimaryClient,L,P);return hA(_,w.targetId,R.wa),R.snapshot})(t,m,y,x);const i=await lA(t.localStore,e,!0),s=new pae(e,i.Ts),c=s.ma(i.documents),d=t1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=s.applyChanges(c,t.isPrimaryClient,d);hA(t,r,h.wa);const p=new mae(e,r,s);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function bae(t,e,r){const n=Ot(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((s=>!r2(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Uh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&zh(n.remoteStore,a.targetId),Fh(n,a.targetId)})).catch(ku)):(Fh(n,a.targetId),await Uh(n.localStore,a.targetId,!0))}async function wae(t,e){const r=Ot(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zh(r.remoteStore,n.targetId))}async function Sae(t,e,r){const n=l7(t);try{const a=await(function(s,c){const d=Ot(s),h=Kn.now(),p=c.reduce(((x,T)=>x.add(T.key)),xr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let T=bs(),_=xr();return d.cs.getEntries(x,p).next((w=>{T=w,T.forEach(((E,I)=>{I.isValidDocument()||(_=_.add(E))}))})).next((()=>d.localDocuments.getOverlayedDocuments(x,T))).next((w=>{m=w;const E=[];for(const I of c){const C=Gre(I,m.get(I.key).overlayedDocument);C!=null&&E.push(new lc(I.key,C,KV(C.value.mapValue),ua.exists(!0)))}return d.mutationQueue.addMutationBatch(x,h,E,c)})).next((w=>{y=w;const E=w.applyToLocalDocumentSet(m,_);return d.documentOverlayCache.saveOverlays(x,w.batchId,E)}))})).then((()=>({batchId:y.batchId,changes:lF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(s,c,d){let h=s.Ba[s.currentUser.toKey()];h||(h=new In(ir)),h=h.insert(c,d),s.Ba[s.currentUser.toKey()]=h})(n,a.batchId,r),await Iu(n,a.changes),await jf(n.remoteStore)}catch(a){const i=J8(a,"Failed to persist write");r.reject(i)}}async function uq(t,e){const r=Ot(t);try{const n=await Vne(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const s=r.Na.get(i);s&&(It(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?s.va=!0:a.modifiedDocuments.size>0?It(s.va):a.removedDocuments.size>0&&(It(s.va),s.va=!1))})),await Iu(r,n,e)}catch(n){await ku(n)}}function EI(t,e,r){const n=Ot(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,s)=>{const c=s.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(s,c){const d=Ot(s);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)})),h&&r7(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function _ae(t,e,r){const n=Ot(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let s=new In(vt.comparator);s=s.insert(i,Vn.newNoDocument(i,Lt.min()));const c=xr().add(i),d=new e1(Lt.min(),new Map,new In(ir),s,c);await uq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),o7(n)}else await Uh(n.localStore,e,!1).then((()=>Fh(n,e,r))).catch(ku)}async function Tae(t,e){const r=Ot(t),n=e.batch.batchId;try{const a=await zne(r.localStore,e);s7(r,n,null),i7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Iu(r,a)}catch(a){await ku(a)}}async function Aae(t,e,r){const n=Ot(t);try{const a=await(function(s,c){const d=Ot(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(It(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);s7(n,e,r),i7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Iu(n,a)}catch(a){await ku(a)}}function i7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function s7(t,e,r){const n=Ot(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Fh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||dq(t,n)}))}function dq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),o7(t))}function hA(t,e,r){for(const n of r)n instanceof oq?(t.La.addReference(n.key,e),Nae(t,n)):n instanceof lq?(Xe("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||dq(t,n.key)):Et()}function Nae(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Xe("SyncEngine","New document in limbo: "+r),t.xa.add(n),o7(t))}function o7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new vt($r.fromString(e)),n=t.qa.next();t.Na.set(n,new gae(r)),t.Oa=t.Oa.insert(r,n),u2(t.remoteStore,new Bl(_s(Yg(r.path)),n,"TargetPurposeLimboResolution",Ji.oe))}}async function Iu(t,e,r){const n=Ot(t),a=[],i=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=G8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(s),n.Ca.d_(a),await(async function(d,h){const p=Ot(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>ke.forEach(h,(y=>ke.forEach(y.$i,(x=>p.persistence.referenceDelegate.addReference(m,y.targetId,x))).next((()=>ke.forEach(y.Ui,(x=>p.persistence.referenceDelegate.removeReference(m,y.targetId,x)))))))))}catch(m){if(!Cu(m))throw m;Xe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const x=p.os.get(y),T=x.snapshotVersion,_=x.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,_)}}})(n.localStore,i))}async function Eae(t,e){const r=Ot(t);if(!r.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const n=await KF(r.localStore,e);r.currentUser=e,(function(i,s){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new lt(Ue.CANCELLED,s))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Iu(r,n.hs)}}function jae(t,e){const r=Ot(t),n=r.Na.get(e);if(n&&n.va)return xr().add(n.key);{let a=xr();const i=r.Ma.get(e);if(!i)return a;for(const s of i){const c=r.Fa.get(s);a=a.unionWith(c.view.Va)}return a}}async function kae(t,e){const r=Ot(t),n=await lA(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&hA(r,e.targetId,a.wa),a}async function Cae(t,e){const r=Ot(t);return YF(r.localStore,e).then((n=>Iu(r,n)))}async function Oae(t,e,r,n){const a=Ot(t),i=await(function(c,d){const h=Ot(c),p=Ot(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):ke.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await jf(a.remoteStore):r==="acknowledged"||r==="rejected"?(s7(a,e,n||null),i7(a,e),(function(c,d){Ot(Ot(c).mutationQueue).On(d)})(a.localStore,e)):Et(),await Iu(a,i)):Xe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Iae(t,e){const r=Ot(t);if(d2(r),l7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await jI(r,n.toArray());r.Qa=!0,await uA(r.remoteStore,!0);for(const i of a)u2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):a=a.then((()=>(Fh(r,s),Uh(r.localStore,s,!0)))),zh(r.remoteStore,s)})),await a,await jI(r,n),(function(s){const c=Ot(s);c.Na.forEach(((d,h)=>{zh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new In(vt.comparator)})(r),r.Qa=!1,await uA(r.remoteStore,!1)}}async function jI(t,e,r){const n=Ot(t),a=[],i=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await mx(n.localStore,_s(d[0]));for(const h of d){const p=n.Fa.get(h),m=await kae(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await XF(n.localStore,s);c=await mx(n.localStore,h),await a7(n,hq(h),s,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function hq(t){return rF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Rae(t){return(function(r){return Ot(Ot(r).persistence).Qi()})(Ot(t).localStore)}async function Mae(t,e,r,n){const a=Ot(t);if(a.Qa)return void Xe("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const s=await YF(a.localStore,iF(i[0])),c=e1.createSynthesizedRemoteEventForCurrentChange(e,r==="current",fa.EMPTY_BYTE_STRING);await Iu(a,s,c);break}case"rejected":await Uh(a.localStore,e,!0),Fh(a,e,n);break;default:Et()}}async function Pae(t,e,r){const n=d2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){Xe("SyncEngine","Adding an already active target "+a);continue}const i=await XF(n.localStore,a),s=await mx(n.localStore,i);await a7(n,hq(i),s.targetId,!1,s.resumeToken),u2(n.remoteStore,s)}for(const a of r)n.Ma.has(a)&&await Uh(n.localStore,a,!1).then((()=>{zh(n.remoteStore,a),Fh(n,a)})).catch(ku)}}function d2(t){const e=Ot(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_ae.bind(null,e),e.Ca.d_=hae.bind(null,e.eventManager),e.Ca.$a=fae.bind(null,e.eventManager),e}function l7(t){const e=Ot(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Aae.bind(null,e),e}class Km{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=l2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return WF(this.persistence,new GF,e.initialUser,this.serializer)}Ga(e){return new qF(o2.Zr,this.serializer)}Wa(e){return new JF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Km.provider={build:()=>new Km};class fq extends Km{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await l7(this.Ja.syncEngine),await jf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return WF(this.persistence,new GF,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new _ne(n,e.asyncQueue,r)}Ha(e,r){const n=new nre(r,this.persistence);return new rre(e.asyncQueue,n)}Ga(e){const r=HF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Qi.withCacheSize(this.cacheSizeBytes):Qi.DEFAULT;return new H8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,eq(),Hv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new JF}}class Dae extends fq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof $5&&(this.sharedClientState.syncEngine={no:Oae.bind(null,r),ro:Mae.bind(null,r),io:Pae.bind(null,r),Qi:Rae.bind(null,r),eo:Cae.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Iae(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=eq();if(!$5.D(r))throw new lt(Ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=HF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $5(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Qm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>EI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Eae.bind(null,this.syncEngine),await uA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dae})()}createDatastore(e){const r=l2(e.databaseInfo.databaseId),n=(function(i){return new Kne(i)})(e.databaseInfo);return(function(i,s,c,d){return new Yne(i,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,s,c){return new Jne(n,a,i,s,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>EI(this.syncEngine,r,0)),(function(){return SI.D()?new SI:new Hne})())}createSyncEngine(e,r){return(function(a,i,s,c,d,h,p){const m=new yae(a,i,s,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=Ot(a);Xe("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await r1(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ca("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lae{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new lt(Ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const s=Ot(a),c={documents:i.map((m=>Gm(s.serializer,m)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,$r.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const y=nne(s.serializer,m);h.set(y.key.toString(),y)}));const p=[];return i.forEach((m=>{const y=h.get(m.toString());It(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=vt.fromPath(n);this.mutations.push(new D8(a,this.precondition(a)))})),await(async function(n,a){const i=Ot(n),s={writes:a.map((c=>Wm(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,$r.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Et();r=Lt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new lt(Ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Lt.min())?ua.exists(!1):ua.updateTime(r):ua.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Lt.min()))throw new lt(Ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ua.updateTime(r)}return ua.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bae{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new K8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Lae(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Qg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!vF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Si.UNAUTHENTICATED,this.clientId=IV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async s=>{Xe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Xe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=J8(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function z5(t,e){t.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await KF(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function kI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Uae(t);Xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>_I(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>_I(e.remoteStore,a))),t._onlineComponents=e}async function Uae(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await z5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ue.FAILED_PRECONDITION||a.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Dm("Error using user provided cache. Falling back to memory cache: "+r),await z5(t,new Km)}}else Xe("FirestoreClient","Using default OfflineComponentProvider"),await z5(t,new Km);return t._offlineComponents}async function u7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe("FirestoreClient","Using user provided OnlineComponentProvider"),await kI(t,t._uninitializedComponentsProvider._online)):(Xe("FirestoreClient","Using default OnlineComponentProvider"),await kI(t,new Qm))),t._onlineComponents}function zae(t){return u7(t).then((e=>e.syncEngine))}function Vae(t){return u7(t).then((e=>e.datastore))}async function xx(t){const e=await u7(t),r=e.eventManager;return r.onListen=vae.bind(null,e.syncEngine),r.onUnlisten=bae.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=xae.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=wae.bind(null,e.syncEngine),r}function Fae(t,e,r={}){const n=new So;return t.asyncQueue.enqueueAndForget((async()=>(function(i,s,c,d,h){const p=new c7({next:y=>{p.Za(),s.enqueueAndForget((()=>t7(i,m)));const x=y.docs.has(c);!x&&y.fromCache?h.reject(new lt(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&y.fromCache&&d&&d.source==="server"?h.reject(new lt(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new n7(Yg(c.path),p,{includeMetadataChanges:!0,_a:!0});return e7(i,m)})(await xx(t),t.asyncQueue,e,r,n))),n.promise}function qae(t,e,r={}){const n=new So;return t.asyncQueue.enqueueAndForget((async()=>(function(i,s,c,d,h){const p=new c7({next:y=>{p.Za(),s.enqueueAndForget((()=>t7(i,m))),y.fromCache&&d.source==="server"?h.reject(new lt(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new n7(c,p,{includeMetadataChanges:!0,_a:!0});return e7(i,m)})(await xx(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(t,e,r){if(!r)throw new lt(Ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hae(t,e,r,n){if(e===!0&&n===!0)throw new lt(Ue.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function OI(t){if(!vt.isDocumentKey(t))throw new lt(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function II(t){if(vt.isDocumentKey(t))throw new lt(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function h2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Et()}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new lt(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=h2(t);throw new lt(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Gae(t,e){if(e<=0)throw new lt(Ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new lt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new lt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new lt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class d7{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RI(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Gte;switch(n.type){case"firstParty":return new Qte(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new lt(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=CI.get(r);n&&(Xe("ComponentProvider","Removing Datastore"),CI.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cc(this.firestore,e,this._query)}}class hi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hi(this.firestore,e,this._key)}}class vu extends cc{constructor(e,r,n){super(e,r,Yg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hi(this.firestore,null,new vt(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function Wt(t,e,...r){if(t=bn(t),mq("collection","path",e),t instanceof d7){const n=$r.fromString(e,...r);return II(n),new vu(t,null,n)}{if(!(t instanceof hi||t instanceof vu))throw new lt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child($r.fromString(e,...r));return II(n),new vu(t.firestore,null,n)}}function at(t,e,...r){if(t=bn(t),arguments.length===1&&(e=IV.newId()),mq("doc","path",e),t instanceof d7){const n=$r.fromString(e,...r);return OI(n),new hi(t,null,new vt(n))}{if(!(t instanceof hi||t instanceof vu))throw new lt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child($r.fromString(e,...r));return OI(n),new hi(t.firestore,t instanceof vu?t.converter:null,new vt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new K8(this,"async_queue_retry"),this.Vu=()=>{const n=Hv();n&&Xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Hv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Hv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new So;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cu(e))throw e;Xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw ca("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=Z8.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&Et()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function PI(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Yo extends d7{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new MI,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MI(e),this._firestoreClient=void 0,await e}}}function Wae(t,e,r){r||(r="(default)");const n=Hg(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Oh(i,e))return a;throw new lt(Ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new lt(Ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function n1(t){if(t._terminated)throw new lt(Ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Kae(t),t._firestoreClient}function Kae(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new Tre(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,pq(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new $ae(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kd(fa.fromBase64String(e))}catch(r){throw new lt(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Kd(fa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new lt(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new lt(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new lt(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ir(this._lat,e._lat)||ir(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qae=/^__.*__$/;class Xae{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new lc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ef(e,this.data,r,this.fieldTransforms)}}class gq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new lc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function yq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class f2{constructor(e,r,n,a,i,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new f2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yq(this.Cu)&&Qae.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Yae{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||l2(e)}Qu(e,r,n,a=!1){return new f2({Cu:e,methodName:r,qu:n,path:Wn.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function s1(t){const e=t._freezeSettings(),r=l2(t._databaseId);return new Yae(t._databaseId,!!e.ignoreUndefinedProperties,r)}function p7(t,e,r,n,a,i={}){const s=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);y7("Data must be an object, but it was:",s,n);const c=bq(n,s);let d,h;if(i.merge)d=new es(s.fieldMask),h=s.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=fA(e,m,r);if(!s.contains(y))throw new lt(Ue.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Sq(p,y)||p.push(y)}d=new es(p),h=s.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=s.fieldTransforms;return new Xae(new di(c),d,h)}class p2 extends i1{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof p2}}function Zae(t,e,r){return new f2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class m7 extends i1{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Zae(this,e,!0),n=this.Ku.map((i=>Cf(i,r))),a=new qd(n);return new P8(e.path,a)}isEqual(e){return e instanceof m7&&Oh(this.Ku,e.Ku)}}class g7 extends i1{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Bh(e.serializer,dF(e.serializer,this.$u));return new P8(e.path,r)}isEqual(e){return e instanceof g7&&this.$u===e.$u}}function vq(t,e,r,n){const a=t.Qu(1,e,r);y7("Data must be an object, but it was:",a,n);const i=[],s=di.empty();l0(n,((d,h)=>{const p=v7(e,d,r);h=bn(h);const m=a.Nu(p);if(h instanceof p2)i.push(p);else{const y=Cf(h,m);y!=null&&(i.push(p),s.set(p,y))}}));const c=new es(i);return new gq(s,c,a.fieldTransforms)}function xq(t,e,r,n,a,i){const s=t.Qu(1,e,r),c=[fA(e,n,r)],d=[a];if(i.length%2!=0)throw new lt(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)c.push(fA(e,i[y])),d.push(i[y+1]);const h=[],p=di.empty();for(let y=c.length-1;y>=0;--y)if(!Sq(h,c[y])){const x=c[y];let T=d[y];T=bn(T);const _=s.Nu(x);if(T instanceof p2)h.push(x);else{const w=Cf(T,_);w!=null&&(h.push(x),p.set(x,w))}}const m=new es(h);return new gq(p,m,s.fieldTransforms)}function Jae(t,e,r,n=!1){return Cf(r,t.Qu(n?4:3,e))}function Cf(t,e){if(wq(t=bn(t)))return y7("Unsupported field value:",e,t),bq(t,e);if(t instanceof i1)return(function(n,a){if(!yq(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let s=0;for(const c of n){let d=Cf(c,a.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=bn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Kn.fromDate(n);return{timestampValue:$h(a.serializer,i)}}if(n instanceof Kn){const i=new Kn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$h(a.serializer,i)}}if(n instanceof h7)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Kd)return{bytesValue:SF(a.serializer,n._byteString)};if(n instanceof hi){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:z8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof f7)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return M8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${h2(n)}`)})(t,e)}function bq(t,e){const r={};return qV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):l0(t,((n,a)=>{const i=Cf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function wq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kn||t instanceof h7||t instanceof Kd||t instanceof hi||t instanceof i1||t instanceof f7)}function y7(t,e,r){if(!wq(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=h2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function fA(t,e,r){if((e=bn(e))instanceof a1)return e._internalPath;if(typeof e=="string")return v7(t,e);throw bx("Field path arguments must be of type string or ",t,!1,void 0,r)}const eie=new RegExp("[~\\*/\\[\\]]");function v7(t,e,r){if(e.search(eie)>=0)throw bx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new a1(...e.split("."))._internalPath}catch{throw bx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function bx(t,e,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||s)&&(d+=" (found",i&&(d+=` in field ${n}`),s&&(d+=` in document ${a}`),d+=")"),new lt(Ue.INVALID_ARGUMENT,c+t+d)}function Sq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(m2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class tie extends wx{data(){return super.data()}}function m2(t,e){return typeof e=="string"?v7(t,e):e instanceof a1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new lt(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x7{}class b7 extends x7{}function gn(t,e,...r){let n=[];e instanceof x7&&n.push(e),n=n.concat(r),(function(i){const s=i.filter((d=>d instanceof w7)).length,c=i.filter((d=>d instanceof g2)).length;if(s>1||s>0&&c>0)throw new lt(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class g2 extends b7{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new g2(e,r,n)}_apply(e){const r=this._parse(e);return Tq(e._query,r),new cc(e.firestore,e.converter,eA(e._query,r))}_parse(e){const r=s1(e.firestore);return(function(i,s,c,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new lt(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){LI(m,p);const x=[];for(const T of m)x.push(DI(d,i,T));y={arrayValue:{values:x}}}else y=DI(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||LI(m,p),y=Jae(c,s,m,p==="in"||p==="not-in");return jr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function jn(t,e,r){const n=e,a=m2("where",t);return g2._create(a,n,r)}class w7 extends x7{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new w7(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:on.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let s=a;const c=i.getFlattenedFilters();for(const d of c)Tq(s,d),s=eA(s,d)})(e._query,r),new cc(e.firestore,e.converter,eA(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S7 extends b7{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new S7(e,r)}_apply(e){const r=(function(a,i,s){if(a.startAt!==null)throw new lt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new lt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qm(i,s)})(e._query,this._field,this._direction);return new cc(e.firestore,e.converter,(function(a,i){const s=a.explicitOrderBy.concat([i]);return new Nf(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function J0(t,e="asc"){const r=e,n=m2("orderBy",t);return S7._create(n,r)}class _7 extends b7{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new _7(e,r,n)}_apply(e){return new cc(e.firestore,e.converter,dx(e._query,this._limit,this._limitType))}}function Wc(t){return Gae("limit",t),_7._create("limit",t,"F")}function DI(t,e,r){if(typeof(r=bn(r))=="string"){if(r==="")throw new lt(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nF(e)&&r.indexOf("/")!==-1)throw new lt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child($r.fromString(r));if(!vt.isDocumentKey(n))throw new lt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vm(t,new vt(n))}if(r instanceof hi)return Vm(t,r._key);throw new lt(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h2(r)}.`)}function LI(t,e){if(!Array.isArray(t)||t.length===0)throw new lt(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Tq(t,e){const r=(function(a,i){for(const s of a)for(const c of s.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new lt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Aq{convertValue(e,r="none"){switch(Vd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Et()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return l0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((s=>zn(s.doubleValue)));return new f7(i)}convertGeoPoint(e){return new h7(zn(e.latitude),zn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=O8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Um(e));default:return null}}convertTimestamp(e){const r=Zl(e);return new Kn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=$r.fromString(e);It(IF(n));const a=new zd(n.get(1),n.get(3)),i=new vt(n.popFirst(5));return a.isEqual(r)||ca(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class rie extends Aq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new hi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A7 extends wx{constructor(e,r,n,a,i,s){super(e,r,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Gv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(m2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Gv extends A7{data(e={}){return super.data(e)}}class Nq{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new hh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Gv(this._firestore,this._userDataWriter,n.key,n,new hh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new lt(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map((c=>{const d=new Gv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new hh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new Gv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new hh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),p=s.indexOf(c.doc.key)),{type:nie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function nie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){t=rs(t,hi);const e=rs(t.firestore,Yo);return Fae(n1(e),t._key).then((r=>Eq(e,t,r)))}class y2 extends Aq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new hi(this.firestore,null,r)}}function eh(t){t=rs(t,cc);const e=rs(t.firestore,Yo),r=n1(e),n=new y2(e);return _q(t._query),qae(r,t._query).then((a=>new Nq(e,n,t,a)))}function ea(t,e,r){t=rs(t,hi);const n=rs(t.firestore,Yo),a=T7(t.converter,e,r);return v2(n,[p7(s1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,ua.none())])}function Tr(t,e,r,...n){t=rs(t,hi);const a=rs(t.firestore,Yo),i=s1(a);let s;return s=typeof(e=bn(e))=="string"||e instanceof a1?xq(i,"updateDoc",t._key,e,r,n):vq(i,"updateDoc",t._key,e),v2(a,[s.toMutation(t._key,ua.exists(!0))])}function Ka(t){return v2(rs(t.firestore,Yo),[new Jg(t._key,ua.none())])}function od(t,e){const r=rs(t.firestore,Yo),n=at(t),a=T7(t.converter,e);return v2(r,[p7(s1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,ua.exists(!1))]).then((()=>n))}function sn(t,...e){var r,n,a;t=bn(t);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||PI(e[s])||(i=e[s],s++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(PI(e[s])){const m=e[s];e[s]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[s+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[s+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof hi)h=rs(t.firestore,Yo),p=Yg(t._key.path),d={next:m=>{e[s]&&e[s](Eq(h,t,m))},error:e[s+1],complete:e[s+2]};else{const m=rs(t,cc);h=rs(m.firestore,Yo),p=m._query;const y=new y2(h);d={next:x=>{e[s]&&e[s](new Nq(h,y,m,x))},error:e[s+1],complete:e[s+2]},_q(t._query)}return(function(y,x,T,_){const w=new c7(_),E=new n7(x,w,T);return y.asyncQueue.enqueueAndForget((async()=>e7(await xx(y),E))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>t7(await xx(y),E)))}})(n1(h),p,c,d)}function v2(t,e){return(function(n,a){const i=new So;return n.asyncQueue.enqueueAndForget((async()=>Sae(await zae(n),a,i))),i.promise})(n1(t),e)}function Eq(t,e,r){const n=r.docs.get(e._key),a=new y2(t);return new A7(t,a,e._key,n,new hh(r.hasPendingWrites,r.fromCache),e.converter)}class aie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=lie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function iie(t){return new aie(t)}class sie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qm.provider,this._offlineComponentProvider={build:r=>new fq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class oie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qm.provider,this._offlineComponentProvider={build:r=>new Dae(r,e==null?void 0:e.cacheSizeBytes)}}}function lie(t){return new sie(void 0)}function cie(){return new oie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uie={maxAttempts:5};function Up(t,e){if((t=bn(t)).firestore!==e)throw new lt(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class die extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=s1(r)}get(r){const n=Up(r,this._firestore),a=new rie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Et();const s=i[0];if(s.isFoundDocument())return new wx(this._firestore,a,s.key,s,n.converter);if(s.isNoDocument())return new wx(this._firestore,a,n._key,null,n.converter);throw Et()}))}set(r,n,a){const i=Up(r,this._firestore),s=T7(i.converter,n,a),c=p7(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const s=Up(r,this._firestore);let c;return c=typeof(n=bn(n))=="string"||n instanceof a1?xq(this._dataReader,"Transaction.update",s._key,n,a,i):vq(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(r){const n=Up(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Up(e,this._firestore),n=new y2(this._firestore);return super.get(e).then((a=>new A7(this._firestore,n,r._key,a._document,new hh(!1,!1),r.converter)))}}function V5(t,e,r){t=rs(t,Yo);const n=Object.assign(Object.assign({},uie),r);return(function(i){if(i.maxAttempts<1)throw new lt(Ue.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,s,c){const d=new So;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Vae(i);new Bae(i.asyncQueue,h,c,s,d).au()})),d.promise})(n1(t),(a=>e(new die(t,a))),n)}function hie(...t){return new m7("arrayUnion",t)}function fie(t){return new g7("increment",t)}(function(e,r=!0){(function(a){Af=a})(o0),wu(new Ql("firestore",((n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),c=new Yo(new Wte(n.getProvider("auth-internal")),new Yte(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new lt(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(h.options.projectId,p)})(s,a),s);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Xs(kO,"4.7.3",e),Xs(kO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq="firebasestorage.googleapis.com",kq="storageBucket",pie=120*1e3,mie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends Eo{constructor(e,r,n=0){super(F5(e),`Firebase Storage: ${r} (${F5(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,aa.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return F5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var na;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(na||(na={}));function F5(t){return"storage/"+t}function N7(){const t="An unknown error occurred, please check the error payload for server response.";return new aa(na.UNKNOWN,t)}function gie(t){return new aa(na.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yie(t){return new aa(na.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vie(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new aa(na.UNAUTHENTICATED,t)}function xie(){return new aa(na.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bie(t){return new aa(na.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function wie(){return new aa(na.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sie(){return new aa(na.CANCELED,"User canceled the upload/download.")}function _ie(t){return new aa(na.INVALID_URL,"Invalid URL '"+t+"'.")}function Tie(t){return new aa(na.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Aie(){return new aa(na.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+kq+"' property when initializing the app?")}function Nie(){return new aa(na.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Eie(){return new aa(na.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jie(t){return new aa(na.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pA(t){return new aa(na.INVALID_ARGUMENT,t)}function Cq(){return new aa(na.APP_DELETED,"The Firebase app was deleted.")}function kie(t){return new aa(na.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gm(t,e){return new aa(na.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zp(t){throw new aa(na.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ws.makeFromUrl(e,r)}catch{return new ws(e,"")}if(n.path==="")return n;throw Tie(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+a+s,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${p}/b/${a}/o${y}`,"i"),T={bucket:1,path:3},_=r===jq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",E=new RegExp(`^https?://${_}/${a}/${w}`,"i"),C=[{regex:c,indices:d,postModify:i},{regex:x,indices:T,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<C.length;L++){const P=C[L],R=P.regex.exec(e);if(R){const N=R[P.indices.bucket];let A=R[P.indices.path];A||(A=""),n=new ws(N,A),P.postModify(n);break}}if(n==null)throw _ie(e);return n}}class Cie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oie(t,e,r){let n=1,a=null,i=null,s=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(x,d())},w)}function y(){i&&clearTimeout(i)}function x(w,...E){if(h){y();return}if(w){y(),p.call(null,w,...E);return}if(d()||s){y(),p.call(null,w,...E);return}n<64&&(n*=2);let C;c===1?(c=2,C=0):C=(n+Math.random())*1e3,m(C)}let T=!1;function _(w){T||(T=!0,y(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{s=!0,_(!0)},r),_}function Iie(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rie(t){return t!==void 0}function Mie(t){return typeof t=="object"&&!Array.isArray(t)}function E7(t){return typeof t=="string"||t instanceof String}function BI(t){return j7()&&t instanceof Blob}function j7(){return typeof Blob<"u"}function $I(t,e,r,n){if(n<e)throw pA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw pA(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Oq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Md;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Md||(Md={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pie(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Die{constructor(e,r,n,a,i,s,c,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,T)=>{this.resolve_=x,this.reject_=T,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new rv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const s=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(s),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(s),this.pendingConnection_=null;const c=i.getErrorCode()===Md.NO_ERROR,d=i.getStatus();if(!c||Pie(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Md.ABORT;n(!1,new rv(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new rv(h,i))})},r=(n,a)=>{const i=this.resolve_,s=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Rie(d)?i(d):i()}catch(d){s(d)}else if(c!==null){const d=N7();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(a.canceled){const d=this.appDelete_?Cq():Sie();s(d)}else{const d=wie();s(d)}};this.canceled_?r(!1,new rv(!1,null,!0)):this.backoffId_=Oie(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Iie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Lie(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Bie(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $ie(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Uie(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function zie(t,e,r,n,a,i,s=!0){const c=Oq(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return $ie(h,e),Lie(h,r),Bie(h,i),Uie(h,n),new Die(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Fie(...t){const e=Vie();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(j7())return new Blob(t);throw new aa(na.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qie(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hie(t){if(typeof atob>"u")throw jie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class q5{constructor(e,r){this.data=e,this.contentType=r||null}}function Gie(t,e){switch(t){case zo.RAW:return new q5(Iq(e));case zo.BASE64:case zo.BASE64URL:return new q5(Rq(t,e));case zo.DATA_URL:return new q5(Kie(e),Qie(e))}throw N7()}function Iq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,s=t.charCodeAt(++r);n=65536|(i&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Wie(t){let e;try{e=decodeURIComponent(t)}catch{throw gm(zo.DATA_URL,"Malformed data URL.")}return Iq(e)}function Rq(t,e){switch(t){case zo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw gm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw gm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Hie(e)}catch(a){throw a.message.includes("polyfill")?a:gm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Mq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw gm(zo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Xie(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Kie(t){const e=new Mq(t);return e.base64?Rq(zo.BASE64,e.rest):Wie(e.rest)}function Qie(t){return new Mq(t).contentType}function Xie(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,r){let n=0,a="";BI(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(BI(this.data_)){const n=this.data_,a=qie(n,e,r);return a===null?null:new nu(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new nu(n,!0)}}static getBlob(...e){if(j7()){const r=e.map(n=>n instanceof nu?n.data_:n);return new nu(Fie.apply(null,r))}else{const r=e.map(s=>E7(s)?Gie(zo.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(s=>{for(let c=0;c<s.length;c++)a[i++]=s[c]}),new nu(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t){let e;try{e=JSON.parse(t)}catch{return null}return Mie(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yie(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Zie(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Dq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jie(t,e){return e}class ji{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||Jie}}let nv=null;function ese(t){return!E7(t)||t.length<2?t:Dq(t)}function Lq(){if(nv)return nv;const t=[];t.push(new ji("bucket")),t.push(new ji("generation")),t.push(new ji("metageneration")),t.push(new ji("name","fullPath",!0));function e(i,s){return ese(s)}const r=new ji("name");r.xform=e,t.push(r);function n(i,s){return s!==void 0?Number(s):s}const a=new ji("size");return a.xform=n,t.push(a),t.push(new ji("timeCreated")),t.push(new ji("updated")),t.push(new ji("md5Hash",null,!0)),t.push(new ji("cacheControl",null,!0)),t.push(new ji("contentDisposition",null,!0)),t.push(new ji("contentEncoding",null,!0)),t.push(new ji("contentLanguage",null,!0)),t.push(new ji("contentType",null,!0)),t.push(new ji("metadata","customMetadata",!0)),nv=t,nv}function tse(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new ws(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function rse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const s=r[i];n[s.local]=s.xform(n,e[s.server])}return tse(n,t),n}function Bq(t,e,r){const n=Pq(e);return n===null?null:rse(t,n,r)}function nse(t,e,r,n){const a=Pq(e);if(a===null||!E7(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const s=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+s(p)+"/o/"+s(m),x=x2(y,r,n),T=Oq({alt:"media",token:h});return x+T})[0]}function ase(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class k7{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t){if(!t)throw N7()}function ise(t,e){function r(n,a){const i=Bq(t,a,e);return $q(i!==null),i}return r}function sse(t,e){function r(n,a){const i=Bq(t,a,e);return $q(i!==null),nse(i,a,t.host,t._protocol)}return r}function Uq(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=xie():a=vie():r.getStatus()===402?a=yie(t.bucket):r.getStatus()===403?a=bie(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function zq(t){const e=Uq(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=gie(t.path)),i.serverResponse=a.serverResponse,i}return r}function ose(t,e,r){const n=e.fullServerUrl(),a=x2(n,t.host,t._protocol),i="GET",s=t.maxOperationRetryTime,c=new k7(a,i,sse(t,r),s);return c.errorHandler=zq(e),c}function lse(t,e){const r=e.fullServerUrl(),n=x2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function s(d,h){}const c=new k7(n,a,s,i);return c.successCodes=[200,204],c.errorHandler=zq(e),c}function cse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function use(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=cse(null,e)),n}function dse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let L=0;L<2;L++)C=C+Math.random().toString().slice(2);return C}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const h=use(e,n,a),p=ase(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",x=nu.getBlob(m,n,y);if(x===null)throw Nie();const T={name:h.fullPath},_=x2(i,t.host,t._protocol),w="POST",E=t.maxUploadRetryTime,I=new k7(_,w,ise(t,r),E);return I.urlParams=T,I.headers=s,I.body=x.uploadData(),I.errorHandler=Uq(e),I}class hse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Md.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Md.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Md.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw zp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fse extends hse{initXhr(){this.xhr_.responseType="text"}}function C7(){return new fse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,r){this._service=e,r instanceof ws?this._location=r:this._location=ws.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Qd(e,r)}get root(){const e=new ws(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dq(this._location.path)}get storage(){return this._service}get parent(){const e=Yie(this._location.path);if(e===null)return null;const r=new ws(this._location.bucket,e);return new Qd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw kie(e)}}function pse(t,e,r){t._throwIfRoot("uploadBytes");const n=dse(t.storage,t._location,Lq(),new nu(e,!0),r);return t.storage.makeRequestWithTokens(n,C7).then(a=>({metadata:a,ref:t}))}function mse(t){t._throwIfRoot("getDownloadURL");const e=ose(t.storage,t._location,Lq());return t.storage.makeRequestWithTokens(e,C7).then(r=>{if(r===null)throw Eie();return r})}function gse(t){t._throwIfRoot("deleteObject");const e=lse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,C7)}function yse(t,e){const r=Zie(t._location.path,e),n=new ws(t._location.bucket,r);return new Qd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vse(t){return/^[A-Za-z]+:\/\//.test(t)}function xse(t,e){return new Qd(t,e)}function Vq(t,e){if(t instanceof O7){const r=t;if(r._bucket==null)throw Aie();const n=new Qd(r,r._bucket);return e!=null?Vq(n,e):n}else return e!==void 0?yse(t,e):t}function bse(t,e){if(e&&vse(e)){if(t instanceof O7)return xse(t,e);throw pA("To use ref(service, url), the first argument must be a Storage instance.")}else return Vq(t,e)}function UI(t,e){const r=e==null?void 0:e[kq];return r==null?null:ws.makeFromBucketSpec(r,t)}function wse(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:SZ(a,t.app.options.projectId))}class O7{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=jq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pie,this._maxUploadRetryTime=mie,this._requests=new Set,a!=null?this._bucket=ws.makeFromBucketSpec(a,this._host):this._bucket=UI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ws.makeFromBucketSpec(this._url,e):this._bucket=UI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$I("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$I("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qd(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new Cie(Cq());{const s=zie(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const zI="@firebase/storage",VI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq="storage";function mA(t,e,r){return t=bn(t),pse(t,e,r)}function Sx(t){return t=bn(t),mse(t)}function Sse(t){return t=bn(t),gse(t)}function ym(t,e){return t=bn(t),bse(t,e)}function _se(t=p8(),e){t=bn(t);const n=Hg(t,Fq).getImmediate({identifier:e}),a=$z("storage");return a&&Tse(n,...a),n}function Tse(t,e,r,n={}){wse(t,e,r,n)}function Ase(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new O7(r,n,a,e,o0)}function Nse(){wu(new Ql(Fq,Ase,"PUBLIC").setMultipleInstances(!0)),Xs(zI,VI,""),Xs(zI,VI,"esm2017")}Nse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ese="type.googleapis.com/google.protobuf.Int64Value",jse="type.googleapis.com/google.protobuf.UInt64Value";function qq(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function gA(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>gA(e));if(typeof t=="function"||typeof t=="object")return qq(t,e=>gA(e));throw new Error("Data cannot be encoded in JSON: "+t)}function _x(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Ese:case jse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>_x(e)):typeof t=="function"||typeof t=="object"?qq(t,e=>_x(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Sh extends Eo{constructor(e,r,n){super(`${I7}/${e}`,r||""),this.details=n}}function kse(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Cse(t,e){let r=kse(t),n=r,a;try{const i=e&&e.error;if(i){const s=i.status;if(typeof s=="string"){if(!FI[s])return new Sh("internal","internal");r=FI[s],n=s}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=_x(a))}}catch{}return r==="ok"?null:new Sh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="us-central1";function Ise(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Sh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Rse{constructor(e,r,n,a,i=yA,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Ose(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=yA}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Mse(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Pse(t,e,r){return(n=>Lse(t,e,n,{}))}async function Dse(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function Lse(t,e,r,n){const a=t._url(e);return Bse(t,a,r,n)}async function Bse(t,e,r,n){r=gA(r);const a={data:r},i={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(i.Authorization="Bearer "+s.authToken),s.messagingToken&&(i["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=Ise(c),h=await Promise.race([Dse(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Sh("cancelled","Firebase Functions instance was deleted.");const p=Cse(h.status,h.json);if(p)throw p;if(!h.json)throw new Sh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Sh("internal","Response is missing data field.");return{data:_x(m)}}const qI="@firebase/functions",HI="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $se="auth-internal",Use="app-check-internal",zse="messaging-internal";function Vse(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider($se),c=n.getProvider(zse),d=n.getProvider(Use);return new Rse(i,s,c,d,a,t)};wu(new Ql(I7,r,"PUBLIC").setMultipleInstances(!0)),Xs(qI,HI,e),Xs(qI,HI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fse(t=p8(),e=yA){const n=Hg(bn(t),I7).getImmediate({identifier:e}),a=$z("functions");return a&&qse(n,...a),n}function qse(t,e,r){Mse(bn(t),e,r)}function Wr(t,e,r){return Pse(bn(t),e)}Vse(fetch.bind(self));const Hq={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Hse=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Hse)if(!Hq[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const b2=Gz(Hq),vA=HT(b2),Gse=new Il,Pe=Wae(b2,{localCache:iie({tabManager:cie()})}),vm=_se(b2),Kr=Fse(b2),Wse=Wr(Kr,"awardXP"),Kse=Wr(Kr,"acceptQuest"),Qse=Wr(Kr,"deployMission"),Xse=Wr(Kr,"resolveQuest"),Yse=Wr(Kr,"equipItem"),Zse=Wr(Kr,"unequipItem"),Jse=Wr(Kr,"disenchantItem"),eoe=Wr(Kr,"craftItem"),toe=Wr(Kr,"adminUpdateInventory"),roe=Wr(Kr,"adminUpdateEquipped"),noe=Wr(Kr,"submitEngagement"),aoe=Wr(Kr,"sendClassMessage");Wr(Kr,"uploadQuestionBank");const Gq=Wr(Kr,"awardQuestionXP"),ioe=Wr(Kr,"penalizeWrongAnswer"),soe=Wr(Kr,"updateStreak"),ooe=Wr(Kr,"claimDailyLogin"),loe=Wr(Kr,"spinFortuneWheel"),coe=Wr(Kr,"unlockSkill"),uoe=Wr(Kr,"addSocket"),doe=Wr(Kr,"socketGem"),hoe=Wr(Kr,"unsocketGem"),foe=Wr(Kr,"dealBossDamage"),poe=Wr(Kr,"answerBossQuiz"),moe=Wr(Kr,"createParty"),goe=Wr(Kr,"joinParty"),yoe=Wr(Kr,"completeTutoring"),voe=Wr(Kr,"claimKnowledgeLoot"),xoe=Wr(Kr,"purchaseCosmetic"),boe=Wr(Kr,"claimDailyChallenge"),woe=Wr(Kr,"dismissAlert"),Tx=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),gd={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _oe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...c},d)=>O.createElement("svg",{ref:d,..._oe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Wq("lucide",a),...c},[...s.map(([h,p])=>O.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(t,e)=>{const r=O.forwardRef(({className:n,...a},i)=>O.createElement(Toe,{ref:i,iconNode:e,className:Wq(`lucide-${Soe(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=Fe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=Fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=Fe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=Fe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=Fe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=Fe("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=Fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Fe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Fe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Fe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Fe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=Fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=Fe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=Fe("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=Fe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=Fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=Fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=Fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=Fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=Fe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=Fe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=Fe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=Fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=Fe("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=Fe("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=Fe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=Fe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=Fe("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=Fe("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=Fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=Fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Fe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=Fe("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Fe("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=Fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=Fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=Fe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=Fe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=Fe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=Fe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Fe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=Fe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=Fe("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=Fe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Fe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=Fe("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=Fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=Fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=Fe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=Fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=Fe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=Fe("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=Fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Fe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Fe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=Fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=Fe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Fe("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=Fe("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=Fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=Fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=Fe("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=Fe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=Fe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=Fe("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=Fe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=Fe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=Fe("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=Fe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=Fe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Fe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=Fe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=Fe("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=Fe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=Fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=Fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=Fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=Fe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=Fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Fe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Fe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Fe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=Fe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=Fe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Fe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=Fe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=Fe("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=Fe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=Fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=Fe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=Fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Fe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=Fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=Fe("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=Fe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=Fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=Fe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=Fe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=Fe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=Fe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),yle="kellporter2@paps.net",cH="Mr. Porter",vle=[{name:"Dashboard",icon:o.jsx(Woe,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:o.jsx(T2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:o.jsx(Ts,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:o.jsx(Ao,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:o.jsx(P7,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:o.jsx(Ax,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:o.jsx(Ao,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:o.jsx(Jl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:o.jsx(Voe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:o.jsx(Doe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:o.jsx(Jl,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:o.jsx(Au,{className:"w-5 h-5"}),role:"STUDENT"}],eR=new Set,uo=(t,e,r)=>eR.has(t)?()=>{}:sn(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&eR.add(t)}),De={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>uo("xp_events",Wt(Pe,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await ea(at(Pe,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Ka(at(Pe,"xp_events",t))},subscribeToQuests:t=>uo("quests",Wt(Pe,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await ea(at(Pe,"quests",t.id),t)},deleteQuest:async t=>{await Ka(at(Pe,"quests",t))},acceptQuest:async(t,e)=>{await Kse({questId:e})},deployMission:async(t,e)=>{await Qse({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Xse({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await De.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Yse({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Zse({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Jse({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await eoe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await toe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await roe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=at(Pe,"users",t);r?await Tr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await Tr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await aoe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=at(Pe,"class_messages",t);await V5(Pe,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=at(Pe,"class_messages",t);await V5(Pe,async n=>{const a=await n.get(r);if(!a.exists())return;const s=[...a.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=at(Pe,"class_messages",t);await Tr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Ka(at(Pe,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=gn(Wt(Pe,"class_messages"),jn("isFlagged","==",!0),Wc(50));return sn(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=at(Pe,"class_messages",t);await Tr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===De.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await Tr(at(Pe,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await od(Wt(Pe,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await Tr(at(Pe,"student_groups",t),r)},deleteStudentGroup:async t=>{await Ka(at(Pe,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=gn(Wt(Pe,"student_groups"),jn("classType","==",t));return sn(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>sn(Wt(Pe,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=gn(Wt(Pe,"student_groups"),jn("memberIds","array-contains",t));return sn(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=gn(Wt(Pe,"class_messages"),jn("channelId","==",t),Wc(100));return sn(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,s)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToAllConversations:t=>{const e=gn(Wt(Pe,"conversations"),J0("lastMessageAt","desc"));return sn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=gn(Wt(Pe,`conversations/${t}/messages`),J0("timestamp","asc"));return sn(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===bi.ADMIN?cH:e.name,content:r,timestamp:new Date().toISOString()};await od(Wt(Pe,`conversations/${t}/messages`),n),await Tr(at(Pe,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await Tr(at(Pe,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=gn(Wt(Pe,"chat_flags"),jn("isResolved","==",!1));return sn(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await Tr(at(Pe,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=gn(Wt(Pe,"chat_flags"),jn("messageId","==",t),jn("isResolved","==",!1)),n=(await eh(e)).docs.map(a=>Tr(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=gn(Wt(Pe,"evidence"),jn("studentId","==",t),jn("weekId","==",e));return sn(n,a=>{const i=a.docs.map(s=>({id:s.id,...s.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await ea(at(Pe,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=ym(vm,n.imageUrl);return Sse(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Ka(at(Pe,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await ea(at(Pe,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=at(Pe,"users",t);await Tr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await Tr(at(Pe,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await Tr(at(Pe,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Wt(Pe,"users");return sn(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Wt(Pe,"assignments");return sn(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:i.dueDate}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=gn(Wt(Pe,"submissions"),J0("submittedAt","desc"),Wc(200));return sn(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Tx(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=gn(Wt(Pe,"submissions"),jn("userId","==",t),Wc(50));return sn(r,n=>{const a=n.docs.map(i=>{const s=i.data();return{id:i.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||Tx(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,s)=>new Date(s.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Wt(Pe,"allowed_emails");return sn(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Wt(Pe,"class_configs");return sn(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null};t.id?await ea(at(Pe,"assignments",t.id),e,{merge:!0}):await od(Wt(Pe,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await Tr(at(Pe,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Ka(at(Pe,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=at(Pe,"allowed_emails",t),n=await Ra(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await ea(r,{classType:e,classTypes:i});const s=gn(Wt(Pe,"users"),jn("email","==",t)),c=await eh(s);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await Tr(at(Pe,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await Tr(at(Pe,"allowed_emails",t),{section:e});const r=gn(Wt(Pe,"users"),jn("email","==",t)),n=await eh(r);await Promise.all(n.docs.map(async a=>{await Tr(at(Pe,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await Tr(at(Pe,"users",t),{section:e})},removeFromWhitelist:async t=>{try{await Ka(at(Pe,"allowed_emails",t));const e=gn(Wt(Pe,"users"),jn("email","==",t)),r=await eh(e);await Promise.all(r.docs.map(async n=>{await Tr(at(Pe,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=at(Pe,"users",t),n=await Ra(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),s=Array.from(new Set([...i,e]));await Tr(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=a.email;if(c){const d=await Ra(at(Pe,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await ea(at(Pe,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await Ra(at(Pe,"users",t));if(e.exists()){const r=e.data().email;await Ka(at(Pe,"allowed_emails",r))}await Ka(at(Pe,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await ea(at(Pe,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,s=at(Pe,"submissions",i);(await Ra(s)).exists()?await Tr(s,{"metrics.engagementTime":fie(a),"metrics.lastActive":Date.now()}):await ea(s,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=at(Pe,"users",t),n=await Ra(r);if(!n.exists())return;const i=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,i&&await Ka(at(Pe,"allowed_emails",i))):(s.isWhitelisted=!0,i&&await ea(at(Pe,"allowed_emails",i),{classType:e[0],classTypes:e})),await Tr(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=at(Pe,"users",t),n=await Ra(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await Tr(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const s=n.data().email;s&&await ea(at(Pe,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await Tr(at(Pe,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Wse({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await noe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=gn(Wt(Pe,"users"),jn("role","==","STUDENT"));return sn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await ea(at(Pe,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Ka(at(Pe,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=ym(vm,`resources/${e}_${t.name}`);return await mA(r,t),await Sx(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=ym(vm,`resources/html/${e}_${t.name}`);return await mA(r,t),await Sx(r)},subscribeToAnnouncements:t=>{const e=gn(Wt(Pe,"announcements"),J0("createdAt","desc"),Wc(20));return uo("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await od(Wt(Pe,"announcements"),t)},deleteAnnouncement:async t=>{await Ka(at(Pe,"announcements",t))},dismissAnnouncement:async(t,e)=>{await Tr(at(Pe,"users",t),{"gamification.dismissedAnnouncements":hie(e)})},subscribeToNotifications:(t,e)=>{const r=gn(Wt(Pe,"notifications"),jn("userId","==",t),J0("timestamp","desc"),Wc(50));return sn(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await Tr(at(Pe,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=gn(Wt(Pe,"notifications"),jn("userId","==",t),jn("isRead","==",!1)),n=(await eh(e)).docs.map(a=>Tr(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await od(Wt(Pe,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(s=>od(Wt(Pe,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await Tr(at(Pe,"users",t),n)},toggleCodenameLock:async(t,e)=>{await Tr(at(Pe,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await soe({})).data,claimDailyLogin:async()=>(await ooe({})).data,spinFortuneWheel:async t=>(await loe({classType:t})).data,unlockSkill:async(t,e)=>(await coe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await uoe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await doe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await hoe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=gn(Wt(Pe,"boss_encounters"),jn("isActive","==",!0));return uo("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Wt(Pe,"boss_encounters");return sn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=at(Pe,"boss_encounters",t.id);await ea(e,t)},toggleBossActive:async(t,e)=>{const r=at(Pe,"boss_encounters",t);await Tr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=at(Pe,"boss_encounters",t);await Ka(e)},subscribeToBossShards:(t,e)=>{const r=Wt(Pe,`boss_encounters/${t}/shards`);return sn(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Wt(Pe,`boss_encounters/${t}/damage_log`);return sn(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await foe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=gn(Wt(Pe,"boss_quizzes"),jn("isActive","==",!0));return uo("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Wt(Pe,`boss_quizzes/${t}/shards`);return sn(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await poe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Wt(Pe,"boss_quizzes");return sn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=at(Pe,"boss_quizzes",t.id);await ea(e,t)},toggleBossQuizActive:async(t,e)=>{const r=at(Pe,"boss_quizzes",t);await Tr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=at(Pe,"boss_quizzes",t);await Ka(e)},subscribeToBossQuestionBanks:t=>sn(Wt(Pe,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=at(Pe,"boss_question_banks",t.id);await ea(e,t)},deleteBossQuestionBank:async t=>{await Ka(at(Pe,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=gn(Wt(Pe,"boss_quiz_progress"),jn("quizId","==",t));return(await eh(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=at(Pe,"boss_quiz_progress",`${t}_${e}`);return sn(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await moe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await goe({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>sn(at(Pe,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await od(Wt(Pe,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await Tr(at(Pe,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await Tr(at(Pe,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await Tr(at(Pe,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=at(Pe,"tutoring_sessions",t),a=await Ra(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),s=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[s]:r};i[c]&&(d.status="COMPLETED"),await Tr(n,d)},subscribeToAllTutoringSessions:t=>{const e=gn(Wt(Pe,"tutoring_sessions"),J0("createdAt","desc"),Wc(100));return sn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Ka(at(Pe,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=gn(Wt(Pe,"tutoring_sessions"),jn("classType","==",t),Wc(50));return uo("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,s)=>new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await yoe({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=gn(Wt(Pe,"knowledge_gates"),jn("isActive","==",!0));return uo("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await voe({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=gn(Wt(Pe,"seasonal_cosmetics"),jn("isAvailable","==",!0));return uo("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await xoe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await Tr(at(Pe,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=gn(Wt(Pe,"daily_challenges"),jn("date","==",e));return uo("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await boe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=at(Pe,"users",t);await V5(Pe,async i=>{var h;const s=await i.get(a);if(!s.exists())return;const c=((h=s.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await Ra(at(Pe,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=gn(Wt(Pe,"student_alerts"),jn("isDismissed","==",!1));return uo("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const s={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(s[i.riskLevel]||0)-(s[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await woe({alertId:t})},subscribeToStudentBuckets:t=>uo("student_buckets",Wt(Pe,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=gn(Wt(Pe,"practice_progress"),jn("userId","==",t));return sn(r,n=>{const a={};n.forEach(i=>{const s=i.data();s.assignmentId&&s.completed&&(a[s.assignmentId]={completed:s.completed||!1,totalCompletions:s.totalCompletions||0,bestScore:s.bestScore??null,completedAt:s.completedAt??null})}),e(a)},()=>{})}},uH=O.createContext(null),pi=()=>{const t=O.useContext(uH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},xle={success:o.jsx(Cn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:o.jsx(ks,{className:"w-5 h-5 text-red-400 shrink-0"}),info:o.jsx(Zq,{className:"w-5 h-5 text-blue-400 shrink-0"})},ble={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},wle=({children:t})=>{const[e,r]=O.useState([]),n=O.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:s,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=O.useCallback(s=>{r(c=>c.filter(d=>d.id!==s))},[]),i={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return o.jsxs(uH.Provider,{value:i,children:[t,o.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>o.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${ble[s.type]}`,children:[xle[s.type],o.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),o.jsx("button",{onClick:()=>a(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:o.jsx(Pa,{className:"w-4 h-4"})})]},s.id))})]})},Sle=()=>{const[t,e]=O.useState(navigator.onLine),[r,n]=O.useState(!1);return O.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:o.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?o.jsxs(o.Fragment,{children:[o.jsx(gle,{className:"w-4 h-4"}),"Connection restored"]}):o.jsxs(o.Fragment,{children:[o.jsx(mle,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var fh=Mz();const Ti=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(O.useEffect(()=>{const i=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?fh.createPortal(o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:o.jsx(Pa,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),_le="/favicon.svg";function Of(){return typeof window<"u"&&"Notification"in window}function Kv(){return Of()?Notification.permission:"unsupported"}async function dH(){return Of()?await Notification.requestPermission():"unsupported"}function Tle(t,e,r){if(!(!Of()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:_le,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function Ale(t,e){const r=O.useRef(new Set),n=O.useRef(!0),a=O.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const s=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of s.slice(0,3))Tle(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);O.useEffect(()=>{if(!t||!e||!Of())return;n.current=!0,r.current=new Set;const i=De.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const Nle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[a,i]=ae.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=ae.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,h]=ae.useState(!1),p=pi(),m=_=>{i(w=>({...w,[_]:!w[_]}))},y=async()=>{var _;h(!0);try{await n(a),s!==(((_=r.gamification)==null?void 0:_.codename)||"")&&await De.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},x=({icon:_,title:w,description:E,value:I,onToggle:C})=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${I?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:o.jsx(_,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:w}),o.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:E})]})]}),o.jsx("button",{onClick:C,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${I?"bg-purple-600":"bg-white/20"}`,children:o.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${I?"translate-x-5":"translate-x-0"}`})})]});return o.jsx(Ti,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(x,{icon:tle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),o.jsx(x,{icon:Moe,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(x,{icon:To,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&o.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),o.jsx("input",{type:"text",value:s,onChange:_=>c(_.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(x,{icon:nle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),o.jsx(x,{icon:ple,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(_=>({..._,soundEffects:_.soundEffects===!1}))})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),o.jsx("div",{className:"space-y-2",children:Of()?o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:o.jsx(Kq,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),o.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:Kv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),o.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(_=>({..._,pushNotifications:!1}));else{const _=await dH();_==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):_==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:Kv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${Kv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:o.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):o.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),o.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?o.jsx(Ss,{className:"w-5 h-5 animate-spin"}):o.jsx(iH,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let K5=null,hH=!0;function Ele(t){hH=t}function jle(){if(!K5){const t=window.AudioContext||window.webkitAudioContext;K5=new t}return K5}function er(t,e,r="sine",n=.15){if(hH)try{const a=jle(),i=a.createOscillator(),s=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),s.gain.setValueAtTime(n,a.currentTime),s.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(s),s.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Bn={xpGain:()=>{er(600,.1,"sine",.1),setTimeout(()=>er(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{er(1200,.15,"sine",.08),setTimeout(()=>er(1500,.12,"sine",.06),100),setTimeout(()=>er(1800,.2,"triangle",.05),180)},questAccept:()=>{er(440,.15,"square",.06),setTimeout(()=>er(660,.2,"square",.06),120)},questDeploy:()=>{er(880,.12,"sawtooth",.05),setTimeout(()=>er(660,.12,"sawtooth",.05),100),setTimeout(()=>er(550,.2,"sawtooth",.04),200)},equip:()=>{er(200,.05,"square",.1),setTimeout(()=>er(400,.08,"sine",.08),50)},salvage:()=>{er(300,.15,"sawtooth",.06),setTimeout(()=>er(200,.2,"sawtooth",.04),100),setTimeout(()=>er(100,.3,"sawtooth",.03),200)},craft:()=>{er(150,.08,"square",.1),setTimeout(()=>er(800,.2,"triangle",.08),60)},error:()=>{er(200,.15,"square",.08),setTimeout(()=>er(150,.2,"square",.06),120)},messageSend:()=>{er(500,.06,"sine",.05)},notification:()=>{er(800,.1,"sine",.06),setTimeout(()=>er(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>er(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{er(523,.12,"sine",.08),setTimeout(()=>er(659,.12,"sine",.07),100),setTimeout(()=>er(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>er(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{er(523,.15,"triangle",.1),setTimeout(()=>er(784,.15,"triangle",.1),120),setTimeout(()=>er(1047,.3,"sine",.12),240)},skillUnlock:()=>{er(300,.1,"sawtooth",.06),setTimeout(()=>er(600,.1,"sawtooth",.06),80),setTimeout(()=>er(900,.15,"sine",.08),160)},bossHit:()=>{er(100,.1,"square",.12),setTimeout(()=>er(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{er(1200,.08,"sine",.08),setTimeout(()=>er(1600,.1,"sine",.06),60),setTimeout(()=>er(2e3,.15,"triangle",.04),120)},partyJoin:()=>{er(440,.1,"sine",.06),setTimeout(()=>er(554,.1,"sine",.06),80),setTimeout(()=>er(659,.15,"sine",.05),160)},chestOpen:()=>{er(200,.15,"square",.06),setTimeout(()=>er(300,.1,"square",.05),100),setTimeout(()=>er(500,.1,"triangle",.06),200),setTimeout(()=>er(800,.2,"sine",.08),350)}},kle={QUEST_APPROVED:o.jsx(Dd,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:o.jsx(Dd,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:o.jsx(wA,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:o.jsx(Dd,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:o.jsx(aH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:o.jsx(joe,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:o.jsx(kx,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:o.jsx(Ba,{className:"w-4 h-4 text-cyan-400"})},tR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=O.useState([]),[s,c]=O.useState(!1),[d,h]=O.useState(!1),p=O.useRef(null),m=O.useRef(0);O.useEffect(()=>{s&&Of()&&Kv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[s,e==null?void 0:e.pushNotifications]),O.useEffect(()=>{const w=De.subscribeToNotifications(t,E=>{const I=E.filter(C=>!C.isRead).length;I>m.current&&m.current>=0&&Bn.notification(),m.current=I,i(E)});return()=>w()},[t]),O.useEffect(()=>{const w=E=>{p.current&&!p.current.contains(E.target)&&c(!1)};return s&&document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[s]);const y=a.filter(w=>!w.isRead).length,x=async()=>{await De.markAllNotificationsRead(t)},T=async w=>{w.isRead||await De.markNotificationRead(w.id)},_=w=>{const E=Date.now()-new Date(w).getTime();return E<6e4?"just now":E<36e5?`${Math.floor(E/6e4)}m ago`:E<864e5?`${Math.floor(E/36e5)}h ago`:`${Math.floor(E/864e5)}d ago`};return o.jsxs("div",{className:"relative",ref:p,children:[o.jsxs("button",{onClick:()=>c(!s),className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[o.jsx(H5,{className:"w-5 h-5"}),y>0&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:y>9?"9+":y})]}),s&&o.jsxs("div",{className:`absolute w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in fade-in duration-200 ${n?"bottom-full mb-2 right-0 slide-in-from-bottom-2":"top-full mt-2 right-0 slide-in-from-top-2"}`,children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[o.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),y>0&&o.jsxs("button",{onClick:x,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[o.jsx(Ooe,{className:"w-3 h-3"})," Mark all read"]})]}),d&&o.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Kq,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("button",{onClick:async()=>{await dH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),o.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),o.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx(H5,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(w=>o.jsxs("div",{onClick:()=>T(w),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${w.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[o.jsx("div",{className:"mt-0.5 shrink-0",children:kle[w.type]||o.jsx(H5,{className:"w-4 h-4 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-xs font-bold text-white truncate",children:w.title}),o.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:w.message}),o.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:_(w.timestamp)})]}),!w.isRead&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},w.id))})]})]})},Cle=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var T,_;const[i,s]=O.useState(""),[c,d]=O.useState(!1),[h,p]=O.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};O.useEffect(()=>{if(!m.liveBackground){s("");return}(async()=>{try{const E=ym(vm,"public/background.mp4"),I=await Sx(E);s(I)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[m.liveBackground]);const y=async w=>{await De.updateUserSettings(t.id,w)},x=()=>{const w=vle.filter(E=>!(E.role==="ADMIN"&&t.role!==bi.ADMIN||E.role==="STUDENT"&&t.role!==bi.STUDENT));return o.jsx(o.Fragment,{children:w.map(E=>o.jsxs("button",{onClick:()=>{n(E.name),p(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===E.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[o.jsx("span",{className:`${r===E.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:E.icon}),o.jsx("span",{className:"font-medium text-sm",children:E.name})]},E.name))})};return o.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[o.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&o.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:o.jsx("source",{src:i,type:"video/mp4"})},i)}),o.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),o.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:o.jsx(Au,{className:"w-5 h-5 text-white"})}),o.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tR,{userId:t.id,settings:m,onUpdateSettings:y}),o.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:o.jsx(Xoe,{className:"w-6 h-6"})})]})]}),h&&o.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),o.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),o.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),o.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:o.jsx(Pa,{className:"w-6 h-6"})})]}),o.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:o.jsx(x,{})}),o.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[o.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[o.jsx(Xm,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Settings"})]}),o.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[o.jsx(QI,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),o.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:o.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[o.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[o.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:o.jsx(Au,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),o.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===bi.ADMIN?"Admin System":"Operative Terminal"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:o.jsx(x,{})}),o.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((_=t.gamification)==null?void 0:_.codename)||"Agent":t.name}),o.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(tR,{userId:t.id,settings:m,onUpdateSettings:y,dropUp:!0}),o.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:o.jsx(Xm,{className:"w-4 h-4"})})]})]}),o.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[o.jsx(QI,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),o.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:o.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),o.jsx(Nle,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class Xi{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Xi(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class As{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new As(r,Xi.range(this,e))}}class rt{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,s=r&&r.loc;if(s&&s.start<=s.end){var c=s.lexer.input;a=s.start,i=s.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=rt.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}rt.prototype.__proto__=Error.prototype;var Ole=function(e,r){return e===void 0?r:e},Ile=/([A-Z])/g,Rle=function(e){return e.replace(Ile,"-$1").toLowerCase()},Mle={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ple=/[&><"']/g;function Dle(t){return String(t).replace(Ple,e=>Mle[e])}var fH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Lle=function(e){var r=fH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Ble=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},$le=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},zr={deflt:Ole,escape:Dle,hyphenate:Rle,getBaseElem:fH,isCharacterBox:Lle,protocolFromUrl:$le},Qv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Ule(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class L7{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in Qv)if(Qv.hasOwnProperty(r)){var n=Qv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Ule(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new rt("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=zr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Kc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Bo[zle[this.id]]}sub(){return Bo[Vle[this.id]]}fracNum(){return Bo[Fle[this.id]]}fracDen(){return Bo[qle[this.id]]}cramp(){return Bo[Hle[this.id]]}text(){return Bo[Gle[this.id]]}isTight(){return this.size>=2}}var B7=0,Ix=1,Th=2,Fl=3,Ym=4,Ks=5,Wh=6,Ri=7,Bo=[new Kc(B7,0,!1),new Kc(Ix,0,!0),new Kc(Th,1,!1),new Kc(Fl,1,!0),new Kc(Ym,2,!1),new Kc(Ks,2,!0),new Kc(Wh,3,!1),new Kc(Ri,3,!0)],zle=[Ym,Ks,Ym,Ks,Wh,Ri,Wh,Ri],Vle=[Ks,Ks,Ks,Ks,Ri,Ri,Ri,Ri],Fle=[Th,Fl,Ym,Ks,Wh,Ri,Wh,Ri],qle=[Fl,Fl,Ks,Ks,Ri,Ri,Ri,Ri],Hle=[Ix,Ix,Fl,Fl,Ks,Ks,Ri,Ri],Gle=[B7,Ix,Th,Fl,Th,Fl,Th,Fl],Ft={DISPLAY:Bo[B7],TEXT:Bo[Th],SCRIPT:Bo[Ym],SCRIPTSCRIPT:Bo[Wh]},_A=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Wle(t){for(var e=0;e<_A.length;e++)for(var r=_A[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var Xv=[];_A.forEach(t=>t.blocks.forEach(e=>Xv.push(...e)));function pH(t){for(var e=0;e<Xv.length;e+=2)if(t>=Xv[e]&&t<=Xv[e+1])return!0;return!1}var th=80,Kle=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Qle=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Xle=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Yle=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Zle=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Jle=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},ece=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},tce=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=Kle(r,th);break;case"sqrtSize1":a=Qle(r,th);break;case"sqrtSize2":a=Xle(r,th);break;case"sqrtSize3":a=Yle(r,th);break;case"sqrtSize4":a=Zle(r,th);break;case"sqrtTall":a=ece(r,th,n)}return a},rce=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},rR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},nce=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class o1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Fo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},iv={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},nR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function ace(t,e){Fo[t]=e}function $7(t,e,r){if(!Fo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=Fo[e][n];if(!a&&t[0]in nR&&(n=nR[t[0]].charCodeAt(0),a=Fo[e][n]),!a&&r==="text"&&pH(n)&&(a=Fo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var Q5={};function ice(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!Q5[e]){var r=Q5[e]={cssEmPerMu:iv.quad[e]/18};for(var n in iv)iv.hasOwnProperty(n)&&(r[n]=iv[n][e])}return Q5[e]}var sce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],aR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],iR=function(e,r){return r.size<2?e:sce[e-1][r.size-1]};class Ol{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Ol.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=aR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Ol(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:iR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:aR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=iR(Ol.BASESIZE,e);return this.size===r&&this.textSize===Ol.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Ol.BASESIZE?["sizing","reset-size"+this.size,"size"+Ol.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=ice(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Ol.BASESIZE=6;var TA={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},oce={ex:!0,em:!0,mu:!0},mH=function(e){return typeof e!="string"&&(e=e.unit),e in TA||e in oce||e==="ex"},Gn=function(e,r){var n;if(e.unit in TA)n=TA[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new rt("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},ft=function(e){return+e.toFixed(4)+"em"},Nu=function(e){return e.filter(r=>r).join(" ")},gH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},yH=function(e){var r=document.createElement(e);r.className=Nu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},lce=/[\s"'>/=\x00-\x1f]/,vH=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+zr.escape(Nu(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=zr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+zr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(lce.test(i))throw new rt("Invalid attribute name '"+i+"'");r+=" "+i+'="'+zr.escape(this.attributes[i])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class l1{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,gH.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return yH.call(this,"span")}toMarkup(){return vH.call(this,"span")}}class U7{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,gH.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return yH.call(this,"a")}toMarkup(){return vH.call(this,"a")}}class cce{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+zr.escape(this.src)+'"'+(' alt="'+zr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=zr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+zr.escape(r)+'"'),e+="'/>",e}}var uce={:"",:"",:"",:""};class Zs{constructor(e,r,n,a,i,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=Wle(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=uce[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=ft(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Nu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=zr.escape(Nu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=zr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+zr.escape(n)+'"');var i=zr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class ec{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+zr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Eu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",rR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+zr.escape(this.alternate)+'"/>':'<path d="'+zr.escape(rR[this.pathName])+'"/>'}}class AA{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+zr.escape(this.attributes[r])+'"');return e+="/>",e}}function sR(t){if(t instanceof Zs)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function dce(t){if(t instanceof l1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var hce={bin:1,close:1,inner:1,open:1,punct:1,rel:1},fce={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},On={math:{},text:{}};function k(t,e,r,n,a,i){On[t][a]={font:e,group:r,replace:n},i&&n&&(On[t][n]=On[t][a])}var D="math",Qe="text",W="main",ie="ams",qn="accent-token",_t="bin",Bi="close",If="inner",Vt="mathord",ja="op-token",Cs="open",E2="punct",se="rel",uc="spacing",pe="textord";k(D,W,se,"","\\equiv",!0);k(D,W,se,"","\\prec",!0);k(D,W,se,"","\\succ",!0);k(D,W,se,"","\\sim",!0);k(D,W,se,"","\\perp");k(D,W,se,"","\\preceq",!0);k(D,W,se,"","\\succeq",!0);k(D,W,se,"","\\simeq",!0);k(D,W,se,"","\\mid",!0);k(D,W,se,"","\\ll",!0);k(D,W,se,"","\\gg",!0);k(D,W,se,"","\\asymp",!0);k(D,W,se,"","\\parallel");k(D,W,se,"","\\bowtie",!0);k(D,W,se,"","\\smile",!0);k(D,W,se,"","\\sqsubseteq",!0);k(D,W,se,"","\\sqsupseteq",!0);k(D,W,se,"","\\doteq",!0);k(D,W,se,"","\\frown",!0);k(D,W,se,"","\\ni",!0);k(D,W,se,"","\\propto",!0);k(D,W,se,"","\\vdash",!0);k(D,W,se,"","\\dashv",!0);k(D,W,se,"","\\owns");k(D,W,E2,".","\\ldotp");k(D,W,E2,"","\\cdotp");k(D,W,pe,"#","\\#");k(Qe,W,pe,"#","\\#");k(D,W,pe,"&","\\&");k(Qe,W,pe,"&","\\&");k(D,W,pe,"","\\aleph",!0);k(D,W,pe,"","\\forall",!0);k(D,W,pe,"","\\hbar",!0);k(D,W,pe,"","\\exists",!0);k(D,W,pe,"","\\nabla",!0);k(D,W,pe,"","\\flat",!0);k(D,W,pe,"","\\ell",!0);k(D,W,pe,"","\\natural",!0);k(D,W,pe,"","\\clubsuit",!0);k(D,W,pe,"","\\wp",!0);k(D,W,pe,"","\\sharp",!0);k(D,W,pe,"","\\diamondsuit",!0);k(D,W,pe,"","\\Re",!0);k(D,W,pe,"","\\heartsuit",!0);k(D,W,pe,"","\\Im",!0);k(D,W,pe,"","\\spadesuit",!0);k(D,W,pe,"","\\S",!0);k(Qe,W,pe,"","\\S");k(D,W,pe,"","\\P",!0);k(Qe,W,pe,"","\\P");k(D,W,pe,"","\\dag");k(Qe,W,pe,"","\\dag");k(Qe,W,pe,"","\\textdagger");k(D,W,pe,"","\\ddag");k(Qe,W,pe,"","\\ddag");k(Qe,W,pe,"","\\textdaggerdbl");k(D,W,Bi,"","\\rmoustache",!0);k(D,W,Cs,"","\\lmoustache",!0);k(D,W,Bi,"","\\rgroup",!0);k(D,W,Cs,"","\\lgroup",!0);k(D,W,_t,"","\\mp",!0);k(D,W,_t,"","\\ominus",!0);k(D,W,_t,"","\\uplus",!0);k(D,W,_t,"","\\sqcap",!0);k(D,W,_t,"","\\ast");k(D,W,_t,"","\\sqcup",!0);k(D,W,_t,"","\\bigcirc",!0);k(D,W,_t,"","\\bullet",!0);k(D,W,_t,"","\\ddagger");k(D,W,_t,"","\\wr",!0);k(D,W,_t,"","\\amalg");k(D,W,_t,"&","\\And");k(D,W,se,"","\\longleftarrow",!0);k(D,W,se,"","\\Leftarrow",!0);k(D,W,se,"","\\Longleftarrow",!0);k(D,W,se,"","\\longrightarrow",!0);k(D,W,se,"","\\Rightarrow",!0);k(D,W,se,"","\\Longrightarrow",!0);k(D,W,se,"","\\leftrightarrow",!0);k(D,W,se,"","\\longleftrightarrow",!0);k(D,W,se,"","\\Leftrightarrow",!0);k(D,W,se,"","\\Longleftrightarrow",!0);k(D,W,se,"","\\mapsto",!0);k(D,W,se,"","\\longmapsto",!0);k(D,W,se,"","\\nearrow",!0);k(D,W,se,"","\\hookleftarrow",!0);k(D,W,se,"","\\hookrightarrow",!0);k(D,W,se,"","\\searrow",!0);k(D,W,se,"","\\leftharpoonup",!0);k(D,W,se,"","\\rightharpoonup",!0);k(D,W,se,"","\\swarrow",!0);k(D,W,se,"","\\leftharpoondown",!0);k(D,W,se,"","\\rightharpoondown",!0);k(D,W,se,"","\\nwarrow",!0);k(D,W,se,"","\\rightleftharpoons",!0);k(D,ie,se,"","\\nless",!0);k(D,ie,se,"","\\@nleqslant");k(D,ie,se,"","\\@nleqq");k(D,ie,se,"","\\lneq",!0);k(D,ie,se,"","\\lneqq",!0);k(D,ie,se,"","\\@lvertneqq");k(D,ie,se,"","\\lnsim",!0);k(D,ie,se,"","\\lnapprox",!0);k(D,ie,se,"","\\nprec",!0);k(D,ie,se,"","\\npreceq",!0);k(D,ie,se,"","\\precnsim",!0);k(D,ie,se,"","\\precnapprox",!0);k(D,ie,se,"","\\nsim",!0);k(D,ie,se,"","\\@nshortmid");k(D,ie,se,"","\\nmid",!0);k(D,ie,se,"","\\nvdash",!0);k(D,ie,se,"","\\nvDash",!0);k(D,ie,se,"","\\ntriangleleft");k(D,ie,se,"","\\ntrianglelefteq",!0);k(D,ie,se,"","\\subsetneq",!0);k(D,ie,se,"","\\@varsubsetneq");k(D,ie,se,"","\\subsetneqq",!0);k(D,ie,se,"","\\@varsubsetneqq");k(D,ie,se,"","\\ngtr",!0);k(D,ie,se,"","\\@ngeqslant");k(D,ie,se,"","\\@ngeqq");k(D,ie,se,"","\\gneq",!0);k(D,ie,se,"","\\gneqq",!0);k(D,ie,se,"","\\@gvertneqq");k(D,ie,se,"","\\gnsim",!0);k(D,ie,se,"","\\gnapprox",!0);k(D,ie,se,"","\\nsucc",!0);k(D,ie,se,"","\\nsucceq",!0);k(D,ie,se,"","\\succnsim",!0);k(D,ie,se,"","\\succnapprox",!0);k(D,ie,se,"","\\ncong",!0);k(D,ie,se,"","\\@nshortparallel");k(D,ie,se,"","\\nparallel",!0);k(D,ie,se,"","\\nVDash",!0);k(D,ie,se,"","\\ntriangleright");k(D,ie,se,"","\\ntrianglerighteq",!0);k(D,ie,se,"","\\@nsupseteqq");k(D,ie,se,"","\\supsetneq",!0);k(D,ie,se,"","\\@varsupsetneq");k(D,ie,se,"","\\supsetneqq",!0);k(D,ie,se,"","\\@varsupsetneqq");k(D,ie,se,"","\\nVdash",!0);k(D,ie,se,"","\\precneqq",!0);k(D,ie,se,"","\\succneqq",!0);k(D,ie,se,"","\\@nsubseteqq");k(D,ie,_t,"","\\unlhd");k(D,ie,_t,"","\\unrhd");k(D,ie,se,"","\\nleftarrow",!0);k(D,ie,se,"","\\nrightarrow",!0);k(D,ie,se,"","\\nLeftarrow",!0);k(D,ie,se,"","\\nRightarrow",!0);k(D,ie,se,"","\\nleftrightarrow",!0);k(D,ie,se,"","\\nLeftrightarrow",!0);k(D,ie,se,"","\\vartriangle");k(D,ie,pe,"","\\hslash");k(D,ie,pe,"","\\triangledown");k(D,ie,pe,"","\\lozenge");k(D,ie,pe,"","\\circledS");k(D,ie,pe,"","\\circledR");k(Qe,ie,pe,"","\\circledR");k(D,ie,pe,"","\\measuredangle",!0);k(D,ie,pe,"","\\nexists");k(D,ie,pe,"","\\mho");k(D,ie,pe,"","\\Finv",!0);k(D,ie,pe,"","\\Game",!0);k(D,ie,pe,"","\\backprime");k(D,ie,pe,"","\\blacktriangle");k(D,ie,pe,"","\\blacktriangledown");k(D,ie,pe,"","\\blacksquare");k(D,ie,pe,"","\\blacklozenge");k(D,ie,pe,"","\\bigstar");k(D,ie,pe,"","\\sphericalangle",!0);k(D,ie,pe,"","\\complement",!0);k(D,ie,pe,"","\\eth",!0);k(Qe,W,pe,"","");k(D,ie,pe,"","\\diagup");k(D,ie,pe,"","\\diagdown");k(D,ie,pe,"","\\square");k(D,ie,pe,"","\\Box");k(D,ie,pe,"","\\Diamond");k(D,ie,pe,"","\\yen",!0);k(Qe,ie,pe,"","\\yen",!0);k(D,ie,pe,"","\\checkmark",!0);k(Qe,ie,pe,"","\\checkmark");k(D,ie,pe,"","\\beth",!0);k(D,ie,pe,"","\\daleth",!0);k(D,ie,pe,"","\\gimel",!0);k(D,ie,pe,"","\\digamma",!0);k(D,ie,pe,"","\\varkappa");k(D,ie,Cs,"","\\@ulcorner",!0);k(D,ie,Bi,"","\\@urcorner",!0);k(D,ie,Cs,"","\\@llcorner",!0);k(D,ie,Bi,"","\\@lrcorner",!0);k(D,ie,se,"","\\leqq",!0);k(D,ie,se,"","\\leqslant",!0);k(D,ie,se,"","\\eqslantless",!0);k(D,ie,se,"","\\lesssim",!0);k(D,ie,se,"","\\lessapprox",!0);k(D,ie,se,"","\\approxeq",!0);k(D,ie,_t,"","\\lessdot");k(D,ie,se,"","\\lll",!0);k(D,ie,se,"","\\lessgtr",!0);k(D,ie,se,"","\\lesseqgtr",!0);k(D,ie,se,"","\\lesseqqgtr",!0);k(D,ie,se,"","\\doteqdot");k(D,ie,se,"","\\risingdotseq",!0);k(D,ie,se,"","\\fallingdotseq",!0);k(D,ie,se,"","\\backsim",!0);k(D,ie,se,"","\\backsimeq",!0);k(D,ie,se,"","\\subseteqq",!0);k(D,ie,se,"","\\Subset",!0);k(D,ie,se,"","\\sqsubset",!0);k(D,ie,se,"","\\preccurlyeq",!0);k(D,ie,se,"","\\curlyeqprec",!0);k(D,ie,se,"","\\precsim",!0);k(D,ie,se,"","\\precapprox",!0);k(D,ie,se,"","\\vartriangleleft");k(D,ie,se,"","\\trianglelefteq");k(D,ie,se,"","\\vDash",!0);k(D,ie,se,"","\\Vvdash",!0);k(D,ie,se,"","\\smallsmile");k(D,ie,se,"","\\smallfrown");k(D,ie,se,"","\\bumpeq",!0);k(D,ie,se,"","\\Bumpeq",!0);k(D,ie,se,"","\\geqq",!0);k(D,ie,se,"","\\geqslant",!0);k(D,ie,se,"","\\eqslantgtr",!0);k(D,ie,se,"","\\gtrsim",!0);k(D,ie,se,"","\\gtrapprox",!0);k(D,ie,_t,"","\\gtrdot");k(D,ie,se,"","\\ggg",!0);k(D,ie,se,"","\\gtrless",!0);k(D,ie,se,"","\\gtreqless",!0);k(D,ie,se,"","\\gtreqqless",!0);k(D,ie,se,"","\\eqcirc",!0);k(D,ie,se,"","\\circeq",!0);k(D,ie,se,"","\\triangleq",!0);k(D,ie,se,"","\\thicksim");k(D,ie,se,"","\\thickapprox");k(D,ie,se,"","\\supseteqq",!0);k(D,ie,se,"","\\Supset",!0);k(D,ie,se,"","\\sqsupset",!0);k(D,ie,se,"","\\succcurlyeq",!0);k(D,ie,se,"","\\curlyeqsucc",!0);k(D,ie,se,"","\\succsim",!0);k(D,ie,se,"","\\succapprox",!0);k(D,ie,se,"","\\vartriangleright");k(D,ie,se,"","\\trianglerighteq");k(D,ie,se,"","\\Vdash",!0);k(D,ie,se,"","\\shortmid");k(D,ie,se,"","\\shortparallel");k(D,ie,se,"","\\between",!0);k(D,ie,se,"","\\pitchfork",!0);k(D,ie,se,"","\\varpropto");k(D,ie,se,"","\\blacktriangleleft");k(D,ie,se,"","\\therefore",!0);k(D,ie,se,"","\\backepsilon");k(D,ie,se,"","\\blacktriangleright");k(D,ie,se,"","\\because",!0);k(D,ie,se,"","\\llless");k(D,ie,se,"","\\gggtr");k(D,ie,_t,"","\\lhd");k(D,ie,_t,"","\\rhd");k(D,ie,se,"","\\eqsim",!0);k(D,W,se,"","\\Join");k(D,ie,se,"","\\Doteq",!0);k(D,ie,_t,"","\\dotplus",!0);k(D,ie,_t,"","\\smallsetminus");k(D,ie,_t,"","\\Cap",!0);k(D,ie,_t,"","\\Cup",!0);k(D,ie,_t,"","\\doublebarwedge",!0);k(D,ie,_t,"","\\boxminus",!0);k(D,ie,_t,"","\\boxplus",!0);k(D,ie,_t,"","\\divideontimes",!0);k(D,ie,_t,"","\\ltimes",!0);k(D,ie,_t,"","\\rtimes",!0);k(D,ie,_t,"","\\leftthreetimes",!0);k(D,ie,_t,"","\\rightthreetimes",!0);k(D,ie,_t,"","\\curlywedge",!0);k(D,ie,_t,"","\\curlyvee",!0);k(D,ie,_t,"","\\circleddash",!0);k(D,ie,_t,"","\\circledast",!0);k(D,ie,_t,"","\\centerdot");k(D,ie,_t,"","\\intercal",!0);k(D,ie,_t,"","\\doublecap");k(D,ie,_t,"","\\doublecup");k(D,ie,_t,"","\\boxtimes",!0);k(D,ie,se,"","\\dashrightarrow",!0);k(D,ie,se,"","\\dashleftarrow",!0);k(D,ie,se,"","\\leftleftarrows",!0);k(D,ie,se,"","\\leftrightarrows",!0);k(D,ie,se,"","\\Lleftarrow",!0);k(D,ie,se,"","\\twoheadleftarrow",!0);k(D,ie,se,"","\\leftarrowtail",!0);k(D,ie,se,"","\\looparrowleft",!0);k(D,ie,se,"","\\leftrightharpoons",!0);k(D,ie,se,"","\\curvearrowleft",!0);k(D,ie,se,"","\\circlearrowleft",!0);k(D,ie,se,"","\\Lsh",!0);k(D,ie,se,"","\\upuparrows",!0);k(D,ie,se,"","\\upharpoonleft",!0);k(D,ie,se,"","\\downharpoonleft",!0);k(D,W,se,"","\\origof",!0);k(D,W,se,"","\\imageof",!0);k(D,ie,se,"","\\multimap",!0);k(D,ie,se,"","\\leftrightsquigarrow",!0);k(D,ie,se,"","\\rightrightarrows",!0);k(D,ie,se,"","\\rightleftarrows",!0);k(D,ie,se,"","\\twoheadrightarrow",!0);k(D,ie,se,"","\\rightarrowtail",!0);k(D,ie,se,"","\\looparrowright",!0);k(D,ie,se,"","\\curvearrowright",!0);k(D,ie,se,"","\\circlearrowright",!0);k(D,ie,se,"","\\Rsh",!0);k(D,ie,se,"","\\downdownarrows",!0);k(D,ie,se,"","\\upharpoonright",!0);k(D,ie,se,"","\\downharpoonright",!0);k(D,ie,se,"","\\rightsquigarrow",!0);k(D,ie,se,"","\\leadsto");k(D,ie,se,"","\\Rrightarrow",!0);k(D,ie,se,"","\\restriction");k(D,W,pe,"","`");k(D,W,pe,"$","\\$");k(Qe,W,pe,"$","\\$");k(Qe,W,pe,"$","\\textdollar");k(D,W,pe,"%","\\%");k(Qe,W,pe,"%","\\%");k(D,W,pe,"_","\\_");k(Qe,W,pe,"_","\\_");k(Qe,W,pe,"_","\\textunderscore");k(D,W,pe,"","\\angle",!0);k(D,W,pe,"","\\infty",!0);k(D,W,pe,"","\\prime");k(D,W,pe,"","\\triangle");k(D,W,pe,"","\\Gamma",!0);k(D,W,pe,"","\\Delta",!0);k(D,W,pe,"","\\Theta",!0);k(D,W,pe,"","\\Lambda",!0);k(D,W,pe,"","\\Xi",!0);k(D,W,pe,"","\\Pi",!0);k(D,W,pe,"","\\Sigma",!0);k(D,W,pe,"","\\Upsilon",!0);k(D,W,pe,"","\\Phi",!0);k(D,W,pe,"","\\Psi",!0);k(D,W,pe,"","\\Omega",!0);k(D,W,pe,"A","");k(D,W,pe,"B","");k(D,W,pe,"E","");k(D,W,pe,"Z","");k(D,W,pe,"H","");k(D,W,pe,"I","");k(D,W,pe,"K","");k(D,W,pe,"M","");k(D,W,pe,"N","");k(D,W,pe,"O","");k(D,W,pe,"P","");k(D,W,pe,"T","");k(D,W,pe,"X","");k(D,W,pe,"","\\neg",!0);k(D,W,pe,"","\\lnot");k(D,W,pe,"","\\top");k(D,W,pe,"","\\bot");k(D,W,pe,"","\\emptyset");k(D,ie,pe,"","\\varnothing");k(D,W,Vt,"","\\alpha",!0);k(D,W,Vt,"","\\beta",!0);k(D,W,Vt,"","\\gamma",!0);k(D,W,Vt,"","\\delta",!0);k(D,W,Vt,"","\\epsilon",!0);k(D,W,Vt,"","\\zeta",!0);k(D,W,Vt,"","\\eta",!0);k(D,W,Vt,"","\\theta",!0);k(D,W,Vt,"","\\iota",!0);k(D,W,Vt,"","\\kappa",!0);k(D,W,Vt,"","\\lambda",!0);k(D,W,Vt,"","\\mu",!0);k(D,W,Vt,"","\\nu",!0);k(D,W,Vt,"","\\xi",!0);k(D,W,Vt,"","\\omicron",!0);k(D,W,Vt,"","\\pi",!0);k(D,W,Vt,"","\\rho",!0);k(D,W,Vt,"","\\sigma",!0);k(D,W,Vt,"","\\tau",!0);k(D,W,Vt,"","\\upsilon",!0);k(D,W,Vt,"","\\phi",!0);k(D,W,Vt,"","\\chi",!0);k(D,W,Vt,"","\\psi",!0);k(D,W,Vt,"","\\omega",!0);k(D,W,Vt,"","\\varepsilon",!0);k(D,W,Vt,"","\\vartheta",!0);k(D,W,Vt,"","\\varpi",!0);k(D,W,Vt,"","\\varrho",!0);k(D,W,Vt,"","\\varsigma",!0);k(D,W,Vt,"","\\varphi",!0);k(D,W,_t,"","*",!0);k(D,W,_t,"+","+");k(D,W,_t,"","-",!0);k(D,W,_t,"","\\cdot",!0);k(D,W,_t,"","\\circ",!0);k(D,W,_t,"","\\div",!0);k(D,W,_t,"","\\pm",!0);k(D,W,_t,"","\\times",!0);k(D,W,_t,"","\\cap",!0);k(D,W,_t,"","\\cup",!0);k(D,W,_t,"","\\setminus",!0);k(D,W,_t,"","\\land");k(D,W,_t,"","\\lor");k(D,W,_t,"","\\wedge",!0);k(D,W,_t,"","\\vee",!0);k(D,W,pe,"","\\surd");k(D,W,Cs,"","\\langle",!0);k(D,W,Cs,"","\\lvert");k(D,W,Cs,"","\\lVert");k(D,W,Bi,"?","?");k(D,W,Bi,"!","!");k(D,W,Bi,"","\\rangle",!0);k(D,W,Bi,"","\\rvert");k(D,W,Bi,"","\\rVert");k(D,W,se,"=","=");k(D,W,se,":",":");k(D,W,se,"","\\approx",!0);k(D,W,se,"","\\cong",!0);k(D,W,se,"","\\ge");k(D,W,se,"","\\geq",!0);k(D,W,se,"","\\gets");k(D,W,se,">","\\gt",!0);k(D,W,se,"","\\in",!0);k(D,W,se,"","\\@not");k(D,W,se,"","\\subset",!0);k(D,W,se,"","\\supset",!0);k(D,W,se,"","\\subseteq",!0);k(D,W,se,"","\\supseteq",!0);k(D,ie,se,"","\\nsubseteq",!0);k(D,ie,se,"","\\nsupseteq",!0);k(D,W,se,"","\\models");k(D,W,se,"","\\leftarrow",!0);k(D,W,se,"","\\le");k(D,W,se,"","\\leq",!0);k(D,W,se,"<","\\lt",!0);k(D,W,se,"","\\rightarrow",!0);k(D,W,se,"","\\to");k(D,ie,se,"","\\ngeq",!0);k(D,ie,se,"","\\nleq",!0);k(D,W,uc,"","\\ ");k(D,W,uc,"","\\space");k(D,W,uc,"","\\nobreakspace");k(Qe,W,uc,"","\\ ");k(Qe,W,uc,""," ");k(Qe,W,uc,"","\\space");k(Qe,W,uc,"","\\nobreakspace");k(D,W,uc,null,"\\nobreak");k(D,W,uc,null,"\\allowbreak");k(D,W,E2,",",",");k(D,W,E2,";",";");k(D,ie,_t,"","\\barwedge",!0);k(D,ie,_t,"","\\veebar",!0);k(D,W,_t,"","\\odot",!0);k(D,W,_t,"","\\oplus",!0);k(D,W,_t,"","\\otimes",!0);k(D,W,pe,"","\\partial",!0);k(D,W,_t,"","\\oslash",!0);k(D,ie,_t,"","\\circledcirc",!0);k(D,ie,_t,"","\\boxdot",!0);k(D,W,_t,"","\\bigtriangleup");k(D,W,_t,"","\\bigtriangledown");k(D,W,_t,"","\\dagger");k(D,W,_t,"","\\diamond");k(D,W,_t,"","\\star");k(D,W,_t,"","\\triangleleft");k(D,W,_t,"","\\triangleright");k(D,W,Cs,"{","\\{");k(Qe,W,pe,"{","\\{");k(Qe,W,pe,"{","\\textbraceleft");k(D,W,Bi,"}","\\}");k(Qe,W,pe,"}","\\}");k(Qe,W,pe,"}","\\textbraceright");k(D,W,Cs,"{","\\lbrace");k(D,W,Bi,"}","\\rbrace");k(D,W,Cs,"[","\\lbrack",!0);k(Qe,W,pe,"[","\\lbrack",!0);k(D,W,Bi,"]","\\rbrack",!0);k(Qe,W,pe,"]","\\rbrack",!0);k(D,W,Cs,"(","\\lparen",!0);k(D,W,Bi,")","\\rparen",!0);k(Qe,W,pe,"<","\\textless",!0);k(Qe,W,pe,">","\\textgreater",!0);k(D,W,Cs,"","\\lfloor",!0);k(D,W,Bi,"","\\rfloor",!0);k(D,W,Cs,"","\\lceil",!0);k(D,W,Bi,"","\\rceil",!0);k(D,W,pe,"\\","\\backslash");k(D,W,pe,"","|");k(D,W,pe,"","\\vert");k(Qe,W,pe,"|","\\textbar",!0);k(D,W,pe,"","\\|");k(D,W,pe,"","\\Vert");k(Qe,W,pe,"","\\textbardbl");k(Qe,W,pe,"~","\\textasciitilde");k(Qe,W,pe,"\\","\\textbackslash");k(Qe,W,pe,"^","\\textasciicircum");k(D,W,se,"","\\uparrow",!0);k(D,W,se,"","\\Uparrow",!0);k(D,W,se,"","\\downarrow",!0);k(D,W,se,"","\\Downarrow",!0);k(D,W,se,"","\\updownarrow",!0);k(D,W,se,"","\\Updownarrow",!0);k(D,W,ja,"","\\coprod");k(D,W,ja,"","\\bigvee");k(D,W,ja,"","\\bigwedge");k(D,W,ja,"","\\biguplus");k(D,W,ja,"","\\bigcap");k(D,W,ja,"","\\bigcup");k(D,W,ja,"","\\int");k(D,W,ja,"","\\intop");k(D,W,ja,"","\\iint");k(D,W,ja,"","\\iiint");k(D,W,ja,"","\\prod");k(D,W,ja,"","\\sum");k(D,W,ja,"","\\bigotimes");k(D,W,ja,"","\\bigoplus");k(D,W,ja,"","\\bigodot");k(D,W,ja,"","\\oint");k(D,W,ja,"","\\oiint");k(D,W,ja,"","\\oiiint");k(D,W,ja,"","\\bigsqcup");k(D,W,ja,"","\\smallint");k(Qe,W,If,"","\\textellipsis");k(D,W,If,"","\\mathellipsis");k(Qe,W,If,"","\\ldots",!0);k(D,W,If,"","\\ldots",!0);k(D,W,If,"","\\@cdots",!0);k(D,W,If,"","\\ddots",!0);k(D,W,pe,"","\\varvdots");k(Qe,W,pe,"","\\varvdots");k(D,W,qn,"","\\acute");k(D,W,qn,"","\\grave");k(D,W,qn,"","\\ddot");k(D,W,qn,"~","\\tilde");k(D,W,qn,"","\\bar");k(D,W,qn,"","\\breve");k(D,W,qn,"","\\check");k(D,W,qn,"^","\\hat");k(D,W,qn,"","\\vec");k(D,W,qn,"","\\dot");k(D,W,qn,"","\\mathring");k(D,W,Vt,"","\\@imath");k(D,W,Vt,"","\\@jmath");k(D,W,pe,"","");k(D,W,pe,"","");k(Qe,W,pe,"","\\i",!0);k(Qe,W,pe,"","\\j",!0);k(Qe,W,pe,"","\\ss",!0);k(Qe,W,pe,"","\\ae",!0);k(Qe,W,pe,"","\\oe",!0);k(Qe,W,pe,"","\\o",!0);k(Qe,W,pe,"","\\AE",!0);k(Qe,W,pe,"","\\OE",!0);k(Qe,W,pe,"","\\O",!0);k(Qe,W,qn,"","\\'");k(Qe,W,qn,"","\\`");k(Qe,W,qn,"","\\^");k(Qe,W,qn,"","\\~");k(Qe,W,qn,"","\\=");k(Qe,W,qn,"","\\u");k(Qe,W,qn,"","\\.");k(Qe,W,qn,"","\\c");k(Qe,W,qn,"","\\r");k(Qe,W,qn,"","\\v");k(Qe,W,qn,"",'\\"');k(Qe,W,qn,"","\\H");k(Qe,W,qn,"","\\textcircled");var xH={"--":!0,"---":!0,"``":!0,"''":!0};k(Qe,W,pe,"","--",!0);k(Qe,W,pe,"","\\textendash");k(Qe,W,pe,"","---",!0);k(Qe,W,pe,"","\\textemdash");k(Qe,W,pe,"","`",!0);k(Qe,W,pe,"","\\textquoteleft");k(Qe,W,pe,"","'",!0);k(Qe,W,pe,"","\\textquoteright");k(Qe,W,pe,"","``",!0);k(Qe,W,pe,"","\\textquotedblleft");k(Qe,W,pe,"","''",!0);k(Qe,W,pe,"","\\textquotedblright");k(D,W,pe,"","\\degree",!0);k(Qe,W,pe,"","\\degree");k(Qe,W,pe,"","\\textdegree",!0);k(D,W,pe,"","\\pounds");k(D,W,pe,"","\\mathsterling",!0);k(Qe,W,pe,"","\\pounds");k(Qe,W,pe,"","\\textsterling",!0);k(D,ie,pe,"","\\maltese");k(Qe,ie,pe,"","\\maltese");var oR='0123456789/@."';for(var X5=0;X5<oR.length;X5++){var lR=oR.charAt(X5);k(D,W,pe,lR,lR)}var cR='0123456789!@*()-=+";:?/.,';for(var Y5=0;Y5<cR.length;Y5++){var uR=cR.charAt(Y5);k(Qe,W,pe,uR,uR)}var Rx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Z5=0;Z5<Rx.length;Z5++){var sv=Rx.charAt(Z5);k(D,W,Vt,sv,sv),k(Qe,W,pe,sv,sv)}k(D,ie,pe,"C","");k(Qe,ie,pe,"C","");k(D,ie,pe,"H","");k(Qe,ie,pe,"H","");k(D,ie,pe,"N","");k(Qe,ie,pe,"N","");k(D,ie,pe,"P","");k(Qe,ie,pe,"P","");k(D,ie,pe,"Q","");k(Qe,ie,pe,"Q","");k(D,ie,pe,"R","");k(Qe,ie,pe,"R","");k(D,ie,pe,"Z","");k(Qe,ie,pe,"Z","");k(D,W,Vt,"h","");k(Qe,W,Vt,"h","");var Xt="";for(var ki=0;ki<Rx.length;ki++){var Jn=Rx.charAt(ki);Xt=String.fromCharCode(55349,56320+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56372+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56424+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56580+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56684+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56736+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56788+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56840+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56944+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),ki<26&&(Xt=String.fromCharCode(55349,56632+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt),Xt=String.fromCharCode(55349,56476+ki),k(D,W,Vt,Jn,Xt),k(Qe,W,pe,Jn,Xt))}Xt="";k(D,W,Vt,"k",Xt);k(Qe,W,pe,"k",Xt);for(var ld=0;ld<10;ld++){var Qc=ld.toString();Xt=String.fromCharCode(55349,57294+ld),k(D,W,Vt,Qc,Xt),k(Qe,W,pe,Qc,Xt),Xt=String.fromCharCode(55349,57314+ld),k(D,W,Vt,Qc,Xt),k(Qe,W,pe,Qc,Xt),Xt=String.fromCharCode(55349,57324+ld),k(D,W,Vt,Qc,Xt),k(Qe,W,pe,Qc,Xt),Xt=String.fromCharCode(55349,57334+ld),k(D,W,Vt,Qc,Xt),k(Qe,W,pe,Qc,Xt)}var NA="";for(var J5=0;J5<NA.length;J5++){var ov=NA.charAt(J5);k(D,W,Vt,ov,ov),k(Qe,W,pe,ov,ov)}var lv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],dR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],pce=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,s=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[lv[c][2],lv[c][s]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[dR[d][2],dR[d][s]]}else{if(i===120485||i===120486)return[lv[0][2],lv[0][s]];if(120486<i&&i<120782)return["",""];throw new rt("Unsupported character: "+e)}},j2=function(e,r,n){return On[n][e]&&On[n][e].replace&&(e=On[n][e].replace),{value:e,metrics:$7(e,r,n)}},mo=function(e,r,n,a,i){var s=j2(e,r,n),c=s.metrics;e=s.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new Zs(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new Zs(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},mce=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&j2(e,"Main-Bold",r).metrics?mo(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||On[r][e].font==="main"?mo(e,"Main-Regular",r,n,a):mo(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},gce=function(e,r,n,a,i){return i!=="textord"&&j2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},yce=function(e,r,n){var a=e.mode,i=e.text,s=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=pce(i,a)),h.length>0)return mo(i,h,a,r,s.concat(p));if(d){var m,y;if(d==="boldsymbol"){var x=gce(i,a,r,s,n);m=x.fontName,y=[x.fontClass]}else c?(m=SH[d].fontName,y=[d]):(m=cv(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(j2(i,m,a).metrics)return mo(i,m,a,r,s.concat(y));if(xH.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var T=[],_=0;_<i.length;_++)T.push(mo(i[_],m,a,r,s.concat(y)));return wH(T)}}if(n==="mathord")return mo(i,"Math-Italic",a,r,s.concat(["mathnormal"]));if(n==="textord"){var w=On[a][i]&&On[a][i].font;if(w==="ams"){var E=cv("amsrm",r.fontWeight,r.fontShape);return mo(i,E,a,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var I=cv("textrm",r.fontWeight,r.fontShape);return mo(i,I,a,r,s.concat(r.fontWeight,r.fontShape))}else{var C=cv(w,r.fontWeight,r.fontShape);return mo(i,C,a,r,s.concat(C,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},vce=(t,e)=>{if(Nu(t.classes)!==Nu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},xce=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof Zs&&n instanceof Zs&&vce(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},z7=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var s=e.children[i];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>a&&(a=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Ki=function(e,r,n,a){var i=new l1(e,r,n,a);return z7(i),i},bH=(t,e,r,n)=>new l1(t,e,r,n),bce=function(e,r,n){var a=Ki([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=ft(a.height),a.maxFontSize=1,a},wce=function(e,r,n,a){var i=new U7(e,r,n,a);return z7(i),i},wH=function(e){var r=new o1(e);return z7(r),r},Sce=function(e,r){return e instanceof o1?Ki([],[e],r):e},_ce=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,s=1;s<r.length;s++){var c=-r[s].shift-i-r[s].elem.depth,d=c-(r[s-1].elem.height+r[s-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var x=e.children[0];if(x.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-x.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-x.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},Tce=function(e,r){for(var{children:n,depth:a}=_ce(e),i=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Ki(["pstrut"],[]);h.style.height=ft(i);for(var p=[],m=a,y=a,x=a,T=0;T<n.length;T++){var _=n[T];if(_.type==="kern")x+=_.size;else{var w=_.elem,E=_.wrapperClasses||[],I=_.wrapperStyle||{},C=Ki(E,[h,w],void 0,I);C.style.top=ft(-i-x-w.depth),_.marginLeft&&(C.style.marginLeft=_.marginLeft),_.marginRight&&(C.style.marginRight=_.marginRight),p.push(C),x+=w.height+w.depth}m=Math.min(m,x),y=Math.max(y,x)}var L=Ki(["vlist"],p);L.style.height=ft(y);var P;if(m<0){var R=Ki([],[]),N=Ki(["vlist"],[R]);N.style.height=ft(-m);var A=Ki(["vlist-s"],[new Zs("")]);P=[Ki(["vlist-r"],[L,A]),Ki(["vlist-r"],[N])]}else P=[Ki(["vlist-r"],[L])];var j=Ki(["vlist-t"],P);return P.length===2&&j.classes.push("vlist-t2"),j.height=y,j.depth=-m,j},Ace=(t,e)=>{var r=Ki(["mspace"],[],e),n=Gn(t,e);return r.style.marginRight=ft(n),r},cv=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},SH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},_H={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Nce=function(e,r){var[n,a,i]=_H[e],s=new Eu(n),c=new ec([s],{width:ft(a),height:ft(i),style:"width:"+ft(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=bH(["overlay"],[c],r);return d.height=i,d.style.height=ft(i),d.style.width=ft(a),d},Ee={fontMap:SH,makeSymbol:mo,mathsym:mce,makeSpan:Ki,makeSvgSpan:bH,makeLineSpan:bce,makeAnchor:wce,makeFragment:wH,wrapFragment:Sce,makeVList:Tce,makeOrd:yce,makeGlue:Ace,staticSvg:Nce,svgData:_H,tryCombineChars:xce},Hn={number:3,unit:"mu"},cd={number:4,unit:"mu"},Nl={number:5,unit:"mu"},Ece={mord:{mop:Hn,mbin:cd,mrel:Nl,minner:Hn},mop:{mord:Hn,mop:Hn,mrel:Nl,minner:Hn},mbin:{mord:cd,mop:cd,mopen:cd,minner:cd},mrel:{mord:Nl,mop:Nl,mopen:Nl,minner:Nl},mopen:{},mclose:{mop:Hn,mbin:cd,mrel:Nl,minner:Hn},mpunct:{mord:Hn,mop:Hn,mrel:Nl,mopen:Hn,mclose:Hn,mpunct:Hn,minner:Hn},minner:{mord:Hn,mop:Hn,mbin:cd,mrel:Nl,mopen:Hn,mpunct:Hn,minner:Hn}},jce={mord:{mop:Hn},mop:{mord:Hn,mop:Hn},mbin:{},mrel:{},mopen:{},mclose:{mop:Hn},mpunct:{},minner:{mop:Hn}},TH={},Mx={},Px={};function xt(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)TH[r[d]]=c;e&&(i&&(Mx[e]=i),s&&(Px[e]=s))}function u0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;xt({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Dx=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},da=function(e){return e.type==="ordgroup"?e.body:[e]},tc=Ee.makeSpan,kce=["leftmost","mbin","mopen","mrel","mop","mpunct"],Cce=["rightmost","mrel","mclose","mpunct"],Oce={display:Ft.DISPLAY,text:Ft.TEXT,script:Ft.SCRIPT,scriptscript:Ft.SCRIPTSCRIPT},Ice={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},$a=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],s=0;s<e.length;s++){var c=Dr(e[s],r);if(c instanceof o1){var d=c.children;i.push(...d)}else i.push(c)}if(Ee.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Oce[p.style]))}var m=tc([a[0]||"leftmost"],[],r),y=tc([a[1]||"rightmost"],[],r),x=n==="root";return hR(i,(T,_)=>{var w=_.classes[0],E=T.classes[0];w==="mbin"&&Cce.includes(E)?_.classes[0]="mord":E==="mbin"&&kce.includes(w)&&(T.classes[0]="mord")},{node:m},y,x),hR(i,(T,_)=>{var w=EA(_),E=EA(T),I=w&&E?T.hasClass("mtight")?jce[w][E]:Ece[w][E]:null;if(I)return Ee.makeGlue(I,h)},{node:m},y,x),i},hR=function t(e,r,n,a,i){a&&e.push(a);for(var s=0;s<e.length;s++){var c=e[s],d=AH(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),s++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=tc(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),s++})(s)}a&&e.pop()},AH=function(e){return e instanceof o1||e instanceof U7||e instanceof l1&&e.hasClass("enclosing")?e:null},Rce=function t(e,r){var n=AH(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},EA=function(e,r){return e?(r&&(e=Rce(e,r)),Ice[e.classes[0]]||null):null},Zm=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return tc(r.concat(n))},Dr=function(e,r,n){if(!e)return tc();if(Mx[e.type]){var a=Mx[e.type](e,r);if(n&&r.size!==n.size){a=tc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new rt("Got group of unknown type: '"+e.type+"'")};function uv(t,e){var r=tc(["base"],t,e),n=tc(["strut"]);return n.style.height=ft(r.height+r.depth),r.depth&&(n.style.verticalAlign=ft(-r.depth)),r.children.unshift(n),r}function jA(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=$a(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(uv(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(i.push(uv(s,e)),s=[]),i.push(n[c]));s.length>0&&i.push(uv(s,e));var h;r?(h=uv($a(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=tc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=ft(p.height+p.depth),p.depth&&(m.style.verticalAlign=ft(-p.depth))}return p}function NH(t){return new o1(t)}class vs{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Nu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof qo&&this.children[n+1]instanceof qo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof qo;)a+=this.children[++n].toText();e.appendChild(new qo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=zr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+zr.escape(Nu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class qo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return zr.escape(this.toText())}toText(){return this.text}}class Mce{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",ft(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+ft(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var tt={MathNode:vs,TextNode:qo,SpaceNode:Mce,newDocumentFragment:NH},Js=function(e,r,n){return On[r][e]&&On[r][e].replace&&e.charCodeAt(0)!==55349&&!(xH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=On[r][e].replace),new tt.TextNode(e)},V7=function(e){return e.length===1?e[0]:new tt.MathNode("mrow",e)},F7=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;On[a][i]&&On[a][i].replace&&(i=On[a][i].replace);var s=Ee.fontMap[n].fontName;return $7(i,s,a)?Ee.fontMap[n].variant:null};function e3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof qo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof qo&&r.text===","}else return!1}var ns=function(e,r,n){if(e.length===1){var a=Nn(e[0],r);return n&&a instanceof vs&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],s,c=0;c<e.length;c++){var d=Nn(e[c],r);if(d instanceof vs&&s instanceof vs){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(e3(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&e3(s))d.children=[...s.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||e3(s))){var h=d.children[0];h instanceof vs&&h.type==="mn"&&(h.children=[...s.children,...h.children],i.pop())}else if(s.type==="mi"&&s.children.length===1){var p=s.children[0];if(p instanceof qo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof qo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),s=d}return i},ju=function(e,r,n){return V7(ns(e,r,n))},Nn=function(e,r){if(!e)return new tt.MathNode("mrow");if(Px[e.type]){var n=Px[e.type](e,r);return n}else throw new rt("Got group of unknown type: '"+e.type+"'")};function fR(t,e,r,n,a){var i=ns(t,r),s;i.length===1&&i[0]instanceof vs&&["mrow","mtable"].includes(i[0].type)?s=i[0]:s=new tt.MathNode("mrow",i);var c=new tt.MathNode("annotation",[new tt.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new tt.MathNode("semantics",[s,c]),h=new tt.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return Ee.makeSpan([p],[h])}var EH=function(e){return new Ol({style:e.displayMode?Ft.DISPLAY:Ft.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},jH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Ee.makeSpan(n,[e])}return e},Pce=function(e,r,n){var a=EH(n),i;if(n.output==="mathml")return fR(e,r,a,n.displayMode,!0);if(n.output==="html"){var s=jA(e,a);i=Ee.makeSpan(["katex"],[s])}else{var c=fR(e,r,a,n.displayMode,!1),d=jA(e,a);i=Ee.makeSpan(["katex"],[c,d])}return jH(i,n)},Dce=function(e,r,n){var a=EH(n),i=jA(e,a),s=Ee.makeSpan(["katex"],[i]);return jH(s,n)},Lce={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Bce=function(e){var r=new tt.MathNode("mo",[new tt.TextNode(Lce[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},$ce={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Uce=function(e){return e.type==="ordgroup"?e.body.length:1},zce=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=Uce(h.base),m,y,x;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,x=.42,y=d+"4"):(m=312,c=2340,x=.34,y="tilde4");else{var T=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],m=[0,239,300,360,420][T],x=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],m=[0,260,286,306,312][T],x=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var _=new Eu(y),w=new ec([_],{width:"100%",height:ft(x),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:Ee.makeSvgSpan([],[w],r),minWidth:0,height:x}}else{var E=[],I=$ce[d],[C,L,P]=I,R=P/1e3,N=C.length,A,j;if(N===1){var $=I[3];A=["hide-tail"],j=[$]}else if(N===2)A=["halfarrow-left","halfarrow-right"],j=["xMinYMin","xMaxYMin"];else if(N===3)A=["brace-left","brace-center","brace-right"],j=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+N+" children.");for(var B=0;B<N;B++){var F=new Eu(C[B]),z=new ec([F],{width:"400em",height:ft(R),viewBox:"0 0 "+c+" "+P,preserveAspectRatio:j[B]+" slice"}),K=Ee.makeSvgSpan([A[B]],[z],r);if(N===1)return{span:K,minWidth:L,height:R};K.style.height=ft(R),E.push(K)}return{span:Ee.makeSpan(["stretchy"],E,r),minWidth:L,height:R}}}var{span:a,minWidth:i,height:s}=n();return a.height=s,a.style.height=ft(s),i>0&&(a.style.minWidth=ft(i)),a},Vce=function(e,r,n,a,i){var s,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(s=Ee.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(s.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new AA({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new AA({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new ec(h,{width:"100%",height:ft(c)});s=Ee.makeSvgSpan([],[p],i)}return s.height=c,s.style.height=ft(c),s},rc={encloseSpan:Vce,mathMLnode:Bce,svgSpan:zce};function mr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function q7(t){var e=k2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function k2(t){return t&&(t.type==="atom"||fce.hasOwnProperty(t.type))?t:null}var H7=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=mr(t.base,"accent"),r=n.base,t.base=r,a=dce(Dr(t,e)),t.base=n):(n=mr(t,"accent"),r=n.base);var i=Dr(r,e.havingCrampedStyle()),s=n.isShifty&&zr.isCharacterBox(r),c=0;if(s){var d=zr.getBaseElem(r),h=Dr(d,e.havingCrampedStyle());c=sR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=rc.svgSpan(n,e),y=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+ft(2*c)+")",marginLeft:ft(2*c)}:void 0}]},e);else{var x,T;n.label==="\\vec"?(x=Ee.staticSvg("vec",e),T=Ee.svgData.vec[1]):(x=Ee.makeOrd({mode:n.mode,text:n.label},e,"textord"),x=sR(x),x.italic=0,T=x.width,p&&(m+=x.depth)),y=Ee.makeSpan(["accent-body"],[x]);var _=n.label==="\\textcircled";_&&(y.classes.push("accent-full"),m=i.height);var w=c;_||(w-=T/2),y.style.left=ft(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var E=Ee.makeSpan(["mord","accent"],[y],e);return a?(a.children[0]=E,a.height=Math.max(E.height,a.height),a.classes[0]="mord",a):E},kH=(t,e)=>{var r=t.isStretchy?rc.mathMLnode(t.label):new tt.MathNode("mo",[Js(t.label,t.mode)]),n=new tt.MathNode("mover",[Nn(t.base,e),r]);return n.setAttribute("accent","true"),n},Fce=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));xt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Dx(e[0]),n=!Fce.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:H7,mathmlBuilder:kH});xt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:H7,mathmlBuilder:kH});xt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Dr(t.base,e),n=rc.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=Ee.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return Ee.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=rc.mathMLnode(t.label),n=new tt.MathNode("munder",[Nn(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var dv=t=>{var e=new tt.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};xt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=Ee.wrapFragment(Dr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=Ee.wrapFragment(Dr(t.below,n,e),e),s.classes.push(i+"-arrow-pad"));var c=rc.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(s){var m=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;p=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:m}]},e)}else p=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Ee.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=rc.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=dv(Nn(t.body,e));if(t.below){var i=dv(Nn(t.below,e));n=new tt.MathNode("munderover",[r,i,a])}else n=new tt.MathNode("mover",[r,a])}else if(t.below){var s=dv(Nn(t.below,e));n=new tt.MathNode("munder",[r,s])}else n=dv(),n=new tt.MathNode("mover",[r,n]);return n}});var qce=Ee.makeSpan;function CH(t,e){var r=$a(t.body,e,!0);return qce([t.mclass],r,e)}function OH(t,e){var r,n=ns(t.body,e);return t.mclass==="minner"?r=new tt.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new tt.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new tt.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}xt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:da(a),isCharacterBox:zr.isCharacterBox(a)}},htmlBuilder:CH,mathmlBuilder:OH});var C2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};xt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:C2(e[0]),body:da(e[1]),isCharacterBox:zr.isCharacterBox(e[1])}}});xt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],s;n!=="\\stackrel"?s=C2(a):s="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:da(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:zr.isCharacterBox(d)}},htmlBuilder:CH,mathmlBuilder:OH});xt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:C2(e[0]),body:da(e[0])}},htmlBuilder(t,e){var r=$a(t.body,e,!0),n=Ee.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=ns(t.body,e),n=new tt.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Hce={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},pR=()=>({type:"styling",body:[],mode:"math",style:"display"}),mR=t=>t.type==="textord"&&t.text==="@",Gce=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Wce(t,e,r){var n=Hce[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,s,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Kce(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new rt("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var s=e[i],c=pR(),d=0;d<s.length;d++)if(!mR(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var h=q7(s[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,x=d+1;x<s.length;x++){if(Gce(s[x],h)){y=!1,d=x;break}if(mR(s[x]))throw new rt("Missing a "+h+" character to complete a CD arrow.",s[x]);p[m].body.push(s[x])}if(y)throw new rt("Missing a "+h+" character to complete a CD arrow.",s[d])}else throw new rt('Expected one of "<>AV=|." after @',s[d]);var T=Wce(h,p,t),_={type:"styling",body:[T],mode:"math",style:"display"};n.push(_),c=pR()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}xt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Ee.wrapFragment(Dr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=ft(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new tt.MathNode("mrow",[Nn(t.label,e)]);return r=new tt.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new tt.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});xt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Ee.wrapFragment(Dr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new tt.MathNode("mrow",[Nn(t.fragment,e)])}});xt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=mr(e[0],"ordgroup"),a=n.body,i="",s=0;s<a.length;s++){var c=mr(a[s],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new rt("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new rt("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var IH=(t,e)=>{var r=$a(t.body,e.withColor(t.color),!1);return Ee.makeFragment(r)},RH=(t,e)=>{var r=ns(t.body,e.withColor(t.color)),n=new tt.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};xt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=mr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:da(a)}},htmlBuilder:IH,mathmlBuilder:RH});xt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=mr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:IH,mathmlBuilder:RH});xt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&mr(a,"size").value}},htmlBuilder(t,e){var r=Ee.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=ft(Gn(t.size,e)))),r},mathmlBuilder(t,e){var r=new tt.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",ft(Gn(t.size,e)))),r}});var kA={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},MH=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new rt("Expected a control sequence",t);return e},Qce=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},PH=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};xt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(kA[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=kA[n.text]),mr(e.parseFunction(),"internal");throw new rt("Invalid token after macro prefix",n)}});xt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new rt("Expected a control sequence",n);for(var i=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new rt('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new rt('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new rt("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===kA[r]),{type:"internal",mode:e.mode}}});xt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=MH(e.gullet.popToken());e.gullet.consumeSpaces();var a=Qce(e);return PH(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});xt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=MH(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return PH(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var im=function(e,r,n){var a=On.math[e]&&On.math[e].replace,i=$7(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},G7=function(e,r,n,a){var i=n.havingBaseStyle(r),s=Ee.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=i.sizeMultiplier,s},DH=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=ft(i),e.height-=i,e.depth+=i},Xce=function(e,r,n,a,i,s){var c=Ee.makeSymbol(e,"Main-Regular",i,a),d=G7(c,r,a,s);return n&&DH(d,a,r),d},Yce=function(e,r,n,a){return Ee.makeSymbol(e,"Size"+r+"-Regular",n,a)},LH=function(e,r,n,a,i,s){var c=Yce(e,r,i,a),d=G7(Ee.makeSpan(["delimsizing","size"+r],[c],a),Ft.TEXT,a,s);return n&&DH(d,a,Ft.TEXT),d},t3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=Ee.makeSpan(["delimsizinginner",a],[Ee.makeSpan([],[Ee.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},r3=function(e,r,n){var a=Fo["Size4-Regular"][e.charCodeAt(0)]?Fo["Size4-Regular"][e.charCodeAt(0)][4]:Fo["Size1-Regular"][e.charCodeAt(0)][4],i=new Eu("inner",rce(e,Math.round(1e3*r))),s=new ec([i],{width:ft(a),height:ft(r),style:"width:"+ft(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=Ee.makeSvgSpan([],[s],n);return c.height=r,c.style.height=ft(r),c.style.width=ft(a),{type:"elem",elem:c}},CA=.008,hv={type:"kern",size:-1*CA},Zce=["|","\\lvert","\\rvert","\\vert"],Jce=["\\|","\\lVert","\\rVert","\\Vert"],BH=function(e,r,n,a,i,s){var c,d,h,p,m="",y=0;c=h=p=e,d=null;var x="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):Zce.includes(e)?(h="",m="vert",y=333):Jce.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",h="",p="",x="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",x="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=c="",p="",x="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(c="",h=p="",x="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=c="",p="",x="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(c="",h=p="",x="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(c="",h="",p="",x="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(c="",h="",p="",x="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",x="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",x="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",x="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",x="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",x="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",x="Size4-Regular");var T=im(c,x,i),_=T.height+T.depth,w=im(h,x,i),E=w.height+w.depth,I=im(p,x,i),C=I.height+I.depth,L=0,P=1;if(d!==null){var R=im(d,x,i);L=R.height+R.depth,P=2}var N=_+C+L,A=Math.max(0,Math.ceil((r-N)/(P*E))),j=N+A*P*E,$=a.fontMetrics().axisHeight;n&&($*=a.sizeMultiplier);var B=j/2-$,F=[];if(m.length>0){var z=j-_-C,K=Math.round(j*1e3),Q=nce(m,Math.round(z*1e3)),G=new Eu(m,Q),X=(y/1e3).toFixed(3)+"em",ne=(K/1e3).toFixed(3)+"em",de=new ec([G],{width:X,height:ne,viewBox:"0 0 "+y+" "+K}),me=Ee.makeSvgSpan([],[de],a);me.height=K/1e3,me.style.width=X,me.style.height=ne,F.push({type:"elem",elem:me})}else{if(F.push(t3(p,x,i)),F.push(hv),d===null){var H=j-_-C+2*CA;F.push(r3(h,H,a))}else{var ee=(j-_-C-L)/2+2*CA;F.push(r3(h,ee,a)),F.push(hv),F.push(t3(d,x,i)),F.push(hv),F.push(r3(h,ee,a))}F.push(hv),F.push(t3(c,x,i))}var te=a.havingBaseStyle(Ft.TEXT),Oe=Ee.makeVList({positionType:"bottom",positionData:B,children:F},te);return G7(Ee.makeSpan(["delimsizing","mult"],[Oe],te),Ft.TEXT,a,s)},n3=80,a3=.08,i3=function(e,r,n,a,i){var s=tce(e,a,n),c=new Eu(e,s),d=new ec([c],{width:"400em",height:ft(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ee.makeSvgSpan(["hide-tail"],[d],i)},eue=function(e,r){var n=r.havingBaseSizing(),a=VH("\\surd",e*n.sizeMultiplier,zH,n),i=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*s+n3,e<1?i=1:e<1.4&&(i=.7),d=(1+s+a3)/i,h=(1+s)/i,c=i3("sqrtMain",d,p,s,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+n3)*xm[a.size],h=(xm[a.size]+s)/i,d=(xm[a.size]+s+a3)/i,c=i3("sqrtSize"+a.size,d,p,s,r),c.style.minWidth="1.02em",m=1/i):(d=e+s+a3,h=e+s,p=Math.floor(1e3*e+s)+n3,c=i3("sqrtTall",d,p,s,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=ft(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*i}},$H=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],tue=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],UH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],xm=[0,1.2,1.8,2.4,3],rue=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),$H.includes(e)||UH.includes(e))return LH(e,r,!1,n,a,i);if(tue.includes(e))return BH(e,xm[r],!1,n,a,i);throw new rt("Illegal delimiter: '"+e+"'")},nue=[{type:"small",style:Ft.SCRIPTSCRIPT},{type:"small",style:Ft.SCRIPT},{type:"small",style:Ft.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],aue=[{type:"small",style:Ft.SCRIPTSCRIPT},{type:"small",style:Ft.SCRIPT},{type:"small",style:Ft.TEXT},{type:"stack"}],zH=[{type:"small",style:Ft.SCRIPTSCRIPT},{type:"small",style:Ft.SCRIPT},{type:"small",style:Ft.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],iue=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},VH=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),s=i;s<n.length&&n[s].type!=="stack";s++){var c=im(e,iue(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var h=a.havingBaseStyle(n[s].style);d*=h.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},FH=function(e,r,n,a,i,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;UH.includes(e)?c=nue:$H.includes(e)?c=zH:c=aue;var d=VH(e,r,c,a);return d.type==="small"?Xce(e,d.style,n,a,i,s):d.type==="large"?LH(e,d.size,n,a,i,s):BH(e,r,n,a,i,s)},sue=function(e,r,n,a,i,s){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return FH(e,m,!0,a,i,s)},ql={sqrtImage:eue,sizedDelim:rue,sizeToMaxHeight:xm,customSizedDelim:FH,leftRightDelim:sue},gR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},oue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function O2(t,e){var r=k2(t);if(r&&oue.includes(r.text))return r;throw r?new rt("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new rt("Invalid delimiter type '"+t.type+"'",t)}xt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=O2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:gR[t.funcName].size,mclass:gR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Ee.makeSpan([t.mclass]):ql.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Js(t.delim,t.mode));var r=new tt.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=ft(ql.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function yR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}xt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new rt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:O2(e[0],t).text,color:r}}});xt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=O2(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=mr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{yR(t);for(var r=$a(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,s=0;s<r.length;s++)r[s].isMiddle?i=!0:(n=Math.max(r[s].height,n),a=Math.max(r[s].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=Zm(e,["mopen"]):c=ql.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=ql.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=Zm(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=ql.leftRightDelim(t.right,n,a,y,t.mode,["mclose"])}return r.push(m),Ee.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{yR(t);var r=ns(t.body,e);if(t.left!=="."){var n=new tt.MathNode("mo",[Js(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new tt.MathNode("mo",[Js(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return V7(r)}});xt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=O2(e[0],t);if(!t.parser.leftrightDepth)throw new rt("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Zm(e,[]);else{r=ql.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?Js("|","text"):Js(t.delim,t.mode),n=new tt.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var W7=(t,e)=>{var r=Ee.wrapFragment(Dr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,s=0,c=zr.isCharacterBox(t.body);if(n==="sout")i=Ee.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Gn({number:.6,unit:"pt"},e),h=Gn({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=ft(m/2+d);var y=Math.floor(1e3*m*a),x=Jle(y),T=new ec([new Eu("phase",x)],{width:"400em",height:ft(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});i=Ee.makeSvgSpan(["hide-tail"],[T],e),i.style.height=ft(m),s=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var _=0,w=0,E=0;/box/.test(n)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),_=e.fontMetrics().fboxsep+(n==="colorbox"?0:E),w=_):n==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),_=4*E,w=Math.max(0,.25-r.depth)):(_=c?.2:0,w=_),i=rc.encloseSpan(r,n,_,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=ft(E)):n==="angl"&&E!==.049&&(i.style.borderTopWidth=ft(E),i.style.borderRightWidth=ft(E)),s=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var I;if(t.backgroundColor)I=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var C=/cancel|phase/.test(n)?["svg-align"]:[];I=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:s,wrapperClasses:C}]},e)}return/cancel/.test(n)&&(I.height=r.height,I.depth=r.depth),/cancel/.test(n)&&!c?Ee.makeSpan(["mord","cancel-lap"],[I],e):Ee.makeSpan(["mord"],[I],e)},K7=(t,e)=>{var r=0,n=new tt.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Nn(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};xt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=mr(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:s}},htmlBuilder:W7,mathmlBuilder:K7});xt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=mr(e[0],"color-token").color,s=mr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:s,borderColor:i,body:c}},htmlBuilder:W7,mathmlBuilder:K7});xt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});xt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:W7,mathmlBuilder:K7});xt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var qH={};function tl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)qH[r[d]]=c;i&&(Mx[e]=i),s&&(Px[e]=s)}var HH={};function Z(t,e){HH[t]=e}function vR(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var I2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new rt("{"+t.envName+"} can be used only in display mode.")};function Q7(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Ru(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var x=t.gullet.expandMacroAsText("\\arraystretch");if(x==null)s=1;else if(s=parseFloat(x),!s||s<0)throw new rt("Invalid \\arraystretch: "+x)}t.gullet.beginGroup();var T=[],_=[T],w=[],E=[],I=d!=null?[]:void 0;function C(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){I&&(t.gullet.macros.get("\\df@tag")?(I.push(t.subparse([new As("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):I.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),E.push(vR(t));;){var P=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),P={type:"ordgroup",mode:t.mode,body:P},r&&(P={type:"styling",mode:t.mode,style:r,body:[P]}),T.push(P);var R=t.fetch().text;if(R==="&"){if(m&&T.length===m){if(h||c)throw new rt("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(R==="\\end"){L(),T.length===1&&P.type==="styling"&&P.body[0].body.length===0&&(_.length>1||!p)&&_.pop(),E.length<_.length+1&&E.push([]);break}else if(R==="\\\\"){t.consume();var N=void 0;t.gullet.future().text!==" "&&(N=t.parseSizeGroup(!0)),w.push(N?N.value:null),L(),E.push(vR(t)),T=[],_.push(T),C()}else throw new rt("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:s,body:_,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:E,colSeparationType:c,tags:I,leqno:y}}function X7(t){return t.slice(0,1)==="d"?"display":"text"}var rl=function(e,r){var n,a,i=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var x=r.havingStyle(Ft.SCRIPT).sizeMultiplier;y=.2778*(x/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?Gn({number:3,unit:"ex"},r):12*m,_=3*m,w=e.arraystretch*T,E=.7*w,I=.3*w,C=0;function L(be){for(var Be=0;Be<be.length;++Be)Be>0&&(C+=.25),h.push({pos:C,isDashed:be[Be]})}for(L(s[0]),n=0;n<e.body.length;++n){var P=e.body[n],R=E,N=I;c<P.length&&(c=P.length);var A=new Array(P.length);for(a=0;a<P.length;++a){var j=Dr(P[a],r);N<j.depth&&(N=j.depth),R<j.height&&(R=j.height),A[a]=j}var $=e.rowGaps[n],B=0;$&&(B=Gn($,r),B>0&&(B+=I,N<B&&(N=B),B=0)),e.addJot&&(N+=_),A.height=R,A.depth=N,C+=R,A.pos=C,C+=N+B,d[n]=A,L(s[n+1])}var F=C/2+r.fontMetrics().axisHeight,z=e.cols||[],K=[],Q,G,X=[];if(e.tags&&e.tags.some(be=>be))for(n=0;n<i;++n){var ne=d[n],de=ne.pos-F,me=e.tags[n],H=void 0;me===!0?H=Ee.makeSpan(["eqn-num"],[],r):me===!1?H=Ee.makeSpan([],[],r):H=Ee.makeSpan([],$a(me,r,!0),r),H.depth=ne.depth,H.height=ne.height,X.push({type:"elem",elem:H,shift:de})}for(a=0,G=0;a<c||G<z.length;++a,++G){for(var ee=z[G]||{},te=!0;ee.type==="separator";){if(te||(Q=Ee.makeSpan(["arraycolsep"],[]),Q.style.width=ft(r.fontMetrics().doubleRuleSep),K.push(Q)),ee.separator==="|"||ee.separator===":"){var Oe=ee.separator==="|"?"solid":"dashed",re=Ee.makeSpan(["vertical-separator"],[],r);re.style.height=ft(C),re.style.borderRightWidth=ft(p),re.style.borderRightStyle=Oe,re.style.margin="0 "+ft(-p/2);var ce=C-F;ce&&(re.style.verticalAlign=ft(-ce)),K.push(re)}else throw new rt("Invalid separator type: "+ee.separator);G++,ee=z[G]||{},te=!1}if(!(a>=c)){var he=void 0;(a>0||e.hskipBeforeAndAfter)&&(he=zr.deflt(ee.pregap,y),he!==0&&(Q=Ee.makeSpan(["arraycolsep"],[]),Q.style.width=ft(he),K.push(Q)));var Ie=[];for(n=0;n<i;++n){var Se=d[n],We=Se[a];if(We){var Me=Se.pos-F;We.depth=Se.depth,We.height=Se.height,Ie.push({type:"elem",elem:We,shift:Me})}}Ie=Ee.makeVList({positionType:"individualShift",children:Ie},r),Ie=Ee.makeSpan(["col-align-"+(ee.align||"c")],[Ie]),K.push(Ie),(a<c-1||e.hskipBeforeAndAfter)&&(he=zr.deflt(ee.postgap,y),he!==0&&(Q=Ee.makeSpan(["arraycolsep"],[]),Q.style.width=ft(he),K.push(Q)))}}if(d=Ee.makeSpan(["mtable"],K),h.length>0){for(var _e=Ee.makeLineSpan("hline",r,p),gt=Ee.makeLineSpan("hdashline",r,p),et=[{type:"elem",elem:d,shift:0}];h.length>0;){var pt=h.pop(),st=pt.pos-F;pt.isDashed?et.push({type:"elem",elem:gt,shift:st}):et.push({type:"elem",elem:_e,shift:st})}d=Ee.makeVList({positionType:"individualShift",children:et},r)}if(X.length===0)return Ee.makeSpan(["mord"],[d],r);var xe=Ee.makeVList({positionType:"individualShift",children:X},r);return xe=Ee.makeSpan(["tag"],[xe],r),Ee.makeFragment([d,xe])},lue={c:"center ",l:"left ",r:"right "},nl=function(e,r){for(var n=[],a=new tt.MathNode("mtd",[],["mtr-glue"]),i=new tt.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],h=0;h<c.length;h++)d.push(new tt.MathNode("mtd",[Nn(c[h],r)]));e.tags&&e.tags[s]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new tt.MathNode("mtr",d))}var p=new tt.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",ft(m));var y="",x="";if(e.cols&&e.cols.length>0){var T=e.cols,_="",w=!1,E=0,I=T.length;T[0].type==="separator"&&(y+="top ",E=1),T[T.length-1].type==="separator"&&(y+="bottom ",I-=1);for(var C=E;C<I;C++)T[C].type==="align"?(x+=lue[T[C].align],w&&(_+="none "),w=!0):T[C].type==="separator"&&w&&(_+=T[C].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",x.trim()),/[sd]/.test(_)&&p.setAttribute("columnlines",_.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],P="",R=1;R<L.length;R++)P+=R%2?"0em ":"1em ";p.setAttribute("columnspacing",P.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var N="",A=e.hLinesBeforeRow;y+=A[0].length>0?"left ":"",y+=A[A.length-1].length>0?"right ":"";for(var j=1;j<A.length-1;j++)N+=A[j].length===0?"none ":A[j][0]?"dashed ":"solid ";return/[sd]/.test(N)&&p.setAttribute("rowlines",N.trim()),y!==""&&(p=new tt.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new tt.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},GH=function(e,r){e.envName.indexOf("ed")===-1&&I2(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",s=Ru(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:Q7(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=mr(r[0].body[m],"textord");p+=y.text}c=Number(p),d=c*2}var x=!d;s.body.forEach(function(E){for(var I=1;I<E.length;I+=2){var C=mr(E[I],"styling"),L=mr(C.body[0],"ordgroup");L.body.unshift(h)}if(x)d<E.length&&(d=E.length);else{var P=E.length/2;if(c<P)throw new rt("Too many math in a row: "+("expected "+c+", but got "+P),E[0])}});for(var T=0;T<d;++T){var _="r",w=0;T%2===1?_="l":T>0&&x&&(w=1),n[T]={type:"align",align:_,pregap:w,postgap:0}}return s.colSeparationType=x?"align":"alignat",s};tl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=k2(e[0]),n=r?[e[0]]:mr(e[0],"ordgroup").body,a=n.map(function(s){var c=q7(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new rt("Unknown column alignment: "+d,s)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Ru(t.parser,i,X7(t.envName))},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new rt("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Ru(t.parser,n,X7(t.envName)),s=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Ru(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=k2(e[0]),n=r?[e[0]]:mr(e[0],"ordgroup").body,a=n.map(function(s){var c=q7(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new rt("Unknown column alignment: "+d,s)});if(a.length>1)throw new rt("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Ru(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new rt("{subarray} can contain only one column");return i},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Ru(t.parser,e,X7(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:GH,htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&I2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Q7(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Ru(t.parser,e,"display")},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:GH,htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){I2(t);var e={autoTag:Q7(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Ru(t.parser,e,"display")},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return I2(t),Kce(t.parser)},htmlBuilder:rl,mathmlBuilder:nl});Z("\\nonumber","\\gdef\\@eqnsw{0}");Z("\\notag","\\nonumber");xt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new rt(t.funcName+" valid only within array environment")}});var xR=qH;xt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new rt("Invalid environment name",a);for(var i="",s=0;s<a.body.length;++s)i+=mr(a.body[s],"textord").text;if(n==="\\begin"){if(!xR.hasOwnProperty(i))throw new rt("No such environment: "+i,a);var c=xR[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,x=mr(r.parseFunction(),"environment");if(x.name!==i)throw new rt("Mismatch: \\begin{"+i+"} matched by \\end{"+x.name+"}",y);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var WH=(t,e)=>{var r=t.font,n=e.withFont(r);return Dr(t.body,n)},KH=(t,e)=>{var r=t.font,n=e.withFont(r);return Nn(t.body,n)},bR={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};xt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=Dx(e[0]),i=n;return i in bR&&(i=bR[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:WH,mathmlBuilder:KH});xt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=zr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:C2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});xt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,s=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:WH,mathmlBuilder:KH});var QH=(t,e)=>{var r=e;return t==="display"?r=r.id>=Ft.SCRIPT.id?r.text():Ft.DISPLAY:t==="text"&&r.size===Ft.DISPLAY.size?r=Ft.TEXT:t==="script"?r=Ft.SCRIPT:t==="scriptscript"&&(r=Ft.SCRIPTSCRIPT),r},Y7=(t,e)=>{var r=QH(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var s=Dr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}i=e.havingStyle(a);var h=Dr(t.denom,i,e),p,m,y;t.hasBarLine?(t.barSize?(m=Gn(t.barSize,e),p=Ee.makeLineSpan("frac-line",e,m)):p=Ee.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var x,T,_;r.size===Ft.DISPLAY.size||t.size==="display"?(x=e.fontMetrics().num1,m>0?T=3*y:T=7*y,_=e.fontMetrics().denom1):(m>0?(x=e.fontMetrics().num2,T=y):(x=e.fontMetrics().num3,T=3*y),_=e.fontMetrics().denom2);var w;if(p){var I=e.fontMetrics().axisHeight;x-s.depth-(I+.5*m)<T&&(x+=T-(x-s.depth-(I+.5*m))),I-.5*m-(h.height-_)<T&&(_+=T-(I-.5*m-(h.height-_)));var C=-(I-.5*m);w=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:_},{type:"elem",elem:p,shift:C},{type:"elem",elem:s,shift:-x}]},e)}else{var E=x-s.depth-(h.height-_);E<T&&(x+=.5*(T-E),_+=.5*(T-E)),w=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:_},{type:"elem",elem:s,shift:-x}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===Ft.DISPLAY.size?L=e.fontMetrics().delim1:r.size===Ft.SCRIPTSCRIPT.size?L=e.havingStyle(Ft.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var P,R;return t.leftDelim==null?P=Zm(e,["mopen"]):P=ql.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?R=Ee.makeSpan([]):t.rightDelim==null?R=Zm(e,["mclose"]):R=ql.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),Ee.makeSpan(["mord"].concat(i.sizingClasses(e)),[P,Ee.makeSpan(["mfrac"],[w]),R],e)},Z7=(t,e)=>{var r=new tt.MathNode("mfrac",[Nn(t.numer,e),Nn(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Gn(t.barSize,e);r.setAttribute("linethickness",ft(n))}var a=QH(t.size,e.style);if(a.size!==e.style.size){r=new tt.MathNode("mstyle",[r]);var i=a.size===Ft.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var c=new tt.MathNode("mo",[new tt.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(r),t.rightDelim!=null){var d=new tt.MathNode("mo",[new tt.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return V7(s)}return r};xt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],s,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:s,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:Y7,mathmlBuilder:Z7});xt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});xt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var wR=["display","text","script","scriptscript"],SR=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};xt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=Dx(e[0]),s=i.type==="atom"&&i.family==="open"?SR(i.text):null,c=Dx(e[1]),d=c.type==="atom"&&c.family==="close"?SR(c.text):null,h=mr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",x=e[3];if(x.type==="ordgroup"){if(x.body.length>0){var T=mr(x.body[0],"textord");y=wR[Number(T.text)]}}else x=mr(x,"textord"),y=wR[Number(x.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:Y7,mathmlBuilder:Z7});xt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:mr(e[0],"size").value,token:a}}});xt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=Ble(mr(e[1],"infix").size),s=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:s,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Y7,mathmlBuilder:Z7});var XH=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Dr(t.sup,e.havingStyle(r.sup()),e):Dr(t.sub,e.havingStyle(r.sub()),e),a=mr(t.base,"horizBrace")):a=mr(t,"horizBrace");var i=Dr(a.base,e.havingBaseStyle(Ft.DISPLAY)),s=rc.svgSpan(a,e),c;if(a.isOver?(c=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=Ee.makeVList({positionType:"bottom",positionData:i.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Ee.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=Ee.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Ee.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},cue=(t,e)=>{var r=rc.mathMLnode(t.label);return new tt.MathNode(t.isOver?"mover":"munder",[Nn(t.base,e),r])};xt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:XH,mathmlBuilder:cue});xt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=mr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:da(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=$a(t.body,e,!1);return Ee.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=ju(t.body,e);return r instanceof vs||(r=new vs("mrow",[r])),r.setAttribute("href",t.href),r}});xt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=mr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var s=n[i];s==="~"&&(s="\\textasciitilde"),a.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:da(c)}}});xt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:da(e[0])}},htmlBuilder(t,e){var r=$a(t.body,e,!1);return Ee.makeFragment(r)},mathmlBuilder(t,e){return new tt.MathNode("mrow",ns(t.body,e))}});xt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=mr(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new rt("\\htmlData key/value '"+m+"' missing equals sign");var x=m.slice(0,y),T=m.slice(y+1);d["data-"+x.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:da(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=$a(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=Ee.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>ju(t.body,e)});xt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:da(e[0]),mathml:da(e[1])}},htmlBuilder:(t,e)=>{var r=$a(t.html,e,!1);return Ee.makeFragment(r)},mathmlBuilder:(t,e)=>ju(t.mathml,e)});var s3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new rt("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!mH(n))throw new rt("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};xt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(r[0])for(var d=mr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":c=y;break;case"width":a=s3(y);break;case"height":i=s3(y);break;case"totalheight":s=s3(y);break;default:throw new rt("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var x=mr(e[0],"url").url;return c===""&&(c=x,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:x})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:s,src:x}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Gn(t.height,e),n=0;t.totalheight.number>0&&(n=Gn(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=Gn(t.width,e));var i={height:ft(r+n)};a>0&&(i.width=ft(a)),n>0&&(i.verticalAlign=ft(-n));var s=new cce(t.src,t.alt,i);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new tt.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Gn(t.height,e),a=0;if(t.totalheight.number>0&&(a=Gn(t.totalheight,e)-n,r.setAttribute("valign",ft(-a))),r.setAttribute("height",ft(n+a)),t.width.number>0){var i=Gn(t.width,e);r.setAttribute("width",ft(i))}return r.setAttribute("src",t.src),r}});xt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=mr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",s=a.value.unit==="mu";i?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return Ee.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Gn(t.dimension,e);return new tt.SpaceNode(r)}});xt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Ee.makeSpan([],[Dr(t.body,e)]),r=Ee.makeSpan(["inner"],[r],e)):r=Ee.makeSpan(["inner"],[Dr(t.body,e)]);var n=Ee.makeSpan(["fix"],[]),a=Ee.makeSpan([t.alignment],[r,n],e),i=Ee.makeSpan(["strut"]);return i.style.height=ft(a.height+a.depth),a.depth&&(i.style.verticalAlign=ft(-a.depth)),a.children.unshift(i),a=Ee.makeSpan(["thinbox"],[a],e),Ee.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new tt.MathNode("mpadded",[Nn(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});xt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",s=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:s}}});xt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new rt("Mismatched "+t.funcName)}});var _R=(t,e)=>{switch(e.style.size){case Ft.DISPLAY.size:return t.display;case Ft.TEXT.size:return t.text;case Ft.SCRIPT.size:return t.script;case Ft.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};xt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:da(e[0]),text:da(e[1]),script:da(e[2]),scriptscript:da(e[3])}},htmlBuilder:(t,e)=>{var r=_R(t,e),n=$a(r,e,!1);return Ee.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=_R(t,e);return ju(r,e)}});var YH=(t,e,r,n,a,i,s)=>{t=Ee.makeSpan([],[t]);var c=r&&zr.isCharacterBox(r),d,h;if(e){var p=Dr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Dr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var x=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=Ee.makeVList({positionType:"bottom",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:ft(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:ft(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=Ee.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:ft(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var _=t.depth+s;y=Ee.makeVList({positionType:"bottom",positionData:_,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:ft(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&i!==0&&!c){var E=Ee.makeSpan(["mspace"],[],n);E.style.marginRight=ft(i),w.unshift(E)}return Ee.makeSpan(["mop","op-limits"],w,n)},ZH=["\\smallint"],Rf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=mr(t.base,"op"),a=!0):i=mr(t,"op");var s=e.style,c=!1;s.size===Ft.DISPLAY.size&&i.symbol&&!ZH.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=Ee.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,y=Ee.staticSvg(p+"Size"+(c?"2":"1"),e);d=Ee.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var x=$a(i.body,e,!0);x.length===1&&x[0]instanceof Zs?(d=x[0],d.classes[0]="mop"):d=Ee.makeSpan(["mop"],x,e)}else{for(var T=[],_=1;_<i.name.length;_++)T.push(Ee.mathsym(i.name[_],i.mode,e));d=Ee.makeSpan(["mop"],T,e)}var w=0,E=0;return(d instanceof Zs||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,E=d.italic),a?YH(d,r,n,e,s,E,w):(w&&(d.style.position="relative",d.style.top=ft(w)),d)},c1=(t,e)=>{var r;if(t.symbol)r=new vs("mo",[Js(t.name,t.mode)]),ZH.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new vs("mo",ns(t.body,e));else{r=new vs("mi",[new qo(t.name.slice(1))]);var n=new vs("mo",[Js("","text")]);t.parentIsSupSub?r=new vs("mrow",[r,n]):r=NH([r,n])}return r},uue={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};xt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=uue[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Rf,mathmlBuilder:c1});xt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:da(n)}},htmlBuilder:Rf,mathmlBuilder:c1});var due={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};xt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Rf,mathmlBuilder:c1});xt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Rf,mathmlBuilder:c1});xt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=due[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Rf,mathmlBuilder:c1});var JH=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=mr(t.base,"operatorname"),a=!0):i=mr(t,"operatorname");var s;if(i.body.length>0){for(var c=i.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=$a(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof Zs&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Ee.makeSpan(["mop"],d,e)}else s=Ee.makeSpan(["mop"],[],e);return a?YH(s,r,n,e,e.style,0,0):s},hue=(t,e)=>{for(var r=ns(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof tt.SpaceNode))if(i instanceof tt.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=i.children[0];i.children.length===1&&s instanceof tt.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new tt.TextNode(c)]}var d=new tt.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new tt.MathNode("mo",[Js("","text")]);return t.parentIsSupSub?new tt.MathNode("mrow",[d,h]):tt.newDocumentFragment([d,h])};xt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:da(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:JH,mathmlBuilder:hue});Z("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");u0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Ee.makeFragment($a(t.body,e,!1)):Ee.makeSpan(["mord"],$a(t.body,e,!0),e)},mathmlBuilder(t,e){return ju(t.body,e,!0)}});xt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Dr(t.body,e.havingCrampedStyle()),n=Ee.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return Ee.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new tt.MathNode("mo",[new tt.TextNode("")]);r.setAttribute("stretchy","true");var n=new tt.MathNode("mover",[Nn(t.body,e),r]);return n.setAttribute("accent","true"),n}});xt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:da(n)}},htmlBuilder:(t,e)=>{var r=$a(t.body,e.withPhantom(),!1);return Ee.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=ns(t.body,e);return new tt.MathNode("mphantom",r)}});xt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ee.makeSpan([],[Dr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Ee.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=ns(da(t.body),e),n=new tt.MathNode("mphantom",r),a=new tt.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});xt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Ee.makeSpan(["inner"],[Dr(t.body,e.withPhantom())]),n=Ee.makeSpan(["fix"],[]);return Ee.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=ns(da(t.body),e),n=new tt.MathNode("mphantom",r),a=new tt.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});xt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=mr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Dr(t.body,e),n=Gn(t.dy,e);return Ee.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new tt.MathNode("mpadded",[Nn(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});xt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});xt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=mr(e[0],"size"),s=mr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&mr(a,"size").value,width:i.value,height:s.value}},htmlBuilder(t,e){var r=Ee.makeSpan(["mord","rule"],[],e),n=Gn(t.width,e),a=Gn(t.height,e),i=t.shift?Gn(t.shift,e):0;return r.style.borderRightWidth=ft(n),r.style.borderTopWidth=ft(a),r.style.bottom=ft(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Gn(t.width,e),n=Gn(t.height,e),a=t.shift?Gn(t.shift,e):0,i=e.color&&e.getColor()||"black",s=new tt.MathNode("mspace");s.setAttribute("mathbackground",i),s.setAttribute("width",ft(r)),s.setAttribute("height",ft(n));var c=new tt.MathNode("mpadded",[s]);return a>=0?c.setAttribute("height",ft(a)):(c.setAttribute("height",ft(a)),c.setAttribute("depth",ft(-a))),c.setAttribute("voffset",ft(a)),c}});function eG(t,e,r){for(var n=$a(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var s=n[i].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[s+1]==="reset-size"+e.size&&(n[i].classes[s+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return Ee.makeFragment(n)}var TR=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],fue=(t,e)=>{var r=e.havingSize(t.size);return eG(t.body,r,e)};xt({type:"sizing",names:TR,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:TR.indexOf(n)+1,body:i}},htmlBuilder:fue,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=ns(t.body,r),a=new tt.MathNode("mstyle",n);return a.setAttribute("mathsize",ft(r.sizeMultiplier)),a}});xt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,s=r[0]&&mr(r[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var h=s.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=Ee.makeSpan([],[Dr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Ee.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new tt.MathNode("mpadded",[Nn(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});xt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Dr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Ee.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<Ft.TEXT.id&&(i=e.fontMetrics().xHeight);var s=a+i/4,c=r.height+r.depth+s+a,{span:d,ruleWidth:h,advanceWidth:p}=ql.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+s&&(s=(s+m-r.height-r.depth)/2);var y=d.height-r.height-s-h;r.style.paddingLeft=ft(p);var x=Ee.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var T=e.havingStyle(Ft.SCRIPTSCRIPT),_=Dr(t.index,T,e),w=.6*(x.height-x.depth),E=Ee.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:_}]},e),I=Ee.makeSpan(["root"],[E]);return Ee.makeSpan(["mord","sqrt"],[I,x],e)}else return Ee.makeSpan(["mord","sqrt"],[x],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new tt.MathNode("mroot",[Nn(r,e),Nn(n,e)]):new tt.MathNode("msqrt",[Nn(r,e)])}});var AR={display:Ft.DISPLAY,text:Ft.TEXT,script:Ft.SCRIPT,scriptscript:Ft.SCRIPTSCRIPT};xt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:s,body:i}},htmlBuilder(t,e){var r=AR[t.style],n=e.havingStyle(r).withFont("");return eG(t.body,n,e)},mathmlBuilder(t,e){var r=AR[t.style],n=e.havingStyle(r),a=ns(t.body,n),i=new tt.MathNode("mstyle",a),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var pue=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===Ft.DISPLAY.size||n.alwaysHandleSupSub);return a?Rf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===Ft.DISPLAY.size||n.limits);return i?JH:null}else{if(n.type==="accent")return zr.isCharacterBox(n.base)?H7:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?XH:null}else return null}else return null};u0({type:"supsub",htmlBuilder(t,e){var r=pue(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,s=Dr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,y=n&&zr.isCharacterBox(n);if(a){var x=e.havingStyle(e.style.sup());c=Dr(a,x,e),y||(p=s.height-x.fontMetrics().supDrop*x.sizeMultiplier/e.sizeMultiplier)}if(i){var T=e.havingStyle(e.style.sub());d=Dr(i,T,e),y||(m=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var _;e.style===Ft.DISPLAY?_=h.sup1:e.style.cramped?_=h.sup3:_=h.sup2;var w=e.sizeMultiplier,E=ft(.5/h.ptPerEm/w),I=null;if(d){var C=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof Zs||C)&&(I=ft(-s.italic))}var L;if(c&&d){p=Math.max(p,_,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var P=h.defaultRuleThickness,R=4*P;if(p-c.depth-(d.height-m)<R){m=R-(p-c.depth)+d.height;var N=.8*h.xHeight-(p-c.depth);N>0&&(p+=N,m-=N)}var A=[{type:"elem",elem:d,shift:m,marginRight:E,marginLeft:I},{type:"elem",elem:c,shift:-p,marginRight:E}];L=Ee.makeVList({positionType:"individualShift",children:A},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var j=[{type:"elem",elem:d,marginLeft:I,marginRight:E}];L=Ee.makeVList({positionType:"shift",positionData:m,children:j},e)}else if(c)p=Math.max(p,_,c.depth+.25*h.xHeight),L=Ee.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var $=EA(s,"right")||"mord";return Ee.makeSpan([$],[s,Ee.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Nn(t.base,e)];t.sub&&i.push(Nn(t.sub,e)),t.sup&&i.push(Nn(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Ft.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Ft.DISPLAY||h.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Ft.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Ft.DISPLAY)?s="munder":s="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Ft.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Ft.DISPLAY)?s="mover":s="msup"}return new tt.MathNode(s,i)}});u0({type:"atom",htmlBuilder(t,e){return Ee.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new tt.MathNode("mo",[Js(t.text,t.mode)]);if(t.family==="bin"){var n=F7(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var tG={mi:"italic",mn:"normal",mtext:"normal"};u0({type:"mathord",htmlBuilder(t,e){return Ee.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new tt.MathNode("mi",[Js(t.text,t.mode,e)]),n=F7(t,e)||"italic";return n!==tG[r.type]&&r.setAttribute("mathvariant",n),r}});u0({type:"textord",htmlBuilder(t,e){return Ee.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=Js(t.text,t.mode,e),n=F7(t,e)||"normal",a;return t.mode==="text"?a=new tt.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new tt.MathNode("mn",[r]):t.text==="\\prime"?a=new tt.MathNode("mo",[r]):a=new tt.MathNode("mi",[r]),n!==tG[a.type]&&a.setAttribute("mathvariant",n),a}});var o3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},l3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};u0({type:"spacing",htmlBuilder(t,e){if(l3.hasOwnProperty(t.text)){var r=l3[t.text].className||"";if(t.mode==="text"){var n=Ee.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Ee.makeSpan(["mspace",r],[Ee.mathsym(t.text,t.mode,e)],e)}else{if(o3.hasOwnProperty(t.text))return Ee.makeSpan(["mspace",o3[t.text]],[],e);throw new rt('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(l3.hasOwnProperty(t.text))r=new tt.MathNode("mtext",[new tt.TextNode("")]);else{if(o3.hasOwnProperty(t.text))return new tt.MathNode("mspace");throw new rt('Unknown type of space "'+t.text+'"')}return r}});var NR=()=>{var t=new tt.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};u0({type:"tag",mathmlBuilder(t,e){var r=new tt.MathNode("mtable",[new tt.MathNode("mtr",[NR(),new tt.MathNode("mtd",[ju(t.body,e)]),NR(),new tt.MathNode("mtd",[ju(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var ER={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},jR={"\\textbf":"textbf","\\textmd":"textmd"},mue={"\\textit":"textit","\\textup":"textup"},kR=(t,e)=>{var r=t.font;if(r){if(ER[r])return e.withTextFontFamily(ER[r]);if(jR[r])return e.withTextFontWeight(jR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(mue[r])};xt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:da(a),font:n}},htmlBuilder(t,e){var r=kR(t,e),n=$a(t.body,r,!0);return Ee.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=kR(t,e);return ju(t.body,r)}});xt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Dr(t.body,e),n=Ee.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=Ee.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return Ee.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new tt.MathNode("mo",[new tt.TextNode("")]);r.setAttribute("stretchy","true");var n=new tt.MathNode("munder",[Nn(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});xt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Dr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return Ee.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new tt.MathNode("mpadded",[Nn(t.body,e)],["vcenter"])}});xt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new rt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=CR(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var s=r[i];s==="~"&&(s="\\textasciitilde"),n.push(Ee.makeSymbol(s,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return Ee.makeSpan(["mord","text"].concat(a.sizingClasses(e)),Ee.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new tt.TextNode(CR(t)),n=new tt.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var CR=t=>t.body.replace(/ /g,t.star?"":""),lu=TH,rG=`[ \r
	]`,gue="\\\\[a-zA-Z@]+",yue="\\\\[^\uD800-\uDFFF]",vue="("+gue+")"+rG+"*",xue=`\\\\(
|[ \r	]+
?)[ \r	]*`,OA="[-]",bue=new RegExp(OA+"+$"),wue="("+rG+"+)|"+(xue+"|")+"([!-\\[\\]---]"+(OA+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(OA+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+vue)+("|"+yue+")");class OR{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(wue,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new As("EOF",new Xi(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new rt("Unexpected character: '"+e[r]+"'",new As(e[r],new Xi(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new As(a,new Xi(this,r,this.tokenRegex.lastIndex))}}class Sue{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new rt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var _ue=HH;Z("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Z("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});Z("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});Z("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});Z("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Z("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Z("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var IR={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Z("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new rt("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=IR[e.text],n==null||n>=r)throw new rt("Invalid base-"+r+" digit "+e.text);for(var a;(a=IR[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var J7=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new rt("\\newcommand's first argument must be a macro name");var i=a[0].text,s=t.isDefined(i);if(s&&!e)throw new rt("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!s&&!r)throw new rt("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new rt("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return s&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};Z("\\newcommand",t=>J7(t,!1,!0,!1));Z("\\renewcommand",t=>J7(t,!0,!1,!1));Z("\\providecommand",t=>J7(t,!0,!0,!0));Z("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});Z("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});Z("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),lu[r],On.math[r],On.text[r]),""});Z("\\bgroup","{");Z("\\egroup","}");Z("~","\\nobreakspace");Z("\\lq","`");Z("\\rq","'");Z("\\aa","\\r a");Z("\\AA","\\r A");Z("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Z("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Z("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Z("","\\mathscr{B}");Z("","\\mathscr{E}");Z("","\\mathscr{F}");Z("","\\mathscr{H}");Z("","\\mathscr{I}");Z("","\\mathscr{L}");Z("","\\mathscr{M}");Z("","\\mathscr{R}");Z("","\\mathfrak{C}");Z("","\\mathfrak{H}");Z("","\\mathfrak{Z}");Z("\\Bbbk","\\Bbb{k}");Z("","\\cdotp");Z("\\llap","\\mathllap{\\textrm{#1}}");Z("\\rlap","\\mathrlap{\\textrm{#1}}");Z("\\clap","\\mathclap{\\textrm{#1}}");Z("\\mathstrut","\\vphantom{(}");Z("\\underbar","\\underline{\\text{#1}}");Z("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Z("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Z("\\ne","\\neq");Z("","\\neq");Z("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Z("","\\notin");Z("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Z("","\\perp");Z("","\\mathclose{!\\mkern-0.8mu!}");Z("","\\notni");Z("","\\ulcorner");Z("","\\urcorner");Z("","\\llcorner");Z("","\\lrcorner");Z("","\\copyright");Z("","\\textregistered");Z("","\\textregistered");Z("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Z("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Z("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Z("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Z("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Z("","\\vdots");Z("\\varGamma","\\mathit{\\Gamma}");Z("\\varDelta","\\mathit{\\Delta}");Z("\\varTheta","\\mathit{\\Theta}");Z("\\varLambda","\\mathit{\\Lambda}");Z("\\varXi","\\mathit{\\Xi}");Z("\\varPi","\\mathit{\\Pi}");Z("\\varSigma","\\mathit{\\Sigma}");Z("\\varUpsilon","\\mathit{\\Upsilon}");Z("\\varPhi","\\mathit{\\Phi}");Z("\\varPsi","\\mathit{\\Psi}");Z("\\varOmega","\\mathit{\\Omega}");Z("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Z("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Z("\\boxed","\\fbox{$\\displaystyle{#1}$}");Z("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Z("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Z("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Z("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Z("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var RR={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Z("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in RR?e=RR[r]:(r.slice(0,4)==="\\not"||r in On.math&&["bin","rel"].includes(On.math[r].group))&&(e="\\dotsb"),e});var eE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Z("\\dotso",function(t){var e=t.future().text;return e in eE?"\\ldots\\,":"\\ldots"});Z("\\dotsc",function(t){var e=t.future().text;return e in eE&&e!==","?"\\ldots\\,":"\\ldots"});Z("\\cdots",function(t){var e=t.future().text;return e in eE?"\\@cdots\\,":"\\@cdots"});Z("\\dotsb","\\cdots");Z("\\dotsm","\\cdots");Z("\\dotsi","\\!\\cdots");Z("\\dotsx","\\ldots\\,");Z("\\DOTSI","\\relax");Z("\\DOTSB","\\relax");Z("\\DOTSX","\\relax");Z("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Z("\\,","\\tmspace+{3mu}{.1667em}");Z("\\thinspace","\\,");Z("\\>","\\mskip{4mu}");Z("\\:","\\tmspace+{4mu}{.2222em}");Z("\\medspace","\\:");Z("\\;","\\tmspace+{5mu}{.2777em}");Z("\\thickspace","\\;");Z("\\!","\\tmspace-{3mu}{.1667em}");Z("\\negthinspace","\\!");Z("\\negmedspace","\\tmspace-{4mu}{.2222em}");Z("\\negthickspace","\\tmspace-{5mu}{.277em}");Z("\\enspace","\\kern.5em ");Z("\\enskip","\\hskip.5em\\relax");Z("\\quad","\\hskip1em\\relax");Z("\\qquad","\\hskip2em\\relax");Z("\\tag","\\@ifstar\\tag@literal\\tag@paren");Z("\\tag@paren","\\tag@literal{({#1})}");Z("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new rt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Z("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Z("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Z("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Z("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Z("\\newline","\\\\\\relax");Z("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var nG=ft(Fo["Main-Regular"][84][1]-.7*Fo["Main-Regular"][65][1]);Z("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+nG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Z("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+nG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Z("\\hspace","\\@ifstar\\@hspacer\\@hspace");Z("\\@hspace","\\hskip #1\\relax");Z("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Z("\\ordinarycolon",":");Z("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Z("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Z("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Z("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Z("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Z("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Z("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Z("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Z("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Z("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Z("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Z("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Z("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Z("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Z("","\\dblcolon");Z("","\\eqcolon");Z("","\\coloneqq");Z("","\\eqqcolon");Z("","\\Coloneqq");Z("\\ratio","\\vcentcolon");Z("\\coloncolon","\\dblcolon");Z("\\colonequals","\\coloneqq");Z("\\coloncolonequals","\\Coloneqq");Z("\\equalscolon","\\eqqcolon");Z("\\equalscoloncolon","\\Eqqcolon");Z("\\colonminus","\\coloneq");Z("\\coloncolonminus","\\Coloneq");Z("\\minuscolon","\\eqcolon");Z("\\minuscoloncolon","\\Eqcolon");Z("\\coloncolonapprox","\\Colonapprox");Z("\\coloncolonsim","\\Colonsim");Z("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Z("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Z("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Z("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Z("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Z("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Z("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Z("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Z("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Z("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Z("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Z("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Z("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Z("\\nleqq","\\html@mathml{\\@nleqq}{}");Z("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Z("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Z("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Z("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Z("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Z("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Z("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Z("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Z("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Z("\\imath","\\html@mathml{\\@imath}{}");Z("\\jmath","\\html@mathml{\\@jmath}{}");Z("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Z("","\\llbracket");Z("","\\rrbracket");Z("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Z("","\\lBrace");Z("","\\rBrace");Z("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Z("","\\minuso");Z("\\darr","\\downarrow");Z("\\dArr","\\Downarrow");Z("\\Darr","\\Downarrow");Z("\\lang","\\langle");Z("\\rang","\\rangle");Z("\\uarr","\\uparrow");Z("\\uArr","\\Uparrow");Z("\\Uarr","\\Uparrow");Z("\\N","\\mathbb{N}");Z("\\R","\\mathbb{R}");Z("\\Z","\\mathbb{Z}");Z("\\alef","\\aleph");Z("\\alefsym","\\aleph");Z("\\Alpha","\\mathrm{A}");Z("\\Beta","\\mathrm{B}");Z("\\bull","\\bullet");Z("\\Chi","\\mathrm{X}");Z("\\clubs","\\clubsuit");Z("\\cnums","\\mathbb{C}");Z("\\Complex","\\mathbb{C}");Z("\\Dagger","\\ddagger");Z("\\diamonds","\\diamondsuit");Z("\\empty","\\emptyset");Z("\\Epsilon","\\mathrm{E}");Z("\\Eta","\\mathrm{H}");Z("\\exist","\\exists");Z("\\harr","\\leftrightarrow");Z("\\hArr","\\Leftrightarrow");Z("\\Harr","\\Leftrightarrow");Z("\\hearts","\\heartsuit");Z("\\image","\\Im");Z("\\infin","\\infty");Z("\\Iota","\\mathrm{I}");Z("\\isin","\\in");Z("\\Kappa","\\mathrm{K}");Z("\\larr","\\leftarrow");Z("\\lArr","\\Leftarrow");Z("\\Larr","\\Leftarrow");Z("\\lrarr","\\leftrightarrow");Z("\\lrArr","\\Leftrightarrow");Z("\\Lrarr","\\Leftrightarrow");Z("\\Mu","\\mathrm{M}");Z("\\natnums","\\mathbb{N}");Z("\\Nu","\\mathrm{N}");Z("\\Omicron","\\mathrm{O}");Z("\\plusmn","\\pm");Z("\\rarr","\\rightarrow");Z("\\rArr","\\Rightarrow");Z("\\Rarr","\\Rightarrow");Z("\\real","\\Re");Z("\\reals","\\mathbb{R}");Z("\\Reals","\\mathbb{R}");Z("\\Rho","\\mathrm{P}");Z("\\sdot","\\cdot");Z("\\sect","\\S");Z("\\spades","\\spadesuit");Z("\\sub","\\subset");Z("\\sube","\\subseteq");Z("\\supe","\\supseteq");Z("\\Tau","\\mathrm{T}");Z("\\thetasym","\\vartheta");Z("\\weierp","\\wp");Z("\\Zeta","\\mathrm{Z}");Z("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Z("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Z("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Z("\\bra","\\mathinner{\\langle{#1}|}");Z("\\ket","\\mathinner{|{#1}\\rangle}");Z("\\braket","\\mathinner{\\langle{#1}\\rangle}");Z("\\Bra","\\left\\langle#1\\right|");Z("\\Ket","\\left|#1\\right\\rangle");var aG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",s),a.length&&y.macros.set("\\|",c));var x=m;if(!m&&a.length){var T=y.future();T.text==="|"&&(y.popToken(),x=!0)}return{tokens:x?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};Z("\\bra@ket",aG(!1));Z("\\bra@set",aG(!0));Z("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Z("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Z("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Z("\\angln","{\\angl n}");Z("\\blue","\\textcolor{##6495ed}{#1}");Z("\\orange","\\textcolor{##ffa500}{#1}");Z("\\pink","\\textcolor{##ff00af}{#1}");Z("\\red","\\textcolor{##df0030}{#1}");Z("\\green","\\textcolor{##28ae7b}{#1}");Z("\\gray","\\textcolor{gray}{#1}");Z("\\purple","\\textcolor{##9d38bd}{#1}");Z("\\blueA","\\textcolor{##ccfaff}{#1}");Z("\\blueB","\\textcolor{##80f6ff}{#1}");Z("\\blueC","\\textcolor{##63d9ea}{#1}");Z("\\blueD","\\textcolor{##11accd}{#1}");Z("\\blueE","\\textcolor{##0c7f99}{#1}");Z("\\tealA","\\textcolor{##94fff5}{#1}");Z("\\tealB","\\textcolor{##26edd5}{#1}");Z("\\tealC","\\textcolor{##01d1c1}{#1}");Z("\\tealD","\\textcolor{##01a995}{#1}");Z("\\tealE","\\textcolor{##208170}{#1}");Z("\\greenA","\\textcolor{##b6ffb0}{#1}");Z("\\greenB","\\textcolor{##8af281}{#1}");Z("\\greenC","\\textcolor{##74cf70}{#1}");Z("\\greenD","\\textcolor{##1fab54}{#1}");Z("\\greenE","\\textcolor{##0d923f}{#1}");Z("\\goldA","\\textcolor{##ffd0a9}{#1}");Z("\\goldB","\\textcolor{##ffbb71}{#1}");Z("\\goldC","\\textcolor{##ff9c39}{#1}");Z("\\goldD","\\textcolor{##e07d10}{#1}");Z("\\goldE","\\textcolor{##a75a05}{#1}");Z("\\redA","\\textcolor{##fca9a9}{#1}");Z("\\redB","\\textcolor{##ff8482}{#1}");Z("\\redC","\\textcolor{##f9685d}{#1}");Z("\\redD","\\textcolor{##e84d39}{#1}");Z("\\redE","\\textcolor{##bc2612}{#1}");Z("\\maroonA","\\textcolor{##ffbde0}{#1}");Z("\\maroonB","\\textcolor{##ff92c6}{#1}");Z("\\maroonC","\\textcolor{##ed5fa6}{#1}");Z("\\maroonD","\\textcolor{##ca337c}{#1}");Z("\\maroonE","\\textcolor{##9e034e}{#1}");Z("\\purpleA","\\textcolor{##ddd7ff}{#1}");Z("\\purpleB","\\textcolor{##c6b9fc}{#1}");Z("\\purpleC","\\textcolor{##aa87ff}{#1}");Z("\\purpleD","\\textcolor{##7854ab}{#1}");Z("\\purpleE","\\textcolor{##543b78}{#1}");Z("\\mintA","\\textcolor{##f5f9e8}{#1}");Z("\\mintB","\\textcolor{##edf2df}{#1}");Z("\\mintC","\\textcolor{##e0e5cc}{#1}");Z("\\grayA","\\textcolor{##f6f7f7}{#1}");Z("\\grayB","\\textcolor{##f0f1f2}{#1}");Z("\\grayC","\\textcolor{##e3e5e6}{#1}");Z("\\grayD","\\textcolor{##d6d8da}{#1}");Z("\\grayE","\\textcolor{##babec2}{#1}");Z("\\grayF","\\textcolor{##888d93}{#1}");Z("\\grayG","\\textcolor{##626569}{#1}");Z("\\grayH","\\textcolor{##3b3e40}{#1}");Z("\\grayI","\\textcolor{##21242c}{#1}");Z("\\kaBlue","\\textcolor{##314453}{#1}");Z("\\kaGreen","\\textcolor{##71B307}{#1}");var iG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Tue{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Sue(_ue,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new OR(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new As("EOF",n.loc)),this.pushTokens(a),new As("",Xi.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,s=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++s;else if(i.text==="}"){if(--s,s===-1)throw new rt("Extra }",i)}else if(i.text==="EOF")throw new rt("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((s===0||s===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(s!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new rt("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new rt("Use of the macro doesn't match its definition",i)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(r&&r[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new rt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new rt("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,s=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new rt("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...s[+d.text-1]);else throw new rt("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new As(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var s=a.replace(/##/g,"");s.indexOf("#"+(i+1))!==-1;)++i;for(var c=new OR(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||lu.hasOwnProperty(e)||On.math.hasOwnProperty(e)||On.text.hasOwnProperty(e)||iG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:lu.hasOwnProperty(e)&&!lu[e].primitive}}var MR=/^[]/,fv=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),c3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},PR={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class R2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Tue(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new rt("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new As("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(R2.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&lu[a.text]&&lu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new rt("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,s,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],s],[]):h=this.callFunction(n,[i,s],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new rt("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var s=i.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new rt("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new rt("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new rt("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new rt("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(fv[i.text]){var h=MR.test(i.text),p=[];for(p.push(new As(fv[i.text])),this.consume();;){var m=this.fetch().text;if(!fv[m]||MR.test(m)!==h)break;p.unshift(new As(fv[m])),this.consume()}var y=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=lu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new rt("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new rt("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new rt("Can't use function '"+a+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,s,c,n,e)}callFunction(e,r,n,a,i){var s={funcName:e,parser:this,token:a,breakOnTokenText:i},c=lu[e];if(c&&c.handler)return c.handler(s,r,n);throw new rt("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],s=0;s<n;s++){var c=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&s===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new rt("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new rt("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new rt("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new rt("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",s;(s=this.fetch()).text!=="EOF"&&e.test(i+s.text);)a=s,i+=a.text,this.consume();if(i==="")throw new rt("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new rt("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new rt("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!mH(i))throw new rt("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),s}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var s=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Xi.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!iG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new rt("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Xi.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Xi.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Xi.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new rt(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}PR.hasOwnProperty(r[0])&&!On[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=PR[r[0]]+r.slice(1));var i=bue.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var s;if(On[this.mode][r]){this.settings.strict&&this.mode==="math"&&NA.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=On[this.mode][r].group,d=Xi.range(e),h;if(hce.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};s=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(pH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:Xi.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var y=i[0][m];if(!c3[y])throw new rt("Unknown accent ' "+y+"'",e);var x=c3[y][this.mode]||c3[y].text;if(!x)throw new rt("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Xi.range(e),label:x,isStretchy:!1,isShifty:!0,base:s}}return s}}R2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var tE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new R2(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new rt("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new As("\\df@tag")])}]}return a},sG=function(e,r,n){r.textContent="";var a=rE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),sG=function(){throw new rt("KaTeX doesn't work in quirks mode.")});var Aue=function(e,r){var n=rE(e,r).toMarkup();return n},Nue=function(e,r){var n=new L7(r);return tE(e,n)},oG=function(e,r,n){if(n.throwOnError||!(e instanceof rt))throw e;var a=Ee.makeSpan(["katex-error"],[new Zs(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},rE=function(e,r){var n=new L7(r);try{var a=tE(e,n);return Pce(a,e,n)}catch(i){return oG(i,e,n)}},Eue=function(e,r){var n=new L7(r);try{var a=tE(e,n);return Dce(a,e,n)}catch(i){return oG(i,e,n)}},jue="0.16.28",kue={Span:l1,Anchor:U7,SymbolNode:Zs,SvgNode:ec,PathNode:Eu,LineNode:AA},Lx={version:jue,render:sG,renderToString:Aue,ParseError:rt,SETTINGS_SCHEMA:Qv,__parse:Nue,__renderToDomTree:rE,__renderToHTMLTree:Eue,__setFontMetrics:ace,__defineSymbol:k,__defineFunction:xt,__defineMacro:Z,__domTree:kue};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function au(t){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(t)}function IA(t,e){return IA=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},IA(t,e)}function Cue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yv(t,e,r){return Cue()?Yv=Reflect.construct:Yv=function(a,i,s){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return s&&IA(h,s.prototype),h},Yv.apply(null,arguments)}function po(t){return Oue(t)||Iue(t)||Rue(t)||Mue()}function Oue(t){if(Array.isArray(t))return RA(t)}function Iue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rue(t,e){if(t){if(typeof t=="string")return RA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RA(t,e)}}function RA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pue=Object.hasOwnProperty,DR=Object.setPrototypeOf,Due=Object.isFrozen,Lue=Object.getPrototypeOf,Bue=Object.getOwnPropertyDescriptor,Li=Object.freeze,eo=Object.seal,$ue=Object.create,lG=typeof Reflect<"u"&&Reflect,Bx=lG.apply,MA=lG.construct;Bx||(Bx=function(e,r,n){return e.apply(r,n)});Li||(Li=function(e){return e});eo||(eo=function(e){return e});MA||(MA=function(e,r){return Yv(e,po(r))});var Uue=to(Array.prototype.forEach),LR=to(Array.prototype.pop),Vp=to(Array.prototype.push),Zv=to(String.prototype.toLowerCase),u3=to(String.prototype.toString),BR=to(String.prototype.match),ho=to(String.prototype.replace),zue=to(String.prototype.indexOf),Vue=to(String.prototype.trim),oi=to(RegExp.prototype.test),d3=Fue(TypeError);function to(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return Bx(t,e,n)}}function Fue(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return MA(t,r)}}function yr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:Zv,DR&&DR(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var s=r(i);s!==i&&(Due(e)||(e[a]=s),i=s)}t[i]=!0}return t}function ud(t){var e=$ue(null),r;for(r in t)Bx(Pue,t,[r])===!0&&(e[r]=t[r]);return e}function pv(t,e){for(;t!==null;){var r=Bue(t,e);if(r){if(r.get)return to(r.get);if(typeof r.value=="function")return to(r.value)}t=Lue(t)}function n(a){return console.warn("fallback value for",a),null}return n}var $R=Li(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),h3=Li(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),f3=Li(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),que=Li(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),p3=Li(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Hue=Li(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),UR=Li(["#text"]),zR=Li(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),m3=Li(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),VR=Li(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mv=Li(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Gue=eo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Wue=eo(/<%[\w\W]*|[\w\W]*%>/gm),Kue=eo(/\${[\w\W]*}/gm),Que=eo(/^data-[\-\w.\u00B7-\uFFFF]+$/),Xue=eo(/^aria-[\-\w]+$/),Yue=eo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Zue=eo(/^(?:\w+script|data):/i),Jue=eo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ede=eo(/^html$/i),tde=eo(/^[a-z][.\w]*(-[.\w]+)+$/i),rde=function(){return typeof window>"u"?null:window},nde=function(e,r){if(au(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function cG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rde(),e=function(ue){return cG(ue)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,s=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,x=t.trustedTypes,T=c.prototype,_=pv(T,"cloneNode"),w=pv(T,"nextSibling"),E=pv(T,"childNodes"),I=pv(T,"parentNode");if(typeof i=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var L=nde(x,r),P=L?L.createHTML(""):"",R=n,N=R.implementation,A=R.createNodeIterator,j=R.createDocumentFragment,$=R.getElementsByTagName,B=r.importNode,F={};try{F=ud(n).documentMode?n.documentMode:{}}catch{}var z={};e.isSupported=typeof I=="function"&&N&&N.createHTMLDocument!==void 0&&F!==9;var K=Gue,Q=Wue,G=Kue,X=Que,ne=Xue,de=Zue,me=Jue,H=tde,ee=Yue,te=null,Oe=yr({},[].concat(po($R),po(h3),po(f3),po(p3),po(UR))),re=null,ce=yr({},[].concat(po(zR),po(m3),po(VR),po(mv))),he=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ie=null,Se=null,We=!0,Me=!0,_e=!1,gt=!0,et=!1,pt=!0,st=!1,xe=!1,be=!1,Be=!1,Ye=!1,ht=!1,Ze=!0,yt=!1,Rt="user-content-",Bt=!0,Tt=!1,bt={},Zt=null,tn=yr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),rn=null,ln=yr({},["audio","video","img","source","image","track"]),ye=null,it=yr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),At="http://www.w3.org/1998/Math/MathML",jt="http://www.w3.org/2000/svg",Pt="http://www.w3.org/1999/xhtml",ct=Pt,gr=!1,wn=null,Rn=yr({},[At,jt,Pt],u3),kr,dr=["application/xhtml+xml","text/html"],Nt="text/html",wt,sr=null,Qr=n.createElement("form"),Mr=function(ue){return ue instanceof RegExp||ue instanceof Function},Xr=function(ue){sr&&sr===ue||((!ue||au(ue)!=="object")&&(ue={}),ue=ud(ue),kr=dr.indexOf(ue.PARSER_MEDIA_TYPE)===-1?kr=Nt:kr=ue.PARSER_MEDIA_TYPE,wt=kr==="application/xhtml+xml"?u3:Zv,te="ALLOWED_TAGS"in ue?yr({},ue.ALLOWED_TAGS,wt):Oe,re="ALLOWED_ATTR"in ue?yr({},ue.ALLOWED_ATTR,wt):ce,wn="ALLOWED_NAMESPACES"in ue?yr({},ue.ALLOWED_NAMESPACES,u3):Rn,ye="ADD_URI_SAFE_ATTR"in ue?yr(ud(it),ue.ADD_URI_SAFE_ATTR,wt):it,rn="ADD_DATA_URI_TAGS"in ue?yr(ud(ln),ue.ADD_DATA_URI_TAGS,wt):ln,Zt="FORBID_CONTENTS"in ue?yr({},ue.FORBID_CONTENTS,wt):tn,Ie="FORBID_TAGS"in ue?yr({},ue.FORBID_TAGS,wt):{},Se="FORBID_ATTR"in ue?yr({},ue.FORBID_ATTR,wt):{},bt="USE_PROFILES"in ue?ue.USE_PROFILES:!1,We=ue.ALLOW_ARIA_ATTR!==!1,Me=ue.ALLOW_DATA_ATTR!==!1,_e=ue.ALLOW_UNKNOWN_PROTOCOLS||!1,gt=ue.ALLOW_SELF_CLOSE_IN_ATTR!==!1,et=ue.SAFE_FOR_TEMPLATES||!1,pt=ue.SAFE_FOR_XML!==!1,st=ue.WHOLE_DOCUMENT||!1,Be=ue.RETURN_DOM||!1,Ye=ue.RETURN_DOM_FRAGMENT||!1,ht=ue.RETURN_TRUSTED_TYPE||!1,be=ue.FORCE_BODY||!1,Ze=ue.SANITIZE_DOM!==!1,yt=ue.SANITIZE_NAMED_PROPS||!1,Bt=ue.KEEP_CONTENT!==!1,Tt=ue.IN_PLACE||!1,ee=ue.ALLOWED_URI_REGEXP||ee,ct=ue.NAMESPACE||Pt,he=ue.CUSTOM_ELEMENT_HANDLING||{},ue.CUSTOM_ELEMENT_HANDLING&&Mr(ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(he.tagNameCheck=ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&Mr(ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(he.attributeNameCheck=ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&typeof ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(he.allowCustomizedBuiltInElements=ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),et&&(Me=!1),Ye&&(Be=!0),bt&&(te=yr({},po(UR)),re=[],bt.html===!0&&(yr(te,$R),yr(re,zR)),bt.svg===!0&&(yr(te,h3),yr(re,m3),yr(re,mv)),bt.svgFilters===!0&&(yr(te,f3),yr(re,m3),yr(re,mv)),bt.mathMl===!0&&(yr(te,p3),yr(re,VR),yr(re,mv))),ue.ADD_TAGS&&(te===Oe&&(te=ud(te)),yr(te,ue.ADD_TAGS,wt)),ue.ADD_ATTR&&(re===ce&&(re=ud(re)),yr(re,ue.ADD_ATTR,wt)),ue.ADD_URI_SAFE_ATTR&&yr(ye,ue.ADD_URI_SAFE_ATTR,wt),ue.FORBID_CONTENTS&&(Zt===tn&&(Zt=ud(Zt)),yr(Zt,ue.FORBID_CONTENTS,wt)),Bt&&(te["#text"]=!0),st&&yr(te,["html","head","body"]),te.table&&(yr(te,["tbody"]),delete Ie.tbody),Li&&Li(ue),sr=ue)},Mn=yr({},["mi","mo","mn","ms","mtext"]),Jt=yr({},["annotation-xml"]),pa=yr({},["title","style","font","a","script"]),cn=yr({},h3);yr(cn,f3),yr(cn,que);var En=yr({},p3);yr(En,Hue);var ti=function(ue){var Ke=I(ue);(!Ke||!Ke.tagName)&&(Ke={namespaceURI:ct,tagName:"template"});var ot=Zv(ue.tagName),Kt=Zv(Ke.tagName);return wn[ue.namespaceURI]?ue.namespaceURI===jt?Ke.namespaceURI===Pt?ot==="svg":Ke.namespaceURI===At?ot==="svg"&&(Kt==="annotation-xml"||Mn[Kt]):!!cn[ot]:ue.namespaceURI===At?Ke.namespaceURI===Pt?ot==="math":Ke.namespaceURI===jt?ot==="math"&&Jt[Kt]:!!En[ot]:ue.namespaceURI===Pt?Ke.namespaceURI===jt&&!Jt[Kt]||Ke.namespaceURI===At&&!Mn[Kt]?!1:!En[ot]&&(pa[ot]||!cn[ot]):!!(kr==="application/xhtml+xml"&&wn[ue.namespaceURI]):!1},wr=function(ue){Vp(e.removed,{element:ue});try{ue.parentNode.removeChild(ue)}catch{try{ue.outerHTML=P}catch{ue.remove()}}},un=function(ue,Ke){try{Vp(e.removed,{attribute:Ke.getAttributeNode(ue),from:Ke})}catch{Vp(e.removed,{attribute:null,from:Ke})}if(Ke.removeAttribute(ue),ue==="is"&&!re[ue])if(Be||Ye)try{wr(Ke)}catch{}else try{Ke.setAttribute(ue,"")}catch{}},Va=function(ue){var Ke,ot;if(be)ue="<remove></remove>"+ue;else{var Kt=BR(ue,/^[\r\n\t ]+/);ot=Kt&&Kt[0]}kr==="application/xhtml+xml"&&ct===Pt&&(ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ue+"</body></html>");var hr=L?L.createHTML(ue):ue;if(ct===Pt)try{Ke=new y().parseFromString(hr,kr)}catch{}if(!Ke||!Ke.documentElement){Ke=N.createDocument(ct,"template",null);try{Ke.documentElement.innerHTML=gr?P:hr}catch{}}var dn=Ke.body||Ke.documentElement;return ue&&ot&&dn.insertBefore(n.createTextNode(ot),dn.childNodes[0]||null),ct===Pt?$.call(Ke,st?"html":"body")[0]:st?Ke.documentElement:dn},Qn=function(ue){return A.call(ue.ownerDocument||ue,ue,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Fr=function(ue){return ue instanceof m&&(typeof ue.nodeName!="string"||typeof ue.textContent!="string"||typeof ue.removeChild!="function"||!(ue.attributes instanceof p)||typeof ue.removeAttribute!="function"||typeof ue.setAttribute!="function"||typeof ue.namespaceURI!="string"||typeof ue.insertBefore!="function"||typeof ue.hasChildNodes!="function")},Sn=function(ue){return au(s)==="object"?ue instanceof s:ue&&au(ue)==="object"&&typeof ue.nodeType=="number"&&typeof ue.nodeName=="string"},Yr=function(ue,Ke,ot){z[ue]&&Uue(z[ue],function(Kt){Kt.call(e,Ke,ot,sr)})},mi=function(ue){var Ke;if(Yr("beforeSanitizeElements",ue,null),Fr(ue)||oi(/[\u0080-\uFFFF]/,ue.nodeName))return wr(ue),!0;var ot=wt(ue.nodeName);if(Yr("uponSanitizeElement",ue,{tagName:ot,allowedTags:te}),ue.hasChildNodes()&&!Sn(ue.firstElementChild)&&(!Sn(ue.content)||!Sn(ue.content.firstElementChild))&&oi(/<[/\w]/g,ue.innerHTML)&&oi(/<[/\w]/g,ue.textContent)||ot==="select"&&oi(/<template/i,ue.innerHTML)||ue.nodeType===7||pt&&ue.nodeType===8&&oi(/<[/\w]/g,ue.data))return wr(ue),!0;if(!te[ot]||Ie[ot]){if(!Ie[ot]&&Os(ot)&&(he.tagNameCheck instanceof RegExp&&oi(he.tagNameCheck,ot)||he.tagNameCheck instanceof Function&&he.tagNameCheck(ot)))return!1;if(Bt&&!Zt[ot]){var Kt=I(ue)||ue.parentNode,hr=E(ue)||ue.childNodes;if(hr&&Kt)for(var dn=hr.length,qr=dn-1;qr>=0;--qr){var hn=_(hr[qr],!0);hn.__removalCount=(ue.__removalCount||0)+1,Kt.insertBefore(hn,w(ue))}}return wr(ue),!0}return ue instanceof c&&!ti(ue)||(ot==="noscript"||ot==="noembed"||ot==="noframes")&&oi(/<\/no(script|embed|frames)/i,ue.innerHTML)?(wr(ue),!0):(et&&ue.nodeType===3&&(Ke=ue.textContent,Ke=ho(Ke,K," "),Ke=ho(Ke,Q," "),Ke=ho(Ke,G," "),ue.textContent!==Ke&&(Vp(e.removed,{element:ue.cloneNode()}),ue.textContent=Ke)),Yr("afterSanitizeElements",ue,null),!1)},Fa=function(ue,Ke,ot){if(Ze&&(Ke==="id"||Ke==="name")&&(ot in n||ot in Qr))return!1;if(!(Me&&!Se[Ke]&&oi(X,Ke))){if(!(We&&oi(ne,Ke))){if(!re[Ke]||Se[Ke]){if(!(Os(ue)&&(he.tagNameCheck instanceof RegExp&&oi(he.tagNameCheck,ue)||he.tagNameCheck instanceof Function&&he.tagNameCheck(ue))&&(he.attributeNameCheck instanceof RegExp&&oi(he.attributeNameCheck,Ke)||he.attributeNameCheck instanceof Function&&he.attributeNameCheck(Ke))||Ke==="is"&&he.allowCustomizedBuiltInElements&&(he.tagNameCheck instanceof RegExp&&oi(he.tagNameCheck,ot)||he.tagNameCheck instanceof Function&&he.tagNameCheck(ot))))return!1}else if(!ye[Ke]){if(!oi(ee,ho(ot,me,""))){if(!((Ke==="src"||Ke==="xlink:href"||Ke==="href")&&ue!=="script"&&zue(ot,"data:")===0&&rn[ue])){if(!(_e&&!oi(de,ho(ot,me,"")))){if(ot)return!1}}}}}}return!0},Os=function(ue){return ue!=="annotation-xml"&&BR(ue,H)},is=function(ue){var Ke,ot,Kt,hr;Yr("beforeSanitizeAttributes",ue,null);var dn=ue.attributes;if(!(!dn||Fr(ue))){var qr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re};for(hr=dn.length;hr--;){Ke=dn[hr];var hn=Ke,Cr=hn.name,Is=hn.namespaceURI;if(ot=Cr==="value"?Ke.value:Vue(Ke.value),Kt=wt(Cr),qr.attrName=Kt,qr.attrValue=ot,qr.keepAttr=!0,qr.forceKeepAttr=void 0,Yr("uponSanitizeAttribute",ue,qr),ot=qr.attrValue,!qr.forceKeepAttr&&(un(Cr,ue),!!qr.keepAttr)){if(!gt&&oi(/\/>/i,ot)){un(Cr,ue);continue}et&&(ot=ho(ot,K," "),ot=ho(ot,Q," "),ot=ho(ot,G," "));var ss=wt(ue.nodeName);if(Fa(ss,Kt,ot)){if(yt&&(Kt==="id"||Kt==="name")&&(un(Cr,ue),ot=Rt+ot),pt&&oi(/((--!?|])>)|<\/(style|title)/i,ot)){un(Cr,ue);continue}if(L&&au(x)==="object"&&typeof x.getAttributeType=="function"&&!Is)switch(x.getAttributeType(ss,Kt)){case"TrustedHTML":{ot=L.createHTML(ot);break}case"TrustedScriptURL":{ot=L.createScriptURL(ot);break}}try{Is?ue.setAttributeNS(Is,Cr,ot):ue.setAttribute(Cr,ot),Fr(ue)?wr(ue):LR(e.removed)}catch{}}}}Yr("afterSanitizeAttributes",ue,null)}},gi=function St(ue){var Ke,ot=Qn(ue);for(Yr("beforeSanitizeShadowDOM",ue,null);Ke=ot.nextNode();)Yr("uponSanitizeShadowNode",Ke,null),mi(Ke),is(Ke),Ke.content instanceof a&&St(Ke.content);Yr("afterSanitizeShadowDOM",ue,null)};return e.sanitize=function(St){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ke,ot,Kt,hr,dn;if(gr=!St,gr&&(St="<!-->"),typeof St!="string"&&!Sn(St))if(typeof St.toString=="function"){if(St=St.toString(),typeof St!="string")throw d3("dirty is not a string, aborting")}else throw d3("toString is not a function");if(!e.isSupported){if(au(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof St=="string")return t.toStaticHTML(St);if(Sn(St))return t.toStaticHTML(St.outerHTML)}return St}if(xe||Xr(ue),e.removed=[],typeof St=="string"&&(Tt=!1),Tt){if(St.nodeName){var qr=wt(St.nodeName);if(!te[qr]||Ie[qr])throw d3("root node is forbidden and cannot be sanitized in-place")}}else if(St instanceof s)Ke=Va("<!---->"),ot=Ke.ownerDocument.importNode(St,!0),ot.nodeType===1&&ot.nodeName==="BODY"||ot.nodeName==="HTML"?Ke=ot:Ke.appendChild(ot);else{if(!Be&&!et&&!st&&St.indexOf("<")===-1)return L&&ht?L.createHTML(St):St;if(Ke=Va(St),!Ke)return Be?null:ht?P:""}Ke&&be&&wr(Ke.firstChild);for(var hn=Qn(Tt?St:Ke);Kt=hn.nextNode();)Kt.nodeType===3&&Kt===hr||(mi(Kt),is(Kt),Kt.content instanceof a&&gi(Kt.content),hr=Kt);if(hr=null,Tt)return St;if(Be){if(Ye)for(dn=j.call(Ke.ownerDocument);Ke.firstChild;)dn.appendChild(Ke.firstChild);else dn=Ke;return(re.shadowroot||re.shadowrootmod)&&(dn=B.call(r,dn,!0)),dn}var Cr=st?Ke.outerHTML:Ke.innerHTML;return st&&te["!doctype"]&&Ke.ownerDocument&&Ke.ownerDocument.doctype&&Ke.ownerDocument.doctype.name&&oi(ede,Ke.ownerDocument.doctype.name)&&(Cr="<!DOCTYPE "+Ke.ownerDocument.doctype.name+`>
`+Cr),et&&(Cr=ho(Cr,K," "),Cr=ho(Cr,Q," "),Cr=ho(Cr,G," ")),L&&ht?L.createHTML(Cr):Cr},e.setConfig=function(St){Xr(St),xe=!0},e.clearConfig=function(){sr=null,xe=!1},e.isValidAttribute=function(St,ue,Ke){sr||Xr({});var ot=wt(St),Kt=wt(ue);return Fa(ot,Kt,Ke)},e.addHook=function(St,ue){typeof ue=="function"&&(z[St]=z[St]||[],Vp(z[St],ue))},e.removeHook=function(St){if(z[St])return LR(z[St])},e.removeHooks=function(St){z[St]&&(z[St]=[])},e.removeAllHooks=function(){z={}},e}var uG=cG();const ade=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i})=>{const s=O.useRef(Tx()),c=O.useRef(Date.now()),d=O.useRef(t),[h,p]=O.useState(!0),[m,y]=O.useState(0),[x,T]=O.useState(!1),[_,w]=O.useState(null),[E,I]=O.useState(0),[C,L]=O.useState(0),[P,R]=O.useState(!1),[N,A]=O.useState(0),[j,$]=O.useState(!1),B=O.useRef(null),F=O.useRef(null),z=O.useRef(null),K=O.useRef(new Set),Q=O.useRef(null),[G,X]=O.useState(!1);O.useEffect(()=>{d.current=t},[t]);const ne=O.useCallback(()=>{c.current=Date.now(),h||p(!0)},[h]);O.useEffect(()=>{const H=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),h||p(!0)):h&&p(!1)},1e3);return()=>clearInterval(H)},[h]),O.useEffect(()=>{const H=["mousemove","keydown","scroll","click"];return H.forEach(ee=>window.addEventListener(ee,ne)),()=>H.forEach(ee=>window.removeEventListener(ee,ne))},[ne]),O.useEffect(()=>()=>{d.current(s.current)},[]),O.useEffect(()=>{if(!n||!a)return;const H=async ee=>{var he,Ie,Se,We,Me,_e,gt,et,pt,st,xe,be;const te=B.current;if(!te)return;const Oe=te.src?new URL(te.src).origin:"";if(ee.origin!==window.location.origin&&ee.origin!==Oe)return;const re=ee.origin,ce=ee.data;if(!(!ce||typeof ce!="object"||!((he=ce.type)!=null&&he.startsWith("portal-"))))switch(ne(),ce.type){case"portal-ready":{T(!0);try{const Be=await Ra(at(Pe,"practice_progress",`${n}_${a}`)),Ye=Be.exists()?Be.data():null,ht=(Ye==null?void 0:Ye.answeredQuestions)||[];ht.forEach(Rt=>K.current.add(Rt)),I(ht.length),Ye&&(Q.current=Ye,Ye.completed&&(R(!0),A(Ye.totalCompletions||1)));const Ze=Ye?{state:Ye.state||null,currentQuestion:Ye.currentQuestion??0}:null,yt=Ye!=null&&Ye.completed?{completed:!0,completedAt:Ye.completedAt,bestScore:Ye.bestScore,totalCompletions:Ye.totalCompletions||0,lastCompletion:((Ie=Ye.completionHistory)==null?void 0:Ie.length)>0?Ye.completionHistory[Ye.completionHistory.length-1]:null}:null;(Se=te.contentWindow)==null||Se.postMessage({type:"portal-init",payload:{userId:n,savedState:Ze,completionInfo:yt}},re)}catch(Be){console.error("Bridge: Failed to load saved state",Be),(We=te.contentWindow)==null||We.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},re)}break}case"portal-save":{const{state:Be,currentQuestion:Ye}=ce.payload||{};if(!Be)break;try{const ht=Q.current,Ze={userId:n,assignmentId:a,state:Be,currentQuestion:Ye??0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString()};ht!=null&&ht.completed&&(Ze.completed=ht.completed,Ze.completedAt=ht.completedAt,Ze.bestScore=ht.bestScore,Ze.totalCompletions=ht.totalCompletions,Ze.completionHistory=ht.completionHistory),await ea(at(Pe,"practice_progress",`${n}_${a}`),Ze,{merge:!0}),Q.current={...Q.current,...Ze},(Me=te.contentWindow)==null||Me.postMessage({type:"portal-save-ok"},re)}catch(ht){console.error("Bridge: Save failed",ht),(_e=te.contentWindow)==null||_e.postMessage({type:"portal-save-error"},re)}break}case"portal-complete":{const{score:Be,totalQuestions:Ye,correctAnswers:ht}=ce.payload||{};try{const Ze=Q.current,yt=new Date().toISOString(),Rt={completedAt:yt,score:Be??0,totalQuestions:Ye??0,correctAnswers:ht??0,answeredQuestions:Array.from(K.current)},Bt=[...(Ze==null?void 0:Ze.completionHistory)||[],Rt],Tt=Math.max((Ze==null?void 0:Ze.bestScore)||0,Be||0),bt=((Ze==null?void 0:Ze.totalCompletions)||0)+1,Zt={userId:n,assignmentId:a,completed:!0,completedAt:(Ze==null?void 0:Ze.completedAt)||yt,bestScore:Tt,totalCompletions:bt,completionHistory:Bt,answeredQuestions:Array.from(K.current),lastUpdated:yt};Ze!=null&&Ze.state&&(Zt.state=Ze.state,Zt.currentQuestion=Ze.currentQuestion),await ea(at(Pe,"practice_progress",`${n}_${a}`),Zt,{merge:!0}),Q.current={...Q.current,...Zt},R(!0),A(bt),Bn.xpGain(),w({text:"Module Complete!",type:"success"}),setTimeout(()=>w(null),3e3),(gt=te.contentWindow)==null||gt.postMessage({type:"portal-complete-ok",payload:{totalCompletions:bt,bestScore:Tt}},re)}catch(Ze){console.error("Bridge: Completion save failed",Ze),(et=te.contentWindow)==null||et.postMessage({type:"portal-complete-error"},re)}break}case"portal-replay":{try{const Be=Q.current,Ye={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(Be==null?void 0:Be.completed)||!1,completedAt:(Be==null?void 0:Be.completedAt)||null,bestScore:(Be==null?void 0:Be.bestScore)||null,totalCompletions:(Be==null?void 0:Be.totalCompletions)||0,completionHistory:(Be==null?void 0:Be.completionHistory)||[]};await ea(at(Pe,"practice_progress",`${n}_${a}`),Ye,{merge:!0}),Q.current=Ye,$(!1),(pt=te.contentWindow)==null||pt.postMessage({type:"portal-reset-ok"},re)}catch(Be){console.error("Bridge: Replay reset failed",Be)}break}case"portal-answer":{const{questionId:Be,correct:Ye,attempts:ht}=ce.payload||{};if(!Be)break;if(Ye&&!K.current.has(Be)){K.current.add(Be),I(yt=>yt+1);const Ze=ht===1?15:10;try{const Rt=(await Gq({assignmentId:a,questionId:Be,xpAmount:Ze,classType:i||"Uncategorized"})).data;if(Rt.awarded){const Bt=Rt.serverXP||Ze;L(Tt=>Tt+Bt),w({text:`+${Bt} XP`,type:"success"}),Bn.xpGain(),setTimeout(()=>w(null),2e3)}(st=te.contentWindow)==null||st.postMessage({type:"portal-xp-result",payload:{questionId:Be,awarded:Rt.awarded,xp:Rt.serverXP||Ze}},re)}catch(yt){console.error("Bridge: XP award failed",yt),(xe=te.contentWindow)==null||xe.postMessage({type:"portal-xp-result",payload:{questionId:Be,awarded:!1,xp:0}},re)}}else Ye&&((be=te.contentWindow)==null||be.postMessage({type:"portal-xp-result",payload:{questionId:Be,awarded:!1,xp:0}},re));break}}};return window.addEventListener("message",H),()=>window.removeEventListener("message",H)},[n,a,i,ne]);const de=O.useCallback(()=>{const H=B.current;if(!H||!n||!a)return;const te=(H.src?new URL(H.src).origin:"")||window.location.origin;(async()=>{var Oe;try{const re=Q.current,ce={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(K.current),lastUpdated:new Date().toISOString(),completed:(re==null?void 0:re.completed)||!1,completedAt:(re==null?void 0:re.completedAt)||null,bestScore:(re==null?void 0:re.bestScore)||null,totalCompletions:(re==null?void 0:re.totalCompletions)||0,completionHistory:(re==null?void 0:re.completionHistory)||[]};await ea(at(Pe,"practice_progress",`${n}_${a}`),ce,{merge:!0}),Q.current=ce,$(!1),(Oe=H.contentWindow)==null||Oe.postMessage({type:"portal-reset-ok"},te)}catch(re){console.error("Replay reset failed",re)}})()},[n,a]),me=O.useCallback(()=>{const H=z.current;H&&(document.fullscreenElement?document.exitFullscreen():H.requestFullscreen().catch(()=>{X(ee=>!ee)}))},[]);return O.useEffect(()=>{const H=()=>X(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",H),()=>document.removeEventListener("fullscreenchange",H)},[]),O.useEffect(()=>{if(F.current&&r){const H=r.replace(/\$(.*?)\$/g,(ee,te)=>{try{return Lx.renderToString(te,{throwOnError:!1})}catch{return te}});F.current.innerHTML=uG.sanitize(H,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),o.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h?"text-green-400":"text-yellow-500"}`,children:[h?o.jsx(R7,{className:"w-4 h-4"}):o.jsx(js,{className:"w-4 h-4 animate-pulse"}),h?"Active Session":"Away (Paused)"]}),o.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(m/60),"m ",m%60,"s"]}),x&&E>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[o.jsx(Cn,{className:"w-3 h-3"})," ",E," answered"]}),x&&C>0&&o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[o.jsx(Ba,{className:"w-3 h-3"})," ",C," XP"]}),P&&o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[o.jsx(Jl,{className:"w-3 h-3"}),"Completed",N>1?` (${N}x)`:""]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[P&&x&&(j?o.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[o.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),o.jsx("button",{onClick:de,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),o.jsx("button",{onClick:()=>$(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):o.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[o.jsx(sle,{className:"w-3 h-3"})," Replay"]})),e&&o.jsxs("button",{onClick:me,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:G?"Exit full screen (Esc)":"Full screen",children:[G?o.jsx(eH,{className:"w-3 h-3"}):o.jsx(xA,{className:"w-3 h-3"}),G?"Exit Full Screen":"Full Screen"]}),x&&o.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[o.jsx(Ba,{className:"w-3 h-3"})," XP Linked"]}),!h&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[o.jsx(ks,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),_&&o.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${_.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[_.type==="success"?o.jsx(Cn,{className:"w-4 h-4"}):o.jsx(qh,{className:"w-4 h-4"}),_.text]})}),o.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?o.jsx("div",{ref:z,className:"flex-1 flex flex-col bg-white",children:o.jsx("iframe",{ref:B,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:ne})}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Hh,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),o.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&o.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[o.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[o.jsx(xA,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),o.jsx("div",{ref:F,className:"proctor-content text-sm leading-relaxed"})]})]})]})},ide=()=>{const[t,e]=O.useState(!1),[r,n]=O.useState(null),a=async()=>{e(!0),n(null);try{await Jee(vA,Gse)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[o.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:o.jsxs("div",{className:"p-10 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&o.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(ks,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"break-words",children:[o.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[o.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[o.jsx($oe,{className:"w-4 h-4"}),"Action Required:"]}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",o.jsx("code",{children:"lib/firebase.ts"})," and replace",o.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),o.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),o.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),o.jsx("span",{children:"Sign in with Google"})]})}),o.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),o.jsx("span",{children:""}),o.jsx("span",{children:"Firebase Auth"})]})]})})]})},dG=O.createContext(null),al=()=>{const t=O.useContext(dG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},sde=({children:t})=>{const[e,r]=O.useState({isOpen:!1,options:{message:""}}),n=O.useRef(null),a=O.useRef(null),i=O.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),s=O.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=O.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);O.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),O.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&s()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return o.jsxs(dG.Provider,{value:{confirm:i},children:[t,e.isOpen&&o.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),o.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[o.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[o.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:o.jsx(ks,{className:"w-5 h-5"})}),o.jsxs("div",{children:[e.options.title&&o.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),o.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),o.jsx("button",{ref:a,onClick:s,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),o.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},Jm=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=s=>{e.includes(s)?r(e.filter(c=>c!==s)):r([...e,s])};return o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(s=>o.jsx("button",{type:"button",onClick:()=>i(s),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(s)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:s},s))]})]})},FR={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:o.jsx(Zq,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:o.jsx(ks,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:o.jsx(rle,{className:"w-4 h-4"})}},ode=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=al(),a=pi(),[i,s]=O.useState(!1),[c,d]=O.useState(""),[h,p]=O.useState(""),[m,y]=O.useState("INFO"),[x,T]=O.useState("GLOBAL"),[_,w]=O.useState([]),E=async()=>{if(!(!c.trim()||!h.trim()))try{await De.createAnnouncement({title:c.trim(),content:h.trim(),classType:x,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",..._.length>0?{targetSections:_}:{}}),await De.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),s(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},I=async C=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await De.deleteAnnouncement(C)};return o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(kx,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),o.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[o.jsx(Ii,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?o.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[o.jsx(kx,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):o.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(C=>{var P;const L=FR[C.priority]||FR.INFO;return o.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[o.jsxs("div",{className:"flex gap-2 items-start",children:[o.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-bold text-white",children:C.title}),o.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:C.content}),o.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[C.classType==="GLOBAL"?"All Classes":C.classType,(P=C.targetSections)!=null&&P.length?`  ${C.targetSections.join(", ")}`:"","  ",new Date(C.createdAt).toLocaleDateString()]})]})]}),o.jsx("button",{onClick:()=>I(C.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:o.jsx(la,{className:"w-3.5 h-3.5"})})]},C.id)})}),o.jsx(Ti,{isOpen:i,onClose:()=>s(!1),title:"New Announcement",maxWidth:"max-w-md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),o.jsx("input",{type:"text",value:c,onChange:C=>d(C.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),o.jsx("textarea",{value:h,onChange:C=>p(C.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),o.jsxs("select",{value:m,onChange:C=>y(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[o.jsx("option",{value:"INFO",children:"Info"}),o.jsx("option",{value:"WARNING",children:"Warning"}),o.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),o.jsxs("select",{value:x,onChange:C=>T(C.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Pr).filter(C=>C!=="Uncategorized").map(C=>o.jsx("option",{value:C,children:C},C))]})]})]}),o.jsx(Jm,{availableSections:r,selectedSections:_,onChange:w}),o.jsx("button",{onClick:E,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},lde=({students:t,availableSections:e})=>{const{confirm:r}=al(),n=pi(),[a,i]=O.useState([]),[s,c]=O.useState(Pr.AP_PHYSICS),[d,h]=O.useState(!1),[p,m]=O.useState(""),[y,x]=O.useState(null),[T,_]=O.useState("");O.useEffect(()=>{const R=De.subscribeToStudentGroups(s,i);return()=>R()},[s]);const w=O.useMemo(()=>t.filter(R=>{var N;return R.role==="STUDENT"&&((N=R.enrolledClasses)==null?void 0:N.includes(s))}).filter(R=>!T||R.section===T),[t,s,T]),E=async()=>{if(p.trim())try{await De.createStudentGroup(p.trim(),s,[]),m(""),h(!1),n.success("Group created.")}catch{n.error("Failed to create group.")}},I=async R=>{await r({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await De.deleteStudentGroup(R)},C=async(R,N)=>{if(R.members.some(j=>j.userId===N.id))return;const A=[...R.members,{userId:N.id,userName:N.name}];await De.updateStudentGroup(R.id,{members:A})},L=async(R,N)=>{const A=R.members.filter(j=>j.userId!==N);await De.updateStudentGroup(R.id,{members:A})},P=Object.values(Pr).filter(R=>R!=="Uncategorized");return o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Ts,{className:"w-5 h-5 text-cyan-400"}),"Student Groups"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("select",{value:s,onChange:R=>c(R.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1 text-xs text-white",children:P.map(R=>o.jsx("option",{value:R,children:R},R))}),o.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-cyan-600 hover:bg-cyan-500 text-white rounded-xl text-xs font-bold transition",children:[o.jsx(Ii,{className:"w-3.5 h-3.5"})," New Group"]})]})]}),d&&o.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-black/20 border border-white/10 rounded-xl",children:[o.jsx("input",{type:"text",value:p,onChange:R=>m(R.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-cyan-500",onKeyDown:R=>R.key==="Enter"&&E()}),o.jsx("button",{onClick:E,disabled:!p.trim(),className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-lg text-xs font-bold transition",children:"Create"}),o.jsx("button",{onClick:()=>h(!1),className:"p-2 text-gray-400 hover:text-white transition",children:o.jsx(Pa,{className:"w-4 h-4"})})]}),a.length===0?o.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[o.jsx(Ts,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No groups for ",s,"."]}):o.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto custom-scrollbar pr-1",children:a.map(R=>o.jsxs("div",{className:"p-4 bg-black/20 border border-white/10 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white text-sm",children:R.name}),o.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[R.members.length," member",R.members.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>x(y===R.id?null:R.id),className:`px-2 py-1 text-[10px] font-bold rounded-lg transition ${y===R.id?"bg-cyan-500/20 text-cyan-400":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:o.jsx(SA,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>I(R.id),className:"p-1 text-gray-500 hover:text-red-400 transition",children:o.jsx(la,{className:"w-3.5 h-3.5"})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[R.members.map(N=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg text-[11px] text-gray-300",children:[N.userName,o.jsx("button",{onClick:()=>L(R,N.userId),className:"text-gray-500 hover:text-red-400 transition",children:o.jsx(dle,{className:"w-3 h-3"})})]},N.userId)),R.members.length===0&&o.jsx("span",{className:"text-[10px] text-gray-600 italic",children:"No members yet  click the add button to assign students."})]}),y===R.id&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Add Students"}),e.length>0&&o.jsxs("select",{value:T,onChange:N=>_(N.target.value),className:"bg-black/30 border border-white/10 rounded px-1.5 py-0.5 text-[10px] text-white",children:[o.jsx("option",{value:"",children:"All Sections"}),e.map(N=>o.jsx("option",{value:N,children:N},N))]})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-32 overflow-y-auto custom-scrollbar",children:w.filter(N=>!R.members.some(A=>A.userId===N.id)).map(N=>o.jsxs("button",{onClick:()=>C(R,N),className:"px-2 py-1 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-[11px] text-cyan-300 font-medium transition",children:["+ ",N.name]},N.id))})]})]},R.id))})]})},hG=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],qR=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],cde=["I","II","III","IV","V"],ude=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},Kh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,qR.length-1),a=qR[n]||"Unknownium",i=cde[r],s=n+1,c=ude(s);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Wi={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},dde={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},HR=(t,e,r)=>{const n=Wi.UNSOCKET_BASE,a=dde[t],i=Math.max(1,e),s=1+r;return Math.ceil(n*a*i*s)},GR=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},fG=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},nE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([s,c])=>{e[s]+=c})}),e},Qh=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=i*10+s}),Math.floor(e))},WR=t=>t.runewordActive&&hG.find(e=>e.id===t.runewordActive)||null,oa=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Yd(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const hde=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var P,R,N,A,j,$,B,F,z,K;const[i,s]=O.useState(!1),c=((P=t.gamification)==null?void 0:P.level)||1,d=((R=t.gamification)==null?void 0:R.xp)||0,h=((N=t.gamification)==null?void 0:N.currency)||0,p=Kh(c),m=nE(t),y=t.enrolledClasses||(t.classType?[t.classType]:[]),x=((j=(A=t.gamification)==null?void 0:A.completedQuests)==null?void 0:j.length)||0,T=((B=($=t.gamification)==null?void 0:$.activeQuests)==null?void 0:B.filter(Q=>Q.status==="ACCEPTED"||Q.status==="DEPLOYED").length)||0,_=O.useMemo(()=>y.map(Q=>{var ee,te;const G=((te=(ee=t.gamification)==null?void 0:ee.classXp)==null?void 0:te[Q])||0,X=Yd(t,Q),ne=Qh(X.equipped),de=X.inventory.length,me=e.filter(Oe=>{const re=r.find(ce=>ce.id===Oe.assignmentId);return(re==null?void 0:re.classType)===Q}),H=Math.round(me.reduce((Oe,re)=>{var ce;return Oe+(((ce=re.metrics)==null?void 0:ce.engagementTime)||0)},0)/60);return{cls:Q,classXp:G,gearScore:ne,inventoryCount:de,resourcesViewed:me.length,totalTime:H}}),[t,e,r,y]),w=O.useMemo(()=>{const Q=new Map;return e.forEach(G=>{var H,ee,te,Oe,re,ce,he;const X=r.find(Ie=>Ie.id===G.assignmentId),ne=G.assignmentId,de=Q.get(ne),me=((H=G.metrics)==null?void 0:H.engagementTime)||0;de?(de.visits++,de.totalTime+=me,de.totalKeystrokes+=((ee=G.metrics)==null?void 0:ee.keystrokes)||0,de.totalClicks+=((te=G.metrics)==null?void 0:te.clickCount)||0,de.totalPastes+=((Oe=G.metrics)==null?void 0:Oe.pasteCount)||0,de.statuses.push(G.status),G.submittedAt&&(!de.lastVisit||G.submittedAt>de.lastVisit)&&(de.lastVisit=G.submittedAt)):Q.set(ne,{title:(X==null?void 0:X.title)||G.assignmentTitle,classType:(X==null?void 0:X.classType)||"Unknown",category:(X==null?void 0:X.category)||"Supplemental",visits:1,totalTime:me,totalKeystrokes:((re=G.metrics)==null?void 0:re.keystrokes)||0,totalClicks:((ce=G.metrics)==null?void 0:ce.clickCount)||0,totalPastes:((he=G.metrics)==null?void 0:he.pasteCount)||0,lastVisit:G.submittedAt||null,statuses:[G.status]})}),Array.from(Q.values()).sort((G,X)=>X.totalTime-G.totalTime)},[e,r]),E=O.useMemo(()=>e.filter(Q=>Q.submittedAt).sort((Q,G)=>new Date(G.submittedAt).getTime()-new Date(Q.submittedAt).getTime()).slice(0,10).map(Q=>{var G,X;return{...Q,assignmentTitle:((G=r.find(ne=>ne.id===Q.assignmentId))==null?void 0:G.title)||Q.assignmentTitle,classType:((X=r.find(ne=>ne.id===Q.assignmentId))==null?void 0:X.classType)||"Unknown"}}),[e,r]),I=Math.round(e.reduce((Q,G)=>{var X;return Q+(((X=G.metrics)==null?void 0:X.engagementTime)||0)},0)/60),C=O.useMemo(()=>{const Q=new Set;e.forEach(H=>{if(H.submittedAt){const ee=new Date(H.submittedAt),te=ee.getFullYear(),Oe=new Date(te,0,1),re=Math.ceil(((ee.getTime()-Oe.getTime())/864e5+Oe.getDay()+1)/7);Q.add(`${te}-W${re}`)}});const G=new Date,X=G.getFullYear(),ne=new Date(X,0,1),de=Math.ceil(((G.getTime()-ne.getTime())/864e5+ne.getDay()+1)/7);let me=0;for(let H=de;H>0&&Q.has(`${X}-W${H}`);H--)me++;return me},[e]),L=O.useMemo(()=>{const Q=[],G=new Date;for(let te=6;te>=0;te--){const Oe=new Date(G);Oe.setDate(Oe.getDate()-te);const re=Oe.toISOString().split("T")[0],ce=e.filter(Ie=>{var Se;return(Se=Ie.submittedAt)==null?void 0:Se.startsWith(re)}),he=ce.reduce((Ie,Se)=>{var We;return Ie+(((We=Se.metrics)==null?void 0:We.engagementTime)||0)},0);Q.push({label:Oe.toLocaleDateString([],{weekday:"short"}),time:Math.round(he/60),subs:ce.length})}const X=Q.slice(4).reduce((te,Oe)=>te+Oe.time,0),ne=Q.slice(0,4).reduce((te,Oe)=>te+Oe.time,0),de=X/3,me=ne/4,H=de>me*1.2?"up":de<me*.6?"down":"flat",ee=Math.max(1,...Q.map(te=>te.time));return{days:Q,trend:H,maxTime:ee}},[e]);return o.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-50 w-full max-w-lg",children:o.jsxs("div",{className:"relative w-full bg-[#12132a]/98 border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[o.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a]/95 backdrop-blur-md border-b border-white/5 p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?o.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):o.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),((F=t.gamification)==null?void 0:F.codename)&&o.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),o.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition",children:o.jsx(Pa,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(Ba,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(js,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-white",children:[I,"m"]}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(_o,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(Dd,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:x}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(wA,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:h}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(S2,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-white",children:[C,"w"]}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),o.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([Q,G])=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:Q}),o.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,G)}%`}})}),o.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:G})]},Q))})]}),n.length>0&&(()=>{const Q=n[0],G=gd[Q.bucket];return G?o.jsxs("div",{className:`border rounded-2xl p-4 ${G.borderColor} ${G.bgColor}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${G.color} border ${G.borderColor}`,children:G.label})]}),o.jsx("p",{className:"text-xs text-gray-300 mb-3",children:G.description}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[o.jsxs("span",{children:["ES: ",Q.engagementScore]}),o.jsxs("span",{children:["Subs: ",Q.metrics.submissionCount]}),o.jsxs("span",{children:["Days Active: ",Q.metrics.activityDays,"/7"]}),o.jsxs("span",{children:["Paste Ratio: ",Math.round(Q.metrics.avgPasteRatio*100),"%"]}),o.jsxs("span",{children:["Time: ",Math.round(Q.metrics.totalTime/60),"m"]})]}),o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[o.jsx(Jq,{className:"w-3.5 h-3.5 text-amber-400"}),o.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),o.jsx("p",{className:"text-xs text-gray-300 mb-2",children:Q.recommendation.action}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:Q.recommendation.categories.map(X=>o.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:X},X))})]}),(()=>{const X=r.filter(ne=>ne.classType===Q.classType&&ne.status==="ACTIVE"&&Q.recommendation.categories.includes(ne.category||"Supplemental")).slice(0,3);return X.length===0?null:o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),o.jsx("div",{className:"space-y-1",children:X.map(ne=>o.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[o.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ne.category}),o.jsx("span",{className:"text-white truncate",children:ne.title})]},ne.id))})]})})()]}):null})(),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),o.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&o.jsx(N2,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&o.jsx(ule,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&o.jsx(Joe,{className:"w-3.5 h-3.5 text-gray-400"}),o.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),o.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((Q,G)=>{const X=L.maxTime>0?Math.max(2,Q.time/L.maxTime*100):2,ne=G===L.days.length-1;return o.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[o.jsx("div",{className:`w-full rounded-t transition-all ${Q.time>0?ne?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${X}%`}}),o.jsx("span",{className:"text-[8px] text-gray-500",children:Q.label}),o.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[Q.time,"m  ",Q.subs," sub",Q.subs!==1?"s":""]})]},G)})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),o.jsx("div",{className:"space-y-3",children:_.map(Q=>o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:Q.cls}),o.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[Q.classXp.toLocaleString()," XP"]})]}),o.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[o.jsxs("span",{children:[o.jsx(To,{className:"w-3 h-3 inline mr-0.5"}),Q.gearScore," GS"]}),o.jsxs("span",{children:[o.jsx(wA,{className:"w-3 h-3 inline mr-0.5"}),Q.inventoryCount," items"]}),o.jsxs("span",{children:[o.jsx(_o,{className:"w-3 h-3 inline mr-0.5"}),Q.resourcesViewed," viewed"]}),o.jsxs("span",{children:[o.jsx(js,{className:"w-3 h-3 inline mr-0.5"}),Q.totalTime,"m"]})]})]},Q.cls))})]}),w.length>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsxs("button",{onClick:()=>s(!i),className:"flex items-center justify-between w-full mb-1",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[o.jsx(Qq,{className:"w-3.5 h-3.5"})," Resource Performance",o.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?o.jsx(w2,{className:"w-4 h-4 text-gray-500"}):o.jsx(Di,{className:"w-4 h-4 text-gray-500"})]}),i&&o.jsx("div",{className:"space-y-2 mt-3",children:w.map((Q,G)=>{const X=Math.round(Q.totalTime/60),ne=Q.totalKeystrokes>20&&Q.totalClicks>5?"high":Q.totalClicks>2?"medium":"low",de=ne==="high"?"text-green-400":ne==="medium"?"text-yellow-400":"text-red-400",me=ne==="high"?"bg-green-500":ne==="medium"?"bg-yellow-500":"bg-red-500";return o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("div",{className:"text-xs text-white font-bold truncate",children:Q.title}),o.jsxs("div",{className:"text-[9px] text-gray-500",children:[Q.classType,"  ",Q.category]})]}),o.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${me}`,title:`${ne} engagement`})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Time"}),o.jsxs("div",{className:"text-white font-bold",children:[X,"m"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Visits"}),o.jsx("div",{className:"text-white font-bold",children:Q.visits})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Keys"}),o.jsx("div",{className:"text-white font-bold",children:Q.totalKeystrokes})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Quality"}),o.jsx("div",{className:`font-bold capitalize ${de}`,children:ne})]})]}),Q.lastVisit&&o.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(Q.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},G)})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),E.length===0?o.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):o.jsx("div",{className:"space-y-2",children:E.map(Q=>{var X;const G=Math.round((((X=Q.metrics)==null?void 0:X.engagementTime)||0)/60);return o.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${G>=5?"bg-green-500":G>=1?"bg-yellow-500":"bg-gray-500"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs text-white font-bold truncate",children:Q.assignmentTitle}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[Q.classType,"  ",G,"m engaged"]})]}),o.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:Q.submittedAt?new Date(Q.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},Q.id)})})]}),T>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),o.jsx("div",{className:"space-y-2",children:(K=(z=t.gamification)==null?void 0:z.activeQuests)==null?void 0:K.filter(Q=>Q.status==="ACCEPTED"||Q.status==="DEPLOYED").map(Q=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dd,{className:`w-3.5 h-3.5 ${Q.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),o.jsx("span",{className:"text-xs text-white",children:Q.questId})]}),o.jsx("span",{className:`text-[10px] font-bold uppercase ${Q.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:Q.status})]},Q.questId))})]}),o.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[o.jsxs("div",{children:["Email: ",t.email]}),o.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),o.jsxs("div",{children:["Enrolled: ",y.join(", ")||"None"]}),o.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),o.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&o.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})},fde=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=al(),[a,i]=O.useState(null),[s,c]=O.useState([]),[d,h]=O.useState([]),[p,m]=O.useState([]),[y,x]=O.useState([]),[T,_]=O.useState(Date.now()),[w,E]=O.useState(null),[I,C]=O.useState("xp"),[L,P]=O.useState("desc"),R=re=>{I===re?P(ce=>ce==="asc"?"desc":"asc"):(C(re),P("asc"))},N=({label:re,col:ce,className:he})=>o.jsx("th",{className:`cursor-pointer select-none group p-3 ${he??""}`,onClick:()=>R(ce),children:o.jsxs("div",{className:`flex items-center gap-1 ${he!=null&&he.includes("text-center")?"justify-center":he!=null&&he.includes("text-right")?"justify-end":"justify-start"}`,children:[o.jsx("span",{children:re}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(w2,{className:`w-2.5 h-2.5 -mb-0.5 ${I===ce&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Di,{className:`w-2.5 h-2.5 -mt-0.5 ${I===ce&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});O.useEffect(()=>{const re=De.subscribeToChatFlags(c),ce=De.subscribeToAnnouncements(h),he=De.subscribeToStudentAlerts(m),Ie=De.subscribeToStudentBuckets(x),Se=setInterval(()=>_(Date.now()),6e4);return()=>{re(),ce(),he(),Ie(),clearInterval(Se)}},[]);const A=t.filter(re=>re.role==="STUDENT"),j=O.useMemo(()=>{const re=new Set;return A.forEach(ce=>{ce.section&&re.add(ce.section)}),Array.from(re).sort()},[A]),$=O.useMemo(()=>{const re=new Map;for(const ce of p){const he=re.get(ce.studentId),Ie={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!he||(Ie[ce.riskLevel]||0)>(Ie[he.riskLevel]||0))&&re.set(ce.studentId,ce)}return re},[p]),B=O.useMemo(()=>{const re=new Map;for(const ce of y)re.has(ce.studentId)||re.set(ce.studentId,ce);return re},[y]),F=O.useMemo(()=>{const re={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},ce=new Set;for(const he of y)ce.has(he.studentId)||(ce.add(he.studentId),re[he.bucket]!==void 0&&re[he.bucket]++);return re},[y]),z=A.length,K=Math.round(A.reduce((re,ce)=>{var he;return re+(((he=ce.stats)==null?void 0:he.totalTime)||0)},0)/(z||1)),Q=A.reduce((re,ce)=>{var he;return re+(((he=ce.stats)==null?void 0:he.problemsCompleted)||0)},0),G=A.reduce((re,ce)=>{var he;return re+(((he=ce.gamification)==null?void 0:he.xp)||0)},0),X=A.filter(re=>re.mutedUntil&&new Date(re.mutedUntil).getTime()>T),ne=async re=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await De.muteUser(re,0)},de=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:De.INDEFINITE_MUTE}],me=async(re,ce)=>{await De.muteUser(re,ce),E(null)},H=async(re,ce)=>{const he=new Date(ce).getTime(),Ie=new Date(Math.max(he,Date.now())+3600*1e3),Se=Math.ceil((Ie.getTime()-Date.now())/6e4);await De.muteUser(re,Se)},ee=({label:re,value:ce,icon:he,color:Ie})=>o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[o.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${Ie}`,children:he}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:ce}),o.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:re})]}),o.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${Ie}`})]}),te=re=>{const he=new Date(re).getTime()-T;if(he<=0)return"Expired";const Ie=Math.ceil(he/6e4);return Ie>60?`${Math.ceil(Ie/60)} hrs`:`${Ie} mins`},Oe=re=>{if(!re)return"Never";const ce=new Date(re),he=Date.now()-ce.getTime(),Ie=Math.floor(he/6e4);if(Ie<1)return"Just now";if(Ie<60)return`${Ie}m ago`;const Se=Math.floor(Ie/60);return Se<24?`${Se}h ago`:ce.toLocaleDateString()};return o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[o.jsx("div",{className:"flex justify-between items-end",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(ee,{label:"Total Students",value:z,icon:o.jsx(Ts,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),o.jsx(ee,{label:"Total XP Awarded",value:G.toLocaleString(),icon:o.jsx(Ba,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),o.jsx(ee,{label:"Resources Viewed",value:Q,icon:o.jsx(M7,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),o.jsx(ee,{label:"Avg Active Time",value:`${K}m`,icon:o.jsx(js,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?o.jsx(ks,{className:"w-5 h-5"}):o.jsx(T2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[o.jsx(Nx,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):o.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(re=>o.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-bold text-white",children:[re.senderName," ",o.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",re.classType]})]}),o.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',re.content,'"']})]}),o.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(re.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{onClick:async()=>{await De.resolveFlag(re.id),re.messageId&&await De.unflagMessage(re.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[o.jsx(ou,{className:"w-3 h-3"})," Dismiss"]}),o.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await De.resolveFlag(re.id),re.messageId&&await De.deleteMessage(re.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[o.jsx(la,{className:"w-3 h-3"})," Delete"]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>E(w===re.id?null:re.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:o.jsx(Cx,{className:"w-3 h-3"})}),w===re.id&&o.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",re.senderName]}),de.map(ce=>o.jsx("button",{onClick:()=>me(re.senderId,ce.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:ce.label},ce.minutes))]})]})]})]},re.id))})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[o.jsx(Cx,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),X.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[o.jsx(Ts,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[o.jsx("th",{className:"pb-2",children:"Operative"}),o.jsx("th",{className:"pb-2",children:"Remaining"}),o.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:X.map(re=>o.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[o.jsxs("td",{className:"py-3",children:[o.jsx("div",{className:"text-sm font-bold text-white",children:re.name}),o.jsx("div",{className:"text-[10px] text-gray-500",children:re.classType})]}),o.jsx("td",{className:"py-3",children:o.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:te(re.mutedUntil)})}),o.jsx("td",{className:"py-3 text-right",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>H(re.id,re.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:o.jsx(Ox,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>ne(re.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:o.jsx(Nx,{className:"w-3.5 h-3.5"})})]})})]},re.id))})]})})]})]}),p.length>0&&o.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[o.jsx(GI,{className:"w-5 h-5"}),"Early Warning System"]}),o.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),o.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(re=>{const ce={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},he={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},Ie=re.bucket?gd[re.bucket]:null;return o.jsx("div",{className:`border p-4 rounded-xl ${ce[re.riskLevel]||ce.LOW}`,children:o.jsxs("div",{className:"flex justify-between items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${he[re.riskLevel]||he.LOW}`,children:re.riskLevel}),Ie&&o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${Ie.bgColor} ${Ie.color} ${Ie.borderColor} border`,children:Ie.label}),o.jsx("span",{className:"text-sm font-bold text-white truncate",children:re.studentName}),o.jsx("span",{className:"text-[10px] text-gray-500",children:re.classType})]}),o.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:re.message}),Ie&&o.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:Ie.description}),o.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[o.jsxs("span",{children:["ES: ",re.engagementScore]}),o.jsxs("span",{children:["Class Avg: ",re.classMean]}),o.jsx("span",{children:new Date(re.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsx("button",{onClick:()=>i(re.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),o.jsx("button",{onClick:async()=>{await De.dismissAlert(re.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},re.id)})})]}),y.length>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(GI,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),o.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(gd).map(re=>{const ce=gd[re],he=F[re];return o.jsxs("div",{className:`border rounded-xl p-3 ${ce.borderColor} ${ce.bgColor} transition hover:scale-[1.02]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-xs font-bold ${ce.color}`,children:ce.label}),o.jsx("span",{className:"text-lg font-bold text-white",children:he})]}),o.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:ce.description})]},re)})}),(()=>{const re=Object.values(F).reduce((ce,he)=>ce+he,0);return re===0?null:o.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(gd).map(ce=>{const he=F[ce]/re*100;if(he===0)return null;const Ie={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return o.jsx("div",{className:`${Ie[ce]||"bg-gray-500"} transition-all`,style:{width:`${he}%`},title:`${gd[ce].label}: ${F[ce]} (${Math.round(he)}%)`},ce)})})})()]}),o.jsx("div",{className:"mt-8",children:o.jsx(ode,{announcements:d,studentIds:A.map(re=>re.id),availableSections:j})}),o.jsx("div",{className:"mt-8",children:o.jsx(lde,{students:A,availableSections:j})}),o.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[o.jsx(N,{label:"Student",col:"name"}),o.jsx(N,{label:"Class",col:"class"}),o.jsx(N,{label:"Last Seen",col:"lastSeen",className:"text-center"}),o.jsx(N,{label:"Total Time",col:"time",className:"text-center"}),o.jsx(N,{label:"Resources",col:"resources",className:"text-center"}),o.jsx(N,{label:"XP",col:"xp",className:"text-right"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const re=[...A].sort((he,Ie)=>{var Se,We,Me,_e,gt,et;switch(I){case"name":return L==="asc"?he.name.localeCompare(Ie.name):Ie.name.localeCompare(he.name);case"class":return L==="asc"?(he.classType||"").localeCompare(Ie.classType||""):(Ie.classType||"").localeCompare(he.classType||"");case"lastSeen":{const pt=he.lastLoginAt?new Date(he.lastLoginAt).getTime():0,st=Ie.lastLoginAt?new Date(Ie.lastLoginAt).getTime():0;return L==="asc"?pt-st:st-pt}case"time":{const pt=((Se=he.stats)==null?void 0:Se.totalTime)||0,st=((We=Ie.stats)==null?void 0:We.totalTime)||0;return L==="asc"?pt-st:st-pt}case"resources":{const pt=((Me=he.stats)==null?void 0:Me.problemsCompleted)||0,st=((_e=Ie.stats)==null?void 0:_e.problemsCompleted)||0;return L==="asc"?pt-st:st-pt}case"xp":default:{const pt=((gt=he.gamification)==null?void 0:gt.xp)||0,st=((et=Ie.gamification)==null?void 0:et.xp)||0;return L==="asc"?pt-st:st-pt}}}),ce=Math.max(1,...A.map(he=>{var Ie;return((Ie=he.gamification)==null?void 0:Ie.xp)||0}));return re.map(he=>{var be,Be,Ye;const Ie=((be=he.gamification)==null?void 0:be.xp)||0,Se=Math.round(Ie/ce*100),We=he.lastLoginAt,Me=We?Date.now()-new Date(We).getTime():1/0,_e=Me<36e5?"text-green-400":Me<864e5?"text-yellow-400":Me<1/0?"text-red-400":"text-gray-600",gt=Me<36e5?"bg-green-500":Me<864e5?"bg-yellow-500":Me<1/0?"bg-red-500":"bg-gray-600",et=$.get(he.id),pt={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},st=B.get(he.id),xe=st?gd[st.bucket]:null;return o.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(et==null?void 0:et.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(he.id),children:[o.jsx("td",{className:"p-3 font-bold text-white",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[he.avatarUrl?o.jsx("img",{src:he.avatarUrl,alt:he.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):o.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:he.name.charAt(0)}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${gt}`})]}),o.jsx("span",{className:"truncate max-w-[120px]",children:he.name}),et&&pt[et.riskLevel]&&o.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${pt[et.riskLevel]}`,title:`${et.riskLevel} risk: ${et.reason}`}),xe&&o.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${xe.bgColor} ${xe.color} border ${xe.borderColor}`,title:xe.description,children:xe.label})]})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:he.classType}),o.jsx("td",{className:`p-3 text-center text-xs font-mono ${_e}`,children:Oe(he.lastLoginAt)}),o.jsxs("td",{className:"p-3 text-center text-white",children:[((Be=he.stats)==null?void 0:Be.totalTime)||0,"m"]}),o.jsx("td",{className:"p-3 text-center text-white",children:((Ye=he.stats)==null?void 0:Ye.problemsCompleted)||0}),o.jsx("td",{className:"p-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Se}%`}})}),o.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Ie})]})})]},he.id)})})()})]})})]}),a&&(()=>{const re=A.find(ce=>ce.id===a);return re?o.jsx(hde,{student:re,submissions:r.filter(ce=>ce.userId===a),assignments:e,bucketProfiles:y.filter(ce=>ce.studentId===a),onClose:()=>i(null)}):null})()]})},pde=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=pi(),{confirm:i}=al(),[s,c]=O.useState(new Set),[d,h]=O.useState(Pr.AP_PHYSICS),[p,m]=O.useState(!1),[y,x]=O.useState(!1),[T,_]=O.useState({}),w=(ye,it)=>{_(At=>{const jt=At[ye]||{col:"name",dir:"asc"};return{...At,[ye]:{col:it,dir:jt.col===it&&jt.dir==="asc"?"desc":"asc"}}})},E=({label:ye,col:it,type:At,className:jt})=>{const Pt=T[At]||{col:"name",dir:"asc"},ct=Pt.col===it;return o.jsx("th",{className:`cursor-pointer select-none group p-4 ${jt??""}`,onClick:()=>w(At,it),children:o.jsxs("div",{className:`flex items-center gap-1 ${jt!=null&&jt.includes("text-center")?"justify-center":"justify-start"}`,children:[o.jsx("span",{children:ye}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(w2,{className:`w-2.5 h-2.5 -mb-0.5 ${ct&&Pt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Di,{className:`w-2.5 h-2.5 -mt-0.5 ${ct&&Pt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[I,C]=O.useState(""),[L,P]=O.useState(Pr.AP_PHYSICS),[R,N]=O.useState(""),[A,j]=O.useState(""),[$,B]=O.useState(!1),[F,z]=O.useState(!1),[K,Q]=O.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[G,X]=O.useState(10),[ne,de]=O.useState("single"),[me,H]=O.useState([]),[ee,te]=O.useState(!1),Oe=O.useRef(null),[re,ce]=O.useState(null),[he,Ie]=O.useState(""),[Se,We]=O.useState(""),Me=t.filter(ye=>ye.role==="STUDENT"),_e=O.useMemo(()=>{const ye=new Set;return Me.forEach(it=>{it.section&&ye.add(it.section)}),Array.from(ye).sort()},[Me]),gt=async(ye,it)=>{try{await De.updateUserSection(ye,it),ce(null),Ie(""),We(""),a.success(`Section updated to ${it||"none"}`)}catch{a.error("Failed to update section")}},et=async ye=>{if(s.size!==0)try{await Promise.all(Array.from(s).map(it=>De.updateUserSection(it,ye))),c(new Set),a.success(`Set ${s.size} students to ${ye}`)}catch{a.error("Failed to bulk update sections")}},pt=O.useMemo(()=>e.filter(ye=>!t.some(it=>it.email.toLowerCase()===ye.email.toLowerCase())),[e,t]),st=O.useMemo(()=>[...Array.from(new Set([...Object.values(Pr).filter(it=>it!==Pr.UNCATEGORIZED),...r.map(it=>it.className)])).sort(),Pr.UNCATEGORIZED],[r]),xe=ye=>{const it=Me.filter(Pt=>{var ct,gr;return((ct=Pt.enrolledClasses)==null?void 0:ct.includes(ye))||ye===Pr.UNCATEGORIZED&&(((gr=Pt.enrolledClasses)==null?void 0:gr.length)===0||!Pt.enrolledClasses)}),At=it.every(Pt=>s.has(Pt.id)),jt=new Set(s);it.forEach(Pt=>{At?jt.delete(Pt.id):jt.add(Pt.id)}),c(jt)},be=ye=>{const it=new Set(s);it.has(ye)?it.delete(ye):it.add(ye),c(it)},Be=async()=>{if(s.size>0){const ye=Array.from(s).map(async it=>{const At=t.find(jt=>jt.id===it);if(At){const jt=At.enrolledClasses||[],Pt=Array.from(new Set([...jt.filter(ct=>ct!==Pr.UNCATEGORIZED),d]));await De.updateUserEnrolledClasses(it,Pt)}});await Promise.all(ye),c(new Set)}},Ye=async ye=>{if(s.size>0){if(!await i({message:`Remove ${s.size} students from ${ye}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const it=Array.from(s).map(async At=>{const jt=t.find(Pt=>Pt.id===At);if(jt){const ct=(jt.enrolledClasses||[]).filter(gr=>gr!==ye);await De.updateUserEnrolledClasses(At,ct)}});await Promise.all(it),c(new Set)}},ht=async(ye,it)=>{if(await i({message:`Remove ${ye.name} from ${it}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const jt=(ye.enrolledClasses||[]).filter(Pt=>Pt!==it);await De.updateUserEnrolledClasses(ye.id,jt)}},Ze=async(ye,it)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${it}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await De.removeUser(ye)},yt=async ye=>{ye!==Pr.UNCATEGORIZED&&await i({message:`Delete group config ${ye}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&De.deleteClassConfig(ye)},Rt=async ye=>{await i({message:`Cancel invite for ${ye}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await De.removeFromWhitelist(ye)},Bt=(ye,it)=>{ye!==Pr.UNCATEGORIZED&&(j(ye),B(!0),it?(Q(it.features),X(it.xpPerMinute||10)):(Q({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),X(10)),x(!0))},Tt=ye=>{ye.preventDefault(),n(I,L),R.trim()&&De.updateWhitelistSection(I,R.trim()),C(""),N(""),m(!1)},bt=ye=>{var jt;const it=(jt=ye.target.files)==null?void 0:jt[0];if(!it)return;const At=new FileReader;At.onload=Pt=>{var Nt,wt;const ct=(Nt=Pt.target)==null?void 0:Nt.result;if(!ct)return;const gr=ct.split(/\r?\n/).filter(sr=>sr.trim()),wn=(wt=gr[0])!=null&&wt.toLowerCase().includes("email")?1:0,Rn=new Set(e.map(sr=>sr.email.toLowerCase())),kr=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,dr=gr.slice(wn).map(sr=>{const Qr=sr.includes("	")?sr.split("	"):sr.split(","),Mr=(Qr[0]||"").trim().toLowerCase(),Xr=(Qr[1]||"").trim()||Pr.AP_PHYSICS,Mn=(Qr[2]||"").trim();let Jt="pending";return kr.test(Mr)?Rn.has(Mr)&&(Jt="duplicate"):Jt="invalid",{email:Mr,classType:Xr,section:Mn,status:Jt}}).filter(sr=>sr.email.length>0);H(dr)},At.readAsText(it),ye.target.value=""},Zt=async()=>{const ye=me.filter(At=>At.status==="pending");if(ye.length===0)return;te(!0);let it=0;for(const At of ye)try{await De.addToWhitelist(At.email,At.classType),At.section&&await De.updateWhitelistSection(At.email,At.section),At.status="success",it++}catch{At.status="invalid"}H([...me]),te(!1),a.success(`${it} operative${it!==1?"s":""} imported successfully.`),me.every(At=>At.status==="success"||At.status==="duplicate")&&setTimeout(()=>{m(!1),H([]),de("single")},1500)},tn=async ye=>{if(ye.preventDefault(),!!A){z(!0);try{await De.saveClassConfig({id:A,className:A,features:K,xpPerMinute:G}),j(""),x(!1),B(!1)}catch(it){console.error("Failed to save config:",it),a.error("Failed to save class configuration.")}finally{z(!1)}}},rn=ye=>{if(!ye)return"Never";const it=new Date(ye),At=Date.now()-it.getTime(),jt=Math.floor(At/6e4);if(jt<60)return`${jt}m ago`;const Pt=Math.floor(jt/60);return Pt<24?`${Pt}h ago`:it.toLocaleDateString()},ln=ye=>{const it=ye===Pr.UNCATEGORIZED,At=T[ye]||{col:"name",dir:"asc"},jt=[...Me.filter(ct=>{var gr;return((gr=ct.enrolledClasses)==null?void 0:gr.includes(ye))||it&&(!ct.enrolledClasses||ct.enrolledClasses.length===0)})].sort((ct,gr)=>{var wn,Rn,kr,dr;switch(At.col){case"section":{const Nt=ct.section||"",wt=gr.section||"";return At.dir==="asc"?Nt.localeCompare(wt):wt.localeCompare(Nt)}case"status":{const Nt=ct.isWhitelisted?1:0,wt=gr.isWhitelisted?1:0;return At.dir==="asc"?Nt-wt:wt-Nt}case"lastSeen":{const Nt=ct.lastLoginAt?new Date(ct.lastLoginAt).getTime():0,wt=gr.lastLoginAt?new Date(gr.lastLoginAt).getTime():0;return At.dir==="asc"?Nt-wt:wt-Nt}case"xp":{const Nt=((Rn=(wn=ct.gamification)==null?void 0:wn.classXp)==null?void 0:Rn[ye])||0,wt=((dr=(kr=gr.gamification)==null?void 0:kr.classXp)==null?void 0:dr[ye])||0;return At.dir==="asc"?Nt-wt:wt-Nt}case"name":default:return At.dir==="asc"?ct.name.localeCompare(gr.name):gr.name.localeCompare(ct.name)}}),Pt=r.find(ct=>ct.className===ye);return o.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${it?"opacity-90":""}`,children:[o.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${it?"bg-orange-500/10":"bg-white/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("h3",{className:`font-bold text-lg tracking-wide ${it?"text-orange-300":"text-white"}`,children:[it&&o.jsx(Roe,{className:"w-5 h-5 inline mr-2 mb-1"}),ye]}),o.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${it?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[jt.length," Registered"]}),!it&&o.jsx("button",{onClick:()=>Bt(ye,Pt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:o.jsx(Xm,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[s.size>0&&Array.from(s).some(ct=>jt.find(gr=>gr.id===ct))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex items-center gap-1",children:o.jsxs("select",{onChange:ct=>{ct.target.value&&et(ct.target.value),ct.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[o.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),o.jsx("option",{value:"",children:"No Section"}),_e.map(ct=>o.jsx("option",{value:ct,children:ct},ct))]})}),o.jsxs("button",{onClick:()=>Ye(ye),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[o.jsx(hle,{className:"w-3 h-3"})," Remove Selected"]})]}),!it&&o.jsxs("button",{onClick:()=>yt(ye),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[o.jsx(la,{className:"w-3 h-3"}),"Config"]})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[o.jsx("th",{className:"w-12 p-4 text-center",children:jt.length>0&&o.jsx("button",{onClick:()=>xe(ye),className:"hover:text-purple-400 transition",children:o.jsx(JI,{className:"w-4 h-4"})})}),o.jsx(E,{label:"Operative",col:"name",type:ye}),o.jsx(E,{label:"Section",col:"section",type:ye,className:"text-center"}),o.jsx(E,{label:"System Status",col:"status",type:ye,className:"text-center"}),o.jsx(E,{label:"Last Seen",col:"lastSeen",type:ye,className:"text-center"}),o.jsx(E,{label:"Class XP",col:"xp",type:ye,className:"text-center"}),o.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:jt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500 italic text-sm",children:it?"No restricted operatives found.":"No students registered in this roster yet."})}):jt.map(ct=>{var wn,Rn,kr,dr;const gr=((Rn=(wn=ct.gamification)==null?void 0:wn.classXp)==null?void 0:Rn[ye])||0;return o.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(ct.id)?"bg-purple-500/10":""}`,children:[o.jsx("td",{className:"p-4 text-center",children:o.jsx("button",{onClick:()=>be(ct.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(ct.id)?o.jsx(lle,{className:"w-4 h-4 text-purple-500"}):o.jsx(JI,{className:"w-4 h-4 group-hover:text-gray-400"})})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:ct.avatarUrl,alt:ct.name,className:"w-8 h-8 rounded-full border border-white/10"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:ct.name}),o.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:ct.email})]})]})}),o.jsx("td",{className:"p-4 text-center",children:re===ct.id?o.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[o.jsxs("select",{value:he,onChange:Nt=>{Ie(Nt.target.value),Nt.target.value!=="__custom__"&&gt(ct.id,Nt.target.value)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-2 py-1 text-[11px] text-white font-bold focus:outline-none w-28",autoFocus:!0,children:[o.jsx("option",{value:"",children:"No Section"}),_e.map(Nt=>o.jsx("option",{value:Nt,children:Nt},Nt)),o.jsx("option",{value:"__custom__",children:"+ New Section"})]}),he==="__custom__"&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx("input",{value:Se,onChange:Nt=>We(Nt.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:Nt=>{Nt.key==="Enter"&&Se.trim()&&gt(ct.id,Se.trim())},autoFocus:!0}),o.jsx("button",{onClick:()=>{Se.trim()&&gt(ct.id,Se.trim())},className:"text-green-400 hover:text-green-300 p-1",children:o.jsx(Ii,{className:"w-3 h-3"})})]}),o.jsx("button",{onClick:()=>{ce(null),Ie(""),We("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Cancel"})]}):o.jsx("button",{onClick:()=>{ce(ct.id),Ie(ct.section||""),We("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${ct.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:ct.section||"Assign"})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${ct.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[ct.isWhitelisted?o.jsx(YI,{className:"w-3 h-3"}):o.jsx(T2,{className:"w-3 h-3"}),ct.isWhitelisted?"Authorized":"Restricted"]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[o.jsx(js,{className:"w-3 h-3"}),rn(ct.lastLoginAt)]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-lg text-purple-300",children:gr.toLocaleString()}),(((kr=ct.enrolledClasses)==null?void 0:kr.length)||0)>1&&o.jsxs("details",{className:"mt-1",children:[o.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),o.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(dr=ct.enrolledClasses)==null?void 0:dr.map(Nt=>{var wt,sr;return o.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[o.jsx("span",{className:`truncate ${Nt===ye?"text-purple-400 font-bold":"text-gray-500"}`,children:Nt}),o.jsx("span",{className:"text-gray-400 font-mono",children:(((sr=(wt=ct.gamification)==null?void 0:wt.classXp)==null?void 0:sr[Nt])||0).toLocaleString()})]},Nt)})})]})]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("div",{className:"flex items-center justify-center gap-2",children:o.jsx("button",{onClick:()=>it?Ze(ct.id,ct.name):ht(ct,ye),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:it?"Permanently Delete":"Remove from this Class",children:o.jsx(Pa,{className:"w-4 h-4"})})})})]},ct.id)})})]})})]},ye)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[o.jsxs("button",{onClick:()=>{j(""),Q({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),B(!1),x(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[o.jsx(Xm,{className:"w-4 h-4"}),"Class Config"]}),o.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[o.jsx(SA,{className:"w-4 h-4"}),"Invite Student"]})]})]}),pt.length>0&&o.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[o.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[o.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[o.jsx(Qoe,{className:"w-4 h-4"})," Pending Class Invitations (",pt.length,")"]}),o.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),o.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:pt.map(ye=>o.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ye.email}),o.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[o.jsx(YI,{className:"w-3 h-3 text-amber-500"}),o.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ye.classTypes||[ye.classType]).join(", ")," Access"]})]})]}),o.jsx("button",{onClick:()=>Rt(ye.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:o.jsx(la,{className:"w-3.5 h-3.5"})})]},ye.email))})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[o.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),o.jsxs("div",{className:"relative w-full sm:w-auto",children:[o.jsx("select",{value:d,onChange:ye=>h(ye.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:st.filter(ye=>ye!==Pr.UNCATEGORIZED).map(ye=>o.jsxs("option",{value:ye,children:["Apply ",ye," Access"]},ye))}),o.jsx(Di,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),o.jsxs("button",{onClick:Be,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx(Ii,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),o.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),o.jsx("div",{className:"pb-12",children:st.map(ye=>ln(ye))}),o.jsxs(Ti,{isOpen:p,onClose:()=>{m(!1),H([]),de("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[o.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[o.jsxs("button",{onClick:()=>{de("single"),H([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ne==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(SA,{className:"w-3.5 h-3.5"})," Single"]}),o.jsxs("button",{onClick:()=>de("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ne==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(Xd,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ne==="single"?o.jsxs("form",{onSubmit:Tt,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:I,onChange:ye=>C(ye.target.value),placeholder:"student@gmail.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),o.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:ye=>P(ye.target.value),children:st.filter(ye=>ye!==Pr.UNCATEGORIZED).map(ye=>o.jsx("option",{value:ye,children:ye},ye))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),o.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:R,onChange:ye=>N(ye.target.value),placeholder:"e.g. Period 3, Block A"})]}),o.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),o.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[o.jsx("input",{type:"file",ref:Oe,accept:".csv,.tsv,.txt",onChange:bt,className:"hidden"}),me.length===0?o.jsxs(o.Fragment,{children:[o.jsx(Xd,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),o.jsx("button",{onClick:()=>{var ye;return(ye=Oe.current)==null?void 0:ye.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",o.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),o.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),o.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:o.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",o.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",o.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",o.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx(M7,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),o.jsxs("p",{className:"text-sm font-bold text-white",children:[me.length," records parsed"]}),o.jsx("button",{onClick:()=>{H([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),me.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:o.jsxs("table",{className:"w-full text-left text-xs",children:[o.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:o.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[o.jsx("th",{className:"p-2 pl-3",children:"Email"}),o.jsx("th",{className:"p-2",children:"Class"}),o.jsx("th",{className:"p-2",children:"Section"}),o.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:me.map((ye,it)=>o.jsxs("tr",{className:ye.status==="invalid"?"bg-red-500/5":ye.status==="duplicate"?"bg-yellow-500/5":ye.status==="success"?"bg-green-500/5":"",children:[o.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ye.email}),o.jsx("td",{className:"p-2 text-gray-400",children:ye.classType}),o.jsx("td",{className:"p-2 text-gray-500",children:ye.section||""}),o.jsx("td",{className:"p-2 pr-3 text-right",children:o.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ye.status==="pending"?"bg-blue-500/20 text-blue-400":ye.status==="success"?"bg-green-500/20 text-green-400":ye.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ye.status})})]},it))})]})}),o.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("span",{className:"text-blue-400",children:[me.filter(ye=>ye.status==="pending").length," ready"]}),o.jsxs("span",{className:"text-yellow-400",children:[me.filter(ye=>ye.status==="duplicate").length," duplicates"]}),o.jsxs("span",{className:"text-red-400",children:[me.filter(ye=>ye.status==="invalid").length," invalid"]}),me.some(ye=>ye.status==="success")&&o.jsxs("span",{className:"text-green-400",children:[me.filter(ye=>ye.status==="success").length," imported"]})]})}),me.filter(ye=>ye.status==="duplicate").length>0&&o.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[o.jsx(ks,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),o.jsx("button",{onClick:Zt,disabled:ee||me.filter(ye=>ye.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ee?o.jsxs(o.Fragment,{children:[o.jsx(Ss,{className:"w-4 h-4 animate-spin"})," Importing..."]}):o.jsxs(o.Fragment,{children:["Import ",me.filter(ye=>ye.status==="pending").length," Operatives"]})})]})]})]}),o.jsx(Ti,{isOpen:y,onClose:()=>x(!1),title:$?"Edit Class Node Config":"Initialize New Class Node",children:o.jsxs("form",{onSubmit:tn,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),o.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:A,onChange:ye=>j(ye.target.value),placeholder:"e.g. AP Physics Period 4"}),$&&o.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.physicsLab,onChange:ye=>Q({...K,physicsLab:ye.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.evidenceLocker,onChange:ye=>Q({...K,evidenceLocker:ye.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.leaderboard,onChange:ye=>Q({...K,leaderboard:ye.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.physicsTools,onChange:ye=>Q({...K,physicsTools:ye.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:K.communications,onChange:ye=>Q({...K,communications:ye.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"number",min:1,max:100,value:G,onChange:ye=>X(Math.max(1,Math.min(100,parseInt(ye.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),o.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),o.jsx("button",{type:"submit",disabled:F,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${F?"opacity-70 cursor-not-allowed":""}`,children:F?o.jsxs(o.Fragment,{children:[o.jsx(Ss,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):$?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},Xc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},KR={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},mde=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,gde=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,yde=({assignment:t,isOpen:e,onClose:r})=>{const n=pi(),a=O.useRef(null),[i,s]=O.useState([]),[c,d]=O.useState(!0),[h,p]=O.useState(!1),[m,y]=O.useState(t.category==="Practice Set"?"reading":"manage"),[x,T]=O.useState(null),[_,w]=O.useState(null),[E,I]=O.useState(""),[C,L]=O.useState(null),[P,R]=O.useState(!1),[N,A]=O.useState(null),[j,$]=O.useState({}),[B,F]=O.useState(null),[z,K]=O.useState(!0),[Q,G]=O.useState(null),[X,ne]=O.useState(null),[de,me]=O.useState(null),[H,ee]=O.useState(!1),te=O.useRef(null),Oe=t.category==="Practice Set";O.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const Be=await Ra(at(Pe,"question_banks",t.id));Be.exists()?s(Be.data().questions||[]):s([]);const Ye=await Ra(at(Pe,"reading_materials",t.id));Ye.exists()?G(Ye.data()):G(null)}catch(Be){console.error("Failed to load bank:",Be),s([])}finally{d(!1)}})()},[e,t.id]);const re=async be=>{p(!0);try{await ea(at(Pe,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:be,questionCount:be.length,updatedAt:new Date().toISOString()}),s(be)}catch(Be){n.error("Failed to save: "+(Be instanceof Error?Be.message:"Unknown error"))}finally{p(!1)}},ce=async be=>{const Be=i.filter(Ye=>Ye.id!==be);await re(Be),n.success("Question removed."),C===be&&L(null)},he=async()=>{try{await Ka(at(Pe,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Ie=()=>{navigator.clipboard.writeText(mde(t.title,t.classType,t.description)),R(!0),setTimeout(()=>R(!1),2e3),n.success("Prompt copied!")},Se=()=>{navigator.clipboard.writeText(gde(t.title,t.classType,t.description)),ee(!0),setTimeout(()=>ee(!1),2e3),n.success("Reading prompt copied!")},We=async be=>{var Ye;const Be=(Ye=be.target.files)==null?void 0:Ye[0];if(Be){me(null),ne(null);try{let Ze=(await Be.text()).replace(/```json\s*|```\s*/g,"").trim();Ze=Ze.replace(/[\x00-\x1F\x7F]/g,Bt=>Bt===`
`||Bt==="\r"||Bt==="	"?" ":"");let yt;try{yt=JSON.parse(Ze)}catch{const Bt=Ze.match(/\{[\s\S]*\}/);if(Bt)yt=JSON.parse(Bt[0]);else throw new Error("No JSON object found.")}if(!yt.title||!yt.sections||!Array.isArray(yt.sections))throw new Error("Missing required fields: title and sections array.");const Rt=yt.sections.filter(Bt=>!Bt.title||!Bt.content);if(Rt.length>0)throw new Error(`${Rt.length} section(s) missing title or content.`);ne(yt)}catch(ht){me(ht instanceof Error?ht.message:"Parse failed.")}te.current&&(te.current.value="")}},Me=async()=>{if(X){p(!0);try{await ea(at(Pe,"reading_materials",t.id),{...X,assignmentId:t.id,updatedAt:new Date().toISOString()}),G(X),ne(null),n.success(`Study material uploaded: ${X.sections.length} sections!`)}catch(be){n.error("Failed to save: "+(be instanceof Error?be.message:"Unknown error"))}finally{p(!1)}}},_e=async()=>{p(!0);try{await Ka(at(Pe,"reading_materials",t.id)),G(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},gt=async be=>{var Ye;const Be=(Ye=be.target.files)==null?void 0:Ye[0];if(Be){F(null),A(null);try{let Ze=(await Be.text()).replace(/```json\s*|```\s*/g,"").trim();Ze=Ze.replace(/[\x00-\x1F\x7F]/g,bt=>bt===`
`||bt==="\r"||bt==="	"?" ":"");let yt;try{yt=JSON.parse(Ze)}catch{const bt=Ze.match(/\[[\s\S]*\]/);if(bt)try{yt=JSON.parse(bt[0])}catch{const Zt=bt[0];let tn=null;for(let rn=Zt.length-1;rn>0;rn--)if(Zt[rn]==="}")try{tn=JSON.parse(Zt.slice(0,rn+1)+"]");break}catch{}if(tn)yt=tn;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Zt=null;const tn="["+Ze;for(let rn=tn.length-1;rn>0;rn--)if(tn[rn]==="}")try{Zt=JSON.parse(tn.slice(0,rn+1)+"]");break}catch{}if(Zt)yt=Zt;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(yt)||yt.length===0)throw new Error("Must be a non-empty JSON array.");const Rt=yt.filter(bt=>bt.id&&bt.tier&&bt.type&&bt.stem&&bt.options&&bt.correctAnswer),Bt=yt.length-Rt.length;if(Rt.length===0){F("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const Tt={};Rt.forEach(bt=>{const Zt=bt.tier;Tt[Zt]=(Tt[Zt]||0)+1}),A(Rt),$(Tt),Bt>0&&n.success(`Parsed ${Rt.length} questions (${Bt} skipped  missing fields).`)}catch(ht){F(ht instanceof Error?ht.message:"Parse failed.")}a.current&&(a.current.value="")}},et=async()=>{if(!N)return;let be;if(z&&i.length>0){const Be=new Set(i.map(ht=>ht.id)),Ye=N.map((ht,Ze)=>({...ht,id:Be.has(ht.id)?`${ht.id}_${Date.now()}_${Ze}`:ht.id}));be=[...i,...Ye]}else be=N;await re(be),n.success(`${z?"Added":"Replaced with"} ${N.length} questions. Total: ${be.length}`),A(null),y("manage")},pt=O.useMemo(()=>{let be=i;if(x&&(be=be.filter(Be=>Be.tier===x)),_&&(be=be.filter(Be=>Be.type===_)),E){const Be=E.toLowerCase();be=be.filter(Ye=>Ye.stem.toLowerCase().includes(Be)||Ye.id.toLowerCase().includes(Be))}return be},[i,x,_,E]),st=O.useMemo(()=>{const be={1:0,2:0,3:0};return i.forEach(Be=>{be[Be.tier]=(be[Be.tier]||0)+1}),be},[i]),xe=O.useMemo(()=>{const be={};return i.forEach(Be=>{be[Be.type]=(be[Be.type]||0)+1}),be},[i]);return e?o.jsx(Ti,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:o.jsxs("div",{className:"text-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[o.jsx(_h,{className:"w-5 h-5 text-purple-400 shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),o.jsx("div",{className:"text-xs mt-1",children:c?o.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?o.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):o.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&o.jsx("div",{className:"flex gap-2",children:[1,2,3].map(be=>o.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${Xc[be].bg} ${Xc[be].border} border`,children:[o.jsx("div",{className:`text-sm font-bold ${Xc[be].text}`,children:st[be]}),o.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",be]})]},be))})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[!Oe&&o.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_h,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!Oe&&o.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(Ii,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),o.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_o,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",Q?`(${Q.sections.length})`:""]})]}),m==="manage"&&o.jsx("div",{className:"space-y-3",children:c?o.jsx("div",{className:"py-12 text-center",children:o.jsx(Ss,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?o.jsxs("div",{className:"py-12 text-center",children:[o.jsx(_h,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[o.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[o.jsx(sH,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),o.jsx("input",{value:E,onChange:be=>I(be.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${x?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(be=>o.jsxs("button",{onClick:()=>T(x===be?null:be),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${x===be?`${Xc[be].bg} ${Xc[be].text} ${Xc[be].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",be," (",st[be],")"]},be))]})]}),Object.keys(xe).length>1&&o.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(xe).sort((be,Be)=>Be[1]-be[1]).map(([be,Be])=>o.jsxs("button",{onClick:()=>w(_===be?null:be),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${_===be?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[KR[be]||be," (",Be,")"]},be))}),o.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:pt.length===0?o.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):pt.map(be=>{const Be=Xc[be.tier]||Xc[1],Ye=C===be.id;return o.jsxs("div",{className:`rounded-xl border transition ${Ye?`${Be.border} ${Be.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[o.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(Ye?null:be.id),children:[o.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${Be.bg} ${Be.text}`,children:["T",be.tier]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[o.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:be.id}),o.jsx("span",{className:"text-[8px] text-gray-600",children:""}),o.jsx("span",{className:"text-[8px] text-gray-500",children:KR[be.type]||be.type}),o.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[o.jsx(Ba,{className:"w-2.5 h-2.5"}),be.xp]})]}),o.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:be.stem})]}),o.jsx(Pd,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${Ye?"rotate-90":""}`})]}),Ye&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[be.context&&o.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:be.context}),o.jsx("div",{className:"space-y-1",children:be.options.map(ht=>{const Ze=Array.isArray(be.correctAnswer)?be.correctAnswer.includes(ht.id):be.correctAnswer===ht.id;return o.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${Ze?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[o.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[ht.id.toUpperCase(),"."]}),o.jsx("span",{children:ht.text}),Ze&&o.jsx(Cn,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},ht.id)})}),o.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[o.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),be.explanation]}),be.linkedFollowUp&&o.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[o.jsx("span",{className:"font-bold",children:"Follow-up: "}),be.linkedFollowUp.stem]}),o.jsxs("button",{onClick:()=>ce(be.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[o.jsx(la,{className:"w-3 h-3"})," Delete Question"]})]})]},be.id)})}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[o.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",pt.length," of ",i.length]}),o.jsxs("button",{onClick:he,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[o.jsx(la,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),o.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),o.jsx("button",{onClick:Ie,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${P?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:P?o.jsxs(o.Fragment,{children:[o.jsx(Cn,{className:"w-4 h-4"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(Ex,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),o.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",o.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),o.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[o.jsx(jx,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),o.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:gt,className:"hidden"})]})]}),B&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[o.jsx(ks,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-300/70 text-xs",children:B})]}),N&&o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Cn,{className:"w-4 h-4 text-emerald-400"}),o.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[N.length," questions parsed"]})]}),o.jsx("div",{className:"flex gap-3",children:[1,2,3].map(be=>o.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[o.jsx("div",{className:"text-base font-bold text-white",children:j[be]||0}),o.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",be]})]},be))}),i.length>0&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>K(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${z?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[o.jsx(Ii,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",N.length,")"]}),o.jsxs("button",{onClick:()=>K(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${z?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[o.jsx(qh,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:et,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?o.jsx(Ss,{className:"w-4 h-4 animate-spin"}):o.jsx(Xd,{className:"w-4 h-4"}),h?"Saving...":`Upload ${N.length} Questions`]}),o.jsx("button",{onClick:()=>A(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:o.jsx(la,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&o.jsxs("div",{className:"space-y-5",children:[Q?o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_o,{className:"w-4 h-4 text-emerald-400"}),o.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Q.title})]}),o.jsxs("button",{onClick:_e,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[o.jsx(la,{className:"w-3 h-3"})," Remove"]})]}),Q.description&&o.jsx("p",{className:"text-xs text-gray-400",children:Q.description}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[o.jsxs("span",{children:[Q.sections.length," sections"]}),Q.estimatedMinutes&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["~",Q.estimatedMinutes," min read"]})]})]}),o.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:Q.sections.map((be,Be)=>o.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:Be+1}),o.jsx("span",{className:"truncate",children:be.title})]},Be))})]}):o.jsxs("div",{className:"py-6 text-center",children:[o.jsx(_o,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),o.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),o.jsx("button",{onClick:Se,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${H?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:H?o.jsxs(o.Fragment,{children:[o.jsx(Cn,{className:"w-4 h-4"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(Ex,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),o.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[o.jsx(jx,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),o.jsx("input",{ref:te,type:"file",accept:".json,.txt",onChange:We,className:"hidden"})]})]}),de&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[o.jsx(ks,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-300/70 text-xs",children:de})]}),X&&o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Cn,{className:"w-4 h-4 text-emerald-400"}),o.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:X.title})]}),o.jsxs("p",{className:"text-xs text-gray-400",children:[X.sections.length," sections  ~",X.estimatedMinutes||"?"," min read"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:Me,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?o.jsx(Ss,{className:"w-4 h-4 animate-spin"}):o.jsx(Xd,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),o.jsx("button",{onClick:()=>ne(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:o.jsx(la,{className:"w-4 h-4"})})]})]})]}),h&&o.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[o.jsx(Ss,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},QR=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],vde={Textbook:o.jsx(_o,{className:"w-4 h-4"}),Simulation:o.jsx(R7,{className:"w-4 h-4"}),"Lab Guide":o.jsx(_2,{className:"w-4 h-4"}),"Practice Set":o.jsx(Ao,{className:"w-4 h-4"}),Article:o.jsx(tH,{className:"w-4 h-4"}),"Video Lesson":o.jsx(lH,{className:"w-4 h-4"}),Supplemental:o.jsx(P7,{className:"w-4 h-4"})},xde=({assignments:t,submissions:e,classConfigs:r,onCreateAssignment:n,onPreviewAssignment:a,availableSections:i=[]})=>{const s=pi(),{confirm:c}=al(),[d,h]=O.useState(!1),[p,m]=O.useState(!1),[y,x]=O.useState(!1),[T,_]=O.useState("All Classes"),[w,E]=O.useState("All Categories"),[I,C]=O.useState(new Set),[L,P]=O.useState(null),[R,N]=O.useState({title:"",description:"",status:kl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[A,j]=O.useState(new Set([Pr.AP_PHYSICS])),[$,B]=O.useState([]),[F,z]=O.useState(!1),K=O.useMemo(()=>{const H=Object.values(Pr).filter(te=>te!==Pr.UNCATEGORIZED),ee=(r||[]).map(te=>te.className);return Array.from(new Set(["All Classes",...H,...ee]))},[r]),Q=O.useMemo(()=>t.filter(H=>{const ee=T==="All Classes"||H.classType===T,te=w==="All Categories"||H.category===w;return ee&&te}),[t,T,w]),G=O.useMemo(()=>{const H={};return Q.forEach(ee=>{const te=T==="All Classes"?`${ee.classType.toUpperCase()}  ${ee.unit||"Unassigned"}`:ee.unit||"Unassigned";H[te]||(H[te]=[]),H[te].push(ee)}),Object.keys(H).sort().reduce((ee,te)=>(ee[te]=H[te],ee),{})},[Q,T]),X=async H=>{if(H.preventDefault(),A.size===0){s.error("Select a target class.");return}x(!0);try{const ee=$.length>0?{targetSections:$}:{};p&&R.id?await n({...R,classType:Array.from(A)[0],...ee}):await Promise.all(Array.from(A).map(te=>n({...R,classType:te,...ee}))),h(!1),m(!1)}catch(ee){console.error(ee)}finally{x(!1)}},ne=H=>{N(H),j(new Set([H.classType])),B(H.targetSections||[]),m(!0),h(!0)},de=async H=>{const ee=H.status===kl.ACTIVE?kl.ARCHIVED:kl.ACTIVE;await De.updateAssignmentStatus(H.id,ee)},me=O.useMemo(()=>[...Array.isArray(e)?e:[]].sort((ee,te)=>{const Oe=new Date(ee.submittedAt||0).getTime();return new Date(te.submittedAt||0).getTime()-Oe}),[e]);return o.jsxs("div",{className:"space-y-8 pb-12",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),o.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),o.jsxs("button",{onClick:()=>{N({title:"",description:"",status:kl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),m(!1),h(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[o.jsx(Ii,{className:"w-5 h-5"})," Deploy Resource"]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:T,onChange:H=>_(H.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:K.map(H=>o.jsx("option",{value:H,children:H},H))}),o.jsx(Di,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:w,onChange:H=>E(H.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[o.jsx("option",{value:"All Categories",children:"All Categories"}),QR.map(H=>o.jsx("option",{value:H,children:H},H))]}),o.jsx(Di,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(G).map(([H,ee])=>o.jsxs("div",{className:"mb-6 last:mb-0",children:[o.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[o.jsx("button",{onClick:()=>{const te=new Set(I);te.has(H)?te.delete(H):te.add(H),C(te)},className:"text-gray-400 hover:text-white transition",children:I.has(H)?o.jsx(Di,{className:"w-4 h-4"}):o.jsx(Pd,{className:"w-4 h-4"})}),o.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:H}),o.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!I.has(H)&&o.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:ee.map(te=>o.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${te.status===kl.ARCHIVED?"bg-white/2 border-white/5 opacity-60":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[o.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${te.status===kl.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:vde[te.category||"Supplemental"]}),o.jsxs("div",{className:"truncate flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:te.title}),o.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:te.classType})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:te.description})]})]}),o.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[o.jsx("button",{onClick:()=>P(te),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:o.jsx(Vo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a==null?void 0:a(te.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:o.jsx(ele,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>ne(te),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:o.jsx(ale,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>de(te),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:te.status===kl.ACTIVE?o.jsx(Aoe,{className:"w-4 h-4"}):o.jsx(Hh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:async()=>{await c({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await De.deleteAssignment(te.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:o.jsx(la,{className:"w-4 h-4"})})]})]},te.id))})]},H))})]}),o.jsx("div",{className:"lg:col-span-4",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[o.jsx(js,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),o.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[me.length===0&&o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[o.jsx(js,{className:"w-10 h-10 text-gray-700 mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),me.map(H=>o.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:H.userName}),o.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:H.assignmentTitle})]}),o.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(H.score)," XP"]})]}),o.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[o.jsxs("span",{children:[Math.round(H.metrics.engagementTime/60),"m active"]}),o.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(H.submittedAt||"").toLocaleDateString()})]})]},H.id))]})]})})]}),o.jsx(Ti,{isOpen:d,onClose:()=>h(!1),title:p?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:o.jsxs("form",{onSubmit:X,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),o.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:R.title,onChange:H=>N({...R,title:H.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),o.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:R.unit,onChange:H=>N({...R,unit:H.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),o.jsx("select",{value:R.category,onChange:H=>N({...R,category:H.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:QR.map(H=>o.jsx("option",{value:H,children:H},H))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:K.filter(H=>H!=="All Classes").map(H=>o.jsx("button",{type:"button",onClick:()=>{const ee=new Set(A);ee.has(H)?ee.size>1&&ee.delete(H):ee.add(H),j(ee)},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${A.has(H)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:H},H))})]}),o.jsx(Jm,{availableSections:i,selectedSections:$,onChange:B}),o.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[o.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),o.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async H=>{var ee;if((ee=H.target.files)!=null&&ee[0]){z(!0);try{const te=await De.uploadHtmlResource(H.target.files[0]);N({...R,contentUrl:te}),s.success("File uploaded!")}catch(te){s.error("Upload failed: "+(te instanceof Error?te.message:"Unknown error"))}finally{z(!1)}}}}),F&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[o.jsx(Ss,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!F&&R.contentUrl&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[o.jsx(Nx,{className:"w-4 h-4"})," Resource uploaded"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",o.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),o.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:R.description,onChange:H=>N({...R,description:H.target.value})})]}),o.jsx("button",{type:"submit",disabled:y,className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2",children:y?o.jsx(Ss,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})}),L&&o.jsx(yde,{assignment:L,isOpen:!!L,onClose:()=>P(null)})]})},pG=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),o.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),o.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),o.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),o.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:o.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),o.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),o.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),o.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),o.jsxs("g",{filter:"url(#b-glow)",children:[o.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),o.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),o.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),o.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),o.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),o.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),o.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),o.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),o.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),o.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>o.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[o.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),bde=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),o.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),o.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:o.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),o.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>o.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[o.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),o.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),o.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),o.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),o.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),o.jsxs("g",{filter:"url(#p-glow)",children:[o.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[o.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),o.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[o.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),o.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),o.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),o.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),o.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[o.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return o.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[o.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),wde=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),o.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),o.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),o.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),o.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:o.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),o.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),o.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),o.jsxs("g",{filter:"url(#s-glow)",children:[o.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),o.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),o.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),o.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),o.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),o.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),o.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),o.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),o.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),o.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),o.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>o.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),o.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>o.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[o.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),Sde={BRUTE:pG,PHANTOM:bde,SERPENT:wde},mG=({bossType:t,hue:e,size:r})=>{const n=Sde[t]||pG;return o.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:o.jsx(n,{hue:e})})},_de=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Tde=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,s]=O.useState(null),c=O.useMemo(()=>{var x;if(!t)return[];const y=Object.keys(((x=t.gamification)==null?void 0:x.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=O.useMemo(()=>{var x,T;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((x=t.gamification)==null?void 0:x.inventory)||[],equipped:((T=t.gamification)==null?void 0:T.equipped)||{}};const y=Yd(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?o.jsx(Ti,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[o.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),o.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),o.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:o.jsx(Ii,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:o.jsx(Pa,{className:"w-4 h-4"})})]})]})]}),c.length>1&&o.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>o.jsx("button",{onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),o.jsxs("div",{className:"border-b border-white/5 pb-6",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&o.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:_de.map(y=>{var T;const x=(T=h.equipped)==null?void 0:T[y];return o.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${x?oa(x.rarity).border+" "+oa(x.rarity).bg:"border-white/10 bg-black/20"}`,children:x?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:x.name}),o.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:o.jsx(Pa,{className:"w-3 h-3"})})]}):o.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),o.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,x)=>o.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${oa(y.rarity).border}`,children:[o.jsx("div",{className:`text-[8px] font-bold ${oa(y.rarity).text} text-center truncate w-full`,children:y.name}),o.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),o.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:o.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:o.jsx(la,{className:"w-4 h-4"})})})]},x)),h.inventory.length===0&&o.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},Ade=[10,50,100,-10,-50,-100],Nde=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,a]=O.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return o.jsx(Ti,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[o.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),o.jsx("p",{className:"text-xs text-gray-500",children:t.email}),o.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ade.map(c=>o.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),o.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),o.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},Ede=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&o.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return o.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),o.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[o.jsx(Ao,{className:"w-3 h-3"}),n.quest.title]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[o.jsxs("div",{className:"text-center md:text-right",children:[o.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),o.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[o.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),o.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&o.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:o.jsx(Poe,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),o.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),o.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:o.jsx(ou,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:o.jsx(Pa,{className:"w-5 h-5"})})]})]})]})]},a)})]}),XR={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},jde=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,isSubmitting:i,availableSections:s=[]})=>{const c=r.type==="SKILL_CHECK";return o.jsx(Ti,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:o.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),o.jsx("input",{value:r.title,onChange:d=>n({...r,title:d.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),o.jsx("textarea",{value:r.description,onChange:d=>n({...r,description:d.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),o.jsxs("select",{value:r.type,onChange:d=>n({...r,type:d.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),o.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),o.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),o.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),o.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),o.jsxs("select",{value:r.targetClass,onChange:d=>n({...r,targetClass:d.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"",children:"All Classes"}),Object.values(Pr).filter(d=>d!=="Uncategorized").map(d=>o.jsx("option",{value:d,children:d},d))]})]})]}),o.jsx(Jm,{availableSections:s,selectedSections:r.targetSections,onChange:d=>n({...r,targetSections:d})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",o.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),o.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:d=>n({...r,startsAt:d.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",o.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),o.jsx("input",{type:"number",value:r.durationHours||"",onChange:d=>n({...r,durationHours:parseInt(d.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[o.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),o.jsx("input",{type:"number",value:r.xpReward,onChange:d=>n({...r,xpReward:parseInt(d.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),o.jsx("input",{type:"number",value:r.fluxReward,onChange:d=>n({...r,fluxReward:parseInt(d.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),o.jsxs("select",{value:r.lootRarity,onChange:d=>n({...r,lootRarity:d.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"COMMON",children:"Common"}),o.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),o.jsx("option",{value:"RARE",children:"Rare"}),o.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:d=>n({...r,isGroup:d.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),c&&o.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[o.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),o.jsx("input",{type:"number",value:r.techReq||"",onChange:d=>n({...r,techReq:parseInt(d.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),o.jsx("input",{type:"number",value:r.focusReq||"",onChange:d=>n({...r,focusReq:parseInt(d.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),o.jsx("input",{type:"number",value:r.analysisReq||"",onChange:d=>n({...r,analysisReq:parseInt(d.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),o.jsx("input",{type:"number",value:r.charismaReq||"",onChange:d=>n({...r,charismaReq:parseInt(d.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),o.jsx("input",{type:"number",value:r.dieSides,onChange:d=>n({...r,dieSides:parseInt(d.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),o.jsx("input",{type:"text",value:r.consequence,onChange:d=>n({...r,consequence:d.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),o.jsx("button",{type:"submit",disabled:i,className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:i?"Transmitting...":"Broadcast Mission"})]})})},kde=({users:t})=>{const e=pi(),{confirm:r}=al(),[n,a]=O.useState("OPERATIVES"),[i,s]=O.useState(""),[c,d]=O.useState("All Classes"),[h,p]=O.useState("All Sections"),[m,y]=O.useState("xp"),[x,T]=O.useState("desc"),_=q=>{m===q?T(ge=>ge==="asc"?"desc":"asc"):(y(q),T("asc"))},w=({label:q,col:ge,className:Ae})=>o.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Ae??""}`,onClick:()=>_(ge),children:o.jsxs("div",{className:`flex items-center gap-1 ${Ae!=null&&Ae.includes("text-center")?"justify-center":Ae!=null&&Ae.includes("text-right")?"justify-end":"justify-start"}`,children:[o.jsx("span",{children:q}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(w2,{className:`w-2.5 h-2.5 -mb-0.5 ${m===ge&&x==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Di,{className:`w-2.5 h-2.5 -mt-0.5 ${m===ge&&x==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[E,I]=O.useState([]),[C,L]=O.useState([]),[P,R]=O.useState(null),[N,A]=O.useState(null),[j,$]=O.useState(!1),[B,F]=O.useState(!1),[z,K]=O.useState(XR),[Q,G]=O.useState(!1),[X,ne]=O.useState([]),[de,me]=O.useState(null),[H,ee]=O.useState(""),[te,Oe]=O.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Pr.AP_PHYSICS,targetSections:[]}),[re,ce]=O.useState([]),[he,Ie]=O.useState(!1),[Se,We]=O.useState(null),[Me,_e]=O.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[gt,et]=O.useState(!1),pt=O.useRef(null),[st,xe]=O.useState(null),[be,Be]=O.useState([]),[Ye,ht]=O.useState("bosses"),[Ze,yt]=O.useState(!1),[Rt,Bt]=O.useState(null),[Tt,bt]=O.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Zt=O.useRef(null),[tn,rn]=O.useState(null),[ln,ye]=O.useState([]),[it,At]=O.useState(null),[jt,Pt]=O.useState([]),[ct,gr]=O.useState(!1),[wn,Rn]=O.useState("pending"),[kr,dr]=O.useState([]);O.useEffect(()=>{const q=De.subscribeToXPEvents(I),ge=De.subscribeToQuests(L),Ae=De.subscribeToAllBossQuizzes(ce),Ce=De.subscribeToAllTutoringSessions(dr),ut=De.subscribeToBossQuestionBanks(Be);return()=>{q(),ge(),Ae(),Ce(),ut()}},[]),O.useEffect(()=>{const q=[];t.forEach(ge=>{var Ae,Ce;(Ce=(Ae=ge.gamification)==null?void 0:Ae.activeQuests)==null||Ce.forEach(ut=>{const Dt=C.find(qt=>qt.id===ut.questId);Dt&&(ut.status==="DEPLOYED"||ut.status==="ACCEPTED")&&q.push({user:ge,quest:Dt,status:ut.status,roll:ut.deploymentRoll,acceptedAt:ut.acceptedAt})})}),ne(q)},[t,C,n]);const Nt=O.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),wt=O.useMemo(()=>{const q=new Set;return Nt.forEach(ge=>{ge.section&&q.add(ge.section)}),Array.from(q).sort()},[Nt]),sr=q=>{var Ae,Ce;const ge=(Ae=q.gamification)==null?void 0:Ae.classProfiles;return ge&&Object.keys(ge).length>0?Object.values(ge).reduce((ut,Dt)=>ut+Qh(Dt.equipped),0):Qh((Ce=q.gamification)==null?void 0:Ce.equipped)},Qr=O.useMemo(()=>Nt.filter(q=>{var ut;const ge=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Ae=c==="All Classes"||q.classType===c||((ut=q.enrolledClasses)==null?void 0:ut.includes(c)),Ce=h==="All Sections"||q.section===h;return ge&&Ae&&Ce}).sort((q,ge)=>{var Ae,Ce,ut,Dt,qt,tr;switch(m){case"name":return x==="asc"?q.name.localeCompare(ge.name):ge.name.localeCompare(q.name);case"class":return x==="asc"?(q.classType||"").localeCompare(ge.classType||""):(ge.classType||"").localeCompare(q.classType||"");case"level":{const Qt=((Ae=q.gamification)==null?void 0:Ae.level)||1,$t=((Ce=ge.gamification)==null?void 0:Ce.level)||1;return x==="asc"?Qt-$t:$t-Qt}case"flux":{const Qt=((ut=q.gamification)==null?void 0:ut.currency)||0,$t=((Dt=ge.gamification)==null?void 0:Dt.currency)||0;return x==="asc"?Qt-$t:$t-Qt}case"gear":{const Qt=sr(q),$t=sr(ge);return x==="asc"?Qt-$t:$t-Qt}case"xp":default:{const Qt=((qt=q.gamification)==null?void 0:qt.xp)||0,$t=((tr=ge.gamification)==null?void 0:tr.xp)||0;return x==="asc"?Qt-$t:$t-Qt}}}),[Nt,i,c,h,m,x]),Mr=async(q,ge)=>{try{await De.adjustUserXP(q.id,ge,q.classType||Pr.UNCATEGORIZED),e.success(`${ge>0?"+":""}${ge} XP applied to ${q.name}.`)}catch{e.error("Failed to adjust XP.")}R(null)},Xr=async q=>{q.preventDefault();const ge={id:Math.random().toString(36).substring(2,9),title:te.title,multiplier:te.multiplier,isActive:!0,type:te.type};te.type==="CLASS_SPECIFIC"&&(ge.targetClass=te.targetClass),te.targetSections.length>0&&(ge.targetSections=te.targetSections),await De.saveXPEvent(ge),$(!1),Oe({title:"",multiplier:2,type:"GLOBAL",targetClass:Pr.AP_PHYSICS,targetSections:[]})},Mn=async q=>{q.preventDefault(),G(!0);try{const ge={};z.techReq>0&&(ge.tech=z.techReq),z.focusReq>0&&(ge.focus=z.focusReq),z.analysisReq>0&&(ge.analysis=z.analysisReq),z.charismaReq>0&&(ge.charisma=z.charismaReq);const Ae=new Date;Ae.setHours(Ae.getHours()+(z.durationHours||0));const Ce={id:Math.random().toString(36).substring(2,9),title:z.title,description:z.description,xpReward:z.xpReward,fluxReward:z.fluxReward,isActive:!0,type:z.type,statRequirements:ge,startsAt:z.startsAt?new Date(z.startsAt).toISOString():null,expiresAt:z.durationHours>0?Ae.toISOString():null,itemRewardRarity:z.lootRarity||null,rollDieSides:z.dieSides||20,consequenceText:z.consequence||null,isGroupQuest:z.isGroup,targetClass:z.targetClass||void 0,targetSections:z.targetSections.length>0?z.targetSections:void 0};await De.saveQuest(Ce),e.success(`Mission "${Ce.title}" deployed.`),K(XR),F(!1)}catch(ge){console.error("Failed to issue mission:",ge),e.error("Failed to issue mission.")}finally{G(!1)}},Jt=async q=>{await De.saveXPEvent({...q,isActive:!q.isActive})},pa=async q=>{const ge={...q,isActive:!q.isActive};ge.isActive&&(ge.expiresAt=null),await De.saveQuest(ge)},cn=async(q,ge,Ae)=>{var Dt,qt;if(!await r({message:`Confiscate ${ge.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const ut=(Ae?Yd(q,Ae):{inventory:((Dt=q.gamification)==null?void 0:Dt.inventory)||[]}).inventory.filter(tr=>tr.id!==ge.id);await De.adminUpdateInventory(q.id,ut,((qt=q.gamification)==null?void 0:qt.currency)||0,Ae),A(tr=>{var Qt,$t;return tr?Ae&&(($t=(Qt=tr.gamification)==null?void 0:Qt.classProfiles)!=null&&$t[Ae])?{...tr,gamification:{...tr.gamification,classProfiles:{...tr.gamification.classProfiles,[Ae]:{...tr.gamification.classProfiles[Ae],inventory:ut}}}}:{...tr,gamification:{...tr.gamification,inventory:ut}}:null})},En=async(q,ge,Ae)=>{var Dt;if(!await r({message:`Force unequip ${ge} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const ut={...(Ae?Yd(q,Ae):{equipped:{...(Dt=q.gamification)==null?void 0:Dt.equipped}}).equipped};delete ut[ge],await De.adminUpdateEquipped(q.id,ut,Ae),A(qt=>{var tr,Qt;return qt?Ae&&((Qt=(tr=qt.gamification)==null?void 0:tr.classProfiles)!=null&&Qt[Ae])?{...qt,gamification:{...qt.gamification,classProfiles:{...qt.gamification.classProfiles,[Ae]:{...qt.gamification.classProfiles[Ae],equipped:ut}}}}:{...qt,gamification:{...qt.gamification,equipped:ut}}:null})},ti=async(q,ge)=>{var Ce,ut;const Ae=Math.max(0,(((Ce=q.gamification)==null?void 0:Ce.currency)||0)+ge);await De.adminUpdateInventory(q.id,((ut=q.gamification)==null?void 0:ut.inventory)||[],Ae),A(Dt=>Dt?{...Dt,gamification:{...Dt.gamification,currency:Ae}}:null)},wr=async(q,ge,Ae,Ce)=>{try{await De.resolveQuest(q,ge,Ae,Ce),e.success(Ae?`Mission "${ge.title}" approved.`:`Mission "${ge.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},un=async q=>{const ge=q.quest.rollDieSides||20,Ae=Math.floor(Math.random()*ge)+1;e.info(`Rolled a ${Ae} on a D${ge}. ${Ae===ge?"CRITICAL SUCCESS!":"Failure confirmed."}`),await wr(q.user.id,q.quest,Ae===ge,q.user.classType)},Va=async q=>{try{await De.updateCodename(q,H.trim().slice(0,24)),e.success("Code name updated.")}catch{e.error("Failed to update code name.")}me(null)},Qn=async(q,ge)=>{try{await De.toggleCodenameLock(q,ge),e.success(ge?"Codename locked.":"Codename unlocked.")}catch{e.error("Failed to update lock.")}},Fr=q=>{var ge,Ae,Ce,ut,Dt;if(q)We(q),_e({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((ge=q.rewards)==null?void 0:ge.xp)||500,rewardFlux:((Ae=q.rewards)==null?void 0:Ae.flux)||100,rewardItemRarity:((Ce=q.rewards)==null?void 0:Ce.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(qt=>({...qt,damageBonus:qt.damageBonus||0})),targetSections:q.targetSections||[],bossType:((ut=q.bossAppearance)==null?void 0:ut.bossType)||"BRUTE",bossHue:((Dt=q.bossAppearance)==null?void 0:Dt.hue)??0}),ye(q.modifiers||[]);else{We(null);const qt=new Date;qt.setDate(qt.getDate()+7),_e({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:qt.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),ye([])}Ie(!0)},Sn=()=>{_e(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},Yr=(q,ge,Ae)=>{_e(Ce=>{const ut=[...Ce.questions];return ut[q]={...ut[q],[ge]:Ae},{...Ce,questions:ut}})},mi=(q,ge,Ae)=>{_e(Ce=>{const ut=[...Ce.questions],Dt=[...ut[q].options];return Dt[ge]=Ae,ut[q]={...ut[q],options:Dt},{...Ce,questions:ut}})},Fa=q=>{_e(ge=>({...ge,questions:ge.questions.filter((Ae,Ce)=>Ce!==q)}))},Os=async q=>{if(q.preventDefault(),Me.questions.length===0){e.error("Add at least one question.");return}try{const ge=[...new Set(Me.questions.map(Ce=>Ce.bankId).filter(Boolean))],Ae={id:(Se==null?void 0:Se.id)||Math.random().toString(36).substring(2,12),bossName:Me.bossName,description:Me.description,maxHp:Me.maxHp,currentHp:(Se==null?void 0:Se.currentHp)??Me.maxHp,classType:Me.classType,isActive:(Se==null?void 0:Se.isActive)??!0,deadline:new Date(Me.deadline).toISOString(),damagePerCorrect:Me.damagePerCorrect,questions:Me.questions.map(Ce=>({id:Ce.id,stem:Ce.stem,options:Ce.options.filter(ut=>ut.trim()),correctAnswer:Ce.correctAnswer,difficulty:Ce.difficulty,...Ce.damageBonus>0?{damageBonus:Ce.damageBonus}:{},...Ce.bankId?{bankId:Ce.bankId}:{}})),rewards:{xp:Me.rewardXp,flux:Me.rewardFlux,...Me.rewardItemRarity?{itemRarity:Me.rewardItemRarity}:{}},...Me.targetSections.length>0?{targetSections:Me.targetSections}:{},bossAppearance:{bossType:Me.bossType,hue:Me.bossHue},...ln.length>0?{modifiers:ln}:{},...ge.length>0?{questionBankIds:ge}:{}};await De.saveBossQuiz(Ae),e.success(Se?"Quiz boss updated.":"Quiz boss deployed!"),Ie(!1)}catch{e.error("Failed to save quiz boss.")}},is=async q=>{await De.toggleBossQuizActive(q.id,!q.isActive)},gi=async q=>{await r({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await De.deleteBossQuiz(q.id),e.success("Quiz boss deleted."))},St=q=>{q?(Bt(q),bt({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(ge=>({...ge,damageBonus:ge.damageBonus||0}))})):(Bt(null),bt({name:"",classType:"GLOBAL",description:"",questions:[]})),rn(null),yt(!0)},ue=async q=>{if(q.preventDefault(),Tt.questions.length===0){e.error("Add at least one question.");return}try{const ge=new Date().toISOString(),Ae={id:(Rt==null?void 0:Rt.id)||Math.random().toString(36).substring(2,12),name:Tt.name,classType:Tt.classType,description:Tt.description,questions:Tt.questions.map(Ce=>({id:Ce.id,stem:Ce.stem,options:Ce.options.filter(ut=>ut.trim()),correctAnswer:Ce.correctAnswer,difficulty:Ce.difficulty,...Ce.damageBonus>0?{damageBonus:Ce.damageBonus}:{}})),createdAt:(Rt==null?void 0:Rt.createdAt)||ge,updatedAt:ge};await De.saveBossQuestionBank(Ae),e.success(Rt?"Question bank updated.":"Question bank created!"),yt(!1)}catch{e.error("Failed to save question bank.")}},Ke=async q=>{await r({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await De.deleteBossQuestionBank(q.id),e.success("Question bank deleted."))},ot=async(q,ge)=>{var ut;const Ae=(ut=q.target.files)==null?void 0:ut[0];if(!Ae)return;const Ce=ge==="bank"?rn:xe;Ce(null);try{let qt=(await Ae.text()).replace(/```json\s*|```\s*/g,"").trim();qt=qt.replace(/[\x00-\x1F\x7F]/g,or=>or===`
`||or==="\r"||or==="	"?" ":"");let tr;try{tr=JSON.parse(qt)}catch{const or=qt.match(/\[[\s\S]*\]/);if(or)try{tr=JSON.parse(or[0])}catch{let oe=null;for(let ve=or[0].length-1;ve>0;ve--)if(or[0][ve]==="}")try{oe=JSON.parse(or[0].slice(0,ve+1)+"]");break}catch{}if(oe)tr=oe;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(tr)||tr.length===0)throw new Error("Must be a non-empty JSON array.");const Qt=tr.filter(or=>or.stem&&or.options&&or.correctAnswer!==void 0);if(Qt.length===0)throw new Error("No valid questions found.");const $t=Qt.map(or=>({id:or.id||Math.random().toString(36).substring(2,10),stem:or.stem,options:or.options.slice(0,4),correctAnswer:typeof or.correctAnswer=="number"?or.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(or.difficulty)?or.difficulty:"MEDIUM",damageBonus:typeof or.damageBonus=="number"?or.damageBonus:0})),ri=tr.length-Qt.length;ge==="bank"?bt(or=>({...or,questions:[...or.questions,...$t]})):_e(or=>({...or,questions:[...or.questions,...$t]})),e.success(`Imported ${$t.length} questions${ri>0?` (${ri} skipped)`:""}`)}catch(Dt){Ce(Dt instanceof Error?Dt.message:"Import failed."),e.error("Failed to import questions.")}ge==="bank"&&Zt.current&&(Zt.current.value=""),ge==="boss"&&pt.current&&(pt.current.value="")},Kt=q=>{const ge=q.questions.map(Ae=>({...Ae,damageBonus:Ae.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));_e(Ae=>({...Ae,questions:[...Ae.questions,...ge]})),e.success(`Imported ${ge.length} questions from "${q.name}"`)},hr=q=>{ye(ge=>{if(ge.find(ut=>ut.type===q))return ge.filter(ut=>ut.type!==q);const Ce=DT[q];return[...ge,{type:q,...Ce.hasValue?{value:Ce.defaultValue}:{}}]})},dn=(q,ge)=>{ye(Ae=>Ae.map(Ce=>Ce.type===q?{...Ce,value:ge}:Ce))},qr=async q=>{At(q),gr(!0);try{const ge=await De.getBossQuizAllProgress(q.id);Pt(ge)}catch{e.error("Failed to load endgame data.")}gr(!1)},hn=(q,ge)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${ge||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,Cr=()=>{const q=hn(Me.bossName,Me.classType);navigator.clipboard.writeText(q),et(!0),setTimeout(()=>et(!1),2500),e.success("Prompt copied to clipboard!")},Is=q=>ot(q,"boss"),ss=async(q,ge)=>{try{const Ae=await De.completeTutoring(q,ge);e.success(`Verified! Tutor earned ${Ae.xpAwarded} XP and ${Ae.fluxAwarded} Flux`)}catch{e.error("Failed to verify session")}},ao=async q=>{if(await r({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await De.cancelTutoringSession(q),e.success("Session cancelled.")}catch{e.error("Failed to cancel session")}},io=kr.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),qa=({id:q,label:ge,icon:Ae})=>o.jsxs("button",{onClick:()=>a(q),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===q?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[o.jsx(Ae,{className:"w-4 h-4"}),ge]});return o.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),o.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),o.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&o.jsxs("button",{onClick:()=>$(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[o.jsx(ile,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&o.jsxs("button",{onClick:()=>F(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[o.jsx(koe,{className:"w-4 h-4"})," Issue Mission"]}),n==="BOSS_OPS"&&o.jsxs("button",{onClick:()=>Fr(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[o.jsx(Vo,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[o.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[o.jsx(qa,{id:"OPERATIVES",label:"Operatives",icon:To}),o.jsx(qa,{id:"PROTOCOLS",label:"XP Protocols",icon:Ba}),o.jsx(qa,{id:"MISSIONS",label:"Missions",icon:Ao}),o.jsx(qa,{id:"MISSION_CONTROL",label:"Mission Control",icon:Ax}),o.jsx(qa,{id:"BOSS_OPS",label:"Boss Ops",icon:Vo}),o.jsx(qa,{id:"TUTORING",label:"Tutoring",icon:Au})]}),o.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(sH,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>s(q.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[Qr.length," operatives"]}),o.jsxs("div",{className:"relative",children:[o.jsx(Uoe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),o.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{children:"All Classes"}),Object.values(Pr).map(q=>o.jsx("option",{value:q,children:q},q))]}),o.jsx(Di,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),wt.length>0&&o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{children:"All Sections"}),wt.map(q=>o.jsx("option",{value:q,children:q},q))]}),o.jsx(Di,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[o.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),o.jsx(w,{label:"Class",col:"class"}),o.jsx(w,{label:"Level",col:"level",className:"text-center"}),o.jsx(w,{label:"XP",col:"xp",className:"text-center"}),o.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),o.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),o.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:Qr.map(q=>{var ut,Dt,qt,tr,Qt,$t,ri,or;const ge=((ut=q.gamification)==null?void 0:ut.level)||1,Ae=((Dt=q.gamification)==null?void 0:Dt.currency)||0,Ce=q.enrolledClasses||(q.classType?[q.classType]:[]);return o.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[o.jsx("td",{className:"py-3 pl-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),de===q.id?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{autoFocus:!0,value:H,onChange:oe=>ee(oe.target.value),maxLength:24,onKeyDown:oe=>{oe.key==="Enter"&&Va(q.id),oe.key==="Escape"&&me(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),o.jsx("button",{onClick:()=>Va(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:o.jsx(ou,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>me(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:o.jsx(Pa,{className:"w-3 h-3"})})]}):o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("button",{onClick:()=>{var oe;me(q.id),ee(((oe=q.gamification)==null?void 0:oe.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((qt=q.gamification)==null?void 0:qt.codename)||"UNASSIGNED",o.jsx(W5,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),o.jsx("button",{onClick:()=>{var oe;return Qn(q.id,!((oe=q.gamification)!=null&&oe.codenameLocked))},className:`transition ${(tr=q.gamification)!=null&&tr.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Qt=q.gamification)!=null&&Qt.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:($t=q.gamification)!=null&&$t.codenameLocked?o.jsx(Gh,{className:"w-2.5 h-2.5"}):o.jsx(Koe,{className:"w-2.5 h-2.5"})})]})]})]})}),o.jsx("td",{className:"py-3",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:Ce.map(oe=>o.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:oe},oe))})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-lg font-black text-white",children:ge})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-gray-300",children:((or=(ri=q.gamification)==null?void 0:ri.xp)==null?void 0:or.toLocaleString())||0})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Ae})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-yellow-400",children:sr(q)})}),o.jsx("td",{className:"py-3 text-right pr-4",children:o.jsxs("div",{className:"flex justify-end gap-1.5",children:[o.jsxs("button",{onClick:()=>A(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Ax,{className:"w-3 h-3"})," Inventory"]}),o.jsxs("button",{onClick:()=>R(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Ii,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),n==="PROTOCOLS"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[E.map(q=>o.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&o.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:o.jsx(Ba,{className:"w-6 h-6"})}),o.jsx("button",{onClick:()=>De.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(la,{className:"w-4 h-4"})})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),o.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[o.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),o.jsx("button",{onClick:()=>Jt(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),o.jsxs("button",{onClick:()=>$(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:o.jsx(Ii,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&o.jsx("div",{className:"space-y-4",children:C.map(q=>o.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:o.jsx(Jl,{className:"w-7 h-7"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),o.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&o.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([ge,Ae])=>o.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ae," ",ge]},ge))}),o.jsxs("div",{className:"flex gap-3 mt-2",children:[o.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),o.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&o.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("button",{onClick:()=>pa(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:o.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),o.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),o.jsx("button",{onClick:()=>De.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(la,{className:"w-4 h-4"})})]})]},q.id))}),n==="MISSION_CONTROL"&&o.jsx(Ede,{deployments:X,onResolveQuest:wr,onRollForSalvation:un}),n==="BOSS_OPS"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsxs("button",{onClick:()=>ht("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Ye==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(D7,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",re.length,")"]}),o.jsxs("button",{onClick:()=>ht("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Ye==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_h,{className:"w-3 h-3 inline mr-1"})," Question Banks (",be.length,")"]})]}),Ye==="bosses"&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),re.length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(Vo,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),o.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),re.map(q=>{var ut,Dt;const ge=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Ae=new Date(q.deadline)<new Date,Ce=(q.currentHp??q.maxHp)<=0||!q.isActive;return o.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Ae?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Ae?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:o.jsx(Vo,{className:"w-7 h-7"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[o.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),o.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),o.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(ut=q.modifiers)!=null&&ut.length?o.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(Dt=q.targetSections)!=null&&Dt.length?o.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Ae&&o.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ce&&o.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),o.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:o.jsx("div",{className:`h-full rounded-full transition-all ${ge>50?"bg-amber-500":ge>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${ge}%`}})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ce&&o.jsxs("button",{onClick:()=>qr(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[o.jsx(Qq,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),o.jsxs("button",{onClick:()=>Fr(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[o.jsx(W5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),o.jsx("button",{onClick:()=>is(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:o.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),o.jsx("button",{onClick:()=>gi(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(la,{className:"w-4 h-4"})})]})]},q.id)})]}),Ye==="banks"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),o.jsxs("button",{onClick:()=>St(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[o.jsx(Ii,{className:"w-3 h-3"})," New Bank"]})]}),be.length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(_h,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:"No question banks yet."}),o.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),be.map(q=>o.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:o.jsx(_h,{className:"w-5 h-5 text-purple-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&o.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),o.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsxs("button",{onClick:()=>St(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[o.jsx(W5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),o.jsx("button",{onClick:()=>Ke(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(la,{className:"w-4 h-4"})})]})]},q.id))]})]}),n==="TUTORING"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsxs("button",{onClick:()=>Rn("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${wn==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",io.length,")"]}),o.jsxs("button",{onClick:()=>Rn("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${wn==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",kr.length,")"]})]}),(wn==="pending"?io:kr).length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(Au,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:wn==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(wn==="pending"?io:kr).map(q=>o.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Yoe,{className:"w-4 h-4 text-gray-500"}),o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),o.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[o.jsxs("span",{children:["Requester: ",o.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&o.jsxs("span",{children:["Tutor: ",o.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),o.jsxs("span",{children:["Class: ",o.jsx("span",{className:"text-purple-400",children:q.classType})]}),o.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&o.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&o.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),o.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),o.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&o.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),o.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),o.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&o.jsxs("button",{onClick:()=>ss(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Cn,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&o.jsxs("button",{onClick:()=>ao(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Pa,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&o.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[o.jsx(Cn,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})]}),o.jsx(Tde,{user:N,onClose:()=>A(null),onDeleteItem:cn,onUnequipItem:En,onGrantFlux:ti}),o.jsx(jde,{isOpen:B,onClose:()=>F(!1),form:z,setForm:K,onSubmit:Mn,isSubmitting:Q,availableSections:wt}),o.jsx(Ti,{isOpen:j,onClose:()=>$(!1),title:"New XP Protocol Deployment",children:o.jsxs("form",{onSubmit:Xr,className:"space-y-4 text-gray-100 p-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),o.jsx("input",{value:te.title,onChange:q=>Oe({...te,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),o.jsx("input",{type:"number",step:"0.5",value:te.multiplier,onChange:q=>Oe({...te,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),o.jsxs("select",{value:te.type,onChange:q=>Oe({...te,type:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[o.jsx("option",{value:"GLOBAL",children:"Global Node"}),o.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),te.type==="CLASS_SPECIFIC"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),o.jsx("select",{value:te.targetClass,onChange:q=>Oe({...te,targetClass:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Pr).map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsx(Jm,{availableSections:wt,selectedSections:te.targetSections,onChange:q=>Oe({...te,targetSections:q})}),o.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})}),o.jsx(Nde,{user:P,onClose:()=>R(null),onAdjust:Mr}),o.jsx(Ti,{isOpen:he,onClose:()=>Ie(!1),title:Se?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:o.jsxs("form",{onSubmit:Os,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),o.jsx("input",{value:Me.bossName,onChange:q=>_e({...Me,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),o.jsx("textarea",{value:Me.description,onChange:q=>_e({...Me,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:o.jsx(mG,{bossType:Me.bossType,hue:Me.bossHue})}),o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),o.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>o.jsx("button",{type:"button",onClick:()=>_e({...Me,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${Me.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",Me.bossHue,""]}),o.jsx("input",{type:"range",min:"0",max:"360",value:Me.bossHue,onChange:q=>_e({...Me,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),o.jsx("input",{type:"number",value:Me.maxHp,onChange:q=>_e({...Me,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),o.jsx("input",{type:"number",value:Me.damagePerCorrect,onChange:q=>_e({...Me,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),o.jsxs("select",{value:Me.classType,onChange:q=>_e({...Me,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Pr).map(q=>o.jsx("option",{value:q,children:q},q))]})]})]}),o.jsx(Jm,{availableSections:wt,selectedSections:Me.targetSections,onChange:q=>_e({...Me,targetSections:q})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),o.jsx("input",{type:"datetime-local",value:Me.deadline,onChange:q=>_e({...Me,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),o.jsx("input",{type:"number",value:Me.rewardXp,onChange:q=>_e({...Me,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),o.jsx("input",{type:"number",value:Me.rewardFlux,onChange:q=>_e({...Me,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),o.jsxs("select",{value:Me.rewardItemRarity,onChange:q=>_e({...Me,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),o.jsx("option",{value:"RARE",children:"Rare"}),o.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",ln.length," active)"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(DT).map(([q,ge])=>{const Ae=ln.find(Ce=>Ce.type===q);return o.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Ae?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[o.jsxs("button",{type:"button",onClick:()=>hr(q),className:"w-full text-left",children:[o.jsx("div",{className:"text-[10px] font-bold text-white",children:ge.name}),o.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:ge.description})]}),Ae&&ge.hasValue&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx("input",{type:"number",value:Ae.value??ge.defaultValue,onChange:Ce=>dn(q,parseInt(Ce.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),o.jsx("span",{className:"text-[9px] text-gray-500",children:ge.unit})]})]},q)})})]}),be.length>0&&o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:be.filter(q=>q.classType===Me.classType||q.classType==="GLOBAL"||Me.classType==="GLOBAL").map(q=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),o.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),o.jsxs("button",{type:"button",onClick:()=>Kt(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[o.jsx(Ii,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[o.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",Me.questions.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:Cr,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${gt?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:gt?o.jsxs(o.Fragment,{children:[o.jsx(ou,{className:"w-3 h-3"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(Ex,{className:"w-3 h-3"})," Copy AI Prompt"]})}),o.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[o.jsx(Xd,{className:"w-3 h-3"})," Import JSON",o.jsx("input",{ref:pt,type:"file",accept:".json,.txt",onChange:Is,className:"hidden"})]}),o.jsxs("button",{type:"button",onClick:Sn,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[o.jsx(Ii,{className:"w-3 h-3"})," Add Manual"]})]})]}),st&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[o.jsx(Pa,{className:"w-4 h-4 flex-shrink-0"}),st,o.jsx("button",{type:"button",onClick:()=>xe(null),className:"ml-auto text-red-500 hover:text-red-300",children:o.jsx(Pa,{className:"w-3 h-3"})})]}),Me.questions.length===0&&o.jsxs("div",{className:"text-center py-6 space-y-2",children:[o.jsx(jx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),o.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),o.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",o.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",o.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),Me.questions.map((q,ge)=>o.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",ge+1]}),o.jsx("textarea",{value:q.stem,onChange:Ae=>Yr(ge,"stem",Ae.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),o.jsx("button",{type:"button",onClick:()=>Fa(ge),className:"text-gray-600 hover:text-red-400 mt-4",children:o.jsx(la,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Ae,Ce)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>Yr(ge,"correctAnswer",Ce),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ce?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:o.jsx(ou,{className:"w-3 h-3"})}),o.jsx("input",{value:Ae,onChange:ut=>mi(ge,Ce,ut.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ce)}`,required:!0})]},Ce))}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("select",{value:q.difficulty,onChange:Ae=>Yr(ge,"difficulty",Ae.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[o.jsx("option",{value:"EASY",children:"Easy"}),o.jsx("option",{value:"MEDIUM",children:"Medium"}),o.jsx("option",{value:"HARD",children:"Hard"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),o.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>Yr(ge,"damageBonus",parseInt(Ae.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),o.jsx("button",{type:"submit",className:"w-full bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700",children:Se?"Update Quiz Boss":"Deploy Quiz Boss"})]})}),o.jsx(Ti,{isOpen:Ze,onClose:()=>yt(!1),title:Rt?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:o.jsxs("form",{onSubmit:ue,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),o.jsx("input",{value:Tt.name,onChange:q=>bt({...Tt,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),o.jsxs("select",{value:Tt.classType,onChange:q=>bt({...Tt,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Pr).map(q=>o.jsx("option",{value:q,children:q},q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),o.jsx("input",{value:Tt.description,onChange:q=>bt({...Tt,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[o.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",Tt.questions.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[o.jsx(Xd,{className:"w-3 h-3"})," Import JSON",o.jsx("input",{ref:Zt,type:"file",accept:".json,.txt",onChange:q=>ot(q,"bank"),className:"hidden"})]}),o.jsxs("button",{type:"button",onClick:()=>bt(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[o.jsx(Ii,{className:"w-3 h-3"})," Add Manual"]})]})]}),tn&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[o.jsx(Pa,{className:"w-4 h-4 flex-shrink-0"})," ",tn,o.jsx("button",{type:"button",onClick:()=>rn(null),className:"ml-auto text-red-500 hover:text-red-300",children:o.jsx(Pa,{className:"w-3 h-3"})})]}),Tt.questions.length===0&&o.jsxs("div",{className:"text-center py-6",children:[o.jsx(jx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),Tt.questions.map((q,ge)=>o.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("textarea",{value:q.stem,onChange:Ae=>{const Ce=[...Tt.questions];Ce[ge]={...Ce[ge],stem:Ae.target.value},bt({...Tt,questions:Ce})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${ge+1}`,required:!0})}),o.jsx("button",{type:"button",onClick:()=>bt(Ae=>({...Ae,questions:Ae.questions.filter((Ce,ut)=>ut!==ge)})),className:"text-gray-600 hover:text-red-400 mt-2",children:o.jsx(la,{className:"w-3.5 h-3.5"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Ae,Ce)=>o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("button",{type:"button",onClick:()=>{const ut=[...Tt.questions];ut[ge]={...ut[ge],correctAnswer:Ce},bt({...Tt,questions:ut})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ce?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:o.jsx(ou,{className:"w-2.5 h-2.5"})}),o.jsx("input",{value:Ae,onChange:ut=>{const Dt=[...Tt.questions],qt=[...Dt[ge].options];qt[Ce]=ut.target.value,Dt[ge]={...Dt[ge],options:qt},bt({...Tt,questions:Dt})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ce)}`,required:!0})]},Ce))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{value:q.difficulty,onChange:Ae=>{const Ce=[...Tt.questions];Ce[ge]={...Ce[ge],difficulty:Ae.target.value},bt({...Tt,questions:Ce})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[o.jsx("option",{value:"EASY",children:"Easy"}),o.jsx("option",{value:"MEDIUM",children:"Medium"}),o.jsx("option",{value:"HARD",children:"Hard"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),o.jsx("input",{type:"number",value:q.damageBonus,onChange:Ae=>{const Ce=[...Tt.questions];Ce[ge]={...Ce[ge],damageBonus:parseInt(Ae.target.value)||0},bt({...Tt,questions:Ce})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),o.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Rt?"Update Question Bank":"Create Question Bank"})]})}),o.jsx(Ti,{isOpen:!!it,onClose:()=>{At(null),Pt([])},title:it?`Endgame: ${it.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:ct?o.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):it&&o.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-white",children:jt.length}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-amber-400",children:jt.reduce((q,ge)=>{var Ae;return q+(((Ae=ge.combatStats)==null?void 0:Ae.totalDamageDealt)||0)},0).toLocaleString()}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-green-400",children:jt.reduce((q,ge)=>{var Ae;return q+(((Ae=ge.combatStats)==null?void 0:Ae.questionsCorrect)||0)},0)}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-red-400",children:jt.reduce((q,ge)=>{var Ae;return q+(((Ae=ge.combatStats)==null?void 0:Ae.criticalHits)||0)},0)}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[o.jsx(Yq,{className:"w-4 h-4"})," Top Damage Dealers"]}),o.jsx("div",{className:"space-y-2",children:[...jt].sort((q,ge)=>{var Ae,Ce;return(((Ae=ge.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((Ce=q.combatStats)==null?void 0:Ce.totalDamageDealt)||0)}).slice(0,5).map((q,ge)=>{var Qt;const Ae=t.find($t=>$t.id===q.userId),Ce=q.combatStats,ut=ge,Dt=ut<eO.length?eO[ut]:1,qt=((Ce==null?void 0:Ce.questionsAttempted)||0)>=Im&&((Ce==null?void 0:Ce.questionsCorrect)||0)>=Rm,tr=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${ge===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[o.jsxs("div",{className:`text-xl font-black w-8 text-center ${tr[ge]||"text-gray-500"}`,children:["#",ge+1]}),(Ae==null?void 0:Ae.avatarUrl)&&o.jsx("img",{src:Ae.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Ae==null?void 0:Ae.name)||q.userId}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[o.jsxs("span",{className:"text-amber-400 font-bold",children:[((Qt=Ce==null?void 0:Ce.totalDamageDealt)==null?void 0:Qt.toLocaleString())||0," dmg"]}),o.jsxs("span",{children:[(Ce==null?void 0:Ce.questionsCorrect)||0,"/",(Ce==null?void 0:Ce.questionsAttempted)||0," correct"]}),o.jsxs("span",{children:[(Ce==null?void 0:Ce.criticalHits)||0," crits"]}),o.jsxs("span",{children:["Streak: ",(Ce==null?void 0:Ce.longestStreak)||0]})]})]}),o.jsx("div",{className:"text-right flex-shrink-0",children:qt?o.jsxs("span",{className:`text-xs font-bold ${ge<5?tr[ge]:"text-gray-400"}`,children:[Dt,"x"]}):o.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[o.jsx(Hh,{className:"w-4 h-4"})," All Participants"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[o.jsx("th",{className:"pb-2 pl-2",children:"#"}),o.jsx("th",{className:"pb-2",children:"Student"}),o.jsx("th",{className:"pb-2 text-center",children:"Damage"}),o.jsx("th",{className:"pb-2 text-center",children:"Correct"}),o.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),o.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),o.jsx("th",{className:"pb-2 text-center",children:"Crits"}),o.jsx("th",{className:"pb-2 text-center",children:"Streak"}),o.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),o.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:[...jt].sort((q,ge)=>{var Ae,Ce;return(((Ae=ge.combatStats)==null?void 0:Ae.totalDamageDealt)||0)-(((Ce=q.combatStats)==null?void 0:Ce.totalDamageDealt)||0)}).map((q,ge)=>{const Ae=t.find(Qt=>Qt.id===q.userId),Ce=q.combatStats,ut=(Ce==null?void 0:Ce.questionsAttempted)||0,Dt=(Ce==null?void 0:Ce.questionsCorrect)||0,qt=ut>0?Math.round(Dt/ut*100):0,tr=ut>=Im&&Dt>=Rm;return o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:ge+1}),o.jsx("td",{className:"py-2 font-bold text-white",children:(Ae==null?void 0:Ae.name)||q.userId.slice(0,8)}),o.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ce==null?void 0:Ce.totalDamageDealt)||0).toLocaleString()}),o.jsx("td",{className:"py-2 text-center text-green-400",children:Dt}),o.jsx("td",{className:"py-2 text-center text-gray-400",children:ut}),o.jsxs("td",{className:"py-2 text-center text-gray-300",children:[qt,"%"]}),o.jsx("td",{className:"py-2 text-center text-red-400",children:(Ce==null?void 0:Ce.criticalHits)||0}),o.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ce==null?void 0:Ce.longestStreak)||0}),o.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ce==null?void 0:Ce.damageReduced)||0}),o.jsx("td",{className:"py-2 text-center",children:tr?o.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):o.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const ge=jt.reduce((qt,tr)=>{var Qt,$t;return qt+((($t=(Qt=tr.combatStats)==null?void 0:Qt.correctByDifficulty)==null?void 0:$t[q])||0)},0),Ae=jt.reduce((qt,tr)=>{var Qt,$t;return qt+((($t=(Qt=tr.combatStats)==null?void 0:Qt.incorrectByDifficulty)==null?void 0:$t[q])||0)},0),Ce=ge+Ae,ut=Ce>0?Math.round(ge/Ce*100):0,Dt=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return o.jsxs("div",{className:`bg-${Dt}-500/5 border border-${Dt}-500/20 rounded-xl p-3 text-center`,children:[o.jsx("div",{className:`text-[10px] font-bold text-${Dt}-400 uppercase mb-1`,children:q}),o.jsxs("div",{className:"text-lg font-black text-white",children:[ut,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[ge,"/",Ce," correct"]})]},q)})})]})]})})]})},Cde={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:o.jsx(rH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:o.jsx(Xq,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:o.jsx(N2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},Ode=({onToggleChat:t})=>{const[e,r]=O.useState(null),[n,a]=O.useState(!1),i=c=>{e===c?r(null):(r(c),a(!1))};if(!e)return o.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[o.jsxs("button",{onClick:()=>i("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[o.jsx(N2,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),o.jsxs("button",{onClick:()=>i("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[o.jsx(Xq,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),o.jsxs("button",{onClick:()=>i("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[o.jsx(rH,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&o.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[o.jsx(bA,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const s=Cde[e];return o.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${n?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[o.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-1.5 rounded-lg ${s.iconBg} ${s.iconText}`,children:s.icon}),o.jsx("span",{className:"font-bold text-white text-sm",children:s.label})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>a(!n),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:n?o.jsx(xA,{className:"w-4 h-4"}):o.jsx(eH,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:o.jsx(Pa,{className:"w-4 h-4"})})]})]}),!n&&o.jsx("div",{className:"flex-1 bg-white relative",children:o.jsx("iframe",{src:s.src,className:"w-full h-full border-none",title:s.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},Ide=["","","","","","","",""],Rde=["","","","","","","","","","","","","","","","","","","","","","","","","",""],Mde=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,onOpenResource:i})=>{var pt,st;const{confirm:s}=al(),[c,d]=O.useState([]),[h,p]=O.useState(""),[m,y]=O.useState("Main"),[x,T]=O.useState(!1),[_,w]=O.useState(!1),[E,I]=O.useState(null),[C,L]=O.useState(null),[P,R]=O.useState([]),[N,A]=O.useState([]),[j,$]=O.useState(null),[B,F]=O.useState([]),[z,K]=O.useState(null),Q=O.useRef(null),G=O.useRef(null),X=O.useRef(null),ne=O.useMemo(()=>Object.values(Pr).filter(xe=>{var ht;if(xe===Pr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const be=a.find(Ze=>Ze.className===xe),Be=(ht=t.enrolledClasses)==null?void 0:ht.includes(xe),Ye=be?be.features.communications:!0;return Be&&Ye}),[a,t.role,t.enrolledClasses]),[de,me]=O.useState(ne[0]||"");O.useEffect(()=>{(!de||!ne.includes(de))&&ne.length>0&&me(ne[0])},[ne]);const H=O.useMemo(()=>m==="Resources"&&C?`res_${C}`:m==="Resources"&&!C?"":m==="Groups"&&j?`group_${j}`:m==="Groups"&&!j||!de?"":`class_${de.replace(/\s+/g,"_").toLowerCase()}`,[de,m,C,j]),ee=O.useRef(null),te=O.useMemo(()=>n.filter(xe=>xe.classType===de&&xe.status!=="DRAFT"),[n,de]),Oe=O.useMemo(()=>c.filter(xe=>{var be;return xe.isGlobalPinned||((be=xe.pinnedBy)==null?void 0:be.includes(t.id))}),[c,t.id]),re=O.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]);O.useEffect(()=>{if(!e)return;const xe=t.role==="ADMIN"?De.subscribeToStudentGroups(de,R):De.subscribeToMyGroups(t.id,R);return()=>xe()},[e,t.id,t.role,de]),O.useEffect(()=>{if(!e)return;let xe="";if(m==="Resources"&&C?xe=`res_${C}`:m==="Groups"&&j?xe=`group_${j}`:(m==="Main"||m==="Bookmarks")&&(xe=`class_${de.replace(/\s+/g,"_").toLowerCase()}`),!xe)return;T(!0);const be=De.subscribeToChannelMessages(xe,Be=>{d(Be),T(!1)});return()=>{be()}},[e,de,m,C,j]),O.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const xe=De.subscribeToFlaggedMessages(Be=>{F(Be)}),be=De.subscribeToAllGroups(A);return()=>{xe(),be()}},[e,t.role]),O.useEffect(()=>{ee.current&&(ee.current.scrollTop=ee.current.scrollHeight)},[c,x,m,C]),O.useEffect(()=>{const xe=be=>{Q.current&&!Q.current.contains(be.target)&&w(!1),G.current&&!G.current.contains(be.target)&&I(null)};return document.addEventListener("mousedown",xe),()=>document.removeEventListener("mousedown",xe)},[]),O.useEffect(()=>{if(!e)return;const xe=be=>{be.key==="Escape"&&r()};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[e,r]);const ce=O.useCallback(async xe=>{if(xe.preventDefault(),!(!h.trim()||!H)&&!re)try{await De.sendMessage(t,h,H,de),p(""),w(!1)}catch(be){console.error("Failed to send message:",be)}},[h,H,re,t,de]),he=O.useCallback(async(xe,be)=>{try{await De.toggleReaction(xe,be,t.id),I(null)}catch(Be){console.error(Be)}},[t.id]),Ie=O.useCallback(async xe=>{try{await De.togglePersonalPin(xe,t.id)}catch(be){console.error(be)}},[t.id]),Se=O.useCallback(async(xe,be)=>{try{await De.toggleGlobalPin(xe,!be)}catch(Be){console.error(Be)}},[]),We=async xe=>{if(await s({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await De.deleteMessage(xe)}catch(be){console.error(be)}},Me=async xe=>{try{await De.unflagMessage(xe),await De.resolveFlagByMessageId(xe)}catch(be){console.error(be)}},_e=async xe=>{if(await s({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await De.resolveFlagByMessageId(xe),await De.deleteMessage(xe)}catch(be){console.error(be)}},gt=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:De.INDEFINITE_MUTE}],et=async xe=>{if(z){try{await De.muteUser(z.senderId,xe)}catch(be){console.error(be)}K(null)}};return O.useEffect(()=>{const xe=be=>{X.current&&!X.current.contains(be.target)&&K(null)};return z&&document.addEventListener("mousedown",xe),()=>document.removeEventListener("mousedown",xe)},[z]),e?o.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[m==="Resources"&&C||m==="Groups"&&j?o.jsx("button",{onClick:()=>{L(null),$(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:o.jsx(Ioe,{className:"w-5 h-5"})}):o.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:o.jsx(bA,{className:"w-5 h-5"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:m==="Moderation"?"Moderation Queue":m==="Groups"?j?(pt=P.find(xe=>xe.id===j))==null?void 0:pt.name:"My Groups":m==="Resources"?C?(st=te.find(xe=>xe.id===C))==null?void 0:st.title:"Class Resources":de}),m!=="Resources"&&m!=="Moderation"&&m!=="Groups"&&ne.length>1&&o.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[o.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:de}),o.jsx(Di,{className:"w-3 h-3 text-gray-500 ml-1"}),o.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:de,onChange:xe=>me(xe.target.value),children:ne.map(xe=>o.jsx("option",{value:xe,children:xe},xe))})]})]})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:o.jsx(Pa,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[o.jsx("button",{onClick:()=>y("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all ${m==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:o.jsx(bA,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>y("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all ${m==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:o.jsx(_o,{className:"w-5 h-5"})}),(P.length>0||t.role==="ADMIN")&&o.jsxs("button",{onClick:()=>{y("Groups"),$(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${m==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(Ts,{className:"w-5 h-5"}),P.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:P.length})]}),o.jsx("button",{onClick:()=>y("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${m==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:o.jsx(WI,{className:"w-5 h-5"})}),t.role==="ADMIN"&&o.jsxs("button",{onClick:()=>y("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${m==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(To,{className:"w-5 h-5"}),B.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:B.length})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative",children:[m==="Resources"&&!C&&o.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:o.jsx("div",{className:"space-y-2",children:te.map(xe=>o.jsxs("div",{onClick:()=>L(xe.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[o.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:o.jsx(Hoe,{className:"w-5 h-5"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:xe.title}),o.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:xe.unit})]})]}),o.jsx("button",{onClick:be=>{be.stopPropagation(),i==null||i(xe.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:o.jsx(Boe,{className:"w-4 h-4"})})]},xe.id))})}),m==="Groups"&&!j&&o.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:o.jsx("div",{className:"space-y-2",children:P.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[o.jsx(Ts,{className:"w-10 h-10 mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",children:"No groups yet"}),o.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):P.map(xe=>o.jsx("div",{onClick:()=>$(xe.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:o.jsx(Ts,{className:"w-5 h-5"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:xe.name}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:[xe.members.length," member",xe.members.length!==1?"s":"","  ",xe.classType]})]})]})},xe.id))})}),m==="Moderation"&&t.role==="ADMIN"&&o.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(ks,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),o.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[B.length," item",B.length!==1?"s":""]})]}),B.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[o.jsx(To,{className:"w-10 h-10 mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):o.jsx("div",{className:"space-y-3",children:B.map(xe=>{var be,Be,Ye;return o.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300",children:xe.senderName}),o.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(xe.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),o.jsx("p",{className:"text-sm text-gray-200 mb-1",children:xe.content}),xe.systemNote&&o.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:xe.systemNote}),o.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(be=xe.channelId)!=null&&be.startsWith("group_")?`Group: ${((Be=N.find(ht=>ht.id===xe.channelId.replace("group_","")))==null?void 0:Be.name)||xe.channelId.replace("group_","")}`:((Ye=xe.channelId)==null?void 0:Ye.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>Me(xe.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[o.jsx(ou,{className:"w-3.5 h-3.5"})," Approve"]}),o.jsxs("button",{onClick:()=>_e(xe.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[o.jsx(la,{className:"w-3.5 h-3.5"})," Delete"]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>K((z==null?void 0:z.id)===`flag-${xe.id}`?null:{id:`flag-${xe.id}`,senderId:xe.senderId,senderName:xe.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:o.jsx(Cx,{className:"w-3.5 h-3.5"})}),(z==null?void 0:z.id)===`flag-${xe.id}`&&o.jsxs("div",{ref:X,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",xe.senderName]}),gt.map(ht=>o.jsx("button",{onClick:()=>et(ht.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:ht.label},ht.minutes))]})]})]})]},xe.id)})})]}),(m==="Main"||m==="Bookmarks"||m==="Resources"&&C||m==="Groups"&&j)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:ee,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(m==="Bookmarks"?Oe:c).map((xe,be,Be)=>{var Ze;const Ye=xe.senderId===t.id,ht=be>0&&Be[be-1].senderId===xe.senderId&&new Date(xe.timestamp).getTime()-new Date(Be[be-1].timestamp).getTime()<3e5;return o.jsxs("div",{className:`group flex flex-col ${Ye?"items-end":"items-start"} ${ht?"mt-1":"mt-4"}`,children:[!ht&&o.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[o.jsx("span",{className:`text-xs font-bold ${Ye?"text-indigo-400":"text-gray-300"}`,children:xe.senderName}),o.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(xe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),xe.isGlobalPinned&&o.jsx(XI,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"relative max-w-[85%]",children:[o.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${Ye?"right-0":"left-0"} z-30`,children:[o.jsx("button",{onClick:()=>I(xe.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:o.jsx(ZI,{className:"w-3.5 h-3.5 text-yellow-400"})}),o.jsx("button",{onClick:()=>Ie(xe.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Ze=xe.pinnedBy)!=null&&Ze.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:o.jsx(WI,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Se(xe.id,!!xe.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${xe.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:o.jsx(XI,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>We(xe.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:o.jsx(la,{className:"w-3.5 h-3.5"})}),xe.senderId!==t.id&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>K((z==null?void 0:z.id)===xe.id?null:{id:xe.id,senderId:xe.senderId,senderName:xe.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:o.jsx(Cx,{className:"w-3.5 h-3.5"})}),(z==null?void 0:z.id)===xe.id&&o.jsxs("div",{ref:X,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",xe.senderName]}),gt.map(yt=>o.jsx("button",{onClick:()=>et(yt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:yt.label},yt.minutes))]})]})]})]}),E===xe.id&&o.jsx("div",{ref:G,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${Ye?"right-0":"left-0"}`,children:Ide.map(yt=>o.jsx("button",{onClick:()=>he(xe.id,yt),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:yt},yt))}),o.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${Ye?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${xe.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${xe.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:xe.content}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:xe.reactions&&Object.entries(xe.reactions).map(([yt,Rt])=>{const Bt=Rt;return Bt.length>0&&o.jsxs("button",{onClick:()=>he(xe.id,yt),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${Bt.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[yt," ",Bt.length]},yt)})})]})]},xe.id)})}),o.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:o.jsxs("form",{onSubmit:ce,className:"relative flex items-center gap-2",children:[_&&o.jsx("div",{ref:Q,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:Rde.map(xe=>o.jsx("button",{type:"button",onClick:()=>p(be=>be+xe),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:xe},xe))}),o.jsx("button",{type:"button",onClick:()=>w(!_),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:o.jsx(ZI,{className:"w-5 h-5"})}),o.jsx("input",{type:"text",value:h,onChange:xe=>p(xe.target.value),placeholder:re?"Transmission Disabled":"Type message...",disabled:!H||re,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),o.jsx("button",{type:"submit",disabled:!H||re||!h.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:o.jsx(oH,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function gG(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=gG(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function pr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=gG(t))&&(n&&(n+=" "),n+=e);return n}var g3,YR;function as(){if(YR)return g3;YR=1;var t=Array.isArray;return g3=t,g3}var y3,ZR;function yG(){if(ZR)return y3;ZR=1;var t=typeof Ky=="object"&&Ky&&Ky.Object===Object&&Ky;return y3=t,y3}var v3,JR;function il(){if(JR)return v3;JR=1;var t=yG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return v3=r,v3}var x3,eM;function u1(){if(eM)return x3;eM=1;var t=il(),e=t.Symbol;return x3=e,x3}var b3,tM;function Pde(){if(tM)return b3;tM=1;var t=u1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var c=r.call(s,a),d=s[a];try{s[a]=void 0;var h=!0}catch{}var p=n.call(s);return h&&(c?s[a]=d:delete s[a]),p}return b3=i,b3}var w3,rM;function Dde(){if(rM)return w3;rM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return w3=r,w3}var S3,nM;function dc(){if(nM)return S3;nM=1;var t=u1(),e=Pde(),r=Dde(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return S3=s,S3}var _3,aM;function hc(){if(aM)return _3;aM=1;function t(e){return e!=null&&typeof e=="object"}return _3=t,_3}var T3,iM;function Mf(){if(iM)return T3;iM=1;var t=dc(),e=hc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return T3=n,T3}var A3,sM;function aE(){if(sM)return A3;sM=1;var t=as(),e=Mf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return A3=a,A3}var N3,oM;function Mu(){if(oM)return N3;oM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return N3=t,N3}var E3,lM;function iE(){if(lM)return E3;lM=1;var t=dc(),e=Mu(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return E3=s,E3}var j3,cM;function Lde(){if(cM)return j3;cM=1;var t=il(),e=t["__core-js_shared__"];return j3=e,j3}var k3,uM;function Bde(){if(uM)return k3;uM=1;var t=Lde(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return k3=r,k3}var C3,dM;function vG(){if(dM)return C3;dM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return C3=r,C3}var O3,hM;function $de(){if(hM)return O3;hM=1;var t=iE(),e=Bde(),r=Mu(),n=vG(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var x=t(y)?p:i;return x.test(n(y))}return O3=m,O3}var I3,fM;function Ude(){if(fM)return I3;fM=1;function t(e,r){return e==null?void 0:e[r]}return I3=t,I3}var R3,pM;function d0(){if(pM)return R3;pM=1;var t=$de(),e=Ude();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return R3=r,R3}var M3,mM;function M2(){if(mM)return M3;mM=1;var t=d0(),e=t(Object,"create");return M3=e,M3}var P3,gM;function zde(){if(gM)return P3;gM=1;var t=M2();function e(){this.__data__=t?t(null):{},this.size=0}return P3=e,P3}var D3,yM;function Vde(){if(yM)return D3;yM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return D3=t,D3}var L3,vM;function Fde(){if(vM)return L3;vM=1;var t=M2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var c=s[i];return c===e?void 0:c}return n.call(s,i)?s[i]:void 0}return L3=a,L3}var B3,xM;function qde(){if(xM)return B3;xM=1;var t=M2(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return B3=n,B3}var $3,bM;function Hde(){if(bM)return $3;bM=1;var t=M2(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return $3=r,$3}var U3,wM;function Gde(){if(wM)return U3;wM=1;var t=zde(),e=Vde(),r=Fde(),n=qde(),a=Hde();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,U3=i,U3}var z3,SM;function Wde(){if(SM)return z3;SM=1;function t(){this.__data__=[],this.size=0}return z3=t,z3}var V3,_M;function sE(){if(_M)return V3;_M=1;function t(e,r){return e===r||e!==e&&r!==r}return V3=t,V3}var F3,TM;function P2(){if(TM)return F3;TM=1;var t=sE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return F3=e,F3}var q3,AM;function Kde(){if(AM)return q3;AM=1;var t=P2(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var c=i.length-1;return s==c?i.pop():r.call(i,s,1),--this.size,!0}return q3=n,q3}var H3,NM;function Qde(){if(NM)return H3;NM=1;var t=P2();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return H3=e,H3}var G3,EM;function Xde(){if(EM)return G3;EM=1;var t=P2();function e(r){return t(this.__data__,r)>-1}return G3=e,G3}var W3,jM;function Yde(){if(jM)return W3;jM=1;var t=P2();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return W3=e,W3}var K3,kM;function D2(){if(kM)return K3;kM=1;var t=Wde(),e=Kde(),r=Qde(),n=Xde(),a=Yde();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,K3=i,K3}var Q3,CM;function oE(){if(CM)return Q3;CM=1;var t=d0(),e=il(),r=t(e,"Map");return Q3=r,Q3}var X3,OM;function Zde(){if(OM)return X3;OM=1;var t=Gde(),e=D2(),r=oE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return X3=n,X3}var Y3,IM;function Jde(){if(IM)return Y3;IM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Y3=t,Y3}var Z3,RM;function L2(){if(RM)return Z3;RM=1;var t=Jde();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Z3=e,Z3}var J3,MM;function e0e(){if(MM)return J3;MM=1;var t=L2();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return J3=e,J3}var e6,PM;function t0e(){if(PM)return e6;PM=1;var t=L2();function e(r){return t(this,r).get(r)}return e6=e,e6}var t6,DM;function r0e(){if(DM)return t6;DM=1;var t=L2();function e(r){return t(this,r).has(r)}return t6=e,t6}var r6,LM;function n0e(){if(LM)return r6;LM=1;var t=L2();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return r6=e,r6}var n6,BM;function lE(){if(BM)return n6;BM=1;var t=Zde(),e=e0e(),r=t0e(),n=r0e(),a=n0e();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,n6=i,n6}var a6,$M;function xG(){if($M)return a6;$M=1;var t=lE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,c=a?a.apply(this,s):s[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,s);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,a6=r,a6}var i6,UM;function a0e(){if(UM)return i6;UM=1;var t=xG(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return i6=r,i6}var s6,zM;function i0e(){if(zM)return s6;zM=1;var t=a0e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,c,d,h){i.push(d?h.replace(r,"$1"):c||s)}),i});return s6=n,s6}var o6,VM;function cE(){if(VM)return o6;VM=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return o6=t,o6}var l6,FM;function s0e(){if(FM)return l6;FM=1;var t=u1(),e=cE(),r=as(),n=Mf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return e(c,s)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return l6=s,l6}var c6,qM;function bG(){if(qM)return c6;qM=1;var t=s0e();function e(r){return r==null?"":t(r)}return c6=e,c6}var u6,HM;function wG(){if(HM)return u6;HM=1;var t=as(),e=aE(),r=i0e(),n=bG();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return u6=a,u6}var d6,GM;function B2(){if(GM)return d6;GM=1;var t=Mf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return d6=e,d6}var h6,WM;function uE(){if(WM)return h6;WM=1;var t=wG(),e=B2();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return h6=r,h6}var f6,KM;function SG(){if(KM)return f6;KM=1;var t=uE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return f6=e,f6}var o0e=SG();const Ys=Gr(o0e);var p6,QM;function l0e(){if(QM)return p6;QM=1;function t(e){return e==null}return p6=t,p6}var c0e=l0e();const lr=Gr(c0e);var m6,XM;function u0e(){if(XM)return m6;XM=1;var t=dc(),e=as(),r=hc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return m6=a,m6}var d0e=u0e();const Zd=Gr(d0e);var h0e=iE();const rr=Gr(h0e);var f0e=Mu();const Pf=Gr(f0e);var g6={exports:{}},Jr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YM;function p0e(){if(YM)return Jr;YM=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function _(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case m:case i:return w;default:return E}}case e:return E}}}return Jr.ContextConsumer=s,Jr.ContextProvider=i,Jr.Element=t,Jr.ForwardRef=d,Jr.Fragment=r,Jr.Lazy=y,Jr.Memo=m,Jr.Portal=e,Jr.Profiler=a,Jr.StrictMode=n,Jr.Suspense=h,Jr.SuspenseList=p,Jr.isAsyncMode=function(){return!1},Jr.isConcurrentMode=function(){return!1},Jr.isContextConsumer=function(w){return _(w)===s},Jr.isContextProvider=function(w){return _(w)===i},Jr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Jr.isForwardRef=function(w){return _(w)===d},Jr.isFragment=function(w){return _(w)===r},Jr.isLazy=function(w){return _(w)===y},Jr.isMemo=function(w){return _(w)===m},Jr.isPortal=function(w){return _(w)===e},Jr.isProfiler=function(w){return _(w)===a},Jr.isStrictMode=function(w){return _(w)===n},Jr.isSuspense=function(w){return _(w)===h},Jr.isSuspenseList=function(w){return _(w)===p},Jr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===x||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===i||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},Jr.typeOf=_,Jr}var ZM;function m0e(){return ZM||(ZM=1,g6.exports=p0e()),g6.exports}var g0e=m0e(),y6,JM;function _G(){if(JM)return y6;JM=1;var t=dc(),e=hc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return y6=n,y6}var v6,eP;function y0e(){if(eP)return v6;eP=1;var t=_G();function e(r){return t(r)&&r!=+r}return v6=e,v6}var v0e=y0e();const d1=Gr(v0e);var x0e=_G();const b0e=Gr(x0e);var vo=function(e){return e===0?0:e>0?1:-1},Ad=function(e){return Zd(e)&&e.indexOf("%")===e.length-1},mt=function(e){return b0e(e)&&!d1(e)},w0e=function(e){return lr(e)},Da=function(e){return mt(e)||Zd(e)},S0e=0,h1=function(e){var r=++S0e;return"".concat(e||"").concat(r)},xo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mt(e)&&!Zd(e))return n;var i;if(Ad(e)){var s=e.indexOf("%");i=r*parseFloat(e.slice(0,s))/100}else i=+e;return d1(i)&&(i=n),a&&i>r&&(i=r),i},iu=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},_0e=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Yi=function(e,r){return mt(e)&&mt(r)?function(n){return e+n*(r-e)}:function(){return r}};function $x(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Ys(n,e))===r})}var T0e=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,s=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,s+=h*h,c=Math.min(c,h),d=Math.max(d,h);var y=r*s!==n*n?(r*i-n*a)/(r*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(a-y*n)/r}},A0e=function(e,r){return mt(e)&&mt(r)?e-r:Zd(e)&&Zd(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Ah(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function PA(t){"@babel/helpers - typeof";return PA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PA(t)}var N0e=["viewBox","children"],E0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tP=["points","pathLength"],x6={svg:N0e,polygon:tP,polyline:tP},dE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ux=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(O.isValidElement(e)&&(n=e.props),!Pf(n))return null;var a={};return Object.keys(n).forEach(function(i){dE.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},j0e=function(e,r,n){return function(a){return e(r,n,a),null}},Jd=function(e,r,n){if(!Pf(e)||PA(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var s=e[i];dE.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=j0e(s,r,n))}),a},k0e=["children"],C0e=["children"];function rP(t,e){if(t==null)return{};var r=O0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function O0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var nP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Hl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},aP=null,b6=null,hE=function t(e){if(e===aP&&Array.isArray(b6))return b6;var r=[];return O.Children.forEach(e,function(n){lr(n)||(g0e.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),b6=r,aP=e,r};function Ns(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Hl(a)}):n=[Hl(e)],hE(t).forEach(function(a){var i=Ys(a,"type.displayName")||Ys(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function ys(t,e){var r=Ns(t,e);return r&&r[0]}var iP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!mt(n)||n<=0||!mt(a)||a<=0)},I0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],R0e=function(e){return e&&e.type&&Zd(e.type)&&I0e.indexOf(e.type)>=0},M0e=function(e,r,n,a){var i,s=(i=x6==null?void 0:x6[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!rr(e)&&(a&&s.includes(r)||E0e.includes(r))||n&&dE.includes(r)},zt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(O.isValidElement(e)&&(a=e.props),!Pf(a))return null;var i={};return Object.keys(a).forEach(function(s){var c;M0e((c=a)===null||c===void 0?void 0:c[s],s,r,n)&&(i[s]=a[s])}),i},DA=function t(e,r){if(e===r)return!0;var n=O.Children.count(e);if(n!==O.Children.count(r))return!1;if(n===0)return!0;if(n===1)return sP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!t(i,s))return!1}else if(!sP(i,s))return!1}return!0},sP=function(e,r){if(lr(e)&&lr(r))return!0;if(!lr(e)&&!lr(r)){var n=e.props||{},a=n.children,i=rP(n,k0e),s=r.props||{},c=s.children,d=rP(s,C0e);return a&&c?Ah(i,d)&&DA(a,c):!a&&!c?Ah(i,d):!1}return!1},oP=function(e,r){var n=[],a={};return hE(e).forEach(function(i,s){if(R0e(i))n.push(i);else if(i){var c=Hl(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,s);n.push(m),a[c]=!0}}}),n},P0e=function(e){var r=e&&e.type;return r&&nP[r]?nP[r]:null},D0e=function(e,r){return hE(r).indexOf(e)},L0e=["children","width","height","viewBox","className","style","title","desc"];function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LA.apply(this,arguments)}function B0e(t,e){if(t==null)return{};var r=$0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function BA(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,s=t.style,c=t.title,d=t.desc,h=B0e(t,L0e),p=a||{width:r,height:n,x:0,y:0},m=pr("recharts-surface",i);return ae.createElement("svg",LA({},zt(h,!0,"svg"),{className:m,width:r,height:n,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),ae.createElement("title",null,c),ae.createElement("desc",null,d),e)}var U0e=["children","className"];function $A(){return $A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$A.apply(this,arguments)}function z0e(t,e){if(t==null)return{};var r=V0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function V0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ur=ae.forwardRef(function(t,e){var r=t.children,n=t.className,a=z0e(t,U0e),i=pr("recharts-layer",n);return ae.createElement("g",$A({className:i},zt(a,!0),{ref:e}),r)}),Gl=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},w6,lP;function F0e(){if(lP)return w6;lP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(i);++a<i;)s[a]=e[a+r];return s}return w6=t,w6}var S6,cP;function q0e(){if(cP)return S6;cP=1;var t=F0e();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return S6=e,S6}var _6,uP;function TG(){if(uP)return _6;uP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+t+a+i+"]");function d(h){return c.test(h)}return _6=d,_6}var T6,dP;function H0e(){if(dP)return T6;dP=1;function t(e){return e.split("")}return T6=t,T6}var A6,hP;function G0e(){if(hP)return A6;hP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",T=h+"?",_="["+i+"]?",w="(?:"+x+"(?:"+[p,m,y].join("|")+")"+_+T+")*",E=_+T+w,I="(?:"+[p+c+"?",c,m,y,s].join("|")+")",C=RegExp(d+"(?="+d+")|"+I+E,"g");function L(P){return P.match(C)||[]}return A6=L,A6}var N6,fP;function W0e(){if(fP)return N6;fP=1;var t=H0e(),e=TG(),r=G0e();function n(a){return e(a)?r(a):t(a)}return N6=n,N6}var E6,pP;function K0e(){if(pP)return E6;pP=1;var t=q0e(),e=TG(),r=W0e(),n=bG();function a(i){return function(s){s=n(s);var c=e(s)?r(s):void 0,d=c?c[0]:s.charAt(0),h=c?t(c,1).join(""):s.slice(1);return d[i]()+h}}return E6=a,E6}var j6,mP;function Q0e(){if(mP)return j6;mP=1;var t=K0e(),e=t("toUpperCase");return j6=e,j6}var X0e=Q0e();const $2=Gr(X0e);function kn(t){return function(){return t}}const AG=Math.cos,zx=Math.sin,jo=Math.sqrt,Vx=Math.PI,U2=2*Vx,UA=Math.PI,zA=2*UA,yd=1e-6,Y0e=zA-yd;function NG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Z0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return NG;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class J0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?NG:Z0e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,s){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,c=this._y1,d=n-e,h=a-r,p=s-e,m=c-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>yd)if(!(Math.abs(m*d-h*p)>yd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let x=n-s,T=a-c,_=d*d+h*h,w=x*x+T*T,E=Math.sqrt(_),I=Math.sqrt(y),C=i*Math.tan((UA-Math.acos((_+y-w)/(2*E*I)))/2),L=C/I,P=C/E;Math.abs(L-1)>yd&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*x>p*T)},${this._x1=e+P*d},${this._y1=r+P*h}`}}arc(e,r,n,a,i,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^s,y=s?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>yd||Math.abs(this._y1-p)>yd)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%zA+zA),y>Y0e?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>yd&&this._append`A${n},${n},0,${+(y>=UA)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function fE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new J0e(e)}function pE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function EG(t){this._context=t}EG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function z2(t){return new EG(t)}function jG(t){return t[0]}function kG(t){return t[1]}function CG(t,e){var r=kn(!0),n=null,a=z2,i=null,s=fE(c);t=typeof t=="function"?t:t===void 0?jG:kn(t),e=typeof e=="function"?e:e===void 0?kG:kn(e);function c(d){var h,p=(d=pE(d)).length,m,y=!1,x;for(n==null&&(i=a(x=s())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+t(m,h,d),+e(m,h,d));if(x)return i=null,x+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:kn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:kn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:kn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function gv(t,e,r){var n=null,a=kn(!0),i=null,s=z2,c=null,d=fE(h);t=typeof t=="function"?t:t===void 0?jG:kn(+t),e=typeof e=="function"?e:kn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?kG:kn(+r);function h(m){var y,x,T,_=(m=pE(m)).length,w,E=!1,I,C=new Array(_),L=new Array(_);for(i==null&&(c=s(I=d())),y=0;y<=_;++y){if(!(y<_&&a(w=m[y],y,m))===E)if(E=!E)x=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=x;--T)c.point(C[T],L[T]);c.lineEnd(),c.areaEnd()}E&&(C[y]=+t(w,y,m),L[y]=+e(w,y,m),c.point(n?+n(w,y,m):C[y],r?+r(w,y,m):L[y]))}if(I)return c=null,I+""||null}function p(){return CG().defined(a).curve(s).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:kn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:kn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:kn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:kn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:kn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:kn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:kn(!!m),h):a},h.curve=function(m){return arguments.length?(s=m,i!=null&&(c=s(i)),h):s},h.context=function(m){return arguments.length?(m==null?i=c=null:c=s(i=m),h):i},h}class OG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function ehe(t){return new OG(t,!0)}function the(t){return new OG(t,!1)}const mE={draw(t,e){const r=jo(e/Vx);t.moveTo(r,0),t.arc(0,0,r,0,U2)}},rhe={draw(t,e){const r=jo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},IG=jo(1/3),nhe=IG*2,ahe={draw(t,e){const r=jo(e/nhe),n=r*IG;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},ihe={draw(t,e){const r=jo(e),n=-r/2;t.rect(n,n,r,r)}},she=.8908130915292852,RG=zx(Vx/10)/zx(7*Vx/10),ohe=zx(U2/10)*RG,lhe=-AG(U2/10)*RG,che={draw(t,e){const r=jo(e*she),n=ohe*r,a=lhe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const s=U2*i/5,c=AG(s),d=zx(s);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},k6=jo(3),uhe={draw(t,e){const r=-jo(e/(k6*3));t.moveTo(0,r*2),t.lineTo(-k6*r,-r),t.lineTo(k6*r,-r),t.closePath()}},Fs=-.5,qs=jo(3)/2,VA=1/jo(12),dhe=(VA/2+1)*3,hhe={draw(t,e){const r=jo(e/dhe),n=r/2,a=r*VA,i=n,s=r*VA+r,c=-i,d=s;t.moveTo(n,a),t.lineTo(i,s),t.lineTo(c,d),t.lineTo(Fs*n-qs*a,qs*n+Fs*a),t.lineTo(Fs*i-qs*s,qs*i+Fs*s),t.lineTo(Fs*c-qs*d,qs*c+Fs*d),t.lineTo(Fs*n+qs*a,Fs*a-qs*n),t.lineTo(Fs*i+qs*s,Fs*s-qs*i),t.lineTo(Fs*c+qs*d,Fs*d-qs*c),t.closePath()}};function fhe(t,e){let r=null,n=fE(a);t=typeof t=="function"?t:kn(t||mE),e=typeof e=="function"?e:kn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:kn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:kn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Fx(){}function qx(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function MG(t){this._context=t}MG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function phe(t){return new MG(t)}function PG(t){this._context=t}PG.prototype={areaStart:Fx,areaEnd:Fx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mhe(t){return new PG(t)}function DG(t){this._context=t}DG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:qx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ghe(t){return new DG(t)}function LG(t){this._context=t}LG.prototype={areaStart:Fx,areaEnd:Fx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yhe(t){return new LG(t)}function gP(t){return t<0?-1:1}function yP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),s=(r-t._y1)/(a||n<0&&-0),c=(i*a+s*n)/(n+a);return(gP(i)+gP(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(c))||0}function vP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function C6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,s=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,s-c*r,i,s)}function Hx(t){this._context=t}Hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:C6(this,this._t0,vP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,C6(this,vP(this,r=yP(this,t,e)),r);break;default:C6(this,this._t0,r=yP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function BG(t){this._context=new $G(t)}(BG.prototype=Object.create(Hx.prototype)).point=function(t,e){Hx.prototype.point.call(this,e,t)};function $G(t){this._context=t}$G.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function vhe(t){return new Hx(t)}function xhe(t){return new BG(t)}function UG(t){this._context=t}UG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=xP(t),a=xP(e),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function xP(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,s[e]-=n*s[e-1];for(a[r-1]=s[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(s[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function bhe(t){return new UG(t)}function V2(t,e){this._context=t,this._t=e}V2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function whe(t){return new V2(t,.5)}function She(t){return new V2(t,0)}function _he(t){return new V2(t,1)}function Xh(t,e){if((s=t.length)>1)for(var r=1,n,a,i=t[e[0]],s,c=i.length;r<s;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function FA(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function The(t,e){return t[e]}function Ahe(t){const e=[];return e.key=t,e}function Nhe(){var t=kn([]),e=FA,r=Xh,n=The;function a(i){var s=Array.from(t.apply(this,arguments),Ahe),c,d=s.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(s[c][h]=[0,+n(m,s[c].key,h,i)]).data=m;for(c=0,p=pE(e(s));c<d;++c)s[p[c]].index=c;return r(s,p),s}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:kn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:kn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?FA:typeof i=="function"?i:kn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??Xh,a):r},a}function Ehe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=t[r][a][1]||0;if(s)for(r=0;r<n;++r)t[r][a][1]/=s}Xh(t,e)}}function jhe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var s=0,c=0;s<a;++s)c+=t[s][r][1]||0;n[r][1]+=n[r][0]=-c/2}Xh(t,e)}}function khe(t,e){if(!(!((s=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var c=0,d=0,h=0;c<s;++c){for(var p=t[e[c]],m=p[n][1]||0,y=p[n-1][1]||0,x=(m-y)/2,T=0;T<c;++T){var _=t[e[T]],w=_[n][1]||0,E=_[n-1][1]||0;x+=w-E}d+=m,h+=x*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,Xh(t,e)}}function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}var Che=["type","size","sizeType"];function qA(){return qA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qA.apply(this,arguments)}function bP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bP(Object(r),!0).forEach(function(n){Ohe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ohe(t,e,r){return e=Ihe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ihe(t){var e=Rhe(t,"string");return eg(e)=="symbol"?e:e+""}function Rhe(t,e){if(eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mhe(t,e){if(t==null)return{};var r=Phe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Phe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var zG={symbolCircle:mE,symbolCross:rhe,symbolDiamond:ahe,symbolSquare:ihe,symbolStar:che,symbolTriangle:uhe,symbolWye:hhe},Dhe=Math.PI/180,Lhe=function(e){var r="symbol".concat($2(e));return zG[r]||mE},Bhe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Dhe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},$he=function(e,r){zG["symbol".concat($2(e))]=r},F2=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,s=e.sizeType,c=s===void 0?"area":s,d=Mhe(e,Che),h=wP(wP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=Lhe(n),E=fhe().type(w).size(Bhe(i,c,n));return E()},m=h.className,y=h.cx,x=h.cy,T=zt(h,!0);return y===+y&&x===+x&&i===+i?ae.createElement("path",qA({},T,{className:pr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(x,")"),d:p()})):null};F2.registerSymbol=$he;function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function HA(){return HA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HA.apply(this,arguments)}function SP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Uhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(r),!0).forEach(function(n){tg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FG(n.key),n)}}function Fhe(t,e,r){return e&&Vhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qhe(t,e,r){return e=Gx(e),Hhe(t,VG()?Reflect.construct(e,r||[],Gx(t).constructor):e.apply(t,r))}function Hhe(t,e){if(e&&(Yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ghe(t)}function Ghe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VG=function(){return!!t})()}function Gx(t){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gx(t)}function Whe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GA(t,e)}function GA(t,e){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GA(t,e)}function tg(t,e,r){return e=FG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FG(t){var e=Khe(t,"string");return Yh(e)=="symbol"?e:e+""}function Khe(t,e){if(Yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hs=32,gE=(function(t){function e(){return zhe(this,e),qhe(this,e,arguments)}return Whe(e,t),Fhe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Hs/2,s=Hs/6,c=Hs/3,d=n.inactive?a:n.color;if(n.type==="plainline")return ae.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Hs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return ae.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Hs,"M").concat(2*c,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return ae.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Hs/8,"h").concat(Hs,"v").concat(Hs*3/4,"h").concat(-Hs,"z"),className:"recharts-legend-icon"});if(ae.isValidElement(n.legendIcon)){var h=Uhe({},n);return delete h.legendIcon,ae.cloneElement(n.legendIcon,h)}return ae.createElement(F2,{fill:d,cx:i,cy:i,size:Hs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Hs,height:Hs},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,T){var _=x.formatter||d,w=pr(tg(tg({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",x.inactive));if(x.type==="none")return null;var E=rr(x.value)?null:x.value;Gl(!rr(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var I=x.inactive?h:x.color;return ae.createElement("li",HA({className:w,style:m,key:"legend-item-".concat(T)},Jd(n.props,x,T)),ae.createElement(BA,{width:s,height:s,viewBox:p,style:y},n.renderIcon(x)),ae.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},_?_(E,x,T):E))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return ae.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(O.PureComponent);tg(gE,"displayName","Legend");tg(gE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var O6,_P;function Qhe(){if(_P)return O6;_P=1;var t=D2();function e(){this.__data__=new t,this.size=0}return O6=e,O6}var I6,TP;function Xhe(){if(TP)return I6;TP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return I6=t,I6}var R6,AP;function Yhe(){if(AP)return R6;AP=1;function t(e){return this.__data__.get(e)}return R6=t,R6}var M6,NP;function Zhe(){if(NP)return M6;NP=1;function t(e){return this.__data__.has(e)}return M6=t,M6}var P6,EP;function Jhe(){if(EP)return P6;EP=1;var t=D2(),e=oE(),r=lE(),n=200;function a(i,s){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,s]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,s),this.size=c.size,this}return P6=a,P6}var D6,jP;function qG(){if(jP)return D6;jP=1;var t=D2(),e=Qhe(),r=Xhe(),n=Yhe(),a=Zhe(),i=Jhe();function s(c){var d=this.__data__=new t(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,D6=s,D6}var L6,kP;function efe(){if(kP)return L6;kP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return L6=e,L6}var B6,CP;function tfe(){if(CP)return B6;CP=1;function t(e){return this.__data__.has(e)}return B6=t,B6}var $6,OP;function HG(){if(OP)return $6;OP=1;var t=lE(),e=efe(),r=tfe();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new t;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,$6=n,$6}var U6,IP;function GG(){if(IP)return U6;IP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return U6=t,U6}var z6,RP;function WG(){if(RP)return z6;RP=1;function t(e,r){return e.has(r)}return z6=t,z6}var V6,MP;function KG(){if(MP)return V6;MP=1;var t=HG(),e=GG(),r=WG(),n=1,a=2;function i(s,c,d,h,p,m){var y=d&n,x=s.length,T=c.length;if(x!=T&&!(y&&T>x))return!1;var _=m.get(s),w=m.get(c);if(_&&w)return _==c&&w==s;var E=-1,I=!0,C=d&a?new t:void 0;for(m.set(s,c),m.set(c,s);++E<x;){var L=s[E],P=c[E];if(h)var R=y?h(P,L,E,c,s,m):h(L,P,E,s,c,m);if(R!==void 0){if(R)continue;I=!1;break}if(C){if(!e(c,function(N,A){if(!r(C,A)&&(L===N||p(L,N,d,h,m)))return C.push(A)})){I=!1;break}}else if(!(L===P||p(L,P,d,h,m))){I=!1;break}}return m.delete(s),m.delete(c),I}return V6=i,V6}var F6,PP;function rfe(){if(PP)return F6;PP=1;var t=il(),e=t.Uint8Array;return F6=e,F6}var q6,DP;function nfe(){if(DP)return q6;DP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return q6=t,q6}var H6,LP;function yE(){if(LP)return H6;LP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return H6=t,H6}var G6,BP;function afe(){if(BP)return G6;BP=1;var t=u1(),e=rfe(),r=sE(),n=KG(),a=nfe(),i=yE(),s=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",x="[object RegExp]",T="[object Set]",_="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",I="[object DataView]",C=t?t.prototype:void 0,L=C?C.valueOf:void 0;function P(R,N,A,j,$,B,F){switch(A){case I:if(R.byteLength!=N.byteLength||R.byteOffset!=N.byteOffset)return!1;R=R.buffer,N=N.buffer;case E:return!(R.byteLength!=N.byteLength||!B(new e(R),new e(N)));case d:case h:case y:return r(+R,+N);case p:return R.name==N.name&&R.message==N.message;case x:case _:return R==N+"";case m:var z=a;case T:var K=j&s;if(z||(z=i),R.size!=N.size&&!K)return!1;var Q=F.get(R);if(Q)return Q==N;j|=c,F.set(R,N);var G=n(z(R),z(N),j,$,B,F);return F.delete(R),G;case w:if(L)return L.call(R)==L.call(N)}return!1}return G6=P,G6}var W6,$P;function QG(){if($P)return W6;$P=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return W6=t,W6}var K6,UP;function ife(){if(UP)return K6;UP=1;var t=QG(),e=as();function r(n,a,i){var s=a(n);return e(n)?s:t(s,i(n))}return K6=r,K6}var Q6,zP;function sfe(){if(zP)return Q6;zP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,s=[];++n<a;){var c=e[n];r(c,n,e)&&(s[i++]=c)}return s}return Q6=t,Q6}var X6,VP;function ofe(){if(VP)return X6;VP=1;function t(){return[]}return X6=t,X6}var Y6,FP;function lfe(){if(FP)return Y6;FP=1;var t=sfe(),e=ofe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),t(a(s),function(c){return n.call(s,c)}))}:e;return Y6=i,Y6}var Z6,qP;function cfe(){if(qP)return Z6;qP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Z6=t,Z6}var J6,HP;function ufe(){if(HP)return J6;HP=1;var t=dc(),e=hc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return J6=n,J6}var eS,GP;function vE(){if(GP)return eS;GP=1;var t=ufe(),e=hc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return eS=i,eS}var sm={exports:{}},tS,WP;function dfe(){if(WP)return tS;WP=1;function t(){return!1}return tS=t,tS}sm.exports;var KP;function XG(){return KP||(KP=1,(function(t,e){var r=il(),n=dfe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,c=s?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(sm,sm.exports)),sm.exports}var rS,QP;function xE(){if(QP)return rS;QP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return rS=r,rS}var nS,XP;function bE(){if(XP)return nS;XP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return nS=e,nS}var aS,YP;function hfe(){if(YP)return aS;YP=1;var t=dc(),e=bE(),r=hc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",x="[object Set]",T="[object String]",_="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",I="[object Float32Array]",C="[object Float64Array]",L="[object Int8Array]",P="[object Int16Array]",R="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",j="[object Uint16Array]",$="[object Uint32Array]",B={};B[I]=B[C]=B[L]=B[P]=B[R]=B[N]=B[A]=B[j]=B[$]=!0,B[n]=B[a]=B[w]=B[i]=B[E]=B[s]=B[c]=B[d]=B[h]=B[p]=B[m]=B[y]=B[x]=B[T]=B[_]=!1;function F(z){return r(z)&&e(z.length)&&!!B[t(z)]}return aS=F,aS}var iS,ZP;function YG(){if(ZP)return iS;ZP=1;function t(e){return function(r){return e(r)}}return iS=t,iS}var om={exports:{}};om.exports;var JP;function ffe(){return JP||(JP=1,(function(t,e){var r=yG(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=c})(om,om.exports)),om.exports}var sS,eD;function ZG(){if(eD)return sS;eD=1;var t=hfe(),e=YG(),r=ffe(),n=r&&r.isTypedArray,a=n?e(n):t;return sS=a,sS}var oS,tD;function pfe(){if(tD)return oS;tD=1;var t=cfe(),e=vE(),r=as(),n=XG(),a=xE(),i=ZG(),s=Object.prototype,c=s.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),x=!m&&!y&&n(h),T=!m&&!y&&!x&&i(h),_=m||y||x||T,w=_?t(h.length,String):[],E=w.length;for(var I in h)(p||c.call(h,I))&&!(_&&(I=="length"||x&&(I=="offset"||I=="parent")||T&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||a(I,E)))&&w.push(I);return w}return oS=d,oS}var lS,rD;function mfe(){if(rD)return lS;rD=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return lS=e,lS}var cS,nD;function JG(){if(nD)return cS;nD=1;function t(e,r){return function(n){return e(r(n))}}return cS=t,cS}var uS,aD;function gfe(){if(aD)return uS;aD=1;var t=JG(),e=t(Object.keys,Object);return uS=e,uS}var dS,iD;function yfe(){if(iD)return dS;iD=1;var t=mfe(),e=gfe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var s=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&s.push(c);return s}return dS=a,dS}var hS,sD;function f1(){if(sD)return hS;sD=1;var t=iE(),e=bE();function r(n){return n!=null&&e(n.length)&&!t(n)}return hS=r,hS}var fS,oD;function q2(){if(oD)return fS;oD=1;var t=pfe(),e=yfe(),r=f1();function n(a){return r(a)?t(a):e(a)}return fS=n,fS}var pS,lD;function vfe(){if(lD)return pS;lD=1;var t=ife(),e=lfe(),r=q2();function n(a){return t(a,r,e)}return pS=n,pS}var mS,cD;function xfe(){if(cD)return mS;cD=1;var t=vfe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,c,d,h,p){var m=c&e,y=t(i),x=y.length,T=t(s),_=T.length;if(x!=_&&!m)return!1;for(var w=x;w--;){var E=y[w];if(!(m?E in s:n.call(s,E)))return!1}var I=p.get(i),C=p.get(s);if(I&&C)return I==s&&C==i;var L=!0;p.set(i,s),p.set(s,i);for(var P=m;++w<x;){E=y[w];var R=i[E],N=s[E];if(d)var A=m?d(N,R,E,s,i,p):d(R,N,E,i,s,p);if(!(A===void 0?R===N||h(R,N,c,d,p):A)){L=!1;break}P||(P=E=="constructor")}if(L&&!P){var j=i.constructor,$=s.constructor;j!=$&&"constructor"in i&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof $=="function"&&$ instanceof $)&&(L=!1)}return p.delete(i),p.delete(s),L}return mS=a,mS}var gS,uD;function bfe(){if(uD)return gS;uD=1;var t=d0(),e=il(),r=t(e,"DataView");return gS=r,gS}var yS,dD;function wfe(){if(dD)return yS;dD=1;var t=d0(),e=il(),r=t(e,"Promise");return yS=r,yS}var vS,hD;function eW(){if(hD)return vS;hD=1;var t=d0(),e=il(),r=t(e,"Set");return vS=r,vS}var xS,fD;function Sfe(){if(fD)return xS;fD=1;var t=d0(),e=il(),r=t(e,"WeakMap");return xS=r,xS}var bS,pD;function _fe(){if(pD)return bS;pD=1;var t=bfe(),e=oE(),r=wfe(),n=eW(),a=Sfe(),i=dc(),s=vG(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",x=s(t),T=s(e),_=s(r),w=s(n),E=s(a),I=i;return(t&&I(new t(new ArrayBuffer(1)))!=y||e&&I(new e)!=c||r&&I(r.resolve())!=h||n&&I(new n)!=p||a&&I(new a)!=m)&&(I=function(C){var L=i(C),P=L==d?C.constructor:void 0,R=P?s(P):"";if(R)switch(R){case x:return y;case T:return c;case _:return h;case w:return p;case E:return m}return L}),bS=I,bS}var wS,mD;function Tfe(){if(mD)return wS;mD=1;var t=qG(),e=KG(),r=afe(),n=xfe(),a=_fe(),i=as(),s=XG(),c=ZG(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,x=y.hasOwnProperty;function T(_,w,E,I,C,L){var P=i(_),R=i(w),N=P?p:a(_),A=R?p:a(w);N=N==h?m:N,A=A==h?m:A;var j=N==m,$=A==m,B=N==A;if(B&&s(_)){if(!s(w))return!1;P=!0,j=!1}if(B&&!j)return L||(L=new t),P||c(_)?e(_,w,E,I,C,L):r(_,w,N,E,I,C,L);if(!(E&d)){var F=j&&x.call(_,"__wrapped__"),z=$&&x.call(w,"__wrapped__");if(F||z){var K=F?_.value():_,Q=z?w.value():w;return L||(L=new t),C(K,Q,E,I,L)}}return B?(L||(L=new t),n(_,w,E,I,C,L)):!1}return wS=T,wS}var SS,gD;function wE(){if(gD)return SS;gD=1;var t=Tfe(),e=hc();function r(n,a,i,s,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,s,r,c)}return SS=r,SS}var _S,yD;function Afe(){if(yD)return _S;yD=1;var t=qG(),e=wE(),r=1,n=2;function a(i,s,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var y=c[h];if(m&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++h<p;){y=c[h];var x=y[0],T=i[x],_=y[1];if(m&&y[2]){if(T===void 0&&!(x in i))return!1}else{var w=new t;if(d)var E=d(T,_,x,i,s,w);if(!(E===void 0?e(_,T,r|n,d,w):E))return!1}}return!0}return _S=a,_S}var TS,vD;function tW(){if(vD)return TS;vD=1;var t=Mu();function e(r){return r===r&&!t(r)}return TS=e,TS}var AS,xD;function Nfe(){if(xD)return AS;xD=1;var t=tW(),e=q2();function r(n){for(var a=e(n),i=a.length;i--;){var s=a[i],c=n[s];a[i]=[s,c,t(c)]}return a}return AS=r,AS}var NS,bD;function rW(){if(bD)return NS;bD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return NS=t,NS}var ES,wD;function Efe(){if(wD)return ES;wD=1;var t=Afe(),e=Nfe(),r=rW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||t(s,a,i)}}return ES=n,ES}var jS,SD;function jfe(){if(SD)return jS;SD=1;function t(e,r){return e!=null&&r in Object(e)}return jS=t,jS}var kS,_D;function kfe(){if(_D)return kS;_D=1;var t=wG(),e=vE(),r=as(),n=xE(),a=bE(),i=B2();function s(c,d,h){d=t(d,c);for(var p=-1,m=d.length,y=!1;++p<m;){var x=i(d[p]);if(!(y=c!=null&&h(c,x)))break;c=c[x]}return y||++p!=m?y:(m=c==null?0:c.length,!!m&&a(m)&&n(x,m)&&(r(c)||e(c)))}return kS=s,kS}var CS,TD;function Cfe(){if(TD)return CS;TD=1;var t=jfe(),e=kfe();function r(n,a){return n!=null&&e(n,a,t)}return CS=r,CS}var OS,AD;function Ofe(){if(AD)return OS;AD=1;var t=wE(),e=SG(),r=Cfe(),n=aE(),a=tW(),i=rW(),s=B2(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(s(p),m):function(y){var x=e(y,p);return x===void 0&&x===m?r(y,p):t(m,x,c|d)}}return OS=h,OS}var IS,ND;function Df(){if(ND)return IS;ND=1;function t(e){return e}return IS=t,IS}var RS,ED;function Ife(){if(ED)return RS;ED=1;function t(e){return function(r){return r==null?void 0:r[e]}}return RS=t,RS}var MS,jD;function Rfe(){if(jD)return MS;jD=1;var t=uE();function e(r){return function(n){return t(n,r)}}return MS=e,MS}var PS,kD;function Mfe(){if(kD)return PS;kD=1;var t=Ife(),e=Rfe(),r=aE(),n=B2();function a(i){return r(i)?t(n(i)):e(i)}return PS=a,PS}var DS,CD;function sl(){if(CD)return DS;CD=1;var t=Efe(),e=Ofe(),r=Df(),n=as(),a=Mfe();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):a(s)}return DS=i,DS}var LS,OD;function nW(){if(OD)return LS;OD=1;function t(e,r,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(e[s],s,e))return s;return-1}return LS=t,LS}var BS,ID;function Pfe(){if(ID)return BS;ID=1;function t(e){return e!==e}return BS=t,BS}var $S,RD;function Dfe(){if(RD)return $S;RD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return $S=t,$S}var US,MD;function Lfe(){if(MD)return US;MD=1;var t=nW(),e=Pfe(),r=Dfe();function n(a,i,s){return i===i?r(a,i,s):t(a,e,s)}return US=n,US}var zS,PD;function Bfe(){if(PD)return zS;PD=1;var t=Lfe();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return zS=e,zS}var VS,DD;function $fe(){if(DD)return VS;DD=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return VS=t,VS}var FS,LD;function Ufe(){if(LD)return FS;LD=1;function t(){}return FS=t,FS}var qS,BD;function zfe(){if(BD)return qS;BD=1;var t=eW(),e=Ufe(),r=yE(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return qS=a,qS}var HS,$D;function Vfe(){if($D)return HS;$D=1;var t=HG(),e=Bfe(),r=$fe(),n=WG(),a=zfe(),i=yE(),s=200;function c(d,h,p){var m=-1,y=e,x=d.length,T=!0,_=[],w=_;if(p)T=!1,y=r;else if(x>=s){var E=h?null:a(d);if(E)return i(E);T=!1,y=n,w=new t}else w=h?[]:_;e:for(;++m<x;){var I=d[m],C=h?h(I):I;if(I=p||I!==0?I:0,T&&C===C){for(var L=w.length;L--;)if(w[L]===C)continue e;h&&w.push(C),_.push(I)}else y(w,C,p)||(w!==_&&w.push(C),_.push(I))}return _}return HS=c,HS}var GS,UD;function Ffe(){if(UD)return GS;UD=1;var t=sl(),e=Vfe();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return GS=r,GS}var qfe=Ffe();const zD=Gr(qfe);function aW(t,e,r){return e===!0?zD(t,r):rr(e)?zD(t,e):t}function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}var Hfe=["ref"];function VD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function El(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(r),!0).forEach(function(n){H2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sW(n.key),n)}}function Wfe(t,e,r){return e&&FD(t.prototype,e),r&&FD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kfe(t,e,r){return e=Wx(e),Qfe(t,iW()?Reflect.construct(e,r||[],Wx(t).constructor):e.apply(t,r))}function Qfe(t,e){if(e&&(Zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xfe(t)}function Xfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iW=function(){return!!t})()}function Wx(t){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wx(t)}function Yfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WA(t,e)}function WA(t,e){return WA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WA(t,e)}function H2(t,e,r){return e=sW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sW(t){var e=Zfe(t,"string");return Zh(e)=="symbol"?e:e+""}function Zfe(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Jfe(t,e){if(t==null)return{};var r=epe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function epe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tpe(t){return t.value}function rpe(t,e){if(ae.isValidElement(t))return ae.cloneElement(t,e);if(typeof t=="function")return ae.createElement(t,e);e.ref;var r=Jfe(e,Hfe);return ae.createElement(gE,r)}var qD=1,Nh=(function(t){function e(){var r;Gfe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kfe(this,e,[].concat(a)),H2(r,"lastBoundingBox",{width:-1,height:-1}),r}return Yfe(e,t),Wfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>qD||Math.abs(a.height-this.lastBoundingBox.height)>qD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?El({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((h||0)-x.width)/2}}else m=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((p||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return El(El({},m),y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=El(El({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return ae.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){n.wrapperNode=x}},rpe(i,El(El({},this.props),{},{payload:aW(p,h,tpe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=El(El({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&mt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])})(O.PureComponent);H2(Nh,"displayName","Legend");H2(Nh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var WS,HD;function npe(){if(HD)return WS;HD=1;var t=u1(),e=vE(),r=as(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return WS=a,WS}var KS,GD;function oW(){if(GD)return KS;GD=1;var t=QG(),e=npe();function r(n,a,i,s,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,s,c):t(c,p):s||(c[c.length]=p)}return c}return KS=r,KS}var QS,WD;function ape(){if(WD)return QS;WD=1;function t(e){return function(r,n,a){for(var i=-1,s=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(s[h],h,s)===!1)break}return r}}return QS=t,QS}var XS,KD;function ipe(){if(KD)return XS;KD=1;var t=ape(),e=t();return XS=e,XS}var YS,QD;function lW(){if(QD)return YS;QD=1;var t=ipe(),e=q2();function r(n,a){return n&&t(n,a,e)}return YS=r,YS}var ZS,XD;function spe(){if(XD)return ZS;XD=1;var t=f1();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var s=a.length,c=n?s:-1,d=Object(a);(n?c--:++c<s)&&i(d[c],c,d)!==!1;);return a}}return ZS=e,ZS}var JS,YD;function SE(){if(YD)return JS;YD=1;var t=lW(),e=spe(),r=e(t);return JS=r,JS}var e_,ZD;function cW(){if(ZD)return e_;ZD=1;var t=SE(),e=f1();function r(n,a){var i=-1,s=e(n)?Array(n.length):[];return t(n,function(c,d,h){s[++i]=a(c,d,h)}),s}return e_=r,e_}var t_,JD;function ope(){if(JD)return t_;JD=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return t_=t,t_}var r_,eL;function lpe(){if(eL)return r_;eL=1;var t=Mf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!s)return 1;if(!i&&!c&&!m&&r<n||m&&a&&s&&!i&&!c||h&&a&&s||!d&&s||!p)return-1}return 0}return r_=e,r_}var n_,tL;function cpe(){if(tL)return n_;tL=1;var t=lpe();function e(r,n,a){for(var i=-1,s=r.criteria,c=n.criteria,d=s.length,h=a.length;++i<d;){var p=t(s[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return n_=e,n_}var a_,rL;function upe(){if(rL)return a_;rL=1;var t=cE(),e=uE(),r=sl(),n=cW(),a=ope(),i=YG(),s=cpe(),c=Df(),d=as();function h(p,m,y){m.length?m=t(m,function(_){return d(_)?function(w){return e(w,_.length===1?_[0]:_)}:_}):m=[c];var x=-1;m=t(m,i(r));var T=n(p,function(_,w,E){var I=t(m,function(C){return C(_)});return{criteria:I,index:++x,value:_}});return a(T,function(_,w){return s(_,w,y)})}return a_=h,a_}var i_,nL;function dpe(){if(nL)return i_;nL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return i_=t,i_}var s_,aL;function hpe(){if(aL)return s_;aL=1;var t=dpe(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var s=arguments,c=-1,d=e(s.length-a,0),h=Array(d);++c<d;)h[c]=s[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=s[c];return p[a]=i(h),t(n,this,p)}}return s_=r,s_}var o_,iL;function fpe(){if(iL)return o_;iL=1;function t(e){return function(){return e}}return o_=t,o_}var l_,sL;function uW(){if(sL)return l_;sL=1;var t=d0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return l_=e,l_}var c_,oL;function ppe(){if(oL)return c_;oL=1;var t=fpe(),e=uW(),r=Df(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return c_=n,c_}var u_,lL;function mpe(){if(lL)return u_;lL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,s=0;return function(){var c=r(),d=e-(c-s);if(s=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return u_=n,u_}var d_,cL;function gpe(){if(cL)return d_;cL=1;var t=ppe(),e=mpe(),r=e(t);return d_=r,d_}var h_,uL;function ype(){if(uL)return h_;uL=1;var t=Df(),e=hpe(),r=gpe();function n(a,i){return r(e(a,i,t),a+"")}return h_=n,h_}var f_,dL;function G2(){if(dL)return f_;dL=1;var t=sE(),e=f1(),r=xE(),n=Mu();function a(i,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&r(s,c.length):d=="string"&&s in c)?t(c[s],i):!1}return f_=a,f_}var p_,hL;function vpe(){if(hL)return p_;hL=1;var t=oW(),e=upe(),r=ype(),n=G2(),a=r(function(i,s){if(i==null)return[];var c=s.length;return c>1&&n(i,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(i,t(s,1),[])});return p_=a,p_}var xpe=vpe();const _E=Gr(xpe);function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}function bpe(t,e){return Tpe(t)||_pe(t,e)||Spe(t,e)||wpe()}function wpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Spe(t,e){if(t){if(typeof t=="string")return fL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fL(t,e)}}function fL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _pe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Tpe(t){if(Array.isArray(t))return t}function pL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function m_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pL(Object(r),!0).forEach(function(n){Ape(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ape(t,e,r){return e=Npe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Npe(t){var e=Epe(t,"string");return rg(e)=="symbol"?e:e+""}function Epe(t,e){if(rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jpe(t){return Array.isArray(t)&&Da(t[0])&&Da(t[1])?t.join(" ~ "):t}var kpe=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,x=e.wrapperClassName,T=e.labelClassName,_=e.label,w=e.labelFormatter,E=e.accessibilityLayer,I=E===void 0?!1:E,C=function(){if(p&&p.length){var F={padding:0,margin:0},z=(y?_E(p,y):p).map(function(K,Q){if(K.type==="none")return null;var G=m_({display:"block",paddingTop:4,paddingBottom:4,color:K.color||"#000"},c),X=K.formatter||m||jpe,ne=K.value,de=K.name,me=ne,H=de;if(X&&me!=null&&H!=null){var ee=X(ne,de,K,Q,p);if(Array.isArray(ee)){var te=bpe(ee,2);me=te[0],H=te[1]}else me=ee}return ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Q),style:G},Da(H)?ae.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Da(H)?ae.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ae.createElement("span",{className:"recharts-tooltip-item-value"},me),ae.createElement("span",{className:"recharts-tooltip-item-unit"},K.unit||""))});return ae.createElement("ul",{className:"recharts-tooltip-item-list",style:F},z)}return null},L=m_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),P=m_({margin:0},h),R=!lr(_),N=R?_:"",A=pr("recharts-default-tooltip",x),j=pr("recharts-tooltip-label",T);R&&w&&p!==void 0&&p!==null&&(N=w(_,p));var $=I?{role:"status","aria-live":"assertive"}:{};return ae.createElement("div",KA({className:A,style:L},$),ae.createElement("p",{className:j,style:P},ae.isValidElement(N)?N:"".concat(N)),C())};function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function yv(t,e,r){return e=Cpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cpe(t){var e=Ope(t,"string");return ng(e)=="symbol"?e:e+""}function Ope(t,e){if(ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fp="recharts-tooltip-wrapper",Ipe={visibility:"hidden"};function Rpe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return pr(Fp,yv(yv(yv(yv({},"".concat(Fp,"-right"),mt(r)&&e&&mt(e.x)&&r>=e.x),"".concat(Fp,"-left"),mt(r)&&e&&mt(e.x)&&r<e.x),"".concat(Fp,"-bottom"),mt(n)&&e&&mt(e.y)&&n>=e.y),"".concat(Fp,"-top"),mt(n)&&e&&mt(e.y)&&n<e.y))}function mL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&mt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return s[n]?p:m;if(s[n]){var y=p,x=d[n];return y<x?Math.max(m,d[n]):Math.max(p,d[n])}var T=m+c,_=d[n]+h;return T>_?Math.max(p,d[n]):Math.max(m,d[n])}function Mpe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Ppe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,s=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return s.height>0&&s.width>0&&r?(p=mL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),m=mL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),h=Mpe({translateX:p,translateY:m,useTranslate3d:c})):h=Ipe,{cssProperties:h,cssClasses:Rpe({translateX:p,translateY:m,coordinate:r})}}function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function gL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(r),!0).forEach(function(n){XA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hW(n.key),n)}}function Bpe(t,e,r){return e&&Lpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $pe(t,e,r){return e=Kx(e),Upe(t,dW()?Reflect.construct(e,r||[],Kx(t).constructor):e.apply(t,r))}function Upe(t,e){if(e&&(Jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zpe(t)}function zpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dW=function(){return!!t})()}function Kx(t){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kx(t)}function Vpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QA(t,e)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QA(t,e)}function XA(t,e,r){return e=hW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hW(t){var e=Fpe(t,"string");return Jh(e)=="symbol"?e:e+""}function Fpe(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vL=1,qpe=(function(t){function e(){var r;Dpe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=$pe(this,e,[].concat(a)),XA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),XA(r,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return Vpe(e,t),Bpe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>vL||Math.abs(n.height-this.state.lastBoundingBox.height)>vL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,y=a.isAnimationActive,x=a.offset,T=a.position,_=a.reverseDirection,w=a.useTranslate3d,E=a.viewBox,I=a.wrapperStyle,C=Ppe({allowEscapeViewBox:s,coordinate:p,offsetTopLeft:x,position:T,reverseDirection:_,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:E}),L=C.cssClasses,P=C.cssProperties,R=yL(yL({transition:y&&i?"transform ".concat(c,"ms ").concat(d):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},I);return ae.createElement("div",{tabIndex:-1,className:L,style:R,ref:function(A){n.wrapperNode=A}},h)}}])})(O.PureComponent),Hpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},h0={isSsr:Hpe()};function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function xL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xL(Object(r),!0).forEach(function(n){TE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pW(n.key),n)}}function Kpe(t,e,r){return e&&Wpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qpe(t,e,r){return e=Qx(e),Xpe(t,fW()?Reflect.construct(e,r||[],Qx(t).constructor):e.apply(t,r))}function Xpe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ype(t)}function Ype(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fW=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qx(t)}function Zpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}function YA(t,e){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YA(t,e)}function TE(t,e,r){return e=pW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pW(t){var e=Jpe(t,"string");return ef(e)=="symbol"?e:e+""}function Jpe(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eme(t){return t.dataKey}function tme(t,e){return ae.isValidElement(t)?ae.cloneElement(t,e):typeof t=="function"?ae.createElement(t,e):ae.createElement(kpe,e)}var Lo=(function(t){function e(){return Gpe(this,e),Qpe(this,e,arguments)}return Zpe(e,t),Kpe(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,y=a.isAnimationActive,x=a.offset,T=a.payload,_=a.payloadUniqBy,w=a.position,E=a.reverseDirection,I=a.useTranslate3d,C=a.viewBox,L=a.wrapperStyle,P=T??[];m&&P.length&&(P=aW(T.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),_,eme));var R=P.length>0;return ae.createElement(qpe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:i,coordinate:p,hasPayload:R,offset:x,position:w,reverseDirection:E,useTranslate3d:I,viewBox:C,wrapperStyle:L},tme(h,bL(bL({},this.props),{},{payload:P})))}}])})(O.PureComponent);TE(Lo,"displayName","Tooltip");TE(Lo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!h0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var g_,wL;function rme(){if(wL)return g_;wL=1;var t=il(),e=function(){return t.Date.now()};return g_=e,g_}var y_,SL;function nme(){if(SL)return y_;SL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return y_=e,y_}var v_,_L;function ame(){if(_L)return v_;_L=1;var t=nme(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return v_=r,v_}var x_,TL;function mW(){if(TL)return x_;TL=1;var t=ame(),e=Mu(),r=Mf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||s.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return x_=d,x_}var b_,AL;function ime(){if(AL)return b_;AL=1;var t=Mu(),e=rme(),r=mW(),n="Expected a function",a=Math.max,i=Math.min;function s(c,d,h){var p,m,y,x,T,_,w=0,E=!1,I=!1,C=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(E=!!h.leading,I="maxWait"in h,y=I?a(r(h.maxWait)||0,d):y,C="trailing"in h?!!h.trailing:C);function L(z){var K=p,Q=m;return p=m=void 0,w=z,x=c.apply(Q,K),x}function P(z){return w=z,T=setTimeout(A,d),E?L(z):x}function R(z){var K=z-_,Q=z-w,G=d-K;return I?i(G,y-Q):G}function N(z){var K=z-_,Q=z-w;return _===void 0||K>=d||K<0||I&&Q>=y}function A(){var z=e();if(N(z))return j(z);T=setTimeout(A,R(z))}function j(z){return T=void 0,C&&p?L(z):(p=m=void 0,x)}function $(){T!==void 0&&clearTimeout(T),w=0,p=_=m=T=void 0}function B(){return T===void 0?x:j(e())}function F(){var z=e(),K=N(z);if(p=arguments,m=this,_=z,K){if(T===void 0)return P(_);if(I)return clearTimeout(T),T=setTimeout(A,d),L(_)}return T===void 0&&(T=setTimeout(A,d)),x}return F.cancel=$,F.flush=B,F}return b_=s,b_}var w_,NL;function sme(){if(NL)return w_;NL=1;var t=ime(),e=Mu(),r="Expected a function";function n(a,i,s){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return w_=n,w_}var ome=sme();const gW=Gr(ome);function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function EL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EL(Object(r),!0).forEach(function(n){lme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lme(t,e,r){return e=cme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cme(t){var e=ume(t,"string");return ag(e)=="symbol"?e:e+""}function ume(t,e){if(ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dme(t,e){return mme(t)||pme(t,e)||fme(t,e)||hme()}function hme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fme(t,e){if(t){if(typeof t=="string")return jL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jL(t,e)}}function jL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function mme(t){if(Array.isArray(t))return t}var yW=O.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,s=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,x=t.children,T=t.debounce,_=T===void 0?0:T,w=t.id,E=t.className,I=t.onResize,C=t.style,L=C===void 0?{}:C,P=O.useRef(null),R=O.useRef();R.current=I,O.useImperativeHandle(e,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var N=O.useState({containerWidth:a.width,containerHeight:a.height}),A=dme(N,2),j=A[0],$=A[1],B=O.useCallback(function(z,K){$(function(Q){var G=Math.round(z),X=Math.round(K);return Q.containerWidth===G&&Q.containerHeight===X?Q:{containerWidth:G,containerHeight:X}})},[]);O.useEffect(function(){var z=function(de){var me,H=de[0].contentRect,ee=H.width,te=H.height;B(ee,te),(me=R.current)===null||me===void 0||me.call(R,ee,te)};_>0&&(z=gW(z,_,{trailing:!0,leading:!1}));var K=new ResizeObserver(z),Q=P.current.getBoundingClientRect(),G=Q.width,X=Q.height;return B(G,X),K.observe(P.current),function(){K.disconnect()}},[B,_]);var F=O.useMemo(function(){var z=j.containerWidth,K=j.containerHeight;if(z<0||K<0)return null;Gl(Ad(s)||Ad(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),Gl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Q=Ad(s)?z:s,G=Ad(d)?K:d;r&&r>0&&(Q?G=Q/r:G&&(Q=G*r),y&&G>y&&(G=y)),Gl(Q>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Q,G,s,d,p,m,r);var X=!Array.isArray(x)&&Hl(x.type).endsWith("Chart");return ae.Children.map(x,function(ne){return ae.isValidElement(ne)?O.cloneElement(ne,vv({width:Q,height:G},X?{style:vv({height:"100%",width:"100%",maxHeight:G,maxWidth:Q},ne.props.style)}:{})):ne})},[r,x,d,y,m,p,j,s]);return ae.createElement("div",{id:w?"".concat(w):void 0,className:pr("recharts-responsive-container",E),style:vv(vv({},L),{},{width:s,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:P},F)}),AE=function(e){return null};AE.displayName="Cell";function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function kL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(r),!0).forEach(function(n){gme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gme(t,e,r){return e=yme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yme(t){var e=vme(t,"string");return ig(e)=="symbol"?e:e+""}function vme(t,e){if(ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rh={widthCache:{},cacheCount:0},xme=2e3,bme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CL="recharts_measurement_span";function wme(t){var e=ZA({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var bm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||h0.isSsr)return{width:0,height:0};var n=wme(r),a=JSON.stringify({text:e,copyStyle:n});if(rh.widthCache[a])return rh.widthCache[a];try{var i=document.getElementById(CL);i||(i=document.createElement("span"),i.setAttribute("id",CL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=ZA(ZA({},bme),n);Object.assign(i.style,s),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return rh.widthCache[a]=d,++rh.cacheCount>xme&&(rh.cacheCount=0,rh.widthCache={}),d}catch{return{width:0,height:0}}},Sme=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function Xx(t,e){return Nme(t)||Ame(t,e)||Tme(t,e)||_me()}function _me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tme(t,e){if(t){if(typeof t=="string")return OL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OL(t,e)}}function OL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ame(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Nme(t){if(Array.isArray(t))return t}function Eme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kme(n.key),n)}}function jme(t,e,r){return e&&IL(t.prototype,e),r&&IL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kme(t){var e=Cme(t,"string");return sg(e)=="symbol"?e:e+""}function Cme(t,e){if(sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var RL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ML=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ome=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ime=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Rme=Object.keys(vW),ph="NaN";function Mme(t,e){return t*vW[e]}var xv=(function(){function t(e,r){Eme(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Ome.test(r)&&(this.num=NaN,this.unit=""),Rme.includes(r)&&(this.num=Mme(e,r),this.unit="px")}return jme(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Ime.exec(r))!==null&&n!==void 0?n:[],i=Xx(a,3),s=i[1],c=i[2];return new t(parseFloat(s),c??"")}}])})();function xW(t){if(t.includes(ph))return ph;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=RL.exec(e))!==null&&r!==void 0?r:[],a=Xx(n,4),i=a[1],s=a[2],c=a[3],d=xv.parse(i??""),h=xv.parse(c??""),p=s==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return ph;e=e.replace(RL,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=ML.exec(e))!==null&&m!==void 0?m:[],x=Xx(y,4),T=x[1],_=x[2],w=x[3],E=xv.parse(T??""),I=xv.parse(w??""),C=_==="+"?E.add(I):E.subtract(I);if(C.isNaN())return ph;e=e.replace(ML,C.toString())}return e}var PL=/\(([^()]*)\)/;function Pme(t){for(var e=t;e.includes("(");){var r=PL.exec(e),n=Xx(r,2),a=n[1];e=e.replace(PL,xW(a))}return e}function Dme(t){var e=t.replace(/\s+/g,"");return e=Pme(e),e=xW(e),e}function Lme(t){try{return Dme(t)}catch{return ph}}function S_(t){var e=Lme(t.slice(5,-1));return e===ph?"":e}var Bme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$me=["dx","dy","angle","className","breakAll"];function JA(){return JA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JA.apply(this,arguments)}function DL(t,e){if(t==null)return{};var r=Ume(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ume(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function LL(t,e){return qme(t)||Fme(t,e)||Vme(t,e)||zme()}function zme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vme(t,e){if(t){if(typeof t=="string")return BL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BL(t,e)}}function BL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function qme(t){if(Array.isArray(t))return t}var bW=/[ \f\n\r\t\v\u2028\u2029]+/,wW=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];lr(r)||(n?i=r.toString().split(""):i=r.toString().split(bW));var s=i.map(function(d){return{word:d,width:bm(d,a).width}}),c=n?0:bm("",a).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},Hme=function(e,r,n,a,i){var s=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=mt(s),m=c,y=function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Q.reduce(function(G,X){var ne=X.word,de=X.width,me=G[G.length-1];if(me&&(a==null||i||me.width+de+n<Number(a)))me.words.push(ne),me.width+=de+n;else{var H={words:[ne],width:de};G.push(H)}return G},[])},x=y(r),T=function(Q){return Q.reduce(function(G,X){return G.width>X.width?G:X})};if(!p)return x;for(var _="",w=function(Q){var G=m.slice(0,Q),X=wW({breakAll:h,style:d,children:G+_}).wordsWithComputedWidth,ne=y(X),de=ne.length>s||T(ne).width>Number(a);return[de,ne]},E=0,I=m.length-1,C=0,L;E<=I&&C<=m.length-1;){var P=Math.floor((E+I)/2),R=P-1,N=w(R),A=LL(N,2),j=A[0],$=A[1],B=w(P),F=LL(B,1),z=F[0];if(!j&&!z&&(E=P+1),j&&z&&(I=P-1),!j&&z){L=$;break}C++}return L||x},$L=function(e){var r=lr(e)?[]:e.toString().split(bW);return[{words:r}]},Gme=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,s=e.breakAll,c=e.maxLines;if((r||n)&&!h0.isSsr){var d,h,p=wW({breakAll:s,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return $L(a);return Hme({breakAll:s,children:a,maxLines:c,style:i},d,h,r,n)}return $L(a)},UL="#808080",tf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,x=y===void 0?"start":y,T=e.verticalAnchor,_=T===void 0?"end":T,w=e.fill,E=w===void 0?UL:w,I=DL(e,Bme),C=O.useMemo(function(){return Gme({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:m,style:I.style,width:I.width})},[I.breakAll,I.children,I.maxLines,m,I.style,I.width]),L=I.dx,P=I.dy,R=I.angle,N=I.className,A=I.breakAll,j=DL(I,$me);if(!Da(n)||!Da(i))return null;var $=n+(mt(L)?L:0),B=i+(mt(P)?P:0),F;switch(_){case"start":F=S_("calc(".concat(h,")"));break;case"middle":F=S_("calc(".concat((C.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:F=S_("calc(".concat(C.length-1," * -").concat(c,")"));break}var z=[];if(m){var K=C[0].width,Q=I.width;z.push("scale(".concat((mt(Q)?Q/K:1)/K,")"))}return R&&z.push("rotate(".concat(R,", ").concat($,", ").concat(B,")")),z.length&&(j.transform=z.join(" ")),ae.createElement("text",JA({},zt(j,!0),{x:$,y:B,className:pr("recharts-text",N),textAnchor:x,fill:E.includes("url")?UL:E}),C.map(function(G,X){var ne=G.words.join(A?"":" ");return ae.createElement("tspan",{x:$,dy:X===0?F:c,key:"".concat(ne,"-").concat(X)},ne)}))};function xu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wme(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function NE(t){let e,r,n;t.length!==2?(e=xu,r=(c,d)=>xu(t(c),d),n=(c,d)=>t(c)-d):(e=t===xu||t===Wme?t:Kme,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function s(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:s,right:i}}function Kme(){return 0}function SW(t){return t===null?NaN:+t}function*Qme(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Xme=NE(xu),p1=Xme.right;NE(SW).center;class zL extends Map{constructor(e,r=Jme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(VL(this,e))}has(e){return super.has(VL(this,e))}set(e,r){return super.set(Yme(this,e),r)}delete(e){return super.delete(Zme(this,e))}}function VL({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Yme({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Zme({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Jme(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ege(t=xu){if(t===xu)return _W;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function _W(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const tge=Math.sqrt(50),rge=Math.sqrt(10),nge=Math.sqrt(2);function Yx(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=tge?10:i>=rge?5:i>=nge?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/s,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*s,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?Yx(t,e,r*2):[c,d,h]}function eN(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,s]=n?Yx(e,t,r):Yx(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(s<0)for(let h=0;h<c;++h)d[h]=(i-h)/-s;else for(let h=0;h<c;++h)d[h]=(i-h)*s;else if(s<0)for(let h=0;h<c;++h)d[h]=(a+h)/-s;else for(let h=0;h<c;++h)d[h]=(a+h)*s;return d}function tN(t,e,r){return e=+e,t=+t,r=+r,Yx(t,e,r)[2]}function rN(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?tN(e,t,r):tN(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function FL(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function qL(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function TW(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?_W:ege(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),x=Math.max(r,Math.floor(e-h*m/d+y)),T=Math.min(n,Math.floor(e+(d-h)*m/d+y));TW(t,e,x,T,a)}const i=t[e];let s=r,c=n;for(qp(t,r,e),a(t[n],i)>0&&qp(t,r,n);s<c;){for(qp(t,s,c),++s,--c;a(t[s],i)<0;)++s;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?qp(t,r,c):(++c,qp(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function qp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function age(t,e,r){if(t=Float64Array.from(Qme(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return qL(t);if(e>=1)return FL(t);var n,a=(n-1)*e,i=Math.floor(a),s=FL(TW(t,i).subarray(0,i+1)),c=qL(t.subarray(i+1));return s+(c-s)*(a-i)}}function ige(t,e,r=SW){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),s=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return s+(c-s)*(a-i)}}function sge(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function no(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function fc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nN=Symbol("implicit");function EE(){var t=new zL,e=[],r=[],n=nN;function a(i){let s=t.get(i);if(s===void 0){if(n!==nN)return n;t.set(i,s=e.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new zL;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return EE(e,r).unknown(n)},no.apply(a,arguments),a}function og(){var t=EE().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,s,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,x=a<n,T=x?a:n,_=x?n:a;i=(_-T)/Math.max(1,y-d+h*2),c&&(i=Math.floor(i)),T+=(_-T-i*(y-d))*p,s=i*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=sge(y).map(function(E){return T+i*E});return r(x?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(y){return arguments.length?(c=!!y,m()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return og(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},no.apply(m(),arguments)}function AW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return AW(e())},t}function wm(){return AW(og.apply(null,arguments).paddingInner(1))}function jE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function NW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function m1(){}var lg=.7,Zx=1/lg,Eh="\\s*([+-]?\\d+)\\s*",cg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oge=/^#([0-9a-f]{3,8})$/,lge=new RegExp(`^rgb\\(${Eh},${Eh},${Eh}\\)$`),cge=new RegExp(`^rgb\\(${Wo},${Wo},${Wo}\\)$`),uge=new RegExp(`^rgba\\(${Eh},${Eh},${Eh},${cg}\\)$`),dge=new RegExp(`^rgba\\(${Wo},${Wo},${Wo},${cg}\\)$`),hge=new RegExp(`^hsl\\(${cg},${Wo},${Wo}\\)$`),fge=new RegExp(`^hsla\\(${cg},${Wo},${Wo},${cg}\\)$`),HL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jE(m1,ug,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:GL,formatHex:GL,formatHex8:pge,formatHsl:mge,formatRgb:WL,toString:WL});function GL(){return this.rgb().formatHex()}function pge(){return this.rgb().formatHex8()}function mge(){return EW(this).formatHsl()}function WL(){return this.rgb().formatRgb()}function ug(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=oge.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?KL(e):r===3?new ts(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?bv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?bv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lge.exec(t))?new ts(e[1],e[2],e[3],1):(e=cge.exec(t))?new ts(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uge.exec(t))?bv(e[1],e[2],e[3],e[4]):(e=dge.exec(t))?bv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hge.exec(t))?YL(e[1],e[2]/100,e[3]/100,1):(e=fge.exec(t))?YL(e[1],e[2]/100,e[3]/100,e[4]):HL.hasOwnProperty(t)?KL(HL[t]):t==="transparent"?new ts(NaN,NaN,NaN,0):null}function KL(t){return new ts(t>>16&255,t>>8&255,t&255,1)}function bv(t,e,r,n){return n<=0&&(t=e=r=NaN),new ts(t,e,r,n)}function gge(t){return t instanceof m1||(t=ug(t)),t?(t=t.rgb(),new ts(t.r,t.g,t.b,t.opacity)):new ts}function aN(t,e,r,n){return arguments.length===1?gge(t):new ts(t,e,r,n??1)}function ts(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}jE(ts,aN,NW(m1,{brighter(t){return t=t==null?Zx:Math.pow(Zx,t),new ts(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?lg:Math.pow(lg,t),new ts(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ts(Ld(this.r),Ld(this.g),Ld(this.b),Jx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QL,formatHex:QL,formatHex8:yge,formatRgb:XL,toString:XL}));function QL(){return`#${Nd(this.r)}${Nd(this.g)}${Nd(this.b)}`}function yge(){return`#${Nd(this.r)}${Nd(this.g)}${Nd(this.b)}${Nd((isNaN(this.opacity)?1:this.opacity)*255)}`}function XL(){const t=Jx(this.opacity);return`${t===1?"rgb(":"rgba("}${Ld(this.r)}, ${Ld(this.g)}, ${Ld(this.b)}${t===1?")":`, ${t})`}`}function Jx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ld(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Nd(t){return t=Ld(t),(t<16?"0":"")+t.toString(16)}function YL(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new yo(t,e,r,n)}function EW(t){if(t instanceof yo)return new yo(t.h,t.s,t.l,t.opacity);if(t instanceof m1||(t=ug(t)),!t)return new yo;if(t instanceof yo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),s=NaN,c=i-a,d=(i+a)/2;return c?(e===i?s=(r-n)/c+(r<n)*6:r===i?s=(n-e)/c+2:s=(e-r)/c+4,c/=d<.5?i+a:2-i-a,s*=60):c=d>0&&d<1?0:s,new yo(s,c,d,t.opacity)}function vge(t,e,r,n){return arguments.length===1?EW(t):new yo(t,e,r,n??1)}function yo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}jE(yo,vge,NW(m1,{brighter(t){return t=t==null?Zx:Math.pow(Zx,t),new yo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?lg:Math.pow(lg,t),new yo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ts(__(t>=240?t-240:t+120,a,n),__(t,a,n),__(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new yo(ZL(this.h),wv(this.s),wv(this.l),Jx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jx(this.opacity);return`${t===1?"hsl(":"hsla("}${ZL(this.h)}, ${wv(this.s)*100}%, ${wv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZL(t){return t=(t||0)%360,t<0?t+360:t}function wv(t){return Math.max(0,Math.min(1,t||0))}function __(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const kE=t=>()=>t;function xge(t,e){return function(r){return t+r*e}}function bge(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function wge(t){return(t=+t)==1?jW:function(e,r){return r-e?bge(e,r,t):kE(isNaN(e)?r:e)}}function jW(t,e){var r=e-t;return r?xge(t,r):kE(isNaN(t)?e:t)}const JL=(function t(e){var r=wge(e);function n(a,i){var s=r((a=aN(a)).r,(i=aN(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=jW(a.opacity,i.opacity);return function(p){return a.r=s(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function Sge(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function _ge(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tge(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Lf(t[s],e[s]);for(;s<r;++s)i[s]=e[s];return function(c){for(s=0;s<n;++s)i[s]=a[s](c);return i}}function Age(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function eb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Nge(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Lf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var iN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T_=new RegExp(iN.source,"g");function Ege(t){return function(){return t}}function jge(t){return function(e){return t(e)+""}}function kge(t,e){var r=iN.lastIndex=T_.lastIndex=0,n,a,i,s=-1,c=[],d=[];for(t=t+"",e=e+"";(n=iN.exec(t))&&(a=T_.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[s]?c[s]+=i:c[++s]=i),(n=n[0])===(a=a[0])?c[s]?c[s]+=a:c[++s]=a:(c[++s]=null,d.push({i:s,x:eb(n,a)})),r=T_.lastIndex;return r<e.length&&(i=e.slice(r),c[s]?c[s]+=i:c[++s]=i),c.length<2?d[0]?jge(d[0].x):Ege(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Lf(t,e){var r=typeof e,n;return e==null||r==="boolean"?kE(e):(r==="number"?eb:r==="string"?(n=ug(e))?(e=n,JL):kge:e instanceof ug?JL:e instanceof Date?Age:_ge(e)?Sge:Array.isArray(e)?Tge:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Nge:eb)(t,e)}function CE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Cge(t,e){e===void 0&&(e=t,t=Lf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[c](s-c)}}function Oge(t){return function(){return t}}function tb(t){return+t}var eB=[0,1];function Mi(t){return t}function sN(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Oge(isNaN(e)?NaN:.5)}function Ige(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Rge(t,e,r){var n=t[0],a=t[1],i=e[0],s=e[1];return a<n?(n=sN(a,n),i=r(s,i)):(n=sN(n,a),i=r(i,s)),function(c){return i(n(c))}}function Mge(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)a[s]=sN(t[s],t[s+1]),i[s]=r(e[s],e[s+1]);return function(c){var d=p1(t,c,1,n)-1;return i[d](a[d](c))}}function g1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function W2(){var t=eB,e=eB,r=Lf,n,a,i,s=Mi,c,d,h;function p(){var y=Math.min(t.length,e.length);return s!==Mi&&(s=Ige(t[0],t[y-1])),c=y>2?Mge:Rge,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?i:(d||(d=c(t.map(n),e,r)))(n(s(y)))}return m.invert=function(y){return s(a((h||(h=c(e,t.map(n),eb)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,tb),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=CE,p()},m.clamp=function(y){return arguments.length?(s=y?!0:Mi,p()):s!==Mi},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(i=y,m):i},function(y,x){return n=y,a=x,p()}}function OE(){return W2()(Mi,Mi)}function Pge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function rf(t){return t=rb(Math.abs(t)),t?t[1]:NaN}function Dge(t,e){return function(r,n){for(var a=r.length,i=[],s=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[s=(s+1)%t.length];return i.reverse().join(e)}}function Lge(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Bge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dg(t){if(!(e=Bge.exec(t)))throw new Error("invalid format: "+t);var e;return new IE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}dg.prototype=IE.prototype;function IE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}IE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $ge(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var nb;function Uge(t,e){var r=rb(t,e);if(!r)return nb=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(nb=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+rb(t,Math.max(0,e+i-1))[0]}function tB(t,e){var r=rb(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const rB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Pge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>tB(t*100,e),r:tB,s:Uge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function nB(t){return t}var aB=Array.prototype.map,iB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zge(t){var e=t.grouping===void 0||t.thousands===void 0?nB:Dge(aB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?nB:Lge(aB.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=dg(m);var x=m.fill,T=m.align,_=m.sign,w=m.symbol,E=m.zero,I=m.width,C=m.comma,L=m.precision,P=m.trim,R=m.type;R==="n"?(C=!0,R="g"):rB[R]||(L===void 0&&(L=12),P=!0,R="g"),(E||x==="0"&&T==="=")&&(E=!0,x="0",T="=");var N=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():""),A=(w==="$"?n:/[%p]/.test(R)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),j=rB[R],$=/[defgprs%]/.test(R);L=L===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function B(F){var z=N,K=A,Q,G,X;if(R==="c")K=j(F)+K,F="";else{F=+F;var ne=F<0||1/F<0;if(F=isNaN(F)?d:j(Math.abs(F),L),P&&(F=$ge(F)),ne&&+F==0&&_!=="+"&&(ne=!1),z=(ne?_==="("?_:c:_==="-"||_==="("?"":_)+z,K=(R==="s"&&!isNaN(F)&&nb!==void 0?iB[8+nb/3]:"")+K+(ne&&_==="("?")":""),$){for(Q=-1,G=F.length;++Q<G;)if(X=F.charCodeAt(Q),48>X||X>57){K=(X===46?a+F.slice(Q+1):F.slice(Q))+K,F=F.slice(0,Q);break}}}C&&!E&&(F=e(F,1/0));var de=z.length+F.length+K.length,me=de<I?new Array(I-de+1).join(x):"";switch(C&&E&&(F=e(me+F,me.length?I-K.length:1/0),me=""),T){case"<":F=z+F+K+me;break;case"=":F=z+me+F+K;break;case"^":F=me.slice(0,de=me.length>>1)+z+F+K+me.slice(de);break;default:F=me+z+F+K;break}return i(F)}return B.toString=function(){return m+""},B}function p(m,y){var x=Math.max(-8,Math.min(8,Math.floor(rf(y)/3)))*3,T=Math.pow(10,-x),_=h((m=dg(m),m.type="f",m),{suffix:iB[8+x/3]});return function(w){return _(T*w)}}return{format:h,formatPrefix:p}}var Sv,RE,kW;Vge({thousands:",",grouping:[3],currency:["$",""]});function Vge(t){return Sv=zge(t),RE=Sv.format,kW=Sv.formatPrefix,Sv}function Fge(t){return Math.max(0,-rf(Math.abs(t)))}function qge(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rf(e)/3)))*3-rf(Math.abs(t)))}function Hge(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rf(e)-rf(t))+1}function CW(t,e,r,n){var a=rN(t,e,r),i;switch(n=dg(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=qge(a,s))&&(n.precision=i),kW(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Hge(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Fge(a))&&(n.precision=i-(n.type==="%")*2);break}}return RE(n)}function Pu(t){var e=t.domain;return t.ticks=function(r){var n=e();return eN(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return CW(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,s=n[a],c=n[i],d,h,p=10;for(c<s&&(h=s,s=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=tN(s,c,r),h===d)return n[a]=s,n[i]=c,e(n);if(h>0)s=Math.floor(s/h)*h,c=Math.ceil(c/h)*h;else if(h<0)s=Math.ceil(s*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function ab(){var t=OE();return t.copy=function(){return g1(t,ab())},no.apply(t,arguments),Pu(t)}function OW(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,tb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return OW(t).unknown(e)},t=arguments.length?Array.from(t,tb):[0,1],Pu(r)}function IW(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),t[r]=e.floor(a),t[n]=e.ceil(i),t}function sB(t){return Math.log(t)}function oB(t){return Math.exp(t)}function Gge(t){return-Math.log(-t)}function Wge(t){return-Math.exp(-t)}function Kge(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Qge(t){return t===10?Kge:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Xge(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function lB(t){return(e,r)=>-t(-e,r)}function ME(t){const e=t(sB,oB),r=e.domain;let n=10,a,i;function s(){return a=Xge(n),i=Qge(n),r()[0]<0?(a=lB(a),i=lB(i),t(Gge,Wge)):t(sB,oB),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=a(h),x=a(p),T,_;const w=c==null?10:+c;let E=[];if(!(n%1)&&x-y<w){if(y=Math.floor(y),x=Math.ceil(x),h>0){for(;y<=x;++y)for(T=1;T<n;++T)if(_=y<0?T/i(-y):T*i(y),!(_<h)){if(_>p)break;E.push(_)}}else for(;y<=x;++y)for(T=n-1;T>=1;--T)if(_=y>0?T/i(-y):T*i(y),!(_<h)){if(_>p)break;E.push(_)}E.length*2<w&&(E=eN(h,p,w))}else E=eN(y,x,Math.min(x-y,w)).map(i);return m?E.reverse():E},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=dg(d)).precision==null&&(d.trim=!0),d=RE(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(IW(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function RW(){const t=ME(W2()).domain([1,10]);return t.copy=()=>g1(t,RW()).base(t.base()),no.apply(t,arguments),t}function cB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function uB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function PE(t){var e=1,r=t(cB(e),uB(e));return r.constant=function(n){return arguments.length?t(cB(e=+n),uB(e)):e},Pu(r)}function MW(){var t=PE(W2());return t.copy=function(){return g1(t,MW()).constant(t.constant())},no.apply(t,arguments)}function dB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Yge(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Zge(t){return t<0?-t*t:t*t}function DE(t){var e=t(Mi,Mi),r=1;function n(){return r===1?t(Mi,Mi):r===.5?t(Yge,Zge):t(dB(r),dB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Pu(e)}function LE(){var t=DE(W2());return t.copy=function(){return g1(t,LE()).exponent(t.exponent())},no.apply(t,arguments),t}function Jge(){return LE.apply(null,arguments).exponent(.5)}function hB(t){return Math.sign(t)*t*t}function e1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function PW(){var t=OE(),e=[0,1],r=!1,n;function a(i){var s=e1e(t(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return t.invert(hB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,tb)).map(hB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return PW(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},no.apply(a,arguments),Pu(a)}function DW(){var t=[],e=[],r=[],n;function a(){var s=0,c=Math.max(1,e.length);for(r=new Array(c-1);++s<c;)r[s-1]=ige(t,s/c);return i}function i(s){return s==null||isNaN(s=+s)?n:e[p1(r,s)]}return i.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(xu),a()},i.range=function(s){return arguments.length?(e=Array.from(s),a()):e.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return DW().domain(t).range(e).unknown(n)},no.apply(i,arguments)}function LW(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function s(d){return d!=null&&d<=d?a[p1(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},s.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},s.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},s.unknown=function(d){return arguments.length&&(i=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return LW().domain([t,e]).range(a).unknown(i)},no.apply(Pu(s),arguments)}function BW(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[p1(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var s=e.indexOf(i);return[t[s-1],t[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return BW().domain(t).range(e).unknown(r)},no.apply(a,arguments)}const A_=new Date,N_=new Date;function za(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const s=a(i),c=a.ceil(i);return i-s<c-i?s:c},a.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<s)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<s);return d},a.filter=i=>za(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!i(s););else for(;--c>=0;)for(;e(s,1),!i(s););}),r&&(a.count=(i,s)=>(A_.setTime(+i),N_.setTime(+s),t(A_),t(N_),Math.floor(r(A_,N_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const ib=za(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ib.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?za(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):ib);ib.range;const $l=1e3,Qs=$l*60,Ul=Qs*60,nc=Ul*24,BE=nc*7,fB=nc*30,E_=nc*365,Ed=za(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*$l)},(t,e)=>(e-t)/$l,t=>t.getUTCSeconds());Ed.range;const $E=za(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$l)},(t,e)=>{t.setTime(+t+e*Qs)},(t,e)=>(e-t)/Qs,t=>t.getMinutes());$E.range;const UE=za(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Qs)},(t,e)=>(e-t)/Qs,t=>t.getUTCMinutes());UE.range;const zE=za(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$l-t.getMinutes()*Qs)},(t,e)=>{t.setTime(+t+e*Ul)},(t,e)=>(e-t)/Ul,t=>t.getHours());zE.range;const VE=za(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ul)},(t,e)=>(e-t)/Ul,t=>t.getUTCHours());VE.range;const y1=za(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qs)/nc,t=>t.getDate()-1);y1.range;const K2=za(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/nc,t=>t.getUTCDate()-1);K2.range;const $W=za(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/nc,t=>Math.floor(t/nc));$W.range;function f0(t){return za(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Qs)/BE)}const Q2=f0(0),sb=f0(1),t1e=f0(2),r1e=f0(3),nf=f0(4),n1e=f0(5),a1e=f0(6);Q2.range;sb.range;t1e.range;r1e.range;nf.range;n1e.range;a1e.range;function p0(t){return za(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/BE)}const X2=p0(0),ob=p0(1),i1e=p0(2),s1e=p0(3),af=p0(4),o1e=p0(5),l1e=p0(6);X2.range;ob.range;i1e.range;s1e.range;af.range;o1e.range;l1e.range;const FE=za(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());FE.range;const qE=za(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());qE.range;const ac=za(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ac.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:za(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ac.range;const ic=za(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ic.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:za(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ic.range;function UW(t,e,r,n,a,i){const s=[[Ed,1,$l],[Ed,5,5*$l],[Ed,15,15*$l],[Ed,30,30*$l],[i,1,Qs],[i,5,5*Qs],[i,15,15*Qs],[i,30,30*Qs],[a,1,Ul],[a,3,3*Ul],[a,6,6*Ul],[a,12,12*Ul],[n,1,nc],[n,2,2*nc],[r,1,BE],[e,1,fB],[e,3,3*fB],[t,1,E_]];function c(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const x=m&&typeof m.range=="function"?m:d(h,p,m),T=x?x.range(h,+p+1):[];return y?T.reverse():T}function d(h,p,m){const y=Math.abs(p-h)/m,x=NE(([,,w])=>w).right(s,y);if(x===s.length)return t.every(rN(h/E_,p/E_,m));if(x===0)return ib.every(Math.max(rN(h,p,m),1));const[T,_]=s[y/s[x-1][2]<s[x][2]/y?x-1:x];return T.every(_)}return[c,d]}const[c1e,u1e]=UW(ic,qE,X2,$W,VE,UE),[d1e,h1e]=UW(ac,FE,Q2,y1,zE,$E);function j_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function k_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Hp(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function f1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,s=t.shortDays,c=t.months,d=t.shortMonths,h=Gp(a),p=Wp(a),m=Gp(i),y=Wp(i),x=Gp(s),T=Wp(s),_=Gp(c),w=Wp(c),E=Gp(d),I=Wp(d),C={a:X,A:ne,b:de,B:me,c:null,d:xB,e:xB,f:D1e,g:G1e,G:K1e,H:R1e,I:M1e,j:P1e,L:zW,m:L1e,M:B1e,p:H,q:ee,Q:SB,s:_B,S:$1e,u:U1e,U:z1e,V:V1e,w:F1e,W:q1e,x:null,X:null,y:H1e,Y:W1e,Z:Q1e,"%":wB},L={a:te,A:Oe,b:re,B:ce,c:null,d:bB,e:bB,f:J1e,g:cye,G:dye,H:X1e,I:Y1e,j:Z1e,L:FW,m:eye,M:tye,p:he,q:Ie,Q:SB,s:_B,S:rye,u:nye,U:aye,V:iye,w:sye,W:oye,x:null,X:null,y:lye,Y:uye,Z:hye,"%":wB},P={a:$,A:B,b:F,B:z,c:K,d:yB,e:yB,f:k1e,g:gB,G:mB,H:vB,I:vB,j:A1e,L:j1e,m:T1e,M:N1e,p:j,q:_1e,Q:O1e,s:I1e,S:E1e,u:v1e,U:x1e,V:b1e,w:y1e,W:w1e,x:Q,X:G,y:gB,Y:mB,Z:S1e,"%":C1e};C.x=R(r,C),C.X=R(n,C),C.c=R(e,C),L.x=R(r,L),L.X=R(n,L),L.c=R(e,L);function R(Se,We){return function(Me){var _e=[],gt=-1,et=0,pt=Se.length,st,xe,be;for(Me instanceof Date||(Me=new Date(+Me));++gt<pt;)Se.charCodeAt(gt)===37&&(_e.push(Se.slice(et,gt)),(xe=pB[st=Se.charAt(++gt)])!=null?st=Se.charAt(++gt):xe=st==="e"?" ":"0",(be=We[st])&&(st=be(Me,xe)),_e.push(st),et=gt+1);return _e.push(Se.slice(et,gt)),_e.join("")}}function N(Se,We){return function(Me){var _e=Hp(1900,void 0,1),gt=A(_e,Se,Me+="",0),et,pt;if(gt!=Me.length)return null;if("Q"in _e)return new Date(_e.Q);if("s"in _e)return new Date(_e.s*1e3+("L"in _e?_e.L:0));if(We&&!("Z"in _e)&&(_e.Z=0),"p"in _e&&(_e.H=_e.H%12+_e.p*12),_e.m===void 0&&(_e.m="q"in _e?_e.q:0),"V"in _e){if(_e.V<1||_e.V>53)return null;"w"in _e||(_e.w=1),"Z"in _e?(et=k_(Hp(_e.y,0,1)),pt=et.getUTCDay(),et=pt>4||pt===0?ob.ceil(et):ob(et),et=K2.offset(et,(_e.V-1)*7),_e.y=et.getUTCFullYear(),_e.m=et.getUTCMonth(),_e.d=et.getUTCDate()+(_e.w+6)%7):(et=j_(Hp(_e.y,0,1)),pt=et.getDay(),et=pt>4||pt===0?sb.ceil(et):sb(et),et=y1.offset(et,(_e.V-1)*7),_e.y=et.getFullYear(),_e.m=et.getMonth(),_e.d=et.getDate()+(_e.w+6)%7)}else("W"in _e||"U"in _e)&&("w"in _e||(_e.w="u"in _e?_e.u%7:"W"in _e?1:0),pt="Z"in _e?k_(Hp(_e.y,0,1)).getUTCDay():j_(Hp(_e.y,0,1)).getDay(),_e.m=0,_e.d="W"in _e?(_e.w+6)%7+_e.W*7-(pt+5)%7:_e.w+_e.U*7-(pt+6)%7);return"Z"in _e?(_e.H+=_e.Z/100|0,_e.M+=_e.Z%100,k_(_e)):j_(_e)}}function A(Se,We,Me,_e){for(var gt=0,et=We.length,pt=Me.length,st,xe;gt<et;){if(_e>=pt)return-1;if(st=We.charCodeAt(gt++),st===37){if(st=We.charAt(gt++),xe=P[st in pB?We.charAt(gt++):st],!xe||(_e=xe(Se,Me,_e))<0)return-1}else if(st!=Me.charCodeAt(_e++))return-1}return _e}function j(Se,We,Me){var _e=h.exec(We.slice(Me));return _e?(Se.p=p.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function $(Se,We,Me){var _e=x.exec(We.slice(Me));return _e?(Se.w=T.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function B(Se,We,Me){var _e=m.exec(We.slice(Me));return _e?(Se.w=y.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function F(Se,We,Me){var _e=E.exec(We.slice(Me));return _e?(Se.m=I.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function z(Se,We,Me){var _e=_.exec(We.slice(Me));return _e?(Se.m=w.get(_e[0].toLowerCase()),Me+_e[0].length):-1}function K(Se,We,Me){return A(Se,e,We,Me)}function Q(Se,We,Me){return A(Se,r,We,Me)}function G(Se,We,Me){return A(Se,n,We,Me)}function X(Se){return s[Se.getDay()]}function ne(Se){return i[Se.getDay()]}function de(Se){return d[Se.getMonth()]}function me(Se){return c[Se.getMonth()]}function H(Se){return a[+(Se.getHours()>=12)]}function ee(Se){return 1+~~(Se.getMonth()/3)}function te(Se){return s[Se.getUTCDay()]}function Oe(Se){return i[Se.getUTCDay()]}function re(Se){return d[Se.getUTCMonth()]}function ce(Se){return c[Se.getUTCMonth()]}function he(Se){return a[+(Se.getUTCHours()>=12)]}function Ie(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var We=R(Se+="",C);return We.toString=function(){return Se},We},parse:function(Se){var We=N(Se+="",!1);return We.toString=function(){return Se},We},utcFormat:function(Se){var We=R(Se+="",L);return We.toString=function(){return Se},We},utcParse:function(Se){var We=N(Se+="",!0);return We.toString=function(){return Se},We}}}var pB={"-":"",_:" ",0:"0"},ei=/^\s*\d+/,p1e=/^%/,m1e=/[\\^$*+?|[\]().{}]/g;function Vr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function g1e(t){return t.replace(m1e,"\\$&")}function Gp(t){return new RegExp("^(?:"+t.map(g1e).join("|")+")","i")}function Wp(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function y1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function v1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function x1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function b1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function w1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function mB(t,e,r){var n=ei.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function gB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function S1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function _1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function T1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function yB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function A1e(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function vB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function N1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function E1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function j1e(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function k1e(t,e,r){var n=ei.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function C1e(t,e,r){var n=p1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function O1e(t,e,r){var n=ei.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function I1e(t,e,r){var n=ei.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function xB(t,e){return Vr(t.getDate(),e,2)}function R1e(t,e){return Vr(t.getHours(),e,2)}function M1e(t,e){return Vr(t.getHours()%12||12,e,2)}function P1e(t,e){return Vr(1+y1.count(ac(t),t),e,3)}function zW(t,e){return Vr(t.getMilliseconds(),e,3)}function D1e(t,e){return zW(t,e)+"000"}function L1e(t,e){return Vr(t.getMonth()+1,e,2)}function B1e(t,e){return Vr(t.getMinutes(),e,2)}function $1e(t,e){return Vr(t.getSeconds(),e,2)}function U1e(t){var e=t.getDay();return e===0?7:e}function z1e(t,e){return Vr(Q2.count(ac(t)-1,t),e,2)}function VW(t){var e=t.getDay();return e>=4||e===0?nf(t):nf.ceil(t)}function V1e(t,e){return t=VW(t),Vr(nf.count(ac(t),t)+(ac(t).getDay()===4),e,2)}function F1e(t){return t.getDay()}function q1e(t,e){return Vr(sb.count(ac(t)-1,t),e,2)}function H1e(t,e){return Vr(t.getFullYear()%100,e,2)}function G1e(t,e){return t=VW(t),Vr(t.getFullYear()%100,e,2)}function W1e(t,e){return Vr(t.getFullYear()%1e4,e,4)}function K1e(t,e){var r=t.getDay();return t=r>=4||r===0?nf(t):nf.ceil(t),Vr(t.getFullYear()%1e4,e,4)}function Q1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Vr(e/60|0,"0",2)+Vr(e%60,"0",2)}function bB(t,e){return Vr(t.getUTCDate(),e,2)}function X1e(t,e){return Vr(t.getUTCHours(),e,2)}function Y1e(t,e){return Vr(t.getUTCHours()%12||12,e,2)}function Z1e(t,e){return Vr(1+K2.count(ic(t),t),e,3)}function FW(t,e){return Vr(t.getUTCMilliseconds(),e,3)}function J1e(t,e){return FW(t,e)+"000"}function eye(t,e){return Vr(t.getUTCMonth()+1,e,2)}function tye(t,e){return Vr(t.getUTCMinutes(),e,2)}function rye(t,e){return Vr(t.getUTCSeconds(),e,2)}function nye(t){var e=t.getUTCDay();return e===0?7:e}function aye(t,e){return Vr(X2.count(ic(t)-1,t),e,2)}function qW(t){var e=t.getUTCDay();return e>=4||e===0?af(t):af.ceil(t)}function iye(t,e){return t=qW(t),Vr(af.count(ic(t),t)+(ic(t).getUTCDay()===4),e,2)}function sye(t){return t.getUTCDay()}function oye(t,e){return Vr(ob.count(ic(t)-1,t),e,2)}function lye(t,e){return Vr(t.getUTCFullYear()%100,e,2)}function cye(t,e){return t=qW(t),Vr(t.getUTCFullYear()%100,e,2)}function uye(t,e){return Vr(t.getUTCFullYear()%1e4,e,4)}function dye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?af(t):af.ceil(t),Vr(t.getUTCFullYear()%1e4,e,4)}function hye(){return"+0000"}function wB(){return"%"}function SB(t){return+t}function _B(t){return Math.floor(+t/1e3)}var nh,HW,GW;fye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fye(t){return nh=f1e(t),HW=nh.format,nh.parse,GW=nh.utcFormat,nh.utcParse,nh}function pye(t){return new Date(t)}function mye(t){return t instanceof Date?+t:+new Date(+t)}function HE(t,e,r,n,a,i,s,c,d,h){var p=OE(),m=p.invert,y=p.domain,x=h(".%L"),T=h(":%S"),_=h("%I:%M"),w=h("%I %p"),E=h("%a %d"),I=h("%b %d"),C=h("%B"),L=h("%Y");function P(R){return(d(R)<R?x:c(R)<R?T:s(R)<R?_:i(R)<R?w:n(R)<R?a(R)<R?E:I:r(R)<R?C:L)(R)}return p.invert=function(R){return new Date(m(R))},p.domain=function(R){return arguments.length?y(Array.from(R,mye)):y().map(pye)},p.ticks=function(R){var N=y();return t(N[0],N[N.length-1],R??10)},p.tickFormat=function(R,N){return N==null?P:h(N)},p.nice=function(R){var N=y();return(!R||typeof R.range!="function")&&(R=e(N[0],N[N.length-1],R??10)),R?y(IW(N,R)):p},p.copy=function(){return g1(p,HE(t,e,r,n,a,i,s,c,d,h))},p}function gye(){return no.apply(HE(d1e,h1e,ac,FE,Q2,y1,zE,$E,Ed,HW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yye(){return no.apply(HE(c1e,u1e,ic,qE,X2,K2,VE,UE,Ed,GW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Y2(){var t=0,e=1,r,n,a,i,s=Mi,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:s(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(s=m,h):s};function p(m){return function(y){var x,T;return arguments.length?([x,T]=y,s=m(x,T),h):[s(0),s(1)]}}return h.range=p(Lf),h.rangeRound=p(CE),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Du(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function WW(){var t=Pu(Y2()(Mi));return t.copy=function(){return Du(t,WW())},fc.apply(t,arguments)}function KW(){var t=ME(Y2()).domain([1,10]);return t.copy=function(){return Du(t,KW()).base(t.base())},fc.apply(t,arguments)}function QW(){var t=PE(Y2());return t.copy=function(){return Du(t,QW()).constant(t.constant())},fc.apply(t,arguments)}function GE(){var t=DE(Y2());return t.copy=function(){return Du(t,GE()).exponent(t.exponent())},fc.apply(t,arguments)}function vye(){return GE.apply(null,arguments).exponent(.5)}function XW(){var t=[],e=Mi;function r(n){if(n!=null&&!isNaN(n=+n))return e((p1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(xu),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>age(t,i/n))},r.copy=function(){return XW(e).domain(t)},fc.apply(r,arguments)}function Z2(){var t=0,e=.5,r=1,n=1,a,i,s,c,d,h=Mi,p,m=!1,y;function x(_){return isNaN(_=+_)?y:(_=.5+((_=+p(_))-i)*(n*_<n*i?c:d),h(m?Math.max(0,Math.min(1,_)):_))}x.domain=function(_){return arguments.length?([t,e,r]=_,a=p(t=+t),i=p(e=+e),s=p(r=+r),c=a===i?0:.5/(i-a),d=i===s?0:.5/(s-i),n=i<a?-1:1,x):[t,e,r]},x.clamp=function(_){return arguments.length?(m=!!_,x):m},x.interpolator=function(_){return arguments.length?(h=_,x):h};function T(_){return function(w){var E,I,C;return arguments.length?([E,I,C]=w,h=Cge(_,[E,I,C]),x):[h(0),h(.5),h(1)]}}return x.range=T(Lf),x.rangeRound=T(CE),x.unknown=function(_){return arguments.length?(y=_,x):y},function(_){return p=_,a=_(t),i=_(e),s=_(r),c=a===i?0:.5/(i-a),d=i===s?0:.5/(s-i),n=i<a?-1:1,x}}function YW(){var t=Pu(Z2()(Mi));return t.copy=function(){return Du(t,YW())},fc.apply(t,arguments)}function ZW(){var t=ME(Z2()).domain([.1,1,10]);return t.copy=function(){return Du(t,ZW()).base(t.base())},fc.apply(t,arguments)}function JW(){var t=PE(Z2());return t.copy=function(){return Du(t,JW()).constant(t.constant())},fc.apply(t,arguments)}function WE(){var t=DE(Z2());return t.copy=function(){return Du(t,WE()).exponent(t.exponent())},fc.apply(t,arguments)}function xye(){return WE.apply(null,arguments).exponent(.5)}const TB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:og,scaleDiverging:YW,scaleDivergingLog:ZW,scaleDivergingPow:WE,scaleDivergingSqrt:xye,scaleDivergingSymlog:JW,scaleIdentity:OW,scaleImplicit:nN,scaleLinear:ab,scaleLog:RW,scaleOrdinal:EE,scalePoint:wm,scalePow:LE,scaleQuantile:DW,scaleQuantize:LW,scaleRadial:PW,scaleSequential:WW,scaleSequentialLog:KW,scaleSequentialPow:GE,scaleSequentialQuantile:XW,scaleSequentialSqrt:vye,scaleSequentialSymlog:QW,scaleSqrt:Jge,scaleSymlog:MW,scaleThreshold:BW,scaleTime:gye,scaleUtc:yye,tickFormat:CW},Symbol.toStringTag,{value:"Module"}));var C_,AB;function J2(){if(AB)return C_;AB=1;var t=Mf();function e(r,n,a){for(var i=-1,s=r.length;++i<s;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return C_=e,C_}var O_,NB;function eK(){if(NB)return O_;NB=1;function t(e,r){return e>r}return O_=t,O_}var I_,EB;function bye(){if(EB)return I_;EB=1;var t=J2(),e=eK(),r=Df();function n(a){return a&&a.length?t(a,r,e):void 0}return I_=n,I_}var wye=bye();const e4=Gr(wye);var R_,jB;function tK(){if(jB)return R_;jB=1;function t(e,r){return e<r}return R_=t,R_}var M_,kB;function Sye(){if(kB)return M_;kB=1;var t=J2(),e=tK(),r=Df();function n(a){return a&&a.length?t(a,r,e):void 0}return M_=n,M_}var _ye=Sye();const t4=Gr(_ye);var P_,CB;function Tye(){if(CB)return P_;CB=1;var t=cE(),e=sl(),r=cW(),n=as();function a(i,s){var c=n(i)?t:r;return c(i,e(s,3))}return P_=a,P_}var D_,OB;function Aye(){if(OB)return D_;OB=1;var t=oW(),e=Tye();function r(n,a){return t(e(n,a),1)}return D_=r,D_}var Nye=Aye();const Eye=Gr(Nye);var L_,IB;function jye(){if(IB)return L_;IB=1;var t=wE();function e(r,n){return t(r,n)}return L_=e,L_}var kye=jye();const v1=Gr(kye);var Bf=1e9,Cye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},QE,Fn=!0,ro="[DecimalError] ",Bd=ro+"Invalid argument: ",KE=ro+"Exponent out of range: ",$f=Math.floor,vd=Math.pow,Oye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xs,Xa=1e7,$n=7,rK=9007199254740991,lb=$f(rK/$n),kt={};kt.absoluteValue=kt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kt.comparedTo=kt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*$n;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(t){return Wl(this,new this.constructor(t))};kt.dividedToIntegerBy=kt.idiv=function(t){var e=this,r=e.constructor;return An(Wl(e,new r(t),0,1),r.precision)};kt.equals=kt.eq=function(t){return!this.cmp(t)};kt.exponent=function(){return Na(this)};kt.greaterThan=kt.gt=function(t){return this.cmp(t)>0};kt.greaterThanOrEqualTo=kt.gte=function(t){return this.cmp(t)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(t){return this.cmp(t)<0};kt.lessThanOrEqualTo=kt.lte=function(t){return this.cmp(t)<1};kt.logarithm=kt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(xs))throw Error(ro+"NaN");if(r.s<1)throw Error(ro+(r.s?"NaN":"-Infinity"));return r.eq(xs)?new n(0):(Fn=!1,e=Wl(hg(r,i),hg(t,i),i),Fn=!0,An(e,a))};kt.minus=kt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?iK(e,t):nK(e,(t.s=-t.s,t))};kt.modulo=kt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(ro+"NaN");return r.s?(Fn=!1,e=Wl(r,t,0,1).times(t),Fn=!0,r.minus(e)):An(new n(r),a)};kt.naturalExponential=kt.exp=function(){return aK(this)};kt.naturalLogarithm=kt.ln=function(){return hg(this)};kt.negated=kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kt.plus=kt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?nK(e,t):iK(e,(t.s=-t.s,t))};kt.precision=kt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Bd+t);if(e=Na(a)+1,n=a.d.length-1,r=n*$n+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kt.squareRoot=kt.sqrt=function(){var t,e,r,n,a,i,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(ro+"NaN")}for(t=Na(c),Fn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Ho(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=$f((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=s=r+3;;)if(i=n,n=i.plus(Wl(c,i,s+2)).times(.5),Ho(i.d).slice(0,s)===(e=Ho(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),a==s&&e=="4999"){if(An(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;s+=4}return Fn=!0,An(n,r)};kt.times=kt.mul=function(t){var e,r,n,a,i,s,c,d,h,p=this,m=p.constructor,y=p.d,x=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=x.length,d<h&&(i=y,y=x,x=i,s=d,d=h,h=s),i=[],s=d+h,n=s;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+x[n]*y[a-n-1]+e,i[a--]=c%Xa|0,e=c/Xa|0;i[a]=(i[a]+e)%Xa|0}for(;!i[--s];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Fn?An(t,m.precision):t};kt.toDecimalPlaces=kt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Zo(t,0,Bf),e===void 0?e=n.rounding:Zo(e,0,8),An(r,t+Na(r)+1,e))};kt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=e0(n,!0):(Zo(t,0,Bf),e===void 0?e=a.rounding:Zo(e,0,8),n=An(new a(n),t+1,e),r=e0(n,!0,t+1)),r};kt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?e0(a):(Zo(t,0,Bf),e===void 0?e=i.rounding:Zo(e,0,8),n=An(new i(a),t+Na(a)+1,e),r=e0(n.abs(),!1,t+Na(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var t=this,e=t.constructor;return An(new e(t),Na(t)+1,e.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(t){var e,r,n,a,i,s,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(xs);if(c=new d(c),!c.s){if(t.s<1)throw Error(ro+"Infinity");return c}if(c.eq(xs))return c;if(n=d.precision,t.eq(xs))return An(c,n);if(e=t.e,r=t.d.length-1,s=e>=r,i=c.s,s){if((r=p<0?-p:p)<=rK){for(a=new d(xs),e=Math.ceil(n/$n+4),Fn=!1;r%2&&(a=a.times(c),MB(a.d,e)),r=$f(r/2),r!==0;)c=c.times(c),MB(c.d,e);return Fn=!0,t.s<0?new d(xs).div(a):An(a,n)}}else if(i<0)throw Error(ro+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Fn=!1,a=t.times(hg(c,n+h)),Fn=!0,a=aK(a),a.s=i,a};kt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Na(a),n=e0(a,r<=i.toExpNeg||r>=i.toExpPos)):(Zo(t,1,Bf),e===void 0?e=i.rounding:Zo(e,0,8),a=An(new i(a),t,e),r=Na(a),n=e0(a,t<=r||r<=i.toExpNeg,t)),n};kt.toSignificantDigits=kt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Zo(t,1,Bf),e===void 0?e=n.rounding:Zo(e,0,8)),An(new n(r),t,e)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Na(t),r=t.constructor;return e0(t,e<=r.toExpNeg||e>=r.toExpPos)};function nK(t,e){var r,n,a,i,s,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Fn?An(e,m):e;if(d=t.d,h=e.d,s=t.e,a=e.e,d=d.slice(),i=s-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=s,c=d.length),s=Math.ceil(m/$n),c=s>c?s+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/Xa|0,d[i]%=Xa;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Fn?An(e,m):e}function Zo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Bd+t)}function Ho(t){var e,r,n,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)n=t[e]+"",r=$n-n.length,r&&(i+=Yc(r)),i+=n;s=t[e],n=s+"",r=$n-n.length,r&&(i+=Yc(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Wl=(function(){function t(n,a){var i,s=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+s,n[c]=i%Xa|0,s=i/Xa|0;return s&&n.unshift(s),n}function e(n,a,i,s){var c,d;if(i!=s)d=i>s?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Xa+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var c,d,h,p,m,y,x,T,_,w,E,I,C,L,P,R,N,A,j=n.constructor,$=n.s==a.s?1:-1,B=n.d,F=a.d;if(!n.s)return new j(n);if(!a.s)throw Error(ro+"Division by zero");for(d=n.e-a.e,N=F.length,P=B.length,x=new j($),T=x.d=[],h=0;F[h]==(B[h]||0);)++h;if(F[h]>(B[h]||0)&&--d,i==null?I=i=j.precision:s?I=i+(Na(n)-Na(a))+1:I=i,I<0)return new j(0);if(I=I/$n+2|0,h=0,N==1)for(p=0,F=F[0],I++;(h<P||p)&&I--;h++)C=p*Xa+(B[h]||0),T[h]=C/F|0,p=C%F|0;else{for(p=Xa/(F[0]+1)|0,p>1&&(F=t(F,p),B=t(B,p),N=F.length,P=B.length),L=N,_=B.slice(0,N),w=_.length;w<N;)_[w++]=0;A=F.slice(),A.unshift(0),R=F[0],F[1]>=Xa/2&&++R;do p=0,c=e(F,_,N,w),c<0?(E=_[0],N!=w&&(E=E*Xa+(_[1]||0)),p=E/R|0,p>1?(p>=Xa&&(p=Xa-1),m=t(F,p),y=m.length,w=_.length,c=e(m,_,y,w),c==1&&(p--,r(m,N<y?A:F,y))):(p==0&&(c=p=1),m=F.slice()),y=m.length,y<w&&m.unshift(0),r(_,m,w),c==-1&&(w=_.length,c=e(F,_,N,w),c<1&&(p++,r(_,N<w?A:F,w))),w=_.length):c===0&&(p++,_=[0]),T[h++]=p,c&&_[0]?_[w++]=B[L]||0:(_=[B[L]],w=1);while((L++<P||_[0]!==void 0)&&I--)}return T[0]||T.shift(),x.e=d,An(x,s?i+Na(x)+1:i)}})();function aK(t,e){var r,n,a,i,s,c,d=0,h=0,p=t.constructor,m=p.precision;if(Na(t)>16)throw Error(KE+Na(t));if(!t.s)return new p(xs);for(Fn=!1,c=m,s=new p(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(n=Math.log(vd(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(xs),p.precision=c;;){if(a=An(a.times(t),c),r=r.times(++d),s=i.plus(Wl(a,r,c)),Ho(s.d).slice(0,c)===Ho(i.d).slice(0,c)){for(;h--;)i=An(i.times(i),c);return p.precision=m,e==null?(Fn=!0,An(i,m)):i}i=s}}function Na(t){for(var e=t.e*$n,r=t.d[0];r>=10;r/=10)e++;return e}function B_(t,e,r){if(e>t.LN10.sd())throw Fn=!0,r&&(t.precision=r),Error(ro+"LN10 precision limit exceeded");return An(new t(t.LN10),e)}function Yc(t){for(var e="";t--;)e+="0";return e}function hg(t,e){var r,n,a,i,s,c,d,h,p,m=1,y=10,x=t,T=x.d,_=x.constructor,w=_.precision;if(x.s<1)throw Error(ro+(x.s?"NaN":"-Infinity"));if(x.eq(xs))return new _(0);if(e==null?(Fn=!1,h=w):h=e,x.eq(10))return e==null&&(Fn=!0),B_(_,h);if(h+=y,_.precision=h,r=Ho(T),n=r.charAt(0),i=Na(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(t),r=Ho(x.d),n=r.charAt(0),m++;i=Na(x),n>1?(x=new _("0."+r),i++):x=new _(n+"."+r.slice(1))}else return d=B_(_,h+2,w).times(i+""),x=hg(new _(n+"."+r.slice(1)),h-y).plus(d),_.precision=w,e==null?(Fn=!0,An(x,w)):x;for(c=s=x=Wl(x.minus(xs),x.plus(xs),h),p=An(x.times(x),h),a=3;;){if(s=An(s.times(p),h),d=c.plus(Wl(s,new _(a),h)),Ho(d.d).slice(0,h)===Ho(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(B_(_,h+2,w).times(i+""))),c=Wl(c,new _(m),h),_.precision=w,e==null?(Fn=!0,An(c,w)):c;c=d,a+=2}}function RB(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=$f(r/$n),t.d=[],n=(r+1)%$n,r<0&&(n+=$n),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=$n;n<a;)t.d.push(+e.slice(n,n+=$n));e=e.slice(n),n=$n-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Fn&&(t.e>lb||t.e<-lb))throw Error(KE+r)}else t.s=0,t.e=0,t.d=[0];return t}function An(t,e,r){var n,a,i,s,c,d,h,p,m=t.d;for(s=1,i=m[0];i>=10;i/=10)s++;if(n=e-s,n<0)n+=$n,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/$n),i=m.length,p>=i)return t;for(h=i=m[p],s=1;i>=10;i/=10)s++;n%=$n,a=n-$n+s}if(r!==void 0&&(i=vd(10,s-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/vd(10,s-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Na(t),m.length=1,e=e-i-1,m[0]=vd(10,($n-e%$n)%$n),t.e=$f(-e/$n)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=vd(10,$n-n),m[p]=a>0?(h/vd(10,s-a)%vd(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==Xa&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=Xa)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Fn&&(t.e>lb||t.e<-lb))throw Error(KE+Na(t));return t}function iK(t,e){var r,n,a,i,s,c,d,h,p,m,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Fn?An(e,x):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),s=h-n,s){for(p=s<0,p?(r=d,s=-s,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(x/$n),c)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}s=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>s;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=Xa-1;--d[i],d[a]+=Xa}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Fn?An(e,x):e):new y(0)}function e0(t,e,r){var n,a=Na(t),i=Ho(t.d),s=i.length;return e?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Yc(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Yc(-a-1)+i,r&&(n=r-s)>0&&(i+=Yc(n))):a>=s?(i+=Yc(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Yc(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Yc(n))),t.s<0?"-"+i:i}function MB(t,e){if(t.length>e)return t.length=e,!0}function sK(t){var e,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Bd+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return RB(s,i.toString())}else if(typeof i!="string")throw Error(Bd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,Oye.test(i))RB(s,i);else throw Error(Bd+i)}if(a.prototype=kt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=sK,a.config=a.set=Iye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Iye(t){if(!t||typeof t!="object")throw Error(ro+"Object expected");var e,r,n,a=["precision",1,Bf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if($f(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Bd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Bd+r+": "+n);return this}var QE=sK(Cye);xs=new QE(1);const yn=QE;function Rye(t){return Lye(t)||Dye(t)||Pye(t)||Mye()}function Mye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pye(t,e){if(t){if(typeof t=="string")return oN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oN(t,e)}}function Dye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Lye(t){if(Array.isArray(t))return oN(t)}function oN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Bye=function(e){return e},oK={},lK=function(e){return e===oK},PB=function(e){return function r(){return arguments.length===0||arguments.length===1&&lK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},$ye=function t(e,r){return e===1?r:PB(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(c){return c!==oK}).length;return s>=e?r.apply(void 0,a):t(e-s,PB(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return lK(m)?d.shift():m});return r.apply(void 0,Rye(p).concat(d))}))})},r4=function(e){return $ye(e.length,e)},lN=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},Uye=r4(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),zye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Bye;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},cN=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},cK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function Vye(t){var e;return t===0?e=1:e=Math.floor(new yn(t).abs().log(10).toNumber())+1,e}function Fye(t,e,r){for(var n=new yn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var qye=r4(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),Hye=r4(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Gye=r4(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const n4={rangeStep:Fye,getDigitCount:Vye,interpolateNumber:qye,uninterpolateNumber:Hye,uninterpolateTruncation:Gye};function uN(t){return Qye(t)||Kye(t)||uK(t)||Wye()}function Wye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Qye(t){if(Array.isArray(t))return dN(t)}function fg(t,e){return Zye(t)||Yye(t,e)||uK(t,e)||Xye()}function Xye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uK(t,e){if(t){if(typeof t=="string")return dN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dN(t,e)}}function dN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function Zye(t){if(Array.isArray(t))return t}function dK(t){var e=fg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function hK(t,e,r){if(t.lte(0))return new yn(0);var n=n4.getDigitCount(t.toNumber()),a=new yn(10).pow(n),i=t.div(a),s=n!==1?.05:.1,c=new yn(Math.ceil(i.div(s).toNumber())).add(r).mul(s),d=c.mul(a);return e?d:new yn(Math.ceil(d))}function Jye(t,e,r){var n=1,a=new yn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new yn(10).pow(n4.getDigitCount(t)-1),a=new yn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new yn(Math.floor(t)))}else t===0?a=new yn(Math.floor((e-1)/2)):r||(a=new yn(Math.floor(t)));var s=Math.floor((e-1)/2),c=zye(Uye(function(d){return a.add(new yn(d-s).mul(n)).toNumber()}),lN);return c(0,e)}function fK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new yn(0),tickMin:new yn(0),tickMax:new yn(0)};var i=hK(new yn(e).sub(t).div(r-1),n,a),s;t<=0&&e>=0?s=new yn(0):(s=new yn(t).add(e).div(2),s=s.sub(new yn(s).mod(i)));var c=Math.ceil(s.sub(t).div(i).toNumber()),d=Math.ceil(new yn(e).sub(s).div(i).toNumber()),h=c+d+1;return h>r?fK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:s.sub(new yn(c).mul(i)),tickMax:s.add(new yn(d).mul(i))})}function eve(t){var e=fg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),c=dK([r,n]),d=fg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(uN(lN(0,a-1).map(function(){return 1/0}))):[].concat(uN(lN(0,a-1).map(function(){return-1/0})),[p]);return r>n?cN(m):m}if(h===p)return Jye(h,a,i);var y=fK(h,p,s,i),x=y.step,T=y.tickMin,_=y.tickMax,w=n4.rangeStep(T,_.add(new yn(.1).mul(x)),x);return r>n?cN(w):w}function tve(t,e){var r=fg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=dK([n,a]),c=fg(s,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=hK(new yn(h).sub(d).div(p-1),i,0),y=[].concat(uN(n4.rangeStep(new yn(d),new yn(h).sub(new yn(.99).mul(m)),m)),[h]);return n>a?cN(y):y}var rve=cK(eve),nve=cK(tve),ave="Invariant failed";function t0(t,e){throw new Error(ave)}var ive=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function cb(){return cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cb.apply(this,arguments)}function sve(t,e){return uve(t)||cve(t,e)||lve(t,e)||ove()}function ove(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lve(t,e){if(t){if(typeof t=="string")return DB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DB(t,e)}}function DB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function uve(t){if(Array.isArray(t))return t}function dve(t,e){if(t==null)return{};var r=hve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gK(n.key),n)}}function mve(t,e,r){return e&&pve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gve(t,e,r){return e=ub(e),yve(t,pK()?Reflect.construct(e,r||[],ub(t).constructor):e.apply(t,r))}function yve(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vve(t)}function vve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pK=function(){return!!t})()}function ub(t){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ub(t)}function xve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hN(t,e)}function hN(t,e){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hN(t,e)}function mK(t,e,r){return e=gK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gK(t){var e=bve(t,"string");return sf(e)=="symbol"?e:e+""}function bve(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x1=(function(t){function e(){return fve(this,e),gve(this,e,arguments)}return xve(e,t),mve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=dve(n,ive),x=zt(y,!1);this.props.direction==="x"&&p.type!=="number"&&t0();var T=d.map(function(_){var w=h(_,c),E=w.x,I=w.y,C=w.value,L=w.errorVal;if(!L)return null;var P=[],R,N;if(Array.isArray(L)){var A=sve(L,2);R=A[0],N=A[1]}else R=N=L;if(i==="vertical"){var j=p.scale,$=I+a,B=$+s,F=$-s,z=j(C-R),K=j(C+N);P.push({x1:K,y1:B,x2:K,y2:F}),P.push({x1:z,y1:$,x2:K,y2:$}),P.push({x1:z,y1:B,x2:z,y2:F})}else if(i==="horizontal"){var Q=m.scale,G=E+a,X=G-s,ne=G+s,de=Q(C-R),me=Q(C+N);P.push({x1:X,y1:me,x2:ne,y2:me}),P.push({x1:G,y1:de,x2:G,y2:me}),P.push({x1:X,y1:de,x2:ne,y2:de})}return ae.createElement(Ur,cb({className:"recharts-errorBar",key:"bar-".concat(P.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},x),P.map(function(H){return ae.createElement("line",cb({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return ae.createElement(Ur,{className:"recharts-errorBars"},T)}}])})(ae.Component);mK(x1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});mK(x1,"displayName","ErrorBar");function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}function LB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(r),!0).forEach(function(n){wve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wve(t,e,r){return e=Sve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sve(t){var e=_ve(t,"string");return pg(e)=="symbol"?e:e+""}function _ve(t,e){if(pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yK=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,s=ys(r,Nh);if(!s)return null;var c=Nh.defaultProps,d=c!==void 0?dd(dd({},c),s.props):{},h;return s.props&&s.props.payload?h=s.props&&s.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,x=m.props,T=x.sectors||x.data||[];return p.concat(T.map(function(_){return{type:s.props.iconType||y.props.legendType,value:_.name,color:_.fill,payload:_}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,x=y!==void 0?dd(dd({},y),m.props):{},T=x.dataKey,_=x.name,w=x.legendType,E=x.hide;return{inactive:E,dataKey:T,type:d.iconType||w||"square",color:XE(m),value:_||T,payload:x}}),dd(dd(dd({},d),Nh.getWithHeight(s,a)),{},{payload:h,item:s})};function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function BB(t){return Eve(t)||Nve(t)||Ave(t)||Tve()}function Tve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t,e){if(t){if(typeof t=="string")return fN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fN(t,e)}}function Nve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Eve(t){if(Array.isArray(t))return fN(t)}function fN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(r),!0).forEach(function(n){jh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$B(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jh(t,e,r){return e=jve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jve(t){var e=kve(t,"string");return mg(e)=="symbol"?e:e+""}function kve(t,e){if(mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fi(t,e,r){return lr(t)||lr(e)?r:Da(e)?Ys(t,e,r):rr(e)?e(t):r}function Sm(t,e,r,n){var a=Eye(t,function(c){return fi(c,e)});if(r==="number"){var i=a.filter(function(c){return mt(c)||parseFloat(c)});return i.length?[t4(i),e4(i)]:[1/0,-1/0]}var s=n?a.filter(function(c){return!lr(c)}):a;return s.map(function(c){return Da(c)||c instanceof Date?c:""})}var Cve=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,x=void 0;if(vo(m-p)!==vo(y-m)){var T=[];if(vo(y-m)===vo(d[1]-d[0])){x=y;var _=m+d[1]-d[0];T[0]=Math.min(_,(_+p)/2),T[1]=Math.max(_,(_+p)/2)}else{x=p;var w=y+d[1]-d[0];T[0]=Math.min(m,(w+m)/2),T[1]=Math.max(m,(w+m)/2)}var E=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(e>E[0]&&e<=E[1]||e>=T[0]&&e<=T[1]){s=a[h].index;break}}else{var I=Math.min(p,y),C=Math.max(p,y);if(e>(I+m)/2&&e<=(C+m)/2){s=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){s=n[L].index;break}return s},XE=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ra(ra({},e.type.defaultProps),e.props):e.props,s=i.stroke,c=i.fill,d;switch(a){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},Ove=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),y=0,x=m.length;y<x;y++){var T=p[m[y]],_=T.items,w=T.cateAxisId,E=_.filter(function(N){return Hl(N.type).indexOf("Bar")>=0});if(E&&E.length){var I=E[0].type.defaultProps,C=I!==void 0?ra(ra({},I),E[0].props):E[0].props,L=C.barSize,P=C[w];s[P]||(s[P]=[]);var R=lr(L)?r:L;s[P].push({item:E[0],stackList:E.slice(1),barSize:lr(R)?void 0:xo(R,n,0)})}}return s},Ive=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,s=i===void 0?[]:i,c=e.maxBarSize,d=s.length;if(d<1)return null;var h=xo(r,a,0,!0),p,m=[];if(s[0].barSize===+s[0].barSize){var y=!1,x=a/d,T=s.reduce(function(L,P){return L+P.barSize||0},0);T+=(d-1)*h,T>=a&&(T-=(d-1)*h,h=0),T>=a&&x>0&&(y=!0,x*=.9,T=d*x);var _=(a-T)/2>>0,w={offset:_-h,size:0};p=s.reduce(function(L,P){var R={item:P.item,position:{offset:w.offset+w.size+h,size:y?x:P.barSize}},N=[].concat(BB(L),[R]);return w=N[N.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(A){N.push({item:A,position:w})}),N},m)}else{var E=xo(n,a,0,!0);a-2*E-(d-1)*h<=0&&(h=0);var I=(a-2*E-(d-1)*h)/d;I>1&&(I>>=0);var C=c===+c?Math.min(I,c):I;p=s.reduce(function(L,P,R){var N=[].concat(BB(L),[{item:P.item,position:{offset:E+(I+h)*R+(I-C)/2,size:C}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(A){N.push({item:A,position:N[N.length-1].position})}),N},m)}return p},Rve=function(e,r,n,a){var i=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),h=yK({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,y=p.height,x=h.align,T=h.verticalAlign,_=h.layout;if((_==="vertical"||_==="horizontal"&&T==="middle")&&x!=="center"&&mt(e[x]))return ra(ra({},e),{},jh({},x,e[x]+(m||0)));if((_==="horizontal"||_==="vertical"&&x==="center")&&T!=="middle"&&mt(e[T]))return ra(ra({},e),{},jh({},T,e[T]+(y||0)))}return e},Mve=function(e,r,n){return lr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},vK=function(e,r,n,a,i){var s=r.props.children,c=Ns(s,x1).filter(function(h){return Mve(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=fi(p,n);if(lr(m))return h;var y=Array.isArray(m)?[t4(m),e4(m)]:[m,m],x=d.reduce(function(T,_){var w=fi(p,_,0),E=y[0]-Math.abs(Array.isArray(w)?w[0]:w),I=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(E,T[0]),Math.max(I,T[1])]},[1/0,-1/0]);return[Math.min(x[0],h[0]),Math.max(x[1],h[1])]},[1/0,-1/0])}return null},Pve=function(e,r,n,a,i){var s=r.map(function(c){return vK(e,c,n,i,a)}).filter(function(c){return!lr(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},xK=function(e,r,n,a,i){var s=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&vK(e,d,h,a)||Sm(e,h,n,i)});if(n==="number")return s.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},bK=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},wK=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,s,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(s=!0),d.coordinate});return i||c.push(r),s||c.push(n),c},zl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?vo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=i?i.indexOf(m):m;return{coordinate:a(y)+h,value:m,offset:h}});return p.filter(function(m){return!d1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:a(m)+h,value:m,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,y){return{coordinate:a(m)+h,value:i?i[m]:m,index:y,offset:h}})},$_=new WeakMap,_v=function(e,r){if(typeof r!="function")return e;$_.has(e)||$_.set(e,new WeakMap);var n=$_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},SK=function(e,r,n){var a=e.scale,i=e.type,s=e.layout,c=e.axisType;if(a==="auto")return s==="radial"&&c==="radiusAxis"?{scale:og(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:ab(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wm(),realScaleType:"point"}:i==="category"?{scale:og(),realScaleType:"band"}:{scale:ab(),realScaleType:"linear"};if(Zd(a)){var d="scale".concat($2(a));return{scale:(TB[d]||wm)(),realScaleType:TB[d]?d:"point"}}return rr(a)?{scale:a}:{scale:wm(),realScaleType:"point"}},UB=1e-4,_K=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-UB,s=Math.max(a[0],a[1])+UB,c=e(r[0]),d=e(r[n-1]);(c<i||c>s||d<i||d>s)&&e.domain([r[0],r[n-1]])}},Dve=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},Lve=function(e,r){if(!r||r.length!==2||!mt(r[0])||!mt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!mt(e[0])||e[0]<n)&&(i[0]=n),(!mt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},Bve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,s=0,c=0;c<r;++c){var d=d1(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},$ve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var c=d1(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=i,e[s][n][1]=i+c,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},Uve={sign:Bve,expand:Ehe,none:Xh,silhouette:jhe,wiggle:khe,positive:$ve},zve=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=Uve[n],s=Nhe().keys(a).value(function(c,d){return+fi(c,d,0)}).order(FA).offset(i);return s(e)},Vve=function(e,r,n,a,i,s){if(!e)return null;var c=s?r.reverse():r,d={},h=c.reduce(function(m,y){var x,T=(x=y.type)!==null&&x!==void 0&&x.defaultProps?ra(ra({},y.type.defaultProps),y.props):y.props,_=T.stackId,w=T.hide;if(w)return m;var E=T[n],I=m[E]||{hasStack:!1,stackGroups:{}};if(Da(_)){var C=I.stackGroups[_]||{numericAxisId:n,cateAxisId:a,items:[]};C.items.push(y),I.hasStack=!0,I.stackGroups[_]=C}else I.stackGroups[h1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return ra(ra({},m),{},jh({},E,I))},d),p={};return Object.keys(h).reduce(function(m,y){var x=h[y];if(x.hasStack){var T={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(_,w){var E=x.stackGroups[w];return ra(ra({},_),{},jh({},w,{numericAxisId:n,cateAxisId:a,items:E.items,stackedData:zve(e,E.items,i)}))},T)}return ra(ra({},m),{},jh({},y,x))},p)},TK=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=rve(h,i,c);return e.domain([t4(p),e4(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),y=nve(m,i,c);return{niceTicks:y}}return null};function zB(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!lr(a[e.dataKey])){var c=$x(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=fi(a,lr(s)?e.dataKey:s);return lr(d)?null:e.scale(d)}var VB=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,s=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=fi(s,r.dataKey,r.domain[c]);return lr(d)?null:r.scale(d)-i/2+a},Fve=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},qve=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ra(ra({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(Da(i)){var s=r[i];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},Hve=function(e){return e.reduce(function(r,n){return[t4(n.concat([r[0]]).filter(mt)),e4(n.concat([r[1]]).filter(mt))]},[1/0,-1/0])},AK=function(e,r,n){return Object.keys(e).reduce(function(a,i){var s=e[i],c=s.stackedData,d=c.reduce(function(h,p){var m=Hve(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},FB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pN=function(e,r,n){if(rr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(mt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(FB.test(e[0])){var i=+FB.exec(e[0])[1];a[0]=r[0]-i}else rr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(mt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(qB.test(e[1])){var s=+qB.exec(e[1])[1];a[1]=r[1]+s}else rr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},db=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=_E(r,function(m){return m.coordinate}),s=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];s=Math.min((h.coordinate||0)-(p.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},HB=function(e,r,n){return!e||!e.length||v1(e,Ys(n,"type.defaultProps.domain"))?r:e},NK=function(e,r){var n=e.type.defaultProps?ra(ra({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return ra(ra({},zt(e,!1)),{},{dataKey:a,unit:s,formatter:c,name:i||a,color:XE(e),value:fi(r,a),type:d,payload:r,chartType:h,hide:p})};function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function GB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Cl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(r),!0).forEach(function(n){EK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EK(t,e,r){return e=Gve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gve(t){var e=Wve(t,"string");return gg(e)=="symbol"?e:e+""}function Wve(t,e){if(gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kve(t,e){return Zve(t)||Yve(t,e)||Xve(t,e)||Qve()}function Qve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xve(t,e){if(t){if(typeof t=="string")return WB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WB(t,e)}}function WB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Zve(t){if(Array.isArray(t))return t}var hb=Math.PI/180,Jve=function(e){return e*180/Math.PI},vn=function(e,r,n,a){return{x:e+Math.cos(-hb*a)*n,y:r+Math.sin(-hb*a)*n}},exe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},txe=function(e,r,n,a,i){var s=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=xo(e.cx,s,s/2),m=xo(e.cy,c,c/2),y=exe(s,c,n),x=xo(e.innerRadius,y,0),T=xo(e.outerRadius,y,y*.8),_=Object.keys(r);return _.reduce(function(w,E){var I=r[E],C=I.domain,L=I.reversed,P;if(lr(I.range))a==="angleAxis"?P=[d,h]:a==="radiusAxis"&&(P=[x,T]),L&&(P=[P[1],P[0]]);else{P=I.range;var R=P,N=Kve(R,2);d=N[0],h=N[1]}var A=SK(I,i),j=A.realScaleType,$=A.scale;$.domain(C).range(P),_K($);var B=TK($,Cl(Cl({},I),{},{realScaleType:j})),F=Cl(Cl(Cl({},I),B),{},{range:P,radius:T,realScaleType:j,scale:$,cx:p,cy:m,innerRadius:x,outerRadius:T,startAngle:d,endAngle:h});return Cl(Cl({},w),{},EK({},E,F))},{})},rxe=function(e,r){var n=e.x,a=e.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},nxe=function(e,r){var n=e.x,a=e.y,i=r.cx,s=r.cy,c=rxe({x:n,y:a},{x:i,y:s});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>s&&(h=2*Math.PI-h),{radius:c,angle:Jve(h),angleInRadian:h}},axe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},ixe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),c=Math.min(i,s);return e+c*360},KB=function(e,r){var n=e.x,a=e.y,i=nxe({x:n,y:a},r),s=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(s<d||s>h)return!1;if(s===0)return!0;var p=axe(r),m=p.startAngle,y=p.endAngle,x=c,T;if(m<=y){for(;x>y;)x-=360;for(;x<m;)x+=360;T=x>=m&&x<=y}else{for(;x>m;)x-=360;for(;x<y;)x+=360;T=x>=y&&x<=m}return T?Cl(Cl({},r),{},{radius:s,angle:ixe(x,r)}):null},jK=function(e){return!O.isValidElement(e)&&!rr(e)&&typeof e!="boolean"?e.className:""};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}var sxe=["offset"];function oxe(t){return dxe(t)||uxe(t)||cxe(t)||lxe()}function lxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cxe(t,e){if(t){if(typeof t=="string")return mN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mN(t,e)}}function uxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dxe(t){if(Array.isArray(t))return mN(t)}function mN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hxe(t,e){if(t==null)return{};var r=fxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function QB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ia(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(r),!0).forEach(function(n){pxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pxe(t,e,r){return e=mxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mxe(t){var e=gxe(t,"string");return yg(e)=="symbol"?e:e+""}function gxe(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vg.apply(this,arguments)}var yxe=function(e){var r=e.value,n=e.formatter,a=lr(e.children)?r:e.children;return rr(n)?n(a):a},vxe=function(e,r){var n=vo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},xxe=function(e,r,n){var a=e.position,i=e.viewBox,s=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,x=d.startAngle,T=d.endAngle,_=d.clockWise,w=(m+y)/2,E=vxe(x,T),I=E>=0?1:-1,C,L;a==="insideStart"?(C=x+I*s,L=_):a==="insideEnd"?(C=T-I*s,L=!_):a==="end"&&(C=T+I*s,L=_),L=E<=0?L:!L;var P=vn(h,p,w,C),R=vn(h,p,w,C+(L?1:-1)*359),N="M".concat(P.x,",").concat(P.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(R.x,",").concat(R.y),A=lr(e.id)?h1("recharts-radial-line-"):e.id;return ae.createElement("text",vg({},n,{dominantBaseline:"central",className:pr("recharts-radial-bar-label",c)}),ae.createElement("defs",null,ae.createElement("path",{id:A,d:N})),ae.createElement("textPath",{xlinkHref:"#".concat(A)},r))},bxe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,s=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,y=(p+m)/2;if(a==="outside"){var x=vn(s,c,h+n,y),T=x.x,_=x.y;return{x:T,y:_,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,E=vn(s,c,w,y),I=E.x,C=E.y;return{x:I,y:C,textAnchor:"middle",verticalAnchor:"middle"}},wxe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,s=r,c=s.x,d=s.y,h=s.width,p=s.height,m=p>=0?1:-1,y=m*a,x=m>0?"end":"start",T=m>0?"start":"end",_=h>=0?1:-1,w=_*a,E=_>0?"end":"start",I=_>0?"start":"end";if(i==="top"){var C={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:x};return Ia(Ia({},C),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:T};return Ia(Ia({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var P={x:c-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"};return Ia(Ia({},P),n?{width:Math.max(P.x-n.x,0),height:p}:{})}if(i==="right"){var R={x:c+h+w,y:d+p/2,textAnchor:I,verticalAnchor:"middle"};return Ia(Ia({},R),n?{width:Math.max(n.x+n.width-R.x,0),height:p}:{})}var N=n?{width:h,height:p}:{};return i==="insideLeft"?Ia({x:c+w,y:d+p/2,textAnchor:I,verticalAnchor:"middle"},N):i==="insideRight"?Ia({x:c+h-w,y:d+p/2,textAnchor:E,verticalAnchor:"middle"},N):i==="insideTop"?Ia({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:T},N):i==="insideBottom"?Ia({x:c+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:x},N):i==="insideTopLeft"?Ia({x:c+w,y:d+y,textAnchor:I,verticalAnchor:T},N):i==="insideTopRight"?Ia({x:c+h-w,y:d+y,textAnchor:E,verticalAnchor:T},N):i==="insideBottomLeft"?Ia({x:c+w,y:d+p-y,textAnchor:I,verticalAnchor:x},N):i==="insideBottomRight"?Ia({x:c+h-w,y:d+p-y,textAnchor:E,verticalAnchor:x},N):Pf(i)&&(mt(i.x)||Ad(i.x))&&(mt(i.y)||Ad(i.y))?Ia({x:c+xo(i.x,h),y:d+xo(i.y,p),textAnchor:"end",verticalAnchor:"end"},N):Ia({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Sxe=function(e){return"cx"in e&&mt(e.cx)};function ui(t){var e=t.offset,r=e===void 0?5:e,n=hxe(t,sxe),a=Ia({offset:r},n),i=a.viewBox,s=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,y=a.textBreakAll;if(!i||lr(c)&&lr(d)&&!O.isValidElement(h)&&!rr(h))return null;if(O.isValidElement(h))return O.cloneElement(h,a);var x;if(rr(h)){if(x=O.createElement(h,a),O.isValidElement(x))return x}else x=yxe(a);var T=Sxe(i),_=zt(a,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return xxe(a,x,_);var w=T?bxe(a):wxe(a);return ae.createElement(tf,vg({className:pr("recharts-label",m)},_,w,{breakAll:y}),x)}ui.displayName="Label";var kK=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,x=e.top,T=e.left,_=e.width,w=e.height,E=e.clockWise,I=e.labelViewBox;if(I)return I;if(mt(_)&&mt(w)){if(mt(m)&&mt(y))return{x:m,y,width:_,height:w};if(mt(x)&&mt(T))return{x,y:T,width:_,height:w}}return mt(m)&&mt(y)?{x:m,y,width:0,height:0}:mt(r)&&mt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:E}:e.viewBox?e.viewBox:{}},_xe=function(e,r){return e?e===!0?ae.createElement(ui,{key:"label-implicit",viewBox:r}):Da(e)?ae.createElement(ui,{key:"label-implicit",viewBox:r,value:e}):O.isValidElement(e)?e.type===ui?O.cloneElement(e,{key:"label-implicit",viewBox:r}):ae.createElement(ui,{key:"label-implicit",content:e,viewBox:r}):rr(e)?ae.createElement(ui,{key:"label-implicit",content:e,viewBox:r}):Pf(e)?ae.createElement(ui,vg({viewBox:r},e,{key:"label-implicit"})):null:null},Txe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=kK(e),s=Ns(a,ui).map(function(d,h){return O.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return s;var c=_xe(e.label,r||i);return[c].concat(oxe(s))};ui.parseViewBox=kK;ui.renderCallByParent=Txe;var U_,XB;function Axe(){if(XB)return U_;XB=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return U_=t,U_}var Nxe=Axe();const CK=Gr(Nxe);function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}var Exe=["valueAccessor"],jxe=["data","dataKey","clockWise","id","textBreakAll"];function kxe(t){return Rxe(t)||Ixe(t)||Oxe(t)||Cxe()}function Cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oxe(t,e){if(t){if(typeof t=="string")return gN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gN(t,e)}}function Ixe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rxe(t){if(Array.isArray(t))return gN(t)}function gN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fb(){return fb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fb.apply(this,arguments)}function YB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ZB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(r),!0).forEach(function(n){Mxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mxe(t,e,r){return e=Pxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pxe(t){var e=Dxe(t,"string");return xg(e)=="symbol"?e:e+""}function Dxe(t,e){if(xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JB(t,e){if(t==null)return{};var r=Lxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Bxe=function(e){return Array.isArray(e.value)?CK(e.value):e.value};function Kl(t){var e=t.valueAccessor,r=e===void 0?Bxe:e,n=JB(t,Exe),a=n.data,i=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,h=JB(n,jxe);return!a||!a.length?null:ae.createElement(Ur,{className:"recharts-label-list"},a.map(function(p,m){var y=lr(i)?r(p,m):fi(p&&p.payload,i),x=lr(c)?{}:{id:"".concat(c,"-").concat(m)};return ae.createElement(ui,fb({},zt(p,!0),h,x,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:ui.parseViewBox(lr(s)?p:ZB(ZB({},p),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}Kl.displayName="LabelList";function $xe(t,e){return t?t===!0?ae.createElement(Kl,{key:"labelList-implicit",data:e}):ae.isValidElement(t)||rr(t)?ae.createElement(Kl,{key:"labelList-implicit",data:e,content:t}):Pf(t)?ae.createElement(Kl,fb({data:e},t,{key:"labelList-implicit"})):null:null}function Uxe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Ns(n,Kl).map(function(s,c){return O.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=$xe(t.label,e);return[i].concat(kxe(a))}Kl.renderCallByParent=Uxe;function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function yN(){return yN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yN.apply(this,arguments)}function e$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function t$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e$(Object(r),!0).forEach(function(n){zxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zxe(t,e,r){return e=Vxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vxe(t){var e=Fxe(t,"string");return bg(e)=="symbol"?e:e+""}function Fxe(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qxe=function(e,r){var n=vo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Tv=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/hb,y=h?i:i+s*m,x=vn(r,n,p,y),T=vn(r,n,a,y),_=h?i-s*m:i,w=vn(r,n,p*Math.cos(m*hb),_);return{center:x,circleTangency:T,lineTangency:w,theta:m}},OK=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.startAngle,c=e.endAngle,d=qxe(s,c),h=s+d,p=vn(r,n,i,s),m=vn(r,n,i,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var x=vn(r,n,a,s),T=vn(r,n,a,h);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=h),`,
            `).concat(x.x,",").concat(x.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},Hxe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=vo(p-h),y=Tv({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:s,cornerIsExternal:d}),x=y.circleTangency,T=y.lineTangency,_=y.theta,w=Tv({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:s,cornerIsExternal:d}),E=w.circleTangency,I=w.lineTangency,C=w.theta,L=d?Math.abs(h-p):Math.abs(h-p)-_-C;if(L<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):OK({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var P="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(I.x,",").concat(I.y,`
  `);if(a>0){var R=Tv({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),N=R.circleTangency,A=R.lineTangency,j=R.theta,$=Tv({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),B=$.circleTangency,F=$.lineTangency,z=$.theta,K=d?Math.abs(h-p):Math.abs(h-p)-j-z;if(K<0&&s===0)return"".concat(P,"L").concat(r,",").concat(n,"Z");P+="L".concat(F.x,",").concat(F.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(K>180),",").concat(+(m>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else P+="L".concat(r,",").concat(n,"Z");return P},Gxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},IK=function(e){var r=t$(t$({},Gxe),e),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(s<i||p===m)return null;var x=pr("recharts-sector",y),T=s-i,_=xo(c,T,0,!0),w;return _>0&&Math.abs(p-m)<360?w=Hxe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(_,T/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=OK({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:p,endAngle:m}),ae.createElement("path",yN({},zt(r,!0),{className:x,d:w,role:"img"}))};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function vN(){return vN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vN.apply(this,arguments)}function r$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function n$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r$(Object(r),!0).forEach(function(n){Wxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wxe(t,e,r){return e=Kxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kxe(t){var e=Qxe(t,"string");return wg(e)=="symbol"?e:e+""}function Qxe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a$={curveBasisClosed:mhe,curveBasisOpen:ghe,curveBasis:phe,curveBumpX:ehe,curveBumpY:the,curveLinearClosed:yhe,curveLinear:z2,curveMonotoneX:vhe,curveMonotoneY:xhe,curveNatural:bhe,curveStep:whe,curveStepAfter:_he,curveStepBefore:She},Av=function(e){return e.x===+e.x&&e.y===+e.y},Kp=function(e){return e.x},Qp=function(e){return e.y},Xxe=function(e,r){if(rr(e))return e;var n="curve".concat($2(e));return(n==="curveMonotone"||n==="curveBump")&&r?a$["".concat(n).concat(r==="vertical"?"Y":"X")]:a$[n]||z2},Yxe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,s=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=Xxe(n,c),m=h?i.filter(function(_){return Av(_)}):i,y;if(Array.isArray(s)){var x=h?s.filter(function(_){return Av(_)}):s,T=m.map(function(_,w){return n$(n$({},_),{},{base:x[w]})});return c==="vertical"?y=gv().y(Qp).x1(Kp).x0(function(_){return _.base.x}):y=gv().x(Kp).y1(Qp).y0(function(_){return _.base.y}),y.defined(Av).curve(p),y(T)}return c==="vertical"&&mt(s)?y=gv().y(Qp).x1(Kp).x0(s):mt(s)?y=gv().x(Kp).y1(Qp).y0(s):y=CG().x(Kp).y(Qp),y.defined(Av).curve(p),y(m)},xN=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?Yxe(e):a;return O.createElement("path",vN({},zt(e,!1),Ux(e),{className:pr("recharts-curve",r),d:s,ref:i}))},z_={exports:{}},V_,i$;function Zxe(){if(i$)return V_;i$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return V_=t,V_}var F_,s$;function Jxe(){if(s$)return F_;s$=1;var t=Zxe();function e(){}function r(){}return r.resetWarningCache=e,F_=function(){function n(s,c,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},F_}var o$;function ebe(){return o$||(o$=1,z_.exports=Jxe()()),z_.exports}var tbe=ebe();const en=Gr(tbe),{getOwnPropertyNames:rbe,getOwnPropertySymbols:nbe}=Object,{hasOwnProperty:abe}=Object.prototype;function q_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Nv(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,s=i.get(r),c=i.get(n);if(s&&c)return s===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function ibe(t){return t!=null?t[Symbol.toStringTag]:void 0}function l$(t){return rbe(t).concat(nbe(t))}const sbe=Object.hasOwn||((t,e)=>abe.call(t,e));function m0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const obe="__v",lbe="__o",cbe="_owner",{getOwnPropertyDescriptor:c$,keys:u$}=Object;function ube(t,e){return t.byteLength===e.byteLength&&pb(new Uint8Array(t),new Uint8Array(e))}function dbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function hbe(t,e){return t.byteLength===e.byteLength&&pb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function fbe(t,e){return m0(t.getTime(),e.getTime())}function pbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function mbe(t,e){return t===e}function d$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let s,c,d=0;for(;(s=i.next())&&!s.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const y=s.value,x=c.value;if(r.equals(y[0],x[0],d,m,t,e,r)&&r.equals(y[1],x[1],y[0],x[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const gbe=m0;function ybe(t,e,r){const n=u$(t);let a=n.length;if(u$(e).length!==a)return!1;for(;a-- >0;)if(!RK(t,e,r,n[a]))return!1;return!0}function Xp(t,e,r){const n=l$(t);let a=n.length;if(l$(e).length!==a)return!1;let i,s,c;for(;a-- >0;)if(i=n[a],!RK(t,e,r,i)||(s=c$(t,i),c=c$(e,i),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function vbe(t,e){return m0(t.valueOf(),e.valueOf())}function xbe(t,e){return t.source===e.source&&t.flags===e.flags}function h$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let s,c;for(;(s=i.next())&&!s.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(s.value,c.value,s.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function pb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function bbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function RK(t,e,r,n){return(n===cbe||n===lbe||n===obe)&&(t.$$typeof||e.$$typeof)?!0:sbe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const wbe="[object ArrayBuffer]",Sbe="[object Arguments]",_be="[object Boolean]",Tbe="[object DataView]",Abe="[object Date]",Nbe="[object Error]",Ebe="[object Map]",jbe="[object Number]",kbe="[object Object]",Cbe="[object RegExp]",Obe="[object Set]",Ibe="[object String]",Rbe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Mbe="[object URL]",Pbe=Object.prototype.toString;function Dbe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:x,unknownTagComparators:T}){return function(w,E,I){if(w===E)return!0;if(w==null||E==null)return!1;const C=typeof w;if(C!==typeof E)return!1;if(C!=="object")return C==="number"?c(w,E,I):C==="function"?i(w,E,I):!1;const L=w.constructor;if(L!==E.constructor)return!1;if(L===Object)return d(w,E,I);if(Array.isArray(w))return e(w,E,I);if(L===Date)return n(w,E,I);if(L===RegExp)return p(w,E,I);if(L===Map)return s(w,E,I);if(L===Set)return m(w,E,I);const P=Pbe.call(w);if(P===Abe)return n(w,E,I);if(P===Cbe)return p(w,E,I);if(P===Ebe)return s(w,E,I);if(P===Obe)return m(w,E,I);if(P===kbe)return typeof w.then!="function"&&typeof E.then!="function"&&d(w,E,I);if(P===Mbe)return x(w,E,I);if(P===Nbe)return a(w,E,I);if(P===Sbe)return d(w,E,I);if(Rbe[P])return y(w,E,I);if(P===wbe)return t(w,E,I);if(P===Tbe)return r(w,E,I);if(P===_be||P===jbe||P===Ibe)return h(w,E,I);if(T){let R=T[P];if(!R){const N=ibe(w);N&&(R=T[N])}if(R)return R(w,E,I)}return!1}}function Lbe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:ube,areArraysEqual:r?Xp:dbe,areDataViewsEqual:hbe,areDatesEqual:fbe,areErrorsEqual:pbe,areFunctionsEqual:mbe,areMapsEqual:r?q_(d$,Xp):d$,areNumbersEqual:gbe,areObjectsEqual:r?Xp:ybe,arePrimitiveWrappersEqual:vbe,areRegExpsEqual:xbe,areSetsEqual:r?q_(h$,Xp):h$,areTypedArraysEqual:r?q_(pb,Xp):pb,areUrlsEqual:bbe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Nv(n.areArraysEqual),i=Nv(n.areMapsEqual),s=Nv(n.areObjectsEqual),c=Nv(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return n}function Bbe(t){return function(e,r,n,a,i,s,c){return t(e,r,c)}}function $be({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const Ube=Lu();Lu({strict:!0});Lu({circular:!0});Lu({circular:!0,strict:!0});Lu({createInternalComparator:()=>m0});Lu({strict:!0,createInternalComparator:()=>m0});Lu({circular:!0,createInternalComparator:()=>m0});Lu({circular:!0,createInternalComparator:()=>m0,strict:!0});function Lu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=Lbe(t),s=Dbe(i),c=r?r(s):Bbe(s);return $be({circular:e,comparator:s,createState:n,equals:c,strict:a})}function zbe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function f$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):zbe(a)};requestAnimationFrame(n)}function bN(t){"@babel/helpers - typeof";return bN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bN(t)}function Vbe(t){return Gbe(t)||Hbe(t)||qbe(t)||Fbe()}function Fbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qbe(t,e){if(t){if(typeof t=="string")return p$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p$(t,e)}}function p$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gbe(t){if(Array.isArray(t))return t}function Wbe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,c=Vbe(s),d=c[0],h=c.slice(1);if(typeof d=="number"){f$(a.bind(null,h),d);return}a(d),f$(a.bind(null,h));return}bN(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function m$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function g$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(r),!0).forEach(function(n){MK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MK(t,e,r){return e=Kbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kbe(t){var e=Qbe(t,"string");return Sg(e)==="symbol"?e:String(e)}function Qbe(t,e){if(Sg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xbe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Ybe=function(e){return e},Zbe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},_m=function(e,r){return Object.keys(r).reduce(function(n,a){return g$(g$({},n),{},MK({},a,e(a,r[a])))},{})},y$=function(e,r,n){return e.map(function(a){return"".concat(Zbe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Jbe(t,e){return r2e(t)||t2e(t,e)||PK(t,e)||e2e()}function e2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function r2e(t){if(Array.isArray(t))return t}function n2e(t){return s2e(t)||i2e(t)||PK(t)||a2e()}function a2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PK(t,e){if(t){if(typeof t=="string")return wN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wN(t,e)}}function i2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function s2e(t){if(Array.isArray(t))return wN(t)}function wN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var mb=1e-4,DK=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},LK=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},v$=function(e,r){return function(n){var a=DK(e,r);return LK(a,n)}},o2e=function(e,r){return function(n){var a=DK(e,r),i=[].concat(n2e(a.map(function(s,c){return s*c}).slice(1)),[0]);return LK(i,n)}},x$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,c=1;break;case"ease":a=.25,i=.1,s=.25,c=1;break;case"ease-in":a=.42,i=0,s=1,c=1;break;case"ease-out":a=.42,i=0,s=.58,c=1;break;case"ease-in-out":a=0,i=0,s=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=Jbe(h,4);a=p[0],i=p[1],s=p[2],c=p[3]}}}var m=v$(a,s),y=v$(i,c),x=o2e(a,s),T=function(E){return E>1?1:E<0?0:E},_=function(E){for(var I=E>1?1:E,C=I,L=0;L<8;++L){var P=m(C)-I,R=x(C);if(Math.abs(P-I)<mb||R<mb)return y(C);C=T(C-P/R)}return y(C)};return _.isStepper=!1,_},l2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,s=e.dt,c=s===void 0?17:s,d=function(p,m,y){var x=-(p-m)*n,T=y*i,_=y+(x-T)*c/1e3,w=y*c/1e3+p;return Math.abs(w-m)<mb&&Math.abs(_)<mb?[m,0]:[w,_]};return d.isStepper=!0,d.dt=c,d},c2e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return x$(a);case"spring":return l2e();default:if(a.split("(")[0]==="cubic-bezier")return x$(a)}return typeof a=="function"?a:null};function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function b$(t){return h2e(t)||d2e(t)||BK(t)||u2e()}function u2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h2e(t){if(Array.isArray(t))return _N(t)}function w$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function li(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(r),!0).forEach(function(n){SN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SN(t,e,r){return e=f2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f2e(t){var e=p2e(t,"string");return _g(e)==="symbol"?e:String(e)}function p2e(t,e){if(_g(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m2e(t,e){return v2e(t)||y2e(t,e)||BK(t,e)||g2e()}function g2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BK(t,e){if(t){if(typeof t=="string")return _N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _N(t,e)}}function _N(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function v2e(t){if(Array.isArray(t))return t}var gb=function(e,r,n){return e+(r-e)*n},TN=function(e){var r=e.from,n=e.to;return r!==n},x2e=function t(e,r,n){var a=_m(function(i,s){if(TN(s)){var c=e(s.from,s.to,s.velocity),d=m2e(c,2),h=d[0],p=d[1];return li(li({},s),{},{from:h,velocity:p})}return s},r);return n<1?_m(function(i,s){return TN(s)?li(li({},s),{},{velocity:gb(s.velocity,a[i].velocity,n),from:gb(s.from,a[i].from,n)}):s},r):t(e,a,n-1)};const b2e=(function(t,e,r,n,a){var i=Xbe(t,e),s=i.reduce(function(w,E){return li(li({},w),{},SN({},E,[t[E],e[E]]))},{}),c=i.reduce(function(w,E){return li(li({},w),{},SN({},E,{from:t[E],velocity:0,to:e[E]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return _m(function(E,I){return I.from},c)},x=function(){return!Object.values(c).filter(TN).length},T=function(E){h||(h=E);var I=E-h,C=I/r.dt;c=x2e(r,c,C),a(li(li(li({},t),e),y())),h=E,x()||(d=requestAnimationFrame(m))},_=function(E){p||(p=E);var I=(E-p)/n,C=_m(function(P,R){return gb.apply(void 0,b$(R).concat([r(I)]))},s);if(a(li(li(li({},t),e),C)),I<1)d=requestAnimationFrame(m);else{var L=_m(function(P,R){return gb.apply(void 0,b$(R).concat([r(1)]))},s);a(li(li(li({},t),e),L))}};return m=r.isStepper?T:_,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}var w2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function S2e(t,e){if(t==null)return{};var r=_2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _2e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function H_(t){return E2e(t)||N2e(t)||A2e(t)||T2e()}function T2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A2e(t,e){if(t){if(typeof t=="string")return AN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AN(t,e)}}function N2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E2e(t){if(Array.isArray(t))return AN(t)}function AN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function S$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S$(Object(r),!0).forEach(function(n){lm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lm(t,e,r){return e=$K(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$K(n.key),n)}}function C2e(t,e,r){return e&&k2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $K(t){var e=O2e(t,"string");return of(e)==="symbol"?e:String(e)}function O2e(t,e){if(of(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NN(t,e)}function NN(t,e){return NN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NN(t,e)}function R2e(t){var e=M2e();return function(){var n=yb(t),a;if(e){var i=yb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return EN(this,a)}}function EN(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jN(t)}function jN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yb(t)}var Jo=(function(t){I2e(r,t);var e=R2e(r);function r(n,a){var i;j2e(this,r),i=e.call(this,n,a);var s=i.props,c=s.isActive,d=s.attributeName,h=s.from,p=s.to,m=s.steps,y=s.children,x=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(jN(i)),i.changeStyle=i.changeStyle.bind(jN(i)),!c||x<=0)return i.state={style:{}},typeof y=="function"&&(i.state={style:p}),EN(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof y=="function")return i.state={style:h},EN(i);i.state={style:d?lm({},d,h):h}}else i.state={style:{}};return i}return C2e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,y=this.state.style;if(c){if(!s){var x={style:d?lm({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(x);return}if(!(Ube(a.to,p)&&a.canBegin&&a.isActive)){var T=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var _=T||h?m:a.to;if(this.state&&y){var w={style:d?lm({},d,_):_};(d&&y[d]!==_||!d&&y!==_)&&this.setState(w)}this.runAnimation(fo(fo({},this.props),{},{from:_,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,y=a.onAnimationStart,x=b2e(s,c,c2e(h),d,this.changeStyle),T=function(){i.stopJSAnimation=x()};this.manager.start([y,p,T,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,c=a.begin,d=a.onAnimationStart,h=s[0],p=h.style,m=h.duration,y=m===void 0?0:m,x=function(_,w,E){if(E===0)return _;var I=w.duration,C=w.easing,L=C===void 0?"ease":C,P=w.style,R=w.properties,N=w.onAnimationEnd,A=E>0?s[E-1]:w,j=R||Object.keys(P);if(typeof L=="function"||L==="spring")return[].concat(H_(_),[i.runJSAnimation.bind(i,{from:A.style,to:P,duration:I,easing:L}),I]);var $=y$(j,I,L),B=fo(fo(fo({},A.style),P),{},{transition:$});return[].concat(H_(_),[B,I,N]).filter(Ybe)};return this.manager.start([d].concat(H_(s.reduce(x,[p,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Wbe());var i=a.begin,s=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,y=a.steps,x=a.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof h=="function"||typeof x=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var _=c?lm({},c,d):d,w=y$(Object.keys(_),s,h);T.start([p,i,fo(fo({},_),{},{transition:w}),s,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=S2e(a,w2e),h=O.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||s<=0)return i;var m=function(x){var T=x.props,_=T.style,w=_===void 0?{}:_,E=T.className,I=O.cloneElement(x,fo(fo({},d),{},{style:fo(fo({},w),p),className:E}));return I};return h===1?m(O.Children.only(i)):ae.createElement("div",null,O.Children.map(i,function(y){return m(y)}))}}]),r})(O.PureComponent);Jo.displayName="Animate";Jo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Jo.propTypes={from:en.oneOfType([en.object,en.string]),to:en.oneOfType([en.object,en.string]),attributeName:en.string,duration:en.number,begin:en.number,easing:en.oneOfType([en.string,en.func]),steps:en.arrayOf(en.shape({duration:en.number.isRequired,style:en.object.isRequired,easing:en.oneOfType([en.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),en.func]),properties:en.arrayOf("string"),onAnimationEnd:en.func})),children:en.oneOfType([en.node,en.func]),isActive:en.bool,canBegin:en.bool,onAnimationEnd:en.func,shouldReAnimate:en.bool,onAnimationStart:en.func,onAnimationReStart:en.func};function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function vb(){return vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vb.apply(this,arguments)}function P2e(t,e){return $2e(t)||B2e(t,e)||L2e(t,e)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L2e(t,e){if(t){if(typeof t=="string")return _$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _$(t,e)}}function _$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function $2e(t){if(Array.isArray(t))return t}function T$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function A$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?T$(Object(r),!0).forEach(function(n){U2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U2e(t,e,r){return e=z2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z2e(t){var e=V2e(t,"string");return Tg(e)=="symbol"?e:e+""}function V2e(t,e){if(Tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N$=function(e,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],y=0,x=4;y<x;y++)m[y]=i[y]>s?s:i[y];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(s>0&&i===+i&&i>0){var T=Math.min(s,i);p="M ".concat(e,",").concat(r+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*T,`
            L `).concat(e+n,",").concat(r+a-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n-d*T,",").concat(r+a,`
            L `).concat(e+d*T,",").concat(r+a,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*T," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},F2e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,s=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(s,s+d),y=Math.max(s,s+d);return n>=h&&n<=p&&a>=m&&a<=y}return!1},q2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YE=function(e){var r=A$(A$({},q2e),e),n=O.useRef(),a=O.useState(-1),i=P2e(a,2),s=i[0],c=i[1];O.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,x=r.className,T=r.animationEasing,_=r.animationDuration,w=r.animationBegin,E=r.isAnimationActive,I=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var C=pr("recharts-rectangle",x);return I?ae.createElement(Jo,{canBegin:s>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:_,animationEasing:T,isActive:I},function(L){var P=L.width,R=L.height,N=L.x,A=L.y;return ae.createElement(Jo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:_,isActive:E,easing:T},ae.createElement("path",vb({},zt(r,!0),{className:C,d:N$(N,A,P,R,y),ref:n})))}):ae.createElement("path",vb({},zt(r,!0),{className:C,d:N$(d,h,p,m,y)}))},H2e=["points","className","baseLinePoints","connectNulls"];function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mh.apply(this,arguments)}function G2e(t,e){if(t==null)return{};var r=W2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function W2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function E$(t){return Y2e(t)||X2e(t)||Q2e(t)||K2e()}function K2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q2e(t,e){if(t){if(typeof t=="string")return kN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kN(t,e)}}function X2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Y2e(t){if(Array.isArray(t))return kN(t)}function kN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var j$=function(e){return e&&e.x===+e.x&&e.y===+e.y},Z2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){j$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),j$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Tm=function(e,r){var n=Z2e(e);r&&(n=[n.reduce(function(i,s){return[].concat(E$(i),E$(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},J2e=function(e,r,n){var a=Tm(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Tm(r.reverse(),n).slice(1))},UK=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,s=G2e(e,H2e);if(!r||!r.length)return null;var c=pr("recharts-polygon",n);if(a&&a.length){var d=s.stroke&&s.stroke!=="none",h=J2e(r,a,i);return ae.createElement("g",{className:c},ae.createElement("path",mh({},zt(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:h})),d?ae.createElement("path",mh({},zt(s,!0),{fill:"none",d:Tm(r,i)})):null,d?ae.createElement("path",mh({},zt(s,!0),{fill:"none",d:Tm(a,i)})):null)}var p=Tm(r,i);return ae.createElement("path",mh({},zt(s,!0),{fill:p.slice(-1)==="Z"?s.fill:"none",className:c,d:p}))};function CN(){return CN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CN.apply(this,arguments)}var a4=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,s=pr("recharts-dot",i);return r===+r&&n===+n&&a===+a?O.createElement("circle",CN({},zt(e,!1),Ux(e),{className:s,cx:r,cy:n,r:a})):null};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}var e4e=["x","y","top","left","width","height","className"];function ON(){return ON=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ON.apply(this,arguments)}function k$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function t4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k$(Object(r),!0).forEach(function(n){r4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r4e(t,e,r){return e=n4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n4e(t){var e=a4e(t,"string");return Ag(e)=="symbol"?e:e+""}function a4e(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i4e(t,e){if(t==null)return{};var r=s4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var o4e=function(e,r,n,a,i,s){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},l4e=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,s=e.top,c=s===void 0?0:s,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,x=y===void 0?0:y,T=e.className,_=i4e(e,e4e),w=t4e({x:n,y:i,top:c,left:h,width:m,height:x},_);return!mt(n)||!mt(i)||!mt(m)||!mt(x)||!mt(c)||!mt(h)?null:ae.createElement("path",ON({},zt(w,!0),{className:pr("recharts-cross",T),d:o4e(n,i,m,x,c,h)}))},c4e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function u4e(t,e){if(t==null)return{};var r=d4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function d4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sc.apply(this,arguments)}function C$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Eg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C$(Object(r),!0).forEach(function(n){h4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h4e(t,e,r){return e=f4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f4e(t){var e=p4e(t,"string");return Ng(e)=="symbol"?e:e+""}function p4e(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var m4e=function(e,r,n,a){var i="";return a.forEach(function(s,c){var d=vn(r,n,e,s);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},g4e=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=Eg({stroke:"#ccc"},zt(e,!1));return ae.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(h){var p=vn(r,n,a,h),m=vn(r,n,i,h);return ae.createElement("line",sc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},y4e=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,s=Eg(Eg({stroke:"#ccc"},zt(e,!1)),{},{fill:"none"});return ae.createElement("circle",sc({},s,{className:pr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},v4e=function(e){var r=e.radius,n=e.index,a=Eg(Eg({stroke:"#ccc"},zt(e,!1)),{},{fill:"none"});return ae.createElement("path",sc({},a,{className:pr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:m4e(r,e.cx,e.cy,e.polarAngles)}))},x4e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:ae.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var s=i;return n==="circle"?ae.createElement(y4e,sc({key:s},e,{radius:a,index:i})):ae.createElement(v4e,sc({key:s},e,{radius:a,index:i}))}))},zK=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,x=y===void 0?!0:y,T=u4e(e,c4e);return h<=0?null:ae.createElement("g",{className:"recharts-polar-grid"},ae.createElement(g4e,sc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:x},T)),ae.createElement(x4e,sc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:x},T)))};zK.displayName="PolarGrid";var G_,O$;function b4e(){if(O$)return G_;O$=1;var t=J2(),e=eK(),r=sl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return G_=n,G_}var w4e=b4e();const S4e=Gr(w4e);var W_,I$;function _4e(){if(I$)return W_;I$=1;var t=J2(),e=sl(),r=tK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return W_=n,W_}var T4e=_4e();const A4e=Gr(T4e);var N4e=["cx","cy","angle","ticks","axisLine"],E4e=["ticks","tick","angle","tickFormatter","stroke"];function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Am.apply(this,arguments)}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){i4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M$(t,e){if(t==null)return{};var r=j4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function j4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function k4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FK(n.key),n)}}function C4e(t,e,r){return e&&P$(t.prototype,e),r&&P$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O4e(t,e,r){return e=xb(e),I4e(t,VK()?Reflect.construct(e,r||[],xb(t).constructor):e.apply(t,r))}function I4e(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R4e(t)}function R4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VK=function(){return!!t})()}function xb(t){return xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xb(t)}function M4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IN(t,e)}function IN(t,e){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},IN(t,e)}function i4(t,e,r){return e=FK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FK(t){var e=P4e(t,"string");return lf(e)=="symbol"?e:e+""}function P4e(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b1=(function(t){function e(){return k4e(this,e),O4e(this,e,arguments)}return M4e(e,t),C4e(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,c=i.cx,d=i.cy;return vn(c,d,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,c=n.ticks,d=S4e(c,function(p){return p.coordinate||0}),h=A4e(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,h=M$(n,N4e),p=c.reduce(function(T,_){return[Math.min(T[0],_.coordinate),Math.max(T[1],_.coordinate)]},[1/0,-1/0]),m=vn(a,i,p[0],s),y=vn(a,i,p[1],s),x=hd(hd(hd({},zt(h,!1)),{},{fill:"none"},zt(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return ae.createElement("line",Am({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=M$(a,E4e),m=this.getTickTextAnchor(),y=zt(p,!1),x=zt(s,!1),T=i.map(function(_,w){var E=n.getTickValueCoord(_),I=hd(hd(hd(hd({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(E.x,", ").concat(E.y,")")},y),{},{stroke:"none",fill:h},x),{},{index:w},E),{},{payload:_});return ae.createElement(Ur,Am({className:pr("recharts-polar-radius-axis-tick",jK(s)),key:"tick-".concat(_.coordinate)},Jd(n.props,_,w)),e.renderTickItem(s,I,d?d(_.value,w):_.value))});return ae.createElement(Ur,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:ae.createElement(Ur,{className:pr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),ui.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return ae.isValidElement(n)?s=ae.cloneElement(n,a):rr(n)?s=n(a):s=ae.createElement(tf,Am({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])})(O.PureComponent);i4(b1,"displayName","PolarRadiusAxis");i4(b1,"axisType","radiusAxis");i4(b1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_d.apply(this,arguments)}function D$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D$(Object(r),!0).forEach(function(n){s4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HK(n.key),n)}}function L4e(t,e,r){return e&&L$(t.prototype,e),r&&L$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function B4e(t,e,r){return e=bb(e),$4e(t,qK()?Reflect.construct(e,r||[],bb(t).constructor):e.apply(t,r))}function $4e(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U4e(t)}function U4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qK=function(){return!!t})()}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bb(t)}function z4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RN(t,e)}function RN(t,e){return RN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},RN(t,e)}function s4(t,e,r){return e=HK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HK(t){var e=V4e(t,"string");return cf(e)=="symbol"?e:e+""}function V4e(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F4e=Math.PI/180,B$=1e-5,w1=(function(t){function e(){return D4e(this,e),B4e(this,e,arguments)}return z4e(e,t),L4e(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=vn(i,s,c,n.coordinate),y=vn(i,s,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*F4e),s;return i>B$?s=a==="outer"?"start":"end":i<-B$?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,h=fd(fd({},zt(this.props,!1)),{},{fill:"none"},zt(c,!1));if(d==="circle")return ae.createElement(a4,_d({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:s}));var p=this.props.ticks,m=p.map(function(y){return vn(a,i,s,y.coordinate)});return ae.createElement(UK,_d({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=zt(this.props,!1),m=zt(s,!1),y=fd(fd({},p),{},{fill:"none"},zt(c,!1)),x=i.map(function(T,_){var w=n.getTickLineCoord(T),E=n.getTickTextAnchor(T),I=fd(fd(fd({textAnchor:E},p),{},{stroke:"none",fill:h},m),{},{index:_,payload:T,x:w.x2,y:w.y2});return ae.createElement(Ur,_d({className:pr("recharts-polar-angle-axis-tick",jK(s)),key:"tick-".concat(T.coordinate)},Jd(n.props,T,_)),c&&ae.createElement("line",_d({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,I,d?d(T.value,_):T.value))});return ae.createElement(Ur,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:ae.createElement(Ur,{className:pr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return ae.isValidElement(n)?s=ae.cloneElement(n,a):rr(n)?s=n(a):s=ae.createElement(tf,_d({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])})(O.PureComponent);s4(w1,"displayName","PolarAngleAxis");s4(w1,"axisType","angleAxis");s4(w1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var K_,$$;function q4e(){if($$)return K_;$$=1;var t=JG(),e=t(Object.getPrototypeOf,Object);return K_=e,K_}var Q_,U$;function H4e(){if(U$)return Q_;U$=1;var t=dc(),e=q4e(),r=hc(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,c=i.hasOwnProperty,d=s.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=c.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return Q_=h,Q_}var G4e=H4e();const W4e=Gr(G4e);var X_,z$;function K4e(){if(z$)return X_;z$=1;var t=dc(),e=hc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return X_=n,X_}var Q4e=K4e();const X4e=Gr(Q4e);function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function wb(){return wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wb.apply(this,arguments)}function Y4e(t,e){return twe(t)||ewe(t,e)||J4e(t,e)||Z4e()}function Z4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J4e(t,e){if(t){if(typeof t=="string")return V$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V$(t,e)}}function V$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ewe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function twe(t){if(Array.isArray(t))return t}function F$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function q$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(r),!0).forEach(function(n){rwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rwe(t,e,r){return e=nwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nwe(t){var e=awe(t,"string");return jg(e)=="symbol"?e:e+""}function awe(t,e){if(jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H$=function(e,r,n,a,i){var s=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-s/2,",").concat(r+i),c+="L ".concat(e+n-s/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},iwe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},swe=function(e){var r=q$(q$({},iwe),e),n=O.useRef(),a=O.useState(-1),i=Y4e(a,2),s=i[0],c=i[1];O.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&c(C)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,x=r.className,T=r.animationEasing,_=r.animationDuration,w=r.animationBegin,E=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var I=pr("recharts-trapezoid",x);return E?ae.createElement(Jo,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:_,animationEasing:T,isActive:E},function(C){var L=C.upperWidth,P=C.lowerWidth,R=C.height,N=C.x,A=C.y;return ae.createElement(Jo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:_,easing:T},ae.createElement("path",wb({},zt(r,!0),{className:I,d:H$(N,A,L,P,R),ref:n})))}):ae.createElement("g",null,ae.createElement("path",wb({},zt(r,!0),{className:I,d:H$(d,h,p,m,y)})))},owe=["option","shapeType","propTransformer","activeClassName","isActive"];function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function lwe(t,e){if(t==null)return{};var r=cwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function cwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Sb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G$(Object(r),!0).forEach(function(n){uwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uwe(t,e,r){return e=dwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dwe(t){var e=hwe(t,"string");return kg(e)=="symbol"?e:e+""}function hwe(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fwe(t,e){return Sb(Sb({},e),t)}function pwe(t,e){return t==="symbols"}function W$(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return ae.createElement(YE,r);case"trapezoid":return ae.createElement(swe,r);case"sector":return ae.createElement(IK,r);case"symbols":if(pwe(e))return ae.createElement(F2,r);break;default:return null}}function mwe(t){return O.isValidElement(t)?t.props:t}function MN(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?fwe:n,i=t.activeClassName,s=i===void 0?"recharts-active-shape":i,c=t.isActive,d=lwe(t,owe),h;if(O.isValidElement(e))h=O.cloneElement(e,Sb(Sb({},d),mwe(e)));else if(rr(e))h=e(d);else if(W4e(e)&&!X4e(e)){var p=a(e,d);h=ae.createElement(W$,{shapeType:r,elementProps:p})}else{var m=d;h=ae.createElement(W$,{shapeType:r,elementProps:m})}return c?ae.createElement(Ur,{className:s},h):h}function o4(t,e){return e!=null&&"trapezoids"in t.props}function l4(t,e){return e!=null&&"sectors"in t.props}function Cg(t,e){return e!=null&&"points"in t.props}function gwe(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function ywe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function vwe(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function xwe(t,e){var r;return o4(t,e)?r=gwe:l4(t,e)?r=ywe:Cg(t,e)&&(r=vwe),r}function bwe(t,e){var r;return o4(t,e)?r="trapezoids":l4(t,e)?r="sectors":Cg(t,e)&&(r="points"),r}function wwe(t,e){if(o4(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(l4(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Cg(t,e)?e.payload:{}}function Swe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=bwe(r,e),i=wwe(r,e),s=n.filter(function(d,h){var p=v1(i,d),m=r.props[a].filter(function(T){var _=xwe(r,e);return _(T,e)}),y=r.props[a].indexOf(m[m.length-1]),x=h===y;return p&&x}),c=n.indexOf(s[s.length-1]);return c}var Y_,K$;function _we(){if(K$)return Y_;K$=1;function t(e){return e&&e.length?e[0]:void 0}return Y_=t,Y_}var Z_,Q$;function Twe(){return Q$||(Q$=1,Z_=_we()),Z_}var Awe=Twe();const Nwe=Gr(Awe);var Ewe=["key"];function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function jwe(t,e){if(t==null)return{};var r=kwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _b(){return _b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_b.apply(this,arguments)}function X$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(r),!0).forEach(function(n){Rl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WK(n.key),n)}}function Owe(t,e,r){return e&&Y$(t.prototype,e),r&&Y$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Iwe(t,e,r){return e=Tb(e),Rwe(t,GK()?Reflect.construct(e,r||[],Tb(t).constructor):e.apply(t,r))}function Rwe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mwe(t)}function Mwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GK=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tb(t)}function Pwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PN(t,e)}function PN(t,e){return PN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},PN(t,e)}function Rl(t,e,r){return e=WK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WK(t){var e=Dwe(t,"string");return uf(e)=="symbol"?e:e+""}function Dwe(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var S1=(function(t){function e(){var r;Cwe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Iwe(this,e,[].concat(a)),Rl(r,"state",{isAnimationFinished:!1}),Rl(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),rr(s)&&s()}),Rl(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),rr(s)&&s()}),Rl(r,"handleMouseEnter",function(s){var c=r.props.onMouseEnter;c&&c(r.props,s)}),Rl(r,"handleMouseLeave",function(s){var c=r.props.onMouseLeave;c&&c(r.props,s)}),r}return Pwe(e,t),Owe(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,s=a.dataKey,c=zt(this.props,!1),d=zt(i,!0),h=n.map(function(p,m){var y=Oi(Oi(Oi({key:"dot-".concat(m),r:3},c),d),{},{dataKey:s,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,y)});return ae.createElement(Ur,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,s=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return ae.isValidElement(i)?p=ae.cloneElement(i,Oi(Oi({},this.props),{},{points:n})):rr(i)?p=i(Oi(Oi({},this.props),{},{points:n})):p=ae.createElement(UK,_b({},zt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),ae.createElement(Ur,{className:"recharts-radar-polygon"},p,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,s=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return ae.createElement(Jo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,T=m&&m.length/i.length,_=i.map(function(w,E){var I=m&&m[Math.floor(E*T)];if(I){var C=Yi(I.x,w.x),L=Yi(I.y,w.y);return Oi(Oi({},w),{},{x:C(x),y:L(x)})}var P=Yi(w.cx,w.x),R=Yi(w.cy,w.y);return Oi(Oi({},w),{},{x:P(x),y:R(x)})});return n.renderPolygonStatically(_)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!s&&(!c||!v1(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,s=n.points,c=n.isAnimationActive;if(a||!s||!s.length)return null;var d=this.state.isAnimationFinished,h=pr("recharts-radar",i);return ae.createElement(Ur,{className:h},this.renderPolygon(),(!c||d)&&Kl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(ae.isValidElement(n))i=ae.cloneElement(n,a);else if(rr(n))i=n(a);else{var s=a.key,c=jwe(a,Ewe);i=ae.createElement(a4,_b({},c,{key:s,className:pr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(O.PureComponent);Rl(S1,"displayName","Radar");Rl(S1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!h0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Rl(S1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,s=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(y,x){var T=fi(y,r.dataKey,x),_=fi(y,a),w=r.scale(T)+p,E=Array.isArray(_)?CK(_):_,I=lr(E)?void 0:e.scale(E);Array.isArray(_)&&_.length>=2&&(d=!0),h.push(Oi(Oi({},vn(s,c,I,w)),{},{name:T,value:_,cx:s,cy:c,radius:I,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var x=Nwe(y.value),T=lr(x)?void 0:e.scale(x);m.push(Oi(Oi({},y),{},{radius:T},vn(s,c,T,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var J_,Z$;function Lwe(){if(Z$)return J_;Z$=1;var t=Math.ceil,e=Math.max;function r(n,a,i,s){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[s?d:++c]=n,n+=i;return h}return J_=r,J_}var eT,J$;function KK(){if(J$)return eT;J$=1;var t=mW(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return eT=n,eT}var tT,eU;function Bwe(){if(eU)return tT;eU=1;var t=Lwe(),e=G2(),r=KK();function n(a){return function(i,s,c){return c&&typeof c!="number"&&e(i,s,c)&&(s=c=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),c=c===void 0?i<s?1:-1:r(c),t(i,s,c,a)}}return tT=n,tT}var rT,tU;function $we(){if(tU)return rT;tU=1;var t=Bwe(),e=t();return rT=e,rT}var Uwe=$we();const Ab=Gr(Uwe);function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function rU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(r),!0).forEach(function(n){QK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QK(t,e,r){return e=zwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zwe(t){var e=Vwe(t,"string");return Og(e)=="symbol"?e:e+""}function Vwe(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fwe=["Webkit","Moz","O","ms"],qwe=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Fwe.reduce(function(i,s){return nU(nU({},i),{},QK({},s+n,r))},{});return a[e]=r,a};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nb.apply(this,arguments)}function aU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(r),!0).forEach(function(n){gs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YK(n.key),n)}}function Gwe(t,e,r){return e&&iU(t.prototype,e),r&&iU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wwe(t,e,r){return e=Eb(e),Kwe(t,XK()?Reflect.construct(e,r||[],Eb(t).constructor):e.apply(t,r))}function Kwe(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qwe(t)}function Qwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XK=function(){return!!t})()}function Eb(t){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eb(t)}function Xwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DN(t,e)}function DN(t,e){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},DN(t,e)}function gs(t,e,r){return e=YK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YK(t){var e=Ywe(t,"string");return df(e)=="symbol"?e:e+""}function Ywe(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zwe=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,s=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=wm().domain(Ab(0,d)).range([i,i+s-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},sU=function(e){return e.changedTouches&&!!e.changedTouches.length},hf=(function(t){function e(r){var n;return Hwe(this,e),n=Wwe(this,e,[r]),gs(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),gs(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),gs(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,c=a.startIndex;s==null||s({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),gs(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),gs(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),gs(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),gs(n,"handleSlideDragStart",function(a){var i=sU(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Xwe(e,t),Gwe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),y=Math.max(a,i),x=e.getIndexInRange(s,m),T=e.getIndexInRange(s,y);return{startIndex:x-x%d,endIndex:T===p?p:T-T%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,c=a.dataKey,d=fi(i[n],c,n);return rr(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,x=d.endIndex,T=d.onChange,_=n.pageX-i;_>0?_=Math.min(_,h+p-m-c,h+p-m-s):_<0&&(_=Math.max(_,h-s,h-c));var w=this.getIndex({startX:s+_,endX:c+_});(w.startIndex!==y||w.endIndex!==x)&&T&&T(w),this.setState({startX:s+_,endX:c+_,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=sU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[s],p=this.props,m=p.x,y=p.width,x=p.travellerWidth,T=p.onChange,_=p.gap,w=p.data,E={startX:this.state.startX,endX:this.state.endX},I=n.pageX-i;I>0?I=Math.min(I,m+y-x-h):I<0&&(I=Math.max(I,m-h)),E[s]=h+I;var C=this.getIndex(E),L=C.startIndex,P=C.endIndex,R=function(){var A=w.length-1;return s==="startX"&&(c>d?L%_===0:P%_===0)||c<d&&P===A||s==="endX"&&(c>d?P%_===0:L%_===0)||c>d&&P===A};this.setState(gs(gs({},s,h+I),"brushMoveStartX",n.pageX),function(){T&&R()&&T(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,c=s.scaleValues,d=s.startX,h=s.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=c.length)){var x=c[y];a==="startX"&&x>=h||a==="endX"&&x<=d||this.setState(gs({},a,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.fill,h=n.stroke;return ae.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=O.Children.only(h);return m?ae.cloneElement(m,{x:a,y:i,width:s,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,x=d.ariaLabel,T=d.data,_=d.startIndex,w=d.endIndex,E=Math.max(n,this.props.x),I=nT(nT({},zt(this.props,!1)),{},{x:E,y:h,width:p,height:m}),C=x||"Min value: ".concat((i=T[_])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return ae.createElement(Ur,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),c.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,I))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return ae.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:s,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,x=5,T={pointerEvents:"none",fill:h};return ae.createElement(Ur,{className:"recharts-brush-texts"},ae.createElement(tf,Nb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-x,y:s+c/2},T),this.getTextOfTick(a)),ae.createElement(tf,Nb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+x,y:s+c/2},T),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,x=y.startX,T=y.endX,_=y.isTextActive,w=y.isSlideMoving,E=y.isTravellerMoving,I=y.isTravellerFocused;if(!a||!a.length||!mt(c)||!mt(d)||!mt(h)||!mt(p)||h<=0||p<=0)return null;var C=pr("recharts-brush",i),L=ae.Children.count(s)===1,P=qwe("userSelect","none");return ae.createElement(Ur,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(x,T),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(T,"endX"),(_||w||E||I||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return ae.createElement(ae.Fragment,null,ae.createElement("rect",{x:a,y:i,width:s,height:c,fill:d,stroke:"none"}),ae.createElement("line",{x1:a+1,y1:h,x2:a+s-1,y2:h,fill:"none",stroke:"#fff"}),ae.createElement("line",{x1:a+1,y1:h+2,x2:a+s-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return ae.isValidElement(n)?i=ae.cloneElement(n,a):rr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return nT({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s},i&&i.length?Zwe({data:i,width:s,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+s-d]);var y=a.scale.domain().map(function(x){return a.scale(x)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,c=i-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>a?c=d:s=d}return a>=n[c]?c:s}}])})(O.PureComponent);gs(hf,"displayName","Brush");gs(hf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var aT,oU;function Jwe(){if(oU)return aT;oU=1;var t=SE();function e(r,n){var a;return t(r,function(i,s,c){return a=n(i,s,c),!a}),!!a}return aT=e,aT}var iT,lU;function e5e(){if(lU)return iT;lU=1;var t=GG(),e=sl(),r=Jwe(),n=as(),a=G2();function i(s,c,d){var h=n(s)?t:r;return d&&a(s,c,d)&&(c=void 0),h(s,e(c,3))}return iT=i,iT}var t5e=e5e();const r5e=Gr(t5e);var Ko=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},sT,cU;function n5e(){if(cU)return sT;cU=1;var t=uW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return sT=e,sT}var oT,uU;function a5e(){if(uU)return oT;uU=1;var t=n5e(),e=lW(),r=sl();function n(a,i){var s={};return i=r(i,3),e(a,function(c,d,h){t(s,d,i(c,d,h))}),s}return oT=n,oT}var i5e=a5e();const s5e=Gr(i5e);var lT,dU;function o5e(){if(dU)return lT;dU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return lT=t,lT}var cT,hU;function l5e(){if(hU)return cT;hU=1;var t=SE();function e(r,n){var a=!0;return t(r,function(i,s,c){return a=!!n(i,s,c),a}),a}return cT=e,cT}var uT,fU;function c5e(){if(fU)return uT;fU=1;var t=o5e(),e=l5e(),r=sl(),n=as(),a=G2();function i(s,c,d){var h=n(s)?t:e;return d&&a(s,c,d)&&(c=void 0),h(s,r(c,3))}return uT=i,uT}var u5e=c5e();const ZK=Gr(u5e);var d5e=["x","y"];function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LN.apply(this,arguments)}function pU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(r),!0).forEach(function(n){h5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h5e(t,e,r){return e=f5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f5e(t){var e=p5e(t,"string");return Ig(e)=="symbol"?e:e+""}function p5e(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m5e(t,e){if(t==null)return{};var r=g5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function g5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function y5e(t,e){var r=t.x,n=t.y,a=m5e(t,d5e),i="".concat(r),s=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),y=parseInt(m,10);return Yp(Yp(Yp(Yp(Yp({},e),a),s?{x:s}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function mU(t){return ae.createElement(MN,LN({shapeType:"rectangle",propTransformer:y5e,activeClassName:"recharts-active-bar"},t))}var v5e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=mt(n)||w0e(n);return i?e(n,a):(i||t0(),r)}},x5e=["value","background"],JK;function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function b5e(t,e){if(t==null)return{};var r=w5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function w5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function jb(){return jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jb.apply(this,arguments)}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ta(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){cu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tQ(n.key),n)}}function _5e(t,e,r){return e&&yU(t.prototype,e),r&&yU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function T5e(t,e,r){return e=kb(e),A5e(t,eQ()?Reflect.construct(e,r||[],kb(t).constructor):e.apply(t,r))}function A5e(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N5e(t)}function N5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eQ=function(){return!!t})()}function kb(t){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kb(t)}function E5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BN(t,e)}function BN(t,e){return BN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},BN(t,e)}function cu(t,e,r){return e=tQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tQ(t){var e=j5e(t,"string");return ff(e)=="symbol"?e:e+""}function j5e(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _1=(function(t){function e(){var r;S5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=T5e(this,e,[].concat(a)),cu(r,"state",{isAnimationFinished:!1}),cu(r,"id",h1("recharts-bar-")),cu(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),cu(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return E5e(e,t),_5e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=zt(this.props,!1);return n&&n.map(function(m,y){var x=y===d,T=x?h:s,_=Ta(Ta(Ta({},p),m),{},{isActive:x,option:T,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return ae.createElement(Ur,jb({className:"recharts-bar-rectangle"},Jd(a.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),ae.createElement(mU,_))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=this.state.prevData;return ae.createElement(Jo,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var T=x.t,_=i.map(function(w,E){var I=y&&y[E];if(I){var C=Yi(I.x,w.x),L=Yi(I.y,w.y),P=Yi(I.width,w.width),R=Yi(I.height,w.height);return Ta(Ta({},w),{},{x:C(T),y:L(T),width:P(T),height:R(T)})}if(s==="horizontal"){var N=Yi(0,w.height),A=N(T);return Ta(Ta({},w),{},{y:w.y+w.height-A,height:A})}var j=Yi(0,w.width),$=j(T);return Ta(Ta({},w),{},{width:$})});return ae.createElement(Ur,null,n.renderRectanglesStatically(_))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!v1(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,c=a.activeIndex,d=zt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,y=b5e(h,x5e);if(!m)return null;var x=Ta(Ta(Ta(Ta(Ta({},y),{},{fill:"#eee"},m),d),Jd(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:p,className:"recharts-bar-background-rectangle"});return ae.createElement(mU,jb({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},x))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=Ns(p,x1);if(!m)return null;var y=h==="vertical"?s[0].height/2:s[0].width/2,x=function(w,E){var I=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:I,errorVal:fi(w,E)}},T={clipPath:n?"url(#clipPath-".concat(a,")"):null};return ae.createElement(Ur,T,m.map(function(_){return ae.cloneElement(_,{key:"error-bar-".concat(a,"-").concat(_.props.dataKey),data:s,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,x=n.isAnimationActive,T=n.background,_=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=pr("recharts-bar",s),I=c&&c.allowDataOverflow,C=d&&d.allowDataOverflow,L=I||C,P=lr(_)?this.id:_;return ae.createElement(Ur,{className:E},I||C?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(P)},ae.createElement("rect",{x:I?h:h-m/2,y:C?p:p-y/2,width:I?m:m*2,height:C?y:y*2}))):null,ae.createElement(Ur,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(P,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,P),(!x||w)&&Kl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(O.PureComponent);JK=_1;cu(_1,"displayName","Bar");cu(_1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!h0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});cu(_1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,s=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,x=Dve(n,r);if(!x)return null;var T=e.layout,_=r.type.defaultProps,w=_!==void 0?Ta(Ta({},_),r.props):r.props,E=w.dataKey,I=w.children,C=w.minPointSize,L=T==="horizontal"?s:i,P=h?L.scale.domain():null,R=Fve({numericAxis:L}),N=Ns(I,AE),A=m.map(function(j,$){var B,F,z,K,Q,G;h?B=Lve(h[p+$],P):(B=fi(j,E),Array.isArray(B)||(B=[R,B]));var X=v5e(C,JK.defaultProps.minPointSize)(B[1],$);if(T==="horizontal"){var ne,de=[s.scale(B[0]),s.scale(B[1])],me=de[0],H=de[1];F=VB({axis:i,ticks:c,bandSize:a,offset:x.offset,entry:j,index:$}),z=(ne=H??me)!==null&&ne!==void 0?ne:void 0,K=x.size;var ee=me-H;if(Q=Number.isNaN(ee)?0:ee,G={x:F,y:s.y,width:K,height:s.height},Math.abs(X)>0&&Math.abs(Q)<Math.abs(X)){var te=vo(Q||X)*(Math.abs(X)-Math.abs(Q));z-=te,Q+=te}}else{var Oe=[i.scale(B[0]),i.scale(B[1])],re=Oe[0],ce=Oe[1];if(F=re,z=VB({axis:s,ticks:d,bandSize:a,offset:x.offset,entry:j,index:$}),K=ce-re,Q=x.size,G={x:i.x,y:z,width:i.width,height:Q},Math.abs(X)>0&&Math.abs(K)<Math.abs(X)){var he=vo(K||X)*(Math.abs(X)-Math.abs(K));K+=he}}return Ta(Ta(Ta({},j),{},{x:F,y:z,width:K,height:Q,value:h?B:B[1],payload:j,background:G},N&&N[$]&&N[$].props),{},{tooltipPayload:[NK(r,j)],tooltipPosition:{x:F+K/2,y:z+Q/2}})});return Ta({data:A,layout:T},y)});function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function k5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rQ(n.key),n)}}function C5e(t,e,r){return e&&vU(t.prototype,e),r&&vU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function go(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xU(Object(r),!0).forEach(function(n){c4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c4(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=O5e(t,"string");return Rg(e)=="symbol"?e:e+""}function O5e(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I5e=function(e,r,n,a,i){var s=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!ys(h,_1);return p.reduce(function(x,T){var _=r[T],w=_.orientation,E=_.domain,I=_.padding,C=I===void 0?{}:I,L=_.mirror,P=_.reversed,R="".concat(w).concat(L?"Mirror":""),N,A,j,$,B;if(_.type==="number"&&(_.padding==="gap"||_.padding==="no-gap")){var F=E[1]-E[0],z=1/0,K=_.categoricalDomain.sort(A0e);if(K.forEach(function(Oe,re){re>0&&(z=Math.min((Oe||0)-(K[re-1]||0),z))}),Number.isFinite(z)){var Q=z/F,G=_.layout==="vertical"?n.height:n.width;if(_.padding==="gap"&&(N=Q*G/2),_.padding==="no-gap"){var X=xo(e.barCategoryGap,Q*G),ne=Q*G/2;N=ne-X-(ne-X)/G*X}}}a==="xAxis"?A=[n.left+(C.left||0)+(N||0),n.left+n.width-(C.right||0)-(N||0)]:a==="yAxis"?A=d==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(N||0),n.top+n.height-(C.bottom||0)-(N||0)]:A=_.range,P&&(A=[A[1],A[0]]);var de=SK(_,i,y),me=de.scale,H=de.realScaleType;me.domain(E).range(A),_K(me);var ee=TK(me,go(go({},_),{},{realScaleType:H}));a==="xAxis"?(B=w==="top"&&!L||w==="bottom"&&L,j=n.left,$=m[R]-B*_.height):a==="yAxis"&&(B=w==="left"&&!L||w==="right"&&L,j=m[R]-B*_.width,$=n.top);var te=go(go(go({},_),ee),{},{realScaleType:H,x:j,y:$,scale:me,width:a==="xAxis"?n.width:_.width,height:a==="yAxis"?n.height:_.height});return te.bandSize=db(te,ee),!_.hide&&a==="xAxis"?m[R]+=(B?-1:1)*te.height:_.hide||(m[R]+=(B?-1:1)*te.width),go(go({},x),{},c4({},T,te))},{})},nQ=function(e,r){var n=e.x,a=e.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},R5e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return nQ({x:r,y:n},{x:a,y:i})},aQ=(function(){function t(e){k5e(this,t),this.scale=e}return C5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();c4(aQ,"EPS",1e-4);var ZE=function(e){var r=Object.keys(e).reduce(function(n,a){return go(go({},n),{},c4({},a,aQ.create(e[a])))},{});return go(go({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,c=i.position;return s5e(a,function(d,h){return r[h].apply(d,{bandAware:s,position:c})})},isInRange:function(a){return ZK(a,function(i,s){return r[s].isInRange(i)})}})};function M5e(t){return(t%180+180)%180}var P5e=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=M5e(a),s=i*Math.PI/180,c=Math.atan(n/r),d=s>c&&s<Math.PI-c?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},dT,bU;function D5e(){if(bU)return dT;bU=1;var t=sl(),e=f1(),r=q2();function n(a){return function(i,s,c){var d=Object(i);if(!e(i)){var h=t(s,3);i=r(i),s=function(m){return h(d[m],m,d)}}var p=a(i,s,c);return p>-1?d[h?i[p]:p]:void 0}}return dT=n,dT}var hT,wU;function L5e(){if(wU)return hT;wU=1;var t=KK();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return hT=e,hT}var fT,SU;function B5e(){if(SU)return fT;SU=1;var t=nW(),e=sl(),r=L5e(),n=Math.max;function a(i,s,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(s,3),h)}return fT=a,fT}var pT,_U;function $5e(){if(_U)return pT;_U=1;var t=D5e(),e=B5e(),r=t(e);return pT=r,pT}var U5e=$5e();const z5e=Gr(U5e);var V5e=xG();const F5e=Gr(V5e);var q5e=F5e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),JE=O.createContext(void 0),ej=O.createContext(void 0),iQ=O.createContext(void 0),sQ=O.createContext({}),oQ=O.createContext(void 0),lQ=O.createContext(0),cQ=O.createContext(0),TU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=e.clipPathId,c=e.children,d=e.width,h=e.height,p=q5e(i);return ae.createElement(JE.Provider,{value:n},ae.createElement(ej.Provider,{value:a},ae.createElement(sQ.Provider,{value:i},ae.createElement(iQ.Provider,{value:p},ae.createElement(oQ.Provider,{value:s},ae.createElement(lQ.Provider,{value:h},ae.createElement(cQ.Provider,{value:d},c)))))))},H5e=function(){return O.useContext(oQ)},uQ=function(e){var r=O.useContext(JE);r==null&&t0();var n=r[e];return n==null&&t0(),n},G5e=function(){var e=O.useContext(JE);return iu(e)},W5e=function(){var e=O.useContext(ej),r=z5e(e,function(n){return ZK(n.domain,Number.isFinite)});return r||iu(e)},dQ=function(e){var r=O.useContext(ej);r==null&&t0();var n=r[e];return n==null&&t0(),n},K5e=function(){var e=O.useContext(iQ);return e},Q5e=function(){return O.useContext(sQ)},tj=function(){return O.useContext(cQ)},rj=function(){return O.useContext(lQ)};function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function X5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fQ(n.key),n)}}function Z5e(t,e,r){return e&&Y5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J5e(t,e,r){return e=Cb(e),e3e(t,hQ()?Reflect.construct(e,r||[],Cb(t).constructor):e.apply(t,r))}function e3e(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t3e(t)}function t3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hQ=function(){return!!t})()}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cb(t)}function r3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$N(t,e)}function $N(t,e){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$N(t,e)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function NU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){nj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nj(t,e,r){return e=fQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fQ(t){var e=n3e(t,"string");return pf(e)=="symbol"?e:e+""}function n3e(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function a3e(t,e){return l3e(t)||o3e(t,e)||s3e(t,e)||i3e()}function i3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s3e(t,e){if(t){if(typeof t=="string")return EU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EU(t,e)}}function EU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function l3e(t){if(Array.isArray(t))return t}function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UN.apply(this,arguments)}var c3e=function(e,r){var n;return ae.isValidElement(e)?n=ae.cloneElement(e,r):rr(e)?n=e(r):n=ae.createElement("line",UN({},r,{className:"recharts-reference-line-line"})),n},u3e=function(e,r,n,a,i,s,c,d,h){var p=i.x,m=i.y,y=i.width,x=i.height;if(n){var T=h.y,_=e.y.apply(T,{position:s});if(Ko(h,"discard")&&!e.y.isInRange(_))return null;var w=[{x:p+y,y:_},{x:p,y:_}];return d==="left"?w.reverse():w}if(r){var E=h.x,I=e.x.apply(E,{position:s});if(Ko(h,"discard")&&!e.x.isInRange(I))return null;var C=[{x:I,y:m+x},{x:I,y:m}];return c==="top"?C.reverse():C}if(a){var L=h.segment,P=L.map(function(R){return e.apply(R,{position:s})});return Ko(h,"discard")&&r5e(P,function(R){return!e.isInRange(R)})?null:P}return null};function d3e(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,s=t.shape,c=t.className,d=t.alwaysShow,h=H5e(),p=uQ(a),m=dQ(i),y=K5e();if(!h||!y)return null;Gl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=ZE({x:p.scale,y:m.scale}),T=Da(e),_=Da(r),w=n&&n.length===2,E=u3e(x,T,_,w,y,t.position,p.orientation,m.orientation,t);if(!E)return null;var I=a3e(E,2),C=I[0],L=C.x,P=C.y,R=I[1],N=R.x,A=R.y,j=Ko(t,"hidden")?"url(#".concat(h,")"):void 0,$=NU(NU({clipPath:j},zt(t,!0)),{},{x1:L,y1:P,x2:N,y2:A});return ae.createElement(Ur,{className:pr("recharts-reference-line",c)},c3e(s,$),ui.renderCallByParent(t,R5e({x1:L,y1:P,x2:N,y2:A})))}var aj=(function(t){function e(){return X5e(this,e),J5e(this,e,arguments)}return r3e(e,t),Z5e(e,[{key:"render",value:function(){return ae.createElement(d3e,this.props)}}])})(ae.Component);nj(aj,"displayName","ReferenceLine");nj(aj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zN.apply(this,arguments)}function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function jU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(r),!0).forEach(function(n){u4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function h3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mQ(n.key),n)}}function p3e(t,e,r){return e&&f3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m3e(t,e,r){return e=Ob(e),g3e(t,pQ()?Reflect.construct(e,r||[],Ob(t).constructor):e.apply(t,r))}function g3e(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y3e(t)}function y3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pQ=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(t)}function v3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VN(t,e)}function VN(t,e){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VN(t,e)}function u4(t,e,r){return e=mQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mQ(t){var e=x3e(t,"string");return mf(e)=="symbol"?e:e+""}function x3e(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b3e=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,s=ZE({x:a.scale,y:i.scale}),c=s.apply({x:r,y:n},{bandAware:!0});return Ko(e,"discard")&&!s.isInRange(c)?null:c},d4=(function(t){function e(){return h3e(this,e),m3e(this,e,arguments)}return v3e(e,t),p3e(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,h=Da(a),p=Da(i);if(Gl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=b3e(this.props);if(!m)return null;var y=m.x,x=m.y,T=this.props,_=T.shape,w=T.className,E=Ko(this.props,"hidden")?"url(#".concat(d,")"):void 0,I=kU(kU({clipPath:E},zt(this.props,!0)),{},{cx:y,cy:x});return ae.createElement(Ur,{className:pr("recharts-reference-dot",w)},e.renderDot(_,I),ui.renderCallByParent(this.props,{x:y-s,y:x-s,width:2*s,height:2*s}))}}])})(ae.Component);u4(d4,"displayName","ReferenceDot");u4(d4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});u4(d4,"renderDot",function(t,e){var r;return ae.isValidElement(t)?r=ae.cloneElement(t,e):rr(t)?r=t(e):r=ae.createElement(a4,zN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function FN(){return FN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FN.apply(this,arguments)}function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function CU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function OU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CU(Object(r),!0).forEach(function(n){h4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yQ(n.key),n)}}function _3e(t,e,r){return e&&S3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function T3e(t,e,r){return e=Ib(e),A3e(t,gQ()?Reflect.construct(e,r||[],Ib(t).constructor):e.apply(t,r))}function A3e(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N3e(t)}function N3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gQ=function(){return!!t})()}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ib(t)}function E3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qN(t,e)}function qN(t,e){return qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qN(t,e)}function h4(t,e,r){return e=yQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yQ(t){var e=j3e(t,"string");return gf(e)=="symbol"?e:e+""}function j3e(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var k3e=function(e,r,n,a,i){var s=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var y=ZE({x:p.scale,y:m.scale}),x={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Ko(i,"discard")&&(!y.isInRange(x)||!y.isInRange(T))?null:nQ(x,T)},f4=(function(t){function e(){return w3e(this,e),T3e(this,e,arguments)}return E3e(e,t),_3e(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Gl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Da(a),y=Da(i),x=Da(s),T=Da(c),_=this.props.shape;if(!m&&!y&&!x&&!T&&!_)return null;var w=k3e(m,y,x,T,this.props);if(!w&&!_)return null;var E=Ko(this.props,"hidden")?"url(#".concat(p,")"):void 0;return ae.createElement(Ur,{className:pr("recharts-reference-area",d)},e.renderRect(_,OU(OU({clipPath:E},zt(this.props,!0)),w)),ui.renderCallByParent(this.props,w))}}])})(ae.Component);h4(f4,"displayName","ReferenceArea");h4(f4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});h4(f4,"renderRect",function(t,e){var r;return ae.isValidElement(t)?r=ae.cloneElement(t,e):rr(t)?r=t(e):r=ae.createElement(YE,FN({},e,{className:"recharts-reference-area-rect"})),r});function vQ(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function C3e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return P5e(n,r)}function O3e(t,e,r){var n=r==="width",a=t.x,i=t.y,s=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+s:i+c}:{start:n?a+s:i+c,end:n?a:i}}function Rb(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function I3e(t,e){return vQ(t,e+1)}function R3e(t,e,r,n,a){for(var i=(n||[]).slice(),s=e.start,c=e.end,d=0,h=1,p=s,m=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:vQ(n,h)};var _=d,w,E=function(){return w===void 0&&(w=r(T,_)),w},I=T.coordinate,C=d===0||Rb(t,I,E,p,c);C||(d=0,p=s,h+=1),C&&(p=I+t*(E()/2+a),d+=h)},y;h<=i.length;)if(y=m(),y)return y.v;return[]}function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){M3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M3e(t,e,r){return e=P3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P3e(t){var e=D3e(t,"string");return Mg(e)=="symbol"?e:e+""}function D3e(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L3e(t,e,r,n,a){for(var i=(n||[]).slice(),s=i.length,c=e.start,d=e.end,h=function(y){var x=i[y],T,_=function(){return T===void 0&&(T=r(x,y)),T};if(y===s-1){var w=t*(x.coordinate+t*_()/2-d);i[y]=x=wi(wi({},x),{},{tickCoord:w>0?x.coordinate-w*t:x.coordinate})}else i[y]=x=wi(wi({},x),{},{tickCoord:x.coordinate});var E=Rb(t,x.tickCoord,_,c,d);E&&(d=x.tickCoord-t*(_()/2+a),i[y]=wi(wi({},x),{},{isShow:!0}))},p=s-1;p>=0;p--)h(p);return i}function B3e(t,e,r,n,a,i){var s=(n||[]).slice(),c=s.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),y=t*(p.coordinate+t*m/2-h);s[c-1]=p=wi(wi({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var x=Rb(t,p.tickCoord,function(){return m},d,h);x&&(h=p.tickCoord-t*(m/2+a),s[c-1]=wi(wi({},p),{},{isShow:!0}))}for(var T=i?c-1:c,_=function(I){var C=s[I],L,P=function(){return L===void 0&&(L=r(C,I)),L};if(I===0){var R=t*(C.coordinate-t*P()/2-d);s[I]=C=wi(wi({},C),{},{tickCoord:R<0?C.coordinate-R*t:C.coordinate})}else s[I]=C=wi(wi({},C),{},{tickCoord:C.coordinate});var N=Rb(t,C.tickCoord,P,d,h);N&&(d=C.tickCoord+t*(P()/2+a),s[I]=wi(wi({},C),{},{isShow:!0}))},w=0;w<T;w++)_(w);return s}function ij(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,s=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(mt(d)||h0.isSsr)return I3e(a,typeof d=="number"&&mt(d)?d:0);var y=[],x=c==="top"||c==="bottom"?"width":"height",T=p&&x==="width"?bm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},_=function(C,L){var P=rr(h)?h(C.value,L):C.value;return x==="width"?C3e(bm(P,{fontSize:e,letterSpacing:r}),T,m):bm(P,{fontSize:e,letterSpacing:r})[x]},w=a.length>=2?vo(a[1].coordinate-a[0].coordinate):1,E=O3e(i,w,x);return d==="equidistantPreserveStart"?R3e(w,E,_,a,s):(d==="preserveStart"||d==="preserveStartEnd"?y=B3e(w,E,_,a,s,d==="preserveStartEnd"):y=L3e(w,E,_,a,s),y.filter(function(I){return I.isShow}))}var $3e=["viewBox"],U3e=["viewBox"],z3e=["ticks"];function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gh.apply(this,arguments)}function RU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(r),!0).forEach(function(n){sj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mT(t,e){if(t==null)return{};var r=V3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function V3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function F3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bQ(n.key),n)}}function q3e(t,e,r){return e&&MU(t.prototype,e),r&&MU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function H3e(t,e,r){return e=Mb(e),G3e(t,xQ()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function G3e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W3e(t)}function W3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xQ=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function K3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HN(t,e)}function HN(t,e){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},HN(t,e)}function sj(t,e,r){return e=bQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bQ(t){var e=Q3e(t,"string");return yf(e)=="symbol"?e:e+""}function Q3e(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uf=(function(t){function e(r){var n;return F3e(this,e),n=H3e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return K3e(e,t),q3e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=mT(n,$3e),c=this.props,d=c.viewBox,h=mT(c,U3e);return!Ah(i,d)||!Ah(s,h)||!Ah(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,y=a.tickMargin,x,T,_,w,E,I,C=m?-1:1,L=n.tickSize||p,P=mt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":x=T=n.coordinate,w=s+ +!m*d,_=w-C*L,I=_-C*y,E=P;break;case"left":_=w=n.coordinate,T=i+ +!m*c,x=T-C*L,E=x-C*y,I=P;break;case"right":_=w=n.coordinate,T=i+ +m*c,x=T+C*L,E=x+C*y,I=P;break;default:x=T=n.coordinate,w=s+ +m*d,_=w+C*L,I=_+C*y,E=P;break}return{line:{x1:x,y1:_,x2:T,y2:w},tick:{x:E,y:I}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Oa(Oa(Oa({},zt(this.props,!1)),zt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=Oa(Oa({},m),{},{x1:a,y1:i+y*c,x2:a+s,y2:i+y*c})}else{var x=+(d==="left"&&!h||d==="right"&&h);m=Oa(Oa({},m),{},{x1:a+x*s,y1:i,x2:a+x*s,y2:i+c})}return ae.createElement("line",gh({},m,{className:pr("recharts-cartesian-axis-line",Ys(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,y=c.unit,x=ij(Oa(Oa({},this.props),{},{ticks:n}),a,i),T=this.getTickTextAnchor(),_=this.getTickVerticalAnchor(),w=zt(this.props,!1),E=zt(p,!1),I=Oa(Oa({},w),{},{fill:"none"},zt(d,!1)),C=x.map(function(L,P){var R=s.getTickLineCoord(L),N=R.line,A=R.tick,j=Oa(Oa(Oa(Oa({textAnchor:T,verticalAnchor:_},w),{},{stroke:"none",fill:h},E),A),{},{index:P,payload:L,visibleTicksCount:x.length,tickFormatter:m});return ae.createElement(Ur,gh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},Jd(s.props,L,P)),d&&ae.createElement("line",gh({},I,N,{className:pr("recharts-cartesian-axis-tick-line",Ys(d,"className"))})),p&&e.renderTickItem(p,j,"".concat(rr(m)?m(L.value,P):L.value).concat(y||"")))});return ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,y=m.ticks,x=mT(m,z3e),T=y;return rr(d)&&(T=y&&y.length>0?d(this.props):d(x)),s<=0||c<=0||!T||!T.length?null:ae.createElement(Ur,{className:pr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),ui.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,c=pr(a.className,"recharts-cartesian-axis-tick-value");return ae.isValidElement(n)?s=ae.cloneElement(n,Oa(Oa({},a),{},{className:c})):rr(n)?s=n(Oa(Oa({},a),{},{className:c})):s=ae.createElement(tf,gh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])})(O.Component);sj(Uf,"displayName","CartesianAxis");sj(Uf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var X3e=["x1","y1","x2","y2","key"],Y3e=["offset"];function r0(t){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r0(t)}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){Z3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z3e(t,e,r){return e=J3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J3e(t){var e=e6e(t,"string");return r0(e)=="symbol"?e:e+""}function e6e(t,e){if(r0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(r0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jd(){return jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jd.apply(this,arguments)}function DU(t,e){if(t==null)return{};var r=t6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function t6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var r6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,d=e.ry;return ae.createElement("rect",{x:a,y:i,ry:d,width:s,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function wQ(t,e){var r;if(ae.isValidElement(t))r=ae.cloneElement(t,e);else if(rr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,s=e.y2,c=e.key,d=DU(e,X3e),h=zt(d,!1);h.offset;var p=DU(h,Y3e);r=ae.createElement("line",jd({},p,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:c}))}return r}function n6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(c,d){var h=_i(_i({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return wQ(a,h)});return ae.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function a6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(c,d){var h=_i(_i({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return wQ(a,h)});return ae.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function i6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,s=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,x){return y-x});a!==p[0]&&p.unshift(0);var m=p.map(function(y,x){var T=!p[x+1],_=T?a+s-y:p[x+1]-y;if(_<=0)return null;var w=x%e.length;return ae.createElement("rect",{key:"react-".concat(x),y,x:n,height:_,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function s6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,s=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+i-i)}).sort(function(y,x){return y-x});i!==p[0]&&p.unshift(0);var m=p.map(function(y,x){var T=!p[x+1],_=T?i+c-y:p[x+1]-y;if(_<=0)return null;var w=x%n.length;return ae.createElement("rect",{key:"react-".concat(x),x:y,y:s,width:_,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var o6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,s=e.offset;return wK(ij(_i(_i(_i({},Uf.defaultProps),n),{},{ticks:zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},l6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,s=e.offset;return wK(ij(_i(_i(_i({},Uf.defaultProps),n),{},{ticks:zl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},ah={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function SQ(t){var e,r,n,a,i,s,c=tj(),d=rj(),h=Q5e(),p=_i(_i({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ah.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:ah.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:ah.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:ah.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:ah.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:ah.verticalFill,x:mt(t.x)?t.x:h.left,y:mt(t.y)?t.y:h.top,width:mt(t.width)?t.width:h.width,height:mt(t.height)?t.height:h.height}),m=p.x,y=p.y,x=p.width,T=p.height,_=p.syncWithTicks,w=p.horizontalValues,E=p.verticalValues,I=G5e(),C=W5e();if(!mt(x)||x<=0||!mt(T)||T<=0||!mt(m)||m!==+m||!mt(y)||y!==+y)return null;var L=p.verticalCoordinatesGenerator||o6e,P=p.horizontalCoordinatesGenerator||l6e,R=p.horizontalPoints,N=p.verticalPoints;if((!R||!R.length)&&rr(P)){var A=w&&w.length,j=P({yAxis:C?_i(_i({},C),{},{ticks:A?w:C.ticks}):void 0,width:c,height:d,offset:h},A?!0:_);Gl(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(r0(j),"]")),Array.isArray(j)&&(R=j)}if((!N||!N.length)&&rr(L)){var $=E&&E.length,B=L({xAxis:I?_i(_i({},I),{},{ticks:$?E:I.ticks}):void 0,width:c,height:d,offset:h},$?!0:_);Gl(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(r0(B),"]")),Array.isArray(B)&&(N=B)}return ae.createElement("g",{className:"recharts-cartesian-grid"},ae.createElement(r6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),ae.createElement(n6e,jd({},p,{offset:h,horizontalPoints:R,xAxis:I,yAxis:C})),ae.createElement(a6e,jd({},p,{offset:h,verticalPoints:N,xAxis:I,yAxis:C})),ae.createElement(i6e,jd({},p,{horizontalPoints:R})),ae.createElement(s6e,jd({},p,{verticalPoints:N})))}SQ.displayName="CartesianGrid";function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function c6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AQ(n.key),n)}}function d6e(t,e,r){return e&&u6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function h6e(t,e,r){return e=Pb(e),f6e(t,_Q()?Reflect.construct(e,r||[],Pb(t).constructor):e.apply(t,r))}function f6e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p6e(t)}function p6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_Q=function(){return!!t})()}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pb(t)}function m6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GN(t,e)}function GN(t,e){return GN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GN(t,e)}function TQ(t,e,r){return e=AQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AQ(t){var e=g6e(t,"string");return vf(e)=="symbol"?e:e+""}function g6e(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p4=(function(t){function e(){return c6e(this,e),h6e(this,e,arguments)}return m6e(e,t),d6e(e,[{key:"render",value:function(){return null}}])})(O.Component);TQ(p4,"displayName","ZAxis");TQ(p4,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var y6e=["option","isActive"];function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nm.apply(this,arguments)}function v6e(t,e){if(t==null)return{};var r=x6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function b6e(t){var e=t.option,r=t.isActive,n=v6e(t,y6e);return typeof e=="string"?O.createElement(MN,Nm({option:O.createElement(F2,Nm({type:e},n)),isActive:r,shapeType:"symbols"},n)):O.createElement(MN,Nm({option:e,isActive:r,shapeType:"symbols"},n))}function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Em.apply(this,arguments)}function LU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Gs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(r),!0).forEach(function(n){uu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function w6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EQ(n.key),n)}}function S6e(t,e,r){return e&&BU(t.prototype,e),r&&BU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _6e(t,e,r){return e=Db(e),T6e(t,NQ()?Reflect.construct(e,r||[],Db(t).constructor):e.apply(t,r))}function T6e(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A6e(t)}function A6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NQ=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Db(t)}function N6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WN(t,e)}function WN(t,e){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},WN(t,e)}function uu(t,e,r){return e=EQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EQ(t){var e=E6e(t,"string");return xf(e)=="symbol"?e:e+""}function E6e(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T1=(function(t){function e(){var r;w6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=_6e(this,e,[].concat(a)),uu(r,"state",{isAnimationFinished:!1}),uu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),uu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),uu(r,"id",h1("recharts-scatter-")),r}return N6e(e,t),S6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,s=i.shape,c=i.activeShape,d=i.activeIndex,h=zt(this.props,!1);return n.map(function(p,m){var y=d===m,x=y?c:s,T=Gs(Gs({},h),p);return ae.createElement(Ur,Em({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},Jd(a.props,p,m),{role:"img"}),ae.createElement(b6e,Em({option:x,isActive:y,key:"symbol-".concat(m)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,s=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return ae.createElement(Jo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var x=y.t,T=i.map(function(_,w){var E=m&&m[w];if(E){var I=Yi(E.cx,_.cx),C=Yi(E.cy,_.cy),L=Yi(E.size,_.size);return Gs(Gs({},_),{},{cx:I(x),cy:C(x),size:L(x)})}var P=Yi(0,_.size);return Gs(Gs({},_),{},{size:P(x)})});return ae.createElement(Ur,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,s=this.state.prevPoints;return i&&a&&a.length&&(!s||!v1(s,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,s=a.xAxis,c=a.yAxis,d=a.children,h=Ns(d,x1);return h?h.map(function(p,m){var y=p.props,x=y.direction,T=y.dataKey;return ae.cloneElement(p,{key:"".concat(x,"-").concat(T,"-").concat(i[m]),data:i,xAxis:s,yAxis:c,layout:x==="x"?"vertical":"horizontal",dataPointFormatter:function(w,E){return{x:w.cx,y:w.cy,value:x==="x"?+w.node.x:+w.node.y,errorVal:fi(w,E)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,s=n.lineType,c=n.lineJointType,d=zt(this.props,!1),h=zt(i,!1),p,m;if(s==="joint")p=a.map(function(C){return{x:C.cx,y:C.cy}});else if(s==="fitting"){var y=T0e(a),x=y.xmin,T=y.xmax,_=y.a,w=y.b,E=function(L){return _*L+w};p=[{x,y:E(x)},{x:T,y:E(T)}]}var I=Gs(Gs(Gs({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return ae.isValidElement(i)?m=ae.cloneElement(i,I):rr(i)?m=i(I):m=ae.createElement(xN,Em({},I,{type:c})),ae.createElement(Ur,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,s=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,x=n.height,T=n.id,_=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,E=pr("recharts-scatter",c),I=d&&d.allowDataOverflow,C=h&&h.allowDataOverflow,L=I||C,P=lr(T)?this.id:T;return ae.createElement(Ur,{className:E,clipPath:L?"url(#clipPath-".concat(P,")"):null},I||C?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(P)},ae.createElement("rect",{x:I?p:p-y/2,y:C?m:m-x/2,width:I?y:y*2,height:C?x:x*2}))):null,s&&this.renderLine(),this.renderErrorBar(),ae.createElement(Ur,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!_||w)&&Kl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(O.PureComponent);uu(T1,"displayName","Scatter");uu(T1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!h0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});uu(T1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,s=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=Ns(a.props.children,AE),m=lr(e.dataKey)?a.props.dataKey:e.dataKey,y=lr(r.dataKey)?a.props.dataKey:r.dataKey,x=n&&n.dataKey,T=n?n.range:p4.defaultProps.range,_=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,E=r.scale.bandwidth?r.scale.bandwidth():0,I=i.map(function(C,L){var P=fi(C,m),R=fi(C,y),N=!lr(x)&&fi(C,x)||"-",A=[{name:lr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:P,payload:C,dataKey:m,type:h},{name:lr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:R,payload:C,dataKey:y,type:h}];N!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:N,payload:C,dataKey:x,type:h});var j=zB({axis:e,ticks:s,bandSize:w,entry:C,index:L,dataKey:m}),$=zB({axis:r,ticks:c,bandSize:E,entry:C,index:L,dataKey:y}),B=N!=="-"?n.scale(N):_,F=Math.sqrt(Math.max(B,0)/Math.PI);return Gs(Gs({},C),{},{cx:j,cy:$,x:j-F,y:$-F,xAxis:e,yAxis:r,zAxis:n,width:2*F,height:2*F,size:B,node:{x:P,y:R,z:N},tooltipPayload:A,tooltipPosition:{x:j,y:$},payload:C},p&&p[L]&&p[L].props)});return Gs({points:I},d)});function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function j6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CQ(n.key),n)}}function C6e(t,e,r){return e&&k6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function O6e(t,e,r){return e=Lb(e),I6e(t,jQ()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function I6e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R6e(t)}function R6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jQ=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function M6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KN(t,e)}function KN(t,e){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KN(t,e)}function kQ(t,e,r){return e=CQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CQ(t){var e=P6e(t,"string");return bf(e)=="symbol"?e:e+""}function P6e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QN.apply(this,arguments)}function D6e(t){var e=t.xAxisId,r=tj(),n=rj(),a=uQ(e);return a==null?null:O.createElement(Uf,QN({},a,{className:pr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return zl(s,!0)}}))}var m4=(function(t){function e(){return j6e(this,e),O6e(this,e,arguments)}return M6e(e,t),C6e(e,[{key:"render",value:function(){return O.createElement(D6e,this.props)}}])})(O.Component);kQ(m4,"displayName","XAxis");kQ(m4,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function L6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RQ(n.key),n)}}function $6e(t,e,r){return e&&B6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U6e(t,e,r){return e=Bb(e),z6e(t,OQ()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function z6e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V6e(t)}function V6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OQ=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function F6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XN(t,e)}function XN(t,e){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XN(t,e)}function IQ(t,e,r){return e=RQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RQ(t){var e=q6e(t,"string");return wf(e)=="symbol"?e:e+""}function q6e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function YN(){return YN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YN.apply(this,arguments)}var H6e=function(e){var r=e.yAxisId,n=tj(),a=rj(),i=dQ(r);return i==null?null:O.createElement(Uf,YN({},i,{className:pr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return zl(c,!0)}}))},g4=(function(t){function e(){return L6e(this,e),U6e(this,e,arguments)}return F6e(e,t),$6e(e,[{key:"render",value:function(){return O.createElement(H6e,this.props)}}])})(O.Component);IQ(g4,"displayName","YAxis");IQ(g4,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function $U(t){return Q6e(t)||K6e(t)||W6e(t)||G6e()}function G6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W6e(t,e){if(t){if(typeof t=="string")return ZN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZN(t,e)}}function K6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q6e(t){if(Array.isArray(t))return ZN(t)}function ZN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var JN=function(e,r,n,a,i){var s=Ns(e,aj),c=Ns(e,d4),d=[].concat($U(s),$U(c)),h=Ns(e,f4),p="".concat(a,"Id"),m=a[0],y=r;if(d.length&&(y=d.reduce(function(_,w){if(w.props[p]===n&&Ko(w.props,"extendDomain")&&mt(w.props[m])){var E=w.props[m];return[Math.min(_[0],E),Math.max(_[1],E)]}return _},y)),h.length){var x="".concat(m,"1"),T="".concat(m,"2");y=h.reduce(function(_,w){if(w.props[p]===n&&Ko(w.props,"extendDomain")&&mt(w.props[x])&&mt(w.props[T])){var E=w.props[x],I=w.props[T];return[Math.min(_[0],E,I),Math.max(_[1],E,I)]}return _},y)}return i&&i.length&&(y=i.reduce(function(_,w){return mt(w)?[Math.min(_[0],w),Math.max(_[1],w)]:_},y)),y},gT={exports:{}},UU;function X6e(){return UU||(UU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new a(p,m||d,y),T=r?r+h:h;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],x]:d._events[T].push(x):(d._events[T]=x,d._eventsCount++),d}function s(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,x=m.length,T=new Array(x);y<x;y++)T[y]=m[y].fn;return T},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,y,x,T){var _=r?r+h:h;if(!this._events[_])return!1;var w=this._events[_],E=arguments.length,I,C;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,x),!0;case 6:return w.fn.call(w.context,p,m,y,x,T),!0}for(C=1,I=new Array(E-1);C<E;C++)I[C-1]=arguments[C];w.fn.apply(w.context,I)}else{var L=w.length,P;for(C=0;C<L;C++)switch(w[C].once&&this.removeListener(h,w[C].fn,void 0,!0),E){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,p);break;case 3:w[C].fn.call(w[C].context,p,m);break;case 4:w[C].fn.call(w[C].context,p,m,y);break;default:if(!I)for(P=1,I=new Array(E-1);P<E;P++)I[P-1]=arguments[P];w[C].fn.apply(w[C].context,I)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,y){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return s(this,x),this;var T=this._events[x];if(T.fn)T.fn===p&&(!y||T.once)&&(!m||T.context===m)&&s(this,x);else{for(var _=0,w=[],E=T.length;_<E;_++)(T[_].fn!==p||y&&!T[_].once||m&&T[_].context!==m)&&w.push(T[_]);w.length?this._events[x]=w.length===1?w[0]:w:s(this,x)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&s(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(gT)),gT.exports}var Y6e=X6e();const Z6e=Gr(Y6e);var yT=new Z6e,vT="recharts.syncMouseEvents";function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function J6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MQ(n.key),n)}}function tSe(t,e,r){return e&&eSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xT(t,e,r){return e=MQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MQ(t){var e=rSe(t,"string");return Pg(e)=="symbol"?e:e+""}function rSe(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nSe=(function(){function t(){J6e(this,t),xT(this,"activeIndex",0),xT(this,"coordinateList",[]),xT(this,"layout","horizontal")}return tSe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,c=s===void 0?null:s,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,x=y===void 0?null:y;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,y=s+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function aSe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&mt(n)&&mt(a))return!0}return!1}function iSe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function PQ(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,s=vn(e,r,n,a),c=vn(e,r,n,i);return{points:[s,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function sSe(t,e,r){var n,a,i,s;if(t==="horizontal")n=e.x,i=n,a=r.top,s=r.top+r.height;else if(t==="vertical")a=e.y,s=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=vn(c,d,h,m),x=vn(c,d,p,m);n=y.x,a=y.y,i=x.x,s=x.y}else return PQ(e);return[{x:n,y:a},{x:i,y:s}]}function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function zU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ev(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(r),!0).forEach(function(n){oSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oSe(t,e,r){return e=lSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lSe(t){var e=cSe(t,"string");return Dg(e)=="symbol"?e:e+""}function cSe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uSe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,s=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,x=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!s||y!=="ScatterChart"&&a!=="axis")return null;var T,_=xN;if(y==="ScatterChart")T=s,_=l4e;else if(y==="BarChart")T=iSe(m,s,d,p),_=YE;else if(m==="radial"){var w=PQ(s),E=w.cx,I=w.cy,C=w.radius,L=w.startAngle,P=w.endAngle;T={cx:E,cy:I,startAngle:L,endAngle:P,innerRadius:C,outerRadius:C},_=IK}else T={points:sSe(m,s,d)},_=xN;var R=Ev(Ev(Ev(Ev({stroke:"#ccc",pointerEvents:"none"},d),T),zt(x,!1)),{},{payload:c,payloadIndex:h,className:pr("recharts-tooltip-cursor",x.className)});return O.isValidElement(x)?O.cloneElement(x,R):O.createElement(_,R)}var dSe=["item"],hSe=["children","className","width","height","style","compact","title","desc"];function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yh.apply(this,arguments)}function VU(t,e){return mSe(t)||pSe(t,e)||LQ(t,e)||fSe()}function fSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function mSe(t){if(Array.isArray(t))return t}function FU(t,e){if(t==null)return{};var r=gSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ySe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BQ(n.key),n)}}function xSe(t,e,r){return e&&vSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bSe(t,e,r){return e=$b(e),wSe(t,DQ()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function wSe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SSe(t)}function SSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DQ=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function _Se(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e8(t,e)}function e8(t,e){return e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},e8(t,e)}function _f(t){return NSe(t)||ASe(t)||LQ(t)||TSe()}function TSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LQ(t,e){if(t){if(typeof t=="string")return t8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t8(t,e)}}function ASe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NSe(t){if(Array.isArray(t))return t8(t)}function t8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(r),!0).forEach(function(n){Gt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gt(t,e,r){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BQ(t){var e=ESe(t,"string");return Sf(e)=="symbol"?e:e+""}function ESe(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jSe={xAxis:["bottom","top"],yAxis:["left","right"]},kSe={width:"100%",height:"100%"},$Q={x:0,y:0};function jv(t){return t}var CSe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},OSe=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,c=a.radius;return Ve(Ve(Ve({},a),vn(a.cx,a.cy,c,s)),{},{angle:s,radius:c})}var d=i.coordinate,h=a.angle;return Ve(Ve(Ve({},a),vn(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return $Q},y4=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(_f(c),_f(h)):c},[]);return s.length>0?s:e&&e.length&&mt(a)&&mt(i)?e.slice(a,i+1):[]};function UQ(t){return t==="number"?[0,"auto"]:void 0}var r8=function(e,r,n,a){var i=e.graphicalItems,s=e.tooltipAxis,c=y4(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var x=m===void 0?c:m;y=$x(x,s.dataKey,a)}else y=m&&m[n]||c[n];return y?[].concat(_f(d),[NK(h,y)]):d},[])},HU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},s=CSe(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Cve(s,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=r8(e,r,p,m),x=OSe(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:x}}return null},ISe=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,x=bK(p,i);return n.reduce(function(T,_){var w,E=_.type.defaultProps!==void 0?Ve(Ve({},_.type.defaultProps),_.props):_.props,I=E.type,C=E.dataKey,L=E.allowDataOverflow,P=E.allowDuplicatedCategory,R=E.scale,N=E.ticks,A=E.includeHidden,j=E[s];if(T[j])return T;var $=y4(e.data,{graphicalItems:a.filter(function(ee){var te,Oe=s in ee.props?ee.props[s]:(te=ee.type.defaultProps)===null||te===void 0?void 0:te[s];return Oe===j}),dataStartIndex:d,dataEndIndex:h}),B=$.length,F,z,K;aSe(E.domain,L,I)&&(F=pN(E.domain,null,L),x&&(I==="number"||R!=="auto")&&(K=Sm($,C,"category")));var Q=UQ(I);if(!F||F.length===0){var G,X=(G=E.domain)!==null&&G!==void 0?G:Q;if(C){if(F=Sm($,C,I),I==="category"&&x){var ne=_0e(F);P&&ne?(z=F,F=Ab(0,B)):P||(F=HB(X,F,_).reduce(function(ee,te){return ee.indexOf(te)>=0?ee:[].concat(_f(ee),[te])},[]))}else if(I==="category")P?F=F.filter(function(ee){return ee!==""&&!lr(ee)}):F=HB(X,F,_).reduce(function(ee,te){return ee.indexOf(te)>=0||te===""||lr(te)?ee:[].concat(_f(ee),[te])},[]);else if(I==="number"){var de=Pve($,a.filter(function(ee){var te,Oe,re=s in ee.props?ee.props[s]:(te=ee.type.defaultProps)===null||te===void 0?void 0:te[s],ce="hide"in ee.props?ee.props.hide:(Oe=ee.type.defaultProps)===null||Oe===void 0?void 0:Oe.hide;return re===j&&(A||!ce)}),C,i,p);de&&(F=de)}x&&(I==="number"||R!=="auto")&&(K=Sm($,C,"category"))}else x?F=Ab(0,B):c&&c[j]&&c[j].hasStack&&I==="number"?F=y==="expand"?[0,1]:AK(c[j].stackGroups,d,h):F=xK($,a.filter(function(ee){var te=s in ee.props?ee.props[s]:ee.type.defaultProps[s],Oe="hide"in ee.props?ee.props.hide:ee.type.defaultProps.hide;return te===j&&(A||!Oe)}),I,p,!0);if(I==="number")F=JN(m,F,j,i,N),X&&(F=pN(X,F,L));else if(I==="category"&&X){var me=X,H=F.every(function(ee){return me.indexOf(ee)>=0});H&&(F=me)}}return Ve(Ve({},T),{},Gt({},j,Ve(Ve({},E),{},{axisType:i,domain:F,categoricalDomain:K,duplicateDomain:z,originalDomain:(w=E.domain)!==null&&w!==void 0?w:Q,isCategorical:x,layout:p})))},{})},RSe=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=y4(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),x=y.length,T=bK(p,i),_=-1;return n.reduce(function(w,E){var I=E.type.defaultProps!==void 0?Ve(Ve({},E.type.defaultProps),E.props):E.props,C=I[s],L=UQ("number");if(!w[C]){_++;var P;return T?P=Ab(0,x):c&&c[C]&&c[C].hasStack?(P=AK(c[C].stackGroups,d,h),P=JN(m,P,C,i)):(P=pN(L,xK(y,n.filter(function(R){var N,A,j=s in R.props?R.props[s]:(N=R.type.defaultProps)===null||N===void 0?void 0:N[s],$="hide"in R.props?R.props.hide:(A=R.type.defaultProps)===null||A===void 0?void 0:A.hide;return j===C&&!$}),"number",p),a.defaultProps.allowDataOverflow),P=JN(m,P,C,i)),Ve(Ve({},w),{},Gt({},C,Ve(Ve({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ys(jSe,"".concat(i,".").concat(_%2),null),domain:P,originalDomain:L,isCategorical:T,layout:p})))}return w},{})},MSe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),y=Ns(p,i),x={};return y&&y.length?x=ISe(e,{axes:y,graphicalItems:s,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):s&&s.length&&(x=RSe(e,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),x},PSe=function(e){var r=iu(e),n=zl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:_E(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:db(r,n)}},GU=function(e){var r=e.children,n=e.defaultShowTooltip,a=ys(r,hf),i=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},DSe=function(e){return!e||!e.length?!1:e.some(function(r){var n=Hl(r&&r.type);return n&&n.indexOf("Bar")>=0})},WU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},LSe=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,s=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,y=n.margin||{},x=ys(m,hf),T=ys(m,Nh),_=Object.keys(d).reduce(function(P,R){var N=d[R],A=N.orientation;return!N.mirror&&!N.hide?Ve(Ve({},P),{},Gt({},A,P[A]+N.width)):P},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(P,R){var N=s[R],A=N.orientation;return!N.mirror&&!N.hide?Ve(Ve({},P),{},Gt({},A,Ys(P,"".concat(A))+N.height)):P},{top:y.top||0,bottom:y.bottom||0}),E=Ve(Ve({},w),_),I=E.bottom;x&&(E.bottom+=x.props.height||hf.defaultProps.height),T&&r&&(E=Rve(E,a,n,r));var C=h-E.left-E.right,L=p-E.top-E.bottom;return Ve(Ve({brushBottom:I},E),{},{width:Math.max(C,0),height:Math.max(L,0)})},BSe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},zQ=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(E,I){var C=I.graphicalItems,L=I.stackGroups,P=I.offset,R=I.updateId,N=I.dataStartIndex,A=I.dataEndIndex,j=E.barSize,$=E.layout,B=E.barGap,F=E.barCategoryGap,z=E.maxBarSize,K=WU($),Q=K.numericAxisName,G=K.cateAxisName,X=DSe(C),ne=[];return C.forEach(function(de,me){var H=y4(E.data,{graphicalItems:[de],dataStartIndex:N,dataEndIndex:A}),ee=de.type.defaultProps!==void 0?Ve(Ve({},de.type.defaultProps),de.props):de.props,te=ee.dataKey,Oe=ee.maxBarSize,re=ee["".concat(Q,"Id")],ce=ee["".concat(G,"Id")],he={},Ie=d.reduce(function(ht,Ze){var yt=I["".concat(Ze.axisType,"Map")],Rt=ee["".concat(Ze.axisType,"Id")];yt&&yt[Rt]||Ze.axisType==="zAxis"||t0();var Bt=yt[Rt];return Ve(Ve({},ht),{},Gt(Gt({},Ze.axisType,Bt),"".concat(Ze.axisType,"Ticks"),zl(Bt)))},he),Se=Ie[G],We=Ie["".concat(G,"Ticks")],Me=L&&L[re]&&L[re].hasStack&&qve(de,L[re].stackGroups),_e=Hl(de.type).indexOf("Bar")>=0,gt=db(Se,We),et=[],pt=X&&Ove({barSize:j,stackGroups:L,totalSize:BSe(Ie,G)});if(_e){var st,xe,be=lr(Oe)?z:Oe,Be=(st=(xe=db(Se,We,!0))!==null&&xe!==void 0?xe:be)!==null&&st!==void 0?st:0;et=Ive({barGap:B,barCategoryGap:F,bandSize:Be!==gt?Be:gt,sizeList:pt[ce],maxBarSize:be}),Be!==gt&&(et=et.map(function(ht){return Ve(Ve({},ht),{},{position:Ve(Ve({},ht.position),{},{offset:ht.position.offset-Be/2})})}))}var Ye=de&&de.type&&de.type.getComposedData;Ye&&ne.push({props:Ve(Ve({},Ye(Ve(Ve({},Ie),{},{displayedData:H,props:E,dataKey:te,item:de,bandSize:gt,barPosition:et,offset:P,stackedData:Me,layout:$,dataStartIndex:N,dataEndIndex:A}))),{},Gt(Gt(Gt({key:de.key||"item-".concat(me)},Q,Ie[Q]),G,Ie[G]),"animationId",R)),childIndex:D0e(de,E.children),item:de})}),ne},x=function(E,I){var C=E.props,L=E.dataStartIndex,P=E.dataEndIndex,R=E.updateId;if(!iP({props:C}))return null;var N=C.children,A=C.layout,j=C.stackOffset,$=C.data,B=C.reverseStackOrder,F=WU(A),z=F.numericAxisName,K=F.cateAxisName,Q=Ns(N,n),G=Vve($,Q,"".concat(z,"Id"),"".concat(K,"Id"),j,B),X=d.reduce(function(ee,te){var Oe="".concat(te.axisType,"Map");return Ve(Ve({},ee),{},Gt({},Oe,MSe(C,Ve(Ve({},te),{},{graphicalItems:Q,stackGroups:te.axisType===z&&G,dataStartIndex:L,dataEndIndex:P}))))},{}),ne=LSe(Ve(Ve({},X),{},{props:C,graphicalItems:Q}),I==null?void 0:I.legendBBox);Object.keys(X).forEach(function(ee){X[ee]=p(C,X[ee],ne,ee.replace("Map",""),r)});var de=X["".concat(K,"Map")],me=PSe(de),H=y(C,Ve(Ve({},X),{},{dataStartIndex:L,dataEndIndex:P,updateId:R,graphicalItems:Q,stackGroups:G,offset:ne}));return Ve(Ve({formattedGraphicalItems:H,graphicalItems:Q,offset:ne,stackGroups:G},me),X)},T=(function(w){function E(I){var C,L,P;return ySe(this,E),P=bSe(this,E,[I]),Gt(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Gt(P,"accessibilityManager",new nSe),Gt(P,"handleLegendBBoxUpdate",function(R){if(R){var N=P.state,A=N.dataStartIndex,j=N.dataEndIndex,$=N.updateId;P.setState(Ve({legendBBox:R},x({props:P.props,dataStartIndex:A,dataEndIndex:j,updateId:$},Ve(Ve({},P.state),{},{legendBBox:R}))))}}),Gt(P,"handleReceiveSyncEvent",function(R,N,A){if(P.props.syncId===R){if(A===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(N)}}),Gt(P,"handleBrushChange",function(R){var N=R.startIndex,A=R.endIndex;if(N!==P.state.dataStartIndex||A!==P.state.dataEndIndex){var j=P.state.updateId;P.setState(function(){return Ve({dataStartIndex:N,dataEndIndex:A},x({props:P.props,dataStartIndex:N,dataEndIndex:A,updateId:j},P.state))}),P.triggerSyncEvent({dataStartIndex:N,dataEndIndex:A})}}),Gt(P,"handleMouseEnter",function(R){var N=P.getMouseInfo(R);if(N){var A=Ve(Ve({},N),{},{isTooltipActive:!0});P.setState(A),P.triggerSyncEvent(A);var j=P.props.onMouseEnter;rr(j)&&j(A,R)}}),Gt(P,"triggeredAfterMouseMove",function(R){var N=P.getMouseInfo(R),A=N?Ve(Ve({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(A),P.triggerSyncEvent(A);var j=P.props.onMouseMove;rr(j)&&j(A,R)}),Gt(P,"handleItemMouseEnter",function(R){P.setState(function(){return{isTooltipActive:!0,activeItem:R,activePayload:R.tooltipPayload,activeCoordinate:R.tooltipPosition||{x:R.cx,y:R.cy}}})}),Gt(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),Gt(P,"handleMouseMove",function(R){R.persist(),P.throttleTriggeredAfterMouseMove(R)}),Gt(P,"handleMouseLeave",function(R){P.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};P.setState(N),P.triggerSyncEvent(N);var A=P.props.onMouseLeave;rr(A)&&A(N,R)}),Gt(P,"handleOuterEvent",function(R){var N=P0e(R),A=Ys(P.props,"".concat(N));if(N&&rr(A)){var j,$;/.*touch.*/i.test(N)?$=P.getMouseInfo(R.changedTouches[0]):$=P.getMouseInfo(R),A((j=$)!==null&&j!==void 0?j:{},R)}}),Gt(P,"handleClick",function(R){var N=P.getMouseInfo(R);if(N){var A=Ve(Ve({},N),{},{isTooltipActive:!0});P.setState(A),P.triggerSyncEvent(A);var j=P.props.onClick;rr(j)&&j(A,R)}}),Gt(P,"handleMouseDown",function(R){var N=P.props.onMouseDown;if(rr(N)){var A=P.getMouseInfo(R);N(A,R)}}),Gt(P,"handleMouseUp",function(R){var N=P.props.onMouseUp;if(rr(N)){var A=P.getMouseInfo(R);N(A,R)}}),Gt(P,"handleTouchMove",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(R.changedTouches[0])}),Gt(P,"handleTouchStart",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&P.handleMouseDown(R.changedTouches[0])}),Gt(P,"handleTouchEnd",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&P.handleMouseUp(R.changedTouches[0])}),Gt(P,"handleDoubleClick",function(R){var N=P.props.onDoubleClick;if(rr(N)){var A=P.getMouseInfo(R);N(A,R)}}),Gt(P,"handleContextMenu",function(R){var N=P.props.onContextMenu;if(rr(N)){var A=P.getMouseInfo(R);N(A,R)}}),Gt(P,"triggerSyncEvent",function(R){P.props.syncId!==void 0&&yT.emit(vT,P.props.syncId,R,P.eventEmitterSymbol)}),Gt(P,"applySyncEvent",function(R){var N=P.props,A=N.layout,j=N.syncMethod,$=P.state.updateId,B=R.dataStartIndex,F=R.dataEndIndex;if(R.dataStartIndex!==void 0||R.dataEndIndex!==void 0)P.setState(Ve({dataStartIndex:B,dataEndIndex:F},x({props:P.props,dataStartIndex:B,dataEndIndex:F,updateId:$},P.state)));else if(R.activeTooltipIndex!==void 0){var z=R.chartX,K=R.chartY,Q=R.activeTooltipIndex,G=P.state,X=G.offset,ne=G.tooltipTicks;if(!X)return;if(typeof j=="function")Q=j(ne,R);else if(j==="value"){Q=-1;for(var de=0;de<ne.length;de++)if(ne[de].value===R.activeLabel){Q=de;break}}var me=Ve(Ve({},X),{},{x:X.left,y:X.top}),H=Math.min(z,me.x+me.width),ee=Math.min(K,me.y+me.height),te=ne[Q]&&ne[Q].value,Oe=r8(P.state,P.props.data,Q),re=ne[Q]?{x:A==="horizontal"?ne[Q].coordinate:H,y:A==="horizontal"?ee:ne[Q].coordinate}:$Q;P.setState(Ve(Ve({},R),{},{activeLabel:te,activeCoordinate:re,activePayload:Oe,activeTooltipIndex:Q}))}else P.setState(R)}),Gt(P,"renderCursor",function(R){var N,A=P.state,j=A.isTooltipActive,$=A.activeCoordinate,B=A.activePayload,F=A.offset,z=A.activeTooltipIndex,K=A.tooltipAxisBandSize,Q=P.getTooltipEventType(),G=(N=R.props.active)!==null&&N!==void 0?N:j,X=P.props.layout,ne=R.key||"_recharts-cursor";return ae.createElement(uSe,{key:ne,activeCoordinate:$,activePayload:B,activeTooltipIndex:z,chartName:r,element:R,isActive:G,layout:X,offset:F,tooltipAxisBandSize:K,tooltipEventType:Q})}),Gt(P,"renderPolarAxis",function(R,N,A){var j=Ys(R,"type.axisType"),$=Ys(P.state,"".concat(j,"Map")),B=R.type.defaultProps,F=B!==void 0?Ve(Ve({},B),R.props):R.props,z=$&&$[F["".concat(j,"Id")]];return O.cloneElement(R,Ve(Ve({},z),{},{className:pr(j,z.className),key:R.key||"".concat(N,"-").concat(A),ticks:zl(z,!0)}))}),Gt(P,"renderPolarGrid",function(R){var N=R.props,A=N.radialLines,j=N.polarAngles,$=N.polarRadius,B=P.state,F=B.radiusAxisMap,z=B.angleAxisMap,K=iu(F),Q=iu(z),G=Q.cx,X=Q.cy,ne=Q.innerRadius,de=Q.outerRadius;return O.cloneElement(R,{polarAngles:Array.isArray(j)?j:zl(Q,!0).map(function(me){return me.coordinate}),polarRadius:Array.isArray($)?$:zl(K,!0).map(function(me){return me.coordinate}),cx:G,cy:X,innerRadius:ne,outerRadius:de,key:R.key||"polar-grid",radialLines:A})}),Gt(P,"renderLegend",function(){var R=P.state.formattedGraphicalItems,N=P.props,A=N.children,j=N.width,$=N.height,B=P.props.margin||{},F=j-(B.left||0)-(B.right||0),z=yK({children:A,formattedGraphicalItems:R,legendWidth:F,legendContent:h});if(!z)return null;var K=z.item,Q=FU(z,dSe);return O.cloneElement(K,Ve(Ve({},Q),{},{chartWidth:j,chartHeight:$,margin:B,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),Gt(P,"renderTooltip",function(){var R,N=P.props,A=N.children,j=N.accessibilityLayer,$=ys(A,Lo);if(!$)return null;var B=P.state,F=B.isTooltipActive,z=B.activeCoordinate,K=B.activePayload,Q=B.activeLabel,G=B.offset,X=(R=$.props.active)!==null&&R!==void 0?R:F;return O.cloneElement($,{viewBox:Ve(Ve({},G),{},{x:G.left,y:G.top}),active:X,label:Q,payload:X?K:[],coordinate:z,accessibilityLayer:j})}),Gt(P,"renderBrush",function(R){var N=P.props,A=N.margin,j=N.data,$=P.state,B=$.offset,F=$.dataStartIndex,z=$.dataEndIndex,K=$.updateId;return O.cloneElement(R,{key:R.key||"_recharts-brush",onChange:_v(P.handleBrushChange,R.props.onChange),data:j,x:mt(R.props.x)?R.props.x:B.left,y:mt(R.props.y)?R.props.y:B.top+B.height+B.brushBottom-(A.bottom||0),width:mt(R.props.width)?R.props.width:B.width,startIndex:F,endIndex:z,updateId:"brush-".concat(K)})}),Gt(P,"renderReferenceElement",function(R,N,A){if(!R)return null;var j=P,$=j.clipPathId,B=P.state,F=B.xAxisMap,z=B.yAxisMap,K=B.offset,Q=R.type.defaultProps||{},G=R.props,X=G.xAxisId,ne=X===void 0?Q.xAxisId:X,de=G.yAxisId,me=de===void 0?Q.yAxisId:de;return O.cloneElement(R,{key:R.key||"".concat(N,"-").concat(A),xAxis:F[ne],yAxis:z[me],viewBox:{x:K.left,y:K.top,width:K.width,height:K.height},clipPathId:$})}),Gt(P,"renderActivePoints",function(R){var N=R.item,A=R.activePoint,j=R.basePoint,$=R.childIndex,B=R.isRange,F=[],z=N.props.key,K=N.item.type.defaultProps!==void 0?Ve(Ve({},N.item.type.defaultProps),N.item.props):N.item.props,Q=K.activeDot,G=K.dataKey,X=Ve(Ve({index:$,dataKey:G,cx:A.x,cy:A.y,r:4,fill:XE(N.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},zt(Q,!1)),Ux(Q));return F.push(E.renderActiveDot(Q,X,"".concat(z,"-activePoint-").concat($))),j?F.push(E.renderActiveDot(Q,Ve(Ve({},X),{},{cx:j.x,cy:j.y}),"".concat(z,"-basePoint-").concat($))):B&&F.push(null),F}),Gt(P,"renderGraphicChild",function(R,N,A){var j=P.filterFormatItem(R,N,A);if(!j)return null;var $=P.getTooltipEventType(),B=P.state,F=B.isTooltipActive,z=B.tooltipAxis,K=B.activeTooltipIndex,Q=B.activeLabel,G=P.props.children,X=ys(G,Lo),ne=j.props,de=ne.points,me=ne.isRange,H=ne.baseLine,ee=j.item.type.defaultProps!==void 0?Ve(Ve({},j.item.type.defaultProps),j.item.props):j.item.props,te=ee.activeDot,Oe=ee.hide,re=ee.activeBar,ce=ee.activeShape,he=!!(!Oe&&F&&X&&(te||re||ce)),Ie={};$!=="axis"&&X&&X.props.trigger==="click"?Ie={onClick:_v(P.handleItemMouseEnter,R.props.onClick)}:$!=="axis"&&(Ie={onMouseLeave:_v(P.handleItemMouseLeave,R.props.onMouseLeave),onMouseEnter:_v(P.handleItemMouseEnter,R.props.onMouseEnter)});var Se=O.cloneElement(R,Ve(Ve({},j.props),Ie));function We(Ze){return typeof z.dataKey=="function"?z.dataKey(Ze.payload):null}if(he)if(K>=0){var Me,_e;if(z.dataKey&&!z.allowDuplicatedCategory){var gt=typeof z.dataKey=="function"?We:"payload.".concat(z.dataKey.toString());Me=$x(de,gt,Q),_e=me&&H&&$x(H,gt,Q)}else Me=de==null?void 0:de[K],_e=me&&H&&H[K];if(ce||re){var et=R.props.activeIndex!==void 0?R.props.activeIndex:K;return[O.cloneElement(R,Ve(Ve(Ve({},j.props),Ie),{},{activeIndex:et})),null,null]}if(!lr(Me))return[Se].concat(_f(P.renderActivePoints({item:j,activePoint:Me,basePoint:_e,childIndex:K,isRange:me})))}else{var pt,st=(pt=P.getItemByXY(P.state.activeCoordinate))!==null&&pt!==void 0?pt:{graphicalItem:Se},xe=st.graphicalItem,be=xe.item,Be=be===void 0?R:be,Ye=xe.childIndex,ht=Ve(Ve(Ve({},j.props),Ie),{},{activeIndex:Ye});return[O.cloneElement(Be,ht),null,null]}return me?[Se,null,null]:[Se,null]}),Gt(P,"renderCustomized",function(R,N,A){return O.cloneElement(R,Ve(Ve({key:"recharts-customized-".concat(A)},P.props),P.state))}),Gt(P,"renderMap",{CartesianGrid:{handler:jv,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:jv},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:jv},YAxis:{handler:jv},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((C=I.id)!==null&&C!==void 0?C:h1("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=gW(P.triggeredAfterMouseMove,(L=I.throttleDelay)!==null&&L!==void 0?L:1e3/60),P.state={},P}return _Se(E,w),xSe(E,[{key:"componentDidMount",value:function(){var C,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,L=C.children,P=C.data,R=C.height,N=C.layout,A=ys(L,Lo);if(A){var j=A.props.defaultIndex;if(!(typeof j!="number"||j<0||j>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[j]&&this.state.tooltipTicks[j].value,B=r8(this.state,P,j,$),F=this.state.tooltipTicks[j].coordinate,z=(this.state.offset.top+R)/2,K=N==="horizontal",Q=K?{x:F,y:z}:{y:F,x:z},G=this.state.formattedGraphicalItems.find(function(ne){var de=ne.item;return de.type.name==="Scatter"});G&&(Q=Ve(Ve({},Q),G.props.points[j].tooltipPosition),B=G.props.points[j].tooltipPayload);var X={activeTooltipIndex:j,isTooltipActive:!0,activeLabel:$,activePayload:B,activeCoordinate:Q};this.setState(X),this.renderCursor(A),this.accessibilityManager.setIndex(j)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var P,R;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0}})}return null}},{key:"componentDidUpdate",value:function(C){DA([ys(C.children,Lo)],[ys(this.props.children,Lo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=ys(this.props.children,Lo);if(C&&typeof C.props.shared=="boolean"){var L=C.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var L=this.container,P=L.getBoundingClientRect(),R=Sme(P),N={chartX:Math.round(C.pageX-R.left),chartY:Math.round(C.pageY-R.top)},A=P.width/L.offsetWidth||1,j=this.inRange(N.chartX,N.chartY,A);if(!j)return null;var $=this.state,B=$.xAxisMap,F=$.yAxisMap,z=this.getTooltipEventType(),K=HU(this.state,this.props.data,this.props.layout,j);if(z!=="axis"&&B&&F){var Q=iu(B).scale,G=iu(F).scale,X=Q&&Q.invert?Q.invert(N.chartX):null,ne=G&&G.invert?G.invert(N.chartY):null;return Ve(Ve({},N),{},{xValue:X,yValue:ne},K)}return K?Ve(Ve({},N),K):null}},{key:"inRange",value:function(C,L){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=this.props.layout,N=C/P,A=L/P;if(R==="horizontal"||R==="vertical"){var j=this.state.offset,$=N>=j.left&&N<=j.left+j.width&&A>=j.top&&A<=j.top+j.height;return $?{x:N,y:A}:null}var B=this.state,F=B.angleAxisMap,z=B.radiusAxisMap;if(F&&z){var K=iu(F);return KB({x:N,y:A},K)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,L=this.getTooltipEventType(),P=ys(C,Lo),R={};P&&L==="axis"&&(P.props.trigger==="click"?R={onClick:this.handleClick}:R={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Ux(this.props,this.handleOuterEvent);return Ve(Ve({},N),R)}},{key:"addListener",value:function(){yT.on(vT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){yT.removeListener(vT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,L,P){for(var R=this.state.formattedGraphicalItems,N=0,A=R.length;N<A;N++){var j=R[N];if(j.item===C||j.props.key===C.key||L===Hl(j.item.type)&&P===j.childIndex)return j}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,L=this.state.offset,P=L.left,R=L.top,N=L.height,A=L.width;return ae.createElement("defs",null,ae.createElement("clipPath",{id:C},ae.createElement("rect",{x:P,y:R,height:N,width:A})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(L,P){var R=VU(P,2),N=R[0],A=R[1];return Ve(Ve({},L),{},Gt({},N,A.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(L,P){var R=VU(P,2),N=R[0],A=R[1];return Ve(Ve({},L),{},Gt({},N,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[C])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(C){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[C])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(C){var L=this.state,P=L.formattedGraphicalItems,R=L.activeItem;if(P&&P.length)for(var N=0,A=P.length;N<A;N++){var j=P[N],$=j.props,B=j.item,F=B.type.defaultProps!==void 0?Ve(Ve({},B.type.defaultProps),B.props):B.props,z=Hl(B.type);if(z==="Bar"){var K=($.data||[]).find(function(ne){return F2e(C,ne)});if(K)return{graphicalItem:j,payload:K}}else if(z==="RadialBar"){var Q=($.data||[]).find(function(ne){return KB(C,ne)});if(Q)return{graphicalItem:j,payload:Q}}else if(o4(j,R)||l4(j,R)||Cg(j,R)){var G=Swe({graphicalItem:j,activeTooltipItem:R,itemData:F.data}),X=F.activeIndex===void 0?G:F.activeIndex;return{graphicalItem:Ve(Ve({},j),{},{childIndex:X}),payload:Cg(j,R)?F.data[G]:j.props.data[G]}}}return null}},{key:"render",value:function(){var C=this;if(!iP(this))return null;var L=this.props,P=L.children,R=L.className,N=L.width,A=L.height,j=L.style,$=L.compact,B=L.title,F=L.desc,z=FU(L,hSe),K=zt(z,!1);if($)return ae.createElement(TU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement(BA,yh({},K,{width:N,height:A,title:B,desc:F}),this.renderClipPath(),oP(P,this.renderMap)));if(this.props.accessibilityLayer){var Q,G;K.tabIndex=(Q=this.props.tabIndex)!==null&&Q!==void 0?Q:0,K.role=(G=this.props.role)!==null&&G!==void 0?G:"application",K.onKeyDown=function(ne){C.accessibilityManager.keyboardEvent(ne)},K.onFocus=function(){C.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return ae.createElement(TU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement("div",yh({className:pr("recharts-wrapper",R),style:Ve({position:"relative",cursor:"default",width:N,height:A},j)},X,{ref:function(de){C.container=de}}),ae.createElement(BA,yh({},K,{width:N,height:A,title:B,desc:F,style:kSe}),this.renderClipPath(),oP(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(O.Component);Gt(T,"displayName",r),Gt(T,"defaultProps",Ve({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Gt(T,"getDerivedStateFromProps",function(w,E){var I=w.dataKey,C=w.data,L=w.children,P=w.width,R=w.height,N=w.layout,A=w.stackOffset,j=w.margin,$=E.dataStartIndex,B=E.dataEndIndex;if(E.updateId===void 0){var F=GU(w);return Ve(Ve(Ve({},F),{},{updateId:0},x(Ve(Ve({props:w},F),{},{updateId:0}),E)),{},{prevDataKey:I,prevData:C,prevWidth:P,prevHeight:R,prevLayout:N,prevStackOffset:A,prevMargin:j,prevChildren:L})}if(I!==E.prevDataKey||C!==E.prevData||P!==E.prevWidth||R!==E.prevHeight||N!==E.prevLayout||A!==E.prevStackOffset||!Ah(j,E.prevMargin)){var z=GU(w),K={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},Q=Ve(Ve({},HU(E,C,N)),{},{updateId:E.updateId+1}),G=Ve(Ve(Ve({},z),K),Q);return Ve(Ve(Ve({},G),x(Ve({props:w},G),E)),{},{prevDataKey:I,prevData:C,prevWidth:P,prevHeight:R,prevLayout:N,prevStackOffset:A,prevMargin:j,prevChildren:L})}if(!DA(L,E.prevChildren)){var X,ne,de,me,H=ys(L,hf),ee=H&&(X=(ne=H.props)===null||ne===void 0?void 0:ne.startIndex)!==null&&X!==void 0?X:$,te=H&&(de=(me=H.props)===null||me===void 0?void 0:me.endIndex)!==null&&de!==void 0?de:B,Oe=ee!==$||te!==B,re=!lr(C),ce=re&&!Oe?E.updateId:E.updateId+1;return Ve(Ve({updateId:ce},x(Ve(Ve({props:w},E),{},{updateId:ce,dataStartIndex:ee,dataEndIndex:te}),E)),{},{prevChildren:L,dataStartIndex:ee,dataEndIndex:te})}return null}),Gt(T,"renderActiveDot",function(w,E,I){var C;return O.isValidElement(w)?C=O.cloneElement(w,E):rr(w)?C=w(E):C=ae.createElement(a4,E),ae.createElement(Ur,{className:"recharts-active-dot",key:I},C)});var _=O.forwardRef(function(E,I){return ae.createElement(T,yh({},E,{ref:I}))});return _.displayName=T.displayName,_},$Se=zQ({chartName:"RadarChart",GraphicalChild:S1,axisComponents:[{axisType:"angleAxis",AxisComp:w1},{axisType:"radiusAxis",AxisComp:b1}],formatAxisMap:txe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),USe=zQ({chartName:"ScatterChart",GraphicalChild:T1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:m4},{axisType:"yAxis",AxisComp:g4},{axisType:"zAxis",AxisComp:p4}],formatAxisMap:I5e});const v4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function oj(t){return"nodeType"in t}function $i(t){var e,r;return t?zf(t)?t:oj(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function lj(t){const{Document:e}=$i(t);return t instanceof e}function A1(t){return zf(t)?!1:t instanceof $i(t).HTMLElement}function VQ(t){return t instanceof $i(t).SVGElement}function Vf(t){return t?zf(t)?t.document:oj(t)?lj(t)?t:A1(t)||VQ(t)?t.ownerDocument:document:document:document}const oc=v4?O.useLayoutEffect:O.useEffect;function x4(t){const e=O.useRef(t);return oc(()=>{e.current=t}),O.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function zSe(){const t=O.useRef(null),e=O.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=O.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Lg(t,e){e===void 0&&(e=[t]);const r=O.useRef(t);return oc(()=>{r.current!==t&&(r.current=t)},e),r}function N1(t,e){const r=O.useRef();return O.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Ub(t){const e=x4(t),r=O.useRef(null),n=O.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function zb(t){const e=O.useRef();return O.useEffect(()=>{e.current=t},[t]),e.current}let bT={};function b4(t,e){return O.useMemo(()=>{if(e)return e;const r=bT[t]==null?0:bT[t]+1;return bT[t]=r,t+"-"+r},[t,e])}function FQ(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,s)=>{const c=Object.entries(s);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const kh=FQ(1),Vb=FQ(-1);function VSe(t){return"clientX"in t&&"clientY"in t}function cj(t){if(!t)return!1;const{KeyboardEvent:e}=$i(t.target);return e&&t instanceof e}function FSe(t){if(!t)return!1;const{TouchEvent:e}=$i(t.target);return e&&t instanceof e}function Bg(t){if(FSe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return VSe(t)?{x:t.clientX,y:t.clientY}:null}const $g=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[$g.Translate.toString(t),$g.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),KU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qSe(t){return t.matches(KU)?t:t.querySelector(KU)}const HSe={display:"none"};function GSe(t){let{id:e,value:r}=t;return ae.createElement("div",{id:e,style:HSe},r)}function WSe(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ae.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function KSe(){const[t,e]=O.useState("");return{announce:O.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const qQ=O.createContext(null);function QSe(t){const e=O.useContext(qQ);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function XSe(){const[t]=O.useState(()=>new Set),e=O.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[O.useCallback(n=>{let{type:a,event:i}=n;t.forEach(s=>{var c;return(c=s[a])==null?void 0:c.call(s,i)})},[t]),e]}const YSe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ZSe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function JSe(t){let{announcements:e=ZSe,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=YSe}=t;const{announce:i,announcement:s}=KSe(),c=b4("DndLiveRegion"),[d,h]=O.useState(!1);if(O.useEffect(()=>{h(!0)},[]),QSe(O.useMemo(()=>({onDragStart(m){let{active:y}=m;i(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:x}=m;e.onDragMove&&i(e.onDragMove({active:y,over:x}))},onDragOver(m){let{active:y,over:x}=m;i(e.onDragOver({active:y,over:x}))},onDragEnd(m){let{active:y,over:x}=m;i(e.onDragEnd({active:y,over:x}))},onDragCancel(m){let{active:y,over:x}=m;i(e.onDragCancel({active:y,over:x}))}}),[i,e])),!d)return null;const p=ae.createElement(ae.Fragment,null,ae.createElement(GSe,{id:n,value:a.draggable}),ae.createElement(WSe,{id:c,announcement:s}));return r?fh.createPortal(p,r):p}var Ma;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ma||(Ma={}));function Fb(){}function QU(t,e){return O.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function e_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const No=Object.freeze({x:0,y:0});function t_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r_e(t,e){const r=Bg(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function n_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function a_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function i_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function XU(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const s_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=XU(e,e.left,e.top),i=[];for(const s of n){const{id:c}=s,d=r.get(c);if(d){const h=t_e(XU(d),a);i.push({id:c,data:{droppableContainer:s,value:h}})}}return i.sort(n_e)};function o_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),s=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=s*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const l_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:s}=i,c=r.get(s);if(c){const d=o_e(c,e);d>0&&a.push({id:s,data:{droppableContainer:i,value:d}})}}return a.sort(a_e)};function c_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function HQ(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:No}function u_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,c)=>({...s,top:s.top+t*c.y,bottom:s.bottom+t*c.y,left:s.left+t*c.x,right:s.right+t*c.x}),{...r})}}const d_e=u_e(1);function GQ(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function h_e(t,e,r){const n=GQ(e);if(!n)return t;const{scaleX:a,scaleY:i,x:s,y:c}=n,d=t.left-s-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const f_e={ignoreTransform:!1};function E1(t,e){e===void 0&&(e=f_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=$i(t).getComputedStyle(t);h&&(r=h_e(r,h,p))}const{top:n,left:a,width:i,height:s,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:s,bottom:c,right:d}}function YU(t){return E1(t,{ignoreTransform:!0})}function p_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function m_e(t,e){return e===void 0&&(e=$i(t).getComputedStyle(t)),e.position==="fixed"}function g_e(t,e){e===void 0&&(e=$i(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function uj(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(lj(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!A1(a)||VQ(a)||r.includes(a))return r;const i=$i(t).getComputedStyle(a);return a!==t&&g_e(a,i)&&r.push(a),m_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function WQ(t){const[e]=uj(t,1);return e??null}function wT(t){return!v4||!t?null:zf(t)?t:oj(t)?lj(t)||t===Vf(t).scrollingElement?window:A1(t)?t:null:null}function KQ(t){return zf(t)?t.scrollX:t.scrollLeft}function QQ(t){return zf(t)?t.scrollY:t.scrollTop}function n8(t){return{x:KQ(t),y:QQ(t)}}var Ya;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ya||(Ya={}));function XQ(t){return!v4||!t?!1:t===document.scrollingElement}function YQ(t){const e={x:0,y:0},r=XQ(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,s=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:s,isRight:c,maxScroll:n,minScroll:e}}const y_e={x:.2,y:.2};function v_e(t,e,r,n,a){let{top:i,left:s,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=y_e);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=YQ(t),x={x:0,y:0},T={x:0,y:0},_={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+_.height?(x.y=Ya.Backward,T.y=n*Math.abs((e.top+_.height-i)/_.height)):!p&&d>=e.bottom-_.height&&(x.y=Ya.Forward,T.y=n*Math.abs((e.bottom-_.height-d)/_.height)),!y&&c>=e.right-_.width?(x.x=Ya.Forward,T.x=n*Math.abs((e.right-_.width-c)/_.width)):!m&&s<=e.left+_.width&&(x.x=Ya.Backward,T.x=n*Math.abs((e.left+_.width-s)/_.width)),{direction:x,speed:T}}function x_e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function ZQ(t){return t.reduce((e,r)=>kh(e,n8(r)),No)}function b_e(t){return t.reduce((e,r)=>e+KQ(r),0)}function w_e(t){return t.reduce((e,r)=>e+QQ(r),0)}function JQ(t,e){if(e===void 0&&(e=E1),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);WQ(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const S_e=[["x",["left","right"],b_e],["y",["top","bottom"],w_e]];class dj{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=uj(r),a=ZQ(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,s,c]of S_e)for(const d of s)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function __e(t){const{EventTarget:e}=$i(t);return t instanceof e?t:Vf(t)}function ST(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ws;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ws||(Ws={}));function ZU(t){t.preventDefault()}function T_e(t){t.stopPropagation()}var Tn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Tn||(Tn={}));const eX={start:[Tn.Space,Tn.Enter],cancel:[Tn.Esc],end:[Tn.Space,Tn.Enter,Tn.Tab]},A_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Tn.Right:return{...r,x:r.x+25};case Tn.Left:return{...r,x:r.x-25};case Tn.Down:return{...r,y:r.y+25};case Tn.Up:return{...r,y:r.y-25}}};class tX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new jm(Vf(r)),this.windowListeners=new jm($i(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ws.Resize,this.handleCancel),this.windowListeners.add(Ws.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ws.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&JQ(n),r(No)}handleKeyDown(e){if(cj(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=eX,coordinateGetter:s=A_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:No;this.referenceCoordinates||(this.referenceCoordinates=p);const m=s(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=Vb(m,p),x={x:0,y:0},{scrollableAncestors:T}=n.current;for(const _ of T){const w=e.code,{isTop:E,isRight:I,isLeft:C,isBottom:L,maxScroll:P,minScroll:R}=YQ(_),N=x_e(_),A={x:Math.min(w===Tn.Right?N.right-N.width/2:N.right,Math.max(w===Tn.Right?N.left:N.left+N.width/2,m.x)),y:Math.min(w===Tn.Down?N.bottom-N.height/2:N.bottom,Math.max(w===Tn.Down?N.top:N.top+N.height/2,m.y))},j=w===Tn.Right&&!I||w===Tn.Left&&!C,$=w===Tn.Down&&!L||w===Tn.Up&&!E;if(j&&A.x!==m.x){const B=_.scrollLeft+y.x,F=w===Tn.Right&&B<=P.x||w===Tn.Left&&B>=R.x;if(F&&!y.y){_.scrollTo({left:B,behavior:c});return}F?x.x=_.scrollLeft-B:x.x=w===Tn.Right?_.scrollLeft-P.x:_.scrollLeft-R.x,x.x&&_.scrollBy({left:-x.x,behavior:c});break}else if($&&A.y!==m.y){const B=_.scrollTop+y.y,F=w===Tn.Down&&B<=P.y||w===Tn.Up&&B>=R.y;if(F&&!y.x){_.scrollTo({top:B,behavior:c});return}F?x.y=_.scrollTop-B:x.y=w===Tn.Down?_.scrollTop-P.y:_.scrollTop-R.y,x.y&&_.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,kh(Vb(m,this.referenceCoordinates),x))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=eX,onActivation:a}=e,{active:i}=r;const{code:s}=t.nativeEvent;if(n.start.includes(s)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function JU(t){return!!(t&&"distance"in t)}function ez(t){return!!(t&&"delay"in t)}class hj{constructor(e,r,n){var a;n===void 0&&(n=__e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:s}=i;this.props=e,this.events=r,this.document=Vf(s),this.documentListeners=new jm(this.document),this.listeners=new jm(n),this.windowListeners=new jm($i(s)),this.initialCoordinates=(a=Bg(i))!=null?a:No,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ws.Resize,this.handleCancel),this.windowListeners.add(Ws.DragStart,ZU),this.windowListeners.add(Ws.VisibilityChange,this.handleCancel),this.windowListeners.add(Ws.ContextMenu,ZU),this.documentListeners.add(Ws.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ez(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(JU(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ws.Click,T_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ws.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=Bg(e))!=null?r:No,h=Vb(a,d);if(!n&&c){if(JU(c)){if(c.tolerance!=null&&ST(h,c.tolerance))return this.handleCancel();if(ST(h,c.distance))return this.handleStart()}if(ez(c)&&ST(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),s(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Tn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const N_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class fj extends hj{constructor(e){const{event:r}=e,n=Vf(r.target);super(e,N_e,n)}}fj.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const E_e={move:{name:"mousemove"},end:{name:"mouseup"}};var a8;(function(t){t[t.RightClick=2]="RightClick"})(a8||(a8={}));class j_e extends hj{constructor(e){super(e,E_e,Vf(e.event.target))}}j_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===a8.RightClick?!1:(n==null||n({event:r}),!0)}}];const _T={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class rX extends hj{constructor(e){super(e,_T)}static setup(){return window.addEventListener(_T.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(_T.move.name,e)};function e(){}}}rX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var km;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(km||(km={}));var qb;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(qb||(qb={}));function k_e(t){let{acceleration:e,activator:r=km.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:s=5,order:c=qb.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const x=O_e({delta:m,disabled:!i}),[T,_]=zSe(),w=O.useRef({x:0,y:0}),E=O.useRef({x:0,y:0}),I=O.useMemo(()=>{switch(r){case km.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case km.DraggableRect:return a}},[r,a,d]),C=O.useRef(null),L=O.useCallback(()=>{const R=C.current;if(!R)return;const N=w.current.x*E.current.x,A=w.current.y*E.current.y;R.scrollBy(N,A)},[]),P=O.useMemo(()=>c===qb.TreeOrder?[...h].reverse():h,[c,h]);O.useEffect(()=>{if(!i||!h.length||!I){_();return}for(const R of P){if((n==null?void 0:n(R))===!1)continue;const N=h.indexOf(R),A=p[N];if(!A)continue;const{direction:j,speed:$}=v_e(R,A,I,e,y);for(const B of["x","y"])x[B][j[B]]||($[B]=0,j[B]=0);if($.x>0||$.y>0){_(),C.current=R,T(L,s),w.current=$,E.current=j;return}}w.current={x:0,y:0},E.current={x:0,y:0},_()},[e,L,n,_,i,s,JSON.stringify(I),JSON.stringify(x),T,h,P,p,JSON.stringify(y)])}const C_e={x:{[Ya.Backward]:!1,[Ya.Forward]:!1},y:{[Ya.Backward]:!1,[Ya.Forward]:!1}};function O_e(t){let{delta:e,disabled:r}=t;const n=zb(e);return N1(a=>{if(r||!n||!a)return C_e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ya.Backward]:a.x[Ya.Backward]||i.x===-1,[Ya.Forward]:a.x[Ya.Forward]||i.x===1},y:{[Ya.Backward]:a.y[Ya.Backward]||i.y===-1,[Ya.Forward]:a.y[Ya.Forward]||i.y===1}}},[r,e,n])}function I_e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return N1(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function R_e(t,e){return O.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,n)}));return[...r,...i]},[]),[t,e])}var Ug;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Ug||(Ug={}));var i8;(function(t){t.Optimized="optimized"})(i8||(i8={}));const tz=new Map;function M_e(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,s]=O.useState(null),{frequency:c,measure:d,strategy:h}=a,p=O.useRef(t),m=w(),y=Lg(m),x=O.useCallback(function(E){E===void 0&&(E=[]),!y.current&&s(I=>I===null?E:I.concat(E.filter(C=>!I.includes(C))))},[y]),T=O.useRef(null),_=N1(E=>{if(m&&!r)return tz;if(!E||E===tz||p.current!==t||i!=null){const I=new Map;for(let C of t){if(!C)continue;if(i&&i.length>0&&!i.includes(C.id)&&C.rect.current){I.set(C.id,C.rect.current);continue}const L=C.node.current,P=L?new dj(d(L),L):null;C.rect.current=P,P&&I.set(C.id,P)}return I}return E},[t,i,r,m,d]);return O.useEffect(()=>{p.current=t},[t]),O.useEffect(()=>{m||x()},[r,m]),O.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),O.useEffect(()=>{m||typeof c!="number"||T.current!==null||(T.current=setTimeout(()=>{x(),T.current=null},c))},[c,m,x,...n]),{droppableRects:_,measureDroppableContainers:x,measuringScheduled:i!=null};function w(){switch(h){case Ug.Always:return!1;case Ug.BeforeDragging:return r;default:return!r}}}function pj(t,e){return N1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function P_e(t,e){return pj(t,e)}function D_e(t){let{callback:e,disabled:r}=t;const n=x4(e),a=O.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return O.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function w4(t){let{callback:e,disabled:r}=t;const n=x4(e),a=O.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return O.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function L_e(t){return new dj(E1(t),t)}function rz(t,e,r){e===void 0&&(e=L_e);const[n,a]=O.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const s=D_e({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=w4({callback:i});return oc(()=>{i(),t?(c==null||c.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),s==null||s.disconnect())},[t]),n}function B_e(t){const e=pj(t);return HQ(t,e)}const nz=[];function $_e(t){const e=O.useRef(t),r=N1(n=>t?n&&n!==nz&&t&&e.current&&t.parentNode===e.current.parentNode?n:uj(t):nz,[t]);return O.useEffect(()=>{e.current=t},[t]),r}function U_e(t){const[e,r]=O.useState(null),n=O.useRef(t),a=O.useCallback(i=>{const s=wT(i.target);s&&r(c=>c?(c.set(s,n8(s)),new Map(c)):null)},[]);return O.useEffect(()=>{const i=n.current;if(t!==i){s(i);const c=t.map(d=>{const h=wT(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,n8(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{s(t),s(i)};function s(c){c.forEach(d=>{const h=wT(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),O.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,s)=>kh(i,s),No):ZQ(t):No,[t,e])}function az(t,e){e===void 0&&(e=[]);const r=O.useRef(null);return O.useEffect(()=>{r.current=null},e),O.useEffect(()=>{const n=t!==No;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Vb(t,r.current):No}function z_e(t){O.useEffect(()=>{if(!v4)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function V_e(t,e){return O.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=s=>{i(s,e)},r},{}),[t,e])}function nX(t){return O.useMemo(()=>t?p_e(t):null,[t])}const iz=[];function F_e(t,e){e===void 0&&(e=E1);const[r]=t,n=nX(r?$i(r):null),[a,i]=O.useState(iz);function s(){i(()=>t.length?t.map(d=>XQ(d)?n:new dj(e(d),d)):iz)}const c=w4({callback:s});return oc(()=>{c==null||c.disconnect(),s(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function aX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return A1(e)?e:t}function q_e(t){let{measure:e}=t;const[r,n]=O.useState(null),a=O.useCallback(h=>{for(const{target:p}of h)if(A1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),i=w4({callback:a}),s=O.useCallback(h=>{const p=aX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=Ub(s);return O.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const H_e=[{sensor:fj,options:{}},{sensor:tX,options:{}}],G_e={current:{}},Jv={draggable:{measure:YU},droppable:{measure:YU,strategy:Ug.WhileDragging,frequency:i8.Optimized},dragOverlay:{measure:E1}};class Cm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const W_e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Jv,measureDroppableContainers:Fb,windowRect:null,measuringScheduled:!1},iX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fb,draggableNodes:new Map,over:null,measureDroppableContainers:Fb},j1=O.createContext(iX),sX=O.createContext(W_e);function K_e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cm}}}function Q_e(t,e){switch(e.type){case Ma.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ma.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ma.DragEnd:case Ma.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ma.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Cm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Ma.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const s=new Cm(t.droppable.containers);return s.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:s}}}case Ma.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Cm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function X_e(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=O.useContext(j1),i=zb(n),s=zb(r==null?void 0:r.id);return O.useEffect(()=>{if(!e&&!n&&i&&s!=null){if(!cj(i)||document.activeElement===i.target)return;const c=a.get(s);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=qSe(p);if(m){m.focus();break}}})}},[n,e,a,s,i]),null}function oX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function Y_e(t){return O.useMemo(()=>({draggable:{...Jv.draggable,...t==null?void 0:t.draggable},droppable:{...Jv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Jv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Z_e(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=O.useRef(!1),{x:s,y:c}=typeof a=="boolean"?{x:a,y:a}:a;oc(()=>{if(!s&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=HQ(p,n);if(s||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=WQ(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,s,c,n,r])}const S4=O.createContext({...No,scaleX:1,scaleY:1});var Zc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Zc||(Zc={}));const J_e=O.memo(function(e){var r,n,a,i;let{id:s,accessibility:c,autoScroll:d=!0,children:h,sensors:p=H_e,collisionDetection:m=l_e,measuring:y,modifiers:x,...T}=e;const _=O.useReducer(Q_e,void 0,K_e),[w,E]=_,[I,C]=XSe(),[L,P]=O.useState(Zc.Uninitialized),R=L===Zc.Initialized,{draggable:{active:N,nodes:A,translate:j},droppable:{containers:$}}=w,B=N!=null?A.get(N):null,F=O.useRef({initial:null,translated:null}),z=O.useMemo(()=>{var dr;return N!=null?{id:N,data:(dr=B==null?void 0:B.data)!=null?dr:G_e,rect:F}:null},[N,B]),K=O.useRef(null),[Q,G]=O.useState(null),[X,ne]=O.useState(null),de=Lg(T,Object.values(T)),me=b4("DndDescribedBy",s),H=O.useMemo(()=>$.getEnabled(),[$]),ee=Y_e(y),{droppableRects:te,measureDroppableContainers:Oe,measuringScheduled:re}=M_e(H,{dragging:R,dependencies:[j.x,j.y],config:ee.droppable}),ce=I_e(A,N),he=O.useMemo(()=>X?Bg(X):null,[X]),Ie=kr(),Se=P_e(ce,ee.draggable.measure);Z_e({activeNode:N!=null?A.get(N):null,config:Ie.layoutShiftCompensation,initialRect:Se,measure:ee.draggable.measure});const We=rz(ce,ee.draggable.measure,Se),Me=rz(ce?ce.parentElement:null),_e=O.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),gt=$.getNodeFor((r=_e.current.over)==null?void 0:r.id),et=q_e({measure:ee.dragOverlay.measure}),pt=(n=et.nodeRef.current)!=null?n:ce,st=R?(a=et.rect)!=null?a:We:null,xe=!!(et.nodeRef.current&&et.rect),be=B_e(xe?null:We),Be=nX(pt?$i(pt):null),Ye=$_e(R?gt??ce:null),ht=F_e(Ye),Ze=oX(x,{transform:{x:j.x-be.x,y:j.y-be.y,scaleX:1,scaleY:1},activatorEvent:X,active:z,activeNodeRect:We,containerNodeRect:Me,draggingNodeRect:st,over:_e.current.over,overlayNodeRect:et.rect,scrollableAncestors:Ye,scrollableAncestorRects:ht,windowRect:Be}),yt=he?kh(he,j):null,Rt=U_e(Ye),Bt=az(Rt),Tt=az(Rt,[We]),bt=kh(Ze,Bt),Zt=st?d_e(st,Ze):null,tn=z&&Zt?m({active:z,collisionRect:Zt,droppableRects:te,droppableContainers:H,pointerCoordinates:yt}):null,rn=i_e(tn,"id"),[ln,ye]=O.useState(null),it=xe?Ze:kh(Ze,Tt),At=c_e(it,(i=ln==null?void 0:ln.rect)!=null?i:null,We),jt=O.useRef(null),Pt=O.useCallback((dr,Nt)=>{let{sensor:wt,options:sr}=Nt;if(K.current==null)return;const Qr=A.get(K.current);if(!Qr)return;const Mr=dr.nativeEvent,Xr=new wt({active:K.current,activeNode:Qr,event:Mr,options:sr,context:_e,onAbort(Jt){if(!A.get(Jt))return;const{onDragAbort:cn}=de.current,En={id:Jt};cn==null||cn(En),I({type:"onDragAbort",event:En})},onPending(Jt,pa,cn,En){if(!A.get(Jt))return;const{onDragPending:wr}=de.current,un={id:Jt,constraint:pa,initialCoordinates:cn,offset:En};wr==null||wr(un),I({type:"onDragPending",event:un})},onStart(Jt){const pa=K.current;if(pa==null)return;const cn=A.get(pa);if(!cn)return;const{onDragStart:En}=de.current,ti={activatorEvent:Mr,active:{id:pa,data:cn.data,rect:F}};fh.unstable_batchedUpdates(()=>{En==null||En(ti),P(Zc.Initializing),E({type:Ma.DragStart,initialCoordinates:Jt,active:pa}),I({type:"onDragStart",event:ti}),G(jt.current),ne(Mr)})},onMove(Jt){E({type:Ma.DragMove,coordinates:Jt})},onEnd:Mn(Ma.DragEnd),onCancel:Mn(Ma.DragCancel)});jt.current=Xr;function Mn(Jt){return async function(){const{active:cn,collisions:En,over:ti,scrollAdjustedTranslate:wr}=_e.current;let un=null;if(cn&&wr){const{cancelDrop:Va}=de.current;un={activatorEvent:Mr,active:cn,collisions:En,delta:wr,over:ti},Jt===Ma.DragEnd&&typeof Va=="function"&&await Promise.resolve(Va(un))&&(Jt=Ma.DragCancel)}K.current=null,fh.unstable_batchedUpdates(()=>{E({type:Jt}),P(Zc.Uninitialized),ye(null),G(null),ne(null),jt.current=null;const Va=Jt===Ma.DragEnd?"onDragEnd":"onDragCancel";if(un){const Qn=de.current[Va];Qn==null||Qn(un),I({type:Va,event:un})}})}}},[A]),ct=O.useCallback((dr,Nt)=>(wt,sr)=>{const Qr=wt.nativeEvent,Mr=A.get(sr);if(K.current!==null||!Mr||Qr.dndKit||Qr.defaultPrevented)return;const Xr={active:Mr};dr(wt,Nt.options,Xr)===!0&&(Qr.dndKit={capturedBy:Nt.sensor},K.current=sr,Pt(wt,Nt))},[A,Pt]),gr=R_e(p,ct);z_e(p),oc(()=>{We&&L===Zc.Initializing&&P(Zc.Initialized)},[We,L]),O.useEffect(()=>{const{onDragMove:dr}=de.current,{active:Nt,activatorEvent:wt,collisions:sr,over:Qr}=_e.current;if(!Nt||!wt)return;const Mr={active:Nt,activatorEvent:wt,collisions:sr,delta:{x:bt.x,y:bt.y},over:Qr};fh.unstable_batchedUpdates(()=>{dr==null||dr(Mr),I({type:"onDragMove",event:Mr})})},[bt.x,bt.y]),O.useEffect(()=>{const{active:dr,activatorEvent:Nt,collisions:wt,droppableContainers:sr,scrollAdjustedTranslate:Qr}=_e.current;if(!dr||K.current==null||!Nt||!Qr)return;const{onDragOver:Mr}=de.current,Xr=sr.get(rn),Mn=Xr&&Xr.rect.current?{id:Xr.id,rect:Xr.rect.current,data:Xr.data,disabled:Xr.disabled}:null,Jt={active:dr,activatorEvent:Nt,collisions:wt,delta:{x:Qr.x,y:Qr.y},over:Mn};fh.unstable_batchedUpdates(()=>{ye(Mn),Mr==null||Mr(Jt),I({type:"onDragOver",event:Jt})})},[rn]),oc(()=>{_e.current={activatorEvent:X,active:z,activeNode:ce,collisionRect:Zt,collisions:tn,droppableRects:te,draggableNodes:A,draggingNode:pt,draggingNodeRect:st,droppableContainers:$,over:ln,scrollableAncestors:Ye,scrollAdjustedTranslate:bt},F.current={initial:st,translated:Zt}},[z,ce,tn,Zt,A,pt,st,te,$,ln,Ye,bt]),k_e({...Ie,delta:j,draggingRect:Zt,pointerCoordinates:yt,scrollableAncestors:Ye,scrollableAncestorRects:ht});const wn=O.useMemo(()=>({active:z,activeNode:ce,activeNodeRect:We,activatorEvent:X,collisions:tn,containerNodeRect:Me,dragOverlay:et,draggableNodes:A,droppableContainers:$,droppableRects:te,over:ln,measureDroppableContainers:Oe,scrollableAncestors:Ye,scrollableAncestorRects:ht,measuringConfiguration:ee,measuringScheduled:re,windowRect:Be}),[z,ce,We,X,tn,Me,et,A,$,te,ln,Oe,Ye,ht,ee,re,Be]),Rn=O.useMemo(()=>({activatorEvent:X,activators:gr,active:z,activeNodeRect:We,ariaDescribedById:{draggable:me},dispatch:E,draggableNodes:A,over:ln,measureDroppableContainers:Oe}),[X,gr,z,We,E,me,A,ln,Oe]);return ae.createElement(qQ.Provider,{value:C},ae.createElement(j1.Provider,{value:Rn},ae.createElement(sX.Provider,{value:wn},ae.createElement(S4.Provider,{value:At},h)),ae.createElement(X_e,{disabled:(c==null?void 0:c.restoreFocus)===!1})),ae.createElement(JSe,{...c,hiddenTextDescribedById:me}));function kr(){const dr=(Q==null?void 0:Q.autoScrollEnabled)===!1,Nt=typeof d=="object"?d.enabled===!1:d===!1,wt=R&&!dr&&!Nt;return typeof d=="object"?{...d,enabled:wt}:{enabled:wt}}}),eTe=O.createContext(null),sz="button",tTe="Draggable";function lX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=b4(tTe),{activators:s,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=O.useContext(j1),{role:x=sz,roleDescription:T="draggable",tabIndex:_=0}=a??{},w=(d==null?void 0:d.id)===e,E=O.useContext(w?S4:eTe),[I,C]=Ub(),[L,P]=Ub(),R=V_e(s,e),N=Lg(r);oc(()=>(m.set(e,{id:e,key:i,node:I,activatorNode:L,data:N}),()=>{const j=m.get(e);j&&j.key===i&&m.delete(e)}),[m,e]);const A=O.useMemo(()=>({role:x,tabIndex:_,"aria-disabled":n,"aria-pressed":w&&x===sz?!0:void 0,"aria-roledescription":T,"aria-describedby":p.draggable}),[n,x,_,w,T,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:A,isDragging:w,listeners:n?void 0:R,node:I,over:y,setNodeRef:C,setActivatorNodeRef:P,transform:E}}function rTe(){return O.useContext(sX)}const nTe="Droppable",aTe={timeout:25};function mj(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=b4(nTe),{active:s,dispatch:c,over:d,measureDroppableContainers:h}=O.useContext(j1),p=O.useRef({disabled:r}),m=O.useRef(!1),y=O.useRef(null),x=O.useRef(null),{disabled:T,updateMeasurementsFor:_,timeout:w}={...aTe,...a},E=Lg(_??n),I=O.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),x.current=null},w)},[w]),C=w4({callback:I,disabled:T||!s}),L=O.useCallback((A,j)=>{C&&(j&&(C.unobserve(j),m.current=!1),A&&C.observe(A))},[C]),[P,R]=Ub(L),N=Lg(e);return O.useEffect(()=>{!C||!P.current||(C.disconnect(),m.current=!1,C.observe(P.current))},[P,C]),O.useEffect(()=>(c({type:Ma.RegisterDroppable,element:{id:n,key:i,disabled:r,node:P,rect:y,data:N}}),()=>c({type:Ma.UnregisterDroppable,key:i,id:n})),[n]),O.useEffect(()=>{r!==p.current.disabled&&(c({type:Ma.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:s,rect:y,isOver:(d==null?void 0:d.id)===n,node:P,over:d,setNodeRef:R}}function iTe(t){let{animation:e,children:r}=t;const[n,a]=O.useState(null),[i,s]=O.useState(null),c=zb(r);return!r&&!n&&c&&a(c),oc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),ae.createElement(ae.Fragment,null,r,n?O.cloneElement(n,{ref:s}):null)}const sTe={x:0,y:0,scaleX:1,scaleY:1};function oTe(t){let{children:e}=t;return ae.createElement(j1.Provider,{value:iX},ae.createElement(S4.Provider,{value:sTe},e))}const lTe={position:"fixed",touchAction:"none"},cTe=t=>cj(t)?"transform 250ms ease":void 0,uTe=O.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:s,rect:c,style:d,transform:h,transition:p=cTe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},y={...lTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:$g.Transform.toString(m),transformOrigin:a&&n?r_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return ae.createElement(r,{className:s,style:y,ref:e},i)}),dTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:s}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);s!=null&&s.active&&r.node.classList.remove(s.active)}},hTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:$g.Transform.toString(e)},{transform:$g.Transform.toString(r)}]},fTe={duration:250,easing:"ease",keyframes:hTe,sideEffects:dTe({styles:{active:{opacity:"0"}}})};function pTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return x4((i,s)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=aX(s);if(!h)return;const{transform:p}=$i(s).getComputedStyle(s),m=GQ(p);if(!m)return;const y=typeof e=="function"?e:mTe(e);return JQ(d,a.draggable.measure),y({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:s,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function mTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...fTe,...t};return i=>{let{active:s,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-s.rect.left,y:c.rect.top-s.rect.top},m={scaleX:d.scaleX!==1?s.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?s.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},x=a({...h,active:s,dragOverlay:c,transform:{initial:d,final:y}}),[T]=x,_=x[x.length-1];if(JSON.stringify(T)===JSON.stringify(_))return;const w=n==null?void 0:n({active:s,dragOverlay:c,...h}),E=c.node.animate(x,{duration:e,easing:r,fill:"forwards"});return new Promise(I=>{E.onfinish=()=>{w==null||w(),I()}})}}let oz=0;function gTe(t){return O.useMemo(()=>{if(t!=null)return oz++,oz},[t])}const yTe=ae.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:s,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:x,draggableNodes:T,droppableContainers:_,dragOverlay:w,over:E,measuringConfiguration:I,scrollableAncestors:C,scrollableAncestorRects:L,windowRect:P}=rTe(),R=O.useContext(S4),N=gTe(m==null?void 0:m.id),A=oX(s,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:x,draggingNodeRect:w.rect,over:E,overlayNodeRect:w.rect,scrollableAncestors:C,scrollableAncestorRects:L,transform:R,windowRect:P}),j=pj(y),$=pTe({config:n,draggableNodes:T,droppableContainers:_,measuringConfiguration:I}),B=j?w.setRef:void 0;return ae.createElement(oTe,null,ae.createElement(iTe,{animation:$},m&&N?ae.createElement(uTe,{key:N,id:m.id,ref:B,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:j,style:{zIndex:h,...a},transform:A},r):null))});function lz(t,e=800){const[r,n]=O.useState(t),a=O.useRef(t),i=O.useRef(0);return O.useEffect(()=>{const s=a.current,c=t;if(a.current=t,s===c)return;const d=performance.now(),h=c-s,p=m=>{const y=m-d,x=Math.min(y/e,1),T=1-Math.pow(1-x,3);n(Math.round(s+h*T)),x<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const cX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],uX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],vTe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],cz={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},ih=t=>t?cz[t.rarity]||cz.COMMON:null,xTe=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},zg=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)||"A",c=s==="B",d=s==="C",h=cX[(e==null?void 0:e.skinTone)??0],p=uX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",x=t==null?void 0:t.HEAD,T=t==null?void 0:t.CHEST,_=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,E=t==null?void 0:t.BELT,I=t==null?void 0:t.AMULET,C=O.useMemo(()=>[x,T,_,w,E,I].filter(Boolean).length,[x,T,_,w,E,I]),L=O.useMemo(()=>[x,T,_,w,E,I].some(A=>(A==null?void 0:A.rarity)==="UNIQUE"),[x,T,_,w,E,I]),P=Math.min(1,.2+C*.13),R=c?23:21,N=O.useMemo(()=>xTe(m,R),[m,R]);return o.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[o.jsxs("defs",{children:[o.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[o.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[o.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),o.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),o.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[o.jsx("stop",{offset:"0%",stopColor:h}),o.jsx("stop",{offset:"100%",stopColor:y})]}),o.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:P}),o.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:P*.3}),o.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),o.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:p}),o.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),o.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:o.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&o.jsxs("g",{filter:"url(#av-bloom)",children:[o.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),o.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),o.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const A=ih(w);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),o.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),o.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),o.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),A.intensity>=.7&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():o.jsxs("g",{children:[o.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),o.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),o.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),o.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),o.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),o.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),o.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),T&&(()=>{const A=ih(T);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:A.primary,fillOpacity:"0.3",stroke:A.primary,strokeWidth:"1",strokeOpacity:"0.6"}),o.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),o.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),o.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:A.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),o.jsx("circle",{cx:"100",cy:"120",r:"2",fill:A.particle,fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),A.intensity>=.7&&o.jsxs("g",{children:[o.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),E?(()=>{const A=ih(E);return o.jsxs("g",{children:[o.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"0.8"}),o.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:A.particle,fillOpacity:"0.4"}),o.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"}),o.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"})]})})():o.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),o.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),o.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),_?(()=>{const A=ih(_);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),o.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),o.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),A.intensity>=.7&&o.jsxs(o.Fragment,{children:[o.jsx("circle",{cx:"50",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"150",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():o.jsxs("g",{children:[o.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),o.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),C>0&&o.jsxs(o.Fragment,{children:[o.jsx("g",{filter:"url(#av-bloom)",children:o.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:o.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),o.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:P*.7,children:o.jsx("animate",{attributeName:"fillOpacity",values:`${P*.7};${P*.3};${P*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),C>=3&&o.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),o.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),I&&(()=>{const A=ih(I);return o.jsxs("g",{filter:"url(#av-glow)",children:[o.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:A.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),o.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",children:o.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"100",cy:"97",r:"2",fill:A.particle,children:o.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),o.jsxs("g",{children:[N.back&&o.jsx("path",{d:N.back,fill:"url(#av-hair)",opacity:"0.8"}),o.jsx("ellipse",{cx:"100",cy:"50",rx:R,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),o.jsx("ellipse",{cx:100-R-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),o.jsx("ellipse",{cx:100+R+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),o.jsxs("g",{children:[o.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),o.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),o.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),o.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),o.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),o.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),o.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),o.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),o.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),o.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:o.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:o.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),o.jsx("path",{d:N.main,fill:"url(#av-hair)"}),N.accent&&o.jsx("path",{d:N.accent,fill:"url(#av-hair)",opacity:"0.9"}),x&&(()=>{const A=ih(x),j=x.visualId||"";return o.jsx("g",{filter:A.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:j.includes("helm")?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:`M${100-R-2} 28 Q100 10 ${100+R+2} 28 L${100+R+4} 62 Q100 72 ${100-R-4} 62 Z`,fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"1.2"}),o.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):j.includes("visor")?o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:A.primary,strokeWidth:"1",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:A.primary,strokeWidth:"1.5"})]}):o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:A.primary,fillOpacity:"0.7",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:A.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&o.jsxs("g",{filter:"url(#av-glow)",children:[o.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&o.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((A,j)=>o.jsx("polygon",{points:`${100+A},16 ${97+A},22 ${103+A},22`,fill:"#fbbf24",fillOpacity:"0.6",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+j*.2}s`,repeatCount:"indefinite"})},j))]}),L&&o.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((A,j)=>{const $=A*Math.PI/180,B=100+Math.cos($)*50,F=145+Math.sin($)*75;return o.jsxs("circle",{cx:B,cy:F,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[o.jsx("animate",{attributeName:"cy",values:`${F};${F-18};${F}`,dur:`${2+j*.3}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+j*.3}s`,repeatCount:"indefinite"})]},j)})}),r>=5&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),o.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&o.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((A,j)=>{const $=j*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),B=100+Math.cos($)*(38+j*3),F=140+Math.sin($)*(55+j*2),z=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return o.jsxs("circle",{cx:B,cy:F,r:"1",fill:z,fillOpacity:"0.35",children:[o.jsx("animate",{attributeName:"cy",values:`${F};${F-12};${F}`,dur:`${2+j*.4}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+j*.4}s`,repeatCount:"indefinite"})]},j)})}),n&&a&&o.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((A,j)=>{const $=60+Math.random()*80,B=20+Math.random()*260;return o.jsxs("circle",{cx:$,cy:B,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[o.jsx("animate",{attributeName:"cy",values:`${B};${B-25};${B}`,dur:`${3+j*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+j*.5}s`,repeatCount:"indefinite"})]},`c-${j}`)})})]})]})},gj=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],bTe=t=>gj.filter(e=>!e.isSecret||t.includes(e.id)),kv={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},dX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],uz=(t,e)=>{const r=dX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},wTe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],hX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of wTe){const a=n.itemIds.filter(s=>r.includes(s)).length,i=n.bonuses.filter(s=>a>=s.count).sort((s,c)=>c.count-s.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},STe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],dz=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],fX=t=>[...dz].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||dz[0],_Te=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,TTe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},ATe=({unlockedAchievements:t,achievementProgress:e})=>{const r=O.useMemo(()=>bTe(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=gj.filter(s=>!s.isSecret).length;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Jl,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),o.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(s=>{const c=r.filter(h=>h.category===s);if(c.length===0)return null;const d=TTe[s];return o.jsxs("div",{children:[o.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[o.jsx("span",{children:d.icon})," ",d.label]}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[o.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&o.jsx(Gh,{className:"w-3 h-3 text-gray-600"})]}),o.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&o.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),o.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&o.jsxs("div",{className:"text-right shrink-0",children:[o.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&o.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},s)})]})},NTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},ETe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=O.useState(t||null),[i,s]=O.useState(null),c=pi(),{confirm:d}=al(),h=!!t,p=n||"THEORIST",m=dX.filter(T=>T.specialization===p),y=[1,2,3,4],x=async T=>{if(!i){if(!h){const _=kv[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${_} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${_}`,cancelLabel:"Go Back",variant:"warning"}))return}s(T);try{await De.unlockSkill(T,p),Bn.skillUnlock(),c.success("Skill unlocked!")}catch(_){c.error(_ instanceof Error?_.message:"Failed to unlock")}s(null)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[o.jsx(Ba,{className:"w-4 h-4 text-yellow-400"}),o.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[o.jsx(ks,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),o.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",o.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx(Cn,{className:"w-4 h-4 text-green-400"}),o.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",o.jsxs("span",{className:"font-bold text-white",children:[kv[t].icon," ",kv[t].name]})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(kv).map(([T,_])=>{const w=p===T,E=h&&t!==T;return o.jsxs("button",{onClick:()=>!E&&a(T),disabled:E,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${NTe[T]} bg-opacity-10`:E?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:_.icon}),o.jsx("span",{className:"font-bold text-sm text-white",children:_.name}),E&&o.jsx(Gh,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:_.description}),!h&&w&&o.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},T)})}),o.jsx("div",{className:"space-y-4",children:y.map(T=>{const _=m.filter(w=>w.tier===T);return o.jsxs("div",{children:[o.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",T]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(w=>{const E=r.includes(w.id),I=h&&!E&&uz(w.id,r)&&e>=w.cost,C=uz(w.id,r);return o.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${E?"border-green-500/30 bg-green-500/10":I?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>I&&x(w.id),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm",children:w.icon}),o.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),E&&o.jsx(Cn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!E&&!C&&o.jsx(Gh,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),o.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!E&&o.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},T)})})]})},TT=25,Cv=STe,jTe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=O.useState(!1),[i,s]=O.useState(0),[c,d]=O.useState(null),h=O.useRef(null),p=pi(),m=new Date().toISOString().split("T")[0],y=e===m,x=!y&&t>=TT&&!n,T=async()=>{if(x){a(!0),d(null),Bn.wheelSpin();try{const E=await De.spinFortuneWheel(r),I=Cv.findIndex(P=>P.id===E.prizeId),C=360/Cv.length,L=360*5+(360-I*C-C/2);s(P=>P+L),setTimeout(()=>{Bn.wheelPrize(),d(E.rewardDescription),a(!1),E.prizeType!=="NOTHING"?p.success(`You won: ${E.rewardDescription}!`):p.info(E.rewardDescription)},4e3)}catch(E){a(!1),p.error(E instanceof Error?E.message:"Spin failed")}}},_=360/Cv.length,w=140;return o.jsxs("div",{className:"flex flex-col items-center gap-6",children:[o.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",TT," Flux for a daily spin"]}),o.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[o.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),o.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:o.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Cv.map((E,I)=>{const C=(I*_-90)*(Math.PI/180),L=((I+1)*_-90)*(Math.PI/180),P=w*Math.cos(C),R=w*Math.sin(C),N=w*Math.cos(L),A=w*Math.sin(L),j=_>180?1:0,$=((I+.5)*_-90)*(Math.PI/180),B=w*.65*Math.cos($),F=w*.65*Math.sin($),z=(I+.5)*_;return o.jsxs("g",{children:[o.jsx("path",{d:`M0,0 L${P},${R} A${w},${w} 0 ${j},1 ${N},${A} Z`,fill:E.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),o.jsx("text",{x:B,y:F,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${z}, ${B}, ${F})`,children:E.label})]},E.id)}),o.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),o.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&o.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[o.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),o.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),o.jsx("button",{onClick:T,disabled:!x,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${x?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${TT} Flux)`})]})};function kTe(t,e){const[r,n]=O.useState(e);return O.useEffect(()=>{const a=De.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function CTe(t){const[e,r]=O.useState([]);return O.useEffect(()=>{const n=De.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const OTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var T;const i=kTe(t.id,t.maxHp),s=CTe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=s.reduce((_,w)=>(_[w.userId]||(_[w.userId]={name:w.userName,total:0}),_[w.userId].total+=w.damage,_),{}),m=Object.entries(p).sort(([,_],[,w])=>w.total-_.total).slice(0,5),y=((T=p[e])==null?void 0:T.total)||0,x=(a==null?void 0:a.bossId)===t.id;return o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[x&&o.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),o.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[o.jsx(js,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),o.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),x&&a&&o.jsx("div",{className:"text-center animate-bounce",children:o.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),y>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(To,{className:"w-3 h-3"}),"Your total damage: ",o.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[o.jsx(Ts,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([_,w],E)=>o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:`${_===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",E+1," ",w.name]}),o.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},_))]}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ba,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&o.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),o.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[o.jsx(Dd,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),o.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},ITe=({userId:t,userName:e,classType:r})=>{const[n,a]=O.useState([]),[i,s]=O.useState(null),[c,d]=O.useState(null),h=pi();O.useEffect(()=>{let m;try{m=De.subscribeToBossEncounters(y=>{const x=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");a(x)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){s(m);try{const y=await De.dealBossDamage(m,e,r||"");if(Bn.bossHit(),d({bossId:m,damage:y.damageDealt,isCrit:y.isCrit}),setTimeout(()=>d(null),2e3),y.bossDefeated)Bn.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const x=y.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${y.damageDealt} damage!${x} (+${y.xpEarned} XP)`)}}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[o.jsx(cle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>o.jsx(OTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},RTe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:s,bossHpPercent:c})=>{const[d,h]=O.useState(!1),[p,m]=O.useState(!1),[y,x]=O.useState(null),T=(n==null?void 0:n.bossType)||"BRUTE",_=(n==null?void 0:n.hue)??0;return O.useEffect(()=>{if(a==="player-attack"&&i){h(!0),x({value:i,side:"right"});const w=setTimeout(()=>h(!1),500),E=setTimeout(()=>x(null),1200);return()=>{clearTimeout(w),clearTimeout(E)}}else if(a==="boss-attack"&&i){m(!0),x({value:i,side:"left"});const w=setTimeout(()=>m(!1),500),E=setTimeout(()=>x(null),1200);return()=>{clearTimeout(w),clearTimeout(E)}}},[a,i]),o.jsxs("div",{className:"relative w-full h-32 flex items-end justify-between px-2 overflow-hidden select-none",children:[o.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),o.jsxs("div",{className:`relative w-16 h-24 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-8 scale-110":""} ${p?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2rem) scale(1.1)":void 0},children:[o.jsx(zg,{equipped:e,appearance:t,evolutionLevel:r}),o.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${s>50?"bg-emerald-500":s>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s}%`}})})]}),o.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[o.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),d&&o.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[o.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),o.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[o.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),o.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),o.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),p&&o.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[o.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),o.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),y&&o.jsxs("div",{className:`absolute text-lg font-black animate-[floatUp_1.2s_ease-out_forwards] ${y.side==="right"?"right-4 text-amber-400":"left-4 text-red-400"}`,style:{top:"10%"},children:["-",y.value]})]}),o.jsxs("div",{className:`relative w-20 h-28 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-8 scale-110":""} ${d?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2rem) scale(1.1)":d?void 0:"scaleX(-1)",...d?{}:{filter:void 0}},children:[o.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:o.jsx(mG,{bossType:T,hue:_})}),o.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),o.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
            `})]})};function MTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function PTe(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function DTe(t,e){const r=[...t],n=MTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function LTe(t,e){const[r,n]=O.useState(e);return O.useEffect(()=>{const a=De.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const BTe=({modifier:t})=>{const e=DT[t.type];return e?o.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[o.jsx(S2,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&o.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},$Te=({quiz:t,progress:e})=>{var m,y;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,s=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=s>0?Math.round(c/s*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return o.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[o.jsxs("div",{className:"text-center py-4",children:[o.jsx(Yq,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),o.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?o.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&o.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[o.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),o.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((y=t.rewards)==null?void 0:y.flux)||0)*(a||1))," Flux"]}),a&&a>1&&o.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?o.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[o.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Im," attempts and ",Rm," correct answer"]})]}):null,r&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(D7,{className:"w-3 h-3"})," Damage Dealt"]}),o.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Ao,{className:"w-3 h-3"})," Accuracy"]}),o.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",s]})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Ba,{className:"w-3 h-3"})," Critical Hits"]}),o.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(To,{className:"w-3 h-3"})," Damage Mitigated"]}),o.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(N2,{className:"w-3 h-3"})," Longest Streak"]}),o.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Wv,{className:"w-3 h-3"})," Healing Received"]}),o.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&o.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(x=>{const T=r.correctByDifficulty[x]||0,_=r.incorrectByDifficulty[x]||0,w=T+_,E=w>0?Math.round(T/w*100):0;return o.jsxs("div",{className:`rounded-lg p-2 border text-center ${x==="EASY"?"border-green-500/20 bg-green-500/5":x==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[o.jsx("div",{className:`text-[9px] font-bold uppercase ${x==="EASY"?"text-green-400":x==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:x}),o.jsxs("div",{className:"text-sm font-black text-white",children:[E,"%"]}),o.jsxs("div",{className:"text-[9px] text-gray-500",children:[T,"/",w]})]},x)})})]})},UTe=({quiz:t,userId:e,onAnswer:r,submitting:n,currentQuestion:a,selectedAnswer:i,answerResult:s,playerHp:c,playerMaxHp:d,knockedOut:h,playerAppearance:p,playerEquipped:m,playerEvolutionLevel:y,attackState:x,attackDamage:T})=>{var A,j,$,B;const _=LTe(t.id,t.maxHp),w=_/t.maxHp*100,E=d>0?c/d*100:100,I=ae.useMemo(()=>DTe(t.questions,PTe(e+t.id)),[t.questions,e,t.id]),C=I[a%I.length],L=a>=I.length,P=_<=0,[R,N]=O.useState(null);return O.useEffect(()=>{const F=De.subscribeToBossQuizProgress(e,t.id,N);return()=>F()},[e,t.id]),o.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-base font-black text-amber-400",children:t.bossName}),o.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!P&&o.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((F,z)=>o.jsx(BTe,{modifier:F},z))}),P?o.jsx($Te,{quiz:t,progress:R}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:o.jsx(RTe,{playerAppearance:p,playerEquipped:m,playerEvolutionLevel:y,bossAppearance:t.bossAppearance,attackState:x,damage:T,playerHpPercent:E,bossHpPercent:w})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-red-400 font-mono",children:[_," HP"]}),o.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${w}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[o.jsx(Wv,{className:"w-3 h-3"})," Your HP: ",c]}),o.jsx("span",{className:"text-gray-600",children:d})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:o.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${E>50?"bg-gradient-to-r from-emerald-600 to-green-500":E>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${E}%`}})})]}),h?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(qh,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):L?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Cn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):C?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:["Question ",a+1," / ",I.length]}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${C.difficulty==="HARD"?"bg-red-500/20 text-red-400":C.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[C.difficulty,C.damageBonus?` (+${C.damageBonus} dmg)`:""]})]}),o.jsx("p",{className:"text-sm text-white font-medium",children:C.stem}),o.jsx("div",{className:"space-y-2",children:C.options.map((F,z)=>{const K=i===z,Q=s&&K,G=s==null?void 0:s.correct;return o.jsx("button",{onClick:()=>r(t.id,C.id,z),disabled:n||!!s||h,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${Q&&G?"border-green-500/50 bg-green-500/10 text-green-400":Q&&!G?"border-red-500/50 bg-red-500/10 text-red-400":K?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+z),"."]}),o.jsx("span",{children:F}),Q&&G&&o.jsx(Cn,{className:"w-4 h-4 text-green-400 ml-auto"}),Q&&!G&&o.jsx(qh,{className:"w-4 h-4 text-red-400 ml-auto"})]})},z)})}),s&&s.correct&&o.jsxs("div",{className:"text-center space-y-1",children:[o.jsxs("div",{className:"text-sm text-amber-400 font-bold animate-bounce",children:[o.jsx(Ba,{className:"w-4 h-4 inline mr-1"}),s.isCrit?"CRITICAL HIT! ":"","-",s.damage," HP to boss!"]}),s.healAmount&&s.healAmount>0&&o.jsxs("div",{className:"text-xs text-emerald-400 font-bold",children:[o.jsx(Wv,{className:"w-3 h-3 inline mr-1"})," +",s.healAmount," HP healed"]})]}),s&&!s.correct&&s.shieldBlocked&&o.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[o.jsx(To,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),s&&!s.correct&&!s.shieldBlocked&&s.playerDamage&&s.playerDamage>0&&o.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[o.jsx(Wv,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",s.playerDamage," damage!"]})]}):null,R&&!P&&!h&&!L&&o.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((A=R.combatStats)==null?void 0:A.questionsAttempted)||0)<Im||(((j=R.combatStats)==null?void 0:j.questionsCorrect)||0)<Rm?o.jsxs("span",{children:["Rewards: ",(($=R.combatStats)==null?void 0:$.questionsAttempted)||0,"/",Im," attempts"," ",""," ",((B=R.combatStats)==null?void 0:B.questionsCorrect)||0,"/",Rm," correct needed"]}):o.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[o.jsx("span",{children:"Defeat rewards:"}),o.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),o.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&o.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},zTe=({userId:t,classType:e,userSection:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:s})=>{const[c,d]=O.useState([]),[h,p]=O.useState(0),[m,y]=O.useState(null),[x,T]=O.useState(null),[_,w]=O.useState(!1),[E,I]=O.useState(-1),[C,L]=O.useState(100),[P,R]=O.useState(!1),[N,A]=O.useState("idle"),[j,$]=O.useState(void 0),B=pi();O.useEffect(()=>{let K;try{K=De.subscribeToBossQuizzes(e,d)}catch{}return()=>K==null?void 0:K()},[e]);const F=c.filter(K=>{var Q;return!((Q=K.targetSections)!=null&&Q.length)||K.targetSections.includes(r||"")});O.useEffect(()=>{if(n){const K=fG(n);L(K.maxHp),E===-1&&I(K.maxHp)}},[n]);const z=async(K,Q,G)=>{if(!(_||P)){w(!0),y(G);try{const X=await De.answerBossQuiz(K,Q,G);X.alreadyAnswered?B.info("Already answered this question!"):X.correct?($(X.damage),A("player-attack"),setTimeout(()=>A("idle"),800),Bn.bossHit(),X.bossDefeated?(Bn.bossDefeated(),B.success("Boss defeated! Completion rewards distributed to all contributors!")):X.isCrit?B.success(`CRITICAL HIT! Dealt ${X.damage} damage!`):B.success(`Correct! Dealt ${X.damage} damage!`)):X.shieldBlocked?B.info("Shield blocked the attack!"):X.playerDamage&&X.playerDamage>0?($(X.playerDamage),A("boss-attack"),setTimeout(()=>A("idle"),800),B.error(`Wrong! The boss hits you for ${X.playerDamage} damage!`)):B.error("Incorrect. No damage dealt."),X.healAmount&&X.healAmount>0&&X.correct,X.playerHp!==void 0&&I(X.playerHp),X.playerMaxHp!==void 0&&L(X.playerMaxHp),X.knockedOut&&(R(!0),Bn.bossHit()),T({correct:X.correct,damage:X.damage,playerDamage:X.playerDamage,playerHp:X.playerHp,playerMaxHp:X.playerMaxHp,knockedOut:X.knockedOut,isCrit:X.isCrit,healAmount:X.healAmount,shieldBlocked:X.shieldBlocked}),X.knockedOut||setTimeout(()=>{p(ne=>ne+1),y(null),T(null)},2e3)}catch(X){B.error(X instanceof Error?X.message:"Failed to submit answer")}w(!1)}};return F.length===0?null:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[o.jsx(Vo,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),F.map(K=>o.jsx(UTe,{quiz:K,userId:t,onAnswer:z,submitting:_,currentQuestion:h,selectedAnswer:m,answerResult:x,playerHp:E===-1?C:E,playerMaxHp:C,knockedOut:P,playerAppearance:a,playerEquipped:i||{},playerEvolutionLevel:s||1,attackState:N,attackDamage:j},K.id))]})},VTe=({activeChallenges:t,classType:e})=>{const[r,n]=O.useState([]),[a,i]=O.useState(null),s=pi();O.useEffect(()=>{let y;try{y=De.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(x=>x.challengeId===y),d=async y=>{if(!a){i(y);try{const x=await De.claimDailyChallenge(y,e);Bn.dailyReward(),s.success(`Claimed! +${x.xpReward} XP${x.fluxReward?` +${x.fluxReward} Flux`:""}`)}catch(x){s.error(x instanceof Error?x.message:"Claim failed")}i(null)}};if(r.length===0)return null;const h=r.filter(y=>!y.isWeekly),p=r.filter(y=>y.isWeekly),m=y=>{const x=c(y.id),T=(x==null?void 0:x.progress)||0,_=(x==null?void 0:x.completed)||!1,w=!!(x!=null&&x.claimedAt),E=Math.min(100,T/y.target*100);return o.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":_?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${_?"bg-yellow-500/20":"bg-white/5"}`,children:w?o.jsx(Cn,{className:"w-4 h-4 text-green-400"}):_?o.jsx(zoe,{className:"w-4 h-4 text-yellow-400"}):o.jsx(Ao,{className:"w-4 h-4 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&o.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),o.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:`h-1.5 rounded-full transition-all ${_?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${E}%`}})}),o.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),_&&!w&&o.jsx("button",{onClick:()=>d(y.id),disabled:!!a,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:a===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Coe,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),o.jsx("div",{className:"space-y-2",children:h.map(m)}),p.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[o.jsx(Ba,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),o.jsx("div",{className:"space-y-2",children:p.map(m)})]})]})},AT={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},hz=({value:t,onChange:e,label:r})=>o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),o.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>o.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:o.jsx(A2,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),FTe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=O.useState(0),[i,s]=O.useState(0),[c,d]=O.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return o.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[o.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),o.jsx(hz,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),o.jsx(hz,{value:i,onChange:s,label:h?"Tutor communication":"Student engagement"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),o.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),o.jsx("div",{className:"flex justify-between mt-1",children:o.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),o.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[o.jsx(oH,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},qTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=O.useState([]),[s,c]=O.useState(!1),[d,h]=O.useState(""),[p,m]=O.useState(!1),[y,x]=O.useState(null),[T,_]=O.useState(!1),w=pi();O.useEffect(()=>{let j;try{j=De.subscribeToTutoringSessions(r,i)}catch{}return()=>j==null?void 0:j()},[r]);const E=async()=>{if(!(!d.trim()||p)){m(!0);try{await De.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},I=async j=>{try{await De.claimTutorRole(j,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},C=async j=>{try{await De.startTutoringSession(j),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(j,$)=>{_(!0);try{const B=a.find(z=>z.id===j);if(!B)throw new Error("Session not found");const F=B.requesterId===t?"requester":"tutor";await De.submitTutoringFeedback(j,F,$),w.success("Feedback submitted! "+(F==="requester"?B.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":B.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),x(null)}catch{w.error("Failed to submit feedback")}_(!1)},P=async(j,$)=>{try{const B=await De.completeTutoring(j,$);w.success(`Verified! Tutor earned ${B.xpAwarded} XP and ${B.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},R=a.filter(j=>j.status==="OPEN"),N=a.filter(j=>["MATCHED","IN_PROGRESS"].includes(j.status)),A=a.filter(j=>j.status==="VERIFIED");return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Au,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),o.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Ii,{className:"w-3 h-3"})," Request Help"]})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&o.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[o.jsx("input",{value:d,onChange:j=>h(j.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:E,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),o.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),R.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(qoe,{className:"w-3 h-3"})," Open Requests"]}),R.map(j=>o.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-white font-medium",children:j.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",j.requesterName," - ",new Date(j.createdAt).toLocaleDateString()]})]}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${AT[j.status]}`,children:j.status})]}),j.requesterId!==t&&o.jsxs("button",{onClick:()=>I(j.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[o.jsx(Ts,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},j.id))]}),N.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(js,{className:"w-3 h-3"})," Active Sessions"]}),N.map(j=>{const $=j.requesterId===t||j.tutorId===t,B=j.requesterId===t,F=j.tutorId===t,z=B?j.requesterFeedback:j.tutorFeedback,K=B?j.tutorFeedback:j.requesterFeedback;return o.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[o.jsx("p",{className:"text-sm text-white font-medium",children:j.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[j.requesterName,"  ",j.tutorName||"Finding tutor..."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${AT[j.status]}`,children:j.status}),j.status==="MATCHED"&&$&&o.jsx("button",{onClick:()=>C(j.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),j.status==="IN_PROGRESS"&&$&&!z&&o.jsxs("button",{onClick:()=>x(j.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Cn,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),j.status==="IN_PROGRESS"&&$&&z&&!K&&o.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",B?"tutor":"student"]}),n&&j.tutorId&&j.status!=="VERIFIED"&&o.jsxs("button",{onClick:()=>P(j.id,j.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[o.jsx(Cn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),y===j.id&&j.status==="IN_PROGRESS"&&(F||B)&&o.jsx(FTe,{role:B?"requester":"tutor",onSubmit:Q=>L(j.id,Q),submitting:T})]},j.id)})]}),a.filter(j=>j.status==="COMPLETED").length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[o.jsx(js,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(j=>j.status==="COMPLETED").map(j=>o.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[o.jsx("p",{className:"text-sm text-white font-medium",children:j.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[j.requesterName,"  ",j.tutorName]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),j.requesterFeedback&&o.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),j.tutorFeedback&&o.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&j.tutorId&&o.jsxs("button",{onClick:()=>P(j.id,j.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Cn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},j.id))]}),A.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Cn,{className:"w-3 h-3 text-green-400"})," Completed (",A.length,")"]}),A.slice(0,3).map(j=>o.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[o.jsx("span",{className:"text-xs text-gray-400 truncate",children:j.topic}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${AT[j.status]}`,children:j.status})]},j.id))]}),a.length===0&&o.jsxs("div",{className:"text-center py-6 text-gray-600",children:[o.jsx(Au,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},HTe=({item:t,onClose:e})=>{const[r,n]=O.useState("chest"),a=oa(t.rarity);O.useEffect(()=>{Bn.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:o.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&o.jsxs("div",{className:"animate-in zoom-in duration-500",children:[o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[o.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),o.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),o.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),o.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),o.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[o.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),o.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&o.jsx("div",{className:"animate-in zoom-in duration-300",children:o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[o.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),o.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),o.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[o.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>o.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[o.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&o.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[o.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[o.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),o.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),o.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,c])=>o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsx("span",{className:"text-gray-400 capitalize",children:s}),o.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},s))}),t.affixes.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,c)=>o.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),t.setId&&o.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&o.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,c)=>o.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),o.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},GTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],WTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],KTe=({user:t,classType:e,onClose:r})=>{var R,N,A;const[n,a]=ae.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=i.level||1,c=Kh(s),d=fX(s),{equipped:h,appearance:p}=Yd(t,e),m=nE({gamification:{...i,equipped:h}}),y=Qh(h),x=((R=i.classXp)==null?void 0:R[e])||0,T=(N=t.settings)==null?void 0:N.privacyMode,_=T?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),E=hX(w),I=i.unlockedAchievements||[],C=O.useMemo(()=>gj.filter(j=>I.includes(j.id)),[I]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),P=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),o.jsxs("div",{className:"relative flex items-center gap-6",children:[o.jsx("div",{className:"w-32 h-44 shrink-0",children:o.jsx(zg,{equipped:h,appearance:p})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:_}),o.jsx("button",{onClick:P,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?o.jsx(ou,{className:"w-4 h-4 text-green-400"}):o.jsx(Ex,{className:"w-4 h-4"})})]}),o.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),o.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),o.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:x.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-purple-400",children:I.length}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&o.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:o.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Ao,{className:"w-3 h-3"})," Combat Stats"]}),o.jsx("div",{className:"space-y-2",children:GTe.map(({key:j,label:$,color:B,bg:F})=>{const z=m[j]||0,K=z/L*100;return o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-xs text-gray-400",children:$}),o.jsx("span",{className:`text-xs font-bold ${B}`,children:z})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:`h-1.5 rounded-full ${F} transition-all`,style:{width:`${K}%`}})})]},j)})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3"})," Equipment"]}),o.jsx("div",{className:"space-y-1.5",children:WTe.map(j=>{const $=h[j];if(!$)return o.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[o.jsx("span",{className:"font-mono w-12 text-[10px]",children:j}),o.jsx("span",{className:"italic",children:"Empty"})]},j);const B=oa($.rarity);return o.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${B.border} ${B.bg}`,children:[o.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:j}),o.jsx("span",{className:`text-xs font-bold truncate ${B.text}`,children:$.name})]},j)})})]}),E.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[o.jsx(A2,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),E.map(({set:j,activeBonus:$})=>o.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:j.name}),o.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",$.label]})]},j.id))]})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Jl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",I.length,")"]}),C.length>0?o.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.slice(0,12).map(j=>o.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[o.jsx("div",{className:"text-xl",children:j.icon}),o.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:j.title})]},j.id))}):o.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(S2,{className:"w-3.5 h-3.5 text-orange-400"}),o.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),o.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(D7,{className:"w-3.5 h-3.5 text-red-400"}),o.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),o.jsx("span",{className:"text-red-400 font-bold",children:((A=i.completedQuests)==null?void 0:A.length)||0})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(Au,{className:"w-3.5 h-3.5 text-green-400"}),o.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),o.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(Ba,{className:"w-3.5 h-3.5 text-cyan-400"}),o.jsx("span",{className:"text-gray-400",children:"Total XP:"}),o.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})};function QTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=Bg(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const XTe={Textbook:o.jsx(_o,{className:"w-5 h-5"}),Simulation:o.jsx(nH,{className:"w-5 h-5 fill-current"}),"Lab Guide":o.jsx(_2,{className:"w-5 h-5"}),"Practice Set":o.jsx(Ao,{className:"w-5 h-5"}),Article:o.jsx(tH,{className:"w-5 h-5"}),"Video Lesson":o.jsx(lH,{className:"w-5 h-5"}),Supplemental:o.jsx(P7,{className:"w-5 h-5"})};let sh=0,NT=!1,ET=!1,fz="";const YTe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:s="RESOURCES"})=>{var Fa,Os,is,gi,St,ue,Ke,ot,Kt,hr,dn,qr,hn,Cr,Is,ss,ao,io,qa,q,ge,Ae,Ce,ut,Dt,qt,tr,Qt,$t,ri,or;const c=pi(),{confirm:d}=al(),[h,p]=O.useState(new Set),[m,y]=O.useState(t.classType||((Fa=t.enrolledClasses)==null?void 0:Fa[0])||"Unassigned"),[x,T]=O.useState(null),[_,w]=O.useState([]),[E,I]=O.useState({}),[C,L]=O.useState(!1),[P,R]=O.useState(null);fz!==t.id&&(fz=t.id,sh=((Os=t.gamification)==null?void 0:Os.lastLevelSeen)||1,NT=!1,ET=!1),sh===0&&(sh=((is=t.gamification)==null?void 0:is.lastLevelSeen)||1);const N=s,[A,j]=O.useState(!1),[$,B]=O.useState(null),[F,z]=O.useState(!1),[K,Q]=O.useState(null),[G,X]=O.useState(null),[ne,de]=O.useState(null),[me,H]=O.useState(null),[ee,te]=O.useState(null),[Oe,re]=O.useState(null),[ce,he]=O.useState(!1),[Ie,Se]=O.useState(null),[We,Me]=O.useState(!1);O.useEffect(()=>{var He,Je,nt;const oe=((He=t.gamification)==null?void 0:He.level)||1,ve=Math.max(((Je=t.gamification)==null?void 0:Je.lastLevelSeen)||1,sh);if(oe>ve){sh=oe;const br=((nt=t.gamification)==null?void 0:nt.inventory)||[],cr=br.length>0?br[br.length-1]:null;R(cr),L(!0),Bn.levelUp()}},[(gi=t.gamification)==null?void 0:gi.level,(St=t.gamification)==null?void 0:St.lastLevelSeen,(ue=t.gamification)==null?void 0:ue.inventory]),O.useEffect(()=>{const oe=[];try{oe.push(De.subscribeToXPEvents(ve=>{const He=ve.find(Je=>{var nt;return Je.isActive&&(Je.type==="GLOBAL"||Je.targetClass===m)&&(!((nt=Je.targetSections)!=null&&nt.length)||Je.targetSections.includes(t.section||""))});T(He||null)}))}catch{}try{oe.push(De.subscribeToQuests(ve=>{const He=t.enrolledClasses||(t.classType?[t.classType]:[]);w(ve.filter(Je=>{var br;if(!Je.isActive)return!1;const nt=new Date;return!(Je.startsAt&&new Date(Je.startsAt)>nt||Je.expiresAt&&new Date(Je.expiresAt)<nt||Je.targetClass&&!He.includes(Je.targetClass)||(br=Je.targetSections)!=null&&br.length&&!Je.targetSections.includes(t.section||""))}))}))}catch{}try{oe.push(De.subscribeToStudentPracticeProgress(t.id,I))}catch{}return()=>oe.forEach(ve=>ve())},[m]);const _e=((ot=(Ke=t.gamification)==null?void 0:Ke.classXp)==null?void 0:ot[m])||0,gt=ae.useRef(_e),et=ae.useRef(m);O.useEffect(()=>{if(et.current!==m){et.current=m,gt.current=_e;return}if(_e>gt.current&&gt.current>=0){const oe=_e-gt.current;if(oe>0&&oe<500){re(oe),Bn.xpGain();const ve=setTimeout(()=>re(null),2e3);return()=>clearTimeout(ve)}}gt.current=_e},[_e]),O.useEffect(()=>{var He;if(NT)return;NT=!0;const oe=new Date().toISOString().split("T")[0];((He=t.gamification)==null?void 0:He.lastLoginRewardDate)!==oe&&!We&&De.claimDailyLogin().then(Je=>{Je.alreadyClaimed||(Me(!0),Bn.dailyReward(),c.success(`Daily login: +${Je.xpReward} XP, +${Je.fluxReward} Flux (${Je.streak}-day streak!)`))}).catch(()=>{})},[]),O.useEffect(()=>{ET||(ET=!0,De.updateEngagementStreak().catch(()=>{}))},[]);const[pt,st]=O.useState([]);O.useEffect(()=>{let oe;try{oe=De.subscribeToAnnouncements(st)}catch{}return()=>oe==null?void 0:oe()},[]);const xe=O.useMemo(()=>{var ve;const oe=((ve=t.gamification)==null?void 0:ve.dismissedAnnouncements)||[];return pt.filter(He=>{var Je;return!oe.includes(He.id)&&(He.classType==="GLOBAL"||He.classType===m)&&(!((Je=He.targetSections)!=null&&Je.length)||He.targetSections.includes(t.section||""))})},[pt,(Kt=t.gamification)==null?void 0:Kt.dismissedAnnouncements,m,t.section]),be=async oe=>{await De.dismissAnnouncement(t.id,oe)},Be=()=>{var ve;const oe=((ve=t.gamification)==null?void 0:ve.level)||1;sh=oe,L(!1),R(null),De.updateUserLastLevelSeen(t.id,oe).catch(()=>{})},Ye=async oe=>{try{await De.updateUserAppearance(t.id,oe,m),c.success("Profile updated!"),j(!1),Q(null),X(null),de(null),H(null),te(null)}catch{c.error("Failed to save  try again")}},ht=t.enrolledClasses||(t.classType?[t.classType]:[]),Ze=O.useMemo(()=>Yd(t,m),[t,m]),yt=Ze.equipped,Rt=Ze.inventory,Bt=O.useMemo(()=>{const oe={tech:10,focus:10,analysis:10,charisma:10};return Object.values(yt).filter(Boolean).forEach(He=>{He.stats&&Object.entries(He.stats).forEach(([Je,nt])=>{oe[Je]+=nt})}),oe},[yt]),Tt=O.useMemo(()=>Qh(yt),[yt]),bt=O.useMemo(()=>{const oe=t.gamification||{},He={...oe.achievementProgress||{}},Je=oe.xp||0,nt=oe.level||1,br=oe.inventory||[],cr=oe.completedQuests||[],ma=oe.engagementStreak||0,ka=oe.loginStreak||0,Rs=oe.tutoringSessionsCompleted||0,ga=oe.bossesDefeated||0,ya=oe.challengesCompleted||0,Xn=oe.itemsCrafted||0,Or=(Co,Ms)=>{(!He[Co]||Ms>He[Co])&&(He[Co]=Ms)};return Or("first_steps",Je),Or("xp_5k",Je),Or("xp_25k",Je),Or("rising_star",nt),Or("veteran",nt),Or("elite",nt),Or("legend",nt),Or("collector_10",br.length),Or("collector_50",br.length),Or("gear_score_100",Tt),Or("gear_score_500",Tt),Or("first_mission",cr.length),Or("mission_5",cr.length),Or("mission_20",cr.length),Or("boss_slayer",ga),Or("streak_3",ma),Or("streak_8",ma),Or("streak_16",ma),Or("login_7",ka),Or("login_30",ka),Or("challenges_10",ya),Or("tutor_1",Rs),Or("tutor_10",Rs),Or("tech_50",Bt.tech),Or("focus_50",Bt.focus),Or("analysis_50",Bt.analysis),Or("charisma_50",Bt.charisma),Or("craft_10",Xn),He},[t,Tt,Bt]),Zt=[{subject:"Tech",A:Bt.tech,fullMark:100},{subject:"Focus",A:Bt.focus,fullMark:100},{subject:"Analysis",A:Bt.analysis,fullMark:100},{subject:"Charisma",A:Bt.charisma,fullMark:100}],tn=O.useMemo(()=>{const oe={};return e.filter(ve=>{var He;return ve.classType===m&&ve.status!=="DRAFT"&&(!((He=ve.targetSections)!=null&&He.length)||ve.targetSections.includes(t.section||""))}).forEach(ve=>{var nt;const He=r.find(br=>br.assignmentId===ve.id),Je=ve.unit||"General Resources";oe[Je]||(oe[Je]=[]),oe[Je].push({...ve,lastEngagement:He&&He.submittedAt||null,engagementTime:((nt=He==null?void 0:He.metrics)==null?void 0:nt.engagementTime)||0})}),oe},[e,r,m]),rn=oe=>{const ve=new Set(h);ve.has(oe)?ve.delete(oe):ve.add(oe),p(ve)},ln=((hr=t.gamification)==null?void 0:hr.level)||1,ye=((dn=t.gamification)==null?void 0:dn.currency)||0,it=_e,At=it%1e3/1e3*100,jt=lz(it),Pt=lz(ye),ct=Kh(ln),gr=async oe=>{const ve=oe.target.value;y(ve),await De.switchUserView(t.id,ve)},wn=async oe=>{if(!F){z(!0);try{await De.equipItem(t.id,oe,m),B(null),Bn.equip(),c.success(`${oe.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{z(!1)}}},Rn=async oe=>{z(!0);try{await De.unequipItem(t.id,oe,m),B(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{z(!1)}},kr=async()=>{if(!$)return;if(Object.values(yt).some(He=>He&&He.id===$.id)){c.error("Unequip this item before salvaging.");return}const ve=GR($);if(await d({message:`Salvage ${$.name} for ${ve} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){z(!0);try{await De.disenchantItem(t.id,$,m),B(null),Bn.salvage(),c.success(`Salvaged for ${ve} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{z(!1)}}},dr=async oe=>{if(!$)return;const ve=Wi[oe];if(ye<ve)return c.error("Insufficient Cyber-Flux.");z(!0);try{await De.craftItem(t.id,$,oe,m),B(null),Bn.craft(),c.success(`${oe.charAt(0)+oe.slice(1).toLowerCase()} complete.`)}catch(He){const Je=(He==null?void 0:He.message)||(He==null?void 0:He.code)||"Unknown error";c.error(`Fabrication failed: ${Je}`)}finally{z(!1)}},Nt=((qr=t.gamification)==null?void 0:qr.gemsInventory)||[],wt=async()=>{if(!(!$||F)){if(ye<Wi.SOCKET)return c.error("Insufficient Cyber-Flux.");if(($.sockets||0)>=3)return c.error("Maximum sockets reached.");z(!0);try{const oe=await De.addSocket($.id,m);B(oe.item),Bn.craft(),c.success("Socket added!")}catch(oe){c.error((oe==null?void 0:oe.message)||"Failed to add socket.")}finally{z(!1)}}},sr=async oe=>{if(!(!$||F)){if(ye<Wi.ENCHANT)return c.error("Insufficient Cyber-Flux.");z(!0);try{const ve=await De.socketGem($.id,oe,m);B(ve.item),Bn.craft(),ve.runewordActivated?(Bn.levelUp(),c.success(`RUNEWORD ACTIVATED: ${ve.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(ve){c.error((ve==null?void 0:ve.message)||"Failed to socket gem.")}finally{z(!1)}}},Qr=async oe=>{var Je;if(!$||F)return;const ve=(Je=$.gems)==null?void 0:Je[oe];if(!ve)return;const He=HR($.rarity,ve.tier,$.unsocketCount||0);if(ye<He)return c.error(`Insufficient Cyber-Flux. Need ${He}.`);z(!0);try{const nt=await De.unsocketGem($.id,oe,m);B(nt.item),Bn.craft(),c.success(`Gem removed! -${nt.cost} Flux`)}catch(nt){c.error((nt==null?void 0:nt.message)||"Failed to unsocket gem.")}finally{z(!1)}},Mr=((hn=t.gamification)==null?void 0:hn.activeQuests)||[],Xr=((Cr=t.gamification)==null?void 0:Cr.completedQuests)||[],Mn=_.filter(oe=>Mr.some(ve=>ve.questId===oe.id)),Jt=_.filter(oe=>!Mr.some(ve=>ve.questId===oe.id)&&!Xr.includes(oe.id)),pa=async oe=>{try{await De.acceptQuest(t.id,oe.id),Bn.questAccept(),c.success(`Contract accepted: ${oe.title}`)}catch{c.error("Failed to accept contract.")}},cn=async oe=>{const ve=oe.type==="CUSTOM";if(await d({message:ve?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:ve?"Submit":"Deploy",variant:"info"}))try{await De.deployMission(t.id,oe),Bn.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},En=["HEAD","HANDS","RING1","AMULET"],ti=["CHEST","BELT","FEET","RING2"],[wr,un]=O.useState(null),Va=e_e(QU(fj,{activationConstraint:{distance:8}}),QU(rX,{activationConstraint:{delay:150,tolerance:5}})),Qn=oe=>oe==="RING1"||oe==="RING2"?["RING"]:[oe],Fr=oe=>{const{active:ve}=oe,He=Rt.find(Je=>Je.id===ve.id)||Object.values(yt).find(Je=>Je&&Je.id===ve.id);un(He||null)},Sn=oe=>{const{active:ve,over:He}=oe;if(un(null),!He)return;const Je=ve.id,nt=He.id;if(nt.startsWith("slot-")){const br=nt.replace("slot-",""),cr=Rt.find(ka=>ka.id===Je);if(!cr||!Qn(br).includes(cr.slot))return;wn(cr)}if(Je.startsWith("equipped-")&&(nt==="inventory-zone"||nt.startsWith("storage-cell-"))){const br=Je.replace("equipped-","");Rn(br)}},Yr=(oe,ve,He="w-5 h-5")=>{const Je=`${He} ${ve}`,nt={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(oe){case"HEAD":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),o.jsx("path",{d:"M5 11v2h14v-2"}),o.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),o.jsx("path",{d:"M6 4h12"}),o.jsx("path",{d:"M12 4v5"}),o.jsx("path",{d:"M9 9h6"})]});case"HANDS":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),o.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),o.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),o.jsx("path",{d:"M4 19h16"}),o.jsx("path",{d:"M11 3v4"})]});case"BELT":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),o.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),o.jsx("path",{d:"M12 7v3"}),o.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return o.jsxs("svg",{className:Je,...nt,children:[o.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),o.jsx("path",{d:"M12 9V6"}),o.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return o.jsx(Ax,{className:Je})}},mi=({slot:oe})=>{const ve=yt[oe],He=ve?oa(ve.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Je,isOver:nt}=mj({id:`slot-${oe}`}),{attributes:br,listeners:cr,setNodeRef:ma,isDragging:ka}=lX({id:ve?`equipped-${oe}`:`empty-slot-${oe}`,disabled:!ve}),Rs=wr&&Qn(oe).includes(wr.slot),ga=nt&&Rs?"ring-2 ring-purple-500 scale-110":wr&&Rs?"ring-1 ring-purple-500/40 animate-pulse":"";return o.jsx("div",{ref:Je,className:"relative",children:o.jsx("div",{ref:ma,...br,...cr,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${ka?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${He.border} ${He.bg} ${He.shimmer} ${He.glow} ${ga}`,onClick:()=>!ka&&ve&&B(ve),children:ve?o.jsxs(o.Fragment,{children:[Yr(oe.replace(/\d/,""),He.text),o.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${He.text}`,children:ve.baseName||ve.name.split(" ").slice(-1)[0]}),!ka&&o.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:`text-[10px] font-bold ${He.text}`,children:ve.name}),o.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ve.rarity," ",oe]}),o.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ve.stats).map(([ya,Xn])=>`+${Xn} ${ya.slice(0,3).toUpperCase()}`).join("  ")}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):o.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:oe.slice(0,4)})})})};return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[xe.length>0&&o.jsx("div",{className:"lg:col-span-12 space-y-2",children:xe.map(oe=>{const ve={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return o.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${ve[oe.priority]}`,children:[o.jsx(kx,{className:"w-5 h-5 shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-bold text-sm text-white",children:oe.title}),o.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:oe.content})]}),o.jsx("button",{onClick:()=>be(oe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:o.jsx(Pa,{className:"w-4 h-4"})})]},oe.id)})}),x&&o.jsx("div",{className:"lg:col-span-12",children:o.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:o.jsx(Ba,{className:"w-5 h-5 fill-current"})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[x.title," ACTIVE"]}),o.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",x.multiplier,"x XP on all tasks."]})]})]}),o.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[x.multiplier,"x"]})]})}),o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${ct.tierColor.split(" ")[0]} border-opacity-30`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[o.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${ct.tierGlow} shadow-xl`,children:o.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${ct.tierColor.split(" ")[0]}`})}),o.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Is=t.gamification)==null?void 0:Is.codename)||t.name}),o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${ct.tierColor.split(" ")[1]}`,children:[ct.rankName," (Lvl ",ln,")"]}),o.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",Tt]})]}),ht.length>1&&o.jsxs("div",{className:"mt-4 relative w-full",children:[o.jsx("select",{value:m,onChange:gr,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:ht.map(oe=>o.jsx("option",{value:oe,children:oe},oe))}),o.jsx(Di,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),o.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${At}%`}})}),o.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[o.jsxs("span",{children:[jt.toLocaleString()," XP (",m,")"]}),o.jsx("span",{children:"Next Rank"}),Oe&&o.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",Oe," XP"]})]})]})]}),o.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:o.jsx(G5,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),o.jsx("div",{className:"text-xl font-black text-white leading-none",children:Pt})]})]})}),(((ss=t.gamification)==null?void 0:ss.engagementStreak)||0)>0&&(()=>{var He;const oe=((He=t.gamification)==null?void 0:He.engagementStreak)||0,ve=_Te(oe);return o.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:o.jsx(S2,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),o.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[oe,"w"]})]}),ve>1&&o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),o.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((ve-1)*100),"%"]})]})]})})})(),(((ao=t.gamification)==null?void 0:ao.loginStreak)||0)>1&&o.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[o.jsx(ole,{className:"w-5 h-5 text-purple-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),o.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((io=t.gamification)==null?void 0:io.loginStreak)||0," day streak"]})]})]}),o.jsxs("button",{onClick:()=>he(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[o.jsx(Hh,{className:"w-4 h-4"})," View Profile"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&o.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:o.jsx(_2,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),o.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),o.jsx(Pd,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&o.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:o.jsx(Zoe,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),o.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),o.jsx(Pd,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),o.jsx("div",{className:"lg:col-span-9 space-y-6",children:o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[N==="MISSIONS"&&o.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Jt.length===0&&o.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),Jt.map(oe=>o.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:oe.title}),o.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:oe.type.replace("_"," ")})]}),o.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:oe.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[oe.statRequirements&&o.jsx("div",{className:"flex gap-2",children:Object.entries(oe.statRequirements).map(([ve,He])=>o.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[He," ",ve]},ve))}),oe.expiresAt&&o.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[o.jsx(ks,{className:"w-3 h-3"})," Expires: ",new Date(oe.expiresAt).toLocaleDateString()]})]}),o.jsxs("button",{onClick:()=>pa(oe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[o.jsx(Dd,{className:"w-4 h-4"})," Accept Contract"]})]},oe.id))]}),o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Mn.length===0&&o.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),Mn.map(oe=>{var nt,br;const ve=((nt=Mr.find(cr=>cr.questId===oe.id))==null?void 0:nt.status)||"ACCEPTED",He=(br=Mr.find(cr=>cr.questId===oe.id))==null?void 0:br.deploymentRoll,Je=oe.type==="CUSTOM";return o.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:o.jsx(Ao,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:oe.title}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[oe.type," MISSION"]})]})]}),o.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${ve==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":ve==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":ve==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:ve})]}),ve==="ACCEPTED"?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:oe.description}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>cn(oe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[o.jsx(aH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Je?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),oe.isGroupQuest&&o.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:o.jsx(Ts,{className:"w-5 h-5"})})]})]}):ve==="DEPLOYED"?o.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),o.jsx(Ba,{className:"w-6 h-6 text-purple-400"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),o.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Je?"AWAITING_HQ_SIG_VERIFICATION":He===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),o.jsx("div",{className:"h-10 w-px bg-white/5"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),o.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),o.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),o.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Je?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},oe.id)})]})]},"missions"),N==="RESOURCES"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(tn).length===0?o.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):o.jsx("div",{className:"space-y-4",children:Object.entries(tn).sort().map(([oe,ve])=>o.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[o.jsxs("button",{onClick:()=>rn(oe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[h.has(oe)?o.jsx(Di,{className:"w-4 h-4 text-purple-400"}):o.jsx(Pd,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:oe})]}),o.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[ve.length," Files"]})]}),h.has(oe)&&o.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:ve.map(He=>{const Je=!!He.dueDate,nt=He.dueDate?new Date(He.dueDate):null,br=new Date,cr=nt?Math.ceil((nt.getTime()-br.getTime())/864e5):1/0,ma=cr<=0?"text-red-400":cr<=2?"text-yellow-400":"text-gray-500",ka=Math.floor(He.engagementTime/60),Rs=ka>=5,ga=E[He.id],ya=ga==null?void 0:ga.completed;return o.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${ya?"border-green-500/20":"border-white/5"}`,onClick:()=>i&&i(He.id),children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${ya||Rs?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":He.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:ya?o.jsx(Cn,{className:"w-6 h-6"}):Rs?o.jsx(Cn,{className:"w-6 h-6"}):He.lastEngagement?o.jsx(Cn,{className:"w-5 h-5 opacity-60"}):XTe[He.category||"Supplemental"]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:He.category}),o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:He.title}),ya&&o.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[o.jsx(Cn,{className:"w-2.5 h-2.5"}),"COMPLETED",((ga==null?void 0:ga.totalCompletions)||0)>1?` (${ga.totalCompletions}x)`:""]})]}),o.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:o.jsx("p",{className:"text-xs text-gray-500 truncate",children:He.description})}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[He.lastEngagement&&o.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ka,"m engaged"]}),ya&&(ga==null?void 0:ga.bestScore)!=null&&ga.bestScore>0&&o.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",ga.bestScore,"%"]}),Je&&o.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${ma}`,children:[o.jsx(js,{className:"w-3 h-3"}),cr<=0?"Overdue":cr===1?"Due tomorrow":`Due in ${cr}d`]})]})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:o.jsx(nH,{className:"w-4 h-4 text-purple-400 fill-current"})})]},He.id)})})]},oe))})},"resources"),N==="LOADOUT"&&o.jsxs(J_e,{sensors:Va,collisionDetection:s_e,modifiers:[QTe],onDragStart:Fr,onDragEnd:Sn,children:[o.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[o.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),o.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((qa=Ze.appearance)==null?void 0:qa.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),o.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[o.jsx("div",{className:"flex flex-col gap-4",children:En.map(oe=>o.jsx(mi,{slot:oe},oe))}),o.jsx("div",{className:"w-40 h-full relative",children:o.jsx(zg,{equipped:yt,appearance:Ze.appearance,evolutionLevel:ln})}),o.jsx("div",{className:"flex flex-col gap-4",children:ti.map(oe=>o.jsx(mi,{slot:oe},oe))})]}),o.jsxs("button",{onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),j(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[o.jsx(fle,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),o.jsx("div",{className:"h-[200px]",children:o.jsx(yW,{width:"100%",height:"100%",children:o.jsxs($Se,{cx:"50%",cy:"50%",outerRadius:"70%",data:Zt,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),o.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),o.jsx(zK,{stroke:"rgba(255,255,255,0.08)"}),o.jsx(w1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),o.jsx(b1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),o.jsx(S1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const oe=fG(Bt);return o.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),o.jsx("span",{className:"text-gray-500",children:"Tech"}),o.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:Bt.tech}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),o.jsx("br",{}),"Increases damage dealt to bosses."]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),o.jsx("span",{className:"text-gray-500",children:"Focus"}),o.jsx("span",{className:"text-green-400 font-bold ml-auto",children:Bt.focus}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),o.jsx("br",{}),"Crit chance: ",(oe.critChance*100).toFixed(0),"%  Crit damage: ",oe.critMultiplier.toFixed(2),"x"]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),o.jsx("span",{className:"text-gray-500",children:"Analysis"}),o.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:Bt.analysis}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),o.jsx("br",{}),"Reduces boss damage by ",oe.armorPercent.toFixed(0),"%."]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),o.jsx("span",{className:"text-gray-500",children:"Charisma"}),o.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:Bt.charisma}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),o.jsx("br",{}),"Max HP: ",oe.maxHp]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"HP"}),o.jsx("span",{className:"text-emerald-400 font-bold",children:oe.maxHp})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"Armor"}),o.jsxs("span",{className:"text-yellow-400 font-bold",children:[oe.armorPercent.toFixed(0),"%"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"Crit"}),o.jsxs("span",{className:"text-green-400 font-bold",children:[(oe.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),o.jsx(ZTe,{inventory:Rt,equipped:yt,draggedItem:wr,onInspect:B,getSlotIcon:Yr})]},"loadout"),o.jsx(yTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:wr&&(()=>{const oe=oa(wr.rarity);return o.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:o.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${oe.bg} ${oe.border} ${oe.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Yr(wr.slot,oe.text,"w-7 h-7"),o.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${oe.text} drop-shadow-lg`,children:wr.baseName||wr.name.split(" ").slice(-1)[0]})]})})})()})]}),N==="ACHIEVEMENTS"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(ATe,{unlockedAchievements:((q=t.gamification)==null?void 0:q.unlockedAchievements)||[],achievementProgress:bt})},"achievements"),N==="SKILLS"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(ETe,{specialization:(ge=t.gamification)==null?void 0:ge.specialization,skillPoints:((Ae=t.gamification)==null?void 0:Ae.skillPoints)||0,unlockedSkills:((Ce=t.gamification)==null?void 0:Ce.unlockedSkills)||[]})},"skills"),N==="FORTUNE"&&o.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(jTe,{currency:ye,lastSpin:(ut=t.gamification)==null?void 0:ut.lastWheelSpin,classType:m})},"fortune"),N==="TUTORING"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(qTe,{userId:t.id,userName:t.name,classType:m})},"tutoring")]})}),o.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:o.jsx(VTe,{userId:t.id,activeChallenges:((Dt=t.gamification)==null?void 0:Dt.activeDailyChallenges)||[],classType:m})}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[o.jsx(ITe,{userId:t.id,userName:t.name,classType:m}),o.jsx(zTe,{userId:t.id,classType:m,userSection:t.section,playerStats:Bt,playerAppearance:Ze.appearance,playerEquipped:yt,playerEvolutionLevel:ln})]})]}),o.jsx(Ti,{isOpen:A,onClose:()=>{j(!1),Q(null),X(null),de(null),H(null),te(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:o.jsx(zg,{equipped:yt,appearance:{...Ze.appearance,hue:K??((qt=Ze.appearance)==null?void 0:qt.hue)??0,bodyType:G??((tr=Ze.appearance)==null?void 0:tr.bodyType)??"A",skinTone:ne??((Qt=Ze.appearance)==null?void 0:Qt.skinTone)??0,hairStyle:me??(($t=Ze.appearance)==null?void 0:$t.hairStyle)??1,hairColor:ee??((ri=Ze.appearance)==null?void 0:ri.hairColor)??0}})})}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),o.jsx("div",{className:"flex justify-center gap-2",children:cX.map((oe,ve)=>{var Je;const He=(ne??((Je=Ze.appearance)==null?void 0:Je.skinTone)??0)===ve;return o.jsx("button",{onClick:()=>de(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${He?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},ve)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:vTe.map((oe,ve)=>{var Je;const He=(me??((Je=Ze.appearance)==null?void 0:Je.hairStyle)??1)===ve;return o.jsx("button",{onClick:()=>H(ve),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${He?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:oe},ve)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),o.jsx("div",{className:"flex justify-center gap-2",children:uX.map((oe,ve)=>{var Je;const He=(ee??((Je=Ze.appearance)==null?void 0:Je.hairColor)??0)===ve;return o.jsx("button",{onClick:()=>te(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${He?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},ve)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),o.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(oe=>{var He;const ve=(G??((He=Ze.appearance)==null?void 0:He.bodyType)??"A")===oe;return o.jsx("button",{onClick:()=>X(oe),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${ve?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:oe==="A"?"Alpha":oe==="B"?"Beta":"Femme"},oe)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),o.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(oe=>{var He;const ve=(K??((He=Ze.appearance)==null?void 0:He.hue)??0)===oe;return o.jsx("button",{onClick:()=>Q(oe),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${ve?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${oe}, 60%, 45%)`}},oe)})})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{j(!1),Q(null),X(null),de(null),H(null),te(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),o.jsx("button",{onClick:()=>{var oe,ve,He,Je,nt;return Ye({hue:K??((oe=Ze.appearance)==null?void 0:oe.hue)??0,bodyType:G??((ve=Ze.appearance)==null?void 0:ve.bodyType)??"A",skinTone:ne??((He=Ze.appearance)==null?void 0:He.skinTone)??0,hairStyle:me??((Je=Ze.appearance)==null?void 0:Je.hairStyle)??1,hairColor:ee??((nt=Ze.appearance)==null?void 0:nt.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),o.jsx(Ti,{isOpen:!!$,onClose:()=>B(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:$&&o.jsxs("div",{className:"space-y-6 text-gray-100",children:[o.jsxs("div",{className:`p-5 rounded-xl border ${$.runewordActive?"border-amber-500/40 runeword-active":oa($.rarity).border} ${oa($.rarity).bg} ${oa($.rarity).shimmer} relative overflow-hidden`,children:[o.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[o.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${$.runewordActive?"border-amber-500/50":oa($.rarity).border} ${oa($.rarity).bg}`,style:{boxShadow:$.runewordActive?"0 0 20px rgba(245,158,11,0.3)":$.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":$.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Yr($.slot,$.runewordActive?"text-amber-400":oa($.rarity).text,"w-7 h-7")}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`text-lg font-bold ${$.runewordActive?"text-amber-300":oa($.rarity).text}`,children:$.name}),o.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[$.rarity," ",$.slot]}),$.runewordActive&&o.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(or=WR($))==null?void 0:or.name})]})]}),o.jsx("div",{className:"mt-4 space-y-1",children:Object.entries($.stats).map(([oe,ve])=>o.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[o.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:oe}),o.jsxs("span",{className:"font-mono font-bold",children:["+",ve]})]},oe))}),o.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:$.affixes.map((oe,ve)=>o.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[oe.name," (T",oe.tier,")"]},ve))})]}),($.sockets||0)>0&&(()=>{const oe=$.sockets||0,ve=$.gems||[],He=oe-ve.length,Je=WR($);return o.jsxs("div",{className:`p-4 rounded-xl border ${Je?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Je&&o.jsxs("div",{className:"mb-3 text-center",children:[o.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),o.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Je.name}),o.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Je.lore}),o.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Je.bonusStats).map(([nt,br])=>o.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",br," ",nt.slice(0,3).toUpperCase()]},nt))}),Je.bonusEffects&&Je.bonusEffects.length>0&&o.jsx("div",{className:"mt-1",children:Je.bonusEffects.map(nt=>o.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:nt.description},nt.id))})]}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[o.jsx(G5,{className:"w-3 h-3"})," Gem Sockets (",ve.length,"/",oe,")"]}),o.jsxs("div",{className:"flex gap-2",children:[ve.map((nt,br)=>{const cr=HR($.rarity,nt.tier,$.unsocketCount||0);return o.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:nt.color,backgroundColor:`${nt.color}20`,boxShadow:`0 0 8px ${nt.color}40`},children:o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:nt.color}})}),o.jsx("span",{className:"text-[9px] text-gray-400",children:nt.name}),o.jsxs("button",{onClick:()=>Qr(br),disabled:F||ye<cr,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${cr} Flux`,children:["Remove (",cr," F)"]})]},br)}),Array.from({length:He}).map((nt,br)=>o.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${br}`))]}),He>0&&Nt.length>0&&o.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[o.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Wi.ENCHANT," Flux)"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Nt.map(nt=>o.jsxs("button",{onClick:()=>sr(nt.id),disabled:F||ye<Wi.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:nt.color}}),o.jsx("span",{className:"text-gray-300",children:nt.name}),o.jsxs("span",{className:"text-gray-600 font-mono",children:["+",nt.value]})]},nt.id))}),ve.length>0&&!Je&&(()=>{const nt=ve.map(cr=>cr.name),br=hG.filter(cr=>cr.requiredSockets===oe&&cr.pattern.slice(0,nt.length).every((ma,ka)=>ma===nt[ka]));return br.length===0?null:o.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:br.map(cr=>o.jsxs("div",{children:["Possible: ",o.jsx("span",{className:"font-bold text-amber-400/80",children:cr.name}),"  needs [",cr.pattern.join("  "),"]"]},cr.id))})})()]})]})})(),($.sockets||0)<3&&o.jsxs("button",{onClick:wt,disabled:F||ye<Wi.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[o.jsx(G5,{className:"w-4 h-4"}),"Add Socket (",Wi.SOCKET," Flux)  ",$.sockets||0,"/3"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const oe=$.slot==="RING"?"RING1":$.slot,ve=yt[oe]||($.slot==="RING"?yt.RING2:null);if(!ve||ve.id===$.id)return null;const He=oa(ve.rarity),Je=new Set([...Object.keys($.stats),...Object.keys(ve.stats)]);return o.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:`text-xs font-bold ${He.text}`,children:ve.name}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:ve.rarity})]}),o.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Je).map(nt=>{const br=$.stats[nt]||0,cr=ve.stats[nt]||0,ma=br-cr;return ma===0?o.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[nt.slice(0,3).toUpperCase(),": 0"]},nt):o.jsxs("span",{className:`text-[10px] font-mono font-bold ${ma>0?"text-green-400":"text-red-400"}`,children:[nt.slice(0,3).toUpperCase(),": ",ma>0?"":"",Math.abs(ma)]},nt)})})]})})(),(()=>{var ve;const oe=(ve=Object.entries(yt).find(([,He])=>He&&He.id===$.id))==null?void 0:ve[0];return oe?o.jsx("button",{onClick:()=>Rn(oe),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:F,children:"Unequip Gear"}):o.jsx("button",{onClick:()=>wn($),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:F,children:"Equip Gear"})})(),o.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),o.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),o.jsxs("button",{onClick:()=>dr("RECALIBRATE"),disabled:F||ye<Wi.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Wi.RECALIBRATE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),o.jsxs("button",{onClick:()=>dr("REFORGE"),disabled:F||ye<Wi.REFORGE||$.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Wi.REFORGE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),o.jsxs("button",{onClick:()=>dr("OPTIMIZE"),disabled:F||ye<Wi.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Wi.OPTIMIZE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),o.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),o.jsxs("button",{onClick:kr,disabled:F,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[o.jsx(la,{className:"w-4 h-4"}),"Salvage for ",GR($)," Flux"]})]})]})}),ce&&o.jsx(KTe,{user:t,classType:m,onClose:()=>he(!1)}),Ie&&o.jsx(HTe,{item:Ie,onClose:()=>Se(null)}),o.jsx(Ti,{isOpen:C,onClose:Be,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:o.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((oe,ve)=>o.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][ve%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},ve))}),o.jsxs("div",{className:"relative inline-block mb-6",children:[o.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),o.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),o.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:o.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:ln})})]}),o.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:o.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:ct.rankName})}),o.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),P&&o.jsxs("div",{className:`${oa(P.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${oa(P.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),o.jsx("div",{className:`text-xl font-bold ${oa(P.rarity).text}`,children:P.name}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[P.rarity," ",P.slot]}),o.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(P.stats).map(([oe,ve])=>o.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",ve," ",oe.toUpperCase()]},oe))})]})]}),o.jsx("button",{onClick:Be,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},ZTe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:s}=mj({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return o.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":s?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[o.jsxs("span",{children:["Gear Storage (",t.length,")"]}),o.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[o.jsx(Foe,{className:"w-3 h-3"})," Drag to equip"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>o.jsx(eAe,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>o.jsx(JTe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},JTe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=mj({id:`storage-cell-${t}`});return o.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},eAe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:s,isDragging:c}=lX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=oa(t.rarity);return o.jsxs("div",{ref:s,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&o.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&o.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),o.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),o.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var _4=typeof self<"u"?self:global;const Vg=typeof navigator<"u",tAe=Vg&&typeof HTMLImageElement>"u",Hb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),T4=_4.Buffer,Ov=_4.BigInt,A4=!!T4,rAe=t=>t;function Gb(t,e=rAe){if(Hb)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let yj=_4.fetch;const nAe=t=>yj=t;if(!_4.fetch){const t=Gb("http",(n=>n)),e=Gb("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,s)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(y.port=Number(c));const x=(p==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let _=new URL(T.headers.location,n).toString();return r(_,{headers:a}).then(i).catch(s)}i({status:T.statusCode,arrayBuffer:()=>new Promise((_=>{let w=[];T.on("data",(E=>w.push(E))),T.on("end",(()=>_(Buffer.concat(w))))}))})}));x.on("error",s),x.end()}));nAe(r)}function Yt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Wb=t=>pX(t)?void 0:t,aAe=t=>t!==void 0;function pX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(aAe).length===0)}function Ea(t){let e=new Error(t);throw delete e.stack,e}function kd(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function s8(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const o8=t=>String.fromCharCode.apply(null,t),pz=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function mX(t){return pz?pz.decode(t):A4?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(o8(t)))}class Zi{static from(e,r){return e instanceof this&&e.le===r?e:new Zi(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Zi){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Ea("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Ea("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=Zi){return e instanceof DataView||e instanceof Zi?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Ea("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new Zi(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return mX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return o8(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return o8(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function l8(t,e){Ea(`${t} '${e}' was not loaded, try using full build of exifr.`)}class vj extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||l8(this.kind,e),r&&(e in r||(function(n,a){Ea(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||l8(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var el=new vj("file parser"),Aa=new vj("segment parser"),ol=new vj("file reader");function iAe(t,e){return typeof t=="string"?mz(t,e):Vg&&!tAe&&t instanceof HTMLImageElement?mz(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Zi(t):Vg&&t instanceof Blob?c8(t,e,"blob",a0):void Ea("Invalid input argument")}function mz(t,e){return(r=t).startsWith("data:")||r.length>1e4?u8(t,e,"base64"):Hb&&t.includes("://")?c8(t,e,"url",n0):Hb?u8(t,e,"fs"):Vg?c8(t,e,"url",n0):void Ea("Invalid input argument");var r}async function c8(t,e,r,n){return ol.has(r)?u8(t,e,r):n?(async function(a,i){let s=await i(a);return new Zi(s)})(t,n):void Ea(`Parser ${r} is not loaded`)}async function u8(t,e,r){let n=new(ol.get(r))(t,e);return await n.read(),n}const n0=t=>yj(t).then((e=>e.arrayBuffer())),a0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class sAe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function ha(t,e,r){let n=new sAe;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function i0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const Ja=new Map,ko=new Map,bu=new Map,du=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ff=["jfif","xmp","icc","iptc","ihdr"],s0=["tiff",...Ff],ta=["ifd0","ifd1","exif","gps","interop"],hu=[...s0,...ta],fu=["makerNote","userComment"],qf=["translateKeys","translateValues","reviveValues","multiSegment"],pu=[...qf,"sanitize","mergeOutput","silentErrors"];class gX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Zp extends gX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),Yt(this,"enabled",!1),Yt(this,"skip",new Set),Yt(this,"pick",new Set),Yt(this,"deps",new Set),Yt(this,"translateKeys",!1),Yt(this,"translateValues",!1),Yt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=ta.includes(e),this.canBeFiltered&&(this.dict=Ja.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:s}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Ea(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of qf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(a=s.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Kb(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Kb(this.pick,this.deps)}}var Ci={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},gz=new Map;class g0 extends gX{static useCached(e){let r=gz.get(e);return r!==void 0||(r=new this(e),gz.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Ea(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Vg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of du)this[e]=Ci[e];for(e of pu)this[e]=Ci[e];for(e of fu)this[e]=Ci[e];for(e of hu)this[e]=new Zp(e,Ci[e],void 0,this)}setupFromTrue(){let e;for(e of du)this[e]=Ci[e];for(e of pu)this[e]=Ci[e];for(e of fu)this[e]=!0;for(e of hu)this[e]=new Zp(e,!0,void 0,this)}setupFromArray(e){let r;for(r of du)this[r]=Ci[r];for(r of pu)this[r]=Ci[r];for(r of fu)this[r]=Ci[r];for(r of hu)this[r]=new Zp(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,ta)}setupFromObject(e){let r;for(r of(ta.ifd0=ta.ifd0||ta.image,ta.ifd1=ta.ifd1||ta.thumbnail,Object.assign(this,e),du))this[r]=jT(e[r],Ci[r]);for(r of pu)this[r]=jT(e[r],Ci[r]);for(r of fu)this[r]=jT(e[r],Ci[r]);for(r of s0)this[r]=new Zp(r,Ci[r],e[r],this);for(r of ta)this[r]=new Zp(r,Ci[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ta,hu),e.tiff===!0?this.batchEnableWithBool(ta,!0):e.tiff===!1?this.batchEnableWithUserValue(ta,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ta):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ta)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let s of a)this[s].enabled=!1;let i=yz(e,n);for(let[s,c]of i)Kb(this[s].pick,c),this[s].enabled=!0}else if(r&&r.length){let i=yz(r,n);for(let[s,c]of i)Kb(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ta.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of ta)this[i].finalizeFilters()}get onlyTiff(){return!Ff.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of s0)this[e].enabled&&!Aa.has(e)&&l8("segment parser",e)}}function yz(t,e){let r,n,a,i,s=[];for(a of e){for(i of(r=Ja.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&s.push([a,n])}return s}function jT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function Kb(t,e){for(let r of e)t.add(r)}Yt(g0,"default",Ci);class Bu{constructor(e){Yt(this,"parsers",{}),Yt(this,"output",{}),Yt(this,"errors",[]),Yt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=g0.useCached(e)}async read(e){this.file=await iAe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of el)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Ea("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),Wb(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Aa.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),s=this.parsers.tiff=new n(i,e,r),c=await s.extractThumbnail();return r.close&&r.close(),c}}async function N4(t,e){let r=new Bu(e);return await r.read(t),r.parse()}var oAe=Object.freeze({__proto__:null,parse:N4,Exifr:Bu,fileParsers:el,segmentParsers:Aa,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:bu,createDictionary:ha,extendDictionary:i0,fetchUrlAsArrayBuffer:n0,readBlobAsArrayBuffer:a0,chunkedProps:du,otherSegments:Ff,segments:s0,tiffBlocks:ta,segmentsAndBlocks:hu,tiffExtractables:fu,inheritables:qf,allFormatters:pu,Options:g0});class E4{constructor(e,r,n){Yt(this,"errors",[]),Yt(this,"ensureSegmentChunk",(async a=>{let i=a.start,s=a.size||65536;if(this.file.chunked)if(this.file.available(i,s))a.chunk=this.file.subarray(i,s);else try{a.chunk=await this.file.readChunk(i,s)}catch(c){Ea(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+s?a.chunk=this.file.subarray(i,s):a.size===void 0?a.chunk=this.file.subarray(i):Ea("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Aa.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class bo{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,s=n-a;return{offset:r,length:n,headerLength:a,start:i,size:s,end:i+s}}static parse(e,r={}){return new this(e,new g0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof Zi?e:new Zi(e)}constructor(e,r={},n){Yt(this,"errors",[]),Yt(this,"raw",new Map),Yt(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=bu.get(r),a=ko.get(r),i=Ja.get(r),s=this.options[r],c=s.reviveValues&&!!n,d=s.translateValues&&!!a,h=s.translateKeys&&!!i,p={};for(let[m,y]of e)c&&n.has(m)?y=n.get(m)(y):d&&a.has(m)&&(y=this.translateValue(y,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Yt(bo,"headerLength",4),Yt(bo,"type",void 0),Yt(bo,"multiSegment",!1),Yt(bo,"canHandle",(()=>!1));function lAe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function cAe(t){return t>=224&&t<=239}function uAe(t,e,r){for(let[n,a]of Aa)if(a.canHandle(t,e,r))return n}class vz extends E4{constructor(...e){super(...e),Yt(this,"appSegments",[]),Yt(this,"jpegSegments",[]),Yt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Aa.keyList())):(e=e===void 0?Aa.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Aa.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:s}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Aa.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,s,c,d,{file:h,findAll:p,wanted:m,remaining:y,options:x}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),cAe(n)){if(a=h.getUint16(e+2),i=uAe(h,e,a),i&&m.has(i)&&(s=Aa.get(i),c=s.findPosition(h,e),d=x[i],c.type=i,this.appSegments.push(c),!p&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(i)):y.delete(i),y.size===0)))break;x.recordUnknownSegments&&(c=bo.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(lAe(n)){if(a=h.getUint16(e+2),n===218&&x.stopAfterSos!==!1)return;x.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,s,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?s=c.get(i):c.set(i,s=[]),s.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Aa.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Yt(vz,"type","jpeg"),el.set("jpeg",vz);const dAe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class hAe extends bo{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let s=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(s){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),s=a.getUint32(e+4),c=dAe[i];if(c*s<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Ea(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Ea(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,s);if(i===2)return kd(a.getString(e,s));if(i===7)return a.getUint8Array(e,s);if(s===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(s),h=c;for(let p=0;p<s;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Ea(`Invalid tiff type ${e}`)}}}class kT extends hAe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ea("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Ea(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,s8(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,s8(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",xz(...e.get(2),e.get(1))),e.set("longitude",xz(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of ta)if(e=this[r],!pX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function xz(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Yt(kT,"type","tiff"),Yt(kT,"headerLength",10),Aa.set("tiff",kT);var fAe=Object.freeze({__proto__:null,default:oAe,Exifr:Bu,fileParsers:el,segmentParsers:Aa,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:bu,createDictionary:ha,extendDictionary:i0,fetchUrlAsArrayBuffer:n0,readBlobAsArrayBuffer:a0,chunkedProps:du,otherSegments:Ff,segments:s0,tiffBlocks:ta,segmentsAndBlocks:hu,tiffExtractables:fu,inheritables:qf,allFormatters:pu,Options:g0,parse:N4});const xj={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},bj=Object.assign({},xj,{firstChunkSize:4e4,gps:[1,2,3,4]});async function yX(t){let e=new Bu(bj);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const wj=Object.assign({},xj,{tiff:!1,ifd1:!0,mergeOutput:!1});async function vX(t){let e=new Bu(wj);await e.read(t);let r=await e.extractThumbnail();return r&&A4?T4.from(r):r}async function xX(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const Sj=Object.assign({},xj,{firstChunkSize:4e4,ifd0:[274]});async function _j(t){let e=new Bu(Sj);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const Tj=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Cd=!0,Od=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Cd=Number(r)+.1*Number(n)<13.4,Od=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Cd=Od=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Cd=Od=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Cd=Od=Number(e)<77}}async function bX(t){let e=await _j(t);return Object.assign({canvas:Cd,css:Od},Tj[e])}class pAe extends Zi{constructor(...e){super(...e),Yt(this,"ranges",new mAe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=A4?T4.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class mAe{constructor(){Yt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((s=>bz(e,s.offset,a)||bz(e,s.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let s=i.shift();s.offset=e,s.length=r,s.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function bz(t,e,r){return t<=e&&e<=r}class j4 extends pAe{constructor(e,r){super(0),Yt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ol.set("blob",class extends j4{async readWhole(){this.chunked=!1;let t=await a0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await a0(n);return this.set(a,t,!0)}});var gAe=Object.freeze({__proto__:null,default:fAe,Exifr:Bu,fileParsers:el,segmentParsers:Aa,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:bu,createDictionary:ha,extendDictionary:i0,fetchUrlAsArrayBuffer:n0,readBlobAsArrayBuffer:a0,chunkedProps:du,otherSegments:Ff,segments:s0,tiffBlocks:ta,segmentsAndBlocks:hu,tiffExtractables:fu,inheritables:qf,allFormatters:pu,Options:g0,parse:N4,gpsOnlyOptions:bj,gps:yX,thumbnailOnlyOptions:wj,thumbnail:vX,thumbnailUrl:xX,orientationOnlyOptions:Sj,orientation:_j,rotations:Tj,get rotateCanvas(){return Cd},get rotateCss(){return Od},rotation:bX});ol.set("url",class extends j4{async readWhole(){this.chunked=!1;let t=await n0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await yj(this.input,{headers:n}),i=await a.arrayBuffer(),s=i.byteLength;if(a.status!==416)return s!==e&&(this.size=t+s),this.set(i,t,!0)}});Zi.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Ov!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Ov(e)<<Ov(32)|Ov(r)):void Ea("Trying to read 64b value but JS can only handle 53b numbers.")};class yAe extends E4{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class wX extends yAe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[s,c]=i;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let x=this.file.getUintBytes(n,d);n+=d+h+2+s;let T=this.file.getUint16(n);if(n+=2,x===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=T*p}}}class SX extends wX{}Yt(SX,"type","heic");class wz extends wX{}Yt(wz,"type","avif"),el.set("heic",SX),el.set("avif",wz),ha(Ja,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),ha(Ja,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),ha(Ja,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),ha(ko,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Om=ha(ko,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Sz={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Om.set(37392,Sz),Om.set(41488,Sz);const CT={0:"Normal",1:"Low",2:"High"};function _z(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function Tz(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function OT(t){if(typeof t=="string"){var[e,r,n,a,i,s]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(s)||(c.setHours(a),c.setMinutes(i),c.setSeconds(s)),Number.isNaN(+c)?t:c}}function Jp(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(Az(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(Az(t[r],t[r+1]));return kd(String.fromCodePoint(...e))}function Az(t,e){return t<<8|e}Om.set(41992,CT),Om.set(41993,CT),Om.set(41994,CT),ha(bu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?mX(t):t}],[306,OT],[40091,Jp],[40092,Jp],[40093,Jp],[40094,Jp],[40095,Jp]]),ha(bu,"exif",[[40960,Tz],[36864,Tz],[36867,OT],[36868,OT],[40962,_z],[40963,_z]]),ha(bu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class IT extends bo{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:Zi.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let s={},c={};for(let d of NX)s[d]=[],c[d]=0;return i.replace(wAe,((d,h,p)=>{if(h==="<"){let m=++c[p];return s[p].push(m),`${d}#${m}`}return`${d}#${s[p].pop()}`}))})(e);let r=Ch.findAll(e,"rdf","Description");r.length===0&&r.push(new Ch("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let s of i.properties)n=bAe(s.ns,a),_X(s,n);return(function(i){let s;for(let c in i)s=i[c]=Wb(i[c]),s===void 0&&delete i[c];return Wb(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}Yt(IT,"type","xmp"),Yt(IT,"multiSegment",!0),Aa.set("xmp",IT);class Qb{static findAll(e){return TX(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Qb.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=AX(a),new Qb(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Ch{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return TX(e,a).map(Ch.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Ch(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=Qb.findAll(n),this.children=Ch.findAll(a),this.value=this.children.length===0?AX(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return xAe(this.children.map(vAe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)_X(r,e);return this.value!==void 0&&(e.value=this.value),Wb(e)}}function _X(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var vAe=t=>t.serialize(),xAe=t=>t.length===1?t[0]:t,bAe=(t,e)=>e[t]?e[t]:e[t]={};function TX(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function AX(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const NX=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],wAe=new RegExp(`(<|\\/)(${NX.join("|")})`,"g");var SAe=Object.freeze({__proto__:null,default:gAe,Exifr:Bu,fileParsers:el,segmentParsers:Aa,fileReaders:ol,tagKeys:Ja,tagValues:ko,tagRevivers:bu,createDictionary:ha,extendDictionary:i0,fetchUrlAsArrayBuffer:n0,readBlobAsArrayBuffer:a0,chunkedProps:du,otherSegments:Ff,segments:s0,tiffBlocks:ta,segmentsAndBlocks:hu,tiffExtractables:fu,inheritables:qf,allFormatters:pu,Options:g0,parse:N4,gpsOnlyOptions:bj,gps:yX,thumbnailOnlyOptions:wj,thumbnail:vX,thumbnailUrl:xX,orientationOnlyOptions:Sj,orientation:_j,rotations:Tj,get rotateCanvas(){return Cd},get rotateCss(){return Od},rotation:bX});let Nz=Gb("fs",(t=>t.promises));ol.set("fs",class extends j4{async readWhole(){this.chunked=!1,this.fs=await Nz;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Nz,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});ol.set("base64",class extends j4{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,s=r+4*Math.ceil(i/3);a=a.slice(r,s);let c=Math.min(e,this.size-t);if(A4){let d=T4.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class Ez extends E4{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(s8(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Yt(Ez,"type","tiff"),el.set("tiff",Ez);let _Ae=Gb("zlib");const TAe=["ihdr","iccp","text","itxt","exif"];class jz extends E4{constructor(...e){super(...e),Yt(this,"catchError",(r=>this.errors.push(r))),Yt(this,"metaChunks",[]),Yt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:a,marker:i};TAe.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,s=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",s),Hb){let c=await _Ae,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Yt(jz,"type","png"),el.set("png",jz),ha(Ja,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),i0(Ja,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let kz=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];i0(Ja,"ifd0",kz),i0(Ja,"exif",kz),ha(ko,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class RT extends bo{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Yt(RT,"type","jfif"),Yt(RT,"headerLength",9),Aa.set("jfif",RT),ha(Ja,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Cz extends bo{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Yt(Cz,"type","ihdr"),Aa.set("ihdr",Cz),ha(Ja,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),ha(ko,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class ex extends bo{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,s=0;for(let h of a)s+=h.length;let c=new i(s),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new Zi(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Ea("ICC header is too short");for(let[r,n]of Object.entries(AAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:s}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&s.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return kd(this.chunk.getString(e+12,r))}parseText(e,r){return kd(this.chunk.getString(e+8,r-8))}parseSig(e){return kd(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,s=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,y=kd(r.getUnicodeString(m,p));s.push({lang:d,country:h,text:y}),i+=a}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Yt(ex,"type","icc"),Yt(ex,"multiSegment",!0),Yt(ex,"headerLength",18);const AAe={4:jl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:jl,16:jl,20:jl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),s=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,s,c))},36:jl,40:jl,48:jl,52:jl,64:(t,e)=>t.getUint32(e),80:jl};function jl(t,e){return kd(t.getString(e,4))}Aa.set("icc",ex),ha(Ja,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Iv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Oz={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};ha(ko,"icc",[[4,Iv],[12,Oz],[40,Object.assign({},Iv,Oz)],[48,Iv],[80,Iv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Rv extends bo{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),s=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(s,this.pluralizeValue(e.get(s),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Yt(Rv,"type","iptc"),Yt(Rv,"translateValues",!1),Yt(Rv,"reviveValues",!1),Aa.set("iptc",Rv),ha(Ja,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),ha(ko,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const em=["Monday","Tuesday","Wednesday","Thursday","Friday"],NAe=({user:t})=>{const e=pi(),{confirm:r}=al(),n=O.useMemo(()=>De.getWeekId(),[]),[a,i]=O.useState([]),[s,c]=O.useState("Monday"),[d,h]=O.useState(!1),p=O.useRef(null),[m,y]=O.useState(!1),x=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,_]=O.useState(t.classType||x[0]||"Uncategorized");O.useEffect(()=>{const N=new Date().toLocaleDateString("en-US",{weekday:"long"});em.includes(N)&&c(N)},[]),O.useEffect(()=>{const N=De.subscribeToEvidence(t.id,n,i);return()=>N()},[t.id,n]);const w=O.useMemo(()=>{const N=x[0]||"Uncategorized";return a.filter(A=>A.classType?A.classType===T:T===N)},[a,T,x]),E=N=>w.find(A=>A.dayOfWeek===N),I=N=>N?new Date(N).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,C=async N=>{var j;const A=(j=N.target.files)==null?void 0:j[0];if(A){h(!0);try{let $=null;if(A.type.startsWith("image/"))try{const ne=await SAe.parse(A,["DateTimeOriginal"])||{};ne.DateTimeOriginal&&($=ne.DateTimeOriginal.toISOString())}catch(ne){console.warn("EXIF extraction failed",ne)}const B=T.replace(/[^a-zA-Z0-9]/g,"_"),F=Math.random().toString(36).substring(2,9),z=ym(vm,`evidence/${t.id}/${n}/${B}_${s}_${F}`);await mA(z,A);const K=await Sx(z),Q=E(s),X={id:`${t.id}_${n}_${s}_${B}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:K,timestamp:new Date().toISOString(),exifDate:$,reflection:(Q==null?void 0:Q.reflection)||""};await De.uploadEvidence(X)}catch($){e.error("Upload failed: "+($ instanceof Error?$.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(N,A)=>{const j=E(N);j&&j.reflection!==A&&await De.uploadEvidence({...j,reflection:A})},P=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const A=new nZ,j=A.internal.pageSize.getWidth(),$=A.internal.pageSize.getHeight(),B=20,F=j-B*2,z=$-B;A.setFillColor(15,7,32),A.rect(0,0,j,40,"F"),A.setTextColor(255,255,255),A.setFontSize(22),A.setFont("helvetica","bold"),A.text("WEEKLY PROGRESS REPORT",B,18),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Operative: ${t.name.toUpperCase()}`,B,28),A.text(`Class: ${T}`,B,33),A.text(`Cycle ID: ${n}`,B,38),A.text(`Generated: ${new Date().toLocaleDateString()}`,j-B,33,{align:"right"});let K=55;const Q=[...w].sort((G,X)=>em.indexOf(G.dayOfWeek)-em.indexOf(X.dayOfWeek));for(const G of Q){let X=null,ne="JPEG",de=0,me=0,H=!1;try{const Se=await fetch(G.imageUrl);if(!Se.ok)throw new Error(`Image fetch failed: ${Se.statusText}`);const We=await Se.blob();X=await new Promise((et,pt)=>{const st=new FileReader;st.onloadend=()=>et(st.result),st.onerror=pt,st.readAsDataURL(We)}),We.type==="image/png"&&(ne="PNG"),We.type==="image/webp"&&(ne="WEBP");const Me=A.getImageProperties(X),_e=Me.width/Me.height,gt=100;de=F,me=de/_e,me>gt&&(me=gt,de=me*_e)}catch(Se){console.warn("Image processing error for PDF",Se),H=!0,me=15}const Oe=20+me+12;K+Oe>z&&(A.addPage(),K=B),A.setDrawColor(200,200,200),A.setLineWidth(.5),A.line(B,K,j-B,K),K+=6,A.setTextColor(15,7,32),A.setFontSize(16),A.setFont("helvetica","bold"),A.text(G.dayOfWeek.toUpperCase(),B,K);const re=I(G.exifDate)||I(G.timestamp);if(A.setFontSize(9),A.setFont("helvetica","italic"),A.setTextColor(100,100,100),A.text(`Captured: ${re}`,j-B,K,{align:"right"}),K+=10,!H&&X){const Se=(j-de)/2;A.addImage(X,ne,Se,K,de,me),K+=me+12}else A.setTextColor(255,0,0),A.setFontSize(8),A.text("[Image Error]",B,K),K+=15;A.setFont("helvetica","normal"),A.setFontSize(10);const ce=G.reflection||"No reflection logged for this cycle.",he=A.splitTextToSize(ce,F),Ie=he.length*5+15;K+Ie>z&&(A.addPage(),K=B),A.setTextColor(15,7,32),A.setFontSize(11),A.setFont("helvetica","bold"),A.text("DAILY REFLECTION:",B,K),K+=6,A.setFont("helvetica","normal"),A.setFontSize(10),A.setTextColor(60,60,60),A.text(he,B,K),K+=he.length*5+25}A.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await De.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(A){console.error("PDF generation failed:",A),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},R=E(s);return o.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[o.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[o.jsx(KI,{className:"w-7 h-7"})," Weekly Evidence Log"]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[x.length>1?o.jsxs("div",{className:"relative group",children:[o.jsx("select",{value:T,onChange:N=>_(N.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:x.map(N=>o.jsx("option",{value:N,children:N},N))}),o.jsx(Di,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):o.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),o.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[o.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),o.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),o.jsxs("button",{onClick:P,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?o.jsx(Ss,{className:"w-5 h-5 animate-spin"}):o.jsx(Loe,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),o.jsx("input",{type:"file",ref:p,onChange:C,className:"hidden",accept:"image/*"}),o.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:em.map(N=>{const A=E(N),j=s===N;return o.jsxs("button",{onClick:()=>c(N),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${j?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[o.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${j?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",em.indexOf(N)+1]}),o.jsx("span",{className:"font-bold text-sm",children:N}),A&&o.jsx("div",{className:`absolute top-2 right-2 ${j?"text-emerald-200":"text-emerald-500"}`,children:o.jsx(Nx,{className:"w-3 h-3"})})]},N)})}),o.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[o.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[o.jsx(Goe,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),R&&o.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[o.jsx(js,{className:"w-3 h-3"}),I(R.exifDate)||I(R.timestamp)]})]}),o.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:R?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:R.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),o.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},children:[o.jsx(Xd,{className:"w-8 h-8 text-emerald-400"}),o.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):o.jsxs("button",{onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?o.jsx(Ss,{className:"w-10 h-10 animate-spin text-emerald-500"}):o.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:o.jsx(KI,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),o.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),o.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[o.jsx("div",{className:"mb-2",children:o.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[o.jsx(M7,{className:"w-4 h-4"})," Daily Reflection"]})}),R?o.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:R.reflection,onBlur:N=>L(s,N.target.value)},s):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[o.jsx("div",{className:"mb-2 opacity-30",children:o.jsx(Pd,{className:"w-6 h-6"})}),o.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),o.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},EAe=({user:t})=>{const e=pi(),[r,n]=O.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=O.useState(""),[s,c]=O.useState(""),[d,h]=O.useState("");O.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(x,T)=>{try{return Lx.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");i(y)},[r.content]);const p=async()=>{await De.saveLabReport(r),await De.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(s),x=parseFloat(d);!isNaN(y)&&!isNaN(x)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:x}].sort((_,w)=>_.x-w.x)})),c(""),h(""))};return o.jsxs("div",{className:"h-full flex flex-col gap-6",children:[o.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[o.jsx(_2,{className:"w-6 h-6"})," Physics Laboratory"]}),o.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[o.jsx(iH,{className:"w-4 h-4"})," Save Report"]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:o.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),o.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[o.jsxs("div",{className:"w-1/3",children:[o.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),o.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),o.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx(yW,{width:"100%",height:"100%",children:o.jsxs(USe,{children:[o.jsx(SQ,{strokeDasharray:"3 3",stroke:"#333"}),o.jsx(m4,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),o.jsx(g4,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),o.jsx(Lo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),o.jsx(T1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),o.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:o.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[o.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(x=>({...x,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),o.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:uG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},jAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],kAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],CAe=({userId:t,classType:e,onClose:r})=>{var L,P,R,N,A;const[n,a]=O.useState(null),[i,s]=O.useState(!0);if(O.useEffect(()=>{(async()=>{const $=await De.getPublicProfile(t);a($),s(!1)})()},[t]),i)return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:o.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:o.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=Kh(p),y=fX(p),{equipped:x,appearance:T}=Yd(n,e),_=nE({gamification:{...c,equipped:x}}),w=Qh(x),E=((P=c.classXp)==null?void 0:P[e])||0,I=Object.values(x).filter(Boolean),C=hX(I);return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[o.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:o.jsx(Pa,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-24 h-32 shrink-0",children:o.jsx(zg,{equipped:x,appearance:T})}),o.jsxs("div",{children:[o.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),o.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ba,{className:"w-3 h-3 text-cyan-400"}),o.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[E.toLocaleString()," XP"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3 text-yellow-400"}),o.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Ao,{className:"w-3 h-3"})," Stats"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:jAe.map(({key:j,label:$,color:B,icon:F})=>{const z=_[j]||0;return o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:F}),o.jsx("span",{className:"text-xs text-gray-400",children:$}),o.jsx("span",{className:`text-sm font-bold ${B} ml-auto`,children:z})]},j)})})]}),o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3"})," Equipment"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:kAe.map(j=>{const $=x[j];if(!$)return o.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:j}),o.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},j);const B=oa($.rarity);return o.jsxs("div",{className:`p-2 rounded-lg border ${B.border} ${B.bg}`,children:[o.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:j}),o.jsx("div",{className:`text-xs font-bold truncate ${B.text}`,children:$.name}),o.jsx("div",{className:"text-[9px] text-gray-500",children:$.rarity})]},j)})})]}),C.length>0&&o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(A2,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),C.map(({set:j,activeBonus:$})=>o.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[o.jsx("div",{className:"text-xs font-bold text-purple-400",children:j.name}),o.jsxs("div",{className:"text-[10px] text-gray-400",children:[$.label,": ",$.effects.map(B=>`+${B.value} ${B.stat}`).join(", ")]})]},j.id))]}),(((R=c.unlockedAchievements)==null?void 0:R.length)||0)>0&&o.jsxs("div",{className:"p-6",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Jl,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(N=c.unlockedAchievements)==null?void 0:N.length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:(A=c.unlockedAchievements)==null?void 0:A.slice(0,12).map(j=>o.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:j.replace(/_/g," ")},j))})]})]})})},OAe=()=>o.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>o.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[o.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),o.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),o.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),o.jsxs("div",{className:"space-y-2 text-right",children:[o.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),o.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),IAe=({user:t})=>{var m;const[e,r]=O.useState([]),[n,a]=O.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Pr.AP_PHYSICS),[i,s]=O.useState(!0),[c,d]=O.useState(null);O.useEffect(()=>{const y=De.subscribeToLeaderboard(x=>{r(x),s(!1)});return()=>y()},[]);const h=O.useMemo(()=>{const y=t.enrolledClasses||[];if(y.length>0)return y.sort();const x=new Set;return e.forEach(T=>{var _;return(_=T.enrolledClasses)==null?void 0:_.forEach(w=>x.add(w))}),Array.from(x).sort()},[t.enrolledClasses,e]),p=O.useMemo(()=>e.filter(y=>{var x;return(x=y.enrolledClasses)==null?void 0:x.includes(n)}).sort((y,x)=>{var w,E,I,C;const T=((E=(w=y.gamification)==null?void 0:w.classXp)==null?void 0:E[n])||0;return(((C=(I=x.gamification)==null?void 0:I.classXp)==null?void 0:C[n])||0)-T}).slice(0,10),[e,n]);return o.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),o.jsxs("div",{className:"inline-block relative",children:[o.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(y=>o.jsx("option",{value:y,children:y},y)),h.length===0&&o.jsx("option",{children:n})]}),o.jsx(Di,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?o.jsx(OAe,{}):o.jsxs(o.Fragment,{children:[p.length>=3&&o.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(y=>{var N,A,j,$,B;const x=p[y];if(!x)return null;const T=(N=x.settings)==null?void 0:N.privacyMode,_=T?((A=x.gamification)==null?void 0:A.codename)||"Unknown Agent":x.name,w=(($=(j=x.gamification)==null?void 0:j.classXp)==null?void 0:$[n])||0,E=((B=x.gamification)==null?void 0:B.level)||1,I=Kh(E),C=y===0,L=["h-28","h-20","h-16"],P=["w-20 h-20","w-14 h-14","w-14 h-14"],R=[{icon:o.jsx(Jl,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:o.jsx(av,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:o.jsx(av,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return o.jsxs("div",{className:`flex flex-col items-center ${C?"order-2":y===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+y*.15}s both`},children:[o.jsxs("div",{className:`relative mb-2 ${C?"mb-3":""}`,children:[o.jsx("div",{className:`${P[y]} rounded-full p-0.5 bg-white/10 ring-2 ${R[y].ring} relative ${C?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:o.jsx("img",{src:x.avatarUrl,alt:_,className:`w-full h-full rounded-full border-2 ${I.tierColor.split(" ")[0]} object-cover`})}),o.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${R[y].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:R[y].icon})]}),o.jsxs("div",{className:`text-center ${C?"mt-2":"mt-1"}`,children:[o.jsx("div",{className:`font-bold truncate max-w-[100px] ${C?"text-sm text-white":"text-xs text-gray-300"} ${T?"italic":""}`,children:_}),o.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${C?"text-xl":"text-base"}`,children:w.toLocaleString()}),o.jsx("div",{className:`text-[9px] font-mono uppercase ${I.tierColor.split(" ")[1]}`,children:I.rankName}),o.jsxs("button",{onClick:()=>d(x.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[o.jsx(Hh,{className:"w-3 h-3"})," Inspect"]})]}),o.jsx("div",{className:`${L[y]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${y===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":y===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},x.id)})}),o.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((y,x)=>{var L,P,R,N,A;const T=p.length>=3?x+3:x,_=(L=y.settings)==null?void 0:L.privacyMode,w=_?((P=y.gamification)==null?void 0:P.codename)||"Unknown Agent":y.name,E=((N=(R=y.gamification)==null?void 0:R.classXp)==null?void 0:N[n])||0,I=((A=y.gamification)==null?void 0:A.level)||1,C=Kh(I);return o.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*T}s both`},children:[o.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[T<3&&T===0&&o.jsx(Jl,{className:"w-6 h-6 text-yellow-400 mx-auto"}),T<3&&T===1&&o.jsx(av,{className:"w-6 h-6 text-gray-300 mx-auto"}),T<3&&T===2&&o.jsx(av,{className:"w-6 h-6 text-amber-600 mx-auto"}),T>=3&&`#${T+1}`]}),o.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[o.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${C.tierColor.split(" ")[0]}`}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:I})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("h3",{className:`text-base font-bold truncate ${_?"text-purple-300 italic":"text-white"}`,children:[w,_&&o.jsx(Gh,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),o.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${C.tierColor.split(" ")[1]}`,children:C.rankName})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:E.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),o.jsx("button",{onClick:()=>d(y.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:o.jsx(Hh,{className:"w-4 h-4"})})]},y.id)}),p.length===0&&o.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[o.jsx(Ts,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&o.jsx(CAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class RAe extends ae.Component{constructor(r){super(r);FC(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:o.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),o.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&o.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),o.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[o.jsx(Ox,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const Iz={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:o.jsx(Vo,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:o.jsx(Jq,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:o.jsx(A2,{className:"w-4 h-4"})}},MAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},MT=3;function PT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const PAe=({assignment:t})=>{const e=pi(),[r,n]=O.useState([]),[a,i]=O.useState([]),[s,c]=O.useState(!0),[d,h]=O.useState(!1),[p,m]=O.useState({}),[y,x]=O.useState(1),[T,_]=O.useState(null),[w,E]=O.useState(new Set),I=O.useRef({engagementTime:0}),C=O.useRef(Date.now());O.useEffect(()=>{const K=setInterval(()=>{Date.now()-C.current<6e4&&(I.current.engagementTime+=1)},1e3);return()=>clearInterval(K)},[]),O.useEffect(()=>{const K=()=>{C.current=Date.now()},Q=["mousemove","keydown","scroll","click"];return Q.forEach(G=>window.addEventListener(G,K)),()=>Q.forEach(G=>window.removeEventListener(G,K))},[]),O.useEffect(()=>()=>{var Q;const K=I.current.engagementTime;if(K>=5){const G=(Q=HT().currentUser)==null?void 0:Q.uid;G&&De.submitReviewEngagement(G,t.id,t.title,t.classType,K).catch(()=>{})}},[t.id,t.title,t.classType]);const L=O.useCallback(K=>{const Q=PT(K.filter(ne=>ne.tier===1),MT),G=PT(K.filter(ne=>ne.tier===2),MT),X=PT(K.filter(ne=>ne.tier===3),MT);i([...Q,...G,...X]),m({}),_(null)},[]);O.useEffect(()=>{(async()=>{var Q;c(!0),h(!1);try{const G=await Ra(at(Pe,"question_banks",t.id));if(!G.exists()){h(!0);return}const X=G.data().questions||[];n(X),L(X)}catch(G){console.error("Failed to load question bank:",G),h(!0);return}finally{c(!1)}try{const G=(Q=HT().currentUser)==null?void 0:Q.uid;if(G){const X=await Ra(at(Pe,"review_progress",`${G}_${t.id}`));X.exists()&&E(new Set(X.data().answeredQuestions||[]))}}catch(G){console.warn("Could not load review progress:",G)}})()},[t.id,L]);const P=()=>{r.length>0&&L(r)},R=(K,Q,G)=>{const X=p[K];if(!(X!=null&&X.submitted))if(G==="multiple_select"||G==="ranking"){const ne=(X==null?void 0:X.selected)||[],de=ne.includes(Q)?ne.filter(me=>me!==Q):[...ne,Q];m(me=>({...me,[K]:{...me[K],selected:de,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ne=>({...ne,[K]:{selected:Q,submitted:!1,correct:!1,xpAwarded:!1}}))},N=(K,Q)=>{var G;(G=p[K])!=null&&G.submitted||m(X=>({...X,[K]:{...X[K],linkedSelected:Q}}))},A=async K=>{const Q=p[K.id];if(!(Q!=null&&Q.selected))return;let G=!1;if(K.type==="multiple_select"||K.type==="ranking"){const X=Q.selected,ne=K.correctAnswer;G=X.length===ne.length&&X.every((de,me)=>de===ne[me])}else K.type==="linked_mc"?G=Q.selected===K.correctAnswer&&(!K.linkedFollowUp||Q.linkedSelected===K.linkedFollowUp.correctAnswer):G=Q.selected===K.correctAnswer;if(G)if(w.has(K.id))m(X=>({...X,[K.id]:{...X[K.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(X=>({...X,[K.id]:{...X[K.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await Gq({assignmentId:t.id,questionId:K.id,xpAmount:K.xp,classType:t.classType})).data.awarded?(e.success(`+${K.xp} XP earned!`),m(de=>({...de,[K.id]:{...de[K.id],submitted:!0,correct:!0,xpAwarded:!0}})),E(de=>new Set([...de,K.id]))):e.success("Correct! (XP already claimed)")}catch(X){console.error("XP award error:",X)}}else{const X=Math.ceil(K.xp/2);m(ne=>({...ne,[K.id]:{...ne[K.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:X}})),e.error(`-${X} XP penalty`);try{await ioe({assignmentId:t.id,questionId:K.id,classType:t.classType})}catch(ne){console.error("Penalty error:",ne)}}},j=O.useMemo(()=>a.filter(K=>K.tier===y),[a,y]),$=O.useMemo(()=>Object.entries(p).filter(([,K])=>K.correct&&K.xpAwarded).reduce((K,[Q])=>{var G;return K+(((G=a.find(X=>X.id===Q))==null?void 0:G.xp)||0)},0),[p,a]),B=O.useMemo(()=>Object.values(p).reduce((K,Q)=>K+(Q.penalty||0),0),[p]),F=O.useMemo(()=>a.reduce((K,Q)=>K+Q.xp,0),[a]),z=O.useMemo(()=>a.length>0&&a.every(K=>{var Q;return(Q=p[K.id])==null?void 0:Q.submitted}),[a,p]);return s?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(Ss,{className:"w-8 h-8 text-purple-400 animate-spin"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(Vo,{className:"w-12 h-12 text-gray-600"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),o.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):o.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Vo,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),o.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ba,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-sm font-bold text-yellow-400",children:$}),B>0&&o.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",B]}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",F," XP"]})]}),o.jsxs("button",{onClick:P,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[o.jsx(Ox,{className:"w-3 h-3"})," New Set"]})]})]}),o.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(K=>{const Q=Iz[K],G=a.filter(de=>de.tier===K),X=G.filter(de=>{var me;return(me=p[de.id])==null?void 0:me.submitted}).length,ne=G.filter(de=>{var me;return(me=p[de.id])==null?void 0:me.correct}).length;return o.jsxs("button",{onClick:()=>x(K),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===K?`${Q.bg} ${Q.color} ${Q.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[Q.icon,o.jsx("span",{className:"hidden sm:inline",children:Q.name}),o.jsxs("span",{className:"sm:hidden",children:["Tier ",K]}),X>0&&o.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ne===G.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ne,"/",G.length]})]},K)})}),z&&o.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),o.jsxs("button",{onClick:P,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[o.jsx(Ox,{className:"w-3 h-3"})," New Questions"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[j.map((K,Q)=>{const G=p[K.id],X=T===K.id,ne=G==null?void 0:G.submitted,de=G==null?void 0:G.correct,me=Iz[K.tier];return o.jsxs("div",{className:`rounded-2xl border transition-all ${ne?de?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":X?`${me.border} ${me.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[o.jsxs("button",{onClick:()=>_(X?null:K.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ne?de?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${me.bg} ${me.color}`}`,children:ne?de?o.jsx(Cn,{className:"w-4 h-4"}):o.jsx(qh,{className:"w-4 h-4"}):Q+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${me.color}`,children:K.bloomsLevel}),o.jsx("span",{className:"text-[9px] text-gray-600",children:""}),o.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:MAe[K.type]||K.type}),o.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[o.jsx(Ba,{className:"w-3 h-3"}),K.xp," XP"]}),o.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(K.xp/2)," if wrong"]})]}),o.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:K.stem})]}),o.jsx(Pd,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${X?"rotate-90":""}`})]}),X&&o.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[K.context&&o.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:K.context}),K.type==="ranking"?o.jsx(BAe,{question:K,answer:G,onSelect:R}):K.type==="multiple_select"?o.jsx(LAe,{question:K,answer:G,onSelect:R}):o.jsx(DAe,{question:K,answer:G,onSelect:R}),K.type==="linked_mc"&&K.linkedFollowUp&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[o.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),o.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:K.linkedFollowUp.stem}),o.jsx("div",{className:"space-y-2",children:K.linkedFollowUp.options.map(H=>{const ee=(G==null?void 0:G.linkedSelected)===H.id,te=ne,Oe=H.id===K.linkedFollowUp.correctAnswer;return o.jsxs("button",{onClick:()=>N(K.id,H.id),disabled:ne,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${te?Oe?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ee?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ee?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[H.id.toUpperCase(),"."]})," ",H.text]},H.id)})})]}),ne?o.jsxs("div",{className:`p-4 rounded-xl border ${de?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[de?o.jsx(Cn,{className:"w-5 h-5 text-emerald-400"}):o.jsx(qh,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:`font-bold text-sm ${de?"text-emerald-400":"text-red-400"}`,children:de?`Correct! +${K.xp} XP`:`Incorrect  ${(G==null?void 0:G.penalty)||Math.ceil(K.xp/2)} XP penalty`})]}),o.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:K.explanation})]}):o.jsx("button",{onClick:()=>A(K),disabled:!(G!=null&&G.selected)||Array.isArray(G==null?void 0:G.selected)&&G.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},K.id)}),j.length===0&&o.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[o.jsx(Gh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},DAe=({question:t,answer:e,onSelect:r})=>o.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return o.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),LAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const s=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return o.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&o.jsx(Cn,{className:"w-3 h-3 text-white"})}),o.jsxs("span",{children:[o.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},BAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[o.jsx(Eoe,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&o.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=t.options.find(p=>p.id===s),h=a&&i[c]===s;return o.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return o.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?o.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):o.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function $Ae(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${Lx.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return Lx.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const UAe=({assignment:t,onComplete:e})=>{const[r,n]=O.useState(null),[a,i]=O.useState(!0),[s,c]=O.useState(!1),d=O.useRef(Tx()),h=O.useRef(Date.now()),p=O.useRef(e),[m,y]=O.useState(!0),[x,T]=O.useState(0);O.useEffect(()=>{p.current=e},[e]);const _=O.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);O.useEffect(()=>{const E=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(E)},[m]),O.useEffect(()=>{const E=["mousemove","keydown","scroll","click"];return E.forEach(I=>window.addEventListener(I,_)),()=>{E.forEach(I=>window.removeEventListener(I,_))}},[_]),O.useEffect(()=>()=>{p.current(d.current)},[]),O.useEffect(()=>{(async()=>{i(!0);try{const I=await Ra(at(Pe,"reading_materials",t.id));I.exists()?n(I.data()):c(!0)}catch(I){console.error("Failed to load reading material:",I),c(!0)}finally{i(!1)}})()},[t.id]);const w=O.useMemo(()=>r?r.sections.map(E=>({title:E.title,html:$Ae(E.content)})):[],[r]);return a?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx(Ss,{className:"w-8 h-8 text-purple-400 animate-spin"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx(_o,{className:"w-12 h-12 text-gray-600"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),o.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):o.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?o.jsx(R7,{className:"w-4 h-4"}):o.jsx(js,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),o.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(x/60),"m ",x%60,"s"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&o.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[o.jsx(ks,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:_,children:o.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&o.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),o.jsx("div",{className:"space-y-10",children:w.map((E,I)=>o.jsxs("div",{className:"group",children:[o.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:I+1}),E.title]}),o.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:E.html}})]},I))}),o.jsx("div",{className:"mt-12 mb-4 text-center",children:o.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[o.jsx(_o,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},Rz={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},zAe=()=>{var Oe,re;const[t,e]=O.useState(null),[r,n]=O.useState("Dashboard"),[a,i]=O.useState([]),[s,c]=O.useState([]),[d,h]=O.useState([]),[p,m]=O.useState([]),[y,x]=O.useState([]),[T,_]=O.useState(null),[w,E]=O.useState("STUDENT"),[I,C]=O.useState("WORK"),[L,P]=O.useState(!1),[R,N]=O.useState(!1),[A,j]=O.useState(!0),[$,B]=O.useState(!1),F=O.useMemo(()=>{const ce=new Map;return s.forEach(he=>{const Ie=ce.get(he.userId)||[];Ie.push(he),ce.set(he.userId,Ie)}),d.map(he=>{const Ie=ce.get(he.id)||[],Se=Ie.length,We=Math.round(Ie.reduce((Me,_e)=>{var gt;return Me+(((gt=_e.metrics)==null?void 0:gt.engagementTime)||0)},0)/60);return{...he,stats:{problemsCompleted:Se,avgScore:0,rawAccuracy:0,totalTime:We}}})},[d,s]),z=O.useMemo(()=>{const ce=new Set;return d.forEach(he=>{he.section&&ce.add(he.section)}),Array.from(ce).sort()},[d]),K=O.useMemo(()=>a.find(ce=>ce.id===T)||null,[a,T]);O.useEffect(()=>{if(P(!1),N(!1),!T)return;const ce=Ra(at(Pe,"question_banks",T)).then(Ie=>{Ie.exists()&&(Ie.data().questions||[]).length>0&&P(!0)}).catch(()=>{}),he=Ra(at(Pe,"reading_materials",T)).then(Ie=>{Ie.exists()&&N(!0)}).catch(()=>{});Promise.all([ce,he]).then(()=>{})},[T]),O.useEffect(()=>{let ce=null;const he=Iee(vA,async Ie=>{Ie?(await Q(Ie),ce=sn(at(Pe,"users",Ie.uid),Se=>{Se.exists()&&e(We=>({...We||{},...Se.data(),id:Ie.uid}))})):(e(null),ce&&ce(),j(!1))});return()=>{he(),ce&&ce()}},[]),O.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===bi.ADMIN)){const ce=De.subscribeToAssignments(i),he=De.subscribeToClassConfigs(x),Ie=[ce,he];return t.role===bi.ADMIN?(Ie.push(De.subscribeToSubmissions(c)),Ie.push(De.subscribeToUsers(h)),Ie.push(De.subscribeToWhitelist(m))):Ie.push(De.subscribeToUserSubmissions(t.id,c)),()=>Ie.forEach(Se=>Se())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),O.useEffect(()=>{(t==null?void 0:t.role)===bi.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),O.useEffect(()=>{var ce;Ele(((ce=t==null?void 0:t.settings)==null?void 0:ce.soundEffects)!==!1)},[(Oe=t==null?void 0:t.settings)==null?void 0:Oe.soundEffects]),Ale((t==null?void 0:t.id)||null,((re=t==null?void 0:t.settings)==null?void 0:re.pushNotifications)===!0);const Q=async ce=>{try{const he=at(Pe,"users",ce.uid),Ie=await Ra(he),Se=await Ra(at(Pe,"allowed_emails",ce.email||"")),Me=(await ce.getIdTokenResult()).claims.admin===!0||ce.email===yle,_e=Se.exists()||Me,gt=Se.exists()?Se.data():null,et=(gt==null?void 0:gt.classType)||Pr.UNCATEGORIZED,pt=(gt==null?void 0:gt.classTypes)||(et!==Pr.UNCATEGORIZED?[et]:[]);if(Ie.exists()){const st=Ie.data(),xe={lastLoginAt:new Date().toISOString(),isWhitelisted:_e};if(Me&&(xe.role="ADMIN"),!_e&&!Me&&(xe.enrolledClasses=[]),_e&&pt.length>0){const be=st.enrolledClasses||[],Be=Array.from(new Set([...be,...pt]));Be.length!==be.length&&(xe.enrolledClasses=Be,(!st.classType||st.classType===Pr.UNCATEGORIZED)&&(xe.classType=pt[0]))}await Tr(he,xe)}else{const st={email:ce.email,name:ce.displayName||"Student",avatarUrl:ce.photoURL||"",role:Me?"ADMIN":"STUDENT",classType:et,enrolledClasses:_e?pt:[],isWhitelisted:_e,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await ea(he,st)}}catch(he){console.error(he)}finally{j(!1)}},G=async()=>{await Ree(vA),e(null),_(null)},X=ce=>{C("WORK"),_(ce)},ne=O.useRef(K),de=O.useRef(t);O.useEffect(()=>{ne.current=K},[K]),O.useEffect(()=>{de.current=t},[t]);const me=async ce=>{const he=de.current,Ie=ne.current;if(!(!he||!Ie||he.role===bi.ADMIN)&&!(ce.engagementTime<10))try{await De.submitEngagement(he.id,he.name,Ie.id,Ie.title,ce,Ie.classType)}catch(Se){console.error("Engagement submission failed:",Se)}},H=O.useMemo(()=>{const ce={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const he=y.find(Ie=>Ie.className===t.classType);if(he)return he.features}return ce},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(A)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return o.jsx(ide,{});if(!t.isWhitelisted&&t.role!==bi.ADMIN)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:o.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[o.jsx(T2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),o.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",cH," for authorization."]}),o.jsx("button",{onClick:G,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const ee=t.role===bi.ADMIN||H.physicsTools,te=t.role===bi.ADMIN||H.communications;return o.jsx(RAe,{children:o.jsx(sde,{children:o.jsx(wle,{children:o.jsxs(o.Fragment,{children:[o.jsx(Sle,{}),ee&&o.jsx(Ode,{onToggleChat:te?()=>B(!$):void 0}),te&&o.jsx(Mde,{user:t,isOpen:$,onClose:()=>B(!1),assignments:a,classConfigs:y,onOpenResource:ce=>{X(ce)}}),o.jsx(Cle,{user:t,onLogout:G,activeTab:r,setActiveTab:n,children:K?o.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[K.title,t.role===bi.ADMIN&&o.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),o.jsxs("div",{className:"flex gap-4 mt-2",children:[o.jsx("button",{onClick:()=>C("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${I==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&o.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[o.jsx(Vo,{className:"w-3.5 h-3.5"})," Review"]}),R&&o.jsxs("button",{onClick:()=>C("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[o.jsx(_o,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&o.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[o.jsx("button",{onClick:()=>E("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),o.jsx("button",{onClick:()=>E("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),o.jsxs("button",{onClick:()=>{_(null),C("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[o.jsx(Noe,{className:"w-4 h-4"})," Exit"]})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[I==="WORK"&&o.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ade,{onComplete:me,contentUrl:K.contentUrl,htmlContent:K.htmlContent,userId:t.id,assignmentId:K.id,classType:K.classType})}),w==="ADMIN"&&t.role===bi.ADMIN&&o.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(Xm,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[o.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:o.jsx(Ts,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(ce=>ce.assignmentId===K.id&&!ce.isArchived).length}),o.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),o.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[o.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),o.jsx("button",{onClick:()=>B(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),I==="REVIEW"&&o.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(PAe,{assignment:K})}),I==="STUDY"&&o.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(UAe,{assignment:K,onComplete:me})})]})]}):o.jsx("div",{className:"h-full",children:o.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===bi.ADMIN&&o.jsxs(o.Fragment,{children:[r==="Dashboard"&&o.jsx(fde,{users:F,assignments:a,submissions:s}),r==="User Management"&&o.jsx(pde,{users:F,whitelistedEmails:p,classConfigs:y,onWhitelist:async(ce,he)=>De.addToWhitelist(ce,he)}),r==="Admin Panel"&&o.jsx(xde,{assignments:a,submissions:s,onCreateAssignment:async ce=>{ce.title&&await De.addAssignment(ce)},classConfigs:y,availableSections:z,onPreviewAssignment:ce=>{E("STUDENT"),X(ce)}}),r==="XP Command"&&o.jsx(kde,{users:d})]}),t.role===bi.STUDENT&&o.jsxs(o.Fragment,{children:[r in Rz&&o.jsx(YTe,{user:t,assignments:a,submissions:s,enabledFeatures:H,onNavigate:n,onStartAssignment:X,studentTab:Rz[r]}),r==="Forensics"&&H.evidenceLocker&&o.jsx(NAe,{user:t}),r==="Physics Lab"&&H.physicsLab&&o.jsx(EAe,{user:t}),r==="Leaderboard"&&H.leaderboard&&o.jsx(IAe,{user:t})]})]},r)})})]})})})})},EX=document.getElementById("root");if(!EX)throw new Error("Could not find root element to mount to");const VAe=fZ.createRoot(EX);VAe.render(o.jsx(ae.StrictMode,{children:o.jsx(zAe,{})}));
